[
  {
    "owner": "pubkey",
    "repo": "rxdb",
    "content": "TITLE: Creating Reactive UI Component with RxDB and React Hooks\nDESCRIPTION: Implements a reactive React component using RxJS Observables with useEffect and useState hooks. The component subscribes to RxDB query changes and automatically updates the UI when the underlying data changes.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/react-indexeddb.md#2025-04-17_snippet_3\n\nLANGUAGE: ts\nCODE:\n```\nimport { useState, useEffect } from 'react';\n\nfunction HeroList({ collection }) {\n  const [heroes, setHeroes] = useState([]);\n\n  useEffect(() => {\n    // create an observable query\n    const query = collection.find();\n    const subscription = query.$.subscribe(newHeroes => {\n      setHeroes(newHeroes);\n    });\n    return () => subscription.unsubscribe();\n  }, [collection]);\n\n  return (\n    <div>\n      <h2>Hero List</h2>\n      <ul>\n        {heroes.map(hero => (\n          <li key={hero.id}>\n            <strong>{hero.name}</strong> - {hero.power}\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Reactive Queries with RxDB in Vue 3 Composition API\nDESCRIPTION: Shows how to create a Vue 3 component that uses RxDB's reactive queries. This component subscribes to live data updates from the heroes collection and automatically updates the UI when the underlying data changes, even across browser tabs.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/vue-indexeddb.md#2025-04-17_snippet_3\n\nLANGUAGE: html\nCODE:\n```\n<template>\n  <div>\n    <h2>Hero List</h2>\n    <ul>\n      <li v-for=\"hero in heroes\" :key=\"hero.id\">\n        <strong>{{ hero.name }}</strong> - {{ hero.power }}\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted } from 'vue';\nimport { initDB } from '@/db';\n\nconst heroes = ref<any[]>([]);\n\nonMounted(async () => {\n  const db = await initDB();\n  // create an observable query\n  const query = db.heroes.find();\n\n  // subscribe to the query\n  query.$.subscribe((newHeroes: any[]) => {\n    heroes.value = newHeroes;\n  });\n});\n</script>\n```\n\n----------------------------------------\n\nTITLE: Implementing Multiple Migration Strategies with Asynchronous Operations\nDESCRIPTION: This example shows how to define multiple migration strategies, including asynchronous operations that fetch data from a remote server. It handles migrations from version 0 to 1 and from version 1 to 2.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/migration-schema.md#2025-04-17_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nmyDatabase.addCollections({\n  messages: {\n    schema: messageSchemaV1,\n    migrationStrategies: {\n      1: function(oldDoc){\n        oldDoc.time = new Date(oldDoc.time).getTime(); // string to unix\n        return oldDoc;\n      },\n      /**\n       * 2 means, this transforms data from version 1 to version 2\n       * this returns a promise which resolves with the new document-data\n       */\n      2: function(oldDoc){\n        // in the new schema (version: 2) we defined 'senderCountry' as required field (string)\n        // so we must get the country of the message-sender from the server\n        const coordinates = oldDoc.coordinates;\n        return fetch('http://myserver.com/api/countryByCoordinates/'+coordinates+'/')\n          .then(response => {\n            const response = response.json();\n            oldDoc.senderCountry = response;\n            return oldDoc;\n          });\n      }\n    }\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Subscribing to Realtime Query Results with RxDB in TypeScript\nDESCRIPTION: This code demonstrates how to use RxDB's reactive queries to build realtime applications. It shows how to subscribe to query results and document field changes to automatically update UI elements when underlying data changes.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/realtime-database.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nawait db.heroes.find({\n  selector: {\n    healthpoints: {\n      $gt: 0\n    }\n  }\n})\n.$ // The $ returns an observable that emits whenever the query's result set changes.\n.subscribe(aliveHeroes => {\n    // Refresh the HTML list each time there are new query results.\n    const newContent = aliveHeroes.map(doc => '<li>' + doc.name + '</li>');\n    document.getElementById('#myList').innerHTML = newContent;\n});\n\n// You can even subscribe to any RxDB document's fields.\nmyDocument.firstName$.subscribe(newName => console.log('name is: ' + newName));\n```\n\n----------------------------------------\n\nTITLE: Optimizing RxDB for High Query Load\nDESCRIPTION: This configuration example shows how to optimize RxDB for handling complex queries efficiently. It uses sharding, worker storage, and IndexedDB, along with a localstorage meta optimizer for improved initialization time.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { getRxStorageSharding } from 'rxdb-premium/plugins/storage-sharding';\nimport { getRxStorageWorker } from 'rxdb-premium/plugins/storage-worker';\nimport { getRxStorageIndexedDB } from 'rxdb-premium/plugins/storage-indexeddb';\nimport { getLocalstorageMetaOptimizerRxStorage } from 'rxdb-premium/plugins/storage-localstorage-meta-optimizer';\n\nconst myDatabase = await createRxDatabase({\n    storage: getLocalstorageMetaOptimizerRxStorage({\n        storage: getRxStorageSharding({\n            storage: getRxStorageWorker({\n                workerInput: 'path/to/worker.js',\n                storage: getRxStorageIndexedDB()\n            })\n        })\n    })\n});\n```\n\n----------------------------------------\n\nTITLE: Performing CRUD Operations with RxDB in React\nDESCRIPTION: Demonstrates basic CRUD operations (Create, Read, Update, Delete) using RxDB in a React application. Showcases inserting documents, querying data, updating records, and removing items from the collection.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/react-indexeddb.md#2025-04-17_snippet_2\n\nLANGUAGE: ts\nCODE:\n```\n// insert\nawait db.heroes.insert({ name: 'Iron Man', power: 'Genius-level intellect' });\n\n// bulk insert\nawait db.heroes.bulkInsert([\n  { name: 'Thor', power: 'God of Thunder' },\n  { name: 'Hulk', power: 'Superhuman Strength' }\n]);\n\n// find and findOne\nconst heroes = await db.heroes.find().exec();\nconst ironMan = await db.heroes.findOne({ selector: { name: 'Iron Man' } }).exec();\n\n// update\nconst doc = await db.heroes.findOne({ selector: { name: 'Hulk' } }).exec();\nawait doc.update({ $set: { power: 'Unlimited Strength' } });\n\n// delete\nconst doc = await db.heroes.findOne({ selector: { name: 'Thor' } }).exec();\nawait doc.remove();\n```\n\n----------------------------------------\n\nTITLE: Implementing RESYNC Flag Handler in TypeScript\nDESCRIPTION: Adds error handling to the EventSource implementation to trigger resyncs when connection is lost. Demonstrates how to emit the RESYNC flag to initiate catch-up synchronization.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-http.md#2025-04-17_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\neventSource.onerror = () => myPullStream$.next('RESYNC');\n```\n\n----------------------------------------\n\nTITLE: Performing CRUD Operations with RxDB in Angular\nDESCRIPTION: Examples of insert, bulk insert, find, update, and delete operations using RxDB in an Angular application.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/angular-indexeddb.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\n// insert\nawait db.heroes.insert({ name: 'Iron Man', power: 'Genius-level intellect' });\n\n// bulk insert\nawait db.heroes.bulkInsert([\n  { name: 'Thor', power: 'God of Thunder' },\n  { name: 'Hulk', power: 'Superhuman Strength' }\n]);\n\n// find and findOne\nconst heroes = await db.heroes.find().exec();\nconst ironMan = await db.heroes.findOne({ selector: { name: 'Iron Man' } }).exec();\n\n// update\nconst doc = await db.heroes.findOne({ selector: { name: 'Hulk' } }).exec();\nawait doc.update({ $set: { power: 'Unlimited Strength' } });\n\n// delete\nconst doc = await db.heroes.findOne({ selector: { name: 'Thor' } }).exec();\nawait doc.remove();\n```\n\n----------------------------------------\n\nTITLE: Creating RxDatabase Instance with Core Configuration\nDESCRIPTION: Shows how to create a new RxDatabase instance with basic configuration options including name, storage, password, and other optional parameters.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-database.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb/plugins/core';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\n\nconst db = await createRxDatabase({\n  name: 'heroesdb',                   // <- name\n  storage: getRxStorageLocalstorage(),       // <- RxStorage\n\n  /* Optional parameters: */\n  password: 'myPassword',             // <- password (optional)\n  multiInstance: true,                // <- multiInstance (optional, default: true)\n  eventReduce: true,                  // <- eventReduce (optional, default: false)\n  cleanupPolicy: {}                   // <- custom cleanup policy (optional) \n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Hot Queries in RxDB\nDESCRIPTION: Shows how to optimize query performance by making queries 'hot' through permanent subscription for frequently accessed data.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/nosql-performance-tips.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\n// wrong ❌\napp.get('/list', (req, res) => {\n    const result = await myCollection.find({/* ... */}).exec();\n    res.send(JSON.stringify(result));\n});\n\n// right ✔️\nconst query = myCollection.find({/* ... */});\nquery.subscribe(); // <- make it hot\n\napp.get('/list', (req, res) => {\n    const result = await query.exec();\n    res.send(JSON.stringify(result));\n});\n```\n\n----------------------------------------\n\nTITLE: Initializing RxDB Database and Collection\nDESCRIPTION: Creates a new RxDB database using localStorage storage engine and adds a collection with a schema. Demonstrates basic document insertion.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/README.md#2025-04-17_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport { \n  createRxDatabase\n} from 'rxdb/plugins/core';\n\n/**\n * For browsers, we use the localstorage based storage.\n * In other JavaScript runtimes, we can use different storages:\n * @link https://rxdb.info/rx-storage.html\n */\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\n\n// create a database\nconst db = await createRxDatabase({\n    name: 'heroesdb', // the name of the database\n    storage: getRxStorageLocalstorage()\n});\n\n// add collections\nawait db.addCollections({\n  heroes: {\n    schema: mySchema\n  }\n});\n\n// insert a document\nawait db.heroes.insert({\n  name: 'Bob',\n  healthpoints: 100\n});\n```\n\n----------------------------------------\n\nTITLE: Generating Text Embeddings with transformers.js\nDESCRIPTION: This function uses the transformers.js library to transform text into vector embeddings using the Xenova/all-MiniLM-L6-v2 model. It creates a pipeline for feature extraction, processes the input text with mean pooling and normalization, and returns the embedding as an array of numbers.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/javascript-vector-database.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { pipeline } from \"@xenova/transformers\";\nconst pipePromise = pipeline('feature-extraction', 'Xenova/all-MiniLM-L6-v2');\nasync function getEmbeddingFromText(text) {\n  const pipe = await pipePromise;\n  const output = await pipe(text, {\n    pooling: \"mean\",\n    normalize: true,\n  });\n  return Array.from(output.data);\n}\n```\n\n----------------------------------------\n\nTITLE: Creating RxDB Database Instance\nDESCRIPTION: Initialize a new RxDB database using localStorage as the storage engine with validation wrapper\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/quickstart.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst myDatabase = await createRxDatabase({\n  name: 'mydatabase',\n  storage: wrappedValidateAjvStorage({\n    storage: getRxStorageLocalstorage()\n  })\n});\n```\n\n----------------------------------------\n\nTITLE: Performing CRUD Operations with RxDB in TypeScript\nDESCRIPTION: Demonstrates how to perform Create, Read, Update, and Delete operations using RxDB in a Vue application. This includes inserting single and multiple documents, querying data, updating documents, and removing documents.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/vue-indexeddb.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n// insert\nawait db.heroes.insert({ id: '1', name: 'Iron Man', power: 'Genius-level intellect' });\n\n// bulk insert\nawait db.heroes.bulkInsert([\n  { id: '2', name: 'Thor', power: 'God of Thunder' },\n  { id: '3', name: 'Hulk', power: 'Superhuman Strength' }\n]);\n\n// find and findOne\nconst heroes = await db.heroes.find().exec();\nconst ironMan = await db.heroes.findOne({ selector: { name: 'Iron Man' } }).exec();\n\n// update\nconst doc = await db.heroes.findOne({ selector: { name: 'Hulk' } }).exec();\nawait doc.update({ $set: { power: 'Unlimited Strength' } });\n\n// delete\nconst thorDoc = await db.heroes.findOne({ selector: { name: 'Thor' } }).exec();\nawait thorDoc.remove();\n```\n\n----------------------------------------\n\nTITLE: Importing RxDB Core Components\nDESCRIPTION: Import essential RxDB modules including core functionality, dev-mode plugin, localStorage storage, and schema validator\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/quickstart.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { addRxPlugin, createRxDatabase } from 'rxdb/plugins/core';\nimport { RxDBDevModePlugin } from 'rxdb/plugins/dev-mode';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\nimport { wrappedValidateAjvStorage } from 'rxdb/plugins/validate-ajv';\n```\n\n----------------------------------------\n\nTITLE: Document Insertion Operations\nDESCRIPTION: Various methods for inserting documents including single insert, conditional insert, and bulk insert operations.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-collection.md#2025-04-17_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nconst doc = await myCollection.insert({\n  name: 'foo',\n  lastname: 'bar'\n});\n```\n\nLANGUAGE: javascript\nCODE:\n```\nconst doc = await myCollection.insertIfNotExists({\n  name: 'foo',\n  lastname: 'bar'\n});\n```\n\nLANGUAGE: javascript\nCODE:\n```\nconst result = await myCollection.bulkInsert([{\n  name: 'foo1',\n  lastname: 'bar1'\n},\n{\n  name: 'foo2',\n  lastname: 'bar2'\n}]);\n```\n\n----------------------------------------\n\nTITLE: Implementing RxDB Sync with a Custom Backend in TypeScript\nDESCRIPTION: A complete example demonstrating how to initialize an RxDB database and set up replication with a custom REST backend. The code shows database creation, schema definition, and configuration of push/pull handlers for synchronization.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/firestore-alternative.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb/plugins/core';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\nimport { replicateRxCollection } from 'rxdb/plugins/replication';\n\nasync function initDB() {\n  const db = await createRxDatabase({\n    name: 'mydb',\n    storage: getRxStorageLocalstorage(),\n    multiInstance: true,\n    eventReduce: true\n  });\n\n  await db.addCollections({\n    tasks: {\n      schema: {\n        title: 'task schema',\n        version: 0,\n        type: 'object',\n        primaryKey: 'id',\n        properties: {\n          id: { type: 'string', maxLength: 100 },\n          title: { type: 'string' },\n          done: { type: 'boolean' }\n        }\n      }\n    }\n  });\n\n  // Start a custom REST-based replication\n  replicateRxCollection({\n    collection: db.tasks,\n    replicationIdentifier: 'my-tasks-rest-api',\n    push: {\n      handler: async (documents) => {\n        // Send docs to your REST endpoint\n        const res = await fetch('https://myapi.com/push', {\n          method: 'POST',\n          body: JSON.stringify({ docs: documents })\n        });\n        // Return conflicts if any\n        return await res.json();\n      }\n    },\n    pull: {\n      handler: async (lastCheckpoint, batchSize) => {\n        // Fetch from your REST endpoint\n        const res = await fetch(`https://myapi.com/pull?checkpoint=${JSON.stringify(lastCheckpoint)}&limit=${batchSize}`);\n        return await res.json();\n      }\n    },\n    live: true // keep watching for changes\n  });\n\n  return db;\n}\n```\n\n----------------------------------------\n\nTITLE: Creating RxDatabase with Custom Reactivity Factory\nDESCRIPTION: This code snippet shows how to create an RxDatabase instance with a custom reactivity factory. It uses the createReactivityFactory function to generate Angular signals for reactive data.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/reactivity.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb/plugins/core';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\nconst database = await createRxDatabase({\n    name: 'mydb',\n    storage: getRxStorageLocalstorage(),\n    reactivity: createReactivityFactory(inject(Injector))\n});\n```\n\n----------------------------------------\n\nTITLE: Defining a Hero Schema in RxDB\nDESCRIPTION: This example demonstrates how to define a schema for a hero collection in RxDB. It includes various field types, a primary key, encrypted fields, and attachment support.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-schema.md#2025-04-17_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"title\": \"hero schema\",\n    \"version\": 0,\n    \"description\": \"describes a simple hero\",\n    \"primaryKey\": \"name\",\n    \"type\": \"object\",\n    \"properties\": {\n        \"name\": {\n            \"type\": \"string\",\n            \"maxLength\": 100 // <- the primary key must have set maxLength\n        },\n        \"color\": {\n            \"type\": \"string\"\n        },\n        \"healthpoints\": {\n            \"type\": \"number\",\n            \"minimum\": 0,\n            \"maximum\": 100\n        },\n        \"secret\": {\n            \"type\": \"string\"\n        },\n        \"birthyear\": {\n            \"type\": \"number\",\n            \"final\": true,\n            \"minimum\": 1900,\n            \"maximum\": 2050\n        },\n        \"skills\": {\n            \"type\": \"array\",\n            \"maxItems\": 5,\n            \"uniqueItems\": true,\n            \"items\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"name\": {\n                        \"type\": \"string\"\n                    },\n                    \"damage\": {\n                        \"type\": \"number\"\n                    }\n                }\n            }\n        }\n    },\n    \"required\": [\n        \"name\",\n        \"color\"\n    ],\n    \"encrypted\": [\"secret\"],\n    \"attachments\": {\n        \"encrypted\": true\n    }\n  }\n```\n\n----------------------------------------\n\nTITLE: Configuring RxDB for Low Latency Writes and Simple Reads\nDESCRIPTION: This example shows how to configure RxDB for low latency on simple reads and writes. It uses memory-mapped storage with OPFS for persistence, optimized for quick data access and storage.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { getLocalstorageMetaOptimizerRxStorage } from 'rxdb-premium/plugins/storage-localstorage-meta-optimizer';\nimport { getMemoryMappedRxStorage } from 'rxdb-premium/plugins/storage-memory-mapped';\nimport { getRxStorageOPFSMainThread } from 'rxdb-premium/plugins/storage-worker';\n\n\nconst myDatabase = await createRxDatabase({\n    storage: getLocalstorageMetaOptimizerRxStorage({\n        storage: getMemoryMappedRxStorage({\n            storage: getRxStorageOPFSMainThread()\n        })\n    })\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Encrypted Storage with RxDB in TypeScript\nDESCRIPTION: This TypeScript example shows how to add encryption to RxDB storage using the encryption-crypto-js plugin. It creates a secure database with password protection and defines which fields should be encrypted in the document schema, providing a way to protect sensitive user data.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/reactjs-storage.md#2025-04-17_snippet_4\n\nLANGUAGE: ts\nCODE:\n```\nimport { createRxDatabase } from 'rxdb';\nimport { wrappedKeyEncryptionCryptoJsStorage } from 'rxdb/plugins/encryption-crypto-js';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\n\n(async function secureSetup() {\n  const encryptedStorage = wrappedKeyEncryptionCryptoJsStorage({\n    storage: getRxStorageLocalstorage()\n  });\n\n  // Provide a password for encryption\n  const db = await createRxDatabase({\n    name: 'secureReactStorage',\n    storage: encryptedStorage,\n    password: 'MyStrongPassword123'\n  });\n\n  await db.addCollections({\n    secrets: {\n      schema: {\n        title: 'secret schema',\n        version: 0,\n        type: 'object',\n        primaryKey: 'id',\n        properties: {\n          id: { type: 'string' },\n          secretInfo: { type: 'string' }\n        },\n        required: ['id'],\n        encrypted: ['secretInfo'] // field to encrypt\n      }\n    }\n  });\n})();\n```\n\n----------------------------------------\n\nTITLE: Installing and Configuring RxDB CRDT Plugin in TypeScript\nDESCRIPTION: This code snippet shows how to install the CRDT plugin, create a database, define a schema with CRDT options, add a collection, insert a document, and run a CRDT operation. It includes importing necessary components, adding the plugin, and setting up the database and schema.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/crdt.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n// import the relevant parts from the CRDT plugin\nimport {\n    getCRDTSchemaPart,\n    RxDBcrdtPlugin\n} from 'rxdb/plugins/crdt';\n\n// add the CRDT plugin to RxDB\nimport { addRxPlugin } from 'rxdb';\naddRxPlugin(RxDBcrdtPlugin);\n\n// create a database\nimport { createRxDatabase } from 'rxdb';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\nconst myDatabase = await createRxDatabase({\n  name: 'heroesdb',\n  storage: getRxStorageLocalstorage()\n});\n\n// create a schema with the CRDT options\nconst mySchema = {\n    version: 0,\n    primaryKey: 'id',\n    type: 'object',\n    properties: {\n        id: {\n            type: 'string',\n            maxLength: 100\n        },\n        points: {\n            type: 'number',\n            maximum: 100,\n            minimum: 0\n        },\n        crdts: getCRDTSchemaPart() // use this field to store the CRDT operations\n    },\n    required: ['id', 'points'],\n    crdt: { // CRDT options\n        field: 'crdts'\n    }\n}\n\n// add a collection\nawait db.addCollections({\n    users: {\n        schema: mySchema\n    }\n});\n\n// insert a document\nconst myDocument = await db.users.insert({id: 'alice', points: 0});\n\n// run a CRDT operation that increments the 'points' by one\nawait myDocument.updateCRDT({\n    ifMatch: {\n        $inc: {\n            points: 1\n        }\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Modifying State Data with RxState\nDESCRIPTION: Demonstrates how to write and modify data in RxState using modifier functions that handle concurrent updates safely.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-state.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n// initially set value to zero\nawait myState.set('myField', v => 0);\n\n// increase value by one\nawait myState.set('myField', v => v + 1);\n\n// update value to be 42\nawait myState.set('myField', v => 42);\n```\n\n----------------------------------------\n\nTITLE: Observing Replication State with RxReplicationState\nDESCRIPTION: Demonstrates how to subscribe to various Observable properties of RxReplicationState to monitor replication events including received documents, sent documents, errors, cancellation status, and active status.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\n// emits each document that was received from the remote\nmyRxReplicationState.received$.subscribe(doc => console.dir(doc));\n\n// emits each document that was send to the remote\nmyRxReplicationState.sent$.subscribe(doc => console.dir(doc));\n\n// emits all errors that happen when running the push- & pull-handlers.\nmyRxReplicationState.error$.subscribe(error => console.dir(error));\n\n// emits true when the replication was canceled, false when not.\nmyRxReplicationState.canceled$.subscribe(bool => console.dir(bool));\n\n// emits true when a replication cycle is running, false when not.\nmyRxReplicationState.active$.subscribe(bool => console.dir(bool));\n```\n\n----------------------------------------\n\nTITLE: Creating a Collection with a Schema in RxDB\nDESCRIPTION: This snippet shows how to add a collection to an RxDB database using a predefined schema. It demonstrates the basic usage of the addCollections method.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-schema.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nawait myDatabase.addCollections({\n    heroes: {\n        schema: myHeroSchema\n    }\n});\nconsole.dir(myDatabase.heroes.name);\n// heroes\n```\n\n----------------------------------------\n\nTITLE: Setting up RxDB Replication for Offline-First Sync in TypeScript\nDESCRIPTION: Configures replication for an RxDB collection to synchronize data between client and server. Defines pull and push handlers for retrieving and sending changes, with support for continuous replication and automatic retries on network failures.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/zero-latency-local-first.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { replicateRxCollection } from 'rxdb/plugins/replication';\n\nasync function syncLocalTasks(db) {\n  replicateRxCollection({\n    collection: db.tasks,\n    replicationIdentifier: 'sync-tasks',\n    // Define how to pull server documents and push local documents\n    pull: {\n      handler: async (lastCheckpoint, batchSize) => {\n        // logic to retrieve updated tasks from the server since lastCheckpoint\n      },\n    },\n    push: {\n      handler: async (docs) => {\n        // logic to post local changes to the server\n      },\n    },\n    live: true,        // continuously replicate\n    retryTime: 5000,   // retry on errors or disconnections\n  });\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Observable State with RxJS\nDESCRIPTION: Demonstrates how to create and subscribe to observable state changes using RxJS integration.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-state.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst observable = myState.get$('myField');\nconst observable = myState.myField$;\n\n// then you can subscribe to that observable\nobservable.subscribe(newValue => {\n    // update the UI\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Secure Browser Storage with RxDB\nDESCRIPTION: This snippet demonstrates how to configure RxDB for storing large amounts of data securely in a browser environment. It combines schema validation, key compression, encryption, and IndexedDB storage.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { wrappedValidateAjvStorage } from 'rxdb/plugins/validate-ajv';\nimport { wrappedKeyCompressionStorage } from 'rxdb/plugins/key-compression';\nimport { wrappedKeyEncryptionCryptoJsStorage } from 'rxdb/plugins/encryption-crypto-js';\nimport { getRxStorageIndexedDB } from 'rxdb-premium/plugins/storage-indexeddb';\n\nconst myDatabase = await createRxDatabase({\n    storage: wrappedValidateAjvStorage({\n        storage: wrappedKeyCompressionStorage({\n            storage: wrappedKeyEncryptionCryptoJsStorage({\n                storage: getRxStorageIndexedDB()\n            })\n        })\n    })\n});\n```\n\n----------------------------------------\n\nTITLE: Creating RxDB Database with LocalStorage Storage in React\nDESCRIPTION: Sets up an RxDB database using localStorage storage, defines a schema for a heroes collection, and adds the collection to the database. This demonstrates the initial configuration for an RxDB database in a React application.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/react-indexeddb.md#2025-04-17_snippet_1\n\nLANGUAGE: ts\nCODE:\n```\nimport { createRxDatabase } from 'rxdb/plugins/core';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\n\n// create a database\nconst db = await createRxDatabase({\n    name: 'heroesdb', // the name of the database\n    storage: getRxStorageLocalstorage()\n});\n\n// Define your schema\nconst heroSchema = {\n  title: 'hero schema',\n  version: 0,\n  description: 'Describes a hero in your app',\n  primaryKey: 'id',\n  type: 'object',\n  properties: {\n    id: {\n      type: 'string',\n      maxLength: 100\n    },\n    name: {\n      type: 'string'\n    },\n    power: {\n      type: 'string'\n    }\n  },\n  required: ['id', 'name']\n};\n\n// add collections\nawait db.addCollections({\n  heroes: {\n    schema: heroSchema\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Real-Time Updates in React Component\nDESCRIPTION: This React component example shows how to use RxDB's signal-based reactivity to render a list of documents that updates automatically when the collection changes.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/optimistic-ui.md#2025-04-17_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport React from 'react';\n\nfunction MyComponent({ myCollection }) {\n  // .find().$$ provides a signal that updates whenever data changes\n  const docsSignal = myCollection.find().$$;\n\n  return (\n    <ul>\n      {docs.map((doc) => (\n        <li key={doc.id}>{doc.name}</li>\n      ))}\n    </ul>\n  );\n}\n\nexport default MyComponent;\n```\n\n----------------------------------------\n\nTITLE: Creating RxDB Database and Collections in Angular\nDESCRIPTION: Defines a schema, creates an RxDB database with localStorage storage, and adds a collection based on the schema.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/angular-indexeddb.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb/plugins/core';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\n\n// Define your schema\nconst heroSchema = {\n  title: 'hero schema',\n  version: 0,\n  description: 'Describes a hero in your app',\n  primaryKey: 'id',\n  type: 'object',\n  properties: {\n    id: {\n      type: 'string',\n      maxLength: 100\n    },\n    name: {\n      type: 'string'\n    },\n    power: {\n      type: 'string'\n    }\n  },\n  required: ['id', 'name']\n};\n\nexport async function initDB() {\n  // Create a database\n  const db = await createRxDatabase({\n    name: 'heroesdb', // the name of the database\n    storage: getRxStorageLocalstorage()\n  });\n\n  // Add collections\n  await db.addCollections({\n    heroes: {\n      schema: heroSchema\n    }\n  });\n\n  return db;\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Up RxState Cleanup\nDESCRIPTION: Shows how to add the cleanup plugin to optimize state operations by merging and clearing old operations.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-state.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { addRxPlugin } from 'rxdb';\nimport { RxDBCleanupPlugin } from 'rxdb/plugins/cleanup';\naddRxPlugin(RxDBCleanupPlugin);\n```\n\n----------------------------------------\n\nTITLE: Initializing RxState with RxDB Database\nDESCRIPTION: Shows how to set up RxState by creating a RxDatabase instance, adding the RxState plugin, and creating state instances with optional namespaces.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-state.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createRxDatabase, addRxPlugin } from 'rxdb';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\n\n// first add the RxState plugin to RxDB\nimport { RxDBStatePlugin } from 'rxdb/plugins/state';\naddRxPlugin(RxDBStatePlugin);\n\nconst database = await createRxDatabase({\n  name: 'heroesdb',\n  storage: getRxStorageLocalstorage(),\n});\n\n// create a state instance\nconst myState = await database.addState();\n\n// you can also create states with a given namespace\nconst myChildState = await database.addState('myNamepsace');\n```\n\n----------------------------------------\n\nTITLE: RxQuery Examples in JavaScript\nDESCRIPTION: Provides various examples of RxQuery usage, including direct search objects, regex matching, composite statements, case-insensitive search, and chained queries.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-query.md#2025-04-17_snippet_10\n\nLANGUAGE: javascript\nCODE:\n```\n// directly pass search-object\nmyCollection.find({\n  selector: {\n    name: { $eq: 'foo' }\n  }\n})\n.exec().then(documents => console.dir(documents));\n\n/*\n * find by using sql equivalent '%like%' syntax\n * This example will fe: match 'foo' but also 'fifoo' or 'foofa' or 'fifoofa'\n * Notice that in RxDB queries, a regex is represented as a $regex string with the $options parameter for flags.\n * Using a RegExp instance is not allowed because they are not JSON.stringify()-able and also\n * RegExp instances are mutable which could cause undefined behavior when the RegExp is mutated\n * after the query was parsed.\n */\nmyCollection.find({\n  selector: {\n    name: { $regex: '.*foo.*' }\n  }\n})\n.exec().then(documents => console.dir(documents));\n\n// find using a composite statement eg: $or\n// This example checks where name is either foo or if name is not existent on the document\nmyCollection.find({\n  selector: { $or: [ { name: { $eq: 'foo' } }, { name: { $exists: false } }] }\n})\n.exec().then(documents => console.dir(documents));\n\n// do a case insensitive search\n// This example will match 'foo' or 'FOO' or 'FoO' etc...\nmyCollection.find({\n  selector: { name: { $regex: '^foo$', $options: 'i' } }\n})\n.exec().then(documents => console.dir(documents));\n\n// chained queries\nmyCollection.find().where('name').eq('foo')\n.exec().then(documents => console.dir(documents));\n```\n\n----------------------------------------\n\nTITLE: Adding Static Methods to RxDB Collection in JavaScript\nDESCRIPTION: Demonstrates how to add static methods to an RxDB collection using the 'statics' object when creating the collection. These methods can be called directly on the collection.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/orm.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst heroes = await myDatabase.addCollections({\n  heroes: {\n    schema: mySchema,\n    statics: {\n      scream: function(){\n          return 'AAAH!!';\n      }\n    }\n  }\n});\n\nconsole.log(heroes.scream());\n// 'AAAH!!'\n```\n\n----------------------------------------\n\nTITLE: Initializing RxDB Local Database with Schema in TypeScript\nDESCRIPTION: Creates a local RxDB instance using localStorage-based storage and defines a tasks collection with a schema. Sets up a reactive query that automatically updates when data changes, enabling zero-latency local operations.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/zero-latency-local-first.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb/plugins/core';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\n\nasync function initZeroLocalDB() {\n  // Create a local RxDB instance using localstorage-based storage\n  const db = await createRxDatabase({\n    name: 'myZeroLocalDB',\n    storage: getRxStorageLocalstorage(),\n    // optional: password for encryption if needed\n  });\n\n  // Define one or more collections\n  await db.addCollections({\n    tasks: {\n      schema: {\n        title: 'task schema',\n        version: 0,\n        type: 'object',\n        primaryKey: 'id',\n        properties: {\n          id:       { type: 'string', maxLength: 100 },\n          title:    { type: 'string' },\n          done:     { type: 'boolean' }\n        }\n      }\n    }\n  });\n\n  // Reactive query - automatically updates on local or remote changes\n  db.tasks\n    .find()\n    .$ // returns an RxJS Observable\n    .subscribe(allTasks => {\n      console.log('All tasks updated:', allTasks);\n    });\n\n  return db;\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Up an RxDB Pipeline for Embedding Generation\nDESCRIPTION: Creates a pipeline that processes documents in batches, generates embeddings for each document's text content, and stores them in the vector collection. This approach ensures efficient processing and synchronization across browser tabs.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/javascript-vector-database.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nconst pipeline = await itemsCollection.addPipeline({\n    identifier: 'my-embeddings-pipeline',\n    destination: vectorCollection,\n    batchSize: 10,\n    handler: async (docs) => {\n        await Promise.all(docs.map(async(doc) => {\n            const embedding = await getVectorFromText(doc.text);\n            await vectorCollection.upsert({\n                id: doc.primary,\n                embedding\n            });\n        }));\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring RxDB Database Instance\nDESCRIPTION: TypeScript code showing how to initialize and configure an RxDB database with a hero collection schema using LocalStorage as the storage engine.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/vue-database.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n// db.js\nimport { createRxDatabase } from 'rxdb';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\n\nexport async function initDatabase() {\n  const db = await createRxDatabase({\n    name: 'heroesdb',\n    storage: getRxStorageLocalstorage(),\n    password: 'myPassword',    // optional encryption password\n    multiInstance: true,       // multi-tab support\n    eventReduce: true          // optimize event handling\n  });\n\n  await db.addCollections({\n    hero: {\n      schema: {\n        title: 'hero schema',\n        version: 0,\n        primaryKey: 'id',\n        type: 'object',\n        properties: {\n          id: { type: 'string' },\n          name: { type: 'string' },\n          healthpoints: { type: 'number' }\n        }\n      }\n    }\n  });\n\n  return db;\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing RxDB with In-Memory Storage\nDESCRIPTION: Example showing how to create an RxDB database instance using in-memory storage. This setup demonstrates the basic configuration needed to initialize an in-memory database using the getRxStorageMemory adapter.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/in-memory-nosql-database.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport {\n    createRxDatabase\n} from 'rxdb';\nimport {\n    getRxStorageMemory\n} from 'rxdb/plugins/storage-memory';\n\nconst db = await createRxDatabase({\n    name: 'exampledb',\n    storage: getRxStorageMemory()\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Peer Validation in WebRTC Replication\nDESCRIPTION: Shows how to implement custom peer validation logic in WebRTC replication to control which peers are allowed to replicate data.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-webrtc.md#2025-04-17_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nconst replicationPool = await replicateWebRTC(\n    {\n        /* ... */\n        isPeerValid: async (peer) => {\n            return true;\n        }\n        pull: {},\n        push: {}\n        /* ... */\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Implementing WebSocket Pull Stream for Real-time Replication\nDESCRIPTION: Shows how to implement a WebSocket-based pull stream for real-time replication, including reconnection logic and handling offline/online transitions.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst pullStream$ = new Subject<RxReplicationPullStreamItem<any, any>>();\nlet firstOpen = true;\nfunction connectSocket() {\n    const socket = new WebSocket('wss://example.com/api/sync/stream');\n    socket.onmessage = event => pullStream$.next(event.data);\n    socket.onclose = () => connectSocket();\n    socket.onerror = () => socket.close();\n\n    socket.onopen = () => {\n        if(firstOpen) {\n            firstOpen = false;\n        } else {\n            pullStream$.next('RESYNC');\n        }\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Handling Replication Errors\nDESCRIPTION: Demonstrates error handling in RxDB replication, including handling specific error codes and implementing client-side responses like forced page reloads.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nreplicationState.error$.subscribe((error) => {\n    if(\n        error.parameters.errors &&\n        error.parameters.errors[0] &&\n        error.parameters.errors[0].code === 426\n    ) {\n        location.reload();\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Initializing RxDB Database with LocalStorage\nDESCRIPTION: Creates an RxDB database that uses the browser's localStorage as the storage mechanism. This is the foundation for storing vector embeddings in a browser-based application.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/javascript-vector-database.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\n\nconst db = await createRxDatabase({\n    name: 'mydatabase',\n    storage: getRxStorageLocalstorage()\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Observable Queries with RxDB in TypeScript\nDESCRIPTION: Demonstrates how to create a reactive query in RxDB that automatically updates UI when data changes. The query filters documents where age is greater than 21 and subscribes to changes using RxJS.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/browser-database.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst query = myCollection.find({\n    selector: {\n        age: {\n            $gt: 21\n        }\n    }\n});\nconst querySub = query.$.subscribe(results => {\n    console.log('got results: ' + results.length);\n});\n```\n\n----------------------------------------\n\nTITLE: Upsert Operations\nDESCRIPTION: Methods for upserting (insert or update) documents including single and bulk operations.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-collection.md#2025-04-17_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nconst doc = await myCollection.upsert({\n  name: 'foo',\n  lastname: 'bar2'\n});\n```\n\nLANGUAGE: javascript\nCODE:\n```\nconst docs = await myCollection.bulkUpsert([\n  {\n    name: 'foo',\n    lastname: 'bar2'\n  },\n  {\n    name: 'bar',\n    lastname: 'foo2'\n  }\n]);\n```\n\n----------------------------------------\n\nTITLE: Initializing RxDB Database with Schema\nDESCRIPTION: Creates an RxDB instance with a hero collection schema, including configuration for multi-tab support and encryption\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/jquery-database.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\n\nasync function initDatabase() {\n  const db = await createRxDatabase({\n    name: 'heroesdb',\n    storage: getRxStorageLocalstorage(),\n    password: 'myPassword',         // optional encryption password\n    multiInstance: true,            // multi-tab support\n    eventReduce: true               // optimizes event handling\n  });\n\n  await db.addCollections({\n    hero: {\n      schema: {\n        title: 'hero schema',\n        version: 0,\n        primaryKey: 'id',\n        type: 'object',\n        properties: {\n          id: { type: 'string' },\n          name: { type: 'string' },\n          points: { type: 'number' }\n        }\n      }\n    }\n  });\n\n  return db;\n}\n```\n\n----------------------------------------\n\nTITLE: Adding a Replication Endpoint to RxServer in TypeScript\nDESCRIPTION: This code demonstrates how to add a replication endpoint to an RxServer. It shows the server-side setup and provides an example of client-side usage for replication.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-server.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\n// > server.ts\nconst endpoint = server.addReplicationEndpoint({\n    name: 'my-endpoint',\n    collection: myServerCollection\n});\n\n// > client.ts\nconst replicationState = await replicateServer({\n    collection: usersCollection,\n    replicationIdentifier: 'my-server-replication',\n    url: 'http://localhost:80/my-endpoint/0',\n    push: {},\n    pull: {}\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Observable Queries with RxDB in Progressive Web Apps\nDESCRIPTION: This code demonstrates how to use RxDB's live queries feature to observe and react to data changes in real-time. The query finds all heroes with health points greater than zero and subscribes to changes in the result set, enabling dynamic updates in the PWA interface.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/progressive-web-app-database.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nawait db.heroes.find({\n  selector: {\n    healthpoints: {\n      $gt: 0\n    }\n  }\n})\n.$ // the $ returns an observable that emits each time the result set of the query changes\n.subscribe(aliveHeroes => console.dir(aliveHeroes));\n```\n\n----------------------------------------\n\nTITLE: Initializing RxDB Database with LocalStorage Storage in TypeScript\nDESCRIPTION: Sets up an RxDB database using LocalStorage-based storage, defines a hero schema, and adds a heroes collection. This code demonstrates database creation, schema definition, and collection addition in a Vue app context.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/vue-indexeddb.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n// db.ts\nimport { createRxDatabase } from 'rxdb';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\n\nexport async function initDB() {\n  const db = await createRxDatabase({\n    name: 'heroesdb',         // the name of the database\n    storage: getRxStorageLocalstorage()\n  });\n\n  // Define your schema\n  const heroSchema = {\n    title: 'hero schema',\n    version: 0,\n    description: 'Describes a hero in your app',\n    primaryKey: 'id',\n    type: 'object',\n    properties: {\n      id: {\n        type: 'string',\n        maxLength: 100\n      },\n      name: {\n        type: 'string'\n      },\n      power: {\n        type: 'string'\n      }\n    },\n    required: ['id', 'name']\n  };\n\n  // add collections\n  await db.addCollections({\n    heroes: {\n      schema: heroSchema\n    }\n  });\n\n  return db;\n}\n```\n\n----------------------------------------\n\nTITLE: Executing Count Query in RxDB (TypeScript)\nDESCRIPTION: Demonstrates how to perform a count query in RxDB to get the number of documents matching a specific condition. It shows both one-time execution and reactive observation of the count result.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-query.md#2025-04-17_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nconst query = myCollection.count({\n  selector: {\n    age: {\n      $gt: 18\n    }\n  }\n  // 'limit' and 'skip' MUST NOT be set for count queries.\n});\n\n// get the count result once\nconst matchingAmount = await query.exec(); // > number\n\n// observe the result\nquery.$.subscribe(amount => {\n  console.log('Currently has ' + amount + ' documents');\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing RxDB with Angular Signals\nDESCRIPTION: Shows how to create a custom reactivity factory for RxDB to work with Angular Signals, and how to use it in the database creation and queries.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/angular-indexeddb.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { RxReactivityFactory } from 'rxdb/plugins/core';\nimport { Signal, untracked, Injector } from '@angular/core';\nimport { toSignal } from '@angular/core/rxjs-interop';\n\nexport function createReactivityFactory(injector: Injector): RxReactivityFactory<Signal<any>> {\n  return {\n    fromObservable(observable$, initialValue) {\n      return untracked(() =>\n        toSignal(observable$, {\n          initialValue,\n          injector,\n          rejectErrors: true\n        })\n      );\n    }\n  };\n}\n\nimport { createRxDatabase } from 'rxdb/plugins/core';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\nimport { inject, Injector } from '@angular/core';\n\nconst database = await createRxDatabase({\n    name: 'mydb',\n    storage: getRxStorageLocalstorage(),\n    reactivity: createReactivityFactory(inject(Injector))\n});\n\nconst heroesSignal = database.heroes.find().$$;\n```\n\nLANGUAGE: html\nCODE:\n```\n<ul>\n  <li *ngFor=\"let hero of heroesSignal()\">\n    {{ hero.name }}\n  </li>\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Implementing RxStorage Localstorage Meta Optimizer with IndexedDB\nDESCRIPTION: Demonstrates how to wrap an existing RxStorage (IndexedDB in this example) with the localStorage meta optimizer to improve initial load performance. The optimizer automatically detects RxDB internal storage instances and replaces them with localStorage-based instances for metadata storage.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-localstorage-meta-optimizer.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    getLocalstorageMetaOptimizerRxStorage\n} from 'rxdb-premium/plugins/storage-localstorage-meta-optimizer';\n\nimport { getRxStorageIndexedDB } from 'rxdb-premium/plugins/storage-indexeddb';\n\n\n/**\n * First wrap the original RxStorage with the optimizer.\n */\nconst optimizedRxStorage = getLocalstorageMetaOptimizerRxStorage({\n\n    /**\n     * Here we use the IndexedDB RxStorage,\n     * it is also possible to use any other RxStorage instead.\n     */\n    storage: getRxStorageIndexedDB()\n});\n\n/**\n * Create the RxDatabase with the wrapped RxStorage. \n */\nconst database = await createRxDatabase({\n    name: 'mydatabase',\n    storage: optimizedRxStorage\n});\n```\n\n----------------------------------------\n\nTITLE: Initializing Remote RxStorage with MessageChannel in TypeScript\nDESCRIPTION: This snippet demonstrates how to set up Remote RxStorage on both client and remote sides using a custom message channel. It shows the creation of the storage instance and database on the client, and the exposure of remote storage on the server.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-remote.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// on the client\nimport { getRxStorageRemote } from 'rxdb/plugins/storage-remote';\nconst storage = getRxStorageRemote({\n    identifier: 'my-id',\n    mode: 'storage',\n    messageChannelCreator: () => Promise.resolve({\n        messages$: new Subject(),\n        send(msg) {\n            // send to remote storage\n        }\n    })\n});\nconst myDb = await createRxDatabase({\n    storage\n});\n\n// on the remote\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\nimport { exposeRxStorageRemote } from 'rxdb/plugins/storage-remote';\nexposeRxStorageRemote({\n    storage: getRxStorageLocalstorage(),\n    messages$: new Subject(),\n    send(msg){\n        // send to other side\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Using findOne() in RxQuery for Single Document Retrieval\nDESCRIPTION: Shows how to use findOne() method in RxQuery to retrieve a single document based on various criteria such as name, sorting, or primary key.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-query.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n// find alice\nconst query = myCollection\n    .findOne({\n      selector: {\n        name: 'alice'\n      }\n    });\n```\n\nLANGUAGE: javascript\nCODE:\n```\n// find the youngest one\nconst query = myCollection\n    .findOne({\n      selector: {},\n      sort: [\n        {age: 'asc'}\n      ]\n    });\n```\n\nLANGUAGE: javascript\nCODE:\n```\n// find one document by the primary key\nconst query = myCollection.findOne('foobar');\n```\n\n----------------------------------------\n\nTITLE: Re-indexing Replicated Data with RxPipeline in TypeScript\nDESCRIPTION: Illustrates using RxPipeline to re-index email data that comes from replication. It maps email receivers to a separate collection for efficient querying.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-pipeline.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst pipeline = await emailCollection.addPipeline({\n    identifier: 'map-email-receivers',\n    destination: emailByReceiverCollection,\n    handler: async (docs) => {\n        for (const doc of docs) {\n            // remove previous mapping\n            await emailByReceiverCollection.find({emailId: doc.primary}).remove();\n            // add new mapping\n            if(!doc.deleted) {\n                await emailByReceiverCollection.bulkInsert(\n                    doc.receivers.map(receiver => ({\n                        emailId: doc.primary,\n                        receiver: receiver\n                    }))\n                );\n            }\n        }\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Optimizing Query Performance with Restrictive Operators\nDESCRIPTION: Shows examples of adding restrictive operators to queries to help the query planner better utilize indexes and improve performance across different query types.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/nosql-performance-tips.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n/**\n * Adding a restrictive operator for an $or query\n * so that it better limits the index space for the time-field.\n */\nconst orQuery = {\n    selector: {\n        $or: [\n            {\n                time: { $gt: 1234 },\n            },\n            {\n                time: { $eg: 1234 },\n                user: { $gt: 'foobar' }\n            },\n        ]\n        time: { $gte: 1234 } // <- add restrictive operator\n    }\n}\n\n/**\n * Adding a restrictive operator for an $regex query\n * so that it better limits the index space for the user-field.\n * We know that all matching fields start with 'foo' so we can\n * tell the query to use that as lower constraint for the index.\n */\nconst regexQuery = {\n    selector: {\n        user: {\n            $regex: '^foo(.*)0-9$', // a complex regex with a ^ in the beginning\n            $gte: 'foo' // <- add restrictive operator\n        }\n    }\n}\n\n/**\n * Adding a restrictive operator for a query on an enum field.\n * so that it better limits the index space for the time-field.\n */\n\nconst enumQuery = {\n    selector: {\n        /**\n         * Here lets assume our status field has the enum type ['idle', 'in-progress', 'done']\n         * so our restrictive operator can exclude all documents with 'done' as status.\n         */\n        status: {\n            $in: {\n                'idle',\n                'in-progress',\n            },\n            $gt: 'done' // <- add restrictive operator on status\n        }\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing a Custom Conflict Handler in RxDB for Local-First Applications\nDESCRIPTION: This TypeScript code demonstrates how to implement a client-side conflict resolution handler in RxDB. It defines isEqual() to detect conflicts by comparing documents and a resolve() function implementing a 'first-on-server-wins' strategy, though it mentions alternatives like merging properties or 'last-write-wins'.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/local-first-future.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { deepEqual } from 'rxdb/plugins/utils';\nexport const myConflictHandler = {\n    /**\n     * isEqual() is used to detect if two documents are\n     * equal. This is used internally to detect conflicts.\n     */\n    isEqual(a, b) {\n        /**\n         * isEqual() is used to detect conflicts or to detect if a\n         * document has to be pushed to the remote.\n         * If the documents are deep equal,\n         * we have no conflict.\n         * Because deepEqual is CPU expensive,\n         * on your custom conflict handler you might only\n         * check some properties, like the updatedAt time or revision-strings\n         * for better performance.\n         */\n        return deepEqual(a, b);\n    },\n    /**\n     * resolve() a conflict. This can be async so\n     * you could even show an UI element to let your user\n     * resolve the conflict manually.\n     */\n    async resolve(i) {\n        /**\n         * In this example we drop the local state and use the server-state.\n         * This basically implements a \"first-on-server-wins\" strategy.\n         * \n         * In your custom conflict handler you could want to merge properties\n         * of the i.realMasterState, i.assumedMasterState and i.newDocumentState\n         * or return i.newDocumentState to have a \"last-write-wins\" strategy.\n         */\n        return i.realMasterState;\n    }\n};\n```\n\n----------------------------------------\n\nTITLE: Using RxDB React Hooks for Querying and Pagination\nDESCRIPTION: This example demonstrates the usage of RxDB React hooks (useRxCollection and useRxQuery) to query a collection and implement infinite pagination for a list of characters.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/react-database.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst collection = useRxCollection('characters');\nconst query = collection.find().where('affiliation').equals('Jedi');\nconst {\n  result: characters,\n  isFetching,\n  fetchMore,\n  isExhausted,\n} = useRxQuery(query, {\n  pageSize: 5,\n  pagination: 'Infinite',\n});\n\nif (isFetching) {\n  return 'Loading...';\n}\n\nreturn (\n  <CharacterList>\n    {characters.map((character, index) => (\n      <Character character={character} key={index} />\n    ))}\n    {!isExhausted && <button onClick={fetchMore}>load more</button>}\n  </CharacterList>\n);\n```\n\n----------------------------------------\n\nTITLE: Creating RxCollections with Configuration Options\nDESCRIPTION: Shows how to create collections using the addCollections() method with various configuration options including schema, ORM functions, and migration strategies.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-collection.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst myCollections = await myDatabase.addCollections({\n  // key = collectionName\n  humans: {\n    schema: mySchema,\n    statics: {},                          // (optional) ORM-functions for this collection\n    methods: {},                          // (optional) ORM-functions for documents\n    attachments: {},                      // (optional) ORM-functions for attachments\n    options: {},                          // (optional) Custom parameters that might be used in plugins\n    migrationStrategies: {},              // (optional)\n    autoMigrate: true,                    // (optional) [default=true]\n    cacheReplacementPolicy: function(){}, // (optional) custom cache replacement policy\n    conflictHandler: function(){}         // (optional) a custom conflict handler can be used\n  },\n  // you can create multiple collections at once\n  animals: {\n    // ...\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Setting Specific Index for RxQuery in TypeScript\nDESCRIPTION: Demonstrates how to specify a particular index to be used for a query to improve performance when the default query planner might not choose the optimal index.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-query.md#2025-04-17_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nconst query = myCollection\n    .findOne({\n      selector: {\n        age: {\n          $gt: 18\n        },\n        gender: {\n          $eq: 'm'\n        }\n      },\n      /**\n       * Because the developer knows that 50% of the documents are 'male',\n       * but only 20% are below age 18,\n       * it makes sense to enforce using the ['gender', 'age'] index to improve performance.\n       * This could not be known by the query planer which might have chosen ['age', 'gender'] instead.\n       */\n      index: ['gender', 'age']\n    });\n```\n\n----------------------------------------\n\nTITLE: Setting up Remote RxStorage with WebSocket Server in TypeScript\nDESCRIPTION: This snippet shows how to create a Remote RxStorage server using WebSocket. It demonstrates two methods: creating a server based on an RxDatabase and creating a server based on a pure RxStorage. It also includes the client-side setup for connecting to the WebSocket server.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-remote.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n// server.js\nimport { getRxStorageMemory } from 'rxdb/plugins/storage-memory';\nimport { startRxStorageRemoteWebsocketServer } from 'rxdb/plugins/storage-remote-websocket';\n\n// either you can create the server based on a RxDatabase\nconst serverBasedOnDatabase = await startRxStorageRemoteWebsocketServer({\n    port: 8080,\n    database: myRxDatabase\n});\n\n// or you can create the server based on a pure RxStorage\nconst serverBasedOn = await startRxStorageRemoteWebsocketServer({\n    port: 8080,\n    storage: getRxStorageMemory()\n});\n```\n\nLANGUAGE: typescript\nCODE:\n```\n// client.js\n\nimport { getRxStorageRemoteWebsocket } from 'rxdb/plugins/storage-remote-websocket';\nconst myDb = await createRxDatabase({\n    storage: getRxStorageRemoteWebsocket({\n        url: 'ws://example.com:8080'\n    })\n});\n```\n\n----------------------------------------\n\nTITLE: Adding Instance Methods to RxDB Collection in JavaScript\nDESCRIPTION: Illustrates how to add instance methods to an RxDB collection. These methods can be called on individual documents (RxDocuments) of the collection.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/orm.md#2025-04-17_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst heroes = await myDatabase.addCollections({\n  heroes: {\n    schema: mySchema,\n    methods: {\n      scream: function(){\n        return 'AAAH!!';\n      }\n    }\n  }\n});\nconst doc = await heroes.findOne().exec();\nconsole.log(doc.scream());\n// 'AAAH!!'\n```\n\n----------------------------------------\n\nTITLE: Configuring RxDB Collection Replication\nDESCRIPTION: Demonstrates how to set up replication for an RxDB collection with push and pull handlers, including configuration for real-time sync, retry logic, and custom deletion handling.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { replicateRxCollection } from 'rxdb/plugins/replication';\nimport {\n    lastOfArray\n} from 'rxdb';\nconst replicationState = await replicateRxCollection({\n    collection: myRxCollection,\n    replicationIdentifier: 'my-rest-replication-to-https://example.com/api/sync',\n    live: true,\n    retryTime: 5 * 1000,\n    waitForLeadership: true,\n    autoStart: true,\n    deletedField: 'deleted',\n    push: {\n        async handler(docs) {\n            const rawResponse = await fetch('https://example.com/api/sync/push', {\n                method: 'POST',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({ docs })\n            });\n            const response = await rawResponse.json();\n            return response;\n        },\n        batchSize: 5,\n        modifier: d => d\n    },\n    pull: {\n        async handler(lastCheckpoint, batchSize) {\n            const minTimestamp = lastCheckpoint ? lastCheckpoint.updatedAt : 0;\n            const response = await fetch(\n                `https://example.com/api/sync/?minUpdatedAt=${minTimestamp}&limit=${batchSize}`\n            );\n            const documentsFromRemote = await response.json();\n            return {\n                documents: documentsFromRemote,\n                checkpoint: documentsFromRemote.length === 0 ? lastCheckpoint : {\n                    id: lastOfArray(documentsFromRemote).id,\n                    updatedAt: lastOfArray(documentsFromRemote).updatedAt\n                }\n            };\n        },\n        batchSize: 10,\n        modifier: d => d,\n        stream$: pullStream$.asObservable()\n    },\n});\n```\n\n----------------------------------------\n\nTITLE: Defining Schema with Dynamic Data in RxDB\nDESCRIPTION: Schema configuration for storing arbitrary data in a sub-field while maintaining required top-level structure. Demonstrates how to implement semi-schemaless storage within RxDB constraints.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-schema.md#2025-04-17_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\n{\n        \"version\": 0,\n        \"primaryKey\": \"id\",\n        \"type\": \"object\",\n        \"properties\": {\n            \"id\": {\n                \"type\": \"string\",\n                \"maxLength\": 100\n            },\n            \"myDynamicData\": {\n                \"type\": \"object\"\n                // Here you can store any JSON data\n                // because it's an open object.\n            }\n        },\n        \"required\": [\"id\"]\n    }\n```\n\n----------------------------------------\n\nTITLE: Performing a One-Time Database Backup with RxDB\nDESCRIPTION: This snippet demonstrates how to create a one-time backup of the entire database to the filesystem. When called multiple times, it will continue from the last checkpoint rather than starting over.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/backup.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst backupOptions = {\n    // if false, a one-time backup will be written\n    live: false,\n    // the folder where the backup will be stored\n    directory: '/my-backup-folder/',\n    // if true, attachments will also be saved\n    attachments: true\n}\nconst backupState = myDatabase.backup(backupOptions);\nawait backupState.awaitInitialBackup();\n\n// call again to run from the last checkpoint\nconst backupState2 = myDatabase.backup(backupOptions);\nawait backupState2.awaitInitialBackup();\n```\n\n----------------------------------------\n\nTITLE: Basic OPFS API Usage in TypeScript\nDESCRIPTION: Demonstrates fundamental OPFS operations including directory creation, file handling, reading/writing data, and proper resource management using FileSystemSyncAccessHandle.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-opfs.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// Access the root directory of the origin's private file system.\nconst root = await navigator.storage.getDirectory();\n\n// Create a subdirectory.\nconst diaryDirectory = await root.getDirectoryHandle('subfolder', {\n  create: true,\n});\n\n// Create a new file named 'example.txt'.\nconst fileHandle = await diaryDirectory.getFileHandle('example.txt', {\n  create: true,\n});\n\n// Create a FileSystemSyncAccessHandle on the file.\nconst accessHandle = await fileHandle.createSyncAccessHandle();\n\n// Write a sentence to the file.\nlet writeBuffer = new TextEncoder().encode('Hello from RxDB');\nconst writeSize = accessHandle.write(writeBuffer);\n\n// Read file and transform data to string.\nconst readBuffer = new Uint8Array(writeSize);\nconst readSize = accessHandle.read(readBuffer, { at: 0 });\nconst contentAsString = new TextDecoder().decode(readBuffer);\n\n// Write an exclamation mark to the end of the file.\nwriteBuffer = new TextEncoder().encode('!');\naccessHandle.write(writeBuffer, { at: readSize });\n\n// Truncate file to 10 bytes.\nawait accessHandle.truncate(10);\n\n// Get the new size of the file.\nconst fileSize = await accessHandle.getSize();\n\n// Persist changes to disk.\nawait accessHandle.flush();\n\n// Always close FileSystemSyncAccessHandle if done, so others can open the file again.\nawait accessHandle.close();\n```\n\n----------------------------------------\n\nTITLE: Defining GraphQL Schema for RxDB Replication\nDESCRIPTION: This snippet defines the GraphQL schema required for RxDB replication, including types for Human documents, input types, queries for pulling data, mutations for pushing data, and subscriptions for streaming changes.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-graphql.md#2025-04-17_snippet_0\n\nLANGUAGE: graphql\nCODE:\n```\ninput HumanInput {\n    id: ID!,\n    name: String!,\n    lastName: String!,\n    updatedAt: Float!,\n    deleted: Boolean!\n}\ntype Human {\n    id: ID!,\n    name: String!,\n    lastName: String!,\n    updatedAt: Float!,\n    deleted: Boolean!\n}\ninput Checkpoint {\n    id: String!,\n    updatedAt: Float!\n}\ntype HumanPullBulk {\n    documents: [Human]!\n    checkpoint: Checkpoint\n}\n\ntype Query {\n    pullHuman(checkpoint: Checkpoint, limit: Int!): HumanPullBulk!\n}\n\ninput HumanInputPushRow {\n    assumedMasterState: HeroInputPushRowT0AssumedMasterStateT0\n    newDocumentState: HeroInputPushRowT0NewDocumentStateT0!\n}\n\ntype Mutation {\n    # Returns a list of all conflicts\n    # If no document write caused a conflict, return an empty list.\n    pushHuman(rows: [HumanInputPushRow!]): [Human]\n}\n\n# headers are used to authenticate the subscriptions\n# over websockets.\ninput Headers {\n    AUTH_TOKEN: String!;\n}\ntype Subscription {\n    streamHuman(headers: Headers): HumanPullBulk!\n}\n\n```\n\n----------------------------------------\n\nTITLE: Setting up RxDB with LocalStorage in TypeScript\nDESCRIPTION: This TypeScript snippet demonstrates how to create an RxDB database using the localStorage storage adapter. It sets up a basic schema for storing hero data with fields for id, name, and power, showcasing the initial database setup and document insertion.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/reactjs-storage.md#2025-04-17_snippet_1\n\nLANGUAGE: ts\nCODE:\n```\nimport { createRxDatabase } from 'rxdb';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\n\n(async function setUpRxDB() {\n  const db = await createRxDatabase({\n    name: 'heroDB',\n    storage: getRxStorageLocalstorage(),\n    multiInstance: false\n  });\n\n  const heroSchema = {\n    title: 'hero schema',\n    version: 0,\n    type: 'object',\n    primaryKey: 'id',\n    properties: {\n      id: { type: 'string' },\n      name: { type: 'string' },\n      power: { type: 'string' }\n    },\n    required: ['id', 'name']\n  };\n\n  await db.addCollections({ heroes: { schema: heroSchema } });\n\n  // Insert a doc\n  await db.heroes.insert({ id: '1', name: 'AlphaHero', power: 'Lightning' });\n\n  // Query docs once\n  const allHeroes = await db.heroes.find().exec();\n  console.log('Heroes: ', allHeroes);\n})();\n```\n\n----------------------------------------\n\nTITLE: Patching Documents with RxQuery in JavaScript\nDESCRIPTION: Shows how to use the patch() method to modify multiple documents that match a query by setting specific field values.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-query.md#2025-04-17_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nconst query = myCollection.find({\n  selector: {\n    age: {\n      $gt: 18\n    }\n  }\n});\nawait query.patch({\n  age: 12 // set the age of every found to 12\n});\n```\n\n----------------------------------------\n\nTITLE: Using migratePromise for Simplified Migration Handling\nDESCRIPTION: This snippet demonstrates a simpler approach to manual migration using the migratePromise method. This is useful when you don't need to show migration progress to the user.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/migration-schema.md#2025-04-17_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nconst migrationPromise = messageCol.migratePromise(10);\nawait migratePromise;\n```\n\n----------------------------------------\n\nTITLE: Implementing Migration Strategy for Embedding Recalculation in RxDB\nDESCRIPTION: Shows how to define a migration strategy that recalculates embeddings and index values when the schema version changes. The strategy is applied to each document during the migration process to update the vector representation based on new model parameters.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/javascript-vector-database.md#2025-04-17_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\nawait myDatabase.addCollections({\n  vectors: {\n    schema: schemaV1,\n    migrationStrategies: {\n      1: function(docData){\n        const embedding = await getEmbedding(docData.body);\n        new Array(5).fill(0).map((_, idx) => {\n            docData['idx' + idx] = euclideanDistance(mySampleVectors[idx], embedding);\n        });\n        return docData;\n      },\n    }\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Vue Component with RxDB Integration\nDESCRIPTION: Vue 3 component using Composition API to display a reactive list of heroes from RxDB database with real-time updates.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/vue-database.md#2025-04-17_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n// HeroList.vue\n<script setup>\nimport { ref, onMounted } from 'vue';\nimport { initDatabase } from '@/db';\n\nconst heroes = ref([]);\nlet db;\n\nonMounted(async () => {\n  db = await initDatabase();\n\n  // Subscribe to an RxDB query\n  db.hero\n    .find({\n      selector: {\n        healthpoints: { $gt: 0 }\n      },\n      sort: [{ name: 'asc' }]\n    })\n    .$ // the dot-$ is an observable that emits whenever the query results change\n    .subscribe((newHeroes) => {\n      heroes.value = newHeroes;\n    });\n});\n</script>\n\n<template>\n  <ul>\n    <li v-for=\"hero in heroes\" :key=\"hero.id\">\n      {{ hero.name }} - HP: {{ hero.healthpoints }}\n    </li>\n  </ul>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Creating a Reactive Component with RxDB and React\nDESCRIPTION: This React component uses RxDB's reactive queries to display a list of heroes that automatically updates when the underlying data changes. It subscribes to the query's Observable and updates the component state whenever new data is emitted.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/reactjs-storage.md#2025-04-17_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport React, { useEffect, useState } from 'react';\n\nfunction HeroList({ collection }) {\n  const [heroes, setHeroes] = useState([]);\n\n  useEffect(() => {\n    const query = collection.find();\n    // query.$ is an RxJS Observable that emits whenever data changes\n    const sub = query.$.subscribe(newHeroes => {\n      setHeroes(newHeroes);\n    });\n\n    return () => sub.unsubscribe(); // clean up subscription\n  }, [collection]);\n\n  return (\n    <ul>\n      {heroes.map(hero => (\n        <li key={hero.id}>\n          {hero.name} - Power: {hero.power}\n        </li>\n      ))}\n    </ul>\n  );\n}\n\nexport default HeroList;\n```\n\n----------------------------------------\n\nTITLE: Implementing Index-Based Vector Search with Similarity in Both Directions\nDESCRIPTION: This function performs a vector search by calculating the distance to the search embedding for each index vector and fetching relevant embeddings in both directions. It uses RxDB's find method with custom selectors and sorting to efficiently retrieve candidates.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/javascript-vector-database.md#2025-04-17_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\nasync function vectorSearchIndexSimilarity(searchEmbedding: number[]) {\n    const docsPerIndexSide = 100;\n    const candidates = new Set<RxDocument>();\n    await Promise.all(\n        new Array(5).fill(0).map(async (_, i) => {\n            const distanceToIndex = euclideanDistance(sampleVectors[i], searchEmbedding);\n            const [docsBefore, docsAfter] = await Promise.all([\n                vectorCollection.find({\n                    selector: {\n                        ['idx' + i]: {\n                            $lt: indexNrToString(distanceToIndex)\n                        }\n                    },\n                    sort: [{ ['idx' + i]: 'desc' }],\n                    limit: docsPerIndexSide\n                }).exec(),\n                vectorCollection.find({\n                    selector: {\n                        ['idx' + i]: {\n                            $gt: indexNrToString(distanceToIndex)\n                        }\n                    },\n                    sort: [{ ['idx' + i]: 'asc' }],\n                    limit: docsPerIndexSide\n                }).exec()\n            ]);\n            docsBefore.map(d => candidates.add(d));\n            docsAfter.map(d => candidates.add(d));\n        })\n    );\n    const docsWithDistance = Array.from(candidates).map(doc => {\n        const distance = euclideanDistance((doc as any).embedding, searchEmbedding);\n        return {\n            distance,\n            doc\n        };\n    });\n    const sorted = docsWithDistance.sort(sortByObjectNumberProperty('distance')).reverse();\n    return {\n        result: sorted.slice(0, 10),\n        docReads\n    };\n}\n```\n\n----------------------------------------\n\nTITLE: Defining and Populating Array References in RxDB\nDESCRIPTION: This example shows how to define a schema with an array of references and how to populate them. It demonstrates a 'human' collection with a 'friends' array referencing other humans.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/population.md#2025-04-17_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nconst myCollection = await myDatabase.addCollections({\n  human: {\n    schema: {\n      version: 0,\n      type: 'object',\n      properties: {\n        name: {\n          type: 'string'\n        },\n        friends: {\n          type: 'array',\n          ref: 'human',\n          items: {\n              type: 'string'\n          }\n        }\n      }\n    }\n  } \n});\n\n//[insert other humans here]\n\nawait myCollection.insert({\n  name: 'Alice',\n  friends: [\n    'Bob',\n    'Carol',\n    'Dave'\n  ]\n});\n\nconst doc = await humansCollection.findOne('Alice').exec();\nconst friends = await myDocument.friends_;\nconsole.dir(friends); //> Array.<RxDocument>\n```\n\n----------------------------------------\n\nTITLE: Using Final Fields in RxDB Schema\nDESCRIPTION: This snippet demonstrates how to define final fields in an RxDB schema. Final fields cannot be modified after creation and are always required. They offer better performance and data integrity.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-schema.md#2025-04-17_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nconst schemaWithFinalAge = {\n  version: 0,\n  primaryKey: 'id',\n  type: 'object',\n  properties: {\n      id: {\n          type: 'string',\n          maxLength: 100 // <- the primary key must have set maxLength\n      },\n      firstName: {\n          type: 'string'\n      },\n      lastName: {\n          type: 'string'\n      },\n      age: {\n          type: 'integer',\n          final: true\n      }\n  },\n  required: ['id']\n};\n```\n\n----------------------------------------\n\nTITLE: Migrating RxDB Storage from LocalStorage to IndexedDB\nDESCRIPTION: This snippet demonstrates how to use the migrateStorage function to migrate data from LocalStorage RxStorage to IndexedDB RxStorage. It includes creating a new database and configuring the migration options.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/migration-storage.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { migrateStorage } from 'rxdb/plugins/migration-storage';\nimport { getRxStorageIndexedDB } from 'rxdb-premium/plugins/storage-indexeddb';\nimport { getRxStorageLocalstorage } from 'rxdb-old/plugins/storage-localstorage';\n\n// create the new RxDatabase\nconst db = await createRxDatabase({\n    name: dbLocation,\n    storage: getRxStorageIndexedDB(),\n    multiInstance: false\n});\n\nawait migrateStorage({\n    database: db as any,\n    /**\n     * Name of the old database,\n     * using the storage migration requires that the\n     * new database has a different name.\n     */\n    oldDatabaseName: 'myOldDatabaseName',\n    oldStorage: getRxStorageLocalstorage(), // RxStorage of the old database\n    batchSize: 500, // batch size\n    parallel: false, // <- true if it should migrate all collections in parallel. False (default) if should migrate in serial\n    afterMigrateBatch: (input: AfterMigrateBatchHandlerInput) => {\n        console.log('storage migration: batch processed');\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Populating References Using Method in RxDB\nDESCRIPTION: This snippet demonstrates how to use the populate() method to retrieve referenced documents. It shows inserting documents and then populating a reference.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/population.md#2025-04-17_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nawait humansCollection.insert({\n  name: 'Alice',\n  bestFriend: 'Carol'\n});\nawait humansCollection.insert({\n  name: 'Bob',\n  bestFriend: 'Alice'\n});\nconst doc = await humansCollection.findOne('Bob').exec();\nconst bestFriend = await doc.populate('bestFriend');\nconsole.dir(bestFriend); //> RxDocument[Alice]\n```\n\n----------------------------------------\n\nTITLE: Inserting and Querying Encrypted Data in RxDB\nDESCRIPTION: Demonstrate how to insert, query, and update encrypted data in an RxDB database. This example shows operations on encrypted fields and how to access decrypted data.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/react-native-encryption.md#2025-04-17_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n(async () => {\n    const db = await initEncryptedDatabase();\n\n    // Insert encrypted data\n    const doc = await db.secureData.insert({\n        id: 'mySecretId',\n        normalField: 'foobar',\n        secretField: 'This is top secret data'\n    });\n\n    // Query encrypted data by its primary key or non-encrypted fields\n    const fetchedDoc = await db.secureData.findOne({\n        selector: {\n            normalField: 'foobar'\n        }\n    }).exec(true);\n    console.log(fetchedDoc.secretField); // 'This is top secret data'\n\n    // Update data\n    await fetchedDoc.patch({\n        secretField: 'Updated secret data'\n    });\n})();\n```\n\n----------------------------------------\n\nTITLE: Implementing Dynamic Chunk-Based Replication in TypeScript with RxDB\nDESCRIPTION: This code snippet demonstrates how to implement dynamic chunk-based replication using RxDB. It includes functions to start and stop replications for specific chunks, and a method to manage active replications based on the player's location. The code uses TypeScript and relies on RxDB's replication features.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication.md#2025-04-17_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nconst activeReplications = {}; // chunkId -> replicationState\n\nfunction startChunkReplication(chunkId) {\n  if (activeReplications[chunkId]) return;\n  const replicationId = 'voxels-chunk-' + chunkId;\n\n  const replicationState = replicateRxCollection({\n    collection: db.voxels,\n    replicationIdentifier: replicationId,\n    pull: {\n      async handler(checkpoint, limit) {\n        const res = await fetch(\n          `/api/voxels/pull?chunkId=${chunkId}&cp=${checkpoint}&limit=${limit}`\n        );\n        /* ... */\n      }\n    },\n    push: {\n      async handler(changedDocs) {\n        const res = await fetch(`/api/voxels/push?chunkId=${chunkId}`);\n        /* ... */\n      }\n    }\n  });\n  activeReplications[chunkId] = replicationState;\n}\n\nfunction stopChunkReplication(chunkId) {\n  const rep = await activeReplications[chunkId];\n  if (rep) {\n    rep.cancel();\n    delete activeReplications[chunkId];\n  }\n}\n\n// Called whenever the player's location changes; \n// dynamically start/stop replication for nearby chunks.\nfunction onPlayerMove(neighboringChunkIds) {\n  neighboringChunkIds.forEach(startChunkReplication);\n  Object.keys(activeReplications).forEach(cid => {\n    if (!neighboringChunkIds.includes(cid)) {\n      stopChunkReplication(cid);\n    }\n  });\n}\n```\n\n----------------------------------------\n\nTITLE: Document Query Operations\nDESCRIPTION: Methods for querying documents including find, findOne, and findByIds operations.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-collection.md#2025-04-17_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nconst olderDocuments = await myCollection\n    .find()\n    .where('age')\n    .gt(18)\n    .exec();\n```\n\nLANGUAGE: javascript\nCODE:\n```\nconst ids = [\n  'alice',\n  'bob',\n  /* ... */\n];\nconst docsMap = await myCollection.findByIds(ids);\n\nconsole.dir(docsMap); // Map(2)\n```\n\n----------------------------------------\n\nTITLE: Updating RxDB Document\nDESCRIPTION: Update an existing document using the patch method to modify specific fields\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/quickstart.md#2025-04-17_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nconst firstDocument = foundDocuments[0];\nawait firstDocument.patch({\n    done: true\n});\n```\n\n----------------------------------------\n\nTITLE: Initializing Memory RxStorage in RxDB with TypeScript\nDESCRIPTION: This snippet demonstrates how to create an RxDB database using the Memory RxStorage. It imports necessary functions from RxDB and its memory storage plugin, then initializes a database named 'exampledb' with the memory storage option.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-memory.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    createRxDatabase\n} from 'rxdb';\nimport {\n    getRxStorageMemory\n} from 'rxdb/plugins/storage-memory';\n\nconst db = await createRxDatabase({\n    name: 'exampledb',\n    storage: getRxStorageMemory()\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Leader-Based Data Fetching in RxDB\nDESCRIPTION: Demonstrates creating a database that uses leader election to efficiently fetch temperature data every 10 seconds. Only the leader tab performs the data fetching operation, preventing redundant API calls across multiple tabs.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/leader-election.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\n\nconst db = await createRxDatabase({\n  name: 'weatherDB',\n  storage: getRxStorageLocalstorage(),\n  password: 'myPassword',\n  multiInstance: true\n});\n\nawait db.addCollections({\n  temperature: {\n    schema: mySchema\n  }\n});\n\ndb.waitForLeadership()\n  .then(() => {\n    console.log('Long lives the king!'); // <- runs when db becomes leader\n    setInterval(async () => {\n      const temp = await fetch('https://example.com/api/temp/');\n      db.temperature.insert({\n          degrees: temp,\n          time: new Date().getTime()\n      });\n    }, 1000 * 10);\n  });\n```\n\n----------------------------------------\n\nTITLE: Initializing RxDB with FoundationDB Storage in TypeScript\nDESCRIPTION: This code snippet demonstrates how to create an RxDB database using FoundationDB as the storage layer. It includes configuration options for API version, cluster file path, and batch size for document fetching.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-foundationdb.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    createRxDatabase\n} from 'rxdb';\nimport {\n    getRxStorageFoundationDB\n} from 'rxdb/plugins/storage-foundationdb';\n\nconst db = await createRxDatabase({\n    name: 'exampledb',\n    storage: getRxStorageFoundationDB({\n        /**\n         * Version of the API of the FoundationDB cluster..\n         * FoundationDB is backwards compatible across a wide range of versions,\n         * so you have to specify the api version.\n         * If in doubt, set it to 720.\n         */\n        apiVersion: 720,\n        /**\n         * Path to the FoundationDB cluster file.\n         * (optional)\n         * If in doubt, leave this empty to use the default location.\n         */\n        clusterFile: '/path/to/fdb.cluster',\n        /**\n         * Amount of documents to be fetched in batch requests.\n         * You can change this to improve performance depending on\n         * your database access patterns.\n         * (optional)\n         * [default=50]\n         */\n        batchSize: 50\n    })\n});\n```\n\n----------------------------------------\n\nTITLE: Creating an Encrypted RxDB Database with Field-Level Encryption in TypeScript\nDESCRIPTION: This code demonstrates how to implement field-level encryption in RxDB using the crypto-js plugin. It creates a secure database with password protection and designates specific fields for encryption in the collection schema.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/offline-database.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb/plugins/core';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\nimport { wrappedKeyEncryptionCryptoJsStorage } from 'rxdb/plugins/encryption-crypto-js';\n\nasync function initSecureDB() {\n  // Wrap the storage with crypto-js encryption\n  const encryptedStorage = wrappedKeyEncryptionCryptoJsStorage({\n    storage: getRxStorageLocalstorage()\n  });\n\n  // Create database with a password\n  const db = await createRxDatabase({\n    name: 'secureOfflineDB',\n    storage: encryptedStorage,\n    password: 'myTopSecretPassword'\n  });\n\n  // Define an encrypted collection\n  await db.addCollections({\n    userSecrets: {\n      schema: {\n        title: 'encrypted user data',\n        version: 0,\n        type: 'object',\n        primaryKey: 'id',\n        properties: {\n          id: { type: 'string' },\n          secretData: { type: 'string' }\n        },\n        required: ['id'],\n        encrypted: ['secretData'] // field is encrypted at rest\n      }\n    }\n  });\n\n  return db;\n}\n```\n\n----------------------------------------\n\nTITLE: Observing Query Results with RxDB in TypeScript\nDESCRIPTION: This snippet demonstrates how to create an observable query in RxDB that emits results whenever the query's result set changes. It filters heroes with health points greater than zero.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/react-database.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nawait db.heroes.find({\n  selector: {\n    healthpoints: {\n      $gt: 0\n    }\n  }\n})\n.$ // the $ returns an observable that emits each time the result set of the query changes\n.subscribe(aliveHeroes => console.dir(aliveHeroes));\n```\n\n----------------------------------------\n\nTITLE: Adding a REST Endpoint to RxServer and Making Requests in TypeScript\nDESCRIPTION: This snippet shows how to add a REST endpoint to an RxServer and provides examples of making requests to the endpoint using both plain fetch and a type-safe client.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-server.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nconst endpoint = await server.addRestEndpoint({\n    name: 'my-endpoint',\n    collection: myServerCollection\n});\n\n// plain http request with fetch\nconst request = await fetch('http://localhost:80/' + endpoint.urlPath + '/query', {\n    method: 'POST',\n    headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ selector: {} })\n});\nconst response = await request.json();\n\n// using the client (optional)\nimport { createRestClient } from 'rxdb-server/plugins/client-rest';\nconst client = createRestClient('http://localhost:80/' + endpoint.urlPath, {/* headers */});\nconst response = await client.query({ selector: {} });\n```\n\n----------------------------------------\n\nTITLE: Using Web-Crypto API for Enhanced Encryption\nDESCRIPTION: This code demonstrates how to use the premium web-crypto plugin for faster and more secure encryption in RxDB, utilizing the browser's native Web Crypto API with IndexedDB storage.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/encryption.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    wrappedKeyEncryptionWebCryptoStorage,\n    createPassword\n} from 'rxdb-premium/plugins/encryption-web-crypto';\nimport { getRxStorageIndexedDB } from 'rxdb-premium/plugins/storage-indexeddb';\n\n// wrap the normal storage with the encryption plugin\nconst encryptedIndexedDbStorage = wrappedKeyEncryptionWebCryptoStorage({\n    storage: getRxStorageIndexedDB()\n});\n\nconst myPasswordObject = {\n    // Algorithm can be oneOf: 'AES-CTR' | 'AES-CBC' | 'AES-GCM'\n    algorithm: 'AES-CTR',\n    password: 'myRandomPasswordWithMin8Length'\n};\n\n// create an encrypted database\nconst db = await createRxDatabase({\n    name: 'mydatabase',\n    storage: encryptedIndexedDbStorage,\n    password: myPasswordObject\n});\n\n/* ... */\n```\n\n----------------------------------------\n\nTITLE: Using Vue Signals with RxDB Queries\nDESCRIPTION: Demonstrates how to use RxDB's custom reactivity factories to create a signal from a query result. This approach allows for direct reading of query results in Vue templates or scripts using Vue's reactivity transforms or signals.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/vue-indexeddb.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nconst heroesSignal = db.heroes.find().$$; // $$ indicates a reactive result\n```\n\n----------------------------------------\n\nTITLE: Implementing Server-Side PullStream Endpoint in TypeScript\nDESCRIPTION: Sets up a server endpoint using Server-Sent Events (SSE) to stream data changes to clients. The endpoint subscribes to a pullStream$ observable and writes events to the response stream.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-http.md#2025-04-17_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\napp.get('/pullStream', (req, res) => {\n    res.writeHead(200, {\n        'Content-Type': 'text/event-stream',\n        'Connection': 'keep-alive',\n        'Cache-Control': 'no-cache'\n    });\n    const subscription = pullStream$.subscribe(event => {\n        res.write('data: ' + JSON.stringify(event) + '\\n\\n');\n    });\n    req.on('close', () => subscription.unsubscribe());\n});\n```\n\n----------------------------------------\n\nTITLE: Basic localStorage Operations in JavaScript\nDESCRIPTION: Demonstrates the core localStorage API methods including setItem for storing data, getItem for retrieving data, removeItem for deleting specific items, and clear for removing all stored data.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/localstorage.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n// Storing data using setItem\nlocalStorage.setItem('username', 'john_doe');\n\n// Retrieving data using getItem\nconst storedUsername = localStorage.getItem('username');\n\n// Removing data using removeItem\nlocalStorage.removeItem('username');\n\n// Clearing all data\nlocalStorage.clear();\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Authentication for CouchDB Replication in RxDB\nDESCRIPTION: This code snippet shows how to create a custom fetch method to add authentication (bearer token) to CouchDB replication requests. It demonstrates cloning options, adding headers, and using the custom fetch method in the replication configuration.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-couchdb.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst myCustomFetch = (url, options) => {\n    const optionsWithAuth = Object.assign({}, options);\n    if(!optionsWithAuth.headers) {\n        optionsWithAuth.headers = {};\n    }\n    optionsWithAuth.headers['Authorization'] ='Basic S0VLU0UhIExFQ0...';\n\n    return fetch(\n        url,\n        optionsWithAuth\n    );\n};\n\nconst replicationState = replicateCouchDB({\n    replicationIdentifier: 'my-couchdb-replication',\n    collection: myRxCollection,\n    url: 'http://example.com/db/humans',\n    fetch: myCustomFetch,\n    pull: {},\n    push: {}\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Optimized Query Observation in RxDB with TypeScript\nDESCRIPTION: Demonstrates how to create and subscribe to an optimized query in RxDB using the EventReduce Algorithm. The query filters documents where age is greater than 21 and subscribes to results updates.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/frontend-database.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst query = myCollection.find({\n    selector: {\n        age: {\n            $gt: 21\n        }\n    }\n});\nconst querySub = query.$.subscribe(results => {\n    console.log('got results: ' + results.length);\n});\n```\n\n----------------------------------------\n\nTITLE: Setting up RxDB with Preact Signals Reactivity\nDESCRIPTION: Configures RxDB to use Preact Signals for reactivity in a React application. This setup allows for fine-grained reactivity when working with RxDB data.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/react-indexeddb.md#2025-04-17_snippet_5\n\nLANGUAGE: ts\nCODE:\n```\nimport { PreactSignalsRxReactivityFactory } from 'rxdb-premium/plugins/reactivity-preact-signals';\nimport { createRxDatabase } from 'rxdb/plugins/core';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\n\nconst database = await createRxDatabase({\n    name: 'mydb',\n    storage: getRxStorageLocalstorage(),\n    reactivity: PreactSignalsRxReactivityFactory\n});\n```\n\n----------------------------------------\n\nTITLE: Creating RxDatabase with Worker RxStorage (TypeScript)\nDESCRIPTION: Demonstrates how to create an RxDatabase instance using Worker RxStorage on the main process. It specifies the worker file path and optional worker configuration.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-worker.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    createRxDatabase\n} from 'rxdb';\nimport { getRxStorageWorker } from 'rxdb-premium/plugins/storage-worker';\n\nconst database = await createRxDatabase({\n    name: 'mydatabase',\n    storage: getRxStorageWorker(\n        {\n            /**\n             * Contains any value that can be used as parameter\n             * to the Worker constructor of thread.js\n             * Most likely you want to put the path to the worker.js file in here.\n             * \n             * @link https://developer.mozilla.org/en-US/docs/Web/API/Worker/Worker\n             */\n            workerInput: 'path/to/worker.js',\n            /**\n             * (Optional) options\n             * for the worker.\n             */\n            workerOptions: {\n                type: 'module',\n                credentials: 'omit'\n            }\n        }\n    )\n});\n```\n\n----------------------------------------\n\nTITLE: Defining RxDB Schema for JSON Documents in JavaScript\nDESCRIPTION: This snippet demonstrates how to define a schema for RxDB using JSONSchema. It includes fields for id, name, done status, and timestamp, with type definitions and constraints.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/json-database.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n// RxDB Schema example\nconst mySchema = {\n    version: 0,\n    primaryKey: 'id', // <- define the primary key for your documents\n    type: 'object',\n    properties: {\n        id: {\n            type: 'string',\n            maxLength: 100 // <- the primary key must have set maxLength\n        },\n        name: {\n            type: 'string',\n            maxLength: 100\n        },\n        done: {\n            type: 'boolean'\n        },\n        timestamp: {\n            type: 'string',\n            format: 'date-time'\n        }\n    },\n    required: ['id', 'name', 'done', 'timestamp']\n}\n```\n\n----------------------------------------\n\nTITLE: Observing RxDB Query Changes\nDESCRIPTION: Subscribe to query results to get real-time updates when matching documents change\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/quickstart.md#2025-04-17_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nconst observable = myDatabase.todos.find({\n    selector: {\n        done: {\n            $eq: false\n        }\n    }\n}).$ // get the observable via RxQuery.$;\nobservable.subscribe(notDoneDocs => {\n    console.log('Currently have ' + notDoneDocs.length + ' things to do');\n});\n```\n\n----------------------------------------\n\nTITLE: Setting Up Firestore Replication with RxDB in TypeScript\nDESCRIPTION: This code snippet shows how to start the replication between RxDB and Firestore using the replicateFirestore function. It configures various options such as pull and push replication, live updates, and server timestamp field.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-firestore.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst replicationState = replicateFirestore(\n    {\n        replicationIdentifier: `https://firestore.googleapis.com/${projectId}`,\n        collection: myRxCollection,\n        firestore: {\n            projectId,\n            database: firestoreDatabase,\n            collection: firestoreCollection\n        },\n        /**\n         * (required) Enable push and pull replication with firestore by\n         * providing an object with optional filter for each type of replication desired.\n         * [default=disabled]\n         */\n        pull: {},\n        push: {},\n        /**\n         * Either do a live or a one-time replication\n         * [default=true]\n         */\n        live: true,\n        /**\n         * (optional) likely you should just use the default.\n         *\n         * In firestore it is not possible to read out\n         * the internally used write timestamp of a document.\n         * Even if we could read it out, it is not indexed which\n         * is required for fetch 'changes-since-x'.\n         * So instead we have to rely on a custom user defined field\n         * that contains the server time which is set by firestore via serverTimestamp()\n         * Notice that the serverTimestampField MUST NOT be part of the collections RxJsonSchema!\n         * [default='serverTimestamp']\n         */\n        serverTimestampField: 'serverTimestamp'\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Using RxDB with RxJS Observables and AsyncPipe in Angular\nDESCRIPTION: Demonstrates how to use RxDB queries with RxJS Observables and the AsyncPipe in Angular components.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/angular-indexeddb.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nconstructor(private dbService: DatabaseService) {\n  this.heroes$ = this.dbService.db.heroes.find({\n    selector: {},\n    sort: [{ name: 'asc' }]\n  }).$;\n}\n```\n\nLANGUAGE: html\nCODE:\n```\n<ul>\n  <li *ngFor=\"let hero of heroes$ | async\">\n    {{ hero.name }}\n  </li>\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Creating an RxDatabase with Key Compression in TypeScript\nDESCRIPTION: This code shows how to create an RxDatabase using the storage with key compression. It imports the createRxDatabase function and initializes a database with the compressed storage.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/key-compression.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb/plugins/core';\nconst db = await createRxDatabase({\n    name: 'mydatabase',\n    storage: storageWithKeyCompression\n});\n```\n\n----------------------------------------\n\nTITLE: Initializing Filesystem Node RxStorage in TypeScript\nDESCRIPTION: This snippet demonstrates how to create an RxDatabase using the Filesystem Node RxStorage. It imports necessary functions from RxDB and the premium plugin, then configures the database with a specified base path and worker settings.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-filesystem-node.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    createRxDatabase\n} from 'rxdb';\nimport {\n    getRxStorageFilesystemNode\n} from 'rxdb-premium/plugins/storage-filesystem-node';\n\nconst myRxDatabase = await createRxDatabase({\n    name: 'exampledb',\n    storage: getRxStorageFilesystemNode({\n        basePath: path.join(__dirname, 'my-database-folder'),\n        /**\n         * Set inWorker=true if you use this RxStorage\n         * together with the WebWorker plugin.\n         */\n        inWorker: false\n    })\n});\n/* ... */\n```\n\n----------------------------------------\n\nTITLE: Observing RxQuery Results in Real-time with JavaScript\nDESCRIPTION: Shows how to use the $ operator to observe query results in real-time, useful for keeping UI in sync with database state.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-query.md#2025-04-17_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nconst query = myCollection.find();\nconst querySub = query.$.subscribe(results => {\n    console.log('got results: ' + results.length);\n});\n// > 'got results: 5'   // BehaviorSubjects emit on subscription\n\nawait myCollection.insert({/* ... */}); // insert one\n// > 'got results: 6'   // $.subscribe() was called again with the new results\n\n// stop watching this query\nquerySub.unsubscribe()\n```\n\n----------------------------------------\n\nTITLE: Using Preact Signals with RxDB Queries in React Components\nDESCRIPTION: Shows how to implement a React component using Preact Signals with RxDB. This approach uses the double-dollar sign ($$) syntax to get reactive signals from queries, providing automatic UI updates without manual subscription management.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/react-indexeddb.md#2025-04-17_snippet_6\n\nLANGUAGE: ts\nCODE:\n```\nfunction HeroList({ collection }) {\n  const heroes = collection.find().$$;\n  return (\n    <ul>\n      {heroes.map(hero => (\n        <li key={hero.id}>{hero.name}</li>\n      ))}\n    </ul>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Real-Time Data in Angular Template\nDESCRIPTION: This Angular template snippet demonstrates how to use RxDB's observables with Angular's async pipe to render a list of documents that updates in real-time as the collection changes.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/optimistic-ui.md#2025-04-17_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<ul *ngIf=\"(myCollection.find().$ | async) as docs\">\n  <li *ngFor=\"let doc of docs\">\n    {{ doc.name }}\n  </li>\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Executing Fulltext Search Queries\nDESCRIPTION: Code demonstrating how to perform fulltext searches using the find method on a FlexSearch instance, with optional search parameters like result limits.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/fulltext-search.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n// find all documents whose searchstring contains \"foobar\"\nconst foundDocuments = await flexSearch.find('foobar');\n\n/**\n * You can also use search options as second parameter\n * @link https://github.com/nextapps-de/flexsearch#search-options\n */\nconst foundDocuments = await flexSearch.find('foobar', { limit: 10 });\n```\n\n----------------------------------------\n\nTITLE: Defining Default Values in RxDB Schema\nDESCRIPTION: This example shows how to set default values for fields in an RxDB schema. Default values can only be defined for first-level fields and are used when inserting documents with unset fields.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-schema.md#2025-04-17_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nconst schemaWithDefaultAge = {\n  version: 0,\n  primaryKey: 'id',\n  type: 'object',\n  properties: {\n      id: {\n          type: 'string',\n          maxLength: 100 // <- the primary key must have set maxLength\n      },\n      firstName: {\n          type: 'string'\n      },\n      lastName: {\n          type: 'string'\n      },\n      age: {\n          type: 'integer',\n          default: 20       // <- default will be used\n      }\n  },\n  required: ['id']\n};\n```\n\n----------------------------------------\n\nTITLE: Migration Plugin Implementation\nDESCRIPTION: Demonstrates how to implement the new separate migration plugin for data migration functionality.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/9.0.0.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { RxDBMigrationPlugin } from 'rxdb/plugins/migration';\naddRxPlugin(RxDBMigrationPlugin);\n```\n\n----------------------------------------\n\nTITLE: Using Composite Primary Keys in RxDB\nDESCRIPTION: This snippet shows how to insert and find documents using composite primary keys in RxDB. It demonstrates the usage of the getPrimaryOfDocumentData method.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-schema.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\n// inserting with composite primary\nawait myRxCollection.insert({\n    // id, <- do not set the id, it will be filled by RxDB\n    firstName: 'foo',\n    lastName: 'bar'\n});\n\n// find by composite primary\nconst id = myRxCollection.schema.getPrimaryOfDocumentData({\n    firstName: 'foo',\n    lastName: 'bar'\n});\nconst myRxDocument = myRxCollection.findOne(id).exec();\n```\n\n----------------------------------------\n\nTITLE: Implementing Event Sourcing Pattern in TypeScript\nDESCRIPTION: Demonstrates how to implement an event sourcing pattern to avoid conflicts in offline-first applications by storing changes as individual events rather than updating a single document state. Each change is recorded with a timestamp and the balance modification amount.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/downsides-of-offline-first.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// create one new document for each change to the users balance\n{id: new Date().toJSON(), change: 100} // balance increased by $100\n{id: new Date().toJSON(), change: -50} // balance decreased by $50\n{id: new Date().toJSON(), change: 200} // balance increased by $200\n```\n\n----------------------------------------\n\nTITLE: Observing RxDB Document Fields\nDESCRIPTION: Subscribe to individual document field changes using the $ operator\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/quickstart.md#2025-04-17_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nmyDocument.done$.subscribe(isDone => {\n    console.log('done: ' + isDone);\n});\n```\n\n----------------------------------------\n\nTITLE: Creating RxDatabase with Expo SQLite (Async API)\nDESCRIPTION: This snippet demonstrates how to create an RxDatabase using Expo SQLite with the async API in the latest Expo SDK version. It imports necessary modules and configures the database with SQLite storage.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-sqlite.md#2025-04-17_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    createRxDatabase\n} from 'rxdb';\nimport {\n    getRxStorageSQLite,\n    getSQLiteBasicsExpoSQLiteAsync\n} from 'rxdb-premium/plugins/storage-sqlite';\nimport * as SQLite from 'expo-sqlite';\n\nconst myRxDatabase = await createRxDatabase({\n    name: 'exampledb',\n    multiInstance: false,\n    storage: getRxStorageSQLite({\n        sqliteBasics: getSQLiteBasicsExpoSQLiteAsync(SQLite.openDatabaseAsync)\n    })\n});\n```\n\n----------------------------------------\n\nTITLE: Initializing CouchDB Replication in RxDB\nDESCRIPTION: This snippet demonstrates how to start CouchDB replication using the replicateCouchDB function. It includes various configuration options such as replication identifier, collection, URL, live replication, custom fetch method, and pull/push settings.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-couchdb.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { replicateCouchDB } from 'rxdb/plugins/replication-couchdb';\n\nconst replicationState = replicateCouchDB({\n    replicationIdentifier: 'my-couchdb-replication',\n    collection: myRxCollection,\n    url: 'http://example.com/db/humans',\n    live: true,\n    fetch: myCustomFetchMethod,\n    pull: {\n        batchSize: 60,\n        modifier: docData => {/* ... */},\n        heartbeat: 60000\n    },\n    push: {\n        batchSize: 60,\n        modifier: docData => {/* ... */}\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Creating RxDatabase with SQLite Capacitor\nDESCRIPTION: This snippet demonstrates how to create an RxDatabase using SQLite Capacitor. It imports necessary modules, sets up the SQLite connection, and configures the database with SQLite storage.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-sqlite.md#2025-04-17_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    createRxDatabase\n} from 'rxdb';\nimport {\n    getRxStorageSQLite,\n    getSQLiteBasicsCapacitor\n} from 'rxdb-premium/plugins/storage-sqlite';\n\n/**\n * Import SQLite from the capacitor plugin.\n */\nimport {\n    CapacitorSQLite,\n    SQLiteConnection\n} from '@capacitor-community/sqlite';\nimport { Capacitor } from '@capacitor/core';\n\nconst sqlite = new SQLiteConnection(CapacitorSQLite);\n\nconst myRxDatabase = await createRxDatabase({\n    name: 'exampledb',\n    storage: getRxStorageSQLite({\n        /**\n         * Different runtimes have different interfaces to SQLite.\n         * For example in node.js we have a callback API,\n         * while in capacitor sqlite we have Promises.\n         * So we need a helper object that is capable of doing the basic\n         * sqlite operations.\n         */\n        sqliteBasics: getSQLiteBasicsCapacitor(sqlite, Capacitor)\n    })\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing a WebWorker for Parallel Embedding Generation\nDESCRIPTION: Creates a WebWorker that handles the embedding generation process. The worker listens for messages with text content, generates embeddings, and sends the results back to the main thread.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/javascript-vector-database.md#2025-04-17_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\n// worker.js\nimport { getVectorFromText } from './vector.js';\nonmessage = async (e) => {\n    const embedding = await getVectorFromText(e.data.text);\n    postMessage({\n        id: e.data.id,\n        embedding\n    });\n};\n```\n\n----------------------------------------\n\nTITLE: Initializing RxDB Database in JavaScript\nDESCRIPTION: This code snippet shows how to create and initialize an RxDB database in a React application. It sets up a database named 'heroesdb' using localStorage as the storage engine.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/react-database.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\n\nconst db = await createRxDatabase({\n  name: 'heroesdb',                   // <- name\n  storage: getRxStorageLocalstorage(),       // <- RxStorage\n  password: 'myPassword',             // <- password (optional)\n  multiInstance: true,                // <- multiInstance (optional, default: true)\n  eventReduce: true,                  // <- eventReduce (optional, default: false)\n  cleanupPolicy: {}                   // <- custom cleanup policy (optional) \n});\n```\n\n----------------------------------------\n\nTITLE: Monitoring Database-wide Migration States in RxDB\nDESCRIPTION: This code shows how to monitor migration states across all collections in a database. This is useful for applications that dynamically add collections and need to show overall migration progress.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/migration-schema.md#2025-04-17_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nconst allStatesObservable = myDatabase.migrationStates();\nallStatesObservable.subscribe(allStates => {\n  allStates.forEach(migrationState => {\n    console.log(\n      'migration state of ' +\n      migrationState.collection.name\n    );\n  });\n});\n```\n\n----------------------------------------\n\nTITLE: Creating Push Query Builder for RxDB GraphQL Replication\nDESCRIPTION: This JavaScript function creates a push query builder for RxDB GraphQL replication. It generates a GraphQL mutation query to send changed documents to the server.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-graphql.md#2025-04-17_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nconst pushQueryBuilder = rows => {\n    const query = `\n    mutation PushHuman($writeRows: [HumanInputPushRow!]) {\n        pushHuman(writeRows: $writeRows) {\n            id\n            name\n            age\n            updatedAt\n            deleted\n        }\n    }\n    `;\n    const variables = {\n        writeRows: rows\n    };\n    return {\n        query,\n        operationName: 'PushHuman',\n        variables\n    };\n};\n```\n\n----------------------------------------\n\nTITLE: Setting up RxDB with SQLite Storage in Node.js\nDESCRIPTION: This code shows how to initialize an RxDB database using SQLite as the storage engine. It uses the SQLite RxStorage plugin and requires the sqlite3 package.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/nodejs-database.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb';\nimport {\n    getRxStorageSQLite,\n    getSQLiteBasicsNode\n} from 'rxdb-premium/plugins/storage-sqlite';\nimport sqlite3 from 'sqlite3';\nconst myRxDatabase = await createRxDatabase({\n    name: 'path/to/database/file/foobar.db',\n    storage: getRxStorageSQLite({\n        sqliteBasics: getSQLiteBasicsNode(sqlite3)\n    })\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Basic Migration Strategy in RxDB\nDESCRIPTION: This code demonstrates how to define a migration strategy when creating a collection. The strategy transforms data from version 0 to version 1, converting time strings to unix timestamps.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/migration-schema.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nmyDatabase.addCollections({\n  messages: {\n    schema: messageSchemaV1,\n    migrationStrategies: {\n      // 1 means, this transforms data from version 0 to version 1\n      1: function(oldDoc){\n        oldDoc.time = new Date(oldDoc.time).getTime(); // string to unix\n        return oldDoc;\n      }\n    }\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Document Removal Operations\nDESCRIPTION: Methods for removing documents including bulk removal operations.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-collection.md#2025-04-17_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nconst result = await myCollection.bulkRemove([\n  'primary1',\n  'primary2'\n]);\n```\n\n----------------------------------------\n\nTITLE: Implementing postInsert hooks in RxDB\nDESCRIPTION: Examples of adding postInsert hooks to an RxDB collection. Shows series, parallel, and async implementation patterns.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/middleware.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n// series\nmyCollection.postInsert(function(plainData, rxDocument){\n\n}, false);\n\n// parallel\nmyCollection.postInsert(function(plainData, rxDocument){\n\n}, true);\n\n// async\nmyCollection.postInsert(function(plainData, rxDocument){\n  return new Promise(res => setTimeout(res, 100));\n}, false);\n```\n\n----------------------------------------\n\nTITLE: Integrating RxState with Angular Signals\nDESCRIPTION: Shows how to set up RxState with Angular's reactive signals using a custom reactivity factory.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-state.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { RxReactivityFactory, createRxDatabase } from 'rxdb/plugins/core';\nimport { toSignal } from '@angular/core/rxjs-interop';\nconst reactivityFactory: RxReactivityFactory<ReactivityType> = {\n    fromObservable(obs, initialValue) {\n        return toSignal(obs, { initialValue });\n    }\n};\nconst database = await createRxDatabase({\n    name: 'mydb',\n    storage: getRxStorageLocalstorage(),\n    reactivity: reactivityFactory\n});\nconst myState = await database.addState();\n\nconst mySignal = myState.get$$('myField');\nconst mySignal = myState.myField$$;\n```\n\n----------------------------------------\n\nTITLE: Migrating Document Attachments in RxDB\nDESCRIPTION: This example demonstrates how to handle attachments during migration. It shows strategies for keeping attachments unchanged, removing all attachments, or updating specific attachment data.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/migration-schema.md#2025-04-17_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createBlob } from 'rxdb';\nconst migrationStrategies = {\n      1: async function(oldDoc){\n        // do nothing with _attachments to keep all attachments and have them in the new collection version.\n        return oldDoc;\n      },\n      2: async function(oldDoc){\n        // set _attachments to an empty object to delete all existing ones during the migration.\n        oldDoc._attachments = {};\n        return oldDoc;\n      }\n      3: async function(oldDoc){\n        // update the data field of a single attachment to change its data. \n        oldDoc._attachments.myFile.data = await createBlob(\n          'my new text',\n          oldDoc._attachments.myFile.content_type\n        );\n        return oldDoc;\n      }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Local RxDB Database and Adding a Collection\nDESCRIPTION: This TypeScript snippet demonstrates how to create a local RxDB database using localStorage as the storage engine, and then add a 'notes' collection with a defined schema.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/firebase-realtime-database-alternative.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb/plugins/core';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\n\nconst db = await createRxDatabase({\n  name: 'myLocalDB',\n  storage: getRxStorageLocalstorage()\n});\n\nawait db.addCollections({\n  notes: {\n    schema: {\n      title: 'notes schema',\n      version: 0,\n      primaryKey: 'id',\n      type: 'object',\n      properties: {\n        id: { type: 'string', maxLenght: 100 },\n        content: { type: 'string' }\n      }\n    }\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Updating Multiple Documents with RxQuery in JavaScript\nDESCRIPTION: Demonstrates how to use the update() method to modify multiple documents that match a query, requires the update plugin.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-query.md#2025-04-17_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\n// to use the update() method, you need to add the update plugin.\nimport { RxDBUpdatePlugin } from 'rxdb/plugins/update';\naddRxPlugin(RxDBUpdatePlugin);\n\nconst query = myCollection.find({\n  selector: {\n    age: {\n      $gt: 18\n    }\n  }\n});\nawait query.update({\n    $inc: {\n        age: 1 // increases age of every found document by 1\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Creating an RxCollection with Encrypted Fields\nDESCRIPTION: This snippet shows how to define a schema with encrypted fields by adding property names to the 'encrypted' array in the schema definition.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/encryption.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst schema = {\n    version: 0,\n  primaryKey: 'id',\n  type: 'object',\n  properties: {\n      id: {\n          type: 'string',\n          maxLength: 100\n      },\n      secret: {\n          type: 'string'\n      },\n  },\n  required: ['id'],\n  encrypted: ['secret']\n};\n\nawait db.addCollections({\n    myDocuments: {\n        schema\n    }\n})\n```\n\n----------------------------------------\n\nTITLE: Querying Documents with RxDB NoSQL Engine\nDESCRIPTION: Example of using RxDB's NoSQL query engine to find documents matching specific criteria. This snippet demonstrates filtering todos based on their completion status using the find() method with a selector.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/ionic-database.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst foundDocuments = await myDatabase.todos.find({\n    selector: {\n        done: {\n            $eq: false\n        }\n    }\n}).exec();\n```\n\n----------------------------------------\n\nTITLE: Configuring WebRTC P2P Replication\nDESCRIPTION: Demonstrates how to configure and start WebRTC P2P replication with RxDB, including topic setup and connection handler configuration.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-webrtc.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst replicationPool = await replicateWebRTC(\n    {\n        collection: db.todos,\n        topic: 'my-users-pool',\n        connectionHandlerCreator: getConnectionHandlerSimplePeer({\n            signalingServerUrl: 'wss://signaling.rxdb.info/',\n            wrtc: require('node-datachannel/polyfill'),\n            webSocketConstructor: require('ws').WebSocket\n        }),\n        pull: {},\n        push: {}\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Updating Authorization Headers in RxDB Server Replication\nDESCRIPTION: This snippet demonstrates how to use the unauthorized$ observable to update authentication headers when the server indicates that the current auth data is invalid.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-server.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nreplicationState.unauthorized$.subscribe(() => {\n    replicationState.setHeaders({\n        Authorization: 'Bearer S0VLU0UhI...'\n    });\n});\n```\n\n----------------------------------------\n\nTITLE: Creating a Compressed RxCollection in TypeScript\nDESCRIPTION: This snippet illustrates how to create a compressed RxCollection. It defines a schema with key compression enabled and adds a collection to the database using this schema.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/key-compression.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst mySchema = {\n  keyCompression: true, // set this to true, to enable the keyCompression\n  version: 0,\n  primaryKey: 'id',\n  type: 'object',\n  properties: {\n      id: {\n          type: 'string',\n          maxLength: 100 // <- the primary key must have set maxLength\n      }\n      /* ... */\n  }\n};\nawait db.addCollections({\n    docs: {\n        schema: mySchema\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing a Batched Cursor for Efficient IndexedDB Querying\nDESCRIPTION: This code snippet shows how to implement a batched cursor using the getAll() method introduced in IndexedDB 2.0. It efficiently queries documents with an age greater than 25, using batches to improve performance.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/slow-indexeddb.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst maxAge = 25;\nlet result = [];\nconst tx: IDBTransaction = db.transaction([storeName], 'readonly', TRANSACTION_SETTINGS);\nconst store = tx.objectStore(storeName);\nconst index = store.index('age-index');\nlet lastDoc;\nlet done = false;\n/**\n * Run the batched cursor until all results are retrieved\n * or the end of the index is reached.\n */\nwhile (done === false) {\n    await new Promise((res, rej) => {\n        const range = IDBKeyRange.bound(\n          /**\n           * If we have a previous document as checkpoint,\n           * we have to continue from it's age and id values.\n           */\n            [\n                lastDoc ? lastDoc.age : -Infinity,\n                lastDoc ? lastDoc.id : -Infinity,\n            ],\n            [\n                maxAge + 0.00000001,\n                String.fromCharCode(65535)\n            ],\n            true,\n            false\n        );\n        const openCursorRequest = index.getAll(range, batchSize);\n        openCursorRequest.onerror = err => rej(err);\n        openCursorRequest.onsuccess = e => {\n            const subResult: TestDocument[] = e.target.result;\n            lastDoc = lastOfArray(subResult);\n            if (subResult.length === 0) {\n                done = true;\n            } else {\n                result = result.concat(subResult);\n            }\n            res();\n        };\n    });\n}\nconsole.dir(result);\n```\n\n----------------------------------------\n\nTITLE: Implementing RxDB NATS Replication in TypeScript\nDESCRIPTION: TypeScript code snippet demonstrating how to set up and start NATS replication for an RxDB collection. It includes configuration for stream name, subject prefix, connection details, and replication options.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-nats.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    replicateNats\n} from 'rxdb/plugins/replication-nats';\n\nconst replicationState = replicateNats({\n    collection: myRxCollection,\n    replicationIdentifier: 'my-nats-replication-collection-A',\n    // in NATS, each stream need a name\n    streamName: 'stream-for-replication-A',\n    /**\n     * The subject prefix determines how the documents are stored in NATS.\n     * For example the document with id 'alice' will have the subject 'foobar.alice'\n     */\n    subjectPrefix: 'foobar',\n    connection: { servers: 'localhost:4222' },\n    live: true,\n    pull: {\n        batchSize: 30\n    },\n    push: {\n        batchSize: 30\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring RxDB Collection with Key Compression in TypeScript\nDESCRIPTION: This snippet demonstrates how to set up an RxDB collection with key compression enabled. It defines a 'logs' collection with a schema that includes an 'id', 'message', and 'timestamp' field. Key compression is activated to reduce storage usage and improve replication speed.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/zero-latency-local-first.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nawait db.addCollections({\n  logs: {\n    schema: {\n      title: 'log schema',\n      version: 0,\n      keyCompression: true,\n      type: 'object',\n      primaryKey: 'id',\n      properties: {\n        id:         { type: 'string'. maxLength: 100 },\n        message:    { type: 'string' },\n        timestamp:  { type: 'number' }\n      }\n    }\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Replication Control Methods\nDESCRIPTION: Various methods for controlling replication including reSync(), manual interval reSync, cancel(), pause(), and remove()\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication.md#2025-04-17_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\n// Simple reSync\nmyRxReplicationState.reSync();\n\n// Interval reSync\nsetInterval(() => myRxReplicationState.reSync(), 10 * 1000);\n\n// Cancel replication\nawait myRxReplicationState.cancel();\n\n// Pause and restart\nawait myRxReplicationState.pause();\nawait myRxReplicationState.start(); // restart\n\n// Remove replication state\nawait myRxReplicationState.remove();\n```\n\n----------------------------------------\n\nTITLE: Adding Attachment Methods to RxDB Collection in JavaScript\nDESCRIPTION: Shows how to add attachment methods to an RxDB collection. These methods can be called on the RxAttachments of the RxDocuments in the collection.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/orm.md#2025-04-17_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nconst heroes = await myDatabase.addCollections({\n  heroes: {\n    schema: mySchema,\n    attachments: {\n      scream: function(){\n          return 'AAAH!!';\n      }\n    }\n  }\n});\nconst doc = await heroes.findOne().exec();\nconst attachment = await doc.putAttachment({\n    id: 'cat.txt',\n    data: 'meow I am a kitty',\n    type: 'text/plain'\n});\nconsole.log(attachment.scream());\n// 'AAAH!!'\n```\n\n----------------------------------------\n\nTITLE: RxDB Pipeline Handler for Indexed Embeddings\nDESCRIPTION: Implements a pipeline handler that processes documents by calculating and storing index values using the Distance to Samples method. Calculates distances between embeddings and sample vectors for indexing.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/javascript-vector-database.md#2025-04-17_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nimport { euclideanDistance } from 'rxdb/plugins/vector';\nconst sampleVectors: number[][] = [/* the index vectors */];\nconst pipeline = await itemsCollection.addPipeline({\n    handler: async (docs) => {\n        await Promise.all(docs.map(async(doc) => {\n            const embedding = await getEmbedding(doc.text);\n            const docData = { id: doc.primary, embedding };\n            // calculate the distance to all samples and store them in the index fields\n            new Array(5).fill(0).map((_, idx) => {\n                const indexValue = euclideanDistance(sampleVectors[idx], embedding);\n                docData['idx' + idx] = indexNrToString(indexValue);\n            });\n            await vectorCollection.upsert(docData);\n        }));\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Vue Template Using RxDB Signal\nDESCRIPTION: Shows how to use an RxDB signal directly in a Vue template. This approach allows for automatic UI updates when the underlying data changes, leveraging Vue's reactivity system with RxDB's reactive queries.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/vue-indexeddb.md#2025-04-17_snippet_5\n\nLANGUAGE: html\nCODE:\n```\n<template>\n  <div>\n    <h2>Hero List</h2>\n    <ul>\n      <!-- we read heroesSignal.value which is always up to date -->\n      <li v-for=\"hero in heroesSignal.value\" :key=\"hero.id\">\n        <strong>{{ hero.name }}</strong> - {{ hero.power }}\n      </li>\n    </ul>\n  </div>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Implementing a Hybrid In-Memory and Persistent RxDB Storage in Node.js\nDESCRIPTION: This code demonstrates how to set up a hybrid storage solution using the memory-mapped storage with FoundationDB as the persistence layer. This approach combines the performance of in-memory storage with data persistence.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/nodejs-database.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb';\nimport { getRxStorageFoundationDB } from 'rxdb/plugins/storage-foundationdb';\nimport { getMemoryMappedRxStorage } from 'rxdb-premium/plugins/storage-memory-mapped';\n\nconst db = await createRxDatabase({\n    name: 'exampledb',\n    storage: getMemoryMappedRxStorage({\n        storage: getRxStorageFoundationDB({\n            apiVersion: 620,\n            clusterFile: '/path/to/fdb.cluster'\n        })\n    })\n});\n```\n\n----------------------------------------\n\nTITLE: Creating and Starting an RxServer with Express Adapter in TypeScript\nDESCRIPTION: This snippet demonstrates how to create an RxServer using the createRxServer function with the Express adapter. It shows the basic setup and how to start the server after adding endpoints.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-server.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxServer } from 'rxdb-server/plugins/server';\n\n/**\n * We use the express adapter which is the one that comes with RxDB core\n */\nimport { RxServerAdapterExpress } from 'rxdb-server/plugins/adapter-express';\n\nconst myServer = await createRxServer({\n    database: myRxDatabase,\n    adapter: RxServerAdapterExpress,\n    port: 443\n});\n\n// add endpoints here (see below)\n\n// after adding the endpoints, start the server\nawait myServer.start();\n```\n\n----------------------------------------\n\nTITLE: Deleting Documents with CRDT in TypeScript\nDESCRIPTION: This code shows two equivalent ways to delete a document using CRDT operations: by setting the _deleted field to true or by using the remove() method.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/crdt.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nawait doc.updateCRDT({\n    ifMatch: {\n        $set: {\n            _deleted: true\n        }\n    }\n});\n\n// OR\nawait doc.remove();\n```\n\n----------------------------------------\n\nTITLE: Using RxDB in Dart Flutter Code\nDESCRIPTION: Dart code demonstrating how to connect to the RxDB JavaScript process, access collections, insert documents, create queries, and subscribe to reactive changes in a Flutter application.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/flutter-database.md#2025-04-17_snippet_3\n\nLANGUAGE: dart\nCODE:\n```\nimport 'package:rxdb/rxdb.dart';\n\n// start the javascript process and connect to the database\nRxDatabase database = await getRxDatabase(\"javascript/dist/index.js\", databaseName);\n\n// get a collection\nRxCollection collection = database.getCollection('heroes');\n\n// insert a document\nRxDocument document = await collection.insert({\n    \"id\": \"zflutter-${DateTime.now()}\",\n    \"name\": nameController.text,\n    \"color\": colorController.text\n});\n\n// create a query\nRxQuery<RxHeroDocType> query = RxDatabaseState.collection.find();\n\n// create list to store query results\nList<RxDocument<RxHeroDocType>> documents = [];\n\n// subscribe to a query\nquery.$().listen((results) {\n    setState(() {\n        documents = results;\n    });\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Memory Synced RxStorage Options\nDESCRIPTION: Demonstrates advanced configuration options for memory synced RxStorage including batch size, index handling, write persistence, and CPU idle optimization.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-memory-synced.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    requestIdlePromise\n} from 'rxdb';\n\nconst storage = getMemorySyncedRxStorage({\n    storage: parentStorage,\n\n    /**\n     * Defines how many document\n     * get replicated in a single batch.\n     * [default=50]\n     * \n     * (optional)\n     */\n    batchSize: 50,\n\n    /**\n     * By default, the parent storage will be created without indexes for a faster page load.\n     * Indexes are not needed because the queries will anyway run on the memory storage.\n     * You can disable this behavior by setting keepIndexesOnParent to true.\n     * If you use the same parent storage for multiple RxDatabase instances where one is not\n     * a asynced-memory storage, you will get the error: 'schema not equal to existing storage'\n     * if you do not set keepIndexesOnParent to true.\n     * \n     * (optional)\n     */\n    keepIndexesOnParent: true,\n\n    /**\n     * If set to true, all write operations will resolve AFTER the writes\n     * have been persisted from the memory to the parentStorage.\n     * This ensures writes are not lost even if the JavaScript process exits\n     * between memory writes and the persistence interval.\n     * default=false\n     */\n    awaitWritePersistence: true,\n\n    /**\n     * After a write, await until the return value of this method resolves\n     * before replicating with the master storage.\n     * \n     * By returning requestIdlePromise() we can ensure that the CPU is idle\n     * and no other, more important operation is running. By doing so we can be sure\n     * that the replication does not slow down any rendering of the browser process.\n     * \n     * (optional)\n     */\n    waitBeforePersist: () => requestIdlePromise();\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing preRemove hooks in RxDB\nDESCRIPTION: Examples of adding preRemove hooks to an RxDB collection. Shows series, parallel, async implementation, and how to stop a remove operation by throwing an error.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/middleware.md#2025-04-17_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\n// series\nmyCollection.preRemove(function(plainData, rxDocument){\n\n}, false);\n\n// parallel\nmyCollection.preRemove(function(plainData, rxDocument){\n\n}, true);\n\n// async\nmyCollection.preRemove(function(plainData, rxDocument){\n  return new Promise(res => setTimeout(res, 100));\n}, false);\n\n// stop the remove-operation\nmyCollection.preRemove(function(plainData, rxDocument){\n  throw new Error('stop');\n}, false);\n```\n\n----------------------------------------\n\nTITLE: Comparing Incorrect and Correct RxDB Usage in Angular\nDESCRIPTION: This snippet demonstrates the incorrect way of manually subscribing to RxDB observables and the correct approach using Angular's async pipe and RxJS operators. It shows how to avoid manual subscription management and leverage reactive programming patterns.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/angular-database.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\n// WRONG:\nlet amount;\nthis.dbService\n            .db.hero\n            .find({\n                selector: {},\n                sort: [{ name: 'asc' }]\n            })\n            .$.subscribe(docs => {\n                amount = 0;\n                docs.forEach(d => amount = d.points);\n            });\n\n// RIGHT:\nthis.amount$ = this.dbService\n            .db.hero\n            .find({\n                selector: {},\n                sort: [{ name: 'asc' }]\n            })\n            .$.pipe(\n                map(docs => {\n                    let amount = 0;\n                    docs.forEach(d => amount = d.points);\n                    return amount;\n                })\n            );\n```\n\n----------------------------------------\n\nTITLE: Querying Re-indexed Email Data in TypeScript\nDESCRIPTION: Shows how to efficiently query for all emails that a person received using the re-indexed data created by the RxPipeline.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-pipeline.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst mailIds = await emailByReceiverCollection.find({receiver: 'foobar@example.com'}).exec();\n```\n\n----------------------------------------\n\nTITLE: Implementing preInsert hooks in RxDB\nDESCRIPTION: Examples of adding preInsert hooks to an RxDB collection. Shows series, parallel, async implementation, and how to stop an insert operation by throwing an error.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/middleware.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n// series\nmyCollection.preInsert(function(plainData){\n    // set age to 50 before saving\n    plainData.age = 50;\n}, false);\n\n// parallel\nmyCollection.preInsert(function(plainData){\n\n}, true);\n\n// async\nmyCollection.preInsert(function(plainData){\n  return new Promise(res => setTimeout(res, 100));\n}, false);\n\n// stop the insert-operation\nmyCollection.preInsert(function(plainData){\n  throw new Error('stop');\n}, false);\n```\n\n----------------------------------------\n\nTITLE: Configuring RxDB GraphQL Replication with Pull Stream in JavaScript\nDESCRIPTION: Sets up a GraphQL replication state with both HTTP and WebSocket endpoints. Includes configuration for push and pull operations, headers, and WebSocket options.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-graphql.md#2025-04-17_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nconst replicationState = replicateGraphQL(\n    {\n        collection: myRxCollection,\n        // urls to the GraphQL endpoints\n        url: {\n            http: 'http://example.com/graphql',\n            ws: 'ws://example.com/subscriptions' // <- The websocket has to use a different url.\n        },\n        push: {\n            batchSize: 100,\n            queryBuilder: pushQueryBuilder\n        },\n        headers: {\n            Authorization: 'Bearer abcde...'\n        },\n        pull: {\n            batchSize: 100,\n            queryBuilder: pullQueryBuilder,\n            streamQueryBuilder: pullStreamQueryBuilder,\n            includeWsHeaders: false, // Includes headers as connection parameter to Websocket.\n\n            // Websocket options that can be passed as a parameter to initialize the subscription\n            // Can be applied anything from the graphql-ws ClientOptions - https://the-guild.dev/graphql/ws/docs/interfaces/client.ClientOptions\n            // Except these parameters: 'url', 'shouldRetry', 'webSocketImpl' - locked for internal usage\n            // Note: if you provide connectionParams as a wsOption, make sure it returns any necessary headers (e.g. authorization)\n            // because providing your own connectionParams prevents headers from being included automatically\n            wsOptions: { \n                retryAttempts: 10,\n            }\n        },\n        deletedField: 'deleted'\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Modifying Documents with RxQuery in JavaScript\nDESCRIPTION: Demonstrates how to use the modify() method to update multiple documents that match a query using a transformation function.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-query.md#2025-04-17_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nconst query = myCollection.find({\n  selector: {\n    age: {\n      $gt: 18\n    }\n  }\n});\nawait query.modify((docData) => {\n  docData.age = docData.age + 1; // increases age of every found document by 1\n  return docData;\n});\n```\n\n----------------------------------------\n\nTITLE: Creating RxDatabase with Expo SQLite (Non-Async API)\nDESCRIPTION: This snippet shows how to create an RxDatabase using Expo SQLite with the non-async API for older Expo SDK versions. It imports the necessary modules and configures the database with SQLite storage.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-sqlite.md#2025-04-17_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    createRxDatabase\n} from 'rxdb';\nimport {\n    getRxStorageSQLite,\n    getSQLiteBasicsExpoSQLite\n} from 'rxdb-premium/plugins/storage-sqlite';\nimport { openDatabase } from 'expo-sqlite';\n\nconst myRxDatabase = await createRxDatabase({\n    name: 'exampledb',\n    multiInstance: false,\n    storage: getRxStorageSQLite({\n        sqliteBasics: getSQLiteBasicsExpoSQLite(openDatabase)\n    })\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing validate-ajv Schema Validation in RxDB\nDESCRIPTION: This snippet demonstrates how to use the validate-ajv module for schema validation in RxDB. It wraps the validation around the LocalStorage RxStorage.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/schema-validation.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { wrappedValidateAjvStorage } from 'rxdb/plugins/validate-ajv';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\n\n// wrap the validation around the main RxStorage\nconst storage = wrappedValidateAjvStorage({\n    storage: getRxStorageLocalstorage()\n});\n\nconst db = await createRxDatabase({\n    name: randomCouchString(10),\n    storage\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing LocalStorage in ReactJS Components\nDESCRIPTION: This example demonstrates how to use localStorage in a React component with useState and useEffect hooks. It initializes state from localStorage and updates localStorage when state changes, providing a simple way to persist user data across sessions.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/reactjs-storage.md#2025-04-17_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport React, { useState, useEffect } from 'react';\n\nfunction LocalStorageExample() {\n  const [username, setUsername] = useState(() => {\n    const saved = localStorage.getItem('username');\n    return saved ? JSON.parse(saved) : '';\n  });\n\n  useEffect(() => {\n    localStorage.setItem('username', JSON.stringify(username));\n  }, [username]);\n\n  return (\n    <div>\n      <h2>ReactJS LocalStorage Demo</h2>\n      <input\n        type=\"text\"\n        value={username}\n        onChange={e => setUsername(e.target.value)}\n        placeholder=\"Enter your username\"\n      />\n      <p>Stored: {username}</p>\n    </div>\n  );\n}\n\nexport default LocalStorageExample;\n```\n\n----------------------------------------\n\nTITLE: Implementing RxDB with TypeScript\nDESCRIPTION: Use the defined types to create a database, add collections, define schemas, and implement ORM methods. This snippet demonstrates the practical application of the TypeScript types in an RxDB context.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/tutorials/typescript.md#2025-04-17_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nconst myDatabase: MyDatabase = await createRxDatabase<MyDatabaseCollections>({\n    name: 'mydb',\n    storage: getRxStorageLocalstorage()\n});\n\nconst heroSchema: RxJsonSchema<HeroDocType> = {\n    title: 'human schema',\n    description: 'describes a human being',\n    version: 0,\n    keyCompression: true,\n    primaryKey: 'passportId',\n    type: 'object',\n    properties: {\n        passportId: {\n            type: 'string'\n        },\n        firstName: {\n            type: 'string'\n        },\n        lastName: {\n            type: 'string'\n        },\n        age: {\n            type: 'integer'\n        }\n    },\n    required: ['passportId', 'firstName', 'lastName']\n};\n\nconst heroDocMethods: HeroDocMethods = {\n    scream: function(this: HeroDocument, what: string) {\n        return this.firstName + ' screams: ' + what.toUpperCase();\n    }\n};\n\nconst heroCollectionMethods: HeroCollectionMethods = {\n    countAllDocuments: async function(this: HeroCollection) {\n        const allDocs = await this.find().exec();\n        return allDocs.length;\n    }\n};\n\nawait myDatabase.addCollections({\n    heroes: {\n        schema: heroSchema,\n        methods: heroDocMethods,\n        statics: heroCollectionMethods\n    }\n});\n\n// add a postInsert-hook\nmyDatabase.heroes.postInsert(\n    function myPostInsertHook(\n        this: HeroCollection, // own collection is bound to the scope\n        docData: HeroDocType, // documents data\n        doc: HeroDocument // RxDocument\n    ) {\n        console.log('insert to ' + this.name + '-collection: ' + doc.firstName);\n    },\n    false // not async\n);\n\n// insert a document\nconst hero: HeroDocument = await myDatabase.heroes.insert({\n    passportId: 'myId',\n    firstName: 'piotr',\n    lastName: 'potter',\n    age: 5\n});\n\n// access a property\nconsole.log(hero.firstName);\n\n// use a orm method\nhero.scream('AAH!');\n\n// use a static orm method from the collection\nconst amount: number = await myDatabase.heroes.countAllDocuments();\nconsole.log(amount);\n\n// clean up\nmyDatabase.close();\n```\n\n----------------------------------------\n\nTITLE: Implementing Collection Replication with RxDB in TypeScript\nDESCRIPTION: This snippet shows how to set up data replication for an RxDB collection using the replication plugin. It configures bidirectional synchronization with push and pull operations and enables continuous live updates.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/offline-database.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { replicateRxCollection } from 'rxdb/plugins/replication';\n\nreplicateRxCollection({\n  collection: db.tasks,\n  replicationIdentifier: 'tasks-sync',\n  pull: { /* fetch updates from server */ },\n  push: { /* send local writes to server */ },\n  live: true // keep them in sync constantly\n});\n```\n\n----------------------------------------\n\nTITLE: Initializing PouchDB RxStorage in RxDB\nDESCRIPTION: Demonstrates how to setup and configure PouchDB RxStorage with RxDB database creation. Includes adapter configuration for IndexedDB.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-pouchdb.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb';\nimport { getRxStoragePouch, addPouchPlugin } from 'rxdb/plugins/pouchdb';\n\naddPouchPlugin(require('pouchdb-adapter-idb'));\n\nconst db = await createRxDatabase({\n    name: 'exampledb',\n    storage: getRxStoragePouch(\n        'idb',\n        {\n            /**\n             * other pouchdb specific options\n             * @link https://pouchdb.com/api.html#create_database\n             */\n        }\n    )\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing RxStorage Sharding in TypeScript\nDESCRIPTION: Shows how to implement sharding in RxDB by wrapping an existing storage implementation with the sharding plugin. Includes configuration of shard count and sharding mode through schema definition, with the example using localStorage as the base storage.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-sharding.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    getRxStorageSharding\n} from 'rxdb-premium/plugins/storage-sharding';\n\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\n\n\n/**\n * First wrap the original RxStorage with the sharding RxStorage.\n */\nconst shardedRxStorage = getRxStorageSharding({\n\n    /**\n     * Here we use the localStorage RxStorage,\n     * it is also possible to use any other RxStorage instead.\n     */\n    storage: getRxStorageLocalstorage()\n});\n\n\n/**\n * Add the sharding options to your schema.\n * Changing these options will require a data migration.\n */\nconst mySchema = {\n    /* ... */\n    sharding: {\n        /**\n         * Amount of shards per RxStorage instance.\n         * Depending on your data size and query patterns, the optimal shard amount may differ.\n         * Do a performance test to optimize that value.\n         * 10 Shards is a good value to start with.\n         * \n         * IMPORTANT: Changing the value of shards is not possible on a already existing database state,\n         * you will loose access to  your data.\n         */\n        shards: 10,\n        /**\n         * Sharding mode,\n         * you can either shard by collection or by database.\n         * For most cases you should use 'collection' which will shard on the collection level.\n         * For example with the IndexedDB RxStorage, it will then create multiple stores per IndexedDB database\n         * and not multiple IndexedDB databases, which would be slower.\n         */\n        mode: 'collection'\n    }\n    /* ... */\n}\n\n\n/**\n * Create the RxDatabase with the wrapped RxStorage. \n */\nconst database = await createRxDatabase({\n    name: 'mydatabase',\n    storage: shardedRxStorage\n});\n```\n\n----------------------------------------\n\nTITLE: Creating Angular Signal Reactivity Factory for RxDB\nDESCRIPTION: This snippet demonstrates how to create a custom reactivity factory for Angular signals in RxDB. It uses the toSignal function from Angular's rxjs-interop to convert observables into signals.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/reactivity.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { RxReactivityFactory } from 'rxdb/plugins/core';\nimport { Signal, untracked } from '@angular/core';\nimport { toSignal } from '@angular/core/rxjs-interop';\n\nexport function createReactivityFactory(injector: Injector): RxReactivityFactory<Signal<any>> {\n  return {\n    fromObservable(observable$, initialValue: any) {\n      return untracked(() =>\n        toSignal(observable$, {\n          initialValue,\n          injector,\n          rejectErrors: true\n        })\n      );\n    }\n  };\n}\n```\n\n----------------------------------------\n\nTITLE: Downloading Data with RxPipeline in TypeScript\nDESCRIPTION: Illustrates using RxPipeline to ensure all documents have their data downloaded from a server, fetching data for each document and storing it in a separate collection.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-pipeline.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nconst pipeline = await emailCollection.addPipeline({\n    identifier: 'download-data',\n    destination: serverDataCollection,\n    handler: async (docs) => {\n        for (const doc of docs) {\n            const response = await fetch('https://example.com/doc/' + doc.primary);\n            const serverData = await response.json();\n            await serverDataCollection.upsert({\n                id: doc.primary,\n                data: serverData\n            });\n        }\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Creating a RxFulltextSearch Instance\nDESCRIPTION: Code showing how to create a fulltext search instance on a collection using the addFulltextSearch function with configuration options including document transformation, batch size, and indexing behavior.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/fulltext-search.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { addFulltextSearch } from 'rxdb-premium/plugins/flexsearch';\nconst flexSearch = await addFulltextSearch({\n    // unique identifier. Used to store metadata and continue indexing on restarts/reloads.\n    identifier: 'my-search',\n    // The source collection on whose documents the search is based on\n    collection: myRxCollection,\n    /**\n     * Transforms the document data to a given searchable string.\n     * This can be done by returning a single string property of the document\n     * or even by concatenating and transforming multiple fields like:\n     * doc => doc.firstName + ' ' + doc.lastName\n     */\n    docToString: doc => doc.firstName,\n    /**\n     * (Optional)\n     * Amount of documents to index at once.\n     * See https://rxdb.info/rx-pipeline.html\n     */\n    batchSize: number;\n    /**\n     * (Optional)\n     * lazy: Initialize the in memory fulltext index at the first search query.\n     * instant: Directly initialize so that the index is already there on the first query.\n     * Default: 'instant'\n     */\n    initialization: 'instant',\n    /**\n     * (Optional)\n     * @link https://github.com/nextapps-de/flexsearch#index-options\n     */\n    indexOptions: {},\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Encrypted Storage in RxDB with TypeScript\nDESCRIPTION: Sets up encryption for sensitive data in an RxDB database using the crypto-js plugin. Creates an encrypted storage instance, configures the database with a password, and defines which fields should be encrypted within the schema.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/zero-latency-local-first.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { wrappedKeyEncryptionCryptoJsStorage } from 'rxdb/plugins/encryption-crypto-js';\n\nconst encryptedStorage = wrappedKeyEncryptionCryptoJsStorage({\n  storage: getRxStorageLocalstorage()\n});\n\nconst db = await createRxDatabase({\n  name: 'secureDB',\n  storage: encryptedStorage,\n  password: 'myEncryptionPassword'\n});\n\nawait db.addCollections({\n  secrets: {\n    schema: {\n      title: 'secrets schema',\n      version: 0,\n      type: 'object',\n      primaryKey: 'id',\n      properties: {\n        id:          { type: 'string', maxLength: 100 },\n        secretField: { type: 'string' }\n      },\n      required: ['id'],\n      encrypted: ['secretField'] // define which fields to encrypt\n    }\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Executing Query\nDESCRIPTION: Performing a query to find documents based on specific criteria.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/react-native-database.md#2025-04-17_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nconst result = await collections.humans.find({\n    selector: {\n        name: 'bar'\n    }\n}).exec();\n```\n\n----------------------------------------\n\nTITLE: Defining Server-Only Fields in RxDB Endpoint\nDESCRIPTION: Illustrates how to specify server-only fields when creating a replication endpoint. These fields are not visible to clients and cannot be modified by client-side writes.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-server.md#2025-04-17_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nconst endpoint = await server.addReplicationEndpoint({\n    name: 'my-endpoint',\n    collection: col,\n    // here the field 'my-secretss' is defined to be server-only\n    serverOnlyFields: ['my-secrets']\n});\n```\n\n----------------------------------------\n\nTITLE: Creating an RxServer with Koa Adapter in TypeScript\nDESCRIPTION: This snippet illustrates how to create an RxServer using the Koa adapter, which is another option available in RxDB Premium. It shows the basic setup and server start process.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-server.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxServer } from 'rxdb-server/plugins/server';\nimport { RxServerAdapterKoa } from 'rxdb-premium/plugins/server-adapter-koa';\n\nconst myServer = await createRxServer({\n    database: myRxDatabase,\n    adapter: RxServerAdapterKoa,\n    port: 443\n});\nawait myServer.start();\n```\n\n----------------------------------------\n\nTITLE: Custom Worker Implementation for Angular (TypeScript)\nDESCRIPTION: Defines a custom worker implementation for use in an Angular environment, exposing RxStorage functionality using IndexedDB.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-worker.md#2025-04-17_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\n//> my-custom.worker.ts\nimport { exposeWorkerRxStorage } from 'rxdb-premium/plugins/storage-worker';\nimport { getRxStorageIndexedDB } from 'rxdb-premium/plugins/storage-indexeddb';\n\nexposeWorkerRxStorage({\n    storage: getRxStorageIndexedDB()\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Index-Based Vector Search with Range Query\nDESCRIPTION: This function performs a vector search by querying for an index range with a defined distance. It sets an indexDistance and retrieves all embeddings within a specified range from the index vector to the search embedding, using RxDB's find method with range selectors.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/javascript-vector-database.md#2025-04-17_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\nasync function vectorSearchIndexRange(searchEmbedding: number[]) {\n    await pipeline.awaitIdle();\n    const indexDistance = 0.003;\n    const candidates = new Set<RxDocument>();\n    let docReads = 0;\n    await Promise.all(\n        new Array(5).fill(0).map(async (_, i) => {\n            const distanceToIndex = euclideanDistance(sampleVectors[i], searchEmbedding);\n            const range = distanceToIndex * indexDistance;\n            const docs = await vectorCollection.find({\n                selector: {\n                    ['idx' + i]: {\n                        $gt: indexNrToString(distanceToIndex - range),\n                        $lt: indexNrToString(distanceToIndex + range)\n                    }\n                },\n                sort: [{ ['idx' + i]: 'asc' }],\n            }).exec();\n            docs.map(d => candidates.add(d));\n            docReads = docReads + docs.length;\n        })\n    );\n\n    const docsWithDistance = Array.from(candidates).map(doc => {\n        const distance = euclideanDistance((doc as any).embedding, searchEmbedding);\n        return {\n            distance,\n            doc\n        };\n    });\n    const sorted = docsWithDistance.sort(sortByObjectNumberProperty('distance')).reverse();\n    return {\n        result: sorted.slice(0, 10),\n        docReads\n    };\n}\n```\n\n----------------------------------------\n\nTITLE: Creating RxDB Database with WebWorker Storage in TypeScript\nDESCRIPTION: This snippet shows how to create an RxDB database using WebWorker storage in the main process. It imports necessary functions and sets up the database with the worker storage option.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/11.0.0.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb/plugins/core';\nimport { getRxStorageWorker } from 'rxdb/plugins/worker';\nconst database = await createRxDatabase({\n    name: 'mydatabase',\n    storage: getRxStorageWorker(\n        {\n            workerInput: 'path/to/worker.js'\n        }\n    )\n});\n```\n\n----------------------------------------\n\nTITLE: Initializing RxDB Signaling Server with SimplePeer\nDESCRIPTION: Sets up a basic signaling server using the RxDB WebRTC replication plugin. The server runs on a specified port and handles peer discovery and connection establishment.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-webrtc.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    startSignalingServerSimplePeer\n} from 'rxdb/plugins/replication-webrtc';\n\nconst serverState = await startSignalingServerSimplePeer({\n    port: 8080 // <- port\n});\n```\n\n----------------------------------------\n\nTITLE: Schema Definition with Index Requirements\nDESCRIPTION: Shows how to properly define a schema with indexes including required meta attributes for different field types like maxLength for strings and min/max for numbers\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/12.0.0.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst schemaWithIndexes = {\n  version: 0,\n  primaryKey: 'id',\n  type: 'object',\n  properties: {\n      id: {\n          type: 'string',\n          maxLength: 100 // <- the primary key must set `maxLength`\n      },\n      firstName: {\n          type: 'string',\n          maxLength: 100 // <- string-fields that are used as an index, must set `maxLength`.\n      },\n      active: {\n          type: 'boolean'\n      },\n      balance: {\n          type: 'number',\n\n          // number fields that are used in an index, must set `minimum`, `maximum` and `multipleOf`\n          minimum: 0,\n          maximum: 100000,\n          multipleOf: '0.01'\n      }\n  },\n  required: [\n      'active' // <- boolean fields that are used in an index, must be required. \n  ],\n  indexes: [\n    'firstName',\n    ['active', 'firstName']\n  ]\n};\n```\n\n----------------------------------------\n\nTITLE: Initializing RxDatabase with MongoDB RxStorage in TypeScript\nDESCRIPTION: This snippet demonstrates how to create an RxDatabase using MongoDB as the storage engine. It imports necessary functions from RxDB and the MongoDB storage plugin, then sets up the database with a MongoDB connection string.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-mongodb.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    createRxDatabase\n} from 'rxdb';\nimport {\n    getRxStorageMongoDB\n} from 'rxdb/plugins/storage-mongodb';\n\nconst myRxDatabase = await createRxDatabase({\n    name: 'exampledb',\n    storage: getRxStorageMongoDB({\n        /**\n         * MongoDB connection string\n         * @link https://www.mongodb.com/docs/manual/reference/connection-string/\n         */\n        connection: 'mongodb://localhost:27017,localhost:27018,localhost:27019'\n    })\n});\n```\n\n----------------------------------------\n\nTITLE: Populating References Using Getter in RxDB\nDESCRIPTION: This snippet shows how to use the getter method with an underscore suffix to populate references. It demonstrates inserting documents and then retrieving a populated reference.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/population.md#2025-04-17_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nawait humansCollection.insert({\n  name: 'Alice',\n  bestFriend: 'Carol'\n});\nawait humansCollection.insert({\n  name: 'Bob',\n  bestFriend: 'Alice'\n});\nconst doc = await humansCollection.findOne('Bob').exec();\nconst bestFriend = await doc.bestFriend_; // notice the underscore_\nconsole.dir(bestFriend); //> RxDocument[Alice]\n```\n\n----------------------------------------\n\nTITLE: Creating Custom Index for IndexedDB in TypeScript\nDESCRIPTION: This snippet demonstrates how to create a custom index for IndexedDB to improve query performance. It shows the process of adding a custom index field to documents and creating the index in the object store.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/slow-indexeddb.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n// On document insert add the ageIdCustomIndex field.\nconst idMaxLength = 20; // must be known to craft a custom index\ndocData.ageIdCustomIndex = docData.age + docData.id.padStart(idMaxLength, ' ');\nstore.put(docData);\n// ...\n```\n\nLANGUAGE: typescript\nCODE:\n```\n// normal index\nmyIndexedDBObjectStore.createIndex(\n    'age-index',\n    [\n        'age',\n        'id'\n    ]\n);\n\n// custom index\nmyIndexedDBObjectStore.createIndex(\n    'age-index-custom',\n    [\n        'ageIdCustomIndex'\n    ]\n);\n```\n\n----------------------------------------\n\nTITLE: Initializing RxDB with Memory Adapter in JavaScript\nDESCRIPTION: This snippet demonstrates how to create an RxDB database using the memory adapter. It's useful for scenarios requiring high performance or non-persistent data storage, such as in test suites.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/adapters.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport {\n    createRxDatabase\n} from 'rxdb'\nimport {\n    getRxStoragePouch\n} from 'rxdb/plugins/pouchdb';\n// npm install pouchdb-adapter-memory --save\naddPouchPlugin(require('pouchdb-adapter-memory'));\n\nconst database = await createRxDatabase({\n    name: 'mydatabase',\n    storage: getRxStoragePouch('memory')\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring RxDB WebRTC Replication\nDESCRIPTION: Set up peer-to-peer replication between clients using WebRTC without a central server\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/quickstart.md#2025-04-17_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    replicateWebRTC,\n    getConnectionHandlerSimplePeer\n} from 'rxdb/plugins/replication-webrtc';\nreplicateWebRTC({\n    collection: myDatabase.todos,\n    connectionHandlerCreator: getConnectionHandlerSimplePeer({}),\n    topic: '', // <- set any app-specific room id here.\n    secret: 'mysecret',\n    pull: {},\n    push: {}\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring CORS and Adding a Query Modifier to RxServer in TypeScript\nDESCRIPTION: This code snippet demonstrates how to configure CORS settings for an RxServer and its endpoints. It also shows how to add a query modifier to restrict document access based on user authentication.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-server.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nconst myServer = await startRxServer({\n    database: myRxDatabase,\n    cors: 'http://example.com'\n    port: 443\n});\nconst endpoint = await server.addReplicationEndpoint({\n    name: 'my-endpoint',\n    collection: myServerCollection,\n    cors: 'http://example.com'\n});\n\nfunction myQueryModifier(authData, query) {\n    query.selector.userId = { $eq: authData.data.userid };\n    return query;\n}\n\nconst endpoint = await server.addReplicationEndpoint({\n    name: 'my-endpoint',\n    collection: myServerCollection,\n    queryModifier: myQueryModifier\n});\n```\n\n----------------------------------------\n\nTITLE: Using Async Pipe with RxDB in Angular Template\nDESCRIPTION: HTML template code demonstrating how to use Angular's async pipe to render RxDB query results.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/angular-database.md#2025-04-17_snippet_3\n\nLANGUAGE: html\nCODE:\n```\n<ul *ngFor=\"let hero of heroes$ | async as heroes;\">\n  <li>{{hero.name}}</li>\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Setting up WebRTC Peer-to-Peer Replication in RxDB\nDESCRIPTION: Advanced example demonstrating how to implement peer-to-peer replication between RxDB instances using WebRTC, allowing clients to sync directly without a central server.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/firestore-alternative.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n  replicateWebRTC,\n  getConnectionHandlerSimplePeer\n} from 'rxdb/plugins/replication-webrtc';\n\nconst replicationPool = await replicateWebRTC({\n  collection: db.tasks,\n  topic: 'my-p2p-room', // Clients with the same topic will sync with each other.\n  connectionHandlerCreator: getConnectionHandlerSimplePeer({\n    // Use your own or the official RxDB signaling server\n    signalingServerUrl: 'wss://signaling.rxdb.info/',\n\n    // Node.js requires a polyfill for WebRTC & WebSocket\n    wrtc: require('node-datachannel/polyfill'),\n    webSocketConstructor: require('ws').WebSocket\n  }),\n  pull: {}, // optional pull config\n  push: {}  // optional push config\n});\n\n// The replicationPool manages all connected peers\nreplicationPool.error$.subscribe(err => {\n  console.error('P2P Sync Error:', err);\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing the RxDB Logger Plugin with IndexedDB Storage\nDESCRIPTION: Basic implementation of the logger plugin by wrapping an RxStorage implementation and using it when creating a database. This enables automatic logging of all database operations.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/logger.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    wrappedLoggerStorage\n} from 'rxdb-premium/plugins/logger';\nimport {\n    getRxStorageIndexedDB\n} from 'rxdb-premium/plugins/storage-indexeddb';\n\n\n// wrap a storage with the logger\nconst loggingStorage = wrappedLoggerStorage({\n    storage: getRxStorageIndexedDB({})\n});\n\n// create your database with the wrapped storage\nconst db = await createRxDatabase({\n    name: 'mydatabase',\n    storage: loggingStorage\n});\n\n// create collections etc...\n```\n\n----------------------------------------\n\nTITLE: Filtering Documents During Migration in RxDB\nDESCRIPTION: This snippet demonstrates how to filter which documents should be migrated during a schema upgrade. It converts times in the first migration and removes documents older than a specific date in the second migration.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/migration-schema.md#2025-04-17_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nmyDatabase.addCollections({\n  messages: {\n    schema: messageSchemaV1,\n    migrationStrategies: {\n      // 1 means, this transforms data from version 0 to version 1\n      1: function(oldDoc){\n        oldDoc.time = new Date(oldDoc.time).getTime(); // string to unix\n        return oldDoc;\n      },\n      /**\n       * this removes all documents older then 2017-02-12\n       * they will not appear in the new collection\n       */\n      2: function(oldDoc){\n        if(oldDoc.time < 1486940585) return null;\n        else return oldDoc;\n      }\n    }\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Initializing HTTP Replication on RxDB Client\nDESCRIPTION: Sets up the replication on the RxDB client side using the replicateRxCollection function from the replication primitives plugin.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-http.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { replicateRxCollection } from 'rxdb/plugins/replication';\nconst replicationState = await replicateRxCollection({\n    collection: myRxCollection,\n    replicationIdentifier: 'my-http-replication',\n    push: { /* add settings from below */ },\n    pull: { /* add settings from below */ }\n});\n```\n\n----------------------------------------\n\nTITLE: Using RxDB Query Optimizer for Index Selection in TypeScript\nDESCRIPTION: This snippet demonstrates how to use the findBestIndex function from the RxDB Query Optimizer to determine optimal indexes for multiple queries. It utilizes the IndexedDB RxStorage and includes example queries with selectors.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/query-optimizer.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    findBestIndex\n} from 'rxdb-premium/plugins/query-optimizer';\n\nimport { \n    getRxStorageIndexedDB\n} from 'rxdb-premium/plugins/indexeddb';\n\nconst bestIndexes = await findBestIndex({\n    schema: myRxJsonSchema,\n    /**\n     * In this example we use the IndexedDB RxStorage,\n     * but any other storage can be used for testing.\n     */\n    storage: getRxStorageIndexedDB(),\n    /**\n     * Multiple queries can be optimized at the same time\n     * which decreases the overall runtime.\n     */\n    queries: {\n        /**\n         * Queries can be mapped by a query id,\n         * here we use myFirstQuery as query id.\n         */\n        myFirstQuery: {\n            selector: {\n                age: {\n                    $gt: 10\n                }\n            },\n        },\n        mySecondQuery: {\n            selector: {\n                age: {\n                    $gt: 10\n                },\n                lastName: {\n                    $eq: 'Nakamoto'\n                }\n            },\n        }\n    },\n    testData: [/** data for the documents. **/]\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing postCreate hooks in RxDB\nDESCRIPTION: Example of adding a postCreate hook to an RxDB collection. This adds custom properties to all document instances when they are constructed.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/middleware.md#2025-04-17_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nmyCollection.postCreate(function(plainData, rxDocument){\n    Object.defineProperty(rxDocument, 'myField', {\n        get: () => 'foobar',\n    });\n});\n\nconst doc = await myCollection.findOne().exec();\n\nconsole.log(doc.myField);\n// 'foobar'\n```\n\n----------------------------------------\n\nTITLE: Configuring RxDB Database with Cleanup Options\nDESCRIPTION: Demonstrates how to create a RxDatabase with custom cleanup policy settings including deletion time thresholds, collection age requirements, and replication sync options.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/cleanup.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\nconst db = await createRxDatabase({\n  name: 'heroesdb',\n  storage: getRxStorageLocalstorage(),\n  cleanupPolicy: {\n      minimumDeletedTime: 1000 * 60 * 60 * 24 * 31,\n      minimumCollectionAge: 1000 * 60,\n      runEach: 1000 * 60 * 5,\n      awaitReplicationsInSync: true,\n      waitForLeadership: true\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Middleware Hooks in RxDB\nDESCRIPTION: Example showing how to use the new middleware hooks structure where the first parameter is plain JSON data and the second parameter is the RxDocument instance. This allows for safer data modifications before saving.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/8.0.0.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nmyCollection.preSave(function(data, rxDocument) {\n    // to set age to 50 before saving, change the first parameter\n    data.age = 50;\n}, false);\n```\n\n----------------------------------------\n\nTITLE: Initializing RxDB with LokiJS RxStorage in TypeScript\nDESCRIPTION: This snippet demonstrates how to create an RxDatabase using the LokiJS RxStorage with an IndexedDB adapter for browser persistence.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-lokijs.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    createRxDatabase\n} from 'rxdb';\nimport {\n    getRxStorageLoki\n} from 'rxdb/plugins/storage-lokijs';\n\n// in the browser, we want to persist data in IndexedDB, so we use the indexeddb adapter.\nconst LokiIncrementalIndexedDBAdapter = require('lokijs/src/incremental-indexeddb-adapter');\n\nconst db = await createRxDatabase({\n    name: 'exampledb',\n    storage: getRxStorageLoki({\n        adapter: new LokiIncrementalIndexedDBAdapter(),\n        /* \n         * Do not set lokiJS persistence options like autoload and autosave,\n         * RxDB will pick proper defaults based on the given adapter\n         */\n    })\n});\n```\n\n----------------------------------------\n\nTITLE: Creating RxDB Database with SQLite Storage (Premium Version)\nDESCRIPTION: Demonstrates how to create an RxDB database using the premium version of SQLite storage in a Capacitor application, configuring the storage with Capacitor-specific SQLite basics.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/capacitor-database.md#2025-04-17_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\n// create database\nconst myRxDatabase = await createRxDatabase({\n    name: 'exampledb',\n    storage: getRxStorageSQLite({\n        sqliteBasics: getSQLiteBasicsCapacitor(sqlite, Capacitor)\n    })\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing postSave hooks in RxDB\nDESCRIPTION: Examples of adding postSave hooks to an RxDB collection. Shows series, parallel, and async implementation patterns.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/middleware.md#2025-04-17_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\n// series\nmyCollection.postSave(function(plainData, rxDocument){\n\n}, false);\n\n// parallel\nmyCollection.postSave(function(plainData, rxDocument){\n\n}, true);\n\n// async\nmyCollection.postSave(function(plainData, rxDocument){\n  return new Promise(res => setTimeout(res, 100));\n}, false);\n```\n\n----------------------------------------\n\nTITLE: Initializing RxDB with FoundationDB Storage in Node.js\nDESCRIPTION: This snippet demonstrates how to set up an RxDB database using FoundationDB as the storage engine. It includes creating the database, adding a collection, and running a query.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/nodejs-database.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb';\nimport { getRxStorageFoundationDB } from 'rxdb/plugins/storage-foundationdb';\n\nconst db = await createRxDatabase({\n    name: 'exampledb',\n    storage: getRxStorageFoundationDB({\n        apiVersion: 620,\n        clusterFile: '/path/to/fdb.cluster'\n    })\n});\n\n// add a collection\nawait db.addCollections({\n    users: {\n        schema: mySchema\n    }\n});\n\n// run a query\nconst result = await db.users.find({\n    selector: {\n        name: 'foobar'\n    }\n}).exec();\n```\n\n----------------------------------------\n\nTITLE: Configuring RxDB Instances for Deno Deploy\nDESCRIPTION: This code snippet shows how to properly configure RxDB instances when using DenoKV storage and other storage types in a Deno environment. It demonstrates the importance of setting the multiInstance flag correctly.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-denokv.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n// DenoKV based database\nconst db = await createRxDatabase({\n  name: 'denokvdatabase',\n  storage: getRxStorageDenoKV(),\n  /**\n   * Use multiInstance: true so that the Deno Broadcast Channel\n   * emits event across DenoDeploy instances\n   * (true is also the default, so you can skip this setting)\n   */\n  multiInstance: true\n});\n\n// Non-DenoKV based database\nconst db = await createRxDatabase({\n  name: 'denokvdatabase',\n  storage: getRxStorageFilesystemNode(),\n  /**\n   * Use multiInstance: false so that it does not share events\n   * across instances because the stored data is anyway not shared\n   * between them.\n   */\n  multiInstance: false\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Observable Document Fields in RxDB with TypeScript\nDESCRIPTION: Shows how to subscribe to changes in individual document fields using RxDB's observable properties. The example demonstrates monitoring changes to a document's firstName field.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/frontend-database.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nmyDocument.firstName$.subscribe(newName => console.log('name is: ' + newName));\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Conflict Handler in TypeScript\nDESCRIPTION: This snippet shows the default conflict handler in RxDB. It demonstrates how to implement isEqual and resolve functions for conflict detection and resolution. The isEqual function uses deep equality comparison, while the resolve function always chooses the master state.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/transactions-conflicts-revisions.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { deepEqual } from 'rxdb/plugins/utils';\nexport const defaultConflictHandler: RxConflictHandler<any> = {\n    isEqual(a, b) {\n        /**\n         * isEqual() is used to detect conflicts or to detect if a\n         * document has to be pushed to the remote.\n         * If the documents are deep equal,\n         * we have no conflict.\n         * Because deepEqual is CPU expensive, on your custom conflict handler you might only\n         * check some properties, like the updatedAt time or revisions\n         * for better performance.\n         */\n        return deepEqual(a, b);\n    },\n    resolve(i) {\n        /**\n         * The default conflict handler will always\n         * drop the fork state and use the master state instead.\n         * \n         * In your custom conflict handler you likely want to merge properties\n         * of the realMasterState and the newDocumentState instead.\n         */\n        return i.realMasterState;\n    }\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing validate-z-schema Schema Validation in RxDB\nDESCRIPTION: This snippet shows how to use the validate-z-schema module for schema validation in RxDB, which doesn't use eval() and is suitable for environments with strict Content Security Policies.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/schema-validation.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport { wrappedValidateZSchemaStorage } from 'rxdb/plugins/validate-z-schema';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\n\n// wrap the validation around the main RxStorage\nconst storage = wrappedValidateZSchemaStorage({\n    storage: getRxStorageLocalstorage()\n});\n\nconst db = await createRxDatabase({\n    name: randomCouchString(10),\n    storage\n});\n```\n\n----------------------------------------\n\nTITLE: Demonstrating RxQuery Immutability in RxDB (JavaScript)\nDESCRIPTION: Illustrates the immutability of RxQuery objects in RxDB. It shows how modifying a query creates a new RxQuery object instead of altering the original one, which is important for understanding query behavior.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-query.md#2025-04-17_snippet_15\n\nLANGUAGE: javascript\nCODE:\n```\nconst queryObject = myCollection.find().where('age').gt(18);\n// Creates a new RxQuery object, does not modify previous one\nqueryObject.sort('name');\nconst results = await queryObject.exec();\nconsole.dir(results); // result-documents are not sorted by name\n\nconst queryObjectSort = queryObject.sort('name');\nconst results = await queryObjectSort.exec();\nconsole.dir(results); // result-documents are now sorted\n```\n\n----------------------------------------\n\nTITLE: Configuring RxDB with Memory-Mapped Storage in TypeScript\nDESCRIPTION: This snippet demonstrates how to set up an RxDB database using memory-mapped storage for improved performance. It includes configuration for filesystem storage and server initialization.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-server-scaling.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { getRxStorageMemory } from 'rxdb/plugins/storage-memory';\nimport { replicateRxCollection } from 'rxdb/plugins/replication';\nimport { getRxStorageFilesystemNode } from 'rxdb-premium/plugins/storage-filesystem-node';\nimport { getMemoryMappedRxStorage } from 'rxdb-premium/plugins/storage-memory-mapped';\nconst myRxDatabase = await createRxDatabase({\n    name: 'mydb',\n    storage: getMemoryMappedRxStorage({\n        storage: getRxStorageFilesystemNode({\n            basePath: path.join(__dirname, 'my-database-folder')\n        })\n    })\n});\nawait myDatabase.addCollections({/* ... */});\n\nconst myServer = await startRxServer({\n    database: myRxDatabase,\n    port: 443\n});\n```\n\n----------------------------------------\n\nTITLE: Subscribing to Backup Write Events in RxDB\nDESCRIPTION: This snippet demonstrates how to listen to the writeEvents$ Observable to get notifications about written backup files. This is useful for tracking backup progress or triggering additional actions when files are written.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/backup.md#2025-04-17_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nconst backupOptions = {\n    live: false,\n    directory: '/my-backup-folder/',\n    attachments: true\n}\nconst backupState = myDatabase.backup(backupOptions);\n\nconst subscription = backupState.writeEvents$.subscribe(writeEvent => console.dir(writeEvent));\n/*\n> {\n    collectionName: 'humans',\n    documentId: 'foobar',\n    files: [\n        '/my-backup-folder/foobar/document.json'\n    ],\n    deleted: false\n}\n*/\n```\n\n----------------------------------------\n\nTITLE: Implementing Bulk Operations in RxDB\nDESCRIPTION: Demonstrates the correct way to handle multiple document operations using bulk inserts instead of individual operations for better performance.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/nosql-performance-tips.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// wrong ❌\nfor(const docData of dataAr){\n    await myCollection.insert(docData);\n}\n\n// right ✔️\nawait myCollection.bulkInsert(dataAr);\n```\n\n----------------------------------------\n\nTITLE: Configuring RxDB Database with QueryChangeDetection\nDESCRIPTION: Demonstrates how to create a new RxDB database with the queryChangeDetection option. This new approach replaces the previous method of enabling QueryChangeDetection through separate import and function calls.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/8.0.0.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst db = await RxDB.create({\n  name: 'heroesdb',\n  adapter: 'idb',\n  queryChangeDetection: false // <- queryChangeDetection (optional, default: false)\n});\nconsole.dir(db);\n```\n\n----------------------------------------\n\nTITLE: Observing RxDB Query Changes\nDESCRIPTION: Shows how to create a reactive query that observes and emits changes to the query results in real-time using RxJS observables.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/README.md#2025-04-17_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nawait db.heroes.find({\n  selector: {\n    healthpoints: {\n      $gt: 0\n    }\n  }\n})\n.$ // the $ returns an observable that emits each time the result set of the query changes\n.subscribe(aliveHeroes => console.dir(aliveHeroes));\n```\n\n----------------------------------------\n\nTITLE: Implementing Partial Sync with Multiple Replications in TypeScript\nDESCRIPTION: This code demonstrates how to implement partial sync using multiple replication states for different chunks of data. It includes functions to start and stop replications for specific chunks and handle player movement in a game-like scenario.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/local-first-future.md#2025-04-17_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nconst activeReplications = {}; // chunkId -> replicationState\n\nfunction startChunkReplication(chunkId) {\n  if (activeReplications[chunkId]) return;\n  const replicationId = 'voxels-chunk-' + chunkId;\n\n  const replicationState = replicateRxCollection({\n    collection: db.voxels,\n    replicationIdentifier: replicationId,\n    pull: {\n      async handler(checkpoint, limit) {\n        const res = await fetch(\n          `/api/voxels/pull?chunkId=${chunkId}&cp=${checkpoint}&limit=${limit}`\n        );\n        /* ... */\n      }\n    },\n    push: {\n      async handler(changedDocs) {\n        const res = await fetch(`/api/voxels/push?chunkId=${chunkId}`);\n        /* ... */\n      }\n    }\n  });\n  activeReplications[chunkId] = replicationState;\n}\n\nfunction stopChunkReplication(chunkId) {\n  const rep = await activeReplications[chunkId];\n  if (rep) {\n    rep.cancel();\n    delete activeReplications[chunkId];\n  }\n}\n\n// Called whenever the player's location changes; \n// dynamically start/stop replication for nearby chunks.\nfunction onPlayerMove(neighboringChunkIds) {\n  neighboringChunkIds.forEach(startChunkReplication);\n  Object.keys(activeReplications).forEach(cid => {\n    if (!neighboringChunkIds.includes(cid)) {\n      stopChunkReplication(cid);\n    }\n  });\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Memory Synced RxStorage with IndexedDB\nDESCRIPTION: Basic setup of memory synced RxStorage wrapper around IndexedDB storage for improved performance. Shows how to create and configure the storage wrapper and initialize an RxDatabase instance.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-memory-synced.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    getRxStorageIndexedDB\n} from 'rxdb-premium/plugins/storage-indexeddb';\nimport {\n    getMemorySyncedRxStorage\n} from 'rxdb-premium/plugins/storage-memory-synced';\n\n/**\n * Here we use the IndexedDB RxStorage as persistence storage.\n * Any other RxStorage can also be used.\n */\nconst parentStorage = getRxStorageIndexedDB();\n\n// wrap the persistent storage with the memory synced one.\nconst storage = getMemorySyncedRxStorage({\n    storage: parentStorage\n});\n\n// create the RxDatabase like you would do with any other RxStorage\nconst db = await createRxDatabase({\n    name: 'myDatabase,\n    storage,\n});\n/** ... **/\n```\n\n----------------------------------------\n\nTITLE: Conditional Document Insertion with CRDT in TypeScript\nDESCRIPTION: This snippet demonstrates how to perform a conditional document insertion using CRDT operations. It checks for the previous existence of a document and either inserts it or increments a field based on the condition.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/crdt.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nawait myRxCollection.insertCRDT({\n    selector: {\n        // only run if the document did not exist before.\n        id: { $exists: false }\n    }, \n    ifMatch: {\n        // if the document did not exist, insert it\n        $set: {\n            id: 'foo'\n            points: 1\n        }\n    },\n    ifNotMatch: {\n        // if document existed already, increment the points by +1\n        $inc: {\n            points: 1\n        }\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Starting RxDB Replication with Push and Pull Handlers in TypeScript\nDESCRIPTION: This snippet demonstrates how to set up replication for an RxDB collection, including push and pull handlers for syncing with a server. It also includes a stream handler for live updates.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/local-first-future.md#2025-04-17_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nconst replicationState = await replicateRxCollection({\n  collection: db.todos,\n  replicationIdentifier: 'my-todos-replication',\n  live: true,\n  push: {\n    async handler(changedDocs) {\n      const response = await fetch('/api/todos/push', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(changedDocs)\n      });\n      const { errorDocuments } = await response.json();\n      return errorDocuments; \n    }\n  },\n  pull: {\n    async handler(lastCheckpoint, batchSize) {\n      const url = '/api/todos/pull?checkpoint=' +\n        encodeURIComponent(JSON.stringify(lastCheckpoint)) +\n        '&limit=' + batchSize;\n      const response = await fetch(url);\n      const { documents, checkpoint } = await response.json();\n      return {\n        documents,\n        checkpoint\n      };\n    },\n    stream$: async function () {\n      const eventSource = new EventSource('/api/todos/pull-stream');\n      return new Observable(subscriber => {\n        eventSource.onmessage = (msg) => {\n          const data = JSON.parse(msg.data);\n          subscriber.next({\n            documents: data.documents,\n            checkpoint: data.checkpoint\n          });\n        };\n        return () => eventSource.close();\n      });\n    }\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Initializing Firestore Database and Collection in TypeScript\nDESCRIPTION: This snippet demonstrates how to initialize a Firestore database and collection using Firebase SDK. It sets up the necessary configuration and creates references to the database and collection.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-firestore.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport * as firebase from 'firebase/app';\nimport {\n    getFirestore,\n    collection\n} from 'firebase/firestore';\n\nconst projectId = 'my-project-id';\nconst app = firebase.initializeApp({\n    projectId,\n    databaseURL: 'http://localhost:8080?ns=' + projectId,\n    /* ... */\n});\nconst firestoreDatabase = getFirestore(app);\nconst firestoreCollection = collection(firestoreDatabase, 'my-collection-name');\n```\n\n----------------------------------------\n\nTITLE: Configuring Storage Buckets with IndexedDB RxStorage\nDESCRIPTION: Implementation of Storage Buckets API integration with RxDB IndexedDB Storage for organizing locally stored data into independent groupings.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-indexeddb.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb';\nimport { getRxStorageIndexedDB } from 'rxdb-premium/plugins/storage-indexeddb';\n\nconst db = await createRxDatabase({\n    name: 'exampledb',\n    storage: getRxStorageIndexedDB({\n        indexedDB: async(params) => {\n            const myStorageBucket = await navigator.storageBuckets.open('myApp-' + params.databaseName);\n            return myStorageBucket.indexedDB;\n        },\n        IDBKeyRange\n    })\n});\n```\n\n----------------------------------------\n\nTITLE: Debugging SQL Operations with RxStorageSQLite\nDESCRIPTION: This snippet demonstrates how to enable logging for all SQL operations when using RxStorageSQLite. It shows how to pass a log function to the storage configuration.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-sqlite.md#2025-04-17_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nconst storage = getRxStorageSQLite({\n    sqliteBasics: getSQLiteBasicsCapacitor(sqlite, Capacitor),\n    // pass log function\n    log: console.log.bind(console)\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring RxStorage Implementations\nDESCRIPTION: Demonstrates different storage configuration options using LocalStorage for browser and MongoDB for Node.js environments.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-database.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n// use the LocalStroage that stores data in the browser.\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\n\nconst db = await createRxDatabase({\n  name: 'mydatabase',\n  storage: getRxStorageLocalstorage()\n});\n\n\n// ...or use the MongoDB RxStorage in Node.js.\nimport { getRxStorageMongoDB } from 'rxdb/plugins/storage-mongodb';\n\nconst dbMongo = await createRxDatabase({\n  name: 'mydatabase',\n  storage: getRxStorageMongoDB({\n    connection: 'mongodb://localhost:27017,localhost:27018,localhost:27019'\n  })\n});\n```\n\n----------------------------------------\n\nTITLE: Defining a Composite Primary Key in RxDB Schema\nDESCRIPTION: This example demonstrates how to create a schema with a composite primary key in RxDB. It uses multiple fields to compose a unique identifier for each document.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-schema.md#2025-04-17_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst mySchema = {\n  keyCompression: true, // set this to true, to enable the keyCompression\n  version: 0,\n  title: 'human schema with composite primary',\n  primaryKey: {\n      // where should the composed string be stored\n      key: 'id',\n      // fields that will be used to create the composed key\n      fields: [\n          'firstName',\n          'lastName'\n      ],\n      // separator which is used to concat the fields values.\n      separator: '|'\n  },\n  type: 'object',\n  properties: {\n      id: {\n          type: 'string',\n          maxLength: 100 // <- the primary key must have set maxLength\n      },\n      firstName: {\n          type: 'string'\n      },\n      lastName: {\n          type: 'string'\n      }\n  },\n  required: [\n    'id', \n    'firstName',\n    'lastName'\n  ]\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing RxDB with Cordova SQLite Adapter\nDESCRIPTION: This snippet demonstrates how to use the Cordova SQLite adapter with RxDB in Cordova, Phonegap, or Capacitor environments. It includes a function to wait for the deviceready event before initializing the database.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/adapters.md#2025-04-17_snippet_10\n\nLANGUAGE: javascript\nCODE:\n```\n// npm install pouchdb-adapter-cordova-sqlite --save\naddPouchPlugin(require('pouchdb-adapter-cordova-sqlite'));\n\n/**\n * In capacitor/cordova you have to wait until all plugins are loaded and 'window.sqlitePlugin'\n * can be accessed.\n * This function waits until document deviceready is called which ensures that everything is loaded.\n * @link https://cordova.apache.org/docs/de/latest/cordova/events/events.deviceready.html\n */\nexport function awaitCapacitorDeviceReady(): Promise<void> {\n    return new Promise(res => {\n        document.addEventListener('deviceready', () => {\n            res();\n        });\n    });\n}\n\nasync function getDatabase(){\n\n    // first wait until the deviceready event is fired\n    await awaitCapacitorDeviceReady();\n\n    const database = await createRxDatabase({\n        name: 'mydatabase',\n        storage: getRxStoragePouch(\n            'cordova-sqlite',\n            // pouch settings are passed as second parameter\n            {\n                // for ios devices, the cordova-sqlite adapter needs to know where to save the data.\n                iosDatabaseLocation: 'Library'\n            }\n        )\n    });\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Logging Functions with RxDB Logger\nDESCRIPTION: Using custom callback functions to handle the start, end, and error states of database operations. This enables integration with external logging systems or custom monitoring logic.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/logger.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst loggingStorage = wrappedLoggerStorage({\n    storage: getRxStorageIndexedDB({}),\n    onOperationStart: (operationsName, logId, args) => void,\n    onOperationEnd: (operationsName, logId, args) => void,\n    onOperationError: (operationsName, logId, args, error) => void\n});\n```\n\n----------------------------------------\n\nTITLE: Manually Defining Document Type in TypeScript\nDESCRIPTION: Manually define a TypeScript type for documents without using the schema. This approach gives more control over the type definition.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/tutorials/typescript.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport type HeroDocType = {\n    passportId: string;\n    firstName: string;\n    lastName: string;\n    age?: number; // optional\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing RxDB with React Native SQLite Adapter\nDESCRIPTION: This code demonstrates how to set up RxDB with the React Native SQLite adapter. It requires additional setup steps and polyfills, but claims to offer better performance than the AsyncStorage adapter.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/adapters.md#2025-04-17_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb';\nimport { addPouchPlugin, getRxStoragePouch } from 'rxdb/plugins/pouchdb';\nimport SQLite from 'react-native-sqlite-2'\nimport SQLiteAdapterFactory from 'pouchdb-adapter-react-native-sqlite'\n\nconst SQLiteAdapter = SQLiteAdapterFactory(SQLite)\n\naddPouchPlugin(SQLiteAdapter);\naddPouchPlugin(require('pouchdb-adapter-http'));\n\nconst database = await createRxDatabase({\n    name: 'mydatabase',\n    storage: getRxStoragePouch('react-native-sqlite') // the name of your adapter\n});\n```\n\n----------------------------------------\n\nTITLE: Using Query Builder Plugin in TypeScript\nDESCRIPTION: Shows how to use the query-builder plugin to enable chained query methods for more readable query construction.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-query.md#2025-04-17_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\n// add the query builder plugin\nimport { addRxPlugin } from 'rxdb';\nimport { RxDBQueryBuilderPlugin } from 'rxdb/plugins/query-builder';\naddRxPlugin(RxDBQueryBuilderPlugin);\n\n// now you can use chained query methods\n\nconst query = myCollection.find().where('age').gt(18);\nconst result = await query.exec();\n```\n\n----------------------------------------\n\nTITLE: Implementing WebRTC Replication for RxState\nDESCRIPTION: Demonstrates how to set up peer-to-peer replication of RxState data using WebRTC.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-state.md#2025-04-17_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    replicateWebRTC,\n    getConnectionHandlerSimplePeer\n} from 'rxdb/plugins/replication-webrtc';\n\nconst database = await createRxDatabase({\n  name: 'heroesdb',\n  storage: getRxStorageLocalstorage(),\n});\n\nconst myState = await database.addState();\n\nconst replicationPool = await replicateWebRTC({\n    collection: myState.collection,\n    topic: 'my-state-replication-pool',\n    connectionHandlerCreator: getConnectionHandlerSimplePeer({}),\n    pull: {},\n    push: {}\n});\n```\n\n----------------------------------------\n\nTITLE: Creating RxDB Database with LocalStorage in Electron\nDESCRIPTION: This snippet demonstrates how to create an RxDB database using LocalStorage as the storage adapter in an Electron application. It includes creating the database, adding collections, inserting documents, and querying data.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/electron-database.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\n\n// create database\nconst db = await createRxDatabase({\n    name: 'exampledb',\n    storage: getRxStorageLocalstorage()\n});\n\n// create collections\nconst collections = await myRxDatabase.addCollections({\n    humans: {\n        /* ... */\n    }\n});\n\n// insert document\nawait collections.humans.insert({id: 'foo', name: 'bar'});\n\n// run a query\nconst result = await collections.humans.find({\n    selector: {\n        name: 'bar'\n    }\n}).exec();\n\n// observe a query\nawait collections.humans.find({\n    selector: {\n        name: 'bar'\n    }\n}).$.subscribe(result => {/* ... */});\n```\n\n----------------------------------------\n\nTITLE: Implementing Response Modifier for RxDB GraphQL Pull Replication\nDESCRIPTION: Shows how to use the pull.responseModifier to modify the GraphQL endpoint response before RxDB processing, useful for custom checkpoint aggregation.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-graphql.md#2025-04-17_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n\n} from 'rxdb';\nconst replicationState: RxGraphQLReplicationState<RxDocType> = replicateGraphQL(\n    {\n        collection: myRxCollection,\n        url: {/* ... */},\n        headers: {/* ... */},\n        push: {/* ... */},\n        pull: {\n            responseModifier: async function(\n                plainResponse, // the exact response that was returned from the server\n                origin, // either 'handler' if plainResponse came from the pull.handler, or 'stream' if it came from the pull.stream\n                requestCheckpoint // if origin==='handler', the requestCheckpoint contains the checkpoint that was send to the backend\n            ) {\n                /**\n                 * In this example we aggregate the checkpoint from the documents array\n                 * that was returned from the graphql endpoint.\n                 */\n                const docs = plainResponse;\n                return {\n                    documents: docs,\n                    checkpoint: docs.length === 0 ? requestCheckpoint : {\n                        name: lastOfArray(docs).name,\n                        updatedAt: lastOfArray(docs).updatedAt\n                    }\n                };\n            }\n        },\n        /* ... */\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Handling IndexedDB Quota Exceeded Errors with Try/Catch in JavaScript\nDESCRIPTION: This code shows how to properly handle quota exceeded errors when writing to IndexedDB by wrapping operations in try/catch blocks and implementing appropriate error handling logic.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/indexeddb-max-storage-limit.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\ntry {\n  const tx = db.transaction('largeStore', 'readwrite');\n  const store = tx.objectStore('largeStore');\n  await store.add(hugeData, someKey);\n  await tx.done;\n} catch (error) {\n  if (error.name === 'QuotaExceededError') {\n    console.warn('IndexedDB quota exceeded. Cleanup or prompt user to free space.');\n    // Optionally remove older data or show a UI hint:\n    // removeOldDocuments();\n    // displayStorageFullDialog();\n  } else {\n    // handle other errors\n    console.error('IndexedDB write error:', error);\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating KeyRange for Custom IndexedDB Index in TypeScript\nDESCRIPTION: This snippet shows how to create a key range for querying a custom index in IndexedDB. It compares the process for a normal index and a custom index, demonstrating how to combine values for the custom index query.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/slow-indexeddb.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\n// keyrange for normal index\nconst range = IDBKeyRange.bound(\n    [25, ''],\n    [Infinity, Infinity],\n    true,\n    false\n);\n\n// keyrange for custom index\nconst range = IDBKeyRange.bound(\n    // combine both values to a single string\n    25 + ''.padStart(idMaxLength, ' '),\n    Infinity,\n    true,\n    false\n);\n```\n\n----------------------------------------\n\nTITLE: Creating RxDatabase with Tauri SQLite\nDESCRIPTION: This snippet shows how to create an RxDatabase using Tauri SQLite. It imports the necessary modules and configures the database with SQLite storage using the Tauri SQL plugin.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-sqlite.md#2025-04-17_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    createRxDatabase\n} from 'rxdb';\nimport {\n    getRxStorageSQLite,\n    getSQLiteBasicsTauri\n} from 'rxdb/plugins/storage-sqlite';\nimport sqlite3 from '@tauri-apps/plugin-sql';\n\nconst myRxDatabase = await createRxDatabase({\n    name: 'exampledb',\n    storage: getRxStorageSQLite({\n        sqliteBasics: getSQLiteBasicsTauri(sqlite3)\n    })\n});\n```\n\n----------------------------------------\n\nTITLE: Setting Up Encrypted RxDB Database in React Native\nDESCRIPTION: Initialize an encrypted RxDB database using the CryptoJS plugin and in-memory storage. This example demonstrates how to create a database, define a schema, and add a collection with encryption.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/react-native-encryption.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb';\nimport { wrappedKeyEncryptionCryptoJsStorage } from 'rxdb/plugins/encryption-crypto-js';\n\n/*\n * For testing, we use the in-memory storage of RxDB.\n * In production you would use the persistend SQLite based storage instead.\n */\nimport { getRxStorageMemory } from 'rxdb/plugins/storage-memory';\n\nasync function initEncryptedDatabase() {\n    // Wrap the normal storage with the encryption plugin\n    const encryptedMemoryStorage = wrappedKeyEncryptionCryptoJsStorage({\n        storage: getRxStorageMemory()\n    });\n\n    // Create an encrypted database\n    const db = await createRxDatabase({\n        name: 'myEncryptedDatabase',\n        storage: encryptedMemoryStorage,\n        password: 'sudoLetMeIn' // Make sure not to hardcode in production\n    });\n\n    // Define a schema and create a collection\n    await db.addCollections({\n        secureData: {\n            schema: {\n                title: 'secure data schema',\n                version: 0,\n                type: 'object',\n                primaryKey: 'id',\n                properties: {\n                    id: {\n                        type: 'string',\n                        maxLength: 100\n                    },\n                    normalField: {\n                        type: 'string'\n                    },\n                    secretField: {\n                        type: 'string'\n                    }\n                },\n                required: ['id', 'normalField', 'secretField']\n            }\n        }\n    });\n\n    return db;\n}\n```\n\n----------------------------------------\n\nTITLE: Creating an In-Memory RxDB Database in Node.js\nDESCRIPTION: This snippet shows how to create an in-memory RxDB database using the Memory RxStorage. This is useful for unit testing or scenarios where data persistence is not required.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/nodejs-database.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb';\nimport { getRxStorageMemory } from 'rxdb/plugins/storage-memory';\n\nconst db = await createRxDatabase({\n    name: 'exampledb',\n    storage: getRxStorageMemory()\n});\n```\n\n----------------------------------------\n\nTITLE: Handling Forbidden Actions in RxDB Server Replication\nDESCRIPTION: This code shows how to subscribe to the forbidden$ observable to handle cases where the client performs unauthorized actions, resulting in the server dropping the connection.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-server.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nreplicationState.forbidden$.subscribe(() => {\n    console.log('Client is behaving wrong');\n});\n```\n\n----------------------------------------\n\nTITLE: Exposing RxStorage in Electron Main Process\nDESCRIPTION: This snippet demonstrates how to expose an RxStorage instance in the Electron main process using the exposeIpcMainRxStorage function. It uses the memory storage plugin and sets up the storage when the app is ready.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/electron.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n//  main.js\nconst { exposeIpcMainRxStorage } = require('rxdb/plugins/electron');\nconst { getRxStorageMemory } = require('rxdb/plugins/storage-memory');\napp.on('ready', async function () {\n    exposeIpcMainRxStorage({\n        key: 'main-storage',\n        storage: getRxStorageMemory(),\n        ipcMain: electron.ipcMain\n    });\n});\n```\n\n----------------------------------------\n\nTITLE: Querying RxDB Data Once\nDESCRIPTION: Demonstrates how to perform a one-time query on an RxDB collection using find() with a selector to filter results.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/README.md#2025-04-17_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nconst aliveHeroes = await db.heroes.find({\n  selector: {\n    healthpoints: {\n      $gt: 0\n    }\n  }\n}).exec(); // the exec() returns the result once\n```\n\n----------------------------------------\n\nTITLE: Connecting to Websocket Server for RxDB Replication in TypeScript\nDESCRIPTION: This snippet shows how to connect to a websocket server for replication in RxDB. It demonstrates starting the replication for a collection and how to cancel it.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-websocket.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    replicateWithWebsocketServer\n} from 'rxdb/plugins/replication-websocket';\n\n// start the replication\nconst replicationState = await replicateWithWebsocketServer({\n    /**\n     * To make the replication work,\n     * the client collection name must be equal\n     * to the server collection name.\n     */\n    collection: myRxCollection,\n    url: 'ws://localhost:1337/socket'\n});\n\n// stop the replication\nawait replicationState.cancel();\n```\n\n----------------------------------------\n\nTITLE: Creating and Configuring RxDB Database in JavaScript for Flutter\nDESCRIPTION: JavaScript code to create an RxDB database with LokiJS storage adapter for Flutter integration. Sets up a heroes collection with schema and exposes the database through the Flutter connector.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/flutter-database.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport {\n    createRxDatabase\n} from 'rxdb';\nimport {\n    getRxStorageLoki\n} from 'rxdb/plugins/storage-lokijs';\nimport {\n    setFlutterRxDatabaseConnector,\n    getLokijsAdapterFlutter\n} from 'rxdb/plugins/flutter';\n\n// do all database creation stuff in this method.\nasync function createDB(databaseName) {\n    // create the RxDatabase\n    const db = await createRxDatabase({\n        // the database.name is variable so we can change it on the flutter side\n        name: databaseName,\n        storage: getRxStorageLoki({\n            adapter: getLokijsAdapterFlutter()\n        }),\n        multiInstance: false\n    });\n    await db.addCollections({\n        heroes: {\n            schema: {\n                version: 0,\n                primaryKey: 'id',\n                type: 'object',\n                properties: {\n                    id: {\n                        type: 'string',\n                        maxLength: 100\n                    },\n                    name: {\n                        type: 'string',\n                        maxLength: 100\n                    },\n                    color: {\n                        type: 'string',\n                        maxLength: 30\n                    }\n                },\n                indexes: ['name'],\n                required: ['id', 'name', 'color']\n            }\n        }\n    });\n    return db;\n}\n\n// start the connector so that flutter can communicate with the JavaScript process\nsetFlutterRxDatabaseConnector(\n    createDB\n);\n```\n\n----------------------------------------\n\nTITLE: Configuring RxDB with LokiJS and Filesystem Adapter in Node.js\nDESCRIPTION: This example illustrates how to set up an RxDB database using LokiJS with a filesystem adapter for storage. This approach stores data as plain JSON in a file and loads it into memory on startup.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/nodejs-database.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb';\nconst LokiFsStructuredAdapter = require('lokijs/src/loki-fs-structured-adapter.js');\nimport { getRxStorageLoki } from 'rxdb/plugins/storage-lokijs';\nimport sqlite3 from 'sqlite3';\nconst myRxDatabase = await createRxDatabase({\n    name: 'path/to/database/file/foobar.db',\n    storage: getRxStorageLoki({\n        adapter: new LokiFsStructuredAdapter()\n    })\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Encrypted Memory Mapped Storage\nDESCRIPTION: Shows how to configure Memory Mapped RxStorage with encryption, allowing encrypted persistent storage while maintaining query capabilities on unencrypted in-memory data.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-memory-mapped.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    getRxStorageIndexedDB\n} from 'rxdb-premium/plugins/storage-indexeddb';\nimport {\n    getMemoryMappedRxStorage\n} from 'rxdb-premium/plugins/storage-memory-mapped';\nimport { wrappedKeyEncryptionWebCryptoStorage } from 'rxdb-premium/plugins/encryption-web-crypto';\n\nconst storage = getMemoryMappedRxStorage({\n    storage: wrappedKeyEncryptionWebCryptoStorage({\n        storage: getRxStorageIndexedDB()\n    })\n});\n\nconst db = await createRxDatabase({\n    name: 'myDatabase,\n    storage,\n});\n/** ... **/\n```\n\n----------------------------------------\n\nTITLE: Checking IndexedDB Storage Usage with the Storage Estimation API in JavaScript\nDESCRIPTION: This snippet demonstrates how to use the Storage Estimation API to check both the total allocated space and the currently used space for your origin in IndexedDB.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/indexeddb-max-storage-limit.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst quota = await navigator.storage.estimate();\nconst totalSpace = quota.quota;\nconst usedSpace = quota.usage;\nconsole.log('Approx total allocated space:', totalSpace);\nconsole.log('Approx used space:', usedSpace);\n```\n\n----------------------------------------\n\nTITLE: Integrating Preact Signals with RxDB for Reactivity\nDESCRIPTION: This TypeScript example demonstrates how to use Preact Signals instead of RxJS Observables for reactivity in RxDB. It configures RxDB to use the PreactSignalsRxReactivityFactory and shows how to create a signal-based query that can be used in React components.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/reactjs-storage.md#2025-04-17_snippet_3\n\nLANGUAGE: ts\nCODE:\n```\nimport { createRxDatabase } from 'rxdb/plugins/core';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\nimport { PreactSignalsRxReactivityFactory } from 'rxdb-premium/plugins/reactivity-preact-signals';\n\n(async function setUpRxDBWithSignals() {\n  const db = await createRxDatabase({\n    name: 'heroDB_signals',\n    storage: getRxStorageLocalstorage(),\n    reactivity: PreactSignalsRxReactivityFactory\n  });\n\n  // Create a signal-based query instead of using Observables:\n  const collection = db.heroes;\n  const heroesSignal = collection.find().$$; // signals version\n  // Now you can reference heroesSignal() in Preact or React with adapter usage\n})();\n```\n\n----------------------------------------\n\nTITLE: Wrapping RxStorage with Encryption Plugin\nDESCRIPTION: This snippet demonstrates how to wrap a standard RxStorage (LocalStorage in this case) with the encryption-crypto-js plugin to enable encrypted storage in RxDB.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/encryption.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    wrappedKeyEncryptionCryptoJsStorage\n} from 'rxdb/plugins/encryption-crypto-js';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\n\n// wrap the normal storage with the encryption plugin\nconst encryptedStorage = wrappedKeyEncryptionCryptoJsStorage({\n    storage: getRxStorageLocalstorage()\n});\n```\n\n----------------------------------------\n\nTITLE: Encrypting Attachments in RxDB for React Native\nDESCRIPTION: Demonstrate how to encrypt file attachments in RxDB. This example shows how to add an encrypted text file as an attachment to a document.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/react-native-encryption.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createBlob } from 'rxdb/plugins/core';\nconst doc = await await db.secureData.findOne({\n    selector: {\n        normalField: 'foobar'\n    }\n}).exec(true);\nconst attachment = await doc.putAttachment({\n    id: 'encryptedFile.txt',\n    data: createBlob('Sensitive content', 'text/plain'),\n    type: 'text/plain',\n});\n```\n\n----------------------------------------\n\nTITLE: Using SQLite RxStorage with node:sqlite package\nDESCRIPTION: This snippet shows how to use SQLite RxStorage with the native sqlite module in Node.js version 22 and newer.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-sqlite.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb';\nimport {\n    getRxStorageSQLite,\n    getSQLiteBasicsNodeNative\n} from 'rxdb-premium/plugins/storage-sqlite';\nimport sqlite from 'node:sqlite';\nconst myRxDatabase = await createRxDatabase({\n    name: 'exampledb',\n    storage: getRxStorageSQLite({\n        sqliteBasics: getSQLiteBasicsNodeNative(sqlite.DatabaseSync)\n    })\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Client-Side PullStream Handler in TypeScript\nDESCRIPTION: Configures client-side event stream handling using EventSource to receive server updates. Creates a Subject to manage the stream and sets up replication with the received data.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-http.md#2025-04-17_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Subject } from 'rxjs';\nconst myPullStream$ = new Subject();\nconst eventSource = new EventSource(\n    'http://localhost/pullStream',\n    { withCredentials: true }\n);\neventSource.onmessage = event => {\n    const eventData = JSON.parse(event.data);\n    myPullStream$.next({\n        documents: eventData.documents,\n        checkpoint: eventData.checkpoint\n    });\n};\n\nconst replicationState = await replicateRxCollection({\n    /* ... */\n    pull: {\n        /* ... */\n        stream$: myPullStream$.asObservable()\n    }\n    /* ... */\n});\n```\n\n----------------------------------------\n\nTITLE: Defining and Populating Nested References in RxDB\nDESCRIPTION: This example demonstrates how to define a schema with nested references and how to populate them. It shows a 'human' collection with a nested 'family' object containing a reference.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/population.md#2025-04-17_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nconst myCollection = await myDatabase.addCollections({\n  human: {\n    schema: {\n      version: 0,\n      type: 'object',\n      properties: {\n        name: {\n          type: 'string'\n        },\n        family: {\n          type: 'object',\n          properties: {\n            mother: {\n              type: 'string',\n              ref: 'human'\n            }\n          }\n        }\n      }\n    }\n  }\n});\n\nconst mother = await myDocument.family.mother_;\nconsole.dir(mother); //> RxDocument\n```\n\n----------------------------------------\n\nTITLE: Creating Basic RxDB Plugin Structure\nDESCRIPTION: Demonstrates the basic structure of an RxDB plugin including initialization, prototype manipulation, overwritable functions, and hooks. Shows how to extend RxCollection with custom methods and add document properties.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/plugins.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst myPlugin = {\n        rxdb: true, // this must be true so rxdb knows that this is a rxdb-plugin\n        /**\n         * (optional) init() method\n         * that is called when the plugin is added to RxDB for the first time.\n         */\n        init() {\n            // import other plugins or initialize stuff\n        },\n        /**\n         * every value in this object can manipulate the prototype of the keynames class\n         * You can manipulate every prototype in this list:\n         * @link https://github.com/pubkey/rxdb/blob/master/src/plugin.ts#L22\n         */\n        prototypes: {\n            /**\n             * add a function to RxCollection so you can call 'myCollection.hello()'\n             *\n             * @param {object} prototype of RxCollection\n             */\n            RxCollection: (proto) => {\n                proto.hello = function() {\n                    return 'world';\n                };\n            }\n        },\n        /**\n         * some methods are static and can be overwritten in the overwritable-object\n         */\n        overwritable: {\n            validatePassword: function(password) {\n                if (password && typeof password !== 'string' || password.length < 10)\n                    throw new TypeError('password is not valid');\n            }\n        },\n        /**\n         * you can add hooks to the hook-list\n         */\n        hooks: {\n            /**\n             * add a `foo` property to each document. You can then call myDocument.foo (='bar')\n             */\n            createRxDocument: {\n                /**\n                 * You can either add the hook running 'before' or 'after'\n                 * the hooks of other plugins.\n                 */\n                after: function(doc) {\n                    doc.foo = 'bar';\n                }\n            }\n        }\n};\n\n// now you can import the plugin into rxdb\naddRxPlugin(myPlugin);\n```\n\n----------------------------------------\n\nTITLE: Upserting Local Documents in RxDB\nDESCRIPTION: This code demonstrates how to upsert (insert or update) local documents using the upsertLocal() method.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-local-document.md#2025-04-17_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nconst localDoc = await myCollection.upsertLocal(\n    'foobar',   // id\n    {           // data\n        foo: 'bar'\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Initializing WebWorker for RxDB Storage in TypeScript\nDESCRIPTION: This code snippet demonstrates how to set up a WebWorker for RxDB storage using the Loki storage engine. It uses the wrappedRxStorage function to prepare the storage for worker use.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/11.0.0.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { wrappedRxStorage } from 'rxdb/plugins/worker';\nimport { getRxStorageLoki } from 'rxdb/plugins/storage-lokijs';\nwrappedRxStorage({\n    storage: getRxStorageLoki()\n});\n```\n\n----------------------------------------\n\nTITLE: Using SQLite RxStorage with Webassembly in the Browser\nDESCRIPTION: This example demonstrates how to use SQLite RxStorage with the wa-sqlite package to run SQLite in Webassembly in browser environments.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-sqlite.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    createRxDatabase\n} from 'rxdb';\nimport {\n    getRxStorageSQLite,\n    getSQLiteBasicsWasm\n} from 'rxdb-premium/plugins/storage-sqlite';\nimport SQLiteESMFactory from 'wa-sqlite/dist/wa-sqlite-async.mjs';\nimport SQLite from 'wa-sqlite';\nconst sqliteModule = await SQLiteESMFactory();\nconst sqlite3 = SQLite.Factory(module);\n\nconst myRxDatabase = await createRxDatabase({\n    name: 'exampledb',\n    storage: getRxStorageSQLite({\n        sqliteBasics: getSQLiteBasicsWasm(sqlite3)\n    })\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Pull Handler on Client\nDESCRIPTION: Adds the pull handler to the replication settings on the client side, fetching documents from the server based on the checkpoint.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-http.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst replicationState = await replicateRxCollection({\n    /* ... */\n    pull: {\n        async handler(checkpointOrNull, batchSize){\n            const updatedAt = checkpointOrNull ? checkpointOrNull.updatedAt : 0;\n            const id = checkpointOrNull ? checkpointOrNull.id : '';\n            const response = await fetch(\n                `https://localhost/pull?updatedAt=${updatedAt}&id=${id}&limit=${batchSize}`\n            );\n            const data = await response.json();\n            return {\n                documents: data.documents,\n                checkpoint: data.checkpoint\n            };\n        }\n\n    }\n    /* ... */\n});\n```\n\n----------------------------------------\n\nTITLE: Creating a Basic RxQuery in JavaScript\nDESCRIPTION: Demonstrates how to create a basic RxQuery using the find() method with a selector to filter documents based on age.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-query.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n// find all that are older then 18\nconst query = myCollection\n    .find({\n      selector: {\n        age: {\n          $gt: 18\n        }\n      }\n    });\n```\n\n----------------------------------------\n\nTITLE: Retrieving Attachment from RxDocument\nDESCRIPTION: Demonstrates how to retrieve an attachment from an RxDocument using its ID.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-attachment.md#2025-04-17_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nconst attachment = myDocument.getAttachment('cat.jpg');\n```\n\n----------------------------------------\n\nTITLE: Starting Websocket Server for RxDB Replication in TypeScript\nDESCRIPTION: This snippet demonstrates how to create a RxDatabase and start a websocket server for replication. It also shows how to close the server.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-websocket.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb';\nimport {\n    startWebsocketServer\n} from 'rxdb/plugins/replication-websocket';\n\n// create a RxDatabase like normal\nconst myDatabase = await createRxDatabase({/* ... */});\n\n// start a websocket server\nconst serverState = await startWebsocketServer({\n    database: myDatabase,\n    port: 1337,\n    path: '/socket'\n});\n\n// stop the server\nawait serverState.close();\n```\n\n----------------------------------------\n\nTITLE: Using 'this' Keyword in RxDB Static Methods\nDESCRIPTION: Shows how to use the 'this' keyword in static methods, which resolves to the collection itself. This allows access to collection properties within the static method.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/orm.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst heroes = await myDatabase.addCollections({\n  heroes: {\n    schema: mySchema,\n    statics: {\n      whoAmI: function(){\n          return this.name;\n      }\n    }\n  }\n});\nconsole.log(heroes.whoAmI());\n// 'heroes'\n```\n\n----------------------------------------\n\nTITLE: Custom OPFS Worker Implementation\nDESCRIPTION: Shows how to create a custom worker implementation for OPFS storage with additional plugins and replication support.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-opfs.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\n// inside of the worker.js file\nimport { getRxStorageOPFS } from 'rxdb-premium/plugins/storage-opfs';\nimport { exposeWorkerRxStorage } from 'rxdb-premium/plugins/storage-worker';\n\nconst storage = getRxStorageOPFS();\nexposeWorkerRxStorage({\n    storage\n});\n```\n\n----------------------------------------\n\nTITLE: Reusing Worker RxStorage Instance (TypeScript)\nDESCRIPTION: Demonstrates how to reuse a single Worker RxStorage instance across multiple RxDatabase instances to optimize resource usage.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-worker.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\n// Call getRxStorageWorker() exactly once\nconst workerStorage = getRxStorageWorker({\n    workerInput: 'path/to/worker.js'\n});\n\n// use the same storage for both databases.\nconst databaseOne = await createRxDatabase({\n    name: 'database-one',\n    storage: workerStorage\n});\nconst databaseTwo = await createRxDatabase({\n    name: 'database-two',\n    storage: workerStorage\n});\n```\n\n----------------------------------------\n\nTITLE: Querying Todos in RxDB\nDESCRIPTION: Shows how to query todos that are not done yet from the local RxDB database.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/local-first-future.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nconst remaining = await db.todos.find({\n  selector: { done: { $eq: false } }\n}).exec();\nconsole.log(`Remaining todos: ${remaining.length}`);\n```\n\n----------------------------------------\n\nTITLE: Creating an Encrypted RxDatabase\nDESCRIPTION: This code shows how to create an RxDatabase with encrypted storage by providing the encryptedStorage instance and a password during database creation.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/encryption.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb/plugins/core';\n// create an encrypted database\nconst db = await createRxDatabase({\n    name: 'mydatabase',\n    storage: encryptedStorage,\n    password: 'sudoLetMeIn'\n});\n```\n\n----------------------------------------\n\nTITLE: Migrating from Previous RxDB Major Version\nDESCRIPTION: This code snippet demonstrates how to migrate from a previous RxDB major version by importing the old storage and using the migrateStorage function.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/migration-storage.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n/* ... */\nimport { migrateStorage } from 'rxdb/plugins/migration-storage';\nimport { getRxStorageLocalstorage } from 'rxdb-old/plugins/storage-localstorage'; // <- import from the old RxDB version\n\nawait migrateStorage({\n    database: db as any,\n    /**\n     * Name of the old database,\n     * using the storage migration requires that the\n     * new database has a different name.\n     */\n    oldDatabaseName: 'myOldDatabaseName',\n    oldStorage: getRxStorageLocalstorage(), // RxStorage of the old database\n    batchSize: 500, // batch size\n    parallel: false,\n    afterMigrateBatch: (input: AfterMigrateBatchHandlerInput) => {\n        console.log('storage migration: batch processed');\n    }\n});\n/* ... */\n```\n\n----------------------------------------\n\nTITLE: Querying with RegExp String Format\nDESCRIPTION: Example showing the new required string-based format for $regex queries instead of RegExp objects. This change improves performance and prevents mutation-related bugs.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/15.0.0.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n// Old way (no longer supported)\ndb.heroes.find({\n    name: {\n        $regex: /pattern/i\n    }\n});\n\n// New way\ndb.heroes.find({\n    name: {\n        $regex: \"pattern\",\n        $options: \"i\"\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Setting Up Live Backup in RxDB\nDESCRIPTION: This code shows how to configure a live backup that continuously writes all ongoing database changes to the backup directory. Unlike one-time backups, this maintains a real-time copy of the database.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/backup.md#2025-04-17_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst backupOptions = {\n    // set live: true to have an ongoing backup\n    live: true,\n    directory: '/my-backup-folder/',\n    attachments: true\n}\nconst backupState = myDatabase.backup(backupOptions);\n\n// you can still await the initial backup write, but further changes will still be processed.\nawait backupState.awaitInitialBackup();\n```\n\n----------------------------------------\n\nTITLE: Demonstrating JSON Key-Compression in RxDB\nDESCRIPTION: This snippet illustrates how RxDB's key-compression plugin can transform verbose JSON documents into more compact representations, reducing storage and bandwidth usage while maintaining transparency to the user.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/json-based-database.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n// Example: how key-compression can transform your documents\nconst uncompressed = {\n  \"firstName\": \"Corrine\",\n  \"lastName\": \"Ziemann\",\n  \"shoppingCartItems\": [\n    { \"productNumber\": 29857, \"amount\": 1 },\n    { \"productNumber\": 53409, \"amount\": 6 }\n  ]\n};\n\nconst compressed = {\n  \"|e\": \"Corrine\",\n  \"|g\": \"Ziemann\",\n  \"|i\": [\n    { \"|h\": 29857, \"|b\": 1 },\n    { \"|h\": 53409, \"|b\": 6 }\n  ]\n};\n```\n\n----------------------------------------\n\nTITLE: Using CouchDB Authorization Helper in RxDB Replication\nDESCRIPTION: This snippet demonstrates how to use the getFetchWithCouchDBAuthorization helper function to create a fetch handler with CouchDB authorization. It simplifies the process of adding authentication to the replication configuration.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-couchdb.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { \n    replicateCouchDB,\n    getFetchWithCouchDBAuthorization\n} from 'rxdb/plugins/replication-couchdb';\n\nconst replicationState = replicateCouchDB({\n    replicationIdentifier: 'my-couchdb-replication',\n    collection: myRxCollection,\n    url: 'http://example.com/db/humans',\n    fetch: getFetchWithCouchDBAuthorization('myUsername', 'myPassword'),\n    pull: {},\n    push: {}\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Push Replication for RxDB GraphQL\nDESCRIPTION: This JavaScript code configures the push replication for RxDB using GraphQL. It sets up the replication state with options for push query builder, batch size, and document modification before sending to the server.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-graphql.md#2025-04-17_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nconst replicationState = replicateGraphQL(\n    {\n        collection: myRxCollection,\n        // urls to the GraphQL endpoints\n        url: {\n            http: 'http://example.com/graphql'\n        },\n        push: {\n            queryBuilder: pushQueryBuilder, // the queryBuilder from above\n            /**\n             * batchSize (optional)\n             * Amount of document that will be pushed to the server in a single request.\n             */\n            batchSize: 5,\n            /**\n             * modifier (optional)\n             * Modifies all pushed documents before they are send to the GraphQL endpoint.\n             * Returning null will skip the document.\n             */\n            modifier: doc => doc\n        },\n        headers: {\n            Authorization: 'Bearer abcde...'\n        },\n        pull: {\n            /* ... */\n        },\n        /* ... */\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Manipulating RxLocalDocument in RxDB\nDESCRIPTION: This snippet shows various operations that can be performed on a RxLocalDocument, including accessing data, changing data, observing changes, and removing the document.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-local-document.md#2025-04-17_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nconst localDoc = await myCollection.getLocal('foobar');\n\n// access data\nconst foo = localDoc.get('foo');\n\n// change data\nlocalDoc.set('foo', 'bar2');\nawait localDoc.save();\n\n// observe data\nlocalDoc.get$('foo').subscribe(value => { /* .. */ });\n\n// remove it\nawait localDoc.remove();\n```\n\n----------------------------------------\n\nTITLE: Observing Local Documents in RxDB\nDESCRIPTION: This code demonstrates how to observe local documents using the getLocal$() method, which returns an Observable that emits the document or null.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-local-document.md#2025-04-17_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nconst subscription = myCollection.getLocal$('foobar').subscribe(documentOrNull => {\n    console.dir(documentOrNull); // > RxLocalDocument or null\n});\n```\n\n----------------------------------------\n\nTITLE: Inserting Local Documents in RxDB\nDESCRIPTION: This snippet shows how to insert local documents into a collection or database using the insertLocal() method.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-local-document.md#2025-04-17_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst localDoc = await myCollection.insertLocal(\n    'foobar',   // id\n    {           // data\n        foo: 'bar'\n    }\n);\n\n// you can also use local-documents on a database\nconst localDoc = await myDatabase.insertLocal(\n    'foobar',   // id\n    {           // data\n        foo: 'bar'\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Exposing Worker RxStorage in WebWorker (TypeScript)\nDESCRIPTION: Sets up the worker process to expose RxStorage functionality. It uses the IndexedDB RxStorage implementation as an example.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-worker.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { exposeWorkerRxStorage } from 'rxdb-premium/plugins/storage-worker';\nimport { getRxStorageIndexedDB } from 'rxdb-premium/plugins/storage-indexeddb';\n\nexposeWorkerRxStorage({\n    /**\n     * You can wrap any implementation of the RxStorage interface\n     * into a worker.\n     * Here we use the IndexedDB RxStorage.\n     */\n    storage: getRxStorageIndexedDB()\n});\n```\n\n----------------------------------------\n\nTITLE: Demonstrating Mango Query Syntax in TypeScript\nDESCRIPTION: This snippet shows an example of a Mango Query in RxDB. It demonstrates how to define a query selector with conditions on age and lastName fields, as well as specifying a sort order.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rxdb-tradeoffs.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// A Mango Query\nconst query = {\n    selector: {\n        age: {\n            $gt: 10\n        },\n        lastName: 'foo'\n    },\n    sort: [{ age: 'asc' }]\n};\n```\n\n----------------------------------------\n\nTITLE: Activating Local Documents\nDESCRIPTION: Example showing how to enable local documents storage at both database and collection levels for improved performance\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/12.0.0.md#2025-04-17_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n// activate local documents on a RxDatabase\nconst myDatabase = await createRxDatabase({\n    name: 'mydatabase',\n    storage: getRxStoragePouch('memory'),\n    localDocuments: true // <- activate this to store local documents in the database\n});\n\nmyDatabase.addCollections({\n  messages: {\n    schema: messageSchema,\n    localDocuments: true // <- activate this to store local documents in the collection\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Defining Schema with Single Reference in RxDB\nDESCRIPTION: This snippet demonstrates how to define a schema with a single reference to another document in the same collection. It uses the 'ref' keyword to specify the relationship.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/population.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport const refHuman = {\n    title: 'human related to other human',\n    version: 0,\n    primaryKey: 'name',\n    properties: {\n        name: {\n            type: 'string'\n        },\n        bestFriend: {\n            ref: 'human',     // refers to collection human\n            type: 'string'    // ref-values must always be string or ['string','null'] (primary of foreign RxDocument) \n        }\n    }\n};\n```\n\n----------------------------------------\n\nTITLE: Starting Replication in RxDB 14.0\nDESCRIPTION: Shows the new way to start replication using a pure function instead of collection methods, improving tree shaking and typing support.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/14.0.0.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { replicateCouchDB } from 'rxdb/plugins/replication-couchdb';\nconst replicationState = replicateCouchDB({ /* ... */ });\n```\n\n----------------------------------------\n\nTITLE: Using Pre-built Worker RxStorage (TypeScript)\nDESCRIPTION: Shows how to use a pre-built worker file provided by RxDB Premium for creating an RxDatabase with Worker RxStorage.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-worker.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    createRxDatabase\n} from 'rxdb';\nimport { getRxStorageWorker } from 'rxdb-premium/plugins/storage-worker';\nconst database = await createRxDatabase({\n    name: 'mydatabase',\n    storage: getRxStorageWorker(\n        {\n            /**\n             * Path to where the copied file from node_modules/rxdb/dist/workers\n             * is reachable from the webserver.\n             */\n            workerInput: '/indexeddb.worker.js'\n        }\n    )\n});\n```\n\n----------------------------------------\n\nTITLE: Importing and Adding RxDB FlexSearch Plugin\nDESCRIPTION: Code snippet showing how to import the FlexSearch plugin from rxdb-premium package and add it to RxDB using the addRxPlugin function.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/fulltext-search.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { RxDBFlexSearchPlugin } from 'rxdb-premium/plugins/flexsearch';\nimport { addRxPlugin } from 'rxdb/plugins/core';\naddRxPlugin(RxDBFlexSearchPlugin);\n```\n\n----------------------------------------\n\nTITLE: Activating Local Documents for RxDatabase and RxCollection\nDESCRIPTION: This code demonstrates how to activate local documents for a RxDatabase and RxCollection by setting the 'localDocuments' flag to true during creation.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-local-document.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst myDatabase = await createRxDatabase({\n    name: 'mydatabase',\n    storage: getRxStorageLocalstorage(),\n    localDocuments: true // <- activate this to store local documents in the database\n});\n\nmyDatabase.addCollections({\n  messages: {\n    schema: messageSchema,\n    localDocuments: true // <- activate this to store local documents in the collection\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Document Data Structure Example in TypeScript\nDESCRIPTION: Example of a document structure that supports replication with required fields for sorting and deletion tracking. The document includes an id, name fields, updatedAt timestamp for sorting, and _deleted flag for soft deletes.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst docData = {\n    \"id\": \"foobar\",\n    \"name\": \"Alice\",\n    \"lastName\": \"Wilson\",\n    /**\n     * Contains the last write timestamp\n     * so all documents writes can be sorted by that value\n     * when they are fetched from the remote instance.\n     */\n    \"updatedAt\": 1564483474,\n    /**\n     * Instead of physically deleting documents,\n     * a deleted document gets replicated.\n     */\n    \"_deleted\": false\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Conditional CRDT Operations in TypeScript\nDESCRIPTION: This snippet demonstrates how to use conditional CRDT operations. It shows an example of incrementing the 'points' field only if the current value is less than 100, using a selector and ifMatch/ifNotMatch operations.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/crdt.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nawait myDocument.updateCRDT({\n    // only if the selector matches, the ifMatch operation will run\n    selector: {\n        age: {\n            $lt: 100\n        }\n    },\n    // an operation that runs if the selector matches\n    ifMatch: {\n        $inc: {\n            points: 1\n        }\n    },\n    // if the selector does NOT match, you could run a different operation instead\n    ifNotMatch: {\n        // ...\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Email Format for Ajv Validation in RxDB\nDESCRIPTION: This snippet shows how to add a custom email format for the Ajv validator in RxDB. The custom format ensures that email fields contain the @ symbol.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/schema-validation.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { getAjv } from 'rxdb/plugins/validate-ajv';\nconst ajv = getAjv();\najv.addFormat('email', {\n    type: 'string',\n    validate: v => v.includes('@') // ensure email fields contain the @ symbol\n});\n```\n\n----------------------------------------\n\nTITLE: Creating Multiple WebWorkers for Parallel Processing\nDESCRIPTION: Initializes one WebWorker per CPU core to enable parallel processing of embedding generation tasks. This significantly improves performance when dealing with large datasets.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/javascript-vector-database.md#2025-04-17_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\n// create one WebWorker per core\nconst workers = new Array(navigator.hardwareConcurrency)\n    .fill(0)\n    .map(() => new Worker(new URL(\"worker.js\", import.meta.url)));\n```\n\n----------------------------------------\n\nTITLE: Implementing Observable Queries in RxDB for Reactive UI Updates\nDESCRIPTION: This code demonstrates how to create an observable query in RxDB using RxJS. It queries documents where the age is greater than 21 and subscribes to the results, allowing the UI to automatically update when the underlying data changes.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/browser-storage.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst query = myCollection.find({\n    selector: {\n        age: {\n            $gt: 21\n        }\n    }\n});\nconst querySub = query.$.subscribe(results => {\n    console.log('got results: ' + results.length);\n});\n```\n\n----------------------------------------\n\nTITLE: Defining RxDB Collection Schema\nDESCRIPTION: Add a collection with JSON schema validation for todo items including required fields and data types\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/quickstart.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nawait myDatabase.addCollections({\n    todos: {\n        schema: {\n            version: 0,\n            primaryKey: 'id',\n            type: 'object',\n            properties: {\n                id: {\n                    type: 'string',\n                    maxLength: 100\n                },\n                name: {\n                    type: 'string'\n                },\n                done: {\n                    type: 'boolean'\n                },\n                timestamp: {\n                    type: 'string',\n                    format: 'date-time'\n                }\n            },\n            required: ['id', 'name', 'done', 'timestamp']\n        }\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Defining RxCollection Type in TypeScript\nDESCRIPTION: Create a type for the collection, including document type, document methods, and collection methods.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/tutorials/typescript.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\n// we declare one static ORM-method for the collection\nexport type HeroCollectionMethods = {\n    countAllDocuments: () => Promise<number>;\n}\n\n// and then merge all our types\nexport type HeroCollection = RxCollection<\n    HeroDocType,\n    HeroDocMethods,\n    HeroCollectionMethods\n>;\n```\n\n----------------------------------------\n\nTITLE: Installing RxDB Backup Plugin\nDESCRIPTION: Code snippet showing how to install and add the RxDB Backup Plugin to your project. This is required before using any backup functionality.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/backup.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { addRxPlugin } from 'rxdb';\nimport { RxDBBackupPlugin } from 'rxdb/plugins/backup';\naddRxPlugin(RxDBBackupPlugin);\n```\n\n----------------------------------------\n\nTITLE: Composing Queries in JavaScript/TypeScript\nDESCRIPTION: These snippets demonstrate how to compose and modify Mango Queries in RxDB using plain JavaScript/TypeScript. It shows adding a condition to an existing query and merging selectors from multiple queries.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rxdb-tradeoffs.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nquery.selector.user = 'foobar';\n```\n\nLANGUAGE: typescript\nCODE:\n```\nqueryA.selector = {\n    $and: [\n        queryA.selector,\n        queryB.selector\n    ]\n};\n```\n\n----------------------------------------\n\nTITLE: Using SQLite Database with Capacitor\nDESCRIPTION: Shows how to create and use a SQLite database connection in Capacitor using the @capacitor-community/sqlite package. Demonstrates connection setup and basic query execution.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/capacitor-database.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Capacitor } from '@capacitor/core';\nimport {\n  CapacitorSQLite, SQLiteDBConnection, SQLiteConnection, capSQLiteSet,\n  capSQLiteChanges, capSQLiteValues, capEchoResult, capSQLiteResult,\n  capNCDatabasePathResult\n} from '@capacitor-community/sqlite';\n\nconst sqlite = new SQLiteConnection(CapacitorSQLite);\nconst database: SQLiteDBConnection = await this.sqlite.createConnection(\n    databaseName,\n    encrypted,\n    mode,\n    version,\n    readOnly\n);\nlet { rows } = database.query('SELECT somevalue FROM sometable');\n```\n\n----------------------------------------\n\nTITLE: Implementing Encrypted RxDB Storage\nDESCRIPTION: Example showing how to enable encryption in RxDB using the crypto-js plugin, including schema setup with encrypted fields\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/ionic-storage.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { wrappedKeyEncryptionCryptoJsStorage } from 'rxdb/plugins/encryption-crypto-js';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\nimport { createRxDatabase } from 'rxdb/plugins/core';\n\nasync function initEncryptedDB() {\n  const encryptedStorage = wrappedKeyEncryptionCryptoJsStorage({\n    storage: getRxStorageLocalstorage()\n  });\n\n  const db = await createRxDatabase({\n    name: 'secureIonicDB',\n    storage: encryptedStorage,\n    password: 'myS3cretP4ssw0rd'\n  });\n\n  await db.addCollections({\n    secrets: {\n      schema: {\n        title: 'secret schema',\n        version: 0,\n        type: 'object',\n        primaryKey: 'id',\n        properties: {\n          id: { type: 'string' },\n          text: { type: 'string' }\n        },\n        required: ['id'],\n        // all fields in this array will be stored encrypted:\n        encrypted: ['text']\n      }\n    }\n  });\n\n  return db;\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring RxDB Plugin Options\nDESCRIPTION: Shows how to pass custom options to RxDatabase and RxCollection when using plugins. These options can be accessed within the plugin implementation.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/plugins.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst collection = myDatabase.addCollections({\n    foo: {\n        schema: mySchema,\n        options: { // anything can be passed into the options\n            foo: ()=>'bar'\n        }\n    }\n})\n\n// Afterwards you can use these options in your plugin.\n\ncollection.options.foo(); // 'bar'\n```\n\n----------------------------------------\n\nTITLE: Creating Pull Query Builder for RxDB GraphQL Replication\nDESCRIPTION: This JavaScript function creates a pull query builder for RxDB GraphQL replication. It generates a GraphQL query with checkpoint and limit parameters to fetch updated documents from the server.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-graphql.md#2025-04-17_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst pullQueryBuilder = (checkpoint, limit) => {\n    /**\n     * The first pull does not have a checkpoint\n     * so we fill it up with defaults\n     */\n    if (!checkpoint) {\n        checkpoint = {\n            id: '',\n            updatedAt: 0\n        };\n    }\n    const query = `query PullHuman($checkpoint: CheckpointInput, $limit: Int!) {\n        pullHuman(checkpoint: $checkpoint, limit: $limit) {\n            documents {\n                id\n                name\n                age\n                updatedAt\n                deleted\n            }\n            checkpoint {\n                id\n                updatedAt\n            }\n        }\n    }`;\n    return {\n        query,\n        operationName: 'PullHuman',\n        variables: {\n            checkpoint,\n            limit\n        }\n    };\n};\n```\n\n----------------------------------------\n\nTITLE: Creating an RxPipeline in TypeScript\nDESCRIPTION: Demonstrates how to create an RxPipeline on a source collection with a destination collection and a handler function. The handler processes documents from the source and inserts them into the destination collection.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-pipeline.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst pipeline = await mySourceCollection.addPipeline({\n    identifier: 'my-pipeline',\n    destination: myDestinationCollection,\n    handler: async (docs) => {\n        /**\n         * Here you can process the documents and to writes to\n         * the destination collection.\n         */\n        for (const doc of docs) {\n            await myDestinationCollection.insert({\n                id: doc.primary,\n                category: doc.category\n            });\n        }\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Setting Up Dexie Cloud Sync with RxDB\nDESCRIPTION: This multi-step process demonstrates how to integrate Dexie Cloud for synchronization with RxDB using Dexie storage.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-dexie.md#2025-04-17_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nnpm install dexie-cloud-addon\n```\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb/plugins/core';\nimport { getRxStorageDexie } from 'rxdb/plugins/storage-dexie';\nimport dexieCloud from 'dexie-cloud-addon';\n```\n\nLANGUAGE: typescript\nCODE:\n```\nconst storage = getRxStorageDexie({\n  addons: [dexieCloud],\n  /*\n   * Whenever a new dexie database instance is created,\n   * this method will be called.\n   */\n  async onCreate(dexieDatabase, dexieDatabaseName) {\n    await dexieDatabase.cloud.configure({\n        databaseUrl: \"https://<yourdatabase>.dexie.cloud\",\n        requireAuth: true // optional\n    });\n  }\n});\n```\n\nLANGUAGE: typescript\nCODE:\n```\nconst db = await createRxDatabase({\n  name: 'mydb',\n  storage\n});\n```\n\n----------------------------------------\n\nTITLE: Creating Document Type from Schema in TypeScript\nDESCRIPTION: Define a TypeScript type for documents based on an RxDB schema. This approach uses typed schema utilities from RxDB to generate the document type.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/tutorials/typescript.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    toTypedRxJsonSchema,\n    ExtractDocumentTypeFromTypedRxJsonSchema,\n    RxJsonSchema\n} from 'rxdb';\nexport const heroSchemaLiteral = {\n    title: 'hero schema',\n    description: 'describes a human being',\n    version: 0,\n    keyCompression: true,\n    primaryKey: 'passportId',\n    type: 'object',\n    properties: {\n        passportId: {\n            type: 'string',\n            maxLength: 100 // <- the primary key must have set maxLength\n        },\n        firstName: {\n            type: 'string'\n        },\n        lastName: {\n            type: 'string'\n        },\n        age: {\n            type: 'integer'\n        }\n    },\n    required: ['firstName', 'lastName', 'passportId'],\n    indexes: ['firstName']\n} as const; // <- It is important to set 'as const' to preserve the literal type\nconst schemaTyped = toTypedRxJsonSchema(heroSchemaLiteral);\n\n// aggregate the document type from the schema\nexport type HeroDocType = ExtractDocumentTypeFromTypedRxJsonSchema<typeof schemaTyped>;\n\n// create the typed RxJsonSchema from the literal typed object.\nexport const heroSchema: RxJsonSchema<HeroDocType> = heroSchemaLiteral;\n```\n\n----------------------------------------\n\nTITLE: Creating RxDatabase Type in TypeScript\nDESCRIPTION: Define types for the database collections and the overall database structure.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/tutorials/typescript.md#2025-04-17_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport type MyDatabaseCollections = {\n    heroes: HeroCollection\n}\n\nexport type MyDatabase = RxDatabase<MyDatabaseCollections>;\n```\n\n----------------------------------------\n\nTITLE: Implementing Readonly Fields in RxDB Change Validator\nDESCRIPTION: Demonstrates how to create a change validator function that ensures certain fields are readonly. It compares the field value in the new document state with the assumed master state to prevent client-side modifications.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-server.md#2025-04-17_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nconst myChangeValidator = function(authData, change){\n    if(change.newDocumentState.myReadonlyField !== change.assumedMasterState.myReadonlyField){\n        throw new Error('myReadonlyField is readonly');\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating RxDB Database Instance\nDESCRIPTION: Configuration and initialization of RxDB database with SQLite storage for React Native.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/react-native-database.md#2025-04-17_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nconst myRxDatabase = await createRxDatabase({\n    name: 'exampledb',\n    multiInstance: false,\n    storage: getRxStorageSQLite({\n        sqliteBasics: getSQLiteBasicsQuickSQLite(open)\n    })\n});\n```\n\n----------------------------------------\n\nTITLE: Creating an RxServer with Fastify Adapter in TypeScript\nDESCRIPTION: This code snippet shows how to create an RxServer using the Fastify adapter, which is available as part of RxDB Premium. It demonstrates the setup and starting of the server.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-server.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxServer } from 'rxdb-server/plugins/server';\nimport { RxServerAdapterFastify } from 'rxdb-premium/plugins/server-adapter-fastify';\n\nconst myServer = await createRxServer({\n    database: myRxDatabase,\n    adapter: RxServerAdapterFastify,\n    port: 443\n});\nawait myServer.start();\n```\n\n----------------------------------------\n\nTITLE: Wrapping RxStorage with Key Compression Plugin in TypeScript\nDESCRIPTION: This snippet demonstrates how to wrap an RxStorage implementation with the key compression plugin. It imports necessary modules and creates a storage instance with key compression enabled.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/key-compression.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { wrappedKeyCompressionStorage } from 'rxdb/plugins/key-compression';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\n\nconst storageWithKeyCompression = wrappedKeyCompressionStorage({\n    storage: getRxStorageLocalstorage()\n});\n```\n\n----------------------------------------\n\nTITLE: Using SQLite RxStorage with React Native\nDESCRIPTION: This snippet shows how to use SQLite RxStorage in React Native environments using the react-native-quick-sqlite npm module.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-sqlite.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    createRxDatabase\n} from 'rxdb';\nimport {\n    getRxStorageSQLite,\n    getSQLiteBasicsQuickSQLite\n} from 'rxdb-premium/plugins/storage-sqlite';\nimport { open } from 'react-native-quick-sqlite';\n\nconst myRxDatabase = await createRxDatabase({\n    name: 'exampledb',\n    multiInstance: false,\n    storage: getRxStorageSQLite({\n        sqliteBasics: getSQLiteBasicsQuickSQLite(open)\n    })\n});\n```\n\n----------------------------------------\n\nTITLE: Setting Premium Flag for Collection Limit Removal in TypeScript\nDESCRIPTION: Shows how to remove the 16 collection limit in RxDB by enabling premium features using setPremiumFlag function from rxdb-premium package.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-collection.md#2025-04-17_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport { setPremiumFlag } from 'rxdb-premium/plugins/shared';\nsetPremiumFlag();\n```\n\n----------------------------------------\n\nTITLE: Defining RxDB Collections with JSON Schema\nDESCRIPTION: Example showing how to define a collection in RxDB with a JSON schema that specifies the document structure.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/firestore-alternative.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nawait db.addCollections({\n  items: {\n    schema: {\n      title: 'items schema',\n      version: 0,\n      primaryKey: 'id',\n      type: 'object',\n      properties: {\n        id: { type: 'string', maxLength: 100 },\n        text: { type: 'string' }\n      }\n    }\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Initializing SQLite RxStorage with Premium Version\nDESCRIPTION: This snippet shows how to initialize the premium version of SQLite RxStorage, which is production-ready and includes performance optimizations and full query support.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-sqlite.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    getRxStorageSQLite,\n    getSQLiteBasicsNodeNative\n} from 'rxdb-premium/plugins/storage-sqlite';\n\nconst storage = getRxStorageSQLite({\n    sqliteBasics: getSQLiteBasicsNodeNative(sqlite.DatabaseSync)\n});\n\nconst myRxDatabase = await createRxDatabase({\n    name: 'exampledb',\n    storage: storage\n});\n```\n\n----------------------------------------\n\nTITLE: Deleting RxDB Document\nDESCRIPTION: Remove a document from the collection permanently\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/quickstart.md#2025-04-17_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nawait firstDocument.remove();\n```\n\n----------------------------------------\n\nTITLE: Updated Find Query Syntax\nDESCRIPTION: Demonstrates the new query syntax supporting full mango queries in find() and findOne() methods.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/9.0.0.md#2025-04-17_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nconst query = myRxCollection.find({\n    age: {\n        $gt: 10\n    }\n}).sort('name').skip(5).limit(10);\n```\n\nLANGUAGE: typescript\nCODE:\n```\nconst query = myRxCollection.find({\n    selector: {\n        age: {\n            $gt: 10\n        }\n    },\n    sort: [{name: 'asc'}],\n    skip: 5,\n    limit: 10\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing RxDB with jQuery DOM Updates\nDESCRIPTION: Example showing how to query RxDB reactively and update the DOM using jQuery, including handling form submissions for new entries\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/jquery-database.md#2025-04-17_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n$(document).ready(async function () {\n  const db = await initDatabase();\n\n  // Subscribing to all hero documents\n  db.hero\n    .find()\n    .$  // the observable\n    .subscribe((heroes) => {\n      // Clear the list\n      $('#heroList').empty();\n\n      // Append each hero to the DOM\n      heroes.forEach((hero) => {\n        $('#heroList').append(`\n          <li>\n            <strong>${hero.name}</strong> - Points: ${hero.points}\n          </li>\n        `);\n      });\n    });\n\n  // Example of adding a new hero\n  $('#addHeroBtn').on('click', async () => {\n    const heroName = $('#heroName').val();\n    const heroPoints = parseInt($('#heroPoints').val(), 10);\n    await db.hero.insert({\n      id: Date.now().toString(),\n      name: heroName,\n      points: heroPoints\n    });\n  });\n});\n```\n\n----------------------------------------\n\nTITLE: Initializing IndexedDB RxStorage in RxDB\nDESCRIPTION: Basic setup for creating an RxDatabase using IndexedDB storage with optional batch size configuration for query optimization.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-indexeddb.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    createRxDatabase\n} from 'rxdb';\nimport {\n    getRxStorageIndexedDB\n} from 'rxdb-premium/plugins/storage-indexeddb';\n\nconst db = await createRxDatabase({\n    name: 'exampledb',\n    storage: getRxStorageIndexedDB({\n        /**\n         * For better performance, queries run with a batched cursor.\n         * You can change the batchSize to optimize the query time\n         * for specific queries.\n         * You should only change this value when you are also doing performance measurements.\n         * [default=300]\n         */\n        batchSize: 300\n    })\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Encrypted Attachments in RxDB Schema\nDESCRIPTION: This snippet shows how to configure a schema to encrypt attachment data using the database password by setting the 'encrypted' property to true in the attachments configuration.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/encryption.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nconst mySchema = {\n    version: 0,\n    type: 'object',\n    properties: {\n        /* ... */\n    },\n    attachments: {\n        encrypted: true // if true, the attachment-data will be encrypted with the db-password\n    }\n};\n```\n\n----------------------------------------\n\nTITLE: Accessing State Data in RxState\nDESCRIPTION: Shows different ways to retrieve data from RxState, including accessing root state, single properties, and nested properties.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-state.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n// get root state data\nconst val = myState.get();\n\n// get single property\nconst val = myState.get('myField');\nconst val = myState.myField;\n\n// get nested property\nconst val = myState.get('myField.childfield');\nconst val = myState.myField.childfield;\n\n// get nested array property\nconst val = myState.get('myArrayField[0].foobar');\nconst val = myState.myArrayField[0].foobar;\n```\n\n----------------------------------------\n\nTITLE: Using WebSockets in JavaScript\nDESCRIPTION: This code snippet shows how to establish a WebSocket connection in JavaScript, including handling the connection opening and receiving messages from the server.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/websockets-sse-polling-webrtc-webtransport.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst socket = new WebSocket('ws://example.com');\n\nsocket.onopen = function(event) {\n  console.log('Connection established');\n  // Sending a message to the server\n  socket.send('Hello Server!');\n};\n\nsocket.onmessage = function(event) {\n  console.log('Message from server:', event.data);\n};\n```\n\n----------------------------------------\n\nTITLE: Using Preferences API in Capacitor for Key-Value Storage\nDESCRIPTION: Demonstrates how to use Capacitor's native Preferences API for lightweight persistent data storage. Shows writing, reading, and deleting key-value pairs using the asynchronous API.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/capacitor-database.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Preferences } from '@capacitor/preferences';\n\n\n// write\nawait Preferences.set({\n  key: 'foo',\n  value: 'baar',\n});\n\n// read\nconst { value } = await Preferences.get({ key: 'foo' }); // > 'bar'\n\n// delete\nawait Preferences.remove({ key: 'foo' });\n```\n\n----------------------------------------\n\nTITLE: Adding the RxDB Migration Schema Plugin\nDESCRIPTION: This snippet shows how to import and add the RxDB Migration Schema Plugin to enable data migration capabilities in your application. The plugin must be added before you can perform schema migrations.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/migration-schema.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { addRxPlugin } from 'rxdb';\nimport { RxDBMigrationSchemaPlugin } from 'rxdb/plugins/migration-schema';\naddRxPlugin(RxDBMigrationSchemaPlugin);\n```\n\n----------------------------------------\n\nTITLE: Using SQLite RxStorage with react-native-sqlite-2\nDESCRIPTION: This example demonstrates an alternative method to use SQLite RxStorage in React Native using the react-native-sqlite-2 library.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-sqlite.md#2025-04-17_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    getRxStorageSQLite,\n    getSQLiteBasicsWebSQL\n} from 'rxdb-premium/plugins/storage-sqlite';\nimport SQLite from 'react-native-sqlite-2';\nconst storage = getRxStorageSQLite({\n  sqliteBasics: getSQLiteBasicsWebSQL(SQLite.openDatabase)\n});\n```\n\n----------------------------------------\n\nTITLE: Importing Test Data into RxDB Collection\nDESCRIPTION: Fetches test data from a JSON file and bulk inserts it into the items collection. This example uses the Wiki Embeddings dataset from Supabase for testing purposes.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/javascript-vector-database.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst imported = await itemsCollection.count().exec();\nconst response = await fetch('./files/items.json');\nconst items = await response.json();\nconst insertResult = await itemsCollection.bulkInsert(\n    items\n);\n```\n\n----------------------------------------\n\nTITLE: Implementing Change Validator in RxDB Server\nDESCRIPTION: Demonstrates how to create a change validator function to restrict document writes on the server. This example prevents inserts and only allows updates by checking for the presence of an 'assumedMasterState' property.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-server.md#2025-04-17_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nfunction myChangeValidator(authData, change) {\n    if(change.assumedMasterState) {\n        return false;\n    } else {\n        return true;\n    }\n}\n\nconst endpoint = await server.addReplicationEndpoint({\n    name: 'my-endpoint',\n    collection: myServerCollection,\n    changeValidator: myChangeValidator\n});\n```\n\n----------------------------------------\n\nTITLE: Creating an Age Index in IndexedDB\nDESCRIPTION: This snippet demonstrates how to create a compound index in IndexedDB that includes both the 'age' field and the primary 'id'. This index is used to implement a fast batched cursor for querying documents.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/slow-indexeddb.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nmyIndexedDBObjectStore.createIndex(\n    'age-index',\n    [\n        'age',\n        'id'\n    ]\n);\n```\n\n----------------------------------------\n\nTITLE: Adding Global Variable Polyfill for Angular/Webpack\nDESCRIPTION: Fixes the 'global is not defined' error that commonly occurs when using RxDB with Angular or Webpack-based frameworks. This code adds the missing global variables that are assumed by some RxDB dependencies.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/install.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n(window as any).global = window;\n(window as any).process = {\n    env: { DEBUG: undefined },\n};\n```\n\n----------------------------------------\n\nTITLE: Creating CouchDB Database for RxDB Replication\nDESCRIPTION: This code shows how to create a missing CouchDB database on the server before starting replication. It uses a PUT request to create the database with the specified name.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-couchdb.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst remoteDatabaseName = 'humans';\nawait fetch(\n    'http://example.com/db/' + remoteDatabaseName,\n    {\n        method: 'PUT'\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Manual Migration with Progress Tracking in RxDB\nDESCRIPTION: This code shows how to manually control the migration process and track its progress. It disables automatic migration, checks if migration is needed, and subscribes to state updates to monitor progress.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/migration-schema.md#2025-04-17_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nconst messageCol = await myDatabase.addCollections({\n  messages: {\n    schema: messageSchemaV1,\n    autoMigrate: false, // <- migration will not run at creation\n    migrationStrategies: {\n      1: async function(oldDoc){\n        ...\n        anything that takes very long\n        ...\n        return oldDoc;\n      }\n    }\n  }\n});\n\n// check if migration is needed\nconst needed = await messageCol.migrationNeeded();\nif(needed === false) {\n  return;\n}\n\n// start the migration\nmessageCol.startMigration(10); // 10 is the batch-size, how many docs will run at parallel\n\nconst migrationState = messageCol.getMigrationState();\n\n// 'start' the observable\nmigrationState.$.subscribe({\n    next: state => console.dir(state),\n    error: error => console.error(error),\n    complete: () => console.log('done')\n});\n\n// the emitted states look like this:\n{\n    status: 'RUNNING' // oneOf 'RUNNING' | 'DONE' | 'ERROR'\n    count: {\n      total: 50,   // amount of documents which must be migrated\n      handled: 0,  // amount of handled docs\n      percent: 0   // percentage [0-100]\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Server-Only Indexes in RxDB Schema\nDESCRIPTION: Shows how to set up server-only indexes using the 'internalIndexes' field in the schema. These indexes don't prepend the '_deleted' field, which is useful for server-side queries where the deletion status is irrelevant.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-server.md#2025-04-17_snippet_7\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"version\": 0,\n    \"primaryKey\": \"id\",\n    \"type\": \"object\",\n    \"properties\": {\n        \"id\": {\n            \"type\": \"string\",\n            \"maxLength\": 100\n        },\n        \"name\": {\n            \"type\": \"string\",\n            \"maxLength\": 100\n        }\n    },\n    \"internalIndexes\": [\n        [\"name\", \"id\"]\n    ]\n}\n```\n\n----------------------------------------\n\nTITLE: Custom Hash Function Implementation\nDESCRIPTION: Shows how to implement a custom hash function for RxDB using a third-party library instead of the default crypto.subtle.digest.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-database.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { sha256 } from 'ohash';\nfunction myOwnHashFunction(input: string) {\n    return Promise.resolve(sha256(input));\n}\nconst db = await createRxDatabase({\n  hashFunction: myOwnHashFunction\n  /* ... */\n});\n```\n\n----------------------------------------\n\nTITLE: Using RxDocument.atomicSet() Method in JavaScript\nDESCRIPTION: Added atomicSet() method to RxDocument for performing atomic updates on document fields.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/CHANGELOG.md#2025-04-17_snippet_8\n\nLANGUAGE: JavaScript\nCODE:\n```\nRxDocument.atomicSet()\n```\n\n----------------------------------------\n\nTITLE: Implementing RxDB Replication with CouchDB\nDESCRIPTION: This multi-step example shows how to set up replication between an RxDB database using Dexie storage and a CouchDB server.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-dexie.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { replicateCouchDB } from 'rxdb/plugins/replication-couchdb';\nimport { getRxStorageDexie } from 'rxdb/plugins/storage-dexie';\nimport { createRxDatabase } from 'rxdb/plugins/core';\n```\n\nLANGUAGE: typescript\nCODE:\n```\nconst db = await createRxDatabase({\n  name: 'mydb',\n  storage: getRxStorageDexie()\n});\n```\n\nLANGUAGE: typescript\nCODE:\n```\nawait db.addCollections({\n    humans: {\n        schema: {\n            version: 0,\n            type: 'object',\n            primaryKey: 'id',\n            properties: {\n                id: { type: 'string', maxLength: 100 },\n                name: { type: 'string' },\n                age: { type: 'number' }\n              },\n            required: ['id', 'name']\n        }\n    }\n});\n```\n\nLANGUAGE: typescript\nCODE:\n```\nconst replicationState = replicateCouchDB({\n  replicationIdentifier: 'my-couchdb-replication',\n  collection: db.humans,\n  // The URL to your CouchDB endpoint\n  url: 'http://example.com/db/humans'\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring RxDB with LevelDown Adapter for NodeJS\nDESCRIPTION: This code demonstrates how to use the LevelDown adapter with RxDB in NodeJS. It offers the best performance for filesystem storage but isn't suitable for multi-process access to the same files.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/adapters.md#2025-04-17_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\n// npm install leveldown --save\n// npm install pouchdb-adapter-leveldb --save\naddPouchPlugin(require('pouchdb-adapter-leveldb')); // leveldown adapters need the leveldb plugin to work\nconst leveldown = require('leveldown');\n\nconst database = await createRxDatabase({\n    name: 'mydatabase',\n    storage: getRxStoragePouch(leveldown) // the full leveldown-module\n});\n\n// or use a specific folder to store the data\nconst database = await createRxDatabase({\n    name: '/root/user/project/mydatabase',\n    storage: getRxStoragePouch(leveldown) // the full leveldown-module\n});\n```\n\n----------------------------------------\n\nTITLE: RxDB Project Documentation\nDESCRIPTION: Main project README in markdown format containing badges, descriptions, features and environment support details for RxDB - a fast, local-first, reactive database for JavaScript applications.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/README.md#2025-04-17_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n<!--\n| Announcement                                                        |\n| :--: |\n| &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp; [Help testing the RxDB version 16 release](https://github.com/pubkey/rxdb/issues/6650) &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp; |\n-->\n\n<!-- | Announcement                                                        |\n| :--: |\n| &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp; Version **16.0.0** is now released, read the [CHANGELOG](https://rxdb.info/releases/16.0.0.html) &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp; |\n -->\n\n<!--\n|                                                                                  Announcement                                                                                  |\n| :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |\n| Please take part in the [RxDB user survey 2023](https://rxdb.info/survey.html). This will help me to better plan the steps for the next major release. (takes about 2 minutes) |\n-->\n```\n\n----------------------------------------\n\nTITLE: Migrating Data with Schema Version Update in RxDB\nDESCRIPTION: Demonstrates how to update the schema version when migrating data in a vector database. By incrementing the version number from the previous schema, RxDB can detect that a migration is needed when the application reloads with updated code.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/javascript-vector-database.md#2025-04-17_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\nconst schemaV1 = {\n    \"version\": 1, // <- increase schema version by 1\n    \"primaryKey\": \"id\",\n    \"properties\": {\n        /* ... */\n    },\n    /* ... */\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring RxDB with Key Compression\nDESCRIPTION: Example demonstrating how to enable key compression in RxDB schema to reduce storage size and improve performance\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/ionic-storage.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nawait db.addCollections({\n  logs: {\n    schema: {\n      title: 'logs schema',\n      version: 0,\n      keyCompression: true, // enable compression\n      type: 'object',\n      primaryKey: 'id',\n      properties: {\n        id: { type: 'string' },\n        message: { type: 'string' },\n        createdAt: { type: 'string', format: 'date-time' }\n      }\n    }\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Emptying a Collection Using Cleanup Plugin\nDESCRIPTION: Demonstrates how to empty a collection by deleting all documents and then purging them using the cleanup plugin.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/cleanup.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nawait myRxCollection.find().remove();\nawait myRxCollection.cleanup(0);\n```\n\n----------------------------------------\n\nTITLE: Implementing GraphQL Resolver for Pull Replication\nDESCRIPTION: This JavaScript code implements the resolver for the 'pullHuman' query, which retrieves documents newer than the given checkpoint, sorts them, and returns a limited batch with an updated checkpoint.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-graphql.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst rootValue = {\n    pullHuman: args => {\n        const minId = args.checkpoint ? args.checkpoint.id : '';\n        const minUpdatedAt = args.checkpoint ? args.checkpoint.updatedAt : 0;\n\n        // sorted by updatedAt first and the id as second\n        const sortedDocuments = documents.sort((a, b) => {\n            if (a.updatedAt > b.updatedAt) return 1;\n            if (a.updatedAt < b.updatedAt) return -1;\n            if (a.updatedAt === b.updatedAt) {\n                if (a.id > b.id) return 1;\n                if (a.id < b.id) return -1;\n            else return 0;\n            }\n        });\n\n        // only return documents newer than the input document\n        const filterForMinUpdatedAtAndId = sortedDocuments.filter(doc => {\n            if (doc.updatedAt < minUpdatedAt) return false;\n            if (doc.updatedAt > minUpdatedAt) return true;\n            if (doc.updatedAt === minUpdatedAt) {\n                // if updatedAt is equal, compare by id\n                if (doc.id > minId) return true;\n                else return false;\n            }\n        });\n\n        // only return some documents in one batch\n        const limitedDocs = filterForMinUpdatedAtAndId.slice(0, args.limit);\n\n        // use the last document for the checkpoint\n        const lastDoc = limitedDocs[limitedDocs.length - 1];\n        const retCheckpoint = {\n            id: lastDoc.id,\n            updatedAt: lastDoc.updatedAt\n        }\n\n        return {\n            documents: limitedDocs,\n            checkpoint: retCheckpoint\n        }\n\n        return limited;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Disabling Premium Console Log for LokiJS RxStorage in JavaScript\nDESCRIPTION: This snippet demonstrates how to disable the non-premium console log when using the LokiJS RxStorage with premium access.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-lokijs.md#2025-04-17_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport { setPremiumFlag } from 'rxdb-premium/plugins/shared';\nsetPremiumFlag();\n```\n\n----------------------------------------\n\nTITLE: Node.js Implementation of Dev Mode\nDESCRIPTION: Conditional implementation of dev-mode plugin in Node.js environment based on NODE_ENV.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/dev-mode.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nasync function createDb() {\n    if (process.env.NODE_ENV !== \"production\") {\n        await import('rxdb/plugins/dev-mode').then(\n            module => addRxPlugin(module.RxDBDevModePlugin)\n        );\n    }\n    const db = createRxDatabase( /* ... */ );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Cache Replacement Policy in RxDB Collection\nDESCRIPTION: Demonstrates how to add a custom cache replacement policy to an RxDB collection during initialization. The policy function controls how and when cached queries are removed from memory.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/query-cache.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst collection = await myDatabase.addCollections({\n    humans: {\n        schema: mySchema,\n        cacheReplacementPolicy: function(){ /* ... */ }\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Creating RxDB Database with LocalStorage\nDESCRIPTION: Demonstrates how to create an RxDB database using LocalStorage storage and define a todo collection schema.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-webrtc.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb/plugins/core';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\nconst db = await createRxDatabase({\n  name: 'myTodoDB',\n  storage: getRxStorageLocalstorage()\n});\n\nawait db.addCollections({\n  todos: {\n    schema: {\n      title: 'todo schema',\n      version: 0,\n      type: 'object',\n      primaryKey: 'id',\n      properties: {\n        id:      { type: 'string', maxLength: 100 },\n        title:   { type: 'string' },\n        done:    { type: 'boolean', default: false },\n        created: { type: 'string', format: 'date-time' }\n      },\n      required: ['id', 'title', 'done']\n    }\n  }\n});\n\n// insert an example document\nawait db.todos.insert({\n  id: 'todo-1',\n  title: 'P2P demo task',\n  done: false,\n  created: new Date().toISOString()\n});\n```\n\n----------------------------------------\n\nTITLE: Dev Mode Plugin Integration\nDESCRIPTION: Shows how to implement the new dev-mode plugin that combines previous error-messages and schema-check functionality.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/9.0.0.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { RxDBDevModePlugin } from 'rxdb/plugins/dev-mode';\naddRxPlugin(RxDBDevModePlugin);\n```\n\n----------------------------------------\n\nTITLE: Creating RxDB Database and Collection\nDESCRIPTION: TypeScript code to initialize RxDB database with a collection and schema definition.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-appwrite.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nconst db = await createRxDatabase({\n    name: 'mydb',\n    storage: getRxStorageLocalstorage()\n});\nconst mySchema = {\n    title: 'my schema',\n    version: 0,\n    primaryKey: 'id',\n    type: 'object',\n    properties: {\n        id: {\n            type: 'string',\n            maxLength: 100\n        },\n        name: {\n            type: 'string'\n        }\n    },\n    required: ['id', 'name']\n};\nawait db.addCollections({\n    humans: {\n        schema: mySchema\n    }\n});\nconst collection = db.humans;\n```\n\n----------------------------------------\n\nTITLE: Configuring Pull Replication for RxDB GraphQL\nDESCRIPTION: This JavaScript code configures the pull replication for RxDB using GraphQL. It sets up the replication state with various options including the pull query builder, batch size, and headers for authentication.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-graphql.md#2025-04-17_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nimport { replicateGraphQL } from 'rxdb/plugins/replication-graphql';\nconst replicationState = replicateGraphQL(\n    {\n        collection: myRxCollection,\n        // urls to the GraphQL endpoints\n        url: {\n            http: 'http://example.com/graphql'\n        },\n        pull: {\n            queryBuilder: pullQueryBuilder, // the queryBuilder from above\n            modifier: doc => doc, // (optional) modifies all pulled documents before they are handled by RxDB\n            dataPath: undefined, // (optional) specifies the object path to access the document(s). Otherwise, the first result of the response data is used.\n            /**\n             * Amount of documents that the remote will send in one request.\n             * If the response contains less than [batchSize] documents,\n             * RxDB will assume there are no more changes on the backend\n             * that are not replicated.\n             * This value is the same as the limit in the pullHuman() schema.\n             * [default=100]\n             */\n            batchSize: 50\n        },\n        // headers which will be used in http requests against the server.\n        headers: {\n            Authorization: 'Bearer abcde...'\n        },\n\n        /**\n         * Options that have been inherited from the RxReplication\n         */\n        deletedField: 'deleted',\n        live: true,\n        retryTime = 1000 * 5,\n        waitForLeadership = true,\n        autoStart = true,\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Initializing RxDB Database with Collection and Real-time Query in TypeScript\nDESCRIPTION: This code demonstrates how to create an RxDB database with localStorage storage, define a tasks collection with schema validation, and set up a reactive query that observes changes to undone tasks in real-time.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/offline-database.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb/plugins/core';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\n\nasync function initDB() {\n  // Create a local offline database\n  const db = await createRxDatabase({\n    name: 'myOfflineDB',\n    storage: getRxStorageLocalstorage()\n  });\n\n  // Add collections\n  await db.addCollections({\n    tasks: {\n      schema: {\n        title: 'tasks schema',\n        version: 0,\n        type: 'object',\n        primaryKey: 'id',\n        properties: {\n          id: { type: 'string' },\n          title: { type: 'string' },\n          done: { type: 'boolean' }\n        }\n      }\n    }\n  });\n\n  // Observe changes in real time\n  db.tasks\n    .find({ selector: { done: false } })\n    .$ // returns an observable that emits whenever the result set changes\n    .subscribe(undoneTasks => {\n      console.log('Currently undone tasks:', undoneTasks);\n    });\n\n  return db;\n}\n```\n\n----------------------------------------\n\nTITLE: Creating RxDB Database with Dexie Storage in TypeScript\nDESCRIPTION: This code demonstrates how to create an RxDB database using Dexie.js as the storage engine.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-dexie.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst db = await createRxDatabase({\n    name: 'exampledb',\n    storage: getRxStorageDexie()\n});\n```\n\n----------------------------------------\n\nTITLE: Creating Items Collection Schema for Document Storage\nDESCRIPTION: Defines a schema for the 'items' collection that will store documents with text content. The schema includes an ID field and a text field that will later be processed for embeddings.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/javascript-vector-database.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nawait db.addCollections({\n  items: {\n    schema: {\n        version: 0,\n        primaryKey: 'id',\n        type: 'object',\n        properties: {\n            id: {\n                type: 'string',\n                maxLength: 20\n            },\n            text: {\n                type: 'string'\n            }\n        },\n        required: ['id', 'text']\n    }\n  }\n});\nconst itemsCollection = db.items;\n```\n\n----------------------------------------\n\nTITLE: Adding the RxDB Leader Election Plugin\nDESCRIPTION: Shows how to import and add the leader-election plugin to an RxDB instance. This is the first step to enable leader election functionality in an application.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/leader-election.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { addRxPlugin } from 'rxdb';\nimport { RxDBLeaderElectionPlugin } from 'rxdb/plugins/leader-election';\naddRxPlugin(RxDBLeaderElectionPlugin);\n```\n\n----------------------------------------\n\nTITLE: Setting Up P2P Replication Over WebRTC with RxDB\nDESCRIPTION: This code snippet shows how to implement peer-to-peer replication using WebRTC in RxDB. It sets up a WebRTC pool for direct data sharing between devices without a centralized server.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/firebase-realtime-database-alternative.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n  replicateWebRTC,\n  getConnectionHandlerSimplePeer\n} from 'rxdb/plugins/replication-webrtc';\n\nconst webrtcPool = await replicateWebRTC({\n  collection: db.tasks,\n  topic: 'p2p-topic-123',\n  connectionHandlerCreator: getConnectionHandlerSimplePeer({\n    signalingServerUrl: 'wss://signaling.rxdb.info/',\n    wrtc: require('node-datachannel/polyfill'),\n    webSocketConstructor: require('ws').WebSocket\n  })\n});\n\nwebrtcPool.error$.subscribe((error) => {\n  console.error('P2P error:', error);\n});\n```\n\n----------------------------------------\n\nTITLE: Inserting RxDB Document\nDESCRIPTION: Insert a new document into the todos collection with required fields\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/quickstart.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nconst myDocument = await myDatabase.todos.insert({\n    id: 'todo1',\n    name: 'Learn RxDB',\n    done: false,\n    timestamp: new Date().toISOString()\n});\n```\n\n----------------------------------------\n\nTITLE: RxDB OPFS Worker Storage Configuration\nDESCRIPTION: Shows how to configure RxDB to use OPFS storage within a WebWorker using the premium storage plugin.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-opfs.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    createRxDatabase\n} from 'rxdb';\nimport { getRxStorageWorker } from 'rxdb-premium/plugins/storage-worker';\n\nconst database = await createRxDatabase({\n    name: 'mydatabase',\n    storage: getRxStorageWorker(\n        {\n            /**\n             * This file must be statically served from a webserver.\n             * You might want to first copy it somewhere outside of\n             * your node_modules folder.\n             */\n            workerInput: 'node_modules/rxdb-premium/dist/workers/opfs.worker.js'\n        }\n    )\n});\n```\n\n----------------------------------------\n\nTITLE: Managing Document Attachments in RxDB\nDESCRIPTION: Example of using attachments to store complex document data separately for improved query performance.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/nosql-performance-tips.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nconst myDocument = await myCollection.insert({/* ... */});\nconst attachment = await myDocument.putAttachment(\n    {\n        id: 'otherStuff.json',\n        data: createBlob(JSON.stringify({/* ... */}), 'application/json'),\n        type: 'application/json'\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Implementing Push Handler on Client\nDESCRIPTION: Adds the push handler to the replication settings on the client side, sending change rows to the server and handling conflicts.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-http.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nconst replicationState = await replicateRxCollection({\n    /* ... */\n    push: {\n        async handler(changeRows){\n            const rawResponse = await fetch('https://localhost/push', {\n                method: 'POST',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(changeRows)\n            });\n            const conflictsArray = await rawResponse.json();\n            return conflictsArray;\n        }\n    }\n    /* ... */\n});\n```\n\n----------------------------------------\n\nTITLE: Querying IndexedDB Using Index Range in TypeScript\nDESCRIPTION: This code snippet shows how to perform a range query on an IndexedDB store using an index. It retrieves all products with a price between 10 and 50, demonstrating IndexedDB's indexing capabilities for efficient querying.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/localstorage-indexeddb-cookies-opfs-sqlite-wasm.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n// find all products with a price between 10 and 50\nconst keyRange = IDBKeyRange.bound(10, 50);\nconst transaction = db.transaction('products', 'readonly');\nconst objectStore = transaction.objectStore('products');\nconst index = objectStore.index('priceIndex');\nconst request = index.getAll(keyRange);\nconst result = await new Promise((res, rej) => {\n  request.onsuccess = (event) => res(event.target.result);\n  request.onerror = (event) => rej(event);\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Replication with Memory Synced Storage\nDESCRIPTION: Shows how to handle replication with memory synced storage by creating separate database instances for replication and memory operations.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-memory-synced.md#2025-04-17_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst parentStorage = getRxStorageIndexedDB();\n\nconst memorySyncedStorage = getMemorySyncedRxStorage({\n    storage: parentStorage,\n    keepIndexesOnParent: true\n});\n\nconst databaseName = 'mydata';\n\n/**\n * Create a parent database with the same name+collections\n * and use it for replication and migration.\n * The parent database must be created BEFORE the memory-synced database\n * to ensure migration has already been run.\n */\nconst parentDatabase = await createRxDatabase({\n    name: databaseName,\n    storage: parentStorage\n});\nawait parentDatabase.addCollections(/* ... */);\n\nreplicateRxCollection({\n    collection: parentDatabase.myCollection,\n    /* ... */\n});\n\n\n/**\n * Create an equal memory-synced database with the same name+collections\n * and use it for writes and queries.\n */\nconst memoryDatabase = await createRxDatabase({\n    name: databaseName,\n    storage: memorySyncedStorage\n});\nawait memoryDatabase.addCollections(/* ... */);\n```\n\n----------------------------------------\n\nTITLE: Configuring Main Process with SharedWorker Storage\nDESCRIPTION: Implementation code for the main process to create an RxDatabase using SharedWorker storage with configuration options.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-shared-worker.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    createRxDatabase\n} from 'rxdb';\nimport { getRxStorageSharedWorker } from 'rxdb-premium/plugins/storage-worker';\nimport { getRxStorageIndexedDB } from 'rxdb/plugins/storage-indexeddb';\n\n\nconst database = await createRxDatabase({\n    name: 'mydatabase',\n    storage: getRxStorageSharedWorker(\n        {\n            /**\n             * Contains any value that can be used as parameter\n             * to the SharedWorker constructor of thread.js\n             * Most likely you want to put the path to the shared-worker.js file in here.\n             * \n             * @link https://developer.mozilla.org/en-US/docs/Web/API/SharedWorker?retiredLocale=de\n             */\n            workerInput: 'path/to/shared-worker.js',\n            /**\n             * (Optional) options\n             * for the worker.\n             */\n            workerOptions: {\n                type: 'module',\n                credentials: 'omit'\n            }\n        }\n    )\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Message Handling in Remote RxStorage with TypeScript\nDESCRIPTION: This snippet illustrates how to implement custom message handling between the client and server in Remote RxStorage. It shows the server-side setup for handling custom requests and the client-side method for sending custom requests.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-remote.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst serverBasedOnDatabase = await startRxStorageRemoteWebsocketServer({\n    port: 8080,\n    database: myRxDatabase,\n    async customRequestHandler(msg){\n        // here you can return any JSON object as an 'answer'\n        return {\n            foo: 'bar'\n        };\n    } \n});\n```\n\nLANGUAGE: typescript\nCODE:\n```\nconst storage = getRxStorageRemoteWebsocket({\n    url: 'ws://example.com:8080'\n});\nconst answer = await storage.customRequest({ bar: 'foo' });\nconsole.dir(answer); // > { foo: 'bar' }\n```\n\n----------------------------------------\n\nTITLE: Removing an Attachment\nDESCRIPTION: Shows how to remove an attachment from an RxDocument using the remove method on the RxAttachment object.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-attachment.md#2025-04-17_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nconst attachment = myDocument.getAttachment('cat.jpg');\nawait attachment.remove();\n```\n\n----------------------------------------\n\nTITLE: Implementing Safe App Sync Status Check\nDESCRIPTION: Demonstrates a safe implementation for checking sync status using local documents instead of blocking on awaitInitialReplication()\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication.md#2025-04-17_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\n// update last-in-sync-flag each time replication is in sync\nawait myCollection.insertLocal('last-in-sync', { time: 0 }).catch(); // ensure flag exists\nmyReplicationState.active$.pipe(\n    mergeMap(async() => {\n        await myReplicationState.awaitInSync();\n        await myCollection.upsertLocal('last-in-sync', { time: Date.now() })\n    })\n);\n\n// observe the flag and toggle loading spinner\nawait showLoadingSpinner();\nconst oneDay = 1000 * 60 * 60 * 24;\nawait firstValueFrom(\n    myCollection.getLocal$('last-in-sync').pipe(\n        filter(d => d.get('time') > (Date.now() - oneDay))\n    )\n);\nawait hideLoadingSpinner();\n```\n\n----------------------------------------\n\nTITLE: Implementing validate-is-my-json-valid Schema Validation in RxDB\nDESCRIPTION: This snippet demonstrates how to use the validate-is-my-json-valid plugin for schema validation in RxDB. Note that this validation is currently not supported due to an unresolved bug.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/schema-validation.md#2025-04-17_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport { wrappedValidateIsMyJsonValidStorage } from 'rxdb/plugins/validate-is-my-json-valid';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\n\n// wrap the validation around the main RxStorage\nconst storage = wrappedValidateIsMyJsonValidStorage({\n    storage: getRxStorageLocalstorage()\n});\n\nconst db = await createRxDatabase({\n    name: randomCouchString(10),\n    storage\n});\n```\n\n----------------------------------------\n\nTITLE: Inserting a Document into RxDB Collection in Capacitor\nDESCRIPTION: Demonstrates how to insert a document into an RxDB collection in a Capacitor application using the insert method with a simple document object.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/capacitor-database.md#2025-04-17_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nawait collections.humans.insert({id: 'foo', name: 'bar'});\n```\n\n----------------------------------------\n\nTITLE: Fulltext Search Indexing with RxPipeline in TypeScript\nDESCRIPTION: Demonstrates using RxPipeline to index text data for efficient fulltext search by splitting email text into words and storing them in a separate collection.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-pipeline.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst pipeline = await emailCollection.addPipeline({\n    identifier: 'email-fulltext-search',\n    destination: mailByWordCollection,\n    handler: async (docs) => {\n        for (const doc of docs) {\n            // remove previous mapping\n            await mailByWordCollection.find({emailId: doc.primary}).remove();\n            // add new mapping\n            if(!doc.deleted) {\n                const words = doc.text.split(' ');\n                await mailByWordCollection.bulkInsert(\n                    words.map(word => ({\n                        emailId: doc.primary,\n                        word: word\n                    }))\n                );\n            }\n        }\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Initializing RxDB with Storage Interface\nDESCRIPTION: Example showing how to create an RxDB database using the new storage interface system with PouchDB memory adapter.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/10.0.0.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    addPouchPlugin,\n    getRxStoragePouch\n} from 'rxdb/plugins/pouchdb';\n\n// IMPORTANT: Do not use addRxPlugin to add pouchdb adapter, instead use addPouchPlugin\naddPouchPlugin(require('pouchdb-adapter-memory'));\n\nimport {\n    addRxPlugin,\n    createRxDatabase,\n    randomCouchString,\n} from 'rxdb/plugins/core';\n\n// create the database with the storage creator.\nconst db = await createRxDatabase({\n    name: 'mydatabase',\n    storage: getRxStoragePouch('memory'),\n});\n```\n\n----------------------------------------\n\nTITLE: Setting up RxDB with Memdown Adapter in JavaScript\nDESCRIPTION: This code shows how to use the memdown adapter with RxDB. It requires installing memdown and pouchdb-adapter-leveldb, and is compatible with adapters implementing abstract-leveldown.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/adapters.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n// npm install memdown --save\n// npm install pouchdb-adapter-leveldb --save\naddPouchPlugin(require('pouchdb-adapter-leveldb')); // leveldown adapters need the leveldb plugin to work\n\nconst memdown = require('memdown');\n\nconst database = await createRxDatabase({\n    name: 'mydatabase',\n    storage: getRxStoragePouch(memdown) // the full leveldown-module\n});\n```\n\n----------------------------------------\n\nTITLE: LokiJS Storage Performance Metrics\nDESCRIPTION: Performance comparison of LokiJS storage implementation with different async handling approaches (native async/await vs transpiled)\nSOURCE: https://github.com/pubkey/rxdb/blob/master/orga/performance-trackings.md#2025-04-17_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"storage\": \"lokijs\",\n  \"spawnDatabases\": {\n    \"amount\": 1000,\n    \"collections\": 5,\n    \"total\": 6119.575432,\n    \"perInstance\": 6.1195754319999995\n  },\n  \"insertDocuments\": {\n    \"blocks\": 2000,\n    \"blockSize\": 5,\n    \"total\": 5759.660255,\n    \"perBlock\": 2.8798301275\n  },\n  \"findDocuments\": {\n    \"amount\": 10000,\n    \"total\": 489.215873,\n    \"perDocument\": 0.0489215873\n  },\n  \"migrateDocuments\": {\n    \"amount\": 1000,\n    \"total\": 3275.723683\n  },\n  \"writeWhileSubscribe\": {\n    \"amount\": 1000,\n    \"total\": 2716.470968\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Replacing Date.getTime() with Date.now() for Performance Improvement\nDESCRIPTION: This snippet demonstrates the replacement of 'new Date().getTime()' with 'Date.now()' for improved performance. Date.now() is reported to be 2x faster.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/15.0.0.md#2025-04-17_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\nREPLACE `new Date().getTime()` with `Date.now()` which is [2x faster](https://stackoverflow.com/questions/12517359/performance-date-now-vs-date-gettime).\n```\n\n----------------------------------------\n\nTITLE: Observing a Query on RxDB Collection in Capacitor\nDESCRIPTION: Demonstrates how to observe changes to a query result in an RxDB collection using RxJS observables. This enables reactive updates in the UI when data changes.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/capacitor-database.md#2025-04-17_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nawait collections.humans.find({\n    selector: {\n        name: 'bar'\n    }\n}).$.subscribe(result => {/* ... */});\n```\n\n----------------------------------------\n\nTITLE: Transforming null to undefined in Optional Fields for RxDB GraphQL Replication\nDESCRIPTION: Demonstrates how to modify pulled data to convert null values to undefined for optional fields, ensuring compatibility with RxDB's requirements.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-graphql.md#2025-04-17_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nconst replicationState: RxGraphQLReplicationState<RxDocType> = replicateGraphQL(\n    {\n        collection: myRxCollection,\n        url: {/* ... */},\n        headers: {/* ... */},\n        push: {/* ... */},\n        pull: {\n            queryBuilder: pullQueryBuilder,\n            modifier: (doc => {\n                // We have to remove optional non-existent field values\n                // they are set as null by GraphQL but should be undefined\n                Object.entries(doc).forEach(([k, v]) => {\n                    if (v === null) {\n                        delete doc[k];\n                    }\n                });\n                return doc;\n            })\n        },\n        /* ... */\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Initializing RxDB Database with LocalStorage\nDESCRIPTION: Setup code for creating an RxDB database instance using localStorage as the storage engine, including schema definition for a notes collection\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/ionic-storage.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb/plugins/core';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\n\nasync function initDB() {\n  const db = await createRxDatabase({\n    name: 'myionicdb',\n    storage: getRxStorageLocalstorage(),\n    multiInstance: false // or true if you plan multi-tab usage\n    // Note: If you need encryption, set `password` here\n  });\n\n  await db.addCollections({\n    notes: {\n      schema: {\n        title: 'notes schema',\n        version: 0,\n        type: 'object',\n        primaryKey: 'id',\n        properties: {\n          id: { type: 'string' },\n          content: { type: 'string' },\n          timestamp: { type: 'number' }\n        },\n        required: ['id']\n      }\n    }\n  });\n\n  return db;\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Vue Shallow Refs Reactivity in RxDB\nDESCRIPTION: This snippet demonstrates how to use Vue shallow refs for custom reactivity in RxDB. It utilizes the VueRxReactivityFactory from the rxdb-premium plugin.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/reactivity.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n// npm install vue --save\nimport { VueRxReactivityFactory } from 'rxdb-premium/plugins/reactivity-vue';\nimport { createRxDatabase } from 'rxdb/plugins/core';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\nconst database = await createRxDatabase({\n    name: 'mydb',\n    storage: getRxStorageLocalstorage(),\n    reactivity: VueRxReactivityFactory\n});\n```\n\n----------------------------------------\n\nTITLE: Vector Database Schema Definition with Index Fields\nDESCRIPTION: Defines an RxDB schema for storing vector embeddings with multiple index fields using the Distance to Samples method. Includes configuration for both embedding storage and index field requirements.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/javascript-vector-database.md#2025-04-17_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nconst indexSchema = {\n    type: 'string',\n    maxLength: 10\n};\nconst schema = {\n    \"version\": 0,\n    \"primaryKey\": \"id\",\n    \"type\": \"object\",\n    \"properties\": {\n        \"id\": {\n            \"type\": \"string\",\n            \"maxLength\": 100\n        },\n        \"embedding\": {\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"number\"\n            }\n        },\n        // index fields\n        \"idx0\": indexSchema,\n        \"idx1\": indexSchema,\n        \"idx2\": indexSchema,\n        \"idx3\": indexSchema,\n        \"idx4\": indexSchema\n    },\n    \"required\": [\n        \"id\",\n        \"embedding\",\n        \"idx0\",\n        \"idx1\",\n        \"idx2\",\n        \"idx3\",\n        \"idx4\"\n    ],\n    \"indexes\": [\n        \"idx0\",\n        \"idx1\",\n        \"idx2\",\n        \"idx3\",\n        \"idx4\"\n    ]\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Appwrite Replication\nDESCRIPTION: TypeScript code to set up replication between RxDB and Appwrite with configuration options.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-appwrite.md#2025-04-17_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nconst replicationState = replicateAppwrite({\n    replicationIdentifier: 'my-appwrite-replication',\n    client,\n    databaseId: 'YOUR_APPWRITE_DATABASE_ID',\n    collectionId: 'YOUR_APPWRITE_COLLECTION_ID',\n    deletedField: 'deleted', // Field that represents deletion in Appwrite\n    collection,\n    pull: {\n        batchSize: 10,\n    },\n    push: {\n        batchSize: 10\n    },\n    /*\n     * ...\n     * You can set all other options for RxDB replication states\n     * like 'live' or 'retryTime'\n     * ...\n     */\n});\n```\n\n----------------------------------------\n\nTITLE: Inserting Document into RxDB Collection in TypeScript\nDESCRIPTION: Code snippet demonstrating how to insert a document into the 'tasks' collection.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-localstorage.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nawait db.tasks.insert({ id: 'task-01', title: 'Get started with RxDB' });\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Email Format for Z-Schema Validation in RxDB\nDESCRIPTION: This snippet demonstrates how to add a custom email format for the Z-Schema validator in RxDB. The custom format ensures that email fields contain the @ symbol.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/schema-validation.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { ZSchemaClass } from 'rxdb/plugins/validate-z-schema';\nZSchemaClass.registerFormat('email', function (v: string) {\n    return v.includes('@'); // ensure email fields contain the @ symbol\n});\n```\n\n----------------------------------------\n\nTITLE: Enabling RxDB Dev Mode\nDESCRIPTION: Add the development mode plugin for enhanced debugging and validation during development\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/quickstart.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\naddRxPlugin(RxDBDevModePlugin);\n```\n\n----------------------------------------\n\nTITLE: Running Multiple CRDT Operations in TypeScript\nDESCRIPTION: This code shows how to run multiple CRDT operations in a single atomic document write using the updateCRDT() method with an array of operations.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/crdt.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nawait myDocument.updateCRDT([\n    {\n        selector: { /** ... **/ },\n        ifMatch: { /** ... **/ }\n    },\n    {\n        selector: { /** ... **/ },\n        ifMatch: { /** ... **/ }\n    },\n    {\n        selector: { /** ... **/ },\n        ifMatch: { /** ... **/ }\n    },\n    {\n        selector: { /** ... **/ },\n        ifMatch: { /** ... **/ }\n    }\n]);\n```\n\n----------------------------------------\n\nTITLE: Initializing RxDB Server Replication in TypeScript\nDESCRIPTION: This snippet demonstrates how to import and use the replicateServer function from the rxdb-server package to set up server replication for an RxDB collection.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-server.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { replicateServer } from 'rxdb-server/plugins/replication-server';\n\nconst replicationState = await replicateServer({\n    collection: usersCollection,\n    replicationIdentifier: 'my-server-replication',\n    url: 'http://localhost:80/users/0', // endpoint url with the servers collection schema version at the end\n    headers: {\n        Authorization: 'Bearer S0VLU0UhI...'\n    },\n    push: {},\n    pull: {},\n    live: true\n});\n```\n\n----------------------------------------\n\nTITLE: Using RxCollection.awaitPersistence() for In-Memory Collections in JavaScript\nDESCRIPTION: Added awaitPersistence() method to RxCollection for ensuring data persistence in in-memory collections.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/CHANGELOG.md#2025-04-17_snippet_9\n\nLANGUAGE: JavaScript\nCODE:\n```\nRxCollection.awaitPersistence()\n```\n\n----------------------------------------\n\nTITLE: Importing RxDB Types in TypeScript\nDESCRIPTION: Import necessary types from RxDB core plugin to set up TypeScript integration.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/tutorials/typescript.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    createRxDatabase,\n    RxDatabase,\n    RxCollection,\n    RxJsonSchema,\n    RxDocument,\n} from 'rxdb/plugins/core';\n```\n\n----------------------------------------\n\nTITLE: Implementing preSave hooks in RxDB\nDESCRIPTION: Examples of adding preSave hooks to an RxDB collection. Shows series, parallel, async implementation, and how to stop a save operation by throwing an error.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/middleware.md#2025-04-17_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n// series\nmyCollection.preSave(function(plainData, rxDocument){\n    // modify anyField before saving\n    plainData.anyField = 'anyValue';\n}, false);\n\n// parallel\nmyCollection.preSave(function(plainData, rxDocument){\n\n}, true);\n\n// async\nmyCollection.preSave(function(plainData, rxDocument){\n  return new Promise(res => setTimeout(res, 100));\n}, false);\n\n// stop the save-operation\nmyCollection.preSave(function(plainData, rxDocument){\n  throw new Error('stop');\n}, false);\n```\n\n----------------------------------------\n\nTITLE: Removing Documents with RxQuery in JavaScript\nDESCRIPTION: Shows how to use the remove() method to delete all documents that match a query, returning the deleted documents.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-query.md#2025-04-17_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\n// All documents where the age is less than 18\nconst query = myCollection.find({\n  selector: {\n    age: {\n      $lt: 18\n    }\n  }\n});\n// Remove the documents from the collection\nconst removedDocs = await query.remove();\n```\n\n----------------------------------------\n\nTITLE: Matching Document Data with RxQuery in JavaScript\nDESCRIPTION: Demonstrates how to use the doesDocumentDataMatch() method to check if a given document data matches the query criteria.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-query.md#2025-04-17_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nconst documentData = {\n  id: 'foobar',\n  age: 19\n};\n\nmyCollection.find({\n  selector: {\n    age: {\n      $gt: 18\n    }\n  }\n}).doesDocumentDataMatch(documentData); // > true\n\nmyCollection.find({\n  selector: {\n    age: {\n      $gt: 20\n    }\n  }\n}).doesDocumentDataMatch(documentData); // > false\n```\n\n----------------------------------------\n\nTITLE: Configuring Write Persistence for Memory Mapped Storage\nDESCRIPTION: Demonstrates how to enable guaranteed write persistence by setting awaitWritePersistence flag, ensuring operations are completed on both memory and persistent storage before returning.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-memory-mapped.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst storage = getMemoryMappedRxStorage({\n    awaitWritePersistence: true,\n    storage: getRxStorageIndexedDB()\n});\n```\n\n----------------------------------------\n\nTITLE: Defining Schema with One-to-Many Reference in RxDB\nDESCRIPTION: This snippet shows how to define a schema with a one-to-many reference using a string array. It demonstrates the use of 'ref' for an array of references.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/population.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport const schemaWithOneToManyReference = {\n  version: 0,\n  primaryKey: 'name',\n  type: 'object',\n  properties: {\n    name: {\n      type: 'string'\n    },\n    friends: {\n      type: 'array',\n      ref: 'human',\n      items: {\n        type: 'string'\n      }\n    }\n  }\n};\n```\n\n----------------------------------------\n\nTITLE: Retrieving Local Documents in RxDB\nDESCRIPTION: This snippet shows how to retrieve local documents using the getLocal() method, which returns a Promise resolving to the document or null if not found.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-local-document.md#2025-04-17_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nconst localDoc = await myCollection.getLocal('foobar');\n```\n\n----------------------------------------\n\nTITLE: Configuring Filtered Replication with Firestore and RxDB in TypeScript\nDESCRIPTION: This code snippet shows how to set up filtered replication between RxDB and Firestore. It demonstrates applying filters to both pull and push operations, allowing for selective synchronization of data.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-firestore.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst replicationState = replicateFirestore(\n    {\n        collection: myRxCollection,\n        firestore: {\n            projectId,\n            database: firestoreDatabase,\n            collection: firestoreCollection\n        },\n        pull: {\n            filter: [\n                where('ownerId', '==', userId)\n            ]\n        },\n        push: {\n            filter: (item) => item.syncEnabled === true\n        }\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Observing Collection Changes in JavaScript\nDESCRIPTION: Added insert$, update$, and remove$ observables to RxCollection for monitoring collection changes.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/CHANGELOG.md#2025-04-17_snippet_10\n\nLANGUAGE: JavaScript\nCODE:\n```\nRxCollection.insert$\nRxCollection.update$\nRxCollection.remove$\n```\n\n----------------------------------------\n\nTITLE: Executing SQLite Queries in React Native\nDESCRIPTION: Example of executing a SELECT query using SQLite database connection\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/react-native-database.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nlet { rows } = db.execute('SELECT somevalue FROM sometable');\n```\n\n----------------------------------------\n\nTITLE: Using Dynamic Worker Creation in Angular (TypeScript)\nDESCRIPTION: Shows how to create and use a custom worker in an Angular environment, where the worker is dynamically built by the bundler.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-worker.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nconst storage = getRxStorageWorker({\n    workerInput: () => new Worker(new URL('./my-custom.worker', import.meta.url)),\n});\n```\n\n----------------------------------------\n\nTITLE: Removing a Todo from RxDB\nDESCRIPTION: Shows how to remove a todo item from the local RxDB database.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/local-first-future.md#2025-04-17_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nawait firstTodo.remove();\n```\n\n----------------------------------------\n\nTITLE: Toggle Replication on Document Visibility\nDESCRIPTION: Configuration for enabling replication to toggle based on document visibility state in the browser\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication.md#2025-04-17_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nconst replicationState = replicateRxCollection({\n    toggleOnDocumentVisible: true,\n    /* ... */\n});\n```\n\n----------------------------------------\n\nTITLE: Setting up Express Server with MongoDB\nDESCRIPTION: Initializes a Node.js Express server with a MongoDB connection to handle HTTP requests from the client.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-http.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { MongoClient } from 'mongodb';\nimport express from 'express';\nconst mongoClient = new MongoClient('mongodb://localhost:27017/');\nconst mongoConnection = await mongoClient.connect();\nconst mongoDatabase = mongoConnection.db('myDatabase');\nconst mongoCollection = await mongoDatabase.collection('myDocs');\n\nconst app = express();\napp.use(express.json());\n\n/* ... add routes from below */\n\napp.listen(80, () => {\n  console.log(`Example app listening on port 80`)\n});\n```\n\n----------------------------------------\n\nTITLE: Adding Collection to RxDB Database in TypeScript\nDESCRIPTION: Example of adding a 'tasks' collection to the RxDB database with a defined schema.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-localstorage.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nawait db.addCollections({\n  tasks: {\n    schema: {\n      title: 'tasks schema',\n      version: 0,\n      primaryKey: 'id',\n      type: 'object',\n      properties: {\n        id: { type: 'string' },\n        title: { type: 'string' },\n        done: { type: 'boolean' }\n      },\n      required: ['id', 'title', 'done']\n    }\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: RxDB OPFS Main Thread Configuration\nDESCRIPTION: Demonstrates how to use OPFS storage directly in the main thread without a worker, though with reduced performance in Safari.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-opfs.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb';\nimport { getRxStorageOPFSMainThread } from 'rxdb-premium/plugins/storage-worker';\n\nconst database = await createRxDatabase({\n    name: 'mydatabase',\n    storage: getRxStorageOPFSMainThread()\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring RxDB with IndexedDB Adapter for Browser Environments\nDESCRIPTION: This snippet illustrates how to set up RxDB with the IndexedDB adapter for browser environments. It's recommended as the default choice for browser-based storage.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/adapters.md#2025-04-17_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n// npm install pouchdb-adapter-idb --save\naddPouchPlugin(require('pouchdb-adapter-idb'));\n\nconst database = await createRxDatabase({\n    name: 'mydatabase',\n    storage: getRxStoragePouch('idb')\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Response Modifier for RxDB GraphQL Push Replication\nDESCRIPTION: Demonstrates how to use the push.responseModifier to handle complex server responses in push mutations, extracting relevant conflict information.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-graphql.md#2025-04-17_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nimport {} from \"rxdb\";\nconst replicationState: RxGraphQLReplicationState<RxDocType> = replicateGraphQL(\n    {\n        collection: myRxCollection,\n        url: {/* ... */},\n        headers: {/* ... */},\n        push: {\n            responseModifier: async function (plainResponse) {\n                /**\n                 * In this example we aggregate the conflicting documents from a response object\n                 */\n                return plainResponse.conflicts;\n            },\n        },\n        pull: {/* ... */},\n        /* ... */\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Setting Specific Index in TypeScript Query\nDESCRIPTION: Demonstrates how to enforce using a specific index when querying documents, allowing manual optimization when the query planner might not choose the optimal index\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/12.0.0.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst queryResults = await myCollection\n    .find({\n      selector: {\n        age: {\n          $gt: 18\n        },\n        gender: {\n          $eq: 'm'\n        }\n      },\n      /**\n       * Because the developer knows that 50% of the documents are 'male',\n       * but only 20% are below age 18,\n       * it makes sense to enforce using the ['gender', 'age'] index to improve performance.\n       * This could not be known by the query planner which might have chosen ['age', 'gender'] instead.\n       */\n      index: ['gender', 'age']\n    }).exec();\n```\n\n----------------------------------------\n\nTITLE: Defining Indexes in RxDB Schema\nDESCRIPTION: This example demonstrates how to define various types of indexes in an RxDB schema, including simple and compound indexes. It also shows the required field attributes for indexable fields.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-schema.md#2025-04-17_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nconst schemaWithIndexes = {\n  version: 0,\n  title: 'human schema with indexes',\n  keyCompression: true,\n  primaryKey: 'id',\n  type: 'object',\n  properties: {\n      id: {\n          type: 'string',\n          maxLength: 100 // <- the primary key must have set maxLength\n      },\n      firstName: {\n          type: 'string',\n          maxLength: 100 // <- string-fields that are used as an index, must have set maxLength.\n      },\n      lastName: {\n          type: 'string'\n      },\n      active: {\n          type: 'boolean'\n      },\n      familyName: {\n          type: 'string'\n      },\n      balance: {\n          type: 'number',\n\n          // number fields that are used in an index, must have set minimum, maximum and multipleOf\n          minimum: 0,\n          maximum: 100000,\n          multipleOf: 0.01\n      },\n      creditCards: {\n          type: 'array',\n          items: {\n              type: 'object',\n              properties: {\n                    cvc: {\n                        type: 'number'\n                    }\n              }\n          } \n      }\n  },\n  required: [\n      'id',\n      'active' // <- boolean fields that are used in an index, must be required. \n  ],\n  indexes: [\n    'firstName', // <- this will create a simple index for the `firstName` field\n    ['active', 'firstName'], // <- this will create a compound-index for these two fields\n    'active'\n  ]\n};\n```\n\n----------------------------------------\n\nTITLE: Creating Collections with _id as Primary Field in JavaScript\nDESCRIPTION: Allow using '_id' as the primary field when creating RxDB collections, providing more flexibility in schema design.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/CHANGELOG.md#2025-04-17_snippet_7\n\nLANGUAGE: JavaScript\nCODE:\n```\n// Example of using _id as primary field\n// (Actual code not provided in changelog)\n```\n\n----------------------------------------\n\nTITLE: Using AsyncStorage-Down Adapter with RxDB in React Native\nDESCRIPTION: This code demonstrates how to use the AsyncStorage-Down adapter, a LevelDown adapter that stores data on AsyncStorage in React Native.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/adapters.md#2025-04-17_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\n// npm install pouchdb-adapter-asyncstorage-down --save\naddPouchPlugin(require('pouchdb-adapter-leveldb')); // leveldown adapters need the leveldb plugin to work\n\nconst asyncstorageDown = require('asyncstorage-down');\n\nconst database = await createRxDatabase({\n    name: 'mydatabase',\n    storage: getRxStoragePouch(asyncstorageDown) // the full leveldown-module\n});\n```\n\n----------------------------------------\n\nTITLE: Renaming destroy() to close() in RxDB\nDESCRIPTION: Example of renamed functions and attributes in RxDB 16.0.0 to improve clarity. The .destroy() method and related functions have been renamed to .close() to better reflect their functionality.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/16.0.0.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n\".destroy()\" to \".close()\"\n\".onDestroy()\" to \".onClose()\"\n\"postDestroyRxCollection\" to \"postCloseRxCollection\"\n\"preDestroyRxDatabase\" to \"preCloseRxDatabase\"\n```\n\n----------------------------------------\n\nTITLE: Adding Attachment to RxDocument\nDESCRIPTION: Shows how to add an attachment to an RxDocument using the putAttachment method. This example creates a text file attachment.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-attachment.md#2025-04-17_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createBlob } from 'rxdb';\n\nconst attachment = await myDocument.putAttachment(\n    {\n        id: 'cat.txt',     // (string) name of the attachment\n        data: createBlob('meowmeow', 'text/plain'),   // (string|Blob) data of the attachment\n        type: 'text/plain'    // (string) type of the attachment-data like 'image/jpeg'\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Initializing CMake Project for Flutter Application\nDESCRIPTION: Sets up the CMake project with minimum version requirement, project name, and language. It also defines the binary name and application ID for the Flutter app.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/flutter/linux/CMakeLists.txt#2025-04-17_snippet_0\n\nLANGUAGE: CMake\nCODE:\n```\ncmake_minimum_required(VERSION 3.10)\nproject(runner LANGUAGES CXX)\n\nset(BINARY_NAME \"my_app\")\nset(APPLICATION_ID \"com.example.my_app\")\n```\n\n----------------------------------------\n\nTITLE: Using SQLite RxStorage with sqlite3 npm package\nDESCRIPTION: This example demonstrates how to use SQLite RxStorage with the sqlite3 npm package in Node.js environments.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-sqlite.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    createRxDatabase\n} from 'rxdb';\nimport {\n    getRxStorageSQLite,\n    getSQLiteBasicsNode\n} from 'rxdb-premium/plugins/storage-sqlite';\nimport sqlite3 from 'sqlite3';\n\nconst myRxDatabase = await createRxDatabase({\n    name: 'exampledb',\n    storage: getRxStorageSQLite({\n        sqliteBasics: getSQLiteBasicsNode(sqlite3)\n    })\n});\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Conflict Handler to RxDB Collection in JavaScript\nDESCRIPTION: This snippet demonstrates how to add a custom conflict handler when creating a new collection in RxDB. The conflict handler is specified as a property of the collection configuration object.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/transactions-conflicts-revisions.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst myCollections = await myDatabase.addCollections({\n  // key = collectionName\n  humans: {\n    schema: mySchema,\n    conflictHandler: myCustomConflictHandler\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Setting up IPC Handler for SQLite Queries in Electron Main Process\nDESCRIPTION: This code sets up an IPC handler in the main process to execute SQLite queries received from the renderer process and return the results.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/electron-database.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nipcMain.handle('db-query', async (event, sqlQuery) => {\n  return new Promise(res => {\n      db.all(sqlQuery, (err, rows) => {\n        res(rows);\n      });\n  });\n});\n```\n\n----------------------------------------\n\nTITLE: Optimizing Index Field Order in RxDB\nDESCRIPTION: Demonstrates how to optimize index field ordering based on data distribution patterns for better query performance.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/nosql-performance-tips.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst query = myCollection\n    .findOne({\n      selector: {\n        age: {\n          $gt: 18\n        },\n        gender: {\n          $eq: 'm'\n        }\n      },\n      /**\n       * Because the developer knows that 50% of the documents are 'male',\n       * but only 20% are below age 18,\n       * it makes sense to enforce using the ['gender', 'age'] index to improve performance.\n       * This could not be known by the query planer which might have chosen ['age', 'gender'] instead.\n       */\n      index: ['gender', 'age']\n    });\n```\n\n----------------------------------------\n\nTITLE: Querying Related Data in NoSQL using TypeScript\nDESCRIPTION: This TypeScript code snippet shows how to perform a similar query to the SQL example in a NoSQL database. It first finds the Tokyo city document, then queries for customers with matching city_id.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/why-nosql.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst cityDocument = await db.cities.findOne().where('name').equals('Tokyo').exec();\nconst customerDocuments = await db.customers.find().where('city_id').equals(cityDocument.id).exec();\n```\n\n----------------------------------------\n\nTITLE: Using Dexie Addons with RxDB\nDESCRIPTION: This code example illustrates how to incorporate Dexie.js plugins when using Dexie storage with RxDB.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-dexie.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst db = await createRxDatabase({\n    name: 'exampledb',\n    storage: getRxStorageDexie({\n        addons: [ /* Your Dexie.js plugins */ ]\n    })\n});\n```\n\n----------------------------------------\n\nTITLE: Creating RxDB Database with LocalStorage\nDESCRIPTION: Creates an RxDB database using localStorage as the storage mechanism for browser-based applications.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/local-first-future.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst db = await createRxDatabase({\n    name: 'myappdb',\n    storage: wrappedValidateAjvStorage({           \n        storage: getRxStorageLocalstorage()\n    })\n});\n```\n\n----------------------------------------\n\nTITLE: Observing Collection Changes\nDESCRIPTION: Shows how to observe changes to collection data using RxJS observables, including insert, update, and remove events.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-collection.md#2025-04-17_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nmyCollection.$.subscribe(changeEvent => console.dir(changeEvent));\n\n// you can also observe single event-types with insert$ update$ remove$\nmyCollection.insert$.subscribe(changeEvent => console.dir(changeEvent));\nmyCollection.update$.subscribe(changeEvent => console.dir(changeEvent));\nmyCollection.remove$.subscribe(changeEvent => console.dir(changeEvent));\n```\n\n----------------------------------------\n\nTITLE: Disabling Event Reduction in RxDB Database Creation\nDESCRIPTION: Creates an RxDB database instance with event reduction optimization disabled to help isolate potential issues related to query optimization.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/orga/bug-checklist.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst db = await createRxDatabase({\n    name,\n    eventReduce: false,\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring SQLite Storage Location for iOS in Capacitor\nDESCRIPTION: JSON configuration for specifying the iOS database location when using the @capacitor-community/sqlite package in Capacitor applications.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/capacitor-database.md#2025-04-17_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"plugins\": {\n        \"CapacitorSQLite\": {\n            \"iosDatabaseLocation\": \"Library/CapacitorDatabase\"\n        }\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring PouchDB for React Native\nDESCRIPTION: Setup code for creating a custom PouchDB class with required plugins and SQLite adapter\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/react-native-database.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport 'react-native-get-random-values';\nimport PouchDB from 'pouchdb-core';\nimport HttpPouch from 'pouchdb-adapter-http';\nimport replication from 'pouchdb-replication';\nimport mapreduce from 'pouchdb-mapreduce';\nimport SQLiteAdapterFactory from 'pouchdb-adapter-react-native-sqlite';\nimport WebSQLite from 'react-native-quick-websql';\n\nconst SQLiteAdapter = SQLiteAdapterFactory(WebSQLite);\nexport default PouchDB.plugin(HttpPouch)\n  .plugin(replication)\n  .plugin(mapreduce)\n  .plugin(SQLiteAdapter);\n```\n\n----------------------------------------\n\nTITLE: Implementing Composite Primary Key Schema\nDESCRIPTION: Example of schema configuration using composite primary keys with multiple fields.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/10.0.0.md#2025-04-17_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nconst mySchema = {\n  keyCompression: true, // set this to true, to enable the keyCompression\n  version: 0,\n  title: 'human schema with composite primary',\n  primaryKey: {\n      // where should the composed string be stored\n      key: 'id',\n      // fields that will be used to create the composed key\n      fields: [\n          'firstName',\n          'lastName'\n      ],\n      // separator which is used to concat the fields values.\n      separator: '|'\n  }\n  type: 'object',\n  properties: {\n      id: {\n          type: 'string'\n      },\n      firstName: {\n          type: 'string'\n      },\n      lastName: {\n          type: 'string'\n      }\n  },\n  required: [\n    'id', \n    'firstName',\n    'lastName'\n  ]\n};\n```\n\n----------------------------------------\n\nTITLE: Using 'this' Keyword in RxDB Instance Methods\nDESCRIPTION: Demonstrates the use of the 'this' keyword in instance methods, which refers to the document instance. This allows access to document properties within the method.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/orm.md#2025-04-17_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nconst heroes = await myDatabase.addCollections({\n  heroes: {\n    schema: mySchema,\n    methods: {\n      whoAmI: function(){\n          return 'I am ' + this.name + '!!';\n      }\n    }\n  }\n});\nawait heroes.insert({\n  name: 'Skeletor'\n});\nconst doc = await heroes.findOne().exec();\nconsole.log(doc.whoAmI());\n// 'I am Skeletor!!'\n```\n\n----------------------------------------\n\nTITLE: Executing SQLite Query from Electron Renderer Process\nDESCRIPTION: This snippet shows how to execute a SQLite query from the renderer process by invoking the IPC handler set up in the main process.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/electron-database.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst rows = await ipcRenderer.invoke('db-query', \"SELECT * FROM Users\");\n```\n\n----------------------------------------\n\nTITLE: Setting Specific Indexes in RxDB Queries\nDESCRIPTION: Example of explicitly specifying which index to use in a query when the query planner might not choose the optimal index.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/nosql-performance-tips.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst myQuery = myCollection.find({\n    selector: {\n        /* ... */\n    },\n    // explicitly specify index\n    index: [\n        'fieldA',\n        'fieldB'\n    ]\n\n});\n```\n\n----------------------------------------\n\nTITLE: Updated Schema Index Definition\nDESCRIPTION: Shows the new top-level index definition format in schema configuration instead of field-level specification.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/9.0.0.md#2025-04-17_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"firstName\": {\n        \"type\": \"string\",\n        \"index\": true\n    }\n}\n```\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"title\": \"my schema\",\n    \"version\": 0,\n    \"type\": \"object\",\n    \"properties\": {},\n    \"indexes\": [\n        \"firstName\",\n        [\"compound\", \"index\"]\n    ]\n}\n```\n\n----------------------------------------\n\nTITLE: Creating SQLite Database and Table in Electron Main Process\nDESCRIPTION: This snippet demonstrates how to create a SQLite database, create a table, and insert a row in the main process of an Electron application.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/electron-database.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst sqlite3 = require('sqlite3');\nconst db = new sqlite3.Database('/path/to/database/file.db');\n// create a table and insert a row\ndb.serialize(() => {\n  db.run(\"CREATE TABLE Users (name, lastName)\");\n  db.run(\"INSERT INTO Users VALUES (?, ?)\", ['foo', 'bar']);\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing RxDB Query in Angular Component\nDESCRIPTION: TypeScript code showing how to create and observe an RxDB query in an Angular component using dependency injection.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/angular-database.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n    constructor(\n        private dbService: DatabaseService,\n        private dialog: MatDialog\n    ) {\n        this.heroes$ = this.dbService\n            .db.hero                // collection\n            .find({                 // query\n                selector: {},\n                sort: [{ name: 'asc' }]\n            })\n            .$;\n    }\n```\n\n----------------------------------------\n\nTITLE: Optimizing Embedding Generation with WebWorker Distribution\nDESCRIPTION: Implements a function that distributes embedding generation tasks across multiple WebWorkers and sets up a pipeline that utilizes this function. This approach maximizes CPU utilization and improves processing speed.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/javascript-vector-database.md#2025-04-17_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nlet lastWorkerId = 0;\nlet lastId = 0;\nexport async function getVectorFromTextWithWorker(text: string): Promise<number[]> {\n    let worker = workers[lastWorkerId++];\n    if(!worker) {\n        lastWorkerId = 0;\n        worker = workers[lastWorkerId++];\n    }\n    const id = (lastId++) + '';\n    return new Promise<number[]>(res => {\n        const listener = (ev: any) => {\n            if (ev.data.id === id) {\n                res(ev.data.embedding);\n                worker.removeEventListener('message', listener);\n            }\n        };\n        worker.addEventListener('message', listener);\n        worker.postMessage({\n            id,\n            text\n        });\n    });\n}\n\nconst pipeline = await itemsCollection.addPipeline({\n    identifier: 'my-embeddings-pipeline',\n    destination: vectorCollection,\n    batchSize: navigator.hardwareConcurrency, // one per CPU core\n    handler: async (docs) => {\n        await Promise.all(docs.map(async (doc, i) => {\n            const embedding = await getVectorFromTextWithWorker(doc.body);\n            /* ... */\n        });\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Appwrite Client for Cloud\nDESCRIPTION: TypeScript code to configure Appwrite client for cloud deployment.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-appwrite.md#2025-04-17_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nconst client = new Client();\nclient.setEndpoint('https://cloud.appwrite.io/v1');\nclient.setEndpointRealtime('https://cloud.appwrite.io/v1');\nclient.setProject('YOUR_APPWRITE_PROJECT_ID');\n```\n\n----------------------------------------\n\nTITLE: Memory Storage Performance Optimization\nDESCRIPTION: Benchmark results showing performance improvements in memory storage operations including document insertion and query operations\nSOURCE: https://github.com/pubkey/rxdb/blob/master/orga/performance-trackings.md#2025-04-17_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"description\": \"memory\",\n    \"platform\": \"node\",\n    \"collectionsAmount\": 4,\n    \"docsAmount\": 600,\n    \"time-to-first-insert\": 3.2232383333321195,\n    \"insert-documents\": 23.658734166664846,\n    \"find-by-ids\": 0.3708604166846878,\n    \"find-by-query\": 1.4871898333367426\n}\n```\n\n----------------------------------------\n\nTITLE: Importing RxJS Zone.js Patch for Angular Change Detection\nDESCRIPTION: This code snippet demonstrates how to import the RxJS Zone.js patch in the app.component.ts file. This patch is crucial for ensuring proper change detection when RxDB creates RxJS observables outside of Angular's zone.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/angular/README.md#2025-04-17_snippet_1\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport 'zone.js/plugins/zone-patch-rxjs';\n```\n\n----------------------------------------\n\nTITLE: Creating PouchDB Instance in React Native\nDESCRIPTION: Example of initializing a PouchDB database instance with SQLite adapter\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/react-native-database.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nconst db = new PouchDB('mydb.db', {\n  adapter: 'react-native-sqlite'\n});\n```\n\n----------------------------------------\n\nTITLE: Polyfilling IndexedDB for Node.js with fake-indexeddb\nDESCRIPTION: This snippet shows how to use fake-indexeddb to polyfill IndexedDB in Node.js environments for testing purposes.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-dexie.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb/plugins/core';\nimport { getRxStorageDexie } from 'rxdb/plugins/storage-dexie';\n\n//> npm install fake-indexeddb --save\nconst fakeIndexedDB = require('fake-indexeddb');\nconst fakeIDBKeyRange = require('fake-indexeddb/lib/FDBKeyRange');\n\nconst db = await createRxDatabase({\n    name: 'exampledb',\n    storage: getRxStorageDexie({\n        indexedDB: fakeIndexedDB,\n        IDBKeyRange: fakeIDBKeyRange\n    })\n});\n```\n\n----------------------------------------\n\nTITLE: Typescript Usage with RxLocalDocument in RxDB\nDESCRIPTION: This code demonstrates how to use TypeScript with RxLocalDocument to get typed access to the document's data using the toJSON() method.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-local-document.md#2025-04-17_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare type MyLocalDocumentType = {\n  foo: string\n}\nconst localDoc = await myCollection.upsertLocal<MyLocalDocumentType>(\n    'foobar',   // id\n    {           // data\n        foo: 'bar'\n    }\n);\n\n// typescript will know that foo is a string\nconst foo: string = localDoc.toJSON().foo;\n```\n\n----------------------------------------\n\nTITLE: Implementing Replication with SharedWorker\nDESCRIPTION: Setup for running replication inside a SharedWorker process, including database creation and GraphQL replication configuration.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-shared-worker.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\n// shared-worker.ts\n\nimport { exposeWorkerRxStorage } from 'rxdb-premium/plugins/storage-worker';\nimport { \n    getRxStorageIndexedDB\n} from 'rxdb-premium/plugins/storage-indexeddb';\nimport {\n    createRxDatabase,\n    addRxPlugin\n} from 'rxdb';\nimport {\n    RxDBReplicationGraphQLPlugin\n} from 'rxdb/plugins/replication-graphql';\naddRxPlugin(RxDBReplicationGraphQLPlugin);\n\nconst baseStorage = getRxStorageIndexedDB();\n\n// first expose the RxStorage to the outside\nexposeWorkerRxStorage({\n    storage: baseStorage\n});\n\n/**\n * Then create a normal RxDatabase and RxCollections\n * and start the replication.\n */\nconst database = await createRxDatabase({\n    name: 'mydatabase',\n    storage: baseStorage\n});\nawait db.addCollections({\n    humans: {/* ... */}\n});\nconst replicationState = db.humans.syncGraphQL({/* ... */});\n```\n\n----------------------------------------\n\nTITLE: Using Pre-built SharedWorker Implementation\nDESCRIPTION: Example of creating an RxDatabase using a pre-built SharedWorker file from the RxDB Premium package.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-shared-worker.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    createRxDatabase\n} from 'rxdb';\nimport { getRxStorageSharedWorker } from 'rxdb-premium/plugins/storage-worker';\nconst database = await createRxDatabase({\n    name: 'mydatabase',\n    storage: getRxStorageSharedWorker(\n        {\n            /**\n             * Path to where the copied file from node_modules/rxdb-premium/dist/workers\n             * is reachable from the webserver.\n             */\n            workerInput: '/indexeddb.shared-worker.js'\n        }\n    )\n});\n```\n\n----------------------------------------\n\nTITLE: Custom Checkpoint Configuration\nDESCRIPTION: Examples of setting custom initial checkpoints for both push and pull replication to control the starting point of synchronization\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication.md#2025-04-17_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\n// store the latest checkpoint of a collection\nlet lastLocalCheckpoint: any;\nmyCollection.checkpoint$.subscribe(checkpoint => lastLocalCheckpoint = checkpoint);\n\n// start the replication but only push documents that are newer than the lastLocalCheckpoint\nconst replicationState = replicateRxCollection({\n    collection: myCollection,\n    replicationIdentifier: 'my-custom-replication-with-init-checkpoint',\n    /* ... */\n    push: {\n        handler: /* ... */,\n        initialCheckpoint: lastLocalCheckpoint\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Push Endpoint on Server\nDESCRIPTION: Creates a POST endpoint for pushing client-side writes to the server, handling conflict detection and emitting events for pull stream.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-http.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { lastOfArray } from 'rxdb/plugins/core';\nimport { Subject } from 'rxjs';\n\nlet lastEventId = 0;\nconst pullStream$ = new Subject();\n\napp.get('/push', (req, res) => {\n    const changeRows = req.body;\n    const conflicts = [];\n    const event = {\n        id: lastEventId++,\n        documents: [],\n        checkpoint: null\n    };\n    for(const changeRow of changeRows){\n        const realMasterState = mongoCollection.findOne({id: changeRow.newDocumentState.id});\n        if(\n            realMasterState && !changeRow.assumedMasterState ||\n            (\n                realMasterState && changeRow.assumedMasterState &&\n                realMasterState.updatedAt !== changeRow.assumedMasterState.updatedAt\n            )\n        ) {\n            conflicts.push(realMasterState);\n        } else {\n            mongoCollection.updateOne(\n                {id: changeRow.newDocumentState.id},\n                changeRow.newDocumentState\n            );\n            event.documents.push(changeRow.newDocumentState);\n            event.checkpoint = { id: changeRow.newDocumentState.id, updatedAt: changeRow.newDocumentState.updatedAt };\n        }\n    }\n    if(event.documents.length > 0){\n        myPullStream$.next(event);\n    }\n    res.setHeader('Content-Type', 'application/json');\n    res.end(JSON.stringify(conflicts));\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring CouchDB Replication for React Native in RxDB\nDESCRIPTION: This snippet demonstrates how to use the cross-fetch package to provide a fetch method for CouchDB replication in React Native environments, where a global fetch method is not available.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-couchdb.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport crossFetch from 'cross-fetch';\nconst replicationState = replicateCouchDB({\n    replicationIdentifier: 'my-couchdb-replication',\n    collection: myRxCollection,\n    url: 'http://example.com/db/humans',\n    fetch: crossFetch,\n    pull: {},\n    push: {}\n});\n```\n\n----------------------------------------\n\nTITLE: Initializing RxDB with DenoKV RxStorage in TypeScript\nDESCRIPTION: This snippet demonstrates how to create an RxDatabase using the DenoKV RxStorage. It shows the import of necessary functions and the configuration options for the storage.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-denokv.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb';\nimport { getRxStorageDenoKV } from 'rxdb/plugins/storage-denokv';\n\nconst myRxDatabase = await createRxDatabase({\n    name: 'exampledb',\n    storage: getRxStorageDenoKV({\n      /**\n       * Consistency level, either 'strong' or 'eventual'\n       * (Optional) default='strong'\n       */\n      consistencyLevel: 'strong',\n      /**\n       * Path which is used in the first argument of Deno.openKv(settings.openKvPath)\n       * (Optional) default=''\n       */\n      openKvPath: './foobar',\n      /**\n       * Some operations have to run in batches,\n       * you can test different batch sizes to improve performance.\n       * (Optional) default=100\n       */\n      batchSize: number\n    })\n});\n```\n\n----------------------------------------\n\nTITLE: Basic Vector Search Implementation with Full Table Scan in TypeScript\nDESCRIPTION: Demonstrates how to perform a basic vector similarity search by calculating distances between a query vector and stored embeddings. Uses euclideanDistance for comparison and includes sorting functionality.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/javascript-vector-database.md#2025-04-17_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nimport { euclideanDistance } from 'rxdb/plugins/vector';\nimport { sortByObjectNumberProperty } from 'rxdb/plugins/core';\n\nconst userInput = 'new york people';\nconst queryVector = await getEmbeddingFromText(userInput);\nconst candidates = await vectorCollection.find().exec();\nconst withDistance = candidates.map(doc => ({ \n    doc,\n    distance: euclideanDistance(queryVector, doc.embedding)\n}));\nconst queryResult = withDistance.sort(sortByObjectNumberProperty('distance')).reverse();\nconsole.dir(queryResult);\n```\n\n----------------------------------------\n\nTITLE: Importing RxDB LocalStorage Storage in TypeScript\nDESCRIPTION: Import statements for creating an RxDB database and using LocalStorage storage.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-localstorage.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb/plugins/core';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\n```\n\n----------------------------------------\n\nTITLE: Implementing Long-Polling in JavaScript\nDESCRIPTION: This snippet demonstrates how to implement long-polling in a JavaScript client. It uses the fetch API to make repeated requests to the server, handling responses and errors.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/websockets-sse-polling-webrtc-webtransport.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nfunction longPoll() {\n    fetch('http://example.com/poll')\n        .then(response => response.json())\n        .then(data => {\n            console.log(\"Received data:\", data);\n            longPoll(); // Immediately establish a new long polling request\n        })\n        .catch(error => {\n            /**\n             * Errors can appear in normal conditions when a \n             * connection timeout is reached or when the client goes offline.\n             * On errors we just restart the polling after some delay.\n             */\n            setTimeout(longPoll, 10000);\n        });\n}\nlongPoll(); // Initiate the long polling\n```\n\n----------------------------------------\n\nTITLE: Configuring RxDB with AsyncStorage Adapter for React Native\nDESCRIPTION: This snippet shows how to use the AsyncStorage adapter with RxDB in React Native. However, it's not recommended due to known issues.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/adapters.md#2025-04-17_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\n// npm install pouchdb-adapter-asyncstorage --save\naddPouchPlugin(require('pouchdb-adapter-asyncstorage'));\n\nconst database = await createRxDatabase({\n    name: 'mydatabase',\n    storage: getRxStoragePouch('node-asyncstorage') // the name of your adapter\n});\n```\n\n----------------------------------------\n\nTITLE: Handling Outdated Client in RxDB Server Replication\nDESCRIPTION: This code snippet shows how to subscribe to the outdatedClient$ observable to handle cases where the client's schema version is outdated compared to the server.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-server.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nreplicationState.outdatedClient$.subscribe(() => {\n    location.reload();\n});\n```\n\n----------------------------------------\n\nTITLE: Defining ORM Methods Type in TypeScript\nDESCRIPTION: Define a TypeScript type for ORM methods that will be added to the document.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/tutorials/typescript.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport type HeroDocMethods = {\n    scream: (v: string) => string;\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Up Flutter Interface Library in CMake\nDESCRIPTION: Creates an interface library for Flutter, sets include directories, and links necessary libraries and dependencies.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/flutter/linux/flutter/CMakeLists.txt#2025-04-17_snippet_4\n\nLANGUAGE: CMake\nCODE:\n```\nadd_library(flutter INTERFACE)\ntarget_include_directories(flutter INTERFACE\n  \"${EPHEMERAL_DIR}\"\n)\ntarget_link_libraries(flutter INTERFACE \"${FLUTTER_LIBRARY}\")\ntarget_link_libraries(flutter INTERFACE\n  PkgConfig::GTK\n  PkgConfig::GLIB\n  PkgConfig::GIO\n)\nadd_dependencies(flutter flutter_assemble)\n```\n\n----------------------------------------\n\nTITLE: New Encrypted Fields Schema Definition\nDESCRIPTION: Demonstrates the new top-level encrypted fields definition in schema configuration.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/9.0.0.md#2025-04-17_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"title\": \"my schema\",\n    \"version\": 0,\n    \"type\": \"object\",\n    \"properties\": {},\n    \"encrypted\": [\n        \"password\"\n    ]\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Table with JSON Column in PostgreSQL\nDESCRIPTION: This SQL snippet demonstrates how to create a table with a JSONB column in PostgreSQL and insert a record with JSON data. It showcases the flexibility of storing complex nested data structures in a relational database.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/json-based-database.md#2025-04-17_snippet_0\n\nLANGUAGE: sql\nCODE:\n```\nCREATE TABLE products (\n   id SERIAL PRIMARY KEY,\n   name TEXT,\n   details JSONB\n);\n\n-- Insert a record with JSON data\nINSERT INTO products (name, details) VALUES\n('Laptop', '{\"brand\": \"BrandX\", \"features\": [\"Touchscreen\", \"SSD\"]}');\n```\n\n----------------------------------------\n\nTITLE: Adding RxQuery.doesDocumentDataMatch() Method in JavaScript\nDESCRIPTION: Added a new method 'doesDocumentDataMatch()' to RxQuery. This allows checking if a document matches a query without executing the full query.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/CHANGELOG.md#2025-04-17_snippet_3\n\nLANGUAGE: JavaScript\nCODE:\n```\nRxQuery.doesDocumentDataMatch()\n```\n\n----------------------------------------\n\nTITLE: Calculating Euclidean Distance Between Embeddings\nDESCRIPTION: Demonstrates how to compare two embeddings by calculating their Euclidean distance using the vector utilities provided by RxDB. This is essential for implementing similarity search functionality.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/javascript-vector-database.md#2025-04-17_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nimport { euclideanDistance } from 'rxdb/plugins/vector';\nconst distance = euclideanDistance(embedding1, embedding2);\nconsole.log(distance); // 25.20443\n```\n\n----------------------------------------\n\nTITLE: Creating RxDocument Type in TypeScript\nDESCRIPTION: Merge the document type and ORM methods to create a complete RxDocument type.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/tutorials/typescript.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport type HeroDocument = RxDocument<HeroDocType, HeroDocMethods>;\n```\n\n----------------------------------------\n\nTITLE: Retrieving Attachment Data as Blob\nDESCRIPTION: Demonstrates how to get the data of an attachment as a Blob object.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-attachment.md#2025-04-17_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nconst attachment = myDocument.getAttachment('cat.jpg');\nconst blob = await attachment.getData();\n```\n\n----------------------------------------\n\nTITLE: Adding a Collection to RxDB Database\nDESCRIPTION: Defines and adds a 'todos' collection to the RxDB database with a specified schema.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/local-first-future.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nawait db.addCollections({\n  todos: {\n    schema: {\n      version: 0,\n      primaryKey: 'id',\n      type: 'object',\n      properties: {\n        id:        { type: 'string', maxLength: 100 },\n        title:     { type: 'string' },\n        done:      { type: 'boolean' },\n        timestamp: { type: 'string' }\n      },\n      required: ['id', 'title', 'done', 'timestamp']\n    }\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Importing WebRTC Replication Plugin\nDESCRIPTION: Shows how to import the required WebRTC replication plugin modules from RxDB.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-webrtc.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n  replicateWebRTC,\n  getConnectionHandlerSimplePeer\n} from 'rxdb/plugins/replication-webrtc';\n```\n\n----------------------------------------\n\nTITLE: SQL Update Query with Stock Status\nDESCRIPTION: SQL query that updates all items with zero stock to mark them as out of stock. This example illustrates potential replication issues when multiple clients modify data concurrently.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/why-nosql.md#2025-04-17_snippet_3\n\nLANGUAGE: sql\nCODE:\n```\nUPDATE\n  Table_A\nSET\n  Table_A.inStock = FALSE\nFROM\n  Table_A\nWHERE\n  Table_A.amountInStock = 0\n```\n\n----------------------------------------\n\nTITLE: Configuring Capacitor SQLite in capacitor.config.json\nDESCRIPTION: This JSON snippet shows how to configure the iOS database location for SQLite Capacitor in the capacitor config file.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-sqlite.md#2025-04-17_snippet_9\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"plugins\": {\n        \"CapacitorSQLite\": {\n            \"iosDatabaseLocation\": \"Library/CapacitorDatabase\"\n        }\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Installing RxDB Dependencies\nDESCRIPTION: Install the required RxDB library and RxJS dependency using npm\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/quickstart.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install rxdb rxjs\n```\n\n----------------------------------------\n\nTITLE: Manual Process NextTick Polyfill Implementation\nDESCRIPTION: Shows how to manually implement the process.nextTick() polyfill for SimplePeer in Angular or other libraries.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-webrtc.md#2025-04-17_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nwindow.process = {\n    nextTick: (fn, ...args) => setTimeout(() => fn(...args)),\n};\n```\n\n----------------------------------------\n\nTITLE: Initializing SQLite RxStorage with Trial Version\nDESCRIPTION: This snippet demonstrates how to initialize the trial version of SQLite RxStorage, which is shipped with RxDB Core. It's limited and intended for evaluation and prototypes only.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-sqlite.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    getRxStorageSQLiteTrial,\n    getSQLiteBasicsNodeNative\n} from 'rxdb/plugins/storage-sqlite';\n\nconst storage = getRxStorageSQLiteTrial({\n    sqliteBasics: getSQLiteBasicsNodeNative(sqlite.DatabaseSync)\n});\n\nconst myRxDatabase = await createRxDatabase({\n    name: 'exampledb',\n    storage: storage\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Attachment Compression in TypeScript\nDESCRIPTION: Demonstrates how to set up attachment compression using the attachments-compression plugin in TypeScript. This optimizes storage space for attachments.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-attachment.md#2025-04-17_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    wrappedAttachmentsCompressionStorage\n} from 'rxdb/plugins/attachments-compression';\n\nimport { getRxStorageIndexedDB } from 'rxdb-premium/plugins/storage-indexeddb';\n\n// create a wrapped storage with attachment-compression.\nconst storageWithAttachmentsCompression = wrappedAttachmentsCompressionStorage({\n    storage: getRxStorageIndexedDB()\n});\n\nconst db = await createRxDatabase({\n    name: 'mydatabase',\n    storage: storageWithAttachmentsCompression\n});\n\n\n// set the compression mode at the schema level\nconst mySchema = {\n    version: 0,\n    type: 'object',\n    properties: {\n        // .\n        // .\n        // .\n    },\n    attachments: {\n        compression: 'deflate'  // <- Specify the compression mode here. OneOf ['deflate', 'gzip']\n    }\n};\n\n/* ... create your collections as usual and store attachments in them. */\n```\n\n----------------------------------------\n\nTITLE: Configuring RxDB in JavaScript for Flutter Integration\nDESCRIPTION: This snippet demonstrates how to set up RxDB in JavaScript, including database creation, schema definition, and Flutter connector initialization. It uses LokiJS for storage and sets up a 'heroes' collection.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/flutter/README.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport {\n    createRxDatabase\n} from 'rxdb';\nimport {\n    getRxStorageLoki\n} from 'rxdb/plugins/storage-lokijs';\nimport {\n    setFlutterRxDatabaseConnector,\n    getLokijsAdapterFlutter\n} from 'rxdb/plugins/flutter';\n\n// do all database creation stuff in this method.\nasync function createDB(databaseName) {\n    // create the RxDatabase\n    const db = await createRxDatabase({\n        // the database.name is variable so we can change it on the flutter side\n        name: databaseName,\n        storage: getRxStorageLoki({\n            adapter: getLokijsAdapterFlutter()\n        }),\n        multiInstance: false\n    });\n    await db.addCollections({\n        heroes: {\n            schema: {\n                version: 0,\n                primaryKey: 'id',\n                type: 'object',\n                properties: {\n                    id: {\n                        type: 'string',\n                        maxLength: 100\n                    },\n                    name: {\n                        type: 'string',\n                        maxLength: 100\n                    },\n                    color: {\n                        type: 'string',\n                        maxLength: 30\n                    }\n                },\n                indexes: ['name'],\n                required: ['id', 'name', 'color']\n            }\n        }\n    });\n    return db;\n}\n\n// start the connector so that flutter can communicate with the JavaScript process\nsetFlutterRxDatabaseConnector(\n    createDB\n);\n```\n\n----------------------------------------\n\nTITLE: Defining Date Field Schema in RxDB\nDESCRIPTION: Schema definition for storing dates in RxDB using ISO string format with date-time validation.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-schema.md#2025-04-17_snippet_7\n\nLANGUAGE: json\nCODE:\n```\n{\n   \"type\": \"string\",\n   \"format\": \"date-time\"\n}\n```\n\n----------------------------------------\n\nTITLE: Querying Fulltext Search Data in TypeScript\nDESCRIPTION: Shows how to efficiently query for all emails that contain a given word using the fulltext search index created by the RxPipeline.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-pipeline.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nconst mailIds = await emailByReceiverCollection.find({word: 'foobar'}).exec();\n```\n\n----------------------------------------\n\nTITLE: Using findByIds Query in RxDB 14.0\nDESCRIPTION: Demonstrates the new findByIds query syntax which now returns a RxQuery object instead of directly returning results.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/14.0.0.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst results = await myRxCollection.findByIds(['foo', 'bar']).exec();\nconst results$ = await myRxCollection.findByIds(['foo', 'bar']).$;\n```\n\n----------------------------------------\n\nTITLE: Adding Local Documents Plugin in RxDB\nDESCRIPTION: This snippet shows how to add the local documents plugin to enable the use of local documents in RxDB.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-local-document.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { addRxPlugin } from 'rxdb';\nimport { RxDBLocalDocumentsPlugin } from 'rxdb/plugins/local-documents';\naddRxPlugin(RxDBLocalDocumentsPlugin);\n```\n\n----------------------------------------\n\nTITLE: Integrating RxDB in Flutter Dart Code\nDESCRIPTION: This Dart code snippet demonstrates how to use RxDB in a Flutter application. It shows database connection, document insertion, query creation, and subscription to query results. This code interacts with the JavaScript RxDB instance.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/flutter/README.md#2025-04-17_snippet_2\n\nLANGUAGE: dart\nCODE:\n```\nimport 'package:rxdb/rxdb.dart';\n\n// start the javascript process and connect to the database\nRxDatabase myDatabase = await getRxDatabase(\"javascript/dist/index.js\", databaseName);\n\n// get a collection\nRxCollection myCollection = database.getCollection('heroes');\n\n// insert a document\nRxDocument myDocument = await collection.insert({\n    \"id\": \"zflutter-${DateTime.now()}\",\n    \"name\": nameController.text,\n    \"color\": colorController.text\n});\n\n// create a query\nRxQuery<RxHeroDocType> myQuery = RxDatabaseState.collection.find();\n\n// subscribe to a query\nmyQuery.$().listen((newResults) {\n    setState(() {\n        documents = newResults;\n    });\n});\n```\n\n----------------------------------------\n\nTITLE: SQLite Node Performance Benchmarks (Log 2)\nDESCRIPTION: Second log output of SQLite performance metrics on Node.js showing improved serial insert performance. This benchmark demonstrates variations in performance for the same configuration with 4 collections and 3000 documents.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/orga/performance-trackings.md#2025-04-17_snippet_11\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"description\": \"sqlite node\",\n    \"platform\": \"node\",\n    \"collectionsAmount\": 4,\n    \"docsAmount\": 3000,\n    \"time-to-first-insert\": 4.7,\n    \"insert-documents-500\": 26.18,\n    \"find-by-ids-3000\": 52.85,\n    \"serial-inserts-200\": 82.85,\n    \"serial-find-by-id-200\": 4,\n    \"find-by-query\": 37.2\n}\n```\n\n----------------------------------------\n\nTITLE: Webpack Configuration for Custom Worker (JavaScript)\nDESCRIPTION: Provides a webpack configuration for bundling a custom worker file. This setup is used for creating self-contained worker scripts.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-worker.md#2025-04-17_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\n// webpack.config.js\nconst path = require('path');\nconst TerserPlugin = require('terser-webpack-plugin');\nconst projectRootPath = path.resolve(\n    __dirname,\n    '../../' // path from webpack-config to the root folder of the repo\n);\nconst babelConfig = require(path.join(projectRootPath, 'babel.config'));\nconst baseDir = './dist/workers/'; // output path\nmodule.exports = {\n    target: 'webworker',\n    entry: {\n        'my-custom-worker': baseDir + 'my-custom-worker.js',\n    },\n    output: {\n        filename: '[name].js',\n        clean: true,\n        path: path.resolve(\n            projectRootPath,\n            'dist/workers'\n        ),\n    },\n    mode: 'production',\n    module: {\n        rules: [\n            {\n                test: /\\.tsx?$/,\n                exclude: /(node_modules)/,\n                use: {\n                    loader: 'babel-loader',\n                    options: babelConfig\n                }\n            }\n        ],\n    },\n    resolve: {\n        extensions: ['.tsx', '.ts', '.js', '.mjs', '.mts']\n    },\n    optimization: {\n        moduleIds: 'deterministic',\n        minimize: true,\n        minimizer: [new TerserPlugin({\n            terserOptions: {\n                format: {\n                    comments: false,\n                },\n            },\n            extractComments: false,\n        })],\n    }\n};\n```\n\n----------------------------------------\n\nTITLE: Installing RxDB with npm\nDESCRIPTION: Command to install RxDB and RxJS dependencies in a React project using npm.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/react-indexeddb.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install rxdb rxjs --save\n```\n\n----------------------------------------\n\nTITLE: Manual Cleanup Operations in RxDB\nDESCRIPTION: Shows different ways to manually trigger cleanup operations on a collection, including using default policy times or custom deletion timeframes.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/cleanup.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nawait myRxCollection.cleanup();\n\nawait myRxCollection.cleanup(1000);\n\nawait myRxCollection.cleanup(0);\n```\n\n----------------------------------------\n\nTITLE: Storing Complex Data in localStorage with JSON Serialization\nDESCRIPTION: Shows how to store and retrieve structured data like objects using JSON.stringify and JSON.parse methods to overcome localStorage's limitation of only storing string values.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/localstorage.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst user = {\n  name: 'Alice',\n  age: 30,\n  email: 'alice@example.com'\n};\n\n// Storing a user object\nlocalStorage.setItem('user', JSON.stringify(user));\n\n// Retrieving and parsing the user object\nconst storedUser = JSON.parse(localStorage.getItem('user'));\n```\n\n----------------------------------------\n\nTITLE: Encryption Plugin Import in RxDB 14.0\nDESCRIPTION: Shows the renamed encryption plugin import path, now called 'encryption-crypto-js'.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/14.0.0.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\n// Instead of \nimport { wrappedKeyEncryptionStorage } from 'rxdb/plugins/encryption';\n// it is now\nimport { wrappedKeyEncryptionCryptoJsStorage } from 'rxdb/plugins/encryption-crypto-js';\n```\n\n----------------------------------------\n\nTITLE: Splitting Conflict Handler in RxDB\nDESCRIPTION: The conflict handler functionality in RxDB 16.0.0 has been split into two separate functions: isEqual() and resolve(). This change aims to simplify the process of defining conflict handlers and improve clarity in their usage.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/16.0.0.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nisEqual()\nresolve()\n```\n\n----------------------------------------\n\nTITLE: Installing Preact Signals for RxDB Reactivity\nDESCRIPTION: Command to install Preact Signals Core package, which is required for using the Preact Signals reactivity model with RxDB in React applications.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/react-indexeddb.md#2025-04-17_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @preact/signals-core --save\n```\n\n----------------------------------------\n\nTITLE: Querying Documents from RxDB Collection in TypeScript\nDESCRIPTION: Example of querying documents from the 'tasks' collection based on a condition.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-localstorage.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nconst nonDoneTasks = await db.tasks.find({\n    selector: {\n        done: {\n            $eq: false\n        }\n    }\n}).exec();\n```\n\n----------------------------------------\n\nTITLE: Handling Duplicate Database Instances\nDESCRIPTION: Example of creating multiple database instances with the same name using ignoreDuplicate flag for testing scenarios.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-database.md#2025-04-17_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst db1 = await createRxDatabase({\n  name: 'heroesdb',\n  storage: getRxStorageLocalstorage(),\n  ignoreDuplicate: true\n});\nconst db2 = await createRxDatabase({\n  name: 'heroesdb',\n  storage: getRxStorageLocalstorage(),\n  ignoreDuplicate: true // this create-call will not throw because you explicitly allow it\n});\n```\n\n----------------------------------------\n\nTITLE: Adding a Collection to RxDB Database in Capacitor\nDESCRIPTION: Shows how to add a collection with a schema to an RxDB database in a Capacitor application. The schema defines the structure of documents with properties and validation rules.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/capacitor-database.md#2025-04-17_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\n// create collections\nconst collections = await myRxDatabase.addCollections({\n    humans: {\n        schema: {\n            version: 0,\n            type: 'object',\n            primaryKey: 'id',\n            properties: {\n                id: { type: 'string', maxLength: 100 },\n                name: { type: 'string' },\n                age: { type: 'number' }\n              },\n            required: ['id', 'name']\n        }\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Webpack Implementation in Source Code\nDESCRIPTION: Implementation of dev-mode plugin using webpack MODE variable in application code.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/dev-mode.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare var MODE: 'production' | 'development';\n\nasync function createDb() {\n    if (MODE === 'development') {\n        await import('rxdb/plugins/dev-mode').then(\n            module => addRxPlugin(module.RxDBDevModePlugin)\n        );\n    }\n    const db = createRxDatabase( /* ... */ );\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Using z-schema Validator Plugin in JavaScript\nDESCRIPTION: Added a plugin to use z-schema as a validator for RxDB schemas. This provides an alternative schema validation option.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/CHANGELOG.md#2025-04-17_snippet_4\n\nLANGUAGE: JavaScript\nCODE:\n```\n// Example usage of z-schema validator plugin\n// (Actual code not provided in changelog)\n```\n\n----------------------------------------\n\nTITLE: Configuring RxDB Logger Settings\nDESCRIPTION: Customizing the logger plugin behavior by specifying which operations to log and adding a prefix to log entries. This allows for more focused logging and less noisy output.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/logger.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst loggingStorage = wrappedLoggerStorage({\n    storage: getRxStorageIndexedDB({}),\n    settings: {\n        // can used to prefix all log strings, default=''\n        prefix: 'my-prefix',\n\n\n        /**\n         * Be default, all settings are true.\n         */\n\n        // if true, it will log timings with console.time() and console.timeEnd()\n        times: true,\n\n        // if false, it will not log meta storage instances like used in replication\n        metaStorageInstances: true,\n\n        // operations\n        bulkWrite: true,\n        findDocumentsById: true,\n        query: true,\n        count: true,\n        info: true,\n        getAttachmentData: true,\n        getChangedDocumentsSince: true,\n        cleanup: true,\n        close: true,\n        remove: true\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Installing RxDB Dependencies\nDESCRIPTION: Commands to install RxDB and its RxJS dependency using npm package manager.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/vue-database.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install rxdb rxjs\n```\n\n----------------------------------------\n\nTITLE: Patching Change Detection with zone.js in Angular\nDESCRIPTION: Importing zone.js patch to ensure change detection works correctly with RxDB observables in Angular.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/angular-indexeddb.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport 'zone.js/plugins/zone-patch-rxjs';\n```\n\n----------------------------------------\n\nTITLE: Mocking LocalStorage API for Node.js Testing in TypeScript\nDESCRIPTION: Code snippet showing how to mock the LocalStorage API for testing RxDB with LocalStorage in Node.js environment.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-localstorage.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb/plugins/core';\nimport {\n    getRxStorageLocalstorage,\n    getLocalStorageMock\n} from 'rxdb/plugins/storage-localstorage';\n\nconst db = await createRxDatabase({\n    name: 'exampledb',\n    storage: getRxStorageLocalstorage({\n        localStorage: getLocalStorageMock()\n    })\n});\n```\n\n----------------------------------------\n\nTITLE: Executing RxQuery and Handling Results in JavaScript\nDESCRIPTION: Demonstrates how to execute an RxQuery using exec() method and handle the results, including TypeScript-specific usage for findOne().\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-query.md#2025-04-17_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst query = myCollection.find();\nconst results = await query.exec();\nconsole.dir(results); // > [RxDocument,RxDocument,RxDocument..]\n```\n\nLANGUAGE: typescript\nCODE:\n```\n// docOrUndefined can be the type RxDocument or null which then has to be handled to be typesafe.\nconst docOrUndefined = await myCollection.findOne().exec();\n\n// with .exec(true), it will throw if the document cannot be found and always have the type RxDocument\nconst doc = await myCollection.findOne().exec(true);\n```\n\n----------------------------------------\n\nTITLE: Global Variable Polyfill for PouchDB\nDESCRIPTION: Shows how to polyfill the global variable for PouchDB when using webpack-based frameworks like Angular to prevent 'global is not defined' errors.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-pouchdb.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n(window as any).global = window;\n(window as any).process = {\n    env: { DEBUG: undefined },\n};\n```\n\n----------------------------------------\n\nTITLE: SQLite Node Performance Benchmarks (Without Unique)\nDESCRIPTION: Performance metrics for SQLite operations on Node.js platform without unique constraints. The benchmark measures various operations including document insertion, querying, and property access across 4 collections with 3000 documents.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/orga/performance-trackings.md#2025-04-17_snippet_8\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"description\": \"sqlite node\",\n    \"platform\": \"node\",\n    \"collectionsAmount\": 4,\n    \"docsAmount\": 3000,\n    \"time-to-first-insert\": 25.84,\n    \"insert-documents-500\": 8.97,\n    \"find-by-ids-3000\": 19.61,\n    \"serial-inserts-200\": 48.7,\n    \"serial-find-by-id-200\": 0.92,\n    \"find-by-query\": 16.88,\n    \"find-by-query-parallel-4\": 18.08,\n    \"4x-count\": 1.69,\n    \"property-access\": 5.09\n}\n```\n\n----------------------------------------\n\nTITLE: Example of Key Compression for IndexedDB Storage Optimization in TypeScript\nDESCRIPTION: This example illustrates how key compression can transform documents to reduce storage requirements by shortening field names, which is useful when dealing with large JSON datasets in IndexedDB.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/indexeddb-max-storage-limit.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n// Example: How key-compression can transform your documents internally\nconst uncompressed = {\n  \"firstName\": \"Corrine\",\n  \"lastName\": \"Ziemann\",\n  \"shoppingCartItems\": [\n    {\n      \"productNumber\": 29857,\n      \"amount\": 1\n    },\n    {\n      \"productNumber\": 53409,\n      \"amount\": 6\n    }\n  ]\n};\nconst compressed = {\n  \"|e\": \"Corrine\",\n  \"|g\": \"Ziemann\",\n  \"|i\": [\n    {\n      \"|h\": 29857,\n      \"|b\": 1\n    },\n    {\n      \"|h\": 53409,\n      \"|b\": 6\n    }\n  ]\n};\n```\n\n----------------------------------------\n\nTITLE: Accessing Existing Collections\nDESCRIPTION: Demonstrates how to retrieve an existing collection from the database using direct property access.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-collection.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n// newly created collection\nconst collections = await db.addCollections({\n  heroes: {\n    schema: mySchema\n  }\n});\nconst collection2 = db.heroes;\nconsole.log(collections.heroes === collection2); //> true\n```\n\n----------------------------------------\n\nTITLE: Implementing Preact Signals Reactivity in RxDB\nDESCRIPTION: This code snippet shows how to integrate Preact signals for custom reactivity in RxDB. It uses the PreactSignalsRxReactivityFactory from the rxdb-premium plugin.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/reactivity.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\n// npm install @preact/signals-core --save\nimport { PreactSignalsRxReactivityFactory } from 'rxdb-premium/plugins/reactivity-preact-signals';\nimport { createRxDatabase } from 'rxdb/plugins/core';\nconst database = await createRxDatabase({\n    name: 'mydb',\n    storage: getRxStorageLocalstorage(),\n    reactivity: PreactSignalsRxReactivityFactory\n});\n```\n\n----------------------------------------\n\nTITLE: Using Signals for Reactive Queries in RxDB\nDESCRIPTION: Shows how to use signals instead of RxJS for reactive queries in RxDB, demonstrating usage with React.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/local-first-future.md#2025-04-17_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nconst todosQuery = db.todos.find({ selector: { done: false } });\n\nconst todosSignal = todosQuery.$$;\n\nfunction TodosComponent() {\n  const todoList = todosSignal();\n  return (\n    <ul>\n      {todoList.map(todo => (\n        <li key={todo.id}>{todo.title}</li>\n      ))}\n    </ul>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Type Definition for Mixed Types in RxJsonSchema\nDESCRIPTION: Example of the current schema definition that allows mixed types in RxJsonSchema properties, which is planned to be removed to prevent type ambiguity in query selectors.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/orga/before-next-major.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n{\n    type?: JsonSchemaTypes | JsonSchemaTypes[];\n}\n```\n\n----------------------------------------\n\nTITLE: Defining List Prepend Function in CMake\nDESCRIPTION: Creates a custom function to prepend a prefix to each element in a list, simulating list(TRANSFORM ... PREPEND ...) for CMake versions below 3.12.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/flutter/linux/flutter/CMakeLists.txt#2025-04-17_snippet_1\n\nLANGUAGE: CMake\nCODE:\n```\nfunction(list_prepend LIST_NAME PREFIX)\n    set(NEW_LIST \"\")\n    foreach(element ${${LIST_NAME}})\n        list(APPEND NEW_LIST \"${PREFIX}${element}\")\n    endforeach(element)\n    set(${LIST_NAME} \"${NEW_LIST}\" PARENT_SCOPE)\nendfunction()\n```\n\n----------------------------------------\n\nTITLE: Installing RxDB Dependencies\nDESCRIPTION: NPM command to install RxDB and its required RxJS dependency\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/ionic-storage.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install rxdb rxjs\n```\n\n----------------------------------------\n\nTITLE: Creating Pull Stream Query Builder for GraphQL Subscription in JavaScript\nDESCRIPTION: Defines a function to create a GraphQL subscription query for streaming hero data. It includes document fields and checkpoint information.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-graphql.md#2025-04-17_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nconst pullStreamQueryBuilder = (headers) => {\n    const query = `subscription onStream($headers: Headers) {\n        streamHero(headers: $headers) {\n            documents {\n                id,\n                name,\n                age,\n                updatedAt,\n                deleted\n            },\n            checkpoint {\n                id\n                updatedAt\n            }\n        }\n    }`;\n    return {\n        query,\n        variables: {\n            headers\n        }\n    };\n};\n```\n\n----------------------------------------\n\nTITLE: Importing RxDB and SQLite for Capacitor\nDESCRIPTION: Code for importing the necessary dependencies to use RxDB with SQLite storage in Capacitor applications, setting up the connection to the SQLite database.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/capacitor-database.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    createRxDatabase\n} from 'rxdb/plugins/core';\nimport {\n    CapacitorSQLite,\n    SQLiteConnection\n} from '@capacitor-community/sqlite';\nimport { Capacitor } from '@capacitor/core';\nconst sqlite = new SQLiteConnection(CapacitorSQLite);\n```\n\n----------------------------------------\n\nTITLE: Setting Up Reactive Query Subscription in RxDB\nDESCRIPTION: Demonstrates how to set up a reactive query subscription for real-time updates in RxDB using RxJS.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/local-first-future.md#2025-04-17_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\ndb.todos.find({ selector: { done: false } }).$.subscribe(todoList => {\n    console.log('Currently have ' + todoList.length + ' todos left');\n    // Here you would update your UI to display the latest todos\n});\n```\n\n----------------------------------------\n\nTITLE: Accessing PouchDB Instance\nDESCRIPTION: Shows how to access the internal PouchDB instance through the storage interface.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/10.0.0.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst pouch = myRxCollection.storageInstance.internals.pouch;\n```\n\n----------------------------------------\n\nTITLE: Adding Collection with Schema\nDESCRIPTION: Creating a new collection with defined schema for storing human records with required fields and data types.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/react-native-database.md#2025-04-17_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nconst collections = await myRxDatabase.addCollections({\n    humans: {\n        schema: {\n            version: 0,\n            type: 'object',\n            primaryKey: 'id',\n            properties: {\n                id: { type: 'string', maxLength: 100 },\n                name: { type: 'string' },\n                age: { type: 'number' }\n              },\n            required: ['id', 'name']\n        }\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: RxDB Technology Support Matrix Table\nDESCRIPTION: Markdown table showing supported technologies and their implementation status with links to corresponding example projects\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/README.md#2025-04-17_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\nTechnology           | Status\n-------------------- | ---------------------\nnodeJS               | [done](./node)\nreact-native         | [done](./react-native)\nionic2               | [done](./ionic2)\nelectron             | [done](./electron)\nangular              | [done](./angular)\nreact                | [done](./react)\nsvelte               | [done](./svelte)\nvuejs                | [done](./vue)\nsupabase             | [done](./supabase/)\n```\n\n----------------------------------------\n\nTITLE: Alternative Counting Methods in RxDB (TypeScript)\nDESCRIPTION: Shows alternative methods to count documents when direct count queries are not possible. It includes examples of manual counting using find queries and enabling slow count queries during database creation.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-query.md#2025-04-17_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\n// get count manually once\nconst resultSet = await myCollection.find({\n  selector: {\n    age: {\n      $regex: 'foobar'\n    }\n  }\n}).exec();\nconst count = resultSet.length;\n\n// observe count manually\nconst count$ = myCollection.find({\n  selector: {\n    age: {\n      $regex: 'foobar'\n    }\n  }\n}).$.pipe(\n  map(result => result.length)\n);\n\n/**\n * To allow non-fully-indexed count queries,\n * you can also specify that by setting allowSlowCount=true\n * when creating the database.\n */\nconst database = await createRxDatabase({\n    name: 'mydatabase',\n    allowSlowCount: true, // set this to true [default=false]\n    /* ... */\n});\n```\n\n----------------------------------------\n\nTITLE: Checking RxQuery Instance in RxDB (JavaScript)\nDESCRIPTION: Shows how to use the isRxQuery function to check if an object is an instance of RxQuery in RxDB.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-query.md#2025-04-17_snippet_16\n\nLANGUAGE: javascript\nCODE:\n```\nconst is = isRxQuery(myObj);\n```\n\n----------------------------------------\n\nTITLE: Importing RxDB Modules for Local-First Setup\nDESCRIPTION: Imports necessary RxDB modules and plugins for setting up a local-first database.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/local-first-future.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase, addRxPlugin } from 'rxdb/plugins/core';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\nimport { wrappedValidateAjvStorage } from 'rxdb/plugins/validate-ajv';\nimport { RxDBDevModePlugin } from 'rxdb/plugins/dev-mode';\n// Enable dev mode (for helpful warnings in development)\naddRxPlugin(RxDBDevModePlugin);\n```\n\n----------------------------------------\n\nTITLE: Importing RxDB HTTP Replication Plugin\nDESCRIPTION: Imports the HTTP replication plugin for syncing RxDB with a backend server.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/local-first-future.md#2025-04-17_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nimport { replicateRxCollection } from 'rxdb/plugins/replication-http';\n```\n\n----------------------------------------\n\nTITLE: Adding JavaScript Bundle to Flutter Assets\nDESCRIPTION: YAML configuration in pubspec.yaml to include the bundled JavaScript RxDB code as a Flutter asset, making it accessible at runtime.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/flutter-database.md#2025-04-17_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\nflutter:\n  assets:\n    - javascript/dist/index.js\n```\n\n----------------------------------------\n\nTITLE: Importing RxDB SQLite Storage Modules (Premium Version)\nDESCRIPTION: Shows how to import the premium version of RxDB SQLite storage module for use in Capacitor applications when using the premium version of RxDB.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/capacitor-database.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    getRxStorageSQLite,\n    getSQLiteBasicsCapacitor\n} from 'rxdb-premium/plugins/storage-sqlite';\n```\n\n----------------------------------------\n\nTITLE: OPFS Worker Configuration with RxDatabase Support\nDESCRIPTION: Demonstrates how to configure OPFS storage for use with RxDatabase inside a worker context.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-opfs.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\n// inside of the worker.js file\nimport { getRxStorageOPFS } from 'rxdb-premium/plugins/storage-opfs';\nconst storage = getRxStorageOPFS({\n  usesRxDatabaseInWorker: true\n});\n```\n\n----------------------------------------\n\nTITLE: Getting All Attachments from RxDocument\nDESCRIPTION: Shows how to retrieve all attachments from an RxDocument as an array.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-attachment.md#2025-04-17_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nconst attachments = myDocument.allAttachments();\n```\n\n----------------------------------------\n\nTITLE: Creating Vector Collection for Embeddings Storage\nDESCRIPTION: Defines a schema for the 'vector' collection that will store the embeddings. Each document contains an ID that corresponds to an item and an array that stores the embedding values.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/javascript-vector-database.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nawait db.addCollections({\n  vector: {\n    schema: {\n        version: 0,\n        primaryKey: 'id',\n        type: 'object',\n        properties: {\n            id: {\n                type: 'string',\n                maxLength: 20\n            },\n            embedding: {\n                type: 'array',\n                items: {\n                    type: 'string'\n                }\n            }\n        },\n        required: ['id', 'embedding']\n    }\n  }\n});\nconst vectorCollection = db.vector;\n```\n\n----------------------------------------\n\nTITLE: Implementing Pull Endpoint on Server\nDESCRIPTION: Creates a GET endpoint for pulling document changes based on a given checkpoint, respecting the batch size limit.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-http.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { lastOfArray } from 'rxdb/plugins/core';\napp.get('/pull', (req, res) => {\n    const id = req.query.id;\n    const updatedAt = parseFloat(req.query.updatedAt);\n    const documents = await mongoCollection.find({\n            $or: [\n                {\n                    updateAt: { $gt: updatedAt }\n                },\n                {\n                    updateAt: { $eq: updatedAt }\n                    id: { $gt: id }\n                }\n            ]\n        })\n        .sort({updateAt: 1, id: 1})\n        .limit(parseInt(req.query.batchSize, 10)).toArray();\n    const newCheckpoint = documents.length === 0 ? { id, updatedAt } : {\n        id: lastOfArray(documents).id,\n        updatedAt: lastOfArray(documents).updatedAt\n    };\n    res.setHeader('Content-Type', 'application/json');\n    res.end(JSON.stringify({ documents, checkpoint: newCheckpoint }));\n});\n```\n\n----------------------------------------\n\nTITLE: Running RxDB Documentation Locally\nDESCRIPTION: Commands for installing documentation dependencies and serving the documentation website locally for preview and development.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/contribute.md#2025-04-17_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nnpm run docs:install && npm run docs:serve\n```\n\n----------------------------------------\n\nTITLE: Implementing IndexedDB Polyfill for Node.js\nDESCRIPTION: Configuration for using fake-indexeddb as a polyfill to enable IndexedDB RxStorage in Node.js environments, particularly useful for unit testing.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-indexeddb.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb';\nimport { getRxStorageIndexedDB } from 'rxdb-premium/plugins/storage-indexeddb';\n\n//> npm install fake-indexeddb --save\nconst fakeIndexedDB = require('fake-indexeddb');\nconst fakeIDBKeyRange = require('fake-indexeddb/lib/FDBKeyRange');\n\nconst db = await createRxDatabase({\n    name: 'exampledb',\n    storage: getRxStorageIndexedDB({\n        indexedDB: fakeIndexedDB,\n        IDBKeyRange: fakeIDBKeyRange\n    })\n});\n```\n\n----------------------------------------\n\nTITLE: Adding Dev Mode Plugin to RxDB\nDESCRIPTION: Simple implementation to add the dev-mode plugin to RxDB.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/dev-mode.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\naddRxPlugin(RxDBDevModePlugin);\n```\n\n----------------------------------------\n\nTITLE: Importing Dexie Storage for RxDB in TypeScript\nDESCRIPTION: This snippet shows how to import the necessary modules to use Dexie.js storage with RxDB.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-dexie.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb/plugins/core';\nimport { getRxStorageDexie } from 'rxdb/plugins/storage-dexie';\n```\n\n----------------------------------------\n\nTITLE: Redirecting to Updated Documentation Page using HTML Meta Tag\nDESCRIPTION: This HTML meta tag automatically redirects the user to the new documentation page for the renamed 'replication-webrtc' plugin. It uses a zero-second delay for immediate redirection.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-p2p.md#2025-04-17_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<meta http-equiv=\"refresh\" content=\"0; url=https://rxdb.info/replication-webrtc.html\" />\n```\n\n----------------------------------------\n\nTITLE: Installation and Setup Commands for RxDB GraphQL Example\nDESCRIPTION: Command sequence for installing and running the RxDB GraphQL example project, including repository cloning, dependency installation, and project startup.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/graphql/README.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncd rxdb\nnpm install\ncd examples/graphql\nnpm run preinstall && npm install\nnpm start\n```\n\n----------------------------------------\n\nTITLE: Installing and Running RxDB Vue.js Example\nDESCRIPTION: Series of commands to set up and run the RxDB Vue.js example application. Includes cloning the repository, installing dependencies, building the project, and starting the development server.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/vue/README.md#2025-04-17_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\ncd rxdb\nnpm install && npm run build\ncd examples/vue\nnpm run preinstall && npm install\nnpm start\n```\n\n----------------------------------------\n\nTITLE: Starting NATS Server with Docker for RxDB Replication\nDESCRIPTION: Command to start a NATS server using Docker, enabling JetStream and exposing the necessary port for RxDB replication.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-nats.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ndocker run --rm --name rxdb-nats -p 4222:4222 nats:2.9.17 -js\n```\n\n----------------------------------------\n\nTITLE: Memory Storage Performance Metrics\nDESCRIPTION: Memory storage performance benchmarks showing improvements in insert and query operations as of May 2024.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/orga/performance-trackings.md#2025-04-17_snippet_7\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"description\": \"memory\",\n    \"platform\": \"memory\",\n    \"collectionsAmount\": 4,\n    \"docsAmount\": 1200,\n    \"time-to-first-insert\": 0.84,\n    \"insert-documents-200\": 0.34,\n    \"find-by-ids\": 0.07,\n    \"find-by-query\": 0.98,\n    \"find-by-query-parallel-4\": 1.54,\n    \"count\": 0.55,\n    \"property-access\": 2.57\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing PouchSyncHandler in TypeScript\nDESCRIPTION: Added TypeScript typings to access the PouchSyncHandler of RxReplicationState, improving type safety when working with replication.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/CHANGELOG.md#2025-04-17_snippet_5\n\nLANGUAGE: TypeScript\nCODE:\n```\n// Example of accessing PouchSyncHandler\n// (Actual code not provided in changelog)\n```\n\n----------------------------------------\n\nTITLE: Accessing Internal LokiJS Database in JavaScript\nDESCRIPTION: This snippet shows how to access and modify the internal LokiJS database for custom operations, with a warning about potential incompatibility with RxDB.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-lokijs.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst storageInstance = myRxCollection.storageInstance;\nconst localState = await storageInstance.internals.localState;\nlocalState.collection.insert({\n    key: 'foo',\n    value: 'bar',\n    _deleted: false,\n    _attachments: {},\n    _rev: '1-62080c42d471e3d2625e49dcca3b8e3e',\n    _meta: {\n        lwt: new Date().getTime()\n    }\n});\n\n// manually trigger the save queue because we did a write to the internal loki db. \nawait localState.databaseState.saveQueue.addWrite();\n```\n\n----------------------------------------\n\nTITLE: Updating Existing Firestore Documents for RxDB Compatibility in TypeScript\nDESCRIPTION: This snippet demonstrates how to update existing Firestore documents to make them compatible with RxDB replication. It sets the _deleted field to false and adds a serverTimestamp to all existing documents.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-firestore.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    getDocs,\n    query,\n    serverTimestamp\n} from 'firebase/firestore';\nconst allDocsResult = await getDocs(query(firestoreCollection));\nallDocsResult.forEach(doc => {\n    doc.update({\n        _deleted: false,\n        serverTimestamp: serverTimestamp()\n    })\n});\n```\n\n----------------------------------------\n\nTITLE: Angular Implementation of Dev Mode\nDESCRIPTION: Integration of dev-mode plugin in Angular applications using isDevMode().\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/dev-mode.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { isDevMode } from '@angular/core';\n\nasync function createDb() {\n    if (isDevMode()){\n        await import('rxdb/plugins/dev-mode').then(\n            module => addRxPlugin(module.RxDBDevModePlugin)\n        );\n    }\n\n    const db = createRxDatabase( /* ... */ );\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Importing RxDB Core in TypeScript\nDESCRIPTION: Demonstrates how to import RxDB core functionality in a TypeScript file. This shows the recommended way to import specific functions from the default RxDB bundle.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/install.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n  createRxDatabase,\n  /* ... */\n} from 'rxdb';\n```\n\n----------------------------------------\n\nTITLE: Markdown Changelog Entry for Version 12.7.x Series\nDESCRIPTION: Changelog entries for version 12.7.x series containing minor updates and bug fixes.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/CHANGELOG.md#2025-04-17_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n### 12.7.16 (18 July 2022)\n\n### 12.7.15 (18 July 2022)\n\n### 12.7.14 (18 July 2022)\n[...additional entries truncated for brevity...]\n```\n\n----------------------------------------\n\nTITLE: Installing and Running RxDB Svelte Demo\nDESCRIPTION: This command sequence installs dependencies, sets up the project, and starts the development server for the RxDB Svelte demo application. After running these commands, the app will be accessible at http://localhost:5000/.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/svelte/README.md#2025-04-17_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnpm run preinstall && npm i && npm run dev\n```\n\n----------------------------------------\n\nTITLE: Rendering ErrorMessages Component in JSX\nDESCRIPTION: This code renders the imported ErrorMessages component. It's used to display all RxDB error messages in the documentation interface.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/errors.md#2025-04-17_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n<ErrorMessages></ErrorMessages>\n```\n\n----------------------------------------\n\nTITLE: Installing RxDB Cleanup Plugin\nDESCRIPTION: Shows how to import and add the RxDB Cleanup Plugin to your project.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/cleanup.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { addRxPlugin } from 'rxdb';\nimport { RxDBCleanupPlugin } from 'rxdb/plugins/cleanup';\naddRxPlugin(RxDBCleanupPlugin);\n```\n\n----------------------------------------\n\nTITLE: Implementing RxDB with Alternative IndexedDB Adapter\nDESCRIPTION: This code demonstrates the use of an alternative IndexedDB adapter with native secondary indexes. While potentially offering better performance, it's not recommended due to reported issues.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/adapters.md#2025-04-17_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\n// npm install pouchdb-adapter-indexeddb --save\naddPouchPlugin(require('pouchdb-adapter-indexeddb'));\n\nconst database = await createRxDatabase({\n    name: 'mydatabase',\n    storage: getRxStoragePouch('indexeddb')\n});\n```\n\n----------------------------------------\n\nTITLE: SQLite Node Performance Benchmarks (After Optimization 2)\nDESCRIPTION: Second set of performance metrics after optimization showing consistent results. The benchmark demonstrates similar performance characteristics to the previous optimization with slight variations in timing.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/orga/performance-trackings.md#2025-04-17_snippet_13\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"description\": \"sqlite node\",\n    \"platform\": \"node\",\n    \"collectionsAmount\": 4,\n    \"docsAmount\": 3000,\n    \"time-to-first-insert\": 26.41,\n    \"insert-documents-500\": 8.4,\n    \"find-by-ids-3000\": 21.81,\n    \"serial-inserts-200\": 45.58,\n    \"serial-find-by-id-200\": 0.93,\n    \"find-by-query\": 17.91\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Memory Mapped RxStorage with IndexedDB\nDESCRIPTION: Demonstrates how to set up Memory Mapped RxStorage using IndexedDB as the persistent storage layer. Shows basic database creation with the wrapped storage.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-memory-mapped.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    getRxStorageIndexedDB\n} from 'rxdb-premium/plugins/storage-indexeddb';\nimport {\n    getMemoryMappedRxStorage\n} from 'rxdb-premium/plugins/storage-memory-mapped';\n\n/**\n * Here we use the IndexedDB RxStorage as persistence storage.\n * Any other RxStorage can also be used.\n */\nconst parentStorage = getRxStorageIndexedDB();\n\n// wrap the persistent storage with the memory-mapped storage.\nconst storage = getMemoryMappedRxStorage({\n    storage: parentStorage\n});\n\n// create the RxDatabase like you would do with any other RxStorage\nconst db = await createRxDatabase({\n    name: 'myDatabase,\n    storage,\n});\n/** ... **/\n```\n\n----------------------------------------\n\nTITLE: Observing Query Changes\nDESCRIPTION: Setting up a reactive query subscription to monitor changes in query results.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/react-native-database.md#2025-04-17_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nawait collections.humans.find({\n    selector: {\n        name: 'bar'\n    }\n}).$.subscribe(result => {/* ... */});\n```\n\n----------------------------------------\n\nTITLE: Adding Old RxDB Version to Package.json for Migration\nDESCRIPTION: This JSON snippet shows how to add the old RxDB version to the package.json file, which is necessary when migrating from a previous RxDB major version.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/migration-storage.md#2025-04-17_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"dependencies\": {\n        \"rxdb-old\": \"npm:rxdb@14.17.1\"\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Explicit Transaction Commit for IndexedDB in JavaScript\nDESCRIPTION: This snippet demonstrates how to explicitly commit an IndexedDB transaction to improve performance. It checks for the availability of the commit method before calling it, as it's not supported in all browsers.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/slow-indexeddb.md#2025-04-17_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\n// .commit() is not available on all browsers, so first check if it exists.\nif (transaction.commit) {\n    transaction.commit()\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Flutter Assets for RxDB Integration\nDESCRIPTION: This YAML snippet shows how to include the bundled JavaScript file as an asset in the Flutter project's pubspec.yaml. This is necessary for Flutter to access the RxDB JavaScript code at runtime.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/flutter/README.md#2025-04-17_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\nflutter:\n  assets:\n    - javascript/dist/index.js\n```\n\n----------------------------------------\n\nTITLE: Invalid Count Queries in RxDB (TypeScript)\nDESCRIPTION: Illustrates examples of count queries that are not allowed in RxDB due to performance considerations. These queries either use operators that cannot be efficiently indexed or require fetching full document data.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-query.md#2025-04-17_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\n/**\n * The following will throw an error because\n * the count operation cannot run on any specific index range\n * because the $regex operator is used.\n */\nconst query = myCollection.count({\n  selector: {\n    age: {\n      $regex: 'foobar'\n    }\n  }\n});\n\n/**\n * The following will throw an error because\n * the count operation cannot run on any specific index range\n * because there is no ['age' ,'otherNumber'] index\n * defined in the schema.\n */\nconst query = myCollection.count({\n  selector: {\n    age: {\n      $gt: 20\n    },\n    otherNumber: {\n      $gt: 10\n    }\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Stopping WebRTC Replication\nDESCRIPTION: Demonstrates how to stop an active WebRTC replication pool.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-webrtc.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nreplicationPool.cancel();\n```\n\n----------------------------------------\n\nTITLE: Starting Local Development Server\nDESCRIPTION: Command to start local development server that provides live preview of website changes\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/README.md#2025-04-17_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n$ yarn start\n```\n\n----------------------------------------\n\nTITLE: Installation and Setup Commands for RxDB Vite Demo\nDESCRIPTION: Terminal commands for setting up and running the RxDB Vite TypeScript demo application. Includes steps for cloning the repository, installing dependencies, and starting the development server.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/vite-vanilla-ts/README.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install\nnpm run dev\n\n# or with yarn\nyarn install\nyarn dev\n```\n\n----------------------------------------\n\nTITLE: Simplified RESYNC-only Stream Implementation in TypeScript\nDESCRIPTION: Shows a simplified implementation that maps all events to RESYNC flags, useful when the backend cannot emit detailed change information.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-http.md#2025-04-17_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Subject } from 'rxjs';\nconst myPullStream$ = new Subject();\nconst eventSource = new EventSource(\n    'http://localhost/pullStream',\n    { withCredentials: true }\n);\neventSource.onmessage = () => myPullStream$.next('RESYNC');\nconst replicationState = await replicateRxCollection({\n    pull: {\n        stream$: myPullStream$.asObservable()\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: SQLite Node Performance Benchmarks (Log 1)\nDESCRIPTION: Log output of performance metrics for SQLite operations on Node.js. Shows baseline performance for a database with 4 collections and 3000 documents, measuring various operations including insert and query times.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/orga/performance-trackings.md#2025-04-17_snippet_10\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"description\": \"sqlite node\",\n    \"platform\": \"node\",\n    \"collectionsAmount\": 4,\n    \"docsAmount\": 3000,\n    \"time-to-first-insert\": 5.4,\n    \"insert-documents-500\": 24.38,\n    \"find-by-ids-3000\": 52.5,\n    \"serial-inserts-200\": 118.8,\n    \"serial-find-by-id-200\": 4.05,\n    \"find-by-query\": 37.35\n}\n```\n\n----------------------------------------\n\nTITLE: Using AsyncStorage in React Native\nDESCRIPTION: Demonstrates how to use AsyncStorage for basic key-value storage operations with Promise-based API\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/react-native-database.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n/**\n * Because it is Promise-based,\n * you have to 'await' the call to getItem()\n */\nawait setItem('myKey', 'myValue');\nconst value = await AsyncStorage.getItem('myKey');\n```\n\n----------------------------------------\n\nTITLE: Installing RxDB via npm\nDESCRIPTION: This command installs RxDB and RxJS via npm, which are the core dependencies needed to start using RxDB in a project.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/firebase-realtime-database-alternative.md#2025-04-17_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nnpm install rxdb rxjs\n```\n\n----------------------------------------\n\nTITLE: Importing RxDB SQLite Storage Modules (Core Version)\nDESCRIPTION: Shows how to import the trial version of RxDB SQLite storage module for use in Capacitor applications when using the core version of RxDB.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/capacitor-database.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    getRxStorageSQLiteTrial,\n    getSQLiteBasicsCapacitor\n} from 'rxdb/plugins/storage-sqlite';\n```\n\n----------------------------------------\n\nTITLE: Configuring Appwrite Client for Self-Hosted\nDESCRIPTION: TypeScript code to configure Appwrite client for self-hosted deployment.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-appwrite.md#2025-04-17_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nconst client = new Client();\nclient.setEndpoint('http://localhost/v1');\nclient.setEndpointRealtime('http://localhost/v1');\nclient.setProject('YOUR_APPWRITE_PROJECT_ID');\n```\n\n----------------------------------------\n\nTITLE: Installing RxDB and CryptoJS for React Native Encryption\nDESCRIPTION: Install RxDB and the CryptoJS encryption plugin using npm. This setup is required for implementing encrypted databases in React Native applications.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/react-native-encryption.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install rxdb\nnpm install crypto-js\n```\n\n----------------------------------------\n\nTITLE: Disabling Tracking iframe for Premium Users\nDESCRIPTION: Code to disable the tracking iframe for premium RxDB users.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/dev-mode.md#2025-04-17_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nimport { setPremiumFlag } from 'rxdb-premium/plugins/shared';\nsetPremiumFlag();\n```\n\n----------------------------------------\n\nTITLE: Setup Instructions in Markdown\nDESCRIPTION: Step-by-step instructions for setting up and running the RxDB Supabase example project, including cloning the repository, installing dependencies, and starting both frontend and backend services.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/supabase/README.md#2025-04-17_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n1. Clone the whole [RxDB-repo](https://github.com/pubkey/rxdb) via `git clone https://github.com/pubkey/rxdb.git`\n2. Build the RxDB base project `cd rxdb && npm install && npm run build`\n3. Go into this folder `cd examples/supabase`\n4. Install the frontend libraries via `npm run preinstall && npm install`\n5. Start supabase `npm run supabase:start`.\n6. Run the frontend via `npm run dev`\n```\n\n----------------------------------------\n\nTITLE: Deploying Website Using SSH\nDESCRIPTION: Command to deploy the website using SSH authentication method\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/README.md#2025-04-17_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n$ USE_SSH=true yarn deploy\n```\n\n----------------------------------------\n\nTITLE: Setting up RxDB Electron Example Project\nDESCRIPTION: A series of command-line instructions to clone the RxDB repository, install dependencies, and run the Electron example project.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/electron/README.md#2025-04-17_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n1. clone the whole [RxDB-repo](https://github.com/pubkey/rxdb)\n2. go into project `cd rxdb`\n3. run `npm install`\n4. go to this folder `cd examples/electron`\n5. run `npm run preinstall && npm install --verbose` (downloading electron can take a while, so use verbose to ensure its running)\n6. run `npm start`\n```\n\n----------------------------------------\n\nTITLE: Importing RxDB and SQLite Dependencies\nDESCRIPTION: Initial setup code for importing required RxDB and SQLite dependencies for React Native implementation.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/react-native-database.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n  createRxDatabase\n} from 'rxdb';\nimport { open } from 'react-native-quick-sqlite';\n```\n\n----------------------------------------\n\nTITLE: Accessing Internal PouchDB Database\nDESCRIPTION: Shows how to access the internal PouchDB database instance for custom operations, with a warning about potential compatibility issues.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-pouchdb.md#2025-04-17_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport {\n    getPouchDBOfRxCollection\n} from 'rxdb/plugins/pouchdb';\n\nconst pouch = getPouchDBOfRxCollection(myRxCollection);\n```\n\n----------------------------------------\n\nTITLE: Importing Required Dependencies\nDESCRIPTION: TypeScript imports for RxDB and Appwrite SDK modules.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-appwrite.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    replicateAppwrite\n} from 'rxdb/plugins/replication-appwrite';\nimport {\n    createRxDatabase,\n    addRxPlugin,\n    RxCollection\n} from 'rxdb/plugins/core';\nimport {\n    getRxStorageLocalstorage\n} from 'rxdb/plugins/storage-localstorage';\n\nimport { Client } from 'appwrite';\n```\n\n----------------------------------------\n\nTITLE: Using RxStorage in Electron Renderer Process\nDESCRIPTION: This snippet shows how to use the exposed RxStorage in an Electron renderer process. It creates an RxDatabase instance using the getRxStorageIpcRenderer function to connect to the main process storage.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/electron.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n//  renderer.js\nconst { getRxStorageIpcRenderer } = require('rxdb/plugins/electron');\nconst { getRxStorageMemory } = require('rxdb/plugins/storage-memory');\n\nconst db = await createRxDatabase({\n    name,\n    storage: getRxStorageIpcRenderer({\n        key: 'main-storage',\n        ipcRenderer: electron.ipcRenderer\n    })\n});\n/* ... */\n```\n\n----------------------------------------\n\nTITLE: Using Storage Event to Observe localStorage Changes\nDESCRIPTION: Demonstrates how to use the storage event listener to observe changes made to localStorage across different tabs or windows, a feature that's unavailable in IndexedDB.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/localstorage.md#2025-04-17_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n// localStorage can observe changes with the storage event.\n// This feature is missing in IndexedDB\naddEventListener(\"storage\", (event) => {});\n```\n\n----------------------------------------\n\nTITLE: Installing RxDB Package in Angular\nDESCRIPTION: Command to install RxDB dependency in an Angular application using npm package manager.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/angular-database.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install rxdb --save\n```\n\n----------------------------------------\n\nTITLE: Secure Password Retrieval in React Native\nDESCRIPTION: Use react-native-keychain to securely retrieve a stored password for database encryption. This method ensures that passwords are not hardcoded in the application.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/react-native-encryption.md#2025-04-17_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\n// Example: using react-native-keychain to securely retrieve a stored password\nimport * as Keychain from 'react-native-keychain';\n\nasync function getDatabasePassword() {\n    const credentials = await Keychain.getGenericPassword();\n    if (credentials) {\n        return credentials.password;\n    }\n    throw new Error('No password stored in Keychain');\n}\n```\n\n----------------------------------------\n\nTITLE: Installing RxDB via npm\nDESCRIPTION: Command to install RxDB and its required dependency RxJS using npm package manager.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/firestore-alternative.md#2025-04-17_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpm install rxdb rxjs\n```\n\n----------------------------------------\n\nTITLE: Checking RxCollection Instance in JavaScript\nDESCRIPTION: Demonstrates how to verify if an object is an instance of RxCollection using the isRxCollection utility function.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-collection.md#2025-04-17_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nconst is = isRxCollection(myObj);\n```\n\n----------------------------------------\n\nTITLE: Error Handling in WebRTC Replication\nDESCRIPTION: Shows how to set up error observation for WebRTC replication events.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-webrtc.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nreplicationPool.error$.subscribe(err => console.error('WebRTC Error:', err));\n```\n\n----------------------------------------\n\nTITLE: Deploying Website Without SSH\nDESCRIPTION: Command to deploy the website using GitHub username authentication\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/README.md#2025-04-17_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\n$ GIT_USER=<Your GitHub username> yarn deploy\n```\n\n----------------------------------------\n\nTITLE: Installing and Running RxDB Node Example\nDESCRIPTION: Terminal commands for setting up and running the RxDB Node.js example project. Requires Node.js v7.10.0 or newer.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/node/README.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncd rxdb\nnpm install\ncd examples/node\nnpm install\nnpm start\n```\n\n----------------------------------------\n\nTITLE: Creating a Server-Sent Events Endpoint with Node.js and Express\nDESCRIPTION: This code snippet shows how to set up a Server-Sent Events (SSE) endpoint using Node.js and Express. It demonstrates setting the correct headers, sending events, and handling connection closure.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/websockets-sse-polling-webrtc-webtransport.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport express from 'express';\nconst app = express();\nconst PORT = process.env.PORT || 3000;\n\napp.get('/events', (req, res) => {\n    res.writeHead(200, {\n        'Content-Type': 'text/event-stream',\n        'Cache-Control': 'no-cache',\n        'Connection': 'keep-alive',\n    });\n\n    const sendEvent = (data) => {\n        // all message lines must be prefixed with 'data: '\n        const formattedData = `data: ${JSON.stringify(data)}\\n\\n`;\n        res.write(formattedData);\n    };\n\n    // Send an event every 2 seconds\n    const intervalId = setInterval(() => {\n        const message = {\n            time: new Date().toTimeString(),\n            message: 'Hello from the server!',\n        };\n        sendEvent(message);\n    }, 2000);\n\n    // Clean up when the connection is closed\n    req.on('close', () => {\n        clearInterval(intervalId);\n        res.end();\n    });\n});\napp.listen(PORT, () => console.log(`Server running on http://localhost:${PORT}`));\n```\n\n----------------------------------------\n\nTITLE: Installing Dependencies with NPM\nDESCRIPTION: Commands to install the required Appwrite SDK and RxDB packages.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-appwrite.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install appwrite rxdb\n```\n\n----------------------------------------\n\nTITLE: Importing Babel Polyfills for RxDB\nDESCRIPTION: Adds the necessary polyfills to support RxDB in older browsers. This import should be placed at the beginning of your application code to ensure compatibility across different browser environments.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/install.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport '@babel/polyfill';\n```\n\n----------------------------------------\n\nTITLE: React Native Project Setup Commands\nDESCRIPTION: Terminal commands for setting up and running the RxDB React Native example project. Includes cloning the repository, installing dependencies, and launching the application.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/react-native/README.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncd rxdb\nnpm install\ncd examples/react-native\nnpx yarn install\nnpm start\n```\n\n----------------------------------------\n\nTITLE: Updating a Todo in RxDB\nDESCRIPTION: Demonstrates how to update a todo item in the local RxDB database.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/local-first-future.md#2025-04-17_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nconst firstTodo = remaining[0];\nawait firstTodo.patch({ done: true });  // mark as done\n```\n\n----------------------------------------\n\nTITLE: Removing Event Properties for Optimization\nDESCRIPTION: This snippet shows the removal of 'RxChangeEvent.eventId', 'RxChangeEvent.startTime', and 'RxChangeEvent.endTime' properties to optimize performance by reducing calls to Date.now().\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/15.0.0.md#2025-04-17_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n- REMOVED `RxChangeEvent.eventId`. If you really need a unique ID, you can craft your own one based on the document `_rev` and `primary`.\n- REMOVED `RxChangeEvent.startTime` and `RxChangeEvent.endTime` so we do not have to call `Date.now()` once per write row.\n```\n\n----------------------------------------\n\nTITLE: Updated Query Builder Plugin Usage\nDESCRIPTION: Shows implementation of the optional query builder plugin for specialized query building needs.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/9.0.0.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { RxDBQueryBuilderPlugin } from 'rxdb/plugins/query-builder';\naddRxPlugin(RxDBQueryBuilderPlugin);\n```\n\n----------------------------------------\n\nTITLE: Adding and Running iOS Platform\nDESCRIPTION: Commands to add iOS platform support to the Ionic project and run it on an iOS device or simulator. Can be substituted with android for Android development.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/ionic2/README.md#2025-04-17_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n$ ionic cordova platform add ios\n$ ionic cordova run ios\n```\n\n----------------------------------------\n\nTITLE: Installing RxDB Dependencies\nDESCRIPTION: Command to install RxDB and its required RxJS dependency via npm package manager.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/README.md#2025-04-17_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\nnpm install rxdb rxjs --save\n```\n\n----------------------------------------\n\nTITLE: Configuring docusaurus-lunr-search plugin in Docusaurus\nDESCRIPTION: JavaScript code snippet to add the docusaurus-lunr-search plugin to the Docusaurus configuration file.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docusaurus-lunr-search-main/README.md#2025-04-17_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nmodule.exports = {\n  // ...\n    plugins: [require.resolve('docusaurus-lunr-search')],\n}\n```\n\n----------------------------------------\n\nTITLE: Contributing to RxDB Project Guide\nDESCRIPTION: Lists various ways contributors can help improve RxDB, including checking backlogs, reviewing code, adding tests, and updating example projects.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/14.0.0.md#2025-04-17_snippet_5\n\nLANGUAGE: markdown\nCODE:\n```\n## You can help!\\n\\nThere are many things that can be done by **you** to improve RxDB:\\n\\n- Check the [BACKLOG](https://github.com/pubkey/rxdb/blob/master/orga/BACKLOG.md) for features that would be great to have.\\n- Check the [breaking backlog](https://github.com/pubkey/rxdb/blob/master/orga/before-next-major.md) for breaking changes that must be implemented in the future but where I did not have the time yet.\\n- Check the [TODOs](https://github.com/pubkey/rxdb/search?q=TODO) in the code. There are many small improvements that can be done for performance and build size.\\n- Review the code and add tests. I am only a single human with a laptop. My code is not perfect and much small improvements can be done when people review the code and help me to clarify undefined behaviors.\\n- Update the [example projects](https://github.com/pubkey/rxdb/tree/master/examples) many of them are outdated and need updates.\n```\n\n----------------------------------------\n\nTITLE: Implementing Server-Sent Events in JavaScript\nDESCRIPTION: This snippet demonstrates how to use Server-Sent Events (SSE) in JavaScript. It shows how to create an EventSource and handle incoming messages from the server.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/websockets-sse-polling-webrtc-webtransport.md#2025-04-17_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n// Connecting to the server-side event stream\nconst evtSource = new EventSource(\"https://example.com/events\");\n\n// Handling generic message events\nevtSource.onmessage = event => {\n    console.log('got message: ' + event.data);\n};\n```\n\n----------------------------------------\n\nTITLE: Running RxDB React Example in Terminal\nDESCRIPTION: A series of command-line instructions to clone the RxDB repository, install dependencies, and start the React application. These steps allow users to set up and run the example project locally.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/react/README.md#2025-04-17_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n1. clone the whole [RxDB-repo](https://github.com/pubkey/rxdb)\n2. go into project `cd rxdb`\n3. run `npm install`\n4. go to this folder `cd examples/react`\n5. run `npm run preinstall && npm install`\n6. run `npm start`\n7. Open [http://127.0.0.1:8888/](http://127.0.0.1:8888/) **IMPORTANT: do not use localhost**\n```\n\n----------------------------------------\n\nTITLE: Importing and Rendering Overview Component in JSX\nDESCRIPTION: This code snippet imports the Overview component from a specific path and renders it within the JSX structure. It's likely used to display a comprehensive overview of the RxDB documentation.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/overview.md#2025-04-17_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { Overview } from '@site/src/components/overview';\n\n# RxDB Documentation\n\n<Overview />\n```\n\n----------------------------------------\n\nTITLE: Creating RxDB Database with SQLite Storage (Core Version)\nDESCRIPTION: Demonstrates how to create an RxDB database using the trial version of SQLite storage in a Capacitor application, configuring the storage with Capacitor-specific SQLite basics.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/capacitor-database.md#2025-04-17_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\n// create database\nconst myRxDatabase = await createRxDatabase({\n    name: 'exampledb',\n    storage: getRxStorageSQLiteTrial({\n        sqliteBasics: getSQLiteBasicsCapacitor(sqlite, Capacitor)\n    })\n});\n```\n\n----------------------------------------\n\nTITLE: SQLite Node Performance Benchmarks (With Unique)\nDESCRIPTION: Performance metrics for SQLite operations on Node.js platform with unique constraints applied. Demonstrates how unique constraints affect various database operations including insertion, querying, and property access.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/orga/performance-trackings.md#2025-04-17_snippet_9\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"description\": \"sqlite node\",\n    \"platform\": \"node\",\n    \"collectionsAmount\": 4,\n    \"docsAmount\": 3000,\n    \"time-to-first-insert\": 26.68,\n    \"insert-documents-500\": 8.06,\n    \"find-by-ids-3000\": 19.67,\n    \"serial-inserts-200\": 46.61,\n    \"serial-find-by-id-200\": 0.94,\n    \"find-by-query\": 16.96,\n    \"find-by-query-parallel-4\": 13.08,\n    \"4x-count\": 1.54,\n    \"property-access\": 3.81\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Flutter Library Headers in CMake\nDESCRIPTION: Defines a list of Flutter library headers and prepends the ephemeral directory path to each header file.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/flutter/linux/flutter/CMakeLists.txt#2025-04-17_snippet_3\n\nLANGUAGE: CMake\nCODE:\n```\nlist(APPEND FLUTTER_LIBRARY_HEADERS\n  \"fl_basic_message_channel.h\"\n  \"fl_binary_codec.h\"\n  \"fl_binary_messenger.h\"\n  \"fl_dart_project.h\"\n  \"fl_engine.h\"\n  \"fl_json_message_codec.h\"\n  \"fl_json_method_codec.h\"\n  \"fl_message_codec.h\"\n  \"fl_method_call.h\"\n  \"fl_method_channel.h\"\n  \"fl_method_codec.h\"\n  \"fl_method_response.h\"\n  \"fl_plugin_registrar.h\"\n  \"fl_plugin_registry.h\"\n  \"fl_standard_message_codec.h\"\n  \"fl_standard_method_codec.h\"\n  \"fl_string_codec.h\"\n  \"fl_value.h\"\n  \"fl_view.h\"\n  \"flutter_linux.h\"\n)\nlist_prepend(FLUTTER_LIBRARY_HEADERS \"${EPHEMERAL_DIR}/flutter_linux/\")\n```\n\n----------------------------------------\n\nTITLE: Retrieving Attachment Data as String\nDESCRIPTION: Shows how to get the data of an attachment as a string.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-attachment.md#2025-04-17_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nconst attachment = await myDocument.getAttachment('cat.jpg');\nconst data = await attachment.getStringData();\n```\n\n----------------------------------------\n\nTITLE: Using WebSQL Adapter with RxDB in JavaScript\nDESCRIPTION: This snippet shows how to use the WebSQL adapter with RxDB. However, it's not recommended as WebSQL is deprecated, and should only be used if there's a specific requirement.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/adapters.md#2025-04-17_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\n// npm install pouchdb-adapter-websql --save\naddPouchPlugin(require('pouchdb-adapter-websql'));\n\nconst database = await createRxDatabase({\n    name: 'mydatabase',\n    storage: getRxStoragePouch('websql')\n});\n```\n\n----------------------------------------\n\nTITLE: Installing RxDB Dependencies\nDESCRIPTION: Command to install RxDB and RxJS via npm package manager\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/jquery-database.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install rxdb rxjs\n```\n\n----------------------------------------\n\nTITLE: Setting Up Flutter and GTK Dependencies\nDESCRIPTION: Adds the Flutter managed directory, finds system-level dependencies like GTK, and defines the application target with necessary source files.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/flutter/linux/CMakeLists.txt#2025-04-17_snippet_3\n\nLANGUAGE: CMake\nCODE:\n```\nset(FLUTTER_MANAGED_DIR \"${CMAKE_CURRENT_SOURCE_DIR}/flutter\")\nadd_subdirectory(${FLUTTER_MANAGED_DIR})\n\nfind_package(PkgConfig REQUIRED)\npkg_check_modules(GTK REQUIRED IMPORTED_TARGET gtk+-3.0)\n\nadd_definitions(-DAPPLICATION_ID=\"${APPLICATION_ID}\")\n\nadd_executable(${BINARY_NAME}\n  \"main.cc\"\n  \"my_application.cc\"\n  \"${FLUTTER_MANAGED_DIR}/generated_plugin_registrant.cc\"\n)\n\napply_standard_settings(${BINARY_NAME})\n\ntarget_link_libraries(${BINARY_NAME} PRIVATE flutter)\ntarget_link_libraries(${BINARY_NAME} PRIVATE PkgConfig::GTK)\n```\n\n----------------------------------------\n\nTITLE: Configuring docusaurus-lunr-search plugin with options\nDESCRIPTION: JavaScript code snippet demonstrating how to configure the docusaurus-lunr-search plugin with additional options, such as specifying languages for stemming.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docusaurus-lunr-search-main/README.md#2025-04-17_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nmodule.exports = {\n  // ...\n    plugins: [[ require.resolve('docusaurus-lunr-search'), {\n      languages: ['en', 'de'] // language codes\n    }]],\n}\n```\n\n----------------------------------------\n\nTITLE: Event Reduce Performance Comparison\nDESCRIPTION: Benchmark results comparing database operations before and after event-reduce-js optimization, showing metrics for database spawning, document operations, and migrations\nSOURCE: https://github.com/pubkey/rxdb/blob/master/orga/performance-trackings.md#2025-04-17_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"spawnDatabases\": {\n    \"amount\": 1000,\n    \"collections\": 5,\n    \"total\": 10472.781867,\n    \"perInstance\": 10.472781867\n  },\n  \"insertDocuments\": {\n    \"blocks\": 2000,\n    \"blockSize\": 5,\n    \"total\": 7473.578767,\n    \"perBlock\": 3.7367893835\n  },\n  \"findDocuments\": {\n    \"amount\": 10000,\n    \"total\": 1501.103103,\n    \"perDocument\": 0.1501103103\n  },\n  \"migrateDocuments\": {\n    \"amount\": 1000,\n    \"total\": 3294.598218\n  },\n  \"writeWhileSubscribe\": {\n    \"amount\": 1000,\n    \"total\": 10447.864809\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Customizing EventSource Implementation in RxDB Server Replication\nDESCRIPTION: This snippet illustrates how to set a custom EventSource implementation when creating the replication, useful when the default eventsource package doesn't meet specific requirements.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-server.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nconst replicationState = await replicateServer({\n    /* ... */\n    eventSource: MyEventSourceConstructor\n    /* ... */\n});\n```\n\n----------------------------------------\n\nTITLE: Building Static Website Content\nDESCRIPTION: Command to generate static website content in the build directory for deployment\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/README.md#2025-04-17_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n$ yarn build\n```\n\n----------------------------------------\n\nTITLE: Disabling Multi-Instance Support in RxDB Database Creation\nDESCRIPTION: Creates an RxDB database instance with multi-instance support disabled to prevent cross-tab event propagation for debugging purposes.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/orga/bug-checklist.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst db = await createRxDatabase({\n    name,\n    multiInstance: false,\n});\n```\n\n----------------------------------------\n\nTITLE: Setting Up Flutter Library Dependencies in CMake\nDESCRIPTION: Configures system-level dependencies for the Flutter library using pkg-config, including GTK, GLIB, and GIO.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/flutter/linux/flutter/CMakeLists.txt#2025-04-17_snippet_2\n\nLANGUAGE: CMake\nCODE:\n```\nfind_package(PkgConfig REQUIRED)\npkg_check_modules(GTK REQUIRED IMPORTED_TARGET gtk+-3.0)\npkg_check_modules(GLIB REQUIRED IMPORTED_TARGET glib-2.0)\npkg_check_modules(GIO REQUIRED IMPORTED_TARGET gio-2.0)\n\nset(FLUTTER_LIBRARY \"${EPHEMERAL_DIR}/libflutter_linux_gtk.so\")\n\n# Published to parent scope for install step.\nset(FLUTTER_LIBRARY ${FLUTTER_LIBRARY} PARENT_SCOPE)\nset(FLUTTER_ICU_DATA_FILE \"${EPHEMERAL_DIR}/icudtl.dat\" PARENT_SCOPE)\nset(PROJECT_BUILD_DIR \"${PROJECT_DIR}/build/\" PARENT_SCOPE)\nset(AOT_LIBRARY \"${PROJECT_DIR}/build/lib/libapp.so\" PARENT_SCOPE)\n```\n\n----------------------------------------\n\nTITLE: Adding Event Properties for Bulk Operations\nDESCRIPTION: This snippet demonstrates the addition of 'EventBulk.startTime' and 'EventBulk.endTime' properties, likely for performance tracking of bulk operations.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/15.0.0.md#2025-04-17_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\n- ADDED `EventBulk.startTime` and `EventBulk.endTime`.\n```\n\n----------------------------------------\n\nTITLE: Document Storage Interface Path Reference\nDESCRIPTION: Example of array field based index path notation that was removed from RxDB due to functionality issues.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/12.0.0.md#2025-04-17_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\ndata.[].subfield\n```\n\n----------------------------------------\n\nTITLE: Patching Angular Zone.js for RxDB\nDESCRIPTION: Import statement to patch zone.js for proper RxDB change detection in Angular applications.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/angular-database.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport 'zone.js/plugins/zone-patch-rxjs';\n```\n\n----------------------------------------\n\nTITLE: Installing lunr package manually\nDESCRIPTION: Command to manually install the lunr package if npm fails to install it during the plugin installation.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docusaurus-lunr-search-main/README.md#2025-04-17_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nnpm i lunr --save\n```\n\n----------------------------------------\n\nTITLE: Configuring Flutter Wrapper Sources\nDESCRIPTION: Defines and configures the C++ wrapper source files for core functionality, plugins, and application components.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/flutter/windows/flutter/CMakeLists.txt#2025-04-17_snippet_1\n\nLANGUAGE: cmake\nCODE:\n```\nlist(APPEND CPP_WRAPPER_SOURCES_CORE\n  \"core_implementations.cc\"\n  \"standard_codec.cc\"\n)\nlist(TRANSFORM CPP_WRAPPER_SOURCES_CORE PREPEND \"${WRAPPER_ROOT}/\")\nlist(APPEND CPP_WRAPPER_SOURCES_PLUGIN\n  \"plugin_registrar.cc\"\n)\nlist(TRANSFORM CPP_WRAPPER_SOURCES_PLUGIN PREPEND \"${WRAPPER_ROOT}/\")\nlist(APPEND CPP_WRAPPER_SOURCES_APP\n  \"flutter_engine.cc\"\n  \"flutter_view_controller.cc\"\n)\nlist(TRANSFORM CPP_WRAPPER_SOURCES_APP PREPEND \"${WRAPPER_ROOT}/\")\n```\n\n----------------------------------------\n\nTITLE: SQLite Node Performance Benchmarks (After Optimization 1)\nDESCRIPTION: Performance metrics after optimization showing improved times. This benchmark captures the results of database operations across 4 collections with 3000 documents, with faster serial operations.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/orga/performance-trackings.md#2025-04-17_snippet_12\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"description\": \"sqlite node\",\n    \"platform\": \"node\",\n    \"collectionsAmount\": 4,\n    \"docsAmount\": 3000,\n    \"time-to-first-insert\": 27.75,\n    \"insert-documents-500\": 7.98,\n    \"find-by-ids-3000\": 19.21,\n    \"serial-inserts-200\": 49.06,\n    \"serial-find-by-id-200\": 1.02,\n    \"find-by-query\": 16.66\n}\n```\n\n----------------------------------------\n\nTITLE: Using Chrome Storage API in Browser Extensions\nDESCRIPTION: Demonstrates how to use Chrome's storage API for browser extensions to store and retrieve JSON-ifiable objects asynchronously. This API is preferred over localStorage for extension development as it provides better persistence and cross-browser synchronization.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/localstorage.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\n// Using the storage API in chrome\n\nawait chrome.storage.local.set({ foobar: {nr: 1} });\n\nconst result = await chrome.storage.local.get('foobar');\nconsole.log(result.foobar); // {nr: 1}\n```\n\n----------------------------------------\n\nTITLE: Git-like Replication State Diagram\nDESCRIPTION: Demonstrates the git-like replication model where the client state acts as a fork that must be merged with the server state before pushing changes. Shows how states diverge and converge during replication.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/13.0.0.md#2025-04-17_snippet_0\n\nLANGUAGE: text\nCODE:\n```\nA---B1---C1---X    master/server state\n     \\       /\n      B1---C2      fork/client state\n```\n\n----------------------------------------\n\nTITLE: Initializing RxDB and Setting Up Custom Replication\nDESCRIPTION: This snippet demonstrates how to create an RxDB database, add a collection, and set up custom replication with a backend API. It includes pull and push handlers for syncing data.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/firebase-realtime-database-alternative.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb/plugins/core';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\nimport { replicateRxCollection } from 'rxdb/plugins/replication';\n\nasync function initDB() {\n  const db = await createRxDatabase({\n    name: 'localdb',\n    storage: getRxStorageLocalstorage(),\n    multiInstance: true,\n    eventReduce: true\n  });\n\n  await db.addCollections({\n    tasks: {\n      schema: {\n        title: 'task schema',\n        version: 0,\n        type: 'object',\n        primaryKey: 'id',\n        properties: {\n          id: { type: 'string', maxLength: 100 },\n          title: { type: 'string' },\n          complete: { type: 'boolean' }\n        }\n      }\n    }\n  });\n\n  // Start a custom replication\n  replicateRxCollection({\n    collection: db.tasks,\n    replicationIdentifier: 'custom-tasks-api',\n    push: {\n      handler: async (docs) => {\n        // post local changes to your server\n        const resp = await fetch('https://yourapi.com/tasks/push', {\n          method: 'POST',\n          body: JSON.stringify({ changes: docs })\n        });\n        return await resp.json(); // return conflicting documents if any\n      }\n    },\n    pull: {\n      handler: async (lastCheckpoint, batchSize) => {\n        // fetch new/updated items from your server\n        const response = await fetch(\n          `https://yourapi.com/tasks/pull?checkpoint=${JSON.stringify(\n            lastCheckpoint\n          )}&limit=${batchSize}`\n        );\n        return await response.json();\n      }\n    },\n    live: true\n  });\n\n  return db;\n}\n```\n\n----------------------------------------\n\nTITLE: TypeScript Signal Typing Example in RxDB\nDESCRIPTION: Example showing current typing limitations for custom reactivity adapters in RxDB where signal types default to 'any' instead of proper document types.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/orga/premium-tasks.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst signal = myRxDocument.get$$('foobar'); // <- This has the type Signal<any> but should have Signal<MyDocumentType>\nconst signal = collection.find().$$; // <- This has the type Signal<any[]> but should have Signal<MyDocumentType[]>\n```\n\n----------------------------------------\n\nTITLE: Initializing SharedWorker Process with RxStorage\nDESCRIPTION: Setup code for the SharedWorker process that wraps the original RxStorage with IndexedDB implementation.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-shared-worker.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// shared-worker.ts\n\nimport { exposeWorkerRxStorage } from 'rxdb-premium/plugins/storage-worker';\nimport { \n    getRxStorageIndexedDB\n} from 'rxdb-premium/plugins/indexeddb';\n\nexposeWorkerRxStorage({\n    /**\n     * You can wrap any implementation of the RxStorage interface\n     * into a worker.\n     * Here we use the IndexedDB RxStorage.\n     */\n    storage: getRxStorageIndexedDB()\n});\n```\n\n----------------------------------------\n\nTITLE: Installing and Running RxDB Tauri Example\nDESCRIPTION: Step-by-step commands to set up and run the RxDB Tauri example application. Includes cloning the repository, installing dependencies, and launching the development server.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/tauri/README.md#2025-04-17_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\ncd rxdb\nnpm install\ncd examples/tauri\nnpm run preinstall && npm install -D\nnpm run tauri dev\n```\n\n----------------------------------------\n\nTITLE: Defining Build Configuration and Compilation Settings\nDESCRIPTION: Sets the default build type to Debug and defines a function to apply standard compilation settings to targets.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/flutter/linux/CMakeLists.txt#2025-04-17_snippet_2\n\nLANGUAGE: CMake\nCODE:\n```\nif(NOT CMAKE_BUILD_TYPE AND NOT CMAKE_CONFIGURATION_TYPES)\n  set(CMAKE_BUILD_TYPE \"Debug\" CACHE\n    STRING \"Flutter build mode\" FORCE)\n  set_property(CACHE CMAKE_BUILD_TYPE PROPERTY STRINGS\n    \"Debug\" \"Profile\" \"Release\")\nendif()\n\nfunction(APPLY_STANDARD_SETTINGS TARGET)\n  target_compile_features(${TARGET} PUBLIC cxx_std_14)\n  target_compile_options(${TARGET} PRIVATE -Wall -Werror)\n  target_compile_options(${TARGET} PRIVATE \"$<$<NOT:$<CONFIG:Debug>>:-O3>\")\n  target_compile_definitions(${TARGET} PRIVATE \"$<$<NOT:$<CONFIG:Debug>>:NDEBUG>\")\nendfunction()\n```\n\n----------------------------------------\n\nTITLE: Querying Related Data in SQL\nDESCRIPTION: This SQL query joins the city and customer tables to find all customers in Tokyo. It demonstrates a typical relational query that NoSQL databases need to handle differently.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/why-nosql.md#2025-04-17_snippet_1\n\nLANGUAGE: sql\nCODE:\n```\nSELECT *\nFROM city\nWHERE city.name = 'Tokyo'\nLEFT JOIN customer ON customer.city_id = city.id;\n```\n\n----------------------------------------\n\nTITLE: Configuring Profile Build Mode Settings in CMake\nDESCRIPTION: Defines settings for the Profile build mode, including linker flags and compiler flags. It also adds definitions for Unicode support.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/flutter/windows/CMakeLists.txt#2025-04-17_snippet_1\n\nLANGUAGE: CMake\nCODE:\n```\nset(CMAKE_EXE_LINKER_FLAGS_PROFILE \"${CMAKE_EXE_LINKER_FLAGS_RELEASE}\")\nset(CMAKE_SHARED_LINKER_FLAGS_PROFILE \"${CMAKE_SHARED_LINKER_FLAGS_RELEASE}\")\nset(CMAKE_C_FLAGS_PROFILE \"${CMAKE_C_FLAGS_RELEASE}\")\nset(CMAKE_CXX_FLAGS_PROFILE \"${CMAKE_CXX_FLAGS_RELEASE}\")\n\nadd_definitions(-DUNICODE -D_UNICODE)\n```\n\n----------------------------------------\n\nTITLE: Querying with OR condition in AWS Datastore\nDESCRIPTION: Demonstrates how to perform an OR query in AWS Datastore. This example queries for Post objects where either the rating is greater than 4 OR the status equals PUBLISHED.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/alternatives.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// An AWS datastore OR query\nconst posts = await DataStore.query(Post, c => c.or(\n  c => c.rating(\"gt\", 4).status(\"eq\", PostStatus.PUBLISHED)\n));\n```\n\n----------------------------------------\n\nTITLE: RxDB Documentation Links in Markdown\nDESCRIPTION: Links to key RxDB documentation and resource files in the project repository, including the backlog, breaking changes, and example projects.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/10.0.0.md#2025-04-17_snippet_5\n\nLANGUAGE: markdown\nCODE:\n```\n[BACKLOG](https://github.com/pubkey/rxdb/blob/master/orga/BACKLOG.md)\n[breaking backlog](https://github.com/pubkey/rxdb/blob/master/orga/before-next-major.md)\n[TODOs](https://github.com/pubkey/rxdb/search?q=TODO)\n[example projects](https://github.com/pubkey/rxdb/tree/master/examples)\n[discuss here](https://github.com/pubkey/rxdb/issues/3279)\n```\n\n----------------------------------------\n\nTITLE: Configuring Flutter Tool Backend\nDESCRIPTION: Sets up the Flutter tool backend command and assembly target for building the Windows application components.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/flutter/windows/flutter/CMakeLists.txt#2025-04-17_snippet_3\n\nLANGUAGE: cmake\nCODE:\n```\nset(PHONY_OUTPUT \"${CMAKE_CURRENT_BINARY_DIR}/_phony_\")\nset_source_files_properties(\"${PHONY_OUTPUT}\" PROPERTIES SYMBOLIC TRUE)\nadd_custom_command(\n  OUTPUT ${FLUTTER_LIBRARY} ${FLUTTER_LIBRARY_HEADERS}\n    ${CPP_WRAPPER_SOURCES_CORE} ${CPP_WRAPPER_SOURCES_PLUGIN}\n    ${CPP_WRAPPER_SOURCES_APP}\n    ${PHONY_OUTPUT}\n  COMMAND ${CMAKE_COMMAND} -E env\n    ${FLUTTER_TOOL_ENVIRONMENT}\n    \"${FLUTTER_ROOT}/packages/flutter_tools/bin/tool_backend.bat\"\n      windows-x64 $<CONFIG>\n  VERBATIM\n)\nadd_custom_target(flutter_assemble DEPENDS\n  \"${FLUTTER_LIBRARY}\"\n  ${FLUTTER_LIBRARY_HEADERS}\n  ${CPP_WRAPPER_SOURCES_CORE}\n  ${CPP_WRAPPER_SOURCES_PLUGIN}\n  ${CPP_WRAPPER_SOURCES_APP}\n)\n```\n\n----------------------------------------\n\nTITLE: Latest Optimized Performance Metrics\nDESCRIPTION: Final performance measurements after various optimizations including improved array handling and reduced deep cloning.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/orga/performance-trackings.md#2025-04-17_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"spawnDatabases\": {\n    \"amount\": 1000,\n    \"collections\": 5,\n    \"total\": 9483.45607,\n    \"perInstance\": 9.48345607\n  },\n  \"insertDocuments\": {\n    \"blocks\": 2000,\n    \"blockSize\": 5,\n    \"total\": 5400.620172,\n    \"perBlock\": 2.700310086\n  },\n  \"findDocuments\": {\n    \"amount\": 10000,\n    \"total\": 1386.384774,\n    \"perDocument\": 0.13863847740000002\n  },\n  \"migrateDocuments\": {\n    \"amount\": 1000,\n    \"total\": 3769.25471\n  },\n  \"writeWhileSubscribe\": {\n    \"amount\": 1000,\n    \"total\": 12508.054624\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Custom Reactivity Objects in RxDB\nDESCRIPTION: This snippet illustrates how to access custom reactivity objects (like signals) from various RxDB instances such as RxDocument, RxQuery, and RxLocalDocument. It uses the double-dollar sign '$$' notation to distinguish custom reactivity objects.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/reactivity.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\n// RxDocument\nconst signal = myRxDocument.get$$('foobar'); // get signal that represents the document field 'foobar'\nconst signal = myRxDocument.foobar$$; // same as above\nconst signal = myRxDocument.$$; // get signal that represents whole document over time\nconst signal = myRxDocument.deleted$$; // get signal that represents the deleted state of the document\n\n// RxQuery\nconst signal = collection.find().$$; // get signal that represents the query result set over time\nconst signal = collection.findOne().$$; // get signal that represents the query result set over time\n\n// RxLocalDocument\nconst signal = myRxLocalDocument.$$; // get signal that represents the whole local document state\nconst signal = myRxLocalDocument.get$$('foobar'); // get signal that represents the foobar field\n```\n\n----------------------------------------\n\nTITLE: Configuring Robot Access for All User Agents in robots.txt\nDESCRIPTION: This snippet defines the robot access rules for the website. It allows all user agents to access all parts of the site without any restrictions.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/vue/public/robots.txt#2025-04-17_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nUser-agent: *\nDisallow:\n```\n\n----------------------------------------\n\nTITLE: Disabling Premium Console Log for Dexie RxStorage\nDESCRIPTION: This code snippet shows how to disable the non-premium console log when using Dexie.js RxStorage with premium access.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-dexie.md#2025-04-17_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nimport { setPremiumFlag } from 'rxdb-premium/plugins/shared';\nsetPremiumFlag();\n```\n\n----------------------------------------\n\nTITLE: Configuring CMake Policies and Installation Settings\nDESCRIPTION: Sets CMake policies, defines installation paths, and configures cross-building settings if a sysroot is specified.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/flutter/linux/CMakeLists.txt#2025-04-17_snippet_1\n\nLANGUAGE: CMake\nCODE:\n```\ncmake_policy(SET CMP0063 NEW)\n\nset(CMAKE_INSTALL_RPATH \"$ORIGIN/lib\")\n\nif(FLUTTER_TARGET_PLATFORM_SYSROOT)\n  set(CMAKE_SYSROOT ${FLUTTER_TARGET_PLATFORM_SYSROOT})\n  set(CMAKE_FIND_ROOT_PATH ${CMAKE_SYSROOT})\n  set(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER)\n  set(CMAKE_FIND_ROOT_PATH_MODE_PACKAGE ONLY)\n  set(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY)\n  set(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY)\nendif()\n```\n\n----------------------------------------\n\nTITLE: RxDB Premium Storage Configuration\nDESCRIPTION: Import statement for premium version of SQLite storage plugin with enhanced features.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/react-native-database.md#2025-04-17_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    getRxStorageSQLite,\n    getSQLiteBasicsCapacitor\n} from 'rxdb-premium/plugins/storage-sqlite';\n```\n\n----------------------------------------\n\nTITLE: Configuring Flutter Tool Backend in CMake\nDESCRIPTION: Sets up a custom command to run the Flutter tool backend script, ensuring it runs every build to generate necessary files.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/flutter/linux/flutter/CMakeLists.txt#2025-04-17_snippet_5\n\nLANGUAGE: CMake\nCODE:\n```\nadd_custom_command(\n  OUTPUT ${FLUTTER_LIBRARY} ${FLUTTER_LIBRARY_HEADERS}\n    ${CMAKE_CURRENT_BINARY_DIR}/_phony_\n  COMMAND ${CMAKE_COMMAND} -E env\n    ${FLUTTER_TOOL_ENVIRONMENT}\n    \"${FLUTTER_ROOT}/packages/flutter_tools/bin/tool_backend.sh\"\n      ${FLUTTER_TARGET_PLATFORM} ${CMAKE_BUILD_TYPE}\n  VERBATIM\n)\nadd_custom_target(flutter_assemble DEPENDS\n  \"${FLUTTER_LIBRARY}\"\n  ${FLUTTER_LIBRARY_HEADERS}\n)\n```\n\n----------------------------------------\n\nTITLE: Installing RxDB and RxJS via npm\nDESCRIPTION: Command to install RxDB and RxJS dependencies for a Vue project using npm.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/vue-indexeddb.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install rxdb rxjs --save\n```\n\n----------------------------------------\n\nTITLE: Configuring Installation and Bundle Creation\nDESCRIPTION: Sets up the installation process, including bundle directory creation, file copying, and asset management for the Flutter application.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/flutter/linux/CMakeLists.txt#2025-04-17_snippet_4\n\nLANGUAGE: CMake\nCODE:\n```\nset(BUILD_BUNDLE_DIR \"${PROJECT_BINARY_DIR}/bundle\")\nif(CMAKE_INSTALL_PREFIX_INITIALIZED_TO_DEFAULT)\n  set(CMAKE_INSTALL_PREFIX \"${BUILD_BUNDLE_DIR}\" CACHE PATH \"...\" FORCE)\nendif()\n\ninstall(CODE \"\n  file(REMOVE_RECURSE \\\"${BUILD_BUNDLE_DIR}/\\\")\n  \" COMPONENT Runtime)\n\nset(INSTALL_BUNDLE_DATA_DIR \"${CMAKE_INSTALL_PREFIX}/data\")\nset(INSTALL_BUNDLE_LIB_DIR \"${CMAKE_INSTALL_PREFIX}/lib\")\n\ninstall(TARGETS ${BINARY_NAME} RUNTIME DESTINATION \"${CMAKE_INSTALL_PREFIX}\"\n  COMPONENT Runtime)\n\ninstall(FILES \"${FLUTTER_ICU_DATA_FILE}\" DESTINATION \"${INSTALL_BUNDLE_DATA_DIR}\"\n  COMPONENT Runtime)\n\ninstall(FILES \"${FLUTTER_LIBRARY}\" DESTINATION \"${INSTALL_BUNDLE_LIB_DIR}\"\n  COMPONENT Runtime)\n\nforeach(bundled_library ${PLUGIN_BUNDLED_LIBRARIES})\n  install(FILES \"${bundled_library}\"\n    DESTINATION \"${INSTALL_BUNDLE_LIB_DIR}\"\n    COMPONENT Runtime)\nendforeach(bundled_library)\n\nset(FLUTTER_ASSET_DIR_NAME \"flutter_assets\")\ninstall(CODE \"\n  file(REMOVE_RECURSE \\\"${INSTALL_BUNDLE_DATA_DIR}/${FLUTTER_ASSET_DIR_NAME}\\\")\n  \" COMPONENT Runtime)\ninstall(DIRECTORY \"${PROJECT_BUILD_DIR}/${FLUTTER_ASSET_DIR_NAME}\"\n  DESTINATION \"${INSTALL_BUNDLE_DATA_DIR}\" COMPONENT Runtime)\n\nif(NOT CMAKE_BUILD_TYPE MATCHES \"Debug\")\n  install(FILES \"${AOT_LIBRARY}\" DESTINATION \"${INSTALL_BUNDLE_LIB_DIR}\"\n    COMPONENT Runtime)\nendif()\n```\n\n----------------------------------------\n\nTITLE: Initializing CMake Project for Flutter Application\nDESCRIPTION: Sets up the CMake project with minimum version requirement and project name. It also defines the binary name and sets up build configuration options.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/flutter/windows/CMakeLists.txt#2025-04-17_snippet_0\n\nLANGUAGE: CMake\nCODE:\n```\ncmake_minimum_required(VERSION 3.14)\nproject(my_app LANGUAGES CXX)\n\nset(BINARY_NAME \"my_app\")\n\ncmake_policy(SET CMP0063 NEW)\n\nget_property(IS_MULTICONFIG GLOBAL PROPERTY GENERATOR_IS_MULTI_CONFIG)\nif(IS_MULTICONFIG)\n  set(CMAKE_CONFIGURATION_TYPES \"Debug;Profile;Release\"\n    CACHE STRING \"\" FORCE)\nelse()\n  if(NOT CMAKE_BUILD_TYPE AND NOT CMAKE_CONFIGURATION_TYPES)\n    set(CMAKE_BUILD_TYPE \"Debug\" CACHE\n      STRING \"Flutter build mode\" FORCE)\n    set_property(CACHE CMAKE_BUILD_TYPE PROPERTY STRINGS\n      \"Debug\" \"Profile\" \"Release\")\n  endif()\nendif()\n```\n\n----------------------------------------\n\nTITLE: Initial Performance Metrics Pre-7.7.0\nDESCRIPTION: Baseline performance measurements before version 7.7.0 showing database spawning, document insertion and query speeds.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/orga/performance-trackings.md#2025-04-17_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"spawnDatabases\": {\n    \"amount\": 1000,\n    \"collections\": 5,\n    \"total\": 11338.681851,\n    \"perInstance\": 11.338681850999999\n  },\n  \"insertDocuments\": {\n    \"blocks\": 2000,\n    \"blockSize\": 5,\n    \"total\": 10253.78213,\n    \"perBlock\": 5.126891065\n  },\n  \"findDocuments\": {\n    \"amount\": 10000,\n    \"total\": 4717.342368,\n    \"perDocument\": 0.4717342368\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Disabling Version Check for RxDB Premium Migration\nDESCRIPTION: This snippet shows how to disable the version check in RxDB Premium, which is necessary when using multiple RxDB versions during migration to prevent 'Version mismatch detected' errors.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/migration-storage.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\n// RxDB Premium v15 or newer:\nimport {\n    disableVersionCheck\n} from 'rxdb-premium-old/plugins/shared';\ndisableVersionCheck();\n\n\n// RxDB Premium v14:\n\n// for esm\nimport {\n    disableVersionCheck\n} from 'rxdb-premium-old/dist/es/shared/version-check.js';\ndisableVersionCheck();\n\n// for cjs\nimport {\n    disableVersionCheck\n} from 'rxdb-premium-old/dist/lib/shared/version-check.js';\ndisableVersionCheck();\n```\n\n----------------------------------------\n\nTITLE: Sorting data with AWS Datastore\nDESCRIPTION: Example of how to implement sorting in AWS Datastore queries. This snippet demonstrates sorting Posts by rating in ascending order and by title in descending order.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/alternatives.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n// An AWS datastore SORT query\nconst posts = await DataStore.query(Post, Predicates.ALL, {\n  sort: s => s.rating(SortDirection.ASCENDING).title(SortDirection.DESCENDING)\n});\n```\n\n----------------------------------------\n\nTITLE: Setting up RxDB with Node-WebSQL Adapter for NodeJS\nDESCRIPTION: This snippet shows how to use the Node-WebSQL adapter with RxDB in NodeJS. It's advantageous when a LevelDB build isn't needed or when multiple NodeJS processes access the same database files.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/adapters.md#2025-04-17_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\n// npm install pouchdb-adapter-node-websql --save\naddPouchPlugin(require('pouchdb-adapter-node-websql'));\n\nconst database = await createRxDatabase({\n    name: 'mydatabase',\n    storage: getRxStoragePouch('websql') // the name of your adapter\n});\n\n// or use a specific folder to store the data\nconst database = await createRxDatabase({\n    name: '/root/user/project/mydatabase',\n    storage: getRxStoragePouch('websql') // the name of your adapter\n});\n```\n\n----------------------------------------\n\nTITLE: Running General RxDB Tests\nDESCRIPTION: Command for running the complete unit and integration test suite to ensure all functionality works as expected before making a pull request.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/contribute.md#2025-04-17_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nnpm run test\n```\n\n----------------------------------------\n\nTITLE: RxDB Repository Path Reference\nDESCRIPTION: GitHub repository paths referenced for project backlogs and TODOs.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/12.0.0.md#2025-04-17_snippet_4\n\nLANGUAGE: markdown\nCODE:\n```\nhttps://github.com/pubkey/rxdb/blob/master/orga/BACKLOG.md\n```\n\nLANGUAGE: markdown\nCODE:\n```\nhttps://github.com/pubkey/rxdb/blob/master/orga/before-next-major.md\n```\n\nLANGUAGE: markdown\nCODE:\n```\nhttps://github.com/pubkey/rxdb/search?q=TODO\n```\n\nLANGUAGE: markdown\nCODE:\n```\nhttps://github.com/pubkey/rxdb/tree/master/examples\n```\n\nLANGUAGE: markdown\nCODE:\n```\nhttps://github.com/pouchdb/pouchdb/issues/8408\n```\n\n----------------------------------------\n\nTITLE: Migrating Default Exports to Named Imports in TypeScript\nDESCRIPTION: Demonstrates the change from using default exports to named imports for better tree-shaking support.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/9.0.0.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport RxDB from 'rxdb';\nRxDB.plugin(/* ... */);\nawait RxDB.create({/* ... */});\n```\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase, addRxPlugin } from 'rxdb';\naddRxPlugin(/* ... */);\nawait createRxDatabase({/* ... */});\n```\n\n----------------------------------------\n\nTITLE: SVG Data URI for Exclamation Circle Icon\nDESCRIPTION: Base64 encoded SVG data URI for an exclamation circle icon with gray fill color.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs/assets/js/main.bd539013.js.LICENSE.txt#2025-04-17_snippet_1\n\nLANGUAGE: svg\nCODE:\n```\n![exclamation-circle](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTUxMiA2NEMyNjQuNiA2NCA2NCAyNjQuNiA2NCA1MTJzMjAwLjYgNDQ4IDQ0OCA0NDggNDQ4LTIwMC42IDQ0OC00NDhTNzU5LjQgNjQgNTEyIDY0em0tMzIgMjMyYzAtNC40IDMuNi04IDgtOGg0OGM0LjQgMCA4IDMuNiA4IDh2MjcyYzAgNC40LTMuNiA4LTggOGgtNDhjLTQuNCAwLTgtMy42LTgtOFYyOTZ6bTMyIDQ0MGE0OC4wMSA0OC4wMSAwIDAxMC05NiA0OC4wMSA0OC4wMSAwIDAxMCA5NnoiIC8+PC9zdmc+)\n```\n\n----------------------------------------\n\nTITLE: WebRTC and WebSocket Polyfill Configuration for Node.js\nDESCRIPTION: Demonstrates how to set up WebRTC and WebSocket polyfills in Node.js environments using node-datachannel and ws packages.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-webrtc.md#2025-04-17_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nimport nodeDatachannelPolyfill from 'node-datachannel/polyfill';\nimport { WebSocket } from 'ws';\nconst replicationPool = await replicateWebRTC(\n    {\n        /* ... */\n        connectionHandlerCreator: getConnectionHandlerSimplePeer({\n            signalingServerUrl: 'wss://example.com:8080',\n            wrtc: nodeDatachannelPolyfill,\n            webSocketConstructor: WebSocket\n        }),\n        pull: {},\n        push: {}\n        /* ... */\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Webpack Configuration for Dev Mode\nDESCRIPTION: Webpack configuration setup for defining global MODE variable.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/dev-mode.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nmodule.exports = {\n    entry: './src/index.ts',\n    /* ... */\n    plugins: [\n        // set a global variable that can be accessed during runtime\n        new webpack.DefinePlugin({ MODE: JSON.stringify(\"production\") })\n    ]\n    /* ... */\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Flutter Windows Runner Build\nDESCRIPTION: Defines the main executable target for a Flutter Windows application with necessary source files, build settings, and dependencies. Sets version definitions and links required Flutter libraries.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/flutter/windows/runner/CMakeLists.txt#2025-04-17_snippet_0\n\nLANGUAGE: cmake\nCODE:\n```\ncmake_minimum_required(VERSION 3.14)\nproject(runner LANGUAGES CXX)\n\nadd_executable(${BINARY_NAME} WIN32\n  \"flutter_window.cpp\"\n  \"main.cpp\"\n  \"utils.cpp\"\n  \"win32_window.cpp\"\n  \"${FLUTTER_MANAGED_DIR}/generated_plugin_registrant.cc\"\n  \"Runner.rc\"\n  \"runner.exe.manifest\"\n)\n\napply_standard_settings(${BINARY_NAME})\n\ntarget_compile_definitions(${BINARY_NAME} PRIVATE \"FLUTTER_VERSION=\\\"${FLUTTER_VERSION}\\\"\") \ntarget_compile_definitions(${BINARY_NAME} PRIVATE \"FLUTTER_VERSION_MAJOR=${FLUTTER_VERSION_MAJOR}\")\ntarget_compile_definitions(${BINARY_NAME} PRIVATE \"FLUTTER_VERSION_MINOR=${FLUTTER_VERSION_MINOR}\")\ntarget_compile_definitions(${BINARY_NAME} PRIVATE \"FLUTTER_VERSION_PATCH=${FLUTTER_VERSION_PATCH}\")\ntarget_compile_definitions(${BINARY_NAME} PRIVATE \"FLUTTER_VERSION_BUILD=${FLUTTER_VERSION_BUILD}\")\n\ntarget_compile_definitions(${BINARY_NAME} PRIVATE \"NOMINMAX\")\n\ntarget_link_libraries(${BINARY_NAME} PRIVATE flutter flutter_wrapper_app)\ntarget_include_directories(${BINARY_NAME} PRIVATE \"${CMAKE_SOURCE_DIR}\")\n\nadd_dependencies(${BINARY_NAME} flutter_assemble)\n```\n\n----------------------------------------\n\nTITLE: Installing docusaurus-lunr-search plugin using Yarn\nDESCRIPTION: Command to install the docusaurus-lunr-search plugin using Yarn package manager.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docusaurus-lunr-search-main/README.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nyarn add docusaurus-lunr-search\n```\n\n----------------------------------------\n\nTITLE: Reading RxDB Version Migration Instructions\nDESCRIPTION: Details on migrating from RxDB 13.x.x to 14.0.0, explaining the need for schema version increment and migration strategy due to changes in schema hashing and normalization.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/14.0.0.md#2025-04-17_snippet_4\n\nLANGUAGE: markdown\nCODE:\n```\n## Migration from 13.x.x to 14.0.0\\n\\nThe way RxDB hashes and normalizes a schema has changed. To migrate stored data between the RxDB versions, therefore you have to increase your schema version by `1` and add a migration strategy.\n```\n\n----------------------------------------\n\nTITLE: Disabling Dev Mode Warnings\nDESCRIPTION: Code to disable console warnings when using dev-mode plugin.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/dev-mode.md#2025-04-17_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { disableWarnings } from 'rxdb/plugins/dev-mode';\ndisableWarnings();\n```\n\n----------------------------------------\n\nTITLE: Documentation Comment for MQuery Port\nDESCRIPTION: A markdown comment explaining that this is a copy of the mquery library, modified for RxDB's specific needs by removing unused imports and collection-request functionality.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/src/plugins/query-builder/mquery/README.md#2025-04-17_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n# this is a copy from mquery\\nThis was copied to prevent the usage of the unused imports and\\nbecause the collection-request-part is not used by rxdb.\\n\\nhttps://github.com/aheckmann/mquery\n```\n\n----------------------------------------\n\nTITLE: SVG Data URI for Loading Icon\nDESCRIPTION: Base64 encoded SVG data URI for a loading spinner icon with gray fill color.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs/assets/js/main.bd539013.js.LICENSE.txt#2025-04-17_snippet_3\n\nLANGUAGE: svg\nCODE:\n```\n![loading](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTk4OCA1NDhjLTE5LjkgMC0zNi0xNi4xLTM2LTM2IDAtNTkuNC0xMS42LTExNy0zNC42LTE3MS4zYTQ0MC40NSA0NDAuNDUgMCAwMC05NC4zLTEzOS45IDQzNy43MSA0MzcuNzEgMCAwMC0xMzkuOS05NC4zQzYyOSA4My42IDU3MS40IDcyIDUxMiA3MmMtMTkuOSAwLTM2LTE2LjEtMzYtMzZzMTYuMS0zNiAzNi0zNmM2OS4xIDAgMTM2LjIgMTMuNSAxOTkuMyA0MC4zQzc3Mi4zIDY2IDgyNyAxMDMgODc0IDE1MGM0NyA0NyA4My45IDEwMS44IDEwOS43IDE2Mi43IDI2LjcgNjMuMSA0MC4yIDEzMC4yIDQwLjIgMTk5LjMuMSAxOS45LTE2IDM2LTM1LjkgMzZ6IiAvPjwvc3ZnPg==)\n```\n\n----------------------------------------\n\nTITLE: Webpack Configuration for SimplePeer Process Polyfill\nDESCRIPTION: Demonstrates how to configure Webpack to provide the required process.nextTick() polyfill for SimplePeer in browser environments.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-webrtc.md#2025-04-17_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nconst plugins = [\n    /* ... */\n    new webpack.ProvidePlugin({\n        process: 'process/browser',\n    })\n    /* ... */\n];\n```\n\n----------------------------------------\n\nTITLE: SVG Data URI for Close Circle Icon\nDESCRIPTION: Base64 encoded SVG data URI for a close circle icon with gray fill color.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs/assets/js/main.bd539013.js.LICENSE.txt#2025-04-17_snippet_0\n\nLANGUAGE: svg\nCODE:\n```\n![close-circle](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIGZpbGwtcnVsZT0iZXZlbm9kZCIgdmlld0JveD0iNjQgNjQgODk2IDg5NiIgZm9jdXNhYmxlPSJmYWxzZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNNTEyIDY0YzI0Ny40IDAgNDQ4IDIwMC42IDQ0OCA0NDhTNzU5LjQgOTYwIDUxMiA5NjAgNjQgNzU5LjQgNjQgNTEyIDI2NC42IDY0IDUxMiA2NHptMTI3Ljk4IDI3NC44MmgtLjA0bC0uMDguMDZMNTEyIDQ2Ni43NSAzODQuMTQgMzM4Ljg4Yy0uMDQtLjA1LS4wNi0uMDYtLjA4LS4wNmEuMTIuMTIgMCAwMC0uMDcgMGMtLjAzIDAtLjA1LjAxLS4wOS4wNWwtNDUuMDIgNDUuMDJhLjIuMiAwIDAwLS4wNS4wOS4xMi4xMiAwIDAwMCAuMDd2LjAyYS4yNy4yNyAwIDAwLjA2LjA2TDQ2Ni43NSA1MTIgMzM4Ljg4IDYzOS44NmMtLjA1LjA0LS4wNi4wNi0uMDYuMDhhLjEyLjEyIDAgMDAwIC4wN2MwIC4wMy4wMS4wNS4wNS4wOWw0NS4wMiA0NS4wMmEuMi4yIDAgMDAuMDkuMDUuMTIuMTIgMCAwMC4wNyAwYy4wMiAwIC4wNC0uMDEuMDgtLjA1TDUxMiA1NTcuMjVsMTI3Ljg2IDEyNy44N2MuMDQuMDQuMDYuMDUuMDguMDVhLjEyLjEyIDAgMDAuMDcgMGMuMDMgMCAuMDUtLjAxLjA5LS4wNWw0NS4wMi00NS4wMmEuMi4yIDAgMDAuMDUtLjA5LjEyLjEyIDAgMDAwLS4wN3YtLjAyYS4yNy4yNyAwIDAwLS4wNS0uMDZMNTU3LjI1IDUxMmwxMjcuODctMTI3Ljg2Yy4wNC0uMDQuMDUtLjA2LjA1LS4wOGEuMTIuMTIgMCAwMDAtLjA3YzAtLjAzLS4wMS0uMDUtLjA1LS4wOWwtNDUuMDItNDUuMDJhLjIuMiAwIDAwLS4wOS0uMDUuMTIuMTIgMCAwMC0uMDcgMHoiIC8+PC9zdmc+)\n```\n\n----------------------------------------\n\nTITLE: Lunr.js Library Copyright Notice\nDESCRIPTION: The main copyright notice for the Lunr.js library, describing it as a lightweight search engine for browser use. It includes the version number, copyright information, and license type.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs/assets/js/4250.8d2474c0.js.LICENSE.txt#2025-04-17_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\n/**\n * lunr - http://lunrjs.com - A bit like Solr, but much smaller and not as bright - 2.3.9\n * Copyright (C) 2020 Oliver Nightingale\n * @license MIT\n */\n```\n\n----------------------------------------\n\nTITLE: Building Docusaurus project with npm\nDESCRIPTION: Command to build the Docusaurus project using npm after adding the docusaurus-lunr-search plugin.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docusaurus-lunr-search-main/README.md#2025-04-17_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nnpm run build\n```\n\n----------------------------------------\n\nTITLE: Storage Plugin Import in RxDB 14.0\nDESCRIPTION: Demonstrates the new import path for storage plugins which now use the 'storage-' prefix.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/14.0.0.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n// Instead of \nimport { getRxStorageDexie } from 'rxdb/plugins/dexie';\n// it is now\nimport { getRxStorageDexie } from 'rxdb/plugins/storage-dexie';\n```\n\n----------------------------------------\n\nTITLE: Running RxDB Tests\nDESCRIPTION: Command for running memory storage tests in Node.js environment. The package.json contains additional scripts for testing with different storage backends.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/contribute.md#2025-04-17_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpm run test:node:memory\n```\n\n----------------------------------------\n\nTITLE: Enabling Attachments in RxDB Schema\nDESCRIPTION: Demonstrates how to configure the schema of an RxCollection to support attachments, including the option for encryption.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-attachment.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst mySchema = {\n    version: 0,\n    type: 'object',\n    properties: {\n        // .\n        // .\n        // .\n    },\n    attachments: {\n        encrypted: true // if true, the attachment-data will be encrypted with the db-password\n    }\n};\n\nconst myCollection = await myDatabase.addCollections({\n    humans: {\n        schema: mySchema\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Installing docusaurus-lunr-search plugin using npm\nDESCRIPTION: Command to install the docusaurus-lunr-search plugin using npm package manager.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docusaurus-lunr-search-main/README.md#2025-04-17_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpm i docusaurus-lunr-search  --save\n```\n\n----------------------------------------\n\nTITLE: Running Appwrite Installation Script\nDESCRIPTION: Docker command to run the Appwrite installation script that creates necessary configuration files.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-appwrite.md#2025-04-17_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\ndocker run -it --rm \\\n    --volume /var/run/docker.sock:/var/run/docker.sock \\\n    --volume \"$(pwd)\"/appwrite:/usr/src/code/appwrite:rw \\\n    --entrypoint=\"install\" \\\n    appwrite/appwrite:1.6.1\n```\n\n----------------------------------------\n\nTITLE: RxDB Core Storage Configuration\nDESCRIPTION: Import statement for trial version of SQLite storage plugin in RxDB core.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/react-native-database.md#2025-04-17_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    getRxStorageSQLiteTrial,\n    getSQLiteBasicsCapacitor\n} from 'rxdb/plugins/storage-sqlite';\n```\n\n----------------------------------------\n\nTITLE: HTML Meta Redirect for RxDB Documentation\nDESCRIPTION: HTML meta refresh tag that automatically redirects users to the new documentation URL at rxdb.info\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/data-migration.md#2025-04-17_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<meta http-equiv=\"refresh\" content=\"0; url=https://rxdb.info/migration-schema.html\" />\n```\n\n----------------------------------------\n\nTITLE: Installing RxDB for Development\nDESCRIPTION: Commands for cloning the RxDB repository and installing dependencies to set up a development environment.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/contribute.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ngit clone https://github.com/pubkey/rxdb.git\n```\n\nLANGUAGE: bash\nCODE:\n```\ncd rxdb && npm install\n```\n\n----------------------------------------\n\nTITLE: Checking Docker Compose Version\nDESCRIPTION: Command to verify Docker Compose installation and version.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-appwrite.md#2025-04-17_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ndocker-compose -v\n```\n\n----------------------------------------\n\nTITLE: Markdown Changelog Entry for Version 13.0.0\nDESCRIPTION: Major release changelog entry documenting breaking changes including plugin refactoring, removal of features, and architectural changes.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/CHANGELOG.md#2025-04-17_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n### 13.0.0 (16 September 2022) BREAKING [read the announcement](./docs-src/releases/13.0.0.md)\n\n- FIX `graphQLSchemaFromRxSchema()` must not create broken schema when there are no `headerFields`\n[...additional changes truncated for brevity...]\n```\n\n----------------------------------------\n\nTITLE: Referencing Performance Comparison in Go\nDESCRIPTION: The document references a performance comparison implemented in Go, which tests message times for WebSockets, WebRTC, and WebTransport. The actual code is not provided, but the results are discussed.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/websockets-sse-polling-webrtc-webtransport.md#2025-04-17_snippet_4\n\nLANGUAGE: go\nCODE:\n```\n// No actual code snippet provided, but reference made to Go implementation\n```\n\n----------------------------------------\n\nTITLE: Installing Ionic CLI and Creating New Project\nDESCRIPTION: Commands to globally install Ionic and Cordova CLI tools, then create a new blank Ionic project using the starter template.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/ionic2/README.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ sudo npm install -g ionic cordova\n$ ionic start myBlank blank\n```\n\n----------------------------------------\n\nTITLE: Implementing postRemove hooks in RxDB\nDESCRIPTION: Examples of adding postRemove hooks to an RxDB collection. Shows series, parallel, and async implementation patterns.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/middleware.md#2025-04-17_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\n// series\nmyCollection.postRemove(function(plainData, rxDocument){\n\n}, false);\n\n// parallel\nmyCollection.postRemove(function(plainData, rxDocument){\n\n}, true);\n\n// async\nmyCollection.postRemove(function(plainData, rxDocument){\n  return new Promise(res => setTimeout(res, 100));\n}, false);\n```\n\n----------------------------------------\n\nTITLE: URL Parameters for Storage Configuration\nDESCRIPTION: Example URL demonstrating how to configure storage type and sync settings through URL parameters.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/graphql/README.md#2025-04-17_snippet_1\n\nLANGUAGE: url\nCODE:\n```\nhttp://localhost:8888/?storage=localstorage&sync=false\n```\n\n----------------------------------------\n\nTITLE: Adding RxDB as Git Dependency\nDESCRIPTION: Adds the latest development version of RxDB as a git dependency in your package.json. This is useful when you need features that are not yet available in the published npm version.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/install.md#2025-04-17_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n  \"dependencies\": {\n      \"rxdb\": \"git+https://git@github.com/pubkey/rxdb.git#commitHash\"\n  }\n```\n\n----------------------------------------\n\nTITLE: Observing Attachments with RxJS\nDESCRIPTION: Demonstrates how to use RxJS to observe changes in the attachments of an RxDocument.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-attachment.md#2025-04-17_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nconst all = [];\nmyDocument.allAttachments$.subscribe(\n    attachments => all = attachments\n);\n```\n\n----------------------------------------\n\nTITLE: Installing RxDB Package in Flutter Application\nDESCRIPTION: YAML configuration in pubspec.yaml to add the RxDB Dart package as a dependency from a local path, required for Flutter-JavaScript communication.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/flutter-database.md#2025-04-17_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\n# inside of pubspec.yaml\ndependencies:\n  rxdb:\n    path: path/to/your/node_modules/rxdb/src/plugins/flutter/dart\n```\n\n----------------------------------------\n\nTITLE: Handling Duplicate Leaders in RxDB\nDESCRIPTION: Shows how to handle the rare case of duplicate leaders being elected in RxDB. The code registers a handler for the duplicate leader event that reloads the page to resolve the conflict.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/leader-election.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n    getLeaderElectorByBroadcastChannel\n} from 'rxdb/plugins/leader-election';\n\nconst leaderElector = getLeaderElectorByBroadcastChannel(broadcastChannel);\nleaderElector.onduplicate = async () => {\n    // Duplicate leader detected -> reload the page.\n    location.reload();\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Attachments Plugin in TypeScript\nDESCRIPTION: Shows how to add the attachments plugin to RxDB using TypeScript. This is required to enable attachment functionality.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-attachment.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { addRxPlugin } from 'rxdb';\nimport { RxDBAttachmentsPlugin } from 'rxdb/plugins/attachments';\naddRxPlugin(RxDBAttachmentsPlugin);\n```\n\n----------------------------------------\n\nTITLE: Querying RxDB Documents\nDESCRIPTION: Execute a query to find documents matching specific criteria using selector syntax\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/quickstart.md#2025-04-17_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nconst foundDocuments = await myDatabase.todos.find({\n    selector: {\n        done: {\n            $eq: false\n        }\n    }\n}).exec();\n```\n\n----------------------------------------\n\nTITLE: Markdown Changelog Entry for Version 12.6.x Series\nDESCRIPTION: Changelog entries for version 12.6.x series documenting feature additions and improvements.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/CHANGELOG.md#2025-04-17_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n### 12.6.14 (7 July 2022)\n\n- Moved from gitter to [discord](https://discord.gg/gNAuePsN)\n- ADD `bulkSize` option to [Memory Synced RxStorage](https://rxdb.info/rx-storage-memory-synced.html)\n[...additional entries truncated for brevity...]\n```\n\n----------------------------------------\n\nTITLE: Defining a CRDT Operation in JavaScript\nDESCRIPTION: This snippet demonstrates how to define a CRDT operation using NoSQL update operators. It shows an example of incrementing a 'points' field and setting a 'modified' field to true.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/crdt.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst myCRDTOperation = {\n    // increment the points field by +1\n    $inc: {\n        points: 1\n    },\n    // set the modified field to true\n    $set: {\n        modified: true\n    }\n};\n```\n\n----------------------------------------\n\nTITLE: Using RxJsonSchema Generic in TypeScript\nDESCRIPTION: Added RxJsonSchema<T> generic for improved TypeScript experience when working with RxDB schemas.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/CHANGELOG.md#2025-04-17_snippet_6\n\nLANGUAGE: TypeScript\nCODE:\n```\n// Example of using RxJsonSchema<T> generic\n// (Actual code not provided in changelog)\n```\n\n----------------------------------------\n\nTITLE: Awaiting Initial Replication\nDESCRIPTION: Shows how to wait for the initial replication cycle to complete using awaitInitialReplication()\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nawait myRxReplicationState.awaitInitialReplication();\n```\n\n----------------------------------------\n\nTITLE: RxDB Third Party Examples Table\nDESCRIPTION: Markdown table listing third-party example projects implementing RxDB with various technology stacks\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/README.md#2025-04-17_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\nTechnology                 | Third Party Link\n-------------------------  | ---------------------\nNativeScript               | [Link](https://github.com/herefishyfish/nativescript-angular-rxdb-lokijs-demo)\nGraphQL + Svelte + Pothos  | [Link](https://github.com/ccfiel/rxdb-graphql-prisma-sample)\n```\n\n----------------------------------------\n\nTITLE: Running a Query on RxDB Collection in Capacitor\nDESCRIPTION: Shows how to run a query on an RxDB collection in a Capacitor application using the find method with a selector to filter documents based on criteria.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/capacitor-database.md#2025-04-17_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nconst result = await collections.humans.find({\n    selector: {\n        name: 'bar'\n    }\n}).exec();\n```\n\n----------------------------------------\n\nTITLE: Configuring Flutter Library and Headers\nDESCRIPTION: Sets up the Flutter library paths and header files for Windows builds. Configures the main Flutter interface library and its dependencies.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/flutter/windows/flutter/CMakeLists.txt#2025-04-17_snippet_0\n\nLANGUAGE: cmake\nCODE:\n```\nset(FLUTTER_LIBRARY \"${EPHEMERAL_DIR}/flutter_windows.dll\")\n\nlist(APPEND FLUTTER_LIBRARY_HEADERS\n  \"flutter_export.h\"\n  \"flutter_windows.h\"\n  \"flutter_messenger.h\"\n  \"flutter_plugin_registrar.h\"\n  \"flutter_texture_registrar.h\"\n)\nlist(TRANSFORM FLUTTER_LIBRARY_HEADERS PREPEND \"${EPHEMERAL_DIR}/\")\nadd_library(flutter INTERFACE)\ntarget_include_directories(flutter INTERFACE\n  \"${EPHEMERAL_DIR}\"\n)\ntarget_link_libraries(flutter INTERFACE \"${FLUTTER_LIBRARY}.lib\")\nadd_dependencies(flutter flutter_assemble)\n```\n\n----------------------------------------\n\nTITLE: Building Docusaurus project with Yarn\nDESCRIPTION: Command to build the Docusaurus project using Yarn after adding the docusaurus-lunr-search plugin.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docusaurus-lunr-search-main/README.md#2025-04-17_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nyarn build\n```\n\n----------------------------------------\n\nTITLE: Creating a Basic RxDB Database in TypeScript\nDESCRIPTION: Code snippet showing how to create a simple RxDB database using localStorage as the storage engine.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/firestore-alternative.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRxDatabase } from 'rxdb/plugins/core';\nimport { getRxStorageLocalstorage } from 'rxdb/plugins/storage-localstorage';\n\nconst db = await createRxDatabase({\n  name: 'mydb',\n  storage: getRxStorageLocalstorage()\n});\n```\n\n----------------------------------------\n\nTITLE: Creating RxDB Database with LocalStorage in TypeScript\nDESCRIPTION: Code to create an RxDB database using LocalStorage as the storage engine.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/rx-storage-localstorage.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst db = await createRxDatabase({\n    name: 'exampledb',\n    storage: getRxStorageLocalstorage()\n});\n```\n\n----------------------------------------\n\nTITLE: Inserting a New Todo in RxDB\nDESCRIPTION: Demonstrates how to insert a new todo item into the local RxDB database.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/local-first-future.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nawait db.todos.insert({\n  id: 'todo1',\n  title: 'Learn RxDB local-first',\n  done: false,\n  timestamp: new Date().toISOString()\n});\n```\n\n----------------------------------------\n\nTITLE: Applying Standard Compilation Settings in CMake Function\nDESCRIPTION: Defines a function to apply standard compilation settings to targets. It sets C++17 standard, warning levels, exception handling, and debug definitions.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/flutter/windows/CMakeLists.txt#2025-04-17_snippet_2\n\nLANGUAGE: CMake\nCODE:\n```\nfunction(APPLY_STANDARD_SETTINGS TARGET)\n  target_compile_features(${TARGET} PUBLIC cxx_std_17)\n  target_compile_options(${TARGET} PRIVATE /W4 /WX /wd\"4100\")\n  target_compile_options(${TARGET} PRIVATE /EHsc)\n  target_compile_definitions(${TARGET} PRIVATE \"_HAS_EXCEPTIONS=0\")\n  target_compile_definitions(${TARGET} PRIVATE \"$<$<CONFIG:Debug>:_DEBUG>\")\nendfunction()\n```\n\n----------------------------------------\n\nTITLE: Observing LocalStorage Changes Across Tabs in JavaScript\nDESCRIPTION: This snippet demonstrates how to use the storage event to observe changes in localStorage across different browser tabs. This feature is unique to localStorage and is not available in other storage APIs like IndexedDB.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/localstorage-indexeddb-cookies-opfs-sqlite-wasm.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n// localStorage can observe changes with the storage event.\n// This feature is missing in IndexedDB and others\naddEventListener(\"storage\", (event) => {});\n```\n\n----------------------------------------\n\nTITLE: Key Compression Benchmarks\nDESCRIPTION: Comparison of key compression performance metrics before and after optimization changes in February 2024.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/orga/performance-trackings.md#2025-04-17_snippet_6\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"notice\": \"times are in milliseconds\",\n  \"createCompressionTable\": {\n    \"amount\": 10000,\n    \"total\": 87.29935099929571,\n    \"perInstance\": 0.008729935099929571\n  },\n  \"compress\": {\n    \"amount\": 10000,\n    \"total\": 87.45416999980807,\n    \"perObject\": 0.008745416999980807\n  },\n  \"decompress\": {\n    \"amount\": 10000,\n    \"total\": 121.86422900017351,\n    \"perObject\": 0.012186422900017351\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Attachments with Blob/Buffer\nDESCRIPTION: Shows how to create attachments using Blob or Buffer data instead of strings.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/10.0.0.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { blobBufferUtil } from 'rxdb';\n\nconst attachment = await myDocument.putAttachment(\n    {\n        id: 'cat.txt',\n        data: blobBufferUtil.createBlobBuffer('miau', 'text/plain')\n        type: 'text/plain'\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: IndexedDB Performance Benchmarks\nDESCRIPTION: Performance measurements for IndexedDB operations before and after implementing multiEntry=false optimization and WAL cleanup improvements.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/orga/performance-trackings.md#2025-04-17_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"description\": \"\",\n    \"platform\": \"indexeddb\",\n    \"collectionsAmount\": 4,\n    \"docsAmount\": 1200,\n    \"time-to-first-insert\": 25.53,\n    \"insert-documents-200\": 7.5,\n    \"find-by-ids\": 47.77,\n    \"find-by-query\": 52.1,\n    \"find-by-query-parallel-4\": 38.3,\n    \"count\": 5.48,\n    \"property-access\": 5.27\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing SQLite Database in React Native\nDESCRIPTION: Shows how to open a SQLite database connection using react-native-quick-sqlite\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/react-native-database.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport {open} from 'react-native-quick-sqlite';\nconst db = open('myDb.sqlite');\n```\n\n----------------------------------------\n\nTITLE: Serving Docusaurus application with npm\nDESCRIPTION: Command to serve the built Docusaurus application using npm.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docusaurus-lunr-search-main/README.md#2025-04-17_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\nnpm run serve\n```\n\n----------------------------------------\n\nTITLE: Inserting Document\nDESCRIPTION: Basic document insertion operation into the humans collection.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/react-native-database.md#2025-04-17_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nawait collections.humans.insert({id: 'foo', name: 'bar'});\n```\n\n----------------------------------------\n\nTITLE: Defining Schema with Required Primary Key\nDESCRIPTION: Demonstrates the new schema definition with required primary key using TypeScript types.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/releases/10.0.0.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst mySchema: RxJsonSchema<MyDocumentData> = {\n    version: 0,\n    primaryKey: 'passportId',\n    type: 'object',\n    properties: {\n        passportId: {\n            type: 'string'\n        }\n    },\n    // primaryKey is always required\n    required: ['passportId']\n}\n```\n\n----------------------------------------\n\nTITLE: Serving Docusaurus application with Yarn\nDESCRIPTION: Command to serve the built Docusaurus application using Yarn.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docusaurus-lunr-search-main/README.md#2025-04-17_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\nyarn serve\n```\n\n----------------------------------------\n\nTITLE: Updating Document Colors using SQL\nDESCRIPTION: This SQL snippet demonstrates updating the color of documents from blue to red. However, it highlights the limitation of such queries in offline-first scenarios where changes may occur during disconnected periods.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/why-nosql.md#2025-04-17_snippet_0\n\nLANGUAGE: sql\nCODE:\n```\nUPDATE docs\nSET docs.color = 'red'\nWHERE docs.color = 'blue';\n```\n\n----------------------------------------\n\nTITLE: Importing Dev Mode Plugin in JavaScript\nDESCRIPTION: Basic import statements for the RxDB dev-mode plugin and core functionality.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/dev-mode.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { RxDBDevModePlugin } from 'rxdb/plugins/dev-mode';\nimport { addRxPlugin } from 'rxdb/plugins/core';\n```\n\n----------------------------------------\n\nTITLE: Importing ErrorMessages Component in JavaScript\nDESCRIPTION: This snippet imports the ErrorMessages component from a specific file path. It's likely used to display a list of all RxDB error messages in the documentation.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/errors.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { ErrorMessages } from '@site/src/components/error-messages';\n```\n\n----------------------------------------\n\nTITLE: Configuring Window Polyfills for RxDB Plugins in Angular\nDESCRIPTION: This snippet shows the necessary window polyfills that need to be added to the polyfills.ts file for compatibility with some RxDB plugins. It defines global and process objects on the window.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/angular/README.md#2025-04-17_snippet_0\n\nLANGUAGE: TypeScript\nCODE:\n```\n(window as any).global = window;\n(window as any).process = {\n    env: { DEBUG: undefined },\n    nextTick: (fn, ...args) => setTimeout(() => fn(...args)),\n};\n```\n\n----------------------------------------\n\nTITLE: Installing RxDB in Angular\nDESCRIPTION: Command to install RxDB package via npm in an Angular project.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/articles/angular-indexeddb.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install rxdb --save\n```\n\n----------------------------------------\n\nTITLE: Docker Compose Commands\nDESCRIPTION: Commands to start and stop the Appwrite instance using Docker Compose.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/docs/replication-appwrite.md#2025-04-17_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n# stop\ndocker-compose down\n\n# start\ndocker-compose up\n```\n\n----------------------------------------\n\nTITLE: Installing Website Dependencies\nDESCRIPTION: Command to install all required node dependencies using Yarn package manager\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs-src/README.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ yarn\n```\n\n----------------------------------------\n\nTITLE: Configuring Installation Rules for Flutter Application in CMake\nDESCRIPTION: Sets up installation rules for the application binary, Flutter ICU data, Flutter library, bundled libraries, and assets. It also includes special handling for AOT library installation.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/flutter/windows/CMakeLists.txt#2025-04-17_snippet_4\n\nLANGUAGE: CMake\nCODE:\n```\nset(BUILD_BUNDLE_DIR \"$<TARGET_FILE_DIR:${BINARY_NAME}>\")\nset(CMAKE_VS_INCLUDE_INSTALL_TO_DEFAULT_BUILD 1)\nif(CMAKE_INSTALL_PREFIX_INITIALIZED_TO_DEFAULT)\n  set(CMAKE_INSTALL_PREFIX \"${BUILD_BUNDLE_DIR}\" CACHE PATH \"...\" FORCE)\nendif()\n\nset(INSTALL_BUNDLE_DATA_DIR \"${CMAKE_INSTALL_PREFIX}/data\")\nset(INSTALL_BUNDLE_LIB_DIR \"${CMAKE_INSTALL_PREFIX}\")\n\ninstall(TARGETS ${BINARY_NAME} RUNTIME DESTINATION \"${CMAKE_INSTALL_PREFIX}\"\n  COMPONENT Runtime)\n\ninstall(FILES \"${FLUTTER_ICU_DATA_FILE}\" DESTINATION \"${INSTALL_BUNDLE_DATA_DIR}\"\n  COMPONENT Runtime)\n\ninstall(FILES \"${FLUTTER_LIBRARY}\" DESTINATION \"${INSTALL_BUNDLE_LIB_DIR}\"\n  COMPONENT Runtime)\n\nif(PLUGIN_BUNDLED_LIBRARIES)\n  install(FILES \"${PLUGIN_BUNDLED_LIBRARIES}\"\n    DESTINATION \"${INSTALL_BUNDLE_LIB_DIR}\"\n    COMPONENT Runtime)\nendif()\n\nset(FLUTTER_ASSET_DIR_NAME \"flutter_assets\")\ninstall(CODE \"\n  file(REMOVE_RECURSE \\\"${INSTALL_BUNDLE_DATA_DIR}/${FLUTTER_ASSET_DIR_NAME}\\\")\n  \" COMPONENT Runtime)\ninstall(DIRECTORY \"${PROJECT_BUILD_DIR}/${FLUTTER_ASSET_DIR_NAME}\"\n  DESTINATION \"${INSTALL_BUNDLE_DATA_DIR}\" COMPONENT Runtime)\n\ninstall(FILES \"${AOT_LIBRARY}\" DESTINATION \"${INSTALL_BUNDLE_DATA_DIR}\"\n  CONFIGURATIONS Profile;Release\n  COMPONENT Runtime)\n```\n\n----------------------------------------\n\nTITLE: Setting Up Flutter and Plugin Build Rules in CMake\nDESCRIPTION: Adds the Flutter managed directory, runner subdirectory, and includes generated plugin build rules for the application.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/flutter/windows/CMakeLists.txt#2025-04-17_snippet_3\n\nLANGUAGE: CMake\nCODE:\n```\nset(FLUTTER_MANAGED_DIR \"${CMAKE_CURRENT_SOURCE_DIR}/flutter\")\nadd_subdirectory(${FLUTTER_MANAGED_DIR})\n\nadd_subdirectory(\"runner\")\n\ninclude(flutter/generated_plugins.cmake)\n```\n\n----------------------------------------\n\nTITLE: Setting Up Flutter Plugin Wrapper Library\nDESCRIPTION: Creates and configures the static library for Flutter plugin wrapper functionality, including compiler settings and dependencies.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/flutter/windows/flutter/CMakeLists.txt#2025-04-17_snippet_2\n\nLANGUAGE: cmake\nCODE:\n```\nadd_library(flutter_wrapper_plugin STATIC\n  ${CPP_WRAPPER_SOURCES_CORE}\n  ${CPP_WRAPPER_SOURCES_PLUGIN}\n)\napply_standard_settings(flutter_wrapper_plugin)\nset_target_properties(flutter_wrapper_plugin PROPERTIES\n  POSITION_INDEPENDENT_CODE ON)\nset_target_properties(flutter_wrapper_plugin PROPERTIES\n  CXX_VISIBILITY_PRESET hidden)\ntarget_link_libraries(flutter_wrapper_plugin PUBLIC flutter)\ntarget_include_directories(flutter_wrapper_plugin PUBLIC\n  \"${WRAPPER_ROOT}/include\"\n)\nadd_dependencies(flutter_wrapper_plugin flutter_assemble)\n```\n\n----------------------------------------\n\nTITLE: Initializing Flutter Linux CMake Configuration\nDESCRIPTION: Sets up the initial CMake configuration for a Flutter Linux project, including minimum version and ephemeral directory.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/examples/flutter/linux/flutter/CMakeLists.txt#2025-04-17_snippet_0\n\nLANGUAGE: CMake\nCODE:\n```\ncmake_minimum_required(VERSION 3.10)\n\nset(EPHEMERAL_DIR \"${CMAKE_CURRENT_SOURCE_DIR}/ephemeral\")\n\n# Configuration provided via flutter tool.\ninclude(${EPHEMERAL_DIR}/generated_config.cmake)\n```\n\n----------------------------------------\n\nTITLE: SVG Data URI for Info Circle Icon\nDESCRIPTION: Base64 encoded SVG data URI for an information circle icon with gray fill color.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs/assets/js/main.bd539013.js.LICENSE.txt#2025-04-17_snippet_2\n\nLANGUAGE: svg\nCODE:\n```\n![info-circle](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTUxMiA2NEMyNjQuNiA2NCA2NCAyNjQuNiA2NCA1MTJzMjAwLjYgNDQ4IDQ0OCA0NDggNDQ4LTIwMC42IDQ0OC00NDhTNzU5LjQgNjQgNTEyIDY0em0zMiA2NjRjMCA0LjQtMy42IDgtOCA4aC00OGMtNC40IDAtOC0zLjYtOC04VjQ1NmMwLTQuNCAzLjYtOCA4LThoNDhjNC40IDAgOCAzLjYgOCA4djI3MnptLTMyLTM0NGE0OC4wMSA0OC4wMSAwIDAxMC05NiA0OC4wMSA0OC4wMSAwIDAxMCA5NnoiIC8+PC9zdmc+)\n```\n\n----------------------------------------\n\nTITLE: SVG Data URI for Plus Icon\nDESCRIPTION: Base64 encoded SVG data URI for a plus icon with gray fill color.\nSOURCE: https://github.com/pubkey/rxdb/blob/master/docs/assets/js/main.bd539013.js.LICENSE.txt#2025-04-17_snippet_4\n\nLANGUAGE: svg\nCODE:\n```\n![plus](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQ4MiAxNTJoNjBxOCAwIDggOHY3MDRxMCA4LTggOGgtNjBxLTggMC04LThWMTYwcTAtOCA4LTh6IiAvPjxwYXRoIGQ9Ik0xOTIgNDc0aDY3MnE4IDAgOCA4djYwcTAgOC04IDhIMTYwcS04IDAtOC04di02MHEwLTggOC04eiIgLz48L3N2Zz4=)\n```"
  }
]
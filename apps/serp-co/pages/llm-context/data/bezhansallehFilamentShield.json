[
  {
    "owner": "bezhansalleh",
    "repo": "filament-shield",
    "content": "TITLE: Implementing Automatic Policy Discovery in Laravel\nDESCRIPTION: Code example for AuthServiceProvider or ServiceProvider to automatically detect and register policies, even when they are in subdirectories, by configuring the policy name guessing mechanism.\nSOURCE: https://github.com/bezhansalleh/filament-shield/blob/3.x/README.md#2025-04-20_snippet_18\n\nLANGUAGE: php\nCODE:\n```\npublic function boot(): void\n{\n    Gate::guessPolicyNamesUsing(function (string $modelClass) {\n        return str_replace('Models', 'Policies', $modelClass) . 'Policy';\n    });\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Page Protection with HasPageShield Trait\nDESCRIPTION: Example of implementing the HasPageShield trait in a Filament page to automatically enforce permission-based access control for the page.\nSOURCE: https://github.com/bezhansalleh/filament-shield/blob/3.x/README.md#2025-04-20_snippet_13\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nnamespace App\\Filament\\Pages;\n\nuse ...;\nuse BezhanSalleh\\FilamentShield\\Traits\\HasPageShield;\n\nclass MyPage extends Page\n{\n    use HasPageShield;\n    ...\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom Resource Permissions\nDESCRIPTION: PHP code snippet showing how to implement the HasShieldPermissions contract for custom resource permissions.\nSOURCE: https://github.com/bezhansalleh/filament-shield/blob/3.x/README.md#2025-04-20_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nnamespace BezhanSalleh\\FilamentShield\\Resources;\n\nuse BezhanSalleh\\FilamentShield\\Contracts\\HasShieldPermissions;\n...\n\nclass PostResource extends Resource implements HasShieldPermissions\n{\n    ...\n\n    public static function getPermissionPrefixes(): array\n    {\n        return [\n            'view',\n            'view_any',\n            'create',\n            'update',\n            'delete',\n            'delete_any',\n            'publish'\n        ];\n    }\n\n    ...\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Widget Protection with HasWidgetShield Trait\nDESCRIPTION: Example of implementing the HasWidgetShield trait in a Filament widget to automatically toggle widget visibility based on user permissions.\nSOURCE: https://github.com/bezhansalleh/filament-shield/blob/3.x/README.md#2025-04-20_snippet_16\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nnamespace App\\Filament\\Widgets;\n\nuse ...;\nuse BezhanSalleh\\FilamentShield\\Traits\\HasWidgetShield;\n\nclass IncomeWidget extends LineChartWidget\n{\n    use HasWidgetShield;\n    ...\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Permission in Policy\nDESCRIPTION: PHP code snippet demonstrating how to implement a custom permission check in a policy class.\nSOURCE: https://github.com/bezhansalleh/filament-shield/blob/3.x/README.md#2025-04-20_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n/**\n * Determine whether the user can publish posts.\n *\n * @param  \\App\\Models\\User  $admin\n * @return \\Illuminate\\Auth\\Access\\Response|bool\n */\npublic function publish(User $user)\n{\n    return $user->can('publish_post');\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Page Shield Hooks for Custom Behavior\nDESCRIPTION: Example showing how to implement hook methods with HasPageShield trait to execute custom code before and after the page booting process or before redirection when access is denied.\nSOURCE: https://github.com/bezhansalleh/filament-shield/blob/3.x/README.md#2025-04-20_snippet_14\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nnamespace App\\Filament\\Pages;\n\nuse ...;\nuse BezhanSalleh\\FilamentShield\\Traits\\HasPageShield;\n\nclass MyPage extends Page\n{\n    use HasPageShield;\n    ...\n\n    protected function beforeBooted : void() {\n        ...\n    }\n\n    protected function afterBooted : void() {\n        ...\n    }\n\n    /**\n     * Hook to perform an action before redirect if the user\n     * doesn't have access to the page.  \n     * */\n    protected function beforeShieldRedirects : void() {\n        ...\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Registering Third-Party Plugin Policies in Laravel 11\nDESCRIPTION: Example showing how to register policies for third-party plugins in Laravel 11 using the Gate facade in the AppServiceProvider boot method.\nSOURCE: https://github.com/bezhansalleh/filament-shield/blob/3.x/README.md#2025-04-20_snippet_20\n\nLANGUAGE: php\nCODE:\n```\n//AppServiceProvider.php\nuse Illuminate\\Support\\Facades\\Gate;\n...\nclass AppServiceProvider extends ServiceProvider\n{\n    ...\n   public function boot(): void\n    {\n        ...\n        Gate::policy(\\App\\Models\\Blog\\Author::class, \\App\\Policies\\Blog\\AuthorPolicy::class);\n        Gate::policy(\\Ramnzys\\FilamentEmailLog\\Models\\Email::class, \\App\\Policies\\EmailPolicy::class);\n    }\n```\n\n----------------------------------------\n\nTITLE: Registering Third-Party Plugin Policies in Laravel 10\nDESCRIPTION: Example showing how to register policies for third-party plugins in Laravel 10 by defining them in the $policies property of the AuthServiceProvider.\nSOURCE: https://github.com/bezhansalleh/filament-shield/blob/3.x/README.md#2025-04-20_snippet_19\n\nLANGUAGE: php\nCODE:\n```\n//AuthServiceProvider.php\n...\nclass AuthServiceProvider extends ServiceProvider\n{\n    ...\n    protected $policies = [\n        ...,\n        'App\\Models\\Blog\\Author' => 'App\\Policies\\Blog\\AuthorPolicy',\n        'Ramnzys\\FilamentEmailLog\\Models\\Email' => 'App\\Policies\\EmailPolicy'\n\n    ];\n```\n\n----------------------------------------\n\nTITLE: Customizing Permission Identifier Logic in FilamentShield\nDESCRIPTION: Example showing how to customize the permission identifier generation logic using the configurePermissionIdentifierUsing method. This example uses the model name as the permission identifier instead of the default behavior.\nSOURCE: https://github.com/bezhansalleh/filament-shield/blob/3.x/README.md#2025-04-20_snippet_11\n\nLANGUAGE: php\nCODE:\n```\nuse BezhanSalleh\\FilamentShield\\Facades\\FilamentShield;\n\nFilamentShield::configurePermissionIdentifierUsing(\n    fn($resource) => str($resource::getModel())\n        ->afterLast('\\\\')\n        ->lower()\n        ->toString()\n);\n```\n\n----------------------------------------\n\nTITLE: Customizing Page Shield Redirect Path\nDESCRIPTION: Example showing how to override the default redirect path when a user doesn't have permission to access a protected Filament page.\nSOURCE: https://github.com/bezhansalleh/filament-shield/blob/3.x/README.md#2025-04-20_snippet_15\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nnamespace App\\Filament\\Pages;\n\nuse ...;\nuse BezhanSalleh\\FilamentShield\\Traits\\HasPageShield;\n\nclass MyPage extends Page\n{\n    use HasPageShield;\n    ...\n\n    protected function getShieldRedirectPath(): string {\n        return '/'; // redirect to the root index...\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Tenancy for Filament Shield\nDESCRIPTION: PHP code snippet demonstrating how to manually configure tenancy for Filament Shield in a panel provider.\nSOURCE: https://github.com/bezhansalleh/filament-shield/blob/3.x/README.md#2025-04-20_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n->tenant(YourTenantModel::class)\n->tenantMiddleware([\n    \\BezhanSalleh\\FilamentShield\\Middleware\\SyncShieldTenant::class,\n], isPersistent: true)\n->plugins([\n    \\BezhanSalleh\\FilamentShield\\FilamentShieldPlugin::make(),\n])\n```\n\n----------------------------------------\n\nTITLE: Assigning Roles to Users With Tenancy in Filament Forms\nDESCRIPTION: Examples showing how to use Filament Forms' Select or CheckboxList components to assign roles to users when using multi-tenancy, including custom relationship saving.\nSOURCE: https://github.com/bezhansalleh/filament-shield/blob/3.x/README.md#2025-04-20_snippet_22\n\nLANGUAGE: php\nCODE:\n```\n// Using Select Component\nForms\\Components\\Select::make('roles')\n      ->relationship('roles', 'name')\n      ->saveRelationshipsUsing(function (Model $record, $state) {\n           $record->roles()->syncWithPivotValues($state, [config('permission.column_names.team_foreign_key') => getPermissionsTeamId()]);\n      })\n     ->multiple()\n     ->preload()\n     ->searchable(),\n\n// Using CheckboxList Component\nForms\\Components\\CheckboxList::make('roles')\n      ->relationship(name: 'roles', titleAttribute: 'name')\n      ->saveRelationshipsUsing(function (Model $record, $state) {\n           $record->roles()->syncWithPivotValues($state, [config('permission.column_names.team_foreign_key') => getPermissionsTeamId()]);\n      })\n     ->searchable(),\n```\n\n----------------------------------------\n\nTITLE: Assigning Roles to Users Without Tenancy in Filament Forms\nDESCRIPTION: Examples showing how to use Filament Forms' Select or CheckboxList components to assign roles to users when not using multi-tenancy.\nSOURCE: https://github.com/bezhansalleh/filament-shield/blob/3.x/README.md#2025-04-20_snippet_21\n\nLANGUAGE: php\nCODE:\n```\n// Using Select Component\nForms\\Components\\Select::make('roles')\n    ->relationship('roles', 'name')\n    ->multiple()\n    ->preload()\n    ->searchable(),\n                    \n// Using CheckboxList Component\nForms\\Components\\CheckboxList::make('roles')\n    ->relationship('roles', 'name')\n    ->searchable(),\n```\n\n----------------------------------------\n\nTITLE: Manually Registering Filament Shield Plugin\nDESCRIPTION: PHP code snippet showing how to manually register the Filament Shield plugin in a panel provider.\nSOURCE: https://github.com/bezhansalleh/filament-shield/blob/3.x/README.md#2025-04-20_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n->plugins([\n    \\BezhanSalleh\\FilamentShield\\FilamentShieldPlugin::make(),\n])\n```\n\n----------------------------------------\n\nTITLE: Configuring Policy Directory Path in FilamentShield\nDESCRIPTION: Configuration example showing how to customize the directory where policies are stored by modifying the policy_directory setting in the shield configuration file.\nSOURCE: https://github.com/bezhansalleh/filament-shield/blob/3.x/README.md#2025-04-20_snippet_17\n\nLANGUAGE: php\nCODE:\n```\n...\n'generator' => [\n    'option' => 'policies_and_permissions',\n    'policy_directory' => 'Policies',\n],\n...\n```\n\n----------------------------------------\n\nTITLE: Configuring Default Permission Identifier Generation in PHP\nDESCRIPTION: The default implementation for generating permission identifiers from resource class names. It extracts meaningful parts of the resource class name and converts it to a snake case format with double colons.\nSOURCE: https://github.com/bezhansalleh/filament-shield/blob/3.x/README.md#2025-04-20_snippet_10\n\nLANGUAGE: php\nCODE:\n```\nStr::of($resource)\n    ->afterLast('Resources\\\\')\n    ->before('Resource')\n    ->replace('\\\\', '')\n    ->snake()\n    ->replace('_', '::');\n```\n\n----------------------------------------\n\nTITLE: Prohibiting Destructive FilamentShield Commands\nDESCRIPTION: Examples showing how to prohibit potentially destructive FilamentShield commands in production environments by calling the prohibit method in a service provider's boot method.\nSOURCE: https://github.com/bezhansalleh/filament-shield/blob/3.x/README.md#2025-04-20_snippet_24\n\nLANGUAGE: php\nCODE:\n```\nuse BezhanSalleh\\FilamentShield\\FilamentShield;\nuse BezhanSalleh\\FilamentShield\\Commands;\n    public function boot(): void\n    {\n        // individually prohibit commands\n        Commands\\SetupCommand::prohibit($this->app->isProduction());\n        Commands\\InstallCommand::prohibit($this->app->isProduction());\n        Commands\\GenerateCommand::prohibit($this->app->isProduction());\n        Commands\\PublishCommand::prohibit($this->app->isProduction());\n        // or prohibit the above commands all at once\n        FilamentShield::prohibitDestructiveCommands($this->app->isProduction())\n    }\n```\n\n----------------------------------------\n\nTITLE: Customizing FilamentShield Layout via Plugin Configuration\nDESCRIPTION: Example showing how to customize the grid, section, and checkbox list layout settings through the FilamentShieldPlugin configuration in the panel setup.\nSOURCE: https://github.com/bezhansalleh/filament-shield/blob/3.x/README.md#2025-04-20_snippet_23\n\nLANGUAGE: php\nCODE:\n```\nuse BezhanSalleh\\FilamentShield\\FilamentShieldPlugin;\n\npublic function panel(Panel $panel): Panel\n{\n        return $panel\n            ...\n            ...\n            ->plugins([\n                FilamentShieldPlugin::make()\n                    ->gridColumns([\n                        'default' => 1,\n                        'sm' => 2,\n                        'lg' => 3\n                    ])\n                    ->sectionColumnSpan(1)\n                    ->checkboxListColumns([\n                        'default' => 1,\n                        'sm' => 2,\n                        'lg' => 4,\n                    ])\n                    ->resourceCheckboxListColumns([\n                        'default' => 1,\n                        'sm' => 2,\n                    ]),\n            ]);\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Up Filament Shield\nDESCRIPTION: Artisan commands to set up Filament Shield, with options for tenancy support.\nSOURCE: https://github.com/bezhansalleh/filament-shield/blob/3.x/README.md#2025-04-20_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nphp artisan shield:setup\n```\n\nLANGUAGE: bash\nCODE:\n```\nphp artisan shield:setup --tenant=App\\Models\\Team\n# Replace Team with your tenant model\n```\n\n----------------------------------------\n\nTITLE: Installing Filament Shield for a Panel\nDESCRIPTION: Artisan commands to install Filament Shield for a specific panel, with options for tenancy.\nSOURCE: https://github.com/bezhansalleh/filament-shield/blob/3.x/README.md#2025-04-20_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nphp artisan shield:install admin\n# Replace 'admin' with your panel ID\n```\n\nLANGUAGE: bash\nCODE:\n```\nphp artisan shield:install admin --tenant --generate-relationships\n# Replace 'admin' with your panel ID\n```\n\n----------------------------------------\n\nTITLE: FilamentShield Core Command Reference\nDESCRIPTION: List of available core commands in FilamentShield with their syntax and options for setting up, installing, generating permissions, creating super admin users, creating seeders, and publishing resources.\nSOURCE: https://github.com/bezhansalleh/filament-shield/blob/3.x/README.md#2025-04-20_snippet_25\n\nLANGUAGE: bash\nCODE:\n```\n# Setup Shield\nshield:setup [--fresh] [--minimal] [--tenant=]\n\n# Install Shield for a panel\nshield:install {panel} [--tenant] [--generate-relationships]\n\n# Generate permissions/policies\nshield:generate [options]\n\n# Create super admin\nshield:super-admin [--user=] [--panel=] [--tenant=]\n\n# Create seeder\nshield:seeder [options]\n\n# Publish Role Resource\nshield:publish {panel}\n```\n\n----------------------------------------\n\nTITLE: Adding HasRoles Trait to User Model\nDESCRIPTION: PHP code snippet showing how to add the HasRoles trait to the User model for Filament Shield.\nSOURCE: https://github.com/bezhansalleh/filament-shield/blob/3.x/README.md#2025-04-20_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nuse Spatie\\Permission\\Traits\\HasRoles;\n\nclass User extends Authenticatable\n{\n    use HasRoles;\n}\n```\n\n----------------------------------------\n\nTITLE: Changing Navigation Group in Translation Files\nDESCRIPTION: Example of modifying the navigation group for Roles and Permissions by changing the translation key value from 'Filament Shield' to 'User Management'.\nSOURCE: https://github.com/bezhansalleh/filament-shield/blob/3.x/README.md#2025-04-20_snippet_12\n\nLANGUAGE: php\nCODE:\n```\n'nav.group' => 'Filament Shield',\n```\n\nLANGUAGE: php\nCODE:\n```\n'nav.group' => 'User Management',\n```\n\n----------------------------------------\n\nTITLE: Generating Shield Permissions Command Options in Bash\nDESCRIPTION: Command line options for generating permissions in Filament Shield. Includes options for generating all entities, overriding generator options, specifying resources/pages/widgets, and handling exclusions.\nSOURCE: https://github.com/bezhansalleh/filament-shield/blob/3.x/README.md#2025-04-20_snippet_26\n\nLANGUAGE: bash\nCODE:\n```\n--all                     Generate for all entities\n--option=[OPTION]         Override generator option\n--resource=[RESOURCE]     Specific resources\n--page=[PAGE]            Specific pages  \n--widget=[WIDGET]        Specific widgets\n--exclude                Exclude entities\n--ignore-config-exclude  Ignore config excludes\n--panel[=PANEL]          Panel ID to get the components(resources, pages, widgets)\n```\n\n----------------------------------------\n\nTITLE: Shield Generate Command Options\nDESCRIPTION: New command-line options for the shield:generate command, including flags for generating permissions for all entities, specifying individual resources, and excluding specific entities.\nSOURCE: https://github.com/bezhansalleh/filament-shield/blob/3.x/CHANGELOG.md#2025-04-20_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n--all                    Generate permissions/policies for all entities\n--option[=OPTION]        Override the config generator option(policies_and_permissions,policies,permissions)\n--resource[=RESOURCE]    One or many resources separated by comma (,)\n--page[=PAGE]            One or many pages separated by comma (,)\n--widget[=WIDGET]        One or many widgets separated by comma (,)\n--exclude                Exclude the given entities during generation\n--ignore-config-exclude  Ignore config `exclude` option during generation\n```\n\n----------------------------------------\n\nTITLE: Shield Install Command Options\nDESCRIPTION: New command-line option for the shield:install command to set up Shield without generating permissions or creating a super-admin.\nSOURCE: https://github.com/bezhansalleh/filament-shield/blob/3.x/CHANGELOG.md#2025-04-20_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n--only            Only setups shield without generating permissions and creating super-admin\n```\n\n----------------------------------------\n\nTITLE: Configuring Auth Provider Model in Filament Shield\nDESCRIPTION: Configuration snippet to set the auth provider model in the Filament Shield config file.\nSOURCE: https://github.com/bezhansalleh/filament-shield/blob/3.x/README.md#2025-04-20_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n//config/filament-shield.php\n...\n    'auth_provider_model' => [\n        'fqcn' => 'App\\\\Models\\\\User',\n    ],\n...\n```\n\n----------------------------------------\n\nTITLE: Publishing Filament Shield Configuration\nDESCRIPTION: Artisan command to publish the Filament Shield configuration file.\nSOURCE: https://github.com/bezhansalleh/filament-shield/blob/3.x/README.md#2025-04-20_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nphp artisan vendor:publish --tag=\"filament-shield-config\"\n```\n\n----------------------------------------\n\nTITLE: Installing Filament Shield via Composer\nDESCRIPTION: Command to install the Filament Shield package using Composer.\nSOURCE: https://github.com/bezhansalleh/filament-shield/blob/3.x/README.md#2025-04-20_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncomposer require bezhansalleh/filament-shield\n```\n\n----------------------------------------\n\nTITLE: Publishing Translations in Laravel\nDESCRIPTION: Artisan command to publish translation files for Filament Shield package.\nSOURCE: https://github.com/bezhansalleh/filament-shield/blob/3.x/README.md#2025-04-20_snippet_27\n\nLANGUAGE: bash\nCODE:\n```\nphp artisan vendor:publish --tag=\"filament-shield-translations\"\n```\n\n----------------------------------------\n\nTITLE: Running Package Tests\nDESCRIPTION: Composer command to run the test suite for the Filament Shield package.\nSOURCE: https://github.com/bezhansalleh/filament-shield/blob/3.x/README.md#2025-04-20_snippet_28\n\nLANGUAGE: bash\nCODE:\n```\ncomposer test\n```\n\n----------------------------------------\n\nTITLE: Version History and Changelog Entries\nDESCRIPTION: Markdown formatted changelog entries detailing version updates, feature additions, bug fixes, and contributions for the Filament Shield package.\nSOURCE: https://github.com/bezhansalleh/filament-shield/blob/3.x/CHANGELOG.md#2025-04-20_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\n### What's Changed\n\n- New `upgrade` command\n- Removed `Setting` page \n- Added new config key for RoleResource `badge`\n- removed extra keys from lang files\n- Generate Policies for third-party packages\n```\n\n----------------------------------------\n\nTITLE: Version Release Details in Markdown\nDESCRIPTION: Changelog entries formatted in Markdown detailing version releases, changes, contributors and pull request references\nSOURCE: https://github.com/bezhansalleh/filament-shield/blob/3.x/CHANGELOG.md#2025-04-20_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n### What's Changed\n\n* Feature/performance boost by @bezhanSalleh in https://github.com/bezhanSalleh/filament-shield/pull/319\n  \n  > Filament `v3.2`\n  Republish `RoleResource`\n  \n* Update filament-shield.php by @noxoua in https://github.com/bezhanSalleh/filament-shield/pull/312\n  \n* Add traditional chinese translation by @cssf998811 in https://github.com/bezhanSalleh/filament-shield/pull/321\n```"
  }
]
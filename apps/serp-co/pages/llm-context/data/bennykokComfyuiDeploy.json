[
  {
    "owner": "bennykok",
    "repo": "comfyui-deploy",
    "content": "TITLE: Setting Up ComfyUI Deploy Plugin\nDESCRIPTION: Instructions for installing the ComfyUI Deploy plugin, which allows setting up a machine as a target and uploading workflows directly.\nSOURCE: https://github.com/bennykok/comfyui-deploy/blob/main/README.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncd custom_nodes\ngit clone https://github.com/BennyKok/comfyui-deploy.git\n```\n\n----------------------------------------\n\nTITLE: Installing ComfyUI Deploy via Git Clone\nDESCRIPTION: Instructions for installing the ComfyUI Deploy plugin by cloning the GitHub repository into the custom_nodes directory.\nSOURCE: https://github.com/bennykok/comfyui-deploy/blob/main/web/src/app/(docs)/docs/install/page.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncd custom_nodes\ngit clone https://github.com/BennyKok/comfyui-deploy.git\n```\n\n----------------------------------------\n\nTITLE: Listing Python Package Dependencies for ComfyUI Deploy\nDESCRIPTION: This snippet enumerates the required Python packages for the ComfyUI Deploy project. It includes libraries for various functionalities such as asynchronous file operations (aiofiles), data validation (pydantic), image processing (opencv-python), video handling (imageio-ffmpeg), compression (brotli), and data formatting (tabulate).\nSOURCE: https://github.com/bennykok/comfyui-deploy/blob/main/requirements.txt#2025-04-21_snippet_0\n\nLANGUAGE: Plain Text\nCODE:\n```\naiofiles\npydantic\nopencv-python\nimageio-ffmpeg\nbrotli\ntabulate\n# logfire\n```\n\n----------------------------------------\n\nTITLE: Defining Python Dependencies for ComfyUI Deployment\nDESCRIPTION: A requirements.txt file specifying the exact versions of Python packages needed for deploying ComfyUI. It includes Modal (without version specification) for serverless deployment, FastAPI 0.108.0 for building APIs, Pydantic 2.5.3 for data validation, Uvicorn 0.25.0 with standard extras for serving the application, and the Requests library for making HTTP requests.\nSOURCE: https://github.com/bennykok/comfyui-deploy/blob/main/builder/modal-builder/requirements.txt#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nmodal\nfastapi==0.108.0\npydantic==2.5.3\nuvicorn[standard]==0.25.0\nrequests\n```\n\n----------------------------------------\n\nTITLE: Configuring Environment Variables for Self-Hosting\nDESCRIPTION: Lists the required environment variables for self-hosting ComfyUI Deploy, including database, authentication, and storage configurations.\nSOURCE: https://github.com/bennykok/comfyui-deploy/blob/main/README.md#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nPOSTGRES_URL=\n\nNEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=\nCLERK_SECRET_KEY=\n\nSPACES_ENDPOINT=\"http://localhost:4566\"\nSPACES_ENDPOINT_CDN=\"http://localhost:4566\"\nSPACES_BUCKET=\"comfyui-deploy\"\nSPACES_KEY=\"xyz\"\nSPACES_SECRET=\"aaa\"\n\n# generate using -> openssl rand -hex 32\nJWT_SECRET=\n\n# r2 settings\nSPACES_REGION=\"auto\"\nSPACES_CDN_FORCE_PATH_STYLE=\"true\"\nSPACES_CDN_DONT_INCLUDE_BUCKET=\"true\"\n\n# digital ocean settings\nSPACES_REGION=\"nyc3\"\nSPACES_CDN_FORCE_PATH_STYLE=\"false\"\n\n# s3 settings\nSPACES_REGION=\"nyc3\"\nSPACES_CDN_DONT_INCLUDE_BUCKET=\"false\"\nSPACES_CDN_FORCE_PATH_STYLE=\"true\"\n```\n\n----------------------------------------\n\nTITLE: API Request Examples for Multiple Languages\nDESCRIPTION: Shows how to make API requests to list attachments using different programming languages including cURL, JavaScript, Python and PHP. Each example demonstrates proper authentication and parameter passing.\nSOURCE: https://github.com/bennykok/comfyui-deploy/blob/main/web/src/app/(docs)/docs/endpoints/page.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ncurl -G https://api.protocol.chat/v1/attachments \\\n  -H \"Authorization: Bearer {token}\" \\\n  -d conversation_id=\"xgQQXg3hrtjh7AvZ\" \\\n  -d limit=10\n```\n\nLANGUAGE: javascript\nCODE:\n```\nimport ApiClient from '@example/protocol-api'\n\nconst client = new ApiClient(token)\n\nawait client.attachments.list()\n```\n\nLANGUAGE: python\nCODE:\n```\nfrom protocol_api import ApiClient\n\nclient = ApiClient(token)\n\nclient.attachments.list()\n```\n\nLANGUAGE: php\nCODE:\n```\n$client = new \\Protocol\\ApiClient($token);\n\n$client->attachments->list();\n```\n\n----------------------------------------\n\nTITLE: Setting environment variables for Modal in .env file\nDESCRIPTION: Configuration of required environment variables for Modal API authentication. These credentials must be obtained from the Modal account settings page.\nSOURCE: https://github.com/bennykok/comfyui-deploy/blob/main/builder/modal-builder/README.md#2025-04-21_snippet_0\n\nLANGUAGE: shellscript\nCODE:\n```\nMODAL_TOKEN_ID=\nMODAL_TOKEN_SECRET=\n```\n\n----------------------------------------\n\nTITLE: Installing ComfyUI Deploy via Manager\nDESCRIPTION: Instructions for installing the ComfyUI Deploy plugin through the ComfyUI Manager interface.\nSOURCE: https://github.com/bennykok/comfyui-deploy/blob/main/web/src/app/(docs)/docs/install/page.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n// Install with ComfyUI Manager\nSearch `ComfyUI Deploy`\n```\n\n----------------------------------------\n\nTITLE: API Response Format in JSON\nDESCRIPTION: Example JSON response showing the structure of returned attachment data including fields like id, message_id, filename, file details and timestamps.\nSOURCE: https://github.com/bennykok/comfyui-deploy/blob/main/web/src/app/(docs)/docs/endpoints/page.mdx#2025-04-21_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"has_more\": false,\n  \"data\": [\n    {\n      \"id\": \"Nc6yKKMpcxiiFxp6\",\n      \"message_id\": \"LoPsJaMcPBuFNjg1\",\n      \"filename\": \"Invoice_room_service__Plaza_Hotel.pdf\",\n      \"file_url\": \"https://assets.protocol.chat/attachments/Invoice_room_service__Plaza_Hotel.pdf\",\n      \"file_type\": \"application/pdf\",\n      \"file_size\": 21352,\n      \"created_at\": 692233200\n    },\n    {\n      \"id\": \"hSIhXBhNe8X1d8Et\"\n      // ...\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Running Docker container locally with environment variables\nDESCRIPTION: Command to build and run the Docker container locally for testing purposes. This builds the image with a dev tag and maps port 8080, loading environment variables from a .env file.\nSOURCE: https://github.com/bennykok/comfyui-deploy/blob/main/builder/modal-builder/README.md#2025-04-21_snippet_1\n\nLANGUAGE: shellscript\nCODE:\n```\ndocker build -t bennykok/comfydeploy-builder:dev . && docker run --env-file .env -p 8080:8080 bennykok/comfydeploy-builder:dev\n```\n\n----------------------------------------\n\nTITLE: Configuring Vercel Build Command for Self-Hosting\nDESCRIPTION: Specifies the build command for self-hosting ComfyUI Deploy on Vercel, including building the Next.js app and running production migrations.\nSOURCE: https://github.com/bennykok/comfyui-deploy/blob/main/README.md#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnext build && bun run migrate-production\n```\n\n----------------------------------------\n\nTITLE: Deploying application to Fly.io\nDESCRIPTION: Commands for deploying the application to Fly.io, with different options for first-time deployment versus updates to an existing deployment.\nSOURCE: https://github.com/bennykok/comfyui-deploy/blob/main/builder/modal-builder/README.md#2025-04-21_snippet_7\n\nLANGUAGE: shellscript\nCODE:\n```\nfly launch\n```\n\n----------------------------------------\n\nTITLE: Setting environment secrets in Fly.io\nDESCRIPTION: Commands to securely store Modal API credentials as environment secrets in Fly.io. These will be available to the deployed application.\nSOURCE: https://github.com/bennykok/comfyui-deploy/blob/main/builder/modal-builder/README.md#2025-04-21_snippet_5\n\nLANGUAGE: shellscript\nCODE:\n```\nfly secrets set MODAL_TOKEN_ID=\nfly secrets set MODAL_TOKEN_SECRET=\n```\n\n----------------------------------------\n\nTITLE: Running Next.js Development Server with Package Managers\nDESCRIPTION: Commands to start the Next.js development server using npm, yarn, pnpm, or bun. After running any of these commands, the application will be available at http://localhost:3000.\nSOURCE: https://github.com/bennykok/comfyui-deploy/blob/main/web/README.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm run dev\n# or\nyarn dev\n# or\npnpm dev\n# or\nbun dev\n```\n\n----------------------------------------\n\nTITLE: Setting Up Vercel Install Command for Self-Hosting\nDESCRIPTION: Defines the install command for self-hosting ComfyUI Deploy on Vercel, using Bun package manager.\nSOURCE: https://github.com/bennykok/comfyui-deploy/blob/main/README.md#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nnpx bun@1.0.16 install\n```\n\n----------------------------------------\n\nTITLE: Updating existing deployment on Fly.io\nDESCRIPTION: Command for updating an existing deployment on Fly.io with new code changes.\nSOURCE: https://github.com/bennykok/comfyui-deploy/blob/main/builder/modal-builder/README.md#2025-04-21_snippet_8\n\nLANGUAGE: shellscript\nCODE:\n```\nfly deploy\n```\n\n----------------------------------------\n\nTITLE: Configuring application name in Fly.io\nDESCRIPTION: Example configuration in fly.toml file for setting the application name for deployment to Fly.io.\nSOURCE: https://github.com/bennykok/comfyui-deploy/blob/main/builder/modal-builder/README.md#2025-04-21_snippet_6\n\nLANGUAGE: shellscript\nCODE:\n```\n// model-builder/fly.toml\napp = <APP_NAME>\n```\n\n----------------------------------------\n\nTITLE: Defining Metadata Configuration in JavaScript\nDESCRIPTION: Exports metadata configuration object containing title and description for the Workflow API documentation page.\nSOURCE: https://github.com/bennykok/comfyui-deploy/blob/main/web/src/app/(docs)/docs/endpoints/page.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport const metadata = {\n  title: 'Workflow API',\n  description:\n    'Get started with API integration to run any deploy ComfyUI workflow',\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Fly.io CLI on Mac/Linux using Homebrew\nDESCRIPTION: Command for installing Fly.io command-line interface on Mac/Linux systems using the Homebrew package manager.\nSOURCE: https://github.com/bennykok/comfyui-deploy/blob/main/builder/modal-builder/README.md#2025-04-21_snippet_2\n\nLANGUAGE: shellscript\nCODE:\n```\nbrew install flyctl // mac only\n```\n\n----------------------------------------\n\nTITLE: Installing Fly.io CLI on Mac/Linux using curl\nDESCRIPTION: Alternative installation method for the Fly.io CLI on Mac/Linux systems using a curl-based install script.\nSOURCE: https://github.com/bennykok/comfyui-deploy/blob/main/builder/modal-builder/README.md#2025-04-21_snippet_3\n\nLANGUAGE: shellscript\nCODE:\n```\ncurl -L https://fly.io/install.sh | sh\n```\n\n----------------------------------------\n\nTITLE: Installing Fly.io CLI on Windows using PowerShell\nDESCRIPTION: Command for installing the Fly.io command-line interface on Windows systems using a PowerShell install script.\nSOURCE: https://github.com/bennykok/comfyui-deploy/blob/main/builder/modal-builder/README.md#2025-04-21_snippet_4\n\nLANGUAGE: shellscript\nCODE:\n```\npwsh -Command \"iwr https://fly.io/install.ps1 -useb | iex\"\n```\n\n----------------------------------------\n\nTITLE: Setting Page Metadata for ComfyUI Deploy Docs\nDESCRIPTION: Exports metadata configuration object containing the page title and description for the documentation site.\nSOURCE: https://github.com/bennykok/comfyui-deploy/blob/main/web/src/app/(docs)/docs/page.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport const metadata = {\n  title: 'Comfy Deploy Documentation',\n  description:\n    'Get your comfy deploy setup running in minutes. Learn how to deploy your generative workflow to comfy deploy.',\n}\n```\n\n----------------------------------------\n\nTITLE: Importing React Components for Documentation Page\nDESCRIPTION: Imports required React components for the documentation page including Guides, Resources, and HeroPattern components from the docs component directory.\nSOURCE: https://github.com/bennykok/comfyui-deploy/blob/main/web/src/app/(docs)/docs/page.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Guides } from '@/components/docs/Guides'\nimport { Resources } from '@/components/docs/Resources'\nimport { HeroPattern } from '@/components/docs/HeroPattern'\n```"
  }
]
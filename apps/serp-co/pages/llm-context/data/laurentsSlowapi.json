[
  {
    "owner": "laurents",
    "repo": "slowapi",
    "content": "TITLE: Implementing Rate Limiting in FastAPI Application\nDESCRIPTION: Example of setting up rate limiting in a FastAPI application using SlowApi. It shows how to initialize the limiter, add exception handling, and apply rate limits to multiple routes.\nSOURCE: https://github.com/laurents/slowapi/blob/master/docs/index.md#2025-04-23_snippet_2\n\nLANGUAGE: python\nCODE:\n```\nfrom fastapi import FastAPI, Request, Response\nfrom slowapi import Limiter, _rate_limit_exceeded_handler\nfrom slowapi.util import get_remote_address\nfrom slowapi.errors import RateLimitExceeded\n\nlimiter = Limiter(key_func=get_remote_address)\napp = FastAPI()\napp.state.limiter = limiter\napp.add_exception_handler(RateLimitExceeded, _rate_limit_exceeded_handler)\n\n# Note: the route decorator must be above the limit decorator, not below it\n@app.get(\"/home\")\n@limiter.limit(\"5/minute\")\nasync def home(request: Request):\n    return Response(\"test\")\n\n@app.get(\"/mars\")\n@limiter.limit(\"5/minute\")\nasync def mars(request: Request, response: Response):\n    return {\"key\": \"value\"}\n```\n\n----------------------------------------\n\nTITLE: Implementing Rate Limiting in Starlette Application\nDESCRIPTION: Example of setting up rate limiting in a Starlette application using SlowApi. It demonstrates initializing the limiter, adding exception handling, and applying a rate limit to a route.\nSOURCE: https://github.com/laurents/slowapi/blob/master/docs/index.md#2025-04-23_snippet_1\n\nLANGUAGE: python\nCODE:\n```\nfrom starlette.applications import Starlette\nfrom starlette.responses import PlainTextResponse\nfrom starlette.requests import Request\nfrom slowapi import Limiter, _rate_limit_exceeded_handler\nfrom slowapi.util import get_remote_address\nfrom slowapi.errors import RateLimitExceeded\n\nlimiter = Limiter(key_func=get_remote_address)\napp = Starlette()\napp.state.limiter = limiter\napp.add_exception_handler(RateLimitExceeded, _rate_limit_exceeded_handler)\n\n@limiter.limit(\"5/minute\")\nasync def homepage(request: Request):\n    return PlainTextResponse(\"test\")\n\napp.add_route(\"/home\", homepage)\n```\n\n----------------------------------------\n\nTITLE: Implementing Global Rate Limiting with Starlette\nDESCRIPTION: Sets up a global rate limit of 1 request per minute for all routes using SlowAPI with Starlette. Includes middleware setup and exception handling.\nSOURCE: https://github.com/laurents/slowapi/blob/master/docs/examples.md#2025-04-23_snippet_0\n\nLANGUAGE: python\nCODE:\n```\n    from starlette.applications import Starlette\n    from slowapi import Limiter, _rate_limit_exceeded_handler\n    from slowapi.util import get_remote_address\n    from slowapi.middleware import SlowAPIMiddleware\n    from slowapi.errors import RateLimitExceeded\n\n    limiter = Limiter(key_func=get_remote_address, default_limits=[\"1/minute\"])\n    app = Starlette()\n    app.state.limiter = limiter\n    app.add_exception_handler(RateLimitExceeded, _rate_limit_exceeded_handler)\n    app.add_middleware(SlowAPIMiddleware)\n\n    # this will be limited by the default_limits\n    async def homepage(request: Request):\n        return PlainTextResponse(\"Only once per minute\")\n\n    app.add_route(\"/home\", homepage)\n```\n\n----------------------------------------\n\nTITLE: Implementing Rate Limited Endpoint - Correct Usage\nDESCRIPTION: Example showing the correct way to implement a rate-limited endpoint with explicit request parameter\nSOURCE: https://github.com/laurents/slowapi/blob/master/README.md#2025-04-23_snippet_1\n\nLANGUAGE: python\nCODE:\n```\n    @limiter.limit(\"5/minute\")\n    async def myendpoint(request: Request)\n        pass\n```\n\n----------------------------------------\n\nTITLE: Correct Decorator Order for SlowApi Rate Limiting\nDESCRIPTION: Demonstration of the correct order of decorators when using SlowApi with FastAPI. The route decorator must be placed above the limit decorator for proper functionality.\nSOURCE: https://github.com/laurents/slowapi/blob/master/docs/index.md#2025-04-23_snippet_3\n\nLANGUAGE: python\nCODE:\n```\n@router.get(\"/test\")\n@limiter.limit(\"2/minute\")\nasync def test(\n    request: Request\n):\nreturn \"hi\"\n```\n\n----------------------------------------\n\nTITLE: Exempting Routes from Rate Limiting\nDESCRIPTION: Shows how to exempt specific routes from the global rate limit using the @limiter.exempt decorator.\nSOURCE: https://github.com/laurents/slowapi/blob/master/docs/examples.md#2025-04-23_snippet_1\n\nLANGUAGE: python\nCODE:\n```\n    @app.route(\"/someroute\")\n    @limiter.exempt\n    def t(request: Request):\n        return PlainTextResponse(\"I'm unlimited\")\n```\n\n----------------------------------------\n\nTITLE: Limiter Class Implementation (Python)\nDESCRIPTION: Core rate limiting class with methods for imposing rate limits and shared rate limits across endpoints. References the RateLimitItem functionality from the alisaifee/limits library.\nSOURCE: https://github.com/laurents/slowapi/blob/master/docs/api.md#2025-04-23_snippet_0\n\nLANGUAGE: python\nCODE:\n```\n:::slowapi.extension.Limiter\n    :docstring:\n    :members: limit shared_limit\n```\n\n----------------------------------------\n\nTITLE: ASGI Middleware Configuration\nDESCRIPTION: Shows how to configure both WSGI and ASGI middleware for rate limiting.\nSOURCE: https://github.com/laurents/slowapi/blob/master/docs/examples.md#2025-04-23_snippet_6\n\nLANGUAGE: python\nCODE:\n```\napp = Starlette() # or FastAPI()\napp.add_middleware(SlowAPIMiddleware)\n```\n\nLANGUAGE: python\nCODE:\n```\napp = Starlette() # or FastAPI()\napp.add_middleware(SlowAPIASGIMiddleware)\n```\n\n----------------------------------------\n\nTITLE: Redis Backend Configuration\nDESCRIPTION: Configures Redis as the backend storage for rate limiting using a connection URI.\nSOURCE: https://github.com/laurents/slowapi/blob/master/docs/examples.md#2025-04-23_snippet_4\n\nLANGUAGE: python\nCODE:\n```\nlimiter = Limiter(key_func=get_remote_address, storage_uri=\"redis://<host>:<port>/n\")\n```\n\n----------------------------------------\n\nTITLE: Custom Cost Rate Limiting\nDESCRIPTION: Implements custom rate limiting based on request size instead of request count.\nSOURCE: https://github.com/laurents/slowapi/blob/master/docs/examples.md#2025-04-23_snippet_5\n\nLANGUAGE: python\nCODE:\n```\n    def get_hit_cost(request: Request) -> int:\n        return len(request)\n\n    @app.route(\"/someroute\")\n    @limiter.limit(\"100/minute\", cost=get_hit_cost)\n    def t(request: Request):\n        return PlainTextResponse(\"I'm limited by the request size\")\n```\n\n----------------------------------------\n\nTITLE: Key Style Configuration\nDESCRIPTION: Shows different key style configurations for rate limiting storage, including URL-based and endpoint-based approaches.\nSOURCE: https://github.com/laurents/slowapi/blob/master/docs/examples.md#2025-04-23_snippet_8\n\nLANGUAGE: python\nCODE:\n```\nlimiter = Limiter(key_func=lambda: \"mock\", default_limits=[\"1/minute\"], key_style=\"url\")\n```\n\nLANGUAGE: python\nCODE:\n```\nlimiter = Limiter(key_func=lambda: \"mock\", default_limits=[\"1/minute\"], key_style=\"endpoint\")\n```\n\n----------------------------------------\n\nTITLE: Runtime Limiter Configuration\nDESCRIPTION: Shows how to toggle the rate limiter during runtime.\nSOURCE: https://github.com/laurents/slowapi/blob/master/docs/examples.md#2025-04-23_snippet_3\n\nLANGUAGE: python\nCODE:\n```\n    limiter.enabled = False\n```\n\n----------------------------------------\n\nTITLE: Disabling Rate Limiter\nDESCRIPTION: Demonstrates how to disable the rate limiter globally by setting enabled=False in the constructor.\nSOURCE: https://github.com/laurents/slowapi/blob/master/docs/examples.md#2025-04-23_snippet_2\n\nLANGUAGE: python\nCODE:\n```\n    limiter = Limiter(key_func=get_remote_address, enabled=False)\n\n    @app.route(\"/someroute\")\n    @limiter.exempt\n    def t(request: Request):\n        return PlainTextResponse(\"I'm unlimited\")\n```\n\n----------------------------------------\n\nTITLE: Remote Address Retrieval Utility (Python)\nDESCRIPTION: Utility function for getting remote addresses from requests.\nSOURCE: https://github.com/laurents/slowapi/blob/master/docs/api.md#2025-04-23_snippet_4\n\nLANGUAGE: python\nCODE:\n```\n:::slowapi.util.get_remote_address\n    :docstring:\n```\n\n----------------------------------------\n\nTITLE: IP Address Retrieval Utility (Python)\nDESCRIPTION: Utility function for getting IP addresses from requests.\nSOURCE: https://github.com/laurents/slowapi/blob/master/docs/api.md#2025-04-23_snippet_3\n\nLANGUAGE: python\nCODE:\n```\n:::slowapi.util.get_ipaddr\n    :docstring:\n```\n\n----------------------------------------\n\nTITLE: Rate Limit Group Wrapper Implementation (Python)\nDESCRIPTION: Wrapper class for managing groups of related rate limits together.\nSOURCE: https://github.com/laurents/slowapi/blob/master/docs/api.md#2025-04-23_snippet_2\n\nLANGUAGE: python\nCODE:\n```\n:::slowapi.wrappers.LimitGroup\n    :docstring:\n```\n\n----------------------------------------\n\nTITLE: Rate Limit Wrapper Implementation (Python)\nDESCRIPTION: Wrapper class around RateLimitItem from alisaifee/limits library for handling individual rate limits.\nSOURCE: https://github.com/laurents/slowapi/blob/master/docs/api.md#2025-04-23_snippet_1\n\nLANGUAGE: python\nCODE:\n```\n:::slowapi.wrappers.Limit\n    :docstring:\n```\n\n----------------------------------------\n\nTITLE: Route Parameter Example\nDESCRIPTION: Demonstrates route definition with URL parameters.\nSOURCE: https://github.com/laurents/slowapi/blob/master/docs/examples.md#2025-04-23_snippet_7\n\nLANGUAGE: python\nCODE:\n```\n@app.route(\"/some_route/{some_param}\")\ndef my_func(some_param):\n    ...\n```\n\n----------------------------------------\n\nTITLE: Implementing Rate Limited Endpoint - Incorrect Usage\nDESCRIPTION: Example showing the incorrect implementation of a rate-limited endpoint without request parameter\nSOURCE: https://github.com/laurents/slowapi/blob/master/README.md#2025-04-23_snippet_2\n\nLANGUAGE: python\nCODE:\n```\n    @limiter.limit(\"5/minute\")\n    async def myendpoint()\n        pass\n```\n\n----------------------------------------\n\nTITLE: Incorrect Decorator Order for SlowApi Rate Limiting\nDESCRIPTION: Example of incorrect decorator order when using SlowApi with FastAPI. This order will not work as expected.\nSOURCE: https://github.com/laurents/slowapi/blob/master/docs/index.md#2025-04-23_snippet_4\n\nLANGUAGE: python\nCODE:\n```\n@limiter.limit(\"2/minute\")\n@router.get(\"/test\")\nasync def test(\n    request: Request\n):\nreturn \"hi\"\n```\n\n----------------------------------------\n\nTITLE: Dependency Specifications for SlowAPI Project\nDESCRIPTION: Comprehensive list of Python package dependencies with their version requirements. Includes conditional dependencies based on Python version and operating system platform. The core dependencies appear to be FastAPI, Starlette, and limits packages, suggesting this is a rate-limiting extension for FastAPI.\nSOURCE: https://github.com/laurents/slowapi/blob/master/docs/requirements.txt#2025-04-23_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nappdirs==1.4.3\natomicwrites==1.3.0; sys_platform == \"win32\"\nattrs==19.3.0\nblack==23.3.0\ncertifi==2022.12.7\nchardet==3.0.4\nclick==7.1.2\ncolorama==0.4.3; sys_platform == \"win32\"\ndataclasses==0.6; python_version < \"3.7\"\nfastapi==0.65.2\nfuture==0.18.3\nhiro==0.5.1\nidna==2.9\nimportlib-metadata==1.5.0; python_version < \"3.8\"\nisort==4.3.21\njinja2==2.11.3\njoblib==0.16.0; python_version > \"2.7\"\nlimits==1.5.1\nlivereload==2.6.3\nlunr==0.5.8\nlxml==4.9.1\nmarkdown==3.2.2\nmarkupsafe==1.1.1\nmkautodoc==0.1.0\nmkdocs==1.2.3\nmock==4.0.1\nmore-itertools==8.2.0\nmypy==0.761\nmypy-extensions==0.4.3\nnltk==3.6.6; python_version > \"2.7\"\npackaging==20.3\npathspec==0.7.0\npluggy==0.13.1\npy==1.10.0\npydantic==1.6.2\npyparsing==2.4.6\npytest==5.3.5\npyyaml==5.4\nredis==4.3.6\nregex==2020.2.20\nrequests==2.23.0\nsix==1.14.0\nstarlette==0.25.0\ntoml==0.10.0\ntornado==6.0.4\ntqdm==4.50.0; python_version > \"2.7\"\ntyped-ast==1.4.1\ntyping-extensions==3.7.4.1\nurllib3==1.26.5\nwcwidth==0.1.8\nzipp==3.1.0; python_version < \"3.8\"\n```\n\n----------------------------------------\n\nTITLE: Setting Up Development Environment for SlowApi\nDESCRIPTION: Commands for setting up a development environment for SlowApi using Poetry package manager and running tests with pytest.\nSOURCE: https://github.com/laurents/slowapi/blob/master/docs/index.md#2025-04-23_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\n$ poetry install\n$ pytest\n```\n\n----------------------------------------\n\nTITLE: Setting Up Development Environment\nDESCRIPTION: Commands for setting up the development environment using Poetry package manager and running tests\nSOURCE: https://github.com/laurents/slowapi/blob/master/README.md#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n$ poetry install\n```\n\nLANGUAGE: bash\nCODE:\n```\n$ pytest\n```\n\n----------------------------------------\n\nTITLE: Releasing a New Version of SlowApi\nDESCRIPTION: Steps for releasing a new version of SlowApi, including updating the changelog, bumping the version number, and publishing the package.\nSOURCE: https://github.com/laurents/slowapi/blob/master/docs/index.md#2025-04-23_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\n$ poetry build\n$ poetry publish\n```\n\n----------------------------------------\n\nTITLE: Installing SlowApi Package\nDESCRIPTION: Installation command for the SlowApi package using pip package manager\nSOURCE: https://github.com/laurents/slowapi/blob/master/README.md#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ pip install slowapi\n```\n\n----------------------------------------\n\nTITLE: Installing SlowApi via pip\nDESCRIPTION: Command to install SlowApi using pip package manager.\nSOURCE: https://github.com/laurents/slowapi/blob/master/docs/index.md#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ pip install slowapi\n```"
  }
]
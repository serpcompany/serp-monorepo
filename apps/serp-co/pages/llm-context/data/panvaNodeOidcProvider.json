[
  {
    "owner": "panva",
    "repo": "node-oidc-provider",
    "content": "TITLE: Initializing and Configuring oidc-provider in Node.js\nDESCRIPTION: Basic setup of the oidc-provider module showing how to create a provider instance with a configuration that includes a client definition and start the server on port 3000. This example demonstrates the minimal code required to get an OpenID Connect provider running.\nSOURCE: https://github.com/panva/node-oidc-provider/blob/main/README.md#2025-04-20_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport * as oidc from \"oidc-provider\";\n\nconst provider = new oidc.Provider(\"http://localhost:3000\", {\n  // refer to the documentation for other available configuration\n  clients: [\n    {\n      client_id: \"foo\",\n      client_secret: \"bar\",\n      redirect_uris: [\"http://lvh.me:8080/cb\"],\n      // ... other client properties\n    },\n  ],\n});\n\nconst server = oidc.listen(3000, () => {\n  console.log(\n    \"oidc-provider listening on port 3000, check http://localhost:3000/.well-known/openid-configuration\",\n  );\n});\n```\n\n----------------------------------------\n\nTITLE: OIDC Provider Event Signatures\nDESCRIPTION: Type definitions for various events emitted by the OIDC Provider. These events cover authentication, token management, session handling, and error scenarios across different endpoints.\nSOURCE: https://github.com/panva/node-oidc-provider/blob/main/docs/events.md#2025-04-20_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ninterface OIDCProviderEvents {\n  \"introspection.error\": (ctx: Context, error: Error) => void;\n  \"replay_detection.destroyed\": (token: Token) => void;\n  \"replay_detection.saved\": (token: Token) => void;\n  \"pushed_authorization_request.error\": (ctx: Context, error: Error) => void;\n  \"pushed_authorization_request.success\": (ctx: Context, client: Client) => void;\n  \"pushed_authorization_request.destroyed\": (token: Token) => void;\n  \"pushed_authorization_request.saved\": (token: Token) => void;\n  \"refresh_token.consumed\": (token: Token) => void;\n  \"refresh_token.destroyed\": (token: Token) => void;\n  \"refresh_token.saved\": (token: Token) => void;\n  \"registration_access_token.destroyed\": (token: Token) => void;\n  \"registration_access_token.saved\": (token: Token) => void;\n  \"registration_create.error\": (ctx: Context, error: Error) => void;\n  \"registration_create.success\": (ctx: Context, client: Client) => void;\n  \"registration_delete.error\": (ctx: Context, error: Error) => void;\n  \"registration_delete.success\": (ctx: Context, client: Client) => void;\n  \"registration_read.error\": (ctx: Context, error: Error) => void;\n  \"registration_update.error\": (ctx: Context, error: Error) => void;\n  \"registration_update.success\": (ctx: Context, client: Client) => void;\n  \"revocation.error\": (ctx: Context, error: Error) => void;\n  \"server_error\": (ctx: Context, error: Error) => void;\n  \"session.destroyed\": (session: Session) => void;\n  \"session.saved\": (session: Session) => void;\n  \"userinfo.error\": (ctx: Context, error: Error) => void;\n}\n```\n\n----------------------------------------\n\nTITLE: OIDC Provider Events Table\nDESCRIPTION: Markdown table documenting all available events in the OIDC Provider, including event names, handler parameters, and emission conditions.\nSOURCE: https://github.com/panva/node-oidc-provider/blob/main/docs/events.md#2025-04-20_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n| event name                               | event handler function parameters      | Emitted ..                                                                                                                                                                                                      |\n| ---------------------------------------- | -------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| `access_token.destroyed`                 | `(token)`                              | ... whenever an access token is destroyed                                                                                                                                                                       |\n| `access_token.saved`                     | `(token)`                              | ... whenever an opaque access token is saved                                                                                                                                                                    |\n| `access_token.issued`                    | `(token)`                              | ... whenever a structured access token is issued                                                                                                                                                                |\n```\n\n----------------------------------------\n\nTITLE: Updating Client Metadata Validation in JavaScript\nDESCRIPTION: This snippet shows a bug fix for ignoring certain client metadata when JWT authentication is not allowed. It demonstrates how the library handles client configuration validation.\nSOURCE: https://github.com/panva/node-oidc-provider/blob/main/CHANGELOG.md#2025-04-20_snippet_21\n\nLANGUAGE: JavaScript\nCODE:\n```\nignore `*_endpoint_auth_signing_alg` client metadata when `_jwt` auth is not allowed\n```\n\n----------------------------------------\n\nTITLE: Refactoring certificate handling to JWKS\nDESCRIPTION: This code refactoring changes the way certificates are handled, moving to JSON Web Key Sets (JWKS) for improved security and flexibility.\nSOURCE: https://github.com/panva/node-oidc-provider/blob/main/CHANGELOG.md#2025-04-20_snippet_18\n\nLANGUAGE: Git\nCODE:\n```\nchange certificates to jwks ([a75e478](https://github.com/panva/node-oidc-provider/commit/a75e478))\n```\n\n----------------------------------------\n\nTITLE: Correcting client authentication method algorithm handling\nDESCRIPTION: This change ensures that the client authentication method algorithm no longer mixes up symmetrical and asymmetrical algorithms.\nSOURCE: https://github.com/panva/node-oidc-provider/blob/main/CHANGELOG.md#2025-04-20_snippet_15\n\nLANGUAGE: Git\nCODE:\n```\n`*_jwt` client auth method alg no longer mixes up (a)symmetrical ([1771655](https://github.com/panva/node-oidc-provider/commit/1771655))\n```\n\n----------------------------------------\n\nTITLE: Optimizing Initial Authorization Request in JavaScript\nDESCRIPTION: This snippet shows an optimization to omit saving an empty session on the initial authorize request. It demonstrates how the library improves performance for authorization flows.\nSOURCE: https://github.com/panva/node-oidc-provider/blob/main/CHANGELOG.md#2025-04-20_snippet_23\n\nLANGUAGE: JavaScript\nCODE:\n```\nomit saving an empty session on initial authorize request\n```\n\n----------------------------------------\n\nTITLE: Handling Session Changes in JavaScript\nDESCRIPTION: This code snippet addresses a bug fix for issuing new session identifiers when a session changes. It shows how the library manages session state and security.\nSOURCE: https://github.com/panva/node-oidc-provider/blob/main/CHANGELOG.md#2025-04-20_snippet_22\n\nLANGUAGE: JavaScript\nCODE:\n```\nissue new session identifiers when session changes\n```\n\n----------------------------------------\n\nTITLE: Fixing symmetric key derivation for JWT responses\nDESCRIPTION: This commit fixes symmetric key derivation for JWT introspection and authorization endpoint responses.\nSOURCE: https://github.com/panva/node-oidc-provider/blob/main/CHANGELOG.md#2025-04-20_snippet_14\n\nLANGUAGE: Git\nCODE:\n```\nfixed symmetric key derivation for JWT introspection endpoint response ([1a50c82](https://github.com/panva/node-oidc-provider/commit/1a50c82))\n```\n\n----------------------------------------\n\nTITLE: Enhancing cookie security for WebKit browsers\nDESCRIPTION: This change avoids sending \"samesite=none\" to WebKit browsers due to a known bug, improving cookie security.\nSOURCE: https://github.com/panva/node-oidc-provider/blob/main/CHANGELOG.md#2025-04-20_snippet_17\n\nLANGUAGE: Git\nCODE:\n```\navoid sending \"samesite=none\" to webkit browsers due to their bug ([9c6e05b](https://github.com/panva/node-oidc-provider/commit/9c6e05b))\n```\n\n----------------------------------------\n\nTITLE: Updating Interaction Details Method in JavaScript\nDESCRIPTION: The provider.interactionDetails() method now requires both request and response objects as parameters.\nSOURCE: https://github.com/panva/node-oidc-provider/blob/main/CHANGELOG.md#2025-04-20_snippet_7\n\nLANGUAGE: JavaScript\nCODE:\n```\nconst details = await provider.interactionDetails(req, res);\n```\n\n----------------------------------------\n\nTITLE: Changing Provider Callback to Function in JavaScript\nDESCRIPTION: The provider.callback property is now a function instead of a getter method.\nSOURCE: https://github.com/panva/node-oidc-provider/blob/main/CHANGELOG.md#2025-04-20_snippet_6\n\nLANGUAGE: JavaScript\nCODE:\n```\nprovider.callback = () => 'https://example.com/cb';\n```\n\n----------------------------------------\n\nTITLE: Improving CORS request handling\nDESCRIPTION: This commit allows all incoming headers for CORS requests, improving cross-origin resource sharing capabilities.\nSOURCE: https://github.com/panva/node-oidc-provider/blob/main/CHANGELOG.md#2025-04-20_snippet_16\n\nLANGUAGE: Git\nCODE:\n```\nallow all incoming headers for CORS requests ([3d2c8e4](https://github.com/panva/node-oidc-provider/commit/3d2c8e4))\n```\n\n----------------------------------------\n\nTITLE: Updating Token Issuing Method in JavaScript\nDESCRIPTION: The idToken.issue() method now requires a 'use' option to be specified when called.\nSOURCE: https://github.com/panva/node-oidc-provider/blob/main/CHANGELOG.md#2025-04-20_snippet_5\n\nLANGUAGE: JavaScript\nCODE:\n```\nidToken.issue(client, { use: 'id_token' });\n```\n\n----------------------------------------\n\nTITLE: Client HTTP Configuration Properties for Node OIDC Provider\nDESCRIPTION: Defines three properties for HTTP client configuration: timeout (number), agent (HTTPS or HTTP Agent instance), and lookup (DNS lookup option).\nSOURCE: https://github.com/panva/node-oidc-provider/blob/main/CHANGELOG.md#2025-04-20_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nthree properties {\n  `timeout`: number,\n  `agent`: instanceof https.Agent || http.Agent,\n  `lookup`: dns.lookup like option\n}\n```\n\n----------------------------------------\n\nTITLE: Consolidating interaction policy and URL configuration\nDESCRIPTION: This refactoring consolidates the interaction policy and URL configuration, simplifying the overall setup process.\nSOURCE: https://github.com/panva/node-oidc-provider/blob/main/CHANGELOG.md#2025-04-20_snippet_19\n\nLANGUAGE: Git\nCODE:\n```\nconsolidate interaction policy and url configuration ([5c0ba04](https://github.com/panva/node-oidc-provider/commit/5c0ba04))\n```\n\n----------------------------------------\n\nTITLE: Removing provider initialization method\nDESCRIPTION: This change removes the provider.initialize() method, potentially changing how the provider is set up and configured.\nSOURCE: https://github.com/panva/node-oidc-provider/blob/main/CHANGELOG.md#2025-04-20_snippet_20\n\nLANGUAGE: Git\nCODE:\n```\nremove provider.initialize() ([ec71ed0](https://github.com/panva/node-oidc-provider/commit/ec71ed0))\n```\n\n----------------------------------------\n\nTITLE: TypeScript RP-Initiated Logout Types\nDESCRIPTION: Addition of missing rpInitiatedLogout types to TypeScript definitions.\nSOURCE: https://github.com/panva/node-oidc-provider/blob/main/CHANGELOG.md#2025-04-20_snippet_11\n\n\n\n----------------------------------------\n\nTITLE: TypeScript Adapter Factory Types Update\nDESCRIPTION: Fix to allow adapter factory in TypeScript type definitions.\nSOURCE: https://github.com/panva/node-oidc-provider/blob/main/CHANGELOG.md#2025-04-20_snippet_9\n\n\n\n----------------------------------------\n\nTITLE: TypeScript AdapterPayload Extension\nDESCRIPTION: Update to extend AdapterPayload from AnyClientMetadata in TypeScript types.\nSOURCE: https://github.com/panva/node-oidc-provider/blob/main/CHANGELOG.md#2025-04-20_snippet_10\n\n\n\n----------------------------------------\n\nTITLE: Typescript Type Fix for findAccount\nDESCRIPTION: Bug fix to allow findAccount to return undefined in TypeScript type definitions.\nSOURCE: https://github.com/panva/node-oidc-provider/blob/main/CHANGELOG.md#2025-04-20_snippet_8\n\n\n\n----------------------------------------\n\nTITLE: Updating Configuration Property Name in JavaScript\nDESCRIPTION: The configuration property 'whitelistedJWA' has been renamed to 'enabledJWA' for more inclusive terminology.\nSOURCE: https://github.com/panva/node-oidc-provider/blob/main/CHANGELOG.md#2025-04-20_snippet_3\n\nLANGUAGE: JavaScript\nCODE:\n```\nconfiguration.enabledJWA = { ... }; // Formerly whitelistedJWA\n```\n\n----------------------------------------\n\nTITLE: Changing Default CORS Helper in JavaScript\nDESCRIPTION: The default clientBasedCORS helper function now returns false instead of true.\nSOURCE: https://github.com/panva/node-oidc-provider/blob/main/CHANGELOG.md#2025-04-20_snippet_4\n\nLANGUAGE: JavaScript\nCODE:\n```\nprovider.clientBasedCORS = (ctx, origin, client) => false;\n```\n\n----------------------------------------\n\nTITLE: Displaying Supported Versions Table in Markdown\nDESCRIPTION: This code snippet creates a markdown table showing the supported versions of node-oidc-provider and their end-of-life dates. It includes links to the respective version branches on GitHub.\nSOURCE: https://github.com/panva/node-oidc-provider/blob/main/SECURITY.md#2025-04-20_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n| Version                                                       | End-of-life |\n| ------------------------------------------------------------- | ----------- |\n| [v9.x](https://github.com/panva/node-oidc-provider/tree/v9.x) | TBD         |\n| [v8.x](https://github.com/panva/node-oidc-provider/tree/v8.x) | 2026-04-30  |\n```\n\n----------------------------------------\n\nTITLE: Markdown Contributing Guidelines\nDESCRIPTION: Markdown formatted contributing guidelines document that outlines the process for contributing to node-oidc-provider, including discussion rules and code of conduct reference.\nSOURCE: https://github.com/panva/node-oidc-provider/blob/main/CONTRIBUTING.md#2025-04-20_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n# Contributing to oidc-provider\n\nPlease note we have a [code of conduct][coc], please follow it in all your interactions with the\nproject.\n\nWhen contributing to this project, please first discuss the change you wish to make via a discussion,\nemail, or any other appropriate method with the owners of this project before proposing a change \nvia a Pull Request. The project promotes and follows current best practices in regards to the \nspecifications it implements. A contribution that tries to implement something non-standard will most \nlikely be dismissed.\n\n## Rules of the discussions\n\nRemember to be very clear and transparent when discussing any issue in the discussions boards. We\nask that you keep the language to English and keep on track with the issue at hand. Lastly, please\nbe respectful of our fellow contributors and keep an exemplary level of professionalism at all\ntimes.\n\n[coc]: https://github.com/panva/node-oidc-provider/blob/main/CODE_OF_CONDUCT.md\n```\n\n----------------------------------------\n\nTITLE: Version Release Updates Markdown\nDESCRIPTION: Markdown formatted changelog entries documenting various updates, fixes and changes to the node-oidc-provider library including version numbers and commit references.\nSOURCE: https://github.com/panva/node-oidc-provider/blob/main/CHANGELOG.md#2025-04-20_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n### Refactor\n\n* change default on allowOmittingSingleRegisteredRedirectUri ([d41bb0f](https://github.com/panva/node-oidc-provider/commit/d41bb0ff06b19d81f64682ffedecc87a7c34e3a3))\n* check request_uri_not_supported early ([57b39a2](https://github.com/panva/node-oidc-provider/commit/57b39a28dfcea9f362cd64d1c663ed151240e6a1))\n* CIBA and PAR do not automatically turn on JAR ([089fa43](https://github.com/panva/node-oidc-provider/commit/089fa43e62ee2c1d3df4a21e16650d2e501fd0d3))\n* Completely removed v6.x way of setting access token formats. ([a2cf235](https://github.com/panva/node-oidc-provider/commit/a2cf23527f00858c92a00284cc5ab857b03029cb))\n```\n\n----------------------------------------\n\nTITLE: Displaying Warning Message in Markdown\nDESCRIPTION: This snippet uses Markdown syntax to display a warning message with emojis and text. It emphasizes that the content should not be used as an example for inspiration.\nSOURCE: https://github.com/panva/node-oidc-provider/blob/main/certification/README.md#2025-04-20_snippet_0\n\nLANGUAGE: Markdown\nCODE:\n```\n# 🛑 ✋\\n\\nThis is not an example you should be taking inspirations from.\n```\n\n----------------------------------------\n\nTITLE: Git Commit References\nDESCRIPTION: Git commit hashes referencing implementation of new features and performance improvements in the node-oidc-provider package\nSOURCE: https://github.com/panva/node-oidc-provider/blob/main/CHANGELOG.md#2025-04-20_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n3f6684a259878eeddc8d5c90fa84635c9e38961b\n917507fe66e4edf7185886c09e1bac4a714117b6\n8d82988b0834d631fda17200481883301b993984\n1f777812584dc9500993a9d100d8aec621f2136e\n```\n\n----------------------------------------\n\nTITLE: Version Comparison Link\nDESCRIPTION: Git comparison URL showing changes between versions 6.4.2 and 6.5.0\nSOURCE: https://github.com/panva/node-oidc-provider/blob/main/CHANGELOG.md#2025-04-20_snippet_12\n\nLANGUAGE: markdown\nCODE:\n```\n[6.5.0](https://github.com/panva/node-oidc-provider/compare/v6.4.2...v6.5.0)\n```\n\n----------------------------------------\n\nTITLE: Git Commit Reference\nDESCRIPTION: Git commit hash link referencing a specific change\nSOURCE: https://github.com/panva/node-oidc-provider/blob/main/CHANGELOG.md#2025-04-20_snippet_13\n\nLANGUAGE: markdown\nCODE:\n```\n[52e914c](https://github.com/panva/node-oidc-provider/commit/52e914c)\n```"
  }
]
[
  {
    "owner": "putnam3145",
    "repo": "dwarf-fortress--libgraphics--",
    "content": "TITLE: Configuring CMake and C++ Standard for g_src Library\nDESCRIPTION: Sets the minimum CMake version, C++ standard to C++20, and configures CURSES and CMAKE_BUILD_RPATH_USE_ORIGIN.\nSOURCE: https://github.com/putnam3145/dwarf-fortress--libgraphics--/blob/master/cmake_readme.txt#2025-04-21_snippet_0\n\nLANGUAGE: CMake\nCODE:\n```\ncmake_minimum_required (VERSION 3.8)\n\nset(CMAKE_CXX_STANDARD_REQUIRED True)\nset(CMAKE_CXX_STANDARD 20)\nset(CURSES_NEED_NCURSES True)\n\nset(CMAKE_BUILD_RPATH_USE_ORIGIN TRUE)\n\nfind_package(PkgConfig REQUIRED)\n```\n\n----------------------------------------\n\nTITLE: Defining g_src_lib Shared Library in CMake\nDESCRIPTION: Creates a shared library target named g_src_lib and adds source files to it. It also sets linking options and includes necessary directories.\nSOURCE: https://github.com/putnam3145/dwarf-fortress--libgraphics--/blob/master/cmake_readme.txt#2025-04-21_snippet_1\n\nLANGUAGE: CMake\nCODE:\n```\nadd_library(g_src_lib SHARED \n    src/g_src/basics.cpp\n    src/g_src/command_line.cpp\n    src/g_src/dfhooks.cpp\n    src/g_src/enabler.cpp\n    src/g_src/enabler_input.cpp\n    src/g_src/files.cpp\n    src/g_src/find_files_posix.cpp\n    src/g_src/graphics.cpp\n    src/g_src/music_and_sound.cpp\n    src/g_src/init.cpp\n    src/g_src/interface.cpp\n    src/g_src/keybindings.cpp\n    src/g_src/KeybindingScreen.cpp\n    src/g_src/random.cpp\n    src/g_src/renderer_offscreen.cpp\n    src/g_src/resize++.cpp\n    src/g_src/textlines.cpp\n    src/g_src/textures.cpp\n    src/g_src/ViewBase.cpp\n    src/g_src/win32_compat.cpp\n)\n\ntarget_link_options(g_src_lib PRIVATE \"LINKER:-as-needed\")\n\ntarget_include_directories(g_src_lib PRIVATE ${PROJECT_SOURCE_DIR}/sdl/include ${PROJECT_SOURCE_DIR}/fmod/inc ${PROJECT_SOURCE_DIR}/zlib)\n```\n\n----------------------------------------\n\nTITLE: Configuring SDL2 and SDL2_image for g_src_lib in CMake\nDESCRIPTION: Finds and links SDL2 and SDL2_image libraries to the g_src_lib target, including necessary include directories.\nSOURCE: https://github.com/putnam3145/dwarf-fortress--libgraphics--/blob/master/cmake_readme.txt#2025-04-21_snippet_2\n\nLANGUAGE: CMake\nCODE:\n```\nfind_package(SDL2 REQUIRED)\n\ntarget_include_directories(g_src_lib PUBLIC ${SDL2_INCLUDE_DIRS})\n\ntarget_link_libraries(g_src_lib PUBLIC SDL2::SDL2)\n\npkg_search_module(SDL2IMAGE REQUIRED SDL2_image>=2.0.0)\n\ntarget_include_directories(g_src_lib PUBLIC ${SDL2IMAGE_INCLUDE_DIRS})\n\ntarget_link_libraries(g_src_lib PUBLIC ${SDL2IMAGE_LIBRARIES})\n```\n\n----------------------------------------\n\nTITLE: Creating Static zlib Library in CMake\nDESCRIPTION: Defines a static library for zlib and adds all necessary source files to it.\nSOURCE: https://github.com/putnam3145/dwarf-fortress--libgraphics--/blob/master/cmake_readme.txt#2025-04-21_snippet_5\n\nLANGUAGE: CMake\nCODE:\n```\nadd_library(zlib STATIC\n    zlib/adler32.c\n    zlib/compress.c\n    zlib/contrib/minizip/ioapi.c\n    zlib/contrib/minizip/unzip.c\n    zlib/crc32.c\n    zlib/deflate.c\n    zlib/gzclose.c\n    zlib/gzlib.c\n    zlib/gzread.c\n    zlib/gzwrite.c\n    zlib/infback.c\n    zlib/inffast.c\n    zlib/inflate.c\n    zlib/inftrees.c\n    zlib/trees.c\n    zlib/uncompr.c\n    zlib/zutil.c\n)\n```\n\n----------------------------------------\n\nTITLE: Creating SDL Mixer Plugin Module in CMake\nDESCRIPTION: Defines a module library for SDL Mixer plugin, finds the SDL_mixer library, and links it appropriately.\nSOURCE: https://github.com/putnam3145/dwarf-fortress--libgraphics--/blob/master/cmake_readme.txt#2025-04-21_snippet_4\n\nLANGUAGE: CMake\nCODE:\n```\nadd_library(sdl_mixer_plugin MODULE src/g_src/music_and_sound_sdl.cpp)\n\nfind_library(SDL_MIXER_LIBRARY REQUIRED\n  NAMES SDL2_mixer\n  HINTS\n    ENV SDLMIXERDIR\n    ENV SDLDIR\n  PATH_SUFFIXES lib\n)\n\ntarget_include_directories(sdl_mixer_plugin PRIVATE ${SDL2_INCLUDE_DIRS})\n\ntarget_link_libraries(sdl_mixer_plugin PRIVATE ${SDL_MIXER_LIBRARY})\n```\n\n----------------------------------------\n\nTITLE: Creating FMOD Plugin Module in CMake\nDESCRIPTION: Defines a module library for FMOD plugin and links it with the FMOD library.\nSOURCE: https://github.com/putnam3145/dwarf-fortress--libgraphics--/blob/master/cmake_readme.txt#2025-04-21_snippet_3\n\nLANGUAGE: CMake\nCODE:\n```\nadd_library(fmod_plugin MODULE src/g_src/music_and_sound_fmod.cpp)\n\nfind_library(FMOD_LIBRARY REQUIRED NAMES libfmod${CMAKE_SHARED_LIBRARY_SUFFIX} PATHS fmod/lib/x86_64)\ntarget_link_libraries(fmod_plugin PRIVATE ${FMOD_LIBRARY})\n```"
  }
]
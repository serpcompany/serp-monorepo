[
  {
    "owner": "metabase",
    "repo": "metabase",
    "content": "TITLE: Creating Custom Filter Expressions in Metabase\nDESCRIPTION: Illustrates how to define a custom filter using Metabase's expression language. This example filters data where the 'Subtotal' column is greater than 100 OR the median of the 'Age' column is less than 40. This requires 'Subtotal' and 'Age' columns in the underlying data source and utilizes comparison operators (>) and functions (median).\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/filters.md#2025-04-23_snippet_0\n\nLANGUAGE: Metabase Expression\nCODE:\n```\n[Subtotal] > 100 OR median([Age]) < 40\n```\n\n----------------------------------------\n\nTITLE: Using Manually Wrapped Metabase Components in Next.js (TSX)\nDESCRIPTION: Demonstrates how to import and use the `EmbeddingSdkProvider` and `MetabaseDashboard` components from the manually created `metabase` directory wrapper. This ensures the components are loaded correctly on the client side within a Next.js application using the manual wrapping pattern.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/next-js.md#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { EmbeddingSdkProvider, MetabaseDashboard } from \"../metabase\";\n\nexport default function Page() {\n  return (\n    <EmbeddingSdkProvider>\n      <MetabaseDashboard />\n    </EmbeddingSdkProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Computing Cumulative Count Using SQL Window Functions - SQL\nDESCRIPTION: This SQL snippet calculates a cumulative count (running total) across grouped time periods using SQL window functions. It groups order records by truncated months, counts records within each group, and uses SUM(... OVER (ORDER BY ... ROWS UNBOUNDED PRECEDING)) to accumulate the totals in ascending order by month. The snippet requires a database supporting window functions and serves as a template for translating Metabase calculations into SQL. Key parameters are the date column (created_at) and aggregation level (month). The output is a table of months with cumulative counts.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/cumulative.md#2025-04-23_snippet_2\n\nLANGUAGE: sql\nCODE:\n```\nSELECT\n  created_month,\n  SUM(count(*)) OVER (\n    ORDER BY\n      created_month ASC ROWS UNBOUNDED PRECEDING\n  ) AS \"sum\"\nFROM\n  (\n    SELECT\n      quantity,\n      DATE_TRUNC ('month', created_at) AS created_month\n    FROM\n      orders\n  )\nGROUP BY\n  created_month\nORDER BY\n  created_month ASC\n```\n\n----------------------------------------\n\nTITLE: Counting Rows by Condition with Countif and Case - Plaintext\nDESCRIPTION: Here, Metabase's `countif` and `case` expressions are applied to count rows meeting a filter (e.g., Status = \"Shipped\"). `countif(case([Status] = \"Shipped\"))` counts all shipped rows, while `count(case([Status] = \"Shipped\", [Row ID]))` allows for custom aggregation logic (e.g., counting unique IDs for shipped statuses). Both require that [Status] and optionally [Row ID] exist and be sortable or unique.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/case.md#2025-04-23_snippet_4\n\nLANGUAGE: plaintext\nCODE:\n```\ncountif(case([Status] = \"Shipped\"))\n```\n\nLANGUAGE: plaintext\nCODE:\n```\ncount(case([Status] = \"Shipped\", [Row ID]))\n```\n\n----------------------------------------\n\nTITLE: Using a Metabase Model/Question as a CTE in SQL\nDESCRIPTION: This SQL snippet demonstrates defining a Common Table Expression (CTE) named `gizmo_orders` by referencing a saved Metabase model or question (ID 5, named 'gizmo-orders-in-2019'). The `{#5-gizmo-orders-in-2019}` tag is Metabase-specific syntax that gets replaced by the referenced item's SQL query. The main query then counts rows from this CTE. This functionality requires a SQL database supporting CTEs.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/native-editor/referencing-saved-questions-in-queries.md#2025-04-23_snippet_0\n\nLANGUAGE: sql\nCODE:\n```\nWITH gizmo_orders AS {% raw %}{{#5-gizmo-orders-in-2019}}{% endraw %}\nSELECT count(*)\nFROM gizmo_orders\n```\n\n----------------------------------------\n\nTITLE: Creating Client Entrypoint for Manual SDK Wrapper in Next.js (TSX)\nDESCRIPTION: Creates an `index.tsx` file that acts as the client-side entry point for the manually wrapped Metabase SDK components. It uses the `use client` directive required by Next.js App Router for client components. It dynamically imports the custom `EmbeddingSdkProvider` with SSR disabled (`ssr: false`) and re-exports it along with other necessary components like `MetabaseDashboard` from the SDK.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/next-js.md#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport dynamic from \"next/dynamic\";\n\nexport * from \"@metabase/embedding-sdk-react\";\n\nexport const EmbeddingSdkProvider = dynamic(\n  () =>\n    import(\"./EmbeddingSdkProvider\").then((mod) => mod.EmbeddingSdkProvider),\n  { ssr: false },\n);\n```\n\n----------------------------------------\n\nTITLE: Running Metabase Container with External PostgreSQL Database\nDESCRIPTION: Starts a Metabase container configured to use an external PostgreSQL database for its application data, suitable for production. It uses environment variables (`-e`) to pass database connection details (type, name, port, user, password, host) to Metabase. Assumes a PostgreSQL database `metabaseappdb` is running and accessible from the container.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-docker.md#2025-04-23_snippet_9\n\nLANGUAGE: shell\nCODE:\n```\ndocker run -d -p 3000:3000 \\\n  -e \"MB_DB_TYPE=postgres\" \\\n  -e \"MB_DB_DBNAME=metabaseappdb\" \\\n  -e \"MB_DB_PORT=5432\" \\\n  -e \"MB_DB_USER=name\" \\\n  -e \"MB_DB_PASS=password\" \\\n  -e \"MB_DB_HOST=my-database-host\" \\\n   --name metabase metabase/metabase\n```\n\n----------------------------------------\n\nTITLE: Calculating Time before an Event with datetimeSubtract - Metabase Expression - Metabase Expression\nDESCRIPTION: This snippet illustrates using datetimeSubtract in a calculated column to derive departure times, 30 minutes before each event's 'Arrive By' time. It requires a datetime-formatted input (such as a column), and outputs the adjusted datetime suitable for time-sensitive logistics or time series. As shown in a table context, this formula is used directly in custom fields.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/datetimesubtract.md#2025-04-23_snippet_1\n\nLANGUAGE: Metabase Expression\nCODE:\n```\ndatetimeSubtract([Arrive By], 30, \"minute\")\n```\n\n----------------------------------------\n\nTITLE: Using convertTimezone Expression Function - Metabase - Markdown\nDESCRIPTION: This snippet demonstrates the use of the `convertTimezone` function in a Metabase expression to convert a timestamp from one specified time zone to another. The code highlights converting '2022-12-28T12:00:00' from 'Canada/Eastern' to 'Canada/Pacific', resulting in a time adjusted for the targeted zone. Inputs include the timestamp, the target time zone, and the source time zone as strings; the output is the timestamp altered to the target zone. Dependencies include the Metabase expressions engine and access to supported time zone names; incorrect or unsupported types will cause errors.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/converttimezone.md#2025-04-23_snippet_0\n\nLANGUAGE: Markdown\nCODE:\n```\n`convertTimezone(\"2022-12-28T12:00:00\", \"Canada/Pacific\", \"Canada/Eastern\")`\n```\n\n----------------------------------------\n\nTITLE: Defining a Parameterized SQL Query Template in Metabase SQL Editor (SQL)\nDESCRIPTION: This snippet demonstrates how to define a text variable called 'category' within a native SQL query template using Metabase's templating syntax. The '{{category}}' variable acts as a placeholder that Metabase users can control via a filter widget or URL parameter. This requires using the Metabase Native/SQL editor and assumes access rights to the 'products' table. The input is a text value and the output is a row count for products filtered by category. Proper SQL escaping is handled automatically by Metabase.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/native-editor/sql-parameters.md#2025-04-23_snippet_0\n\nLANGUAGE: sql\nCODE:\n```\n{% raw %}\nSELECT\n  count(*)\nFROM\n  products\nWHERE\n  category = {{category}}\n{% endraw %}\n```\n\n----------------------------------------\n\nTITLE: Starting Metabase Development Environment\nDESCRIPTION: Command to start both frontend and backend development servers simultaneously using Yarn.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/devenv.md#2025-04-23_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nyarn dev\n```\n\n----------------------------------------\n\nTITLE: Conditional Column Assignment with the 'case' Function in Metabase (SQL-like Expression)\nDESCRIPTION: This snippet demonstrates the use of the 'case' function (an alias for 'if') within a custom column or filter expression in Metabase to assign text labels based on the value of the '[Size]' column. The expression evaluates the '[Size]' column: if it equals 'L', 'LARGE' is assigned; if 'M', 'MEDIUM' is assigned; otherwise 'SMALL' is the fallback value. No explicit dependencies are required beyond Metabase's expression editor. Input is typically a row of data with a '[Size]' column, and the output is a new column with string values. Expressions must be entered in the custom expression field using the syntax shown.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions.md#2025-04-23_snippet_0\n\nLANGUAGE: sql\nCODE:\n```\ncase([Size] = \"L\", \"LARGE\", [SIZE] = \"M\", \"MEDIUM\", \"SMALL\")\n```\n\n----------------------------------------\n\nTITLE: Migrating H2 Data to PostgreSQL in Docker Context (Shell/Java)\nDESCRIPTION: This shell command sequence, typically run outside the original container but in a directory containing the downloaded Metabase JAR and the extracted H2 database file, migrates data to PostgreSQL. It sets environment variables for the target PostgreSQL database and runs the `load-from-h2` command using the Metabase JAR. This specific command is part of the workflow for migrating a Docker-based Metabase instance. Requires Java, the Metabase JAR, the H2 file, and valid PostgreSQL connection details. The `--add-opens` flag is needed for Java.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/migrating-from-h2.md#2025-04-23_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\nexport MB_DB_TYPE=postgres\nexport MB_DB_CONNECTION_URI=\"jdbc:postgresql://<host>:5432/metabase?user=<username>&password=<password>\"\njava --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar load-from-h2 /path/to/metabase.db # do not include .mv.db\n```\n\n----------------------------------------\n\nTITLE: Extracting Domain from a URL Using Regex in Metabase Expression\nDESCRIPTION: This Metabase expression uses regexextract with a more complex regular expression to capture the domain part from a URL, ignoring protocol, username, and www subdomain. The pattern employs non-capturing groups and careful character class usage to reliably select the main part of the URL hostname, which is useful for creating readable or normalized columns from URLs. It requires string input and behaves as per backend availability.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/regexextract.md#2025-04-23_snippet_2\n\nLANGUAGE: plaintext\nCODE:\n```\nregexextract([URL], \"^(?:https?:\\\\/\\\\/)?(?:[^@\\\\/\\\\n]+@)?(?:www\\\\.)?([^:\\\\/.\\\\n]+)\")\n```\n\n----------------------------------------\n\nTITLE: Illustrating datetimeAdd Syntax in Metabase Expression\nDESCRIPTION: Provides an example of the `datetimeAdd` function syntax in a Metabase custom expression. It adds one month to a specific date string.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/datetimeadd.md#2025-04-23_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\ndatetimeAdd(\"2021-03-25\", 1, \"month\")\n```\n\n----------------------------------------\n\nTITLE: Creating Dashboards via useCreateDashboardApi Hook and CreateDashboardModal - Metabase SDK - TypeScript\nDESCRIPTION: These snippets show two ways to create dashboards programmatically: via the \\'useCreateDashboardApi\\' React hook or the \\'CreateDashboardModal\\' component. Dependencies include React and the Metabase Embedded Analytics SDK. Parameters include dashboard configuration data, handlers for success/failures, and modal triggers. Inputs are dashboard details; outputs are either a new dashboard instance or UI for form-based creation.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/dashboards.md#2025-04-23_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\n{% include_file \\\"{{ dirname }}/snippets/dashboards/create-dashboard.tsx\\\" snippet=\\\"example-hook\\\" %}\n```\n\nLANGUAGE: typescript\nCODE:\n```\n{% include_file \\\"{{ dirname }}/snippets/dashboards/create-dashboard.tsx\\\" snippet=\\\"example-component\\\" %}\n```\n\n----------------------------------------\n\nTITLE: Implementing SSO Route for Metabase\nDESCRIPTION: Creates an endpoint that handles SSO authentication with Metabase using JWT. Redirects authenticated users to Metabase with a signed token.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/interactive-embedding-quick-start-guide.md#2025-04-23_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\napp.get(\"/sso/metabase\", restrict, (req, res) => {\n  const token = signUserToken(req.session.user);\n  const returnTo = req.query.return_to || \"/\";\n  res.redirect(`${METABASE_SITE_URL}/auth/sso?jwt=${token}&return_to=${encodeURIComponent(returnTo)}`);\n});\n```\n\n----------------------------------------\n\nTITLE: Bucketing Values with Metabase Case Expression - Plaintext\nDESCRIPTION: This snippet demonstrates the use of the Metabase `case` expression to bucket the [Amount] column into custom ranges for frequency tables or histograms. It checks a series of boolean conditions, assigning label strings to the first range that matches, and defaults to '50+' if no other condition is met. All referenced columns ([Amount]) must exist; output type is always string. Useful for converting numeric ranges into categorical buckets automatically.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/case.md#2025-04-23_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\ncase([Amount] >= 0  AND [Amount] <=  9,  \"0-9\",\n     [Amount] >= 10 AND [Amount] <= 19,  \"10-19\",\n     [Amount] >= 20 AND [Amount] <= 29,  \"20-29\",\n     [Amount] >= 30 AND [Amount] <= 39,  \"30-39\",\n     [Amount] >= 40 AND [Amount] <= 49,  \"40-49\", \"50+\")\n```\n\n----------------------------------------\n\nTITLE: Example Output of Parameterized Query After Value Substitution (SQL)\nDESCRIPTION: This snippet shows how Metabase translates a parameterized SQL query after a user has supplied the value 'Gizmo' to the 'category' variable. The result is a standard SQL statement filtering the 'products' table by category. Assumes the template variable has been correctly configured via the SQL editor. No special dependencies beyond standard SQL compatibility and a 'products' table with a 'category' column.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/native-editor/sql-parameters.md#2025-04-23_snippet_1\n\nLANGUAGE: sql\nCODE:\n```\nSELECT\n  count(*)\nFROM\n  products\nWHERE\n  category = 'Gizmo'\n```\n\n----------------------------------------\n\nTITLE: Converting PEM Key to PKCS-8/DER Format\nDESCRIPTION: OpenSSL command to convert a PEM SSL client key to the required PKCS-8/DER format for PostgreSQL SSL connection.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/connections/postgresql.md#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nopenssl pkcs8 -topk8 -inform PEM -outform DER -in client-key.pem -out client-key.der -nocrypt\n```\n\n----------------------------------------\n\nTITLE: Calculating Current Age in Months using Metabase datetimeDiff and now()\nDESCRIPTION: This Metabase custom expression calculates the current age of an item by finding the difference between the 'Aging Start' column and the current time (obtained using the `now` function), measured in whole months using the `datetimeDiff` function.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/datetimediff.md#2025-04-23_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\ndatetimeDiff([Aging Start], now, \"month\")\n```\n\n----------------------------------------\n\nTITLE: Extracting Substring from the Left in Metabase Expressions\nDESCRIPTION: This Metabase expression extracts a 3-character substring starting from the 9th character of the `[Mission ID]` column. It's used to get the agent ID ('006', '007', '008') from the mission IDs ('19951113006', '20061114007', '19640917008').\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/substring.md#2025-04-23_snippet_1\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nsubstring([Mission ID], 9, 3)\n```\n\n----------------------------------------\n\nTITLE: Embedding an InteractiveDashboard - Metabase SDK - TypeScript\nDESCRIPTION: This snippet demonstrates how to embed a Metabase \\'InteractiveDashboard\\' component within a React application using TypeScript. Dependencies include the Metabase Embedded Analytics SDK and React. The core parameters include dashboard configuration, authentication, and event handlers as needed. Inputs typically are dashboard IDs or configuration objects; outputs are rendered interactive dashboards with support for interacting with cards and drill-down features.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/dashboards.md#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n{% include_file \\\"{{ dirname }}/snippets/dashboards/interactive-dashboard.tsx\\\" %}\n```\n\n----------------------------------------\n\nTITLE: Running Metabase Enterprise Edition with Docker (Shell)\nDESCRIPTION: Starts a Metabase Enterprise Edition instance using Docker. The command downloads the latest `-enterprise` tagged image, runs it in detached mode (`-d`), maps the container's port 3000 to the host's port 3000 (`-p 3000:3000`), and names the container `metabase` for easier management. Requires Docker to be installed.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/quickstart-with-sample-app.md#2025-04-23_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\ndocker run -d -p 3000:3000 --name metabase metabase/metabase-enterprise:latest\n```\n\n----------------------------------------\n\nTITLE: Checking Date Range using interval Function in Metabase Expressions\nDESCRIPTION: Checks if values in a date column fall within a specified relative time range (e.g., within the last 1 month). It takes the date column, an integer number (negative for past, positive for future), and a time unit string ('day', 'month', etc.) as input. Fractional numbers are not allowed.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_58\n\nLANGUAGE: Metabase Expression\nCODE:\n```\ninterval(column, number, text)\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\ninterval([Created At], -1, \"month\")\n```\n\n----------------------------------------\n\nTITLE: Generating Embedding Payload for Metabase Static Embedding - JavaScript\nDESCRIPTION: This JavaScript snippet creates a payload object for generating a signed JWT used in Metabase static embedding. The payload's 'resource' map is set to use an Entity ID, ensuring stable references even if instances change across environments. Dependencies include a JWT signing library and a Metabase secret key. Key parameters are 'resource' (including question/entity id), 'params' (locked parameters for filtering), and 'exp' (JWT expiration time in seconds). The payload object is used by back-end code to create a signed JWT for embedding URLs. Inputs are the Entity ID and optional parameters; output is the constructed payload object. Both normal IDs and entity IDs are supported.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/static-embedding.md#2025-04-23_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nconst payload = {\n  resource: { question: <Entity ID goes here> },\n  params: {},\n  exp: Math.round(Date.now() / 1000) + (10 * 60) // 10 minute expiration\n};\n```\n\n----------------------------------------\n\nTITLE: Applying Global Plugins with MetabaseProvider in TypeScript\nDESCRIPTION: Demonstrates how to configure global plugins for the Metabase Embedded SDK by passing a `pluginsConfig` prop to the `MetabaseProvider` component. This applies the specified plugins to all relevant embedded components within the provider's scope. Requires the `MetabaseProvider` component and the plugin definitions.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/plugins.md#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n{% include_file \"{{ dirname }}/snippets/plugins/global-plugins.tsx\" snippet=\"example\" %}\n```\n\n----------------------------------------\n\nTITLE: Customizing Interactive Question Layout with Namespaced Components (TypeScript)\nDESCRIPTION: This snippet demonstrates building a custom layout for the InteractiveQuestion component by composing its namespaced subcomponents (e.g., InteractiveQuestion.Filter, ChartTypeDropdown). The example leverages React/TypeScript with the Embedded analytics SDK, requiring a question ID and desired layout structure. Inputs are the subcomponent arrangement and props; outputs are a highly tailored user interface for embedded analytics, restricted to supported component options.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/questions.md#2025-04-23_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\n```typescript\\n{% include_file \\\"{{ dirname }}/snippets/questions/customize-interactive-question.tsx\\\" snippet=\\\"example-customized-interactive-question\\\" %}\\n```\n```\n\n----------------------------------------\n\nTITLE: SQL Query with Multiple Optional Clauses\nDESCRIPTION: Example of using multiple optional filter clauses in a SQL query. This pattern requires at least one regular WHERE clause (using TRUE as a placeholder) followed by optional AND clauses, allowing for multiple independent filters.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/native-editor/sql-parameters.md#2025-04-23_snippet_13\n\nLANGUAGE: sql\nCODE:\n```\nSELECT\n  count(*)\nFROM\n  products\nWHERE\n  TRUE\n  [[AND id = {{id}}]]\n  [[AND {{category}}]]\n```\n\n----------------------------------------\n\nTITLE: Performing a LEFT JOIN Between Orders and Products - SQL\nDESCRIPTION: This SQL snippet demonstrates joining the 'orders' and 'products' tables using a LEFT JOIN, with respective table aliases 'o' and 'p'. No prerequisites beyond access to these tables are required. The snippet can be reused in queries needing a combined view of order and product information, yielding all order records alongside matching product data; key parameters are table aliases and join keys, and this snippet is well-suited to Metabase's Sample Database.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/native-editor/snippets.md#2025-04-23_snippet_0\n\nLANGUAGE: sql\nCODE:\n```\nSELECT *\nFROM orders AS o\nLEFT JOIN products AS p\nON o.product_id = p.id\n```\n\n----------------------------------------\n\nTITLE: SQL Query with Optional WHERE Clause\nDESCRIPTION: Example of making a WHERE clause optional in a SQL query. If no value is provided for the variable, the entire clause is omitted, resulting in a query that selects all rows from the table without filtering.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/native-editor/sql-parameters.md#2025-04-23_snippet_10\n\nLANGUAGE: sql\nCODE:\n```\nSELECT\n  count(*)\nFROM\n  products\n[[WHERE category = {{cat}}]]\n```\n\n----------------------------------------\n\nTITLE: Labeling Rows Based on Column Conditions with Metabase Case - Plaintext\nDESCRIPTION: This example applies the Metabase `case` function to set a human-readable label based on boolean fields, here for a Sighting Type. By testing all possible combinations of [Has Wings] and [Has Face], it outputs a descriptive type, with 'Unknown' as the fallback. Dependencies are the referenced boolean columns. All output values are strings, and the expression assumes exhaustive coverage of value combinations.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/case.md#2025-04-23_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\ncase([Has Wings] = TRUE  AND [Has Face] = TRUE,  \"Bird\",\n     [Has Wings] = TRUE  AND [Has Face] = FALSE, \"Plane\",\n     [Has Wings] = FALSE AND [Has Face] = TRUE,  \"Superman\", \"Unknown\")\n```\n\n----------------------------------------\n\nTITLE: Embedding Metabase dashboard with tab selection in HTML iframe\nDESCRIPTION: Example showing how to embed a Metabase dashboard and specify which tab should be displayed by default. The tab ID is appended as a query parameter to the dashboard Entity ID URL.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/interactive-embedding.md#2025-04-23_snippet_3\n\nLANGUAGE: html\nCODE:\n```\nsrc=http://metabase.yourcompany.com/dashboard/entity/Dc_7X8N7zf4iDK9Ps1M3b?tab=YLNdEYtzuSMA0lqO7u3FD\n```\n\n----------------------------------------\n\nTITLE: Embedding Metabase SDK Components in React\nDESCRIPTION: Demonstrates how to import and utilize Metabase SDK components within a React application. This snippet represents the inclusion of example code (likely showing component import and usage like `<MetabaseDashboard />`) from a separate file (`example.tsx`) using a template include tag. The actual implementation would involve importing specific components from '@metabase/embedding-sdk-react' and rendering them with appropriate props (like `metabaseUrl`, `resource`, `apiKey`).\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/quickstart.md#2025-04-23_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\n{% include_file \"{{ dirname }}/snippets/quickstart/example.tsx\" %}\n```\n\n----------------------------------------\n\nTITLE: Date Range Filtering Using 'between' and Greater Than Operators in Metabase (SQL-like Expression)\nDESCRIPTION: This example showcases how to filter rows in Metabase based on date columns, using the 'between' function for a date range and a direct greater-than comparison. '[Created At]' is checked to fall within January 1, 2020 and March 31, 2020, while '[Received At]' is filtered for dates after December 25, 2019. These expressions require that dates follow the 'YYYY-MM-DD' format as strings. The snippet is designed for use as a filter or conditional expression in the editor, returning rows that satisfy at least one of the supplied conditions.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions.md#2025-04-23_snippet_1\n\nLANGUAGE: sql\nCODE:\n```\nbetween([Created At], \"2020-01-01\", \"2020-03-31\") OR [Received At] > \"2019-12-25\"\n```\n\n----------------------------------------\n\nTITLE: Configuring SSL for MongoDB Connection via Command Line\nDESCRIPTION: Commands to import a self-signed certificate and start Metabase using the certificate store for SSL configuration with MongoDB.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/connections/mongodb.md#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncp /usr/lib/jvm/default-jvm/jre/lib/security/cacerts ./cacerts.jks\nkeytool -import -alias cacert -storepass changeit -keystore cacerts.jks -file my-cert.pem\n```\n\nLANGUAGE: bash\nCODE:\n```\njava -Djavax.net.ssl.trustStore=cacerts.jks -Djavax.net.ssl.trustStorePassword=changeit -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: Converting Timezone with Metabase Function\nDESCRIPTION: Example of using Metabase's convertTimezone function to convert a timestamp from Canada/Central to Canada/Pacific timezone.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/converttimezone.md#2025-04-23_snippet_3\n\nLANGUAGE: sql\nCODE:\n```\nconvertTimezone(\"2022-12-28T12:00:00 AT TIME ZONE 'Canada/Central'\", \"Canada/Pacific\", \"Canada/Central\")\n```\n\n----------------------------------------\n\nTITLE: Selecting First Non-Null Value using SQL COALESCE\nDESCRIPTION: Provides the SQL equivalent of the Metabase `coalesce` function for consolidating 'notes' and 'comments' columns from a 'sample_table'. It selects the first non-null value among the columns and a default string.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/coalesce.md#2025-04-23_snippet_2\n\nLANGUAGE: sql\nCODE:\n```\nSELECT\n    COALESCE(notes, comments, \"no notes or comments\")\nFROM\n    sample_table;\n```\n\n----------------------------------------\n\nTITLE: Conditional Sum Using CASE in SQL - SQL\nDESCRIPTION: This SQL snippet sums payment values from the invoices table where the plan is \"Basic\" using a CASE statement. It groups the logic inside SUM to only add matching payments (else 0) and aliases the result. Requires a table named invoices and columns plan and payment.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/sumif.md#2025-04-23_snippet_8\n\nLANGUAGE: SQL\nCODE:\n```\nSELECT\n    SUM(CASE WHEN plan = \"Basic\" THEN payment ELSE 0 END) AS total_payments_basic\nFROM invoices\n```\n\n----------------------------------------\n\nTITLE: Basic SQL Query with Field Filter Variable in WHERE Clause\nDESCRIPTION: Example of a SQL query that includes a field filter variable in the WHERE clause. This demonstrates the basic structure of using a field filter variable in a SQL query, where the variable is enclosed in double braces.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/native-editor/sql-parameters.md#2025-04-23_snippet_6\n\nLANGUAGE: sql\nCODE:\n```\nSELECT\n  *\nFROM\n  ORDERS\nWHERE\n  {{ product_category }}\n```\n\n----------------------------------------\n\nTITLE: Installing Metabase Embedded SDK using npm (Bash)\nDESCRIPTION: Installs the Metabase Embedded analytics SDK for React into a project using the npm package manager. Ensure the dist-tag (e.g., `53-stable`) corresponds to your Metabase version (e.g., v1.53). Requires Node.js, npm, and a React application environment.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/introduction.md#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @metabase/embedding-sdk-react@53-stable\n```\n\n----------------------------------------\n\nTITLE: Migrating H2 Data to PostgreSQL using Metabase JAR (Shell/Java)\nDESCRIPTION: This shell command sequence sets environment variables to configure PostgreSQL as the target database and then executes the Metabase JAR file with the `load-from-h2` command. It reads data from the specified H2 database file (path provided without the `.mv.db` extension) and migrates it to the configured PostgreSQL database. Requires Java, the Metabase JAR, the H2 file, and valid PostgreSQL connection details. The `--add-opens` flag is needed for Java.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/migrating-from-h2.md#2025-04-23_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nexport MB_DB_TYPE=postgres\nexport MB_DB_CONNECTION_URI=\"jdbc:postgresql://<host>:5432/metabase?user=<username>&password=<password>\"\njava --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar load-from-h2 /path/to/metabase.db # do not include .mv.db\n```\n\n----------------------------------------\n\nTITLE: Extracting Campaign Name from URLs with SQL SUBSTRING and Regex (PostgreSQL Example)\nDESCRIPTION: This SQL query selects URLs from a table and extracts the campaign_name by applying the SUBSTRING function with a regular expression to the url column. The pattern is similar to the Metabase example, making use of PostgreSQL's regex-compatible substring. It requires a column called url and assumes a compatible SQL engine. Returns the extracted string in a new column; will return null if not matched.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/regexextract.md#2025-04-23_snippet_3\n\nLANGUAGE: sql\nCODE:\n```\nSELECT\n    url,\n    SUBSTRING(url, '^[^?#]+\\?utm_campaign=(.*)') AS campaign_name\nFROM follow_the_white_rabbit\n```\n\n----------------------------------------\n\nTITLE: Configuring MySQL/MariaDB App DB via JDBC URI with Separate Credentials in Shell\nDESCRIPTION: Sets the `MB_DB_CONNECTION_URI` environment variable with the base JDBC connection string for MySQL/MariaDB and provides the user and password via separate `MB_DB_USER` and `MB_DB_PASS` variables. Useful for passwords with special characters.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/configuring-application-database.md#2025-04-23_snippet_7\n\nLANGUAGE: sh\nCODE:\n```\nexport MB_DB_CONNECTION_URI=\"jdbc:mysql://localhost:5432/metabase\"\nexport MB_DB_USER=<username>\nexport MB_DB_PASS=<password>\njava --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: Configuring Metabase Environment Variables for PostgreSQL - Bash\nDESCRIPTION: Exports necessary environment variables to configure Metabase to use a PostgreSQL database instead of the default H2 database. These variables define the database type, name, port, user, password, and host for application data storage. Essential for production use, especially to ensure persistence and backup. The values (e.g., username, password) should be adjusted to reflect your actual database credentials. The environment variables must be set before executing the Java command to launch Metabase.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-the-metabase-jar-file.md#2025-04-23_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\nexport MB_DB_TYPE=postgres\nexport MB_DB_DBNAME=metabaseappdb\nexport MB_DB_PORT=5432\nexport MB_DB_USER=username\nexport MB_DB_PASS=password\nexport MB_DB_HOST=localhost\n```\n\n----------------------------------------\n\nTITLE: Configuring PostgreSQL Application Database via Environment Variables in Shell\nDESCRIPTION: Sets environment variables (MB_DB_TYPE, MB_DB_DBNAME, MB_DB_PORT, MB_DB_USER, MB_DB_PASS, MB_DB_HOST) to configure Metabase to use a PostgreSQL database as its application database and then starts Metabase. Requires a pre-existing PostgreSQL database named 'metabase' accessible with the provided credentials.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/configuring-application-database.md#2025-04-23_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nexport MB_DB_TYPE=postgres\nexport MB_DB_DBNAME=metabase\nexport MB_DB_PORT=5432\nexport MB_DB_USER=<username>\nexport MB_DB_PASS=<password>\nexport MB_DB_HOST=localhost\njava --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: Granting All Privileges to Metabase User in PostgreSQL\nDESCRIPTION: This SQL script demonstrates how to create a 'metabase' user and grant it all privileges on a specified database in PostgreSQL. This approach is simpler but less secure, typically suitable for development or testing environments. Replace 'your_password' and 'database' with actual values.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/users-roles-privileges.md#2025-04-23_snippet_1\n\nLANGUAGE: sql\nCODE:\n```\n-- Create a database user named \"metabase\".\nCREATE USER metabase WITH PASSWORD \"your_password\";\n\n-- Give the user read and write privileges to anything in the database.\nGRANT ALL PRIVILEGES ON \"database\" TO metabase;\n```\n\n----------------------------------------\n\nTITLE: Combining Required and Optional Conditions with SumIf - Metabase Expression\nDESCRIPTION: This snippet illustrates how to use parentheses with AND and OR operators in a SumIf formula to create complex filters. It sums the Payment column where the Plan is either \"Basic\" or \"Business\" and the month of Date Received is October. All referenced columns must be present and appropriately typed.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/sumif.md#2025-04-23_snippet_2\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nSumIf([Payment], ([Plan] = \"Basic\" OR [Plan] = \"Business\") AND month([Date Received]) = 10)\n```\n\n----------------------------------------\n\nTITLE: Copying H2 Database from Metabase Docker Container using Bash\nDESCRIPTION: Copies the Metabase H2 application database file (`metabase.db.mv.db`) from a running Docker container named `metabase` to the current directory on the host system. This is typically done before migrating the data to a production database. Requires Docker to be installed and the container to be running. Assumes the container name is 'metabase'.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/backing-up-metabase-application-data.md#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ndocker cp metabase:/metabase.db/metabase.db.mv.db ./\n```\n\n----------------------------------------\n\nTITLE: Example Docker Compose Configuration for Metabase and PostgreSQL\nDESCRIPTION: An example `docker-compose.yml` file defining two services: `metabase` and `postgres`. It configures Metabase to use the PostgreSQL container (`postgres`) as its application database via environment variables and a shared network (`metanet1`). Includes health checks and basic volume mounting. Note: This example is not recommended for production use without modification.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-docker.md#2025-04-23_snippet_10\n\nLANGUAGE: yaml\nCODE:\n```\nservices:\n  metabase:\n    image: metabase/metabase:latest\n    container_name: metabase\n    hostname: metabase\n    volumes:\n      - /dev/urandom:/dev/random:ro\n    ports:\n      - 3000:3000\n    environment:\n      MB_DB_TYPE: postgres\n      MB_DB_DBNAME: metabaseappdb\n      MB_DB_PORT: 5432\n      MB_DB_USER: metabase\n      MB_DB_PASS: mysecretpassword\n      MB_DB_HOST: postgres\n    networks:\n      - metanet1\n    healthcheck:\n      test: curl --fail -I http://localhost:3000/api/health || exit 1\n      interval: 15s\n      timeout: 5s\n      retries: 5\n  postgres:\n    image: postgres:latest\n    container_name: postgres\n    hostname: postgres\n    environment:\n      POSTGRES_USER: metabase\n      POSTGRES_DB: metabaseappdb\n      POSTGRES_PASSWORD: mysecretpassword\n    networks:\n      - metanet1\nnetworks:\n  metanet1:\n    driver: bridge\n```\n\n----------------------------------------\n\nTITLE: Using Negative Amount with datetimeAdd in Metabase Expression\nDESCRIPTION: Demonstrates using a negative integer for the `amount` parameter in the `datetimeAdd` function within a Metabase custom expression. This example subtracts one month from the given date.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/datetimeadd.md#2025-04-23_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\ndatetimeAdd(\"2021-03-25\", -1, \"month\")\n```\n\n----------------------------------------\n\nTITLE: Passing SQL Parameters to Embedded Questions with initialSqlParameters (TypeScript)\nDESCRIPTION: This snippet demonstrates passing parameter values to SQL-based questions using the initialSqlParameters prop. It requires the Embedded analytics SDK, a question defined by SQL, and the initialSqlParameters object structured as {parameter_name: parameter_value}. Only questions authored in SQL support this prop; it cannot be used with query builder-sourced questions. The snippet illustrates parameter injection for dynamic chart rendering.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/questions.md#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n```typescript\\n{% include_file \\\"{{ dirname }}/snippets/questions/initial-sql-parameters.tsx\\\" snippet=\\\"example\\\" %}\\n```\n```\n\n----------------------------------------\n\nTITLE: Using if (alias for case) in Metabase Logical Functions - Markdown\nDESCRIPTION: Describes using the if function (an alias for case) in Metabase custom expressions to output a value based on conditional logic. Accepts condition/output pairs with an optional default, outputs the result of the first true condition or the default.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_15\n\nLANGUAGE: Markdown\nCODE:\n```\nSyntax: `if(condition, output, ...)`\n\nExample: `if([Weight] > 200, \"Large\", [Weight] > 150, \"Medium\", \"Small\")` If a `Weight` is 250, the expression would return \"Large\". In this case, the default value is \"Small\", so any `Weight` 150 or less would return \"Small\".\n```\n\n----------------------------------------\n\nTITLE: Generating a Random Encryption Key with OpenSSL in Bash\nDESCRIPTION: Command to generate a cryptographically-secure, randomly-generated 32-character key using OpenSSL. This key will be used for encrypting database connection details in Metabase.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/encrypting-details-at-rest.md#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nopenssl rand -base64 32\n```\n\n----------------------------------------\n\nTITLE: Converting Timestamp Without Source Time Zone - Metabase - Markdown\nDESCRIPTION: This example shows converting a timestamp column that lacks time zone metadata from UTC to 'EST' using `convertTimezone`. Both the target ('EST') and source ('UTC') time zones are specified as string arguments, along with the source column expression. This ensures accurate conversion when the database does not store explicit time zone information on the timestamp. It requires correct specification of all parameters; missing or incorrect zones can result in inaccurate outputs.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/converttimezone.md#2025-04-23_snippet_2\n\nLANGUAGE: Markdown\nCODE:\n```\nconvertTimezone([Source Time], 'EST', 'UTC')\n```\n\n----------------------------------------\n\nTITLE: Getting Day Name using dayName Function in Metabase Expressions\nDESCRIPTION: Returns the localized name of the day of the week corresponding to a given day number (1-7). The specific name and the day corresponding to number 1 depend on the Metabase localization setting for the 'first day of the week'.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_56\n\nLANGUAGE: Metabase Expression\nCODE:\n```\ndayName(dayNumber)\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\ndayName(1)\n```\n\n----------------------------------------\n\nTITLE: Embedding Metabase dashboard with specific Entity ID example in HTML\nDESCRIPTION: Practical example showing the iframe src attribute with an actual dashboard Entity ID. This demonstrates the format for embedding a specific dashboard in your web application.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/interactive-embedding.md#2025-04-23_snippet_2\n\nLANGUAGE: html\nCODE:\n```\nsrc=http://metabase.yourcompany.com/dashboard/entity/Dc_7X8N7zf4iDK9Ps1M3b\n```\n\n----------------------------------------\n\nTITLE: Manually Wrapping Metabase SDK Provider in Next.js (TSX)\nDESCRIPTION: Defines a React component `EmbeddingSdkProvider` that wraps the core `MetabaseProvider` from `@metabase/embedding-sdk-react`. This is part of a manual approach to ensure compatibility with Next.js SSR/RSC by controlling how the provider is loaded. It accepts `children` and passes them to the underlying `MetabaseProvider`.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/next-js.md#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport React, { PropsWithChildren } from \"react\";\nimport { MetabaseProvider } from \"@metabase/embedding-sdk-react\";\n\nexport const EmbeddingSdkProvider = ({ children }: PropsWithChildren) => {\n  return <MetabaseProvider>{children}</MetabaseProvider>;\n};\n```\n\n----------------------------------------\n\nTITLE: Applying Per-Component Plugins in Metabase Embedded SDK with TypeScript\nDESCRIPTION: Shows how to apply plugins specifically to an individual Metabase embedded component (like a `Dashboard` or `Question`) by passing the plugin configuration directly as a prop to that component. This allows for fine-grained control over plugin behavior for specific embedded elements. Requires the specific Metabase component and the plugin definitions.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/plugins.md#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n{% include_file \"{{ dirname }}/snippets/plugins/component-plugins.tsx\" snippet=\"example\" %}\n```\n\n----------------------------------------\n\nTITLE: Group-by and Conditional Sum in Python pandas - Python\nDESCRIPTION: This multi-step pandas code snippet groups Payment sums by month, conditionally filtering for Business or Premium plans. It includes date parsing, new column creation, boolean OR filtering, and groupby with aggregation. Requires pandas, the DataFrame df with columns for Payment, Plan, and Date Received, and outputs a Series indexed by month.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/sumif.md#2025-04-23_snippet_12\n\nLANGUAGE: Python\nCODE:\n```\nimport datetime as dt\n\n## Optional: convert the column to a datetime object\n\ndf['Date Received'] = pd.to_datetime(df['Date Received'])\n\n## Extract the month and year\n\ndf['Date Received: Month'] = df['Date Received'].dt.to_period('M')\n\n## Add your conditions\n\ndf_filtered = df[(df['Plan'] == 'Business') | (df['Plan'] == 'Premium')]\n\n## Sum and group by\n\ndf_filtered.groupby('Date Received: Month')['Payment'].sum()\n```\n\n----------------------------------------\n\nTITLE: Unit Testing React Components with setup Pattern and Providers - TypeScript\nDESCRIPTION: Implements a unit test for a React component using the 'setup' pattern to render with providers and mock functions. The test interacts with the component using userEvent, verifies the update of a collection name, and asserts proper function invocation. Dependencies: React, @testing-library/user-event, jest, custom test utilities, CollectionHeader component.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/frontend.md#2025-04-23_snippet_19\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport React from \"react\";\nimport userEvent from \"@testing-library/user-event\";\nimport { Collection } from \"metabase-types/api\";\nimport { createMockCollection } from \"metabase-types/api/mocks\";\nimport { renderWithProviders, screen } from \"__support__/ui\";\nimport CollectionHeader from \"./CollectionHeader\";\n\ninterface SetupOpts {\n  collection: Collection;\n}\n\nconst setup = ({ collection }: SetupOpts) => {\n  const onUpdateCollection = jest.fn();\n\n  renderWithProviders(\n    <CollectionHeader\n      collection={collection}\n      onUpdateCollection={onUpdateCollection}\n    />,\n  );\n\n  return { onUpdateCollection };\n};\n\ndescribe(\"CollectionHeader\", () => {\n  it(\"should be able to update the name of the collection\", () => {\n    const collection = createMockCollection({\n      name: \"Old name\",\n    });\n\n    const { onUpdateCollection } = setup({\n      collection,\n    });\n\n    await userEvent.clear(screen.getByDisplayValue(\"Old name\"));\n    await userEvent.type(screen.getByPlaceholderText(\"Add title\"), \"New title\");\n    await userEvent.tab();\n\n    expect(onUpdateCollection).toHaveBeenCalledWith({\n      ...collection,\n      name: \"New name\",\n    });\n  });\n});\n```\n\n----------------------------------------\n\nTITLE: Using String Function replace() in Metabase\nDESCRIPTION: The replace function replaces all occurrences of a search text in the input text with the replacement text. It takes three inputs: the original text, the text to find, and the text to replace it with.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_42\n\nLANGUAGE: sql\nCODE:\n```\nreplace([Title], \"Enormous\", \"Gigantic\")\n```\n\n----------------------------------------\n\nTITLE: Starting Metabase Docker Container with PostgreSQL Backend (Bash)\nDESCRIPTION: This command starts a new Metabase Docker container in detached mode (-d), mapping the host's port 3000 to the container's port 3000. It configures Metabase to use an external PostgreSQL database by setting environment variables (`-e`) for the database type, name, port, user, password, and host. Placeholders like `<your-postgres-db-name>` must be replaced with actual database connection details.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/migrating-from-h2.md#2025-04-23_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\ndocker run -d -p 3000:3000 \\\n  -e \"MB_DB_TYPE=postgres\" \\\n  -e \"MB_DB_DBNAME=<your-postgres-db-name>\" \\\n  -e \"MB_DB_PORT=5432\" \\\n  -e \"MB_DB_USER=<db-username>\" \\\n  -e \"MB_DB_PASS=<db-password>\" \\\n  -e \"MB_DB_HOST=<your-database-host>\" \\\n  --name metabase metabase/metabase\n```\n\n----------------------------------------\n\nTITLE: Configuring MetabaseProvider Authentication in Next.js (TS)\nDESCRIPTION: Defines the `authConfig` object used to configure JWT authentication within the `MetabaseProvider`. It sets the `authType` to 'jwt' and provides the `authUrl` pointing to the server-side API endpoint responsible for generating the Metabase SSO URL. This example shows the path `/api/sso/metabase` which is typical for the Pages Router structure, but `/sso/metabase` might be used with App Router.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/next-js.md#2025-04-23_snippet_6\n\nLANGUAGE: ts\nCODE:\n```\nconst authConfig = {\n  authType: \"jwt\" as const,\n  // Assumes you have an API route at /api/sso/metabase\n  authUrl: \"/api/sso/metabase\",\n};\n```\n\n----------------------------------------\n\nTITLE: Default Layout for Interactive Questions with Embedded Analytics SDK (TypeScript)\nDESCRIPTION: This snippet illustrates usage of the InteractiveQuestion component with its default layout. Out-of-the-box, this layout provides a query editing interface, filters, aggregations, and chart visualization. It requires the Embedded analytics SDK and can be extended or customized as needed. The input is a question ID and configuration, and the output is the default interactive analytics pane in the host application.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/questions.md#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\n```typescript\\n{% include_file \\\"{{ dirname }}/snippets/questions/customize-interactive-question.tsx\\\" snippet=\\\"example-default-interactive-question\\\" %}\\n```\n```\n\n----------------------------------------\n\nTITLE: Conditional Labeling with SQL CASE WHEN - SQL\nDESCRIPTION: This SQL snippet provides a standard SQL equivalent to the Metabase `case` expression for labeling rows based on values in two columns (\"Has Wings\", \"Has Face\"). It uses cascading CASE WHEN clauses to select a label for each row. This requires running against a SQL-compatible database and that columns referenced exist with appropriate datatypes.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/case.md#2025-04-23_snippet_6\n\nLANGUAGE: sql\nCODE:\n```\nSELECT\n    CASE WHEN \"Has Wings\" = TRUE  AND \"Has Face\" = TRUE  THEN \"Bird\"\n         WHEN \"Has Wings\" = TRUE  AND \"Has Face\" = FALSE THEN \"Plane\"\n         WHEN \"Has Wings\" = FALSE AND \"Has Face\" = TRUE  THEN \"Superman\"\n         ELSE \"Unknown\" END\nFROM mystery_sightings\n```\n\n----------------------------------------\n\nTITLE: Embedding the Query Builder for Creating New Questions (TypeScript/TSX)\nDESCRIPTION: This example illustrates embedding the query builder interface for creating new questions by passing questionId=\"new\" to the InteractiveQuestion component. It requires the Embedded analytics SDK and React/TypeScript (TSX) environment. This enables end-users to compose new queries from scratch within the host application, with optional layout customization via the children prop or custom components.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/questions.md#2025-04-23_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\n```tsx\\n{% include_file \\\"{{ dirname }}/snippets/questions/new-question.tsx\\\" %}\\n```\n```\n\n----------------------------------------\n\nTITLE: Summing with Required Conditions using Metabase SumIf Formula - Metabase Expression\nDESCRIPTION: This snippet demonstrates how to use the SumIf formula in Metabase to sum values in the Payment column where the Plan equals \"Basic\" and the month of Date Received is October. It requires column references to Payment, Plan, and Date Received, and expects numerical and datetime data. The output is a single number that represents the conditional sum based on both conditions being true.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/sumif.md#2025-04-23_snippet_0\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nSumIf([Payment], ([Plan] = \"Basic\" AND month([Date Received]) = 10))\n```\n\n----------------------------------------\n\nTITLE: Installing Compatible SDK Version via npm for Metabase Integration (Shell)\nDESCRIPTION: This shell snippet demonstrates how to install a specific stable version of the @metabase/embedding-sdk-react package that is compatible with Metabase 53, using the npm command-line tool. The command utilizes the dist-tag convention '@53-stable' to ensure version alignment with the Metabase backend. No additional dependencies are required beyond npm and access to the npm registry. The main parameter is the package version/dist-tag, which must match the corresponding Metabase major version. Output is the installed npm package in the local project, ensuring SDK compatibility. Incorrect version selection may result in runtime incompatibility between Metabase and the SDK.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/version.md#2025-04-23_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnpm install @metabase/embedding-sdk-react@53-stable\n```\n\n----------------------------------------\n\nTITLE: Creating a JWT Authentication Endpoint in Express\nDESCRIPTION: Express server code that creates an endpoint to generate JWT tokens for authenticating with Metabase. This endpoint signs tokens using the shared secret from Metabase.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/authentication.md#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n{% include_file \"{{ dirname }}/snippets/authentication/express-server.ts\" %}\n```\n\n----------------------------------------\n\nTITLE: Full JDBC Connection String with SSL Parameters for PostgreSQL\nDESCRIPTION: Example of a complete JDBC connection string for PostgreSQL that includes database host, port, name, credentials, and SSL parameters. This environment variable configuration secures the application database connection.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/ssl-certificates.md#2025-04-23_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\njdbc:postgresql://db.example.com:port/mydb?user=dbuser&password=dbpassword&ssl=true&sslmode=verify-full&sslrootcert=/path/to/certificate.pem\n```\n\n----------------------------------------\n\nTITLE: Receiving Location Change Messages from Embedded Metabase - postMessage Protocol - JSON\nDESCRIPTION: This JSON snippet defines the message format sent from an embedded Metabase iframe to the host page when the user navigates within Metabase (e.g., changes filters or URL). The receiving application should listen for this message type via the postMessage API. The LOCATION_OBJECT_OR_URL key can be either a URL string or an object representing the location; inputs are dynamic from Metabase, outputs should be app-side handling of the message. No dependencies except a working browser event listener and an embedded Metabase iframe.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/interactive-embedding.md#2025-04-23_snippet_10\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"metabase\": {\n    \"type\": \"location\",\n    \"location\": LOCATION_OBJECT_OR_URL\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Embedding Static Questions with Embedded Analytics SDK (TypeScript)\nDESCRIPTION: This snippet demonstrates how to embed a static, non-interactive analytics question using the StaticQuestion component. It requires the Embedded analytics SDK and TypeScript/React setup. The component accepts a height prop (default or set to '100%' for dynamic sizing); it does not respond to user clicks or allow drill-through menu functionality. The input is a pre-defined question identifier, and the output is a visual chart in the parent application.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/questions.md#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n```typescript\\n{% include_file \\\"{{ dirname }}/snippets/questions/static-question.tsx\\\" %}\\n```\n```\n\n----------------------------------------\n\nTITLE: Restarting Metabase JAR Application using Bash\nDESCRIPTION: Restarts the Metabase application run from a JAR file using the `java -jar` command, including necessary JVM arguments (`--add-opens`). This command is executed after stopping the Metabase process, backing up the H2 database file (`metabase.db.mv.db`), and then restarting the service. Requires a Java runtime and the `metabase.jar` file in the current directory.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/backing-up-metabase-application-data.md#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\njava --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: Running Metabase Open Source Container (Default Port)\nDESCRIPTION: Starts a Metabase Open Source container in detached mode (`-d`), maps the host's port 3000 to the container's port 3000 (`-p 3000:3000`), and names the container 'metabase' (`--name metabase`). It uses the previously pulled `metabase/metabase` image. Metabase will be accessible at `http://localhost:3000`.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-docker.md#2025-04-23_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\ndocker run -d -p 3000:3000 --name metabase metabase/metabase\n```\n\n----------------------------------------\n\nTITLE: Consolidating Columns using Metabase Coalesce Expression\nDESCRIPTION: Shows the Metabase `coalesce` expression used to consolidate values from 'Notes' and 'Comments' columns. It returns the value from 'Notes' if available, otherwise the value from 'Comments', and defaults to 'No notes or comments.' if both are null or blank. This is presented as a more concise alternative to the `case` example for this specific use case.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/coalesce.md#2025-04-23_snippet_1\n\nLANGUAGE: Metabase Expression\nCODE:\n```\ncoalesce([Notes], [Comments] \"No notes or comments.\")\n```\n\n----------------------------------------\n\nTITLE: Converting Timezone using convertTimezone Function in Metabase Expressions\nDESCRIPTION: Shifts a given date or timestamp value from a source time zone to a specified target time zone. It requires the date/timestamp column, the target time zone name, and the source time zone name as parameters. Note that database limitations may apply.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_51\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nconvertTimezone(column, target, source)\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nconvertTimezone(\"2022-12-28T12:00:00\", \"Canada/Pacific\", \"Canada/Eastern\")\n```\n\n----------------------------------------\n\nTITLE: Setting up JWT Authentication API Route in Next.js App Router (TypeScript)\nDESCRIPTION: Defines a Next.js App Router API route handler (e.g., in `app/sso/metabase/route.ts`) for Metabase JWT authentication. The `GET` function retrieves the Metabase URL and secret key from environment variables, constructs the JWT payload with user details and resource access, signs the token, generates the SSO URL, and redirects the user to the Metabase instance for authentication. Requires `jsonwebtoken` library.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/next-js.md#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { sign } from \"jsonwebtoken\";\nimport { NextRequest, NextResponse } from \"next/server\";\n```\n\nLANGUAGE: typescript\nCODE:\n```\nconst METABASE_URL = process.env.METABASE_URL!;\nconst METABASE_SECRET_KEY = process.env.METABASE_SECRET_KEY!;\n\nexport async function GET(request: NextRequest) {\n  const searchParams = request.nextUrl.searchParams;\n  const redirect = searchParams.get(\"redirect\") ?? \"/\";\n\n  // This should be replaced with your actual user data\n  const user = {\n    email: \"test@example.com\",\n    first_name: \"Test\",\n    last_name: \"User\",\n  };\n\n  const payload = {\n    email: user.email,\n    first_name: user.first_name,\n    last_name: user.last_name,\n    // Optional: specify which resources the user can access\n    // E.g. `resource: { dashboard: 1 }`\n    resource: {},\n    params: {},\n    exp: Math.round(Date.now() / 1000) + 10 * 60, // 10 minute expiration\n  };\n\n  const token = sign(payload, METABASE_SECRET_KEY);\n\n  const ssoUrl = `${METABASE_URL}/auth/sso?jwt=${token}&return_to=${encodeURIComponent(\n    redirect,\n  )}`;\n\n  return NextResponse.redirect(ssoUrl);\n}\n```\n\n----------------------------------------\n\nTITLE: Creating JWT Token Signing Helper\nDESCRIPTION: Defines a helper function to sign JWT tokens for Metabase SSO authentication, including user information such as email and name.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/interactive-embedding-quick-start-guide.md#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nfunction signUserToken(user) {\n  const payload = {\n    email: user.email,\n    first_name: user.firstName,\n    last_name: user.lastName,\n    exp: Math.round(Date.now() / 1000) + (60 * 60), // 1 hour expiration\n    // groups: [user.groupName], // we'll add this later\n  };\n\n  return jwt.sign(payload, METABASE_JWT_SHARED_SECRET);\n}\n```\n\n----------------------------------------\n\nTITLE: Migrating H2 Data to MySQL using Metabase JAR and Java Properties (Shell/Java)\nDESCRIPTION: This command executes the Metabase JAR file to migrate data from an H2 database file (`metabase.db`) to a MySQL database. It uses Java system properties (`-D`) instead of environment variables to specify the database type (`MB_DB_TYPE`) and connection URI (`MB_DB_CONNECTION_URI`). Requires Java, the Metabase JAR, the H2 file, and valid MySQL connection details.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/migrating-from-h2.md#2025-04-23_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\njava -DMB_DB_TYPE=mysql -DMB_DB_CONNECTION_URI=\"jdbc:mysql://<host>:3306/metabase?user=<username>&password=<password>\" -jar metabase.jar load-from-h2 metabase.db\n```\n\n----------------------------------------\n\nTITLE: Creating Users and Roles for Multi-Tenant SQL Access\nDESCRIPTION: This SQL script demonstrates creating separate database users (`metabase_tangerine`, `metabase_lemon`) for two tenants. It then creates roles (`customer_facing_analytics`, `tangerine_queries`, `lemon_queries`, `lemon_actions`) to bundle specific privileges like `CONNECT`, schema `USAGE`, `SELECT`, `EXECUTE`, `INSERT`, `UPDATE`, `DELETE`. Finally, it grants these roles to the respective users to enforce granular access control per tenant within the 'citrus' database and specific schemas ('tangerine', 'lemon'). Assumes the database and schemas exist.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/users-roles-privileges.md#2025-04-23_snippet_5\n\nLANGUAGE: sql\nCODE:\n```\n-- Create one database user per customer.\nCREATE USER metabase_tangerine WITH PASSWORD \"orange\";\nCREATE USER metabase_lemon WITH PASSWORD \"yellow\";\n\n-- Create a role to bundle privileges for all customers.\nCREATE ROLE customer_facing_analytics;\nGRANT CONNECT ON DATABASE \"citrus\" TO customer_facing_analytics;\nGRANT customer_facing_analytics TO metabase_tangerine, metabase_lemon;\n\n-- Create a role to bundle analytics read access for customer Tangerine.\nCREATE ROLE tangerine_queries;\nGRANT USAGE ON SCHEMA \"tangerine\" TO tangerine_queries;\nGRANT SELECT, EXECUTE ON ALL TABLES IN SCHEMA \"tangerine\" TO tangerine_queries;\nGRANT tangerine_queries TO metabase_tangerine;\n\n-- Create a role to bundle analytics read access for customer Lemon.\nCREATE ROLE lemon_queries;\nGRANT USAGE ON SCHEMA \"lemon\" TO lemon_queries;\nGRANT SELECT ON ALL TABLES IN SCHEMA \"lemon\" TO lemon_queries;\nGRANT lemon_queries TO metabase_lemon;\n\n-- Create a role to bundle privileges to Metabase actions for customer Lemon.\nCREATE ROLE lemon_actions;\nGRANT INSERT, UPDATE, DELETE ON TABLE \"lemonade\" IN SCHEMA \"lemon\" TO lemon_actions;\nGRANT lemon_actions TO metabase_lemon;\n```\n\n----------------------------------------\n\nTITLE: Setting JWT Constants for Metabase Integration\nDESCRIPTION: Defines the constants needed for JWT authentication with Metabase, including the shared secret key and the Metabase site URL.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/interactive-embedding-quick-start-guide.md#2025-04-23_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst METABASE_JWT_SHARED_SECRET = \"YOURSIGNINGKEY\";\nconst METABASE_SITE_URL = \"https://your-domain.metabaseapp.com\";\n```\n\n----------------------------------------\n\nTITLE: Concatenating Values in SQL Queries\nDESCRIPTION: Shows how to concatenate text and column values in SQL using the CONCAT function. Requires a SQL-compliant relational database (such as MySQL, PostgreSQL, or compatible warehouse). Key parameters are the column and literal values, with the result assigned to an alias like 'Location'. Outputs a table column where each value is the concatenated string; this SQL usage is equivalent to the Metabase 'concat' expression for queries run directly against a database.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/concat.md#2025-04-23_snippet_1\n\nLANGUAGE: SQL\nCODE:\n```\nSELECT\n    CONCAT(City, \", \", Country) AS \"Location\"\nFROM\n    richard_linklater_films;\n```\n\n----------------------------------------\n\nTITLE: Using Regex Function regexextract() in Metabase\nDESCRIPTION: The regexextract function extracts matching substrings according to a regular expression. Not available for MongoDB, SQLite, SQL Server, and only available for Druid with JDBC driver.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_41\n\nLANGUAGE: sql\nCODE:\n```\nregexextract([Address], \"[0-9]+\")\n```\n\n----------------------------------------\n\nTITLE: Example Metabase Configuration File (YAML)\nDESCRIPTION: This YAML snippet presents a template for the Metabase configuration file. It defines placeholder sections for `users` and `databases` which need customization, and a `settings` section showing default values. Comments guide the user on modification, using environment variables via `\"{{ env YOUR_ENV_VAR }}\"`, and link to official documentation for further details on configuration options.\nSOURCE: https://github.com/metabase/metabase/blob/master/src/metabase/cmd/resources/config-file-intro.md#2025-04-23_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\n# A config file template for Metabase.\n# You'll need to update (or remove) the `users` and `databases` sections.\n# The settings in `settings` include default values. We recommend removing\n# or commenting out settings that you don't set.\n# To use an env var, you can use a template string: \"{{ env YOUR_ENV_VAR }}\"\n# Note the quote marks wrapping the env var template.\n# For more on the configuration file, see:\n# https://www.metabase.com/docs/latest/configuring-metabase/config-file\n# For more on what each setting does, check out:\n# https://www.metabase.com/docs/latest/configuring-metabase/environment-variables\n```\n\n----------------------------------------\n\nTITLE: Subtracting Time in SQL for Event Departure Calculation - SQL - SQL\nDESCRIPTION: This SQL snippet subtracts a 30 minute interval from each arrive_by value and computes a new depart_at value, equivalent to the Metabase datetimeSubtract operation. It is meant to run on databases supporting INTERVAL arithmetic (e.g., PostgreSQL). The code assumes arrival datetimes are stored in a column called arrive_by in a table named events.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/datetimesubtract.md#2025-04-23_snippet_4\n\nLANGUAGE: SQL\nCODE:\n```\nSELECT arrive_by - INTERVAL '30 minutes' AS depart_at\nFROM events\n```\n\n----------------------------------------\n\nTITLE: Querying Metabase API Groups with fetch (JavaScript)\nDESCRIPTION: This JavaScript snippet shows how to perform an authenticated GET request to the Metabase API to retrieve group data, using the fetch API and an API key stored in the METABASE_API_KEY environment variable. Dependencies include a Node.js environment (for process.env and fetch; node-fetch may be required for some setups). Save as a .js file and run with Node; the output will display groups as returned from the API in JSON format.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/people-and-groups/api-keys.md#2025-04-23_snippet_1\n\nLANGUAGE: js\nCODE:\n```\n// Assuming you've set the key in process with\n// `export METABASE_API_KEY=\\\"YOUR_KEY_HERE\\\"`\nconst API_KEY = process.env.METABASE_API_KEY;\n\nconst init = {\n  headers: {\n    \"Content-Type\": \"application/json\",\n    \"X-API-KEY\": API_KEY,\n  },\n};\n\nconst host = \"http://127.0.0.1:3000\";\n\nasync function getGroups() {\n  const response = await fetch(`${host}/api/permissions/group`, init);\n  return response.json();\n}\n\ngetGroups().then(groups => console.log(\"Groups in your Metabase:\", groups));\n```\n\n----------------------------------------\n\nTITLE: Basic CountIf Usage in Metabase Expression\nDESCRIPTION: This Metabase custom expression counts the total number of rows where the value in the `Plan` column is equal to \"Basic\". It counts all matching rows, not just unique ones.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/countif.md#2025-04-23_snippet_0\n\nLANGUAGE: metabase-expression\nCODE:\n```\nCountIf([Plan] = \"Basic\")\n```\n\n----------------------------------------\n\nTITLE: Concatenating Values Using Metabase Custom Expression Language\nDESCRIPTION: Demonstrates how to use the Metabase 'concat' expression to join strings, columns, or mixed types. No external dependencies are required, but non-string values will be implicitly converted to strings. Inputs are a sequence of values or column references, and the output is a single concatenated string; Metabase ignores any display formatting and uses underlying raw values. Applicable only within Metabase custom expressions.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/concat.md#2025-04-23_snippet_0\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nconcat(value1, value2, ...)\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nconcat(\"Vienna\", \"Austria\")\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nconcat(\"Vienna\", \" is in \" ,\"Austria\")\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nconcat([City], \" is in \" ,[Country])\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nconcat(\"Result:\", \" \", [Value])\n```\n\n----------------------------------------\n\nTITLE: Checking Out Specific Branch in Sample App Repository (Shell)\nDESCRIPTION: Switches the Git repository of the cloned sample embedding application to a specific branch that corresponds to the Metabase version being used (e.g., `52-stable` for Metabase v1.52.x). This ensures compatibility between the sample app's SDK usage and the Metabase instance's features. Run this command inside the cloned repository directory. Requires Git.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/quickstart-with-sample-app.md#2025-04-23_snippet_5\n\nLANGUAGE: sh\nCODE:\n```\ngit checkout 52-stable\n```\n\n----------------------------------------\n\nTITLE: Defining the `in` Function Syntax in Metabase\nDESCRIPTION: Defines the basic syntax for the `in` function in Metabase custom expressions. It takes a value or column (`value1`) and compares it against a list of subsequent values or columns (`value2`, ...), returning true if `value1` matches any item in the list. Matches must be exact and are case-sensitive for strings.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/in.md#2025-04-23_snippet_0\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nin(value1, value2, ...)\n```\n\n----------------------------------------\n\nTITLE: Extracting Week of Year in MySQL using SQL\nDESCRIPTION: SQL example for MySQL using the `WEEKOFYEAR` function to get the week number for a specific date string ('2017-06-15'). By default, this function considers Monday as the first day of the week, and the first week is the one with more than 3 days in the new year. MySQL may offer alternative functions or modes.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/week.md#2025-04-23_snippet_3\n\nLANGUAGE: sql\nCODE:\n```\nWEEKOFYEAR(\"2017-06-15\")\n```\n\n----------------------------------------\n\nTITLE: Metabase Expression for Conditional Count (Python Comparison)\nDESCRIPTION: This Metabase custom expression performs the conditional count (`Active Subscription` is false). It is presented in the context of comparing with the Python (pandas) grouped conditional count example. In Metabase, this expression needs to be combined with setting 'Plan' as the 'Group by' column to achieve the grouped result.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/countif.md#2025-04-23_snippet_19\n\nLANGUAGE: metabase-expression\nCODE:\n```\nCountIf([Active Subscription] = false)\n```\n\n----------------------------------------\n\nTITLE: CountIf with Multiple Required Conditions (AND) in Metabase Expression\nDESCRIPTION: This Metabase custom expression counts the total number of rows that satisfy multiple conditions using the `AND` operator. It returns the count where the `Plan` column is \"Basic\" AND the `Active Subscription` column is true.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/countif.md#2025-04-23_snippet_1\n\nLANGUAGE: metabase-expression\nCODE:\n```\nCountIf(([Plan] = \"Basic\" AND [Active Subscription] = true))\n```\n\n----------------------------------------\n\nTITLE: Migrating from H2 to PostgreSQL Database in Metabase\nDESCRIPTION: This code snippet demonstrates how to migrate Metabase's application database from H2 to PostgreSQL. It sets environment variables for the PostgreSQL connection and runs the Metabase JAR file with the 'load-from-h2' command.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/loading-from-h2.md#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nexport MB_DB_TYPE=postgres\nexport MB_DB_DBNAME=metabase\nexport MB_DB_PORT=5432\nexport MB_DB_USER=<username>\nexport MB_DB_PASS=<password>\nexport MB_DB_HOST=localhost\njava --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar load-from-h2 /path/to/metabase.db # do not include .mv.db\n```\n\n----------------------------------------\n\nTITLE: MetabaseProvider with Theme Configuration in TypeScript\nDESCRIPTION: Example of a complete config object for MetabaseProvider including theming options. Demonstrates how to customize appearance through color scheme, border radius, and typography settings.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/config.md#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n{\n  authConfig: {\n    metabaseUrl: \"https://metabase.example.com\",\n    tokenGenerator: async () => {\n      const response = await fetch(\"/api/metabase/token\");\n      const { token } = await response.json();\n      return token;\n    },\n  },\n  theme: {\n    colorScheme: \"light\",\n    colors: {\n      brand: \"#509ee3\",\n      accent1: \"#9cc177\",\n      accent2: \"#a989c5\",\n      accent3: \"#ef8c8c\",\n      accent4: \"#f9d45c\",\n      accent5: \"#f2a86f\",\n      accent6: \"#98d9d9\",\n      accent7: \"#7172ad\",\n    },\n    borderRadius: {\n      md: \"0.375rem\",\n      lg: \"0.5rem\",\n    },\n    fontFamilies: {\n      display: \"'Montserrat', sans-serif\",\n      body: \"'Montserrat', sans-serif\",\n      code: \"monospace\",\n    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Server Dependencies (Shell)\nDESCRIPTION: Executes the Node Package Manager (npm) command to download and install all the backend server's dependencies as defined in its `package.json` file. This command must be run within the `server` directory of the sample application. Requires Node.js and npm to be installed.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/quickstart-with-sample-app.md#2025-04-23_snippet_9\n\nLANGUAGE: sh\nCODE:\n```\nnpm install\n```\n\n----------------------------------------\n\nTITLE: Dynamic YouTube Embedding with Variables in Metabase Iframe Cards\nDESCRIPTION: An example showing how to include a variable in a YouTube embed URL for an iframe card that can be connected to dashboard filters to dynamically change the video.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/dashboards/introduction.md#2025-04-23_snippet_4\n\nLANGUAGE: markdown\nCODE:\n```\n{% raw %}\nsrc=\"https://www.youtube.com/embed/{{video_id}}\n{% endraw %}\n```\n\n----------------------------------------\n\nTITLE: Embedding with JWT authentication and relative path redirect in HTML\nDESCRIPTION: Example showing how to embed Metabase using JWT authentication with a relative path for redirection. This approach is useful when working within the same domain.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/interactive-embedding.md#2025-04-23_snippet_5\n\nLANGUAGE: html\nCODE:\n```\nhttps://metabase.example.com/auth/sso?jwt=<token>&return_to=%2Fdashboard%2F1\n```\n\n----------------------------------------\n\nTITLE: Creating Minimum Read Privileges for Metabase User in PostgreSQL\nDESCRIPTION: This SQL script sets up the minimum required privileges for a Metabase user in a PostgreSQL database. It creates an 'analytics' role, grants it CONNECT privilege, creates a 'metabase' user, assigns the user to the 'analytics' role, and provides four different options (commented out) for granting SELECT privileges (all data, specific database, specific schema, or specific table). Requires administrative access to the PostgreSQL database.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/users-roles-privileges.md#2025-04-23_snippet_0\n\nLANGUAGE: sql\nCODE:\n```\n-- Create a role named \"analytics\".\nCREATE ROLE analytics WITH LOGIN;\n\n-- Add the CONNECT privilege to the role.\nGRANT CONNECT ON DATABASE \"your_database\" TO analytics;\n\n-- Create a database user named \"metabase\".\nCREATE USER metabase WITH PASSWORD \"your_password\";\n\n-- Give the role to the metabase user.\nGRANT analytics TO metabase;\n\n-- Add query privileges to the role (options 1-4):\n\n-- Option 1: Uncomment the line below to let users with the analytics role query ALL DATA (In Postgres 14 or higher. See [Predefined Roles](https://www.postgresql.org/docs/current/predefined-roles.html#PREDEFINED-ROLES)).\n-- GRANT pg_read_all_data TO analytics;\n\n-- Option 2: Uncomment the line below to let users with the analytics role query anything in the DATABASE.\n-- GRANT USAGE ON DATABASE \"your_schema\" TO analytics;\n-- GRANT SELECT ON DATABASE \"your_schema\"  TO analytics;\n\n-- Option 3: Uncomment the line below to let users with the analytics role query anything in a specific SCHEMA.\n-- GRANT USAGE ON SCHEMA \"your_schema\" TO analytics;\n-- GRANT SELECT ON ALL TABLES IN SCHEMA \"your_schema\" TO analytics;\n\n-- Option 4: Uncomment the line below to let users with the analytics role query anything in a specific TABLE.\n-- GRANT USAGE ON SCHEMA \"your_schema\" TO analytics;\n-- GRANT SELECT ON \"your_table\" IN SCHEMA \"your_schema\" TO analytics;\n```\n\n----------------------------------------\n\nTITLE: Aggregating Order Subtotals with SQL – SQL\nDESCRIPTION: This SQL snippet demonstrates how to aggregate (sum) the 'subtotal' column in the 'orders' table grouped by the 'created_at' date. It is intended for use in the Metabase SQL Editor with the Sample Database selected. No dependencies are required other than access to a database supporting standard SQL aggregation syntax. The query expects an 'orders' table with at least 'subtotal' and 'created_at' columns, and outputs a table summarizing sales subtotals by creation date. Note: this is a standard SQL query and the output will match the grouping and summing behavior available in Metabase's query builder.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/native-editor/writing-sql.md#2025-04-23_snippet_0\n\nLANGUAGE: sql\nCODE:\n```\nSELECT\n    sum(subtotal),\n    created_at\nFROM orders\nGROUP BY created_at;\n```\n\n----------------------------------------\n\nTITLE: Column Consolidation using Python Pandas\nDESCRIPTION: Illustrates the Python equivalent using the pandas library. It assumes data is in a DataFrame named `df` with columns 'notes' and 'comments'. The `combine_first()` method merges the two columns, taking non-null values from 'notes' first, and `fillna()` provides the default value.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/coalesce.md#2025-04-23_snippet_4\n\nLANGUAGE: python\nCODE:\n```\ndf['custom_column'] = df['notes'].combine_first(df['comments'])\\\n                                 .fillna('No notes or comments.')\n```\n\n----------------------------------------\n\nTITLE: Running Metabase Container with Host User/Group ID Mapping\nDESCRIPTION: Starts a Metabase container, mapping a host directory (`~/my-metabase-db`) to `/metabase.db` inside the container (`-v`). It uses the `MUID` and `MGID` environment variables (set to the host's `$UID` and `$GID`) to ensure the Metabase process inside the container runs with the same user/group ID as the host user, matching file permissions for the mapped volume.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-docker.md#2025-04-23_snippet_11\n\nLANGUAGE: shell\nCODE:\n```\ndocker run -d -v ~/my-metabase-db:/metabase.db --name metabase -e MB_DB_FILE=/metabase.db -e MUID=$UID -e MGID=$GID -p 3000:3000 metabase/metabase\n```\n\n----------------------------------------\n\nTITLE: Setting Timezone in PostgreSQL SELECT Query\nDESCRIPTION: SQL query example demonstrating how to explicitly set a timezone for a column when the Reporting Time Zone setting is not being applied. The query casts a column to timestamp and converts it to timestamptz with EST timezone.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/timezones.md#2025-04-23_snippet_0\n\nLANGUAGE: sql\nCODE:\n```\nSELECT column::TIMESTAMP AT TIME ZONE 'EST' AS column_est\n```\n\n----------------------------------------\n\nTITLE: Configuring MySQL/MariaDB Application Database via Environment Variables in Shell\nDESCRIPTION: Sets environment variables (MB_DB_TYPE, MB_DB_DBNAME, MB_DB_PORT, MB_DB_USER, MB_DB_PASS, MB_DB_HOST) to configure Metabase to use a MySQL or MariaDB database as its application database and then starts Metabase. Requires a pre-existing MySQL/MariaDB database named 'metabase' with utf8mb4 character set.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/configuring-application-database.md#2025-04-23_snippet_4\n\nLANGUAGE: sh\nCODE:\n```\nexport MB_DB_TYPE=mysql\nexport MB_DB_DBNAME=metabase\nexport MB_DB_PORT=3306\nexport MB_DB_USER=<username>\nexport MB_DB_PASS=<password>\nexport MB_DB_HOST=localhost\njava --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: SQL Query with LAG Window Function Equivalent to Metabase Offset\nDESCRIPTION: Displays the SQL query generated by Metabase when using `Offset(count, -1)` grouped by month. It demonstrates the use of the `LAG` window function with an offset of 1, ordered by the time dimension (`CREATED_AT`), to retrieve the count from the previous row, achieving the same result as the Metabase `Offset` function.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/offset.md#2025-04-23_snippet_8\n\nLANGUAGE: sql\nCODE:\n```\nSELECT\n  \"source\".\"CREATED_AT\" AS \"CREATED_AT\",\n  COUNT(*) AS \"count\",\n  LAG(COUNT(*), 1) OVER (\n\nORDER BY\n      \"source\".\"CREATED_AT\" ASC\n  ) AS \"Order count previous period\"\nFROM\n  (\n    SELECT\n      DATE_TRUNC('month', \"PUBLIC\".\"ORDERS\".\"CREATED_AT\") AS \"CREATED_AT\"\n    FROM\n      \"PUBLIC\".\"ORDERS\"\n  ) AS \"source\"\nGROUP BY\n  \"source\".\"CREATED_AT\"\nORDER BY\n  \"source\".\"CREATED_AT\" ASC\n```\n\n----------------------------------------\n\nTITLE: Implementing Coalesce Logic with Metabase Case Expression - Plaintext\nDESCRIPTION: This code rewrites the prior coalesce use as an explicit set of Metabase `case` conditions, covering all combinations where [Notes] or [Comments] may be blank. For each scenario, it returns the most relevant available string, defaulting to the final fallback if both are blank. Columns must be strings or similarly comparable types, and ISBLANK is used for null/empty checks.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/case.md#2025-04-23_snippet_3\n\nLANGUAGE: plaintext\nCODE:\n```\ncase(ISBLANK([Notes]) = FALSE AND ISBLANK([Comments]) = FALSE, [Notes],\n     ISBLANK([Notes]) = TRUE  AND ISBLANK([Comments]) = False, [Comments],\n     ISBLANK([Notes]) = FALSE AND ISBLANK([Comments]) = TRUE,  [Notes],\n     ISBLANK([Notes]) = TRUE  AND ISBLANK([Comments]) = TRUE,  \"No notes or comments\")\n```\n\n----------------------------------------\n\nTITLE: Database scan query in SQL\nDESCRIPTION: SQL query used by Metabase during database scans to cache column values for filter dropdowns. This query samples up to 1,000 distinct records from each table in ascending order.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/sync-scan.md#2025-04-23_snippet_1\n\nLANGUAGE: sql\nCODE:\n```\nSELECT\n    \"your_table_or_view\".\"column\" AS \"column\"\nFROM\n    \"your_schema\".\"your_table_or_view\"\nGROUP BY\n    \"your_table_or_view\".\"column\"\nORDER BY\n    \"your_table_or_view\".\"column\" ASC\nLIMIT 1000\n```\n\n----------------------------------------\n\nTITLE: Calculating Cumulative Sum with SQL Window Functions in Metabase\nDESCRIPTION: This SQL snippet exemplifies how Metabase drivers supporting the `:window-functions/cumulative` feature (introduced in v0.50.0) should implement cumulative sum aggregations. It utilizes SQL window functions (`SUM() OVER (...)`) to calculate the running total. The example includes nesting the initial aggregation and date truncation within a subselect (`source`) to ensure compatibility with databases that require referencing plain column identifiers in window function partitions or ordering clauses, such as BigQuery.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/driver-changelog.md#2025-04-23_snippet_10\n\nLANGUAGE: sql\nCODE:\n```\nSELECT\n  created_at_month,\n  sum(sum(total) OVER (ORDER BY created_at_month ROWS UNBOUNDED PRECEDING) AS cumulative_sum\nFROM (\n  SELECT\n    date_trunc('month', created_at) AS created_at_month,\n    total\n  FROM\n    my_table\n  ) source\nGROUP BY\n  created_at_month\nORDER BY\n  created_at_month\n```\n\n----------------------------------------\n\nTITLE: Running Conditional Count using CumulativeCount and Case in Metabase Expression\nDESCRIPTION: This Metabase custom expression calculates a running (cumulative) count based on a condition. It uses `CumulativeCount` combined with a `case` statement to count rows where `Active Subscription` is true. This requires setting a 'Group by' column, typically a date/time field (e.g., 'Created Date: Month'), to get the running total over time.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/countif.md#2025-04-23_snippet_9\n\nLANGUAGE: metabase-expression\nCODE:\n```\nCumulativeCount(case([Active Subscription] = true, [ID]))\n```\n\n----------------------------------------\n\nTITLE: Example: Setting a Default 'Breakfast' Filter Value in Embed URL\nDESCRIPTION: Provides a concrete example of setting the default value for an editable filter parameter named 'breakfast' to 'Scrambled_eggs' in a static embed URL. This unsigned parameter is appended to the iframe's src attribute. Underscores replace spaces in values.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/static-embedding-parameters.md#2025-04-23_snippet_1\n\nLANGUAGE: url\nCODE:\n```\nyour_embedding_url?breakfast=Scrambled_eggs\n```\n\n----------------------------------------\n\nTITLE: Enabling CORS for Cross-Domain Authentication\nDESCRIPTION: Express middleware configuration to handle cross-domain requests when your frontend and backend are on different domains. This allows the authentication to work across domains.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/authentication.md#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\n{% include_file \"{{ dirname }}/snippets/authentication/express-server-cors.ts\" snippet=\"example\" %}\n```\n\n----------------------------------------\n\nTITLE: Enabling HTTPS for Metabase with SSL Certificate\nDESCRIPTION: This snippet demonstrates how to configure Metabase to run over HTTPS using an SSL certificate. It sets various environment variables for SSL configuration.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/customizing-jetty-webserver.md#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nexport MB_JETTY_SSL=\"true\"\nexport MB_JETTY_SSL_PORT=\"8443\"\nexport MB_JETTY_SSL_KEYSTORE=\"path/to/keystore.jks\" # replace this value with your own\nexport MB_JETTY_SSL_KEYSTORE_PASSWORD=\"storepass\" # replace this value with your own\njava --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: Combining Multiple Queries for Funnel Chart in SQL\nDESCRIPTION: This SQL snippet demonstrates how to combine results from multiple saved questions using UNION to create a dataset suitable for a funnel chart. It creates a 'step' column and combines data from three separate queries.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/visualizations/funnel.md#2025-04-23_snippet_0\n\nLANGUAGE: sql\nCODE:\n```\n-- example of a query that retrieves results of questions and combines them with UNION\n\nSELECT 'Leads' as step, * from {{#120-leads}}\nUNION\nSELECT 'Qualified' as step, * from {{#121-qualified}}\nUNION\nSELECT 'Prospects' as step, * from {{#122-prospects}}\n```\n\n----------------------------------------\n\nTITLE: Setting Metabase DB Environment Variables and Rolling Back with migrate down - Shell\nDESCRIPTION: This bash snippet exports environment variables required to connect to the Metabase application database and then runs the JAR's 'migrate down' command to undo database schema migrations. Intended for rollback scenarios when using the standalone JAR, it requires correct database credentials. Inputs: Environment variable values, JAR file present in path. Output: Database migration rolled back to the previous state.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/upgrading-metabase.md#2025-04-23_snippet_7\n\nLANGUAGE: shell\nCODE:\n```\nexport MB_DB_TYPE=postgres\nexport MB_DB_DBNAME=metabaseappdb\nexport MB_DB_PORT=5432\nexport MB_DB_USER=username\nexport MB_DB_PASS=password\nexport MB_DB_HOST=localhost\njava --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar migrate down\n```\n\n----------------------------------------\n\nTITLE: Using Mathematical Function round() in Metabase\nDESCRIPTION: The round function rounds a decimal number to the nearest integer value. It can also be used with expressions to round to a specific decimal place.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_24\n\nLANGUAGE: sql\nCODE:\n```\nround([Temperature])\n```\n\nLANGUAGE: sql\nCODE:\n```\nround([Temperature] * 10) / 10\n```\n\n----------------------------------------\n\nTITLE: Computing Cumulative Sum Using SQL Window Functions - SQL\nDESCRIPTION: This SQL snippet demonstrates how to compute a cumulative sum (running total) of a column (quantity) over grouped time periods using SQL window functions. It first groups the data by truncated months, sums the 'quantity' field within each group, and then calculates the running total using SUM(SUM(quantity)) OVER (...) partitioned by ascending months. This query requires a SQL database that supports nested SELECT and window functions. Inputs include a date column and the numeric column for summing. Output is cumulative sum by month.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/cumulative.md#2025-04-23_snippet_3\n\nLANGUAGE: sql\nCODE:\n```\nSELECT\n  created_month,\n  SUM(SUM(quantity)) OVER (\n    ORDER BY\n      created_month ASC ROWS UNBOUNDED PRECEDING\n  ) AS \"sum\"\nFROM\n  (\n    SELECT\n      quantity,\n      DATE_TRUNC ('month', created_at) AS created_month\n    FROM\n      orders\n  )\nGROUP BY\n  created_month\nORDER BY\n  created_month ASC\n```\n\n----------------------------------------\n\nTITLE: Example H2 Database Files Output\nDESCRIPTION: Shows example output from listing H2 database files. Metabase creates files like `metabase.db.h2.db` (or `metabase.db.mv.db` on older versions) and `metabase.db.trace.db` to store its application data when using the default H2 database.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/configuring-application-database.md#2025-04-23_snippet_9\n\nLANGUAGE: text\nCODE:\n```\nmetabase.db.h2.db  # Or metabase.db.mv.db depending on when you first started using Metabase.\nmetabase.db.trace.db\n```\n\n----------------------------------------\n\nTITLE: Granting Database Permissions to Metabase User\nDESCRIPTION: SQL commands to grant SELECT permissions on all tables in a specific database to the Metabase user and apply the privilege changes immediately.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/connections/mysql.md#2025-04-23_snippet_3\n\nLANGUAGE: sql\nCODE:\n```\nGRANT SELECT ON targetdb.* TO 'metabase'@'172.17.0.1';\nFLUSH PRIVILEGES;\n```\n\n----------------------------------------\n\nTITLE: Installing Metabase SDK via Yarn\nDESCRIPTION: Installs the Metabase Embedded Analytics SDK React package using Yarn. Requires Node.js and Yarn. The dist-tag (`@53-stable`) must correspond to the major version of the Metabase instance being used (e.g., v1.53.x). This command adds the SDK as a dependency to the project.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/quickstart.md#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nyarn add @metabase/embedding-sdk-react@53-stable\n```\n\n----------------------------------------\n\nTITLE: Setting Multiple Default Values for One Filter in Embed URL\nDESCRIPTION: Demonstrates how to set multiple default values for a single filter parameter (like a multi-select filter) in a static embed URL. This is achieved by repeating the parameter name with different values, separated by ampersands (`&`). This example sets 'breakfast' to both 'Scrambled_eggs' and 'Bacon'.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/static-embedding-parameters.md#2025-04-23_snippet_3\n\nLANGUAGE: url\nCODE:\n```\nyour_embedding_url?breakfast=Scrambled_eggs&breakfast=Bacon\n```\n\n----------------------------------------\n\nTITLE: Calculating Time Difference in Months using PostgreSQL SQL\nDESCRIPTION: This SQL query, specific to PostgreSQL, calculates the difference between the `aging_end` and `aging_start` columns in whole months for a table named `cheese`. It uses the `AGE` function to get the interval and `DATE_PART` to extract the number of months, aliasing the result as `mature_age_months`. This is presented as an equivalent to a Metabase `datetimeDiff` expression.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/datetimediff.md#2025-04-23_snippet_3\n\nLANGUAGE: sql\nCODE:\n```\nSELECT DATE_PART('month', AGE(aging_end, aging_start)) AS mature_age_months\nFROM cheese\n```\n\n----------------------------------------\n\nTITLE: Configuring SDK Authentication in Frontend\nDESCRIPTION: Frontend code to configure the Metabase SDK to use the JWT authentication endpoint. This sets up the authentication flow between your application and Metabase.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/authentication.md#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n{% include_file \"{{ dirname }}/snippets/authentication/auth-config-base.tsx\" snippet=\"example\" %}\n```\n\n----------------------------------------\n\nTITLE: Using coalesce in Metabase Logical Functions - Markdown\nDESCRIPTION: Explains the coalesce logical function in Metabase custom expressions, which returns the first non-null value from its argument list per row. Accepts multiple column references or literals; outputs the first found non-null for that record.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_14\n\nLANGUAGE: Markdown\nCODE:\n```\nSyntax: `coalesce(value1, value2, …)`\n\nExample: `coalesce([Comments], [Notes], \"No comments\")`. If both the `Comments` and `Notes` columns are null for that row, the expression will return the string \"No comments\".\n```\n\n----------------------------------------\n\nTITLE: Creating SSO URL with UI Customization Parameters in TypeScript/React\nDESCRIPTION: Example of using URL constructor to add UI modification parameters to the Metabase iframe URL during SSO authentication. The code disables the logo, enables top navigation, search functionality, and new button.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/interactive-ui-components.md#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst mods = \"logo=false&top_nav=true&search=true&new_button=true\";\n\napp.get(\"/sso/metabase\", restrict, (req, res) => {\n  const ssoUrl = new URL(\"/auth/sso\", METABASE_SITE_URL);\n  ssoUrl.searchParams.set(\"jwt\", signUserToken(req.session.user));\n  ssoUrl.searchParams.set(\"return_to\", `${req.query.return_to ?? \"/\"}?${mods}`);\n\n  res.redirect(ssoUrl);\n});\n```\n\n----------------------------------------\n\nTITLE: Example .env Configuration for Sample App (Text)\nDESCRIPTION: Shows the structure and example values for the `.env` file used by the sample embedding application. It defines environment variables for both the frontend (client port, Metabase URL for client-side requests, auth provider URI) and the backend (auth provider port, Metabase URL for server-side operations, JWT shared secret). The `TODO` for `METABASE_JWT_SHARED_SECRET` must be replaced with the actual key generated in Metabase settings.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/quickstart-with-sample-app.md#2025-04-23_snippet_7\n\nLANGUAGE: txt\nCODE:\n```\n# FRONTEND\nCLIENT_PORT=3100\nVITE_METABASE_INSTANCE_URL=\"http://localhost:3000\"\nVITE_AUTH_PROVIDER_URI=\"http://localhost:9090/sso/metabase\"\n\n# BACKEND\nAUTH_PROVIDER_PORT=9090\nMETABASE_INSTANCE_URL=\"http://localhost:3000\"\nMETABASE_JWT_SHARED_SECRET=\"TODO\"\n```\n\n----------------------------------------\n\nTITLE: CountIf with Multiple Optional Conditions (OR) in Metabase Expression\nDESCRIPTION: This Metabase custom expression counts the total number of rows that satisfy at least one of multiple conditions using the `OR` operator. It returns the count where the `Plan` column is \"Basic\" OR the `Active Subscription` column is true.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/countif.md#2025-04-23_snippet_2\n\nLANGUAGE: metabase-expression\nCODE:\n```\nCountIf(([Plan] = \"Basic\" OR [Active Subscription] = true))\n```\n\n----------------------------------------\n\nTITLE: Using Count in Metabase Custom Expressions - Markdown\nDESCRIPTION: Shows the method and syntax for counting result rows using the built-in Count expression in Metabase. No dependencies. Takes no arguments, returns the number of rows produced by the query.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_1\n\nLANGUAGE: Markdown\nCODE:\n```\nSyntax: `Count()`\n\nExample: `Count()` If a table or result returns 10 rows, `Count` will return `10`.\n```\n\n----------------------------------------\n\nTITLE: Installing Metabase SDK via NPM\nDESCRIPTION: Installs the Metabase Embedded Analytics SDK React package using NPM. Requires Node.js and NPM. The dist-tag (`@53-stable`) must correspond to the major version of the Metabase instance being used (e.g., v1.53.x). This command adds the SDK as a dependency to the project.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/quickstart.md#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @metabase/embedding-sdk-react@53-stable\n```\n\n----------------------------------------\n\nTITLE: Conditional Count by Group using CountIf in Metabase Expression\nDESCRIPTION: This Metabase custom expression counts rows based on a condition (`Active Subscription` is false). To get counts per group (e.g., per plan), this expression should be used in the 'Summarize' section of the query builder along with a 'Group by' clause on the desired column (e.g., 'Plan').\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/countif.md#2025-04-23_snippet_4\n\nLANGUAGE: metabase-expression\nCODE:\n```\nCountIf([Active Subscription] = false)\n```\n\n----------------------------------------\n\nTITLE: Checking Column Value Against List with `in` in Metabase\nDESCRIPTION: Example demonstrating how to use the `in` function in a Metabase expression to filter rows where the `Category` column matches either 'Gadget' or 'Widget'. This is a common use case for checking membership in a set of string literals.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/in.md#2025-04-23_snippet_1\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nin([Category], \"Gadget\", \"Widget\")\n```\n\n----------------------------------------\n\nTITLE: Embedding AnalyticsPage Component in React Application\nDESCRIPTION: This JSX snippet demonstrates how to add the <AnalyticsPage /> component to a page in your React app. This component will render the embedded Metabase dashboard with the necessary providers and theming applied, as set up by the CLI. Insert this component into your application's component tree where you want the analytics dashboard to appear.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/quickstart-cli.md#2025-04-23_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\n{% include_file \"{{ dirname }}/snippets/quickstart-cli/example.tsx\" snippet=\"example\" %}\n```\n\n----------------------------------------\n\nTITLE: SQL Equivalent of Basic CountIf\nDESCRIPTION: This SQL query demonstrates the equivalent logic to the Metabase expression `CountIf([Plan] = \"Basic\")`. It uses the `COUNT` function with a `CASE` statement to count rows in the `accounts` table where the `plan` column equals 'Basic', aliasing the result as `total_basic_plans`.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/countif.md#2025-04-23_snippet_10\n\nLANGUAGE: sql\nCODE:\n```\nSELECT COUNT(CASE WHEN plan = \"Basic\" THEN id END) AS total_basic_plans\nFROM accounts\n```\n\n----------------------------------------\n\nTITLE: Defining and Scheduling a One-Time Startup Job in Clojure with Quartz\nDESCRIPTION: Defines a Quartz job (`StartupTask`) using `metabase.task/defjob` that executes once when Metabase starts. It uses `metabase.task/init!` to build the job and a trigger configured with `triggers/start-now`. The job and trigger are then scheduled using `task/schedule-task!`. Note that this task runs on every instance startup in multi-instance deployments.\nSOURCE: https://github.com/metabase/metabase/blob/master/src/metabase/task/QUARTZ.md#2025-04-23_snippet_0\n\nLANGUAGE: clojure\nCODE:\n```\n(ns my.startup.task\n  (:require\n   [clojurewerkz.quartzite.jobs :as jobs]\n   [clojurewerkz.quartzite.triggers :as triggers]\n   [clojurewerkz.quartzite.schedule.simple :as simple]\n   [metabase.task :as task]))\n\n(def startup-job-key     (jobs/key \"my.startup.task.job\"))\n(def startup-trigger-key (triggers/key \"my.startup.task.trigger\"))\n\n(task/defjob StartupTask [_]\n  (println \"Running startup initialization task\"))\n\n(defmethod task/init! ::StartupTask [_]  \n  (let [job (jobs/build                  \n             (jobs/of-type StartupTask)   ; Specify the job class to execute (the StartupTask we defined earlier)\n             (jobs/with-identity startup) ; Set the job's identity using the startup-job-key defined above\n             (jobs/with-description \"One-time startup initialization task\") )\n        trigger (triggers/build                \n                 (triggers/with-identity startup)\n                 (triggers/for-job startup)       ; Associate this trigger with the job defined above\n                 (triggers/start-now))]           ; Configure the trigger to fire immediately when scheduled\n    (task/schedule-task! job trigger)))           ; Register both the job and trigger with the Quartz scheduler\n```\n\n----------------------------------------\n\nTITLE: Metabase Expression Equivalent to Basic SQL Conditional Count\nDESCRIPTION: This Metabase custom expression is the direct equivalent of the preceding SQL query example (`COUNT(CASE WHEN plan = 'Basic' ...)`). It counts rows where the `Plan` column equals \"Basic\".\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/countif.md#2025-04-23_snippet_11\n\nLANGUAGE: metabase-expression\nCODE:\n```\nCountIf([Plan] = \"Basic\")\n```\n\n----------------------------------------\n\nTITLE: Inserting a Saved SQL Snippet Reference in a Query - SQL\nDESCRIPTION: This SQL example showcases how to insert a previously saved snippet, named 'Orders and Products', into a new query using Metabase's snippet reference syntax. Requires that the snippet exists and is accessible to the user. The input is the snippet name, and the output is the result of the combined SQL with the snippet inlined; this approach streamlines query writing and maintenance but necessitates that referenced snippet names and their internal aliases remain consistent.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/native-editor/snippets.md#2025-04-23_snippet_2\n\nLANGUAGE: sql\nCODE:\n```\nSELECT *\nFROM {{snippet: Orders and Products}}\n```\n\n----------------------------------------\n\nTITLE: Metabase Offset Expression for Previous Period Count\nDESCRIPTION: A Metabase custom expression used to get the count from the previous period (e.g., previous month). This expression is used as an example demonstrating how Metabase translates `Offset` to SQL window functions like `LAG`.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/offset.md#2025-04-23_snippet_7\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nOffset(count, -1)\n```\n\n----------------------------------------\n\nTITLE: Syntax for Metabase Offset Function\nDESCRIPTION: Defines the basic syntax for the `Offset` function in Metabase custom expressions. It takes an `expression` (the value to retrieve) and a `rowOffset` (the relative row position, e.g., -1 for previous, 1 for next). This function can only be used in the Summarize step.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/offset.md#2025-04-23_snippet_0\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nOffset(expression, rowOffset)\n```\n\n----------------------------------------\n\nTITLE: Creating Conditional Status Column Using Metabase Expression Language\nDESCRIPTION: Demonstrates how to define task status dynamically using Metabase's custom expression language. Combinations of 'now()', logical operators, and a 'case' statement allow assignments like 'In progress', 'Needs extension', or 'DUE RIGHT NOW!' based on the current datetime relative to project task fields. Requires use of Metabase's custom expression syntax within the query builder for calculated columns. Inputs include date columns like [Start] and [Deadline], and outputs are status strings.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/now.md#2025-04-23_snippet_0\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nnow() >= [Start] AND now() < [Deadline]\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nnow() >= [Start] AND now() >= [Deadline]\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nnow() = [Deadline]\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\ncase(now() >= [Start] AND now() < [Deadline], \"In progress\",\n     now() >= [Start] AND now() >= [Deadline], \"Needs extension\",\n     now() = [Deadline], \"DUE RIGHT NOW!\")\n```\n\n----------------------------------------\n\nTITLE: Sample Docker Compose Configuration for Metabase with LDAP\nDESCRIPTION: This Docker Compose file sets up a test environment with Metabase and OpenLDAP for testing LDAP authentication. It configures both services with appropriate environment variables and networking to enable communication between them.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/ldap.md#2025-04-23_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nversion: \"3.7\"\nservices:\n  metabase-ldap:\n    image: metabase/metabase:latest\n    container_name: metabase-ldap\n    hostname: metabase-ldap\n    volumes:\n      - /dev/urandom:/dev/random:ro\n    ports:\n      - 3000:3000\n    networks:\n      - metanet1\n    environment:\n      - \"MB_LDAP_BIND_DN=cn=admin,dc=example,dc=org\"\n      - \"MB_LDAP_ENABLED=true\"\n      - \"MB_LDAP_GROUP_BASE=cn=readers\"\n      - \"MB_LDAP_HOST=openldap\"\n      - \"MB_LDAP_PASSWORD=adminpassword\"\n      - \"MB_LDAP_PORT=1389\"\n      - \"MB_LDAP_USER_BASE=ou=users,dc=example,dc=org\"\n      - \"MB_LDAP_ATTRIBUTE_EMAIL=uid\"\n      # We are using the same field for email and first name, just for this example to work without modifications to the LDAP objects\n      - \"MB_LDAP_ATTRIBUTE_FIRSTNAME=uid\"\n      - \"MB_LDAP_ATTRIBUTE_LASTNAME=sn\"\n  openldap:\n    image: bitnami/openldap:2.4.57\n    hostname: openldap\n    container_name: openldap\n    ports:\n      - 1389:1389\n    environment:\n      - LDAP_ADMIN_USERNAME=admin\n      - LDAP_ADMIN_PASSWORD=adminpassword\n      - LDAP_USERS=user01@metabase.com,user02@metabase.com\n      - LDAP_PASSWORDS=password1!,password2!\n      - LDAP_PORT_NUMBER=1389\n      - LDAP_ROOT=dc=example,dc=org\n      - LDAP_USER_DC=users\n      - LDAP_GROUP=readers\n    networks:\n      - metanet1\nnetworks:\n  metanet1:\n    driver: bridge\n```\n\n----------------------------------------\n\nTITLE: Using String Function rTrim() in Metabase\nDESCRIPTION: The rTrim function removes trailing whitespace from a string of text. It takes a string column or value as input.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_44\n\nLANGUAGE: sql\nCODE:\n```\nrTrim([Comment])\n```\n\n----------------------------------------\n\nTITLE: SQL Query with Current Date Default Value Example in PostgreSQL\nDESCRIPTION: PostgreSQL example that uses the CURRENT_DATE function as a default value for a date filter. This demonstrates how to implement dynamic date defaults in SQL queries when no specific date is provided by the user.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/native-editor/sql-parameters.md#2025-04-23_snippet_9\n\nLANGUAGE: sql\nCODE:\n```\nSELECT\n  *\nFROM\n  orders\nWHERE\n  DATE(created_at) = [[ {{dateOfCreation}} --]] CURRENT_DATE\n```\n\n----------------------------------------\n\nTITLE: Defining a Parameterized MongoDB Query Template in Metabase Native Editor (MongoDB)\nDESCRIPTION: This MongoDB example demonstrates how to define a variable ('cat') within a $match clause of an aggregation pipeline for use in a Metabase native query. Metabase will create a filter widget or allow filtering via URL parameter for the variable. Requires a MongoDB data source configured in Metabase and the 'products' collection with a 'category' field. Input is a value for 'cat', filtering the aggregation pipeline accordingly. This snippet is only valid within the Metabase query builder context.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/native-editor/sql-parameters.md#2025-04-23_snippet_2\n\nLANGUAGE: mongodb\nCODE:\n```\n{% raw %}[{ $match: { category: {{cat}} } }]{% endraw %}\n```\n\n----------------------------------------\n\nTITLE: Summing with Optional Conditions using Metabase SumIf Formula - Metabase Expression\nDESCRIPTION: This snippet shows how to sum values in the Payment column for rows where the Plan is either \"Basic\" or \"Business\". It demonstrates the use of the OR operator within the SumIf condition and expects the referenced columns to exist with appropriate data types. The output is the sum of all matching rows.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/sumif.md#2025-04-23_snippet_1\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nSumIf([Payment], ([Plan] = \"Basic\" OR [Plan] = \"Business\"))\n```\n\n----------------------------------------\n\nTITLE: Embedding with JWT authentication and filter parameters in HTML\nDESCRIPTION: Advanced example demonstrating how to embed Metabase with JWT authentication, including encoded filter parameters and UI settings in the URL. The parameters must be URL encoded for proper functionality.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/interactive-embedding.md#2025-04-23_snippet_6\n\nLANGUAGE: html\nCODE:\n```\nhttps://metabase.example.com/auth/sso?jwt=<token>&redirect=%2Fdashboard%2F1%3Ffilter1%3Dvalue%26filter2%3Dvalue\n```\n\n----------------------------------------\n\nTITLE: Summing Payments for Business and Premium Plans - Metabase Expression\nDESCRIPTION: This formula adds up Payment values for all rows where Plan is either \"Business\" or \"Premium\". It demonstrates filtering with multiple OR’d conditions in SumIf to restrict which rows are included in the aggregate sum.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/sumif.md#2025-04-23_snippet_3\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nSumIf([Payment], [Plan] = \"Business\" OR [Plan] = \"Premium\")\n```\n\n----------------------------------------\n\nTITLE: Separating Complex Logical Expressions from if Statements - JavaScript\nDESCRIPTION: Demonstrates refactoring complex logical conditions from inline if statements into clearly named boolean variables, improving code readability and maintainability. The snippet uses a string check for multiline text as an example.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/frontend.md#2025-04-23_snippet_11\n\nLANGUAGE: JavaScript\nCODE:\n```\n// don't do this\nif (typeof children === \"string\" && children.split(/\\n/g).length > 1) {\n  // ...\n}\n\n// do this\nconst isMultilineText =\n  typeof children === \"string\" && children.split(/\\n/g).length > 1;\nif (isMultilineText) {\n  // ...\n}\n\n```\n\n----------------------------------------\n\nTITLE: Embedding with SSO authentication endpoint in HTML iframe\nDESCRIPTION: Example showing how to set the iframe src to an authentication endpoint with a return_to parameter that redirects to a Metabase dashboard after authentication. This bypasses the Metabase login screen.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/interactive-embedding.md#2025-04-23_snippet_4\n\nLANGUAGE: html\nCODE:\n```\nhttps://metabase.example.com/auth/sso?return_to=http%3A%2F%2Fmetabase.yourcompany.com%2Fdashboard%2F1\n```\n\n----------------------------------------\n\nTITLE: Importing JWT Library for Authentication\nDESCRIPTION: Imports the jsonwebtoken library to handle JWT token generation and verification for SSO authentication with Metabase.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/interactive-embedding-quick-start-guide.md#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport jwt from \"jsonwebtoken\";\n```\n\n----------------------------------------\n\nTITLE: Defining Metabase systemd Unit - Conf\nDESCRIPTION: This snippet provides a full example of a systemd service definition file for running Metabase with Java. It specifies working directory, execution command, environment file, user, logging, and restart strategy. Dependencies: Java installed at /usr/bin/java; Metabase JAR file location; configuration file at /etc/default/metabase. Parameters: all paths and options marked as placeholders must be configured. Outputs: systemd-ready service for managing Metabase lifecycle.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-debian.md#2025-04-23_snippet_2\n\nLANGUAGE: conf\nCODE:\n```\n[Unit]\\nDescription=Metabase server\\nAfter=syslog.target\\nAfter=network.target\\n\\n[Service]\\nWorkingDirectory=</your/path/to/metabase/directory/>\\nExecStart=/usr/bin/java --add-opens java.base/java.nio=ALL-UNNAMED -jar </your/path/to/metabase/directory/>metabase.jar\\nEnvironmentFile=/etc/default/metabase\\nUser=metabase\\nType=simple\\nStandardOutput=syslog\\nStandardError=syslog\\nSyslogIdentifier=metabase\\nSuccessExitStatus=143\\nTimeoutStopSec=120\\nRestart=always\\n\\n[Install]\\nWantedBy=multi-user.target\n```\n\n----------------------------------------\n\nTITLE: Extracting Hour using hour Function in Metabase Expressions\nDESCRIPTION: Extracts the hour component (an integer between 0 and 23) from a given date or timestamp value. Takes the datetime column or value as input.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_57\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nhour([datetime column])\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nhour(\"2021-03-25T12:52:37\")\n```\n\n----------------------------------------\n\nTITLE: Handling Null Feedback Values Using CASE Statement - SQL\nDESCRIPTION: Demonstrates how to conditionally replace NULL values in the Feedback column with a custom string ('Unknown feedback') using the SQL CASE statement. Assumes input data contains a Feedback column which may have NULL values. Outputs the original Feedback value unless it is NULL, in which case it provides the replacement string. Compatible with most relational SQL databases; no additional dependencies required. Limitations may apply for databases treating empty strings as null (e.g., Oracle, Vertica).\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/isnull.md#2025-04-23_snippet_0\n\nLANGUAGE: SQL\nCODE:\n```\nCASE WHEN Feedback IS NULL THEN \"Unknown feedback\",\n     ELSE Feedback END\n```\n\n----------------------------------------\n\nTITLE: Calculating Time Difference in Months using Metabase datetimeDiff\nDESCRIPTION: This Metabase custom expression calculates the difference between the 'Aging Start' and 'Aging End' columns in whole months using the `datetimeDiff` function. The function takes two datetime values and a unit string ('month' in this case) as arguments.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/datetimediff.md#2025-04-23_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\ndatetimeDiff([Aging Start], [Aging End], \"month\")\n```\n\n----------------------------------------\n\nTITLE: Creating a URL with Dynamic Variables in Metabase Dashboard\nDESCRIPTION: Example of how to construct a URL with dynamic variables for custom destinations in Metabase dashboards. This snippet demonstrates using the {{Category}} variable to insert the clicked value into the search query parameter of a URL.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/dashboards/interactive.md#2025-04-23_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nhttps://www.metabase.com/search.html?query={{Category}}\n```\n\n----------------------------------------\n\nTITLE: Extracting Substring from the Right in Metabase Expressions\nDESCRIPTION: This Metabase expression extracts the last 3 characters from the `[Mission ID]` column. It calculates the starting position dynamically using the `length` function: `1 + length([Mission ID]) - 3`. This ensures it always starts 3 characters from the end, regardless of the total length of the Mission ID. The final argument `3` specifies the length of the substring to extract.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/substring.md#2025-04-23_snippet_2\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nsubstring([Mission ID], (1 + length([Mission ID]) - 3), 3)\n```\n\n----------------------------------------\n\nTITLE: Replacing NaN Values in a DataFrame Column using NumPy and Pandas - Python\nDESCRIPTION: Illustrates creating a new column ('Custom Column') in a pandas DataFrame where NaN values in 'Feedback' are replaced with 'Unknown feedback.' and all other values are retained. Requires the pandas library (imported as pd) and NumPy (imported as np). Input should be a pandas DataFrame with a 'Feedback' column, and output is a new or overwritten column in the DataFrame. Limitation: Only detects pandas/NumPy-standard NaN or NA values; assumes correct DataFrame and dependencies are already present.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/isnull.md#2025-04-23_snippet_2\n\nLANGUAGE: Python\nCODE:\n```\ndf[\"Custom Column\"] = np.where(df[\"Feedback\"].isnull(), \"Unknown feedback.\", df[\"Feedback\"])\n```\n\n----------------------------------------\n\nTITLE: Illustrating Substring Syntax in Metabase Expressions\nDESCRIPTION: This snippet demonstrates the basic syntax of the `substring` function in Metabase expressions. It extracts the first 7 characters ('user_id') from the string 'user_id@email.com', starting from position 1. The function takes the text, starting position (1-based index), and length as arguments.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/substring.md#2025-04-23_snippet_0\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nsubstring(\"user_id@email.com\", 1, 7)\n```\n\n----------------------------------------\n\nTITLE: Configuring Allowed Domains for iframes in Metabase Dashboards\nDESCRIPTION: Example configuration for restricting iframe sources in Metabase dashboards. This snippet shows how to allow specific subdomains while blocking access from the parent domain and other subdomains.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/settings.md#2025-04-23_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\ndata.example.com,\ndocs.example.com\n```\n\n----------------------------------------\n\nTITLE: Calculating an End Date using datetimeAdd in Metabase Expression\nDESCRIPTION: This Metabase custom expression uses `datetimeAdd` to calculate a finish date by adding 14 days to the date in the 'Opened On' column. This is useful for scenarios like determining product expiration or freshness.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/datetimeadd.md#2025-04-23_snippet_2\n\nLANGUAGE: plaintext\nCODE:\n```\ndatetimeAdd([Opened On], 14, 'day')\n```\n\n----------------------------------------\n\nTITLE: Replacing Empty String or Null with Descriptive Value Using SQL CASE Expression - SQL\nDESCRIPTION: This SQL snippet checks the 'Feedback' column for empty strings or NULL values and replaces them with the string 'No feedback'; otherwise, it returns the existing feedback. This is functionally equivalent to Metabase's isEmpty usage. Dependencies: standard SQL support for CASE, IS NULL, and equality checks. Input: table with a 'Feedback' column. Output: a new virtual column or query result with descriptive feedback. Limitation: Only compatible with databases supporting standard SQL syntax.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/isempty.md#2025-04-23_snippet_0\n\nLANGUAGE: sql\nCODE:\n```\nCASE WHEN (Feedback = \"\" OR Feedback IS NULL) THEN \"No feedback\"\n     ELSE Feedback END\n```\n\n----------------------------------------\n\nTITLE: Using case (alias: if) in Metabase Logical Functions - Markdown\nDESCRIPTION: Describes how to use the case function to choose an output based on several conditions in Metabase custom expressions, with if as a direct alias. Accepts condition/output pairs and an optional default; returns the output of the first matching condition or the default if no condition matches.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_13\n\nLANGUAGE: Markdown\nCODE:\n```\nSyntax: `case(condition, output, …)`\n\nExample: `case([Weight] > 200, \"Large\", [Weight] > 150, \"Medium\", \"Small\")` If a `Weight` is 250, the expression would return \"Large\". In this case, the default value is \"Small\", so any `Weight` 150 or less would return \"Small\".\n```\n\n----------------------------------------\n\nTITLE: Rotating Encryption Keys in Metabase via CLI\nDESCRIPTION: Command to rotate an encryption key in Metabase. This process allows changing the encryption key while maintaining access to previously encrypted data. Requires setting the current key as an environment variable and providing the new key as a parameter.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/encrypting-details-at-rest.md#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nMB_ENCRYPTION_SECRET_KEY=your-current-key java --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar rotate-encryption-key new-key\n```\n\n----------------------------------------\n\nTITLE: MetabaseProvider with Event Handlers Configuration in TypeScript\nDESCRIPTION: Configuration example showing how to set up global event handlers with the MetabaseProvider. Demonstrates handling of click events on questions, dashboards, and dashboard cards.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/config.md#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n// Use the MetabaseProvider component, which should wrap your embedded Metabase components\nimport { MetabaseProvider } from \"metabase-sdk\";\n\nexport default function App() {\n  return (\n    <MetabaseProvider\n      config={{\n        authConfig: {\n          metabaseUrl: \"http://localhost:3000\",\n          tokenGenerator: async () => {\n            // Call your backend to get a signed embed token\n            const response = await fetch(\"/api/metabase/token\");\n            const { token } = await response.json();\n            return token;\n          },\n        },\n      }}\n      eventHandlers={{\n        onQuestionClick: (questionEvent) => {\n          console.log(\"Question click\", questionEvent);\n        },\n        onDashboardClick: (dashboardEvent) => {\n          console.log(\"Dashboard click\", dashboardEvent);\n        },\n        onDashboardCardClick: (dashboardCardEvent) => {\n          console.log(\"Dashboard card click\", dashboardCardEvent);\n        },\n      }}\n    >\n      {/* Your app with embedded Metabase components */}\n    </MetabaseProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Understanding Metabase `in` Translation to SQL `WHERE...OR`\nDESCRIPTION: Reveals how Metabase translates the `in` expression (or its SQL `IN` equivalent) into a `WHERE` clause using multiple `OR` conditions behind the scenes. Each comparison within the `in` function becomes a separate equality check joined by `OR` in the final SQL query executed by the database.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/in.md#2025-04-23_snippet_4\n\nLANGUAGE: sql\nCODE:\n```\nWHERE\n  title = 'Lightweight Wool Computer'\n  OR title = 'Aerodynamic Cotton Lamp'\n```\n\n----------------------------------------\n\nTITLE: Database fingerprinting query in SQL\nDESCRIPTION: SQL query used by Metabase for fingerprinting operations to sample data for better UI suggestions. This query examines the first 10,000 rows from a given table or view.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/sync-scan.md#2025-04-23_snippet_2\n\nLANGUAGE: sql\nCODE:\n```\nSELECT\n    *\nFROM\n    \"your_schema\".\"your_table_or_view\"\nLIMIT 10000\n```\n\n----------------------------------------\n\nTITLE: Referencing a Metabase Model Directly in SQL\nDESCRIPTION: Demonstrates how to use the Metabase templating syntax `{{#<id>-<name>}}` to reference a specific model (e.g., model with ID 1 named 'customer-model') directly as a data source within a SQL query. This allows treating the model like a regular table in the `FROM` clause.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/data-modeling/models.md#2025-04-23_snippet_0\n\nLANGUAGE: sql\nCODE:\n```\n{% raw %}\nSELECT * FROM {{#1-customer-model}}\n{% endraw %}\n```\n\n----------------------------------------\n\nTITLE: Correct SQL Query with Optional WHERE Clause\nDESCRIPTION: Properly structured optional WHERE clause in a SQL query. By including the entire WHERE clause within the brackets, the query remains valid when no filter value is provided, resulting in a query that returns all products.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/native-editor/sql-parameters.md#2025-04-23_snippet_12\n\nLANGUAGE: sql\nCODE:\n```\nSELECT\n  count(*)\nFROM\n  products\n[[WHERE\n  category = {{cat}}]]\n```\n\n----------------------------------------\n\nTITLE: Converting Timestamp with Time Zone Specified - Metabase - Markdown\nDESCRIPTION: This snippet uses `convertTimezone` to adjust a column containing timestamps (with time zone metadata) to the 'EST' time zone. Only the source timestamp column and the target zone are needed as parameters, since the source time zone is inferred. This method assumes the input column contains correctly typed timestamp values and that the named time zones are valid. Upon execution, the function returns a timestamp adjusted to 'EST'.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/converttimezone.md#2025-04-23_snippet_1\n\nLANGUAGE: Markdown\nCODE:\n```\nconvertTimezone([Source Time], 'EST')\n```\n\n----------------------------------------\n\nTITLE: Customizing Loader and Error Components with MetabaseProvider in React\nDESCRIPTION: Shows how to provide custom components for loading and error states by specifying loaderComponent and errorComponent props to MetabaseProvider. The example demonstrates integrating custom UI components with the Metabase SDK.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/appearance.md#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n{% include_file \"{{ dirname }}/snippets/appearance/customizing-loader-and-components.tsx\" snippet=\"imports\" %}\n\n{% include_file \"{{ dirname }}/snippets/appearance/customizing-loader-and-components.tsx\" snippet=\"example\" %}\n```\n\n----------------------------------------\n\nTITLE: Changing MySQL Authentication Plugin for Metabase User\nDESCRIPTION: SQL command to change the authentication plugin for a MySQL 8+ user to mysql_native_password to allow Metabase to connect properly, as the MariaDB connector lacks support for MySQL 8's default authentication plugin.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/connections/mysql.md#2025-04-23_snippet_0\n\nLANGUAGE: sql\nCODE:\n```\nALTER USER 'metabase'@'%' IDENTIFIED WITH mysql_native_password BY 'thepassword';\n```\n\n----------------------------------------\n\nTITLE: Metabase Expression Equivalent to SQL Interval Addition\nDESCRIPTION: This Metabase custom expression shows the equivalent operation to adding a time interval in SQL (specifically, adding 14 days to the 'Opened On' column).\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/datetimeadd.md#2025-04-23_snippet_8\n\nLANGUAGE: plaintext\nCODE:\n```\ndatetimeAdd([Opened On], 14, \"day\")\n```\n\n----------------------------------------\n\nTITLE: Cloning the Metabase Sample Embedding App Repository (Shell)\nDESCRIPTION: Downloads the source code for the Metabase Node.js/React SDK embedding sample application from its GitHub repository using Git. This repository contains the necessary frontend (React) and backend (Node.js) code to demonstrate SDK usage and JWT authentication flow. Requires Git to be installed.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/quickstart-with-sample-app.md#2025-04-23_snippet_4\n\nLANGUAGE: sh\nCODE:\n```\ngit clone git@github.com:metabase/metabase-nodejs-react-sdk-embedding-sample.git\n```\n\n----------------------------------------\n\nTITLE: Conditional Value Replacement Using IF Formula - Excel\nDESCRIPTION: This spreadsheet formula checks if the value of cell A2 is an empty string and replaces it with 'Unknown feedback.', otherwise it keeps the existing value. Useful for conditional value replacement in spreadsheets. Dependency: standard spreadsheet (e.g., Excel, Google Sheets) with support for IF formulas. Input: string in cell A2. Output: either a replacement string or original value. Limitation: Only detects exact empty strings, not null or whitespace.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/isempty.md#2025-04-23_snippet_1\n\nLANGUAGE: excel\nCODE:\n```\n=IF(A2 = \"\", \"Unknown feedback.\", A2)\n```\n\n----------------------------------------\n\nTITLE: Checking Date Interval using Case/Between/Now in Metabase Expression\nDESCRIPTION: This Metabase custom expression uses the `case` function combined with `between` and `now` to determine if the current datetime falls between the 'Opened On' date and a calculated 'Finish By' date. It returns 'Yes' if within the interval, 'No' otherwise.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/datetimeadd.md#2025-04-23_snippet_4\n\nLANGUAGE: plaintext\nCODE:\n```\ncase(between(now, [Opened On], [Finish By]), \"Yes\", \"No\")\n```\n\n----------------------------------------\n\nTITLE: Customizing Embedding URL Parameters for Static Embeds - Metabase - plaintext\nDESCRIPTION: This snippet demonstrates how to customize the appearance of an embedded Metabase item by appending parameters to the embedding URL. It shows how to enable dark mode, toggle borders, and display the original title in the embedded view. Required dependencies include a valid Metabase embed URL and the ability to edit your HTML iframe 'src' attribute. Inputs are key-value parameter pairs such as 'theme', 'bordered', and 'titled'. Outputs are visual changes to the embedded content. The snippet should be pasted as the value of an iframe's 'src'.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/static-embedding-parameters.md#2025-04-23_snippet_8\n\nLANGUAGE: plaintext\nCODE:\n```\nyour_embedding_url#theme=night&bordered=false&titled=true\n```\n\n----------------------------------------\n\nTITLE: Querying Data for a Pin Map in SQL\nDESCRIPTION: Example SQL query to retrieve data suitable for creating a pin map, with latitude and longitude coordinates for each data point.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/visualizations/map.md#2025-04-23_snippet_0\n\nLANGUAGE: sql\nCODE:\n```\nSELECT latitude, longitude, other_data\nFROM locations\nLIMIT 2000\n```\n\n----------------------------------------\n\nTITLE: Configuring Database Connection URIs in Metabase\nDESCRIPTION: Examples of JDBC connection strings for PostgreSQL and MySQL databases. These connection URIs can be used with the MB_DB_CONNECTION_URI environment variable to configure Metabase's application database connection.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_39\n\nLANGUAGE: jdbc\nCODE:\n```\njdbc:postgresql://db.example.com:5432/mydb?user=dbuser&password=dbpassword\n\njdbc:postgresql://db.example.com:5432/mydb?user=dbuser&password=dbpassword&ssl=true&sslfactory=org.postgresql.ssl.NonValidatingFactory\n\njdbc:mysql://db.example.com:3306/mydb?user=dbuser&password=dbpassword\n```\n\n----------------------------------------\n\nTITLE: Reusable SQL Join Fragment for Orders and Products - SQL\nDESCRIPTION: This snippet captures the join clause from the previous example and is intended to be saved as a reusable SQL snippet in Metabase. Dependencies are the existence of 'orders' aliased as 'o', and 'products' aliased as 'p'. It encapsulates the join logic for easy reuse, requiring subsequent queries to use corresponding aliases for column references.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/native-editor/snippets.md#2025-04-23_snippet_1\n\nLANGUAGE: sql\nCODE:\n```\norders AS o\nLEFT JOIN products AS p\nON o.product_id = p.id\n```\n\n----------------------------------------\n\nTITLE: Restarting Metabase Service via systemd - Shell\nDESCRIPTION: This command restarts the systemd-managed Metabase service after replacing the JAR file during an upgrade. Requires systemd and the Metabase service configuration. Input parameters: None. Output: Starts or restarts 'metabase.service'. Ensure the service definition is valid and the executable path is correct.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/upgrading-metabase.md#2025-04-23_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nsudo systemctl restart metabase.service\n```\n\n----------------------------------------\n\nTITLE: Running Metabase Pro/Enterprise Container (Default Port)\nDESCRIPTION: Starts a Metabase Pro/Enterprise container in detached mode (`-d`), maps the host's port 3000 to the container's port 3000 (`-p 3000:3000`), and names the container 'metabase' (`--name metabase`). It uses the `metabase/metabase-enterprise` image. Metabase Pro/Enterprise will be accessible at `http://localhost:3000`.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-docker.md#2025-04-23_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\ndocker run -d -p 3000:3000 --name metabase metabase/metabase-enterprise\n```\n\n----------------------------------------\n\nTITLE: SQL Query with Complex Default Value Using Comment Syntax\nDESCRIPTION: Demonstrates how to set complex default values directly in a SQL query using comment syntax inside optional parameter brackets. This pattern allows developers to specify function-based default values that activate when no parameter is provided.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/native-editor/sql-parameters.md#2025-04-23_snippet_8\n\nLANGUAGE: sql\nCODE:\n```\nWHERE column = [[ {{ your_parameter }} --]] your_default_value\n```\n\n----------------------------------------\n\nTITLE: Verifying PostgreSQL Database Credentials from Command Line\nDESCRIPTION: Command to test PostgreSQL database credentials directly from the command line. This helps determine if authentication issues are causing connection problems by attempting to connect to the database outside of Metabase.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/db-connection.md#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\npsql -h HOSTNAME -p PORT -d DATABASENAME -U DATABASEUSER\n```\n\n----------------------------------------\n\nTITLE: Extracting Substring using substring Function in Metabase Expressions\nDESCRIPTION: Returns a specific portion (substring) of a given text string. The portion is defined by a starting position (1-based index) and a length (number of characters to extract). Takes the text, starting position, and length as parameters.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_47\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nsubstring(text, position, length)\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nsubstring([Title], 1, 10)\n```\n\n----------------------------------------\n\nTITLE: Adding or Subtracting Time Using datetimeAdd - Metabase Expression - Metabase Expression\nDESCRIPTION: This snippet shows how datetimeAdd can be used similarly to datetimeSubtract by passing a negative amount. By providing a negative value, users can subtract a time interval from a datetime, effectively making datetimeAdd and datetimeSubtract interchangeable. Input parameters follow the same rules; care should be taken to avoid double negatives.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/datetimesubtract.md#2025-04-23_snippet_3\n\nLANGUAGE: Metabase Expression\nCODE:\n```\ndatetimeAdd([Arrive By], -30, \"minute\")\n```\n\n----------------------------------------\n\nTITLE: Metabase Expression Equivalent to Python Calculation\nDESCRIPTION: This Metabase custom expression is shown as the equivalent to the preceding Python pandas/NumPy calculation. It calculates the difference between the 'Aging Start' and 'Aging End' columns in whole months using the `datetimeDiff` function.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/datetimediff.md#2025-04-23_snippet_8\n\nLANGUAGE: plaintext\nCODE:\n```\ndatetimeDiff([Aging Start], [Aging End], \"month\")\n```\n\n----------------------------------------\n\nTITLE: Simulating CountIf using Count and Case in Metabase Expression\nDESCRIPTION: This Metabase custom expression demonstrates an alternative way to achieve a conditional count by combining the `Count` aggregation with a `case` expression. It counts the values in the `ID` column only for rows where the `Plan` column equals \"Basic\", effectively replicating `CountIf([Plan] = \"Basic\")`.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/countif.md#2025-04-23_snippet_6\n\nLANGUAGE: metabase-expression\nCODE:\n```\nCount(case([Plan] = \"Basic\", [ID]))\n```\n\n----------------------------------------\n\nTITLE: Example Usage of Metabase Offset Function\nDESCRIPTION: Demonstrates how to use the `Offset` function to retrieve the value of `Sum([Total])` from the immediately preceding row in a summarized dataset. The `-1` indicates the previous row.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/offset.md#2025-04-23_snippet_1\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nOffset(Sum([Total]), -1)\n```\n\n----------------------------------------\n\nTITLE: Converting Timezone for Timestamp without Time Zone\nDESCRIPTION: Example showing timezone conversion for a timestamp without time zone information using Metabase's convertTimezone function.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/converttimezone.md#2025-04-23_snippet_4\n\nLANGUAGE: sql\nCODE:\n```\nconvertTimezone(\"2022-12-28T12:00:00\", \"Canada/Pacific\", \"Canada/Central\")\n```\n\n----------------------------------------\n\nTITLE: Querying Data for a US State Region Map in SQL\nDESCRIPTION: Example SQL query to retrieve data suitable for creating a US state region map, with state names and a metric.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/visualizations/map.md#2025-04-23_snippet_3\n\nLANGUAGE: sql\nCODE:\n```\nSELECT \n  state_name,\n  AVG(metric_value) AS avg_metric\nFROM state_data\nGROUP BY state_name\n```\n\n----------------------------------------\n\nTITLE: Configuring IAM Policy for Amazon Athena Read-Only Access in Metabase\nDESCRIPTION: This IAM policy provides the necessary permissions for Metabase to query Amazon Athena with read-only access. It includes permissions for Athena operations, Glue catalog access, and S3 bucket operations required for both data sources and result storage.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/connections/athena.md#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"Athena\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"athena:BatchGetNamedQuery\",\n        \"athena:BatchGetQueryExecution\",\n        \"athena:GetNamedQuery\",\n        \"athena:GetQueryExecution\",\n        \"athena:GetQueryResults\",\n        \"athena:GetQueryResultsStream\",\n        \"athena:GetWorkGroup\",\n        \"athena:ListDatabases\",\n        \"athena:ListDataCatalogs\",\n        \"athena:ListNamedQueries\",\n        \"athena:ListQueryExecutions\",\n        \"athena:ListTagsForResource\",\n        \"athena:ListWorkGroups\",\n        \"athena:ListTableMetadata\",\n        \"athena:StartQueryExecution\",\n        \"athena:StopQueryExecution\",\n        \"athena:CreatePreparedStatement\",\n        \"athena:DeletePreparedStatement\",\n        \"athena:GetPreparedStatement\",\n        \"athena:GetTableMetadata\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Sid\": \"Glue\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"glue:BatchGetPartition\",\n        \"glue:GetDatabase\",\n        \"glue:GetDatabases\",\n        \"glue:GetPartition\",\n        \"glue:GetPartitions\",\n        \"glue:GetTable\",\n        \"glue:GetTables\",\n        \"glue:GetTableVersion\",\n        \"glue:GetTableVersions\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Sid\": \"S3ReadAccess\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\"s3:GetObject\", \"s3:ListBucket\", \"s3:GetBucketLocation\"],\n      \"Resource\": [\n        \"arn:aws:s3:::bucket1\",\n        \"arn:aws:s3:::bucket1/*\",\n        \"arn:aws:s3:::bucket2\",\n        \"arn:aws:s3:::bucket2/*\"\n      ]\n    },\n    {\n      \"Sid\": \"AthenaResultsBucket\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:PutObject\",\n        \"s3:GetObject\",\n        \"s3:AbortMultipartUpload\",\n        \"s3:ListBucket\",\n        \"s3:GetBucketLocation\"\n      ],\n      \"Resource\": [\"arn:aws:s3:::bucket2\", \"arn:aws:s3:::bucket2/*\"]\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Defining a Field Filter Variable for All Rows by State in Metabase SQL Editor (SQL)\nDESCRIPTION: This SQL snippet demonstrates creating a Field Filter variable called 'state' for filtering the PEOPLE table. Unlike standard variables, no explicit predicate or column name is provided; Metabase injects the appropriate SQL based on widget selection and mapped field. This syntax is required for Field Filters in Metabase and creates widgets supporting multiple selection, ranges, etc. Requires select privilege on the PEOPLE table and a variable mapped to a semantic field.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/native-editor/sql-parameters.md#2025-04-23_snippet_4\n\nLANGUAGE: sql\nCODE:\n```\n{% raw %}\nSELECT\n  *\nFROM\n  PEOPLE\nWHERE\n  {{state}}\n{% endraw %}\n```\n\n----------------------------------------\n\nTITLE: Creating a PostgreSQL Database for Metabase in Shell\nDESCRIPTION: Uses the `createdb` command-line utility to create a new PostgreSQL database named 'metabase' with UTF8 encoding. This database is intended for use as the Metabase application database.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/configuring-application-database.md#2025-04-23_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\ncreatedb --encoding=UTF8 -e metabase\n```\n\n----------------------------------------\n\nTITLE: Pulling a Fixed Substring from a URL with Metabase Substring Expression\nDESCRIPTION: This Metabase expression example demonstrates extracting a specific portion of a URL using the substring function, which receives a source text, a starting index, and a length. This approach is best when the offset and chunk size are constant throughout your data, unlike regexextract which supports more variable patterns. It returns the substring if the range is valid and null otherwise.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/regexextract.md#2025-04-23_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\nsubstring([URL], 13, 8)\n```\n\n----------------------------------------\n\nTITLE: Extracting Text with Regexextract in Metabase Expressions\nDESCRIPTION: This Metabase expression uses `regexextract` as an alternative to `substring` for extracting the agent ID from `[Mission ID]`. The regular expression `\".+(00.+)$\"` captures the group containing the last occurrence of '00' followed by any characters until the end of the string. This achieves the same result as `substring([Mission ID], 9, 3)` for the given sample data.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/substring.md#2025-04-23_snippet_3\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nregexextract([Mission ID], \".+(00.+)$\")\n```\n\n----------------------------------------\n\nTITLE: Grouped Conditional SUM by Month in SQL - SQL\nDESCRIPTION: This SQL snippet aggregates payments for the Business plan by month from the invoices table. It uses DATE_TRUNC for monthly grouping and sums via a CASE-inside-SUM pattern. Requires date_received, plan, and payment columns, and outputs grouped totals.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/sumif.md#2025-04-23_snippet_9\n\nLANGUAGE: SQL\nCODE:\n```\nSELECT\n    DATE_TRUNC(\"month\", date_received)                       AS date_received_month,\n    SUM(CASE WHEN plan = \"Business\" THEN payment ELSE 0 END) AS total_payments_business_or_premium\nFROM invoices\nGROUP BY\n    DATE_TRUNC(\"month\", date_received)\n```\n\n----------------------------------------\n\nTITLE: Dropping a MySQL User\nDESCRIPTION: SQL command to remove a MySQL user that is no longer needed, which should be done after creating a new user with the correct host specification.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/connections/mysql.md#2025-04-23_snippet_4\n\nLANGUAGE: sql\nCODE:\n```\nDROP USER 'metabase'@'localhost';\n```\n\n----------------------------------------\n\nTITLE: Extracting Substring using Spreadsheet MID function\nDESCRIPTION: This spreadsheet formula uses the `MID` function (common in tools like Excel or Google Sheets) to achieve the same result as the Metabase `substring([Mission ID], 9, 3)` expression. Assuming the 'Mission ID' is in cell A2, it extracts 3 characters starting from the 9th character.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/substring.md#2025-04-23_snippet_5\n\nLANGUAGE: Spreadsheet Formula\nCODE:\n```\n=mid(A2,9,3)\n```\n\n----------------------------------------\n\nTITLE: Configuring PostgreSQL Application Database via JDBC URI in Shell\nDESCRIPTION: Sets the `MB_DB_CONNECTION_URI` environment variable with a full JDBC connection string for PostgreSQL, including hostname, port, database name, user, and password. This method is used to configure the Metabase application database and then start Metabase.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/configuring-application-database.md#2025-04-23_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\nexport MB_DB_CONNECTION_URI=\"jdbc:postgresql://localhost:5432/metabase?user=<username>&password=<password>\"\njava --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: Testing Database Connection in SQL Editor\nDESCRIPTION: A simple SQL query to test if the database connection is working correctly. This query doesn't return any meaningful data but confirms that Metabase can successfully communicate with the database.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/cant-see-tables.md#2025-04-23_snippet_0\n\nLANGUAGE: sql\nCODE:\n```\nSELECT 1\n```\n\n----------------------------------------\n\nTITLE: Creating Environment File for Sample App (Shell)\nDESCRIPTION: Copies the example environment configuration file (`.env.example`) provided in the sample application repository to a new file named `.env`. This `.env` file will store the actual environment variables used by the application, such as the Metabase instance URL and the JWT shared secret, keeping sensitive information separate from the codebase. This command should be run in the root directory of the sample app.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/quickstart-with-sample-app.md#2025-04-23_snippet_6\n\nLANGUAGE: sh\nCODE:\n```\ncp .env.example .env\n```\n\n----------------------------------------\n\nTITLE: Metabase Configuration File Template in YAML\nDESCRIPTION: A comprehensive YAML template for Metabase configuration, including sections for users, databases, API keys, and various system settings. This template provides examples and placeholders for customization.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/config-template.md#2025-04-23_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\n# A config file template for Metabase.\n# You'll need to update (or remove) the `users` and `databases` sections.\n# The settings in `settings` include default values. We recommend removing\n# or commenting out settings that you don't set.\n# To use an env var, you can use a template string: \"{{ env YOUR_ENV_VAR }}\"\n# Note the quote marks wrapping the env var template.\n# For more on the configuration file, see:\n# https://www.metabase.com/docs/latest/configuring-metabase/config-file\n# For more on what each setting does, check out:\n# https://www.metabase.com/docs/latest/configuring-metabase/environment-variables\nversion: 1\nconfig:\n  users:\n  - first_name: First\n    last_name: Person\n    password: metabot1\n    email: first@example.com\n  - first_name: Normal\n    last_name: Person\n    password: metabot1\n    email: normal@example.com\n  - first_name: Admin\n    last_name: Person\n    password: metabot1\n    is_superuser: true\n    email: admin@example.com\n  databases:\n  - name: Sample PostgreSQL\n    engine: postgres\n    details:\n      host: postgres-data\n      port: 5432\n      user: metabase\n      password: metasample123\n      dbname: sample\n  - name: Sample MySQL\n    engine: mysql\n    details:\n      host: mysql-data\n      port: 3306\n      user: metabase\n      password: metasample123\n      dbname: sample\n  api-keys:\n  - name: Admin API key\n    group: admin\n    creator: first@example.com\n    key: mb_firsttestapikey123\n  - name: All Users API key\n    group: all-users\n    creator: first@example.com\n    key: mb_secondtestapikey456\n  settings:\n    admin-email: null\n    aggregated-query-row-limit: null\n    allowed-iframe-hosts: |-\n      youtube.com,\n      youtu.be,\n      loom.com,\n      vimeo.com,\n      docs.google.com,\n      calendar.google.com,\n      airtable.com,\n      typeform.com,\n      canva.com,\n      codepen.io,\n      figma.com,\n      grafana.com,\n      miro.com,\n      excalidraw.com,\n      notion.com,\n      atlassian.com,\n      trello.com,\n      asana.com,\n      gist.github.com,\n      linkedin.com,\n      twitter.com,\n      x.com\n    anon-tracking-enabled: true\n    api-key: null\n    application-colors: {}\n    application-favicon-url: app/assets/img/favicon.ico\n    application-font: Lato\n    application-font-files: null\n    application-logo-url: app/assets/img/logo.svg\n    application-name: Metabase\n    attachment-row-limit: null\n    attachment-table-row-limit: 20\n    backfill-entity-ids-repeat-ms: 2000\n    bcc-enabled: true\n    breakout-bin-width: 10.0\n    breakout-bins-num: 8\n    check-for-updates: true\n    config-from-file-sync-databases: true\n    custom-formatting: {}\n    custom-geojson: null\n    custom-geojson-enabled: true\n    custom-homepage: false\n    custom-homepage-dashboard: null\n    db-connection-timeout-ms: 10000\n    db-query-timeout-minutes: 20\n    default-maps-enabled: true\n    download-row-limit: null\n    ee-ai-features-enabled: false\n    ee-openai-api-key: null\n    ee-openai-model: gpt-4-turbo-preview\n    email-from-address: notifications@metabase.com\n    email-from-name: null\n    email-max-recipients-per-second: null\n    email-reply-to: null\n    email-smtp-host: null\n    email-smtp-password: null\n    email-smtp-port: null\n    email-smtp-security: none\n    email-smtp-username: null\n    embedding-app-origins-interactive: null\n    embedding-app-origins-sdk: localhost:*\n    embedding-homepage: hidden\n    embedding-secret-key: null\n    enable-embedding-interactive: false\n    enable-embedding-sdk: false\n    enable-embedding-static: false\n    enable-field-usage-analysis: false\n    enable-password-login: true\n    enable-pivoted-exports: true\n    enable-public-sharing: true\n    enable-query-caching: true\n    enable-xrays: true\n    follow-up-email-sent: false\n    google-auth-auto-create-accounts-domain: null\n    google-auth-client-id: null\n    google-auth-enabled: null\n    gsheets: null\n    health-check-logging-enabled: true\n    help-link: metabase\n    help-link-custom-destination: https://www.metabase.com/help/premium\n    humanization-strategy: simple\n    jdbc-data-warehouse-max-connection-pool-size: 15\n    jwt-attribute-email: email\n    jwt-attribute-firstname: first_name\n    jwt-attribute-groups: groups\n    jwt-attribute-lastname: last_name\n    jwt-enabled: false\n    jwt-group-mappings: {}\n    jwt-group-sync: false\n    jwt-identity-provider-uri: null\n    jwt-shared-secret: null\n    jwt-user-provisioning-enabled: true\n    landing-page: ''\n    landing-page-illustration: default\n    landing-page-illustration-custom: null\n    ldap-attribute-email: mail\n    ldap-attribute-firstname: givenName\n    ldap-attribute-lastname: sn\n    ldap-bind-dn: null\n    ldap-enabled: false\n    ldap-group-base: null\n    ldap-group-mappings: {}\n    ldap-group-membership-filter: (member={dn})\n    ldap-group-sync: false\n    ldap-host: null\n    ldap-password: null\n    ldap-port: 389\n    ldap-security: none\n    ldap-sync-user-attributes: true\n    ldap-sync-user-attributes-blacklist: userPassword,dn,distinguishedName\n    ldap-user-base: null\n    ldap-user-filter: (&(objectClass=inetOrgPerson)(|(uid={login})(mail={login})))\n    ldap-user-provisioning-enabled: true\n    loading-message: doing-science\n    login-page-illustration: default\n    login-page-illustration-custom: null\n    map-tile-server-url: https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\n    native-query-autocomplete-match-style: substring\n    nested-field-columns-value-length-limit: 50000\n    no-data-illustration: default\n    no-data-illustration-custom: null\n    no-object-illustration: default\n    no-object-illustration-custom: null\n    not-behind-proxy: false\n    notification-link-base-url: null\n    notification-thread-pool-size: 3\n    persisted-model-refresh-cron-schedule: 0 0 0/6 * * ? *\n    persisted-models-enabled: false\n    premium-embedding-token: null\n    query-analysis-enabled: false\n    query-caching-max-kb: 2000\n    query-caching-max-ttl: 3024000.0\n    redirect-all-requests-to-https: false\n    report-timezone: null\n    reset-token-ttl-hours: 48\n    retry-initial-interval: 500\n    retry-max-attempts: 7\n    retry-max-interval-millis: 30000\n    retry-multiplier: 2.0\n    retry-randomization-factor: 0.1\n    saml-application-name: Metabase\n    saml-attribute-email: null\n    saml-attribute-firstname: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname\n    saml-attribute-group: member_of\n    saml-attribute-lastname: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname\n    saml-enabled: false\n    saml-group-mappings: {}\n    saml-group-sync: false\n    saml-identity-provider-certificate: null\n    saml-identity-provider-issuer: null\n    saml-identity-provider-slo-uri: null\n    saml-identity-provider-uri: null\n    saml-keystore-alias: metabase\n    saml-keystore-password: changeit\n    saml-keystore-path: null\n    saml-slo-enabled: false\n    saml-user-provisioning-enabled: true\n    scim-enabled: null\n    search-engine: in-place\n    search-typeahead-enabled: true\n    send-new-sso-user-admin-email: null\n    session-cookie-samesite: lax\n    session-cookies: null\n    session-timeout: null\n    setup-embedding-autoenabled: false\n    setup-license-active-at-setup: false\n    show-database-syncing-modal: null\n    show-homepage-data: true\n    show-homepage-xrays: true\n    show-metabase-links: true\n    show-metabot: true\n    show-static-embed-terms: true\n    site-locale: en\n    site-name: Metabase\n    site-url: null\n    slack-app-token: null\n    slack-bug-report-channel: metabase-bugs\n    source-address-header: X-Forwarded-For\n    sql-jdbc-fetch-size: 500\n    sql-parsing-enabled: true\n    ssh-heartbeat-interval-sec: 180\n    start-of-week: sunday\n    subscription-allowed-domains: null\n    surveys-enabled: true\n    synchronous-batch-updates: false\n    unaggregated-query-row-limit: null\n    update-channel: latest\n    uploads-settings: null\n    user-visibility: all\n```\n\n----------------------------------------\n\nTITLE: Implementing Immediate Retries on Error in Clojure Quartz Jobs\nDESCRIPTION: Shows how to use the `metabase.task/rerun-on-error` macro within a `task/defjob` to automatically retry a job immediately if it throws an exception. This macro catches exceptions, logs them, and throws a specific `JobExecutionException` to instruct Quartz to reschedule the job for immediate re-execution.\nSOURCE: https://github.com/metabase/metabase/blob/master/src/metabase/task/QUARTZ.md#2025-04-23_snippet_6\n\nLANGUAGE: clojure\nCODE:\n```\n(task/defjob MyJob [job-context]\n  (task/rerun-on-error job-context\n    ;; Your job code here\n    (do-something-that-might-fail)))\n```\n\n----------------------------------------\n\nTITLE: Extracting Week of Year in Google BigQuery using SQL\nDESCRIPTION: SQL example for Google BigQuery using `EXTRACT` to get the week number from a date column (`ticreated_at`). Note that BigQuery often numbers weeks starting from 0, with dates before the first Sunday belonging to week 0. Alternative functions might be available.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/week.md#2025-04-23_snippet_4\n\nLANGUAGE: sql\nCODE:\n```\nEXTRACT(WEEK FROM DATE ticreated_at)\n```\n\n----------------------------------------\n\nTITLE: Calculating Time Difference using datetimeDiff Function in Metabase Expressions\nDESCRIPTION: Calculates the difference between two date or timestamp values, expressed in a specified unit of time (e.g., 'day', 'month', 'hour'). Returns the difference as a number. Requires the two datetime values and the time unit string. Note that database limitations may apply.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_53\n\nLANGUAGE: Metabase Expression\nCODE:\n```\ndatetimeDiff(datetime1, datetime2, unit)\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\ndatetimeDiff(\"2022-02-01\", \"2022-03-01\", \"month\")\n```\n\n----------------------------------------\n\nTITLE: Querying Data for a Grid Map in SQL\nDESCRIPTION: Example SQL query to retrieve aggregated data suitable for creating a grid map, with binned latitude and longitude coordinates.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/visualizations/map.md#2025-04-23_snippet_1\n\nLANGUAGE: sql\nCODE:\n```\nSELECT \n  FLOOR(latitude / 1) * 1 AS lat_bin,\n  FLOOR(longitude / 1) * 1 AS lon_bin,\n  COUNT(*) AS point_count\nFROM locations\nGROUP BY 1, 2\n```\n\n----------------------------------------\n\nTITLE: Configuring Privileges for Metabase Model Persistence in PostgreSQL\nDESCRIPTION: This SQL script configures privileges for Metabase Model Persistence in PostgreSQL. It creates a 'metabase_model_persistence' role, grants it CREATE privilege on the database (needed to create the persistence schema unless done manually), USAGE on the target schema, and INSERT, UPDATE, DELETE privileges on the specific table within that schema used for persistence (replace 'database', 'your_schema', 'your_model's_table'). Finally, it grants this role to the 'metabase' user.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/users-roles-privileges.md#2025-04-23_snippet_3\n\nLANGUAGE: sql\nCODE:\n```\n-- Create a role to bundle database privileges for Metabase model persistence.\nCREATE ROLE metabase_model_persistence WITH LOGIN;\n\n-- If you don't want to give CREATE access to your database,\n-- add the schema manually before enabling modeling persistence.\nGRANT CREATE ON \"database\" TO metabase_model_persistence;\n\n-- Grant write privileges to the SCHEMA used for model persistence.\nGRANT USAGE ON \"your_schema\" TO metabase_model_persistence;\nGRANT INSERT, UPDATE, DELETE ON \"your_model's_table\" IN SCHEMA \"your_schema\" TO metabase_model_persistence;\n\n-- Grant role to the metabase user.\nGRANT metabase_model_persistence TO metabase;\n```\n\n----------------------------------------\n\nTITLE: Calculating Cumulative Count using CumulativeCount Window Function in Metabase Expressions\nDESCRIPTION: A window function that calculates the cumulative count of rows within a breakout group. It provides the additive total of rows processed so far in the current window partition. This function can only be used in the 'Summarize' section of the query builder and takes no arguments.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_71\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nCumulativeCount()\n```\n\n----------------------------------------\n\nTITLE: Accessing Shell in Metabase Docker Container\nDESCRIPTION: Command to get shell access to a running Metabase container, which is useful for troubleshooting internal container issues.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/docker.md#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ndocker exec -ti CONTAINER_NAME bash\n```\n\n----------------------------------------\n\nTITLE: Conditional Count Across Multiple Sources using Count and Case in Metabase Expression\nDESCRIPTION: This Metabase custom expression uses `Count` with nested `case` statements to perform a conditional count across columns potentially originating from different data sources ('Source A', 'Source B'). It counts the total number of 'Basic' plans, checking relevant ID and Plan columns from both sources and handling case variations (\"Basic\" vs \"basic\").\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/countif.md#2025-04-23_snippet_8\n\nLANGUAGE: metabase-expression\nCODE:\n```\nCount(case([Plan: Source A] = \"Basic\", [ID: Source A],\\n            case([Plan: Source B] = \"basic\", [ID: Source B])))\n```\n\n----------------------------------------\n\nTITLE: Creating Schema for Model Persistence in PostgreSQL\nDESCRIPTION: SQL command to create a schema in PostgreSQL for storing persisted model results. The schema name should be provided by Metabase in the admin interface.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/data-modeling/model-persistence.md#2025-04-23_snippet_0\n\nLANGUAGE: sql\nCODE:\n```\nCREATE SCHEMA IF NOT EXISTS schema_name\n```\n\n----------------------------------------\n\nTITLE: Vectorized Replacement of Empty or Null Strings Using NumPy Where - Python\nDESCRIPTION: This Python code uses NumPy's where function to create a new 'Custom Column' in a Pandas dataframe, replacing empty or null 'Feedback' entries with 'No feedback.' and retaining existing feedback otherwise. Dependencies: pandas and numpy libraries. Inputs: dataframe 'df' with a 'Feedback' column. Output: dataframe with an additional 'Custom Column'. Works vectorized over entire column for performance. Limitation: Assumes strings, may not detect strings with only whitespace.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/isempty.md#2025-04-23_snippet_2\n\nLANGUAGE: python\nCODE:\n```\ndf[\"Custom Column\"] = np.where((df[\"Feedback\"] == \"\") | (df[\"Feedback\"].isnull()), \"No feedback.\", df[\"Feedback\"])\n```\n\n----------------------------------------\n\nTITLE: Conditional Aggregation for Multiple Columns using CASE - Metabase Expression\nDESCRIPTION: Here, the sum aggregates the Payment column when Plan is \"Basic\", and otherwise sums the Contract column. This shows how to provide an alternate value for aggregation when the primary condition is not met, using the case function.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/sumif.md#2025-04-23_snippet_6\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nsum(case([Plan] = \"Basic\", [Payment], [Contract]))\n```\n\n----------------------------------------\n\nTITLE: Configuring IAM Policy for AWS Glue Table Creation in Metabase\nDESCRIPTION: This IAM policy provides additional permissions required for Metabase to create and manage tables in AWS Glue. It grants permissions for database and table operations including creation, deletion, and updates.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/connections/athena.md#2025-04-23_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"VisualEditor0\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"glue:BatchCreatePartition\",\n        \"glue:UpdateDatabase\",\n        \"glue:DeleteDatabase\",\n        \"glue:CreateTable\",\n        \"glue:CreateDatabase\",\n        \"glue:UpdateTable\",\n        \"glue:BatchDeletePartition\",\n        \"glue:BatchDeleteTable\",\n        \"glue:DeleteTable\",\n        \"glue:CreatePartition\",\n        \"glue:DeletePartition\",\n        \"glue:UpdatePartition\",\n        \"glue:GetCatalogImportStatus\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Showing datetimeAdd Equivalence in Metabase Expression\nDESCRIPTION: This Metabase custom expression using `datetimeAdd` is presented as equivalent to using `datetimeSubtract` with a negative amount for adding 14 days to the 'Opened On' column.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/datetimeadd.md#2025-04-23_snippet_6\n\nLANGUAGE: plaintext\nCODE:\n```\ndatetimeAdd([Opened On], 14, \"day\")\n```\n\n----------------------------------------\n\nTITLE: Creating MySQL User with Specific Host Permission\nDESCRIPTION: SQL command to create a MySQL user with access from a specific host IP address, which is necessary when the host resolution doesn't match the expected connection source.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/connections/mysql.md#2025-04-23_snippet_1\n\nLANGUAGE: sql\nCODE:\n```\nCREATE USER 'metabase'@'172.17.0.1' IDENTIFIED BY 'thepassword';\n```\n\n----------------------------------------\n\nTITLE: Listing Available Metabase CLI Commands using Java\nDESCRIPTION: This command executes the Metabase JAR file using Java to display the help message, which lists all available CLI commands. It requires a Java runtime and the Metabase JAR file. The `--add-opens` flag might be needed depending on the Java version to permit necessary reflective access.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/commands.md#2025-04-23_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\njava --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar help\n```\n\n----------------------------------------\n\nTITLE: Running Metabase Container with Mounted Volume for Data Persistence\nDESCRIPTION: Starts a Metabase container, mounting a host directory (`~/metabase-data`) to `/metabase-data` inside the container (`-v`). The `MB_DB_FILE` environment variable tells Metabase to store its application database file (`metabase.db`) within this mounted directory, ensuring data persists even if the container is removed and recreated.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-docker.md#2025-04-23_snippet_14\n\nLANGUAGE: shell\nCODE:\n```\ndocker run -d -p 3000:3000 \\\n  -v ~/metabase-data:/metabase-data \\\n  -e \"MB_DB_FILE=/metabase-data/metabase.db\" \\\n  --name metabase metabase/metabase\n```\n\n----------------------------------------\n\nTITLE: Extracting Day of Week Number using weekday Function in Metabase Expressions\nDESCRIPTION: Extracts the day of the week as an integer (1-7) from a given date or timestamp value. The specific day corresponding to 1 depends on database and potentially Metabase settings (often Sunday=1 or Monday=1). Takes the datetime column as input.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_69\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nweekday(column)\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\ncase(\n  weekday([Created At]) = 1, \"Sunday\",\n  weekday([Created At]) = 2, \"Monday\",\n  weekday([Created At]) = 3, \"Tuesday\",\n  weekday([Created At]) = 4, \"Wednesday\",\n  weekday([Created At]) = 5, \"Thursday\",\n  weekday([Created At]) = 6, \"Friday\",\n  weekday([Created At]) = 7, \"Saturday\")\n```\n\n----------------------------------------\n\nTITLE: Mocking Server Requests with fetch-mock for Component Tests - TypeScript\nDESCRIPTION: Demonstrates the use of fetch-mock for mocking server responses in component tests. The setup prepares mocked endpoints and renders with providers, enabling assertion of UI results without real network calls. Dependencies: fetch-mock, custom server mocks, React Testing Library.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/frontend.md#2025-04-23_snippet_20\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport fetchMock from \"fetch-mock\";\nimport { setupCollectionsEndpoints } from \"__support__/server-mocks\";\n\ninterface SetupOpts {\n  collections: Collection[];\n}\n\nconst setup = ({ collections }: SetupOpts) => {\n  setupCollectionsEndpoints({ collections });\n\n  // renderWithProviders and other setup\n};\n\ndescribe(\"Component\", () => {\n  it(\"renders correctly\", async () => {\n    setup();\n    expect(await screen.findByText(\"Collection\")).toBeInTheDocument();\n  });\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring JVM Proxy for Metabase via Command Line - Shell\nDESCRIPTION: This shell snippet provides a command line for launching Metabase's JAR with JVM proxy properties. It sets 'https.proxyHost' and 'https.proxyPort' for outbound HTTPS requests, and assumes metabase.jar is in your working directory. Prerequisite: a valid Java installation and metabase.jar file. Replace bracketed values with your proxy's actual hostname or IP and port. The Metabase server will route HTTPS traffic according to these JVM options.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/activating-the-enterprise-edition.md#2025-04-23_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\njava -Dhttps.proxyHost=[your proxy's hostname or ip] -Dhttps.proxyPort=[your proxy's port] -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: Starting Metabase JAR with PostgreSQL Application Database (Shell/Java)\nDESCRIPTION: This shell command sequence sets environment variables to configure PostgreSQL as the application database and then starts the Metabase application using the JAR file. This command is intended to be used *after* a successful migration to run Metabase against the new production database. Requires Java, the Metabase JAR, and valid PostgreSQL connection details. The `--add-opens` flag is needed for Java.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/migrating-from-h2.md#2025-04-23_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nexport MB_DB_TYPE=postgres\nexport MB_DB_CONNECTION_URI=\"jdbc:postgresql://<host>:5432/metabase?user=<username>&password=<password>\"\njava --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: Summing with Condition using Sumif and Case - Plaintext\nDESCRIPTION: These examples show aggregation based on conditionals: `sumif([Amount], [Status] = \"Shipped\")` sums the Amounts only when Status is 'Shipped', whereas `sum(case([Status] = \"Shipped\", [Amount]))` offers more flexibility for additional conditions or alternate columns. Both require a numeric [Amount] field and properly formatted logical test for [Status] values.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/case.md#2025-04-23_snippet_5\n\nLANGUAGE: plaintext\nCODE:\n```\nsumif([Amount], [Status] = \"Shipped\")\n```\n\nLANGUAGE: plaintext\nCODE:\n```\nsum(case([Status] = \"Shipped\", [Amount]))\n```\n\n----------------------------------------\n\nTITLE: Calculating a 3-Period Rolling Average with Metabase Offset\nDESCRIPTION: Provides a Metabase custom expression to calculate a 3-period rolling average of `Sum([Total])`. It sums the current period's value with the values from the two preceding periods (using `Offset` with -1 and -2) and divides by 3. Assumes data is appropriately sorted and grouped (e.g., by month).\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/offset.md#2025-04-23_snippet_6\n\nLANGUAGE: Metabase Expression\nCODE:\n```\n(Sum([Total]) + Offset(Sum([Total]), -1) + Offset(Sum([Total]), -2)) / 3\n```\n\n----------------------------------------\n\nTITLE: Adding SSL Parameters to PostgreSQL Connection String\nDESCRIPTION: Example of how to add SSL mode and certificate path parameters to a PostgreSQL database connection string. The connection string sets the SSL mode to verify-full for maximum security and specifies the path to the root certificate.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/ssl-certificates.md#2025-04-23_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nsslmode=verify-full&sslrootcert=/path/to/certificate.pem\n```\n\n----------------------------------------\n\nTITLE: Using String Function lower() in Metabase\nDESCRIPTION: The lower function returns the string of text in all lower case. It takes a string column or value as input.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_38\n\nLANGUAGE: sql\nCODE:\n```\nlower([Status])\n```\n\n----------------------------------------\n\nTITLE: Basic MetabaseProvider Configuration in TypeScript\nDESCRIPTION: Shows the basic configuration for setting up the MetabaseProvider component with authentication. The authConfig object includes the metabaseUrl and tokenGenerator function necessary for connection.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/config.md#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// Use the MetabaseProvider component, which should wrap your embedded Metabase components\nimport { MetabaseProvider } from \"metabase-sdk\";\n\nexport default function App() {\n  return (\n    <MetabaseProvider\n      config={{\n        authConfig: {\n          metabaseUrl: \"http://localhost:3000\",\n          tokenGenerator: async () => {\n            // Call your backend to get a signed embed token\n            // based on your user's permissions and the resource\n            // they are trying to access\n            const response = await fetch(\"/api/metabase/token\");\n            const { token } = await response.json();\n            return token;\n          },\n        },\n      }}\n    >\n      {/* Your app with embedded Metabase components */}\n    </MetabaseProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Log Levels in Log4j 2 XML for Metabase\nDESCRIPTION: XML configuration for setting different log levels for various components of Metabase. This allows for fine-grained control over logging output.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/log-configuration.md#2025-04-23_snippet_1\n\nLANGUAGE: xml\nCODE:\n```\n<Loggers>\n    <Logger name=\"metabase\" level=\"INFO\"/>\n    <Logger name=\"metabase-enterprise\" level=\"INFO\"/>\n    <Logger name=\"metabase.plugins\" level=\"DEBUG\"/>\n    <Logger name=\"metabase.server.middleware\" level=\"DEBUG\"/>\n    <Logger name=\"com.mchange\" level=\"ERROR\"/>\n\n    <!-- Example: Add trace logging to the Metabase analysis process, which can help debugging trouble with syncing, fingerprinting and scanning -->\n    <Logger name=\"metabase.sync\" level=\"TRACE\"/>\n\n    <Root level=\"WARN\">\n      <AppenderRef ref=\"STDOUT\"/>\n    </Root>\n</Loggers>\n```\n\n----------------------------------------\n\nTITLE: Extracting Week Number using week Function in Metabase Expressions\nDESCRIPTION: Extracts the week number of the year (as an integer) from a given date or timestamp value. An optional 'mode' parameter ('ISO', 'US', 'Instance') determines how the first week is calculated. ISO is the default. Takes the datetime column and optional mode as input.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_68\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nweek(column, mode)\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nweek(\"2021-03-25T12:52:37\")\n```\n\n----------------------------------------\n\nTITLE: Using PostgreSQL-specific splitPart() Function in Metabase\nDESCRIPTION: The splitPart function splits a string on a specified delimiter and returns the nth substring. Only available on PostgreSQL databases and takes three parameters: text, delimiter, and position.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_43\n\nLANGUAGE: sql\nCODE:\n```\nsplitPart([Date string], \" \", 1)\n```\n\nLANGUAGE: sql\nCODE:\n```\nsplitPart(\"First name, Middle Name, Last name\", \", \", 3)\n```\n\n----------------------------------------\n\nTITLE: Creating UPDATE Action with Optional Field in Metabase\nDESCRIPTION: Example SQL query for an UPDATE action that changes the 'plan' column (required) and optionally the 'payment' column in the 'invoices' table when provided with an 'id'.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/actions/custom.md#2025-04-23_snippet_0\n\nLANGUAGE: sql\nCODE:\n```\nUPDATE invoices\nSET plan = {{ plan }}\n   [[, payment = {{ payment }}]]\nWHERE\n   id = {{ id }}\n```\n\n----------------------------------------\n\nTITLE: Calculating Time Difference in Months using Spreadsheet DATEDIF Formula\nDESCRIPTION: This spreadsheet formula calculates the difference between the dates in cell B1 ('Aging Start') and C1 ('Aging End') in whole months. It uses the `DATEDIF` function with the \"M\" unit specifier. Note the single 'f' in the function name. This is presented as an equivalent to the Metabase `datetimeDiff` expression.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/datetimediff.md#2025-04-23_snippet_5\n\nLANGUAGE: plaintext\nCODE:\n```\nDATEDIF(B1, C1, \"M\")\n```\n\n----------------------------------------\n\nTITLE: Using String Function domain() in Metabase\nDESCRIPTION: The domain function extracts the domain name from a URL or email. It takes a URL or email column/value as input and returns just the domain portion.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_30\n\nLANGUAGE: sql\nCODE:\n```\ndomain([Page URL])\n```\n\nLANGUAGE: sql\nCODE:\n```\ndomain([Email])\n```\n\n----------------------------------------\n\nTITLE: Linting JavaScript/TypeScript in Metabase\nDESCRIPTION: Command to run ESLint for linting JavaScript and TypeScript code in the Metabase project.\nSOURCE: https://github.com/metabase/metabase/blob/master/CLAUDE.md#2025-04-23_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\nyarn lint-eslint\n```\n\n----------------------------------------\n\nTITLE: Using the Metabase `week` Custom Expression\nDESCRIPTION: Provides examples of the `week` custom expression applied to a '[Created At]' date column. The first example uses the default 'ISO' mode. The second explicitly uses the 'US' mode (first week starts Jan 1, weeks start Sunday). The third uses the 'Instance' mode (first week starts Jan 1, week start day depends on instance localization settings).\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/week.md#2025-04-23_snippet_1\n\nLANGUAGE: Metabase Custom Expression\nCODE:\n```\nweek([Created At])\nweek([Created At], \"US\")\nweek([Created At], \"Instance\")\n```\n\n----------------------------------------\n\nTITLE: Using String Function host() in Metabase\nDESCRIPTION: The host function extracts the host (domain and TLD) from a URL or email. It takes a URL or email column/value as input and returns the host portion.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_32\n\nLANGUAGE: sql\nCODE:\n```\nhost([Page URL])\n```\n\nLANGUAGE: sql\nCODE:\n```\nhost([Email])\n```\n\n----------------------------------------\n\nTITLE: Using datetimeSubtract with Negative Amount in Metabase Expression\nDESCRIPTION: Demonstrates using the `datetimeSubtract` function with a negative amount (-14 days) in a Metabase custom expression. This achieves the same result as adding a positive amount with `datetimeAdd`.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/datetimeadd.md#2025-04-23_snippet_5\n\nLANGUAGE: plaintext\nCODE:\n```\ndatetimeSubtract([Opened On], -14, \"day\")\n```\n\n----------------------------------------\n\nTITLE: Using Legacy SQL in BigQuery Queries\nDESCRIPTION: Example of how to use Legacy SQL in BigQuery queries within Metabase. By default, Metabase uses Standard SQL, but you can switch to Legacy SQL by including a #legacySQL directive at the beginning of your query.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/connections/bigquery.md#2025-04-23_snippet_1\n\nLANGUAGE: sql\nCODE:\n```\n#legacySQL\nSELECT *\nFROM [my_dataset.my_table]\n```\n\n----------------------------------------\n\nTITLE: Adding Days in a Spreadsheet Formula\nDESCRIPTION: This spreadsheet formula adds 14 days to the values in column A, assuming column A contains dates. This demonstrates the equivalent operation to Metabase's `datetimeAdd` function in a spreadsheet context.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/datetimeadd.md#2025-04-23_snippet_9\n\nLANGUAGE: plaintext\nCODE:\n```\nA:A + 14\n```\n\n----------------------------------------\n\nTITLE: Viewing Metabase Export Options with CLI - Bash\nDESCRIPTION: This command and associated output reveal how to obtain help and list available 'export' options for the Metabase CLI. 'java --add-opens ... -jar metabase.jar help export' prints options, their flags, and brief descriptions, which guide users in tailoring export operations. The command must be executed in the context of the metabase.jar file and requires a compatible Java runtime.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/serialization.md#2025-04-23_snippet_9\n\nLANGUAGE: bash\nCODE:\n```\njava --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar help export\n```\n\nLANGUAGE: bash\nCODE:\n```\nexport path & options\n\t Serialize Metabase instance into directory at `path`.\n\t Options:\n\t   -c, --collection ID             Export only specified ID; may occur multiple times.\n\t   -C, --no-collections            Do not export any content in collections.\n\t   -S, --no-settings               Do not export settings.yaml\n\t   -D, --no-data-model             Do not export any data model entities; useful for subsequent exports.\n\t   -f, --include-field-values      Include field values along with field metadata.\n\t   -s, --include-database-secrets  Include database connection details (in plain text; use caution).\n```\n\n----------------------------------------\n\nTITLE: Defining a Field Filter Variable for Dates in a MongoDB Native Query (MongoDB)\nDESCRIPTION: This MongoDB snippet demonstrates defining a Field Filter variable for a date-type field ('date_var') within the $match clause of an aggregation pipeline. The variable is inserted directly, and Metabase generates the proper predicate based on user input and the mapped field’s data type. This is specific to Metabase’s native query editor for MongoDB collections with appropriate date or timestamp fields. Inputs and outputs depend on filter widget configuration and database structure.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/native-editor/sql-parameters.md#2025-04-23_snippet_5\n\nLANGUAGE: mongodb\nCODE:\n```\n{% raw %}[ {$match: {{date_var}} } ]{% endraw %}\n```\n\n----------------------------------------\n\nTITLE: Configuring dashboardCardMenu Plugin for Custom Card Actions - Metabase SDK - TypeScript\nDESCRIPTION: These snippets provide examples for configuring the \\'dashboardCardMenu\\' plugin, letting you add, remove, or replace overflow menu actions on dashboard cards. Prerequisites are React and the Metabase Embedded Analytics SDK. Parameters include plugin props such as \\'customItems\\', \\'withDownloads\\', \\'withEditLink\\', or a custom component function. Outputs are dashboards with plugin-enhanced card menus for tailored user experiences.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/dashboards.md#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\n{% include_file \\\"{{ dirname }}/snippets/dashboards/plugins.tsx\\\" snippet=\\\"example-base-1\\\" %}\n```\n\nLANGUAGE: typescript\nCODE:\n```\n{% include_file \\\"{{ dirname }}/snippets/dashboards/plugins.tsx\\\" snippet=\\\"example-base-2\\\" %}\n```\n\nLANGUAGE: typescript\nCODE:\n```\n{% include_file \\\"{{ dirname }}/snippets/dashboards/plugins.tsx\\\" snippet=\\\"example-default-actions\\\" %}\n```\n\nLANGUAGE: typescript\nCODE:\n```\n{% include_file \\\"{{ dirname }}/snippets/dashboards/plugins.tsx\\\" snippet=\\\"example-custom-action-type\\\" %}\n```\n\nLANGUAGE: typescript\nCODE:\n```\n{% include_file \\\"{{ dirname }}/snippets/dashboards/plugins.tsx\\\" snippet=\\\"example-custom-actions\\\" %}\n```\n\nLANGUAGE: typescript\nCODE:\n```\n{% include_file \\\"{{ dirname }}/snippets/dashboards/plugins.tsx\\\" snippet=\\\"example-custom-actions-menu\\\" %}\n```\n\n----------------------------------------\n\nTITLE: Snowflake Timezone Conversion\nDESCRIPTION: SQL query for converting timestamp with time zone in Snowflake using convert_timezone function.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/converttimezone.md#2025-04-23_snippet_6\n\nLANGUAGE: sql\nCODE:\n```\nSELECT convert_timezone('America/Toronto', source_time) AS team_report_time_est\n```\n\n----------------------------------------\n\nTITLE: Default LDAP User Filter for Metabase Authentication\nDESCRIPTION: This is the default LDAP filter string used by Metabase to locate a user entry during the login process. It searches for an entry where the `objectClass` is `inetOrgPerson` AND either the `uid` attribute OR the `mail` attribute matches the provided login identifier (`{login}`). This filter is suitable for most standard LDAP setups but can be customized if different object classes or attributes are used.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/people-and-groups/ldap.md#2025-04-23_snippet_0\n\nLANGUAGE: ldap\nCODE:\n```\n(&(objectClass=inetOrgPerson)(|(uid={login})(mail={login})))\n```\n\n----------------------------------------\n\nTITLE: Running ClojureScript Tests in Metabase\nDESCRIPTION: Command to run ClojureScript tests in the Metabase project.\nSOURCE: https://github.com/metabase/metabase/blob/master/CLAUDE.md#2025-04-23_snippet_8\n\nLANGUAGE: Shell\nCODE:\n```\nyarn test-cljs\n```\n\n----------------------------------------\n\nTITLE: Cumulative Summing with Conditional CASE in Metabase - Metabase Expression\nDESCRIPTION: This snippet uses CumulativeSum in combination with a conditional case statement to create a running total of Payments where Plan is either \"Basic\" or \"Premium\". Non-matching rows contribute 0 to the total. Outputs an ordered, grouped running sum per group as defined by the query builder’s Group by setting.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/sumif.md#2025-04-23_snippet_7\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nCumulativeSum(case(([Plan] = \"Basic\" OR [Plan] = \"Premium\"), [Payment], 0))\n```\n\n----------------------------------------\n\nTITLE: Specifying BigQuery Datasets for Sync in Metabase\nDESCRIPTION: Example of how to specify which BigQuery datasets to sync in Metabase. You can sync all datasets, only specific ones, or all except certain ones. Wildcards can be used for string matching.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/connections/bigquery.md#2025-04-23_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nfoo,bar,baz\n```\n\n----------------------------------------\n\nTITLE: Type Casting in Metabase Actions\nDESCRIPTION: Example of casting a variable to a boolean data type in an UPDATE action to match the required database field type.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/actions/custom.md#2025-04-23_snippet_2\n\nLANGUAGE: sql\nCODE:\n```\nUPDATE invoices\nSET expected_invoice = CAST({{expected_invoice}} AS boolean)\nWHERE id = {{id}};\n```\n\n----------------------------------------\n\nTITLE: Getting Relative Timestamp using relativeDateTime Function in Metabase Expressions\nDESCRIPTION: Calculates a timestamp relative to the current time (based on `now()`). It requires an integer number (negative for past, positive for future) and a time unit string ('day', 'month', 'year', etc.). This function can only be used within conditional expressions (e.g., filters). Fractional numbers are not allowed for the period.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_65\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nrelativeDateTime(number, text)\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\n[Orders → Created At] < relativeDateTime(-30, \"day\")\n```\n\n----------------------------------------\n\nTITLE: Using String Function isEmpty() in Metabase\nDESCRIPTION: The isEmpty function returns true if a string column contains an empty string or is null. Only works with string columns and will cause an error if used with non-string columns.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_34\n\nLANGUAGE: sql\nCODE:\n```\nisEmpty([Feedback])\n```\n\n----------------------------------------\n\nTITLE: Styling Components with Emotion - JavaScript\nDESCRIPTION: Demonstrates styling a React component using Emotion's styled API. Provides a styled div whose color is controlled via props and then used in a functional component. Dependencies: @emotion/styled, React.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/frontend.md#2025-04-23_snippet_18\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport styled from \"@emotion/styled\";\n\nconst Foo = styled.div`\n  color: ${props => props.color};\n`;\n\nconst Bar = ({ color }) => <Foo color={color} />;\n```\n\n----------------------------------------\n\nTITLE: Hiding Multiple Filter Widgets in Metabase Static Embed URL\nDESCRIPTION: Shows how to hide multiple filter widgets from a static embed by providing a comma-separated list of parameter names to the `#hide_parameters` fragment identifier. This example hides both 'breakfast' and 'lunch' filters. This is an unsigned parameter added to the iframe src.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/static-embedding-parameters.md#2025-04-23_snippet_6\n\nLANGUAGE: url\nCODE:\n```\nyour_embedding_url#hide_parameters=breakfast,lunch\n```\n\n----------------------------------------\n\nTITLE: Getting Quarter Name using quarterName Function in Metabase Expressions\nDESCRIPTION: Returns a string representation for a given quarter number (1-4), formatted as 'Q' followed by the number (e.g., 'Q1', 'Q3'). Takes the quarter number (e.g., from a column or the `quarter()` function) as input.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_64\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nquarterName([Fiscal Quarter])\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nquarterName(3)\n```\n\n----------------------------------------\n\nTITLE: Column Value Scanning Query in Metabase\nDESCRIPTION: The SQL query Metabase uses to scan column values. This query samples the first 1,000 unique values from a specified column, which Metabase uses to populate dropdown filters and perform other data-aware functions.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/sync-fingerprint-scan.md#2025-04-23_snippet_2\n\nLANGUAGE: sql\nCODE:\n```\nSELECT\n    \"your_table_or_view\".\"column\" AS \"column\"\nFROM\n    \"your_schema\".\"your_table_or_view\"\nGROUP BY\n    \"your_table_or_view\".\"column\"\nORDER BY\n    \"your_table_or_view\".\"column\" ASC\nLIMIT 1000\n```\n\n----------------------------------------\n\nTITLE: Configuring Write Privileges for Metabase Actions in PostgreSQL\nDESCRIPTION: This SQL script sets up the necessary privileges for Metabase Actions in PostgreSQL. It creates a 'metabase_actions' role, grants it INSERT, UPDATE, and DELETE permissions on a specific table within a schema (replace 'your_table' and 'your_schema'), and then grants this role to the existing 'metabase' user. Assumes the 'metabase' user and minimum read privileges are already configured.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/users-roles-privileges.md#2025-04-23_snippet_2\n\nLANGUAGE: sql\nCODE:\n```\n-- Create a role to bundle database privileges for Metabase actions.\nCREATE ROLE metabase_actions WITH LOGIN;\n\n-- Grant write privileges to the TABLE used with Metabase actions.\nGRANT INSERT, UPDATE, DELETE ON \"your_table\" IN SCHEMA \"your_schema\" TO metabase_actions;\n\n-- Grant role to the metabase user.\nGRANT metabase_actions TO metabase;\n```\n\n----------------------------------------\n\nTITLE: Referencing a Field in a Table via YAML Serialization - YAML\nDESCRIPTION: This YAML snippet shows a canonical way to reference a field within a table for use as a filter. The 'dimension' key contains an array designating the reference path: database name, schema, table, and field. This structure ensures that field filters and references are unambiguous and clearly traceable for Metabase during import.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/serialization.md#2025-04-23_snippet_7\n\nLANGUAGE: yaml\nCODE:\n```\ndimension:\n  - field\n  - - Sample Database\n    - PUBLIC\n    - PRODUCTS\n    - CATEGORY\n```\n\n----------------------------------------\n\nTITLE: Extracting Week of Year in PostgreSQL using SQL\nDESCRIPTION: SQL example demonstrating how to extract the week number from a timestamp column (`created_at`) in PostgreSQL using the `EXTRACT` function. This method follows the ISO 8601 standard where the first week contains the first Thursday and weeks start on Monday.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/week.md#2025-04-23_snippet_2\n\nLANGUAGE: sql\nCODE:\n```\nEXTRACT(WEEK FROM TIMESTAMP created_at)\n```\n\n----------------------------------------\n\nTITLE: Setting Metabase Environment Variables as Java Properties\nDESCRIPTION: Example showing how to set Metabase configuration as Java system properties, which works consistently across all operating systems.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\njava -DMB_SITE_NAME=\"Awesome Company\" -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: Comparing Metabase `in` to SQL `IN` Operator\nDESCRIPTION: Shows the direct SQL equivalent of a Metabase `in` expression using the SQL `IN` operator. This demonstrates how the conceptual Metabase expression `in([title], \"Lightweight Wool Computer\", \"Aerodynamic Cotton Lamp\")` translates to standard SQL syntax for checking list membership.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/in.md#2025-04-23_snippet_3\n\nLANGUAGE: sql\nCODE:\n```\ntitle IN ('Lightweight Wool Computer', 'Aerodynamic Cotton Lamp')\n```\n\n----------------------------------------\n\nTITLE: Testing SSH Connection to Bastion Host\nDESCRIPTION: Command to test SSH credentials by directly connecting to the SSH server or Bastion Host using the ssh command line utility.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/ssh-tunnel.md#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nssh <SSH tunnel username>@<SSH tunnel host> -p <SSH tunnel port>\n```\n\n----------------------------------------\n\nTITLE: Conditional Aggregation with CASE in Custom Expressions - Metabase Expression\nDESCRIPTION: This code demonstrates the use of the case function within an aggregate Sum formula. It sums the Payment column only where Plan equals \"Basic\" by providing conditional logic via case. This is functionally equivalent to SumIf for a single condition.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/sumif.md#2025-04-23_snippet_5\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nSum(case([Plan] = \"Basic\", [Payment]))\n```\n\n----------------------------------------\n\nTITLE: Using Variables in Link Card URLs for Metabase Dashboards\nDESCRIPTION: An example URL pattern showing how to include variables in link card URLs that can be connected to dashboard filters to create dynamic links.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/dashboards/introduction.md#2025-04-23_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n{% raw %}\nhttps://www.example.com/{{path}}\n{% endraw %}\n```\n\n----------------------------------------\n\nTITLE: Calculating Current Age in Days using Metabase datetimeDiff and now()\nDESCRIPTION: This Metabase custom expression computes the current age of an item in days. It uses the `datetimeDiff` function to find the difference between the 'Aging Start' column and the current time (obtained using the `now` function), returning the result in whole days.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/datetimediff.md#2025-04-23_snippet_2\n\nLANGUAGE: plaintext\nCODE:\n```\ndatetimeDiff([Aging Start], now, \"day\")\n```\n\n----------------------------------------\n\nTITLE: Running Metabase with Custom Java Timezone using Podman (Shell)\nDESCRIPTION: This command starts the Metabase container while setting the Java virtual machine's default timezone using the `JAVA_TIMEZONE` environment variable (`-e`). Setting this to a specific timezone (e.g., `US/Pacific`) ensures consistency in timestamps and reporting within Metabase. Requires Podman and the Metabase image.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-podman.md#2025-04-23_snippet_13\n\nLANGUAGE: shell\nCODE:\n```\npodman run -d -p 3000:3000 \\\n  -e \"JAVA_TIMEZONE=US/Pacific\" \\\n  --name metabase metabase/metabase\n```\n\n----------------------------------------\n\nTITLE: Schema Filter Configuration Example\nDESCRIPTION: Example of how to specify schema names in a comma-separated list for filtering which schemas to sync or exclude in the Metabase database configuration.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/connections/redshift.md#2025-04-23_snippet_0\n\nLANGUAGE: plain\nCODE:\n```\nfoo,bar,baz\n```\n\n----------------------------------------\n\nTITLE: Metabase Expression Equivalent to Basic Python Conditional Count\nDESCRIPTION: This Metabase custom expression is the direct equivalent of the preceding Python (pandas) code for conditional counting. It counts rows where the `Plan` column equals \"Basic\".\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/countif.md#2025-04-23_snippet_17\n\nLANGUAGE: metabase-expression\nCODE:\n```\nCountIf([Plan] = \"Basic\")\n```\n\n----------------------------------------\n\nTITLE: Calculating Percentage Change with Metabase Offset Result\nDESCRIPTION: Shows a Metabase custom column expression to calculate the percentage change between periods. It uses the previously calculated `Difference` and the `Previous period` value (obtained via `Offset`). Requires the `Difference` and `Previous period` columns to exist in the summarized data.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/offset.md#2025-04-23_snippet_5\n\nLANGUAGE: Metabase Expression\nCODE:\n```\n[Difference] / [Previous period] * 100\n```\n\n----------------------------------------\n\nTITLE: Starting Metabase with Prometheus Port - Shell\nDESCRIPTION: This snippet demonstrates running the Metabase JAR with the MB_PROMETHEUS_SERVER_PORT environment variable set to 9191, enabling Metabase to export Prometheus metrics on the specified port. The command uses the java CLI to start Metabase, and requires the metabase.jar file as a prerequisite. Key parameters include MB_PROMETHEUS_SERVER_PORT (target port for metrics) and --add-opens (to ensure Java module compatibility). Output is Metabase running with metrics export enabled.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/observability-with-prometheus.md#2025-04-23_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nMB_PROMETHEUS_SERVER_PORT=9191 java --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: Creating INSERT Action in Metabase\nDESCRIPTION: Example SQL query for an INSERT action that adds a new record to the 'invoices' table with fields for account_id, payment, expected_invoice, plan, and date_received.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/actions/custom.md#2025-04-23_snippet_1\n\nLANGUAGE: sql\nCODE:\n```\nINSERT INTO invoices (\n  account_id\n  ,payment\n  ,expected_invoice\n  ,plan\n  ,date_received\n)\nVALUES (\n  {{ account_id }}\n  ,{{ payment }}\n  ,CAST ({{expected_invoice}} AS boolean)\n  ,{{plan}}\n  ,({{date_received}}\n);\n```\n\n----------------------------------------\n\nTITLE: Creating Route Access Restriction Helper\nDESCRIPTION: Defines a helper function that restricts access to routes, ensuring only authenticated users can access them. Redirects unauthenticated users to the login page.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/interactive-embedding-quick-start-guide.md#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nfunction restrict(req, res, next) {\n  if (req.session.user) {\n    next();\n  } else {\n    res.redirect(\"/login?returnTo=\" + encodeURIComponent(req.originalUrl));\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Setting JVM Timezone in Metabase Launch Command\nDESCRIPTION: Example of the Java command-line option to set the JVM timezone when launching Metabase. This ensures the JVM timezone matches your Metabase report timezone setting.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/timezones.md#2025-04-23_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\n-Duser.timezone=<timezone>\n```\n\n----------------------------------------\n\nTITLE: Embedding and Resizing Metabase Dashboard in an Iframe - HTML\nDESCRIPTION: This HTML snippet demonstrates how to embed a Metabase dashboard in an iframe and automatically resize it to fit its content using the iFrameResizer utility. The 'iframeResizer.js' script must be loaded from the Metabase server, then the iframe's 'onload' event is hooked to invoke the iFrameResize function. Prerequisites include hosting or proxying the iframeResizer script and ensuring the dashboard TOKEN is a valid signed JWT. Inputs are the SRC URL for the dashboard; output is an automatically resizing iframe. The approach is recommended for dashboards and not for individual questions.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/static-embedding.md#2025-04-23_snippet_2\n\nLANGUAGE: HTML\nCODE:\n```\n<script src=\"http://metabase.example.com/app/iframeResizer.js\"></script>\n<iframe\n  src=\"http://metabase.example.com/embed/dashboard/TOKEN\"\n  onload=\"iFrameResize({}, this)\"\n></iframe>\n```\n\n----------------------------------------\n\nTITLE: Installing JWT Library for Node.js\nDESCRIPTION: Command to install the jsonwebtoken package for Node.js to enable JWT signing for Metabase authentication.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/authentication.md#2025-04-23_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nnpm install jsonwebtoken --save\n```\n\n----------------------------------------\n\nTITLE: Running Metabase Docker with Custom Log4j Configuration\nDESCRIPTION: Docker command to run Metabase with a custom Log4j configuration file. This allows for customized logging in a containerized environment.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/log-configuration.md#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\ndocker run -p 3000:3000 -v $PWD/my_log4j2.xml:/tmp/my_log4j2.xml -e JAVA_OPTS=-Dlog4j.configurationFile=file:/tmp/my_log4j2.xml metabase/metabase`\n```\n\n----------------------------------------\n\nTITLE: Replacing Nested Ternaries and Mapping Multiple Cases - JavaScript\nDESCRIPTION: Illustrates the avoidance of nested ternary expressions in favor of object mapping or switch statements to improve code readability and maintainability. The examples show how to handle simple and complex logical branches when returning values or React components. Key input: 'str' variable for determining the outcome.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/frontend.md#2025-04-23_snippet_8\n\nLANGUAGE: JavaScript\nCODE:\n```\n// don't do this\nconst foo = str == 'a' ? 123 : str === 'b' ? 456 : str === 'c' : 789 : 0;\n\n// do this\nconst foo = {\n  a: 123,\n  b: 456,\n  c: 789,\n}[str] || 0;\n\n// or do this\nswitch (str) {\n  case 'a':\n    return <ComponentA />;\n  case 'b':\n    return <ComponentB />;\n  case 'c':\n    return <ComponentC />;\n  case 'd':\n  default:\n    return <ComponentD />;\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring SAML Redirect URL in Metabase SSO (plaintext)\nDESCRIPTION: This snippet shows the correct format for the SAML redirect URL, which is required when configuring Metabase as a SAML Service Provider in your IdP. The URL must match your Metabase Site URL followed by '/auth/sso'. Substituting the domain part to match your actual Metabase deployment is required. Used for redirecting users after successful login with SSO.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/people-and-groups/authenticating-with-saml.md#2025-04-23_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nhttps://metabase.yourcompany.com/auth/sso\n```\n\n----------------------------------------\n\nTITLE: Metabase Expression Equivalent to Python Timedelta Addition\nDESCRIPTION: This Metabase custom expression shows the equivalent operation to adding a timedelta in Python/Pandas (specifically, adding 14 days to the 'Opened On' column).\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/datetimeadd.md#2025-04-23_snippet_12\n\nLANGUAGE: plaintext\nCODE:\n```\ndatetimeAdd([Opened On], 14, \"day\")\n```\n\n----------------------------------------\n\nTITLE: Initializing SQLite Driver Integration - Metabase - YAML\nDESCRIPTION: This YAML code defines an initialization sequence for registering an SQLite driver in Metabase. It first loads the required Clojure namespace ('metabase.driver.sqlite') using 'load-namespace', then registers the SQLite JDBC driver ('org.sqlite.JDBC') with 'register-jdbc-driver'. Dependencies include a working Metabase installation, the appropriate SQLite JDBC JAR, and the specified namespace. No user-facing parameters are required; the steps are executed as part of Metabase's driver initialization. Output is not direct—this configuration ensures the driver is fully set up at runtime.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/drivers/plugins.md#2025-04-23_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\ninit:\n\n  # load-namespace tells Metabase to require a namespace from the JAR,\n  # you can do whatever Clojurey things you need to do inside that\n  # namespace\n  - step: load-namespace\n    namespace: metabase.driver.sqlite\n\n  # register-jdbc-driver tells Metabase to register a JDBC driver that\n  # will be used by this driver. (It actually registers a proxy\n  # driver, because DriverManager won't allow drivers that are loaded\n  # by different classloaders than it was loaded by (i.e., the system\n  # classloader); don't worry to much about this, but know for\n  # JDBC-based drivers you need to include your dependency here)\n  - step: register-jdbc-driver\n    class: org.sqlite.JDBC\n```\n\n----------------------------------------\n\nTITLE: Creating MySQL User with Wildcard Host Permission\nDESCRIPTION: SQL command to create a MySQL user that can connect from any host, using the '%' wildcard for the hostname portion of the user specification.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/connections/mysql.md#2025-04-23_snippet_2\n\nLANGUAGE: sql\nCODE:\n```\nCREATE USER 'metabase'@'%' IDENTIFIED BY 'thepassword';\n```\n\n----------------------------------------\n\nTITLE: Using URL Function path() in Metabase\nDESCRIPTION: The path function extracts the pathname from a URL. It takes a URL column or value as input and returns just the path portion.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_40\n\nLANGUAGE: sql\nCODE:\n```\npath([Page URL])\n```\n\n----------------------------------------\n\nTITLE: Repeating Cypress Tests Using Lodash (JavaScript)\nDESCRIPTION: Utilizes the Lodash `_.times` method, accessed via `Cypress._.times`, to execute a given test function (`it(...)`) `N` times. This is a technique for stress-testing specific Cypress tests locally to identify potential flakiness. No external Lodash dependency installation is needed as Cypress includes it.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/e2e-tests.md#2025-04-23_snippet_9\n\nLANGUAGE: js\nCODE:\n```\n// Run the test N times\nCypress._.times(N, () => {\n  it(\"should foo\", () => {\n    // ...\n  });\n});\n```\n\n----------------------------------------\n\nTITLE: Python (Pandas) Equivalent of Conditional Count by Group\nDESCRIPTION: This Python code snippet, using pandas, demonstrates how to get conditional counts by group, analogous to Metabase's `CountIf` with a 'Group by'. It first filters the DataFrame `df` based on a condition (`Active subscription == false`) and then groups the filtered data by the 'Plan' column. The `len()` of the groupby object returns the number of groups; to get counts *per* group, `df_filtered.groupby('Plan').size()` would typically be used.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/countif.md#2025-04-23_snippet_18\n\nLANGUAGE: python\nCODE:\n```\n## Add your conditions\n\n    df_filtered = df[df['Active subscription'] == false]\n\n## Group by a column, and count the rows within each group\n\n    len(df_filtered.groupby('Plan'))\n```\n\n----------------------------------------\n\nTITLE: Referencing a Metabase Model as a CTE in SQL\nDESCRIPTION: Illustrates referencing a Metabase model (e.g., model with ID 3807 named 'invoice-model') as a Common Table Expression (CTE) using the `WITH ... AS {{#<id>-<name>}}` syntax. This approach helps organize complex queries by defining the model reference separately before using it in the main query.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/data-modeling/models.md#2025-04-23_snippet_1\n\nLANGUAGE: sql\nCODE:\n```\n{% raw %}\nWITH model AS {{#3807-invoice-model}}\nSELECT *\nFROM model;\n{% endraw %}\n```\n\n----------------------------------------\n\nTITLE: Compressing Directory for API Serialization\nDESCRIPTION: Command to compress a directory containing Metabase data for API serialization. This step is necessary when using the API for import/export operations.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/serialization.md#2025-04-23_snippet_13\n\nLANGUAGE: sh\nCODE:\n```\ntar -czf  metabase_data.tgz metabase_data\n```\n\n----------------------------------------\n\nTITLE: Metabase Expression Equivalent to SQL Conditional Count Aggregation\nDESCRIPTION: This Metabase custom expression represents the aggregation part (`COUNT(CASE WHEN active_subscription = false ...`) of the preceding SQL query. To achieve the full grouped result in Metabase, this expression must be used along with setting the 'Group by' column to 'Plan' in the query builder.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/countif.md#2025-04-23_snippet_13\n\nLANGUAGE: metabase-expression\nCODE:\n```\nCountIf([Active Subscription] = false)\n```\n\n----------------------------------------\n\nTITLE: Syntax for Metabase `week` Custom Expression\nDESCRIPTION: Defines the basic syntax for the `week` custom expression in Metabase. It takes a date `column` as the first argument and an optional `mode` string ('ISO', 'US', or 'Instance') as the second argument to specify the calculation algorithm.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/week.md#2025-04-23_snippet_0\n\nLANGUAGE: Metabase Custom Expression\nCODE:\n```\nweek(column, mode)\n```\n\n----------------------------------------\n\nTITLE: Concatenating Columns in Spreadsheet Formulas\nDESCRIPTION: Demonstrates string and column concatenation within spreadsheet software (such as Microsoft Excel or Google Sheets) using the CONCATENATE function. Requires spreadsheet application with columnar data where referenced cells (e.g., A2, B2) hold the values to combine. Inputs are cell references and string literals, with output as the merged value in a new cell or column. Equivalent to Metabase 'concat', adapted for spreadsheet syntax and operations.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/concat.md#2025-04-23_snippet_2\n\nLANGUAGE: Spreadsheet Formula\nCODE:\n```\n=CONCATENATE(A2, \", \", B2)\n```\n\n----------------------------------------\n\nTITLE: Checking Metabase Authentication Status with React Hook\nDESCRIPTION: React component using the useMetabaseAuthStatus hook to check if the user is authenticated with Metabase. This allows conditional rendering based on authentication state.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/authentication.md#2025-04-23_snippet_4\n\nLANGUAGE: jsx\nCODE:\n```\n{% include_file \"{{ dirname }}/snippets/authentication/get-auth-status.tsx\" snippet=\"example\" %}\n```\n\n----------------------------------------\n\nTITLE: JDBC Parameters for Postgres Data Warehouse SSL Certificate Validation\nDESCRIPTION: Specifies the parameters (`sslmode=verify-ca&sslrootcert=<path>`) to append to a PostgreSQL data warehouse JDBC connection string within Metabase's data source settings to enable secure SSL connections with certificate validation.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/configuring-application-database.md#2025-04-23_snippet_13\n\nLANGUAGE: text\nCODE:\n```\n&sslmode=verify-ca&sslrootcert=<path to CA root or intermediate root certificate>\n```\n\n----------------------------------------\n\nTITLE: Timestamp without Time Zone SQL Example\nDESCRIPTION: Example of a SQL timestamp without time zone information. This format does not contain any timezone data and can lead to ambiguity in reporting.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/timezones.md#2025-04-23_snippet_3\n\nLANGUAGE: sql\nCODE:\n```\n2022-12-28T12:00:00\n```\n\n----------------------------------------\n\nTITLE: Referencing Saved Questions in Metabase Actions\nDESCRIPTION: Example of using data from a saved question (#6-potential-customers) in a CTE and inserting the results into a 'people_to_write' table.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/actions/custom.md#2025-04-23_snippet_3\n\nLANGUAGE: sql\nCODE:\n```\nWITH prospects AS {{#6-potential-customers}}\n\nINSERT INTO\n  people_to_write (\n  first_name\n  ,last_name\n  ,email\n  )\nSELECT\n  first_name\n  ,last_name\n  ,email\nFROM prospects;\n```\n\n----------------------------------------\n\nTITLE: Conditional Consolidation using Metabase Case Expression\nDESCRIPTION: Demonstrates using the Metabase `case` expression to conditionally select values from 'Notes' or 'Comments' columns, providing a default value if both are blank. This achieves a similar outcome to `coalesce` but allows for more complex conditions, such as handling cases where both columns have values differently.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/coalesce.md#2025-04-23_snippet_0\n\nLANGUAGE: Metabase Expression\nCODE:\n```\ncase(ISBLANK([Notes]) = FALSE AND ISBLANK([Comments]) = FALSE, [Notes],\n     ISBLANK([Notes]) = TRUE  AND ISBLANK([Comments]) = False, [Comments],\n     ISBLANK([Notes]) = FALSE AND ISBLANK([Comments]) = TRUE,  [Notes],\n     ISBLANK([Notes]) = TRUE  AND ISBLANK([Comments]) = TRUE,  \"No notes or comments\")\n```\n\n----------------------------------------\n\nTITLE: Generating Embedded Dashboard Iframe URL with Auto-Refresh - JavaScript\nDESCRIPTION: This JavaScript snippet assembles a Metabase iframe URL for embedding a dashboard, enabling the title display and setting the dashboard to auto-refresh every 60 seconds by appending parameters to the hash segment. Required dependencies are the METABASE_SITE_URL constant and a valid JWT token string. The resulting URL can be used directly in an iframe's src attribute. Inputs include METABASE_SITE_URL and token; the output is a full dashboard iframe URL string. The refresh parameter only applies to dashboards and not to specific questions.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/static-embedding.md#2025-04-23_snippet_1\n\nLANGUAGE: JavaScript\nCODE:\n```\nvar iframeUrl =\n  METABASE_SITE_URL + \"/embed/dashboard/\" + token + \"#titled=true&refresh=60\";\n```\n\n----------------------------------------\n\nTITLE: Resetting Admin Password via Java Metabase Command - Shell\nDESCRIPTION: This shell snippet demonstrates restarting the Metabase application with the reset-password option to generate a password reset token for a specific admin email. The command requires Java to be installed and Metabase to be available as a JAR file. The placeholder \"email@example.com\" should be replaced with the target admin email address. Upon execution, Metabase prints out a password reset token, which must be used in the next step. Standard server console access is required to perform this operation.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/people-and-groups/managing.md#2025-04-23_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\njava --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar reset-password email@example.com\n```\n\n----------------------------------------\n\nTITLE: Using MAGE Command Line Tool in Metabase\nDESCRIPTION: Example showing how to run the MAGE tool to list available tasks and get help for specific commands. The output displays the ASCII art logo and lists available tasks including code formatting, linting, and database management.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/mage.md#2025-04-23_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\n$ ./bin/mage\n   ███╗   ███╗ █████╗  ██████╗ ███████╗\n   ████╗ ████║██╔══██╗██╔════╝ ██╔════╝\n   ██╔████╔██║███████║██║  ███╗█████╗\n   ██║╚██╔╝██║██╔══██║██║   ██║██╔══╝\n   ██║ ╚═╝ ██║██║  ██║╚██████╔╝███████╗\n   ╚═╝     ╚═╝╚═╝  ╚═╝ ╚═════╝ ╚══════╝\n    The Metabase Automation Genius Engine\n\nThe following tasks are available:\n\ncljfmt-staged   Runs cljfmt on staged files\nkondo           Runs Kondo against a file, directory, or everything we usually lint\n...\nstart-db        Start a db on a default port in docker\njar-download    Given a version, downloads a metabase jar\n$ ./bin/mage kondo -h\n<prints help for easily running kondo>\n```\n\n----------------------------------------\n\nTITLE: MongoDB Query with Multiple Optional Filters\nDESCRIPTION: Advanced MongoDB query with multiple optional filter conditions. This pattern allows for independent filtering on category and price, with each filter contained in its own optional $match operator that can be included or excluded based on parameter availability.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/native-editor/sql-parameters.md#2025-04-23_snippet_15\n\nLANGUAGE: mongodb\nCODE:\n```\n[\n    [[{ $match: {{cat}} },]]\n    [[{ $match: { price: { \"$gt\": {{minprice}} } } },]]\n    {\n        $count: \"Total\"\n    }\n]\n```\n\n----------------------------------------\n\nTITLE: SQL Query with Joined Table for Field Filter Variable\nDESCRIPTION: Example of a SQL query that includes a join to make the field filter variable work properly. This shows how to join a table that the field filter variable is referring to, which is necessary for the variable to function correctly.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/native-editor/sql-parameters.md#2025-04-23_snippet_7\n\nLANGUAGE: sql\nCODE:\n```\nSELECT\n  *\nFROM\n  ORDERS\n  JOIN PRODUCTS ON ORDERS.product_id = PRODUCTS.id\nWHERE\n  {{ product_category }}\n```\n\n----------------------------------------\n\nTITLE: Running Clojure Backend Tests\nDESCRIPTION: Commands to run backend unit tests for either open-source components only or both open-source and enterprise edition components.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/devenv.md#2025-04-23_snippet_17\n\nLANGUAGE: sh\nCODE:\n```\n# OSS tests only\nclojure -X:dev:test\n\n# OSS + EE tests\nclojure -X:dev:ee:ee-dev:test\n```\n\n----------------------------------------\n\nTITLE: Setting Environment Variables for Metabase JAR on Windows CMD\nDESCRIPTION: Commands to set environment variables and run Metabase JAR file using Windows batch/cmd.\nSOURCE: https://github.com/metabase/metabase/blob/master/src/metabase/cmd/resources/env-var-intro.md#2025-04-23_snippet_3\n\nLANGUAGE: batch\nCODE:\n```\nset MB_SITE_NAME=\"Awesome Company\"\n\njava --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: Using Share in Metabase Custom Expressions - Markdown\nDESCRIPTION: Describes calculating the proportion of rows matching a condition, as a decimal, with the Share function in Metabase custom expressions. Takes a boolean expression as argument; returns a decimal representing the share of records fulfilling the condition.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_8\n\nLANGUAGE: Markdown\nCODE:\n```\nSyntax: `Share(condition)`\n\nExample: `Share([Color] = \"Blue\")` would return the number of rows with the `Color` field set to `Blue`, divided by the total number of rows.\n```\n\n----------------------------------------\n\nTITLE: Reloading Metabase Components with Key Prop in TypeScript\nDESCRIPTION: Demonstrates how to force reload Metabase components when underlying data changes by using the key prop. This technique ensures visualizations display the most up-to-date information.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/config.md#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useEffect, useState } from \"react\";\nimport { MetabaseProvider, Question } from \"metabase-sdk\";\n\nexport default function App() {\n  const [reloadKey, setReloadKey] = useState(0);\n\n  useEffect(() => {\n    // When your application data gets modified:\n    function handleDataChange() {\n      // Force reload of Metabase components\n      setReloadKey((prev) => prev + 1);\n    }\n\n    // Listen for data changes\n    window.addEventListener(\"data-change\", handleDataChange);\n\n    return () => {\n      window.removeEventListener(\"data-change\", handleDataChange);\n    };\n  }, []);\n\n  return (\n    <MetabaseProvider\n      key={reloadKey}\n      config={{\n        authConfig: {\n          metabaseUrl: \"http://localhost:3000\",\n          tokenGenerator: async () => {\n            const response = await fetch(\"/api/metabase/token\");\n            const { token } = await response.json();\n            return token;\n          },\n        },\n      }}\n    >\n      <Question questionId={1} />\n    </MetabaseProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Using Cumulative Count Metric with Metabase Expression Syntax - plaintext\nDESCRIPTION: This snippet demonstrates the use of the built-in cumulative count metric expression in Metabase. No additional dependencies are required except for access to Metabase's query builder with cumulative metrics enabled in the Summarize step. There are no inputs or parameters, as this metric simply counts records cumulatively across the selected breakout dimension.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/cumulative.md#2025-04-23_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nCumulativeCount\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom Chart Colors in Metabase\nDESCRIPTION: JSON configuration example for setting custom chart accent colors in Metabase Pro and Enterprise editions.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{\n \"accent0\":\"#FF0005\",\n \"accent1\":\"#E6C367\",\n \"accent2\":\"#B9E68A\",\n \"accent3\":\"#8AE69F\",\n \"accent4\":\"#8AE6E4\",\n \"accent5\":\"#8AA2E6\",\n \"accent6\":\"#B68AE6\",\n \"accent7\":\"#E68AD0\"\n}\n```\n\n----------------------------------------\n\nTITLE: Disabling Automatic Metabase Database Migrations (Bash)\nDESCRIPTION: Sets the `MB_DB_AUTOMIGRATE` environment variable to `false` before launching Metabase. This prevents Metabase from automatically applying required database schema changes upon startup, enabling manual review and execution of migration scripts.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/migrating-from-h2.md#2025-04-23_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nexport MB_DB_AUTOMIGRATE=false\n```\n\n----------------------------------------\n\nTITLE: Building a Single Metabase Driver\nDESCRIPTION: Command to build a specific database driver module (using MongoDB as an example) for use in development.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/devenv.md#2025-04-23_snippet_14\n\nLANGUAGE: sh\nCODE:\n```\n# Build the 'mongo' driver\n./bin/build-driver.sh mongo\n```\n\n----------------------------------------\n\nTITLE: Opening H2 SQL Shell for Metabase Database using Java\nDESCRIPTION: This command launches the H2 database command-line shell tool, bundled within the Metabase JAR, to connect directly to a Metabase application database file (metabase.db). It requires Java, the Metabase JAR, and the path to the H2 database file. This allows direct SQL interaction with the application database.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/commands.md#2025-04-23_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\njava -cp metabase.jar org.h2.tools.Shell -url jdbc:h2:/path/to/metabase.db\n```\n\n----------------------------------------\n\nTITLE: Following Container Logs for Real-time Monitoring\nDESCRIPTION: Command to monitor container logs in real-time, useful when observing Metabase startup process or troubleshooting issues as they occur.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/docker.md#2025-04-23_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nDocker logs -f CONTAINER_ID\n```\n\n----------------------------------------\n\nTITLE: Exporting Entity IDs in Metabase YAML Exports - YAML\nDESCRIPTION: This snippet demonstrates how Metabase serializes an item's unique Entity ID in a YAML export file. The field 'entity_id' holds a stable, globally unique identifier in NanoID format used to track the item across environments, ensuring consistency and portability during migrations and imports. There are no required dependencies, but the YAML file is expected to be generated by Metabase's export feature; 'entity_id' value should be treated as opaque.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/serialization.md#2025-04-23_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\nentity_id: r6vC_vLmo9zG6_r9sAuYG\n```\n\n----------------------------------------\n\nTITLE: Example PostgreSQL Connection URI for Metabase on Azure - Markdown\nDESCRIPTION: This snippet provides an explicit example of the MB_DB_CONNECTION_URI for a scenario where Metabase is being connected to a PostgreSQL database running on Azure. The username uses percent-encoding ('%40') in place of '@', and the password, host, and port are all provided as sample values. Used during the web application configuration, this demonstrates to users the specific format and encoding requirements of the connection string.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-azure.md#2025-04-23_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n```\npostgresql://10.0.2.4:5432/postgres?user=metabase%40metabase-app-database&password=Password1!&ssl=true&sslmode=require\n```\n```\n\n----------------------------------------\n\nTITLE: Using String Function endsWith() in Metabase\nDESCRIPTION: The endsWith function returns true if the end of the text matches the comparison text. It performs case-sensitive matching by default but can do case-insensitive matching with an optional parameter.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_31\n\nLANGUAGE: sql\nCODE:\n```\nendsWith([Appetite], \"hungry\")\n```\n\nLANGUAGE: sql\nCODE:\n```\nendsWith(text, comparison, \"case-insensitive\")\n```\n\n----------------------------------------\n\nTITLE: Styling Components with CSS Modules - CSS\nDESCRIPTION: Shows definition and usage of a CSS module and the corresponding import in JavaScript. The .primary class is set using a CSS variable and consumed by a React component as a class name. Dependencies: CSS Modules configuration with build tooling.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/frontend.md#2025-04-23_snippet_16\n\nLANGUAGE: CSS\nCODE:\n```\n.primary {\n  color: -var(--mb-color-brand);\n}\n```\n\n----------------------------------------\n\nTITLE: Subtracting Minutes in Spreadsheet Formulas - Spreadsheet - Spreadsheet\nDESCRIPTION: This spreadsheet formula computes a new column by subtracting 30 minutes from each datetime value in column A. It operates by converting 30 minutes into a fraction of a day (as used by spreadsheet datetime values). This approach is equivalent to the datetimeSubtract([Arrive By], 30, \"minute\") operation and should be used in a spreadsheet environment like Excel or Google Sheets.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/datetimesubtract.md#2025-04-23_snippet_5\n\nLANGUAGE: Spreadsheet\nCODE:\n```\nA:A - 30/(60*24)\n```\n\n----------------------------------------\n\nTITLE: Limiting Columns in a Table Using SQL - Metabase - SQL\nDESCRIPTION: This SQL snippet demonstrates how to create a custom view by selecting only specific columns ('ID', 'Name', 'Created At', 'State') from the 'People' table. Dependencies include a Metabase environment with the 'People' table available and appropriate user permissions to execute SQL queries and save questions. The key parameters are the columns being selected; the output is a table restricted to these fields, used as a basis for sandboxed views to hide sensitive data from certain user groups.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/permissions/data-sandbox-examples.md#2025-04-23_snippet_0\n\nLANGUAGE: sql\nCODE:\n```\n  ID,\n  Name,\n  'Created At',\n  State\nFROM\n  People\n```\n\n----------------------------------------\n\nTITLE: Setting PostgreSQL Connection URI for Metabase Database\nDESCRIPTION: Example of setting a JDBC connection URI for a PostgreSQL database with SSL enabled. This can be used instead of individual MB_DB_* variables.\nSOURCE: https://github.com/metabase/metabase/blob/master/src/metabase/cmd/resources/other-env-vars.md#2025-04-23_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\njdbc:postgresql://db.example.com:5432/mydb?user=dbuser&password=dbpassword&ssl=true&sslfactory=org.postgresql.ssl.NonValidatingFactory\n```\n\n----------------------------------------\n\nTITLE: Configuring MB_LDAP_HOST Environment Variable in Metabase\nDESCRIPTION: Specifies the hostname or IP address of the LDAP server. Type: string. Default: `null`. Corresponds to `ldap-host` in the configuration file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_33\n\nLANGUAGE: plaintext\nCODE:\n```\nMB_LDAP_HOST=null\n```\n\n----------------------------------------\n\nTITLE: Extracting Year using year Function in Metabase Expressions\nDESCRIPTION: Extracts the year component (as an integer) from a given date or timestamp value. Takes the datetime column or value as input.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_70\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nyear([datetime column])\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nyear(\"2021-03-25T12:52:37\")\n```\n\n----------------------------------------\n\nTITLE: Summing Payments for Non-Basic Plans with Not-Equal Operator - Metabase Expression\nDESCRIPTION: This snippet demonstrates how to exclude certain categories (here, where Plan is not \"Basic\") using the != operator in SumIf. It outputs the sum of all payments not associated with the \"Basic\" plan.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/sumif.md#2025-04-23_snippet_4\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nSumIf([Payment], [Plan] != \"Basic\")\n```\n\n----------------------------------------\n\nTITLE: Checking Literal Value Against Multiple Columns with `in` in Metabase\nDESCRIPTION: Illustrates using the `in` function in Metabase to check if a specific string literal ('Gadget') exists in either the `Title` column or the `Category` column for a given record. This shows the flexibility of comparing a literal against multiple potential column sources.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/in.md#2025-04-23_snippet_2\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nin(\"Gadget\", [Title], [Category])\n```\n\n----------------------------------------\n\nTITLE: Running the Open Source Metabase Container with Podman (Shell)\nDESCRIPTION: This command starts a new Metabase container in detached mode (`-d`), maps the host port 3000 to the container's port 3000 (`-p 3000:3000`), names the container 'metabase' (`--name=metabase`), and uses the latest Open Source image. Metabase will be accessible on `http://localhost:3000`. Requires the Metabase image to be available locally.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-podman.md#2025-04-23_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\npodman run -d -p 3000:3000 --name=metabase docker.io/metabase/metabase:latest\n```\n\n----------------------------------------\n\nTITLE: Parameter Passing to URL for SQL Variables in Metabase (Markdown/URL)\nDESCRIPTION: This snippet demonstrates how to pass variable values directly via URL query parameters in Metabase. By supplying '?variable_name=value' in the question URL, Metabase assigns the provided value to the corresponding SQL variable. This technique requires an existing Metabase question using SQL variables. Supported for single or multiple variables by chaining parameters using '&amp;'. Only works when accessing Metabase through a web browser or API.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/native-editor/sql-parameters.md#2025-04-23_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\n?variable_name=value\n```\n\nLANGUAGE: markdown\nCODE:\n```\nhttps://metabase.example.com/question/42-eg-question?cat=Gizmo\n```\n\nLANGUAGE: markdown\nCODE:\n```\nhttps://metabase.example.com/question/42-eg-question?cat=Gizmo&maxprice=50\n```\n\n----------------------------------------\n\nTITLE: Creating a MySQL/MariaDB Database for Metabase in SQL\nDESCRIPTION: SQL statement to create a database named 'metabase' specifically for use with Metabase, ensuring the correct character set (`utf8mb4`) and collation (`utf8mb4_unicode_ci`) are used. This needs to be run against the MySQL/MariaDB server before starting Metabase.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/configuring-application-database.md#2025-04-23_snippet_5\n\nLANGUAGE: sql\nCODE:\n```\nCREATE DATABASE metabase CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\n```\n\n----------------------------------------\n\nTITLE: Parameterizing SQL WHERE Clause for Metabase Sandboxes\nDESCRIPTION: Demonstrates how to use a Metabase SQL parameter (variable) within a WHERE clause. This allows the filter value to be dynamically supplied based on user attributes when setting up a custom data sandbox, enabling row-level security. The variable type must be text, number, or date. This is a required step for restricting rows based on user attributes.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/permissions/data-sandboxes.md#2025-04-23_snippet_1\n\nLANGUAGE: sql\nCODE:\n```\nWHERE plan = {%raw%}{{ plan_variable }}{%endraw%}\n```\n\n----------------------------------------\n\nTITLE: Subtracting Time Units using datetimeSubtract Function in Metabase Expressions\nDESCRIPTION: Subtracts a specified amount of a given time unit (e.g., 'day', 'month', 'year') from a date or timestamp value. The amount must be an integer; fractional values are not supported. Requires the date/timestamp column, the integer amount, and the time unit string.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_54\n\nLANGUAGE: Metabase Expression\nCODE:\n```\ndatetimeSubtract(column, amount, unit)\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\ndatetimeSubtract(\"2021-03-25\", 1, \"month\")\n```\n\n----------------------------------------\n\nTITLE: Receiving Frame Mode Messages (Fit) from Embedded Metabase - postMessage Protocol - JSON\nDESCRIPTION: This JSON snippet defines a message where the Metabase embed requests the host to set iframe mode to 'fit' and resize the iframe to a specific pixel height. The HEIGHT_IN_PIXELS value should be replaced by a numeric value generated by Metabase. The host app should listen and use this info to adjust iframe style. No extra dependencies required except standard postMessage handling.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/interactive-embedding.md#2025-04-23_snippet_12\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"metabase\": {\n    \"type\": \"frame\",\n    \"frame\": {\n      \"mode\": \"fit\",\n      \"height\": HEIGHT_IN_PIXELS\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring PostgreSQL Connection String for Azure - Configuration String\nDESCRIPTION: This snippet provides an example of a PostgreSQL connection string tailored for deploying Metabase on Azure. It includes all necessary parameters such as host address, port, database name, user credentials, and SSL requirements. Ensure that the 'user' value corresponds to your Azure PostgreSQL user and that special characters like '@' are properly handled. The connection string should be added to your deployment configuration or as an environment variable (e.g., MB_DB_CONNECTION_URI).\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-azure.md#2025-04-23_snippet_2\n\nLANGUAGE: Configuration String\nCODE:\n```\npostgresql://10.0.2.4:5432/metabase?user=metabase@metabase-app-database&password=Password1!&ssl=true&sslmode=require\n```\n\n----------------------------------------\n\nTITLE: Writing Declarative Array Transformations - JavaScript\nDESCRIPTION: Contrasts imperative for-loop filtering with declarative Array.filter usage when processing lists. Demonstrates how to produce clearer, more idiomatic code by abstracting 'how' with native array methods. Input: list of objects; output: array of items with 'bar' not false.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/frontend.md#2025-04-23_snippet_15\n\nLANGUAGE: JavaScript\nCODE:\n```\n// don't do this\nlet foo = [];\nfor (let i = 0; i < list.length; i++) {\n  if (list[i].bar === false) {\n    continue;\n  }\n\n  foo.push(list[i]);\n}\n\n// do this\nconst foo = list.filter(entry => entry.bar !== false);\n```\n\n----------------------------------------\n\nTITLE: JDBC Parameters for Postgres Data Warehouse with Insecure NonValidatingFactory\nDESCRIPTION: Specifies the parameters (`ssl=true&sslfactory=org.postgresql.ssl.NonValidatingFactory`) to append to a PostgreSQL data warehouse JDBC connection string within Metabase's data source settings to enable SSL but disable certificate validation. This is an insecure option for troubleshooting or non-sensitive setups.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/configuring-application-database.md#2025-04-23_snippet_14\n\nLANGUAGE: text\nCODE:\n```\n&ssl=true&sslfactory=org.postgresql.ssl.NonValidatingFactory\n```\n\n----------------------------------------\n\nTITLE: Configuring Metabase to Listen on a Specific Network Interface\nDESCRIPTION: This snippet shows how to make Metabase listen on a specific network interface by setting the MB_JETTY_HOST environment variable.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/customizing-jetty-webserver.md#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nexport MB_JETTY_HOST=0.0.0.0\njava --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: CountIf with Mixed Required and Optional Conditions in Metabase Expression\nDESCRIPTION: This Metabase custom expression demonstrates combining `AND` and `OR` conditions using parentheses for clarity. It counts rows where (`Plan` is \"Basic\" OR `Plan` is \"Business\") AND `Active Subscription` is \"false\".\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/countif.md#2025-04-23_snippet_3\n\nLANGUAGE: metabase-expression\nCODE:\n```\nCountIf(([Plan] = \"Basic\" OR [Plan] = \"Business\") AND [Active Subscription] = \"false\")\n```\n\n----------------------------------------\n\nTITLE: Viewing Metabase Docker Container Logs\nDESCRIPTION: Command to follow the logs from a Metabase container in real-time, which helps identify startup issues and runtime errors.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/docker.md#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ndocker logs -f CONTAINER_NAME\n```\n\n----------------------------------------\n\nTITLE: Configuring MB_JDBC_DATA_WAREHOUSE_MAX_CONNECTION_POOL_SIZE Variable in Metabase\nDESCRIPTION: Sets the maximum size of the c3p0 connection pool for the JDBC data warehouse. Increase if regular usage consumes all connections, which can slow down query results as Metabase waits for available connections. Type: integer. Default: `15`.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_10\n\nLANGUAGE: plaintext\nCODE:\n```\nMB_JDBC_DATA_WAREHOUSE_MAX_CONNECTION_POOL_SIZE=15\n```\n\n----------------------------------------\n\nTITLE: Adding query-result-metadata Method in Metabase Drivers\nDESCRIPTION: New optional method for efficiently calculating metadata for queries without actually running them. This improves performance when saving Questions in Metabase.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/driver-changelog.md#2025-04-23_snippet_0\n\nLANGUAGE: clojure\nCODE:\n```\nmetabase.driver/query-result-metadata\n```\n\n----------------------------------------\n\nTITLE: Enabling Session Cookies Expiry on Browser Close - Environment Variable - Shell\nDESCRIPTION: This snippet illustrates how to force Metabase session cookies to be deleted once the user's browser session ends. Setting the MB_SESSION_COOKIES environment variable to true ensures sessions do not persist after browser close. This requires restarting Metabase after updating the variable and can be added to shell or deployment config files. No parameters except a boolean true/false value are needed; output is managed internally by Metabase.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/interactive-embedding.md#2025-04-23_snippet_8\n\nLANGUAGE: sh\nCODE:\n```\nMB_SESSION_COOKIES=true\n```\n\n----------------------------------------\n\nTITLE: Starting Metabase Server from a REPL\nDESCRIPTION: Clojure code to start the Metabase server from a REPL, which also sets up or migrates the application database.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/devenv.md#2025-04-23_snippet_10\n\nLANGUAGE: clojure\nCODE:\n```\n(do (dev) (start!))\n```\n\n----------------------------------------\n\nTITLE: Configuring H2 Application Database Location via Environment Variables in Shell\nDESCRIPTION: Sets environment variables `MB_DB_TYPE` to `h2` and `MB_DB_FILE` to a specific path (excluding the .db extension) to tell Metabase where to store its H2 application database file, then starts Metabase. This overrides the default behavior of creating the H2 file in the same directory as the JAR.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/configuring-application-database.md#2025-04-23_snippet_10\n\nLANGUAGE: sh\nCODE:\n```\nexport MB_DB_TYPE=h2\nexport MB_DB_FILE=/the/path/to/my/h2.db\njava --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: Extracting Day of Month using day Function in Metabase Expressions\nDESCRIPTION: Extracts the day of the month (an integer between 1 and 31) from a given date or timestamp value. Takes the datetime column or value as input.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_55\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nday([datetime column])\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nday(\"2021-03-25T12:52:37\")\n```\n\n----------------------------------------\n\nTITLE: Extending Interactive Question Click Menu via mapQuestionClickActions Plugin (TypeScript)\nDESCRIPTION: This snippet illustrates the use of the mapQuestionClickActions plugin to inject custom actions into the click-through menu of an interactive question. It requires the Embedded analytics SDK, React/TypeScript setup, and plugin registration. Developers provide an array of custom actions with associated handlers and metadata; these augment end-user interactivity and menu options within the embedded chart interface.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/questions.md#2025-04-23_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\n```typescript\\n{% include_file \\\"{{ dirname }}/snippets/questions/interactive-question-plugins.tsx\\\" snippet=\\\"example\\\" %}\\n```\n```\n\n----------------------------------------\n\nTITLE: Configuring PostgreSQL Connection String for Metabase - Markdown\nDESCRIPTION: This code snippet demonstrates the required format for the MB_DB_CONNECTION_URI environment variable for connecting Metabase to an Azure-hosted PostgreSQL instance. The connection string includes the private IP address, port, database, username, password, and enforces SSL. It is used as an environment variable in the Azure Web App settings. Be aware that in recent versions, the '@' symbol in the username must be percent-encoded as '%40'.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-azure.md#2025-04-23_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n```\npostgresql://databasePrivateIPAddress:port/postgres?user=user@name_of_your_database_engine&password=configuredpassword&ssl=true&sslmode=required\n```\n```\n\n----------------------------------------\n\nTITLE: Expanded SQL Generated by Metabase for a Referenced Model/Question CTE\nDESCRIPTION: This SQL code illustrates the underlying query generated by Metabase when processing the `{#5-gizmo-orders-in-2019}` tag from the previous example. The tag is substituted with the actual SQL query of the referenced model/question (selecting Gizmo orders from 2019), enclosed in parentheses, forming the `gizmo_orders` CTE definition. The subsequent `SELECT count(*)` operates on the results of this expanded subquery.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/native-editor/referencing-saved-questions-in-queries.md#2025-04-23_snippet_1\n\nLANGUAGE: sql\nCODE:\n```\nWITH\n  gizmo_orders AS (\n    SELECT\n      *\n    FROM\n      orders AS o\n      INNER JOIN products AS p ON o.product_id = p.id\n    WHERE\n      p.category = 'Gizmo'\n      AND o.created_at BETWEEN '2019-01-01' AND '2019-12-31'\n  )\nSELECT\n  count(*)\nFROM\n  gizmo_orders\n```\n\n----------------------------------------\n\nTITLE: Validating Commercial License Token via URL - Plain Text\nDESCRIPTION: This plain text snippet displays the endpoint Metabase uses to validate the commercial license token, substituting [token-id] with your actual token. There are no dependencies, and it is meant to inform users of the endpoint format used during the license verification process.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/activating-the-enterprise-edition.md#2025-04-23_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nhttps://token-check.metabase.com/api/[token-id]/v2/status\n```\n\n----------------------------------------\n\nTITLE: Extracting Campaign Name from a URL in Spreadsheets\nDESCRIPTION: This spreadsheet formula applies the regexextract function to pull a substring from the value of cell A2 based on a regular expression matching utm_campaign query parameter in a URL. Used in spreadsheet software like Google Sheets, the function expects the text and a pattern, returning the first capture group's match or an error if no match is found. The syntax mirrors the Metabase expression closely.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/regexextract.md#2025-04-23_snippet_4\n\nLANGUAGE: spreadsheet\nCODE:\n```\nregexextract(A2, \"^[^?#]+\\?utm_campaign=(.*)\")\n```\n\n----------------------------------------\n\nTITLE: Embedding Metabase dashboard using Entity ID in HTML iframe\nDESCRIPTION: Code example demonstrating how to embed a specific Metabase dashboard by referencing its Entity ID in the iframe src attribute. Entity IDs are preferred over sequential IDs as they remain stable across different environments.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/interactive-embedding.md#2025-04-23_snippet_1\n\nLANGUAGE: html\nCODE:\n```\nsrc=\"http://metabase.yourcompany.com/dashboard/entity/[Entity ID]\"\n```\n\n----------------------------------------\n\nTITLE: Extracting Campaign Name from URLs in a Pandas DataFrame (Python)\nDESCRIPTION: This pandas code leverages the str.extract method to add a new column to a DataFrame, extracting a substring from the URL column when it matches the specified regular expression. It requires pandas, and that the DataFrame already contains columns 'URL' and optionally 'Campaign Name'. The regex should be provided as a raw string to ensure correct pattern handling; output is a new column with extracted values or NaN if no match.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/regexextract.md#2025-04-23_snippet_5\n\nLANGUAGE: python\nCODE:\n```\ndf['Campaign Name'] = df['URL'].str.extract(r'^[^?#]+\\?utm_campaign=(.*)')\n```\n\n----------------------------------------\n\nTITLE: Configuring JVM Options for Oracle Client Authentication with Keystore\nDESCRIPTION: JVM options required to configure client authentication using a keystore file that contains the client's private key for Oracle database connections. These options specify the keystore path, type, and password.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/connections/oracle.md#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n-Djavax.net.ssl.keyStore=/path/to/keystore.jks\n-Djavax.net.ssl.keyStoreType=JKS \\\n-Djavax.net.ssl.keyStorePassword=<keyStorePassword>\n```\n\n----------------------------------------\n\nTITLE: Advanced TypeScript Type Guard with Type Predicate\nDESCRIPTION: A more complex type guard using the 'pet is Fish' type predicate syntax. This example demonstrates how type guards help TypeScript narrow types in conditional blocks, enabling type-safe property access.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase-types/guards/readme.md#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nfunction isFish(pet: Fish | Bird): pet is Fish {\n  return (pet as Fish).swim !== undefined;\n}\n\n// avoids type errors in a situation like this\n\nif (isFish(pet)) {\n  pet.swim();\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring a Dashboard URL with Parameters in Metabase\nDESCRIPTION: Example URL that configures a Metabase dashboard to automatically refresh every 60 seconds, display in fullscreen mode, and use night mode for better visibility. These parameters can be added after the hash (#) in the dashboard URL.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/dashboards/introduction.md#2025-04-23_snippet_5\n\nLANGUAGE: url\nCODE:\n```\nhttps://metabase.mydomain.com/dash/2#refresh=60&fullscreen&night\n```\n\n----------------------------------------\n\nTITLE: Moving the Metabase JAR File to Target Directory - Bash\nDESCRIPTION: Moves the downloaded metabase.jar file from the user's Downloads folder to the newly created ~/metabase directory. Ensures that Metabase runs in a clean environment and that its generated files are isolated. Requires the actual metabase.jar file to be present at the specified source location. Output is silent on success; errors if the file is missing or permissions are denied.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-the-metabase-jar-file.md#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nmv /Users/person/Downloads/metabase.jar ~/metabase\n```\n\n----------------------------------------\n\nTITLE: Running Metabase with Remote JMX Monitoring Enabled (Shell)\nDESCRIPTION: Shell command to start the Metabase JAR file with Java Virtual Machine (JVM) options configured for remote Java Management Extensions (JMX) monitoring. It enables JMX, sets the JMX RMI port to 1099, disables authentication and SSL (insecure, for trusted networks), allows connections from any host (`local.only=false`), and specifies the server's hostname for RMI. Requires a JDK installation. The `<Metabase Hostname>` placeholder must be replaced with the actual hostname or IP address accessible by the monitoring tool.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/monitoring-metabase.md#2025-04-23_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\njava --add-to-start=jmx,jmx-remote \\\n     -Dcom.sun.management.jmxremote \\\n     -Dcom.sun.management.jmxremote.port=1099 \\\n     -Dcom.sun.management.jmxremote.rmi.port=1099 \\\n     -Dcom.sun.management.jmxremote.authenticate=false \\\n     -Dcom.sun.management.jmxremote.ssl=false \\\n     -Dcom.sun.management.jmxremote.local.only=false \\\n     -Djava.rmi.server.hostname=<Metabase Hostname> \\\n     -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: Converting Between Time Zones with convertTimezone in Metabase Expression\nDESCRIPTION: Shows how to compare the 'now' timestamp with a table column operating in different time zones by converting both sides to the same time zone using 'convertTimezone'. Inputs include the current time expression, a column with a different source time zone, and the target (report) time zone. Outputs a boolean indicating the comparison result. Requires knowledge of the correct time zone identifiers for your context.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/now.md#2025-04-23_snippet_3\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nconvertTimezone(now, 'UTC', <report timezone>) >= convertTimezone([Deadline], 'UTC', <source time zone>)\n```\n\n----------------------------------------\n\nTITLE: Checking Table Access with SQL\nDESCRIPTION: SQL query to verify if a specific table is accessible. This helps determine if the issue is related to table permissions or if the table exists in the database. Replace 'your_table' with the actual table name.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/cant-see-tables.md#2025-04-23_snippet_1\n\nLANGUAGE: sql\nCODE:\n```\nSELECT *\nFROM your_table\n```\n\n----------------------------------------\n\nTITLE: Python (Pandas) Equivalent of Basic CountIf\nDESCRIPTION: This Python code snippet, using the pandas library, replicates the functionality of the Metabase expression `CountIf([Plan] = \"Basic\")`. It filters a DataFrame named `df` to select rows where the 'Plan' column is \"Basic\" and then calculates the number of resulting rows using `len()`.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/countif.md#2025-04-23_snippet_16\n\nLANGUAGE: python\nCODE:\n```\nlen(df[df['Plan'] == \"Basic\"])\n```\n\n----------------------------------------\n\nTITLE: Registering a Metabase driver with multiple parents\nDESCRIPTION: Demonstrates how to register a driver with multiple parent drivers, allowing inheritance from several base implementations. This example shows BigQuery inheriting from both SQL and Google drivers.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/drivers/multimethods.md#2025-04-23_snippet_5\n\nLANGUAGE: clojure\nCODE:\n```\n(driver/register! :bigquery, :parent #{:sql :google})\n```\n\n----------------------------------------\n\nTITLE: Database sync query in SQL\nDESCRIPTION: SQL query used by Metabase during database sync operations to get updated schema information. This lightweight query retrieves table and view names, column names, and column data types.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/sync-scan.md#2025-04-23_snippet_0\n\nLANGUAGE: sql\nCODE:\n```\nSELECT\n    TRUE\nFROM\n    \"your_schema\".\"your_table_or_view\"\nWHERE\n    1 <> 1\nLIMIT 0\n```\n\n----------------------------------------\n\nTITLE: Subtracting Datetime Units with Metabase Custom Expressions - Metabase Expression - Metabase Expression\nDESCRIPTION: This snippet demonstrates the usage of the Metabase custom expression function datetimeSubtract to subtract a specified amount and unit from a datetime value. It can be used on column names, expressions, or string representations, with the unit specified (e.g., 'minute', 'month'). The result is a datetime decremented by the specified interval; requires using supported temporal data types as input.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/datetimesubtract.md#2025-04-23_snippet_0\n\nLANGUAGE: Metabase Expression\nCODE:\n```\ndatetimeSubtract(\"2021-03-25\", 1, \"month\")\n```\n\n----------------------------------------\n\nTITLE: Configuring PostgreSQL App DB via JDBC URI with Separate Credentials in Shell\nDESCRIPTION: Sets the `MB_DB_CONNECTION_URI` environment variable with the base JDBC connection string for PostgreSQL and provides the user and password via separate `MB_DB_USER` and `MB_DB_PASS` variables. This is useful if the password contains special characters problematic for direct inclusion in the URI.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/configuring-application-database.md#2025-04-23_snippet_3\n\nLANGUAGE: sh\nCODE:\n```\nexport MB_DB_CONNECTION_URI=\"jdbc:postgresql://localhost:5432/metabase\"\nexport MB_DB_USER=<username>\nexport MB_DB_PASS=<password>\njava --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: Using Environment Variables for API Keys in Metabase\nDESCRIPTION: Example showing how to supply an API key using an environment variable in the config file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/config-file.md#2025-04-23_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\napi-keys:\n  - name: \"ENV API Key\"\n    key: \"{{env API_KEY_FROM_ENV}}\"\n    creator: \"admin@example.com\"\n    group: \"admin\"\n```\n\n----------------------------------------\n\nTITLE: Configuring MB_LDAP_GROUP_MAPPINGS Environment Variable in Metabase\nDESCRIPTION: Specifies a JSON object defining mappings between LDAP groups (identified by their DN) and Metabase group IDs. Keys are LDAP group DNs, and values are lists of corresponding Metabase group IDs. Type: json. Default: `{}`. Corresponds to `ldap-group-mappings` in the configuration file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_30\n\nLANGUAGE: plaintext\nCODE:\n```\nMB_LDAP_GROUP_MAPPINGS={}\n```\n\n----------------------------------------\n\nTITLE: Defining and Scheduling a Recurring Daily Job in Clojure with Quartz\nDESCRIPTION: Defines a recurring Quartz job (`DailyTask`) using `metabase.task/defjob` scheduled to run daily at 2 AM according to a cron expression. The `task/init!` method builds the job (marked `store-durably`) and a trigger using a cron schedule (`cron/cron-schedule`) set to the `report-timezone`. The job and trigger are scheduled via `task/schedule-task!`. Timezone changes require trigger rescheduling.\nSOURCE: https://github.com/metabase/metabase/blob/master/src/metabase/task/QUARTZ.md#2025-04-23_snippet_1\n\nLANGUAGE: clojure\nCODE:\n```\n(def daily-job-key     (jobs/key \"my.scheduled.daily.task.job\"))\n(def daily-trigger-key (triggers/key \"my.scheduled.daily.task.trigger\"))\n\n(task/defjob DailyTask [_]\n  (println \"Running daily scheduled task\"))\n\n(defmethod task/init! ::DailyTask [_]\n  (let [job (jobs/build\n             (jobs/of-type DailyTask)\n             (jobs/with-identity daily)\n             (jobs/with-description \"Daily scheduled task\")\n             (jobs/store-durably))\n        trigger (triggers/build\n                 (triggers/with-identity daily)\n                 (triggers/for-job daily)\n                 (triggers/start-now)\n                 (triggers/with-schedule\n                  ;; Run every day at 2 AM\n                  (cron/schedule\n                   (cron/cron-schedule \"0 0 2 * * ? *\")\n                   (cron/in-time-zone (driver/report-timezone)))))]\n    (task/schedule-task! job trigger)))\n```\n\n----------------------------------------\n\nTITLE: Registering Modal Story Meta in Storybook (JSX)\nDESCRIPTION: This snippet registers the Meta information for the Modal stories in Storybook by referencing the imported ModalStories object. The 'Meta' component from '@storybook/blocks' is used with the 'of' prop set to ModalStories, connecting the documentation to the relevant set of stories. This establishes the context for subsequent Canvas and Story elements that demonstrate the Modal component.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/overlays/Modal/Modal.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n<Meta of={ModalStories} />\n```\n\n----------------------------------------\n\nTITLE: Environment Variable Definitions for Metabase - Conf\nDESCRIPTION: This snippet shows example environment variables to configure Metabase, such as password policy, host/port, and database credentials. Place this in /etc/default/metabase. Parameters: variables in angle brackets must be set to real values. Inputs: service reads these values on startup. Outputs: environment variables available to the Metabase process.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-debian.md#2025-04-23_snippet_7\n\nLANGUAGE: conf\nCODE:\n```\nMB_PASSWORD_COMPLEXITY=<weak|normal|strong>\\nMB_PASSWORD_LENGTH=<10>\\nMB_JETTY_HOST=<0.0.0.0>\\nMB_JETTY_PORT=<12345>\\nMB_DB_TYPE=<postgres|mysql|h2>\\nMB_DB_DBNAME=<your_metabase_db_name>\\nMB_DB_PORT=<5432>\\nMB_DB_USER=<your_metabase_db_user>\\nMB_DB_PASS=<ssshhhh>\\nMB_DB_HOST=<localhost>\\nMB_EMOJI_IN_LOGS=<true|false>\\n# any other env vars you want available to Metabase\n```\n\n----------------------------------------\n\nTITLE: Timestamp with Offset SQL Example\nDESCRIPTION: Example of a SQL timestamp with offset that includes UTC offset information. This format specifies the time difference from UTC.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/timezones.md#2025-04-23_snippet_2\n\nLANGUAGE: sql\nCODE:\n```\n2022-12-28T12:00:00-04:00\n```\n\n----------------------------------------\n\nTITLE: Extracting Minute using minute Function in Metabase Expressions\nDESCRIPTION: Extracts the minute component (an integer between 0 and 59) from a given date or timestamp value. Takes the datetime column or value as input.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_59\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nminute([datetime column])\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nminute(\"2021-03-25T12:52:37\")\n```\n\n----------------------------------------\n\nTITLE: Setting Up Analytics Route with Embedded Metabase\nDESCRIPTION: Creates a route that serves the embedded Metabase dashboard in an iframe, using the SSO endpoint for authentication.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/interactive-embedding-quick-start-guide.md#2025-04-23_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nconst METABASE_DASHBOARD_PATH = \"/dashboard/1\"; // or \"/dashboard/entity/[Entity ID]\"\n\napp.get(\"/analytics\", restrict, (req, res) => {\n  res.render(\"analytics\", {\n    user: req.session.user,\n    metabaseSrc: `/sso/metabase?return_to=${encodeURIComponent(METABASE_DASHBOARD_PATH)}`,\n  });\n});\n```\n\n----------------------------------------\n\nTITLE: Running Custom Metabase Docker Image\nDESCRIPTION: Demonstrates how to run the newly created custom Metabase Docker image using docker run command.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-docker.md#2025-04-23_snippet_17\n\nLANGUAGE: bash\nCODE:\n```\ndocker run -d -p 3000:3000 --name metabase mycompany/metabase-custom\n```\n\n----------------------------------------\n\nTITLE: MongoDB Query with Optional Match Operator\nDESCRIPTION: Example of making a match clause optional in a MongoDB query. This demonstrates the MongoDB-specific syntax for optional filtering, allowing the query to run without the match clause if no category filter is provided.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/native-editor/sql-parameters.md#2025-04-23_snippet_14\n\nLANGUAGE: mongodb\nCODE:\n```\n[\n    [[{\n        $match: {category: {{cat}}}\n    },]]\n    {\n        $count: \"Total\"\n    }\n]\n```\n\n----------------------------------------\n\nTITLE: Mapping User Fields in Auth0 for SAML Integration - JSON\nDESCRIPTION: Defines how Auth0 should map user attribute fields for SAML assertions to Metabase property names. Place this JSON object in the SAML 2 Web App Addon settings box in Auth0. It requires that the SAML2 Web App Addon is enabled and expects property names like \\'email\\', \\'given_name\\', \\'family_name\\', and \\'groups\\'. When a user authenticates, these mappings determine how SAML attributes are sent to Metabase. Limitations: only attributes defined in this mapping will be passed unless expanded.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/people-and-groups/saml-auth0.md#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"mappings\": {\n        \"email\":\"http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress\",\n        \"given_name\":\"http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname\",\n        \"family_name\":\"http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname\",\n        \"groups\":\"http://schemas.xmlsoap.org/claims/Group\"\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Querying Multiple Metrics for Gauge Chart in SQL\nDESCRIPTION: This SQL query returns multiple metrics in a single row, which can be used in a gauge chart. The first column (Sum of Quantity) will be used by default, but other metrics can be selected in the Metabase editor.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/visualizations/gauge.md#2025-04-23_snippet_1\n\nLANGUAGE: sql\nCODE:\n```\n| Sum of Quantity | Average Quantity | Max Quantity |\n| --------------- | ---------------- | ------------ |\n| 4910            | 17.32            | 173          |\n```\n\n----------------------------------------\n\nTITLE: Listing and Finding Stopped Metabase Containers\nDESCRIPTION: Lists all Docker containers, including stopped ones (`-a`), and filters the output (`| grep metabase`) to find containers related to 'metabase'. This is useful for identifying a previously stopped container to potentially recover its data or configuration.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-docker.md#2025-04-23_snippet_15\n\nLANGUAGE: shell\nCODE:\n```\ndocker ps -a | grep metabase\n```\n\n----------------------------------------\n\nTITLE: Setting Up User and Database Connection in Metabase\nDESCRIPTION: Example configuration with one admin user and a Postgres database connection that uses an environment variable for the password.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/config-file.md#2025-04-23_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\nversion: 1\nconfig:\n  users:\n    - first_name: Cam\n      last_name: Era\n      password: 2cans3cans4cans\n      email: cam@example.com\n  databases:\n    - name: test-data (Postgres)\n      engine: postgres\n      details:\n        host: localhost\n        port: 5432\n        user: dbuser\n        password: \"{{ env POSTGRES_TEST_DATA_PASSWORD }}\"\n        dbname: test-data\n```\n\n----------------------------------------\n\nTITLE: Configuring Privileges for Metabase CSV Uploads in PostgreSQL\nDESCRIPTION: This SQL script sets up the necessary privileges for the Metabase CSV upload feature in PostgreSQL. It creates a 'metabase_uploads' role, grants it USAGE on the target schema and INSERT, UPDATE, DELETE privileges on all tables within that schema (replace 'your_schema'). The script then grants this 'metabase_uploads' role to the existing 'metabase' user. Assumes the target schema exists and the 'metabase' user is configured.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/users-roles-privileges.md#2025-04-23_snippet_4\n\nLANGUAGE: sql\nCODE:\n```\n-- Create a role to bundle database privileges for uploads.\nCREATE ROLE metabase_uploads WITH LOGIN;\n\n-- Grant write privileges to the SCHEMA used for uploads.\nGRANT USAGE ON \"your_schema\" TO metabase_uploads;\nGRANT INSERT, UPDATE, DELETE ON ALL TABLES IN SCHEMA \"your_schema\" TO metabase_uploads;\n\n-- Grant role to the metabase user.\nGRANT metabase_uploads TO metabase;\n```\n\n----------------------------------------\n\nTITLE: Configuring Proxy for Metabase Containers via Environment Variable - Shell\nDESCRIPTION: This shell snippet demonstrates how to configure HTTPS proxy settings for Metabase running in a containerized environment using the JAVA_TOOL_OPTIONS environment variable. The variable includes '-Dhttps.proxyHost' and '-Dhttps.proxyPort' JVM flags which will be consumed when starting Metabase. Replace the bracketed placeholders with appropriate proxy details. No additional dependencies, but requires container orchestration supporting environment variables (e.g., Docker or Kubernetes).\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/activating-the-enterprise-edition.md#2025-04-23_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nJAVA_TOOL_OPTIONS=-Dhttps.proxyHost=[your proxy's hostname or ip] -Dhttps.proxyPort=[your proxy's port]\n```\n\n----------------------------------------\n\nTITLE: Frontend i18n String Tagging using ES6 Template Literals\nDESCRIPTION: Examples of marking strings for translation in the frontend using 't' and 'jt' template literals. The 't' function is used for regular strings while 'jt' is used for JSX elements.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/internationalization.md#2025-04-23_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst someString = t`Hello ${name}!`;\nconst someJSX = <div>{jt`Hello ${name}`}</div>;\n```\n\n----------------------------------------\n\nTITLE: Creating Dynamic URL Links in Metabase\nDESCRIPTION: This snippet demonstrates how to create a dynamic URL link in Metabase using column values as parameters. It shows an example of linking an 'Adjective' column to a Google search URL.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/data-modeling/metadata-editing.md#2025-04-23_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n```\nhttps://www.google.com/search?q={% raw %}{{adjective}}{% endraw %}\n```\n```\n\n----------------------------------------\n\nTITLE: Configuring MySQL/MariaDB Application Database via JDBC URI in Shell\nDESCRIPTION: Sets the `MB_DB_CONNECTION_URI` environment variable with a full JDBC connection string for MySQL/MariaDB, including hostname, port, database name, user, and password. This configures the Metabase application database before starting the application.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/configuring-application-database.md#2025-04-23_snippet_6\n\nLANGUAGE: sh\nCODE:\n```\nexport MB_DB_CONNECTION_URI=\"jdbc:mysql://localhost:3306/metabase?user=<username>&password=<password>\"\njava --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: Format Arguments in Backend i18n with Clojure\nDESCRIPTION: Examples of using format arguments in backend translations. The syntax follows java.text.MessageFormat with zero-indexed arguments in the form of {0}, {1}, etc.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/internationalization.md#2025-04-23_snippet_2\n\nLANGUAGE: clojure\nCODE:\n```\n(trs \"{0} accepted their {1} invite\" (:common_name new-user) (app-name-trs))\n(tru \"{0}th percentile of {1}\" p (aggregation-arg-display-name inner-query arg))\n(tru \"{0} driver does not support foreign keys.\" driver/*driver*)\n```\n\n----------------------------------------\n\nTITLE: Conditional Interval Checking using CASE and BETWEEN - Metabase Expression - Metabase Expression\nDESCRIPTION: This code uses the Metabase case and between functions to determine if the current datetime falls between two columns (Depart At and Arrive By). The logic applies the now function for the current timestamp, checks if it's inside the interval, and outputs 'Yes' or 'No' accordingly. Requires columns with datetime types and demonstrates use of control flow in Metabase expressions.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/datetimesubtract.md#2025-04-23_snippet_2\n\nLANGUAGE: Metabase Expression\nCODE:\n```\ncase(between(now, [Depart At], [Arrive By]), \"Yes\", \"No\")\n```\n\n----------------------------------------\n\nTITLE: Configuring API Key Authentication for Local Development\nDESCRIPTION: Frontend code to set up API key authentication for local development and evaluation. This method is not recommended for production use but simplifies testing.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/authentication.md#2025-04-23_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\n{% include_file \"{{ dirname }}/snippets/authentication/auth-config-api-key.tsx\" %}\n```\n\n----------------------------------------\n\nTITLE: Using Sum in Metabase Custom Expressions - Markdown\nDESCRIPTION: Documents how to calculate the sum of values in a column via the Sum function in Metabase custom expressions. Requires one column argument; returns the total value across all rows.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_10\n\nLANGUAGE: Markdown\nCODE:\n```\nSyntax: `Sum(column)`\n\nExample: `Sum([Subtotal])` would add up all the values in the `Subtotal` column.\n```\n\n----------------------------------------\n\nTITLE: Including Variables in Markdown Text Cards for Metabase Dashboards\nDESCRIPTION: A Markdown example showing how to include variables in dashboard text cards that can be connected to filters. When a filter value is selected, the variable will display that value.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/dashboards/introduction.md#2025-04-23_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n{% raw %}\n# {{state}} orders\n{% endraw %}\n```\n\n----------------------------------------\n\nTITLE: SQL Equivalent of Conditional Count by Group\nDESCRIPTION: This SQL query provides conditional counts broken out by group, equivalent to using a Metabase `CountIf` expression with a 'Group by' clause. It counts rows where `active_subscription` is false for each distinct `plan` in the `accounts` table.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/countif.md#2025-04-23_snippet_12\n\nLANGUAGE: sql\nCODE:\n```\nSELECT\n    plan,\n    COUNT(CASE WHEN active_subscription = false THEN id END) AS total_inactive_subscriptions\nFROM accounts\nGROUP BY\n    plan\n```\n\n----------------------------------------\n\nTITLE: Referencing Collections in Exported Question YAML - YAML\nDESCRIPTION: This snippet illustrates how a question's collection is referenced within an exported YAML file with the 'collection_id' key. The value is the Entity ID of the collection that contains the question, and is essential for Metabase to resolve item-parent relationships during import. The referenced collection must either exist in the target Metabase or be included in the import batch.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/serialization.md#2025-04-23_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\ncollection_id: onou5H28Wvy3kWnjxxdKQ\n```\n\n----------------------------------------\n\nTITLE: Defining Optional SQL Parameter in Metabase (Not for Sandboxes)\nDESCRIPTION: Illustrates the syntax for an optional SQL parameter in Metabase using double square brackets `[[...]]`. This type of parameterization is explicitly mentioned as *not* being usable for SQL questions that define custom sandboxes; parameters for sandbox questions must be required.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/permissions/data-sandboxes.md#2025-04-23_snippet_3\n\nLANGUAGE: sql\nCODE:\n```\n[[WHERE plan = {%raw%}{{ plan_variable }}{%endraw%}]]\n```\n\n----------------------------------------\n\nTITLE: Restarting Metabase JAR via Java - Shell\nDESCRIPTION: This snippet demonstrates how to start Metabase from a Java JAR file in the shell using a specific Java option to open module access needed for runtime. The command assumes that you have already placed the updated 'metabase.jar' in your working directory. No external dependencies other than Java and the JAR file are required. Input parameters: None. Output: Starts the Metabase application. Ensure the correct working directory and Java version are used for compatibility.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/upgrading-metabase.md#2025-04-23_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\njava --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: Example Webhook Payload for Metabase Alert in JSON\nDESCRIPTION: This JSON structure represents the payload sent by Metabase when an alert is triggered via a webhook. It includes metadata about the alert, encoded visualization data, and raw data from the query results.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/webhooks.md#2025-04-23_snippet_0\n\nLANGUAGE: JSON\nCODE:\n```\n{\n  \"type\": \"alert\",\n  \"alert_id\": null,\n  \"alert_creator_id\": 2666,\n  \"alert_creator_name\": \"Roberto Bolaño\",\n  \"data\": {\n    \"type\": \"question\",\n    \"question_id\": 108,\n    \"question_name\": \"Sales\",\n    \"question_url\": \"http://example.com/question/108\",\n    \"visualization\": \"data:image/png;base64,=...LONG_ENCODED_PNG_HERE...\",\n    \"raw_data\": {\n      \"cols\": [\n        \"CREATED_AT\",\n        \"count\"\n      ],\n      \"rows\": [\n        [\n          \"2023-09-01T00:00:00Z\",\n          346\n        ],\n        [\n          \"2023-10-01T00:00:00Z\",\n          354\n        ],\n        [\n          \"2023-11-01T00:00:00Z\",\n          394\n        ],\n        [\n          \"2023-12-01T00:00:00Z\",\n          418\n        ],\n        [\n          \"2024-01-01T00:00:00Z\",\n          457\n        ],\n        [\n          \"2024-02-01T00:00:00Z\",\n          404\n        ],\n        [\n          \"2024-03-01T00:00:00Z\",\n          445\n        ],\n        [\n          \"2024-04-01T00:00:00Z\",\n          439\n        ],\n        [\n          \"2024-05-01T00:00:00Z\",\n          520\n        ],\n        [\n          \"2024-06-01T00:00:00Z\",\n          455\n        ],\n        [\n          \"2024-07-01T00:00:00Z\",\n          523\n        ],\n        [\n          \"2024-08-01T00:00:00Z\",\n          501\n        ]\n      ]\n    }\n  },\n  \"sent_at\": \"2024-09-30T20:16:15.76582Z\"\n}\n```\n\n----------------------------------------\n\nTITLE: Embedding YouTube Videos in Metabase Dashboards with Iframe Cards\nDESCRIPTION: HTML iframe code example for embedding a YouTube video in a Metabase dashboard using an iframe card. This demonstrates how to enhance dashboards with multimedia content.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/dashboards/introduction.md#2025-04-23_snippet_3\n\nLANGUAGE: html\nCODE:\n```\n<iframe\n  width=\"560\"\n  height=\"315\"\n  src=\"https://www.youtube.com/embed/W-i9E5_Wjmw?si=qWeMGxEymVOIHiXo\"\n  title=\"YouTube video player\"\n  frameborder=\"0\"\n  allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"\n  referrerpolicy=\"strict-origin-when-cross-origin\"\n  allowfullscreen\n></iframe>\n```\n\n----------------------------------------\n\nTITLE: Example Serialized Metabase Question (Card) in YAML\nDESCRIPTION: Provides an example YAML structure for a serialized Metabase question (card). This includes metadata like name, description, entity ID, query details (native SQL in this case with a template tag for a field filter), visualization settings (area chart), and Metabase version. It demonstrates how questions are represented in the export directory (within a `cards` subdirectory of a collection).\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/serialization.md#2025-04-23_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\nname: Products by week\ndescription: Area chart of products created by week\nentity_id: r6vC_vLmo9zG6_r9sAuYG\ncreated_at: \"2024-05-08T19:10:24.348808Z\"\ncreator_id: admin@metabase.local\ndisplay: area\narchived: false\ncollection_id: onou5H28Wvy3kWnjxxdKQ\ncollection_preview: true\ncollection_position: null\nquery_type: native\ndataset: false\ncache_ttl: null\ndatabase_id: Sample Database\ntable_id: null\nenable_embedding: false\nembedding_params: null\nmade_public_by_id: null\npublic_uuid: null\nparameters:\n  - default:\n      - Gizmo\n    id: c37d2f38-05fa-48c4-a208-19d9dba803c6\n    name: Pick a category\n    slug: category_filter\n    target:\n      - dimension\n      - - template-tag\n        - category_filter\n    type: string/=\nparameter_mappings: []\ndataset_query:\n  database: Sample Database\n  native:\n    query: |-\n      SELECT\n        category,\n        date_trunc ('week', created_at) AS \"Week\",\n        count(*) AS \"Count\"\n      FROM\n        products\n      WHERE\n        {{category_filter}}\n      GROUP BY\n        category,\n        \"Week\"\n    template-tags:\n      category_filter:\n        default:\n          - Gizmo\n        dimension:\n          - field\n          - - Sample Database\n            - PUBLIC\n            - PRODUCTS\n            - CATEGORY\n          - base-type: type/Text\n        display-name: Pick a category\n        id: c37d2f38-05fa-48c4-a208-19d9dba803c6\n        name: category_filter\n        type: dimension\n        widget-type: string/=\n  type: native\nresult_metadata:\n  - base_type: type/Text\n    display_name: CATEGORY\n    effective_type: type/Text\n    field_ref:\n      - field\n      - CATEGORY\n      - base-type: type/Text\n    name: CATEGORY\n    semantic_type: null\n  - base_type: type/DateTime\n    display_name: Week\n    effective_type: type/DateTime\n    field_ref:\n      - field\n      - Week\n      - base-type: type/DateTime\n    name: Week\n    semantic_type: null\n  - base_type: type/BigInteger\n    display_name: Count\n    effective_type: type/BigInteger\n    field_ref:\n      - field\n      - Count\n      - base-type: type/BigInteger\n    name: Count\n    semantic_type: type/Quantity\nvisualization_settings:\n  column_settings: null\n  graph.dimensions:\n    - Week\n    - CATEGORY\n  graph.metrics:\n    - Count\nserdes/meta:\n  - id: r6vC_vLmo9zG6_r9sAuYG\n    label: products_created_by_week\n    model: Card\ninitially_published_at: null\nmetabase_version: v1.49.7 (f0ff786)\ntype: question\n```\n\n----------------------------------------\n\nTITLE: Generating ED25519 SSH Test Key\nDESCRIPTION: Command to generate an ED25519 SSH key in PEM format. This key is used for the ssh_test.\nSOURCE: https://github.com/metabase/metabase/blob/master/test_resources/ssh/README.md#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n$ ssh-keygen -t rsa -m PEM\n```\n\n----------------------------------------\n\nTITLE: Adding UI Hiding Parameters to SSO Redirect via Include (TypeScript/JavaScript)\nDESCRIPTION: Instructs the user to include a specific code snippet ('hide-metabase-elements') from 'sso-with-jwt.ts' into their '/sso/metabase' route handler. This included snippet appends query parameters ('?logo=false&top_nav=false') to the 'return_to' URL in the SSO redirect, causing Metabase to hide the logo and top navigation bar when embedded.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/interactive-embedding-quick-start-guide.md#2025-04-23_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\n{% include_file \"{{ dirname }}/snippets/interactive-embedding-quick-start-guide/sso-with-jwt.ts\" snippet=\"hide-metabase-elements\" %}\n```\n\n----------------------------------------\n\nTITLE: Synchronizing Meta IDs in Exported YAML - YAML\nDESCRIPTION: This YAML snippet shows how the 'serdes/meta' array contains an 'id' field that matches the top-level 'entity_id'. This field is used by Metabase during import and export operations to match and reference objects unambiguously. It is a structural requirement that 'serdes/meta.id' and 'entity_id' designate the same item, ensuring referential integrity.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/serialization.md#2025-04-23_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\nserdes/meta:\n  - id: r6vC_vLmo9zG6_r9sAuYG\n```\n\n----------------------------------------\n\nTITLE: Rolling Back Migration with Docker Compose - Shell\nDESCRIPTION: This command invokes the 'migrate down' operation for Metabase using Docker Compose, provided appropriate environment variables are configured in the Compose environment. Dependencies: Docker Compose, correct service setup and environment configuration. Input: Service name ('metabase') and migration command. Output: Performs the database schema rollback as part of an orchestrated container stack.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/upgrading-metabase.md#2025-04-23_snippet_9\n\nLANGUAGE: shell\nCODE:\n```\ndocker compose run metabase \\\"migrate down\\\"\n```\n\n----------------------------------------\n\nTITLE: Combining Multiple Static Embed Parameters - Metabase - plaintext\nDESCRIPTION: This snippet shows how to combine multiple parameters in a static Metabase embedding URL by chaining them with an ampersand '&'. It demonstrates using data parameters (such as 'category' and 'state') along with appearance and locale parameters ('theme' and 'locale'). Required context includes valid parameter names and values for the specific dashboard or question. Inputs are multiple query and hash parameter pairs; outputs are an embedded visualization customized by these parameters. Ensure proper order: parameter string before the hash fragment.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/static-embedding-parameters.md#2025-04-23_snippet_10\n\nLANGUAGE: plaintext\nCODE:\n```\ncategory=Gadget&state=Vermont#theme=night&locale=ko\n```\n\n----------------------------------------\n\nTITLE: Running Open Source Metabase on a Custom Port with Podman (Shell)\nDESCRIPTION: This command starts the Metabase container similarly to the default run command, but maps the host port 12345 to the container's port 3000 (`-p 12345:3000`). This allows accessing Metabase on `http://localhost:12345`. Requires the Metabase image and Podman.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-podman.md#2025-04-23_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\npodman run -d -p 12345:3000 --name=metabase docker.io/metabase/metabase:latest\n```\n\n----------------------------------------\n\nTITLE: Configuring Postgres App DB with SSL Certificate Validation via JDBC URI in Shell\nDESCRIPTION: Sets the `MB_DB_CONNECTION_URI` environment variable for a PostgreSQL application database, enabling SSL and specifying certificate validation (`sslmode=verify-ca`) along with the path to the root certificate (`sslrootcert`). This is used for secure connections when upgrading from Metabase versions prior to 0.38 or requiring validated SSL.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/configuring-application-database.md#2025-04-23_snippet_11\n\nLANGUAGE: sh\nCODE:\n```\nexport MB_DB_CONNECTION_URI=\"postgres://localhost:5432/metabase?user=<username>&password=<password>&sslmode=verify-ca&sslrootcert=<path to CA root or intermediate root certificate>\"\n```\n\n----------------------------------------\n\nTITLE: Getting Current Datetime with Time Zone in SQL\nDESCRIPTION: Shows how to retrieve the current timestamp in a specified time zone (e.g., 'EST') within SQL, which is typically used when querying a PostgreSQL database in Metabase. Usage of 'CURRENT_TIMESTAMP AT TIME ZONE' returns the current datetime adjusted to the chosen timezone. Input is the time zone string, and output is a timestamp. Requires SQL environment that supports the 'AT TIME ZONE' clause.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/now.md#2025-04-23_snippet_1\n\nLANGUAGE: SQL\nCODE:\n```\nSELECT CURRENT_TIMESTAMP AT TIME ZONE 'EST'\n```\n\n----------------------------------------\n\nTITLE: Running Enterprise Metabase on a Custom Port with Podman (Shell)\nDESCRIPTION: This command starts the Metabase Pro/Enterprise container, mapping host port 12345 to the container's port 3000 (`-p 12345:3000`). Access Metabase via `http://localhost:12345`. Requires the Enterprise image and Podman.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-podman.md#2025-04-23_snippet_7\n\nLANGUAGE: shell\nCODE:\n```\npodman run -d -p 12345:3000 --name=metabase docker.io/metabase/metabase-enterprise:latest\n```\n\n----------------------------------------\n\nTITLE: Using between in Metabase Logical Functions - Markdown\nDESCRIPTION: Explains the logical between function, which checks if a column's value is within a specified numeric or date range in Metabase custom expressions. Takes a column, a start, and an end value as arguments, returning true if the column value is inclusively between start and end.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_12\n\nLANGUAGE: Markdown\nCODE:\n```\nSyntax: `between(column, start, end)`\n\nExample: If you filtered with the expression `between([Created At], \"2019-01-01\", \"2020-12-31\")`, Metabase would return rows that returned true for that expression, in this case where the `Created At` date fell _within_ the range of January 1, 2019 and December 31, 2020, including the start (`2019-01-01`) and end (`2020-12-31`) dates.\n\nRelated: [interval](#interval).\n```\n\n----------------------------------------\n\nTITLE: Syntax for Setting a Default Filter Value in Metabase Embed URL\nDESCRIPTION: Illustrates the general syntax for setting a default value for an editable filter widget in a static embed using a URL query parameter (`?parameter_name=value`). The `parameter_name` corresponds to the editable parameter configured in Metabase, and `value` is the desired default. This is an unsigned parameter added to the iframe src.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/static-embedding-parameters.md#2025-04-23_snippet_0\n\nLANGUAGE: url\nCODE:\n```\nyour_embedding_url?parameter_name=value\n```\n\n----------------------------------------\n\nTITLE: Example: Hiding the 'Breakfast' Filter Widget in Embed URL\nDESCRIPTION: Provides a concrete example of hiding a specific filter widget named 'breakfast' from a static embed using the `#hide_parameters` fragment identifier in the URL. This is an unsigned parameter added to the iframe src.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/static-embedding-parameters.md#2025-04-23_snippet_5\n\nLANGUAGE: url\nCODE:\n```\nyour_embedding_url#hide_parameters=breakfast\n```\n\n----------------------------------------\n\nTITLE: Calculating Difference Using Offset Result in Metabase\nDESCRIPTION: Demonstrates creating a Metabase custom column to calculate the absolute difference between the current period's `Sum of total` and the `Previous period` value (obtained using the `Offset` function). `[Sum of total]` and `[Previous period]` refer to columns in the summarized result.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/offset.md#2025-04-23_snippet_4\n\nLANGUAGE: Metabase Expression\nCODE:\n```\n[Sum of total] - [Previous period]\n```\n\n----------------------------------------\n\nTITLE: Basic Cypress Test Structure for Metabase\nDESCRIPTION: Example showing the basic structure of a Cypress test with describe and it blocks, representing a test for the Metabase homepage.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/e2e-tests.md#2025-04-23_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\ndescribe(\"homepage\", () => {\n  it(\"should load the homepage and...\", () => {\n    cy.visit(\"/metabase/url\");\n    // ...\n  });\n});\n```\n\n----------------------------------------\n\nTITLE: Creating Optional Text with Variables in Metabase Text Cards\nDESCRIPTION: A Markdown example demonstrating how to create conditional text in dashboard text cards that only displays when a filter value is selected.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/dashboards/introduction.md#2025-04-23_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n{% raw %}\n# Orders [[from {{state}}]\n{% endraw %}\n```\n\n----------------------------------------\n\nTITLE: Configuring MB_LDAP_GROUP_SYNC Environment Variable in Metabase\nDESCRIPTION: Enables or disables automatic synchronization of user group memberships based on LDAP group information when a user logs in via LDAP. Requires proper configuration of group base, filter, and mappings. Type: boolean. Default: `false`. Corresponds to `ldap-group-sync` in the configuration file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_32\n\nLANGUAGE: plaintext\nCODE:\n```\nMB_LDAP_GROUP_SYNC=false\n```\n\n----------------------------------------\n\nTITLE: Configuring MB_LDAP_GROUP_BASE Environment Variable in Metabase\nDESCRIPTION: Specifies the base DN within the LDAP directory where group searches should begin. This setting is recursively searched. It's not required for directories like Active Directory that provide a 'memberOf' overlay. Type: string. Default: `null`. Corresponds to `ldap-group-base` in the configuration file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_29\n\nLANGUAGE: plaintext\nCODE:\n```\nMB_LDAP_GROUP_BASE=null\n```\n\n----------------------------------------\n\nTITLE: New Method: Filtering Syncable Schemas in Clojure\nDESCRIPTION: The filtered-syncable-schemas method has been added to filter schemas that will be synced based on inclusion and exclusion patterns. It will eventually replace the syncable-schemas method.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/driver-changelog.md#2025-04-23_snippet_18\n\nLANGUAGE: clojure\nCODE:\n```\nmetabase.driver.sql-jdbc.sync.interface/filtered-syncable-schemas\n```\n\n----------------------------------------\n\nTITLE: Running Metabase Open Source Docker Container - Shell\nDESCRIPTION: This Docker command runs a detached Metabase container on port 3000, with the application database configured via an environment variable. It requires Docker and an external production-grade database accessible via the JDBC URI provided in 'MB_DB_CONNECTION_URI'. Input parameters: Port mapping, DB connection URI, container name. Output: Bootstraps a fresh Metabase instance. Replace placeholders with actual values before execution.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/upgrading-metabase.md#2025-04-23_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\ndocker run -d -p 3000:3000 -e MB_DB_CONNECTION_URI=\\\"jdbc:postgresql://<host>:5432/metabase?user=<username>&password=<password>\\\" --name metabase metabase/metabase:latest\n```\n\n----------------------------------------\n\nTITLE: Configuring MB_JWT_SHARED_SECRET Environment Variable in Metabase\nDESCRIPTION: Provides the shared secret string used to seed the private key for validating JWT messages. A hexadecimal-encoded 256-bit key (64 characters) is strongly recommended. Available only on Metabase Pro and Enterprise plans. Type: string. Default: `null`. Corresponds to `jwt-shared-secret` in the configuration file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_19\n\nLANGUAGE: plaintext\nCODE:\n```\nMB_JWT_SHARED_SECRET=null\n```\n\n----------------------------------------\n\nTITLE: Configuring MB_JWT_USER_PROVISIONING_ENABLED Environment Variable in Metabase\nDESCRIPTION: Controls whether Metabase automatically creates a new user account upon successful JWT sign-in if the user doesn't already exist. Available only on Metabase Pro and Enterprise plans. Type: boolean. Default: `true`. Corresponds to `jwt-user-provisioning-enabled` in the configuration file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_20\n\nLANGUAGE: plaintext\nCODE:\n```\nMB_JWT_USER_PROVISIONING_ENABLED=true\n```\n\n----------------------------------------\n\nTITLE: Running Metabase with External Plugins\nDESCRIPTION: Shows how to run Metabase Docker container with access to external plugins by mounting a host directory.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-docker.md#2025-04-23_snippet_18\n\nLANGUAGE: bash\nCODE:\n```\ndocker run -d -p 3000:3000 \\\n  --mount type=bind,source=/path/to/plugins,destination=/plugins \\\n  --name metabase metabase/metabase\n```\n\n----------------------------------------\n\nTITLE: Basic TypeScript Type Guard for String Type\nDESCRIPTION: A simple type guard function that checks if a value is a string. This demonstrates the basic structure of a type guard that returns a boolean based on the type check.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase-types/guards/readme.md#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction isString(value) {\n  return typeof value === \"string\";\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring MB_LDAP_PASSWORD Environment Variable in Metabase\nDESCRIPTION: Specifies the password for the user account defined in `MB_LDAP_BIND_DN`, used for binding to the LDAP server to perform user lookups. Type: string. Default: `null`. Corresponds to `ldap-password` in the configuration file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_34\n\nLANGUAGE: plaintext\nCODE:\n```\nMB_LDAP_PASSWORD=null\n```\n\n----------------------------------------\n\nTITLE: Naming Convention for Exported Entity Files - Bash\nDESCRIPTION: This code block demonstrates the naming convention for exported Metabase entity YAML files. Filenames begin with the 'entity_id' value followed by an underscore and a human-readable name, which aids in disambiguating entities with similar names. No special dependencies are required; these examples represent actual filenames one might find after a Metabase export.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/serialization.md#2025-04-23_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nr6vC_vLmo9zG6_r9sAuYG_products_by_week.yaml\nIA96oUzmUbYfNFl0GzhRj_accounts_model.yaml\nKUEGiWvoBFEc5oGQCEnPg_converted_customers.yaml\n```\n\n----------------------------------------\n\nTITLE: Using isNull in Metabase Logical Functions - Markdown\nDESCRIPTION: Details the isNull logical function in Metabase custom expressions, which returns true if the given column's value is null for a row. Useful for filtering or deriving boolean flags for missing values. Related to notNull and isEmpty.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_16\n\nLANGUAGE: Markdown\nCODE:\n```\nSyntax: `isNull(column)`\n\nExample: `isNull([Tax])` would return true if no value were present in the column for that row.\n\nRelated: [notNull](#notnull), [isEmpty](#isempty)\n```\n\n----------------------------------------\n\nTITLE: Exporting Metabase API Key as Environment Variable (Shell)\nDESCRIPTION: This shell command sets the METABASE_API_KEY environment variable to your Metabase API key, which is necessary for the JavaScript snippet to authenticate API requests. Run this before executing the Node.js code. Input is your valid API key; output is a processed shell environment variable available to subsequent commands in the same session. The key should be kept private.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/people-and-groups/api-keys.md#2025-04-23_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\nexport METABASE_API_KEY=\"YOUR_API_KEY\"\n```\n\n----------------------------------------\n\nTITLE: Setting up JWT Authentication API Route in Next.js Pages Router (TypeScript)\nDESCRIPTION: Defines a Next.js Pages Router API route handler (e.g., in `pages/api/sso/metabase.ts`) for Metabase JWT authentication. Similar to the App Router version, this handler retrieves Metabase credentials from environment variables, constructs a JWT payload with user details, signs it, generates the SSO URL, and redirects the user. Requires `jsonwebtoken` library.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/next-js.md#2025-04-23_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { sign } from \"jsonwebtoken\";\nimport type { NextApiRequest, NextApiResponse } from \"next\";\n```\n\nLANGUAGE: typescript\nCODE:\n```\nconst METABASE_URL = process.env.METABASE_URL!;\nconst METABASE_SECRET_KEY = process.env.METABASE_SECRET_KEY!;\n\nexport default function handler(req: NextApiRequest, res: NextApiResponse) {\n  const { redirect = \"/\" } = req.query;\n\n  // This should be replaced with your actual user data\n  const user = {\n    email: \"test@example.com\",\n    first_name: \"Test\",\n    last_name: \"User\",\n  };\n\n  const payload = {\n    email: user.email,\n    first_name: user.first_name,\n    last_name: user.last_name,\n    // Optional: specify which resources the user can access\n    // E.g. `resource: { dashboard: 1 }`\n    resource: {},\n    params: {},\n    exp: Math.round(Date.now() / 1000) + 10 * 60, // 10 minute expiration\n  };\n\n  const token = sign(payload, METABASE_SECRET_KEY);\n\n  const ssoUrl = `${METABASE_URL}/auth/sso?jwt=${token}&return_to=${encodeURIComponent(\n    Array.isArray(redirect) ? redirect[0] : redirect,\n  )}`;\n\n  res.redirect(ssoUrl);\n}\n```\n\n----------------------------------------\n\nTITLE: Pulling the Latest Enterprise Metabase Image using Podman (Shell)\nDESCRIPTION: This command uses Podman to fetch the latest version of the official Pro/Enterprise Metabase Docker image from Docker Hub. This is necessary for running the licensed versions of Metabase. Requires Podman to be installed.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-podman.md#2025-04-23_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\npodman pull docker.io/metabase/metabase-enterprise:latest\n```\n\n----------------------------------------\n\nTITLE: Configuring MB_JWT_ENABLED Environment Variable in Metabase\nDESCRIPTION: Enables or disables JWT Single Sign-On (SSO) authentication based on the `MB_JWT_*` variable settings. This is distinct from static embedding (`MB_EMBEDDING_SECRET_KEY`). Available only on Metabase Pro and Enterprise plans. Type: boolean. Default: `false`. Corresponds to `jwt-enabled` in the configuration file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_15\n\nLANGUAGE: plaintext\nCODE:\n```\nMB_JWT_ENABLED=false\n```\n\n----------------------------------------\n\nTITLE: Calculating Previous Year's Sum with Metabase Offset\nDESCRIPTION: Shows how to use `Offset` within a Metabase summarization step to get the `Sum([Total])` from the previous period (year, in this context, due to grouping by year) for Year-over-Year analysis. Assumes data is grouped by `Created At` (Year).\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/offset.md#2025-04-23_snippet_3\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nOffset(Sum([Total]), -1)\n```\n\n----------------------------------------\n\nTITLE: Starting the Mock JWT Server for Metabase Permissions in Shell\nDESCRIPTION: This shell command launches the mock server generated by the CLI, which is used to handle JWT authentication flows during development with Metabase's Pro/Enterprise features. The server code is placed by default in the './mock-server' directory and can be started after installing dependencies. It is necessary for simulating secure access and user sandboxing in local environments.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/quickstart-cli.md#2025-04-23_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\nnpm run start\n```\n\n----------------------------------------\n\nTITLE: MongoDB Atlas Connection String Example\nDESCRIPTION: Example of a MongoDB Atlas connection string with a placeholder for the database name, used to connect Metabase to an Atlas cluster.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/connections/mongodb.md#2025-04-23_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\nmongodb+srv://metabot:metapass@my-test-cluster.a5ej7.mongodb.net/DATABASE_NAME?retryWrites=true&w=majority&appName=my-test-cluster\n```\n\n----------------------------------------\n\nTITLE: Syntax for Hiding Filter Widgets in Metabase Static Embed URL\nDESCRIPTION: Illustrates the general syntax for hiding filter widgets from a static embed using a URL fragment identifier (`#hide_parameters=parameter_name`). Replace `parameter_name` with the name of the filter widget to hide. This unsigned parameter is added to the end of the iframe src URL.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/static-embedding-parameters.md#2025-04-23_snippet_4\n\nLANGUAGE: url\nCODE:\n```\nyour_embedding_url#hide_parameters=parameter_name\n```\n\n----------------------------------------\n\nTITLE: Installing JWT Library with npm\nDESCRIPTION: Command to install the jsonwebtoken library as a dependency for handling JWT token generation and verification.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/interactive-embedding-quick-start-guide.md#2025-04-23_snippet_6\n\nLANGUAGE: sh\nCODE:\n```\nnpm install jsonwebtoken --save\n```\n\n----------------------------------------\n\nTITLE: Setting JWT Group Mappings via Environment Variable (Bash)\nDESCRIPTION: This command sets the MB_JWT_GROUP_MAPPINGS environment variable to define mappings between JWT group names and Metabase group IDs. It uses a JSON string where keys are the JWT group names (e.g., 'extHR', 'extSales') and values are arrays containing the corresponding Metabase group IDs (e.g., [7], [3,4]). This provides an alternative method to configure group mappings outside the Metabase Admin UI.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/people-and-groups/authenticating-with-jwt.md#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nMB_JWT_GROUP_MAPPINGS='{\"extHR\":[7], \"extSales\":[3,4]}'\n```\n\n----------------------------------------\n\nTITLE: Running the Metabase Backend Server with Clojure\nDESCRIPTION: Starts the Metabase backend server using the Clojure command-line tools. The `-M:run` argument executes the `:run` alias defined in the project's `deps.edn` file. Keep this process running in a terminal tab.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/build.md#2025-04-23_snippet_13\n\nLANGUAGE: shell\nCODE:\n```\nclojure -M:run\n```\n\n----------------------------------------\n\nTITLE: Declaring React Function Components and Utility Functions - JavaScript\nDESCRIPTION: Demonstrates preferred and discouraged methods for defining React function components and utility functions. The snippet highlights the use of function declarations for top-level functions and React components, while also allowing concise arrow functions for simple operations. This promotes code consistency and readability. Dependencies: React.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/frontend.md#2025-04-23_snippet_7\n\nLANGUAGE: JavaScript\nCODE:\n```\n// YES:\nfunction MyComponent(props) {\n  return <div>...</div>;\n}\n// NO:\nconst MyComponent = props => {\n  return <div>...</div>;\n};\n// YES:\nconst double = n => n * 2;\n// ALSO OK:\nfunction double(n) {\n  return n * 2;\n}\n```\n\n----------------------------------------\n\nTITLE: Querying Metabase API Groups with curl (Shell)\nDESCRIPTION: This shell command illustrates how to retrieve a list of groups from the local Metabase API by sending a GET request with an API key header. It requires curl to be installed and an active Metabase instance running on http://localhost:3000. Replace YOUR_API_KEY with your valid API key; the request will return JSON with group data. No authentication prompt is shown, so API key management and safety are critical.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/people-and-groups/api-keys.md#2025-04-23_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\ncurl \\\n-H 'x-api-key: YOUR_API_KEY' \\\n-X GET 'http://localhost:3000/api/permissions/group'\n```\n\n----------------------------------------\n\nTITLE: Configuring MB_LDAP_GROUP_MEMBERSHIP_FILTER Environment Variable in Metabase\nDESCRIPTION: Defines the LDAP filter used to determine group membership for a user. The placeholders `{dn}` (user's Distinguished Name) and `{uid}` (user's UID) will be substituted during the lookup. Type: string. Default: `(member={dn})`. Corresponds to `ldap-group-membership-filter` in the configuration file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_31\n\nLANGUAGE: plaintext\nCODE:\n```\nMB_LDAP_GROUP_MEMBERSHIP_FILTER=(member={dn})\n```\n\n----------------------------------------\n\nTITLE: Pulling Latest Metabase Open Source Docker Image\nDESCRIPTION: Downloads the latest official Docker image for the Open Source edition of Metabase from Docker Hub. This command requires Docker to be installed and running.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-docker.md#2025-04-23_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\ndocker pull metabase/metabase:latest\n```\n\n----------------------------------------\n\nTITLE: Configuring MB_JWT_ATTRIBUTE_LASTNAME Environment Variable in Metabase\nDESCRIPTION: Specifies the key used to retrieve the user's last name from the JWT payload during JWT authentication. Available only on Metabase Pro and Enterprise plans. Type: string. Default: `last_name`. Corresponds to `jwt-attribute-lastname` in the configuration file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_14\n\nLANGUAGE: plaintext\nCODE:\n```\nMB_JWT_ATTRIBUTE_LASTNAME=last_name\n```\n\n----------------------------------------\n\nTITLE: Setting Up a PostgreSQL Database for Metabase Application Data - Bash\nDESCRIPTION: Creates a new PostgreSQL database named 'metabaseappdb', which will be used as the backing application database for Metabase in production. Requires PostgreSQL client utilities and permissions to create a database. No other input parameters; successful output is silent.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-the-metabase-jar-file.md#2025-04-23_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\ncreatedb metabaseappdb\n```\n\n----------------------------------------\n\nTITLE: Metabase Docker Compose Configuration with Secrets\nDESCRIPTION: A docker-compose.yml file that sets up Metabase and PostgreSQL containers using Docker Secrets for sensitive information.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-docker.md#2025-04-23_snippet_19\n\nLANGUAGE: yaml\nCODE:\n```\nservices:\n  metabase:\n    image: metabase/metabase:latest\n    container_name: metabase\n    hostname: metabase\n    volumes:\n      - /dev/urandom:/dev/random:ro\n    ports:\n      - 3000:3000\n    environment:\n      MB_DB_TYPE: postgres\n      MB_DB_DBNAME: metabase\n      MB_DB_PORT: 5432\n      MB_DB_USER_FILE: /run/secrets/db_user\n      MB_DB_PASS_FILE: /run/secrets/db_password\n      MB_DB_HOST: postgres\n    networks:\n      - metanet1\n    secrets:\n      - db_password\n      - db_user\n    healthcheck:\n      test: curl --fail -I http://localhost:3000/api/health || exit 1\n      interval: 15s\n      timeout: 5s\n      retries: 5\n  postgres:\n    image: postgres:latest\n    container_name: postgres\n    hostname: postgres\n    environment:\n      POSTGRES_USER_FILE: /run/secrets/db_user\n      POSTGRES_DB: metabase\n      POSTGRES_PASSWORD_FILE: /run/secrets/db_password\n    networks:\n      - metanet1\n    secrets:\n      - db_password\n      - db_user\nnetworks:\n  metanet1:\n    driver: bridge\nsecrets:\n  db_password:\n    file: db_password.txt\n  db_user:\n    file: db_user.txt\n```\n\n----------------------------------------\n\nTITLE: Requiring Test Extension Namespaces in Clojure\nDESCRIPTION: Code showing how to require the necessary namespaces for implementing driver test extensions, including the core test extension interface and SQL-specific extensions.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/drivers/driver-tests.md#2025-04-23_snippet_2\n\nLANGUAGE: clojure\nCODE:\n```\n(require '[metabase.test.data.interface :as tx]) ; tx = test extensions\n(require '[metabase.test.data.sql :as sql.tx])   ; sql test extensions\n(require '[metabase.test.data.sql-jdbc :as sql-jdbc.tx])\n```\n\n----------------------------------------\n\nTITLE: Configuring MB_JWT_ATTRIBUTE_FIRSTNAME Environment Variable in Metabase\nDESCRIPTION: Specifies the key used to retrieve the user's first name from the JWT payload during JWT authentication. Available only on Metabase Pro and Enterprise plans. Type: string. Default: `first_name`. Corresponds to `jwt-attribute-firstname` in the configuration file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_12\n\nLANGUAGE: plaintext\nCODE:\n```\nMB_JWT_ATTRIBUTE_FIRSTNAME=first_name\n```\n\n----------------------------------------\n\nTITLE: Static URL Generation Example in Metabase\nDESCRIPTION: Example of a resolved URL after parameter substitution, showing how the template gets processed with actual values.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/visualizations/table.md#2025-04-23_snippet_1\n\nLANGUAGE: html\nCODE:\n```\nhttps://www.example.com/widget\n```\n\n----------------------------------------\n\nTITLE: Querying Data for a World Region Map in SQL\nDESCRIPTION: Example SQL query to retrieve data suitable for creating a world region map, with two-letter country codes and a metric.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/visualizations/map.md#2025-04-23_snippet_2\n\nLANGUAGE: sql\nCODE:\n```\nSELECT \n  country_code,\n  SUM(metric_value) AS total_metric\nFROM country_data\nGROUP BY country_code\n```\n\n----------------------------------------\n\nTITLE: Exporting Metabase Data via API\nDESCRIPTION: Curl command to export Metabase data using the API. This request will download the files as a GZIP-compressed Tar file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/serialization.md#2025-04-23_snippet_15\n\nLANGUAGE: sh\nCODE:\n```\ncurl \\\n  -H 'x-api-key: YOUR_API_KEY' \\\n  -X POST 'http://your-metabase-url/api/ee/serialization/export' \\\n  -o metabase_data.tgz\n```\n\n----------------------------------------\n\nTITLE: Specifying Schemas for Sync and Scan in Metabase Databricks Connection\nDESCRIPTION: This code snippet demonstrates how to specify schemas for syncing and scanning in a Metabase Databricks connection. It shows a comma-separated list of schema names, which can be used with the 'Only these...' or 'All except...' options to include or exclude specific schemas.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/connections/databricks.md#2025-04-23_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nfoo,bar,baz\n```\n\n----------------------------------------\n\nTITLE: Incorrect SQL Query with Optional Variable (Will Cause Error)\nDESCRIPTION: An example of an incorrectly structured optional clause that will cause an error. This demonstrates what not to do - the WHERE keyword should be included within the optional brackets to ensure valid SQL syntax when the clause is omitted.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/native-editor/sql-parameters.md#2025-04-23_snippet_11\n\nLANGUAGE: sql\nCODE:\n```\n-- this will cause an error:\nSELECT\n  count(*)\nFROM\n  products\nWHERE\n  [[category = {{cat}}]]\n```\n\n----------------------------------------\n\nTITLE: Configuring Password Complexity using Environment Variables - Shell\nDESCRIPTION: This snippet demonstrates how to set environment variables in a shell to adjust Metabase password complexity and minimum length requirements. 'MB_PASSWORD_COMPLEXITY' accepts values like 'weak', 'normal', or 'strong', impacting the criteria for all user passwords; 'MB_PASSWORD_LENGTH' sets the required minimum number of characters. These settings can be used alone or together, and should be configured before starting Metabase, such as in a Dockerfile, shell session, or system service manager.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/people-and-groups/changing-password-complexity.md#2025-04-23_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nexport MB_PASSWORD_COMPLEXITY=strong\nexport MB_PASSWORD_LENGTH=10\n```\n\n----------------------------------------\n\nTITLE: Enabling JWT Group Synchronization via Environment Variable (Bash)\nDESCRIPTION: This command sets the MB_JWT_GROUP_SYNC environment variable to 'true', enabling the synchronization of user group memberships based on the groups provided in the JWT payload upon login. This requires group mappings to be configured either through the UI or the MB_JWT_GROUP_MAPPINGS environment variable. Setting this variable provides an alternative to toggling the 'Synchronize Group Memberships' setting in the Metabase Admin UI.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/people-and-groups/authenticating-with-jwt.md#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nMB_JWT_GROUP_SYNC=true\n```\n\n----------------------------------------\n\nTITLE: JVM Memory Allocation Command\nDESCRIPTION: Command to allocate more memory to the JVM heap when running Metabase JAR file. The -Xmx flag sets the maximum heap size to 2GB.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/running.md#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\njava -Xmx2g -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: Sending Location Change Messages to Embedded Metabase - postMessage Protocol - JSON\nDESCRIPTION: This snippet shows how the host application can instruct the embedded Metabase iframe to navigate to a specific page or state by sending a 'location' message using the postMessage protocol. The LOCATION_OBJECT_OR_URL can be a string with the URL or a location object. Requires the postMessage API and an embedded Metabase iframe capable of receiving such messages.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/interactive-embedding.md#2025-04-23_snippet_13\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"metabase\": {\n    \"type\": \"location\",\n    \"location\": LOCATION_OBJECT_OR_URL\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring MB_JWT_IDENTITY_PROVIDER_URI Environment Variable in Metabase\nDESCRIPTION: Specifies the URL for the JWT-based login page. This is optional if JWT SSO is only used with the embedded analytics SDK. Available only on Metabase Pro and Enterprise plans. Type: string. Default: `null`. Corresponds to `jwt-identity-provider-uri` in the configuration file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_18\n\nLANGUAGE: plaintext\nCODE:\n```\nMB_JWT_IDENTITY_PROVIDER_URI=null\n```\n\n----------------------------------------\n\nTITLE: Setting Up Metabase Plugin Directory Structure\nDESCRIPTION: Shows the file path structure for installing a Metabase driver plugin. The plugin JAR file should be placed in the plugins directory that exists in the same directory as the metabase.jar file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/drivers/basics.md#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n/Users/cam/metabase/metabase.jar\n/Users/cam/metabase/plugins/my-plugin.jar\n```\n\n----------------------------------------\n\nTITLE: Configuring MB_LDAP_BIND_DN Environment Variable in Metabase\nDESCRIPTION: Specifies the Distinguished Name (DN) of the user account that Metabase will use to bind to the LDAP server for looking up information about other users. Set to `null` if anonymous binding or user-specific binding is used. Type: string. Default: `null`. Corresponds to `ldap-bind-dn` in the configuration file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_27\n\nLANGUAGE: plaintext\nCODE:\n```\nMB_LDAP_BIND_DN=null\n```\n\n----------------------------------------\n\nTITLE: Defining Metabase SCIM Endpoint URL Structure\nDESCRIPTION: This snippet illustrates the format for the Metabase SCIM endpoint URL. Users need to replace 'metabase.example.com' with their actual Metabase instance hostname. This URL is required by the identity provider (e.g., Okta, Entra ID) to establish SCIM communication for user provisioning.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/people-and-groups/user-provisioning.md#2025-04-23_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nhttps://metabase.example.com/api/ee/scim/v2\n```\n\n----------------------------------------\n\nTITLE: Subtracting Minutes from Datetimes using pandas and timedelta - Python - Python\nDESCRIPTION: This Python code assigns a new column 'Depart At' to a pandas DataFrame by subtracting 30 minutes from the 'Arrive By' datetime column. It utilizes the datetime and timedelta modules from Python and assumes the DataFrame df is already populated. Output is a new column with updated datetimes, suitable for time-series analysis or interval computations.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/datetimesubtract.md#2025-04-23_snippet_6\n\nLANGUAGE: Python\nCODE:\n```\ndf['Depart At'] = df['Arrive By'] - datetime.timedelta(minutes=30)\n```\n\n----------------------------------------\n\nTITLE: Configuring MB_LDAP_PORT Environment Variable in Metabase\nDESCRIPTION: Specifies the port number for connecting to the LDAP server. Common ports are 389 for standard LDAP and 636 for LDAPS (LDAP over SSL). Type: integer. Default: `389`. Corresponds to `ldap-port` in the configuration file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_35\n\nLANGUAGE: plaintext\nCODE:\n```\nMB_LDAP_PORT=389\n```\n\n----------------------------------------\n\nTITLE: Pulling Latest Metabase Pro/Enterprise Docker Image\nDESCRIPTION: Downloads the latest official Docker image for the Pro or Enterprise edition of Metabase from Docker Hub. Requires Docker to be installed and running, and is intended for users with a valid license token.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-docker.md#2025-04-23_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\ndocker pull metabase/metabase-enterprise:latest\n```\n\n----------------------------------------\n\nTITLE: Enabling Metabase Service at Boot - Bash\nDESCRIPTION: Enables the systemd unit so Metabase will automatically start at system boot. Requires sudo. Input: none; Output: Metabase service registered for autostart.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-debian.md#2025-04-23_snippet_10\n\nLANGUAGE: bash\nCODE:\n```\nsudo systemctl enable metabase.service\n```\n\n----------------------------------------\n\nTITLE: Pulling the Latest Open Source Metabase Image using Podman (Shell)\nDESCRIPTION: This command uses Podman to fetch the latest version of the official Open Source Metabase Docker image from Docker Hub. This step is necessary before running the Metabase container. Requires Podman to be installed and running.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-podman.md#2025-04-23_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\npodman pull docker.io/metabase/metabase:latest\n```\n\n----------------------------------------\n\nTITLE: Running Metabase with External PostgreSQL DB using Podman (Shell)\nDESCRIPTION: This command starts the Metabase container configured via environment variables (`-e`) to use an external PostgreSQL database for application data storage. It specifies the database type (`MB_DB_TYPE`), name (`MB_DB_DBNAME`), port (`MB_DB_PORT`), user (`MB_DB_USER`), password (`MB_DB_PASS`), and host (`MB_DB_HOST`). This setup is recommended for production deployments. Requires Podman, the Metabase image, and network access to the specified PostgreSQL database host from within the container.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-podman.md#2025-04-23_snippet_9\n\nLANGUAGE: shell\nCODE:\n```\npodman run -d -p 3000:3000 \\\n  -e \"MB_DB_TYPE=postgres\" \\\n  -e \"MB_DB_DBNAME=metabaseappdb\" \\\n  -e \"MB_DB_PORT=5432\" \\\n  -e \"MB_DB_USER=name\" \\\n  -e \"MB_DB_PASS=password\" \\\n  -e \"MB_DB_HOST=my-database-host\" \\\n   --name metabase metabase/metabase\n```\n\n----------------------------------------\n\nTITLE: Implementing Connection Details Method for MySQL Driver Tests\nDESCRIPTION: Example implementation of the tx/dbdef->connection-details method for MySQL, which provides the database connection details needed for tests to connect to the test database.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/drivers/driver-tests.md#2025-04-23_snippet_8\n\nLANGUAGE: clojure\nCODE:\n```\n(defmethod tx/dbdef->connection-details :mysql [_ context {:keys [database-name]}]\n  (merge\n   {:host     (tx/db-test-env-var :mysql :host \"localhost\")\n    :port     (tx/db-test-env-var :mysql :port 3306)\n    :user     (tx/db-test-env-var :mysql :user \"root\")\n    ;; :timezone :America/Los_Angeles\n    :serverTimezone \"UTC\"}\n   (when-let [password (tx/db-test-env-var :mysql :password)]\n     {:password password})\n   (when (= context :db)\n     {:db database-name})))\n```\n\n----------------------------------------\n\nTITLE: Using Offset Function in Metabase Expressions\nDESCRIPTION: The Offset function returns the value of an expression in a different row. It can only be used in the query builder's Summarize step and is not available for MySQL/MariaDB, MongoDB, and Druid.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_73\n\nLANGUAGE: markdown\nCODE:\n```\nSyntax: `Offset(expression, rowOffset)`\n\nThe `expression` is the value to get from a different row.\n\nThe `rowOffset` is the number relative to the current row. For example, `-1` for the previous row, or `1` for the next row.\n\nExample: `Offset(Sum([Total]), -1)` would get the `Sum([Total])` value from the previous row.\n```\n\n----------------------------------------\n\nTITLE: Building All Metabase Drivers with Clojure CLI\nDESCRIPTION: Commands for building all Metabase drivers using Clojure CLI tools. The command can be run with an optional edition parameter to build enterprise edition drivers.\nSOURCE: https://github.com/metabase/metabase/blob/master/bin/build-drivers.md#2025-04-23_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nclojure -X:build:drivers:build/drivers\n\n# or\n\nclojure -X:build:drivers:build/drivers :edition :ee\n\n# or\n\n./bin/build-drivers.sh\n```\n\n----------------------------------------\n\nTITLE: Metabase Expression Equivalent to Spreadsheet Date Addition\nDESCRIPTION: This Metabase custom expression shows the equivalent operation to adding days to a date column in a spreadsheet (specifically, adding 14 days to the 'Opened On' column).\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/datetimeadd.md#2025-04-23_snippet_10\n\nLANGUAGE: plaintext\nCODE:\n```\ndatetimeAdd([Opened On], 14, \"day\")\n```\n\n----------------------------------------\n\nTITLE: Exporting Contents of a Metabase Instance with CLI - Bash\nDESCRIPTION: This shell command illustrates how to export the entire contents of a Metabase instance using the metabase.jar via Java. The '--add-opens' argument enables Java module introspection, while 'export dir_name' directs Metabase to serialize its contents into a specified directory. Requires Java and the Metabase JAR; run this command from the directory containing the JAR file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/serialization.md#2025-04-23_snippet_8\n\nLANGUAGE: bash\nCODE:\n```\njava --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar export dir_name\n```\n\n----------------------------------------\n\nTITLE: Example Metabase Config File with Settings\nDESCRIPTION: A sample YAML configuration showing how to specify settings in the config.yml file, including email configuration and database synchronization options.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/config-file.md#2025-04-23_snippet_10\n\nLANGUAGE: yml\nCODE:\n```\nversion: 1\nconfig:\n  settings:\n    config-from-file-sync-databases: false\n    email-from-name: Stampy von Mails-a-lot\n  databases:\n    - name: my-database\n      engine: h2\n      details: ...\n```\n\n----------------------------------------\n\nTITLE: Disabling Emoji in Metabase Logs\nDESCRIPTION: Bash commands to disable emoji characters in Metabase logs by setting an environment variable and running Metabase with additional Java options.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/log-configuration.md#2025-04-23_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nexport MB_EMOJI_IN_LOGS=\"false\"\njava --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: Specifying SAML Single Logout (SLO) Endpoint in Metabase (plaintext)\nDESCRIPTION: This snippet provides an example SLO endpoint URL for Metabase when configuring your IdP. The URL should be composed of your Metabase site domain plus '/auth/sso/handle_slo'. It is used for SAML SLO POST binding to ensure user sessions are properly terminated in Metabase following IdP-initiated logouts.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/people-and-groups/authenticating-with-saml.md#2025-04-23_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\nhttps://metabase.example.com/auth/sso/handle_slo\n```\n\n----------------------------------------\n\nTITLE: Cloning the Metabase Git Repository\nDESCRIPTION: Uses Git to clone the official Metabase repository from GitHub into the current directory. This downloads the entire source code and project history.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/build.md#2025-04-23_snippet_7\n\nLANGUAGE: shell\nCODE:\n```\ngit clone https://github.com/metabase/metabase\n```\n\n----------------------------------------\n\nTITLE: Setting Default Values for Multiple Filters in Metabase Embed URL\nDESCRIPTION: Shows how to set default values for multiple distinct filter widgets in a static embed URL by separating `key=value` pairs with ampersands (`&`). This example sets 'breakfast' to 'Scrambled_eggs' and 'lunch' to 'Grilled_cheese'. These are unsigned parameters added to the iframe src.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/static-embedding-parameters.md#2025-04-23_snippet_2\n\nLANGUAGE: url\nCODE:\n```\nyour_embedding_url?breakfast=Scrambled_eggs&lunch=Grilled_cheese\n```\n\n----------------------------------------\n\nTITLE: Starting the Sample Application Server (Shell)\nDESCRIPTION: Runs the start script defined in the server's `package.json` (usually `node index.js` or similar), launching the backend Node.js server. This server handles JWT token signing for authenticating embedding requests to Metabase. This command should be run within the `server` directory after installing dependencies.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/quickstart-with-sample-app.md#2025-04-23_snippet_10\n\nLANGUAGE: sh\nCODE:\n```\nnpm start\n```\n\n----------------------------------------\n\nTITLE: Getting Current Timestamp using now Function in Metabase Expressions\nDESCRIPTION: Returns the current date and time based on the 'Report Timezone' setting configured in the Metabase instance. This function takes no arguments.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_62\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nnow()\n```\n\n----------------------------------------\n\nTITLE: Running Metabase JAR with Required JVM Arguments - Java Bash\nDESCRIPTION: Runs the Metabase standalone JAR using Java and a necessary JVM option for full compatibility. This command launches the Metabase server in the current directory, provided a compatible Java Runtime Environment (JRE) is installed and a metabase.jar file is present. The `--add-opens` flag is required for Java 17+ to allow reflective access to certain Java internals, which Metabase needs for some operations. Expected output is Metabase logs appearing in the terminal, and application startup on port 3000. There are no input parameters unless specified by environment variables or command-line options.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-the-metabase-jar-file.md#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\njava --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: Exporting Specific Collections Using CLI Options - Bash\nDESCRIPTION: This bash command demonstrates exporting only specified Metabase collections by passing their IDs using the '--collection' (or '-c') option. Multiple IDs can be separated by commas, enabling selective export. The command assumes you have the correct collection IDs as obtained from Metabase URLs and have Java and metabase.jar accessible.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/serialization.md#2025-04-23_snippet_10\n\nLANGUAGE: bash\nCODE:\n```\njava --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar export export_name --collection 1,2,3\n```\n\n----------------------------------------\n\nTITLE: Registering Test Extensions for Different Driver Types\nDESCRIPTION: Shows how to register test extensions for different types of drivers, including non-SQL drivers, non-JDBC SQL drivers, and JDBC SQL drivers, using the appropriate registration function.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/drivers/driver-tests.md#2025-04-23_snippet_3\n\nLANGUAGE: clojure\nCODE:\n```\n# Non-SQL drivers\n(tx/add-test-extensions! :mongo)\n\n# non-JDBC SQL\n(sql/add-test-extensions! :bigquery)\n\n# JDBC SQL\n(sql-jdbc.tx/add-test-extensions! :mysql)\n```\n\n----------------------------------------\n\nTITLE: Configuring MB_LDAP_ATTRIBUTE_EMAIL Environment Variable in Metabase\nDESCRIPTION: Specifies the LDAP attribute name used to retrieve the user's email address during LDAP authentication. Common values are 'mail', 'email', or 'userPrincipalName'. Type: string. Default: `mail`. Corresponds to `ldap-attribute-email` in the configuration file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_24\n\nLANGUAGE: plaintext\nCODE:\n```\nMB_LDAP_ATTRIBUTE_EMAIL=mail\n```\n\n----------------------------------------\n\nTITLE: Configuring MB_HELP_LINK Environment Variable in Metabase\nDESCRIPTION: Controls the whitelabeling of the help link. Available only on Metabase Pro and Enterprise plans. Type: keyword. Default: `:metabase`. Valid values: `:metabase`, `:hidden`, `:custom`. If `:custom`, uses URL from `MB_HELP_LINK_CUSTOM_DESTINATION`. Corresponds to `help-link` in the configuration file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_7\n\nLANGUAGE: plaintext\nCODE:\n```\nMB_HELP_LINK=:metabase\n```\n\n----------------------------------------\n\nTITLE: Configuring MB_LDAP_SECURITY Environment Variable in Metabase\nDESCRIPTION: Defines the security protocol to use when connecting to the LDAP server. Valid options are typically `:none` (plaintext), `:ssl` (LDAPS), or `:tls` (StartTLS). Type: keyword. Default: `:none`. Corresponds to `ldap-security` in the configuration file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_36\n\nLANGUAGE: plaintext\nCODE:\n```\nMB_LDAP_SECURITY=:none\n```\n\n----------------------------------------\n\nTITLE: Setting Java Timezone in Metabase Container\nDESCRIPTION: Starts a Metabase container while setting the Java timezone using the `JAVA_TIMEZONE` environment variable (`-e`). This ensures reports and internal Metabase operations use the specified timezone (`US/Pacific` in this example).\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-docker.md#2025-04-23_snippet_12\n\nLANGUAGE: shell\nCODE:\n```\ndocker run -d -p 3000:3000 \\\n  -e \"JAVA_TIMEZONE=US/Pacific\" \\\n  --name metabase metabase/metabase\n```\n\n----------------------------------------\n\nTITLE: Running Metabase Open Source Container (Custom Port)\nDESCRIPTION: Starts a Metabase Open Source container in detached mode (`-d`), maps the host's port 12345 to the container's port 3000 (`-p 12345:3000`), and names the container 'metabase'. This allows accessing Metabase on a different port (`http://localhost:12345`) if the default port 3000 is unavailable.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-docker.md#2025-04-23_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\ndocker run -d -p 12345:3000 --name metabase metabase/metabase\n```\n\n----------------------------------------\n\nTITLE: Starting maildev Docker Container for SMTP Testing (Shell)\nDESCRIPTION: Runs a detached (`-d`) Docker container using the `maildev/maildev:latest` image (though the text mentions `maildev/maildev:2.1.0` is used). It maps host port 1080 to container port 1080 (web UI) and host port 1025 to container port 1025 (SMTP server), making the maildev service accessible for local development testing involving email. This is useful when manually setting up the environment for tests that depend on email functionality.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/e2e-tests.md#2025-04-23_snippet_8\n\nLANGUAGE: sh\nCODE:\n```\ndocker run -d -p 1080:1080 -p 1025:1025 maildev/maildev:latest\n```\n\n----------------------------------------\n\nTITLE: Running Metabase JAR With Environment Variables for Production - Bash\nDESCRIPTION: Runs the Metabase JAR while the process inherits environment variables that configure the PostgreSQL database connection. Ensures that Metabase starts up in production mode and connects to a persistent, external database. Must be executed only after properly setting the required environment variables, and in a directory containing metabase.jar. Output will stream startup logs to the terminal.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-the-metabase-jar-file.md#2025-04-23_snippet_8\n\nLANGUAGE: bash\nCODE:\n```\njava --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: Using PostgreSQL-specific integer() Function in Metabase\nDESCRIPTION: The integer function converts a string to an integer value. Only available for PostgreSQL databases and requires that the string evaluates to a valid integer.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_35\n\nLANGUAGE: sql\nCODE:\n```\ninteger(\"123\")\n```\n\n----------------------------------------\n\nTITLE: Implementing the display-name multimethod for a Metabase driver\nDESCRIPTION: Defines the display name that will be shown in the Metabase UI for the FoxPro '98 driver. This multimethod dispatches on the driver's keyword identifier :foxpro98.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/drivers/multimethods.md#2025-04-23_snippet_1\n\nLANGUAGE: clojure\nCODE:\n```\n(defmethod driver/display-name :foxpro98 [_]\n  \"Visual FoxPro '98\")\n```\n\n----------------------------------------\n\nTITLE: JDBC Connection String Options Format\nDESCRIPTION: Format for adding additional options to the PostgreSQL JDBC connection string using percent-encoding.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/connections/postgresql.md#2025-04-23_snippet_2\n\nLANGUAGE: text\nCODE:\n```\noptions=-c%20key=value\n```\n\n----------------------------------------\n\nTITLE: Referencing Database by Name in YAML Exports - YAML\nDESCRIPTION: This snippet shows examples of serialized YAML keys that reference a database by its name, rather than an Entity ID. 'database_id' and the 'database' field within 'dataset_query' both must match the name of the database as known in Metabase, not its connection details. Required for item-to-database mapping in exported/imported YAML.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/serialization.md#2025-04-23_snippet_6\n\nLANGUAGE: yaml\nCODE:\n```\ndatabase_id: Sample Database\n---\ndataset_query:\n  database: Sample Database\n```\n\n----------------------------------------\n\nTITLE: Installing Dependencies Including Drivers\nDESCRIPTION: Command to install all dependencies for Metabase including those for database drivers using multiple Clojure aliases.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/devenv.md#2025-04-23_snippet_16\n\nLANGUAGE: sh\nCODE:\n```\n# Install dependencies, including for drivers\nclojure -P -X:dev:ci:drivers:drivers-dev\n```\n\n----------------------------------------\n\nTITLE: Checking if Test Dataset is Already Loaded\nDESCRIPTION: Method to check if a test dataset has already been loaded. JDBC-based drivers have a default implementation that checks whether connection to the database is possible.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/driver-changelog.md#2025-04-23_snippet_7\n\nLANGUAGE: clojure\nCODE:\n```\nmetabase.test.data.interface/dataset-already-loaded?\n```\n\n----------------------------------------\n\nTITLE: Building the Metabase Uberjar in a Docker Container\nDESCRIPTION: Builds the Metabase Uberjar within a Docker container, avoiding the need to install build dependencies (Java, Clojure, Node.js) directly on the host machine. Requires Docker with BuildKit enabled. The resulting JAR file is output to `./container-output/app/metabase.jar` on the host.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/build.md#2025-04-23_snippet_16\n\nLANGUAGE: shell\nCODE:\n```\nDOCKER_BUILDKIT=1 docker build --output container-output/ .\n```\n\n----------------------------------------\n\nTITLE: Filtering Data with Standard SQL WHERE Clause\nDESCRIPTION: Provides a basic example of a standard SQL WHERE clause used to filter rows in a table by matching a column to a specific, fixed value. This serves as a baseline comparison before introducing parameterized queries for dynamic filtering in Metabase sandboxes.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/permissions/data-sandboxes.md#2025-04-23_snippet_0\n\nLANGUAGE: sql\nCODE:\n```\nWHERE column_name = column_value\n```\n\n----------------------------------------\n\nTITLE: Configuring MB_LDAP_SYNC_USER_ATTRIBUTES Environment Variable in Metabase\nDESCRIPTION: Controls whether Metabase should update user attributes (like first name, last name, email) based on LDAP data each time a user logs in via LDAP. Type: boolean. Default: `true`. Corresponds to `ldap-sync-user-attributes` in the configuration file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_37\n\nLANGUAGE: plaintext\nCODE:\n```\nMB_LDAP_SYNC_USER_ATTRIBUTES=true\n```\n\n----------------------------------------\n\nTITLE: Navigating to Client Directory (Shell)\nDESCRIPTION: Changes the current working directory in a separate terminal session to the `client` subdirectory within the sample application's root folder. This step is necessary before running commands specific to the frontend React application, such as installing its dependencies or starting the development server.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/quickstart-with-sample-app.md#2025-04-23_snippet_11\n\nLANGUAGE: sh\nCODE:\n```\ncd client\n```\n\n----------------------------------------\n\nTITLE: Using Max in Metabase Custom Expressions - Markdown\nDESCRIPTION: Describes the method for fetching the maximum value in a column via the Max expression in Metabase formulas. Requires a single column as input. Returns the highest value among all rows for the specified column.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_4\n\nLANGUAGE: Markdown\nCODE:\n```\nSyntax: `Max(column)`\n\nExample: `Max([Age])` would return the oldest age found across all values in the `Age` column.\n\nRelated: [Min](#min), [Average](#average), [Median](#median).\n```\n\n----------------------------------------\n\nTITLE: Sending a Card Notification Synchronously in Clojure\nDESCRIPTION: This Clojure code demonstrates creating and sending a card-based notification using Metabase's notification system and test utilities. It defines a notification associated with a card query, triggered by a cron schedule, and configured with two handlers: one for Slack (sending to #general) and one for Email (sending to user :crowberto). The `notification/send-notification!` function is called with `:notification/sync? true` to send the notification immediately. Requires `metabase.notification.test-util` and `metabase.notification.core` namespaces.\nSOURCE: https://github.com/metabase/metabase/blob/master/src/metabase/notification/README.md#2025-04-23_snippet_0\n\nLANGUAGE: clojure\nCODE:\n```\n(require '[metabase.notification.test-util :as notification.tu])\n(require '[metabase.notification.core :as notification])\n\n(notification.tu/with-card-notification\n  [notification {:card          {:dataset_query (mt/mbql-query users)}\n                 :subscriptions [{:type          :notification-subscription/cron\n                                  :cron_schedule \"0 0 0 * * ?\"}]\n                 :handlers      [{:channel_type :channel/slack\n                                  :recipients   [{:type     :notification-recipient/raw-value\n                                                  :details  {:value \"#general\"}}]}\n                                 {:channel_type :channel/email\n                                  :recipients   [{:type    :notification-recipient/user\n                                                  :user_id (mt/user->id :crowberto)}]}]}]\n  (notification/send-notification! notification :notification/sync? true))\n```\n\n----------------------------------------\n\nTITLE: Using Comparison Function in() in Metabase\nDESCRIPTION: The in function returns true if the first value equals any of the subsequent values. It takes a column or value to check, followed by one or more values to compare against.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_33\n\nLANGUAGE: sql\nCODE:\n```\nin(value1, value2, ...)\n```\n\n----------------------------------------\n\nTITLE: Using Constants Over Magic Numbers or Strings - JavaScript\nDESCRIPTION: Demonstrates preferred practice of declaring fixed values as constants and using them in the code instead of hardcoded 'magic' numbers or strings. Enhances maintainability by centralizing modifications and improving code semantics.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/frontend.md#2025-04-23_snippet_14\n\nLANGUAGE: JavaScript\nCODE:\n```\n// don't do this\nconst options = _.times(10, () => ...);\n\n// do this in a constants file\nexport const MAX_NUM_OPTIONS = 10;\nconst options = _.times(MAX_NUM_OPTIONS,  () => ...);\n```\n\n----------------------------------------\n\nTITLE: Checking In-Product Documentation Links\nDESCRIPTION: Command to verify that in-product documentation links point to actual documents. This focused check helps ensure a better user experience by preventing broken internal documentation references.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/docs.md#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nyarn run lint-docs-links\n```\n\n----------------------------------------\n\nTITLE: Calculating Time Difference in Months using Python Pandas and NumPy\nDESCRIPTION: This Python code snippet calculates the time difference in months between 'Aging End' and 'Aging Start' columns within a pandas DataFrame `df`. It performs direct subtraction of the datetime columns and then divides the resulting timedelta by a NumPy `timedelta64` object representing one month ('M') to get the difference in whole months. The result is assigned to a new column 'Mature Age (Months)'. Requires pandas and numpy libraries.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/datetimediff.md#2025-04-23_snippet_7\n\nLANGUAGE: python\nCODE:\n```\ndf['Mature Age (Months)'] = (df['Aging End'] - df['Aging Start']) / np.timedelta64(1, 'M')\n```\n\n----------------------------------------\n\nTITLE: Implementing Conditional Logic with numpy select() in Python\nDESCRIPTION: This Python code uses numpy's select() function to determine the Sighting Type based on conditions from the 'has_wings' and 'has_face' columns in a dataframe. It's equivalent to the Metabase case expression for the same logic.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/case.md#2025-04-23_snippet_8\n\nLANGUAGE: python\nCODE:\n```\nconditions = [\n    (df[\"has_wings\"] == True) & (df[\"has_face\"] == True),\n    (df[\"has_wings\"] == True) & (df[\"has_face\"] == False),\n    (df[\"has_wings\"] == False) & (df[\"has_face\"] == True)]\n\noutputs = [\"Bird\", \"Plane\", \"Superman\"]\n\ndf[\"Sighting Type\"] = np.select(conditions, outputs, default=\"Unknown\")\n```\n\n----------------------------------------\n\nTITLE: Metabase Expression Equivalent to Spreadsheet Formula\nDESCRIPTION: This Metabase custom expression is shown as the equivalent to the preceding Spreadsheet `DATEDIF` formula. It calculates the difference between the 'Aging Start' and 'Aging End' columns in whole months using the `datetimeDiff` function.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/datetimediff.md#2025-04-23_snippet_6\n\nLANGUAGE: plaintext\nCODE:\n```\ndatetimeDiff([Aging Start], [Aging End], \"month\")\n```\n\n----------------------------------------\n\nTITLE: Configuring MB_JWT_GROUP_MAPPINGS Environment Variable in Metabase\nDESCRIPTION: Specifies a JSON object defining mappings between JWT groups and Metabase group IDs. Keys are JWT group names, and values are lists of corresponding Metabase group IDs. Available only on Metabase Pro and Enterprise plans. Type: json. Default: `{}`. Corresponds to `jwt-group-mappings` in the configuration file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_16\n\nLANGUAGE: plaintext\nCODE:\n```\nMB_JWT_GROUP_MAPPINGS={}\n```\n\n----------------------------------------\n\nTITLE: Using :inline to Prevent Parameterization in Honey SQL 2\nDESCRIPTION: Shows how to use the :inline directive in Honey SQL 2 to force values to be included directly in the SQL rather than being parameterized, which is important for GROUP BY expressions.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/driver-changelog.md#2025-04-23_snippet_16\n\nLANGUAGE: clojure\nCODE:\n```\n{:select [1]}  ;; becomes \"SELECT ?\"\n{:select [[[:inline 1]]]}} ;; becomes \"SELECT 1\"\n```\n\n----------------------------------------\n\nTITLE: Defining Docker Environment Variables for Metabase JMX (Env File)\nDESCRIPTION: Content for a Docker environment file (`metabase-vars.env`) defining the `JAVA_OPTS` environment variable. These options configure the JVM running inside the Metabase container for remote JMX monitoring, setting the JMX port, disabling authentication/SSL, allowing remote connections, and specifying the container's hostname. This file is intended for use with `docker run --env-file`. The `<Metabase Hostname>` placeholder needs replacement.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/monitoring-metabase.md#2025-04-23_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\nJAVA_OPTS=-Dcom.sun.management.jmxremote.port=1099 -Dcom.sun.management.jmxremote.rmi.port=1099 -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.local.only=false -Djava.rmi.server.hostname=<Metabase Hostname>\n```\n\n----------------------------------------\n\nTITLE: Changing Into the Metabase Working Directory - Bash\nDESCRIPTION: Changes the working directory to ~/metabase, which is necessary before running the Metabase JAR to ensure all generated config and logs are in the intended location. Assumes the directory was previously created. Produces no output except in the case of missing directory.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-the-metabase-jar-file.md#2025-04-23_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\ncd ~/metabase\n```\n\n----------------------------------------\n\nTITLE: Sample nginx Configuration to Proxy to Metabase - nginx\nDESCRIPTION: Provides a minimal nginx server block to route HTTP requests from port 80 to a local Metabase instance on port 3000. Place this configuration inside nginx.conf. Dependency: nginx must be installed. Parameters: server_name and proxy_pass target should match your environment. Input: visitor HTTP requests; Output: requests proxied to Metabase backend.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-debian.md#2025-04-23_snippet_8\n\nLANGUAGE: nginx\nCODE:\n```\n# sample nginx.conf\\n# proxy requests to Metabase instance\\nserver {\\n  listen 80;\\n  listen [::]:80;\\n  server_name your.domain.com;\\n  location / {\\n    proxy_pass http://127.0.0.1:3000;\\n  }\\n}\n```\n\n----------------------------------------\n\nTITLE: Getting Month Name using monthName Function in Metabase Expressions\nDESCRIPTION: Returns the localized short name of the month corresponding to a given month number (1-12). Takes the month number (e.g., from a column or the `month()` function) as input.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_61\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nmonthName([Birthday Month])\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nmonthName(10)\n```\n\n----------------------------------------\n\nTITLE: Interpreting Metabase Startup Logs - Shell\nDESCRIPTION: This log snippet shows the important startup sequence when Metabase initializes the Prometheus metrics collector and web-server. It indicates successful setup and the port on which metrics will be exported. No direct dependencies are required beyond running Metabase. The input is standard output/logs; these lines confirm successful Prometheus metrics integration.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/observability-with-prometheus.md#2025-04-23_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\n(truncated logs)\n2022-09-01 17:47:38,808 INFO metabase.util :: Database setup took 3.4 s\n2022-09-01 17:47:38,826 INFO metabase.core :: Setting up prometheus metrics\n2022-09-01 17:47:38,827 INFO metabase.prometheus :: Starting prometheus metrics collector\n2022-09-01 17:47:38,839 INFO metabase.prometheus :: Starting prometheus metrics web-server on port 9,191\n(truncated logs)\n```\n\n----------------------------------------\n\nTITLE: Using String Function length() in Metabase\nDESCRIPTION: The length function returns the number of characters in a text. It takes a string column or value as input and returns an integer.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_37\n\nLANGUAGE: sql\nCODE:\n```\nlength([Comment])\n```\n\n----------------------------------------\n\nTITLE: Pulling Latest Metabase Docker Image (Pro/Enterprise) - Shell\nDESCRIPTION: This shell command instructs Docker to fetch the most recent Pro or Enterprise Metabase image for deployment. Used in commercial environments, it requires Docker CLI and suitable credentials if the image is private. No parameters. Output: Updates the Docker image locally for subsequent container restarts.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/upgrading-metabase.md#2025-04-23_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\ndocker pull metabase/metabase-enterprise:latest\n```\n\n----------------------------------------\n\nTITLE: Building Metabase Frontend With Hot-Reload\nDESCRIPTION: Command to build and run the Metabase frontend with hot-reload enabled for development, which automatically refreshes when code changes are detected.\nSOURCE: https://github.com/metabase/metabase/blob/master/README.md#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n$ yarn build-hot\n```\n\n----------------------------------------\n\nTITLE: Configuring Chunk Size for Test Data Loading\nDESCRIPTION: Controls the number of rows that should be loaded in each batch during test data loading. Default is 200, but can be set to nil to load all data at once.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/driver-changelog.md#2025-04-23_snippet_5\n\nLANGUAGE: clojure\nCODE:\n```\nmetabase.test.data.sql-jdbc.load-data/chunk-size\n```\n\n----------------------------------------\n\nTITLE: Running Continuous Integration (CI) Workflows - Shell\nDESCRIPTION: Runs yarn-based CI tasks to execute frontend and backend tests and linters in the Metabase project. Requires Node.js, Yarn, and relevant CI scripts defined in package.json. Output is CI build status or detailed logs for either the whole stack (ci) or separately for frontend (ci-frontend) or backend (ci-backend) operations.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/devenv.md#2025-04-23_snippet_25\n\nLANGUAGE: Shell\nCODE:\n```\n$ yarn ci\n```\n\nLANGUAGE: Shell\nCODE:\n```\n$ yarn ci-frontend\n```\n\nLANGUAGE: Shell\nCODE:\n```\n$ yarn ci-backend\n```\n\n----------------------------------------\n\nTITLE: Defining Slack App Manifest for Integration - Slack (YAML)\nDESCRIPTION: This YAML snippet specifies a manifest for a Slack App that enables Metabase to send alerts and subscriptions to Slack channels. The manifest outlines display information, bot user configuration, and OAuth scopes necessary for proper integration. Required scopes include read/write access for users, channels, files, messages, and groups; these must be granted for both public and private channel integrations. No code dependencies except Slack platform support YAML manifests, and all parameters relate directly to Slack's app installation process.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/slack.md#2025-04-23_snippet_0\n\nLANGUAGE: yml\nCODE:\n```\n_metadata:\n  major_version: 1\n  minor_version: 1\ndisplay_information:\n  name: Metabase\n  description: Bringing the power of Metabase to your Slack #channels!\n  background_color: \"#509EE3\"\nfeatures:\n  bot_user:\n    display_name: Metabase\noauth_config:\n  scopes:\n    bot:\n      - users:read\n      - channels:read\n      - channels:join\n      - files:write\n      - chat:write\n      - chat:write.customize\n      - chat:write.public\n      - groups:read\n\n```\n\n----------------------------------------\n\nTITLE: Using String Function contains() in Metabase\nDESCRIPTION: The contains function checks if one string contains another within it. It performs case-sensitive matching by default but can do case-insensitive matching with an optional parameter.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_27\n\nLANGUAGE: sql\nCODE:\n```\ncontains([Status], \"Class\")\n```\n\nLANGUAGE: sql\nCODE:\n```\ncontains(string1, string2, \"case-insensitive\")\n```\n\n----------------------------------------\n\nTITLE: Calculating Finish Date for Interval Check in Metabase Expression\nDESCRIPTION: This Metabase custom expression calculates the 'Finish By' date by adding 14 days to the 'Opened On' date. This calculated date is then used in a subsequent expression to check if the current date falls within the interval.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/datetimeadd.md#2025-04-23_snippet_3\n\nLANGUAGE: plaintext\nCODE:\n```\ndatetimeAdd([Opened On], 14, 'day')\n```\n\n----------------------------------------\n\nTITLE: Fingerprinting Query for Data Characterization in Metabase\nDESCRIPTION: The SQL query Metabase uses for fingerprinting data. This query examines the first 10,000 rows of a table to determine data characteristics like min/max values and value distributions, which helps Metabase optimize visualizations and filters.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/sync-fingerprint-scan.md#2025-04-23_snippet_3\n\nLANGUAGE: sql\nCODE:\n```\nSELECT\n    *\nFROM\n    \"your_schema\".\"your_table_or_view\"\nLIMIT 10000\n```\n\n----------------------------------------\n\nTITLE: Using Min in Metabase Custom Expressions - Markdown\nDESCRIPTION: Explains how to select the lowest value in a column using Min in Metabase custom expressions. Accepts one column argument, returns its minimum value. Related to Max, Median, and Average.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_6\n\nLANGUAGE: Markdown\nCODE:\n```\nSyntax: `Min(column)`\n\nExample: `Min([Salary])` would find the lowest salary among all salaries in the `Salary` column.\n\nRelated: [Max](#max), [Median](#median), [Average](#average).\n```\n\n----------------------------------------\n\nTITLE: Running Metabase Docker Container with JMX Enabled (Shell)\nDESCRIPTION: Docker command to run the Metabase container in detached mode (`-d`). It maps the standard Metabase port 3000 and the JMX port 1099 (`-p 3000:3000 -p 1099:1099`). It uses the `--env-file` flag to load JMX configuration from `metabase-vars.env`. The container hostname is explicitly set using `-h <Metabase Hostname>`, which should match the value used in `JAVA_OPTS`. Requires Docker installation and the `metabase-vars.env` file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/monitoring-metabase.md#2025-04-23_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\ndocker run --env-file=metabase-vars.env -d -p 3000:3000 -p 1099:1099 -h <Metabase Hostname> --name metabase metabase/metabase\n```\n\n----------------------------------------\n\nTITLE: Using Median in Metabase Custom Expressions - Markdown\nDESCRIPTION: Documents the process for determining the median value of a column using Metabase's Median expression. Takes a column name as parameter and returns the central value. Behavior may be limited on several databases, with approximate results in Presto and no support in Druid, MariaDB, MongoDB, MySQL, SQLite, Vertica, and SQL Server.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_5\n\nLANGUAGE: Markdown\nCODE:\n```\nSyntax: `Median(column)`\n\nExample: `Median([Age])` would find the midpoint age where half of the ages are older, and half of the ages are younger.\n\nDatabases that don't support `median`: Druid, MariaDB, MongoDB, MySQL, SQLite, Vertica, and SQL Server. Presto only provides approximate results.\n\nRelated: [Min](#min), [Max](#max), [Average](#average).\n```\n\n----------------------------------------\n\nTITLE: Saving Markdown Link Check Results to File\nDESCRIPTION: Command that runs the markdown link checker and redirects its output to a text file for easier review. Creates a file in the home directory to store all links that need fixing.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/docs.md#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ntouch ~/links-to-fix.txt && yarn run docs-lint-links > ~/links-to-fix.txt\n```\n\n----------------------------------------\n\nTITLE: Specifying Schemas for Snowflake Connection in Metabase\nDESCRIPTION: Example of how to specify schemas to include or exclude when connecting to a Snowflake database in Metabase. This snippet demonstrates the use of comma-separated values and wildcards for schema selection.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/connections/snowflake.md#2025-04-23_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nFOO,BAR,BAZ\n```\n\n----------------------------------------\n\nTITLE: Extracting Substring using Python Pandas String Slicing\nDESCRIPTION: This Python code snippet uses the Pandas library to perform an equivalent operation to the Metabase `substring([Mission ID], 9, 3)` expression. It applies string slicing (`.str.slice(8, 11)`) to the 'Mission ID' column of a DataFrame `df`. Note that Python uses 0-based indexing and the end index is exclusive, so `slice(8, 11)` extracts characters at indices 8, 9, and 10, which corresponds to the 9th, 10th, and 11th characters (a total of 3 characters).\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/substring.md#2025-04-23_snippet_6\n\nLANGUAGE: python\nCODE:\n```\ndf['Agent'] = df['Mission ID'].str.slice(8, 11)\n```\n\n----------------------------------------\n\nTITLE: Configuring Users in Metabase Config File\nDESCRIPTION: Example showing how to configure multiple users in the config file, including specifying admin users through the is_superuser flag.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/config-file.md#2025-04-23_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\nversion: 1\nconfig:\n  users:\n    - first_name: First\n      last_name: Person\n      password: metabot1\n      email: first@example.com\n    - first_name: Normal\n      last_name: Person\n      password: metabot1\n      email: normal@example.com\n    - first_name: Admin\n      last_name: Person\n      password: metabot1\n      is_superuser: true\n      email: admin@example.com\n```\n\n----------------------------------------\n\nTITLE: Configuring NFC Path for SQL Field Identifiers\nDESCRIPTION: Allows drivers to include the NFC path in field identifiers, enabling reference to record-like fields with table.record.record-field format. Defaults to nil to indicate that the path should not be part of the identifier.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/driver-changelog.md#2025-04-23_snippet_9\n\nLANGUAGE: clojure\nCODE:\n```\nmetabase.driver.sql.query-processor/nfc-path\n```\n\n----------------------------------------\n\nTITLE: Basic Metabase Configuration File Structure in YAML\nDESCRIPTION: Shows the basic structure of a Metabase config.yml file with sections for version, settings, users, and databases.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/config-file.md#2025-04-23_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nversion: 1\nconfig:\n  settings:\n    - ...\n  users:\n    - ...\n  databases:\n    - ...\n```\n\n----------------------------------------\n\nTITLE: Enforcing Metabase Session Cookies via Environment Variable (Bash)\nDESCRIPTION: This command runs the Metabase JAR, setting the `MB_SESSION_COOKIES` environment variable to `true`. This configuration forces Metabase to use session cookies for all user authentications, meaning sessions will expire when the user closes their browser. This overrides the behavior of the \"Remember me\" checkbox on the login screen. The `--add-opens` flag is a JVM argument.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/people-and-groups/changing-session-expiration.md#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nMB_SESSION_COOKIES=true java --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: Docker Compose Configuration for MySQL 8+ with Metabase Compatibility\nDESCRIPTION: Docker Compose YAML configuration for setting up a MySQL 8+ container with proper authentication settings for Metabase, including user creation and volume mounting.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/connections/mysql.md#2025-04-23_snippet_6\n\nLANGUAGE: yaml\nCODE:\n```\nmysql:\n  image: mysql:8.xx.xx\n  container_name: mysql\n  hostname: mysql\n  ports:\n    - 3306:3306\n  environment:\n    - \"MYSQL_ROOT_PASSWORD=xxxxxx\"\n    - \"MYSQL_USER=metabase\"\n    - \"MYSQL_PASSWORD=xxxxxx\"\n    - \"MYSQL_DATABASE=metabase\"\n  volumes:\n    - $PWD/mysql:/var/lib/mysql\n  command: [\"--default-authentication-plugin=mysql_native_password\"]\n```\n\n----------------------------------------\n\nTITLE: Extracting Second using second Function in Metabase Expressions\nDESCRIPTION: Extracts the second component (an integer between 0 and 59) from a given date or timestamp value. Takes the datetime column or value as input.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_66\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nsecond([datetime column])\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nsecond(\"2021-03-25T12:52:37\")\n```\n\n----------------------------------------\n\nTITLE: Running Specific Clojure Tests\nDESCRIPTION: Commands showing how to run specific test namespaces, individual tests, or tests in a specific directory using the Clojure CLI.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/devenv.md#2025-04-23_snippet_18\n\nLANGUAGE: sh\nCODE:\n```\n# run tests in only one namespace (pass in a symbol)\nclojure -X:dev:test :only metabase.session.api-test\n\n# run one specific test (pass in a qualified symbol)\nclojure -X:dev:test :only metabase.session.api-test/my-test\n\n# run tests in one specific folder (test/metabase/util in this example)\n# pass arg in double-quotes so Clojure CLI interprets it as a string;\n# our test runner treats strings as directories\nclojure -X:dev:test :only '\"test/metabase/util\"'\n```\n\n----------------------------------------\n\nTITLE: Using Distinct in Metabase Custom Expressions - Markdown\nDESCRIPTION: Details the process and syntax for counting distinct values in a column using the Distinct aggregation in Metabase's expression language. No extra dependencies. Accepts a single column reference, returning the count of unique values in that field.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_2\n\nLANGUAGE: Markdown\nCODE:\n```\nSyntax: `Distinct(column)`\n\nExample: `Distinct([Last Name])`. Returns the count of unique last names in the column. Duplicates (of the last name \"Smith\" for example) are not counted.\n```\n\n----------------------------------------\n\nTITLE: Running a Specific Metabase Development Branch via Docker\nDESCRIPTION: This command pulls (if not present) and runs a Docker container from the `metabase/metabase-dev` repository, tagged with a specific `<branch-name>`. It runs the container in detached mode (`-d`), maps port 3000 on the host to port 3000 in the container (`-p 3000:3000`), names the container `metabase-dev`, and specifies the `linux/amd64` platform. Requires Docker to be installed and running. `<branch-name>` must be replaced with a valid branch tag from Docker Hub. This starts Metabase with a fresh database.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/dev-branch-docker.md#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ndocker run --platform linux/amd64 -d -p 3000:3000 --name metabase-dev metabase/metabase-dev:<branch-name>\n```\n\n----------------------------------------\n\nTITLE: Editing Environment Variable File for Metabase - Bash\nDESCRIPTION: This snippet opens the /etc/default/metabase configuration file for editing using sudo. Used to define environment variables for the Metabase service. Requires sudo and an editor. Outputs: file ready for inserting environment variables.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-debian.md#2025-04-23_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\nsudo <your-editor> /etc/default/metabase\n```\n\n----------------------------------------\n\nTITLE: Getting Current Time in Python with Pandas\nDESCRIPTION: Illustrates retrieving the current date and time in Python using 'pd.Timestamp.now()', which returns a Pandas Timestamp object reflecting the local operating system's time zone. Requires the 'pandas' library. No parameters are needed; output is a Timestamp object.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/now.md#2025-04-23_snippet_4\n\nLANGUAGE: Python\nCODE:\n```\npd.Timestamp.now()\n```\n\n----------------------------------------\n\nTITLE: Checking Database Server Port Connectivity Using Netcat\nDESCRIPTION: Command to verify if Metabase can connect to the database server on a specific port using the netcat utility. This example shows how to test connectivity to a PostgreSQL server on its default port (5432).\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/db-connection.md#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnc -v your-db-host 5432\n```\n\n----------------------------------------\n\nTITLE: Filtering Rows and Columns with User Attribute in SQL - Metabase - SQL\nDESCRIPTION: This SQL example filters the 'orders' table to return only certain columns (id, created_at, product_id, quantity, total, user_id) and restricts rows based on the 'user_id' variable, which is dynamically mapped to a user's attribute in Metabase. Prerequisites include a user attribute (e.g., 'user_id') set in Metabase and a saved question created in the admin-only collection. The '{{user_id}}' placeholder enables row-level security by only returning data relevant to the logged-in user's attribute value. Output is a filtered table that enforces both column and row restrictions.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/permissions/data-sandbox-examples.md#2025-04-23_snippet_1\n\nLANGUAGE: sql\nCODE:\n```\n{% raw %}\nSELECT\n  id,\n  created_at,\n  product_id,\n  quantity,\n  total,\n  user_id\nFROM\n  orders\nWHERE\n  user_id = {{user_id}}\n{% endraw %}\n```\n\n----------------------------------------\n\nTITLE: Using Percentile in Metabase Custom Expressions - Markdown\nDESCRIPTION: Shows how to compute a requested percentile in a numeric column using the Percentile function within Metabase formulas. Takes a column and the percentile as a decimal value (e.g., 0.9 for 90th percentile). Lacks support on many databases including Druid, H2, MariaDB, MySQL, MongoDB, SQL Server, SQLite, Vertica. Presto provides only approximate results.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_7\n\nLANGUAGE: Markdown\nCODE:\n```\nSyntax: `Percentile(column, percentile-value)`\n\nExample: `Percentile([Score], 0.9)` would return the value at the 90th percentile for all values in that column.\n\nDatabases that don't support `percentile`: Druid, H2, MariaDB, MySQL, MongoDB, SQL Server, SQLite, Vertica. Presto only provides approximate results.\n```\n\n----------------------------------------\n\nTITLE: Generating Updated API Documentation\nDESCRIPTION: Command to regenerate the API documentation after editing endpoint descriptions in the source code. Requires using Clojure with enterprise edition and run profiles to update the docs/latest/api-documentation directory.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/docs.md#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nclojure -M:ee:run api-documentation\n```\n\n----------------------------------------\n\nTITLE: Using Average in Metabase Custom Expressions - Markdown\nDESCRIPTION: Demonstrates the syntax for calculating the average value of a given column using Metabase's custom expression language. No third-party dependencies are required. Accepts a single column name as the parameter; returns the mean of its numeric values in the query builder's Summarize section.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_0\n\nLANGUAGE: Markdown\nCODE:\n```\nSyntax: `Average(column)`\n\nExample: `Average([Quantity])` would return the mean for the `Quantity` field.\n```\n\n----------------------------------------\n\nTITLE: PostgreSQL Timezone Conversion\nDESCRIPTION: SQL query for converting timestamp without time zone in PostgreSQL using AT TIME ZONE clause.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/converttimezone.md#2025-04-23_snippet_5\n\nLANGUAGE: sql\nCODE:\n```\nSELECT source_time::TIMESTAMP AT TIME ZONE 'UTC' AT TIME ZONE 'EST' AS team_report_time_est\n```\n\n----------------------------------------\n\nTITLE: Creating a PostgreSQL Database (Example)\nDESCRIPTION: An example shell command to create a new PostgreSQL database named `metabaseappdb`. This database is intended to be used by Metabase as its application database in a production setup. This command requires PostgreSQL server access and appropriate client tools.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-docker.md#2025-04-23_snippet_8\n\nLANGUAGE: shell\nCODE:\n```\ncreatedb metabaseappdb\n```\n\n----------------------------------------\n\nTITLE: Exported General Metabase Settings (settings.yaml Keys) in YAML\nDESCRIPTION: Lists the general Metabase settings keys that are exported into the `settings.yaml` file during the serialization process. These settings control various aspects of the Metabase instance's behavior and appearance, such as localization, query limits, embedding, and theming. Refer to Metabase configuration documentation for details on each setting.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/serialization.md#2025-04-23_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nhumanization-strategy\nnative-query-autocomplete-match-style\nsite-locale\nreport-timezone-short\nreport-timezone-long\napplication-name\nenable-xrays\nshow-homepage-pin-message\nsource-address-header\nenable-nested-queries\ncustom-geojson-enabled\nstart-of-week\ncustom-geojson\navailable-timezones\nunaggregated-query-row-limit\naggregated-query-row-limit\nhide-embed-branding?\nsearch-typeahead-enabled\nenable-sandboxes?\napplication-font\navailable-locales\nlanding-page\nenable-embedding\napplication-colors\napplication-logo-url\napplication-favicon-url\nshow-homepage-xrays\nshow-metabot\nenable-whitelabeling?\nshow-homepage-data\nsite-name\napplication-font-files\nloading-message\nreport-timezone\npersisted-models-enabled\nenable-content-management?\nsubscription-allowed-domains\nbreakout-bins-num\navailable-fonts\ncustom-formatting\n```\n\n----------------------------------------\n\nTITLE: Running the Enterprise Metabase Container with Podman (Shell)\nDESCRIPTION: This command starts a new Metabase Pro/Enterprise container in detached mode (`-d`), maps port 3000 (`-p 3000:3000`), names it 'metabase' (`--name=metabase`), and uses the latest Enterprise image. Access is via `http://localhost:3000`. Requires the Enterprise image and a valid license token for full functionality.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-podman.md#2025-04-23_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\npodman run -d -p 3000:3000 --name=metabase docker.io/metabase/metabase-enterprise:latest\n```\n\n----------------------------------------\n\nTITLE: syslog Configuration for Metabase Logs - Conf\nDESCRIPTION: This syslog configuration snippet filters logs from the 'metabase' program and directs them to /var/log/metabase.log, then stops further processing for those entries. Add this to /etc/rsyslog.d/metabase.conf. Dependencies: rsyslog in use. Inputs: log messages; Outputs: filtered log file at /var/log/metabase.log. Limitation: only effective if syslog is active and this file is included.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-debian.md#2025-04-23_snippet_4\n\nLANGUAGE: conf\nCODE:\n```\nif $programname == 'metabase' then /var/log/metabase.log\\n& stop\n```\n\n----------------------------------------\n\nTITLE: Installing Local Metabase SDK Build with NPM\nDESCRIPTION: This command installs the locally built Metabase SDK from the resources folder using NPM. It uses the --install-links option to create a copy instead of a symlink.\nSOURCE: https://github.com/metabase/metabase/blob/master/enterprise/frontend/src/embedding-sdk/dev.md#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nnpm install --install-links  ../metabase/resources/embedding-sdk\n```\n\n----------------------------------------\n\nTITLE: Docker Run Command for MySQL 8+ with Native Password Authentication\nDESCRIPTION: Docker command to start a MySQL 8+ container configured to use mysql_native_password authentication, which is required for Metabase compatibility.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/connections/mysql.md#2025-04-23_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\ndocker run -p 3306:3306 -e MYSQL_ROOT_PASSWORD=xxxxxx mysql:8.xx.xx --default-authentication-plugin=mysql_native_password\n```\n\n----------------------------------------\n\nTITLE: Importing Metabase Data via API\nDESCRIPTION: Curl command to import Metabase data using the API. This request sends a compressed file containing serialized Metabase data to the target instance.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/serialization.md#2025-04-23_snippet_16\n\nLANGUAGE: sh\nCODE:\n```\ncurl -X POST \\\n  -H 'x-api-key: YOUR_API_KEY' \\\n  -F file=@metabase_data.tgz \\\n  'http://your-metabase-url/api/ee/serialization/import' \\\n  -o -\n```\n\n----------------------------------------\n\nTITLE: Illustrating Resolved SQL WHERE Clause in Metabase Sandbox\nDESCRIPTION: Shows an example of the resulting SQL query after Metabase replaces the parameter (`plan_variable`) with a specific user attribute value ('Basic') associated with the logged-in user. This illustrates how the parameterized query translates into a concrete filter for an individual user viewing the sandboxed table.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/permissions/data-sandboxes.md#2025-04-23_snippet_2\n\nLANGUAGE: sql\nCODE:\n```\nWHERE plan = \"Basic\"\n```\n\n----------------------------------------\n\nTITLE: Running Clojure Tests from REPL\nDESCRIPTION: Examples of running tests from within a Clojure REPL, including running single tests, all tests in a namespace, or tests for specific features.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/devenv.md#2025-04-23_snippet_19\n\nLANGUAGE: clojure\nCODE:\n```\n;; run a single test with clojure.test\nsome-ns=> (clojure.test/run-test metabase.util-test/add-period-test)\n\nTesting metabase.util-test\n\nRan 1 tests containing 4 assertions.\n0 failures, 0 errors.\n{:test 1, :pass 4, :fail 0, :error 0, :type :summary}\n\n;; run all tests in the namespace\nsome-ns=> (clojure.test/run-tests 'metabase.util-test)\n\nTesting metabase.util-test\n{:result true, :num-tests 100, :seed 1696600311261, :time-elapsed-ms 45, :test-var \"pick-first-test\"}\n\nRan 33 tests containing 195 assertions.\n0 failures, 0 errors.\n{:test 33, :pass 195, :fail 0, :error 0, :type :summary}\n\n;; run tests for a set of namespaces related to a feature you are working on (eg pulses)\nsome-ns=> (let [namespaces '[metabase.pulse.markdown-test metabase.pulse.parameters-test]]\n            (apply require namespaces) ;; make sure the test namespaces are loaded\n            (apply clojure.test/run-tests namespaces))\n\nTesting metabase.pulse.markdown-test\n\nTesting metabase.pulse.parameters-test\n\nRan 5 tests containing 147 assertions.\n0 failures, 0 errors.\n{:test 5, :pass 147, :fail 0, :error 0, :type :summary}\n\n;; but we also have a lovely test runner with lots of cool options\nsome-ns=> (metabase.test-runner/find-and-run-tests-repl {:namespace-pattern \".*pulse.*\"})\nRunning tests with options {:mode :repl, :namespace-pattern \".*pulse.*\", :exclude-directories [\"classes\" \"dev\" \"enterprise/backend/src\" \"local\" \"resources\" \"resources-ee\" \"src\" \"target\" \"test_config\" \"test_resources\"], :test-warn-time 3000}\nExcluding directory \"dev/src\"\nExcluding directory \"local/src\"\nLooking for test namespaces in directory test\nFinding tests took 1.6 s.\nExcluding directory \"test_resources\"\nExcluding directory \"enterprise/backend/src\"\nLooking for test namespaces in directory enterprise/backend/test\nExcluding directory \"src\"\nExcluding directory \"resources\"\nRunning 159 tests\n...\n\n;; you can even specify a directory if you're working on a subfeature like that\nsome-ns=> (metabase.test-runner/find-and-run-tests-repl {:only \"test/metabase/pulse/\"})\nRunning tests with options {:mode :repl, :namespace-pattern #\"^metabase.*\", :exclude-directories [\"classes\" \"dev\" \"enterprise/backend/src\" \"local\" \"resources\" \"resources-ee\" \"src\" \"target\" \"test_config\" \"test_resources\"], :test-warn-time 3000, :only \"test/metabase/pulse/\"}\nRunning tests in \"test/metabase/pulse/\"\nLooking for test namespaces in directory test/metabase/pulse\nFinding tests took 37.0 ms.\nRunning 65 tests\n...\n```\n\n----------------------------------------\n\nTITLE: Using DistinctIf in Metabase Custom Expressions - Markdown\nDESCRIPTION: Outlines how to count unique values that meet a specific condition using the DistinctIf aggregation in Metabase. Accepts a column and a boolean condition, returning the number of distinct values in that column where the condition is true.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_3\n\nLANGUAGE: Markdown\nCODE:\n```\nSyntax: `DistinctIf(column, condition)`\n\nExample: `DistinctIf([ID], [Category] = \"Gizmo\")` would return the count of unique IDs where the `Category` column is \"Gizmo\".\n```\n\n----------------------------------------\n\nTITLE: Setting Environment Variables for Metabase Docker Container\nDESCRIPTION: Example of how to set environment variables when running Metabase in a Docker container using the -e flag.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\ndocker run -d -p 3000:3000 -e MB_SITE_NAME=\"Awesome Company\" --name metabase metabase/metabase\n```\n\n----------------------------------------\n\nTITLE: Setting Up Metabase Backend for Development\nDESCRIPTION: Commands to build the necessary database drivers and start the Metabase backend server using Clojure. This is required after setting up the frontend for a complete development environment.\nSOURCE: https://github.com/metabase/metabase/blob/master/README.md#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n$ ./bin/build-drivers.sh\n$ clojure -M:run\n```\n\n----------------------------------------\n\nTITLE: Configuring Database with Uploads in Metabase\nDESCRIPTION: Example showing how to enable and configure file uploads for a database connection, specifying schema and table prefix settings.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/config-file.md#2025-04-23_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\nversion: 1\nconfig:\n  users:\n    - first_name: Cam\n      last_name: Era\n      password: 2cans3cans4cans\n      email: cam@example.com\n  databases:\n    - name: test-data (Postgres)\n      engine: postgres\n      details:\n        host: localhost\n        port: 5432\n        user: dbuser\n        password: \"{{ env POSTGRES_TEST_DATA_PASSWORD }}\"\n        dbname: test-data\n      uploads_enabled: true\n      uploads_schema_name: uploads\n      uploads_table_prefix: uploads_\n```\n\n----------------------------------------\n\nTITLE: Running Cypress Tests Against Metabase Enterprise Edition (Shell)\nDESCRIPTION: Executes the Cypress test suite (`yarn test-cypress`) targeting the Metabase Enterprise Edition. It requires setting the `MB_EDITION` environment variable to `ee` and providing a valid enterprise license token via `ENTERPRISE_TOKEN=xxxxxx` (replace `xxxxxx` with the actual token). This setup ensures tests run against the EE codebase and allows testing premium features if the token enables them.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/e2e-tests.md#2025-04-23_snippet_12\n\nLANGUAGE: sh\nCODE:\n```\nMB_EDITION=ee ENTERPRISE_TOKEN=xxxxxx yarn test-cypress\n```\n\n----------------------------------------\n\nTITLE: Displaying Confirmation Modal Example in Storybook Canvas (JSX)\nDESCRIPTION: This snippet renders the 'Confirmation' modal story within a Canvas. It demonstrates how confirmation modals should be phrased as questions and how the body should elaborate on the action’s consequences. Used in the Modal guidelines to illustrate a best practice for confirmation dialogs.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/overlays/Modal/Modal.mdx#2025-04-23_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={ModalStories.Confirmation} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Installing Frontend JavaScript Dependencies\nDESCRIPTION: Command to install all JavaScript dependencies required for Metabase frontend development.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/devenv.md#2025-04-23_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\n# javascript dependencies\n$ yarn\n```\n\n----------------------------------------\n\nTITLE: Understanding the Sync Query Structure in Metabase\nDESCRIPTION: The SQL query structure that Metabase uses during the sync process. This query checks if a table exists without retrieving any data, helping administrators understand how Metabase validates table existence during synchronization.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/sync-fingerprint-scan.md#2025-04-23_snippet_1\n\nLANGUAGE: sql\nCODE:\n```\nSELECT\n    TRUE\nFROM\n    \"your_schema\".\"your_table_or_view\"\nWHERE\n    1 <> 1\nLIMIT 0\n```\n\n----------------------------------------\n\nTITLE: Spreadsheet Formula Equivalent of Basic CountIf\nDESCRIPTION: This spreadsheet formula (compatible with tools like Excel or Google Sheets) performs the equivalent operation to the Metabase expression `CountIf([Plan] = \"Basic\")`. It counts the number of cells in column B that contain the text \"Basic\". Assumes the 'Plan' data resides in column B.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/countif.md#2025-04-23_snippet_14\n\nLANGUAGE: spreadsheet-formula\nCODE:\n```\n=CountIf(B:B, \"Basic\")\n```\n\n----------------------------------------\n\nTITLE: Sample Metrics Output from Metabase - YAML\nDESCRIPTION: This YAML snippet provides example output of JVM-level metrics exported by Metabase in Prometheus format. It includes metric types, HELP comments, and actual metric values. No additional dependencies are needed aside from running Metabase with Prometheus support. Output includes values such as jvm_threads_current, jvm_threads_daemon, and others. Inputs are handled via Prometheus scraping; output is a list of key-value pairs suitable for Prometheus ingestion.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/observability-with-prometheus.md#2025-04-23_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\n'# HELP jvm_threads_current Current thread count of a JVM\n'# TYPE jvm_threads_current gauge\njvm_threads_current 81.0\n'# HELP jvm_threads_daemon Daemon thread count of a JVM\n'# TYPE jvm_threads_daemon gauge\njvm_threads_daemon 36.0\n'# HELP jvm_threads_peak Peak thread count of a JVM\n'# TYPE jvm_threads_peak gauge\njvm_threads_peak 81.0\n'# HELP jvm_threads_started_total Started thread count of a JVM\n'# TYPE jvm_threads_started_total counter\njvm_threads_started_total 104.0\n'# HELP jvm_threads_deadlocked Cycles of JVM-threads that are in deadlock waiting to acquire object monitors or ownable synchronizers\n'# TYPE jvm_threads_deadlocked gauge\njvm_threads_deadlocked 0.0\n```\n\n----------------------------------------\n\nTITLE: Creating a PostgreSQL Database for Metabase (Shell)\nDESCRIPTION: This shell command, typically executed via the `psql` client or similar tool, creates a new PostgreSQL database named `metabaseappdb`. This database is intended for storing Metabase application data (users, questions, dashboards) in production environments, replacing the default H2 file database. Requires PostgreSQL server access and privileges.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-podman.md#2025-04-23_snippet_8\n\nLANGUAGE: shell\nCODE:\n```\ncreatedb metabaseappdb\n```\n\n----------------------------------------\n\nTITLE: Setting Postgres Connection String via JVM Option\nDESCRIPTION: Command showing how to set a full Postgres connection string as a JVM option for the Metabase application database.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/devenv.md#2025-04-23_snippet_12\n\nLANGUAGE: sh\nCODE:\n```\n\"-Dmb.db.connection.uri=postgres://<user>:<password>@localhost:5432/<dbname>\"\n```\n\n----------------------------------------\n\nTITLE: Viewing Metabase Open Source Container Logs\nDESCRIPTION: Displays the logs of the container named 'metabase' in real-time (`-f`). This is useful for monitoring the initialization process of the Open Source Metabase instance started in the previous step.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-docker.md#2025-04-23_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\ndocker logs -f metabase\n```\n\n----------------------------------------\n\nTITLE: Adding JDBC Connection String Options for Starburst Database in Metabase\nDESCRIPTION: Example of how to append options to the JDBC connection string when connecting to a Starburst or Trino database in Metabase. Options should be separated by ampersands.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/connections/starburst.md#2025-04-23_snippet_0\n\nLANGUAGE: plain\nCODE:\n```\nconnection_timeout=1000&socket_timeout=300000\n```\n\n----------------------------------------\n\nTITLE: Installing Client Dependencies including SDK (Shell)\nDESCRIPTION: Executes the Node Package Manager (npm) command to download and install all frontend client application dependencies listed in its `package.json` file. This includes the React framework, other libraries, and crucially, the `@metabase/embedding-sdk-react` package needed for embedding Metabase components. This command must be run within the `client` directory. Requires Node.js and npm.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/quickstart-with-sample-app.md#2025-04-23_snippet_12\n\nLANGUAGE: sh\nCODE:\n```\nnpm install\n```\n\n----------------------------------------\n\nTITLE: Example Generated Encryption Key for Metabase\nDESCRIPTION: Example output of an encryption key generated with OpenSSL. This is what a secure encryption key should look like before being set as an environment variable.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/encrypting-details-at-rest.md#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nIYqrSi5QDthvFWe4/WdAxhnra5DZC3RKx3ZSrOJDKsM=\n```\n\n----------------------------------------\n\nTITLE: Creating a Directory for Metabase - Bash\nDESCRIPTION: Creates a new directory named 'metabase' in the current user's home directory. This organizational step is important because Metabase, when run, will generate configuration and log files in its directory. No dependencies are required, but the user should have permissions to create directories. Accepts no parameters and outputs nothing unless errors occur (e.g., directory already exists).\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-the-metabase-jar-file.md#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nmkdir ~/metabase\n```\n\n----------------------------------------\n\nTITLE: Example of Metabase Version Number\nDESCRIPTION: Provides a concrete example of a Metabase version number, showing a hotfix (1) for the third (3) point release of Metabase version 46, in the open-source edition (0).\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/versioning.md#2025-04-23_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\nv0.46.3.1\n```\n\n----------------------------------------\n\nTITLE: Viewing Metabase Container Logs with Podman (Shell)\nDESCRIPTION: This command displays the logs generated by the Metabase container named 'metabase'. The `-f` flag follows the log output in real-time, which is useful for monitoring the startup process and troubleshooting. Requires a running container named 'metabase'.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-podman.md#2025-04-23_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\npodman logs -f metabase\n```\n\n----------------------------------------\n\nTITLE: Navigating to Workspace Directory\nDESCRIPTION: Changes the current directory in the terminal to the user's `workspace` folder located in their home directory (`~`). This folder is suggested as the location to store the Metabase source code.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/build.md#2025-04-23_snippet_6\n\nLANGUAGE: shell\nCODE:\n```\ncd ~/workspace\n```\n\n----------------------------------------\n\nTITLE: Adding User Attribute to JWT Payload via Include (TypeScript/JavaScript)\nDESCRIPTION: Instructs the user to include a specific code snippet ('user-attribute-sign-user-token-helper') from 'sso-with-jwt.ts' into their 'signUserToken' function. This included snippet adds an 'account_id' user attribute to the JWT payload, which Metabase uses for data sandboxing to implement row-level security based on that attribute.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/interactive-embedding-quick-start-guide.md#2025-04-23_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\n{% include_file \"{{ dirname }}/snippets/interactive-embedding-quick-start-guide/sso-with-jwt.ts\" snippet=\"user-attribute-sign-user-token-helper\" %}\n```\n\n----------------------------------------\n\nTITLE: Running Metabase Pro/Enterprise Container (Custom Port)\nDESCRIPTION: Starts a Metabase Pro/Enterprise container in detached mode (`-d`), maps the host's port 12345 to the container's port 3000 (`-p 12345:3000`), and names the container 'metabase'. This allows accessing Metabase Pro/Enterprise on a different port (`http://localhost:12345`).\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-docker.md#2025-04-23_snippet_7\n\nLANGUAGE: shell\nCODE:\n```\ndocker run -d -p 12345:3000 --name metabase metabase/metabase-enterprise\n```\n\n----------------------------------------\n\nTITLE: Using String Function lTrim() in Metabase\nDESCRIPTION: The lTrim function removes leading whitespace from a string of text. It takes a string column or value as input.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_36\n\nLANGUAGE: sql\nCODE:\n```\nlTrim([Comment])\n```\n\n----------------------------------------\n\nTITLE: Configuring MB_LDAP_ENABLED Environment Variable in Metabase\nDESCRIPTION: Enables or disables LDAP authentication for Metabase. When set to true, users can log in using their LDAP credentials, configured via other `MB_LDAP_*` variables. Type: boolean. Default: `false`. Corresponds to `ldap-enabled` in the configuration file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_28\n\nLANGUAGE: plaintext\nCODE:\n```\nMB_LDAP_ENABLED=false\n```\n\n----------------------------------------\n\nTITLE: Configuring Postgres App DB with Insecure NonValidatingFactory via JDBC URI in Shell\nDESCRIPTION: Sets the `MB_DB_CONNECTION_URI` environment variable for a PostgreSQL application database, enabling SSL but explicitly disabling certificate validation by using `org.postgresql.ssl.NonValidatingFactory`. This method is insecure and generally only recommended for troubleshooting or non-sensitive environments.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/configuring-application-database.md#2025-04-23_snippet_12\n\nLANGUAGE: sh\nCODE:\n```\nexport MB_DB_CONNECTION_URI=\"postgres://localhost:5432/metabase?user=<username>&password=<password>&ssl=true&sslfactory=org.postgresql.ssl.NonValidatingFactory\"\n```\n\n----------------------------------------\n\nTITLE: Passing Data to a Quartz Job via Trigger Configuration in Clojure\nDESCRIPTION: Demonstrates how to pass data (e.g., a database ID) to a Quartz job using the job data map when building the trigger. The `triggers/using-job-data` function takes a map which is then associated with the job instance upon execution.\nSOURCE: https://github.com/metabase/metabase/blob/master/src/metabase/task/QUARTZ.md#2025-04-23_snippet_2\n\nLANGUAGE: clojure\nCODE:\n```\n(triggers/build\n ;; other trigger configuration...\n (triggers/using-job-data {\"db-id\" database-id}))\n```\n\n----------------------------------------\n\nTITLE: Postgres Driver Connection Details Implementation - Clojure\nDESCRIPTION: Defines a multimethod for constructing connection details for the Postgres test driver. Depends on the tx/* helper functions and is defined in the metabase.test.data.postgres namespace. It dynamically merges environment variables, default values, and provided context, extracting database credentials from the process environment. Inputs are context and a map (requiring :database-name), output is a merged map with all connection parameters. Will throw or default as per the presence/absence of environment variables.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/devenv.md#2025-04-23_snippet_22\n\nLANGUAGE: Clojure\nCODE:\n```\n(defmethod tx/dbdef->connection-details :postgres\n  [_ context {:keys [database-name]}]\n  (merge\n   {:host     (tx/db-test-env-var-or-throw :postgresql :host \"localhost\")\n    :port     (tx/db-test-env-var-or-throw :postgresql :port 5432)\n    :timezone :America/Los_Angeles}\n   (when-let [user (tx/db-test-env-var :postgresql :user)]\n     {:user user})\n   (when-let [password (tx/db-test-env-var :postgresql :password)]\n     {:password password})\n   (when (= context :db)\n     {:db database-name})))\n```\n\n----------------------------------------\n\nTITLE: Converting Text to Uppercase using upper Function in Metabase Expressions\nDESCRIPTION: Converts all alphabetic characters in a given text string to their uppercase equivalents. It takes the text string as input and returns the uppercase version.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_50\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nupper(text)\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nupper([Status])\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nupper(\"hyper\")\n```\n\n----------------------------------------\n\nTITLE: Viewing Metabase Pro/Enterprise Container Logs\nDESCRIPTION: Displays the logs of the container named 'metabase' in real-time (`-f`). This is useful for monitoring the initialization process of the Pro or Enterprise Metabase instance started in the previous step.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-docker.md#2025-04-23_snippet_6\n\nLANGUAGE: shell\nCODE:\n```\ndocker logs -f metabase\n```\n\n----------------------------------------\n\nTITLE: Docker Memory Allocation Command\nDESCRIPTION: Docker run command to set JVM arguments for memory allocation when running Metabase in a container.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/running.md#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\ndocker run -d -p 3000:3000 -e \"JAVA_OPTS=-Xmx2g\" metabase/metabase\n```\n\n----------------------------------------\n\nTITLE: Example Okta SAML Assertion XML\nDESCRIPTION: This XML snippet shows an example SAML 2.0 assertion generated by Okta after configuring the Metabase app integration. It demonstrates how user attributes like email (emailaddress), first name (givenname), and last name (surname) are transmitted within the AttributeStatement, along with issuer details (Issuer), audience restrictions (Audience), subject information (NameID, SubjectConfirmationData with Recipient URL), and authentication context. This assertion is sent from Okta to the Metabase `/auth/sso` endpoint during the login process.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/people-and-groups/saml-okta.md#2025-04-23_snippet_0\n\nLANGUAGE: xml\nCODE:\n```\n<saml2:Assertion\\n    xmlns:saml2=\\\"urn:oasis:names:tc:SAML:2.0:assertion\\\" ID=\\\"id4170618837332381492734749\\\" IssueInstant=\\\"2019-03-27T17:56:11.067Z\\\" Version=\\\"2.0\\\">\\n    <saml2:Issuer Format=\\\"urn:oasis:names:tc:SAML:2.0:nameid-format:entity\\\">http://www.okta.com/Issuer</saml2:Issuer>\\n    <saml2:Subject>\\n        <saml2:NameID Format=\\\"urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress\\\">userName</saml2:NameID>\\n        <saml2:SubjectConfirmation Method=\\\"urn:oasis:names:tc:SAML:2.0:cm:bearer\\\">\\n            <saml2:SubjectConfirmationData NotOnOrAfter=\\\"2019-03-27T18:01:11.246Z\\\" Recipient=\\\"https://metabase.mycompany.com/auth/sso\\\"/>\\n        </saml2:SubjectConfirmation>\\n    </saml2:Subject>\\n    <saml2:Conditions NotBefore=\\\"2019-03-27T17:51:11.246Z\\\" NotOnOrAfter=\\\"2019-03-27T18:01:11.246Z\\\">\\n        <saml2:AudienceRestriction>\\n            <saml2:Audience>my-metabase-app</saml2:Audience>\\n        </saml2:AudienceRestriction>\\n    </saml2:Conditions>\\n    <saml2:AuthnStatement AuthnInstant=\\\"2019-03-27T17:56:11.067Z\\\">\\n        <saml2:AuthnContext>\\n            <saml2:AuthnContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTransport</saml2:AuthnContextClassRef>\\n        </saml2:AuthnContext>\\n    </saml2:AuthnStatement>\\n    <saml2:AttributeStatement>\\n        <saml2:Attribute Name=\\\"http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname\\\" NameFormat=\\\"urn:oasis:names:tc:SAML:2.0:attrname-format:uri\\\">\\n            <saml2:AttributeValue xmlns:xs=\\\"http://www.w3.org/2001/XMLSchema\\\" xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xsi:type=\\\"xs:string\\\">\\n              Cam\\n            </saml2:AttributeValue>\\n        </saml2:Attribute>\\n        <saml2:Attribute Name=\\\"http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname\\\" NameFormat=\\\"urn:oasis:names:tc:SAML:2.0:attrname-format:uri\\\">\\n            <saml2:AttributeValue xmlns:xs=\\\"http://www.w3.org/2001/XMLSchema\\\" xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xsi:type=\\\"xs:string\\\">\\n              Saul\\n            </saml2:AttributeValue>\\n        </saml2:Attribute>\\n        <saml2:Attribute Name=\\\"http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress\\\" NameFormat=\\\"urn:oasis:names:tc:SAML:2.0:attrname-format:uri\\\">\\n            <saml2:AttributeValue xmlns:xs=\\\"http://www.w3.org/2001/XMLSchema\\\" xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xsi:type=\\\"xs:string\\\">\\n              cam@metabase.com\\n            </saml2:AttributeValue>\\n        </saml2:Attribute>\\n    </saml2:AttributeStatement>\\n</saml2:Assertion>\n```\n\n----------------------------------------\n\nTITLE: Creating Unprivileged User and Setting Permissions - Bash\nDESCRIPTION: This snippet demonstrates how to create a system group and user named 'metabase', adjust directory ownerships, and prepare log and configuration files with correct permissions. Requires sudo privileges. Replace path placeholders with your Metabase install location. Inputs: paths and user names; Outputs: user/group created, directory access and file permissions enforced. Limitation: assumes standard Debian group/user management tools.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-debian.md#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nsudo groupadd -r metabase\\nsudo useradd -r -s /bin/false -g metabase metabase\\nsudo chown -R metabase:metabase </your/path/to/metabase/directory>\\nsudo touch /var/log/metabase.log\\nsudo chown syslog:adm /var/log/metabase.log\\nsudo touch /etc/default/metabase\\nsudo chmod 640 /etc/default/metabase\n```\n\n----------------------------------------\n\nTITLE: Schema Specification Example\nDESCRIPTION: Example of specifying schemas in a comma-separated list format for inclusion or exclusion in database syncing.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/connections/postgresql.md#2025-04-23_snippet_0\n\nLANGUAGE: text\nCODE:\n```\nfoo,bar,baz\n```\n\n----------------------------------------\n\nTITLE: Configuring MB_HELP_LINK_CUSTOM_DESTINATION Environment Variable in Metabase\nDESCRIPTION: Specifies the custom URL for the help link when `MB_HELP_LINK` is set to `:custom`. Available only on Metabase Pro and Enterprise plans. Type: string. Default: `https://www.metabase.com/help/premium`. Corresponds to `help-link-custom-destination` in the configuration file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_8\n\nLANGUAGE: plaintext\nCODE:\n```\nMB_HELP_LINK_CUSTOM_DESTINATION=https://www.metabase.com/help/premium\n```\n\n----------------------------------------\n\nTITLE: Enabling the Metabase Systemd Service (Shell)\nDESCRIPTION: This command enables the `metabase.service` using `systemctl`. This configures systemd to automatically start the Metabase container during system boot. Requires `sudo` privileges and the service file to be correctly installed in the systemd directory.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-podman.md#2025-04-23_snippet_12\n\nLANGUAGE: shell\nCODE:\n```\nsudo systemctl enable metabase\n```\n\n----------------------------------------\n\nTITLE: Displaying Metabase Version Schema Format\nDESCRIPTION: Shows the format structure of Metabase's version numbering system, which follows a License.Major.Point.Hotfix pattern to differentiate between open-source and paid editions.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/versioning.md#2025-04-23_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nLicense.Major.Point.Hotfix\n```\n\n----------------------------------------\n\nTITLE: Running Prometheus with Custom Configuration - Shell\nDESCRIPTION: This shell command starts Prometheus using the specified configuration file (prometheus.yml) in the working directory. It requires Prometheus to be installed and the prometheus.yml file to be present. The only input is the path to the configuration file; output is a running Prometheus server ready to scrape configured targets.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/observability-with-prometheus.md#2025-04-23_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\n./prometheus --config.file=prometheus.yml\n```\n\n----------------------------------------\n\nTITLE: Setting Environment Variable for M1 Mac Docker Connectivity\nDESCRIPTION: Environment variable to solve connection issues with MongoDB QA Database when running on Apple M1 machines by forcing QEMU.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/e2e-tests.md#2025-04-23_snippet_7\n\nLANGUAGE: shell\nCODE:\n```\nexport EXPERIMENTAL_DOCKER_DESKTOP_FORCE_QEMU=1\n```\n\n----------------------------------------\n\nTITLE: Using Cumulative Sum Metric with Metabase Expression Syntax - plaintext\nDESCRIPTION: This snippet demonstrates applying the built-in 'CumulativeSum' metric in Metabase, where a specific column is summed cumulatively across breakout dimensions. The only parameter is 'column', representing the field to sum. This function is used in Metabase's Summarize step, not for custom columns or filters; thus, it is limited to supported contexts in the query builder.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/cumulative.md#2025-04-23_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\nCumulativeSum(column)\n```\n\n----------------------------------------\n\nTITLE: Configuring MB_JWT_ATTRIBUTE_EMAIL Environment Variable in Metabase\nDESCRIPTION: Specifies the key used to retrieve the user's email address from the JWT payload during JWT authentication. Available only on Metabase Pro and Enterprise plans. Type: string. Default: `email`. Corresponds to `jwt-attribute-email` in the configuration file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_11\n\nLANGUAGE: plaintext\nCODE:\n```\nMB_JWT_ATTRIBUTE_EMAIL=email\n```\n\n----------------------------------------\n\nTITLE: Setting Environment Variables for Snowplow Testing\nDESCRIPTION: Commands for enabling Snowplow-dependent tests by starting the Snowplow Micro Docker container and setting the necessary environment variables.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/e2e-tests.md#2025-04-23_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\ndocker-compose -f ./snowplow/docker-compose.yml up -d\nexport MB_SNOWPLOW_AVAILABLE=true\nexport MB_SNOWPLOW_URL=http://localhost:9090\n```\n\n----------------------------------------\n\nTITLE: Using Mathematical Function log() in Metabase\nDESCRIPTION: The log function returns the base 10 logarithm of the number. It takes a single column or value as input.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_22\n\nLANGUAGE: sql\nCODE:\n```\nlog([Value])\n```\n\n----------------------------------------\n\nTITLE: Extracting Compressed Metabase Data\nDESCRIPTION: Command to extract a compressed directory containing Metabase serialized data.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/serialization.md#2025-04-23_snippet_14\n\nLANGUAGE: sh\nCODE:\n```\ntar -xvf  metabase_data.tgz\n```\n\n----------------------------------------\n\nTITLE: Pulling Latest Metabase Docker Image (Open Source) - Shell\nDESCRIPTION: This command pulls the latest official open-source Metabase Docker image from Docker Hub. It is used to update a containerized Metabase deployment. Requires Docker CLI installed and network access to Docker Hub. No input parameters. Output: Updates the local repository with the latest image. Run prior to restarting the container.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/upgrading-metabase.md#2025-04-23_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\ndocker pull metabase/metabase:latest\n```\n\n----------------------------------------\n\nTITLE: Creating Time Interval using timeSpan Function in Metabase Expressions\nDESCRIPTION: Creates a time interval of a specified length that can be added to or subtracted from a datetime value. It requires an integer number (negative for past, positive for future) representing the period and a text string for the time unit ('day', 'month', 'year', etc.). Fractional numbers are not allowed for the period.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_67\n\nLANGUAGE: Metabase Expression\nCODE:\n```\ntimeSpan(number, text)\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\n[Orders → Created At] + timeSpan(7, \"day\")\n```\n\n----------------------------------------\n\nTITLE: Calculating Cumulative Sum using CumulativeSum Window Function in Metabase Expressions\nDESCRIPTION: A window function that calculates the cumulative (rolling) sum of a specified column's values within a breakout group. It provides the running total of the column for rows processed so far in the current window partition. This function can only be used in the 'Summarize' section and requires the column to sum as input.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_72\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nCumulativeSum(column)\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nCumulativeSum([Subtotal])\n```\n\n----------------------------------------\n\nTITLE: Heap Dump Configuration Command\nDESCRIPTION: Java command to enable heap dumps when OutOfMemoryError occurs, useful for diagnosing memory issues.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/running.md#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\njava -Xmx2g -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/path/to/a/directory -jar metabase-jar\n```\n\n----------------------------------------\n\nTITLE: Example Metabase Plugin Manifest in YAML\nDESCRIPTION: A sample plugin manifest for a SQLite driver showing essential configuration elements including info, driver specifications, and initialization steps.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/drivers/plugins.md#2025-04-23_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\ninfo:\n  name: Metabase SQLite Driver\n  version: 1.0.0-SNAPSHOT-3.25.2\n  description: Allows Metabase to connect to SQLite databases.\ncontact-info:\n  name: Toucan McBird\n  address: toucan.mcbird@example.com\ndriver:\n  name: sqlite\n  display-name: SQLite\n  lazy-load: true\n  parent: sql-jdbc\n  connection-properties:\n    - name: db\n      display-name: Filename\n      placeholder: /home/camsaul/toucan_sightings.sqlite\n      required: true\ninit:\n  - step: load-namespace\n    namespace: metabase.driver.sqlite\n  - step: register-jdbc-driver\n    class: org.sqlite.JDBC\n```\n\n----------------------------------------\n\nTITLE: Setting Environment Variables for Metabase JAR on Unix Systems\nDESCRIPTION: Example of how to set a Metabase environment variable when running from a JAR file on Mac, Linux, and other Unix-based systems.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n# Mac, Linux and other Unix-based systems\nexport MB_SITE_NAME=\"Awesome Company\"\n# Windows Powershell\n$env:MB_SITE_NAME=\"Awesome Company\"\n# Windows batch/cmd\nset MB_SITE_NAME=\"Awesome Company\"\n\njava --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: Configuring JWT Identity Provider URI in Metabase (Text)\nDESCRIPTION: This value should be pasted into the 'JWT IDENTITY PROVIDER URI' field within Metabase Admin Settings (Authentication > JWT Setup). It specifies the URL endpoint in the embedding application's backend server that handles JWT authentication requests from Metabase. For the sample app running locally, this defaults to `localhost:9090/sso/metabase`. Replace `localhost` and the port if your application server runs elsewhere.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/quickstart-with-sample-app.md#2025-04-23_snippet_3\n\nLANGUAGE: txt\nCODE:\n```\nlocalhost:9090/sso/metabase\n```\n\n----------------------------------------\n\nTITLE: Managing Metabase Service Lifecycle - Bash\nDESCRIPTION: These commands start, stop, or restart the running Metabase service using systemd. Requires sudo privileges. Input: simple service control; Output: Metabase stopped, started, or restarted as needed.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-debian.md#2025-04-23_snippet_11\n\nLANGUAGE: bash\nCODE:\n```\nsudo systemctl start metabase.service\\nsudo systemctl stop metabase.service\\nsudo systemctl restart metabase.service\n```\n\n----------------------------------------\n\nTITLE: Listing H2 Database Files in Shell\nDESCRIPTION: Uses the `ls` command to list files starting with 'metabase.' in the current directory. This is typically used to locate the H2 database files created by default Metabase installations.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/configuring-application-database.md#2025-04-23_snippet_8\n\nLANGUAGE: sh\nCODE:\n```\nls metabase.*\n```\n\n----------------------------------------\n\nTITLE: Generating SAML Group Attributes in Okta Expression Language\nDESCRIPTION: This snippet demonstrates the use of Okta Expression Language to create an attribute statement for SAML integration with Metabase. It collects and flattens Okta group names for a specified list of Group IDs, returning the group names as an array which Metabase can use to map group memberships. The required dependency is an Okta environment with SAML integration and the 'SAML_SUPPORT_ARRAY_ATTRIBUTES' feature enabled. The parameters include a set of group IDs, the property 'group.name', and a maximum group count (100); outputs an array of group names for the user. Applicable only if array attributes are supported.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/people-and-groups/saml-okta.md#2025-04-23_snippet_1\n\nLANGUAGE: Okta Expression Language\nCODE:\n```\nArrays.flatten(getFilteredGroups({\"groupID1\", \"groupID2\"}, \"group.name\", 100))\n```\n\n----------------------------------------\n\nTITLE: Configuring MB_LDAP_ATTRIBUTE_LASTNAME Environment Variable in Metabase\nDESCRIPTION: Specifies the LDAP attribute name used to retrieve the user's last name during LDAP authentication. A common value is 'sn'. Type: string. Default: `sn`. Corresponds to `ldap-attribute-lastname` in the configuration file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_26\n\nLANGUAGE: plaintext\nCODE:\n```\nMB_LDAP_ATTRIBUTE_LASTNAME=sn\n```\n\n----------------------------------------\n\nTITLE: Inspecting Environment Variables in Docker Container\nDESCRIPTION: Command to inspect environment variables set in a Docker container, helpful for verifying database connection parameters.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/docker.md#2025-04-23_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\ndocker inspect some-postgres -f '{{ .Config.Env }}'\n```\n\n----------------------------------------\n\nTITLE: Importing Generated Metabase React Components in JSX\nDESCRIPTION: This code snippet shows how to import the React components generated by the Metabase Embedding SDK CLI into your application's codebase. The import allows you to use example analytic components, such as dashboards and provider wrappers, for seamless integration and demonstration. The import path should be updated based on your actual file structure.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/quickstart-cli.md#2025-04-23_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\n{% include_file \"{{ dirname }}/snippets/quickstart-cli/example.tsx\" snippet=\"imports\" %}\n```\n\n----------------------------------------\n\nTITLE: Running Quick Docker Setup for Metabase Sample App (Bash)\nDESCRIPTION: Starts the Docker-based quick setup process for the sample application and Metabase. This command executes a script that pulls a Metabase Docker image, runs it, configures JWT SSO within that Metabase instance, and then builds and runs the sample React application with an embedded interactive question. Requires Docker, yarn, and a configured `.env.docker` file with a premium embedding token.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/quickstart-with-sample-app.md#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nyarn start\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom Font Files in Metabase\nDESCRIPTION: JSON configuration example for specifying custom font files with different weights and formats for the Metabase interface.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_6\n\nLANGUAGE: json\nCODE:\n```\n[\n  {\n    \"src\": \"https://example.com/resources/font-400\",\n    \"fontFormat\": \"ttf\",\n    \"fontWeight\": 400\n  },\n  {\n    \"src\": \"https://example.com/resources/font-700\",\n    \"fontFormat\": \"woff\",\n    \"fontWeight\": 700\n  }\n]\n```\n\n----------------------------------------\n\nTITLE: Running Release Script - Method 2\nDESCRIPTION: Alternative method to execute the Metabase release script using Clojure CLI with specific aliases.\nSOURCE: https://github.com/metabase/metabase/blob/master/bin/release.md#2025-04-23_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\nclojure -X:drivers:build:build/release\n```\n\n----------------------------------------\n\nTITLE: Rolling Back Migration with Docker Run - Shell\nDESCRIPTION: This Docker command runs the Metabase image with environment variables set for database connection, and invokes the 'migrate down' operation to roll back schema changes. The '--rm' flag cleans up the container after execution. Inputs: Each '-e' environment variable, appropriate Metabase Docker image. Output: Database rolled back to a previous schema. Placeholders should be replaced with actual values.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/upgrading-metabase.md#2025-04-23_snippet_8\n\nLANGUAGE: shell\nCODE:\n```\ndocker run\n  -e \\\"MB_DB_TYPE=postgres\\\" \\\n  -e \\\"MB_DB_DBNAME=metabaseappdb\\\" \\\n  -e \\\"MB_DB_PORT=5432\\\" \\\n  -e \\\"MB_DB_USER=name\\\" \\\n  -e \\\"MB_DB_PASS=password\\\" \\\n  -e \\\"MB_DB_HOST=my-database-host\\\" \\\n--rm metabase/metabase \\\"migrate down\\\"\n```\n\n----------------------------------------\n\nTITLE: Setting Language for Static Embedded Dashboard - Metabase - plaintext\nDESCRIPTION: This snippet provides an example of specifying the locale (UI language) for a static embedded dashboard in Metabase by appending a 'locale' parameter to the embed URL. This approach requires access to public dashboard links and knowledge of supported locale codes (e.g., 'ko' for Korean). The main input is the URL with appended '#locale=ko', which changes Metabase UI elements in the embed to the selected language. The output is the embedded dashboard displayed in the chosen UI language, although the actual dashboard content is not automatically translated.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/static-embedding-parameters.md#2025-04-23_snippet_9\n\nLANGUAGE: plaintext\nCODE:\n```\nhttps://metabase.example.com/public/dashboard/7b6e347b-6928-4aff-a56f-6cfa5b718c6b?category=&city=&state=#locale=ko\n```\n\n----------------------------------------\n\nTITLE: Using SUMIF Spreadsheet Formula - Spreadsheet Formula\nDESCRIPTION: This snippet demonstrates how to use the SUMIF formula in spreadsheets to sum values in column A where the matching value in column B is \"Basic\". It is an exact analog to the Metabase SumIf expression, requires structured tabular data, and produces a single sum value.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/sumif.md#2025-04-23_snippet_10\n\nLANGUAGE: Spreadsheet Formula\nCODE:\n```\n=SUMIF(B:B, \"Basic\", A:A)\n```\n\n----------------------------------------\n\nTITLE: Basic SQL Permission Test Query\nDESCRIPTION: A simple SQL query to test if a user has basic permissions to access a specific table. Used to verify database access privileges and connection credentials.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/data-permissions.md#2025-04-23_snippet_0\n\nLANGUAGE: sql\nCODE:\n```\nSELECT 1\nFROM <your table>;\n```\n\n----------------------------------------\n\nTITLE: Manual SSH Tunnel Setup\nDESCRIPTION: Command to manually establish an SSH tunnel for connecting to a database server. This creates a local port forwarding connection that can be used as an alternative to Metabase's built-in SSH tunneling.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/ssh-tunnel.md#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nssh -Nf -L input-port:internal-server-name:port-on-server username@bastion-host.domain.com\n```\n\n----------------------------------------\n\nTITLE: Configuring MB_LANDING_PAGE_ILLUSTRATION_CUSTOM Environment Variable in Metabase\nDESCRIPTION: Specifies the URL or path to a custom illustration image to be displayed on the landing page when `MB_LANDING_PAGE_ILLUSTRATION` allows for custom images. Available only on Metabase Pro and Enterprise plans. Type: string. Default: `null`. Exported as `landing-page-illustration-custom`. Corresponds to `landing-page-illustration-custom` in the configuration file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_23\n\nLANGUAGE: plaintext\nCODE:\n```\nMB_LANDING_PAGE_ILLUSTRATION_CUSTOM=null\n```\n\n----------------------------------------\n\nTITLE: Clearing Database Locks in Metabase\nDESCRIPTION: This command is used to manually clear database locks in Metabase when the application fails to start due to a lingering lock. It runs the Metabase JAR file with the 'migrate release-locks' flag.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/loading-from-h2.md#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\njava --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar migrate release-locks\n```\n\n----------------------------------------\n\nTITLE: GitHub Raw Font URL Pattern\nDESCRIPTION: Pattern for constructing a raw GitHub URL to link directly to font files hosted in a public GitHub repository. This format ensures the font files are properly accessible for embedding in Metabase.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/fonts.md#2025-04-23_snippet_1\n\nLANGUAGE: txt\nCODE:\n```\nraw.githubusercontent.com/${user}/${repo}/${branch}/${path}\n```\n\n----------------------------------------\n\nTITLE: Installing the Metabase Systemd Service File (Shell)\nDESCRIPTION: This command moves the previously generated `metabase.service` file into the standard systemd unit file directory (`/etc/systemd/system`). This makes the service definition available to systemd. Requires `sudo` privileges and the `metabase.service` file in the current directory.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-podman.md#2025-04-23_snippet_11\n\nLANGUAGE: shell\nCODE:\n```\nsudo mv metabase.service /etc/systemd/system\n```\n\n----------------------------------------\n\nTITLE: Running a Basic Query to Check Database Connectivity in Metabase\nDESCRIPTION: A simple SQL query to test database connectivity and permissions when troubleshooting sync issues. This query attempts to select a single row from a specified table or view, which helps identify connection or privilege errors.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/sync-fingerprint-scan.md#2025-04-23_snippet_0\n\nLANGUAGE: sql\nCODE:\n```\nSELECT\n   *\nFROM\n    \"your_schema\".\"your_table_or_view\"\nLIMIT 1\n```\n\n----------------------------------------\n\nTITLE: Defining Storybook Meta for TextInput\nDESCRIPTION: This snippet sets up the Storybook Meta component for the TextInput stories.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/TextInput/TextInput.mdx#2025-04-23_snippet_1\n\nLANGUAGE: JSX\nCODE:\n```\n<Meta of={TextInputStories} />\n```\n\n----------------------------------------\n\nTITLE: Dynamic ID Loading with Entity Loader in React\nDESCRIPTION: Demonstrates how to use a function to dynamically determine the ID to load based on component props. This allows for loading different database objects based on URL parameters.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/frontend.md#2025-04-23_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\n@Databases.load({\n  id: (state, props) => props.params.databaseId\n}))\n```\n\n----------------------------------------\n\nTITLE: Generating a Systemd Service File for Metabase Container (Shell)\nDESCRIPTION: This command uses Podman's built-in feature to generate a systemd unit file (`metabase.service`) for the container named 'metabase'. The `--new` flag ensures it creates a service managing the container lifecycle independently. Requires a running container named 'metabase' and potentially `sudo` privileges depending on Podman setup.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-podman.md#2025-04-23_snippet_10\n\nLANGUAGE: shell\nCODE:\n```\nsudo podman generate systemd --new --name metabase > metabase.service\n```\n\n----------------------------------------\n\nTITLE: Using String Function concat() in Metabase\nDESCRIPTION: The concat function combines two or more strings together. It takes multiple columns or string values as inputs.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_26\n\nLANGUAGE: sql\nCODE:\n```\nconcat([Last Name], \", \", [First Name])\n```\n\n----------------------------------------\n\nTITLE: Example Test Extension Namespace for MySQL Driver\nDESCRIPTION: Complete example showing how to set up a test extension namespace for a MySQL driver in Metabase, including the namespace declaration and registration of test extensions.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/drivers/driver-tests.md#2025-04-23_snippet_4\n\nLANGUAGE: clojure\nCODE:\n```\n(ns metabase.test.data.mysql\n  (:require [metabase.test.data.sql-jdbc :as sql-jdbc.tx]))\n\n(sql-jdbc.tx/register-test-extensions! :mysql)\n```\n\n----------------------------------------\n\nTITLE: Configuring MetabaseProvider Authentication in Next.js (TypeScript/TSX)\nDESCRIPTION: Defines the `authConfig` object to configure JWT authentication within the `MetabaseProvider`. It specifies the `authType` as 'jwt' and provides the relative `authUrl` pointing to the server-side API route responsible for generating the Metabase SSO URL. This example shows the path `/sso/metabase` suitable for App Router, but `/api/sso/metabase` would be used for Pages Router.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/next-js.md#2025-04-23_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nconst authConfig = {\n  authType: \"jwt\" as const,\n  // Assumes you have an API route at /sso/metabase\n  authUrl: \"/sso/metabase\",\n};\n```\n\n----------------------------------------\n\nTITLE: Grasp Library Usage for Finding Translation Forms in Clojure\nDESCRIPTION: Example of using the Grasp library to find all translation function calls (trs, tru) in a Clojure file. It demonstrates how to extract translation strings along with their metadata (line numbers, file paths).\nSOURCE: https://github.com/metabase/metabase/blob/master/bin/i18n/README.md#2025-04-23_snippet_1\n\nLANGUAGE: clojure\nCODE:\n```\nenumerate=> (def single-file (str u/project-root-directory \"/src/metabase/util.clj\"))\n#'i18n.enumerate/single-file\nenumerate=> (map (juxt meta identity)\n                 (g/grasp single-file ::translate))\n([{:line 81,\n   :column 13,\n   :uri \"file:/Users/dan/projects/work/metabase/src/metabase/util.clj\"}\n  (trs\n   \"Maximum memory available to JVM: {0}\"\n   (format-bytes (.maxMemory (Runtime/getRuntime))))]\\n [{:line 313,\n   :column 33,\n   :uri \"file:/Users/dan/projects/work/metabase/src/metabase/util.clj\"}\n  (tru \"Timed out after {0}\" (format-milliseconds timeout-ms))]\\n [{:line 504,\n   :column 26,\n   :uri \"file:/Users/dan/projects/work/metabase/src/metabase/util.clj\"}\n  (tru \"Not something with an ID: {0}\" (pr-str object-or-id))])\n```\n\n----------------------------------------\n\nTITLE: Setting up Storybook Meta for FileInput\nDESCRIPTION: This snippet sets up the Storybook metadata for the FileInput component stories.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/FileInput/FileInput.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n<Meta of={FileInputStories} />\n```\n\n----------------------------------------\n\nTITLE: Setting iframe src attribute for Metabase home page embedding in HTML\nDESCRIPTION: Code example showing how to set the src attribute of an iframe to embed the Metabase home page. This is the simplest form of embedding that points directly to the Metabase instance URL.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/interactive-embedding.md#2025-04-23_snippet_0\n\nLANGUAGE: html\nCODE:\n```\nsrc=\"http://metabase.yourcompany.com/\"\n```\n\n----------------------------------------\n\nTITLE: Extracting Campaign Names from URLs Using Metabase Expression Syntax\nDESCRIPTION: This Metabase custom expression uses regexextract to parse a campaign name from a URL string where the utm_campaign query parameter is present. The function takes two parameters: the source text (usually a column reference) and a regular expression. It returns the extracted substring matched by the first capturing group or null if not matched. Used in custom columns or filters, it works only with string data types and has backend limitations (not available on all databases).\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/regexextract.md#2025-04-23_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nregexextract([URL], \"^[^?#]+\\?utm_campaign=(.*)\")\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom UI Colors in Metabase\nDESCRIPTION: JSON configuration example for customizing interface colors and chart colors in Metabase Pro and Enterprise editions.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n \"brand\":\"#ff003b\",\n \"filter\":\"#FF003B\",\n \"summarize\":\"#FF003B\"\n}\n```\n\n----------------------------------------\n\nTITLE: Using Variance in Metabase Custom Expressions - Markdown\nDESCRIPTION: Provides instructions for returning the numeric variance of a column's values using the Variance expression in Metabase. Takes a single column; returns the measure of dispersion. Not available on Druid and SQLite.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_11\n\nLANGUAGE: Markdown\nCODE:\n```\nSyntax: `Variance(column)`\n\nExample: `Variance([Temperature])` will return a measure of the dispersion from the mean temperature for all temps in that column.\n\nRelated: [StandardDeviation](#standarddeviation), [Average](#average).\n\nDatabases that don't support `Variance`: Druid, SQLite.\n```\n\n----------------------------------------\n\nTITLE: Importing Metabase Artifacts via CLI\nDESCRIPTION: Command to import exported artifacts into a Metabase instance using the CLI. This command should be run from the directory where the target Metabase is located.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/serialization.md#2025-04-23_snippet_11\n\nLANGUAGE: bash\nCODE:\n```\njava --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar import path_to_export\n```\n\n----------------------------------------\n\nTITLE: Configuring MB_JWT_ATTRIBUTE_GROUPS Environment Variable in Metabase\nDESCRIPTION: Specifies the key used to retrieve the user's group memberships from the JWT payload during JWT authentication. Available only on Metabase Pro and Enterprise plans. Type: string. Default: `groups`. Corresponds to `jwt-attribute-groups` in the configuration file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_13\n\nLANGUAGE: plaintext\nCODE:\n```\nMB_JWT_ATTRIBUTE_GROUPS=groups\n```\n\n----------------------------------------\n\nTITLE: Configuring ClickHouse Settings Example\nDESCRIPTION: Example of how to specify additional ClickHouse settings using a comma-separated string format. Shows how to enable experimental analyzer and set maximum result rows.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/connections/clickhouse.md#2025-04-23_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nallow_experimental_analyzer=1,max_result_rows=100\n```\n\n----------------------------------------\n\nTITLE: Running Metabase with Custom Log4j Configuration in Java\nDESCRIPTION: Command to run Metabase with a custom Log4j configuration file. This allows for customized logging behavior.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/log-configuration.md#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\njava -Dlog4j.configurationFile=file:/path/to/custom/log4j2.xml -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: Generating Metabase Environment Variable Documentation\nDESCRIPTION: Command for generating environment variable documentation from the Metabase source code.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_3\n\nLANGUAGE: clojure\nCODE:\n```\nclojure -M:ee:doc environment-variables-documentation\n```\n\n----------------------------------------\n\nTITLE: Generating RSA SSH Test Key\nDESCRIPTION: Command to generate an RSA SSH key in PEM format. This key is used for ssh_test_invalid and ssh_test_passphrase tests.\nSOURCE: https://github.com/metabase/metabase/blob/master/test_resources/ssh/README.md#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ ssh-keygen -t rsa -m PEM\n```\n\n----------------------------------------\n\nTITLE: Checking Out a Specific Git Branch (Generic)\nDESCRIPTION: Switches the current working directory to a specified Git branch. Replace `<branch-name>` with the actual name of the branch you want to work on.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/build.md#2025-04-23_snippet_10\n\nLANGUAGE: shell\nCODE:\n```\ngit checkout <branch-name>\n```\n\n----------------------------------------\n\nTITLE: Configuring MB_LANDING_PAGE Environment Variable in Metabase\nDESCRIPTION: Specifies a URL to redirect users to after login, overriding the default Metabase homepage or any custom homepage setting. Type: string. Default: Empty string ``. Exported as `landing-page`. Corresponds to `landing-page` in the configuration file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_21\n\nLANGUAGE: plaintext\nCODE:\n```\nMB_LANDING_PAGE=\n```\n\n----------------------------------------\n\nTITLE: Displaying Single Button Modal Example in Storybook Canvas (JSX)\nDESCRIPTION: This snippet inserts the 'SingleButton' modal story inside a Canvas, showcasing a modal dialog with a single button. The example reinforces the guideline that modals can have just one button when appropriate, and is interactively demonstrated via Storybook.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/overlays/Modal/Modal.mdx#2025-04-23_snippet_4\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={ModalStories.SingleButton} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Configuring Prometheus Scrape Target - YAML\nDESCRIPTION: This YAML configuration sets up Prometheus to scrape metrics from a local Metabase instance on the specified port (e.g., 9191). The global section configures scrape intervals and external labels, while scrape_configs defines the target (\"localhost:9191\") and a job named \"prometheus\". Required dependencies are Prometheus installed locally and Metabase running with metrics export enabled. Key parameters: scrape_interval for polling frequency, targets for host:port assignment. Output is that Prometheus collects metrics at defined intervals from Metabase.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/observability-with-prometheus.md#2025-04-23_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\nglobal:\n  scrape_interval: 15s # By default, scrape targets every 15 seconds.\n\n  # Attach these labels to any time series or alerts when communicating with\n  # external systems (federation, remote storage, Alertmanager).\n  external_labels:\n    monitor: \"codelab-monitor\"\n\n# A scrape configuration containing exactly one endpoint to scrape:\n# Here it's Prometheus itself.\nscrape_configs:\n  # The job name is added as a label `job=<job_name>` to any timeseries scraped from this config.\n  - job_name: \"prometheus\"\n\n    # Override the global default and scrape targets from this job every 5 seconds.\n    scrape_interval: 5s\n    # use whatever port here that you set for MB_PROMETHEUS_SERVER_PORT\n    static_configs:\n      - targets: [\"localhost:9191\"]\n```\n\n----------------------------------------\n\nTITLE: Rendering FileInput Stories with Various Configurations\nDESCRIPTION: This snippet shows multiple stories for FileInput with different sizes and states.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/FileInput/FileInput.mdx#2025-04-23_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={FileInputStories.EmptyMd} />\n</Canvas>\n\n<Canvas>\n  <Story of={FileInputStories.AsteriskMd} />\n</Canvas>\n\n<Canvas>\n  <Story of={FileInputStories.DescriptionMd} />\n</Canvas>\n\n<Canvas>\n  <Story of={FileInputStories.DisabledMd} />\n</Canvas>\n\n<Canvas>\n  <Story of={FileInputStories.ErrorMd} />\n</Canvas>\n\n<Canvas>\n  <Story of={FileInputStories.IconMd} />\n</Canvas>\n\n<Canvas>\n  <Story of={FileInputStories.EmptyXs} />\n</Canvas>\n\n<Canvas>\n  <Story of={FileInputStories.AsteriskXs} />\n</Canvas>\n\n<Canvas>\n  <Story of={FileInputStories.DescriptionXs} />\n</Canvas>\n\n<Canvas>\n  <Story of={FileInputStories.DisabledXs} />\n</Canvas>\n\n<Canvas>\n  <Story of={FileInputStories.ErrorXs} />\n</Canvas>\n\n<Canvas>\n  <Story of={FileInputStories.IconXs} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Enabling ESLint in Development Mode\nDESCRIPTION: Command to enable ESLint during frontend development, which is disabled by default for faster builds.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/devenv.md#2025-04-23_snippet_6\n\nLANGUAGE: sh\nCODE:\n```\n$ USE_ESLINT=true yarn build-hot\n```\n\n----------------------------------------\n\nTITLE: Embedding Interactive Questions with Embedded Analytics SDK (TypeScript)\nDESCRIPTION: This snippet shows how to embed an interactive analytics question using the InteractiveQuestion component. The component, part of the Embedded analytics SDK and built with TypeScript/React, enables drill-through and user interaction features natively within the embed window. It requires a valid question identifier and can respond to user events, offering both visualization and exploration functionality.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/questions.md#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n```typescript\\n{% include_file \\\"{{ dirname }}/snippets/questions/interactive-question.tsx\\\" %}\\n```\n```\n\n----------------------------------------\n\nTITLE: Setting Environment Variables for E2E Tests in Bash\nDESCRIPTION: These environment variables are required for running EE E2E tests. They include the Metabase edition and authentication tokens.\nSOURCE: https://github.com/metabase/metabase/blob/master/enterprise/frontend/src/embedding-sdk/dev.md#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nMB_EDITION=ee\nCYPRESS_ALL_FEATURES_TOKEN=  ${usual token from password manager}\nCYPRESS_NO_FEATURES_TOKEN=  ${usual token from password manager}\n```\n\n----------------------------------------\n\nTITLE: Example of Resulting Dynamic URL in Metabase\nDESCRIPTION: This snippet shows the resulting URL when a user clicks on the value 'askew' in the 'Adjective' column, demonstrating how the dynamic URL is generated.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/data-modeling/metadata-editing.md#2025-04-23_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n```\nhttps://www.google.com/search?q=askew\n```\n```\n\n----------------------------------------\n\nTITLE: Checking Java Installation - Java Bash\nDESCRIPTION: Checks if Java is installed and displays the current Java version. This command is a prerequisite step before running Metabase; the output should confirm Java version 21 or above is installed. No dependencies are required except the Java binary being on the system PATH. Returns the Java version if installed, otherwise returns a command not found error.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-the-metabase-jar-file.md#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\njava -version\n```\n\n----------------------------------------\n\nTITLE: Defining Storybook Meta Component\nDESCRIPTION: This snippet sets up the Storybook Meta component to associate the documentation with Checkbox stories.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/Checkbox/Checkbox.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n<Meta of={CheckboxStories} />\n```\n\n----------------------------------------\n\nTITLE: Using String Function doesNotContain() in Metabase\nDESCRIPTION: The doesNotContain function checks if one string does not contain another within it. It performs case-sensitive matching by default but can do case-insensitive matching with an optional parameter.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_29\n\nLANGUAGE: sql\nCODE:\n```\ndoesNotContain([Status], \"Class\")\n```\n\nLANGUAGE: sql\nCODE:\n```\ndoesNotContain(string1, string2, \"case-insensitive\")\n```\n\n----------------------------------------\n\nTITLE: Custom Destination Parameter Pattern for Public Dashboard Links\nDESCRIPTION: Template pattern for creating custom drill-through between public dashboards by passing filter values in the URL. This pattern shows how to pass a column value from a parent dashboard to a child dashboard filter.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/public-links.md#2025-04-23_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n/public/dashboard/?child_filter_name={{parent_column_name}}\n```\n\n----------------------------------------\n\nTITLE: Using abs (absolute value) in Metabase Math Functions - Markdown\nDESCRIPTION: Explains how to obtain the absolute value of a column's entries using the abs function in Metabase custom expressions. Takes a single column as parameter, returns its non-negative form. Useful for removing number sign effects in calculations.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_18\n\nLANGUAGE: Markdown\nCODE:\n```\nSyntax: `abs(column)`\n\nExample: `abs([Debt])`. If `Debt` were -100, `abs(-100)` would return `100`.\n```\n\n----------------------------------------\n\nTITLE: Configuring MB_LANDING_PAGE_ILLUSTRATION Environment Variable in Metabase\nDESCRIPTION: Controls the display options for the illustration shown on the Metabase landing page. Available only on Metabase Pro and Enterprise plans. Type: string. Default: `default`. Exported as `landing-page-illustration`. Corresponds to `landing-page-illustration` in the configuration file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_22\n\nLANGUAGE: plaintext\nCODE:\n```\nMB_LANDING_PAGE_ILLUSTRATION=default\n```\n\n----------------------------------------\n\nTITLE: Configuring MB_HUMANIZATION_STRATEGY Environment Variable in Metabase\nDESCRIPTION: Sets the strategy for making table and field names more human-friendly (e.g., replacing underscores/dashes with spaces and capitalizing words like 'last_visited_at' to 'Last Visited At'). Type: keyword. Default: `:simple`. Exported as `humanization-strategy`. Corresponds to `humanization-strategy` in the configuration file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_9\n\nLANGUAGE: plaintext\nCODE:\n```\nMB_HUMANIZATION_STRATEGY=:simple\n```\n\n----------------------------------------\n\nTITLE: Copying Application Database from Container to Host\nDESCRIPTION: Copies the application database directory (`/metabase.db`) from a running or stopped Metabase container to the current directory on the host. Replace `CONTAINER_ID` with the actual ID or name of the container (e.g., `metabase`). The database files will be placed in a `metabase.db` subdirectory on the host.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-docker.md#2025-04-23_snippet_13\n\nLANGUAGE: shell\nCODE:\n```\ndocker cp CONTAINER_ID:/metabase.db ./\n```\n\n----------------------------------------\n\nTITLE: Installing JDK, Node.js, and Yarn on Ubuntu/Debian\nDESCRIPTION: This command installs OpenJDK 11, Node.js (LTS recommended), and Yarn globally using apt and npm on Ubuntu/Debian systems. These are essential prerequisites for building and running Metabase.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/build.md#2025-04-23_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nsudo apt install openjdk-11-jdk nodejs && sudo npm install --global yarn\n```\n\n----------------------------------------\n\nTITLE: Setting Metabase Max Session Age via Environment Variable (Bash)\nDESCRIPTION: This command launches the Metabase application JAR file while setting the `MAX_SESSION_AGE` environment variable. This variable defines the maximum duration (in minutes) a user session remains valid before requiring re-authentication, regardless of activity. In this example, it's set to 1440 minutes (24 hours). The `--add-opens` flag is a Java Virtual Machine (JVM) argument required for certain operations.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/people-and-groups/changing-session-expiration.md#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n# Change session expiration to 24 hours\nMAX_SESSION_AGE=1440 java --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: Data Type Extraction Table in Markdown\nDESCRIPTION: Markdown table showing different data types and their corresponding value extraction capabilities in Metabase, including URL semantic types, email semantic types, and temporal data types.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/data-modeling/field-types.md#2025-04-23_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n| Group by data type  | Extract                                 |\n| ------------------- | --------------------------------------- |\n| URL semantic types  | Extract host, domain, subdomain, path   |\n| Email semantic type | Extract host, domain                    |\n| Temporal data types | Extract date parts like month, day, etc |\n```\n\n----------------------------------------\n\nTITLE: Configuring Default Java Version on Linux\nDESCRIPTION: If multiple JDK versions are installed, this command allows the user to select which Java version should be used by default. Metabase requires JDK 11 or later (Java 21 mentioned specifically in the text context).\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/build.md#2025-04-23_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\nsudo update-alternatives --config java\n```\n\n----------------------------------------\n\nTITLE: Installing Rosetta 2 on M1 Apple Computers (Non-Root)\nDESCRIPTION: Installs Rosetta 2 on Apple Silicon (M1/M2) Macs without requiring root permissions. Rosetta 2 is needed for running x86_64 binaries, potentially including some Node.js dependencies, on ARM-based Macs.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/build.md#2025-04-23_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\n/usr/sbin/softwareupdate --install-rosetta\n```\n\n----------------------------------------\n\nTITLE: Configuring MB_JWT_GROUP_SYNC Environment Variable in Metabase\nDESCRIPTION: Enables or disables automatic synchronization of user group memberships based on JWT claims when a user logs in. Available only on Metabase Pro and Enterprise plans. Type: boolean. Default: `false`. Corresponds to `jwt-group-sync` in the configuration file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_17\n\nLANGUAGE: plaintext\nCODE:\n```\nMB_JWT_GROUP_SYNC=false\n```\n\n----------------------------------------\n\nTITLE: Consuming CSS Modules in React Components - JavaScript\nDESCRIPTION: Illustrates how to import a CSS module and apply a class to a React component using the imported styles object. Dependencies: React, CSS Modules.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/frontend.md#2025-04-23_snippet_17\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport S from \"./Foo.css\";\n\nconst Foo = () => <div className={S.primary} />;\n```\n\n----------------------------------------\n\nTITLE: Rendering Medium Size TimeInput with Error\nDESCRIPTION: Shows a medium size TimeInput component with an error state using Storybook Canvas and Story components.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.mdx#2025-04-23_snippet_8\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={TimeInputStories.ErrorMd} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Configuring Quartz Misfire Handling Instructions in Clojure\nDESCRIPTION: Illustrates different misfire handling instructions available in Quartz via the Quartzite wrapper for cron triggers. These instructions determine how the scheduler behaves when a trigger's scheduled fire time is missed, allowing options to do nothing, fire once, or fire all missed executions.\nSOURCE: https://github.com/metabase/metabase/blob/master/src/metabase/task/QUARTZ.md#2025-04-23_snippet_4\n\nLANGUAGE: clojure\nCODE:\n```\n(cron/with-misfire-handling-instruction-do-nothing)        ;; Don't fire missed executions\n(cron/with-misfire-handling-instruction-fire-and-proceed)  ;; Fire once for missed executions\n(cron/with-misfire-handling-instruction-ignore-misfires)   ;; Fire all missed executions\n```\n\n----------------------------------------\n\nTITLE: Java Heap Space Error Example\nDESCRIPTION: Example of the error message shown when Metabase runs out of JVM heap space.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/running.md#2025-04-23_snippet_0\n\nLANGUAGE: java\nCODE:\n```\njava.lang.OutOfMemoryError: Java heap space\n```\n\n----------------------------------------\n\nTITLE: Outbound IP Addresses to Whitelist for Metabase - Plain Text\nDESCRIPTION: This plain text snippet lists the IP addresses that must be allowed through outbound firewall rules to enable Metabase to validate its token and access premium features. These addresses should be added to your network allowlist for port 443. There are no dependencies; the list is referenced during setup of network egress policies to ensure communication with token-check.metabase.com.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/activating-the-enterprise-edition.md#2025-04-23_snippet_3\n\nLANGUAGE: plaintext\nCODE:\n```\n23.23.111.13\n44.199.18.109\n44.212.138.188\n```\n\n----------------------------------------\n\nTITLE: Configuring Postgres Database in deps.edn\nDESCRIPTION: Configuration for using Postgres instead of H2 for the Metabase application database using JVM options in a deps.edn file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/devenv.md#2025-04-23_snippet_11\n\nLANGUAGE: clojure\nCODE:\n```\n;; ~/.clojure/deps.edn\n\n{:aliases\n {:user\n  {:jvm-opts\n   [\"-Dmb.db.host=localhost\"\n    \"-Dmb.db.type=postgres\"\n    \"-Dmb.db.user=<username>\"\n    \"-Dmb.db.dbname=<dbname>\"\n    \"-Dmb.db.pass=\"]}}}\n```\n\n----------------------------------------\n\nTITLE: Installing Local Metabase SDK Build with Yarn\nDESCRIPTION: This command installs the locally built Metabase SDK from the resources folder using Yarn. It assumes the Metabase project is in a sibling directory.\nSOURCE: https://github.com/metabase/metabase/blob/master/enterprise/frontend/src/embedding-sdk/dev.md#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nyarn add file:../metabase/resources/embedding-sdk\n```\n\n----------------------------------------\n\nTITLE: Using Offset for Previous Row Value Comparison\nDESCRIPTION: Illustrates the use of `Offset` to create a 'Previous' column by fetching the `Count` value from the preceding row, as shown in the example table. This example highlights that `Offset` operates on existing rows and may produce unexpected results if intermediate data points (like days) are missing.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/offset.md#2025-04-23_snippet_2\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nOffset(Count, -1)\n```\n\n----------------------------------------\n\nTITLE: Defining Storybook Meta for Card Component in JSX\nDESCRIPTION: This snippet sets up the Storybook metadata for the Card component stories. It links the documentation to the CardStories module.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/data-display/Card/Card.mdx#2025-04-23_snippet_1\n\nLANGUAGE: JSX\nCODE:\n```\n<Meta of={CardStories} />\n```\n\n----------------------------------------\n\nTITLE: Specifying Raw Unformatted Data Export in Metabase Public Links\nDESCRIPTION: URL parameter to export raw, unformatted data from a public question link in Metabase. The format_rows=false parameter instructs Metabase to return unformatted data rows rather than applying display formatting.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/public-links.md#2025-04-23_snippet_0\n\nLANGUAGE: html\nCODE:\n```\nhttps://www.example.com/public/question/cf347ce0-90bb-4669-b73b-56c73edd10cb.csv?format_rows=false\n```\n\n----------------------------------------\n\nTITLE: Running the Latest Metabase Development Head via Docker\nDESCRIPTION: This command runs a Docker container using the `metabase/metabase-enterprise-head:latest` image, which should ideally be pulled beforehand using `docker pull`. It runs the container in detached mode (`-d`), maps port 3000 (`-p 3000:3000`), names the container `metabase`, and specifies the `linux/amd64` platform. Requires Docker to be installed and running. This starts Metabase with a fresh database.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/dev-branch-docker.md#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\ndocker run --platform linux/amd64 -d -p 3000:3000 --name metabase metabase/metabase-enterprise-head:latest\n```\n\n----------------------------------------\n\nTITLE: Using startsWith Function for Text Matching in Metabase Expressions\nDESCRIPTION: Checks if the beginning of a text string matches a specified comparison string. The comparison is case-sensitive by default but can be made case-insensitive by adding the optional third parameter 'case-insensitive'. Returns true if the text starts with the comparison string, false otherwise.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_45\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nstartsWith(text, comparison)\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nstartsWith(text, comparison, \"case-insensitive\")\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nstartsWith([Course Name], \"Computer Science\")\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nstartsWith([Course Name], \"Computer Science\", \"case-insensitive\")\n```\n\n----------------------------------------\n\nTITLE: Rendering Card.Section Story in Storybook Canvas\nDESCRIPTION: This snippet demonstrates how to render a Card.Section story within a Storybook Canvas. It showcases the usage of the Card.Section subcomponent.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/data-display/Card/Card.mdx#2025-04-23_snippet_4\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={CardStories.CardSection} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Placeholder for React InteractiveQuestion Component Example (Jekyll/Liquid)\nDESCRIPTION: This is a Jekyll/Liquid include tag used within the Metabase documentation source files. It dynamically inserts a code snippet named 'example' from the file 'example.tsx' located in a specific snippets directory relative to the current documentation file. This snippet demonstrates how the `InteractiveQuestion` component from the Metabase Embedding SDK is implemented within the sample React application's `App.jsx` file, showing how to render an interactive Metabase question.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/quickstart-with-sample-app.md#2025-04-23_snippet_14\n\nLANGUAGE: javascript\nCODE:\n```\n{% include_file \"{{ dirname }}/snippets/quickstart-with-sample-app/example.tsx\" snippet=\"example\" %}\n```\n\n----------------------------------------\n\nTITLE: Enabling Jetty Debug Logs in Log4j 2 XML for Metabase\nDESCRIPTION: XML configuration to enable debug logging for Jetty web server in Metabase. This provides more detailed logs for the web server component.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/log-configuration.md#2025-04-23_snippet_2\n\nLANGUAGE: xml\nCODE:\n```\n<Logger name=\"org.eclipse.jetty\" level=\"DEBUG\"/>\n```\n\n----------------------------------------\n\nTITLE: Setting MySQL Connection URI for Metabase Database\nDESCRIPTION: Example of setting a JDBC connection URI for a MySQL database. This can be used as an alternative to individual MB_DB_* variables.\nSOURCE: https://github.com/metabase/metabase/blob/master/src/metabase/cmd/resources/other-env-vars.md#2025-04-23_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\njdbc:mysql://db.example.com:3306/mydb?user=dbuser&password=dbpassword\n```\n\n----------------------------------------\n\nTITLE: Conditional Sum in Python using pandas - Python\nDESCRIPTION: This Python code sums the Payment column in a pandas DataFrame where the Plan column matches \"Basic\" using loc filtering. It expects that df is a pandas DataFrame with the relevant columns and returns a single numeric value.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/sumif.md#2025-04-23_snippet_11\n\nLANGUAGE: Python\nCODE:\n```\ndf.loc[df['Plan'] == \"Basic\", 'Payment'].sum()\n```\n\n----------------------------------------\n\nTITLE: Creating Custom Metabase Docker Image\nDESCRIPTION: Uses docker commit to create a new custom Docker image from a stopped Metabase container, preserving the configuration.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-docker.md#2025-04-23_snippet_16\n\nLANGUAGE: bash\nCODE:\n```\ndocker commit ca072cd44a49 mycompany/metabase-custom\n```\n\n----------------------------------------\n\nTITLE: Running PostgreSQL Client in Docker for Database Troubleshooting\nDESCRIPTION: Command to start a temporary PostgreSQL client container, useful for testing database connectivity from the same Docker environment.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/docker.md#2025-04-23_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\ndocker run --name postgres-client --rm -ti --entrypoint /bin/bash postgres\n```\n\n----------------------------------------\n\nTITLE: Testing Basic SQL Connection with SELECT Query\nDESCRIPTION: A simple SQL query to test if the database connection is working correctly. Running this query in the Metabase SQL editor will verify that the connection to the database is established and functioning.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/db-connection.md#2025-04-23_snippet_0\n\nLANGUAGE: sql\nCODE:\n```\nSELECT 1\n```\n\n----------------------------------------\n\nTITLE: Example SAML Issuer ID Format\nDESCRIPTION: Demonstrates the typical format of a SAML Identity Provider Issuer or Entity ID. This is a unique identifier that should match between your identity provider's metadata and Metabase configuration.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/saml.md#2025-04-23_snippet_0\n\nLANGUAGE: text\nCODE:\n```\nhttp://www.example.com/141xkex604w0Q5PN724v\n```\n\n----------------------------------------\n\nTITLE: Accessing Shell in a Running Container\nDESCRIPTION: Command to access a shell in a running Docker container, helpful for running network diagnostic tools inside the container.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/docker.md#2025-04-23_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\ndocker exec -ti container-name bash\n```\n\n----------------------------------------\n\nTITLE: Setting Default Value and Hiding Filter Widget in Embed URL\nDESCRIPTION: Demonstrates how to simultaneously set a default value for a filter using a query parameter (`?`) and hide its corresponding widget using a fragment identifier (`#`). The example sets 'breakfast' to 'Scrambled_eggs' and hides the 'breakfast' filter widget. These are unsigned parameters added to the iframe src.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/static-embedding-parameters.md#2025-04-23_snippet_7\n\nLANGUAGE: url\nCODE:\n```\nyour_embedding_url?breakfast=Scrambled_eggs#hide_parameters=breakfast\n```\n\n----------------------------------------\n\nTITLE: Importing Textarea Component in React\nDESCRIPTION: This snippet shows how to import the Textarea component and related Storybook elements for documentation purposes.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/Textarea/Textarea.mdx#2025-04-23_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { Icon } from \"metabase/ui\";\nimport { Stack, Textarea } from \"metabase/ui\";\nimport * as TextareaStories from \"./Textarea.stories\";\n```\n\n----------------------------------------\n\nTITLE: Loading Database Object with Render Props Component in React\nDESCRIPTION: Shows how to use the Databases Entity Loader as a render props component to fetch and display a specific database. This approach provides the loaded database through a render callback function.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/frontend.md#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\nimport React from \"react\";\nimport Databases from \"metabase/entities/databases\";\n\nclass MyNewPage extends React.Component {\n  render() {\n    const { database } = this.props;\n    return (\n      <div>\n        <Databases.Loader id={4}>\n          {({ database }) => <h1>{database.name}</h1>}\n        </Databases.Loader>\n      </div>\n    );\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: CSS Font Face Definition Example for Google Fonts\nDESCRIPTION: An example of CSS @font-face definitions for Roboto Mono font as returned by Google Fonts API. It shows how font files are defined for different character sets with weight, style, and source URL specifications.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/fonts.md#2025-04-23_snippet_0\n\nLANGUAGE: css\nCODE:\n```\n* cyrillic-ext */\n@font-face {\n  font-family: 'Roboto Mono';\n  font-style: normal;\n  font-weight: 400;\n  font-display: swap;\n  src: url(https://fonts.gstatic.com/s/robotomono/v21/L0xTDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vrtSM1J-gEPT5Ese6hmHSV0me8iUI0lkQ.woff2) format('woff2');\n  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;\n}\n/* cyrillic */\n@font-face {\n  font-family: 'Roboto Mono';\n  font-style: normal;\n  font-weight: 400;\n  font-display: swap;\n  src: url(https://fonts.gstatic.com/s/robotomono/v21/L0xTDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vrtSM1J-gEPT5Ese6hmHSx0me8iUI0lkQ.woff2) format('woff2');\n  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;\n}\n...\n```\n\n----------------------------------------\n\nTITLE: Viewing Metabase Startup Logs - Sample Output\nDESCRIPTION: Sample output from the Metabase server starting up, showing initialization logs for various background tasks. These log entries confirm successful initialization and which tasks have been scheduled. No dependencies or inputs, use for reference only.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-the-metabase-jar-file.md#2025-04-23_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\n...\\n06-19 10:29:34 INFO metabase.task :: Initializing task CheckForNewVersions\\n06-19 10:29:34 INFO metabase.task :: Initializing task SendAnonymousUsageStats\\n06-19 10:29:34 INFO metabase.task :: Initializing task SendAbandomentEmails\\n06-19 10:29:34 INFO metabase.task :: Initializing task SendPulses\\n06-19 10:29:34 INFO metabase.task :: Initializing task SendFollowUpEmails\\n06-19 10:29:34 INFO metabase.task :: Initializing task TaskHistoryCleanup\\n06-19 10:29:34 INFO metabase.core :: Metabase Initialization COMPLETE\n```\n\n----------------------------------------\n\nTITLE: Directory Structure Example for Metabase with Vertica Support\nDESCRIPTION: Shows the expected directory structure when setting up Metabase to work with Vertica. The example demonstrates where to place the Vertica JDBC driver JAR file in relation to the Metabase JAR file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/connections/vertica.md#2025-04-23_snippet_0\n\nLANGUAGE: txt\nCODE:\n```\n# example directory structure for running Metabase with Vertica support\n/app/metabase.jar\n/app/plugins/vertica-jdbc-8.0.0-0.jar\n```\n\n----------------------------------------\n\nTITLE: Disabling Docker Containers for Cypress Tests\nDESCRIPTION: Command to run Cypress tests without starting the Docker containers that support external services like QA databases, Webmail, Snowplow, and LDAP servers.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/e2e-tests.md#2025-04-23_snippet_6\n\nLANGUAGE: shell\nCODE:\n```\nSTART_CONTAINERS=false yarn test-cypress\n```\n\n----------------------------------------\n\nTITLE: Implementing Honey SQL Version Selection for SQL Drivers (Metabase 0.46.0)\nDESCRIPTION: Example of how to implement the 'honey-sql-version' multimethod to specify which version of Honey SQL a driver should use. This is relevant for SQL drivers during the transition period between Honey SQL 1 and 2.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/driver-changelog.md#2025-04-23_snippet_13\n\nLANGUAGE: clojure\nCODE:\n```\n(require '[metabase.driver.sql.query-processor :as sql.qp])\n\n;;; use Honey SQL 2 for :my-driver\n(defmethod sql.qp/honey-sql-version :my-driver\n  [_driver]\n  2)\n```\n\n----------------------------------------\n\nTITLE: Metabase Expression Equivalent to PostgreSQL SQL\nDESCRIPTION: This Metabase custom expression is shown as the equivalent to the preceding PostgreSQL SQL query. It calculates the difference between the 'Aging Start' and 'Aging End' columns in whole months using the `datetimeDiff` function.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/datetimediff.md#2025-04-23_snippet_4\n\nLANGUAGE: plaintext\nCODE:\n```\ndatetimeDiff([Aging Start], [Aging End], \"month\")\n```\n\n----------------------------------------\n\nTITLE: Defining Storybook Meta for Menu Component\nDESCRIPTION: This snippet sets up the Storybook meta information for the Menu component stories.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/overlays/Menu/Menu.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n<Meta of={MenuStories} />\n```\n\n----------------------------------------\n\nTITLE: Rendering Medium Size Filled TimeInput Example\nDESCRIPTION: Shows a medium size TimeInput component with a pre-filled value using Storybook Canvas and Story components.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.mdx#2025-04-23_snippet_4\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={TimeInputStories.FilledMd} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Defining a namespace for a Metabase driver in Clojure\nDESCRIPTION: Creates a namespace for a custom FoxPro '98 driver and requires the core Metabase driver namespace. The namespace follows Java package naming conventions for organization.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/drivers/multimethods.md#2025-04-23_snippet_0\n\nLANGUAGE: clojure\nCODE:\n```\n;; Define a namespace for the driver\n(ns com.mycompany.metabase.driver.foxpro98\n  (:require [metabase.driver :as driver]))\n```\n\n----------------------------------------\n\nTITLE: Loading Metabase with Premium Token Command\nDESCRIPTION: Shell command for starting a new Metabase installation with a premium embedding token, which is required for using config file features in Pro/Enterprise versions.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/config-file.md#2025-04-23_snippet_11\n\nLANGUAGE: sh\nCODE:\n```\nMB_PREMIUM_EMBEDDING_TOKEN=\"[your token]\" java --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: Listing Recently Exited Metabase Containers\nDESCRIPTION: Command to identify recently stopped Metabase containers, useful when troubleshooting containers that exit unexpectedly.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/docker.md#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\ndocker ps -a | grep metabase/metabase\n```\n\n----------------------------------------\n\nTITLE: Adding Time Interval in PostgreSQL\nDESCRIPTION: This SQL query demonstrates how to add a 14-day interval to the `opened_on` column in a PostgreSQL database, creating an alias `finish_by`. This is equivalent to using `datetimeAdd` in Metabase.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/datetimeadd.md#2025-04-23_snippet_7\n\nLANGUAGE: sql\nCODE:\n```\nSELECT opened_on + INTERVAL '14 days' AS finish_by\nFROM coffee\n```\n\n----------------------------------------\n\nTITLE: Running Metabase with Docker\nDESCRIPTION: Docker command to start Metabase Enterprise edition on port 3000. This creates a container named 'metabase' running in detached mode.\nSOURCE: https://github.com/metabase/metabase/blob/master/enterprise/frontend/src/embedding-sdk/README.md#2025-04-23_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\ndocker run -d -p 3000:3000 --name metabase metabase/metabase-enterprise:latest\n```\n\n----------------------------------------\n\nTITLE: Creating and Editing Metabase syslog Config - Bash\nDESCRIPTION: This snippet creates and opens a custom rsyslog configuration file for Metabase logs. Requires sudo and an editor. Inputs: file path and editor command. Outputs: new log config file ready for editing.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-debian.md#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nsudo touch /etc/rsyslog.d/metabase.conf\\nsudo <your-editor> /etc/rsyslog.d/metabase.conf\n```\n\n----------------------------------------\n\nTITLE: JSON Operator Recommendation for PostgreSQL\nDESCRIPTION: When working with JSON in SQL queries on PostgreSQL, using the '?' operator may cause failures. It's recommended to use the '??' operator instead for better compatibility.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/sql.md#2025-04-23_snippet_0\n\nLANGUAGE: sql\nCODE:\n```\n?? /* Use this operator instead of ? for JSON operations in PostgreSQL */\n```\n\n----------------------------------------\n\nTITLE: Running Loki Visual Test Commands\nDESCRIPTION: Shell commands for running Loki visual tests locally, approving differences, and generating reports. These commands should be executed after ensuring both Storybook and Docker are running on your local machine.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/visual-tests.md#2025-04-23_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nyarn test-visual:loki\n```\n\nLANGUAGE: shell\nCODE:\n```\nyarn test-visual:loki-approve-diff\n```\n\nLANGUAGE: shell\nCODE:\n```\nyarn test-visual:loki-report\n```\n\nLANGUAGE: shell\nCODE:\n```\nyarn test-visual:loki-report-open\n```\n\n----------------------------------------\n\nTITLE: Preparing Metabase systemd Service File - Bash\nDESCRIPTION: This snippet prepares and opens the Metabase systemd service unit file using sudo. Edit the created file to define service behavior. Requires sudo and an editor installed. Inputs: file path and editor command. Outputs: created and opened systemd unit file for Metabase configuration.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-debian.md#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nsudo touch /etc/systemd/system/metabase.service\\nsudo <your-editor> /etc/systemd/system/metabase.service\n```\n\n----------------------------------------\n\nTITLE: Basic URL Parameter Example for Disabling Navigation Components in Metabase\nDESCRIPTION: A simple example showing how to disable Metabase's top navigation bar and side navigation menu by adding parameters to the embedding URL.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/interactive-ui-components.md#2025-04-23_snippet_0\n\nLANGUAGE: text\nCODE:\n```\nyour_embedding_url?top_nav=false&side_nav=false\n```\n\n----------------------------------------\n\nTITLE: Importing Text Component and Related Dependencies\nDESCRIPTION: Imports necessary components and modules for the Text component documentation, including React, Storybook components, and Metabase UI components.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/typography/Text/Text.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { Fragment } from \"react\";\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { Box, Grid, Text } from \"metabase/ui\";\nimport * as TextStories from \"./Text.stories\";\n```\n\n----------------------------------------\n\nTITLE: Extracting Boolean Logic from Nested Ternaries to Pure Functions - JavaScript\nDESCRIPTION: Shows how to refactor boolean predicate logic previously handled with nested ternaries into separate pure functions using if/else constructs. This improves readability and allows for more granular unit testing. Accepts parameters 'a', 'b', and 'c' to determine return values.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/frontend.md#2025-04-23_snippet_9\n\nLANGUAGE: JavaScript\nCODE:\n```\nconst foo = getFoo(a, b);\n\nfunction getFoo(a, b, c) {\n  if (a.includes(\"foo\")) {\n    return 123;\n  } else if (a === b) {\n    return 456;\n  } else {\n    return 0;\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Storybook Meta for Select Component\nDESCRIPTION: This snippet sets up the Storybook metadata for the Select component stories.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/Select/Select.mdx#2025-04-23_snippet_1\n\nLANGUAGE: JSX\nCODE:\n```\n<Meta of={SelectStories} />\n```\n\n----------------------------------------\n\nTITLE: Running Cypress Tests Headlessly in Terminal\nDESCRIPTION: Command to run all Cypress tests in headless mode without opening the Cypress GUI interface.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/e2e-tests.md#2025-04-23_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nOPEN_UI=false yarn run test-cypress\n```\n\n----------------------------------------\n\nTITLE: Describing Sync Module Functionality in Markdown\nDESCRIPTION: This snippet outlines the primary functions of the sync module in Metabase. It explains that the module records metadata about connected data warehouses, which is used by the Query Builder and Query Processor. Additionally, it mentions the presence of API endpoints for manually triggering re-syncs.\nSOURCE: https://github.com/metabase/metabase/blob/master/src/metabase/sync/README.md#2025-04-23_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n# `sync` Module\n\nThe `sync` module is responsible for recording metadata (Tables, Fields, etc.) about connected data warehouses in the\napp DB, which in turn is used to power the Query Builder and Query Processor.\n\nThis module also contains `/api/notify` endpoints (which are used to manually trigger re-syncs).\n```\n\n----------------------------------------\n\nTITLE: Extracting Month Number using month Function in Metabase Expressions\nDESCRIPTION: Extracts the month number (an integer between 1 and 12) from a given date or timestamp value. Takes the datetime column or value as input.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_60\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nmonth([datetime column])\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nmonth(\"2021-03-25T12:52:37\")\n```\n\n----------------------------------------\n\nTITLE: Markdown Documentation Structure\nDESCRIPTION: Structured documentation for troubleshooting Metabase error messages, including sections for SQL editor errors, dashboard issues, and general troubleshooting resources.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/error-message.md#2025-04-23_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n---\ntitle: Troubleshooting error messages\n---\n\n# Troubleshooting error messages\n\nAn error message can help you find the right troubleshooting guide. The exact wording depends on your database and Metabase version, so try to look for the closest match.\n\n## SQL editor\n\nSee if your error details contain any of:\n\n- [Table or column \"not found\" or \"not recognized\"](https://www.metabase.com/learn/grow-your-data-skills/learn-sql/debugging-sql/sql-syntax#column-or-table-name-is-not-found-or-not-recognized).\n- [Function does not exist](https://www.metabase.com/learn/grow-your-data-skills/learn-sql/debugging-sql/sql-syntax#sql-function-does-not-exist).\n- [Permission denied](./data-permissions.md#getting-a-permission-denied-error-message).\n\nFor example, this SQL error tells you that the function `DATEFROMPARTS` does not work on a BigQuery database:\n\n![Sample SQL error message](./images/sample-error-sql.png)\n\n## Questions and dashboards\n\n- [Your question took too long](./timeout.md).\n- [Still waiting...](./my-dashboard-is-slow.md).\n\n## Are you still stuck?\n\nIf you can't find your error on this page:\n\n- Search or ask the [Metabase community](https://discourse.metabase.com/).\n- Search for [known bugs or limitations](./known-issues.md).\n```\n\n----------------------------------------\n\nTITLE: Stopping Metabase Service via systemd - Shell\nDESCRIPTION: This command stops the running Metabase service using systemd, assuming the service is defined as 'metabase.service'. It is used as part of the upgrade process in environments where Metabase is managed as a Linux server process. Requires systemd with appropriate permissions (typically via sudo). No parameters. Output: Stops the specified service. Ensure service name correctness.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/upgrading-metabase.md#2025-04-23_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nsudo systemctl stop metabase.service\n```\n\n----------------------------------------\n\nTITLE: Converting Distinct Count from Honey SQL 1 to Honey SQL 2\nDESCRIPTION: Example showing how to convert a distinct-count function call from Honey SQL 1 syntax to Honey SQL 2 syntax, requiring the metabase.util.honey-sql-2 namespace and using qualified keywords.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/driver-changelog.md#2025-04-23_snippet_14\n\nLANGUAGE: clojure\nCODE:\n```\n;;; Honey SQL 1\n(hsql/call :distinct-count expr)\n```\n\nLANGUAGE: clojure\nCODE:\n```\n;;; Honey SQL 2\n(require '[metabase.util.honey-sql-2 :as h2x])\n\n[::h2x/distinct-count expr]\n```\n\n----------------------------------------\n\nTITLE: Importing Components for List Documentation in JavaScript/JSX\nDESCRIPTION: This snippet imports necessary components and stories for documenting the List component. It includes React, Storybook, Metabase UI components, and List stories.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/typography/List/List.mdx#2025-04-23_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport { Fragment } from \"react\";\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { Box, Grid, List, Icon } from \"metabase/ui\";\nimport * as ListStories from \"./List.stories\";\n```\n\n----------------------------------------\n\nTITLE: Using Mathematical Function floor() in Metabase\nDESCRIPTION: The floor function rounds a decimal number down to the nearest integer. It takes a single column or value as input.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_21\n\nLANGUAGE: sql\nCODE:\n```\nfloor([Price])\n```\n\n----------------------------------------\n\nTITLE: Configuring MB_LDAP_SYNC_USER_ATTRIBUTES_BLACKLIST Environment Variable in Metabase\nDESCRIPTION: Specifies a comma-separated list of LDAP user attributes that should *not* be synced to the Metabase user profile, even if `MB_LDAP_SYNC_USER_ATTRIBUTES` is enabled. Useful for excluding sensitive or unnecessary attributes. Type: csv. Default: `userPassword,dn,distinguishedName`. Corresponds to `ldap-sync-user-attributes-blacklist` in the configuration file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_38\n\nLANGUAGE: plaintext\nCODE:\n```\nMB_LDAP_SYNC_USER_ATTRIBUTES_BLACKLIST=userPassword,dn,distinguishedName\n```\n\n----------------------------------------\n\nTITLE: Getting Current Time in Database-Defined Time Zone with SQL\nDESCRIPTION: Demonstrates selecting the current time in the default time zone of the database (usually UTC) using the 'CURRENT_TIME' function in SQL. This is common when no explicit report time zone is configured. Input is implicit (no parameters needed), output is the current time of the database session. Requires SQL compatibility with standard date/time functions.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/now.md#2025-04-23_snippet_2\n\nLANGUAGE: SQL\nCODE:\n```\nSELECT CURRENT_TIME\n```\n\n----------------------------------------\n\nTITLE: Running Metabase Enterprise Edition Back-end with Clojure CLI\nDESCRIPTION: Commands for running Metabase Enterprise Edition back-end using the Clojure CLI with the :ee alias. Includes options for starting a local server, a REPL with EE sources, and a REPL with EE sources and test namespaces.\nSOURCE: https://github.com/metabase/metabase/blob/master/enterprise/README.md#2025-04-23_snippet_1\n\nLANGUAGE: clojure\nCODE:\n```\n# Start a local Metabase server that includes EE sources\nclojure -M:ee:run\n\n# start a REPL that includes EE sources.\nclojure -A:ee\n\n# start a REPL that includes EE sources & test namespaces.\nclojure -A:dev:ee:ee-dev\n```\n\n----------------------------------------\n\nTITLE: Running Metabase from JAR File\nDESCRIPTION: Command to run Metabase from a downloaded JAR file. The Java command includes a specific flag to handle module access restrictions.\nSOURCE: https://github.com/metabase/metabase/blob/master/enterprise/frontend/src/embedding-sdk/README.md#2025-04-23_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\njava --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: Configuring GitHub Actions CI Job for PostgreSQL Tests in YAML\nDESCRIPTION: This YAML snippet provides an example configuration for a GitHub Actions job named `be-tests-postgres-latest-ee`. It defines the conditions for running (`if`), the runner environment (`runs-on`), environment variables (`env`) including database connection details and test flags, a service container for PostgreSQL (`services`), and the steps to checkout code and execute the tests using a custom action (`./.github/actions/test-driver`). This setup ensures automated testing of the PostgreSQL driver within the CI pipeline.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/drivers/driver-tests.md#2025-04-23_snippet_11\n\nLANGUAGE: yaml\nCODE:\n```\nbe-tests-postgres-latest-ee:\n  needs: files-changed\n  if: github.event.pull_request.draft == false && needs.files-changed.outputs.backend_all == 'true'\n  runs-on: ubuntu-22.04\n  timeout-minutes: 60\n  env:\n    CI: \"true\"\n    DRIVERS: postgres\n    MB_DB_TYPE: postgres\n    MB_DB_PORT: 5432\n    MB_DB_HOST: localhost\n    MB_DB_DBNAME: circle_test\n    MB_DB_USER: circle_test\n    MB_POSTGRESQL_TEST_USER: circle_test\n    MB_POSTGRES_SSL_TEST_SSL: true\n    MB_POSTGRES_SSL_TEST_SSL_MODE: verify-full\n    MB_POSTGRES_SSL_TEST_SSL_ROOT_CERT_PATH: \"test-resources/certificates/us-east-2-bundle.pem\"\n  services:\n    postgres:\n      image: circleci/postgres:latest\n      ports:\n        - \"5432:5432\"\n      env:\n        POSTGRES_USER: circle_test\n        POSTGRES_DB: circle_test\n        POSTGRES_HOST_AUTH_METHOD: trust\n  steps:\n    - uses: actions/checkout@v4\n    - name: Test Postgres driver (latest)\n      uses: ./.github/actions/test-driver\n      with:\n        junit-name: \"be-tests-postgres-latest-ee\"\n```\n\n----------------------------------------\n\nTITLE: Handling Function Expressions with Aliases in Honey SQL 2\nDESCRIPTION: Demonstrates how to properly wrap function expressions in Honey SQL 2 to handle aliasing correctly, showing both incorrect and correct approaches with their resulting SQL output.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/driver-changelog.md#2025-04-23_snippet_15\n\nLANGUAGE: clojure\nCODE:\n```\n;; Honey SQL 1\n(honeysql.core/format {:select [[:my_function 1]]})\n;; => [\"SELECT my_function AS 1\"]\n\n;; Honey SQL 2\n;;\n;; WRONG\n(honey.sql/format {:select [[:my_function 1]]})\n;; => [\"SELECT my_function AS ?\" 1]\n\n;; CORRECT\n(honey.sql/format {:select [[[:my_function 1]]]})\n;; => [\"SELECT MY_FUNCTION(?)\" 1]\n```\n\n----------------------------------------\n\nTITLE: Reloading and Starting Metabase Service - Bash\nDESCRIPTION: Contains commands to reload systemd daemons, start the Metabase service, and check its status. Requires sudo. Inputs: systemd service files correctly set up; Outputs: Metabase service initialized and running.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-debian.md#2025-04-23_snippet_9\n\nLANGUAGE: bash\nCODE:\n```\nsudo systemctl daemon-reload\\nsudo systemctl start metabase.service\\nsudo systemctl status metabase.service\n```\n\n----------------------------------------\n\nTITLE: Installing Metabase SDK with npm\nDESCRIPTION: Command to install the Metabase Embedded analytics SDK for React using npm package manager.\nSOURCE: https://github.com/metabase/metabase/blob/master/enterprise/frontend/src/embedding-sdk/README.md#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @metabase/embedding-sdk-react\n```\n\n----------------------------------------\n\nTITLE: Restarting Rsyslog Service - Bash\nDESCRIPTION: This command restarts the rsyslog service to apply changes in configuration. Requires sudo. Input: None; Output: restarts syslog service, reloading config files.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-debian.md#2025-04-23_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nsudo systemctl restart rsyslog.service\n```\n\n----------------------------------------\n\nTITLE: Customizing JWT Authentication with Custom Fetch Function\nDESCRIPTION: Implementation of a custom token fetching function for the Metabase SDK. This allows customization of the authentication process, particularly useful when using headers instead of cookies.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/authentication.md#2025-04-23_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\n{% include_file \"{{ dirname }}/snippets/authentication/auth-config-jwt.tsx\" snippet=\"example\" %}\n```\n\n----------------------------------------\n\nTITLE: Rendering Default NumberInput Story\nDESCRIPTION: This snippet demonstrates how to render the default story for the NumberInput component using Storybook's Canvas and Story components.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/NumberInput/NumberInput.mdx#2025-04-23_snippet_2\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={NumberInputStories.Default} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Setting Environment Variables for Metabase JAR on Unix Systems\nDESCRIPTION: Commands to set environment variables and run Metabase JAR file on Mac, Linux, and other Unix-based systems.\nSOURCE: https://github.com/metabase/metabase/blob/master/src/metabase/cmd/resources/env-var-intro.md#2025-04-23_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nexport MB_SITE_NAME=\"Awesome Company\"\n\njava --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: Rendering Progress Component Story Example\nDESCRIPTION: Displays the default Progress component story within a Canvas component for demonstration purposes.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/feedback/Progress/Progress.mdx#2025-04-23_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={ProgressStories.Default} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Using Dynamic Variable for Controlling Parameter Inlining\nDESCRIPTION: A dynamic variable that controls whether SQL queries should be generated with inline parameters. Drivers can check this value in their implementation of mbql->native to adjust output accordingly.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/driver-changelog.md#2025-04-23_snippet_2\n\nLANGUAGE: clojure\nCODE:\n```\nmetabase.driver/*compile-with-inline-parameters*\n```\n\n----------------------------------------\n\nTITLE: Generating Environment Variables Documentation in Clojure\nDESCRIPTION: Command to generate the environment variables documentation from source code using Clojure.\nSOURCE: https://github.com/metabase/metabase/blob/master/src/metabase/cmd/resources/env-var-intro.md#2025-04-23_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nclojure -M:ee:doc environment-variables-documentation\n```\n\n----------------------------------------\n\nTITLE: Building the Metabase Uberjar using Build Script\nDESCRIPTION: Executes the provided build script (`./bin/build.sh`) to compile and package the entire Metabase application into a single executable `.jar` file (Uberjar). The output JAR will be located in the `target/uberjar` directory. The MB_EDITION environment variable can be set (e.g., `oss` or `ee`) before running.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/build.md#2025-04-23_snippet_15\n\nLANGUAGE: shell\nCODE:\n```\n./bin/build.sh\n```\n\n----------------------------------------\n\nTITLE: Implementing Primary Key SQL Type for MySQL Driver Tests\nDESCRIPTION: Example implementation of the sql.tx/pk-sql-type method for MySQL, which defines the SQL type to use for primary key columns in test database tables.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/drivers/driver-tests.md#2025-04-23_snippet_7\n\nLANGUAGE: clojure\nCODE:\n```\n(defmethod sql.tx/pk-sql-type :mysql [_] \"INTEGER NOT NULL AUTO_INCREMENT\")\n```\n\n----------------------------------------\n\nTITLE: Disabling Initial Database Sync in Metabase\nDESCRIPTION: Configuration example showing how to disable the initial database sync when loading from a serialized export, which must appear before database definitions.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/config-file.md#2025-04-23_snippet_7\n\nLANGUAGE: yaml\nCODE:\n```\nversion: 1\nconfig:\n  settings:\n    config-from-file-sync-databases: false\n  databases:\n    - name: my-database\n      engine: postgres\n      details: ...\n```\n\n----------------------------------------\n\nTITLE: CountIf Equivalent for Comparison with Case in Metabase Expression\nDESCRIPTION: This Metabase custom expression shows the standard `CountIf` function, presented for direct comparison with the `Count(case(...))` alternative shown previously. It counts rows where the `Plan` column is \"Basic\".\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/countif.md#2025-04-23_snippet_7\n\nLANGUAGE: metabase-expression\nCODE:\n```\nCountIf([Plan] = \"Basic\")\n```\n\n----------------------------------------\n\nTITLE: Concatenating Pandas Dataframe Columns in Python\nDESCRIPTION: Explains string concatenation of columns in a pandas dataframe in Python. Requires pandas library with the data loaded as a dataframe ('df'). Parameters include column names (e.g., 'City' and 'Country'), and the result is stored as a new or overwritten column ('Location') with each row being a joined string. This method is equivalent to Metabase's 'concat', implemented in Python syntax.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/concat.md#2025-04-23_snippet_3\n\nLANGUAGE: Python\nCODE:\n```\ndf[\"Location\"] = df[\"City\"] + \", \" + df[\"Country\"]\n```\n\n----------------------------------------\n\nTITLE: Using Mathematical Function exp() in Metabase\nDESCRIPTION: The exp function returns Euler's number (e) raised to the power of the supplied number. It takes a single column or value as input.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_20\n\nLANGUAGE: sql\nCODE:\n```\nexp([Interest Months])\n```\n\n----------------------------------------\n\nTITLE: Configuring MB_LDAP_ATTRIBUTE_FIRSTNAME Environment Variable in Metabase\nDESCRIPTION: Specifies the LDAP attribute name used to retrieve the user's first name during LDAP authentication. A common value is 'givenName'. Type: string. Default: `givenName`. Corresponds to `ldap-attribute-firstname` in the configuration file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/environment-variables.md#2025-04-23_snippet_25\n\nLANGUAGE: plaintext\nCODE:\n```\nMB_LDAP_ATTRIBUTE_FIRSTNAME=givenName\n```\n\n----------------------------------------\n\nTITLE: Type Checking JavaScript/TypeScript in Metabase\nDESCRIPTION: Command to run type checking for JavaScript and TypeScript code in the Metabase project.\nSOURCE: https://github.com/metabase/metabase/blob/master/CLAUDE.md#2025-04-23_snippet_4\n\nLANGUAGE: Shell\nCODE:\n```\nyarn type-check\n```\n\n----------------------------------------\n\nTITLE: Using Mathematical Function power() in Metabase\nDESCRIPTION: The power function raises a number to the power of the exponent value. It takes a column or value and an exponent as inputs. Not supported in SQLite.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_23\n\nLANGUAGE: sql\nCODE:\n```\npower([Length], 2)\n```\n\n----------------------------------------\n\nTITLE: Importing Dependencies for SegmentedControl Documentation (TypeScript)\nDESCRIPTION: Imports necessary components and modules for the Storybook documentation page. This includes Storybook's `Canvas`, `Story`, `Meta` components for rendering documentation blocks, Metabase UI components (`SegmentedControl`, `Box`, `Center`, `Icon`), and the related stories (`SegmentedControlStories`) defined in a separate file.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/SegmentedControl/SegmentedControl.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { SegmentedControl, Box, Center } from \"metabase/ui\";\nimport { Icon } from \"metabase/ui\";\nimport * as SegmentedControlStories from \"./SegmentedControl.stories\";\n```\n\n----------------------------------------\n\nTITLE: Configuring AWS Profile\nDESCRIPTION: Command to configure AWS credentials for the metabase profile, used for uploading artifacts to S3.\nSOURCE: https://github.com/metabase/metabase/blob/master/bin/release.md#2025-04-23_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\naws configure --profile metabase\n```\n\n----------------------------------------\n\nTITLE: Adding Row Transformation for Test Data Loading\nDESCRIPTION: A transducer that can be applied to each row when loading test data. The default implementation is identity, but it can be customized to add IDs to each row or perform other transformations.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/driver-changelog.md#2025-04-23_snippet_4\n\nLANGUAGE: clojure\nCODE:\n```\nmetabase.test.data.sql-jdbc.load-data/row-xform\n```\n\n----------------------------------------\n\nTITLE: Setting Custom Plugins Directory for Metabase\nDESCRIPTION: Environment variable configuration to change the location where Metabase looks for plugin drivers. This allows users to specify a custom directory for storing driver JAR files.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/community-drivers.md#2025-04-23_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nMB_PLUGINS_DIR\n```\n\n----------------------------------------\n\nTITLE: Setting Test Drivers in the REPL - Clojure\nDESCRIPTION: Sets the active drivers for testing in a Clojure REPL session using the mt/set-test-drivers! function. Requires the mt namespace to be available and is intended for use within a development or test REPL session. The parameter is a set of keywords for enabled drivers. Returns (likely) nothing useful, but sets internal state for subsequent test runs.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/devenv.md#2025-04-23_snippet_21\n\nLANGUAGE: Clojure\nCODE:\n```\n(mt/set-test-drivers! #{:postgres :mysql :h2})\n```\n\n----------------------------------------\n\nTITLE: Configuring Theme for Embedded Metabase Components in TypeScript\nDESCRIPTION: Example of theme configuration for styling embedded Metabase components. The theme object includes various styling options like colors, font families, spacing, borders, and shadows that can be customized.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/appearance.md#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n{% include_file \"{{ dirname }}/snippets/appearance/theme.ts\" %}\n```\n\n----------------------------------------\n\nTITLE: Rendering Extra-Small Size Read-Only TimeInput Example\nDESCRIPTION: Shows an extra-small size TimeInput component in a read-only state using Storybook Canvas and Story components.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.mdx#2025-04-23_snippet_16\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={TimeInputStories.ReadOnlyXs} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Setting JAVA_OPTS Environment Variable for Oracle SSL Authentication\nDESCRIPTION: Example of setting JAVA_OPTS environment variable to configure the keystore for Oracle SSL connections. This enables the Oracle server to authenticate Metabase using the private key when connecting over SSL.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/connections/oracle.md#2025-04-23_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\nJAVA_OPTS: \"-Djavax.net.ssl.keyStore=/scripts/keystore.jks -Djavax.net.ssl.keyStoreType=JKS -Djavax.net.ssl.keyStorePassword=<keyStorePassword>\"\n```\n\n----------------------------------------\n\nTITLE: Transforming Data Chunks During Test Loading\nDESCRIPTION: A transducer applied to each chunk of rows during test data loading. Can be used for special handling like writing chunks to CSV files for separate loading.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/driver-changelog.md#2025-04-23_snippet_6\n\nLANGUAGE: clojure\nCODE:\n```\nmetabase.test.data.sql-jdbc.load-data/chunk-xform\n```\n\n----------------------------------------\n\nTITLE: Generating Server Certificate using cfssl\nDESCRIPTION: This command generates a server certificate using the CA certificate and key, specifying the hostnames as 127.0.0.1 and localhost. It uses the server-csr.json configuration file and outputs the generated server certificate and key.\nSOURCE: https://github.com/metabase/metabase/blob/master/test_resources/ssl/README.md#2025-04-23_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\ncfssl gencert -ca ca.pem -ca-key ca-key.pem -hostname=127.0.0.1,localhost server-csr.json | cfssljson -bare -stdout\n```\n\n----------------------------------------\n\nTITLE: Building and Running the Metabase Frontend with Hot Reloading\nDESCRIPTION: Uses Yarn to build the Metabase frontend assets and start a development server with hot-reloading enabled. This allows UI changes to be reflected in the browser without a full rebuild. Requires Node.js (LTS) and Yarn.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/build.md#2025-04-23_snippet_14\n\nLANGUAGE: shell\nCODE:\n```\nyarn build-hot\n```\n\n----------------------------------------\n\nTITLE: Accessing Job Data within a Quartz Job in Clojure\nDESCRIPTION: Shows how to access data passed via the job data map from within a Quartz job defined using `task/defjob`. The job receives the `job-context` as an argument, and `qc/from-job-data` (likely `clojurewerkz.quartzite.conversion/from-job-data`) is used to retrieve the data map.\nSOURCE: https://github.com/metabase/metabase/blob/master/src/metabase/task/QUARTZ.md#2025-04-23_snippet_3\n\nLANGUAGE: clojure\nCODE:\n```\n(task/defjob MyJob [job-context]\n  (let [data-map (qc/from-job-data job-context)\n        db-id (get data-map \"db-id\")]\n    ;; Use the data...\n    ))\n```\n\n----------------------------------------\n\nTITLE: Navigating to Server Directory (Shell)\nDESCRIPTION: Changes the current working directory in the terminal to the `server` subdirectory within the sample application's root folder. This step is necessary before running commands specific to the backend server, such as installing its dependencies or starting it.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/quickstart-with-sample-app.md#2025-04-23_snippet_8\n\nLANGUAGE: sh\nCODE:\n```\ncd server\n```\n\n----------------------------------------\n\nTITLE: Using Mathematical Function ceil() in Metabase\nDESCRIPTION: The ceil function rounds a decimal number up to the nearest integer. It takes a single column or value as input and returns the ceiling value.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_19\n\nLANGUAGE: sql\nCODE:\n```\nceil([Price])\n```\n\n----------------------------------------\n\nTITLE: Navigating to the Cloned Metabase Directory\nDESCRIPTION: Changes the current directory in the terminal to the `metabase` folder within the `workspace` directory. This assumes the user followed the previous steps to clone the repository into `~/workspace`.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/build.md#2025-04-23_snippet_8\n\nLANGUAGE: shell\nCODE:\n```\ncd ~/workspace/metabase\n```\n\n----------------------------------------\n\nTITLE: Metabase Expression Equivalent to Basic Spreadsheet CountIf\nDESCRIPTION: This Metabase custom expression is the direct equivalent of the preceding spreadsheet formula (`=CountIf(B:B, \"Basic\")`). It counts rows where the `Plan` column equals \"Basic\".\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/countif.md#2025-04-23_snippet_15\n\nLANGUAGE: metabase-expression\nCODE:\n```\nCountIf([Plan] = \"Basic\")\n```\n\n----------------------------------------\n\nTITLE: Using notNull in Metabase Logical Functions - Markdown\nDESCRIPTION: Explains the notNull logical function in Metabase custom expressions—returns true if the referenced column contains a value for the row. Effective for presence checking. Related to isNull and notEmpty.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_17\n\nLANGUAGE: Markdown\nCODE:\n```\nSyntax: `notNull(column)`\n\nExample: `notNull([Tax])` would return true if there is a value present in the column for that row.\n\nRelated: [isNull](#isnull), [notEmpty](#notempty)\n```\n\n----------------------------------------\n\nTITLE: Setting Metabase Max Session Age via Java System Property (Bash)\nDESCRIPTION: This command starts the Metabase application using a Java system property (`-DMAX_SESSION_AGE`) to configure the maximum session duration. It achieves the same result as setting the environment variable, limiting the session validity to 1440 minutes (24 hours) in this case. This is an alternative way to pass configuration settings directly to the Java process.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/people-and-groups/changing-session-expiration.md#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\njava -DMAX_SESSION_AGE=1440 -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: New Method: Escaping Aliases in Clojure\nDESCRIPTION: The metabase.driver/escape-alias method is now used to generate and consistently escape field aliases across SQL query processor code. Implement this method to transform generated Field aliases if needed.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/driver-changelog.md#2025-04-23_snippet_17\n\nLANGUAGE: clojure\nCODE:\n```\nmetabase.driver/escape-alias\n```\n\n----------------------------------------\n\nTITLE: Rendering Extra-Small Size Empty TimeInput Example\nDESCRIPTION: Shows an extra-small size empty TimeInput component using Storybook Canvas and Story components.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.mdx#2025-04-23_snippet_10\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={TimeInputStories.EmptyXs} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Installing Xcode Command Line Tools on macOS\nDESCRIPTION: This command installs the Xcode Command Line Tools, which are a prerequisite for building Metabase on macOS. These tools provide essential utilities for software development.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/build.md#2025-04-23_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nxcode-select --install\n```\n\n----------------------------------------\n\nTITLE: Pulling Latest Changes from Git Repository\nDESCRIPTION: Fetches the latest changes and updates from the remote Git repository (origin) for the currently checked-out branch. This ensures the local codebase is up-to-date.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/build.md#2025-04-23_snippet_9\n\nLANGUAGE: shell\nCODE:\n```\ngit pull\n```\n\n----------------------------------------\n\nTITLE: Generating Metabase API Documentation with Clojure\nDESCRIPTION: This command generates the API documentation for Metabase. It uses Clojure and requires the 'ee' and 'doc' aliases, along with the 'api-documentation' argument.\nSOURCE: https://github.com/metabase/metabase/blob/master/resources/openapi/api-intro.md#2025-04-23_snippet_0\n\nLANGUAGE: clojure\nCODE:\n```\nclojure -M:ee:doc api-documentation\n```\n\n----------------------------------------\n\nTITLE: Building Frontend without Watching for Changes\nDESCRIPTION: Command to build the frontend client once without watching for changes or hot reloading.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/devenv.md#2025-04-23_snippet_4\n\nLANGUAGE: sh\nCODE:\n```\n$ yarn build\n```\n\n----------------------------------------\n\nTITLE: Implementing CollectionBrowser Component in React/TSX\nDESCRIPTION: Example code demonstrating how to embed Metabase's collection browser component in a React application. This allows users to explore Metabase items directly from your application interface.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/collections.md#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n{% include_file \"{{ dirname }}/snippets/collections/collection-browser.tsx\" %}\n```\n\n----------------------------------------\n\nTITLE: Rendering Menu Story with Right Section in Storybook Canvas\nDESCRIPTION: This snippet shows how to render a Menu story that includes a right section within a Storybook Canvas component.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/overlays/Menu/Menu.mdx#2025-04-23_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={MenuStories.RightSection} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Complete Metabase Plugin Manifest Reference\nDESCRIPTION: A comprehensive reference implementation of a plugin manifest with detailed comments explaining each section and configuration option.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/drivers/plugins.md#2025-04-23_snippet_2\n\nLANGUAGE: txt\nCODE:\n```\n# Basic user-facing information about the driver goes under the info: key\ninfo:\n\n  # Make sure to give your plugin a name. In the future, we can show\n  # this to the user in a 'plugin management' admin page.\n  name: Metabase SQLite Driver\n\n  # For the sake of consistency with the core Metabase project you\n  # should use semantic versioning. It's not a bad idea to include the\n  # version of its major dependency (e.g., a JDBC driver) when\n  # applicable as part of the 'patch' part of the version, so we can\n  # update dependencies and have that reflected in the version number\n  #\n  # For now core Metabase modules should have a version\n  # 1.0.0-SNAPSHOT-x until version 1.0 ships and the API for plugins\n  # is locked in\n  version: 1.0.0-SNAPSHOT-3.25.2\n\n  # Describe what your plugin does. Not used currently, but in the\n  # future we may use this description in a plugins admin page.\n  description: Allows Metabase to connect to SQLite databases.\n\n# You can list any dependencies needed by the plugin by specifying a\n# list of dependencies. If all dependencies are not met, the plugin\n# will not be initialized.\n#\n# A dependency may be either a 'class' or (in the future) a 'plugin' dependency\ndependencies:\n\n  # A 'class' dependency checks whether a given class is available on\n  # the classpath. It doesn't initialize the class; Metabase defers initialization\n  # until it needs to use the driver\n  # Don't use this for classes that ship as part of the plugin itself;\n  # only use it for external dependencies.\n  - class: oracle.jdbc.OracleDriver\n\n    # You may optionally add a message that will be displayed for\n    # information purposes in the logs, and possibly in a plugin\n    # management page as well in the future\n    message: >\n      Metabase requires the Oracle JDBC driver to connect to JDBC databases. See\n      https://metabase.com/docs/latest/administration-guide/databases/oracle.html\n      for more details\n\n  # A 'plugin' dependency checks whether a given plugin is available.\n  # The value for 'plugin' is whatever that plugin has as its 'name:' -- make\n  # sure you match it exactly!\n  #\n  # If the dependency is not available when this module is first loaded, the module\n  # will be tried again later after more modules are loaded. This means things will\n  # still work the way we expect even if, say, we initially attempt to load the\n  # BigQuery driver *before* loading its dependency, the shared Google driver. Once\n  # the shared Google driver is loaded, Metabase will detect that BigQuery's\n  # dependencies are now satisfied and initialize the plugin.\n  #\n  # In the future, we'll like add version restrictions as well, but for now we only match\n  # by name.\n  - plugin: Metabase SQLHeavy Driver\n\n# If a plugin adds a driver it should define a driver: section.\n#\n# To define multiple drivers, you can pass a list of maps instead. Note\n# that multiple drivers currently still must share the same dependencies\n# set and initialization steps. Thus registering multiple drivers is most\n# useful for slight variations on the same driver or including an abstract\n# parent driver. Note that init steps will get ran once for each driver\n# that gets loaded. This can result in duplicate driver instances registered\n# with the DriverManager, which is certainly not ideal but does not actually\n# hurt anything.\n#\n# In the near future I might move init steps into driver itself (or\n# at least allow them there)\ndriver:\n\n  # Name of the driver; corresponds to the keyword (e.g. :sqlite) used\n  # in the codebase\n  name: sqlite\n\n  # Nice display name shown to admins when connecting a database\n  display-name: SQLite\n\n  # Whether loading this driver can be deferred until the first\n  # attempt to connect to a database of this type. Default: true. Only\n  # set this to false if absolutely neccesary.\n  lazy-load: true\n\n  # Parent driver, if any.\n  parent: sql-jdbc\n\n  # You may alternatively specify a list of parents for drivers with\n  # more than one:\n  parent:\n    - google\n    - sql\n\n  # Whether this driver is abstract. Default: false\n  abstract: false\n\n  # List of connection properties to ask users to set to connect to\n  # this driver.\n  connection-properties:\n    # Connection properties can be one of the defaults found in\n    # metabase.driver.common, listed by name:\n    - dbname\n    - host\n\n    # Or a full map for a custom option. Complete schema for custom\n    # options can be found in metabase.driver. NOTE: these are not\n    # currently translated for i18n; I'm working on a way to translate\n    # these. Prefer using one of the defaults from\n    # metabase.driver.common if possible.\n    - name: db\n      display-name: Filename\n      placeholder: /home/camsaul/toucan_sightings.sqlite\n      required: true\n\n    # Finally, you can use merge: to merge multiple maps. This is\n    # useful to override specific properties in one of the defaults.\n    - merge:\n      - port\n      - placeholder: 1433\n\n# Steps to take to initialize the plugin. For lazy-load drivers, this\n# is delayed until the driver is initialized the first time we connect\n```\n\n----------------------------------------\n\nTITLE: Searching SQL Query Content in Metabase Search (SQL Example)\nDESCRIPTION: This SQL snippet exemplifies the type of text users can search for using Metabase's advanced search feature. The search functionality indexes the content of native SQL queries, allowing users to find specific questions based on the SQL code they contain, like this example searching for `SELECT escape_pod FROM mothership`.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/exploration-and-organization/exploration.md#2025-04-23_snippet_0\n\nLANGUAGE: sql\nCODE:\n```\nSELECT escape_pod FROM mothership\n```\n\n----------------------------------------\n\nTITLE: Generating Certificate Authority (CA) using cfssl\nDESCRIPTION: This command generates a Certificate Authority (CA) using the ca-csr.json configuration file. It outputs the generated CA certificate and key.\nSOURCE: https://github.com/metabase/metabase/blob/master/test_resources/ssl/README.md#2025-04-23_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\ncfssl genkey -initca ca-csr.json | cfssljson -bare -stdout\n```\n\n----------------------------------------\n\nTITLE: Creating API Keys in Metabase Config File\nDESCRIPTION: Shows how to create API keys via the config file, assigning them to either admin or all-users groups with specific permissions.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/config-file.md#2025-04-23_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\nversion: 1\nconfig:\n  users:\n    - first_name: Cam\n      last_name: Era\n      password: 2cans3cans4cans\n      email: cam@example.com\n  api-keys:\n    - name: \"Admin API key\"\n      group: admin\n      creator: cam@example.com\n      key: mb_firsttestapikey\n    - name: \"All Users API key\"\n      group: all-users\n      creator: cam@example.com\n      key: mb_secondtestapikey\n```\n\n----------------------------------------\n\nTITLE: Loading Database Object with Class Decorator in React\nDESCRIPTION: Demonstrates how to use the Databases Entity Loader as a class decorator to fetch and display a specific database by ID. The decorator injects the loaded database as a prop into the component.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/frontend.md#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport React from \"react\";\nimport Databases from \"metabase/entities/databases\";\n\n@Databases.load({ id: 4 })\nclass MyNewPage extends React.Component {\n  render() {\n    const { database } = this.props;\n    return (\n      <div>\n        <h1>{database.name}</h1>\n      </div>\n    );\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Listing available driver multimethods in Metabase\nDESCRIPTION: Command to generate a list of all driver multimethods available in Metabase. This helps developers discover methods they can implement for their custom drivers.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/drivers/multimethods.md#2025-04-23_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\nclojure -M:run driver-methods\n```\n\n----------------------------------------\n\nTITLE: Running Specific Cypress Test File\nDESCRIPTION: Command to run a single Cypress test file using the --spec flag which can target individual files or entire folders.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/e2e-tests.md#2025-04-23_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nOPEN_UI=false yarn test-cypress --spec e2e/test/scenarios/question/new.cy.spec.js\n```\n\n----------------------------------------\n\nTITLE: Using StandardDeviation in Metabase Custom Expressions - Markdown\nDESCRIPTION: Explains the calculation of standard deviation across column values using StandardDeviation in Metabase custom expressions. Takes a column argument and returns the statistical standard deviation. Not available on Druid and SQLite.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_9\n\nLANGUAGE: Markdown\nCODE:\n```\nSyntax: `StandardDeviation(column)`\n\nExample: `StandardDeviation([Population])` would return the SD for the values in the `Population` column.\n\nDatabases that don't support `StandardDeviation`: Druid, SQLite.\n```\n\n----------------------------------------\n\nTITLE: Receiving Frame Mode Messages (Normal) from Embedded Metabase - postMessage Protocol - JSON\nDESCRIPTION: This snippet shows the format of a postMessage event from Metabase to indicate that the iframe should be sized using the 'normal' display mode. The host application can listen for such a message to adjust the container or iframe styling accordingly. No parameters except the static string 'normal'; requires postMessage event listener and knowledge of the Metabase embedding protocol.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/interactive-embedding.md#2025-04-23_snippet_11\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"metabase\": {\n    \"type\": \"frame\",\n    \"frame\": {\n      \"mode\": \"normal\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Timedelta using Python Pandas\nDESCRIPTION: This Python code snippet uses the Pandas library and the `datetime.timedelta` function to add 14 days to the 'Opened On' column in a DataFrame `df`, creating a new 'Finish By' column. This is equivalent to Metabase's `datetimeAdd` function.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/datetimeadd.md#2025-04-23_snippet_11\n\nLANGUAGE: python\nCODE:\n```\nimport datetime\n\ndf['Finish By'] = df['Opened On'] + datetime.timedelta(days=14)\n```\n\n----------------------------------------\n\nTITLE: Setting Up MAGE Autocomplete in Metabase\nDESCRIPTION: Command for setting up shell autocomplete for the MAGE tool. This provides a more convenient developer experience by enabling command completion in the terminal.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/mage.md#2025-04-23_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\n./bin/mage setup-autocomplete\n```\n\n----------------------------------------\n\nTITLE: Importing Select Component and Storybook Dependencies\nDESCRIPTION: This snippet shows the import statements for the Select component, Storybook dependencies, and related stories.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/Select/Select.mdx#2025-04-23_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { Select, Stack } from \"metabase/ui\";\nimport * as SelectStories from \"./Select.stories\";\n```\n\n----------------------------------------\n\nTITLE: Rendering NumberInput Stories with Various States and Sizes\nDESCRIPTION: This set of snippets shows how to render different stories for the NumberInput component, showcasing various states (empty, filled, with asterisk, with description, disabled, error, with icon, read-only) and sizes (md, xs).\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/NumberInput/NumberInput.mdx#2025-04-23_snippet_3\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={NumberInputStories.EmptyMd} />\n</Canvas>\n\n<Canvas>\n  <Story of={NumberInputStories.FilledMd} />\n</Canvas>\n\n<Canvas>\n  <Story of={NumberInputStories.AsteriskMd} />\n</Canvas>\n\n<Canvas>\n  <Story of={NumberInputStories.DescriptionMd} />\n</Canvas>\n\n<Canvas>\n  <Story of={NumberInputStories.DisabledMd} />\n</Canvas>\n\n<Canvas>\n  <Story of={NumberInputStories.ErrorMd} />\n</Canvas>\n\n<Canvas>\n  <Story of={NumberInputStories.IconMd} />\n</Canvas>\n\n<Canvas>\n  <Story of={NumberInputStories.ReadOnlyMd} />\n</Canvas>\n\n<Canvas>\n  <Story of={NumberInputStories.EmptyXs} />\n</Canvas>\n\n<Canvas>\n  <Story of={NumberInputStories.FilledXs} />\n</Canvas>\n\n<Canvas>\n  <Story of={NumberInputStories.AsteriskXs} />\n</Canvas>\n\n<Canvas>\n  <Story of={NumberInputStories.DescriptionXs} />\n</Canvas>\n\n<Canvas>\n  <Story of={NumberInputStories.DisabledXs} />\n</Canvas>\n\n<Canvas>\n  <Story of={NumberInputStories.ErrorXs} />\n</Canvas>\n\n<Canvas>\n  <Story of={NumberInputStories.IconXs} />\n</Canvas>\n\n<Canvas>\n  <Story of={NumberInputStories.ReadOnlyXs} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Installing Yarn Globally using npm\nDESCRIPTION: Installs the Yarn package manager (version 1.x) globally using npm. Yarn is required for managing frontend dependencies and running build scripts for the Metabase UI.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/build.md#2025-04-23_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nnpm install --global yarn\n```\n\n----------------------------------------\n\nTITLE: Checking Out a Specific Git Branch (Example)\nDESCRIPTION: An example demonstrating how to switch to a specific feature branch named `fix-native-dataset-drill-popover` using the `git checkout` command.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/build.md#2025-04-23_snippet_11\n\nLANGUAGE: shell\nCODE:\n```\ngit checkout fix-native-dataset-drill-popover\n```\n\n----------------------------------------\n\nTITLE: Importing Card Component and Related Stories in JavaScript\nDESCRIPTION: This snippet shows the import statements for the Card component, related UI components, and Storybook utilities. It sets up the necessary dependencies for the documentation and examples.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/data-display/Card/Card.mdx#2025-04-23_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport { Fragment } from \"react\";\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { Box, Card, Stack, Text } from \"metabase/ui\";\nimport * as CardStories from \"./Card.stories\";\n```\n\n----------------------------------------\n\nTITLE: Configuring Cypress Viewport Size\nDESCRIPTION: Examples of configuring the viewport size for Cypress tests using test configuration options to avoid scrolling issues in larger Metabase views.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/e2e-tests.md#2025-04-23_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\ndescribe(\"foo\", { viewportWidth: 1400 }, () => {});\n\nit(\"bar\", { viewportWidth: 1600, viewportHeight: 1200 }, () => {});\n```\n\n----------------------------------------\n\nTITLE: Loading a List of Users with Entity Loader in React\nDESCRIPTION: Shows how to use the loadList decorator to fetch and display a collection of user objects. The decorator injects the loaded users array as a prop into the component.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/frontend.md#2025-04-23_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\nimport React from \"react\";\nimport Users from \"metabase/entities/users\";\n\n@Users.loadList()\nclass MyList extends React.Component {\n  render() {\n    const { users } = this.props;\n    return <div>{users.map(u => u.first_name)}</div>;\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Importing UpsellCard Component and Stories for Storybook Documentation\nDESCRIPTION: Imports required components from Storybook blocks, a Redux provider, the UpsellCard component, and its stories for documentation.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/admin/upsells/components/UpsellCard.mdx#2025-04-23_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { ReduxProvider } from \"__support__/storybook\";\nimport { _UpsellCard } from \"./UpsellCard\";\nimport * as UpsellCardStories from \"./UpsellCard.stories\";\n```\n\n----------------------------------------\n\nTITLE: Config File Format Example\nDESCRIPTION: Shows how environment variables are translated to the kebab-case format used in the config.yml file.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/config-file.md#2025-04-23_snippet_9\n\nLANGUAGE: txt\nCODE:\n```\nname-of-variable\n```\n\n----------------------------------------\n\nTITLE: Deprecated Method: Converting Fields to Aliases in Clojure\nDESCRIPTION: The field->alias method, deprecated in 0.41.0, is now unused. Implement metabase.driver/escape-alias instead for custom alias handling.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/driver-changelog.md#2025-04-23_snippet_21\n\nLANGUAGE: clojure\nCODE:\n```\nmetabase.driver.sql.query-processor/field->alias\n```\n\n----------------------------------------\n\nTITLE: Cleaning Bundler Cache and Reinstalling SDK with Yarn\nDESCRIPTION: This command chain removes old SDK files, cleans the Vite cache, and reinstalls the local SDK build. It's useful for ensuring a clean installation and avoiding caching issues.\nSOURCE: https://github.com/metabase/metabase/blob/master/enterprise/frontend/src/embedding-sdk/dev.md#2025-04-23_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nrm -rf node_modules/@metabase && rm -rf node_modules/.vite && yarn add file:../metabase/resources/embedding-sdk\n```\n\n----------------------------------------\n\nTITLE: Dynamic URL Generation with Template Parameters in Metabase\nDESCRIPTION: Example showing how to create a dynamic URL using template parameters from column values in Metabase tables. The snippet demonstrates using the double curly brace syntax to inject category values into URLs.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/visualizations/table.md#2025-04-23_snippet_0\n\nLANGUAGE: html\nCODE:\n```\nhttps://www.example.com/{{category}}\n```\n\n----------------------------------------\n\nTITLE: Debugging BigQuery 403 Forbidden Error Response\nDESCRIPTION: Example of the error message received when BigQuery lacks proper permissions to access Google Drive credentials. This typically occurs when the service account email hasn't been granted access to the Google Drive source.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/bigquery-drive.md#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n403 Forbidden POST https://www.googleapis.com/bigquery/v2/projects/PROJECT-NAME/queries { \"code\" : 403, \"errors\" : [ { \"domain\" : \"global\", \"message\" : \"Access Denied: BigQuery BigQuery: Permission denied while getting Drive credentials.\", \"reason\" : \"accessDenied\" } ], \"message\" : \"Access Denied: BigQuery BigQuery: Permission denied while getting Drive credentials.\", \"status\" : \"PERMISSION_DENIED\" }\n```\n\n----------------------------------------\n\nTITLE: Extracting Week of Year in Amazon Redshift using SQL\nDESCRIPTION: SQL example for Amazon Redshift using the `DATE_PART` function to extract the week number from a timestamp column (`created_at`). This typically follows the ISO 8601 standard algorithm.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/week.md#2025-04-23_snippet_5\n\nLANGUAGE: sql\nCODE:\n```\nDATE_PART(week, TIMESTAMP created_at)\n```\n\n----------------------------------------\n\nTITLE: Displaying SQLite Driver Module Directory Structure\nDESCRIPTION: Shows the directory structure of the SQLite driver module including the deps.edn configuration file, the resources directory with the plugin manifest, the source code, and test directories.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/drivers/basics.md#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n|-- deps.edn\n|-- resources\n|   `-- metabase-plugin.yaml\n|-- src\n|   `-- metabase\n|       `-- driver\n|           `-- sqlite.clj\n`-- test\n    `-- metabase\n        |-- driver\n        |   `-- sqlite_test.clj\n        `-- test\n            `-- data\n                `-- sqlite.clj\n```\n\n----------------------------------------\n\nTITLE: Rendering Extra-Small Size TimeInput with Description\nDESCRIPTION: Displays an extra-small size TimeInput component with an additional description text using Storybook Canvas and Story components.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.mdx#2025-04-23_snippet_13\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={TimeInputStories.DescriptionXs} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Plugin Initialization Example in YAML\nDESCRIPTION: An example showing the initialization section of a plugin manifest with steps to load a namespace and register a JDBC driver.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/drivers/plugins.md#2025-04-23_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\ninit:\n  - step: load-namespace\n    namespace: metabase.driver.sqlite\n  - step: register-jdbc-driver\n    class: org.sqlite.JDBC\n```\n\n----------------------------------------\n\nTITLE: Replacing unprepare-value with inline-value in SQL Drivers\nDESCRIPTION: The unprepare-value method has been deprecated in favor of inline-value with the same signature. This change is part of Metabase's migration to using Honey SQL 2's :inline option for generating SQL queries with inline parameters.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/driver-changelog.md#2025-04-23_snippet_1\n\nLANGUAGE: clojure\nCODE:\n```\nmetabase.driver.sql.util.unprepare/unprepare-value\n```\n\nLANGUAGE: clojure\nCODE:\n```\nmetabase.driver.sql.query-processor/inline-value\n```\n\n----------------------------------------\n\nTITLE: Detecting Metabase Page Title Element in HTML Source\nDESCRIPTION: HTML code snippet showing the expected page title element that should be present in Metabase's source code, used for troubleshooting blank page issues.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/proxies.md#2025-04-23_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<title>Metabase</title>\n```\n\n----------------------------------------\n\nTITLE: Importing FileInput Component and Related Stories\nDESCRIPTION: This snippet imports necessary components and stories for the FileInput documentation.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/FileInput/FileInput.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { Icon } from \"metabase/ui\";\nimport { Stack, FileInput } from \"metabase/ui\";\nimport * as FileInputStories from \"./FileInput.stories\";\n```\n\n----------------------------------------\n\nTITLE: Starting Backend Development Server\nDESCRIPTION: Command to start the Clojure backend development server using the Clojure CLI.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/devenv.md#2025-04-23_snippet_3\n\nLANGUAGE: sh\nCODE:\n```\nclojure -M:run\n```\n\n----------------------------------------\n\nTITLE: Pulling the Latest Metabase Development Head Image\nDESCRIPTION: This command explicitly pulls the latest image tagged `latest` from the `metabase/metabase-enterprise-head` repository on Docker Hub. This ensures the local machine has the most recent version of the image before running it. Requires Docker to be installed and running.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/dev-branch-docker.md#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\ndocker pull metabase/metabase-enterprise-head:latest\n```\n\n----------------------------------------\n\nTITLE: Importing Components for Popover Documentation in React\nDESCRIPTION: Import statement that brings in React's Fragment component, Storybook documentation components, and various UI components from Metabase's UI library to demonstrate the Popover component.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/overlays/Popover/Popover.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { Fragment } from \"react\";\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport {\n  Box,\n  Button,\n  Flex,\n  Popover,\n  Text,\n  TextInput,\n  Stack,\n} from \"metabase/ui\";\nimport * as PopoverStories from \"./Popover.stories\";\n```\n\n----------------------------------------\n\nTITLE: Running Clojure REPL for Metabase driver development\nDESCRIPTION: Command for starting a Clojure REPL with the necessary dependencies for Metabase driver development. This provides a development environment for testing driver code.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/drivers/multimethods.md#2025-04-23_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\nclojure -A:dev:drivers:drivers-dev\n```\n\n----------------------------------------\n\nTITLE: Loading a Filtered List with Entity Loader in React\nDESCRIPTION: Demonstrates how to pass a dynamic query object to filter the list of items being loaded. This example shows filtering users based on their archived status determined by a component prop.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/frontend.md#2025-04-23_snippet_4\n\nLANGUAGE: jsx\nCODE:\n```\n@Users.loadList({\n  query: (state, props) => ({ archived: props.showArchivedOnly })\n})\n```\n\n----------------------------------------\n\nTITLE: Markdown Documentation Structure for Metabase Permissions\nDESCRIPTION: Structured markdown documentation outlining the main sections and subsections for troubleshooting Metabase permissions, including links to related documentation and resources.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/permissions.md#2025-04-23_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n---\ntitle: Troubleshooting permissions\n---\n\n# Troubleshooting permissions\n\nIf someone has the wrong level of access to a dashboard or a question, the problem may be coming from group settings, collection permissions, or data permissions.\n\n1. Go to **Admin** > **People** and check if the person is in [more than one group with different permissions][group-permissions].\n2. If a person **can't view or edit** questions or dashboards, see [Troubleshooting collection permissions](#troubleshooting-collection-permissions).\n3. If a person **can't access data**, such as schema, tables, rows, or columns, see [Troubleshooting data permissions](#troubleshooting-data-permissions).\n```\n\n----------------------------------------\n\nTITLE: Configuring Database with .lein-env File\nDESCRIPTION: Example of database configuration using a .lein-env file with the environ library, which is scoped to the project only.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/devenv.md#2025-04-23_snippet_13\n\nLANGUAGE: clojure\nCODE:\n```\n{:mb-db-type   \"postgres\"\n :mb-db-host   \"localhost\"\n :mb-db-user   \"<username>\"\n :mb-db-dbname \"<dbname>\"\n :mb-db-pass   \"\"}\n```\n\n----------------------------------------\n\nTITLE: Building All Metabase Drivers\nDESCRIPTION: Command to build all available database drivers for Metabase development.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/devenv.md#2025-04-23_snippet_15\n\nLANGUAGE: sh\nCODE:\n```\n# Build all drivers\n./bin/build-drivers.sh\n```\n\n----------------------------------------\n\nTITLE: Running MongoDB Server with SSL Support in Docker for Metabase QA\nDESCRIPTION: The 'run-server.sh' script is used to start a MongoDB server in Docker for Metabase QA testing. It supports different MongoDB versions and SSL configurations including plain, SSL, and TLS.\nSOURCE: https://github.com/metabase/metabase/blob/master/test_resources/ssl/mongo/README.md#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nrun-server.sh\n```\n\n----------------------------------------\n\nTITLE: Checking Out the Master Git Branch\nDESCRIPTION: Switches the current working directory back to the `master` branch, which typically represents the main line of development or the latest stable release.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/build.md#2025-04-23_snippet_12\n\nLANGUAGE: shell\nCODE:\n```\ngit checkout master\n```\n\n----------------------------------------\n\nTITLE: Implementing UserHasSeenAll Component with Popover in React\nDESCRIPTION: This snippet demonstrates how to use the UserHasSeenAll component in conjunction with a Popover to conditionally render content based on whether the user has seen all items. It shows the component's props usage and how to handle updates.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/components/UserHasSeen/UserHasSeenAll.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\n<UserHasSeenAll id=\"collection-menu\">\n      {({ hasSeenAll, handleUpdate }) => (\n        <Popover>\n            <Popover.Target>\n                <Button onClick={handleUpdate}>{hasSeenAll ? \"nothing new here\" : \"new stuff inside\"}</Button>\n            </Popover.Target>\n            <Popover.Dropdown>\n                <UserHasSeen id=\"Foo\">{() => Foo}</UserHasSeen>\n                <UserHasSeen id=\"Bar\">{() => Bar}</UserHasSeen>\n            </Popover.Dropdown>\n        </Popover>\n      )}\n</UserHasSeenAll>\n```\n\n----------------------------------------\n\nTITLE: Raw Password List Data\nDESCRIPTION: A list of user passwords including combinations of names, numbers, words, and special characters. The passwords demonstrate common patterns like adding numbers to words, using keyboard patterns, and incorporating pop culture references.\nSOURCE: https://github.com/metabase/metabase/blob/master/resources/common_passwords.txt#2025-04-23_snippet_0\n\nLANGUAGE: text\nCODE:\n```\nnorthsta\nannabel\nsherwin\nrebelde\nbulldo\nstallone\nboogie1\n7uftyx\nbrewers\ncfhfnjd\ncompusa\ncornholi\nconfig\nkeaton\nslaves\ndeere\nhoopster\nsepultura\ngrasshop\nbabygurl\nlesbo\nfriendship\ndiceman\nproverbs\nreddragon\nmello\nnurbek\ntigerwoo\nsuperdup\nbuzzsaw\ncranky\nannual\nkakaroto\ndreamy\ngolgo13\nedwar\n123qaz123\nbutter1\nsssss1\nbenning\ntexas2\n4000\nrespekt\nou812ic\n123456qaz\nsallie\n55555a\ndoctor1\nmcgwire\nmaria123\naol999\nluckey\ncinders\nmint\naa1234\njoness\nghbrjkmyj\nmakemone\nsammyboy\nmina\n567765\n380zliki\ntheraven\ntestme\nwetlands\nmylene\nelvira26\nindiglo\nchampagne\ntiramisu\nshannara\nbaby1\nutility\n123666\nchain\ngfhreh\npapercut\njohnmish\norange8\nbogey1\nstrings\nmustang7\nnetworks\ncrime\nbagpipes\ndimarik\nvsijyjr\n4637324\ncrysta\nravage\ncogito\nbatter\nseven11\nnatashka\nwarzone\nhr3ytm\n4free\nbigdee\ncandid\n000006\n243462536\nbigboi\n123333\ntrouts\nsandy123\nshocking\nszevasz\nreject\ngermaine\nbrindle\nmonica2\nguderian\nnada\nnewlife1\nculo\nratchet\nr12345\nrazorbac\n12345i\npiazza31\noddjob\nbeauty1\nfffff1\nanklet\nnodrog\npepit\nolivi\npuravida\nlina\nrobert12\ntransam1\nswindon\nportman\nbubbadog\nsteelers1\nwilson1\nsnotty\nwestgate\njeter\ndavida\nrobby\neightball\nmexico1\nsuperboy\nstuttgart\n4rfv5tgb\nmzepab\nsamurai1\nfuckslut\ncolleen1\ngirdle\nmcguire\nwatkins\nvfrcbvec\nmelville\nbelarus\nreward\nbauer\nq1w2e3r4t\ncoast\nsoldier1\n19844891\nalyssa1\na12345a\nlater\nstrategy\nfidelis\nskelter\nnolove\npractice\nrosetta\nmickeymouse\nismael\nfrehley\ncoffin\npassword69\nwatermel\naliska\nsoccer15\n12345e\nladybug1\nabulafia\nadagio\ntigerlil\ntakehana\nhecate\nbootneck\ndalila\nkaya\noliveira\nprefect\njunfan\nlakeview\narigato\nwonkette\nkindness\nbobby123\ntrustnoone\nphantasm\n132465798\nbrianjo\nw12345\nt34vfrc1991\ndeadeye\ncheesecake\n1robert\n1daddy\nadida\ncheck1\ngrimlock\nnails\nmuffi\nairwalk\narena\nprizrak\nstringer\nanamaria\nonclick\nlongbeac\nernie1\nrender\neadgbe\nmoore1\ngeniu\nshadow123\nbugaga\njonathan1\nweights\ncjrjkjdf\norlova\nbuldog\ntalon1\nwestport\naenima\n541233432442\ncircuit\nbaltimore\nbarsuk\nshelia\nchicago2\nkevi\nkellys\ntough\nhellbent\ntoughguy\niskander\nsupper\nskoal\nwhatisit\nbeto\ncreamer\nliberal\njake123\nscooter2\nfgjrfkbgcbc\nghandi\nlove13\nmedieval\nadelphia\nvjhrjdrf\nadrenali\nniunia\nbrew\njemoeder\nrainbo\ncatch\nsalvation\ncaller\nalaina\nall4u8\nanime1\nshake\ndmitri\nfreedom7\nseraph\n789321\ntommys\nnutz\nantman\nfiretruc\nneogeo\nnatas\ngump\nmelonie\nbmwm3\nfroggy1\npaul1\nmamit\nhoss\nbayview\ngateways\nkusanagi\nihateu\nfrederi\nrock1\ncenturion\ngrizli\nbiggin\nfish1\nflavia\ncuckoo\nstalker1\nthurston\n3girls\ncambodia\nilovepor\nklootzak\nlollo\nredsox04\nlandry\nkirill123\nlebron\njake1\npampers\nvasya\nhammers1\nteacup\ntowing\nceltic1\nishtar\nyingyang\n4904s677075\ndahc1\nseafood\njoann\npatriot1\neffect\nschwarz\npatrick9\nredbirds\ndoremi\nrebecc\nyoohoo\nmakarova\nepiphone\nrfgbnfy\nmilesd\npenner\nblister\nrope\nnowhere\nchelseafc\ncongress\nkatana1\nblackrose\n1james\nlamar\nprimrose\nshock5\nhard1\nscooby12\nc6h12o6\ndustoff\nboing\nchisel\nkamil\ncordell\n1william\ndefiant1\ntyvugq\nmp8o6d\naaa340\nnafets\nswan\nsonnet\njeanine\nflyhigh\n242526\ncrewcom\nblythe\nlove23\nhooked\nregiment\nstrike1\nstairway\nkatusha\nsalamand\ncupcake1\npassword0\n007james\nlottery\nlandlord\nasteroid\nsunnie\nmultisync\nharley01\ntequila1\nsqueaky\nfred12\ndriver8\nq8zo8wzq\nstump\nhunter01\npats\nmozzer\ntemporar\ngrogan\nmeyers\nchantell\neatmeraw\nritchie\nmrbrownxx\nkailey\nsycamore\nflogger\ntincup\nrahasia\nganymede\nbandera\nslinger\nmerry\n1111122222\nvander\nwoodys\n1cowboy\nkhaled\njamies\nlondon12\nbabyboo\ntzpvaw\ndiogenes\nbudice\nmavrick\n135797531\ncheeta\nmacros\nsquonk\nblackber\ntopfuel\napache1\nfalcon16\ndarkjedi\ncheeze\nvfhvtkfl\nsparco\nerick\nnakita\nchange1\ngfhfif\nfreestyl\nkukuruza\ndavi\nloveme2\n12345f\nkozlov\nchapel\nsherpa\nengel\nkatina\nmarbella\n44445555\nbonham\nbocephus\ngerhardt\n1winner\nalvar\nhollydog\ngonefish\nmaxie\nfido\nlaverne\niwantin\nbarman\ngodislove\nhillman\namanda18\nrfpfynbg\nlynx\nfarrah\neugen\nabcdef1\njarred\nredhawk\nthelema\naldo\nclear\nspoonman\nballer1\nharry123\n475869\ntigerman\nmills\ncdtnjxrf\nmarillio\nscribble\nelnino\njacki\ncarguy\nhardhead\nl2g7k3\ntroopers\nselen\ndragon76\nantigua\newtosi\nulysse\ngaming\ntackle\nastana\ngrenade\nparoli\ncristo\nbrit\ncarmex\nmarjan\nbassfish\nimages\nletitbe\nkasparov\njay123\n19933991\nblue13\ndoorman\neyecandy\nscribe\nmylord\nukflbjkec\nellie1\nbeaver1\ndestro\nneuken\nhalfpint\nacosta\nsabotage\nameli\nlilly1\nsatanic\nxngwoj\n12345trewq\neater\nasdf1\nbulldogg\nasakura\nkenyon\njesucrist\ntransport\npollock\nflipside\npackers4\nbiggy\nhaircut\nkadett\nmoss\nproblem\nbiteme69\nbobdog\nsilverfo\nsaint1\nbobbo\npackman\ngodson\nknowledg\nregion\nfoolio\nfussbal\nturkish\nbrowser\n12345g\nknives\nkozerog\nwestcoas\nminidisc\nnbvcxw\nmartini1\nalastair\nrasengan\nsuperbee\nmemento\nporker\nlena123\nbark\nflorenc\nkakadu\nbmw123\ngetalife\nbigsky\nmonkee\nwhistle\npeople1\nschlampe\nred321\nmemyself\n0147896325\n12345678900987654321\nsoccer14\nrealdeal\nwebb\npike\ngfgjxrf\nbeasts\nbella123\ncaro\nkidd\njuggs\ndoritos\nceltics1\npeterbilt\nghbdtnbrb\ngnusmas\nxcountry\nghbdtn1\nkari\nbatman99\ndeusex\ncosta\ngtnhjdf\nblablabl\njuster\nmarimba\nlove2\nrerjkrf\nalhambra\nmicros\nsiemens1\nassmaste\nmoonie\ndashadasha\natybrc\neeeeee1\ngreeks\nwildrose\noverride\nblue55\ndavidl\nxrp23q\nskyblue\nscottish\nleo123\npascale\nggggg1\nbestfriend\nfranny\n1234rmvb\nfun123\nrules1\nsymbol\nsebastien\nwalley\nchester2\nhakeem\nqueer\nwinston2\nagustin\ngraeme\nfartripper\natlant\n07831505\ncain\niluvsex\nwesson\nq1a2z3\nlarrys\n009900\nghjkju\ncapitan\nrider1\nqazxsw21\nbelochka\ncraps\nandy123\nhellya\nchicca\nmaximal\njuergen\nkallie\nmikhail\npassword1234\nhoward1\nquetzal\ntomm\nweber\ndaniel123\nfavour\nvoices\nkingsley\nqpwoeiruty\nsteady\n123555\nbharat\nferrari3\naccounts\nnumbnuts\nsavant\nkosovo\nladydog\nworkshop\nphipsi\nlovepussy\netoile\npower2\nmitten\nbritneys\nchilidog\n08522580\n2fchbg\nkelsie\nlausanne\nspectra\nkinky1\nbluerose\nloulo\nricardo1\ndrinking\ndoqvq3\nkswbdu\n013cpfza\ntimoha\ndivx\nghbdtnghbdtn\n3stooges\ngearhead\nbrowns1\nagosto\ng00ber\ncolby\nsuper7\ngreenbud\nkitty2\npootie\ntoolshed\ngamers\ncoffe\nibill123\nfreelove\nanasazi\nsister1\njigger\nnatash\nstacy1\nweronika\njuarez\nluzern\nsoccer7\nhoopla\ndmoney\nvalerie1\ncanes\nrazdvatri\nwashere\ngreenwoo\nrfhjkbyf\nguns\nanselm\npkxe62\nmaribe\ndaniel2\nmaxim1\nsensor\nmiracles\nbethel\nfaceoff\nchurchill\ncarbine\nxtkjdtr\nbuddy12\nstratos\njumpman\nbuttocks\nboaz\naqswdefr\npepsis\nsonechka\nsteeler1\nlanman\nnietzsch\nballz\nproblems\nbiscuit1\nwrxsti\ngoodfood\ncoconuts\njuventu\nfederic\npoli\nmattman\nparke\nvika123\nstrelec\nhodges\noconnor\njledfyxbr\nsideshow\n4life\nfredderf\nbigwilly\n12347890\n12345671\nsharik\nbosnia\nbmw325i\nfylhtqrf\ndannon4\nmarky\njoints\npakistani\ncarmela\nmrhappy\ndrdoom\nmaddog1\npompier\ncerbera\ngoobers\nhowler\nhumboldt\njenny69\nevely\nletitrid\ncleaver\ndebate\ncthuttdyf\nfelip\nshizzle\ngolf12\nshiny\ntrashy\nt123456\nrankin\nyamah\nsumner\nrapids\nbluearmy\njoking\nsquishy\nroxan\n10inches\ndollface\nbabygirl1\nblacksta\nkaneda\nlexingto\nmilagros\ncanadien\n222888\nkukushka\nsistema\n224422\ntiming\nshadow69\nppspankp\nmellons\nbarbie1\nlatitude\nfree4all\nalfa156\npurity\nlostone\nfleet\n2w3e4r5t\nmaui\nwester\npennie\npainkiller\nrobbie1\npackage\nbinger\n8dihc6\nlanding\njesu\njaspe\nrellik\nquark\nsogood\nhoopstar\nnumber2\nsnowy1\ndad2ownu\ncresta\ntanja\nqwe123asd\nhjvfyjdf\nanabel\ngibsonsg\nqbg26i\ndockers\ngrunge\nalamo\nduckling\nlfiekz\ncuntsoup\nkasia1\n1tigger\namtrak\nancient\ngabi\nwoaini\nreksio\nosbourne\ntmoney\nsuzy\nfirefighter\nneuron\niggy\nsociety\ncovers\naudia3\nwoogie\nreplay\npowerboo\npowermac\nfatcock\nambassador\n12345666\ncaps\nupnfmc\nlustful\nporn1\ngotlove\namylee\nkbytqrf\n11924704\n25251325\ntreat\nsarasota\nsexme\nozzie1\nberliner\nnigga1\nguatemal\nseagulls\nandree\niloveyou!\nchicken2\nzamora\nqwerty21\n010203040506\n1pillow\nworks\nlibby1\nlagoon\nassa\nvodoley\ncatarina\ncheckmate\nbacklash\npiglets\nteiubesc\n019283\nvonnegut\nperico\nthunde\nbuckey\ndowney\ngtxtymrf\nshank\nteri\nmanunite\niiiii1\nlost4815162342\nmadonn\n270873_\nlexi\nbritney1\nwells\nbates\nkevlar\npiano1\nconfuse\ngandhi\nboondock\ncolt1911\nsalamat\ndoma77ns\nanuradha\ncnhjqrf\nrottweil\ntron\nnewmoon\ntopgun1\nmauser\nfightclu\nbirthday21\nreviewpa\nherons\naassddff\nlakers32\nmelissa2\nbells\nvredina\njiujitsu\nmgoblue\nshakey\nmoss84\n12345zxcvb\nfunsex\nbronx\ndobson\nchic\nbenji1\ngarci\n113322\nchipie\nwindex\ndrawing\nnokia5310\npwxd5x\nbluemax\ncosita\nopel\nchalupa\nclair\nbolivia\nframe\ntrotsky\nnew123\ng3ujwg\nnewguy\ncanabis\nscales\ngnaget\nhappydays\nfelixx\n1patrick\nfighters\ncumface\nsparkie\nkozlova\n123234\npaterson\nsprinkle\nnewports\nbroncos7\ngolf18\nrecycle\nwembley\nhahah\nmask\nharrypot\ncachondo\nopen4me\nmiria\nguessit\npepsione\nknocker\nusmc1775\ncountach\nplaye\nwiking\nlandrover\nhotline\ncracksevi\ntrusting\ndrumline\na7777777\nsmile123\nmanzana\npanty\nkasandra\nliberta\npimp69\ndolfan\nquality1\ngraffiti\nschnee\nsuperson\ncommie\nelaine22\nwebhompass\nmrbrownx\ndeepsea\n4wheel\nmamasita\nrockport\nrollie\nmyhome\nherb\njordan12\nkfvgjxrf\nhockey12\nseagrave\nford1\nchelsea2\nsamsara\nmarissa1\nlamesa\npatel\nmobil1\npiotrek\ntommygun\nyyyyy1\nwesley1\nbilly123\nhomersim\njulies\namanda12\nshaka\nmaldini\nsuzenet\nspringst\niiiiii1\ncommodore\nyakuza\neros\n111111aa\nwestwind\npipo\nchesterfield\nhelpdesk\nannamari\nbringit\nhopefull\nhhhhhhh1\nsaywhat\nmazdarx8\nbulova\njennife1\nbaikal\ngfhjkmxbr\nvictoria1\ngizmo123\nalex99\ndefjam\n2girls\nsandrock\npositivo\nplatform\nshingo\nsyncmast\nopensesa\nsilicone\nfuckina\ncrossfire\ngriff\nsenna1\nkarlos\nbridgett\nduffbeer\nmontagne\ndefence\ngehrig\nscenic\napocalypse\nthetick\npepino\nhamburge\nparamedic\nvacuum\nscamp\nstrangle\nhandler\nsmokeweed\nfabregas\ntease\nphantoms\nvenom121293\n2583458\nbadone\nhillbilly\none\nporno69\nmanwhore\ncass\nvfvf123\nnotagain\nvbktyf\nrfnthbyrf\nwildblue\nkelly001\ndragon66\ncamell\nbiggs\ncurtis1\nfrolova\n1212123\ndothedew\nrosalind\ntyler123\nreddrago\nplanetx\npromethe\ngigolo\n1001001\ntesty\nthisone\noutlook\ncorrie\neugeni\nblackshe\ncruzazul\ngiselle\nincognito\nberries\npuller\njoonas\nquick1\nspirit1\nofficial\ngazza\nzealot\ncolon\ngordito\ndarla\nhotrod1\nmitch1\npollito\nhellcat\nmythos\nduluth\ncherish\nweiser\n383pdjvl\neasy123\nscranton\njunker\nserene\nhermos\nwins\nbinkie\nits420\njizz\nadjust\nlovecraf\ndarien\nromina\nhayward\ndoraemon\n19877891\nsyclone\nhadoken\ntranspor\nichiro\nintell\ngargamel\ndragon2\nwavpzt\n557744\nrjw7x4\njennys\njudas\nkickit\nrjynfrn\nlikeit\n555111\ncorvus\nspokane\nnec3520\n133113\nmookie1\nbochum\nbourne\nsamsung2\npurchase\nlocoman0\n154ugeiu\nvfvfbgfgf\n135792\n[start]\ntenni\nsubmarine\n20001\nvestax\ncoronado\nhufmqw\nneveragain\nwizkid\ndryden\nkjgfnf\nnokia6303\ntristen\nsaltanat\nlouie1\ngandalf2\nsinfonia\nalpha3\ntolstoy\nford150\nf00bar\nfrieda\n1hello\nalici\nlol12\nriker1\nhellou\n333888\n1hunter\n```\n\n----------------------------------------\n\nTITLE: Rendering Extra-Small Size Required TimeInput Example\nDESCRIPTION: Shows an extra-small size TimeInput component with an asterisk indicating it's required using Storybook Canvas and Story components.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.mdx#2025-04-23_snippet_12\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={TimeInputStories.AsteriskXs} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Sample Sankey Chart Data Structure\nDESCRIPTION: Example table showing the required data structure for creating a Sankey chart with source, target, and value columns. The data represents user flow through different pages of a website.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/visualizations/sankey.md#2025-04-23_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n| Source page  | Target page  | Total Visitors |\n| ------------ | ------------ | -------------- |\n| Entry        | Homepage     | 584            |\n| Homepage     | Product Page | 2,700          |\n| Product Page | Add to Cart  | 572            |\n| Add to Cart  | Checkout     | 2,490          |\n| Checkout     | Purchase     | 1,756          |\n| Homepage     | Search       | 2,427          |\n| Search       | Product Page | 2,027          |\n| Product Page | Add to Cart  | 2,203          |\n| Add to Cart  | Checkout     | 1,475          |\n| Search       | Product Page | 1,563          |\n| Checkout     | Purchase     | 1,041          |\n| Homepage     | Exit         | 810            |\n| Product Page | Checkout     | 815            |\n| Checkout     | Purchase     | 2,217          |\n| Homepage     | Exit         | 1,020          |\n```\n\n----------------------------------------\n\nTITLE: Handling NA Values with IF Formula - Spreadsheet\nDESCRIPTION: Shows how to use a spreadsheet formula to check if a cell (A2) is #N/A (i.e., missing information) and return 'Unknown feedback.' if so, otherwise returning the cell value. Designed for spreadsheet applications like Microsoft Excel or Google Sheets. Requires access to the ISNA function and assumes the sample data is in column A. Limitations: Only handles #N/A (not empty cells or blank strings), consistent with spreadsheet function behavior.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/isnull.md#2025-04-23_snippet_1\n\nLANGUAGE: Spreadsheet\nCODE:\n```\n=IF(ISNA(A2), \"Unknown feedback.\", A2)\n```\n\n----------------------------------------\n\nTITLE: Reading a Metabase Query Log Entry\nDESCRIPTION: An example log entry from Metabase when running a query, showing the timestamp, log level, namespace, HTTP method, path, status code, async status, response time, database calls, and system resource information.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/server-logs.md#2025-04-23_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\n2021-07-07 15:53:18,560 DEBUG middleware.log :: POST /api/dataset 202 [ASYNC: completed] 46.9 ms (17 DB calls) App DB connections: 1/10 Jetty threads: 3/50 (4 idle, 0 queued) (72 total active threads) Queries in flight: 0 (0 queued); h2 DB 4 connections: 0/1 (0 threads blocked)\n```\n\n----------------------------------------\n\nTITLE: Incorporating Authentication Provider Details\nDESCRIPTION: Method for driver-specific behavior required to incorporate response of an auth-provider into the database details. Typically used for setting username/password based on the auth-provider response.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/driver-changelog.md#2025-04-23_snippet_8\n\nLANGUAGE: clojure\nCODE:\n```\nmetabase.driver/incorporate-auth-provider-details\n```\n\n----------------------------------------\n\nTITLE: Running Unit Tests for JavaScript/TypeScript in Metabase\nDESCRIPTION: Commands to run unit tests for specific files or patterns in JavaScript and TypeScript code for Metabase.\nSOURCE: https://github.com/metabase/metabase/blob/master/CLAUDE.md#2025-04-23_snippet_1\n\nLANGUAGE: Shell\nCODE:\n```\nyarn test-unit path/to/file.unit.spec.js\n```\n\nLANGUAGE: Shell\nCODE:\n```\nyarn test-unit -t \"pattern\"\n```\n\n----------------------------------------\n\nTITLE: Rendering Default Menu Story in Storybook Canvas\nDESCRIPTION: This snippet demonstrates how to render the default Menu story within a Storybook Canvas component.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/overlays/Menu/Menu.mdx#2025-04-23_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={MenuStories.Default} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Rendering Medium Size Read-Only TimeInput Example\nDESCRIPTION: Displays a medium size TimeInput component in a read-only state using Storybook Canvas and Story components.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.mdx#2025-04-23_snippet_9\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={TimeInputStories.ReadOnlyMd} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Starting Frontend Build Process with Hot Reloading\nDESCRIPTION: Command to start the frontend build process with hot module reloading for development.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/devenv.md#2025-04-23_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\nyarn build-hot\n```\n\n----------------------------------------\n\nTITLE: Building Frontend with File Watching without Hot Reloading\nDESCRIPTION: Command to build the frontend with automatic rebuilding on file changes but without hot reloading.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/devenv.md#2025-04-23_snippet_5\n\nLANGUAGE: sh\nCODE:\n```\n$ yarn build-watch\n```\n\n----------------------------------------\n\nTITLE: Rendering UpsellCard Example without Image\nDESCRIPTION: Displays an example of the UpsellCard component without an image using Storybook's Canvas and Story components.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/admin/upsells/components/UpsellCard.mdx#2025-04-23_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={UpsellCardStories.WithoutImage} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Another example of incorrect parent method call in Metabase drivers\nDESCRIPTION: Shows a second incorrect pattern for calling parent driver implementations that could cause problems with inheritance hierarchies and method dispatch.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/drivers/multimethods.md#2025-04-23_snippet_4\n\nLANGUAGE: clojure\nCODE:\n```\n(defmethod driver/mbql->native :bigquery [_ query]\n  ;; BAD! If someone else creates a driver using :bigquery as a parent, any methods called by :sql's implementation\n  ;; of mbql->native will use :bigquery method implementations instead of custom ones for that driver\n  ((get-method driver/mbql->native :sql) :bigquery query))\n```\n\n----------------------------------------\n\nTITLE: Watching Unit Tests for JavaScript/TypeScript in Metabase\nDESCRIPTION: Command to run unit tests in watch mode for a specific file in JavaScript and TypeScript for Metabase.\nSOURCE: https://github.com/metabase/metabase/blob/master/CLAUDE.md#2025-04-23_snippet_2\n\nLANGUAGE: Shell\nCODE:\n```\nyarn test-unit-watch path/to/file.unit.spec.js\n```\n\n----------------------------------------\n\nTITLE: Using String Function notEmpty() in Metabase\nDESCRIPTION: The notEmpty function returns true if a string column contains a value that is not the empty string. Only works with string columns and will cause an error if used with non-string columns.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_39\n\nLANGUAGE: sql\nCODE:\n```\nnotEmpty([Feedback])\n```\n\n----------------------------------------\n\nTITLE: Running Linting and Code Quality Tools - Shell\nDESCRIPTION: Shows various shell commands to run code linters and checkers for the Metabase project, such as Eastwood, namespace checker, clj-kondo, and migration file linter. Assumes the presence of required tools (clj-kondo, eastwood, shell scripts) and an appropriately configured environment. Input is the command itself; output is linter or checker results in the terminal or shell environment.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/devenv.md#2025-04-23_snippet_24\n\nLANGUAGE: Shell\nCODE:\n```\n# Run Eastwood\nclojure -X:dev:ee:ee-dev:drivers:drivers-dev:eastwood\n```\n\nLANGUAGE: Shell\nCODE:\n```\n# Run the namespace checker\nclojure -X:dev:ee:ee-dev:drivers:drivers-dev:test:namespace-checker\n```\n\nLANGUAGE: Shell\nCODE:\n```\n# Run clj-kondo\n./bin/kondo.sh\n```\n\nLANGUAGE: Shell\nCODE:\n```\n# Lint the migrations file (if you've written a database migration):\n./bin/lint-migrations-file.sh\n```\n\n----------------------------------------\n\nTITLE: Running All Frontend Tests\nDESCRIPTION: Command to run all frontend unit tests and Cypress end-to-end tests for the Metabase project.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/devenv.md#2025-04-23_snippet_7\n\nLANGUAGE: sh\nCODE:\n```\nyarn test\n```\n\n----------------------------------------\n\nTITLE: Running Driver-Specific Tests - Shell\nDESCRIPTION: Runs the Metabase test suite specifying which database drivers to include via the DRIVERS environment variable. Useful for testing driver integrations like h2, postgres, mysql, and mongo. Requires drivers and their dependencies to be installed; must be run in a shell with clojure available. Input is a comma-separated list of drivers, output is test suite results, with possible prompts for additional environment configuration on failure.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/devenv.md#2025-04-23_snippet_20\n\nLANGUAGE: Shell\nCODE:\n```\nDRIVERS=h2,postgres,mysql,mongo clojure -X:dev:drivers:drivers-dev:test\n```\n\n----------------------------------------\n\nTITLE: Custom Drill-Through Question Layout in InteractiveDashboard - Metabase SDK - TypeScript\nDESCRIPTION: These snippets illustrate how to override the default drill-through question view by passing a custom React component via the \\'renderDrillThroughQuestion\\' prop in the InteractiveDashboard. Requires the Metabase Embedded Analytics SDK, React, and knowledge of namespaced components inside InteractiveQuestion. Inputs are custom components defined for question views; outputs are tailored drill-through experiences in dashboards.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/dashboards.md#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n{% include_file \\\"{{ dirname }}/snippets/dashboards/custom-drill-through-question-layout.tsx\\\" snippet=\\\"example-1\\\" %}\n```\n\nLANGUAGE: typescript\nCODE:\n```\n{% include_file \\\"{{ dirname }}/snippets/dashboards/custom-drill-through-question-layout.tsx\\\" snippet=\\\"example-2\\\" %}\n```\n\n----------------------------------------\n\nTITLE: Querying Single Number for Gauge Chart in SQL\nDESCRIPTION: This SQL query returns a single number (Sum of Quantity) to be used in a gauge chart. It demonstrates the simplest form of data required for a gauge chart.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/visualizations/gauge.md#2025-04-23_snippet_0\n\nLANGUAGE: sql\nCODE:\n```\n| Sum of Quantity |\n| --------------- |\n| 4910            |\n```\n\n----------------------------------------\n\nTITLE: Rendering Default TimeInput Example in Storybook\nDESCRIPTION: Uses Storybook Canvas and Story components to display the default TimeInput component example.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.mdx#2025-04-23_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={TimeInputStories.Default} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Starting Metabase with Encryption Key as Environment Variable\nDESCRIPTION: Command to start Metabase with the encryption key set as an environment variable. This enables Metabase to encrypt and decrypt database connection details automatically.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/encrypting-details-at-rest.md#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nMB_ENCRYPTION_SECRET_KEY=\"IYqrSi5QDthvFWe4/WdAxhnra5DZC3RKx3ZSrOJDKsM=\" java --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: Deprecated Method: Escaping Aliases in SQL Query Processor\nDESCRIPTION: The escape-alias method in metabase.driver.sql.query-processor has been renamed to metabase.driver/escape-alias. Functionality remains the same.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/driver-changelog.md#2025-04-23_snippet_20\n\nLANGUAGE: clojure\nCODE:\n```\nmetabase.driver.sql.query-processor/escape-alias\n```\n\n----------------------------------------\n\nTITLE: Testing Database Connectivity with Netcat\nDESCRIPTION: Command to test if a database port is accessible using netcat, useful for diagnosing network connectivity issues between containers.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/docker.md#2025-04-23_snippet_8\n\nLANGUAGE: bash\nCODE:\n```\nnc -v your-db-host 5432\n```\n\n----------------------------------------\n\nTITLE: Importing Modal Stories and UI Primitives in React (JavaScript)\nDESCRIPTION: This snippet imports necessary dependencies for the Modal documentation and story presentation: React hooks, Storybook blocks (Canvas, Story, Meta), Metabase UI components (Button, Flex, TextInput), the Modal component itself, and named modal stories. These imports are essential for rendering story examples and integrating Metabase’s styled UI primitives within Storybook. Key dependencies are '@storybook/blocks' and 'metabase/ui'.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/overlays/Modal/Modal.mdx#2025-04-23_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { useState } from \\\"react\\\";\nimport { Canvas, Story, Meta } from \\\"@storybook/blocks\\\";\nimport { Button, Flex, TextInput } from \\\"metabase/ui\\\";\nimport { Modal } from \\\"./\\\";\nimport * as ModalStories from \\\"./Modal.stories\\\";\n```\n\n----------------------------------------\n\nTITLE: Rendering Sidesheet Stories in JSX\nDESCRIPTION: This snippet demonstrates how to render various Sidesheet stories using Storybook's Canvas and Story components. It includes examples of default, cards, sectioned cards, sub-pages, tabs, and buttons configurations.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/common/components/Sidesheet/Sidesheet.mdx#2025-04-23_snippet_1\n\nLANGUAGE: JSX\nCODE:\n```\n<Meta of={SidesheetStories} />\n\n<Canvas>\n  <Story of={SidesheetStories.Default} />\n</Canvas>\n\n<Canvas>\n  <Story of={SidesheetStories.WithCards} />\n</Canvas>\n\n<Canvas>\n  <Story of={SidesheetStories.WithSectionedCards} />\n</Canvas>\n\n<Canvas>\n  <Story of={SidesheetStories.WithSubPages} />\n</Canvas>\n\n<Canvas>\n  <Story of={SidesheetStories.WithTabs} />\n</Canvas>\n\n<Canvas>\n  <Story of={SidesheetStories.SidesheetButtons} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Installing Metabase Embedded SDK using yarn (Bash)\nDESCRIPTION: Installs the Metabase Embedded analytics SDK for React into a project using the yarn package manager. Ensure the dist-tag (e.g., `53-stable`) corresponds to your Metabase version (e.g., v1.53). Requires Node.js, yarn, and a React application environment.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/introduction.md#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nyarn add @metabase/embedding-sdk-react@53-stable\n```\n\n----------------------------------------\n\nTITLE: Accessing Sample Database Table and Field IDs\nDESCRIPTION: Example showing the incorrect way (with hardcoded IDs) and correct way to reference Sample Database tables and fields in Cypress tests using the cypress_sample_database helper.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/e2e-tests.md#2025-04-23_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\n// Don't\nconst query = {\n  \"source-table\": 1,\n  aggregation: [[\"count\"]],\n  breakout: [[\"field\", 7, null]],\n};\n\n// Do this instead\nimport { SAMPLE_DATABASE } from \"e2e/support/cypress_sample_database\";\nconst { PRODUCTS, PRODUCTS_ID } = SAMPLE_DATABASE;\n\nconst query = {\n  \"source-table\": PRODUCTS_ID,\n  aggregation: [[\"count\"]],\n  breakout: [[\"field\", PRODUCTS.CATEGORY, null]],\n};\n```\n\n----------------------------------------\n\nTITLE: Example Output of Successful License Check in Shell\nDESCRIPTION: This snippet shows the expected output when all dependencies have proper license information. It indicates that the license check was successful.\nSOURCE: https://github.com/metabase/metabase/blob/master/bin/build-mb.md#2025-04-23_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nclojure -X:build:build/list-without-license\n...\nAll dependencies have licenses\n```\n\n----------------------------------------\n\nTITLE: Implementing format-honeysql as a Multimethod\nDESCRIPTION: The format-honeysql function is now a multimethod, allowing for custom implementation that can bind *compile-with-inline-parameters* if needed to always compile without parameterization.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/driver-changelog.md#2025-04-23_snippet_3\n\nLANGUAGE: clojure\nCODE:\n```\nmetabase.driver.sql.query-processor/format-honeysql\n```\n\n----------------------------------------\n\nTITLE: Rendering Default QuarterPicker Story\nDESCRIPTION: This snippet renders the default story for the QuarterPicker component using Storybook's Canvas and Story components.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/QuarterPicker/QuarterPicker.mdx#2025-04-23_snippet_2\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={QuarterPickerStories.Default} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Deprecated Var: Field Options in SQL Query Processor\nDESCRIPTION: The *field-options* var is now unused and no longer bound automatically. Refer to the SQL Server driver for an example of creating field options if needed.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/driver-changelog.md#2025-04-23_snippet_22\n\nLANGUAGE: clojure\nCODE:\n```\nmetabase.driver.sql.query-processor/*field-options*\n```\n\n----------------------------------------\n\nTITLE: Linting Clojure in Metabase\nDESCRIPTION: Command to run kondo for linting Clojure code in the Metabase project. The [path] parameter allows specifying a particular file or directory.\nSOURCE: https://github.com/metabase/metabase/blob/master/CLAUDE.md#2025-04-23_snippet_5\n\nLANGUAGE: Shell\nCODE:\n```\n./bin/mage kondo [path]\n```\n\n----------------------------------------\n\nTITLE: Creating a Pot File from a Single Clojure Source File\nDESCRIPTION: Function call to create a pot file from a single Clojure source file. It demonstrates the create-pot-file! function that extracts all translatable strings from a file and outputs them to a pot file format.\nSOURCE: https://github.com/metabase/metabase/blob/master/bin/i18n/README.md#2025-04-23_snippet_2\n\nLANGUAGE: clojure\nCODE:\n```\nenumerate=> (create-pot-file! single-file \"pot.pot\")\nCreated pot file at  pot.pot\n{:valid-usages 3, :entry-count 4, :bad-forms ()}\n```\n\n----------------------------------------\n\nTITLE: Importing MonthPicker Component and Related Dependencies in JavaScript/JSX\nDESCRIPTION: This snippet shows the import statements required for the MonthPicker component documentation. It imports React components, Storybook utilities, and Metabase UI components.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/MonthPicker/MonthPicker.mdx#2025-04-23_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport { Fragment } from \"react\";\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { DatePicker, Box } from \"metabase/ui\";\nimport * as MonthPickerStories from \"./MonthPicker.stories\";\n```\n\n----------------------------------------\n\nTITLE: Installing Frontend Dependencies for Metabase Development\nDESCRIPTION: Command to install JavaScript dependencies for Metabase frontend development using Yarn package manager.\nSOURCE: https://github.com/metabase/metabase/blob/master/README.md#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ yarn install\n```\n\n----------------------------------------\n\nTITLE: Customizing Dashboard Height Using Style Props - Metabase SDK - TSX\nDESCRIPTION: This snippet showcases how to control the rendered dashboard component\\'s height via React style or className props, enabling flexible embedding in layouts. Requires a React environment and the Metabase Embedded Analytics SDK. You provide style overrides to control height or other CSS properties; the output is a dashboard component matching customized sizing requirements.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/dashboards.md#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n{% include_file \\\"{{ dirname }}/snippets/dashboards/custom-height.tsx\\\" snippet=\\\"example\\\" %}\n```\n\n----------------------------------------\n\nTITLE: Enforcing Named Exports Over Default Exports - JavaScript\nDESCRIPTION: Advocates for using named exports in JavaScript/React to improve searchability and enforce proper import usage. The snippet contrasts default import behavior with preferred named imports, clarifying best practices for exporting modules.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/frontend.md#2025-04-23_snippet_13\n\nLANGUAGE: JavaScript\nCODE:\n```\n// this makes it harder to search for Widget\nimport Foo from \"./Widget\";\n// do this to enforce using the proper name\nimport { Widget } from \"./Widget\";\n```\n\n----------------------------------------\n\nTITLE: Rendering Bordered Paper Story in Storybook Canvas\nDESCRIPTION: This JSX snippet illustrates how to render the Paper story with a border within a Storybook Canvas component. It showcases the Paper component with a border applied.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/utils/Paper/Paper.mdx#2025-04-23_snippet_4\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={PaperStories.Border} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Using PostgreSQL-specific date() Function in Metabase\nDESCRIPTION: The date function converts an ISO 8601 date string to a date value. Only available for PostgreSQL databases and requires a valid ISO 8601 format string.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_28\n\nLANGUAGE: sql\nCODE:\n```\ndate(\"2025-03-20\")\n```\n\n----------------------------------------\n\nTITLE: Alternative Conditional Count using CountIf in Metabase Expression (Potential Typo)\nDESCRIPTION: This Metabase custom expression is presented as an alternative for counting inactive subscriptions, potentially represented by `null` values. However, the syntax `CountIf([Payment], [Plan] != true)` appears incorrect for the standard `CountIf` function which expects a single boolean condition. The likely intended logic, based on context, might be `CountIf([Active Subscription] != true)` or similar.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/countif.md#2025-04-23_snippet_5\n\nLANGUAGE: metabase-expression\nCODE:\n```\nCountIf([Payment], [Plan] != true)\n```\n\n----------------------------------------\n\nTITLE: Markdown Documentation Structure\nDESCRIPTION: Markdown documentation defining the structure and content for Metabase's admin tools section, including error logs and model caching information.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/usage-and-performance-tools/tools.md#2025-04-23_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n---\ntitle: Admin tools\nredirect_from:\n  - /docs/latest/enterprise-guide/tools\n---\n\n# Admin tools\n\nThe Admin **Tools** tab contains features for troubleshooting. To get to the Admin tools sections, go to the top right of the screen and click on the **gear** icon > **Admin settings** > **Tools**.\n\n## Question error logs\n\n{% include plans-blockquote.html feature=\"Question error logs\" %}\n\nMetabase will list the questions that returned errors when last run, including the:\n\n- Error message,\n- Database that returned the error,\n- Collection that houses the question that errored.\n\nYou can select and rerun multiple questions at a time while you troubleshoot to see whether you've resolved their errors.\n\n## Model caching logs\n\nHere you can view the:\n\n- [Models](../data-modeling/models.md) being persisted\n- The status of the last model query refresh\n- When the model was last refreshed\n- And who created the persisted model\n\nYou can also click the refresh icon to rerun the model's query to update its results.\n```\n\n----------------------------------------\n\nTITLE: Displaying Modal Without Body Text Example in Storybook Canvas (JSX)\nDESCRIPTION: This snippet shows the 'NoBodyText' modal story in a Canvas, exemplifying a modal that contains a heading without body text. The interactive Storybook rendering helps illustrate the guideline that body text is optional for modals in certain cases.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/overlays/Modal/Modal.mdx#2025-04-23_snippet_5\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={ModalStories.NoBodyText} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Rendering Title Component Size Variants\nDESCRIPTION: Displays the various size options available for the Title component in a Storybook canvas.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/typography/Title/Title.mdx#2025-04-23_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={TitleStories.Sizes} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Rendering Upsell Banner Example in Storybook Canvas\nDESCRIPTION: This snippet demonstrates how to render the default story of the Upsell Banner component within a Storybook Canvas. It uses the Story component to reference the Default story from UpsellBannerStories.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/admin/upsells/components/UpsellBanner.mdx#2025-04-23_snippet_2\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={UpsellBannerStories.Default} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Disabling Save for Interactive Questions (TypeScript/TSX)\nDESCRIPTION: This snippet demonstrates how to disable saving or saving-as-new for InteractiveQuestion components by setting isSaveEnabled={false}. It applies to the Embedded analytics SDK with React/TypeScript (TSX) setup. This is often used to enforce permissions, prevent unwanted changes, or ensure read-only analytics embeds. No saving UI is available when this prop is false.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/questions.md#2025-04-23_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\n```tsx\\n{% include_file \\\"{{ dirname }}/snippets/questions/disable-question-save.tsx\\\" %}\\n```\n```\n\n----------------------------------------\n\nTITLE: React Component with Arrow Function Instance Properties\nDESCRIPTION: Illustrates the recommended pattern for binding class methods in React components using arrow function instance properties instead of explicit binding in the constructor. This is useful when passing methods as event handlers.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/frontend.md#2025-04-23_snippet_5\n\nLANGUAGE: jsx\nCODE:\n```\nclass MyComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    // NO:\n    this.handleChange = this.handleChange.bind(this);\n  }\n  // YES:\n  handleChange = e => {\n    // ...\n  };\n  // no need to bind:\n  componentDidMount() {}\n  render() {\n    return <input onChange={this.handleChange} />;\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Including Feature-Specific Blockquote using Liquid Template\nDESCRIPTION: This Liquid template directive includes the content of 'plans-blockquote.html', passing 'Group managers' as the value for the 'feature' parameter. It's used within the Metabase documentation build process to conditionally render a blockquote related to the 'Group managers' feature, often indicating plan-specific availability.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/people-and-groups/managing.md#2025-04-23_snippet_2\n\nLANGUAGE: liquid\nCODE:\n```\n{% include plans-blockquote.html feature=\"Group managers\" %}\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom File Location in Emacs for Metabase Development\nDESCRIPTION: This snippet configures Emacs to store customizations (including those from .dir-locals.el) in a separate file instead of appending them to init.el. It sets the custom-file variable and attempts to load it if it exists.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/emacs.md#2025-04-23_snippet_0\n\nLANGUAGE: emacs-lisp\nCODE:\n```\n(setq custom-file (concat user-emacs-directory \".custom.el\")) ; tell Customize to save customizations to ~/.emacs.d/.custom.el\n(ignore-errors                                                ; load customizations from ~/.emacs.d/.custom.el\n  (load-file custom-file))\n```\n\n----------------------------------------\n\nTITLE: Importing Autocomplete Components in React/JSX\nDESCRIPTION: Demonstrates how to import the necessary components from Storybook and Metabase UI for documenting and using the Autocomplete component.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/Autocomplete/Autocomplete.mdx#2025-04-23_snippet_0\n\nLANGUAGE: JSX\nCODE:\n```\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { Autocomplete, Stack } from \"metabase/ui\";\nimport * as AutocompleteStories from \"./Autocomplete.stories\";\n```\n\n----------------------------------------\n\nTITLE: HTML Template for Chart Rendering\nDESCRIPTION: This HTML snippet shows an example template for rendering a chart. It includes placeholders for the chart image and surrounding text. The {{chart}} placeholder is used to indicate where the chart image should be embedded.\nSOURCE: https://github.com/metabase/metabase/blob/master/dev/src/dev/readme.md#2025-04-23_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<div>\n  <h1>behold the donut</h1>\n  {{chart}}\n  <hr>\n  <h3>the donut has been beholden</h3>\n</div>\n```\n\n----------------------------------------\n\nTITLE: Calling a parent driver's implementation in a Metabase driver\nDESCRIPTION: Shows how to properly call a parent driver's implementation of a multimethod while preserving the correct dispatch behavior for child methods. This example calls the SQL driver's mbql->native method.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/drivers/multimethods.md#2025-04-23_snippet_2\n\nLANGUAGE: clojure\nCODE:\n```\n(defmethod driver/mbql->native :bigquery [driver query]\n  ((get-method driver/mbql-native :sql) driver query))\n```\n\n----------------------------------------\n\nTITLE: Running the Migrations File Linter Tests in Shell\nDESCRIPTION: Commands to navigate to the linter directory and run the tests for the migrations file linter using Clojure.\nSOURCE: https://github.com/metabase/metabase/blob/master/bin/lint-migrations-file/README.md#2025-04-23_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\ncd bin/lint-migrations-file\nclojure -M:test\n```\n\n----------------------------------------\n\nTITLE: Disabling Encryption in Metabase via CLI\nDESCRIPTION: Command to disable encryption in Metabase by rotating the current key to an empty string. This will decrypt all encrypted database connection details and store them in plaintext.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/encrypting-details-at-rest.md#2025-04-23_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nMB_ENCRYPTION_SECRET_KEY=\"your-current-key\" java --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar rotate-encryption-key \"\"\n```\n\n----------------------------------------\n\nTITLE: Displaying Sentence Case Title Modal Example in Storybook Canvas (JSX)\nDESCRIPTION: This snippet displays the 'SentenceCaseTitles' modal story inside a Canvas block in Storybook. The Canvas and Story components from '@storybook/blocks' are used to render an interactive preview of the Modal with sentence-case title conventions. This allows users to view and test the Modal’s adherence to recommended heading casing directly within the documentation.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/overlays/Modal/Modal.mdx#2025-04-23_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={ModalStories.SentenceCaseTitles} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Using Password Reset Token in Metabase URL - Plaintext\nDESCRIPTION: This plaintext snippet shows the format for accessing the password reset page in Metabase using the token generated in the previous step. Replace the example URL and token with those generated by the Java command. This endpoint enables the admin to set a new password directly via the web interface. Ensure that the server is running normally (without the reset-password option) before visiting this URL.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/people-and-groups/managing.md#2025-04-23_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\nhttps://metabase.example.com/auth/reset_password/1_7db2b600-d538-4aeb-b4f7-0cf5b1970d89\n```\n\n----------------------------------------\n\nTITLE: Rendering Card.Section with Border Story in Storybook Canvas\nDESCRIPTION: This snippet illustrates how to render a Card.Section story with a border within a Storybook Canvas. It shows the Card.Section subcomponent with border styling.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/data-display/Card/Card.mdx#2025-04-23_snippet_5\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={CardStories.CardSectionBorder} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Defining Constants in ALL_CAPS - JavaScript\nDESCRIPTION: Shows the convention for naming constants using ALL_CAPS, both for primitive values and for configuration objects. Encourages clear distinction of constant values versus variables, aiding code maintainability.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/frontend.md#2025-04-23_snippet_12\n\nLANGUAGE: JavaScript\nCODE:\n```\n// do this\nconst MIN_HEIGHT = 200;\n\n// also acceptable\nconst OBJECT_CONFIG_CONSTANT = {\n  camelCaseProps: \"are OK\",\n  abc: 123,\n};\n```\n\n----------------------------------------\n\nTITLE: Using Mathematical Function sqrt() in Metabase\nDESCRIPTION: The sqrt function returns the square root of a value. It takes a single column or value as input. Not supported in SQLite.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_25\n\nLANGUAGE: sql\nCODE:\n```\nsqrt([Hypotenuse])\n```\n\n----------------------------------------\n\nTITLE: Generating Metabase Config File Template with Clojure\nDESCRIPTION: Command to generate the Metabase configuration file template using Clojure. This should be run from the top-level Metabase directory.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/config-template.md#2025-04-23_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nclojure -M:doc:ee config-template\n```\n\n----------------------------------------\n\nTITLE: Rendering Title Component Default Story\nDESCRIPTION: Displays the default example of the Title component in a Storybook canvas.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/typography/Title/Title.mdx#2025-04-23_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={TitleStories.Default} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Installing Rosetta 2 on M1 Apple Computers (Root)\nDESCRIPTION: Installs Rosetta 2 on Apple Silicon (M1/M2) Macs, automatically agreeing to the license agreement. This variant requires root permissions. Rosetta 2 enables compatibility for x86_64 software on ARM architecture.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/build.md#2025-04-23_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\n/usr/sbin/softwareupdate --install-rosetta --agree-to-license\n```\n\n----------------------------------------\n\nTITLE: Defining Storybook Meta for DatePicker Stories\nDESCRIPTION: This snippet sets up the Storybook Meta component for the DatePicker stories, which is used to configure the story's metadata and controls.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/DatePicker/DatePicker.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n<Meta of={DatePickerStories} />\n```\n\n----------------------------------------\n\nTITLE: Using the mb-download Utility in Bash\nDESCRIPTION: This snippet shows the usage instructions for the mb-download utility, which downloads Metabase jar files. The tool can download a specific version to either the $JARS environment variable location or a custom path provided by the user.\nSOURCE: https://github.com/metabase/metabase/blob/master/bin/README.md#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ ./mb-download -h\nUsage: mb-download 0.42.2\nUsage: mb-download 1.45.2\nUsage: mb-download 1.45.2 ~/path/to/my/jars\n\nprotip: this script will read from $JARS, and use that as your jar directory.\n```\n\n----------------------------------------\n\nTITLE: Importing Meta Component from Storybook in JSX\nDESCRIPTION: This snippet imports the Meta component from Storybook's blocks module and sets the title of the documentation page to 'Intro'.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/Intro.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { Meta } from \"@storybook/blocks\";\n\n<Meta title=\"Intro\" />\n```\n\n----------------------------------------\n\nTITLE: Installing Docker Desktop via Homebrew (macOS)\nDESCRIPTION: This command uses Homebrew, a package manager for macOS, to install the Docker Desktop application. It requires Homebrew to be pre-installed on the system.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/dev-branch-docker.md#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nbrew install --cask docker\n```\n\n----------------------------------------\n\nTITLE: Formatting JavaScript/TypeScript in Metabase\nDESCRIPTION: Command to run Prettier for formatting JavaScript and TypeScript code in the Metabase project.\nSOURCE: https://github.com/metabase/metabase/blob/master/CLAUDE.md#2025-04-23_snippet_3\n\nLANGUAGE: Shell\nCODE:\n```\nyarn prettier\n```\n\n----------------------------------------\n\nTITLE: Displaying Image Background Position Story in Storybook Canvas\nDESCRIPTION: This snippet shows how to display the Image Background Position story within a Storybook Canvas component. It demonstrates different background position options for the Image component.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/data-display/Image/Image.mdx#2025-04-23_snippet_3\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={ImageStories.BackgroundPosition} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Rendering Extra-Small Size TimeInput with Error\nDESCRIPTION: Displays an extra-small size TimeInput component with an error state using Storybook Canvas and Story components.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.mdx#2025-04-23_snippet_15\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={TimeInputStories.ErrorXs} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Markdown Frontmatter Configuration\nDESCRIPTION: YAML frontmatter configuration for the documentation page, defining the title and redirect paths.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/visualizations/tooltips.md#2025-04-23_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\n---\ntitle: Tooltips\nredirect_from:\n  - /docs/latest/questions/sharing/visualizations/tooltips\n---\n```\n\n----------------------------------------\n\nTITLE: Listing driver multimethods with documentation\nDESCRIPTION: Command to list all driver multimethods along with their docstrings, providing more detailed information about each method's purpose and parameters.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/drivers/multimethods.md#2025-04-23_snippet_8\n\nLANGUAGE: bash\nCODE:\n```\nclojure -M:run driver-methods docs\n```\n\n----------------------------------------\n\nTITLE: Importing Menu Component and Stories in JSX\nDESCRIPTION: This snippet shows the import statements for the Menu component and its stories, along with other necessary imports from Storybook and Metabase UI.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/overlays/Menu/Menu.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { Icon } from \"metabase/ui\";\nimport { Button, Flex, Text } from \"metabase/ui\";\nimport { Menu } from \"./\";\nimport * as MenuStories from \"./Menu.stories\";\n```\n\n----------------------------------------\n\nTITLE: Example Output of Failed License Check in Shell\nDESCRIPTION: This snippet demonstrates the output when there are dependencies missing license information. It shows the command to run the check and lists the specific dependencies that are missing licenses.\nSOURCE: https://github.com/metabase/metabase/blob/master/bin/build-mb.md#2025-04-23_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nclojure -X:build:build/list-without-license\n$ \"clojure\" \"-A:ee\" \"-Spath\"\nMissing License: /Users/dan/.m2/repository/org/eclipse/jetty/jetty-webapp/9.3.19.v20170502/jetty-webapp-9.3.19.v20170502.jar\nMissing License: /Users/dan/.m2/repository/org/fusesource/leveldbjni/leveldbjni-all/1.8/leveldbjni-all-1.8.jar\nMissing License: /Users/dan/.m2/repository/org/opensaml/opensaml-security-impl/3.4.5/opensaml-security-impl-3.4.5.jar\nMissing License: /Users/dan/.m2/repository/colorize/colorize/0.1.1/colorize-0.1.1.jar\n```\n\n----------------------------------------\n\nTITLE: Rendering Switch Component Examples in Storybook Canvas in JSX\nDESCRIPTION: These snippets demonstrate how to render different Switch component examples within Storybook Canvas and Story components.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/Switch/Switch.mdx#2025-04-23_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={SwitchStories.Default} />\n</Canvas>\n```\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={SwitchStories.Label} />\n</Canvas>\n```\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={SwitchStories.LabelLeftPosition} />\n</Canvas>\n```\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={SwitchStories.Description} />\n</Canvas>\n```\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={SwitchStories.DescriptionLeftPosition} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Generating Metabase Config Template via Clojure (Bash)\nDESCRIPTION: This command, executed from the top-level Metabase directory, uses the Clojure command-line tool to run a specific alias (`-M:doc:ee`) with the `config-template` argument. Its purpose is to automatically generate the Metabase configuration file template shown below. Requires Clojure installed and being in the correct project directory.\nSOURCE: https://github.com/metabase/metabase/blob/master/src/metabase/cmd/resources/config-file-intro.md#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nclojure -M:doc:ee config-template\n```\n\n----------------------------------------\n\nTITLE: Rendering Medium Size TimeInput with Description\nDESCRIPTION: Shows a medium size TimeInput component with an additional description text using Storybook Canvas and Story components.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.mdx#2025-04-23_snippet_6\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={TimeInputStories.DescriptionMd} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Running Metabase Pro/Enterprise Docker Container - Shell\nDESCRIPTION: This command starts a detached Docker container running the Pro or Enterprise version of Metabase, with externalized application database parameters. Dependencies: Docker, valid credentials for the chosen JDBC-compatible database. Inputs mirror those in the open source command, with container and database connection details as parameters.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/upgrading-metabase.md#2025-04-23_snippet_6\n\nLANGUAGE: shell\nCODE:\n```\ndocker run -d -p 3000:3000 -e MB_DB_CONNECTION_URI=\\\"jdbc:postgresql://<host>:5432/metabase?user=<username>&password=<password>\\\" --name metabase metabase/metabase-enterprise:latest\n```\n\n----------------------------------------\n\nTITLE: JDBC Connection String Options Example\nDESCRIPTION: Example showing how to append additional JDBC connection string options using ampersand-separated format. Demonstrates setting connection and socket timeout values.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/databases/connections/clickhouse.md#2025-04-23_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\nconnection_timeout=1000&socket_timeout=300000\n```\n\n----------------------------------------\n\nTITLE: Installing Metabase SDK with Yarn\nDESCRIPTION: Command to install the Metabase Embedded analytics SDK for React using Yarn package manager.\nSOURCE: https://github.com/metabase/metabase/blob/master/enterprise/frontend/src/embedding-sdk/README.md#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nyarn add @metabase/embedding-sdk-react\n```\n\n----------------------------------------\n\nTITLE: Importing Paper Component and Related Dependencies\nDESCRIPTION: This snippet shows the import statements required for using the Paper component and related Storybook elements. It imports from React, Storybook, and the Metabase UI library.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/utils/Paper/Paper.mdx#2025-04-23_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport { Fragment } from \"react\";\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { Grid, Paper, Text } from \"metabase/ui\";\nimport * as PaperStories from \"./Paper.stories\";\n```\n\n----------------------------------------\n\nTITLE: Running Tests for Release List Generator\nDESCRIPTION: This command executes the tests for the release list generator script using Babashka's test runner.\nSOURCE: https://github.com/metabase/metabase/blob/master/bin/release-list/README.md#2025-04-23_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nbb test:bb\n```\n\n----------------------------------------\n\nTITLE: Configuring Storybook Meta for SegmentedControl Stories (JSX)\nDESCRIPTION: Uses the Storybook `<Meta>` component to link this MDX documentation file with the collection of stories defined in `SegmentedControl.stories.js` (or `.ts`). This enables Storybook to associate the documentation page with the component's stories, often used for displaying controls and documentation panels correctly.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/SegmentedControl/SegmentedControl.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n<Meta of={SegmentedControlStories} />\n```\n\n----------------------------------------\n\nTITLE: Running Clojure Tests in Metabase\nDESCRIPTION: Command to run a specific Clojure test in the Metabase project. Replace namespace/test-name with the actual namespace and test name.\nSOURCE: https://github.com/metabase/metabase/blob/master/CLAUDE.md#2025-04-23_snippet_7\n\nLANGUAGE: Shell\nCODE:\n```\nclojure -X:dev:test :only namespace/test-name\n```\n\n----------------------------------------\n\nTITLE: Viewing Enterprise Metabase Container Logs with Podman (Shell)\nDESCRIPTION: This command displays the real-time logs (`-f`) for the running Metabase Pro/Enterprise container named 'metabase'. It is useful for monitoring initialization and troubleshooting. Requires a running container named 'metabase'.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/running-metabase-on-podman.md#2025-04-23_snippet_6\n\nLANGUAGE: shell\nCODE:\n```\npodman logs -f metabase\n```\n\n----------------------------------------\n\nTITLE: Running Metabase Enterprise Edition from JAR (Shell)\nDESCRIPTION: Executes the Metabase Enterprise Edition JAR file using the Java runtime. This command is an alternative to Docker for running Metabase locally. It requires Java to be installed and the `metabase.jar` file (downloaded separately) to be in the current directory. The `--add-opens` flag is necessary for compatibility with certain Java versions.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/quickstart-with-sample-app.md#2025-04-23_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\njava --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: Building a Single Metabase Driver with Clojure CLI\nDESCRIPTION: Commands for building a specific Metabase driver. This approach builds the specified driver and any parent drivers it depends on. Edition can be specified as an optional parameter.\nSOURCE: https://github.com/metabase/metabase/blob/master/bin/build-drivers.md#2025-04-23_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\nclojure -X:build:drivers:build/driver :driver :sqlserver\n\n# or\n\nclojure -X:build:drivers:build/driver :driver :sqlserver :edition :oss\n\n# or\n\n./bin/build-driver.sh redshift\n```\n\n----------------------------------------\n\nTITLE: Viewing Import Flags via CLI\nDESCRIPTION: Command to view a list of available import flags for Metabase serialization using the CLI.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/serialization.md#2025-04-23_snippet_12\n\nLANGUAGE: bash\nCODE:\n```\njava --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar help import\n```\n\n----------------------------------------\n\nTITLE: Configuring Storybook Meta for Image Component in JSX\nDESCRIPTION: This snippet sets up the Storybook Meta component for the Image stories. It's used to configure the Storybook documentation for the Image component.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/data-display/Image/Image.mdx#2025-04-23_snippet_1\n\nLANGUAGE: JSX\nCODE:\n```\n<Meta of={ImageStories} />\n```\n\n----------------------------------------\n\nTITLE: Rendering Multiline UpsellPill Story\nDESCRIPTION: Displays the multiline variant of the UpsellPill component. This example demonstrates how the UpsellPill handles longer text that requires multiple lines to display.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/admin/upsells/components/UpsellPill.mdx#2025-04-23_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={UpsellPillStories.Multiline} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Building a Metabase Driver in Bash (Metabase 0.46.0)\nDESCRIPTION: Updated build command for Metabase drivers as of version 0.46.0. This command builds the driver using Clojure, specifying the driver path and target directory.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/driver-changelog.md#2025-04-23_snippet_12\n\nLANGUAGE: bash\nCODE:\n```\n# switch to the local checkout of the Metabase repo\ncd /path/to/metabase/repo\n\n# get absolute path to the driver project directory\nDRIVER_PATH=`readlink -f ~/sudoku-driver`\n\n# Build driver. See explanation in sample Sudoku driver README\nclojure \\\n  -Sdeps \"{:aliases {:sudoku {:extra-deps {com.metabase/sudoku-driver {:local/root \\\"$DRIVER_PATH\\\"}}}}\"  \\\n  -X:build:sudoku \\\n  build-drivers.build-driver/build-driver! \\\n  \"{:driver :sudoku, :project-dir \\\"$DRIVER_PATH\\\", :target-dir \\\"$DRIVER_PATH/target\\\"}\"\n```\n\n----------------------------------------\n\nTITLE: Rendering Default Paper Story in Storybook Canvas\nDESCRIPTION: This JSX snippet demonstrates how to render the default Paper story within a Storybook Canvas component. It's used to showcase the default appearance of the Paper component.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/utils/Paper/Paper.mdx#2025-04-23_snippet_2\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={PaperStories.Default} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Storybook Meta Configuration for Tooltip\nDESCRIPTION: Sets up the Storybook Meta configuration to associate the documentation with Tooltip stories.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/overlays/Tooltip/Tooltip.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n<Meta of={TooltipStories} />\n```\n\n----------------------------------------\n\nTITLE: Deprecated Method: Prefixing Field Aliases in Clojure\nDESCRIPTION: The prefix-field-alias method is no longer used. Implement metabase.driver/escape-alias for custom alias handling, as it's now called on automatically generated aliases.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/driver-changelog.md#2025-04-23_snippet_26\n\nLANGUAGE: clojure\nCODE:\n```\nmetabase.driver.sql.query-processor/prefix-field-alias\n```\n\n----------------------------------------\n\nTITLE: Rendering UpsellCard Example with Image\nDESCRIPTION: Displays an example of the UpsellCard component with an image using Storybook's Canvas and Story components.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/admin/upsells/components/UpsellCard.mdx#2025-04-23_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={UpsellCardStories.WithImage} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Manually Logging Out Users from Metabase - URL Endpoint - Shell\nDESCRIPTION: This snippet provides the direct Metabase URL endpoint for logging a user out of their session. This URL can be loaded (e.g., via a hidden iframe) to clear cookies and session info, typically used during app-initiated logouts. Dependencies include an active Metabase instance at your organization's URL. No parameters are required; output is a user logged out and cookies invalidated.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/interactive-embedding.md#2025-04-23_snippet_9\n\nLANGUAGE: sh\nCODE:\n```\nhttps://metabase.yourcompany.com/auth/logout\n```\n\n----------------------------------------\n\nTITLE: GitHub-less Metabase Release (Shell)\nDESCRIPTION: These commands demonstrate how to perform a Metabase release without GitHub, specifying whether it's the latest release or not.\nSOURCE: https://github.com/metabase/metabase/blob/master/release/README.md#2025-04-23_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\nyarn release-offline v0.77.77 1234567890abcdef1234567890abcdef12345678 --publish --without-github --not-latest\n```\n\nLANGUAGE: shell\nCODE:\n```\nyarn release-offline v0.77.77 1234567890abcdef1234567890abcdef12345678 --publish --without-github --latest\n```\n\n----------------------------------------\n\nTITLE: Setting Environment Variables for Metabase JAR on Windows Powershell\nDESCRIPTION: Commands to set environment variables and run Metabase JAR file using Windows Powershell.\nSOURCE: https://github.com/metabase/metabase/blob/master/src/metabase/cmd/resources/env-var-intro.md#2025-04-23_snippet_2\n\nLANGUAGE: powershell\nCODE:\n```\n$env:MB_SITE_NAME=\"Awesome Company\"\n\njava --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: Defining Storybook Meta for List Component in JSX\nDESCRIPTION: This snippet sets up the Storybook Meta component for the List stories. It's used to configure the documentation layout and settings for the List component.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/typography/List/List.mdx#2025-04-23_snippet_1\n\nLANGUAGE: JSX\nCODE:\n```\n<Meta of={ListStories} />\n```\n\n----------------------------------------\n\nTITLE: Deprecated Var: Source Query in SQL Query Processor\nDESCRIPTION: The *source-query* var is now unused. Use metabase.driver.sql.query-processor/*inner-query* instead, which is always bound, even outside of a source query.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/driver-changelog.md#2025-04-23_snippet_24\n\nLANGUAGE: clojure\nCODE:\n```\nmetabase.driver.sql.query-processor/*source-query*\n```\n\n----------------------------------------\n\nTITLE: Importing NumberInput Component and Related Stories\nDESCRIPTION: This snippet shows the import statements for the NumberInput component, related stories, and other required components from Storybook and Metabase UI.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/NumberInput/NumberInput.mdx#2025-04-23_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { Icon } from \"metabase/ui\";\nimport { Stack } from \"metabase/ui\";\nimport { NumberInput } from \"./\";\nimport * as NumberInputStories from \"./NumberInput.stories\";\n```\n\n----------------------------------------\n\nTITLE: Enabling Better Source Maps for Frontend Debugging\nDESCRIPTION: Command to enable more detailed source maps for improved debugging, especially for JSX components.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/devenv.md#2025-04-23_snippet_8\n\nLANGUAGE: sh\nCODE:\n```\nBETTER_SOURCE_MAPS=true yarn dev\n```\n\n----------------------------------------\n\nTITLE: Recommended EE API Route Format for Subscription Management\nDESCRIPTION: Example of the recommended format for an Enterprise Edition API route that deletes user subscriptions. This follows the preferred pattern of prefixing with '/ee/' followed by the module name.\nSOURCE: https://github.com/metabase/metabase/blob/master/enterprise/backend/README.md#2025-04-23_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nDELETE /api/ee/subscription-management/user/:id/subscriptions\n```\n\n----------------------------------------\n\nTITLE: Running the Migrations File Linter in Shell\nDESCRIPTION: Command to execute the migrations file linter script which validates the Liquibase migrations file against defined specifications.\nSOURCE: https://github.com/metabase/metabase/blob/master/bin/lint-migrations-file/README.md#2025-04-23_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\n./bin/lint-migrations-file.sh\n```\n\n----------------------------------------\n\nTITLE: Importing Loader Component and Related Files\nDESCRIPTION: Shows the necessary imports for the Loader component documentation, including React, Storybook components, UI components, and story imports.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/feedback/Loader/Loader.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { Fragment } from \"react\";\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { Grid, Text } from \"metabase/ui\";\nimport { Loader } from \"./\";\nimport * as LoaderStories from \"./Loader.stories\";\n```\n\n----------------------------------------\n\nTITLE: Implementing UserHasSeen Component for Feature Badges in JSX\nDESCRIPTION: Example of using the UserHasSeen component to display a 'New' badge next to a menu item until the user clicks on it. The component tracks whether the user has seen the feature and provides an acknowledgment function to update this state.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/components/UserHasSeen/UserHasSeen.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\n<UserHasSeen id=\"some-key\">\n    {(hasSeen, ack) => (\n        <Menu.Item\n            onClick={ack}\n            rightSection={!hasSeen ? <Badge>{t`New`}</Badge> : null}\n            >{t`I'm a product feature 😀`}</Menu.Item>\n    )}\n</UserHasSeen>\n```\n\n----------------------------------------\n\nTITLE: Deprecated Method: Formatting Custom Field Names in Clojure\nDESCRIPTION: The format-custom-field-name method is now unused. Implement metabase.driver/escape-alias instead for custom field name formatting.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/driver-changelog.md#2025-04-23_snippet_19\n\nLANGUAGE: clojure\nCODE:\n```\nmetabase.driver/format-custom-field-name\n```\n\n----------------------------------------\n\nTITLE: Rendering Default List Story in Storybook Canvas\nDESCRIPTION: This snippet demonstrates how to render the default List story within a Storybook Canvas component. It showcases the basic usage of the List component.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/typography/List/List.mdx#2025-04-23_snippet_2\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={ListStories.Default} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Rendering Default Textarea Story\nDESCRIPTION: This snippet demonstrates how to render the default story for the Textarea component in Storybook.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/Textarea/Textarea.mdx#2025-04-23_snippet_2\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={TextareaStories.Default} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Displaying Default SegmentedControl Example using Storybook (JSX)\nDESCRIPTION: Renders the 'Default' story, imported as `SegmentedControlStories.Default`, within a Storybook `<Canvas>` block. The `<Canvas>` provides an isolated preview environment, and `<Story>` embeds the specific story, displaying the default usage example of the `SegmentedControl` component.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/SegmentedControl/SegmentedControl.mdx#2025-04-23_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={SegmentedControlStories.Default} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Discouraged EE API Route Format\nDESCRIPTION: Example of a discouraged API route format that doesn't follow the EE naming convention. This pattern should be avoided as it doesn't clearly indicate that the endpoint is part of the Enterprise Edition.\nSOURCE: https://github.com/metabase/metabase/blob/master/enterprise/backend/README.md#2025-04-23_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\nDELETE /api/user/:id/subscriptions\n```\n\n----------------------------------------\n\nTITLE: Configuring Metabase Session Expiry Settings - Environment Variables - Shell\nDESCRIPTION: This snippet demonstrates how to set the MAX_SESSION_AGE environment variable to control how long a user session remains active in Metabase. The value is set in minutes, and in this example, it is configured for 1440 minutes (24 hours). The snippet requires that the Metabase server is started after setting this environment variable. No input other than the value in minutes is needed; outputs are managed by Metabase itself. This setting can be added to a shell or service environment configuration.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/interactive-embedding.md#2025-04-23_snippet_7\n\nLANGUAGE: sh\nCODE:\n```\nMAX_SESSION_AGE=1440\n```\n\n----------------------------------------\n\nTITLE: Creating Test Extension File for a Database Driver\nDESCRIPTION: Shows where to place the test extension file for a SQLite driver in the Metabase file structure. This file will contain implementations of test extension methods required for testing the driver.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/drivers/driver-tests.md#2025-04-23_snippet_1\n\nLANGUAGE: clojure\nCODE:\n```\nmetabase/modules/drivers/sqlite/test/metabase/test/data/sqlite.clj   ; <- test extensions\n```\n\n----------------------------------------\n\nTITLE: Removed Var: Datetime Field Unit in Clojure\nDESCRIPTION: The DatetimeFieldUnit var, deprecated in 0.39.0, has been removed in version 0.42.0.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/driver-changelog.md#2025-04-23_snippet_28\n\nLANGUAGE: clojure\nCODE:\n```\nmetabase.mbql.schema/DatetimeFieldUnit\n```\n\n----------------------------------------\n\nTITLE: Setting Up Storybook Meta Component for PopoverBackButton\nDESCRIPTION: Configures the Storybook Meta component to link to the PopoverBackButton stories, establishing the documentation context.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/buttons/PopoverBackButton/PopoverBackButton.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n<Meta of={PopoverBackButtonStories} />\n```\n\n----------------------------------------\n\nTITLE: Running Jest Unit Tests\nDESCRIPTION: Commands to run Jest unit tests either once or in watch mode for continuous testing during development.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/devenv.md#2025-04-23_snippet_9\n\nLANGUAGE: sh\nCODE:\n```\nyarn test-unit # Run all tests at once\nyarn test-unit-watch # Watch for file changes\n```\n\n----------------------------------------\n\nTITLE: Importing Switch Component and Storybook Dependencies in JavaScript\nDESCRIPTION: This snippet shows the import statements for the Switch component, Storybook dependencies, and other necessary components from the Metabase UI library.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/Switch/Switch.mdx#2025-04-23_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport * as SwitchStories from \"./Switch.stories\";\n\nimport { Switch, Stack } from \"metabase/ui\";\n```\n\n----------------------------------------\n\nTITLE: Importing Dependencies for Upsell Banner in JavaScript/JSX\nDESCRIPTION: This snippet shows the import statements required for the Upsell Banner component and its related stories. It includes imports from Metabase UI, Storybook, and support utilities.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/admin/upsells/components/UpsellBanner.mdx#2025-04-23_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport { Box } from \"metabase/ui\";\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { ReduxProvider } from \"__support__/storybook\";\nimport { _UpsellBanner } from \"./UpsellBanner\";\nimport * as UpsellBannerStories from \"./UpsellBanner.stories\";\n```\n\n----------------------------------------\n\nTITLE: Setting Up Storybook Meta Component\nDESCRIPTION: Configures the Storybook Meta component to reference the Progress stories defined in a separate file.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/feedback/Progress/Progress.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n<Meta of={ProgressStories} />\n```\n\n----------------------------------------\n\nTITLE: Rendering Default Select Story\nDESCRIPTION: This snippet demonstrates how to render the default Select component story in Storybook.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/Select/Select.mdx#2025-04-23_snippet_2\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={SelectStories.Default} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Defining Storybook Meta for NumberInput\nDESCRIPTION: This snippet sets up the Storybook metadata for the NumberInput component stories.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/NumberInput/NumberInput.mdx#2025-04-23_snippet_1\n\nLANGUAGE: JSX\nCODE:\n```\n<Meta of={NumberInputStories} />\n```\n\n----------------------------------------\n\nTITLE: Running Metabase Docker Container with Environment Variable\nDESCRIPTION: Docker command to run Metabase container with an environment variable set.\nSOURCE: https://github.com/metabase/metabase/blob/master/src/metabase/cmd/resources/env-var-intro.md#2025-04-23_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\ndocker run -d -p 3000:3000 -e MB_SITE_NAME=\"Awesome Company\" --name metabase metabase/metabase\n```\n\n----------------------------------------\n\nTITLE: Rendering Textarea Stories with Different Configurations\nDESCRIPTION: These snippets show various configurations of the Textarea component, including different sizes, states, and properties.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/Textarea/Textarea.mdx#2025-04-23_snippet_3\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={TextareaStories.EmptyMd} />\n</Canvas>\n\n<Canvas>\n  <Story of={TextareaStories.FilledMd} />\n</Canvas>\n\n<Canvas>\n  <Story of={TextareaStories.AsteriskMd} />\n</Canvas>\n\n<Canvas>\n  <Story of={TextareaStories.DescriptionMd} />\n</Canvas>\n\n<Canvas>\n  <Story of={TextareaStories.DisabledMd} />\n</Canvas>\n\n<Canvas>\n  <Story of={TextareaStories.ErrorMd} />\n</Canvas>\n\n<Canvas>\n  <Story of={TextareaStories.ReadOnlyMd} />\n</Canvas>\n\n<Canvas>\n  <Story of={TextareaStories.AutosizeMd} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Rendering HoverCard Example Stories in Storybook Canvas\nDESCRIPTION: This JSX snippet demonstrates how to display example stories of the HoverCard component within a Storybook Canvas, showcasing the Default and InteractiveContent variants of the component.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/overlays/HoverCard/HoverCard.mdx#2025-04-23_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={HoverCardStories.Default} />\n  <Story of={HoverCardStories.InteractiveContent} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Displaying Supported Languages Table in Markdown\nDESCRIPTION: A markdown table showing the list of languages supported by Metabase, including their names and corresponding language codes. This table is used for reference in the documentation.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/localization.md#2025-04-23_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n| Language               | Code    |\n| ---------------------- | ------- |\n| English                | `en`    |\n| Albanian               | `sq`    |\n| Arabic                 | `ar`    |\n| Arabic (Saudi Arabia)  | `ar-SA` |\n| Bulgarian              | `bg`    |\n| Catalan                | `ca`    |\n| Chinese (Traditional)  | `zh`    |\n| Chinese (Taiwanese)    | `zh-TW` |\n| Chinese (Hong Kong)    | `zh-HK` |\n| Chinese (Simplified)   | `zh-CN` |\n| Czech                  | `cs`    |\n| Dutch                  | `nl`    |\n| Farsi/Persian          | `fa`    |\n| Finnish                | `fi`    |\n| French                 | `fr`    |\n| German                 | `de`    |\n| Hebrew                 | `he`    |\n| Hungarian              | `hu`    |\n| Indonesian             | `id`    |\n| Malay                  | `ms`    |\n| Italian                | `it`    |\n| Japanese               | `ja`    |\n| Korean                 | `ko`    |\n| Latvian                | `lv`    |\n| Norwegian Bokmål       | `nb`    |\n| Polish                 | `pl`    |\n| Portuguese (Brazilian) | `pt-BR` |\n| Russian                | `ru`    |\n| Serbian                | `sr`    |\n| Slovak                 | `sk`    |\n| Spanish                | `es`    |\n| Swedish                | `sv`    |\n| Turkish                | `tr`    |\n| Ukrainian              | `uk`    |\n| Vietnamese             | `vi`    |\n```\n\n----------------------------------------\n\nTITLE: Importing Alert Component and Related Dependencies in React\nDESCRIPTION: This snippet shows the import statements for React hooks, Storybook components, and Metabase UI components needed for the Alert documentation and examples.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/feedback/Alert/Alert.mdx#2025-04-23_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport { useState } from \"react\";\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { Box, Alert, Icon, Stack, Text, TextInput } from \"metabase/ui\";\nimport * as AlertStories from \"./Alert.stories\";\n```\n\n----------------------------------------\n\nTITLE: Rendering Alert Component Example in Storybook Canvas\nDESCRIPTION: This JSX snippet demonstrates how to render an example of the Alert component within a Storybook Canvas and Story.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/feedback/Alert/Alert.mdx#2025-04-23_snippet_2\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={AlertStories.Default} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Displaying Default Image Story in Storybook Canvas\nDESCRIPTION: This snippet demonstrates how to display the default Image story within a Storybook Canvas component. It's used to showcase the basic usage of the Image component.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/data-display/Image/Image.mdx#2025-04-23_snippet_2\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={ImageStories.Default} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Rendering PNG Preview in Clojure REPL\nDESCRIPTION: This snippet demonstrates how to use the dev.render-png namespace to preview HTML with embedded charts. It shows the process of requiring the namespace, switching to it, and calling the preview-html function.\nSOURCE: https://github.com/metabase/metabase/blob/master/dev/src/dev/readme.md#2025-04-23_snippet_0\n\nLANGUAGE: clojure\nCODE:\n```\ndev=> (require 'dev.render-png)\nnil\ndev=> (in-ns 'dev.render-png)\n#object[clojure.lang.Namespace 0x14fef810 \"dev.render-png\"]\ndev.render-png=> (help)\n\nTo render some html, call the function `preview-html`. This takes one argument, a map.\nThe keys in the map are `:chart` and either `:html-file` or `:html-inline`.\n(preview-html {:chart :donut :html-inline some-html-to-render})\nor\n(preview-html {:chart :donut :html-file some-file-with-html})\n\nThis function will render the html and open an image.\nValid charts are `:donut`, `:line`, and `:bar`.\n\nYou can use {{chart}} in your html to indicate where the image of the chart should be embedded.\nIt will be <img src=data-uri-of-chart style=\"display: block; width: 100%\">\n\nnil\ndev.render-png=> (preview-html {:chart :donut :html-file \"chart.html\"})\nnil\ndev.render-png=>\n```\n\n----------------------------------------\n\nTITLE: Defining Storybook Meta for Upsell Banner in JSX\nDESCRIPTION: This snippet defines the Storybook Meta component for the Upsell Banner stories. It links the Meta component to the UpsellBannerStories imported earlier.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/admin/upsells/components/UpsellBanner.mdx#2025-04-23_snippet_1\n\nLANGUAGE: JSX\nCODE:\n```\n<Meta of={UpsellBannerStories} />\n```\n\n----------------------------------------\n\nTITLE: Rendering DatePicker Story Examples in Storybook Canvas\nDESCRIPTION: These snippets demonstrate how to render various DatePicker story examples within Storybook Canvas components. Each Story component references a specific example from the DatePickerStories.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/DatePicker/DatePicker.mdx#2025-04-23_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={DatePickerStories.Default} />\n</Canvas>\n```\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={DatePickerStories.AllowDeselect} />\n</Canvas>\n```\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={DatePickerStories.MultipleDates} />\n</Canvas>\n```\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={DatePickerStories.DatesRange} />\n</Canvas>\n```\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={DatePickerStories.DatesRangeSdk} />\n</Canvas>\n```\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={DatePickerStories.SingleDateInRange} />\n</Canvas>\n```\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={DatePickerStories.NumberOfColumns} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Rendering Default Card Story in Storybook Canvas\nDESCRIPTION: This snippet demonstrates how to render the default Card story within a Storybook Canvas component. It provides a visual example of the basic Card usage.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/data-display/Card/Card.mdx#2025-04-23_snippet_2\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={CardStories.Default} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Importing Tooltip Component and Dependencies in React/JSX\nDESCRIPTION: Imports necessary components and stories for the Tooltip documentation page, including React's Fragment, Storybook components, and UI components from Metabase.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/overlays/Tooltip/Tooltip.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { Fragment } from \"react\";\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { Box, Button, Flex, Grid, Tooltip } from \"metabase/ui\";\nimport * as TooltipStories from \"./Tooltip.stories\";\n```\n\n----------------------------------------\n\nTITLE: Setting Up Storybook Meta Configuration\nDESCRIPTION: Configures the Storybook documentation to reference the Title component stories for examples and documentation.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/typography/Title/Title.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n<Meta of={TitleStories} />\n```\n\n----------------------------------------\n\nTITLE: Displaying Color Variations of SegmentedControl using Storybook (JSX)\nDESCRIPTION: Renders the 'Color' story from `SegmentedControl.stories` using Storybook's `<Canvas>` and `<Story>` components. This embeds the story (`SegmentedControlStories.Color`) to demonstrate different color options or themes available for the `SegmentedControl` component within the documentation.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/SegmentedControl/SegmentedControl.mdx#2025-04-23_snippet_4\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={SegmentedControlStories.Color} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Configuring Storybook Meta for Radio Component in JSX\nDESCRIPTION: This snippet sets up the Storybook Meta configuration for the Radio component stories. It links the documentation to the RadioStories object, which likely contains various story configurations for the Radio component.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/Radio/Radio.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n<Meta of={RadioStories} />\n```\n\n----------------------------------------\n\nTITLE: Applying Apache License 2.0 Boilerplate Notice (Text)\nDESCRIPTION: This text block provides the standard boilerplate notice for applying the Apache License 2.0, as demonstrated with specific copyright information for ClickHouse, Inc. (2016-2023). It asserts the license grant, points to the official license URL, and includes the standard warranty disclaimer. This notice should be included in project files, often within comments appropriate for the file format.\nSOURCE: https://github.com/metabase/metabase/blob/master/modules/drivers/clickhouse/LICENSE.txt#2025-04-23_snippet_0\n\nLANGUAGE: text\nCODE:\n```\n   Copyright 2016-2023 ClickHouse, Inc.\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n```\n\n----------------------------------------\n\nTITLE: Running Sample App Compatibility Tests with Cypress (Shell)\nDESCRIPTION: Executes Cypress tests using `yarn test-cypress` specifically configured for sample app compatibility checks against the local Metabase build and Embedding SDK. It requires setting environment variables like `ENTERPRISE_TOKEN`, `TEST_SUITE` (naming the sample app repo, e.g., `<sample_app_repo_name>-e2e`), `EMBEDDING_SDK_VERSION=local`, and others to control the test environment (e.g., disabling UI, preventing Metabase/container restarts). `<token>` and `<sample_app_repo_name>` placeholders need to be replaced with actual values.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/e2e-tests.md#2025-04-23_snippet_10\n\nLANGUAGE: sh\nCODE:\n```\nENTERPRISE_TOKEN=<token> TEST_SUITE=<sample_app_repo_name>-e2e OPEN_UI=false EMBEDDING_SDK_VERSION=local START_METABASE=false GENERATE_SNAPSHOTS=false START_CONTAINERS=false yarn test-cypress\n```\n\n----------------------------------------\n\nTITLE: Running Metabase on a Custom Port\nDESCRIPTION: This snippet demonstrates how to change the default port (3000) that Metabase runs on by setting the MB_JETTY_PORT environment variable.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/customizing-jetty-webserver.md#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nexport MB_JETTY_PORT=12345\njava --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: Setting Up Storybook Meta Component\nDESCRIPTION: Configures the Storybook Meta component to use the TimeInput stories for documentation.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n<Meta of={TimeInputStories} />\n```\n\n----------------------------------------\n\nTITLE: Rendering Tooltip Example in Storybook Canvas\nDESCRIPTION: Displays the default Tooltip example story within a Storybook Canvas component for demonstration purposes.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/overlays/Tooltip/Tooltip.mdx#2025-04-23_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={TooltipStories.Default} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Example Metabase Test Using Test Extensions\nDESCRIPTION: A real-life example of a Metabase test that shows how the test suite uses driver test extensions to create consistent test environments across different database systems.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/drivers/driver-tests.md#2025-04-23_snippet_5\n\nLANGUAGE: clojure\nCODE:\n```\n;; expect-with-non-timeseries-dbs = run against all drivers listed in `DRIVERS` env var except timeseries ones like Druid\n(expect-with-non-timeseries-dbs\n  ;; expected results\n  [[ 5 \"Brite Spot Family Restaurant\" 20 34.0778 -118.261 2]\n   [ 7 \"Don Day Korean Restaurant\"    44 34.0689 -118.305 2]\n   [17 \"Ruen Pair Thai Restaurant\"    71 34.1021 -118.306 2]\n   [45 \"Tu Lan Restaurant\"             4 37.7821 -122.41  1]\n   [55 \"Dal Rae Restaurant\"           67 33.983  -118.096 4]]\n  ;; actual results\n  (-> (data/run-mbql-query venues\n        {:filter   [:ends-with $name \"Restaurant\"]\n         :order-by [[:asc $id]]})\n      rows formatted-venues-rows))\n```\n\n----------------------------------------\n\nTITLE: Displaying UpsellBigCard Default Story Example\nDESCRIPTION: Shows an example of the UpsellBigCard component using the Default story within a Canvas component for visual representation.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/admin/upsells/components/UpsellBigCard.mdx#2025-04-23_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={UpsellBigCardStories.Default} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Importing Tabs Components from Metabase UI\nDESCRIPTION: Imports the Group and Tabs components from Metabase's UI library, which are used in the documentation examples.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/navigation/Tabs/Tabs.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\nimport { Group, Tabs } from \"metabase/ui\";\n```\n\n----------------------------------------\n\nTITLE: Setting Up Storybook Meta Component for HoverCard Documentation\nDESCRIPTION: This JSX snippet sets up the Storybook Meta component to associate the documentation with HoverCard stories, establishing the connection between the documentation and the component examples.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/overlays/HoverCard/HoverCard.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n<Meta of={HoverCardStories} />\n```\n\n----------------------------------------\n\nTITLE: Storybook Canvas for Popover Examples\nDESCRIPTION: JSX code that sets up a Canvas component to display multiple Popover component stories, specifically the Default and InteractiveContent examples.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/overlays/Popover/Popover.mdx#2025-04-23_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={PopoverStories.Default} />\n  <Story of={PopoverStories.InteractiveContent} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Commented Out Title Component Variants\nDESCRIPTION: Code examples for additional Title component variants (Underlined, Truncated, and TruncatedAndUnderlined) that are currently commented out and not displayed.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/typography/Title/Title.mdx#2025-04-23_snippet_4\n\nLANGUAGE: jsx\nCODE:\n```\n{/* <Canvas>\n  <Story of={TitleStories.Underlined} />\n</Canvas>\n\n### Truncated\n\n<Canvas>\n  <Story of={TitleStories.Truncated} />\n</Canvas>\n\n### Truncated and underlined\n\n<Canvas>\n  <Story of={TitleStories.TruncatedAndUnderlined} />\n</Canvas> */}\n```\n\n----------------------------------------\n\nTITLE: Rendering Select Stories with Various Configurations\nDESCRIPTION: This snippet shows how to render multiple Select component stories with different configurations and sizes.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/Select/Select.mdx#2025-04-23_snippet_3\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={SelectStories.EmptyMd} />\n</Canvas>\n\n<Canvas>\n  <Story of={SelectStories.AsteriskMd} />\n</Canvas>\n\n<Canvas>\n  <Story of={SelectStories.ClearableMd} />\n</Canvas>\n\n<Canvas>\n  <Story of={SelectStories.DescriptionMd} />\n</Canvas>\n\n<Canvas>\n  <Story of={SelectStories.DisabledMd} />\n</Canvas>\n\n<Canvas>\n  <Story of={SelectStories.ErrorMd} />\n</Canvas>\n\n<Canvas>\n  <Story of={SelectStories.ReadOnlyMd} />\n</Canvas>\n\n<Canvas>\n  <Story of={SelectStories.IconsMd} />\n</Canvas>\n\n<Canvas>\n  <Story of={SelectStories.GroupsMd} />\n</Canvas>\n\n<Canvas>\n  <Story of={SelectStories.LargeSetsMd} />\n</Canvas>\n\n<Canvas>\n  <Story of={SelectStories.SearchableMd} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Importing TextInput Component and Related Stories\nDESCRIPTION: This snippet shows the import statements for the TextInput component, related stories, and Storybook components.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/TextInput/TextInput.mdx#2025-04-23_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { Icon } from \"metabase/ui\";\nimport { Stack, TextInput } from \"metabase/ui\";\nimport * as TextInputStories from \"./TextInput.stories\";\n```\n\n----------------------------------------\n\nTITLE: Environment Variable Format Example\nDESCRIPTION: Demonstrates the format used for Metabase environment variables, which are in screaming snake case with an MB prefix.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/config-file.md#2025-04-23_snippet_8\n\nLANGUAGE: txt\nCODE:\n```\nMB_NAME_OF_VARIABLE\n```\n\n----------------------------------------\n\nTITLE: Example: Running Node.js/React Sample App Compatibility Tests (Shell)\nDESCRIPTION: A specific example command demonstrating how to run the end-to-end test suite (`metabase-nodejs-react-sdk-embedding-sample-e2e`) for the `metabase-nodejs-react-sdk-embedding-sample` application against the local Metabase build and Embedding SDK. It uses the local Embedding SDK version (`EMBEDDING_SDK_VERSION=local`) and assumes Metabase and other containers are already running (`START_METABASE=false`, `START_CONTAINERS=false`). Requires a valid `ENTERPRISE_TOKEN`.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/e2e-tests.md#2025-04-23_snippet_11\n\nLANGUAGE: sh\nCODE:\n```\nENTERPRISE_TOKEN=<token> TEST_SUITE=metabase-nodejs-react-sdk-embedding-sample-e2e OPEN_UI=false EMBEDDING_SDK_VERSION=local START_METABASE=false GENERATE_SNAPSHOTS=false START_CONTAINERS=false yarn test-cypress\n```\n\n----------------------------------------\n\nTITLE: Defining Storybook Meta for Textarea\nDESCRIPTION: This snippet sets up the Storybook metadata for the Textarea component stories.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/Textarea/Textarea.mdx#2025-04-23_snippet_1\n\nLANGUAGE: JSX\nCODE:\n```\n<Meta of={TextareaStories} />\n```\n\n----------------------------------------\n\nTITLE: Setting Up Storybook Documentation with Meta Component\nDESCRIPTION: Configures the Storybook documentation page using the Meta component to associate it with the UpsellBigCard stories.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/admin/upsells/components/UpsellBigCard.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n<Meta of={UpsellBigCardStories} />\n```\n\n----------------------------------------\n\nTITLE: Starting nREPL Server\nDESCRIPTION: Command to start an nREPL server for running and debugging tests.\nSOURCE: https://github.com/metabase/metabase/blob/master/bin/release.md#2025-04-23_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\nclojure -MnREPL\n```\n\n----------------------------------------\n\nTITLE: Applying LGPL v2 License Header Template (Plaintext)\nDESCRIPTION: A template notice recommended for inclusion at the start of source files for libraries licensed under the GNU Library General Public License version 2 (or later). It includes placeholders for the library name, copyright year, author name, declares the software as free under LGPL, disclaims warranties, and points to the full license text.\nSOURCE: https://github.com/metabase/metabase/blob/master/bin/build/resources/GPL2_0.txt#2025-04-23_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\none line to give the library's name and an idea of what it does.\\nCopyright (C) year  name of author\\n\\nThis library is free software; you can redistribute it and/or\\nmodify it under the terms of the GNU Library General Public\\nLicense as published by the Free Software Foundation; either\\nversion 2 of the License, or (at your option) any later version.\\n\\nThis library is distributed in the hope that it will be useful,\\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\\nLibrary General Public License for more details.\\n\\nYou should have received a copy of the GNU Library General Public\\nLicense along with this library; if not, write to the\\nFree Software Foundation, Inc., 51 Franklin St, Fifth Floor,\\nBoston, MA  02110-1301, USA.\n```\n\n----------------------------------------\n\nTITLE: Setting Up Storybook Meta Information\nDESCRIPTION: Configures the Storybook Meta component to associate the documentation with UpsellPill stories. This enables Storybook to properly render and organize the component examples.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/admin/upsells/components/UpsellPill.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n<Meta of={UpsellPillStories} />\n```\n\n----------------------------------------\n\nTITLE: Rendering Menu Story with Icons in Storybook Canvas\nDESCRIPTION: This snippet demonstrates how to render a Menu story that includes icons within a Storybook Canvas component.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/overlays/Menu/Menu.mdx#2025-04-23_snippet_4\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={MenuStories.Icons} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Implementing Conditional Logic in Spreadsheet Formula\nDESCRIPTION: This spreadsheet formula uses nested IF statements to determine the Sighting Type based on the values in columns B (Has Wings) and C (Has Face). It's equivalent to the Metabase case expression for the same logic.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/case.md#2025-04-23_snippet_7\n\nLANGUAGE: spreadsheet\nCODE:\n```\n=IF(AND(B2 = TRUE, C2 = TRUE), \"Bird\",\n    IF(AND(B2 = TRUE, C2 = FALSE), \"Plane\",\n       IF(AND(B2 = FALSE, C2 = TRUE), \"Superman\", \"Unknown\")\n      )\n    )\n```\n\n----------------------------------------\n\nTITLE: Importing Divider Component Dependencies in React/JSX\nDESCRIPTION: This snippet shows the import statements required for the Divider component documentation page, including React, Storybook components, and Metabase UI components.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/utils/Divider/Divider.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { Fragment } from \"react\";\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { Group, Divider, Text } from \"metabase/ui\";\nimport * as DividerStories from \"./Divider.stories\";\n```\n\n----------------------------------------\n\nTITLE: Importing TimeInput Component in Storybook\nDESCRIPTION: Import statements for Storybook components, UI components from Metabase, and TimeInput stories for documentation purposes.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { Stack, TimeInput } from \"metabase/ui\";\nimport * as TimeInputStories from \"./TimeInput.stories\";\n```\n\n----------------------------------------\n\nTITLE: Describing AWS Certificate Bundle in Markdown\nDESCRIPTION: This snippet provides information about the PEM certificate bundle for AWS us-east-2 region, including its source URL.\nSOURCE: https://github.com/metabase/metabase/blob/master/test_resources/certificates/README.md#2025-04-23_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n`us-east-2-bundle.pem` is the PEM certificate bundle for AWS `us-east-2`, fetched from\n[here](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.SSL.html).\n```\n\n----------------------------------------\n\nTITLE: Importing Title Component and Storybook Elements\nDESCRIPTION: Imports the necessary Storybook components for documentation and UI components from Metabase, including the Title component and its stories.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/typography/Title/Title.mdx#2025-04-23_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { Box, Stack, Title } from \"metabase/ui\";\nimport * as TitleStories from \"./Title.stories\";\n```\n\n----------------------------------------\n\nTITLE: Markdown Version Headers and Links\nDESCRIPTION: Markdown formatted version headers with links comparing changes between versions\nSOURCE: https://github.com/metabase/metabase/blob/master/enterprise/frontend/src/embedding-sdk/CHANGELOG.md#2025-04-23_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n## [0.55.1-nightly](https://github.com/metabase/metabase/compare/embedding-sdk-0.54.3-nightly...embedding-sdk-0.55.1-nightly) (2025-04-04)\n\n## [0.54.3-nightly](https://github.com/metabase/metabase/compare/embedding-sdk-0.54.2-nightly...embedding-sdk-0.54.3-nightly) (2025-02-26)\n\n## [0.54.2-nightly](https://github.com/metabase/metabase/compare/embedding-sdk-0.54.1-nightly...embedding-sdk-0.54.2-nightly) (2025-02-25)\n\n## [0.54.1-nightly](https://github.com/metabase/metabase/compare/embedding-sdk-0.53.1-nightly...embedding-sdk-0.54.1-nightly) (2025-02-17)\n```\n\n----------------------------------------\n\nTITLE: Generating a Secure API Key with OpenSSL\nDESCRIPTION: Bash command to generate a secure Metabase API key using OpenSSL that meets the required format (mb_ prefix followed by Base64 encoded string).\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/config-file.md#2025-04-23_snippet_6\n\nLANGUAGE: sh\nCODE:\n```\necho \"mb_$(openssl rand -base64 32)\"\n```\n\n----------------------------------------\n\nTITLE: Importing Tabs Stories for Documentation\nDESCRIPTION: Imports all examples from the Tabs.stories file to be used in the documentation.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/navigation/Tabs/Tabs.mdx#2025-04-23_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\nimport * as TabsStories from \"./Tabs.stories\";\n```\n\n----------------------------------------\n\nTITLE: Running Release Script - Method 1\nDESCRIPTION: First method to execute the Metabase release script using the shell script.\nSOURCE: https://github.com/metabase/metabase/blob/master/bin/release.md#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n./bin/release.sh\n```\n\n----------------------------------------\n\nTITLE: Importing Progress Component and Stories in MDX\nDESCRIPTION: Imports the necessary components for the Storybook documentation including React Fragment, Storybook Canvas/Story/Meta components, the Progress component and its stories.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/feedback/Progress/Progress.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { Fragment } from \"react\";\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { Progress } from \"./\";\nimport * as ProgressStories from \"./Progress.stories\";\n```\n\n----------------------------------------\n\nTITLE: Implementing Conditional Logic with pandas apply() in Python\nDESCRIPTION: This Python code uses a helper function and pandas' apply() method to determine the Sighting Type based on conditions from the 'has_wings' and 'has_face' columns in a dataframe. It's equivalent to the Metabase case expression for the same logic.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/case.md#2025-04-23_snippet_9\n\nLANGUAGE: python\nCODE:\n```\ndef Identify(df):\n    if ((df[\"has_wings\"] == True) & (df[\"has_face\"] == True)):\n        return \"Bird\"\n    elif ((df[\"has_wings\"] == True) & (df[\"has_face\"] == False)):\n        return \"Plane\"\n    elif ((df[\"has_wings\"] == False) & (df[\"has_face\"] == True)):\n        return \"Superman\"\n    else:\n        return \"Unknown\"\n\ndf[\"Sighting Type\"]= df.apply(Identify, axis=1)\n```\n\n----------------------------------------\n\nTITLE: Rendering List with Icons Story in Storybook Canvas\nDESCRIPTION: This snippet shows how to render the List story with icons within a Storybook Canvas component. It demonstrates the usage of the List component with icon enhancements.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/typography/List/List.mdx#2025-04-23_snippet_3\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={ListStories.WithIcons} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Storybook Meta Configuration for Popover Component\nDESCRIPTION: JSX code that configures the Storybook metadata for the Popover component documentation, referencing the imported PopoverStories.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/overlays/Popover/Popover.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n<Meta of={PopoverStories} />\n```\n\n----------------------------------------\n\nTITLE: Rendering No Border Paper Story in Storybook Canvas\nDESCRIPTION: This JSX snippet shows how to render the Paper story with no border within a Storybook Canvas component. It demonstrates the Paper component without a border.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/utils/Paper/Paper.mdx#2025-04-23_snippet_3\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={PaperStories.NoBorder} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Running Metabase Tests for a Specific Driver\nDESCRIPTION: Command for running Metabase tests for a specific driver (MySQL in this example) using the DRIVERS environment variable to specify which driver to test.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/drivers/driver-tests.md#2025-04-23_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\nDRIVERS=mysql clojure -X:dev:drivers:drivers-dev:test`\n```\n\n----------------------------------------\n\nTITLE: Importing Anchor Component and Storybook Elements in JSX\nDESCRIPTION: This code imports React's Fragment component, Storybook utilities, and UI components from Metabase including the Anchor component that is being documented. It also imports Anchor stories for demonstration.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/typography/Anchor/Anchor.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { Fragment } from \"react\";\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { Anchor, Grid, Text } from \"metabase/ui\";\nimport * as AnchorStories from \"./Anchor.stories\";\n```\n\n----------------------------------------\n\nTITLE: Describing Channel Module Structure in Markdown\nDESCRIPTION: This snippet outlines the contents and purpose of the channel module in the Metabase project. It mentions the inclusion of API namespaces for channel and email operations, as well as email templates.\nSOURCE: https://github.com/metabase/metabase/blob/master/src/metabase/channel/README.md#2025-04-23_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n# `channel` module\n\nThis module has stuff related to sending emails and Slack messages. `/api/channel` and `/api/email` namespaces live\nhere, as well as various email templates.\n```\n\n----------------------------------------\n\nTITLE: Building Metabase Frontend Without Hot-Reload\nDESCRIPTION: Command to build and run the Metabase frontend without watching for changes or enabling hot-reload functionality.\nSOURCE: https://github.com/metabase/metabase/blob/master/README.md#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n$ yarn build\n```\n\n----------------------------------------\n\nTITLE: Extracting Substring using SQL SUBSTRING function\nDESCRIPTION: This SQL query demonstrates the equivalent of the Metabase `substring([Mission ID], 9, 3)` expression using the standard SQL `SUBSTRING` function in PostgreSQL. It selects the original `mission_id` and extracts a 3-character substring starting from the 9th position, aliasing the result as `agent`.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/substring.md#2025-04-23_snippet_4\n\nLANGUAGE: sql\nCODE:\n```\nSELECT\n    mission_id,\n    SUBSTRING(mission_id, 9, 3) AS agent\nFROM\n    this_message_will_self_destruct;\n```\n\n----------------------------------------\n\nTITLE: Building Backend Pot File Using Command Line in Metabase\nDESCRIPTION: Command to generate the backend pot (portable object template) file for translations using Clojure. This creates a translation template file that contains all translatable strings from the backend code.\nSOURCE: https://github.com/metabase/metabase/blob/master/bin/i18n/README.md#2025-04-23_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\n❯ clojure -X:build:build/i18n\nCreated pot file at  cli.pot\nFound 1393 forms for translations\nGrouped into 1313 distinct pot entries\n```\n\n----------------------------------------\n\nTITLE: Including Plans Blockquote in Jekyll Template for Metabase Documentation\nDESCRIPTION: A Jekyll include tag that displays a plans blockquote for the 'Audit logs' feature in the Metabase documentation. This snippet is used to render template components that highlight enterprise features.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/usage-and-performance-tools/audit.md#2025-04-23_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n{% include plans-blockquote.html feature=\"Audit logs\" %}\n```\n\n----------------------------------------\n\nTITLE: Rendering DateInput Story Examples in JSX\nDESCRIPTION: These snippets show how to render various DateInput story examples using Storybook's Canvas and Story components.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/DateInput/DateInput.mdx#2025-04-23_snippet_2\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={DateInputStories.Default} />\n</Canvas>\n```\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={DateInputStories.EmptyMd} />\n</Canvas>\n```\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={DateInputStories.FilledMd} />\n</Canvas>\n```\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={DateInputStories.AsteriskMd} />\n</Canvas>\n```\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={DateInputStories.DescriptionMd} />\n</Canvas>\n```\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={DateInputStories.DisabledMd} />\n</Canvas>\n```\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={DateInputStories.ErrorMd} />\n</Canvas>\n```\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={DateInputStories.IconMd} />\n</Canvas>\n```\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={DateInputStories.ReadOnlyMd} />\n</Canvas>\n```\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={DateInputStories.NoPopoverMd} />\n</Canvas>\n```\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={DateInputStories.EmptyXs} />\n</Canvas>\n```\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={DateInputStories.FilledXs} />\n</Canvas>\n```\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={DateInputStories.AsteriskXs} />\n</Canvas>\n```\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={DateInputStories.DescriptionXs} />\n</Canvas>\n```\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={DateInputStories.DisabledXs} />\n</Canvas>\n```\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={DateInputStories.ErrorXs} />\n</Canvas>\n```\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={DateInputStories.IconXs} />\n</Canvas>\n```\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={DateInputStories.ReadOnlyXs} />\n</Canvas>\n```\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={DateInputStories.NoPopoverXs} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Running License Information Check in Shell\nDESCRIPTION: This command runs a check to verify that all dependencies have license information. It uses Clojure to execute the build task and list any dependencies without licenses.\nSOURCE: https://github.com/metabase/metabase/blob/master/bin/build-mb.md#2025-04-23_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nclojure -X:build:build/list-without-license\n```\n\n----------------------------------------\n\nTITLE: Importing HoverCard Component and Related UI Components in React\nDESCRIPTION: This code snippet shows the import statements required to use the HoverCard component and other UI components from the Metabase UI library, as well as importing React Fragment and Storybook components for documentation.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/overlays/HoverCard/HoverCard.mdx#2025-04-23_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Fragment } from \"react\";\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport {\n  Box,\n  Button,\n  Flex,\n  HoverCard,\n  Text,\n  TextInput,\n  Stack,\n} from \"metabase/ui\";\nimport * as HoverCardStories from \"./HoverCard.stories\";\n```\n\n----------------------------------------\n\nTITLE: Defining Usage Rules for Upsell Components in Markdown\nDESCRIPTION: This snippet outlines six key rules for implementing upsell components in the project. It covers component location, design system usage, documentation, visibility control, tracking, and link handling.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/admin/upsells/readme.md#2025-04-23_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n## Usage Rules\n\n1. All upsell components and implementations should live in this directory, nowhere else.\n2. All upsell implementations should be built using the design system components in the `components/` directory.\n3. All exported components in the `components/` should have storybook stories.\n4. All exports from the `components/` directory should be wrapped in the UpsellWrapper HoC to ensure that the upsell is displayed only to the correct users.\n5. All exports from the `components/` directory should use `trackUpsellViewed` and `trackUpsellClicked` to track views and clicks.\n6. All upsell links should use the `use-upsell-link` hook within the base components to add appropriate anonymous tracking and analytics.\n```\n\n----------------------------------------\n\nTITLE: Migrating Metabase Query Processor API Usage - Clojure\nDESCRIPTION: These Clojure code snippets demonstrate how to update calls to deprecated functions in the Metabase internal API to use the 'lib.metadata' equivalents. The migration aligns with new conventions: passing a metadata provider explicitly and switching from 'snake_case' to 'kebab-case' keys in returned maps. This is critical for compatibility with Metabase 0.48.0+ and ensures continued access to database, table, and field metadata while future-proofing driver and core code.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/driver-changelog.md#2025-04-23_snippet_11\n\nLANGUAGE: clojure\nCODE:\n```\n(qp.store/database)       => (lib.metadata/database (qp.store/metadata-provider))\n(qp.store/table table-id) => (lib.metadata/table (qp.store/metadata-provider) table-id)\n(qp.store/field field-id) => (lib.metadata/field (qp.store/metadata-provider) field-id)\n```\n\n----------------------------------------\n\nTITLE: Recommended JSX Inline Pattern in React Components\nDESCRIPTION: Shows the recommended approach for organizing JSX in render methods by inlining components rather than breaking them into separate render methods. This improves readability by making the relationship between props/state and rendered output more obvious.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/frontend.md#2025-04-23_snippet_6\n\nLANGUAGE: jsx\nCODE:\n```\n// don't do this\nrender () {\n  return (\n    <div>\n      {this.renderThing1()}\n      {this.renderThing2()}\n      {this.state.thing3Needed && this.renderThing3()}\n    </div>\n  );\n}\n\n// do this\nrender () {\n  return (\n    <div>\n      <button onClick={this.toggleThing3Needed}>toggle</button>\n      <Thing2 randomProp={this.props.foo} />\n      {this.state.thing3Needed && <Thing3 randomProp2={this.state.bar} />}\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Running Metabase Enterprise Edition Front-end in Development Mode\nDESCRIPTION: Command to build and run the Metabase Enterprise Edition front-end in development mode with hot reloading. Sets the MB_EDITION environment variable to 'ee' before running the yarn build-hot command.\nSOURCE: https://github.com/metabase/metabase/blob/master/enterprise/README.md#2025-04-23_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nMB_EDITION=ee yarn build-hot\n```\n\n----------------------------------------\n\nTITLE: Formatting Clojure in Metabase\nDESCRIPTION: Command to format Clojure code in the Metabase project using cljfmt. The [path] parameter allows specifying a particular file or directory.\nSOURCE: https://github.com/metabase/metabase/blob/master/CLAUDE.md#2025-04-23_snippet_6\n\nLANGUAGE: Shell\nCODE:\n```\n./bin/mage cljfmt-files [path]\n```\n\n----------------------------------------\n\nTITLE: Executing Release List Generation Script in Babashka\nDESCRIPTION: This command runs the main function of the release-list script using Babashka to generate the list of Metabase releases.\nSOURCE: https://github.com/metabase/metabase/blob/master/bin/release-list/README.md#2025-04-23_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nbb -m release-list.main\n```\n\n----------------------------------------\n\nTITLE: Importing DateInput Component in JavaScript\nDESCRIPTION: This snippet shows how to import the DateInput component and related dependencies for use in a Storybook environment.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/DateInput/DateInput.mdx#2025-04-23_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { Icon } from \"metabase/ui\";\nimport { DateInput, Stack } from \"metabase/ui\";\nimport * as DateInputStories from \"./DateInput.stories\";\n```\n\n----------------------------------------\n\nTITLE: Backend i18n String Translation in Clojure\nDESCRIPTION: Example of marking strings for translation in the backend using the 'trs' function, which translates to the site language. The function accepts a format string and parameters.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/internationalization.md#2025-04-23_snippet_1\n\nLANGUAGE: clojure\nCODE:\n```\n(trs \"Hello {0}!\" name)\n```\n\n----------------------------------------\n\nTITLE: Adding and Avoiding Redundant or Unhelpful Comments - JavaScript\nDESCRIPTION: Highlights recommended and discouraged comment use patterns. It illustrates how not to use comments for redundant explanations or TODOs but to explain reasoning behind non-obvious code (such as handling edge cases with third-party libraries). This snippet is meant to foster clear and actionable documentation within the codebase.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/frontend.md#2025-04-23_snippet_10\n\nLANGUAGE: JavaScript\nCODE:\n```\n\n// don't do this--the comment is redundant\n\n// get the native permissions for this db\nconst nativePermissions = getNativePermissions(perms, groupId, {\n  databaseId: database.id,\n});\n\n// don't add TODOs -- they quickly become forgotten cruft\n\nisSearchable(): boolean {\n  // TODO: this should return the thing instead\n  return this.isString();\n}\n\n// this is acceptable -- the implementer explains a not-obvious edge case of a third party library\n\n// foo-lib seems to return undefined/NaN occasionally, which breaks things\nif (isNaN(x) || isNaN(y)) {\n  return;\n}\n\n```\n\n----------------------------------------\n\nTITLE: Setting Java Version with Jabba\nDESCRIPTION: Command to set the Java version to adopt@1.8.0-252 using Jabba version manager.\nSOURCE: https://github.com/metabase/metabase/blob/master/bin/release.md#2025-04-23_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\njabba use adopt@1.8.0-252\n```\n\n----------------------------------------\n\nTITLE: Importing Dependencies for QuarterPicker Documentation\nDESCRIPTION: This snippet imports necessary components and stories for the QuarterPicker documentation. It includes React's Fragment, Storybook components, Metabase UI components, and QuarterPicker stories.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/QuarterPicker/QuarterPicker.mdx#2025-04-23_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport { Fragment } from \"react\";\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { DatePicker, Box } from \"metabase/ui\";\nimport * as QuarterPickerStories from \"./QuarterPicker.stories\";\n```\n\n----------------------------------------\n\nTITLE: Displaying FullWidth SegmentedControl Example using Storybook (JSX)\nDESCRIPTION: Renders the 'FullWidth' story from `SegmentedControl.stories` within a Storybook `<Canvas>` block. This uses the `<Story>` component to embed the specific story (`SegmentedControlStories.FullWidth`), showcasing the full-width variant of the `SegmentedControl` component within the documentation.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/SegmentedControl/SegmentedControl.mdx#2025-04-23_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={SegmentedControlStories.FullWidth} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Publishing Metabase Release (Shell)\nDESCRIPTION: This command publishes the Metabase release after successful building and testing. It includes the version and commit hash.\nSOURCE: https://github.com/metabase/metabase/blob/master/release/README.md#2025-04-23_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nyarn release-offline v0.77.77 1234567890abcdef1234567890abcdef12345678 --publish\n```\n\n----------------------------------------\n\nTITLE: Rendering AllowDeselect QuarterPicker Story\nDESCRIPTION: This snippet renders the AllowDeselect story for the QuarterPicker component, demonstrating the component's behavior when deselection is allowed.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/QuarterPicker/QuarterPicker.mdx#2025-04-23_snippet_3\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={QuarterPickerStories.AllowDeselect} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Listing Environment Variables with environ.core/env - Clojure\nDESCRIPTION: Shows how to list available environment variable keys using environ.core/env in a Clojure REPL. Requires the environ.core library to be available. Outputs a sequence of environment variable keys present in the application's environment, limited to 10 results for illustration.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/devenv.md#2025-04-23_snippet_23\n\nLANGUAGE: Clojure\nCODE:\n```\nsome-ns=> (take 10 (keys environ.core/env))\n(:mb-redshift-test-password\n :java-class-path\n :path\n :mb-athena-test-s3-staging-dir\n :iterm-profile\n :mb-snowflake-test-warehouse\n :mb-bigquery-cloud-sdk-test-service-account-json\n :tmpdir\n :mb-oracle-test-service-name\n :sun-management-compiler)\n```\n\n----------------------------------------\n\nTITLE: Viewing Logs for a Specific Container by ID\nDESCRIPTION: Command to view logs for a specific container using its ID, helpful for examining why a container stopped unexpectedly.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/docker.md#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nDocker logs CONTAINER_ID\n```\n\n----------------------------------------\n\nTITLE: Importing Sidesheet Components in JavaScript/JSX\nDESCRIPTION: This snippet imports necessary components and stories for the Sidesheet documentation. It includes imports from Storybook, Metabase UI, and various Sidesheet-related components.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/common/components/Sidesheet/Sidesheet.mdx#2025-04-23_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { Box, Flex } from \"metabase/ui\";\nimport * as SidesheetStories from \"./Sidesheet.stories\";\n\nimport { Sidesheet } from \"./Sidesheet\";\nimport { SidesheetCard } from \"./SidesheetCard\";\nimport { SidesheetCardSection } from \"./SidesheetCardSection\";\nimport { SidesheetButton, SidesheetButtonWithChevron } from \"./SidesheetButton\";\n\nimport { TestTabbedSidesheet, TestPagedSidesheet } from \"./Sidesheet.samples\";\n```\n\n----------------------------------------\n\nTITLE: Running Markdown Link Checker in Metabase Docs\nDESCRIPTION: Command to check for broken links in the Metabase documentation directory using the markdown-link-check tool. This helps maintain documentation quality by identifying invalid links.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/docs.md#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nyarn run docs-lint-links\n```\n\n----------------------------------------\n\nTITLE: Rendering Medium Size Empty TimeInput Example\nDESCRIPTION: Displays an empty TimeInput component with medium size using Storybook Canvas and Story components.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.mdx#2025-04-23_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={TimeInputStories.EmptyMd} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Preventing Concurrent Job Execution in Clojure with Quartz Annotation\nDESCRIPTION: Demonstrates how to prevent concurrent execution of instances of the same Quartz job by adding the `org.quartz.DisallowConcurrentExecution` annotation as metadata to the job definition using `task/defjob`. This ensures that a new instance of the job will not start if another instance is already running.\nSOURCE: https://github.com/metabase/metabase/blob/master/src/metabase/task/QUARTZ.md#2025-04-23_snippet_5\n\nLANGUAGE: clojure\nCODE:\n```\n(task/defjob ^{org.quartz.DisallowConcurrentExecution true} MyNonConcurrentJob [job-context]\n  (println \"This job will not run concurrently with itself\"))\n```\n\n----------------------------------------\n\nTITLE: Importing Radio Component and Storybook Dependencies in JSX\nDESCRIPTION: This snippet shows the import statements for the Radio component, Stack component, and Storybook-related dependencies. It sets up the necessary imports for creating and documenting the Radio component stories.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/Radio/Radio.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { Radio, Stack } from \"metabase/ui\";\nimport * as RadioStories from \"./Radio.stories\";\n```\n\n----------------------------------------\n\nTITLE: Rendering Default TextInput Story\nDESCRIPTION: This snippet demonstrates how to render the default TextInput story using Storybook's Canvas and Story components.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/TextInput/TextInput.mdx#2025-04-23_snippet_2\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={TextInputStories.Default} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Importing Components from React and Storybook in JSX\nDESCRIPTION: Imports necessary components from React and Storybook blocks for documentation purposes. Also imports the Icon component from Metabase UI.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/navigation/Tabs/Tabs.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { Fragment } from \"react\";\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { Icon } from \"metabase/ui\";\n```\n\n----------------------------------------\n\nTITLE: Sample Employer Copyright Disclaimer for LGPL Libraries (Plaintext)\nDESCRIPTION: A sample text for an employer or institution to sign, disclaiming copyright interest in a specific software library (e.g., 'Frob') written by an associated individual (e.g., 'James Random Hacker'). This is often necessary when applying free software licenses like the LGPL. Requires filling in specific names, dates, and titles.\nSOURCE: https://github.com/metabase/metabase/blob/master/bin/build/resources/GPL2_0.txt#2025-04-23_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\nYoyodyne, Inc., hereby disclaims all copyright interest in\\nthe library `Frob' (a library for tweaking knobs) written\\nby James Random Hacker.\\n\\nsignature of Ty Coon, 1 April 1990\\nTy Coon, President of Vice\n```\n\n----------------------------------------\n\nTITLE: Rendering Card with Border Story in Storybook Canvas\nDESCRIPTION: This snippet shows how to render a Card story with a border within a Storybook Canvas. It illustrates the Card component with border styling.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/data-display/Card/Card.mdx#2025-04-23_snippet_3\n\nLANGUAGE: JSX\nCODE:\n```\n<Canvas>\n  <Story of={CardStories.Border} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Starting the Sample Client Application (Shell)\nDESCRIPTION: Runs the start script defined in the client's `package.json`, typically launching the Vite development server for the React frontend application. This command compiles the client code, starts a local server (often on port 3100 by default), and usually opens the application automatically in the default web browser. This command should be run within the `client` directory after installing dependencies.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/quickstart-with-sample-app.md#2025-04-23_snippet_13\n\nLANGUAGE: sh\nCODE:\n```\nnpm start\n```\n\n----------------------------------------\n\nTITLE: Rendering Default FileInput Story\nDESCRIPTION: This snippet renders the default story for the FileInput component.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/FileInput/FileInput.mdx#2025-04-23_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={FileInputStories.Default} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Configuring Storybook Meta for Alert Component\nDESCRIPTION: This JSX snippet sets up the Storybook Meta component to associate the documentation with the Alert stories.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/feedback/Alert/Alert.mdx#2025-04-23_snippet_1\n\nLANGUAGE: JSX\nCODE:\n```\n<Meta of={AlertStories} />\n```\n\n----------------------------------------\n\nTITLE: Setting Up Storybook Meta Component\nDESCRIPTION: Sets up the Meta component to associate the documentation with UpsellCard stories.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/admin/upsells/components/UpsellCard.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n<Meta of={UpsellCardStories} />\n```\n\n----------------------------------------\n\nTITLE: Setting Up Storybook Meta for QuarterPicker\nDESCRIPTION: This snippet sets up the Storybook metadata for the QuarterPicker component using the imported stories.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/QuarterPicker/QuarterPicker.mdx#2025-04-23_snippet_1\n\nLANGUAGE: JSX\nCODE:\n```\n<Meta of={QuarterPickerStories} />\n```\n\n----------------------------------------\n\nTITLE: Displaying Timestamp Handling Table in Markdown\nDESCRIPTION: A markdown table illustrating how different timestamp formats are displayed in Metabase based on the report timezone setting. This table provides examples of how various timestamp types are handled and displayed.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/localization.md#2025-04-23_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n| Raw timestamp in your database           | Data type                     | Report time zone | Displayed as           |\n| ---------------------------------------- | ----------------------------- | ---------------- | ---------------------- |\n| `2022-12-28T12:00:00 AT TIME ZONE 'CST'` | `timestamp with time zone`    | 'Canada/Eastern' | Dec 28, 2022, 7:00 AM  |\n| `2022-12-28T12:00:00-06:00`              | `timestamp with offset`       | 'Canada/Eastern' | Dec 28, 2022, 7:00 AM  |\n| `2022-12-28T12:00:00`                    | `timestamp without time zone` | 'Canada/Eastern' | Dec 28, 2022, 12:00 AM |\n```\n\n----------------------------------------\n\nTITLE: Importing Components and Stories for MultiSelect Documentation in JavaScript/MDX\nDESCRIPTION: This snippet imports necessary components for Storybook MDX documentation. It imports `Canvas`, `Story`, and `Meta` from `@storybook/blocks` for rendering stories and metadata. It also imports the `MultiSelect` component itself and a `Stack` layout component from `metabase/ui`. Finally, it imports all exported items from the corresponding Storybook stories file (`./MultiSelect.stories`) as `MultiSelectStories`, making the individual stories available for embedding.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/MultiSelect/MultiSelect.mdx#2025-04-23_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { MultiSelect, Stack } from \"metabase/ui\";\nimport * as MultiSelectStories from \"./MultiSelect.stories\";\n```\n\n----------------------------------------\n\nTITLE: Defining Storybook Meta Component for Switch Stories in JSX\nDESCRIPTION: This snippet defines the Storybook Meta component for the Switch stories, linking it to the imported SwitchStories.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/Switch/Switch.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n<Meta of={SwitchStories} />\n```\n\n----------------------------------------\n\nTITLE: Raw Password List\nDESCRIPTION: A collection of plaintext passwords, likely used for security research or analysis. Contains common patterns like dictionary words, numbers, and simple variations.\nSOURCE: https://github.com/metabase/metabase/blob/master/resources/common_passwords.txt#2025-04-23_snippet_2\n\nLANGUAGE: text\nCODE:\n```\nbluedog1\nsungam\njust4u\nandrew23\nsummer22\nludic\nmusiclover\naguil\nyacht\nbeardog1\nlibertin\npippo1\njoselit\npatito\nbigberth\ndigler\nsydnee\nregine\njockstra\npoopo\n[...truncated for brevity...]\n```\n\n----------------------------------------\n\nTITLE: Importing Dependencies for Icon Component Storybook Documentation in JavaScript\nDESCRIPTION: This code snippet imports React's `useState` hook, Storybook block components (`Canvas`, `Story`, `Meta`), UI components from `metabase/ui` (`Box`, `Icon`, `Stack`, `Text`, `TextInput`), a list of available icon names (`iconNames`), and the corresponding Icon stories (`IconStories`). These imports are essential for setting up the Storybook documentation page for the `Icon` component, enabling the rendering of documentation text and interactive examples.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/icons/Icon/Icon.mdx#2025-04-23_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { useState } from \"react\";\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { Box, Icon, Stack, Text, TextInput } from \"metabase/ui\";\nimport { iconNames } from \"./icons\";\nimport * as IconStories from \"./Icon.stories\";\n```\n\n----------------------------------------\n\nTITLE: Adding User Groups to JWT Token\nDESCRIPTION: Updates the token signing function to include user groups, allowing Metabase to assign proper permissions based on group membership.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/interactive-embedding-quick-start-guide.md#2025-04-23_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nfunction signUserToken(user) {\n  const payload = {\n    email: user.email,\n    first_name: user.firstName,\n    last_name: user.lastName,\n    exp: Math.round(Date.now() / 1000) + (60 * 60), // 1 hour expiration\n    groups: [user.groupName],\n  };\n\n  return jwt.sign(payload, METABASE_JWT_SHARED_SECRET);\n}\n```\n\n----------------------------------------\n\nTITLE: Importing UpsellPill Dependencies\nDESCRIPTION: Imports necessary components and utilities for the UpsellPill component documentation. Includes Box from the Metabase UI, Storybook components, Redux provider for state management, and the UpsellPill component with its stories.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/admin/upsells/components/UpsellPill.mdx#2025-04-23_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Box } from \"metabase/ui\";\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { ReduxProvider } from \"__support__/storybook\";\nimport { _UpsellPill } from \"./UpsellPill\";\nimport * as UpsellPillStories from \"./UpsellPill.stories\";\n```\n\n----------------------------------------\n\nTITLE: Rendering Menu Story with Labels and Dividers in Storybook Canvas\nDESCRIPTION: This snippet shows how to render a Menu story that includes labels and dividers within a Storybook Canvas component.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/overlays/Menu/Menu.mdx#2025-04-23_snippet_5\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={MenuStories.LabelsAndDividers} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Using Coalesce Expression for Null Handling - Plaintext\nDESCRIPTION: This shows use of Metabase's `coalesce` function to return the first non-blank value among [Notes] and [Comments], or provide a default string when both are blank. The expression checks column-by-column, evaluating in the given order. Columns should be nullable strings, and a default string is provided as the final argument to cover the null case.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/case.md#2025-04-23_snippet_2\n\nLANGUAGE: plaintext\nCODE:\n```\ncoalesce([Notes], [Comments] \"No notes or comments.\")\n```\n\n----------------------------------------\n\nTITLE: Configuring Storybook Meta for DateInput in JSX\nDESCRIPTION: This snippet demonstrates how to set up the Storybook Meta component for the DateInput stories.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/DateInput/DateInput.mdx#2025-04-23_snippet_1\n\nLANGUAGE: JSX\nCODE:\n```\n<Meta of={DateInputStories} />\n```\n\n----------------------------------------\n\nTITLE: Python Pandas Timezone Conversion\nDESCRIPTION: Python code using pandas to convert timestamps to specific time zones, including conversion from timestamp without time zone to timestamp with time zone.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/converttimezone.md#2025-04-23_snippet_7\n\nLANGUAGE: python\nCODE:\n```\ndf['Source Time (UTC)'] = pd.to_timestamp(df['Source Time'], utc=True)\ndf['Team Report Time (EST)'] = df['Source Time (UTC)'].dt.tz_convert(tz='Canada/Eastern')\n```\n\n----------------------------------------\n\nTITLE: Starting the Metabase Embedded Analytics SDK CLI Tool in Shell\nDESCRIPTION: This shell command executes the Metabase Embedding SDK CLI to initialize a local environment for embedding dashboards in a React application. It installs or updates the SDK package, sets up Metabase via Docker, and guides users through database integration, permissions, and React component setup. The command requires Node.js and Docker to be installed and should be run in the root directory of the React project.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/embedding/sdk/quickstart-cli.md#2025-04-23_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnpx @metabase/embedding-sdk-react@latest start\n```\n\n----------------------------------------\n\nTITLE: Importing Image Component and Related Assets in JavaScript\nDESCRIPTION: This snippet shows the import statements for the Image component and related assets. It includes importing from assets, React, Storybook, and Metabase UI components.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/data-display/Image/Image.mdx#2025-04-23_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport noResultsSource from \"assets/img/no_results.svg\";\nimport { Fragment } from \"react\";\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { Box, Image, Stack, Text } from \"metabase/ui\";\nimport * as ImageStories from \"./Image.stories\";\n```\n\n----------------------------------------\n\nTITLE: Importing Storybook and Metabase UI Components\nDESCRIPTION: This snippet imports necessary components from Storybook and Metabase UI library for documentation and story rendering.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/Checkbox/Checkbox.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { Checkbox, Stack } from \"metabase/ui\";\nimport * as CheckboxStories from \"./Checkbox.stories\";\n```\n\n----------------------------------------\n\nTITLE: Retrieving Required Test Environment Variable in Clojure\nDESCRIPTION: This Clojure snippet shows how to use the `tx/db-test-env-var-or-throw` function to retrieve a required database connection property (user) for SQL Server tests. It attempts to read the environment variable `MB_SQLSERVER_TEST_USER`. If this variable is not set, the function throws an exception, causing the test suite to fail. This enforces that necessary configuration is provided.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/drivers/driver-tests.md#2025-04-23_snippet_10\n\nLANGUAGE: clj\nCODE:\n```\n;; If MB_SQLSERVER_TEST_USER is unset, the test suite will quit with a message saying something like\n;; \"MB_SQLSERVER_TEST_USER is required to run tests against :sqlserver\"\n(tx/db-test-env-var-or-throw :sqlserver :user)\n```\n\n----------------------------------------\n\nTITLE: Rendering Medium Size Required TimeInput Example\nDESCRIPTION: Displays a medium size TimeInput component with an asterisk indicating it's required using Storybook Canvas and Story components.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.mdx#2025-04-23_snippet_5\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={TimeInputStories.AsteriskMd} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Rendering Default UpsellPill Story\nDESCRIPTION: Displays the default variant of the UpsellPill component using Storybook's Canvas and Story components. This shows the standard appearance and behavior of the UpsellPill.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/admin/upsells/components/UpsellPill.mdx#2025-04-23_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={UpsellPillStories.Default} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Deprecated Var: Table Alias in SQL Query Processor\nDESCRIPTION: The *table-alias* var is now unused. Use or override :metabase.query-processor.util.add-alias-info/source-table from the #19610 information instead.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/driver-changelog.md#2025-04-23_snippet_23\n\nLANGUAGE: clojure\nCODE:\n```\nmetabase.driver.sql.query-processor/*table-alias*\n```\n\n----------------------------------------\n\nTITLE: Example Metabase Log Output for Manual Database Migration (Text/SQL)\nDESCRIPTION: Illustrates the log output produced by Metabase when `MB_DB_AUTOMIGRATE` is set to `false` and database updates are necessary. The log indicates that an upgrade is required and provides the specific SQL commands (e.g., creating the `DATABASECHANGELOGLOCK` table) that must be manually executed against the application database before Metabase can proceed with startup.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/installation-and-operation/migrating-from-h2.md#2025-04-23_snippet_6\n\nLANGUAGE: text\nCODE:\n```\n2015-12-01 12:45:45,805 [INFO ] metabase.db :: Database Upgrade Required\n\nNOTICE: Your database requires updates to work with this version of Metabase.  Please execute the following sql commands on your database before proceeding.\n\n-- *********************************************************************\n-- Update Database Script\n-- *********************************************************************\n-- Change Log: migrations/liquibase.yaml\n-- Ran at: 12/1/15 12:45 PM\n-- Against: @jdbc:h2:file:/Users/agilliland/workspace/metabase/metabase/metabase.db\n-- Liquibase version: 3.4.1\n-- *********************************************************************\n\n-- Create Database Lock Table\nCREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID));\n\n...\n\nOnce your database is updated try running the application again.\n\n2015-12-01 12:46:39,489 [INFO ] metabase.core :: Metabase Shutting Down ...\n```\n\n----------------------------------------\n\nTITLE: Rendering Extra-Small Size Filled TimeInput Example\nDESCRIPTION: Displays an extra-small size TimeInput component with a pre-filled value using Storybook Canvas and Story components.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.mdx#2025-04-23_snippet_11\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={TimeInputStories.FilledXs} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Deprecated Method: Converting Fields to Identifiers in Clojure\nDESCRIPTION: The field->identifier method is now unused. Override ->honeysql for [<driver> :field] and manipulate the #19610 information for custom field-to-identifier conversions.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/driver-changelog.md#2025-04-23_snippet_25\n\nLANGUAGE: clojure\nCODE:\n```\nmetabase.driver.sql.query-processor/field->identifier\n```\n\n----------------------------------------\n\nTITLE: Rendering Extra-Small Size Disabled TimeInput Example\nDESCRIPTION: Shows an extra-small size TimeInput component in a disabled state using Storybook Canvas and Story components.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.mdx#2025-04-23_snippet_14\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={TimeInputStories.DisabledXs} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Importing Components for PopoverBackButton Storybook Documentation\nDESCRIPTION: Imports React hooks, Storybook documentation components, and Metabase UI components needed to display and document the PopoverBackButton component.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/buttons/PopoverBackButton/PopoverBackButton.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { useState } from \"react\";\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { Box, Button, Flex, Menu, PopoverBackButton } from \"metabase/ui\";\nimport * as PopoverBackButtonStories from \"./PopoverBackButton.stories\";\n```\n\n----------------------------------------\n\nTITLE: Converting Value to Text using text Function in Metabase Expressions (PostgreSQL)\nDESCRIPTION: Converts a number or date value into its text (string) representation. This function is specifically available only for PostgreSQL data sources. It's useful for applying text-based filters or joining columns based on string comparisons. Takes the value (number or date) to convert as input.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_48\n\nLANGUAGE: Metabase Expression\nCODE:\n```\ntext(value)\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\ntext(Created At])\n```\n\n----------------------------------------\n\nTITLE: Rendering PopoverBackButton Example in Storybook Canvas\nDESCRIPTION: Creates a Storybook Canvas component that renders the default story for the PopoverBackButton component, providing a visual example.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/buttons/PopoverBackButton/PopoverBackButton.mdx#2025-04-23_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={PopoverBackButtonStories.Default} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Importing DatePicker Component and Related Dependencies in React\nDESCRIPTION: This snippet shows the import statements for the DatePicker component and related dependencies. It includes imports from React, Storybook, Metabase UI, and support utilities.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/DatePicker/DatePicker.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { Fragment } from \"react\";\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { DatePicker, Box } from \"metabase/ui\";\nimport { SdkVisualizationWrapper } from \"__support__/storybook\";\nimport * as DatePickerStories from \"./DatePicker.stories\";\n```\n\n----------------------------------------\n\nTITLE: Adding Time Units using datetimeAdd Function in Metabase Expressions\nDESCRIPTION: Adds a specified amount of a given time unit (e.g., 'day', 'month', 'year') to a date or timestamp value. The amount must be an integer; fractional values are not supported. Requires the date/timestamp column, the integer amount, and the time unit string.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_52\n\nLANGUAGE: Metabase Expression\nCODE:\n```\ndatetimeAdd(column, amount, unit)\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\ndatetimeAdd(\"2021-03-25\", 1, \"month\")\n```\n\n----------------------------------------\n\nTITLE: Implementing Coalesce Logic in Spreadsheet Formula\nDESCRIPTION: Demonstrates how to achieve `coalesce`-like behavior in a spreadsheet (e.g., Excel, Google Sheets) using nested `IF` and `ISBLANK` functions. Assumes 'Notes' data is in column A (cell A2) and 'Comments' is in column B (cell B2), providing a default value if both are blank.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions/coalesce.md#2025-04-23_snippet_3\n\nLANGUAGE: Spreadsheet Formula\nCODE:\n```\n=IF(ISBLANK($A2),$B2,IF(ISBLANK($B2),$A2,\"No notes or comments.\"))\n```\n\n----------------------------------------\n\nTITLE: Importing UpsellBigCard Component and Storybook Dependencies\nDESCRIPTION: Imports necessary components from Storybook, a ReduxProvider from the support directory, and the UpsellBigCard component along with its stories for documentation purposes.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/admin/upsells/components/UpsellBigCard.mdx#2025-04-23_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Canvas, Story, Meta } from \"@storybook/blocks\";\nimport { ReduxProvider } from \"__support__/storybook\";\nimport { _UpsellBigCard } from \"./UpsellBigCard\";\nimport * as UpsellBigCardStories from \"./UpsellBigCard.stories\";\n```\n\n----------------------------------------\n\nTITLE: Recovering Corrupted H2 Database in Metabase\nDESCRIPTION: This set of commands attempts to recover a corrupted H2 database file in Metabase. It involves running the H2 recovery tool, renaming the old database file, creating a new one, and running a script to populate it.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/troubleshooting-guide/loading-from-h2.md#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\njava -cp metabase.jar org.h2.tools.Recover\n\nmv metabase.db.mv.db metabase-old.db.mv.db\n\ntouch metabase.db.mv.db\n\njava --add-opens java.base/java.nio=ALL-UNNAMED -cp target/uberjar/metabase.jar org.h2.tools.RunScript -script metabase.db.h2.sql -url jdbc:h2:`pwd`/metabase.db\n```\n\n----------------------------------------\n\nTITLE: Retrieving Optional Test Environment Variable in Clojure\nDESCRIPTION: This Clojure snippet demonstrates using the `tx/db-test-env-var` function to retrieve a database connection property (user) for MySQL tests. It looks for the environment variable `MB_MYSQL_TEST_USER`. If the environment variable is not set, it defaults to the value \"root\". This is useful for optional configuration parameters with sensible defaults.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/drivers/driver-tests.md#2025-04-23_snippet_9\n\nLANGUAGE: clj\nCODE:\n```\n(tx/db-test-env-var :mysql :user \"root\")\n```\n\n----------------------------------------\n\nTITLE: Extracting Subdomain from URL using subdomain Function in Metabase Expressions\nDESCRIPTION: Extracts the subdomain portion from a given URL string. It specifically ignores the 'www' prefix, returning an empty string if that is the only subdomain part. The function takes a URL column or string as input.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_46\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nsubdomain(url)\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nsubdomain([Page URL])\n```\n\n----------------------------------------\n\nTITLE: Organizing Driver Files in Metabase Project Structure\nDESCRIPTION: Example of file organization for a SQLite driver in the Metabase repository, showing the required files including dependencies, plugin manifest, main driver namespace, and test extensions.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/drivers/driver-tests.md#2025-04-23_snippet_0\n\nLANGUAGE: clojure\nCODE:\n```\nmetabase/modules/drivers/sqlite/deps.edn                           ; <- deps go in here\nmetabase/modules/drivers/sqlite/resources/metabase-plugin.yaml     ; <- plugin manifest\nmetabase/modules/drivers/sqilte/src/metabase/driver/sqlite.clj     ; <- main driver namespace\n```\n\n----------------------------------------\n\nTITLE: Examples of incorrect parent method calls in Metabase drivers\nDESCRIPTION: Demonstrates two incorrect ways to call parent driver implementations that would break method dispatch chains. These examples show what to avoid when implementing driver multimethods.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/drivers/multimethods.md#2025-04-23_snippet_3\n\nLANGUAGE: clojure\nCODE:\n```\n(defmethod driver/mbql->native :bigquery [_ query]\n  ;; BAD! If :sql's implementation of mbql->native calls any other methods, it won't use the :bigquery implementation\n  ((get-method driver/mbql->native :sql) :sql query))\n```\n\n----------------------------------------\n\nTITLE: Removing Whitespace using trim Function in Metabase Expressions\nDESCRIPTION: Removes any leading (start) and trailing (end) whitespace characters from a given text string. It takes the text string as input and returns the trimmed string.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_49\n\nLANGUAGE: Metabase Expression\nCODE:\n```\ntrim(text)\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\ntrim([Comment])\n```\n\n----------------------------------------\n\nTITLE: Extracting Quarter using quarter Function in Metabase Expressions\nDESCRIPTION: Extracts the quarter of the year (an integer between 1 and 4) from a given date or timestamp value. Takes the datetime column or value as input.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/questions/query-builder/expressions-list.md#2025-04-23_snippet_63\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nquarter([datetime column])\n```\n\nLANGUAGE: Metabase Expression\nCODE:\n```\nquarter(\"2021-03-25T12:52:37\")\n```\n\n----------------------------------------\n\nTITLE: Running Local Metabase Release (Shell)\nDESCRIPTION: This command initiates an offline release process for Metabase, including building and testing. It requires environment variables to be set in a .env file.\nSOURCE: https://github.com/metabase/metabase/blob/master/release/README.md#2025-04-23_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\ncd release && yarn && yarn release-offline v0.77.77 1234567890abcdef1234567890abcdef12345678 --build\n```\n\n----------------------------------------\n\nTITLE: Verifying a Built Metabase Driver\nDESCRIPTION: Command to verify that a previously built driver has been correctly constructed. This helps ensure the driver plugin will work properly when loaded by Metabase.\nSOURCE: https://github.com/metabase/metabase/blob/master/bin/build-drivers.md#2025-04-23_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\nclojure -X:build:build/verify-driver :driver :mongo\n```\n\n----------------------------------------\n\nTITLE: Testing Built Metabase JAR Locally (Shell)\nDESCRIPTION: This command runs the built Metabase JAR file locally for testing purposes. It specifies the port and includes necessary Java options.\nSOURCE: https://github.com/metabase/metabase/blob/master/release/README.md#2025-04-23_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nMB_JETTY_PORT=3033 java --add-opens java.base/java.nio=ALL-UNNAMED -jar target/uberjar/metabase.jar\n```\n\n----------------------------------------\n\nTITLE: Timestamp with Time Zone SQL Example\nDESCRIPTION: Example of a SQL timestamp with time zone data type that includes location information. This format is aware of geographic location rather than just offset.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/configuring-metabase/timezones.md#2025-04-23_snippet_1\n\nLANGUAGE: sql\nCODE:\n```\n2022-12-28T12:00:00 AT TIME ZONE 'America/Toronto'\n```\n\n----------------------------------------\n\nTITLE: Deprecated Method: Retrieving Syncable Schemas in Clojure\nDESCRIPTION: The syncable-schemas method has been deprecated in favor of filtered-syncable-schemas. The existing implementation calls filtered-syncable-schemas with nil filters.\nSOURCE: https://github.com/metabase/metabase/blob/master/docs/developers-guide/driver-changelog.md#2025-04-23_snippet_27\n\nLANGUAGE: clojure\nCODE:\n```\nmetabase.driver.sql-jdbc.sync.interface/syncable-schemas\n```\n\n----------------------------------------\n\nTITLE: Running Cypress E2E Tests for Metabase SDK\nDESCRIPTION: This command starts Cypress for running component tests on the Metabase SDK. It uses the TEST_SUITE environment variable to specify the component test suite.\nSOURCE: https://github.com/metabase/metabase/blob/master/enterprise/frontend/src/embedding-sdk/dev.md#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nTEST_SUITE=\"component\" yarn test-cypress\n```\n\n----------------------------------------\n\nTITLE: Setting Java Property for Metabase JAR\nDESCRIPTION: Command to set environment variable as a Java property when running Metabase JAR file, which works across all systems.\nSOURCE: https://github.com/metabase/metabase/blob/master/src/metabase/cmd/resources/env-var-intro.md#2025-04-23_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\njava -DMB_SITE_NAME=\"Awesome Company\" -jar metabase.jar\n```\n\n----------------------------------------\n\nTITLE: Generating Metabase Changelog (Shell)\nDESCRIPTION: This utility command generates a changelog for a specific Metabase version, useful for previewing or regenerating release notes.\nSOURCE: https://github.com/metabase/metabase/blob/master/release/README.md#2025-04-23_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\nyarn generate-changelog v0.77.0 > changelog.log\n```\n\n----------------------------------------\n\nTITLE: Configuring Storybook Meta for Paper Component\nDESCRIPTION: This JSX snippet sets up the Storybook Meta component for the Paper stories. It's used to configure the Storybook documentation for the Paper component.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/utils/Paper/Paper.mdx#2025-04-23_snippet_1\n\nLANGUAGE: JSX\nCODE:\n```\n<Meta of={PaperStories} />\n```\n\n----------------------------------------\n\nTITLE: Rendering Medium Size Disabled TimeInput Example\nDESCRIPTION: Displays a medium size TimeInput component in a disabled state using Storybook Canvas and Story components.\nSOURCE: https://github.com/metabase/metabase/blob/master/frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.mdx#2025-04-23_snippet_7\n\nLANGUAGE: jsx\nCODE:\n```\n<Canvas>\n  <Story of={TimeInputStories.DisabledMd} />\n</Canvas>\n```\n\n----------------------------------------\n\nTITLE: Password List Data\nDESCRIPTION: A raw list of user passwords, likely from a compromised database. The passwords show common patterns like name+number combinations, dictionary words, and simple character substitutions.\nSOURCE: https://github.com/metabase/metabase/blob/master/resources/common_passwords.txt#2025-04-23_snippet_1\n\nLANGUAGE: text\nCODE:\n```\n1597532486\nshockers\nelegant\nmerckx\nmelanie2\nttocs\nclarisse\nearth1\nbooo\ndennys\nslobber\nflagman\nfarfalla\ntroika\nlecter\n4fa82hyx\nhakan\nx4ww5qdr\n[...truncated for brevity...]\n```"
  }
]
[
  {
    "owner": "restic",
    "repo": "rest-server",
    "content": "TITLE: Starting REST Server in Docker Container\nDESCRIPTION: Commands to pull and run the REST server Docker image with port mapping and data volume mounting.\nSOURCE: https://github.com/restic/rest-server/blob/master/README.md#2025-04-17_snippet_5\n\nLANGUAGE: sh\nCODE:\n```\ndocker pull restic/rest-server:latest\ndocker run -p 8000:8000 -v /my/data:/data --name rest_server restic/rest-server\n```\n\n----------------------------------------\n\nTITLE: Testing Restic Backup with Rest Server\nDESCRIPTION: Commands to initialize a restic repository and perform a backup to the Rest Server, which will generate metrics visible in the Grafana dashboard.\nSOURCE: https://github.com/restic/rest-server/blob/master/examples/compose-with-grafana/README.md#2025-04-17_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nrestic -r rest:http://127.0.0.1:8010/demo1 -p ./demo-passwd init\\nrestic -r rest:http://127.0.0.1:8010/demo1 -p ./demo-passwd backup .\n```\n\n----------------------------------------\n\nTITLE: Managing Users in Docker REST Server\nDESCRIPTION: Commands to add and delete users in a running REST server Docker container.\nSOURCE: https://github.com/restic/rest-server/blob/master/README.md#2025-04-17_snippet_7\n\nLANGUAGE: sh\nCODE:\n```\ndocker exec -it rest_server create_user myuser\n```\n\n----------------------------------------\n\nTITLE: Creating a Password File for REST Server Authentication\nDESCRIPTION: Command to create a .htpasswd file with bcrypt encryption for user authentication. The -B flag specifies bcrypt for secure password hashing.\nSOURCE: https://github.com/restic/rest-server/blob/master/README.md#2025-04-17_snippet_3\n\nLANGUAGE: sh\nCODE:\n```\nhtpasswd -B -c .htpasswd username\n```\n\n----------------------------------------\n\nTITLE: Generating Self-Signed TLS Certificate for REST Server\nDESCRIPTION: Command to generate a self-signed TLS certificate for securing REST server communications. Includes alternative names for local and domain access.\nSOURCE: https://github.com/restic/rest-server/blob/master/README.md#2025-04-17_snippet_4\n\nLANGUAGE: sh\nCODE:\n```\nopenssl req -newkey rsa:2048 -nodes -x509 -keyout private_key -out public_key -days 365 -addext \"subjectAltName = IP:127.0.0.1,DNS:yourdomain.com\"\n```\n\n----------------------------------------\n\nTITLE: Deploying Docker Compose Stack\nDESCRIPTION: Commands to build and start the Docker Compose stack containing Rest Server, Prometheus, and Grafana services in detached mode.\nSOURCE: https://github.com/restic/rest-server/blob/master/examples/compose-with-grafana/README.md#2025-04-17_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ndocker-compose build\\ndocker-compose up -d\n```\n\n----------------------------------------\n\nTITLE: Building Custom REST Server Docker Image\nDESCRIPTION: Commands to clone the repository and build a custom Docker image for the REST server.\nSOURCE: https://github.com/restic/rest-server/blob/master/README.md#2025-04-17_snippet_6\n\nLANGUAGE: sh\nCODE:\n```\ngit clone https://github.com/restic/rest-server.git \ncd rest-server\ndocker build -t restic/rest-server:latest .\n```\n\n----------------------------------------\n\nTITLE: Starting REST Server with Custom Path and No Authentication\nDESCRIPTION: Command to start the REST server with a custom data persistence directory and authentication disabled.\nSOURCE: https://github.com/restic/rest-server/blob/master/README.md#2025-04-17_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\nrest-server --path /user/home/backup --no-auth\n```\n\n----------------------------------------\n\nTITLE: Listening on Unix Socket with SSH Port Forwarding in Go\nDESCRIPTION: Example of how to use rest-server listening on a Unix socket with SSH remote port forwarding to enable a remote server to backup locally. Requires rest-server 0.13.0 or newer.\nSOURCE: https://github.com/restic/rest-server/blob/master/CHANGELOG.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nrest-server --listen unix:/tmp/foo &\nssh -R /tmp/foo:/tmp/foo user@host restic -r rest:http+unix:///tmp/foo:/repo backup\n```\n\n----------------------------------------\n\nTITLE: Adding User with Specific Password in Docker REST Server\nDESCRIPTION: Command to add a user with a specific password to a running REST server Docker container.\nSOURCE: https://github.com/restic/rest-server/blob/master/README.md#2025-04-17_snippet_8\n\nLANGUAGE: sh\nCODE:\n```\ndocker exec -it rest_server create_user myuser mypassword\n```\n\n----------------------------------------\n\nTITLE: Building REST Server from Source\nDESCRIPTION: Command to build the rest-server binary with CGO disabled for better portability.\nSOURCE: https://github.com/restic/rest-server/blob/master/README.md#2025-04-17_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nCGO_ENABLED=0 go build -o rest-server ./cmd/rest-server\n```\n\n----------------------------------------\n\nTITLE: Building Rest Server Docker Image\nDESCRIPTION: Command to build the rest-server Docker image from the project root directory, which is a prerequisite for the monitoring setup.\nSOURCE: https://github.com/restic/rest-server/blob/master/examples/compose-with-grafana/README.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncd ../..\\nmake docker_build\\ncd -\n```\n\n----------------------------------------\n\nTITLE: Deleting User from Docker REST Server\nDESCRIPTION: Command to delete a user from a running REST server Docker container.\nSOURCE: https://github.com/restic/rest-server/blob/master/README.md#2025-04-17_snippet_9\n\nLANGUAGE: sh\nCODE:\n```\ndocker exec -it rest_server delete_user myuser\n```\n\n----------------------------------------\n\nTITLE: Checking Docker Compose Stack Status\nDESCRIPTION: Command to verify the status of all services in the Docker Compose stack, ensuring they are running correctly.\nSOURCE: https://github.com/restic/rest-server/blob/master/examples/compose-with-grafana/README.md#2025-04-17_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\ndocker-compose ps\n```\n\n----------------------------------------\n\nTITLE: Logging to Stdout in Go with rest-server\nDESCRIPTION: Example of how to configure rest-server to log to stdout using the --log - option. This is particularly useful when running the server as a different user.\nSOURCE: https://github.com/restic/rest-server/blob/master/CHANGELOG.md#2025-04-17_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nsudo -u restic rest-server [...] --log -\n```\n\n----------------------------------------\n\nTITLE: Displaying REST Server Help Information\nDESCRIPTION: Example of running rest-server with the help flag to display available command-line options and their descriptions.\nSOURCE: https://github.com/restic/rest-server/blob/master/README.md#2025-04-17_snippet_1\n\nLANGUAGE: console\nCODE:\n```\n$ rest-server --help\n\nRun a REST server for use with restic\n\nUsage:\n  rest-server [flags]\n\nFlags:\n      --append-only                  enable append only mode\n      --cpu-profile string           write CPU profile to file\n      --debug                        output debug messages\n      --group-accessible-repos       let filesystem group be able to access repo files\n  -h, --help                         help for rest-server\n      --htpasswd-file string         location of .htpasswd file (default: \"<data directory>/.htpasswd)\"\n      --listen string                listen address (default \":8000\")\n      --log filename                 write HTTP requests in the combined log format to the specified filename (use \"-\" for logging to stdout)\n      --max-size int                 the maximum size of the repository in bytes\n      --no-auth                      disable .htpasswd authentication\n      --no-verify-upload             do not verify the integrity of uploaded data. DO NOT enable unless the rest-server runs on a very low-power device\n      --path string                  data directory (default \"/tmp/restic\")\n      --private-repos                users can only access their private repo\n      --prometheus                   enable Prometheus metrics\n      --prometheus-no-auth           disable auth for Prometheus /metrics endpoint\n      --proxy-auth-username string   specifies the HTTP header containing the username for proxy-based authentication\n      --tls                          turn on TLS support\n      --tls-cert string              TLS certificate path\n      --tls-key string               TLS key path\n      --tls-min-ver string           TLS min version, one of (1.2|1.3) (default \"1.2\")\n  -v, --version                      version for rest-server\n```\n\n----------------------------------------\n\nTITLE: Building Release with Goreleaser\nDESCRIPTION: Builds the project using goreleaser with custom release notes from changelog template.\nSOURCE: https://github.com/restic/rest-server/blob/master/Release.md#2025-04-17_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\ngoreleaser \\\n  release \\\n  --release-notes <(calens --template changelog/CHANGELOG-GitHub.tmpl --version \"${VERSION}\")\n```\n\n----------------------------------------\n\nTITLE: Managing Changelog Files\nDESCRIPTION: Moves unreleased changelog entries to a versioned folder and sets up new unreleased directory.\nSOURCE: https://github.com/restic/rest-server/blob/master/Release.md#2025-04-17_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nmv changelog/unreleased \"changelog/${VERSION}_$(date +%Y-%m-%d)\"\nrm -f \"changelog/${VERSION}_$(date +%Y-%m-%d)/.gitkeep\"\ngit add \"changelog/${VERSION}\"*\ngit rm -r changelog/unreleased\nmkdir changelog/unreleased\ntouch changelog/unreleased/.gitkeep\ngit add changelog/unreleased/.gitkeep\ngit commit -m \"Move changelog files for ${VERSION}\" changelog/{unreleased,\"${VERSION}\"*}\n```\n\n----------------------------------------\n\nTITLE: Generating Changelog\nDESCRIPTION: Generates CHANGELOG.md using calens and commits it.\nSOURCE: https://github.com/restic/rest-server/blob/master/Release.md#2025-04-17_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\ncalens > CHANGELOG.md\ngit add CHANGELOG.md\ngit commit -m \"Generate CHANGELOG.md for ${VERSION}\" CHANGELOG.md\n```\n\n----------------------------------------\n\nTITLE: Creating and Pushing Git Tag\nDESCRIPTION: Creates a signed Git tag for the release and pushes it to the remote repository.\nSOURCE: https://github.com/restic/rest-server/blob/master/Release.md#2025-04-17_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\ngit tag -a -s -m \"v${VERSION}\" \"v${VERSION}\"\ngit push --tags\n```\n\n----------------------------------------\n\nTITLE: Setting Version Environment Variable\nDESCRIPTION: Exports the version number as an environment variable for use in subsequent commands.\nSOURCE: https://github.com/restic/rest-server/blob/master/Release.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nexport VERSION=0.10.0\n```\n\n----------------------------------------\n\nTITLE: Updating Version in Project Files\nDESCRIPTION: Updates version number in VERSION file and main.go, then commits the changes.\nSOURCE: https://github.com/restic/rest-server/blob/master/Release.md#2025-04-17_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\necho \"${VERSION}\" | tee VERSION\nsed -i \"s/var version = \\\"[^\\\"]*\\\"/var version = \\\"${VERSION}\\\"/\" cmd/rest-server/main.go\ngit commit -m \"Update VERSION files for ${VERSION}\" VERSION cmd/rest-server/main.go\n```\n\n----------------------------------------\n\nTITLE: Setting Development Version\nDESCRIPTION: Updates the version in main.go to include -dev suffix for the next development cycle.\nSOURCE: https://github.com/restic/rest-server/blob/master/Release.md#2025-04-17_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\nsed -i \"s/var version = \\\"[^\\\"]*\\\"/var version = \\\"${VERSION}-dev\\\"/\" cmd/rest-server/main.go\ngit commit -m \"Update version for development\" cmd/rest-server/main.go\n```"
  }
]
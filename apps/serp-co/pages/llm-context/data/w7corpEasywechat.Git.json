[
  {
    "owner": "w7corp",
    "repo": "easywechat.git",
    "content": "TITLE: Initializing EasyWeChat OfficialAccount Application in PHP\nDESCRIPTION: This code demonstrates how to initialize an instance of the EasyWeChat OfficialAccount Application. It requires a configuration array with app_id, secret, token, and other optional parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/6.x/index.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\OfficialAccount\\Application;\n\n$config = [\n    'app_id' => 'wx3cf0f39249eb0exx',\n    'secret' => 'f1c242f4f28f735d4687abb469072axx',\n    'token' => 'easywechat',\n    'aes_key' => '' // 明文模式请勿填写 EncodingAESKey\n    //...\n];\n\n$app = new Application($config);\n```\n\n----------------------------------------\n\nTITLE: Configuring WeChat Official Account Settings in PHP\nDESCRIPTION: This code snippet demonstrates a complete configuration array for WeChat Official Account development. It includes settings for app credentials, stable access token usage, OAuth configuration, and HTTP request parameters. The configuration covers essential elements like app ID, secret, token, and optional advanced settings.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/6.x/official-account/config.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n[\n    /**\n     * 账号基本信息，请从微信公众平台/开放平台获取\n     */\n    'app_id'  => 'your-app-id',         // AppID\n    'secret'  => 'your-app-secret',     // AppSecret\n    'token'   => 'your-token',          // Token\n    'aes_key' => '',                    // EncodingAESKey，兼容与安全模式下请一定要填写！！！\n\n    /**\n     * 是否使用 Stable Access Token\n     * 默认 false\n     * https://developers.weixin.qq.com/doc/offiaccount/Basic_Information/getStableAccessToken.html\n     * true 使用 false 不使用\n     */\n    'use_stable_access_token' => false,\n\n    /**\n     * OAuth 配置\n     *\n     * scopes：公众平台（snsapi_userinfo / snsapi_base），开放平台：snsapi_login\n     * redirect_url：OAuth授权完成后的回调页地址\n     */\n    'oauth' => [\n        'scopes'   => ['snsapi_userinfo'],\n        'redirect_url' => '/examples/oauth_callback.php',\n    ],\n\n    /**\n     * 接口请求相关配置，超时时间等，具体可用参数请参考：\n     * https://github.com/symfony/symfony/blob/5.3/src/Symfony/Contracts/HttpClient/HttpClientInterface.php\n     */\n    'http' => [\n        'timeout' => 5.0,\n        // 'base_uri' => 'https://api.weixin.qq.com/', // 如果你在国外想要覆盖默认的 url 的时候才使用，根据不同的模块配置不同的 uri\n\n        'retry' => true, // 使用默认重试配置\n        //  'retry' => [\n        //      // 仅以下状态码重试\n        //      'status_codes' => [429, 500]\n        //       // 最大重试次数\n        //      'max_retries' => 3,\n        //      // 请求间隔 (毫秒)\n        //      'delay' => 1000,\n        //      // 如果设置，每次重试的等待时间都会增加这个系数\n        //      // (例如. 首次:1000ms; 第二次: 3 * 1000ms; etc.)\n        //      'multiplier' => 3\n        //  ],\n    ],\n]\n```\n\n----------------------------------------\n\nTITLE: Creating Text Messages in EasyWeChat PHP SDK\nDESCRIPTION: This snippet demonstrates three different ways to create and customize a text message in EasyWeChat. You can initialize it with an array, set properties directly, or use the setAttribute method.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/messages.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nuse EasyWeChat\\Message\\Text;\n\n$text = new Text(['content' => '您好！overtrue。']);\n\n// or\n$text = new Text();\n$text->content = '您好！overtrue。';\n\n// or\n$text = new Text();\n$text->setAttribute('content', '您好！overtrue。');\n```\n\n----------------------------------------\n\nTITLE: Configuring WeChat Mini Program Settings in PHP\nDESCRIPTION: This code snippet demonstrates a comprehensive configuration array for WeChat Mini Program development. It includes account information, stable access token settings, and HTTP request configurations with retry options.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/6.x/mini-app/config.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n[\n    /**\n     * 账号基本信息，请从微信公众平台/开放平台获取\n     */\n    'app_id'  => 'your-app-id',         // AppID\n    'secret'  => 'your-app-secret',     // AppSecret\n    'token'   => 'your-token',          // Token\n    'aes_key' => '',                    // EncodingAESKey，兼容与安全模式下请一定要填写！！！\n\n    /**\n     * 是否使用 Stable Access Token\n     * 默认 false\n     * https://developers.weixin.qq.com/miniprogram/dev/OpenApiDoc/mp-access-token/getStableAccessToken.html\n     * true 使用 false 不使用\n     */\n    'use_stable_access_token' => false,\n\n    /**\n     * 接口请求相关配置，超时时间等，具体可用参数请参考：\n     * https://github.com/symfony/symfony/blob/5.3/src/Symfony/Contracts/HttpClient/HttpClientInterface.php\n     */\n    'http' => [\n        'throw'  => true, // 状态码非 200、300 时是否抛出异常，默认为开启\n        'timeout' => 5.0,\n        // 'base_uri' => 'https://api.weixin.qq.com/', // 如果你在国外想要覆盖默认的 url 的时候才使用，根据不同的模块配置不同的 uri\n\n        'retry' => true, // 使用默认重试配置\n        //  'retry' => [\n        //      // 仅以下状态码重试\n        //      'status_codes' => [429, 500]\n        //       // 最大重试次数\n        //      'max_retries' => 3,\n        //      // 请求间隔 (毫秒)\n        //      'delay' => 1000,\n        //      // 如果设置，每次重试的等待时间都会增加这个系数\n        //      // (例如. 首次:1000ms; 第二次: 3 * 1000ms; etc.)\n        //      'multiplier' => 3\n        //  ],\n    ],\n]\n```\n\n----------------------------------------\n\nTITLE: Comprehensive EasyWeChat Configuration in PHP\nDESCRIPTION: Full configuration example for EasyWeChat, including account information, API response type, logging, HTTP settings, and OAuth configuration. This snippet shows all available options with explanations.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/configuration.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nreturn [\n    /**\n     * 账号基本信息，请从微信公众平台/开放平台获取\n     */\n    'app_id'  => 'your-app-id',         // AppID\n    'secret'  => 'your-app-secret',     // AppSecret\n    'token'   => 'your-token',          // Token\n    'aes_key' => '',                    // EncodingAESKey，兼容与安全模式下请一定要填写！！！\n\n     /**\n      * 指定 API 调用返回结果的类型：array(default)/collection/object/raw/自定义类名\n      * 使用自定义类名时，构造函数将会接收一个 `EasyWeChat\\Kernel\\Http\\Response` 实例\n      */\n    'response_type' => 'array',\n\n    /**\n     * 日志配置\n     *\n     * level: 日志级别, 可选为：\n     *         debug/info/notice/warning/error/critical/alert/emergency\n     * path：日志文件位置(绝对路径!!!)，要求可写权限\n     */\n    'log' => [\n        'default' => 'dev', // 默认使用的 channel，生产环境可以改为下面的 prod\n        'channels' => [\n            // 测试环境\n            'dev' => [\n                'driver' => 'single',\n                'path' => '/tmp/easywechat.log',\n                'level' => 'debug',\n            ],\n            // 生产环境\n            'prod' => [\n                'driver' => 'daily',\n                'path' => '/tmp/easywechat.log',\n                'level' => 'info',\n            ],\n        ],\n    ],\n\n    /**\n     * 接口请求相关配置，超时时间等，具体可用参数请参考：\n     * http://docs.guzzlephp.org/en/stable/request-config.html\n     *\n     * - retries: 重试次数，默认 1，指定当 http 请求失败时重试的次数。\n     * - retry_delay: 重试延迟间隔（单位：ms），默认 500\n     * - log_template: 指定 HTTP 日志模板，请参考：https://github.com/guzzle/guzzle/blob/master/src/MessageFormatter.php\n     */\n    'http' => [\n        'max_retries' => 1,\n        'retry_delay' => 500,\n        'timeout' => 5.0,\n        // 'base_uri' => 'https://api.weixin.qq.com/', // 如果你在国外想要覆盖默认的 url 的时候才使用，根据不同的模块配置不同的 uri\n    ],\n\n    /**\n     * OAuth 配置\n     *\n     * scopes：公众平台（snsapi_userinfo / snsapi_base），开放平台：snsapi_login\n     * callback：OAuth授权完成后的回调页地址\n     */\n    'oauth' => [\n        'scopes'   => ['snsapi_userinfo'],\n        'callback' => '/examples/oauth_callback.php',\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Installing EasyWeChat SDK via Composer\nDESCRIPTION: This snippet shows how to install the EasyWeChat SDK using Composer. It specifies the package name and version constraint.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/6.x/index.md#2025-04-22_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\ncomposer require w7corp/easywechat:^6.17\n```\n\n----------------------------------------\n\nTITLE: Implementing WeChat OAuth in User Profile Page in PHP\nDESCRIPTION: This example demonstrates a complete implementation of WeChat OAuth in a user profile page. It checks for user login status, initiates OAuth if not logged in, and handles the authorized user session.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/oauth.md#2025-04-22_snippet_4\n\nLANGUAGE: PHP\nCODE:\n```\n// http://easywechat.com/user/profile\n<?php\n\nuse EasyWeChat\\Factory;\n\n$config = [\n  // ...\n  'oauth' => [\n      'scopes'   => ['snsapi_userinfo'],\n      'callback' => '/oauth_callback',\n  ],\n  // ..\n];\n\n$app = Factory::officialAccount($config);\n$oauth = $app->oauth;\n\n// 未登录\nif (empty($_SESSION['wechat_user'])) {\n\n  $_SESSION['target_url'] = 'user/profile';\n\n  return $oauth->redirect();\n  // 这里不一定是return，如果你的框架action不是返回内容的话你就得使用\n  // $oauth->redirect()->send();\n}\n\n// 已经登录过\n$user = $_SESSION['wechat_user'];\n\n// ...\n```\n\n----------------------------------------\n\nTITLE: Using Certificates in API Requests with EasyWeChat SDK\nDESCRIPTION: Demonstrates how to include certificates in API requests, specifically for WeChat Pay V2 transfers. It shows how to specify local certificate and private key files in the request options.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/6.x/client.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$response = $api->post('/mmpaymkttransfers/promotion/transfers', [\n    'xml' => [\n        'mch_appid' => $app->getConfig()['app_id'],\n        'mchid' => $app->getConfig()['mch_id'],\n        'partner_trade_no' => '202203081646729819743',\n        'openid' => 'ogn1H45HCRxVRiEMLbLLuABbxxxx',\n        'check_name' => 'FORCE_CHECK',\n        're_user_name'=> 'overtrue',\n        'amount' => 100,\n        'desc' => '理赔',\n    ],\n    'local_cert' => $app->getConfig()['cert_path'],\n    'local_pk' => $app->getConfig()['key_path'],\n    ]);\n```\n\n----------------------------------------\n\nTITLE: Sending Voice Messages with EasyWeChat Broadcasting\nDESCRIPTION: Methods for sending voice messages to all users, specific users by openid list, or users in a specific tag group. Requires a valid media ID for the voice recording.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/broadcasting.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$app->broadcasting->sendVoice($mediaId);\n$app->broadcasting->sendVoice($mediaId, [$openid1, $openid2]);\n$app->broadcasting->sendVoice($mediaId, $tagId);\n```\n\n----------------------------------------\n\nTITLE: Creating Unified WeChat Payment Order\nDESCRIPTION: Creates a unified payment order using EasyWeChat SDK. Supports multiple payment types including H5, JSAPI, and QR code payments. Optional parameters for merchant info and service provider mode are handled automatically by the SDK.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/order.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$result = $app->order->unify([\n    'body' => '腾讯充值中心-QQ会员充值',\n    'out_trade_no' => '20150806125346',\n    'total_fee' => 88,\n    'spbill_create_ip' => '123.12.12.123', // 可选，如不传该参数，SDK 将会自动获取相应 IP 地址\n    'notify_url' => 'https://pay.weixin.qq.com/wxpay/pay.action', // 支付结果通知网址，如果不设置则会使用配置里的默认地址\n    'trade_type' => 'JSAPI', // 请对应换成你的支付方式对应的值类型\n    'openid' => 'oUpF8uMuAJO_M2pxb1Q9zNjWeS6o',\n]);\n\n//如trade_type = APP\n//需要进行二次签名\n(new \\EasyWeChat\\Payment\\Jssdk\\Client($app))->appConfig($result['prepay_id']);\n```\n\n----------------------------------------\n\nTITLE: Basic Message Handler Setup in PHP with EasyWeChat\nDESCRIPTION: Demonstrates how to set up a basic message handler using EasyWeChat SDK to process incoming WeChat messages and respond with a simple greeting.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/server.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nuse EasyWeChat\\Foundation\\Application;\n\n// ...\n\n$app = new Application($options);\n\n// 从项目实例中得到服务端应用实例。\n$server = $app->server;\n\n$server->setMessageHandler(function ($message) {\n    // $message->FromUserName // 用户的 openid\n    // $message->MsgType // 消息类型：event, text....\n    return \"您好！欢迎关注我!\";\n});\n\n$response = $server->serve();\n\n$response->send(); // Laravel 里请使用：return $response;\n```\n\n----------------------------------------\n\nTITLE: Creating Payment Order with Contract Signing\nDESCRIPTION: Shows how to create a payment order that includes contract signing functionality. Additional parameters for contract signing include plan_id, contract_code, and contract display information.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/order.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$isContract = true;\n\n$result = $app->order->unify([\n    'body' => '腾讯充值中心-QQ会员充值',\n    'out_trade_no' => '20150806125346',\n    'total_fee' => 88,\n    'spbill_create_ip' => '123.12.12.123',\n    'notify_url' => 'https://pay.weixin.qq.com/wxpay/pay.action',\n    'trade_type' => 'JSAPI',\n    'openid' => 'oUpF8uMuAJO_M2pxb1Q9zNjWeS6o',\n\n    'plan_id' => 123,\n    'contract_code' => 100001256,\n    'contract_display_account' => '腾讯充值中心',\n    'contract_notify_url' => 'http://easywechat.com/contract_notify'\n], $isContract);\n```\n\n----------------------------------------\n\nTITLE: Fetching User Information using EasyWeChat in PHP\nDESCRIPTION: This snippet shows how to use the initialized EasyWeChat application to make an API call. It retrieves user information for a given OpenID using the WeChat API.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/6.x/index.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$response = $app->getClient()->get(\"/cgi-bin/user/info?openid={$openid}&lang=zh_CN\");\n\n# 查看返回结果\nvar_dump($response->toArray());\n```\n\n----------------------------------------\n\nTITLE: Initializing EasyWeChat Server Endpoint in PHP\nDESCRIPTION: This code snippet demonstrates how to set up a basic WeChat server endpoint using the EasyWeChat SDK. It includes configuration options such as app_id, secret, token, and logging settings, and shows how to initialize the Application class and handle server requests.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/tutorial.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\ninclude __DIR__ . '/vendor/autoload.php'; // 引入 composer 入口文件\n\nuse EasyWeChat\\Foundation\\Application;\n\n$options = [\n    'debug'  => true,\n    'app_id' => 'your-app-id',\n    'secret' => 'you-secret',\n    'token'  => 'easywechat',\n\n\n    // 'aes_key' => null, // 可选\n\n    'log' => [\n        'level' => 'debug',\n        'file'  => '/tmp/easywechat.log', // XXX: 绝对路径！！！！\n    ],\n\n    //...\n];\n\n$app = new Application($options);\n\n$response = $app->server->serve();\n\n// 将响应输出\n$response->send(); // Laravel 里请使用：return $response;\n```\n\n----------------------------------------\n\nTITLE: Initializing EasyWeChat Official Account SDK in PHP\nDESCRIPTION: This snippet demonstrates how to configure and initialize the EasyWeChat SDK for WeChat Official Accounts. It sets up the necessary credentials, specifies the response type, and creates an instance of the official account application.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/index.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Factory;\n\n$config = [\n    'app_id' => 'wx3cf0f39249eb0exx',\n    'secret' => 'f1c242f4f28f735d4687abb469072axx',\n\n    // 指定 API 调用返回结果的类型：array(default)/collection/object/raw/自定义类名\n    'response_type' => 'array',\n    \n    //...\n];\n\n$app = Factory::officialAccount($config);\n```\n\n----------------------------------------\n\nTITLE: File Upload Methods in PHP with EasyWeChat SDK\nDESCRIPTION: Shows two methods for uploading files using the EasyWeChat SDK: uploading from a file path and uploading from binary content. It also includes simplified methods for file uploads introduced in version 6.4.0.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/6.x/client.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Kernel\\Form\\File;\nuse EasyWeChat\\Kernel\\Form\\Form;\n\n// Upload from file path\n$options = Form::create(\n    [\n        'media' => File::fromPath('/path/to/image.jpg'),\n    ]\n)->toArray();\n\n$response = $api->post('cgi-bin/media/upload?type=image', $options);\n\n// Upload from binary content\n$options = Form::create(\n    [\n        'media' => File::withContents($contents, 'image.jpg'), // 注意：请指定文件名\n    ]\n)->toArray();\n\n$response = $api->post('cgi-bin/media/upload?type=image', $options);\n\n// Simplified methods (6.4.0+)\n$media = $client->withFile($path, 'media')->post('cgi-bin/media/upload?type=image');\n$media = $client->withFileContents($contents, 'media', 'filename.png')->post('cgi-bin/media/upload?type=image');\n```\n\n----------------------------------------\n\nTITLE: API Method Signatures in PHP for EasyWeChat SDK\nDESCRIPTION: Lists the method signatures for common HTTP verbs (GET, POST, PATCH, PUT, DELETE) in the EasyWeChat SDK. It also includes convenience methods for JSON and XML requests.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/6.x/client.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nget(string $uri, array $options = []): Symfony\\Contracts\\HttpClient\\ResponseInterface\npost(string $uri, array $options = []): Symfony\\Contracts\\HttpClient\\ResponseInterface\npatch(string $uri, array $options = []): Symfony\\Contracts\\HttpClient\\ResponseInterface\nput(string $uri, array $options = []): Symfony\\Contracts\\HttpClient\\ResponseInterface\ndelete(string $uri, array $options = []): Symfony\\Contracts\\HttpClient\\ResponseInterface\n\npostJson(string $url, array $data = [], array $options = []): Symfony\\Contracts\\HttpClient\\ResponseInterface\npatchJson(string $url, array $data = [], array $options = []): Symfony\\Contracts\\HttpClient\\ResponseInterface\npostXml(string $url, array $data = [], array $options = []): Symfony\\Contracts\\HttpClient\\ResponseInterface\n```\n\n----------------------------------------\n\nTITLE: Sending Voice Broadcast Messages in PHP\nDESCRIPTION: Methods for sending voice broadcast messages using media ID to different target audiences.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/broadcasting.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$app->broadcasting->sendVoice($mediaId);\n$app->broadcasting->sendVoice($mediaId, [$openid1, $openid2]);\n$app->broadcasting->sendVoice($mediaId, $tagId);\n```\n\n----------------------------------------\n\nTITLE: Initiating WeChat OAuth Authorization in PHP\nDESCRIPTION: This snippet demonstrates how to initiate WeChat OAuth authorization using the EasyWeChat SDK. It sets the scope to 'snsapi_userinfo' and redirects the user to the WeChat authorization page.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/oauth.md#2025-04-22_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n$response = $app->oauth->scopes(['snsapi_userinfo'])\n                          ->redirect();\n```\n\n----------------------------------------\n\nTITLE: Implementing JSSDK Payment in JavaScript\nDESCRIPTION: Utilizes the wx.chooseWXPay method to initiate payment using the generated configuration. Handles the payment success in the callback function.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/jssdk.md#2025-04-22_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nwx.chooseWXPay({\n    timestamp: <?= $config['timestamp'] ?>,\n    nonceStr: '<?= $config['nonceStr'] ?>',\n    package: '<?= $config['package'] ?>',\n    signType: '<?= $config['signType'] ?>',\n    paySign: '<?= $config['paySign'] ?>', // 支付签名\n    success: function (res) {\n        // 支付成功后的回调函数\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Initiating Refund by WeChat Transaction ID in PHP\nDESCRIPTION: This snippet demonstrates how to initiate a refund using the WeChat transaction ID. It includes parameters for the transaction ID, refund number, total fee, refund fee, and additional configuration options.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/refund.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n// 参数分别为：微信订单号、商户退款单号、订单金额、退款金额、其他参数\n$app->refund->byTransactionId(string $transactionId, string $refundNumber, int $totalFee, int $refundFee, array $config = []);\n\n// Example:\n$result = $app->refund->byTransactionId('transaction-id-xxx', 'refund-no-xxx', 10000, 10000, [\n    // 可在此处传入其他参数，详细参数见微信支付文档\n    'refund_desc' => '商品已售完',\n]);\n```\n\n----------------------------------------\n\nTITLE: Initializing EasyWeChat Configuration in PHP\nDESCRIPTION: Basic configuration setup for EasyWeChat, including app_id, secret, and response_type. This snippet demonstrates how to create a configuration array and initialize the OfficialAccount application.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/configuration.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Factory;\n\n$config = [\n    'app_id' => 'wx3cf0f39249eb0exx',\n    'secret' => 'f1c242f4f28f735d4687abb469072axx',\n\n    // 指定 API 调用返回结果的类型：array(default)/collection/object/raw/自定义类名\n    'response_type' => 'array',\n\n    //...\n];\n\n$app = Factory::officialAccount($config);\n```\n\n----------------------------------------\n\nTITLE: Registering Custom Log Driver in PHP\nDESCRIPTION: This snippet demonstrates how to register a custom log driver in EasyWeChat using Monolog. It creates a new logger with a RotatingFileHandler and extends the application's logger with a custom 'mylog' driver.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/6.x/logging.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse Monolog\\Logger;\nuse Monolog\\Handler\\RotatingFileHandler;\n\n\n// 注册自定义日志\n$app->getLogger()->extend('mylog', function($app, $config){\n    return new Logger($this->parseChannel($config), [\n        $this->prepareHandler(new RotatingFileHandler(\n            $config['path'], $config['days'], $this->level($config)\n        )),\n    ]);\n});\n```\n\n----------------------------------------\n\nTITLE: Complete EasyWeChat Configuration Example\nDESCRIPTION: Full configuration example showing all available options including account credentials, response type, logging configuration, HTTP settings, and OAuth parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/configuration.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nreturn [\n    /**\n     * 账号基本信息，请从微信公众平台/开放平台获取\n     */\n    'app_id'  => 'your-app-id',         // AppID\n    'secret'  => 'your-app-secret',     // AppSecret\n    'token'   => 'your-token',          // Token\n    'aes_key' => '',                    // EncodingAESKey，兼容与安全模式下请一定要填写！！！\n\n     /**\n      * 指定 API 调用返回结果的类型：array(default)/collection/object/raw/自定义类名\n      * 使用自定义类名时，构造函数将会接收一个 `EasyWeChat\\Kernel\\Http\\Response` 实例\n      */\n    'response_type' => 'array',\n\n    /**\n     * 日志配置\n     *\n     * level: 日志级别, 可选为：\n     *         debug/info/notice/warning/error/critical/alert/emergency\n     * path：日志文件位置(绝对路径!!!)，要求可写权限\n     */\n    'log' => [\n        'default' => 'dev', // 默认使用的 channel，生产环境可以改为下面的 prod\n        'channels' => [\n            // 测试环境\n            'dev' => [\n                'driver' => 'single',\n                'path' => '/tmp/easywechat.log',\n                'level' => 'debug',\n            ],\n            // 生产环境\n            'prod' => [\n                'driver' => 'daily',\n                'path' => '/tmp/easywechat.log',\n                'level' => 'info',\n            ],\n        ],\n    ],\n\n    /**\n     * 接口请求相关配置，超时时间等，具体可用参数请参考：\n     * http://docs.guzzlephp.org/en/stable/request-config.html\n     *\n     * - retries: 重试次数，默认 1，指定当 http 请求失败时重试的次数。\n     * - retry_delay: 重试延迟间隔（单位：ms），默认 500\n     * - log_template: 指定 HTTP 日志模板，请参考：https://github.com/guzzle/guzzle/blob/master/src/MessageFormatter.php\n     */\n    'http' => [\n        'max_retries' => 1,\n        'retry_delay' => 500,\n        'timeout' => 5.0,\n        // 'base_uri' => 'https://api.weixin.qq.com/', // 如果你在国外想要覆盖默认的 url 的时候才使用，根据不同的模块配置不同的 uri\n    ],\n\n    /**\n     * OAuth 配置\n     *\n     * scopes：公众平台（snsapi_userinfo / snsapi_base），开放平台：snsapi_login\n     * callback：OAuth授权完成后的回调页地址\n     */\n    'oauth' => [\n        'scopes'   => ['snsapi_userinfo'],\n        'callback' => '/examples/oauth_callback.php',\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Making GET and POST Requests in PHP with EasyWeChat SDK\nDESCRIPTION: Shows examples of making GET and POST requests using the EasyWeChat SDK. It includes a GET request with query parameters and POST requests with JSON and XML payloads.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/6.x/client.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n// GET request\n$response = $api->get('/cgi-bin/user/list', [\n    'next_openid' => 'OPENID1',\n]);\n\n// POST request with JSON body\n$response = $api->post('/cgi-bin/user/info/updateremark', [\n    'body' => \\json_encode([\n            \"openid\" => \"oDF3iY9ffA-hqb2vVvbr7qxf6A0Q\",\n            \"remark\" => \"pangzi\"\n        ])\n    ]);\n\n// Simplified POST JSON request\n$response = $api->postJson('/cgi-bin/user/info/updateremark', [\n    \"openid\" => \"oDF3iY9ffA-hqb2vVvbr7qxf6A0Q\",\n    \"remark\" => \"pangzi\"\n]);\n\n// POST request with XML payload\n$response = $api->postXml('/mmpaymkttransfers/promotion/transfers', [\n    'mch_appid' => $app->getConfig()['app_id'],\n    'mchid' => $app->getConfig()['mch_id'],\n    'partner_trade_no' => '202203081646729819743',\n    'openid' => 'ogn1H45HCRxVRiEMLbLLuABbxxxx',\n    'check_name' => 'FORCE_CHECK',\n    're_user_name'=> 'overtrue',\n    'amount' => 100,\n    'desc' => '理赔',\n ]);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Authorized User Information in PHP\nDESCRIPTION: This code snippet shows how to retrieve the authorized user's information after successful WeChat OAuth. It provides access to various user details such as ID, nickname, avatar, and access token.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/oauth.md#2025-04-22_snippet_3\n\nLANGUAGE: PHP\nCODE:\n```\n$user = $app->oauth->user();\n// $user 可以用的方法:\n// $user->getId();  // 对应微信的 OPENID\n// $user->getNickname(); // 对应微信的 nickname\n// $user->getName(); // 对应微信的 nickname\n// $user->getAvatar(); // 头像网址\n// $user->getOriginal(); // 原始API返回的结果\n// $user->getToken(); // access_token， 比如用于地址共享时使用\n```\n\n----------------------------------------\n\nTITLE: Customizing Access Token in PHP for EasyWeChat SDK\nDESCRIPTION: Demonstrates how to implement a custom access token for use with the EasyWeChat SDK. It shows the implementation of the AccessToken interface and how to use the custom token in API requests.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/6.x/client.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nclass MyAccessToken implements EasyWeChat\\Kernel\\Contracts\\AccessToken\n{\n    public function getToken(): string\n    {\n        // 你的逻辑\n        return 'your token';\n    }\n\n    public function toQuery(): array\n    {\n        return ['access_token' => $this->getToken()];\n    }\n}\n\n$client->withAccessToken(new MyAccessToken());\n$client->get('xxxx');\n$client->post('xxxx');\n//...\n```\n\n----------------------------------------\n\nTITLE: Managing Mass Messages\nDESCRIPTION: Methods for creating and managing mass message templates, sending welcome messages, and tracking message delivery status.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/external-contact.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$msg = [\n    'external_userid' => [\n        'woAJ2GCAAAXtWyujaWJHDDGi0mACas1w',\n        'wmqfasd1e1927831291723123109r712',\n    ],\n    'sender' => 'zhangsan',\n    'text' => [\n        'content' => '文本消息内容',\n    ],\n    'image' => [\n        'media_id' => 'MEDIA_ID',\n    ],\n    'link' => [\n        'title' => '消息标题',\n        'picurl' => 'https://example.pic.com/path',\n        'desc' => '消息描述',\n        'url' => 'https://example.link.com/path',\n    ],\n    'miniprogram' => [\n        'title' => '消息标题',\n        'pic_media_id' => 'MEDIA_ID',\n        'appid' => 'wx8bd80126147df384',\n        'page' => '/path/index',\n    ],\n];\n\n$app->external_contact_message->submit($msg);\n```\n\nLANGUAGE: php\nCODE:\n```\n$msgId = 'msgGCAAAXtWyujaWJHDDGi0mACas1w';\n\n$app->external_contact_message->get($msgId);\n```\n\nLANGUAGE: php\nCODE:\n```\n$welcomeCode = 'WELCOMECODE';\n\n$msg = [\n    'text' => [\n        'content' => '文本消息内容',\n    ],\n    'image' => [\n        'media_id' => 'MEDIA_ID',\n    ],\n    'link' => [\n        'title' => '消息标题',\n        'picurl' => 'https://example.pic.com/path',\n        'desc' => '消息描述',\n        'url' => 'https://example.link.com/path',\n    ],\n    'miniprogram' => [\n        'title' => '消息标题',\n        'pic_media_id' => 'MEDIA_ID',\n        'appid' => 'wx8bd80126147df384',\n        'page' => '/path/index',\n    ],\n];\n\n$app->external_contact_message->sendWelcome($welcomeCode, $msg);\n```\n\n----------------------------------------\n\nTITLE: Handling WeChat OAuth Callback in PHP\nDESCRIPTION: This code snippet shows how to handle the WeChat OAuth callback. It retrieves the authorized user information, stores it in the session, and redirects the user to the target URL.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/oauth.md#2025-04-22_snippet_5\n\nLANGUAGE: PHP\nCODE:\n```\n// http://easywechat.com/oauth_callback\n<?php\n\nuse EasyWeChat\\Factory;\n\n$config = [\n  // ...\n];\n\n$app = Factory::officialAccount($config);\n$oauth = $app->oauth;\n\n// 获取 OAuth 授权结果用户信息\n$user = $oauth->user();\n\n$_SESSION['wechat_user'] = $user->toArray();\n\n$targetUrl = empty($_SESSION['target_url']) ? '/' : $_SESSION['target_url'];\n\nheader('location:'. $targetUrl); // 跳转到 user/profile\n```\n\n----------------------------------------\n\nTITLE: Creating Standard Menu in EasyWeChat (PHP)\nDESCRIPTION: Demonstrates how to create a standard menu structure with buttons and sub-buttons using the EasyWeChat SDK. The menu includes click and view type buttons with various actions.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/menu.md#2025-04-22_snippet_2\n\nLANGUAGE: PHP\nCODE:\n```\n$buttons = [\n    [\n        \"type\" => \"click\",\n        \"name\" => \"今日歌曲\",\n        \"key\"  => \"V1001_TODAY_MUSIC\"\n    ],\n    [\n        \"name\"       => \"菜单\",\n        \"sub_button\" => [\n            [\n                \"type\" => \"view\",\n                \"name\" => \"搜索\",\n                \"url\"  => \"http://www.soso.com/\"\n            ],\n            [\n                \"type\" => \"view\",\n                \"name\" => \"视频\",\n                \"url\"  => \"http://v.qq.com/\"\n            ],\n            [\n                \"type\" => \"click\",\n                \"name\" => \"赞一下我们\",\n                \"key\" => \"V1001_GOOD\"\n            ],\n        ],\n    ],\n];\n$app->menu->create($buttons);\n```\n\n----------------------------------------\n\nTITLE: Downloading WeChat Payment Statements with EasyWeChat in PHP\nDESCRIPTION: This code snippet demonstrates how to retrieve WeChat payment statements using the EasyWeChat library. It shows two examples: one for retrieving all statement types and another for successful transactions only. The returned StreamResponse object can be saved as a CSV file.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/bill.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$bill = $app->bill->get('20140603'); // type: ALL\n// or\n$bill = $app->bill->get('20140603', 'SUCCESS'); // type: SUCCESS\n\n// 调用正确，`$bill` 为 csv 格式的内容，保存为文件：\n$bill->saveAs('your/path/to', 'file-20140603.csv');\n```\n\n----------------------------------------\n\nTITLE: Initializing EasyWeChat Mini Program in PHP\nDESCRIPTION: This code snippet demonstrates how to configure and initialize an EasyWeChat mini program instance. It sets up the app ID, secret, response type, and logging options. The resulting $app variable is used throughout the mini program documentation.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/mini-program/index.md#2025-04-22_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\nuse EasyWeChat\\Factory;\n\n$config = [\n    'app_id' => 'wx3cf0f39249eb0exx',\n    'secret' => 'f1c242f4f28f735d4687abb469072axx',\n\n    // 下面为可选项\n    // 指定 API 调用返回结果的类型：array(default)/collection/object/raw/自定义类名\n    'response_type' => 'array',\n\n    'log' => [\n        'level' => 'debug',\n        'file' => __DIR__.'/wechat.log',\n    ],\n];\n\n$app = Factory::miniProgram($config);\n```\n\n----------------------------------------\n\nTITLE: Handling and Responding to WeChat User Messages\nDESCRIPTION: This code snippet shows how to register a message handler using the push() method. It demonstrates setting up a simple response to any incoming message from WeChat users.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/tutorial.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n// ...\n\n$app->server->push(function ($message) {\n    return \"您好！欢迎使用 EasyWeChat!\";\n});\n\n$response = $app->server->serve();\n\n// 将响应输出\n$response->send(); // Laravel 里请使用：return $response;\n```\n\n----------------------------------------\n\nTITLE: Creating Unified Payment Order with WeChat Pay\nDESCRIPTION: Demonstrates how to create a unified order for various payment scenarios including JSAPI, H5, and QR code payments. The method handles both regular payment orders and contract signing during payment.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/order.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$result = $app->order->unify([\n    'body' => '腾讯充值中心-QQ会员充值',\n    'out_trade_no' => '20150806125346',\n    'total_fee' => 88,\n    'spbill_create_ip' => '123.12.12.123', // 可选，如不传该参数，SDK 将会自动获取相应 IP 地址\n    'notify_url' => 'https://pay.weixin.qq.com/wxpay/pay.action', // 支付结果通知网址，如果不设置则会使用配置里的默认地址\n    'trade_type' => 'JSAPI', // 请对应换成你的支付方式对应的值类型\n    'openid' => 'oUpF8uMuAJO_M2pxb1Q9zNjWeS6o',\n]);\n```\n\n----------------------------------------\n\nTITLE: Creating Standard Menu in EasyWeChat (PHP)\nDESCRIPTION: This snippet illustrates how to create a standard menu using the EasyWeChat library. It defines an array of buttons with various types and submenu items, then uses the 'create' method to set the menu.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/menu.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$buttons = [\n    [\n        \"type\" => \"click\",\n        \"name\" => \"今日歌曲\",\n        \"key\"  => \"V1001_TODAY_MUSIC\"\n    ],\n    [\n        \"name\"       => \"菜单\",\n        \"sub_button\" => [\n            [\n                \"type\" => \"view\",\n                \"name\" => \"搜索\",\n                \"url\"  => \"http://www.soso.com/\"\n            ],\n            [\n                \"type\" => \"view\",\n                \"name\" => \"视频\",\n                \"url\"  => \"http://v.qq.com/\"\n            ],\n            [\n                \"type\" => \"click\",\n                \"name\" => \"赞一下我们\",\n                \"key\" => \"V1001_GOOD\"\n            ],\n        ],\n    ],\n];\n$app->menu->create($buttons);\n```\n\n----------------------------------------\n\nTITLE: Sending Multiple News Messages via Customer Service with EasyWeChat PHP SDK\nDESCRIPTION: This snippet shows how to send multiple news messages to a user through the customer service interface. You create multiple News objects and pass them as an array to the staff message method.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/messages.md#2025-04-22_snippet_13\n\nLANGUAGE: php\nCODE:\n```\n$news1 = new News(...);\n$news2 = new News(...);\n$news3 = new News(...);\n$news4 = new News(...);\n\n$app->staff->message([$news1, $news2, $news3, $news4])->to($openId)->send();\n```\n\n----------------------------------------\n\nTITLE: Customer Service Account Management Operations in PHP\nDESCRIPTION: Basic CRUD operations for managing customer service accounts including listing all agents, creating, updating, and deleting accounts.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/customer_service.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$app->customer_service->list();\n```\n\nLANGUAGE: php\nCODE:\n```\n$app->customer_service->online();\n```\n\nLANGUAGE: php\nCODE:\n```\n$app->customer_service->create('foo@test', '客服1');\n```\n\nLANGUAGE: php\nCODE:\n```\n$app->customer_service->update('foo@test', '客服1');\n```\n\nLANGUAGE: php\nCODE:\n```\n$app->customer_service->delete('foo@test');\n```\n\n----------------------------------------\n\nTITLE: Setting Up Basic Message Handler in PHP with EasyWeChat\nDESCRIPTION: Demonstrates how to set up a basic message handler using EasyWeChat's server push method. The handler receives a message and returns a response.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/server.md#2025-04-22_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n$app->server->push(function ($message) {\n    // $message['FromUserName'] // User's openid\n    // $message['MsgType'] // Message type: event, text....\n    return \"您好！欢迎使用 EasyWeChat\";\n});\n\n// In Laravel:\n$response = $app->server->serve();\n\n// $response is an instance of `Symfony\\Component\\HttpFoundation\\Response`\n// For frameworks that need to output the response directly, or in native PHP environments\n$response->send();\n\n// In Laravel, just return it:\nreturn $response;\n```\n\n----------------------------------------\n\nTITLE: Implementing Mini Program Payment in JavaScript\nDESCRIPTION: Uses the wx.requestPayment method to initiate payment in a WeChat Mini Program. Handles the payment success in the callback function.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/jssdk.md#2025-04-22_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nwx.requestPayment({\n    timeStamp: <?= $config['timeStamp'] ?>, //注意 timeStamp 的格式\n    nonceStr: '<?= $config['nonceStr'] ?>',\n    package: '<?= $config['package'] ?>',\n    signType: '<?= $config['signType'] ?>',\n    paySign: '<?= $config['paySign'] ?>', // 支付签名\n    success: function (res) {\n        // 支付成功后的回调函数\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Initiating Refund by Out Trade Number in PHP using EasyWeChat\nDESCRIPTION: Shows how to process a refund using merchant's order number. The method requires out trade number, refund number, total fee, refund fee, and optional configuration parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/refund.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n// 参数分别为：商户订单号、商户退款单号、订单金额、退款金额、其他参数\n$app->refund->byOutTradeNumber(string $number, string $refundNumber, int $totalFee, int $refundFee, array $config = []);\n\n// Example:\n$result = $app->refund->byOutTradeNumber('out-trade-no-xxx', 'refund-no-xxx', 20000, 1000, [\n    // 可在此处传入其他参数，详细参数见微信支付文档\n    'refund_desc' => '退运费',\n]);\n```\n\n----------------------------------------\n\nTITLE: Setting Up Message Handler for WeChat Replies in PHP\nDESCRIPTION: This snippet shows how to register a message handler using the setMessageHandler method with a PHP closure function. The handler returns a simple welcome message in response to any incoming message from users to the WeChat public account.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/tutorial.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n// ...\n\n$server->setMessageHandler(function ($message) {\n    return \"您好！欢迎关注我!\";\n});\n\n$response = $app->server->serve();\n\n// 将响应输出\n$response->send(); // Laravel 里请使用：return $response;\n```\n\n----------------------------------------\n\nTITLE: Accessing EasyWeChat Services through Application Instance in PHP\nDESCRIPTION: This code demonstrates how to access various EasyWeChat services through the main Application instance. It shows how to get server, user, oauth and other service objects from the application container.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/tutorial.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$app = new Application($options);\n\n// services...\n$server = $app->server;\n$user   = $app->user;\n$oauth  = $app->oauth;\n\n// ... js/menu/staff/material/qrcode/notice/stats...\n```\n\n----------------------------------------\n\nTITLE: Configuring EasyWeChat for Micro Merchant API in PHP\nDESCRIPTION: This snippet demonstrates how to set up the configuration for EasyWeChat to interact with WeChat's Micro Merchant API. It includes essential parameters such as merchant ID, API keys, certificate paths, and optional settings.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/micro-merchant/index.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Factory;\n\n$config = [\n    // 必要配置\n    'mch_id'           => 'your-mch-id', // 服务商的商户号\n    'key'              => 'key-for-signature', // API 密钥\n    'apiv3_key'        => 'APIv3-key-for-signature', // APIv3 密钥\n    // API 证书路径(登录商户平台下载 API 证书)\n    'cert_path'        => 'path/to/your/cert.pem', // XXX: 绝对路径！！！！\n    'key_path'         => 'path/to/your/key', // XXX: 绝对路径！！！！\n    // 以下两项配置在获取证书接口时可为空，在调用入驻接口前请先调用获取证书接口获取以下两项配置,如果获取过证书可以直接在这里配置，也可参照本文档获取平台证书章节中示例\n    // 'serial_no'     => '获取证书接口获取到的平台证书序列号',\n    // 'certificate'   => '获取证书接口获取到的证书内容'\n    \n    // 以下为可选项\n    // 指定 API 调用返回结果的类型：array(default)/collection/object/raw/自定义类名\n    'response_type' => 'array'\n    'appid'            => 'wx931386123456789e' // 服务商的公众账号 ID\n];\n\n$app = Factory::microMerchant($config);\n```\n\n----------------------------------------\n\nTITLE: Replying with Messages in Server Handler with EasyWeChat PHP SDK\nDESCRIPTION: This snippet shows how to use the server message handler to reply to incoming messages. The handler can return simple text which gets converted to a Text message, or explicit message instances like Image.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/messages.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n// ... 前面部分省略\n$app = new Application($options);\n$server = $app->server;\n\n$server->setMessageHandler(function ($message) {\n    return \"您好！欢迎关注我!\";\n});\n\n$server->serve()->send();\n```\n\n----------------------------------------\n\nTITLE: JSSDK Implementation Example\nDESCRIPTION: Complete example showing how to include WeChat JSSDK script and configure it with PHP-generated settings for share functionality.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/basic-services/jssdk.md#2025-04-22_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n<script src=\"https://res.wx.qq.com/open/js/jweixin-1.4.0.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n<script type=\"text/javascript\" charset=\"utf-8\">\n    wx.config(<?php echo $app->jssdk->buildConfig(array('updateAppMessageShareData', 'updateTimelineShareData'), true) ?>);\n</script>\n```\n\n----------------------------------------\n\nTITLE: Retrieving Waiting Sessions in PHP\nDESCRIPTION: Gets a list of users who are waiting to be connected with a customer service agent but have not yet been assigned to a session.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/customer_service.md#2025-04-22_snippet_17\n\nLANGUAGE: php\nCODE:\n```\n$app->customer_service_session->waiting();\n```\n\n----------------------------------------\n\nTITLE: Basic EasyWeChat Configuration Setup\nDESCRIPTION: Demonstrates the minimal required configuration for initializing an EasyWeChat official account application with app credentials and response type settings.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/configuration.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Factory;\n\n$config = [\n    'app_id' => 'wx3cf0f39249eb0exx',\n    'secret' => 'f1c242f4f28f735d4687abb469072axx',\n\n    // 指定 API 调用返回结果的类型：array(default)/collection/object/raw/自定义类名\n    'response_type' => 'array',\n\n    //...\n];\n\n$app = Factory::officialAccount($config);\n```\n\n----------------------------------------\n\nTITLE: Querying WeChat Payment Orders\nDESCRIPTION: Methods to query order status using either merchant's order number or WeChat transaction ID. Useful for verifying payment status and handling exceptional cases.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/order.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$app->order->queryByOutTradeNumber(\"商户系统内部的订单号（out_trade_no）\");\n\n$app->order->queryByTransactionId(\"微信订单号（transaction_id）\");\n```\n\n----------------------------------------\n\nTITLE: Adding Profit Sharing Receivers in PHP with EasyWeChat\nDESCRIPTION: Demonstrates how to add profit sharing receivers using EasyWeChat. It shows examples for adding both personal (using OpenID) and merchant receivers. The receiver type, account, name, and relationship type are specified.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/profit-sharing.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$receiver = [\n\t\"type\"          => \"PERSONAL_OPENID\",\n\t\"account\"       => \"…………\",//PERSONAL_OPENID：个人openid\n\t\"name\"          => \"张三\",//接收方真实姓名\n\t\"relation_type\" => \"PARTNER\"\n];\n$payment->profit_sharing->addReceiver($receiver);\n$receiver = [\n\t\"type\"          => \"MERCHANT_ID\",\n\t\"account\"       => \"132456798\",//MERCHANT_ID：商户ID\n\t\"name\"          => \"商户全称\",//商户全称\n\t\"relation_type\" => \"PARTNER\"\n];\n$payment->profit_sharing->addReceiver($receiver);\n```\n\n----------------------------------------\n\nTITLE: Making API Requests in PHP with EasyWeChat SDK\nDESCRIPTION: Demonstrates how to make POST requests to update user remarks using the EasyWeChat SDK. It shows two methods: using the 'post' method with a JSON body, and using the 'postJson' convenience method.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/6.x/client.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$api = $app->getClient();\n\n$response = $api->post('/cgi-bin/user/info/updateremark', [\n    'json' => [\n            \"openid\" => \"oDF3iY9ffA-hqb2vVvbr7qxf6A0Q\",\n            \"remark\" => \"pangzi\"\n        ]\n    ]);\n\n// or\n// 如果参数中存在query之类的关键字建议使用上面的方法，不建议以下调用方式\n$response = $api->postJson('/cgi-bin/user/info/updateremark', [\n    \"openid\" => \"oDF3iY9ffA-hqb2vVvbr7qxf6A0Q\",\n    \"remark\" => \"pangzi\"\n]);\n```\n\n----------------------------------------\n\nTITLE: Configuring Redis Cache for EasyWeChat in PHP\nDESCRIPTION: This snippet demonstrates how to set up Redis caching for the EasyWeChat SDK. It includes creating a Redis connection and configuring the application with the cache driver.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/cache.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse Doctrine\\Common\\Cache\\RedisCache;\n\n$cacheDriver = new RedisCache();\n\n// 创建 redis 实例\n$redis = new Redis();\n$redis->connect('redis_host', 6379);\n\n$cacheDriver->setRedis($redis);\n\n$options = [\n    'debug'  => false,\n    'app_id' => $wechatInfo['app_id'],\n    'secret' => $wechatInfo['app_secret'],\n    'token'  => $wechatInfo['token'],\n    'aes_key' => $wechatInfo['aes_key'], // 可选\n    'cache'   => $cacheDriver,\n];\n\n$wechatApp = new Application($options);\n```\n\n----------------------------------------\n\nTITLE: Configuring and Initializing EasyWeChat for WeChat Official Account\nDESCRIPTION: This snippet demonstrates how to set up the configuration and initialize the EasyWeChat SDK for a WeChat Official Account. It includes setting the app_id, secret, token, and response type.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/tutorial.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Factory;\n\n$config = [\n    'app_id' => 'wx3cf0f39249eb0xxx',\n    'secret' => 'f1c242f4f28f735d4687abb469072xxx',\n    'token' => 'TestToken',\n    'response_type' => 'array',\n    //...\n];\n\n$app = Factory::officialAccount($config);\n\n$response = $app->server->serve();\n\n// 将响应输出\n$response->send();exit; // Laravel 里请使用：return $response;\n```\n\n----------------------------------------\n\nTITLE: Initializing WeChat Open Platform Client in PHP\nDESCRIPTION: Creates an instance of the WeChat Open Platform client with required configuration parameters including app ID, secret, token and AES key.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/open-platform/index.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nuse EasyWeChat\\Factory;\n\n$config = [\n  'app_id'   => '开放平台第三方平台 APPID',\n  'secret'   => '开放平台第三方平台 Secret',\n  'token'    => '开放平台第三方平台 Token',\n  'aes_key'  => '开放平台第三方平台 AES Key'\n];\n\n$openPlatform = Factory::openPlatform($config);\n```\n\n----------------------------------------\n\nTITLE: Initializing EasyWeChat Official Account in PHP\nDESCRIPTION: This code snippet demonstrates how to configure and create an instance of EasyWeChat's Official Account module. It sets up the necessary configuration parameters including app_id, secret, and response_type, then uses the Factory class to initialize the official account instance.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/index.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Factory;\n\n$config = [\n    'app_id' => 'wx3cf0f39249eb0exx',\n    'secret' => 'f1c242f4f28f735d4687abb469072axx',\n\n    // 指定 API 调用返回结果的类型：array(default)/collection/object/raw/自定义类名\n    'response_type' => 'array',\n    \n    //...\n];\n\n$app = Factory::officialAccount($config);\n```\n\n----------------------------------------\n\nTITLE: Adding a Nearby POI in WeChat Mini Program using PHP\nDESCRIPTION: This snippet demonstrates how to add a new nearby Point of Interest (POI) using the EasyWeChat SDK. It includes parameters for customer service info, images, services, store details, and qualifications.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/mini-program/nearby_poi.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$params = [\n    'kf_info' => '{\"open_kf\":true,\"kf_headimg\":\"http://mmbiz.qpic.cn/mmbiz_jpg/kKMgNtnEfQzDKpLXYhgo3W3Gndl34gITqmP914zSwhajIEJzUPpx40P7R8fRe1QmicneQMhFzpZNhSLjrvU1pIA/0?wx_fmt=jpeg\",\"kf_name\":\"Harden\"}',\n    'pic_list' => '{\"list\":[\"http://mmbiz.qpic.cn/mmbiz_jpg/kKMgNtnEfQzDKpLXYhgo3W3Gndl34gITqmP914zSwhajIEJzUPpx40P7R8fRe1QmicneQMhFzpZNhSLjrvU1pIA/0?wx_fmt=jpeg\",\"http://mmbiz.qpic.cn/mmbiz_jpg/kKMgNtnEfQzDKpLXYhgo3W3Gndl34gITRneE5FS9uYruXGMmrtmhsBySwddEWUGOibG8Ze2NT5E3Dyt79I0htNg/0?wx_fmt=jpeg\"]}',\n    'service_infos' => '{\"service_infos\":[{\"id\":2,\"type\":1,\"name\":\"快递\",\"appid\":\"wx1373169e494e0c39\",\"path\":\"index\"},{\"id\":0,\"type\":2,\"name\":\"自定义\",\"appid\":\"wx1373169e494e0c39\",\"path\":\"index\"}]}',\n    'store_name' => '羊村小马烧烤',\n    'contract_phone' => '111111111',\n    'hour' => '00:00-11:11',\n    'company_name' => '深圳市腾讯计算机系统有限公司',\n    'credential' => '156718193518281',\n    'address' => '新疆维吾尔自治区克拉玛依市克拉玛依区碧水路15-1-8号(碧水云天广场)',\n    'qualification_list' => '3LaLzqiTrQcD20DlX_o-OV1-nlYMu7sdVAL7SV2PrxVyjZFZZmB3O6LPGaYXlZWq',\n];\n\n$app->nearby_poi->add($params);\n```\n\n----------------------------------------\n\nTITLE: Forwarding Messages to Customer Service using EasyWeChat in PHP\nDESCRIPTION: This snippet demonstrates how to forward received messages to customer service using the EasyWeChat library. It uses the Transfer message type to handle the forwarding.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/message-transfer.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Kernel\\Messages\\Transfer;\n\n// 转发收到的消息给客服\n$app->server->push(function($message) {\n  return new Transfer();\n});\n\n$response = $app->server->serve();\n```\n\n----------------------------------------\n\nTITLE: Replying with Multiple News Messages in EasyWeChat PHP SDK\nDESCRIPTION: This snippet shows how to reply with multiple news messages by returning an array of News objects from the server message handler. Each news item can have different content and formatting.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/messages.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Message\\News;\n\n// ...\n$server->setMessageHandler(function ($message) {\n    $news1 = new News(...);\n    $news2 = new News(...);\n    $news3 = new News(...);\n    $news4 = new News(...);\n\n    return [$news1, $news2, $news3, $news4];\n});\n// ...\n```\n\n----------------------------------------\n\nTITLE: Initializing EasyWeChat Mini Program Instance in PHP\nDESCRIPTION: This code snippet demonstrates how to configure and create an instance of an EasyWeChat mini program. It includes setting up the app_id, secret, response type, and logging options.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/index.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Factory;\n\n$config = [\n    'app_id' => 'wx3cf0f39249eb0exx',\n    'secret' => 'f1c242f4f28f735d4687abb469072axx',\n\n    // 下面为可选项\n    // 指定 API 调用返回结果的类型：array(default)/collection/object/raw/自定义类名\n    'response_type' => 'array',\n\n    'log' => [\n        'level' => 'debug',\n        'file' => __DIR__.'/wechat.log',\n    ],\n];\n\n$app = Factory::miniProgram($config);\n```\n\n----------------------------------------\n\nTITLE: Example Output of JSSDK Configuration in HTML\nDESCRIPTION: The rendered HTML output showing how the PHP-generated JSSDK configuration appears in the final page. It demonstrates a configuration with debug mode enabled and APIs for share functionality.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/basic-services/jssdk.md#2025-04-22_snippet_3\n\nLANGUAGE: html\nCODE:\n```\n<script src=\"https://res.wx.qq.com/open/js/jweixin-1.4.0.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n<script type=\"text/javascript\" charset=\"utf-8\">\nwx.config({\n    debug: true, // 请在上线前删除它\n    appId: 'wx3cf0f39249eb0e60',\n    timestamp: 1430009304,\n    nonceStr: 'qey94m021ik',\n    signature: '4F76593A4245644FAE4E1BC940F6422A0C3EC03E',\n    jsApiList: ['updateAppMessageShareData', 'updateTimelineShareData']\n});\n</script>\n```\n\n----------------------------------------\n\nTITLE: Retrieving Authorized User Information in WeChat Work OAuth with PHP\nDESCRIPTION: Retrieves authorized user information using the code from the callback URL. Returns user ID (WeChat Work English name) and raw data from the WeChat Work API.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/6.x/work/oauth.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$code = \"回调URL中的code\";\n$user = $app->getOAuth()->detailed()->userFromCode($code);\n\n// 获取用户信息\n$user->getId(); // 对应企业微信英文名（userid）\n$user->getRaw(); // 获取企业微信接口返回的原始信息\n```\n\n----------------------------------------\n\nTITLE: Type-Specific Message Handlers in PHP\nDESCRIPTION: Shows how to register message handlers for specific message types using Message constants.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/server.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Kernel\\Messages\\Message;\n\n$app->server->push(ImageMessageHandler::class, Message::IMAGE); // 图片消息\n$app->server->push(TextMessageHandler::class, Message::TEXT); // 文本消息\n\n// 同时处理多种类型的处理器\n$app->server->push(MediaMessageHandler::class, Message::VOICE|Message::VIDEO|Message::SHORT_VIDEO); // 当消息为 三种中任意一种都可触发\n```\n\n----------------------------------------\n\nTITLE: Initializing EasyWeChat for Enterprise WeChat in PHP\nDESCRIPTION: This snippet demonstrates how to create a configuration array and initialize EasyWeChat for Enterprise WeChat. It includes settings for corp_id, agent_id, secret, response type, and logging options.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/index.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$config = [\n    'corp_id' => 'xxxxxxxxxxxxxxxxx',\n\n    'agent_id' => 100020, // 如果有 agend_id 则填写\n    'secret'   => 'xxxxxxxxxx',\n\n    // 指定 API 调用返回结果的类型：array(default)/collection/object/raw/自定义类名\n    'response_type' => 'array',\n\n    'log' => [\n        'level' => 'debug',\n        'file' => __DIR__.'/wechat.log',\n    ],\n];\n\n$app = Factory::work($config);\n```\n\n----------------------------------------\n\nTITLE: Transfer to User Balance with EasyWeChat PHP\nDESCRIPTION: Demonstrates how to transfer money to a user's WeChat balance. Requires merchant order number, user's openid, name verification settings, and payment amount in cents.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/transfer.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$app->transfer->toBalance([\n    'partner_trade_no' => '1233455', // 商户订单号，需保持唯一性(只能是字母或者数字，不能包含有符号)\n    'openid' => 'oxTWIuGaIt6gTKsQRLau2M0yL16E',\n    'check_name' => 'FORCE_CHECK', // NO_CHECK：不校验真实姓名, FORCE_CHECK：强校验真实姓名\n    're_user_name' => '王小帅', // 如果 check_name 设置为FORCE_CHECK，则必填用户真实姓名\n    'amount' => 10000, // 企业付款金额，单位为分\n    'desc' => '理赔', // 企业付款操作说明信息。必填\n]);\n```\n\n----------------------------------------\n\nTITLE: Sending Messages from a Specific Customer Service Account in PHP\nDESCRIPTION: Sends a message to a user from a specific customer service account, allowing for personalized customer service interactions.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/customer_service.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\n$app->customer_service->message($message)\n                      >  ->from('account@test')\n                      >  ->to($openId)\n                      >  ->send();\n```\n\n----------------------------------------\n\nTITLE: Named Parallel Requests in EasyWeChat\nDESCRIPTION: Shows how to assign names to parallel API requests in EasyWeChat, allowing for more readable code when accessing specific responses. Each request is assigned a key in an associative array.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/6.x/client.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\n$responses = [\n    'users' => $api->get('/cgi-bin/user/get'),\n    'remark' => $api->post('/cgi-bin/user/info/updateremark', ['body' => ...]),\n    'message' => $api->post('/cgi-bin/user/message/custom/send', ['body' => ...]),\n];\n\n// 访问任意一个 $response 时将执行并发请求：\n$responses['users']->toArray();\n```\n\n----------------------------------------\n\nTITLE: Creating a POI Store with EasyWeChat in PHP\nDESCRIPTION: This snippet demonstrates how to create a new store (POI) using the EasyWeChat library. It includes a sample array of store information and shows how to call the create method.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/poi.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$app->poi->create($baseInfo);\n```\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\n$info = array(\n         \"sid\"             => \"33788392\",\n         \"business_name\"   => \"麦当劳\",\n         \"branch_name\"     => \"艺苑路店\",\n         \"province\"        => \"广东省\",\n         \"city\"            => \"广州市\",\n         \"district\"        => \"海珠区\",\n         \"address\"         => \"艺苑路 11 号\",\n         \"telephone\"       => \"020-12345678\",\n         \"categories\"      => array(\"美食,快餐小吃\"),\n         \"offset_type\"     => 1,\n         \"longitude\"       => 115.32375,\n         \"latitude\"        => 25.097486,\n         \"photo_list\"      => array(\n                               array(\"photo_url\" => \"https://easywechat.com\"),\n                               array(\"photo_url\" => \"https://easywechat.com\"),\n                             ),\n         \"recommend\"       => \"麦辣鸡腿堡套餐,麦乐鸡,全家桶\",\n         \"special\"         => \"免费 wifi,外卖服务\",\n         \"introduction\"    => \"麦当劳是全球大型跨国连锁餐厅,1940 年创立于美国,在世界上大约拥有 3  万间分店。主要售卖汉堡包,以及薯条、炸鸡、汽水、冰品、沙拉、水果等 快餐食品\",\n         \"open_time\"       => \"8:00-20:00\",\n         \"avg_price\"       => 35,\n    );\n\n$result = $app->poi->create($info); // true or exception\n```\n\n----------------------------------------\n\nTITLE: Initiating Micropayment with EasyWeChat SDK in PHP\nDESCRIPTION: This code snippet demonstrates how to initiate a micropayment using the EasyWeChat SDK. It includes parameters such as the order description, order number, total fee, IP address, and the auth_code obtained from scanning the user's Wechat payment code.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/micropay.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$result = $app->pay([\n    'body' => 'image形象店-深圳腾大- QQ公仔',\n    'out_trade_no' => '20150806125346',\n    'total_fee' => 88,\n    'spbill_create_ip' => '123.12.12.123', // 可选，如不传该参数，SDK 将会自动获取相应 IP 地址\n    'auth_code' => '120061098828009406', // 扫码支付付款码，设备读取用户微信中的条码或者二维码信息\n]);\n```\n\n----------------------------------------\n\nTITLE: Managing External Contact Information in PHP\nDESCRIPTION: Shows how to batch get customer details, update customer remarks, and handle unassigned customers.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/external-contact.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n// Batch get customer details\n$userId = 'zhangsai';\n$cursor = '';\n$limit = 100;\n$app->external_contact->batchGetByUser(string $userId, string $cursor, int $limit);\n\n// Update customer remarks\n$data  = [\n    \"userid\"=>'员工id',\n    \"external_userid\"=>'客户id',\n    \"remark\"=> '新备注',\n    \"description\"=>'新描述',\n    \"remark_company\"=>'新公司',\n    \"remark_mobiles\"=>[ '电话1','电话2'],\n    \"remark_pic_mediaid\"=> \"MEDIAID\"\n];\n$app->external_contact->remark($data);\n\n// Get unassigned customer list\n$pageId = 0;\n$pageSize = 1000;\n$app->external_contact->getUnassigned($pageId, $pageSize);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Authorized User Information\nDESCRIPTION: Shows how to retrieve and access authorized user information after successful OAuth callback, including user ID and original response data.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/oauth.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$user = $app->oauth->detailed()->user();\n\n// 获取用户信息\n$user->getId(); // 对应企业微信英文名（userid）\n$user->getOriginal(); // 获取企业微信接口返回的原始信息\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom Logger in EasyWeChat PHP\nDESCRIPTION: Configuration example for using a custom log driver in EasyWeChat. This snippet demonstrates how to set up the 'mylog' custom driver in the configuration array.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/configuration.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n'log' => [\n    'default' => 'dev', // 默认使用的 channel，生产环境可以改为下面的 prod\n    'channels' => [\n        // 测试环境\n        'dev' => [\n            'driver' => 'mylog',\n            'path' => '/tmp/easywechat.log',\n            'level' => 'debug',\n            'days' => 5,\n        ],\n\n        //...\n    ],\n],\n```\n\n----------------------------------------\n\nTITLE: Message Type Switch Handler in PHP\nDESCRIPTION: Shows how to handle different types of WeChat messages using a switch statement in the message handler.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/server.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$app->server->push(function ($message) {\n    switch ($message['MsgType']) {\n        case 'event':\n            return '收到事件消息';\n            break;\n        case 'text':\n            return '收到文字消息';\n            break;\n        case 'image':\n            return '收到图片消息';\n            break;\n        case 'voice':\n            return '收到语音消息';\n            break;\n        case 'video':\n            return '收到视频消息';\n            break;\n        case 'location':\n            return '收到坐标消息';\n            break;\n        case 'link':\n            return '收到链接消息';\n            break;\n        case 'file':\n            return '收到文件消息';\n        // ... 其它消息\n        default:\n            return '收到其它消息';\n            break;\n    }\n\n    // ...\n});\n```\n\n----------------------------------------\n\nTITLE: Initializing EasyWeChat Work Application for OAuth in PHP\nDESCRIPTION: Creates an instance of the EasyWeChat Work Application with necessary configuration for OAuth. Requires corp_id and secret for the application.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/6.x/work/oauth.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Work\\Application;\n\n$config = [\n    'corp_id' => 'xxxxxxxxxxxxxxxxx',\n    'secret'   => 'xxxxxxxxxx', // 应用的 secret\n];\n\n$app = new Application($config);\n```\n\n----------------------------------------\n\nTITLE: Configuring EasyWeChat Payment JSSDK in PHP\nDESCRIPTION: Sets up the configuration for EasyWeChat Payment and initializes the JSSDK instance. Includes essential parameters like app_id, mch_id, key, cert_path, and key_path.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/jssdk.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Factory;\n\n$config = [\n    // 前面的appid什么的也得保留哦\n    'app_id'             => 'xxxx',\n    'mch_id'             => 'your-mch-id',\n    'key'                => 'key-for-signature',\n    'cert_path'          => 'path/to/your/cert.pem', // XXX: 绝对路径！！！！\n    'key_path'           => 'path/to/your/key',      // XXX: 绝对路径！！！！\n    'notify_url'         => '默认的订单回调地址',     // 你也可以在下单时单独设置来想覆盖它\n    // 'device_info'     => '013467007045764',\n    // 'sub_app_id'      => '',\n    // 'sub_merchant_id' => '',\n    // ...\n];\n\n$payment = Factory::payment($config);\n\n$jssdk = $payment->jssdk;\n```\n\n----------------------------------------\n\nTITLE: Sending Generic Messages with EasyWeChat Broadcasting\nDESCRIPTION: Core method for sending all types of mass messages to WeChat users. The $to parameter can be an integer (tag ID), array of openids (at least 2 users), or null for all users.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/broadcasting.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$app->broadcasting->sendMessage(Message $message, array | int $to = null);\n```\n\n----------------------------------------\n\nTITLE: Initializing and Retrieving Access Token in EasyWeChat\nDESCRIPTION: Demonstrates how to initialize an EasyWeChat application and retrieve access token instances. Shows methods for getting token strings with optional force refresh from WeChat server.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/access_token.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Foundation\\Application;\n\n$options = [\n    //...\n];\n\n$app = new Application($options);\n\n// 获取 access token 实例\n$accessToken = $app->access_token; // EasyWeChat\\Core\\AccessToken 实例\n$token = $accessToken->getToken(); // token 字符串\n$token = $accessToken->getToken(true); // 强制重新从微信服务器获取 token.\n```\n\n----------------------------------------\n\nTITLE: Creating Temporary QR Code with EasyWeChat in PHP\nDESCRIPTION: Generates a temporary QR code with a specified expiration time. The code returns an array containing the ticket, expiration time, and URL for the generated QR code.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/basic-services/qrcode.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$result = $app->qrcode->temporary('foo', 6 * 24 * 3600);\n\n// Array\n// (\n//     [ticket] => gQFD8TwAAAAAAAAAAS5odHRwOi8vd2VpeGluLnFxLmNvbS9xLzAyTmFjVTRWU3ViUE8xR1N4ajFwMWsAAgS2uItZAwQA6QcA\n//     [expire_seconds] => 518400\n//     [url] => http://weixin.qq.com/q/02NacU4VSubPO1GSxj1p1k\n// )\n```\n\n----------------------------------------\n\nTITLE: Message Type Switch Handler in PHP with EasyWeChat\nDESCRIPTION: Shows how to handle different types of WeChat messages using a switch statement to process various message types including text, image, voice, video, location, and link messages.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/server.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$server->setMessageHandler(function ($message) {\n    switch ($message->MsgType) {\n        case 'event':\n            return '收到事件消息';\n            break;\n        case 'text':\n            return '收到文字消息';\n            break;\n        case 'image':\n            return '收到图片消息';\n            break;\n        case 'voice':\n            return '收到语音消息';\n            break;\n        case 'video':\n            return '收到视频消息';\n            break;\n        case 'location':\n            return '收到坐标消息';\n            break;\n        case 'link':\n            return '收到链接消息';\n            break;\n        // ... 其它消息\n        default:\n            return '收到其它消息';\n            break;\n    }\n\n    // ...\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing JSSDK in HTML with PHP Configuration\nDESCRIPTION: Example of how to integrate the WeChat JSSDK into a web page. This includes loading the JSSDK script and configuring it with the PHP-generated configuration for share functionality.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/basic-services/jssdk.md#2025-04-22_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<script src=\"https://res.wx.qq.com/open/js/jweixin-1.4.0.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n<script type=\"text/javascript\" charset=\"utf-8\">\n    wx.config(<?php echo $app->jssdk->buildConfig(array('updateAppMessageShareData', 'updateTimelineShareData'), true) ?>);\n</script>\n```\n\n----------------------------------------\n\nTITLE: Uploading Article Material in WeChat using EasyWeChat PHP SDK\nDESCRIPTION: This snippet shows how to upload both single and multiple articles as materials to WeChat servers using the Article class from EasyWeChat.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/material.md#2025-04-22_snippet_4\n\nLANGUAGE: PHP\nCODE:\n```\nuse EasyWeChat\\Kernel\\Messages\\Article;\n\n// 上传单篇图文\n$article = new Article([\n    'title' => 'xxx',\n    'thumb_media_id' => $mediaId,\n    //...\n  ]);\n$app->material->uploadArticle($article);\n\n// 或者多篇图文\n$app->material->uploadArticle([$article, $article2, ...]);\n```\n\n----------------------------------------\n\nTITLE: Implementing OAuth Redirect Flow\nDESCRIPTION: Demonstrates how to set up the OAuth redirect flow, including setting the callback URL and generating the authorization redirect URL.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/oauth.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n// $callbackUrl 为授权回调地址\n$callbackUrl = 'https://xxx.xxx'; // 需设置可信域名\n\n// 返回一个 redirect 实例\n$redirect = $app->oauth->redirect($callbackUrl);\n\n// 获取企业微信跳转目标地址\n$targetUrl = $redirect->getTargetUrl();\n\n// 直接跳转到企业微信授权\n$redirect->send();\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of EasyWeChat with Official Account API\nDESCRIPTION: Example PHP code demonstrating how to initialize and use EasyWeChat's Official Account application. Shows configuration setup, application instantiation, and handling server requests.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/README.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nuse EasyWeChat\\OfficialAccount\\Application;\n\n$config = [\n    'app_id' => 'wx3cf0f39249eb0exxx',\n    'secret' => 'f1c242f4f28f735d4687abb469072xxx',\n    'aes_key' => 'abcdefghijklmnopqrstuvwxyz0123456789ABCDEFG',\n    'token' => 'easywechat',\n];\n\n$app = new Application($config);\n\n$server = $app->getServer();\n\n$server->with(fn() => \"您好！EasyWeChat！\");\n\n$response = $server->serve();\n```\n\n----------------------------------------\n\nTITLE: Creating Different EasyWeChat Application Instances\nDESCRIPTION: This snippet demonstrates how to create different types of EasyWeChat application instances using the Factory class. It covers Official Account, Mini Program, Open Platform, Work WeChat, and WeChat Pay.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/tutorial.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n// 公众号\n$app = Factory::officialAccount($config);\n\n// 小程序\n$app = Factory::miniProgram($config);\n\n// 开放平台\n$app = Factory::openPlatform($config);\n\n// 企业微信\n$app = Factory::work($config);\n\n// 企业微信开放平台\n$app = Factory::openWork($config);\n\n// 微信支付\n$app = Factory::payment($config);\n```\n\n----------------------------------------\n\nTITLE: Creating Application Instance for WeChat Work OAuth in PHP\nDESCRIPTION: This snippet demonstrates how to create an Application instance for WeChat Work OAuth using EasyWeChat library. It requires the corporation ID and secret as configuration parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/6.x/open-work/oauth.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Work\\Application;\n\n$config = [\n    'corp_id' => 'xxxxxxxxxxxxxxxxx',\n    'secret'   => 'xxxxxxxxxx', // 应用的 secret\n];\n\n$app = new Application($config);\n```\n\n----------------------------------------\n\nTITLE: Initializing EasyWeChat Work Application for Contacts Management in PHP\nDESCRIPTION: Sets up the configuration for the EasyWeChat Work application with the necessary credentials for accessing the contacts API. This initialization is required before performing any contact management operations.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/contacts.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$config = [\n    'corp_id' => 'xxxxxxxxxxxxxxxxx',\n    'secret'   => 'xxxxxxxxxx', // 通讯录的 secret\n    //...\n];\n\n$contacts = Factory::work($config);\n```\n\n----------------------------------------\n\nTITLE: Sending Text Broadcast Messages in PHP\nDESCRIPTION: Methods for sending text broadcast messages to all users, specific users by openid, or users with specific tags.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/broadcasting.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$app->broadcasting->sendText(\"大家好！欢迎使用 EasyWeChat。\");\n\n// 指定目标用户\n// 至少两个用户的 openid，必须是数组。\n$app->broadcasting->sendText(\"大家好！欢迎使用 EasyWeChat。\", [$openid1, $openid2]);\n\n// 指定标签组用户\n$app->broadcasting->sendText(\"大家好！欢迎使用 EasyWeChat。\", $tagId); // $tagId 必须是整型数字\n```\n\n----------------------------------------\n\nTITLE: Decrypting Encrypted Data in WeChat Mini Programs using PHP\nDESCRIPTION: This code snippet demonstrates how to decrypt encrypted data from WeChat Mini Programs using the encryptor component. It's useful for retrieving sensitive information like phone numbers that are encrypted by WeChat for security purposes.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/decrypt.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$decryptedData = $app->encryptor->decryptData($session, $iv, $encryptedData);\n```\n\n----------------------------------------\n\nTITLE: Registering Type-Specific Message Handlers in PHP with EasyWeChat\nDESCRIPTION: Shows how to register handlers for specific message types using EasyWeChat's message constants.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/server.md#2025-04-22_snippet_3\n\nLANGUAGE: PHP\nCODE:\n```\nuse EasyWeChat\\Kernel\\Messages\\Message;\n\n$app->server->push(ImageMessageHandler::class, Message::IMAGE); // Image messages\n$app->server->push(TextMessageHandler::class, Message::TEXT); // Text messages\n\n// Handler for multiple message types\n$app->server->push(MediaMessageHandler::class, Message::VOICE|Message::VIDEO|Message::SHORT_VIDEO); // Triggered for any of these three types\n```\n\n----------------------------------------\n\nTITLE: Initializing EasyWeChat Open Platform in PHP\nDESCRIPTION: This snippet demonstrates how to initialize the EasyWeChat Open Platform component. It requires setting up configuration options including app_id, secret, token, and aes_key.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/open_platform.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nuse EasyWeChat\\Foundation\\Application;\n\n$options = [\n    // ...\n    'open_platform' => [\n        'app_id'   => 'component-app-id',\n        'secret'   => 'component-app-secret',\n        'token'    => 'component-token',\n        'aes_key'  => 'component-aes-key'\n        ],\n    // ...\n    ];\n\n$app = new Application($options);\n$openPlatform = $app->open_platform;\n```\n\n----------------------------------------\n\nTITLE: Listing WeChat Users in PHP\nDESCRIPTION: Retrieves a list of WeChat users with optional pagination using nextOpenId\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/user.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$app->user->list($nextOpenId = null);  // $nextOpenId 可选\n```\n\n----------------------------------------\n\nTITLE: Generating WeChat Mini Program Short Links in PHP\nDESCRIPTION: Method to generate a short link for a WeChat Mini Program page. Takes parameters for the page URL, page title, and an optional flag for creating permanent links.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/mini-program/short_link.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$app->short_link->getShortLink(string $pageUrl, string $pageTitle, bool $isPermanent = false);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Permanent Material in WeChat using EasyWeChat PHP SDK\nDESCRIPTION: This code demonstrates how to retrieve a permanent material from WeChat servers using its media ID. It handles different types of materials, including articles, videos, and other media types.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/material.md#2025-04-22_snippet_7\n\nLANGUAGE: PHP\nCODE:\n```\n$resource = $app->material->get($mediaId);\n\n$stream = $app->material->get($mediaId);\n\nif ($stream instanceof \\EasyWeChat\\Kernel\\Http\\StreamResponse) {\n    // 以内容 md5 为文件名\n    $stream->save('保存目录');\n\n    // 自定义文件名，不需要带后缀\n    $stream->saveAs('保存目录', '文件名');\n}\n```\n\n----------------------------------------\n\nTITLE: Message Type Filtering in EasyWeChat PHP Handler\nDESCRIPTION: Shows how to filter different types of messages (text, image, voice, etc.) within the message handler using a switch statement.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/server.md#2025-04-22_snippet_1\n\nLANGUAGE: PHP\nCODE:\n```\n$app->server->push(function ($message) {\n    switch ($message['MsgType']) {\n        case 'event':\n            return '收到事件消息';\n            break;\n        case 'text':\n            return '收到文字消息';\n            break;\n        case 'image':\n            return '收到图片消息';\n            break;\n        case 'voice':\n            return '收到语音消息';\n            break;\n        case 'video':\n            return '收到视频消息';\n            break;\n        case 'location':\n            return '收到坐标消息';\n            break;\n        case 'link':\n            return '收到链接消息';\n            break;\n        case 'file':\n            return '收到文件消息';\n        // ... other message types\n        default:\n            return '收到其它消息';\n            break;\n    }\n\n    // ...\n});\n```\n\n----------------------------------------\n\nTITLE: Uploading Image Material in WeChat using EasyWeChat PHP SDK\nDESCRIPTION: This snippet demonstrates how to upload an image as material to WeChat servers using the EasyWeChat SDK. It returns a media ID and URL for the uploaded image.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/material.md#2025-04-22_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n$result = $app->material->uploadImage(\"/path/to/your/image.jpg\");\n// {\n//    \"media_id\":MEDIA_ID,\n//    \"url\":URL\n// }\n```\n\n----------------------------------------\n\nTITLE: Setting Custom Request for Distributed Architecture in PHP\nDESCRIPTION: This code shows how to set a custom request object for distributed architectures without session persistence, such as in Laravel with Redis-based session storage.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/oauth.md#2025-04-22_snippet_1\n\nLANGUAGE: PHP\nCODE:\n```\n$response = $app->oauth->scopes(['snsapi_userinfo'])\n                          ->setRequest($request)\n                          ->redirect();\n\n//回调后获取user时也要设置$request对象\n//$user = $app->oauth->setRequest($request)->user();\n```\n\n----------------------------------------\n\nTITLE: Generating OAuth Redirect URL in PHP\nDESCRIPTION: This code snippet demonstrates how to generate an OAuth redirect URL for authorization. It requires a callback URL to be set as a trusted domain.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/6.x/open-work/oauth.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n// $callbackUrl 为授权回调地址\n$callbackUrl = 'https://xxx.xxx'; // 需设置可信域名\n\n// 返回授权跳转链接\n$redirectUrl = $app->getOAuth()->redirect($callbackUrl);\n```\n\n----------------------------------------\n\nTITLE: Generating WeixinJSBridge Payment Configuration in PHP\nDESCRIPTION: Generates the configuration for WeixinJSBridge payment method. Returns a JSON string or an array based on the second parameter.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/jssdk.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$json = $jssdk->bridgeConfig($prepayId); // 返回 json 字符串，如果想返回数组，传第二个参数 false\n```\n\n----------------------------------------\n\nTITLE: Sending Messages to Users Through Customer Service in PHP\nDESCRIPTION: Sends a message to a specific user identified by their OpenID through the customer service system.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/customer_service.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n$app->customer_service->message($message)->to($openId)->send();\n```\n\n----------------------------------------\n\nTITLE: Initializing EasyWeChat Payment Configuration in PHP\nDESCRIPTION: Sets up the configuration for EasyWeChat payment, including app ID, secret, merchant ID, API key, certificate paths, and notify URL. This configuration is used to create a payment instance.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/profit-sharing.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Factory;\n$config = [\n\t'app_id'     => '***',\n\t\"secret\"     => \"***\",\n\t'mch_id'     => '***',\n\t'key'        => '***',\n\t'cert_path'  => 'cert.pem',\n\t'key_path'   => 'key.pem',\n\t'notify_url' => 'http://***.com/notify.php',\n];\n$payment = Factory::payment($config);\n```\n\n----------------------------------------\n\nTITLE: Getting Single User Info in PHP\nDESCRIPTION: Retrieves information for a single WeChat user based on their openId\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/user.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$user = $app->user->get($openId);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Single Commission Product Information with EasyWeChat in PHP\nDESCRIPTION: This snippet shows how to fetch information for a single commission product using its product ID (pid). It's useful for verifying information and spot-checking imported data.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/goods.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$pid = 'pid001';\n\n$app->goods->get($pid);\n```\n\n----------------------------------------\n\nTITLE: Uploading Image in PHP using EasyWeChat\nDESCRIPTION: Uploads an image file to WeChat's temporary media storage. The image must be under 2MB and in JPG format. Sensitive content may cause upload failure.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/basic-services/media.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$app->media->uploadImage($path);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Temporary Media Content in PHP using EasyWeChat\nDESCRIPTION: Fetches the content of a temporary media file (e.g., image, voice) as a StreamResponse. Allows saving the content to a local file with optional custom naming.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/basic-services/media.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$stream = $app->media->get($mediaId);\n\nif ($stream instanceof \\EasyWeChat\\Kernel\\Http\\StreamResponse) {\n  // 以内容 md5 为文件名存到本地\n  $stream->save('保存目录');\n\n  // 自定义文件名，不需要带后缀\n  $stream->saveAs('保存目录', '文件名');\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing EasyWeChat Payment Configuration in PHP\nDESCRIPTION: Sets up the configuration for WeChat Pay, including app ID, secret, merchant ID, API key, certificate paths, and notify URL. This configuration is used to create a payment instance.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/profit-sharing.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Factory;\n$config = [\n\t'app_id'     => '***',\n\t\"secret\"     => \"***\",\n\t'mch_id'     => '***',\n\t'key'        => '***',\n\t'cert_path'  => 'cert.pem',\n\t'key_path'   => 'key.pem',\n\t'notify_url' => 'http://***.com/notify.php',\n];\n$payment = Factory::payment($config);\n```\n\n----------------------------------------\n\nTITLE: Retrieving User Information in EasyWeChat PHP\nDESCRIPTION: This snippet shows how to get information for a single user or multiple users using their OpenIDs. It demonstrates both individual and batch retrieval of user data.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/user.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$userService->get($openId);\n$userService->batchGet($openIds);\n```\n\nLANGUAGE: php\nCODE:\n```\n$user = $userService->get($openId);\n\necho $user->nickname; // or $user['nickname']\n```\n\nLANGUAGE: php\nCODE:\n```\n$users = $userService->batchGet([$openId1, $openId2, ...]);\n```\n\n----------------------------------------\n\nTITLE: Implementing Parallel Requests in EasyWeChat\nDESCRIPTION: Demonstrates how to make parallel API requests in EasyWeChat using an array of requests that execute concurrently when accessed. This approach allows for efficient handling of multiple API calls.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/6.x/client.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n$responses = [\n    $api->get('/cgi-bin/user/get'),\n    $api->post('/cgi-bin/user/info/updateremark', ['body' => ...]),\n    $api->post('/cgi-bin/user/message/custom/send', ['body' => ...]),\n];\n\n// 访问任意一个 $response 时将执行并发请求：\nforeach ($responses as $response) {\n    $content = $response->getContent();\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Message Handler Registration in PHP\nDESCRIPTION: Demonstrates how to register a basic message handler using EasyWeChat's server push method and handle the response in different frameworks.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/server.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$app->server->push(function ($message) {\n    // $message['FromUserName'] // 用户的 openid\n    // $message['MsgType'] // 消息类型：event, text....\n    return \"您好！欢迎使用 EasyWeChat\";\n});\n\n// 在 laravel 中：\n$response = $app->server->serve();\n\n// $response 为 `Symfony\\Component\\HttpFoundation\\Response` 实例\n// 对于需要直接输出响应的框架，或者原生 PHP 环境下\n$response->send();\n\n// 而 laravel 中直接返回即可：\n\nreturn $response;\n```\n\n----------------------------------------\n\nTITLE: Implementing JSSDK Config in JavaScript\nDESCRIPTION: This snippet shows how to implement the JSSDK configuration in a web page, including loading the JSSDK script and calling wx.config with PHP-generated configuration.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/jssdk.md#2025-04-22_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n<script src=\"https://res.wx.qq.com/open/js/jweixin-1.4.0.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n<script type=\"text/javascript\" charset=\"utf-8\">\n    wx.config(<?php echo $app->jssdk->buildConfig(array('updateAppMessageShareData', 'updateTimelineShareData'), true) ?>);\n</script>\n```\n\n----------------------------------------\n\nTITLE: Initiating Refund by Transaction ID in PHP using EasyWeChat\nDESCRIPTION: Demonstrates how to process a refund using WeChat transaction ID. The method requires transaction ID, refund number, total fee, refund fee, and optional configuration parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/refund.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n// 参数分别为：微信订单号、商户退款单号、订单金额、退款金额、其他参数\n$app->refund->byTransactionId(string $transactionId, string $refundNumber, int $totalFee, int $refundFee, array $config = []);\n\n// Example:\n$result = $app->refund->byTransactionId('transaction-id-xxx', 'refund-no-xxx', 10000, 10000, [\n    // 可在此处传入其他参数，详细参数见微信支付文档\n    'refund_desc' => '商品已售完',\n]);\n```\n\n----------------------------------------\n\nTITLE: 获取微信小程序用户手机号 (phonenumber.getPhoneNumber) - PHP\nDESCRIPTION: 在Laravel路由文件中定义一个API端点，使用EasyWeChat库调用微信小程序的phonenumber.getPhoneNumber接口获取用户手机号。此代码接收前端传来的code参数，并发送POST请求到指定接口获取手机号信息。\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/6.x/mini-app/examples.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n// routes/api.php\nuse EasyWeChat\\MiniApp\\Application;\nRoute::post('getPhoneNumber', function () {\n    // $app 实例化步骤这里省略 \n    $data = [\n      'code' => (string) request()->get('code'),\n    ];\n\n    return $app->getClient()->postJson('wxa/business/getuserphonenumber', $data);\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Live Streaming Room List with EasyWechat in PHP\nDESCRIPTION: This code snippet demonstrates how to get a list of live streaming rooms using the EasyWechat library. It utilizes the live module of the EasyWechat application instance to call the getRooms() method.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/mini-program/live.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$app->live->getRooms();\n```\n\n----------------------------------------\n\nTITLE: Getting Multiple Users Info in PHP\nDESCRIPTION: Retrieves information for multiple WeChat users by providing an array of openIds\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/user.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$users = $app->user->select([$openId1, $openId2, ...]);\n```\n\n----------------------------------------\n\nTITLE: Creating Store Location with WeChat POI API - PHP\nDESCRIPTION: Creates a new store location using POI API. Requires base store information including ID, name, address, contact details, coordinates and other metadata. Images must be pre-uploaded to WeChat servers.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/poi.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$app->poi->create($baseInfo);\n```\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\n$info = array(\n         \"sid\"             => \"33788392\",\n         \"business_name\"   => \"麦当劳\",\n         \"branch_name\"     => \"艺苑路店\",\n         \"province\"        => \"广东省\",\n         \"city\"            => \"广州市\",\n         \"district\"        => \"海珠区\",\n         \"address\"         => \"艺苑路 11 号\",\n         \"telephone\"       => \"020-12345678\",\n         \"categories\"      => array(\"美食,快餐小吃\"),\n         \"offset_type\"     => 1,\n         \"longitude\"       => 115.32375,\n         \"latitude\"        => 25.097486,\n         \"photo_list\"      => array(\n                               array(\"photo_url\" => \"https://easywechat.com\"),\n                               array(\"photo_url\" => \"https://easywechat.com\"),\n                             ),\n         \"recommend\"       => \"麦辣鸡腿堡套餐,麦乐鸡,全家桶\",\n         \"special\"         => \"免费 wifi,外卖服务\",\n         \"introduction\"    => \"麦当劳是全球大型跨国连锁餐厅,1940 年创立于美国,在世界上大约拥有 3  万间分店。主要售卖汉堡包,以及薯条、炸鸡、汽水、冰品、沙拉、水果等 快餐食品\",\n         \"open_time\"       => \"8:00-20:00\",\n         \"avg_price\"       => 35,\n    );\n\n$result = $app->poi->create($info); // true or exception\n```\n\n----------------------------------------\n\nTITLE: Uploading Video in PHP using EasyWeChat\nDESCRIPTION: Uploads a video file to WeChat's temporary media storage. The video must be under 10MB and in MP4 format. Requires a title and description.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/basic-services/media.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$app->media->uploadVideo($path, $title, $description);\n```\n\n----------------------------------------\n\nTITLE: Uploading Video in PHP using EasyWeChat\nDESCRIPTION: Uploads a video file to WeChat's media server. The file must be less than 10MB and in MP4 format. This method also allows setting a title and description for the video.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/media.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$app->media->uploadVideo($path, $title, $description);\n```\n\n----------------------------------------\n\nTITLE: Basic Message Transfer Implementation in EasyWeChat\nDESCRIPTION: Demonstrates how to forward incoming messages to the customer service system using the Transfer class. This basic implementation forwards messages to any available customer service representative.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/message-transfer.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Kernel\\Messages\\Transfer;\n\n// 转发收到的消息给客服\n$app->server->push(function($message) {\n  return new Transfer();\n});\n\n$response = $app->server->serve();\n```\n\n----------------------------------------\n\nTITLE: Creating Permanent QR Code with EasyWeChat in PHP\nDESCRIPTION: This code creates a permanent QR code using the EasyWeChat library. It accepts either an integer or a string as an identifier. The result includes a ticket and URL for the QR code.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/basic-services/qrcode.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$result = $app->qrcode->forever(56);// 或者 $app->qrcode->forever(\"foo\");\n// Array\n// (\n//     [ticket] => gQFD8TwAAAAAAAAAAS5odHRwOi8vd2VpeGluLnFxLmNvbS9xLzAyTmFjVTRWU3ViUE8xR1N4ajFwMWsAAgS2uItZAwQA6QcA\n//     [url] => http://weixin.qq.com/q/02NacU4VSubPO1GSxj1p1k\n// )\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Retry Strategy in EasyWeChat\nDESCRIPTION: Demonstrates how to create a custom retry strategy by extending the Symfony GenericRetryStrategy class. This allows for complex retry logic beyond what's possible with configuration parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/6.x/client.md#2025-04-22_snippet_14\n\nLANGUAGE: php\nCODE:\n```\nclass MyRetryStrategy extends \\Symfony\\Component\\HttpClient\\Retry\\GenericRetryStrategy\n{\n    public function shouldRetry(AsyncContext $context, ?string $responseContent, ?TransportExceptionInterface $exception): ?bool\n    {\n        // 你的自定义逻辑\n        // if (...) {\n        //     return false;\n        // }\n\n        return parent::shouldRetry($context, $responseContent, $exception);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving User Phone Number in EasyWeChat (PHP)\nDESCRIPTION: This snippet demonstrates how to use the EasyWeChat SDK to retrieve a user's phone number. It requires a code parameter, which is likely obtained from a previous step in the WeChat Mini Program flow.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/mini-program/phone_number.md#2025-04-22_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n$app->phone_number->getUserPhoneNumber(string $code);\n```\n\n----------------------------------------\n\nTITLE: Generating WeixinJSBridge Payment Configuration in PHP\nDESCRIPTION: Creates the configuration for WeixinJSBridge payment method. Returns a JSON string or an array based on the second parameter.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/jssdk.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$json = $jssdk->bridgeConfig($prepayId); // 返回 json 字符串，如果想返回数组，传第二个参数 false\n```\n\n----------------------------------------\n\nTITLE: Implementing WeixinJSBridge Payment in JavaScript\nDESCRIPTION: Uses the generated configuration to invoke WeixinJSBridge for payment. Handles the payment response in the callback function.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/jssdk.md#2025-04-22_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nWeixinJSBridge.invoke(\n       'getBrandWCPayRequest', <?= $json ?>,\n       function(res){\n           if(res.err_msg == \"get_brand_wcpay_request:ok\" ) {\n                // 使用以上方式判断前端返回,微信团队郑重提示：\n                // res.err_msg将在用户支付成功后返回\n                // ok，但并不保证它绝对可靠。\n           }\n       }\n   );\n```\n\n----------------------------------------\n\nTITLE: Adding Tags to Multiple Users in EasyWeChat (PHP)\nDESCRIPTION: This snippet demonstrates how to add a tag to multiple users simultaneously using the EasyWeChat library. It takes an array of OpenIDs and the tag ID as parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/user-tag.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$openIds = [$openId1, $openId2, ...];\n$app->user_tag->tagUsers($openIds, $tagId);\n```\n\n----------------------------------------\n\nTITLE: Generating APP Payment Configuration in PHP\nDESCRIPTION: Produces the configuration for APP payment. Returns an array that can be sent to the client via API.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/jssdk.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n$config = $jssdk->appConfig($prepayId);\n```\n\n----------------------------------------\n\nTITLE: Custom Event Handlers for Open Platform Authorization Events in PHP\nDESCRIPTION: This code shows how to set up custom event handlers for authorized, update_authorized, and unauthorized events in EasyWeChat's Open Platform module. It uses the push method to register callbacks for each event type.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/open-platform/server.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\OpenPlatform\\Server\\Guard;\n\n$server = $openPlatform->server;\n\n// 处理授权成功事件\n$server->push(function ($message) {\n    // ...\n}, Guard::EVENT_AUTHORIZED);\n\n// 处理授权更新事件\n$server->push(function ($message) {\n    // ...\n}, Guard::EVENT_UPDATE_AUTHORIZED);\n\n// 处理授权取消事件\n$server->push(function ($message) {\n    // ...\n}, Guard::EVENT_UNAUTHORIZED);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Existing Menu in EasyWeChat (PHP)\nDESCRIPTION: This snippet shows how to retrieve the list of existing menus using the EasyWeChat library. It uses the 'list' method of the menu object.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/menu.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$list = $app->menu->list();\n```\n\n----------------------------------------\n\nTITLE: Uploading Image in PHP using EasyWeChat\nDESCRIPTION: Uploads an image file to WeChat's media server. The file must be less than 2MB and in JPG or PNG format. Note that WeChat has a sensitive content detection system that may cause uploads to fail if the image contains inappropriate content.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/media.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$app->media->uploadImage($path); // $path 为本地文件路径\n```\n\n----------------------------------------\n\nTITLE: Uploading Attachment Resources in PHP using EasyWeChat\nDESCRIPTION: Uploads attachment resources to WeChat's server. Supports different types of media with specific size and format restrictions. The third parameter is used to specify the media type.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/media.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$app->media->uploadAttachmentResources($path, 'image', 1);\n```\n\n----------------------------------------\n\nTITLE: Creating Contract Payment Order\nDESCRIPTION: Creates a payment order with contract signing functionality. Includes additional parameters for contract template ID, agreement number, and contract display information.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/order.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$isContract = true;\n\n$result = $app->order->unify([\n    'body' => '腾讯充值中心-QQ会员充值',\n    'out_trade_no' => '20150806125346',\n    'total_fee' => 88,\n    'spbill_create_ip' => '123.12.12.123',\n    'notify_url' => 'https://pay.weixin.qq.com/wxpay/pay.action',\n    'trade_type' => 'JSAPI',\n    'openid' => 'oUpF8uMuAJO_M2pxb1Q9zNjWeS6o',\n\n    'plan_id' => 123,\n    'contract_code' => 100001256,\n    'contract_display_account' => '腾讯充值中心',\n    'contract_notify_url' => 'http://easywechat.com/contract_notify'\n], $isContract);\n```\n\n----------------------------------------\n\nTITLE: Managing External Contact Messages in PHP\nDESCRIPTION: Shows how to add message templates, retrieve sending results, and send welcome messages to new customers.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/external-contact.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n// Add enterprise group message template\n$msg = [\n    'external_userid' => [\n        'woAJ2GCAAAXtWyujaWJHDDGi0mACas1w',\n        'wmqfasd1e1927831291723123109r712',\n    ],\n    'sender' => 'zhangsan',\n    'text' => [\n        'content' => '文本消息内容',\n    ],\n    'image' => [\n        'media_id' => 'MEDIA_ID',\n    ],\n    'link' => [\n        'title' => '消息标题',\n        'picurl' => 'https://example.pic.com/path',\n        'desc' => '消息描述',\n        'url' => 'https://example.link.com/path',\n    ],\n    'miniprogram' => [\n        'title' => '消息标题',\n        'pic_media_id' => 'MEDIA_ID',\n        'appid' => 'wx8bd80126147df384',\n        'page' => '/path/index',\n    ],\n];\n$app->external_contact_message->submit($msg);\n\n// Get group message sending result\n$msgId = 'msgGCAAAXtWyujaWJHDDGi0mACas1w';\n$app->external_contact_message->get($msgId);\n\n// Send welcome message to new customer\n$welcomeCode = 'WELCOMECODE';\n$msg = [\n    'text' => [\n        'content' => '文本消息内容',\n    ],\n    'image' => [\n        'media_id' => 'MEDIA_ID',\n    ],\n    'link' => [\n        'title' => '消息标题',\n        'picurl' => 'https://example.pic.com/path',\n        'desc' => '消息描述',\n        'url' => 'https://example.link.com/path',\n    ],\n    'miniprogram' => [\n        'title' => '消息标题',\n        'pic_media_id' => 'MEDIA_ID',\n        'appid' => 'wx8bd80126147df384',\n        'page' => '/path/index',\n    ],\n];\n$app->external_contact_message->sendWelcome($welcomeCode, $msg);\n```\n\n----------------------------------------\n\nTITLE: Sending Customer Service Messages with EasyWeChat PHP SDK\nDESCRIPTION: This snippet demonstrates how to send a text message to a user through the customer service interface. You create a message instance and use the staff service to send it to a specific user by their OpenID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/messages.md#2025-04-22_snippet_12\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Message\\Text;\n\n$message = new Text(['content' => 'Hello world!']);\n\n$result = $app->staff->message($message)->to($openId)->send();\n//...\n```\n\n----------------------------------------\n\nTITLE: Handling API Responses in PHP with EasyWeChat SDK\nDESCRIPTION: Covers various methods for handling API responses using the EasyWeChat SDK. It includes examples of accessing response content, headers, status codes, and converting responses to different formats.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/6.x/client.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n// Error handling\n$response = $api->get('/cgi-bin/user/get', $options)->throw(false);\n\nif ($response->isFailed()) {\n    // 出错了，处理异常\n}\n\n// Array-like access\n$response['foo']; // \"bar\"\nisset($response['foo']); // true\n\n// Get status code\n$response->getStatusCode();\n\n// Check if successful/failed\n$response->isSuccessful();  // false\n$response->isFailed();      // true\n\n// Get headers\n$response->getHeaders();\n$response->getHeader('content-type');\n$response->getHeaderLine('content-type');\n\n// Get content\n$response->getContent();\n$response->toArray();\n$response->toJson();\n$response->toStream();\n\n// Convert to PSR-7 Response\n$psrResponse = $response->toPsrResponse();\n\n// Save to file\n$path = $response->saveAs('/path/to/file.jpg');\n\n// Convert to Data URL\n$dataUrl = $response->toDataUrl();\n\n// Get other context info\n$httpInfo = $response->getInfo();\n$startTime = $response->getInfo('start_time');\n$httpLogs = $response->getInfo('debug');\n```\n\n----------------------------------------\n\nTITLE: Retrieving Authorized User Information in WeChat Work OAuth PHP\nDESCRIPTION: Demonstrates how to obtain user information from the authorization code in the callback URL. Provides methods to get the user's ID and raw data returned by the WeChat Work API.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/oauth.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$code = \"回调URL中的code\";\n$user = $app->oauth->detailed()->userFromCode($code);\n\n// 获取用户信息\n$user->getId(); // 对应企业微信英文名（userid）\n$user->getRaw(); // 获取企业微信接口返回的原始信息\n```\n\n----------------------------------------\n\nTITLE: Generating JSSDK Payment Configuration in PHP\nDESCRIPTION: Creates the configuration for JSSDK payment method. Returns an array with necessary parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/jssdk.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$config = $jssdk->sdkConfig($prepayId); // 返回数组\n```\n\n----------------------------------------\n\nTITLE: Multiple Message Handlers Registration in PHP\nDESCRIPTION: Example of registering multiple message handlers for different processing needs like logging and replying.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/server.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$app->server->push(MessageLogHandler::class);\n$app->server->push(MessageReplyHandler::class);\n$app->server->push(OtherHandler::class);\n$app->server->push(...);\n```\n\n----------------------------------------\n\nTITLE: Removing Tags from Multiple Users in EasyWeChat (PHP)\nDESCRIPTION: This snippet shows how to remove a tag from multiple users simultaneously using the EasyWeChat library. It takes an array of OpenIDs and the tag ID as parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/user-tag.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n$openIds = [$openId1, $openId2, ...];\n$app->user_tag->untagUsers($openIds, $tagId);\n```\n\n----------------------------------------\n\nTITLE: Implementing JSSDK and AgentConfig in WeChat Work\nDESCRIPTION: This comprehensive JavaScript example shows how to implement both wx.config and wx.agentConfig for WeChat Work, including error handling and success callbacks.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/jssdk.md#2025-04-22_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\n<script src=\"https://res.wx.qq.com/open/js/jweixin-1.4.0.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n<script src=\"https://open.work.weixin.qq.com/wwopen/js/jwxwork-1.0.0.js\"></script>\n<script type=\"text/javascript\" charset=\"utf-8\">\nwx.config({\n    debug: true, // 请在上线前删除它\n    appId: 'wx3cf0f39249eb0e60',\n    timestamp: 1430009304,\n    nonceStr: 'qey94m021ik',\n    signature: '4F76593A4245644FAE4E1BC940F6422A0C3EC03E',\n    jsApiList: ['updateAppMessageShareData', 'updateTimelineShareData']\n});\nwx.ready(function(){\n    wx.agentConfig({ //调用agentConfig\n        corpid: '', \n        agentid: '', \n        timestamp: '', \n        nonceStr: '', \n        signature: '',\n        jsApiList: ['selectExternalContact'],\n        success: function(res) {\n            // 回调\n        },\n        fail: function(res) {\n            if(res.errMsg.indexOf('function not exist') > -1){\n                alert('版本过低请升级')\n            }\n        }\n    });\n});\nwx.error(function(res){\n    console.log('失败');  \n});\n</script>\n```\n\n----------------------------------------\n\nTITLE: Initializing EasyWeChat User Service in PHP\nDESCRIPTION: This snippet demonstrates how to create an instance of the EasyWeChat Application and obtain the user service. It requires the EasyWeChat library and a configuration array.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/user.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nuse EasyWeChat\\Foundation\\Application;\n\n// ...\n\n$app = new Application($options);\n\n$userService = $app->user;\n```\n\n----------------------------------------\n\nTITLE: Downloading WeChat Payment Bills with EasyWeChat in PHP\nDESCRIPTION: This code snippet shows how to download WeChat payment bills using the EasyWeChat library. It demonstrates retrieving bills for a specific date with different bill types (ALL or SUCCESS) and saving the downloaded bill as a CSV file. The function returns a StreamResponse object on success.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/bill.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$bill = $app->bill->get('20140603'); // type: ALL\n// or\n$bill = $app->bill->get('20140603', 'SUCCESS'); // type: SUCCESS\n\n// 调用正确，`$bill` 为 csv 格式的内容，保存为文件：\n$bill->saveAs('your/path/to', 'file-20140603.csv');\n```\n\n----------------------------------------\n\nTITLE: Configuring Redis Cache for Access Token\nDESCRIPTION: Demonstrates how to set up Redis caching for access tokens using doctrine/cache implementation. Shows connection setup and cache configuration for the access token instance.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/access_token.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nuse Doctrine\\Common\\Cache\\RedisCache; // RedisCache 实例了 `Doctrine\\Common\\Cache\\Cache` 接口\n\n$cache = new RedisCache();\n\n// 创建 redis 实例\n$redis = new Redis();\n$redis->connect('redis_host', 6379);\n\n$cache->setRedis($redis);\n\n$app->access_token->setCache($cache);\n```\n\n----------------------------------------\n\nTITLE: Uploading Thumbnail in EasyWeChat\nDESCRIPTION: Uploads a thumbnail image for video or music covers. Must be JPG format and under 64KB.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/basic-services/media.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$app->media->uploadThumb($path);\n```\n\n----------------------------------------\n\nTITLE: Performing Single Profit Sharing in PHP with EasyWeChat\nDESCRIPTION: Illustrates how to perform a single profit sharing operation. It requires the transaction ID, out trade number, and an array of receivers with their respective amounts and descriptions.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/profit-sharing.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$transaction_id = \"***\";\n$out_trade_no = \"***\";\n$receivers = [\n\t[\n\t\t\"type\"        => \"PERSONAL_OPENID\",\n\t\t\"account\"     => \"***\",\n\t\t\"amount\"      => 2,\n\t\t\"description\" => \"分到个人\"\n\t],\n\t[\n\t\t\"type\"        => \"MERCHANT_ID\",\n\t\t\"account\"     => \"***\",\n\t\t\"amount\"      => 1,\n\t\t\"description\" => \"分到商户\"\n\t]\n];\n$sharing = $payment->profit_sharing->share($transaction_id,$out_trade_no,$receivers);\n```\n\n----------------------------------------\n\nTITLE: Creating a New User in EasyWeChat Contacts in PHP\nDESCRIPTION: Demonstrates how to create a new user in the EasyWeChat contacts system. The function takes an array of user data including user ID, name, English name, and mobile number.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/contacts.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$data = [\n    \"userid\" => \"overtrue\",\n    \"name\" => \"超哥\",\n    \"english_name\" => \"overtrue\"\n    \"mobile\" => \"1818888888\",\n];\n$contacts->user->create($data);\n```\n\n----------------------------------------\n\nTITLE: Generating URL Link for WeChat Mini Program using EasyWeChat in PHP\nDESCRIPTION: This code snippet demonstrates how to generate a URL link for a WeChat Mini Program using the EasyWeChat PHP library. The method takes an array of parameters to customize the generated link.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/mini-program/url_link.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$app->url_link->generate(array $params);\n```\n\n----------------------------------------\n\nTITLE: Setting up Event Handler in EasyWeChat PHP\nDESCRIPTION: This code demonstrates how to set up an event handler in EasyWeChat to process user-generated events. It shows how to initialize the application, set up a message handler that can detect events, and properly return the response. The example includes distinguishing between event types using switch statements.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/events.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nuse EasyWeChat\\Foundation\\Application;\n\n// ...\n\n$app = new Application($options);\n\n$server = $app->server;\n\n$server->setMessageHandler(function($message){\n    // 注意，这里的 $message 不仅仅是用户发来的消息，也可能是事件\n    // 当 $message->MsgType 为 event 时为事件\n    if ($message->MsgType == 'event') {\n        # code...\n        switch ($message->Event) {\n            case 'subscribe':\n                # code...\n                break;\n\n            default:\n                # code...\n                break;\n        }\n    }\n});\n\n$response = $server->serve();\n\n$response->send(); // Laravel 里请使用：return $response;\n```\n\n----------------------------------------\n\nTITLE: Retrieving Single User Information in PHP\nDESCRIPTION: Gets information for a single WeChat user using their OpenID\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/user.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$user = $app->user->get($openId);\n```\n\n----------------------------------------\n\nTITLE: Querying Order by Out Trade Number\nDESCRIPTION: Method to query order details using the merchant's internal order number (out_trade_no).\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/order.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$app->order->queryByOutTradeNumber(\"商户系统内部的订单号（out_trade_no）\");\n```\n\n----------------------------------------\n\nTITLE: Retrieving External Contact Information in PHP\nDESCRIPTION: Demonstrates how to get the list of users with external contact permissions, list external contacts, and get external contact details.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/external-contact.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n// Get users with external contact permissions\n$app->external_contact->getFollowUsers();\n\n// Get external contact list for a user\n$userId = 'zhangsan';\n$app->external_contact->list($userId);\n\n// Get external contact details\n$externalUserId = 'woAJ2GCAAAXtWyujaWJHDDGi0mACH71w';\n$app->external_contact->get($externalUserId);\n```\n\n----------------------------------------\n\nTITLE: Tracking Waybill Delivery Status in EasyWeChat (PHP)\nDESCRIPTION: Retrieves the delivery tracking information for a specific waybill through the WeChat Logistics API. Requires waybill identification data as input parameter to track the package's journey.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/express.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$app->express->getWaybillTrack($data);\n```\n\n----------------------------------------\n\nTITLE: Generating APP Payment Configuration in PHP\nDESCRIPTION: Creates the configuration for APP payment method. Returns an array with necessary parameters that can be sent to the client API.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/jssdk.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n$config = $jssdk->appConfig($prepayId);\n```\n\n----------------------------------------\n\nTITLE: Uploading Image to WeChat Work API\nDESCRIPTION: Uploads an image file to WeChat Work platform. Files must be larger than 5 bytes and under 2MB, supporting JPG and PNG formats. Contains sensitive content detection.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/media.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$app->media->uploadImage($path);\n```\n\n----------------------------------------\n\nTITLE: Handling WeChat Server Push Events in PHP\nDESCRIPTION: This code shows how to handle WeChat server push events using EasyWeChat. It includes both default and custom event handling for authorized, unauthorized, updateauthorized, and component_verify_ticket events.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/open_platform.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n// 默认处理方式\n$openPlatform->server->serve();\n\n// 自定义处理\n$openPlatform->server->setMessageHandler(function($event) {\n    // 事件类型常量定义在 \\EasyWeChat\\OpenPlatform\\Guard 类里\n    switch ($event->InfoType) {\n        case 'authorized':\n            // ...\n        case 'unauthorized':\n            // ...\n        case 'updateauthorized':\n            // ...\n        case 'component_verify_ticket':\n            // ...\n    }\n});\n$openPlatform->server->serve();\n\n// 或者\n$openPlatform->server->listen(function ($event) {\n    switch ($event->InfoType) {\n        // ...\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Initializing EasyWeChat Work Application\nDESCRIPTION: Creates an instance of the WeChat Work application with configuration settings and demonstrates how to access different external contact management modules.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/external-contact.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$config = [\n    'corp_id' => 'xxxxxxxxxxxxxxxxx',\n    'secret'   => 'xxxxxxxxxx',\n    ...\n];\n\n$app = Factory::work($config);\n\n// 基础接口\n$app->external_contact;\n\n// 「联系我」\n$app->contact_way;\n\n// 消息管理\n$app->external_contact_message;\n\n// 数据统计\n$app->external_contact_statistics;\n```\n\n----------------------------------------\n\nTITLE: Sending News Broadcast Messages in PHP\nDESCRIPTION: Methods for sending news broadcast messages using media ID to different target audiences.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/broadcasting.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$app->broadcasting->sendNews($mediaId);\n$app->broadcasting->sendNews($mediaId, [$openid1, $openid2]);\n$app->broadcasting->sendNews($mediaId, $tagId);\n```\n\n----------------------------------------\n\nTITLE: Generating Mini Program Payment Configuration in PHP\nDESCRIPTION: Creates the configuration for Mini Program payment method. Returns an array with necessary parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/jssdk.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$config = $jssdk->bridgeConfig($prepayId, false); // 返回数组\n```\n\n----------------------------------------\n\nTITLE: Managing Moments Posts\nDESCRIPTION: Methods for publishing content to customer moments feed including text, images, videos, and links with visibility controls.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/external-contact.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$msg = [\n\t\"text\" => [\n\t\t\"content\" => \"文本消息内容\"\n\t],\n\t\"attachments\" => [\n\t\t[\n\t\t\t\"msgtype\" => \"image\",\n\t\t\t\"image\" => [\n\t\t\t\t\"media_id\" => \"MEDIA_ID\"\n\t\t\t]\n\t\t],\n\t\t[\n\t\t\t\"msgtype\" => \"video\",\n\t\t\t\"video\" => [\n\t\t\t\t\"media_id\" => \"MEDIA_ID\"\n\t\t\t]\n\t\t],\n\t\t[\n\t\t\t\"msgtype\" => \"link\",\n\t\t\t\"link\" => [\n\t\t\t\t\"title\" => \"消息标题\",\n\t\t\t\t\"url\" => \"https://example.link.com/path\",\n\t\t\t\t\"media_id\" => \"MEDIA_ID\"\n\t\t\t]\n\t\t]\n\t],\n \t\"visible_range\" => [\n\t\t\"sender_list\" => [\n\t\t\t\"user_list\" => [\"zhangshan\",\"lisi\"],\n\t\t\t\"department_list\" => [2,3]\n\t\t],\n\t\t\"external_contact_list\" => [\n\t\t\t\"tag_list\" => [ \"etXXXXXXXXXX\", \"etYYYYYYYYYY\"]\n\t\t]\n\t]\n];\n\n$app->external_contact_message->moments($msg);\n```\n\n----------------------------------------\n\nTITLE: Executing Multiple Profit Sharing in EasyWeChat PHP\nDESCRIPTION: Performs multiple profit sharing operations using the multiShare method. It uses the same parameters as the single profit sharing but allows for multiple distributions.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/profit-sharing.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$payment->profit_sharing->multiShare($transaction_id,$out_trade_no,$receivers);\n```\n\n----------------------------------------\n\nTITLE: Creating Web-based Contract Agreement\nDESCRIPTION: Initializes a web-based contract agreement with WeChat Pay using specified merchant and contract details. Required parameters include merchant ID, plan ID, contract code and display account name.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/contract.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$result = $app->contract->web([\n    'mch_id' => '1200009811',\n    'plan_id' => '12535',\n    'contract_code' => '100000',\n    'contract_display_account' => '微信代扣',\n    'notify_url' => 'https://pay.weixin.qq.com/wxpay/pay.action',\n]);\n```\n\n----------------------------------------\n\nTITLE: Managing Group Chats in PHP\nDESCRIPTION: Shows how to retrieve group chat lists and get detailed information about a specific group chat.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/external-contact.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n// Get group chat list\n$params = [\n    \"status_filter\" => 0,\n    \"owner_filter\" => [\n        \"userid_list\" => [\"abel\"],\n        \"partyid_list\" => [7]\n    ],\n    \"offset\" => 0,\n    \"limit\" => 100\n];\n$app->external_contact->getGroupChats(array $params);\n\n// Get group chat details\n$chatId = 'wrOgQhDgAAMYQiS5ol9G7gK9JVAAAA';\n$app->external_contact->getGroupChat(string $chatId);\n```\n\n----------------------------------------\n\nTITLE: Registering Multiple Message Handlers in PHP with EasyWeChat\nDESCRIPTION: Demonstrates how to register multiple message handlers for different purposes such as logging, replying, and custom operations.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/server.md#2025-04-22_snippet_2\n\nLANGUAGE: PHP\nCODE:\n```\n$app->server->push(MessageLogHandler::class);\n$app->server->push(MessageReplyHandler::class);\n$app->server->push(OtherHandler::class);\n$app->server->push(...);\n```\n\n----------------------------------------\n\nTITLE: Initiating Payment Code Transaction with EasyWeChat in PHP\nDESCRIPTION: This code snippet demonstrates how to initiate a payment code transaction using EasyWeChat. It includes parameters such as body, out_trade_no, total_fee, spbill_create_ip, and auth_code. The result of the transaction is returned directly without a callback notification.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/micropay.md#2025-04-22_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n$result = $app->pay([\n    'body' => 'image形象店-深圳腾大- QQ公仔',\n    'out_trade_no' => '20150806125346',\n    'total_fee' => 88,\n    'spbill_create_ip' => '123.12.12.123', // 可选，如不传该参数，SDK 将会自动获取相应 IP 地址\n    'auth_code' => '120061098828009406', // 扫码支付付款码，设备读取用户微信中的条码或者二维码信息\n]);\n```\n\n----------------------------------------\n\nTITLE: Handling Authorization Events in EasyWeChat PHP\nDESCRIPTION: This snippet demonstrates how to handle authorization and update events in EasyWeChat. It shows how to access authorization information and authorizer info from the event object.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/open_platform.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n// 自定义处理\n// 其中 $event 变量里有微信推送事件本身的信息，也有授权方所有的信息。\n$openPlatform->server->setMessageHandler(function($event) {\n    // 事件类型常量定义在 \\EasyWeChat\\OpenPlatform\\Guard 类里\n    switch ($event->InfoType) {\n        case 'authorized':\n            // 授权信息，主要是 token 和授权域\n            $info1 = $event->authorization_info;\n            // 授权方信息，就是授权方公众号的信息了\n            $info2 = $event->authorizer_info;\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Converting Long URLs to Short URLs with EasyWeChat in PHP\nDESCRIPTION: Demonstrates how to use the EasyWeChat library to convert a long URL into a shorter format. The response contains error code, error message, and the generated short URL.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/basic-services/url.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$shortUrl = $app->url->shorten('https://easywechat.com');\n//\n(\n    [errcode] => 0\n    [errmsg] => ok\n    [short_url] => https://w.url.cn/s/Aq7jWrd\n)\n```\n\n----------------------------------------\n\nTITLE: Initializing Customer Service Management in PHP with EasyWeChat\nDESCRIPTION: Sets up the EasyWeChat application and initializes the customer service management object. This is the first step for using any customer service related functionality.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/staff.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nuse EasyWeChat\\Foundation\\Application;\n// ...\n$app = new Application($options);\n\n$staff = $app->staff; // 客服管理\n```\n\n----------------------------------------\n\nTITLE: Sending Subscription Message\nDESCRIPTION: Sends a subscription message to a specific user with template data including recipient, template ID, target page, and message content.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/mini-program/subscribe_message.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$data = [\n    'template_id' => 'bDmywsp2oEHjwAadTGKkUJ-eJEiMiOf7H-dZ7wjdw80', // 所需下发的订阅模板id\n    'touser' => 'oSyZp5OBNPBRhG-7BVgWxbiNZm',     // 接收者（用户）的 openid\n    'page' => '',       // 点击模板卡片后的跳转页面，仅限本小程序内的页面。支持带参数,（示例index?foo=bar）。该字段不填则模板无跳转。\n    'data' => [         // 模板内容，格式形如 { \"key1\": { \"value\": any }, \"key2\": { \"value\": any } }\n        'date01' => [\n            'value' => '2019-12-01',\n        ],\n        'number01' => [\n            'value' => 10,\n        ],\n    ],\n];\n\n$app->subscribe_message->send($data);\n```\n\n----------------------------------------\n\nTITLE: Generating AgentConfig for WeChat Work in PHP\nDESCRIPTION: This snippet demonstrates how to generate the configuration for wx.agentConfig, which is specific to WeChat Work. It includes parameters for API list, agent ID, and various options.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/jssdk.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$app->jssdk->buildAgentConfig(\n        array $jsApiList, // 需要检测的JS接口列表\n        $agentId, //应用id\n        bool $debug = false,\n        bool $beta = false,\n        bool $json = true,\n        array $openTagList = [],\n        string $url = null //设置当前URL\n    );\n```\n\n----------------------------------------\n\nTITLE: Transfer to Bank Card Implementation\nDESCRIPTION: Example of transferring money to a bank card, including required parameters like card number, account holder name, and bank code.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/transfer.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$result = $app->transfer->toBankCard([\n    'partner_trade_no' => '1229222022',\n    'enc_bank_no' => '6214830901234564', // 银行卡号\n    'enc_true_name' => '安正超',   // 银行卡对应的用户真实姓名\n    'bank_code' => '1001', // 银行编号\n    'amount' => 100,  // 单位：分\n    'desc' => '测试',\n]);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Supported Express Companies in EasyWeChat (PHP)\nDESCRIPTION: Retrieves a list of supported express delivery companies through the WeChat Logistics API. Returns delivery IDs and names in a structured format with a count of available providers.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/express.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$app->express->listProviders();\n\n{\n  \"count\": 8,\n  \"data\": [\n    {\n      \"delivery_id\": \"BEST\",\n      \"delivery_name\": \"百世快递\"\n    },\n    ...\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Customizing EasyWeChat Logger in PHP\nDESCRIPTION: Example of extending EasyWeChat's logger with a custom log driver. This snippet shows how to create a custom 'mylog' driver using Monolog's RotatingFileHandler.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/configuration.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse Monolog\\Logger;\nuse Monolog\\Handler\\RotatingFileHandler;\n\n\n// 注册自定义日志\n$app->logger->extend('mylog', function($app, $config){\n    return new Logger($this->parseChannel($config), [\n        $this->prepareHandler(new RotatingFileHandler(\n            $config['path'], $config['days'], $this->level($config)\n        )),\n    ]);\n});\n```\n\n----------------------------------------\n\nTITLE: Adding Template to Personal Library in WeChat Mini Program\nDESCRIPTION: Combines and adds a template to the account's personal template library using template ID and keyword list. Includes optional scene description.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/mini-program/subscribe_message.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$tid = 563;     // 模板标题 id，可通过接口获取，也可登录小程序后台查看获取\n$kidList = [1, 2];      // 开发者自行组合好的模板关键词列表，可以通过 `getTemplateKeywords` 方法获取\n$sceneDesc = '提示用户图书到期';    // 服务场景描述，非必填\n\n$app->subscribe_message->addTemplate($tid, $kidList, $sceneDesc);\n```\n\n----------------------------------------\n\nTITLE: Querying Profit Sharing Results in PHP with EasyWeChat\nDESCRIPTION: Illustrates how to query the results of a profit sharing operation. It requires the transaction ID and out trade number. The result includes detailed information about the sharing status and receivers.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/profit-sharing.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$res = $payment->profit_sharing->query($transaction_id,$out_trade_no);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Customer Service Chat Records in PHP\nDESCRIPTION: Fetches chat logs between customer service and users within a specified time range. Parameters include start time, end time, message ID, and number of records to retrieve.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/customer_service.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$app->customer_service->messages($startTime, $endTime, $msgId = 1, $number = 10000);\n```\n\n----------------------------------------\n\nTITLE: Forwarding Messages to Customer Service in EasyWeChat PHP\nDESCRIPTION: This code snippet demonstrates how to forward received messages to customer service using EasyWeChat. It uses the Transfer message type to handle the forwarding process. The server's message handler returns a new Transfer object which instructs WeChat to forward the message to customer service.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/message-transfer.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n  // 转发收到的消息给客服\n  $server->setMessageHandler(function($message) {\n      return new \\EasyWeChat\\Message\\Transfer();\n  });\n\n  $result = $server->serve();\n\n  echo $result;\n```\n\n----------------------------------------\n\nTITLE: Initializing WeChat Open Platform Client in PHP\nDESCRIPTION: Creates an instance of the WeChat Open Platform client using EasyWeChat Factory. Requires app credentials including app_id, secret, token and AES key.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/open-platform/index.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nuse EasyWeChat\\Factory;\n\n$config = [\n  'app_id'   => '开放平台第三方平台 APPID',\n  'secret'   => '开放平台第三方平台 Secret',\n  'token'    => '开放平台第三方平台 Token',\n  'aes_key'  => '开放平台第三方平台 AES Key'\n];\n\n$openPlatform = Factory::openPlatform($config);\n```\n\n----------------------------------------\n\nTITLE: Redirecting for WeChat Work OAuth Authorization in PHP\nDESCRIPTION: Generates a redirect instance for WeChat Work OAuth authorization. Allows setting a callback URL and provides methods to get the target URL or perform the redirect.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/oauth.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n// $callbackUrl 为授权回调地址\n$callbackUrl = 'https://xxx.xxx'; // 需设置可信域名\n\n// 返回一个 redirect 实例\n$redirect = $app->oauth->redirect($callbackUrl);\n\n// 获取企业微信跳转目标地址\n$targetUrl = $redirect->getTargetUrl();\n\n// 直接跳转到企业微信授权\n$redirect->send();\n```\n\n----------------------------------------\n\nTITLE: Sending Video Broadcast Messages in PHP\nDESCRIPTION: Process of uploading and sending video broadcast messages, including creating video media object first.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/broadcasting.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n// 1. 先上传视频素材用于群发：\n$video = '/path/to/video.mp4';\n$videoMedia = $app->media->uploadVideoForBroadcasting($video, '视频标题', '视频描述');\n\n// 2. 使用上面得到的 media_id 群发视频消息\n$app->broadcasting->sendVideo($videoMedia['media_id']);\n```\n\n----------------------------------------\n\nTITLE: Listing WeChat Users in PHP\nDESCRIPTION: Retrieves a list of WeChat users with optional pagination using nextOpenId parameter\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/user.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$app->user->list($nextOpenId = null);  // $nextOpenId 可选\n```\n\n----------------------------------------\n\nTITLE: Adding Combined Template to Personal Template Library in PHP\nDESCRIPTION: This snippet shows how to combine a template and add it to the account's personal template library. It uses the 'add' method of the template_message object, taking the template id and a list of keyword ids as parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/template_message.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$app->template_message->add($id, $keywordIdList);\n```\n\n----------------------------------------\n\nTITLE: Initiating Refund by Merchant Order Number in PHP\nDESCRIPTION: This snippet shows how to initiate a refund using the merchant's order number. It includes parameters for the order number, refund number, total fee, refund fee, and additional configuration options.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/refund.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n// 参数分别为：商户订单号、商户退款单号、订单金额、退款金额、其他参数\n$app->refund->byOutTradeNumber(string $number, string $refundNumber, int $totalFee, int $refundFee, array $config = []);\n\n// Example:\n$result = $app->refund->byOutTradeNumber('out-trade-no-xxx', 'refund-no-xxx', 20000, 1000, [\n    // 可在此处传入其他参数，详细参数见微信支付文档\n    'refund_desc' => '退运费',\n]);\n```\n\n----------------------------------------\n\nTITLE: Closing WeChat Payment Orders\nDESCRIPTION: Closes a payment order using merchant's order number. Must be called at least 5 minutes after order creation.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/order.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$app->order->close(商户系统内部的订单号（out_trade_no）);\n```\n\n----------------------------------------\n\nTITLE: Sending Subscription Message in PHP\nDESCRIPTION: Sends a subscription message to a specific user with template data, including optional page redirect.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/subscribe_message.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$data = [\n    'template_id' => 'bDmywsp2oEHjwAadTGKkUJ-eJEiMiOf7H-dZ7wjdw80',\n    'touser' => 'oSyZp5OBNPBRhG-7BVgWxbiNZm',\n    'page' => '',\n    'data' => [\n        'date01' => [\n            'value' => '2019-12-01',\n        ],\n        'number01' => [\n            'value' => 10,\n        ],\n    ],\n];\n\n$app->subscribe_message->send($data);\n```\n\n----------------------------------------\n\nTITLE: 导入微信返佣商品 (PHP)\nDESCRIPTION: 使用EasyWeChat库批量导入不超过1000条商品信息。该方法有调用频率限制，每分钟不超过200次，每天不超过100万次，每次请求包大小不超过2M。返回status_ticket用于查询导入结果。\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/goods.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$data = [\n    [\n        'pid' => 'pid001',\n        'image_info' => [\n            'main_image_list' => [\n                [\n                    'url' => 'http://www.google.com/a.jpg',\n                ],\n                [\n                    'url' => 'http://www.google.com/b.jpg',\n                ],\n            ],\n        ],\n        \n        //...\n    ],\n    \n    //...\n];\n\n$result = $app->goods->add($data);\n\n// $result:\n//{\n//    \"errcode\": 0,\n//    \"errmsg\": \"ok\",\n//    \"status_ticket\": \"115141102647330200\"\n//}\n```\n\n----------------------------------------\n\nTITLE: Creating H5-based Contract Agreement\nDESCRIPTION: Initializes a contract agreement through H5 (mobile web) channel using the EasyWeChat SDK.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/contract.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$result = $app->contract->h5(array $params);\n```\n\n----------------------------------------\n\nTITLE: Getting Personal Template List\nDESCRIPTION: Retrieves all personal templates associated with the current account.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/mini-program/subscribe_message.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$app->subscribe_message->getTemplates();\n```\n\n----------------------------------------\n\nTITLE: Refunding Shared Profits in PHP with EasyWeChat\nDESCRIPTION: Demonstrates how to refund shared profits. It requires the out trade number, out return number, return amount, return account, and a description for the refund operation.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/profit-sharing.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n$out_trade_no = \"***\";//退款订单号\n$out_return_no = \"***\";//系统内部退款单号\n$return_amount = 1;\n$return_account = \"***-g4\";\n$description = \"订单取消\";\n$payment->profit_sharing->returnShare($out_trade_no,$out_return_no,$return_amount,$return_account,$description);\n```\n\n----------------------------------------\n\nTITLE: Sending Basic Broadcast Message in PHP using EasyWeChat\nDESCRIPTION: Base method for sending broadcast messages. Accepts a Message object and optional target recipients (tag ID or array of openids).\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/broadcasting.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$app->broadcasting->sendMessage(Message $message, array | int $to = null);\n```\n\n----------------------------------------\n\nTITLE: Sending Plain Text Message in EasyWeChat PHP\nDESCRIPTION: Shows two methods for sending a plain text message to a user using the EasyWeChat Messenger. Both approaches achieve the same result of sending a text message about leave approval.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/message.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$messenger->message('你的请假单（单号：1928373）已经审批通过！')->toUser('overtrue')->send();\n// 或者写成\n$messenger->toUser('overtrue')->send('你的请假单（单号：1928373）已经审批通过！');\n```\n\n----------------------------------------\n\nTITLE: Sending TextCard Message in EasyWeChat PHP\nDESCRIPTION: Demonstrates how to send a TextCard message to a user using the EasyWeChat Messenger. It includes creating a TextCard instance with title, description, and URL, then sending it to a specific user.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/message.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Kernel\\Messages\\TextCard;\n\n// 获取 Messenger 实例\n$messenger = $app->messenger;\n\n// 准备消息\n$message = new TextCard([\n    'title' => '你的请假单审批通过', \n    'description' => '单号：1928373, ....', \n    'url' => 'http://easywechat.com/oa/....'\n]);\n\n// 发送\n$messenger->message($message)->toUser('overtrue')->send();\n```\n\n----------------------------------------\n\nTITLE: Retrieving Authorizer Account Information in PHP\nDESCRIPTION: Fetches basic account information for an authorized account using their appId.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/open-platform/index.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$openPlatform->getAuthorizer(string $appId);\n```\n\n----------------------------------------\n\nTITLE: Preview Broadcast Messages by OpenID in PHP\nDESCRIPTION: Methods for previewing different types of broadcast messages to specific users by OpenID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/broadcasting.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n$app->broadcasting->previewText($text, $openId);\n$app->broadcasting->previewNews($mediaId, $openId);\n$app->broadcasting->previewVoice($mediaId, $openId);\n$app->broadcasting->previewImage($mediaId, $openId);\n$app->broadcasting->previewVideo($message, $openId);\n$app->broadcasting->previewCard($cardId, $openId);\n```\n\n----------------------------------------\n\nTITLE: Retrieving User Information in EasyWeChat Contacts in PHP\nDESCRIPTION: Shows how to fetch information for a specific user from the EasyWeChat contacts system using their user ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/contacts.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$contacts->user->get('overtrue');\n```\n\n----------------------------------------\n\nTITLE: Retrieving Mini Program Categories in PHP\nDESCRIPTION: Fetches all available categories for the Mini Program account.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/subscribe_message.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$app->subscribe_message->getCategory();\n```\n\n----------------------------------------\n\nTITLE: Creating a New User Tag in EasyWeChat (PHP)\nDESCRIPTION: This snippet shows how to create a new user tag using the EasyWeChat library. It takes a tag name as a parameter.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/user-tag.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$app->user_tag->create($name);\n```\n\nLANGUAGE: php\nCODE:\n```\n$app->user_tag->create('测试标签');\n```\n\n----------------------------------------\n\nTITLE: Querying Order by Transaction ID\nDESCRIPTION: Method to query order details using WeChat's transaction ID (transaction_id).\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/order.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$app->order->queryByTransactionId(\"微信订单号（transaction_id）\");\n```\n\n----------------------------------------\n\nTITLE: Managing Temporary Media in PHP\nDESCRIPTION: Demonstrates uploading and downloading temporary media files including images, voice, video and thumbnails.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/material.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n$temporary->uploadImage($path);\n$temporary->uploadVoice($path);\n$temporary->uploadVideo($path, $title, $description);\n$temporary->uploadThumb($path);\n\n$content = $temporary->getStream($mediaId);\nfile_put_contents('/tmp/abc.jpg', $content);\n\n$temporary->download($mediaId, \"/tmp/\", \"abc.jpg\");\n```\n\n----------------------------------------\n\nTITLE: Sending News Messages with EasyWeChat Broadcasting\nDESCRIPTION: Methods for sending news articles to all users, specific users by openid list, or users in a specific tag group. Requires a valid media ID for the news content.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/broadcasting.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$app->broadcasting->sendNews($mediaId);\n$app->broadcasting->sendNews($mediaId, [$openid1, $openid2]);\n$app->broadcasting->sendNews($mediaId, $tagId);\n```\n\n----------------------------------------\n\nTITLE: Applying Contract Payment\nDESCRIPTION: Initiates a payment request based on an existing contract agreement.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/contract.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$result = $app->contract->apply(array $params);\n```\n\n----------------------------------------\n\nTITLE: Updating User Tag Information in EasyWeChat (PHP)\nDESCRIPTION: This snippet demonstrates how to update an existing user tag's information using the EasyWeChat library. It requires the tag ID and the new name.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/user-tag.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$app->user_tag->update($tagId, $name);\n```\n\nLANGUAGE: php\nCODE:\n```\n$app->user_tag->update(12, \"新的名称\");\n```\n\n----------------------------------------\n\nTITLE: Query Balance Transfer Order Status\nDESCRIPTION: Shows how to query the status of a balance transfer order using the partner trade number.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/transfer.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$partnerTradeNo = 1233455;\n$app->transfer->queryBalanceOrder($partnerTradeNo);\n```\n\n----------------------------------------\n\nTITLE: Managing Contact Methods\nDESCRIPTION: CRUD operations for configuring \"Contact Me\" methods including creation, retrieval, updating, and deletion.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/external-contact.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$type = 1;\n$scene = 1;\n$config = [\n   'style' => 1,\n   'remark' => '渠道客户',\n   'skip_verify' => true,\n   'state' => 'teststate',\n   'user' => ['UserID1', 'UserID2', 'UserID3'],\n];\n\n$app->contact_way->create($type, $scene, $config);\n```\n\nLANGUAGE: php\nCODE:\n```\n$configId = '42b34949e138eb6e027c123cba77fad7';\n\n$app->contact_way->get($configId);\n```\n\nLANGUAGE: php\nCODE:\n```\n$configId = '42b34949e138eb6e027c123cba77fad7';\n\n$config = [\n   'style' => 1,\n   'remark' => '渠道客户2',\n   'skip_verify' => true,\n   'state' => 'teststate2',\n   'user' => ['UserID4', 'UserID5', 'UserID6'],\n];\n\n$app->contact_way->update($configId, $config);\n```\n\nLANGUAGE: php\nCODE:\n```\n$configId = '42b34949e138eb6e027c123cba77fad7';\n\n$app->contact_way->delete($configId);\n```\n\n----------------------------------------\n\nTITLE: Working with Collection API Response Objects in PHP\nDESCRIPTION: This snippet demonstrates how to work with the Collection class that wraps all API response data from EasyWeChat. It shows different ways to access data properties and the available helper methods for manipulating the response data.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/tutorial.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$userService = $app->user; // 用户API\n\n$user = $userService->get($openId);\n\n// $user 便是一个 EasyWeChat\\Support\\Collection 实例\n$user['nickname'];\n$user->nickname;\n$user->get('nickname');\n\n//...\n```\n\n----------------------------------------\n\nTITLE: Generating WeChat JSSDK Config in JavaScript\nDESCRIPTION: This example shows how to integrate the WeChat JSSDK into a web page by including the JSSDK library and generating the configuration with PHP. It demonstrates setting up sharing functionality for QQ and Weibo.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/js.md#2025-04-22_snippet_1\n\nLANGUAGE: js\nCODE:\n```\n<script src=\"http://res.wx.qq.com/open/js/jweixin-1.0.0.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n<script type=\"text/javascript\" charset=\"utf-8\">\n    wx.config(<?php echo $js->config(array('onMenuShareQQ', 'onMenuShareWeibo'), true) ?>);\n</script>\n```\n\n----------------------------------------\n\nTITLE: Creating Temporary QR Code with EasyWeChat in PHP\nDESCRIPTION: This snippet demonstrates how to create a temporary QR code using the EasyWeChat library. It sets a custom string 'foo' and an expiration time of 6 days. The result includes a ticket, expiration time, and URL for the QR code.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/basic-services/qrcode.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$result = $app->qrcode->temporary('foo', 6 * 24 * 3600);\n\n// Array\n// (\n//     [ticket] => gQFD8TwAAAAAAAAAAS5odHRwOi8vd2VpeGluLnFxLmNvbS9xLzAyTmFjVTRWU3ViUE8xR1N4ajFwMWsAAgS2uItZAwQA6QcA\n//     [expire_seconds] => 518400\n//     [url] => http://weixin.qq.com/q/02NacU4VSubPO1GSxj1p1k\n// )\n```\n\n----------------------------------------\n\nTITLE: Managing Customer Service Sessions in PHP with EasyWeChat\nDESCRIPTION: Demonstrates how to create and close customer service sessions, get session status, list sessions, and retrieve waiting sessions using EasyWeChat. These methods allow for control over customer interactions.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/staff.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$session->create('test1@test', 'OPENID');\n\n$session->close('test1@test', 'OPENID');\n\n$session->get('OPENID');\n\n$session->lists('test1@test');\n\n$session->waiters();\n```\n\n----------------------------------------\n\nTITLE: Updating User Information in EasyWeChat Contacts in PHP\nDESCRIPTION: Illustrates the process of updating a user's information in the EasyWeChat contacts system. The function takes the user ID and an array of fields to be updated.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/contacts.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$contacts->user->update('overtrue', [\n    \"isleader\": 0,\n    'position' => 'PHP 酱油工程师',\n    //...\n]);\n```\n\n----------------------------------------\n\nTITLE: Setting Visibility of a Nearby POI in WeChat Mini Program using PHP\nDESCRIPTION: This snippet demonstrates how to set the visibility status of a nearby Point of Interest (POI) using the EasyWeChat SDK. It requires the POI ID and a status flag to indicate whether the POI should be displayed or hidden.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/mini-program/nearby_poi.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$poiId = 'xxxxxxxx';\n$status = 0; // 0: 不展示，1：展示\n\n$app->nearby_poi->setVisibility($poiId, $status);\n```\n\n----------------------------------------\n\nTITLE: Creating Raw XML Messages in EasyWeChat PHP SDK\nDESCRIPTION: This snippet shows how to create a raw XML message in EasyWeChat. Raw messages allow you to manually format the message structure when you don't want to use the predefined message types. This example demonstrates an XML structure for image response.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/messages.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Message\\Raw;\n\n$message = new Raw('<xml>\n<ToUserName><![CDATA[toUser]]></ToUserName>\n<FromUserName><![CDATA[fromUser]]></FromUserName>\n<CreateTime>12345678</CreateTime>\n<MsgType><![CDATA[image]]></MsgType>\n<Image>\n<MediaId><![CDATA[media_id]]></MediaId>\n</Image>\n</xml>');\n```\n\n----------------------------------------\n\nTITLE: Checking Text for Sensitive Content in EasyWeChat\nDESCRIPTION: Example of using the content security API to check if a text contains sensitive information. The API has a frequency limit of 2000 calls per minute and 1,000,000 calls per day.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/basic-services/content_security.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n// 传入要检测的文本内容，长度不超过500K字节\n$content = '你好';\n\n$result = $app->content_security->checkText($content);\n\n// 正常返回 0\n{\n    \"errcode\": \"0\",\n    \"errmsg\": \"ok\"\n}\n\n//当 $content 内含有敏感信息，则返回 87014\n{\n    \"errcode\": 87014,\n    \"errmsg\": \"risky content\"\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving External Contact Information\nDESCRIPTION: Collection of methods for retrieving external contact data including follow users, contact lists, and contact details.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/external-contact.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$app->external_contact->getFollowUsers();\n```\n\nLANGUAGE: php\nCODE:\n```\n$userId = 'zhangsan';\n\n$app->external_contact->list($userId);\n```\n\nLANGUAGE: php\nCODE:\n```\n$externalUserId = 'woAJ2GCAAAXtWyujaWJHDDGi0mACH71w';\n\n$app->external_contact->get($externalUserId);\n```\n\n----------------------------------------\n\nTITLE: Unblocking WeChat Users in PHP\nDESCRIPTION: Removes one or multiple WeChat users from the account's block list\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/user.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$app->user->unblock('openidxxxxx');\n// 或者多个用户\n$app->user->unblock(['openid1', 'openid2', 'openid3', ...]);\n```\n\n----------------------------------------\n\nTITLE: Initializing JSSDK Service in PHP with EasyWeChat\nDESCRIPTION: This snippet demonstrates how to create an instance of the JSSDK service from an EasyWeChat Application object. It requires an initialized Application with proper configuration options.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/js.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nuse EasyWeChat\\Foundation\\Application;\n//...\n$app = new Application($options);\n\n$js = $app->js;\n```\n\n----------------------------------------\n\nTITLE: Updating User Remarks in EasyWeChat PHP\nDESCRIPTION: This snippet shows how to update a user's remark. It takes the user's OpenID and the new remark as parameters, returning a boolean indicating success.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/user.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$userService->remark($openId, $remark); // 成功返回boolean\n```\n\nLANGUAGE: php\nCODE:\n```\n$userService->remark($openId, \"僵尸粉\");\n```\n\n----------------------------------------\n\nTITLE: Creating Express Waybills in EasyWeChat (PHP)\nDESCRIPTION: Generates an express delivery waybill through the WeChat Logistics API. Accepts waybill data as input and returns order ID, waybill ID, and additional waybill data when successful. Includes error handling with specific delivery result codes.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/express.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$app->express->createWaybill($data);\n\n\n// 成功返回\n\n{\n  \"order_id\": \"01234567890123456789\",\n  \"waybill_id\": \"123456789\",\n  \"waybill_data\": [\n    {\n      \"key\": \"SF_bagAddr\",\n      \"value\": \"广州\"\n    },\n    {\n      \"key\": \"SF_mark\",\n      \"value\": \"101- 07-03 509\"\n    }\n  ]\n}\n\n// 失败返回\n\n{\n  \"errcode\": 9300501,\n  \"errmsg\": \"delivery logic fail\",\n  \"delivery_resultcode\": 10002,\n  \"delivery_resultmsg\": \"客户密码不正确\"\n}\n```\n\n----------------------------------------\n\nTITLE: Generating Mini Program Payment Configuration in PHP\nDESCRIPTION: Produces the configuration for WeChat Mini Program payment. Returns an array with required parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/jssdk.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$config = $jssdk->bridgeConfig($prepayId, false); // 返回数组\n```\n\n----------------------------------------\n\nTITLE: Sending Text Messages with WeChat Group Robot - PHP\nDESCRIPTION: Demonstrates how to send basic text messages using the messenger instance. Shows two different methods of sending text messages to a group.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/group-robot.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n// 获取 Messenger 实例\n$messenger = $app->group_robot_messenger;\n\n// 群组 key\n$groupKey = 'ab4f609a-3feb-427c-ae9d-b319ca712d36';\n\n$messenger->message('大家好，我是本群的\"喝水提醒小助手\"')->toGroup($groupKey)->send();\n// 或者写成\n$messenger->toGroup($groupKey)->send('大家好，我是本群的\"喝水提醒小助手\"');\n```\n\n----------------------------------------\n\nTITLE: Example Usage of Mini Program QR Code Generation in PHP\nDESCRIPTION: Demonstrates how to generate and save mini program QR codes. Shows the basic API call and examples of saving the response as a file with both default and custom filenames.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/app_code.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$response = $app->app_code->getQrCode('/path/to/page');\n\n// $response 成功时为 EasyWeChat\\Kernel\\Http\\StreamResponse 实例，失败为数组或你指定的 API 返回类型\n\n// 保存小程序码到文件\nif ($response instanceof \\EasyWeChat\\Kernel\\Http\\StreamResponse) {\n    $filename = $response->save('/path/to/directory');\n}\n\n// 或\nif ($response instanceof \\EasyWeChat\\Kernel\\Http\\StreamResponse) {\n    $filename = $response->saveAs('/path/to/directory', 'appcode.png');\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Permanent QR Code with EasyWeChat in PHP\nDESCRIPTION: Generates a permanent QR code without an expiration time. The function can accept either a numeric or string parameter and returns an array with the ticket and URL for the QR code.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/basic-services/qrcode.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$result = $app->qrcode->forever(56);// 或者 $app->qrcode->forever(\"foo\");\n// Array\n// (\n//     [ticket] => gQFD8TwAAAAAAAAAAS5odHRwOi8vd2VpeGluLnFxLmNvbS9xLzAyTmFjVTRWU3ViUE8xR1N4ajFwMWsAAgS2uItZAwQA6QcA\n//     [url] => http://weixin.qq.com/q/02NacU4VSubPO1GSxj1p1k\n// )\n```\n\n----------------------------------------\n\nTITLE: Inviting WeChat Users to Join Customer Service in PHP\nDESCRIPTION: Invites a WeChat user to become a customer service agent by specifying the customer service account ID and the user's WeChat ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/customer_service.md#2025-04-22_snippet_12\n\nLANGUAGE: php\nCODE:\n```\n$app->customer_service->invite('foo@test', 'xxxx');\n```\n\n----------------------------------------\n\nTITLE: Transferring External Contacts in PHP\nDESCRIPTION: Illustrates how to transfer external contacts between employees and reassign group chats for departing employees.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/external-contact.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n// Transfer external contact\n$externalUserId = 'woAJ2GCAAAXtWyujaWJHDDGi0mACH71w';\n$handoverUserId = 'zhangsan';\n$takeoverUserId = 'lisi';\n$transferSuccessMessage = '您好，您的服务已升级，后续将由我的同事张三@腾讯接替我的工作，继续为您服务。';\n$app->external_contact->transfer($externalUserId, $handoverUserId, $takeoverUserId, $transferSuccessMessage);\n\n// Reassign group chats\n$chatIds = ['群聊id1', '群聊id2'];\n$takeoverUserId = '接替群主userid';\n$app->external_contact->transferGroupChat($chatIds, $takeoverUserId);\n\n// Query transfer results\n$app->external_contact->getTransferResult($externalUserId, $handoverUserId, $takeoverUserId);\n```\n\n----------------------------------------\n\nTITLE: Updating a Nearby POI in WeChat Mini Program using PHP\nDESCRIPTION: This snippet shows how to update an existing nearby Point of Interest (POI) using the EasyWeChat SDK. It requires the POI ID and accepts parameters similar to the add function for updating various POI details.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/mini-program/nearby_poi.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$poiId = 'xxxxxxxx';\n\n$params = [\n    'kf_info' => '{\"open_kf\":true,\"kf_headimg\":\"http://mmbiz.qpic.cn/mmbiz_jpg/kKMgNtnEfQzDKpLXYhgo3W3Gndl34gITqmP914zSwhajIEJzUPpx40P7R8fRe1QmicneQMhFzpZNhSLjrvU1pIA/0?wx_fmt=jpeg\",\"kf_name\":\"Harden\"}',\n    'pic_list' => '{\"list\":[\"http://mmbiz.qpic.cn/mmbiz_jpg/kKMgNtnEfQzDKpLXYhgo3W3Gndl34gITqmP914zSwhajIEJzUPpx40P7R8fRe1QmicneQMhFzpZNhSLjrvU1pIA/0?wx_fmt=jpeg\",\"http://mmbiz.qpic.cn/mmbiz_jpg/kKMgNtnEfQzDKpLXYhgo3W3Gndl34gITRneE5FS9uYruXGMmrtmhsBySwddEWUGOibG8Ze2NT5E3Dyt79I0htNg/0?wx_fmt=jpeg\"]}',\n    'service_infos' => '{\"service_infos\":[{\"id\":2,\"type\":1,\"name\":\"快递\",\"appid\":\"wx1373169e494e0c39\",\"path\":\"index\"},{\"id\":0,\"type\":2,\"name\":\"自定义\",\"appid\":\"wx1373169e494e0c39\",\"path\":\"index\"}]}',\n    'contract_phone' => '111111111',\n    'hour' => '00:00-11:11',\n    'company_name' => '深圳市腾讯计算机系统有限公司',\n    'credential' => '156718193518281',\n    'address' => '新疆维吾尔自治区克拉玛依市克拉玛依区碧水路15-1-8号(碧水云天广场)',\n    'qualification_list' => '3LaLzqiTrQcD20DlX_o-OV1-nlYMu7sdVAL7SV2PrxVyjZFZZmB3O6LPGaYXlZWq',\n];\n\n$app->nearby_poi->update($poiId, $params);\n```\n\n----------------------------------------\n\nTITLE: Fetching Current Menu in EasyWeChat (PHP)\nDESCRIPTION: Retrieves the current active menu configuration for the WeChat account using the EasyWeChat SDK.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/menu.md#2025-04-22_snippet_1\n\nLANGUAGE: PHP\nCODE:\n```\n$current = $app->menu->current();\n```\n\n----------------------------------------\n\nTITLE: Deleting Broadcast Messages with EasyWeChat\nDESCRIPTION: Method for deleting a previously sent broadcast message using its message ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/broadcasting.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n$app->broadcasting->delete($msgId);\n```\n\n----------------------------------------\n\nTITLE: Retrieving All Customer Service Accounts in PHP\nDESCRIPTION: Fetches a list of all customer service accounts registered with the WeChat Official Account.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/customer_service.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$app->customer_service->list();\n```\n\n----------------------------------------\n\nTITLE: Setting Custom URL for JSSDK\nDESCRIPTION: Method to manually set the URL for JSSDK configuration instead of using the default auto-detected URL.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/basic-services/jssdk.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$app->jssdk->setUrl($url)\n```\n\n----------------------------------------\n\nTITLE: Updating Merchant Contact Information in EasyWeChat (PHP)\nDESCRIPTION: This code snippet shows how to update the contact information for a merchant using the EasyWeChat library. It uses the material->updateContact method to modify details such as mobile phone, email, and merchant name.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/micro-merchant/material.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$response = $app->material->updateContact([\n    // 'sub_mch_id' => '1230000109',\n    'mobile_phone' => '手机号',\n    'email' => '邮箱',\n    'merchant_name' => '商户简称',\n]);\n```\n\n----------------------------------------\n\nTITLE: Sending Text Messages with WeChat Group Robot\nDESCRIPTION: Demonstrates how to send basic text messages using the Messenger instance and Text class. Shows both direct message sending and messenger chain methods.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/group-robot.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n// 获取 Messenger 实例\n$messenger = $app->group_robot_messenger;\n\n// 群组 key\n$groupKey = 'ab4f609a-3feb-427c-ae9d-b319ca712d36';\n\n$messenger->message('大家好，我是本群的\"喝水提醒小助手\"')->toGroup($groupKey)->send();\n// 或者写成\n$messenger->toGroup($groupKey)->send('大家好，我是本群的\"喝水提醒小助手\"');\n```\n\n----------------------------------------\n\nTITLE: Retrieving Users for a Specific Tag in EasyWeChat (PHP)\nDESCRIPTION: This snippet shows how to retrieve a list of users associated with a specific tag using the EasyWeChat library. It supports pagination using the nextOpenId parameter.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/user-tag.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$app->user_tag->usersOfTag($tagId, $nextOpenId = '');\n// $nextOpenId：第一个拉取的OPENID，不填默认从头开始拉取\n\n// {\n//   \"count\":2, // 这次获取的粉丝数量\n//   \"data\":{ // 粉丝列表\n//      \"openid\":[\n//          \"ocYxcuAEy30bX0NXmGn4ypqx3tI0\",\n//          \"ocYxcuBt0mRugKZ7tGAHPnUaOW7Y\"\n//      ]\n//   },\n//   \"next_openid\":\"ocYxcuBt0mRugKZ7tGAHPnUaOW7Y\"//拉取列表最后一个用户的openid\n// }\n```\n\n----------------------------------------\n\nTITLE: Sending News Messages - PHP\nDESCRIPTION: Shows how to send news-type messages with multiple items containing titles, descriptions, URLs, and images.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/group-robot.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Work\\GroupRobot\\Messages\\News;\nuse EasyWeChat\\Work\\GroupRobot\\Messages\\NewsItem;\n\n$items = [\n    new NewsItem([\n        'title' => '中秋节礼品领取',\n        'description' => '今年中秋节公司有豪礼相送',\n        'url' => 'https://easywechat.com',\n        'image' => 'http://res.mail.qq.com/node/ww/wwopenmng/images/independent/doc/test_pic_msg1.png',\n    ]),\n\n    //...\n];\n\n$news = new News($items);\n\n$messenger->message($news)->toGroup($groupKey)->send();\n```\n\n----------------------------------------\n\nTITLE: Getting Unlimited Quantity Mini Program Code with EasyWeChat in PHP\nDESCRIPTION: Uses the getUnlimit method to generate unlimited quantity mini program codes. This API is suitable for business scenarios requiring a large number of codes or temporary use. Requires a scene value and supports optional parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/app_code.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$app->app_code->getUnlimit(string $scene, array $optional = []);\n```\n\n----------------------------------------\n\nTITLE: Uploading Image Media in EasyWeChat\nDESCRIPTION: Uploads an image file to WeChat's media server. Images must be JPG format and under 2MB. Contains sensitive content detection.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/basic-services/media.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$app->media->uploadImage($path);\n```\n\n----------------------------------------\n\nTITLE: Example of Retrieving Chat Records in PHP\nDESCRIPTION: Demonstrates how to fetch customer service chat logs for a specific date range with pagination parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/customer_service.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n$records = $app->customer_service->messages('2015-06-07', '2015-06-21', 1, 20000);\n```\n\n----------------------------------------\n\nTITLE: Processing Profit Sharing Return in EasyWeChat PHP\nDESCRIPTION: Handles the return of profit sharing funds. It requires details such as the out trade number, return number, amount, account, and description for the return operation.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/profit-sharing.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n$out_trade_no = \"***\";//退款订单号\n$out_return_no = \"***\";//系统内部退款单号\n$return_amount = 1;\n$return_account = \"***-g4\";\n$description = \"订单取消\";\n$payment->profit_sharing->returnShare($out_trade_no,$out_return_no,$return_amount,$return_account,$description);\n```\n\n----------------------------------------\n\nTITLE: Adding Commission Products with EasyWeChat in PHP\nDESCRIPTION: This snippet demonstrates how to add commission products using the EasyWeChat library. It supports batch importing up to 1000 product entries per call, with rate limits of 200 calls per minute and 1 million calls per day. The maximum request size is 2MB.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/goods.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$data = [\n    [\n        'pid' => 'pid001',\n        'image_info' => [\n            'main_image_list' => [\n                [\n                    'url' => 'http://www.google.com/a.jpg',\n                ],\n                [\n                    'url' => 'http://www.google.com/b.jpg',\n                ],\n            ],\n        ],\n        \n        //...\n    ],\n    \n    //...\n];\n\n$result = $app->goods->add($data);\n\n// $result:\n//{\n//    \"errcode\": 0,\n//    \"errmsg\": \"ok\",\n//    \"status_ticket\": \"115141102647330200\"\n//}\n```\n\n----------------------------------------\n\nTITLE: Deleting Menus in EasyWeChat (PHP)\nDESCRIPTION: This snippet demonstrates two ways to delete menus using the EasyWeChat library: deleting all menus or deleting a specific menu by its ID. The ID is used when deleting personalized menus and can be obtained from a query interface.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/menu.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$app->menu->delete(); // 全部\n$app->menu->delete($menuId);\n```\n\n----------------------------------------\n\nTITLE: Executing Multiple Profit Sharing in PHP with EasyWeChat\nDESCRIPTION: Demonstrates how to perform multiple profit sharing operations using EasyWeChat. It uses the same parameters as single profit sharing but calls the multiShare method.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/profit-sharing.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$payment->profit_sharing->multiShare($transaction_id,$out_trade_no,$receivers);\n```\n\n----------------------------------------\n\nTITLE: Listing Permanent Materials in WeChat using EasyWeChat PHP SDK\nDESCRIPTION: This snippet shows how to retrieve a list of permanent materials from WeChat servers. It allows specifying the material type, offset, and count for pagination.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/material.md#2025-04-22_snippet_8\n\nLANGUAGE: PHP\nCODE:\n```\n$app->material->list($type, $offset, $count);\n\n$list = $app->material->list('image', 0, 10);\n```\n\n----------------------------------------\n\nTITLE: Delete Broadcast Message in PHP\nDESCRIPTION: Method for deleting a broadcast message using message ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/broadcasting.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n$app->broadcasting->delete($msgId);\n```\n\n----------------------------------------\n\nTITLE: Generating OAuth Redirect URL for WeChat Work in PHP\nDESCRIPTION: Generates a redirect URL for OAuth authorization in WeChat Work. Requires a callback URL which should be set as a trusted domain.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/6.x/work/oauth.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n// $callbackUrl 为授权回调地址\n$callbackUrl = 'https://xxx.xxx'; // 需设置可信域名\n\n// 返回授权跳转链接\n$redirectUrl = $app->getOAuth()->redirect($callbackUrl);\n```\n\n----------------------------------------\n\nTITLE: Initializing EasyWeChat Work Application in PHP\nDESCRIPTION: This snippet demonstrates how to initialize the EasyWeChat Work application with configuration settings. It requires the corp_id and secret to be provided in the config array.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/oa.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$config = [\n    'corp_id' => 'xxxxxxxxxxxxxxxxx',\n    'secret'   => 'xxxxxxxxxx',\n    //...\n];\n\n$app = Factory::work($config);\n```\n\n----------------------------------------\n\nTITLE: Sending News Messages\nDESCRIPTION: Shows how to send news messages with multiple items containing titles, descriptions, URLs, and images.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/group-robot.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Work\\GroupRobot\\Messages\\News;\nuse EasyWeChat\\Work\\GroupRobot\\Messages\\NewsItem;\n\n$items = [\n    new NewsItem([\n        'title' => '中秋节礼品领取',\n        'description' => '今年中秋节公司有豪礼相送',\n        'url' => 'https://easywechat.com',\n        'image' => 'http://res.mail.qq.com/node/ww/wwopenmng/images/independent/doc/test_pic_msg1.png',\n    ]),\n\n    //...\n];\n\n$news = new News($items);\n\n$messenger->message($news)->toGroup($groupKey)->send();\n```\n\n----------------------------------------\n\nTITLE: Updating POI Store Information with EasyWeChat in PHP\nDESCRIPTION: This snippet shows how to update information for a specific store (POI) using its ID with the EasyWeChat library. It allows updating various fields such as telephone, recommendations, etc.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/poi.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$app->poi->update($poiId, $data);\n```\n\nLANGUAGE: php\nCODE:\n```\n$data = array(\n         \"telephone\" => \"020-12345678\",\n         \"recommend\" => \"麦辣鸡腿堡套餐,麦乐鸡,全家桶\",\n         //...\n        );\n\n$res = $app->poi->update(271262077, $data); //true or exception\n```\n\n----------------------------------------\n\nTITLE: Sending Markdown Messages\nDESCRIPTION: Shows how to send formatted Markdown messages with different text colors and styles.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/group-robot.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Work\\GroupRobot\\Messages\\Markdown;\n\n$content = '\n# 标题一\n## 标题二\n<font color=\"info\">绿色</font>\n<font color=\"comment\">灰色</font>\n<font color=\"warning\">橙红色</font>\n> 引用文字\n';\n\n$markdown = new Markdown($content);\n\n$messenger->message($markdown)->toGroup($groupKey)->send();\n```\n\n----------------------------------------\n\nTITLE: Getting Mini Program QR Code with EasyWeChat in PHP\nDESCRIPTION: Uses the getQrCode method to generate a standard QR code for the mini program. This API requires a path parameter and optional width setting. Returns a StreamResponse on success.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/app_code.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$app->app_code->getQrCode(string $path, int $width = null);\n```\n\n----------------------------------------\n\nTITLE: Updating Article Material in WeChat using EasyWeChat PHP SDK\nDESCRIPTION: This code demonstrates how to update an existing article material in WeChat, including updating a specific article in a multi-article message.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/material.md#2025-04-22_snippet_5\n\nLANGUAGE: PHP\nCODE:\n```\n$result = $app->material->updateArticle($mediaId, new Article(...));\n\n// or\n\n$result = $app->material->updateArticle($mediaId, [\n   'title' => 'EasyWeChat 4.0 发布了！',\n    'thumb_media_id' => 'qQFxUQGO21Li4YrSn3MhnrqtRp9Zi3cbM9uBsepvDmE', // 封面图片 mediaId\n    'author' => 'overtrue', // 作者\n    'show_cover' => 1, // 是否在文章内容显示封面图片\n    'digest' => '这里是文章摘要',\n    'content' => '这里是文章内容，你可以放很长的内容',\n    'source_url' => 'https://easywechat.com',\n  ]);\n\n// 指定更新多图文中的第 2 篇\n$result = $app->material->updateArticle($mediaId, new Article(...), 1); // 第 2 篇\n```\n\n----------------------------------------\n\nTITLE: Testing Personalized Menu in EasyWeChat (PHP)\nDESCRIPTION: This code shows how to test a personalized menu for a specific user in the EasyWeChat library. It takes a user ID (which can be either an OpenID or WeChat ID) and returns the menu items that match the user's profile.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/menu.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$app->menu->match($userId);\n```\n\n----------------------------------------\n\nTITLE: Checking Broadcast Message Status in WeChat\nDESCRIPTION: Queries the sending status of a broadcast message identified by its message ID. This allows tracking of whether a message was successfully delivered.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/broadcast.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n$broadcast->status($msgId);\n```\n\n----------------------------------------\n\nTITLE: Uploading Video Material in WeChat using EasyWeChat PHP SDK\nDESCRIPTION: This snippet shows how to upload a video file as material to WeChat servers, including a title and description for the video.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/material.md#2025-04-22_snippet_2\n\nLANGUAGE: PHP\nCODE:\n```\n$result = $app->material->uploadVideo(\"/path/to/your/video.mp4\", \"视频标题\", \"视频描述\");\n// {\n//    \"media_id\":MEDIA_ID,\n// }\n```\n\n----------------------------------------\n\nTITLE: Uploading General File in PHP using EasyWeChat\nDESCRIPTION: Uploads a general file to WeChat's media server. The file must be less than 20MB.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/media.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$app->media->uploadFile($path);\n```\n\n----------------------------------------\n\nTITLE: Forwarding Messages to Specific Customer Service Account using EasyWeChat in PHP\nDESCRIPTION: This snippet shows how to forward messages to a specific customer service account using the EasyWeChat library. It allows specifying the target account when creating the Transfer object.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/message-transfer.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Kernel\\Messages\\Transfer;\n\n$app->server->push(function($message) {\n    return new Transfer($account);\n});\n```\n\n----------------------------------------\n\nTITLE: Forwarding Messages to Specific Customer Service Account in EasyWeChat PHP\nDESCRIPTION: This snippet shows how to forward messages to a specific customer service account in EasyWeChat. It creates a Transfer object and then specifies the target account using either the account() or to() method before returning the transfer object.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/message-transfer.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$server->setMessageHandler(function($message) {\n    $transfer = new \\EasyWeChat\\Message\\Transfer();\n    $transfer->account($account);// 或者 $transfer->to($account);\n\n    return $transfer;\n});\n```\n\n----------------------------------------\n\nTITLE: Creating Store Mini-Program\nDESCRIPTION: Creates a new store mini-program with basic information. Requires admin approval within 24 hours.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/store.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$info = [\n    \"first_catid\"        => 476,\n    \"second_catid\"       => 477,\n    \"qualification_list\" =>  \"RTZgKZ386yFn5kQSWLTxe4bqxwgzGBjs3OE02cg9CVQk1wRVE3c8fjUFX7jvpi-P\",\n    \"headimg_mediaid\"    => \"RTZgKZ386yFn5kQSWLTxe4bqxwgzGBjs3OE02cg9CVQk1wRVE3c8fjUFX7jvpi-P\",\n    \"nickname\"           => \"hardenzhang308\",\n    \"intro\"              => \"hardenzhangtest\",\n    \"org_code\"           => \"\",\n    \"other_files\"        => \"\"\n];\n\n$result = $app->store->createMerchant($info);\n```\n\n----------------------------------------\n\nTITLE: Obtaining OAuth Module Instances in PHP\nDESCRIPTION: This snippet shows how to obtain OAuth instances for both third-party application and enterprise web authorization. It demonstrates the use of getOAuth and getCorpOAuth methods, as well as specifying an agent ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/6.x/open-work/oauth.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n// 第三方应用网页授权\n$oauth = $app->getOAuth(string $suiteId, AccessTokenInterface $suiteAccessToken);\n\n// 企业网页授权\n$oauth = $app->getCorpOAuth(string $corpId, AccessTokenInterface $suiteAccessToken);\n// 如需指定应用ID\n$oauth = $oauth->withAgentId($agentId);\n```\n\n----------------------------------------\n\nTITLE: Querying Devices Associated with a Page in PHP\nDESCRIPTION: Retrieves a paginated list of devices associated with a specific page ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/shake-around.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$result = $shakearound->relation->listByPageId(50054, 0, 3);\n```\n\n----------------------------------------\n\nTITLE: Downloading QR Code Image with EasyWeChat in PHP\nDESCRIPTION: This code demonstrates how to download and save a QR code image. It retrieves the QR code URL, fetches the binary image content, and saves it to a local file.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/basic-services/qrcode.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$url = $app->qrcode->url($ticket);\n\n$content = file_get_contents($url); // 得到二进制图片内容\n\nfile_put_contents(__DIR__ . '/code.jpg', $content); // 写入文件\n```\n\n----------------------------------------\n\nTITLE: Uploading Voice Recording in PHP using EasyWeChat\nDESCRIPTION: Uploads a voice recording to WeChat's media server. The file must be less than 2MB, in AMR format, and not exceed 60 seconds in length.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/media.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$app->media->uploadVoice($path);\n```\n\n----------------------------------------\n\nTITLE: JSSDK Configuration Output Example\nDESCRIPTION: Example of the generated JSSDK configuration output showing the structure with debug mode, app ID, timestamp, and API list.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/basic-services/jssdk.md#2025-04-22_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\n<script src=\"https://res.wx.qq.com/open/js/jweixin-1.4.0.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n<script type=\"text/javascript\" charset=\"utf-8\">\nwx.config({\n    debug: true, // 请在上线前删除它\n    appId: 'wx3cf0f39249eb0e60',\n    timestamp: 1430009304,\n    nonceStr: 'qey94m021ik',\n    signature: '4F76593A4245644FAE4E1BC940F6422A0C3EC03E',\n    jsApiList: ['updateAppMessageShareData', 'updateTimelineShareData']\n});\n</script>\n```\n\n----------------------------------------\n\nTITLE: Sending a Template Message in PHP\nDESCRIPTION: This code shows how to send a template message. It uses the 'send' method of the template_message object, taking an array of parameters including the recipient's openid, template id, page, form id, and data for the template.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/template_message.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$app->template_message->send([\n    'touser' => 'user-openid',\n    'template_id' => 'template-id',\n    'page' => 'index',\n    'form_id' => 'form-id',\n    'data' => [\n        'keyword1' => 'VALUE',\n        'keyword2' => 'VALUE2',\n        // ...\n    ],\n]);\n```\n\n----------------------------------------\n\nTITLE: Retrieving User Behavior Statistics\nDESCRIPTION: Method for obtaining employee behavior data within a specified date range for analysis.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/external-contact.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$userIds = [\n    'zhangsan',\n    'lisi'\n];\n\n$from = 1536508800;\n$to = 1536940800;\n\n$app->external_contact_statistics->userBehavior($userIds, $from, $to);\n```\n\n----------------------------------------\n\nTITLE: Fetching and Saving QR Code Image with EasyWeChat in PHP\nDESCRIPTION: Retrieves the binary content of a QR code image using the generated URL and saves it to a file. This snippet demonstrates how to download and store the QR code as an image file.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/basic-services/qrcode.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$url = $app->qrcode->url($ticket);\n\n$content = file_get_contents($url); // 得到二进制图片内容\n\nfile_put_contents(__DIR__ . '/code.jpg', $content); // 写入文件\n```\n\n----------------------------------------\n\nTITLE: Preparing Red Packet Order with EasyWeChat in PHP\nDESCRIPTION: Demonstrates how to prepare a red packet order, typically used for shake-around red packet functionality. Includes parameters for both normal and group red packets.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/redpack.md#2025-04-22_snippet_5\n\nLANGUAGE: PHP\nCODE:\n```\n$redpackData = [\n    'hb_type'      => 'NORMAL',  //NORMAL 或 GROUP\n    'mch_billno'   => 'xy123456',\n    'send_name'    => '测试红包',\n    're_openid'    => 'oxTWIuGaIt6gTKsQRLau2M0yL16E',\n    'total_num'    => 1,  //普通红包固定为1，裂变红包不小于3\n    'total_amount' => 100,  //单位为分，普通红包不小于100，裂变红包不小于300\n    'wishing'      => '祝福语',\n    'client_ip'    => '192.168.0.1',  //可不传，不传则由 SDK 取当前客户端 IP\n    'act_name'     => '测试活动',\n    'remark'       => '测试备注',\n    'amt_type'     => 'ALL_RAND',\n    // ...\n];\n\n$result = $redpack->prepare($redpackData);\n```\n\n----------------------------------------\n\nTITLE: Getting Material Statistics in WeChat using EasyWeChat PHP SDK\nDESCRIPTION: This code retrieves statistics about the number of different types of materials (voice, video, image, news) stored in the WeChat account.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/material.md#2025-04-22_snippet_9\n\nLANGUAGE: PHP\nCODE:\n```\n$stats = $app->material->stats();\n\n// {\n//   \"voice_count\":COUNT,\n//   \"video_count\":COUNT,\n//   \"image_count\":COUNT,\n//   \"news_count\":COUNT\n// }\n```\n\n----------------------------------------\n\nTITLE: Uploading Video to WeChat Work API\nDESCRIPTION: Uploads a video file to WeChat Work platform. Files must be under 10MB and in MP4 format.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/media.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$app->media->uploadVideo($path);\n```\n\n----------------------------------------\n\nTITLE: Sending Messages to Users via Customer Service in PHP with EasyWeChat\nDESCRIPTION: Shows how to send messages to users through customer service, either by any available staff or by a specific account. The $message object should be created according to the message documentation.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/staff.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$staff->message($message)->to($openId)->send();\n\n$staff->message($message)->by('account@test')->to($openId)->send();\n```\n\n----------------------------------------\n\nTITLE: Creating News Messages in EasyWeChat PHP SDK\nDESCRIPTION: This snippet demonstrates how to create and customize a news message in EasyWeChat. News messages support attributes like title, description, image URL, and link URL, used primarily for rich media responses.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/messages.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n<?php\nuse EasyWeChat\\Message\\News;\n\n$news = new News([\n        'title'       => $title,\n        'description' => '...',\n        'url'         => $url,\n        'image'       => $image,\n        // ...\n    ]);\n\n// or\n$news = new News();\n$news->title = 'EasyWeChat';\n$news->description = '微信 SDK ...';\n// ...\n```\n\n----------------------------------------\n\nTITLE: Adding Devices to a Group in PHP\nDESCRIPTION: Adds multiple devices to a specified device group.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/shake-around.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\n$result = $shakearound->group->addDevices(123, [\n  ['device_id' => 10097],\n  ['device_id' => 10098],\n]);\n\n// or\n$result = $shakearound->group->addDevices(123, [\n  [\n    'uuid' => 'FDA50693-A4E2-4FB1-AFCF-C6EB07647825',\n    'major' => 10001,\n    'minor' => 12102,\n  ],\n  [\n    'uuid' => 'FDA50693-A4E2-4FB1-AFCF-C6EB07647825',\n    'major' => 10001,\n    'minor' => 12103,\n  ]\n]);\n```\n\n----------------------------------------\n\nTITLE: Initializing WeChat Work Application Instance\nDESCRIPTION: Sets up the configuration and creates a WeChat Work application instance with corporate ID, secret, and agent ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/oauth.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$config = [\n    'corp_id' => 'xxxxxxxxxxxxxxxxx',\n    'secret'   => 'xxxxxxxxxx', // 应用的 secret\n    'agent_id' => 100001,\n];\n\n$app = Factory::work($config);\n```\n\n----------------------------------------\n\nTITLE: Creating H5 Contract with EasyWeChat\nDESCRIPTION: Sets up a contract for H5 (mobile web) implementation using provided parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/contract.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$result = $app->contract->h5(array $params);\n```\n\n----------------------------------------\n\nTITLE: Generating Pre-Authorization URL for WeChat Platform\nDESCRIPTION: Generates a pre-authorization URL for the WeChat platform with a callback URI parameter.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/open-platform/index.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$openPlatform->getPreAuthorizationUrl('https://easywechat.com/callback');\n```\n\n----------------------------------------\n\nTITLE: Retrieving Check-in Schedules in PHP with EasyWeChat\nDESCRIPTION: Fetches check-in schedules for specified users within a date range using the OA module of EasyWeChat.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/oa.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n$app->oa->checkinSchedus(int $startTime, int $endTime, array $userids);\n```\n\n----------------------------------------\n\nTITLE: Check Broadcast Message Status in PHP\nDESCRIPTION: Method for checking the status of a broadcast message using message ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/broadcasting.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\n$app->broadcasting->status($msgId);\n```\n\n----------------------------------------\n\nTITLE: Configuring JSSDK for WeChat Payment in PHP\nDESCRIPTION: Sets up the configuration for the JSSDK module using EasyWeChat Factory. Includes necessary parameters like app_id, mch_id, key, cert_path, and notify_url.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/jssdk.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Factory;\n\n$config = [\n    // 前面的appid什么的也得保留哦\n    'app_id'             => 'xxxx',\n    'mch_id'             => 'your-mch-id',\n    'key'                => 'key-for-signature',\n    'cert_path'          => 'path/to/your/cert.pem', // XXX: 绝对路径！！！！\n    'key_path'           => 'path/to/your/key',      // XXX: 绝对路径！！！！\n    'notify_url'         => '默认的订单回调地址',     // 你也可以在下单时单独设置来想覆盖它\n    // 'device_info'     => '013467007045764',\n    // 'sub_app_id'      => '',\n    // 'sub_merchant_id' => '',\n    // ...\n];\n\n$payment = Factory::payment($config);\n\n$jssdk = $payment->jssdk;\n```\n\n----------------------------------------\n\nTITLE: Listing Authorized Accounts in PHP\nDESCRIPTION: Retrieves a list of authorized accounts with pagination support through offset and count parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/open-platform/index.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$openPlatform->getAuthorizers(int $offset = 0, int $count = 500)\n```\n\n----------------------------------------\n\nTITLE: Initializing QR Code Component in EasyWeChat PHP\nDESCRIPTION: Sets up an instance of the QR code component using the EasyWeChat Application class. This is the required initialization before accessing any QR code functionality.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/qrcode.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nuse EasyWeChat\\Foundation\\Application;\n\n// ...\n\n$app = new Application($options);\n\n$qrcode = $app->qrcode;\n```\n\n----------------------------------------\n\nTITLE: Managing Customer Tags in PHP\nDESCRIPTION: Shows how to manage customer tags, including retrieving, adding, updating, and deleting tags.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/external-contact.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n// Get enterprise tag library\n$tagIds = [\n    \"etXXXXXXXXXX\",\n    \"etYYYYYYYYYY\"\n];\n$app->external_contact->getCorpTags(array $tagIds=[]);\n\n// Add enterprise customer tags\n$params = [\n    \"group_id\" => \"GROUP_ID\",\n    \"group_name\" => \"GROUP_NAME\",\n    \"order\" => 1,\n    \"tag\" => [\n        [\n            \"name\" => \"TAG_NAME_1\",\n            \"order\" => 1\n        ],\n        [\n            \"name\" => \"TAG_NAME_2\",\n            \"order\" => 2\n        ]\n    ]\n];\n$app->external_contact->addCorpTag(array $params);\n\n// Edit enterprise customer tag\n$id = 'TAG_ID';\n$name = 'NEW_TAG_NAME';\n$order = 1;\n$app->external_contact->updateCorpTag(string $id, string $name, int $order = 1);\n\n// Delete enterprise customer tags\n$tagId = [\n    'TAG_ID_1',\n    'TAG_ID_2'\n];\n$groupId = [\n    'GROUP_ID_1',\n    'GROUP_ID_2'\n];\n$app->external_contact->deleteCorpTag(array $tagId,array $groupId);\n\n// Edit customer enterprise tags\n$params = [\n    \"userid\" => \"zhangsan\",\n    \"external_userid\" => \"woAJ2GCAAAd1NPGHKSD4wKmE8Aabj9AAA\",\n    \"add_tag\" => [\"TAGID1\", \"TAGID2\"],\n    \"remove_tag\" => [\"TAGID3\", \"TAGID4\"]\n];\n$app->external_contact->markTags(array $params);\n```\n\n----------------------------------------\n\nTITLE: Initializing Web Contract with EasyWeChat\nDESCRIPTION: Creates a web-based contract with specified merchant ID, plan ID, contract code, display account and notification URL. Note that appid, version, timestamp and sign parameters are optional.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/contract.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$result = $app->contract->web([\n    'mch_id' => '1200009811',\n    'plan_id' => '12535',\n    'contract_code' => '100000',\n    'contract_display_account' => '微信代扣',\n    'notify_url' => 'https://pay.weixin.qq.com/wxpay/pay.action',\n]);\n```\n\n----------------------------------------\n\nTITLE: Previewing Messages to Specific OpenID with EasyWeChat\nDESCRIPTION: Methods for previewing different types of messages (text, news, voice, image, video, and cards) to a specific user by their OpenID before broadcasting.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/broadcasting.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n$app->broadcasting->previewText($text, $openId);\n$app->broadcasting->previewNews($mediaId, $openId);\n$app->broadcasting->previewVoice($mediaId, $openId);\n$app->broadcasting->previewImage($mediaId, $openId);\n$app->broadcasting->previewVideo($message, $openId);\n$app->broadcasting->previewCard($cardId, $openId);\n```\n\n----------------------------------------\n\nTITLE: Example Usage of Unlimited Mini Program Code Generation in PHP\nDESCRIPTION: Demonstrates how to generate and save unlimited mini program codes with a scene value. Shows specifying the page path and width configuration, along with examples of saving the response as a file.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/app_code.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$response = $app->app_code->getUnlimit('scene-value', [\n    'page'  => 'path/to/page',\n    'width' => 600,\n]);\n// $response 成功时为 EasyWeChat\\Kernel\\Http\\StreamResponse 实例，失败为数组或你指定的 API 返回类型\n\n// 保存小程序码到文件\nif ($response instanceof \\EasyWeChat\\Kernel\\Http\\StreamResponse) {\n    $filename = $response->save('/path/to/directory');\n}\n// 或\nif ($response instanceof \\EasyWeChat\\Kernel\\Http\\StreamResponse) {\n    $filename = $response->saveAs('/path/to/directory', 'appcode.png');\n}\n```\n\n----------------------------------------\n\nTITLE: Managing Contact Transfer\nDESCRIPTION: Methods for handling contact reassignment when employees leave and transferring external contacts between users.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/external-contact.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$pageId = 0;\n$pageSize = 1000;\n$app->external_contact->getUnassigned($pageId, $pageSize);\n```\n\nLANGUAGE: php\nCODE:\n```\n$externalUserId = 'woAJ2GCAAAXtWyujaWJHDDGi0mACH71w';\n$handoverUserId = 'zhangsan';\n$takeoverUserId = 'lisi';\n\n$app->external_contact->transfer($externalUserId, $handoverUserId, $takeoverUserId);\n```\n\n----------------------------------------\n\nTITLE: Querying Commission Product Import/Update Status with EasyWeChat in PHP\nDESCRIPTION: This snippet demonstrates how to check the status of product import or update operations. It uses the status_ticket returned from the add or update operation to retrieve detailed results, including success and failure counts.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/goods.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$status_ticket = '115141102647330200';\n\n$result = $app->goods->status($status_ticket);\n\n// $result:\n//{\n//    \"errcode\": 0,\n//    \"errmsg\": \"ok\",\n//    \"result\": {\n//        \"succ_cnt\": 2,\n//        \"fail_cnt\": 0,\n//        \"total_cnt\": 2,\n//        \"progress\": \"100.00%\",\n//        \"statuses\": [\n//            {\n//                \"pid\": \"pid001\",\n//                \"ret\": 0,\n//                \"err_msg\": \"success\",\n//                \"err_msg_zh_cn\": \"成功\"\n//            },\n//            {\n//                \"pid\": \"pid002\",\n//                \"ret\": 0,\n//                \"err_msg\": \"success\",\n//                \"err_msg_zh_cn\": \"成功\"\n//            }\n//        ]\n//    }\n//}\n```\n\n----------------------------------------\n\nTITLE: Initializing EasyWeChat Work Application in PHP\nDESCRIPTION: Sets up the configuration and creates an instance of the EasyWeChat Work application. Requires corp_id and secret as configuration parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/oa.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$config = [\n    'corp_id' => 'xxxxxxxxxxxxxxxxx',\n    'secret'   => 'xxxxxxxxxx',\n    //...\n];\n\n$app = Factory::work($config);\n```\n\n----------------------------------------\n\nTITLE: Creating APP-based Contract Agreement\nDESCRIPTION: Initializes a contract agreement through mobile APP channel using the EasyWeChat SDK.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/contract.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$result = $app->contract->app(array $params);\n```\n\n----------------------------------------\n\nTITLE: Updating Store Information - PHP\nDESCRIPTION: Updates specific fields of an existing store location. Supports updating service information including photos, operating hours, recommendations, special services, introduction, average price and phone number.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/poi.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$app->poi->update($poiId, $data);\n```\n\nLANGUAGE: php\nCODE:\n```\n$data = array(\n         \"telephone\" => \"020-12345678\",\n         \"recommend\" => \"麦辣鸡腿堡套餐,麦乐鸡,全家桶\",\n         //...\n        );\n\n$res = $app->poi->update(271262077, $data); //true or exception\n```\n\n----------------------------------------\n\nTITLE: Deleting Menus in EasyWeChat (PHP)\nDESCRIPTION: Illustrates two methods for deleting menus: deleting all menus or deleting a specific menu by its ID. The menu ID is required when deleting personalized menus and can be obtained from the query interface.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/menu.md#2025-04-22_snippet_4\n\nLANGUAGE: PHP\nCODE:\n```\n$app->menu->delete(); // 全部\n$app->menu->delete($menuId);\n```\n\n----------------------------------------\n\nTITLE: Previewing Broadcast Message to Specific OpenID User\nDESCRIPTION: Sends a preview of a broadcast message to a specific user identified by openId before sending it to a larger audience. Supports all message types.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/broadcast.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$broadcast->preview($messageType, $message, $openId);\n\n// 别名方式\n$broadcast->previewText($text, $openId);\n$broadcast->previewNews($mediaId, $openId);\n$broadcast->previewVoice($mediaId, $openId);\n$broadcast->previewImage($mediaId, $openId);\n$broadcast->previewVideo($message, $openId);\n$broadcast->previewCard($cardId, $openId);\n```\n\n----------------------------------------\n\nTITLE: Implementing WeixinJSBridge Payment in JavaScript\nDESCRIPTION: Uses the WeixinJSBridge.invoke method to initiate the payment process with the configuration generated by PHP.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/jssdk.md#2025-04-22_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nWeixinJSBridge.invoke(\n       'getBrandWCPayRequest', <?= $json ?>,\n       function(res){\n           if(res.err_msg == \"get_brand_wcpay_request:ok\" ) {\n                // 使用以上方式判断前端返回,微信团队郑重提示：\n                // res.err_msg将在用户支付成功后返回\n                // ok，但并不保证它绝对可靠。\n           }\n       }\n   );\n```\n\n----------------------------------------\n\nTITLE: Updating Task Card Message Status in EasyWeChat PHP\nDESCRIPTION: Illustrates the method for updating the status of a task card message. It requires user IDs, agent ID, task ID, and optionally a replace name for the status update.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/message.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$messenger->updateTaskcard(array $userids, int $agentId, string $taskId, string $replaceName = '已收到')\n```\n\n----------------------------------------\n\nTITLE: Initializing WeChat Work App Instance in PHP\nDESCRIPTION: Creates an instance of the WeChat Work app with configuration and accesses various external contact modules.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/external-contact.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$config = [\n    'corp_id' => 'xxxxxxxxxxxxxxxxx',\n    'secret'   => 'xxxxxxxxxx',\n    ...\n];\n\n$app = Factory::work($config);\n\n// 基础接口\n$app->external_contact;\n\n// 「联系我」\n$app->contact_way;\n\n// 消息管理\n$app->external_contact_message;\n\n// 数据统计\n$app->external_contact_statistics;\n```\n\n----------------------------------------\n\nTITLE: Managing Contact Ways in PHP\nDESCRIPTION: Demonstrates how to create, retrieve, update, and delete 'Contact Me' configurations.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/external-contact.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n// Add 'Contact Me' way\n$type = 1;\n$scene = 1;\n$config = [\n   'style' => 1,\n   'remark' => '渠道客户',\n   'skip_verify' => true,\n   'state' => 'teststate',\n   'user' => ['UserID1', 'UserID2', 'UserID3'],\n];\n$app->contact_way->create($type, $scene, $config);\n\n// Get 'Contact Me' way\n$configId = '42b34949e138eb6e027c123cba77fad7';\n$app->contact_way->get($configId);\n\n// Update 'Contact Me' way\n$config = [\n   'style' => 1,\n   'remark' => '渠道客户2',\n   'skip_verify' => true,\n   'state' => 'teststate2',\n   'user' => ['UserID4', 'UserID5', 'UserID6'],\n];\n$app->contact_way->update($configId, $config);\n\n// Delete 'Contact Me' way\n$app->contact_way->delete($configId);\n```\n\n----------------------------------------\n\nTITLE: Querying Red Packet Information with EasyWeChat in PHP\nDESCRIPTION: Shows how to query information about a previously sent red packet, including its details and recipient status. Applies to both normal and group red packets.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/redpack.md#2025-04-22_snippet_6\n\nLANGUAGE: PHP\nCODE:\n```\n$mchBillNo = \"商户系统内部的订单号（mch_billno）\";\n$redpack->info($mchBillNo);\n```\n\n----------------------------------------\n\nTITLE: Sending Card Messages with EasyWeChat Broadcasting\nDESCRIPTION: Methods for sending WeChat card messages to all users, specific users by openid list, or users in a specific tag group. Requires a valid card ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/broadcasting.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$app->broadcasting->sendCard($cardId);\n$app->broadcasting->sendCard($cardId, [$openid1, $openid2]);\n$app->broadcasting->sendCard($cardId, $tagId);\n```\n\n----------------------------------------\n\nTITLE: Handling Authorization Code in PHP\nDESCRIPTION: Processes the authorization code to obtain interface credentials and authorization information. Can extract auth_code from URL parameters if not provided.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/open-platform/index.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$openPlatform->handleAuthorize(string $authCode = null);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Customer Service Account Lists in PHP with EasyWeChat\nDESCRIPTION: Demonstrates how to fetch all customer service accounts and online accounts using EasyWeChat. These methods return lists of available customer service representatives.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/staff.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$staff->lists();\n\n$staff->onlines();\n```\n\n----------------------------------------\n\nTITLE: Listing Added Plugins in WeChat Mini Program using PHP\nDESCRIPTION: This snippet retrieves a list of all plugins that have been added to the WeChat Mini Program.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/mini-program/plugin.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$app->plugin->list();\n```\n\n----------------------------------------\n\nTITLE: Retrieving Check-in Records with EasyWeChat OA Module in PHP\nDESCRIPTION: This snippet shows how to use the checkinRecords method to retrieve check-in data. It allows fetching all check-in types, or specifying upper/lower work check-ins or outside check-ins. The method requires start and end timestamps, a list of users, and optionally a check-in type.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/oa.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n// 全部打卡数据\n$app->oa->checkinRecords(1492617600, 1492790400, [\"james\",\"paul\"]);\n\n// 获取上下班打卡\n$app->oa->checkinRecords(1492617600, 1492790400, [\"james\",\"paul\"], 1);\n\n// 获取外出打卡\n$app->oa->checkinRecords(1492617600, 1492790400, [\"james\",\"paul\"], 2);\n```\n\n----------------------------------------\n\nTITLE: Implementing JSSDK Payment in JavaScript\nDESCRIPTION: Uses the wx.chooseWXPay method to initiate the payment process with the configuration generated by PHP.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/jssdk.md#2025-04-22_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nwx.chooseWXPay({\n    timestamp: <?= $config['timestamp'] ?>,\n    nonceStr: '<?= $config['nonceStr'] ?>',\n    package: '<?= $config['package'] ?>',\n    signType: '<?= $config['signType'] ?>',\n    paySign: '<?= $config['paySign'] ?>', // 支付签名\n    success: function (res) {\n        // 支付成功后的回调函数\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Retrieving Store Information - PHP\nDESCRIPTION: Retrieves detailed information for a specific store location using its POI ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/poi.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$app->poi->get($poiId);\n```\n\nLANGUAGE: php\nCODE:\n```\n$info = $app->poi->get(271262077);\n```\n\n----------------------------------------\n\nTITLE: Retrieving a Customer Service Agent's Sessions in PHP\nDESCRIPTION: Fetches a list of all active sessions for a specific customer service account, showing which users they are currently engaged with.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/customer_service.md#2025-04-22_snippet_16\n\nLANGUAGE: php\nCODE:\n```\n$app->customer_service_session->list('test1@test');\n```\n\n----------------------------------------\n\nTITLE: Uploading Voice to WeChat Work API\nDESCRIPTION: Uploads a voice file to WeChat Work platform. Files must be under 2MB, in AMR format, and playback duration should not exceed 60 seconds.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/media.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$app->media->uploadVoice($path);\n```\n\n----------------------------------------\n\nTITLE: Broadcasting Message to All Followers in WeChat\nDESCRIPTION: Sends a broadcast message to all followers using the generic send method or type-specific methods. Supports text, news, voice, image, video, and card message types.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/broadcast.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$broadcast->send($messageType, $message);\n\n// 别名方式\n$broadcast->sendText(\"大家好！欢迎使用 EasyWeChat。\");\n$broadcast->sendNews($mediaId);\n$broadcast->sendVoice($mediaId);\n$broadcast->sendImage($mediaId);\n//视频：\n// - 群发给组用户，或者预览群发视频时 $message 为 media_id\n// - 群发给指定用户时为数组：[$media_Id, $title, $description]\n$broadcast->sendVideo($message);\n$broadcast->sendCard($cardId);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Media from WeChat Work API\nDESCRIPTION: Retrieves previously uploaded media file using its media ID from WeChat Work platform.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/media.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$app->media->get($mediaId);\n```\n\n----------------------------------------\n\nTITLE: Applying for a Plugin in WeChat Mini Program using PHP\nDESCRIPTION: This snippet demonstrates how to apply for using a plugin in a WeChat Mini Program. It requires the plugin's AppID as input.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/mini-program/plugin.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$pluginAppId = 'xxxxxxxxx';\n\n$app->plugin->apply($pluginAppId);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Department Users in EasyWeChat Contacts in PHP\nDESCRIPTION: Shows how to fetch users belonging to a specific department in the EasyWeChat contacts system. It also demonstrates how to recursively retrieve users from sub-departments.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/contacts.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$contacts->user->getDepartmentUsers($departmentId);\n// 递归获取子部门下面的成员\n$contacts->user->getDepartmentUsers($departmentId, true);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Waybill Data in EasyWeChat (PHP)\nDESCRIPTION: Fetches detailed information about a specific waybill through the WeChat Logistics API. Requires waybill identification data as input parameter.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/express.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$app->express->getWaybill($data);\n```\n\n----------------------------------------\n\nTITLE: Sending Image Broadcast Messages in PHP\nDESCRIPTION: Methods for sending image broadcast messages using media ID to different target audiences.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/broadcasting.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$app->broadcasting->sendImage($mediaId);\n$app->broadcasting->sendImage($mediaId, [$openid1, $openid2]);\n$app->broadcasting->sendImage($mediaId, $tagId);\n```\n\n----------------------------------------\n\nTITLE: Mentioning Users in Text Messages\nDESCRIPTION: Demonstrates how to mention users in text messages using userId, mobile numbers, or @all mentions.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/group-robot.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Work\\GroupRobot\\Messages\\Text;\n\n// 通过构造函数传参\n$text = new Text('hello', 'her-cat', '18700000000');\n//$text = new Text('hello', ['her-cat', 'overtrue'], ['18700000000', '18700000001']);\n\n// 通过 userId\n$text->mention('her-cat');\n//$text->mention(['her-cat', 'overtrue']);\n\n// 通过手机号\n$text->mentionByMobile('18700000000');\n//$text->mentionByMobile(['18700000000', '18700000001']);\n\n// @所有人\n$text->mention('@all');\n//$text->mentionByMobile('@all');\n\n$messenger->message($text)->toGroup($groupKey)->send();\n```\n\n----------------------------------------\n\nTITLE: Uploading Permanent Image in PHP\nDESCRIPTION: Demonstrates how to upload a permanent image file to WeChat servers. Returns media_id and URL. Image must not contain sensitive content.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/material.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$result = $material->uploadImage(\"/path/to/your/image.jpg\");\nvar_dump($result);\n// {\n//    \"media_id\":MEDIA_ID,\n//    \"url\":URL\n// }\n```\n\n----------------------------------------\n\nTITLE: Uploading Voice Material in WeChat using EasyWeChat PHP SDK\nDESCRIPTION: This code uploads a voice file as material to WeChat servers. The file must not exceed 5MB, 60 seconds in length, and should be in mp3, wma, wav, or amr format.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/material.md#2025-04-22_snippet_1\n\nLANGUAGE: PHP\nCODE:\n```\n$result = $app->material->uploadVoice(\"/path/to/your/voice.mp3\");\n// {\n//    \"media_id\":MEDIA_ID,\n// }\n```\n\n----------------------------------------\n\nTITLE: Fetching Employee Check-in Rules in PHP with EasyWeChat\nDESCRIPTION: Retrieves check-in rules for specific employees at a given datetime using the OA module of EasyWeChat.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/oa.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$app->oa->checkinRules(int $datetime, array $userList);\n```\n\n----------------------------------------\n\nTITLE: Obtaining Customer Service Instance in EasyWeChat PHP\nDESCRIPTION: This code snippet demonstrates how to get the customer service instance from the EasyWeChat application object. This instance is used to interact with WeChat's customer service message API.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/mini-program/customer_service.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$service = $app->customer_service;\n```\n\n----------------------------------------\n\nTITLE: Getting Permanent Authorization Code in PHP\nDESCRIPTION: Retrieves the permanent authorization code for an enterprise using a temporary authorization code.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/open-work/service.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$app->corp->getPermanentByCode(string $preAuthCode);\n```\n\n----------------------------------------\n\nTITLE: Creating Mini Program Contract Agreement\nDESCRIPTION: Configures and initializes a contract agreement through WeChat Mini Program using the JSSDK.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/contract.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$result = $app->jssdk->contractConfig(array $params);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Media in PHP using EasyWeChat\nDESCRIPTION: Retrieves a media file from WeChat's server using its media ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/media.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$app->media->get($mediaId);\n```\n\n----------------------------------------\n\nTITLE: Performing Single Profit Sharing in EasyWeChat PHP\nDESCRIPTION: Executes a single profit sharing operation, distributing funds to multiple receivers. It requires the transaction ID, out trade number, and an array of receivers with their respective details.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/profit-sharing.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$transaction_id = \"***\";\n$out_trade_no = \"***\";\n$receivers = [\n\t[\n\t\t\"type\"        => \"PERSONAL_OPENID\",\n\t\t\"account\"     => \"***\",\n\t\t\"amount\"      => 2,\n\t\t\"description\" => \"分到个人\"\n\t],\n\t[\n\t\t\"type\"        => \"MERCHANT_ID\",\n\t\t\"account\"     => \"***\",\n\t\t\"amount\"      => 1,\n\t\t\"description\" => \"分到商户\"\n\t]\n];\n$sharing = $payment->profit_sharing->share($transaction_id,$out_trade_no,$receivers);\n```\n\n----------------------------------------\n\nTITLE: Unbinding a Plugin from WeChat Mini Program using PHP\nDESCRIPTION: This code shows how to remove a previously added plugin from a WeChat Mini Program. It requires the plugin's AppID to identify which plugin to unbind.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/mini-program/plugin.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$pluginAppId = 'xxxxxxxxx';\n\n$app->plugin->unbind($pluginAppId);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Detailed Department Users in EasyWeChat Contacts in PHP\nDESCRIPTION: Illustrates how to fetch detailed information for users belonging to a specific department in the EasyWeChat contacts system, including an option for recursive retrieval from sub-departments.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/contacts.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$contacts->user->getDetailedDepartmentUsers($departmentId);\n// 递归获取子部门下面的成员\n$contacts->user->getDetailedDepartmentUsers($departmentId, true);\n```\n\n----------------------------------------\n\nTITLE: Checking Electronic Waybill Balance in EasyWeChat (PHP)\nDESCRIPTION: Retrieves the remaining balance for electronic waybills specifically for franchised express companies. Requires delivery ID and business ID parameters. This API is only available when using franchised express companies.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/express.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$app->express->getBalance($deliveryId, $bizId);\n\n// 例如：\n\n$app->express->getBalance('YTO', 'xyz');\n```\n\n----------------------------------------\n\nTITLE: Sending Card Broadcast Messages in PHP\nDESCRIPTION: Methods for sending card broadcast messages using card ID to different target audiences.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/broadcasting.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$app->broadcasting->sendCard($cardId);\n$app->broadcasting->sendCard($cardId, [$openid1, $openid2]);\n$app->broadcasting->sendCard($cardId, $tagId);\n```\n\n----------------------------------------\n\nTITLE: Configuring Follow Functionality in EasyWeChat Micro Merchant (PHP)\nDESCRIPTION: Sets up the follow functionality configuration for a micro merchant. Requires the sub AppID and subscribe AppID parameters, with optional receipt AppID and sub merchant ID parameters. Note that between subscribe_appid and receipt_appid, only one is required.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/micro-merchant/merchant-config.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$response = $app->merchantConfig->setFollowConfig(string $subAppId, string $subscribeAppId, string $receiptAppId = '', string $subMchId = '');\n```\n\n----------------------------------------\n\nTITLE: Uploading Permanent News Articles in PHP\nDESCRIPTION: Demonstrates how to upload single or multiple news articles as permanent content.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/material.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Message\\Article;\n// 上传单篇图文\n$article = new Article([\n    'title' => 'xxx',\n    'thumb_media_id' => $mediaId,\n    //...\n  ]);\n$material->uploadArticle($article);\n\n// 或者多篇图文\n$material->uploadArticle([$article, $article2, ...]);\n```\n\n----------------------------------------\n\nTITLE: Retrieving QR Code URL with EasyWeChat in PHP\nDESCRIPTION: Generates the URL for a QR code using the provided ticket. This URL can be used to display or download the QR code image.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/basic-services/qrcode.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$url = $app->qrcode->url($ticket);\n// https://api.weixin.qq.com/cgi-bin/showqrcode?ticket=TICKET\n```\n\n----------------------------------------\n\nTITLE: Retrieving Monthly Check-in Data in PHP with EasyWeChat\nDESCRIPTION: Fetches monthly check-in data for specified users within a date range using the OA module of EasyWeChat.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/oa.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$app->oa->checkinMonthData(int $startTime, int $endTime, array $userids);\n```\n\n----------------------------------------\n\nTITLE: Getting Plugin Users for WeChat Mini Program Developers in PHP\nDESCRIPTION: Code for plugin developers to get a list of Mini Programs that are using their plugin. Supports pagination with page number and size parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/plugin.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$page = 1;\n$size = 10;\n\n$app->plugin_dev->getUsers($page, $size);\n```\n\n----------------------------------------\n\nTITLE: Getting Pre-authorization Code in PHP\nDESCRIPTION: Obtains a pre-authorization code for the corporate application.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/open-work/service.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$app->corp->getPreAuthCode();\n```\n\n----------------------------------------\n\nTITLE: Converting User ID to OpenID in EasyWeChat Contacts in PHP\nDESCRIPTION: Demonstrates the conversion of a user ID to an OpenID in the EasyWeChat contacts system, with an option to specify an agent ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/contacts.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n$contacts->user->userIdToOpenid($userId);\n// 或者指定应用 ID\n$contacts->user->userIdToOpenid($userId, $agentId);\n```\n\n----------------------------------------\n\nTITLE: Uploading Voice in PHP using EasyWeChat\nDESCRIPTION: Uploads a voice file to WeChat's temporary media storage. The file must be under 2MB, no longer than 60 seconds, and in AMR or MP3 format.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/basic-services/media.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$app->media->uploadVoice($path);\n```\n\n----------------------------------------\n\nTITLE: Adding Profit Sharing Receivers in EasyWeChat PHP\nDESCRIPTION: Demonstrates how to add profit sharing receivers, including both personal OpenID and merchant ID types. This step is necessary before initiating profit sharing requests.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/profit-sharing.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$receiver = [\n\t\"type\"          => \"PERSONAL_OPENID\",\n\t\"account\"       => \"…………\",//PERSONAL_OPENID：个人openid\n\t\"name\"          => \"张三\",//接收方真实姓名\n\t\"relation_type\" => \"PARTNER\"\n];\n$payment->profit_sharing->addReceiver($receiver);\n$receiver = [\n\t\"type\"          => \"MERCHANT_ID\",\n\t\"account\"       => \"132456798\",//MERCHANT_ID：商户ID\n\t\"name\"          => \"商户全称\",//商户全称\n\t\"relation_type\" => \"PARTNER\"\n];\n$payment->profit_sharing->addReceiver($receiver);\n```\n\n----------------------------------------\n\nTITLE: Fetching Daily Check-in Data in PHP with EasyWeChat\nDESCRIPTION: Retrieves daily check-in data for specified users within a date range using the OA module of EasyWeChat.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/oa.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$app->oa->checkinDayData(int $startTime, int $endTime, array $userids);\n```\n\n----------------------------------------\n\nTITLE: Sending Normal Red Packet with EasyWeChat in PHP\nDESCRIPTION: Demonstrates how to send a normal red packet using EasyWeChat. Includes parameters for recipient, amount, and messaging.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/redpack.md#2025-04-22_snippet_2\n\nLANGUAGE: PHP\nCODE:\n```\n$redpackData = [\n    'mch_billno'   => 'xy123456',\n    'send_name'    => '测试红包',\n    're_openid'    => 'oxTWIuGaIt6gTKsQRLau2M0yL16E',\n    'total_num'    => 1,  //固定为1，可不传\n    'total_amount' => 100,  //单位为分，不小于100\n    'wishing'      => '祝福语',\n    'client_ip'    => '192.168.0.1',  //可不传，不传则由 SDK 取当前客户端 IP\n    'act_name'     => '测试活动',\n    'remark'       => '测试备注',\n    // ...\n];\n\n$result = $redpack->sendNormal($redpackData);\n```\n\n----------------------------------------\n\nTITLE: Fetching User List in EasyWeChat PHP\nDESCRIPTION: This snippet demonstrates how to retrieve a list of users. It returns user data including total count, OpenIDs, and the next OpenID for pagination.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/user.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$userService->lists($nextOpenId = null);  // $nextOpenId 可选\n```\n\nLANGUAGE: php\nCODE:\n```\n$users = $userService->lists();\n\n// result\n{\n \"total\": 2,\n \"count\": 2,\n \"data\": {\n   \"openid\": [\n     \"\",\n     \"OPENID1\",\n     \"OPENID2\"\n   ]\n },\n \"next_openid\": \"NEXT_OPENID\"\n}\n\n$users->total; // 2\n```\n\n----------------------------------------\n\nTITLE: Sending Image Messages with EasyWeChat Broadcasting\nDESCRIPTION: Methods for sending image messages to all users, specific users by openid list, or users in a specific tag group. Requires a valid media ID for the image.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/broadcasting.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$app->broadcasting->sendImage($mediaId);\n$app->broadcasting->sendImage($mediaId, [$openid1, $openid2]);\n$app->broadcasting->sendImage($mediaId, $tagId);\n```\n\n----------------------------------------\n\nTITLE: Creating Broadcast Message in PHP using EasyWeChat\nDESCRIPTION: Creates a video message for broadcasting using a previously uploaded media_id. Returns a new media_id for the broadcast message.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/basic-services/media.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$app->media->createVideoForBroadcasting($mediaId, $title, $description);\n\n//{\n//  \"type\":\"video\",\n//  \"media_id\":\"IhdaAQXuvJtGzwwc0abfXnzeezfO0NgPK6AQYShD8RQYMTtfzbLdBIQkQziv2XJc\",\n//  \"created_at\":1398848981\n//}\n```\n\n----------------------------------------\n\nTITLE: Uploading Broadcasting Video in EasyWeChat\nDESCRIPTION: Uploads a video specifically for mass messaging. Returns media_id, title, and description in response.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/basic-services/media.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$app->media->uploadVideoForBroadcasting($path, $title, $description);\n```\n\n----------------------------------------\n\nTITLE: Query Bank Card Transfer Status\nDESCRIPTION: Shows how to query the status of a bank card transfer using the partner trade number.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/transfer.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$partnerTradeNo = 1233455;\n$app->transfer->queryBankCardOrder($partnerTradeNo);\n```\n\n----------------------------------------\n\nTITLE: Listing Authorized Accounts\nDESCRIPTION: Retrieves a paginated list of authorized accounts with optional offset and count parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/open-platform/index.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$openPlatform->getAuthorizers(int $offset = 0, int $count = 500)\n```\n\n----------------------------------------\n\nTITLE: Retrieving Approval Records in PHP with EasyWeChat\nDESCRIPTION: Fetches approval records within a specified date range. Optionally allows specifying the first approval number to start from.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/oa.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\nmixed approvalRecords(int $startTime, int $endTime, int $nextNumber = null)\n```\n\n----------------------------------------\n\nTITLE: Getting Enterprise Authorization Info in PHP\nDESCRIPTION: Retrieves authorization information for an enterprise using corp_id and permanent authorization code.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/open-work/service.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$app->corp->getAuthorization(string $authCorpId, string $permanentCode);\n```\n\n----------------------------------------\n\nTITLE: Constructing OAuth2 URL in PHP\nDESCRIPTION: Generates an OAuth2 URL for third-party web authorization with customizable redirect URI, scope, and state parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/open-work/service.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$app->corp->getOAuthRedirectUrl(string $redirectUri = '', string $scope = 'snsapi_userinfo', string $state = null);\n```\n\n----------------------------------------\n\nTITLE: Converting Mobile Number to User ID in EasyWeChat Contacts in PHP\nDESCRIPTION: Illustrates the process of converting a mobile phone number to a user ID in the EasyWeChat contacts system.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/contacts.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n$contacts->user->mobileToUserId($mobile);\n```\n\n----------------------------------------\n\nTITLE: Uploading Thumbnail in PHP using EasyWeChat\nDESCRIPTION: Uploads a thumbnail image for use as a video or music cover. The image must be under 64KB and in JPG format.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/basic-services/media.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$app->media->uploadThumb($path);\n```\n\n----------------------------------------\n\nTITLE: Querying Profit Sharing Results in EasyWeChat PHP\nDESCRIPTION: Retrieves the results of a profit sharing operation using the transaction ID and out trade number. The response includes details about the sharing status and receivers.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/profit-sharing.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$res = $payment->profit_sharing->query($transaction_id,$out_trade_no);\n```\n\n----------------------------------------\n\nTITLE: Getting User Info by Code in PHP\nDESCRIPTION: Retrieves enterprise member information using an authorization code.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/open-work/service.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n$app->corp->getUserByCode(string $code);\n```\n\n----------------------------------------\n\nTITLE: Fetching Playback Source Videos for Live Streams with EasyWechat in PHP\nDESCRIPTION: This code snippet shows how to retrieve playback source videos for a specific live streaming room using EasyWechat. It requires the room ID as input and uses the getPlaybacks() method of the live module.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/mini-program/live.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$roomId = 1;    //直播房间id\n\n$app->live->getPlaybacks($roomId);\n```\n\n----------------------------------------\n\nTITLE: Updating Store Mini-Program Information\nDESCRIPTION: Updates existing store mini-program information including avatar and introduction.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/store.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$data = [\n    \"headimg_mediaid\" => \"RTZgKZ386yFn5kQSWLTxe4bqxwgzGBjs3OE02cg9CVQk1wRVE3c8fjUFX7jvpi-P\",\n    \"intro\"           => \"麦辣鸡腿堡套餐,麦乐鸡,全家桶\",\n];\n\n$result = $app->store->updateMerchant($data);\n```\n\n----------------------------------------\n\nTITLE: Setting a Customer Service Avatar in PHP\nDESCRIPTION: Updates the profile picture of a customer service account using a local image file path.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/customer_service.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$app->customer_service->setAvatar('foo@test', $avatarPath); // $avatarPath 为本地图片路径，非 URL\n```\n\n----------------------------------------\n\nTITLE: Fetching Template Keywords List\nDESCRIPTION: Retrieves the list of keywords for a specific template title using template ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/mini-program/subscribe_message.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$tid = 563;     // 模板标题 id，可通过接口获取，也可登录小程序后台查看获取\n\n$app->subscribe_message->getTemplateKeywords($tid);\n```\n\n----------------------------------------\n\nTITLE: Generating Shared Address Configuration in PHP\nDESCRIPTION: Creates the configuration for the shared address feature using an access token obtained through OAuth authorization.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/jssdk.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n$configForPickAddress = $jssdk->shareAddressConfig($token);\n\n// 拿着这个生成好的配置 $configForPickAddress 去订单页（或者直接显示订单页）写 js 调用了\n// ...\n```\n\n----------------------------------------\n\nTITLE: Creating Temporary QR Code in EasyWeChat PHP\nDESCRIPTION: Generates a temporary QR code with a specified scene ID and expiration time. Returns a Bag object containing the ticket, expiration seconds, and URL for the QR code.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/qrcode.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$result = $qrcode->temporary(56, 6 * 24 * 3600);\n\n$ticket = $result->ticket;// 或者 $result['ticket']\n$expireSeconds = $result->expire_seconds; // 有效秒数\n$url = $result->url; // 二维码图片解析后的地址，开发者可根据该地址自行生成需要的二维码图片\n```\n\n----------------------------------------\n\nTITLE: Retrieving Mini Program Template Library Titles in PHP\nDESCRIPTION: This snippet demonstrates how to get a list of template titles from the mini program template library. It uses the 'list' method of the template_message object, taking offset and count as parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/template_message.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$app->template_message->list($offset, $count);\n```\n\n----------------------------------------\n\nTITLE: Getting Application Administrators List in PHP\nDESCRIPTION: Retrieves the list of administrators for an application using corp_id and agent_id.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/open-work/service.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$app->corp->getManagers(string $authCorpId, string $agentId);\n```\n\n----------------------------------------\n\nTITLE: Exchanging Authorization Code in EasyWeChat PHP\nDESCRIPTION: This code demonstrates how to exchange an authorization code for the public account's API credentials and authorization information using EasyWeChat.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/open_platform.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n// 使用授权码换取公众号的接口调用凭据和授权信息\n// Optional: $authorizationCode 不传值时会自动获取 URL 中 auth_code 值\n$openPlatform->getAuthorizationInfo($authorizationCode = null);\n```\n\n----------------------------------------\n\nTITLE: Retrieving QR Code URL with EasyWeChat in PHP\nDESCRIPTION: This snippet shows how to get the URL for a QR code using its ticket. The resulting URL can be used to display the QR code image.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/basic-services/qrcode.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$url = $app->qrcode->url($ticket);\n// https://api.weixin.qq.com/cgi-bin/showqrcode?ticket=TICKET\n```\n\n----------------------------------------\n\nTITLE: Uploading Permanent Voice File in PHP\nDESCRIPTION: Shows how to upload a permanent voice file under 5MB and 60 seconds duration. Supports mp3/wma/wav/amr formats.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/material.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$result = $material->uploadVoice(\"/path/to/your/voice.mp3\");\n$mediaId = $result->media_id;\n// {\n//    \"media_id\":MEDIA_ID,\n// }\n```\n\n----------------------------------------\n\nTITLE: Finalizing Multiple Profit Sharing in PHP with EasyWeChat\nDESCRIPTION: Shows how to mark a multiple profit sharing order as finished. It requires the transaction ID, out order number, and a description.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/profit-sharing.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$params = [\n\t\"transaction_id\" => \"\",\n\t\"out_order_no\"   => \"\",\n\t\"description\"    => \"\"\n];\n$payment->profit_sharing->markOrderAsFinished($params);\n```\n\n----------------------------------------\n\nTITLE: Asynchronous Requests in PHP with EasyWeChat SDK\nDESCRIPTION: Explains how all requests in the EasyWeChat SDK are asynchronous by default. It demonstrates that the actual network request is only made when the response content is first accessed.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/6.x/client.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n// This code executes immediately without making a network request\n$response = $api->postJson('/cgi-bin/user/info/updateremark', [\n    \"openid\" => \"oDF3iY9ffA-hqb2vVvbr7qxf6A0Q\",\n    \"remark\" => \"pangzi\"\n]);\n\n// The request is made when you try to access the response information\n$contentType = $response->getHeaders()['content-type'][0];\n\n// Attempting to get the response content will block execution until the full response is received\n$content = $response->getContent();\n```\n\n----------------------------------------\n\nTITLE: Terminating Contract Agreement\nDESCRIPTION: Submits a request to terminate an existing contract agreement with WeChat Pay.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/contract.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$result = $app->contract->delete(array $params);\n```\n\n----------------------------------------\n\nTITLE: Example of Sending a Message from a Specific Customer Service Account in PHP\nDESCRIPTION: Shows how to send a text message to a user from a specific customer service account using both the account ID and the user's OpenID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/customer_service.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\n$app->customer_service->message('hello')\n                  >  ->from('kf2001@gh_176331xxxx')\n                  >  ->to('oV-gpwdOIwSI958m9osAhGBFxxxx')\n                  >  ->send();\n```\n\n----------------------------------------\n\nTITLE: Retrieving a User's Session Status in PHP\nDESCRIPTION: Gets the current session status of a user identified by their OpenID to determine if they are in an active customer service session.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/customer_service.md#2025-04-22_snippet_15\n\nLANGUAGE: php\nCODE:\n```\n$app->customer_service_session->get('OPENID');\n```\n\n----------------------------------------\n\nTITLE: Getting Template Keywords in PHP\nDESCRIPTION: Retrieves the list of keywords for a specific template title using the template ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/subscribe_message.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$tid = 563;\n\n$app->subscribe_message->getTemplateKeywords($tid);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Tag Details in EasyWeChat Contacts in PHP\nDESCRIPTION: Demonstrates how to fetch details of a specific tag, including its members, in the EasyWeChat contacts system.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/contacts.md#2025-04-22_snippet_21\n\nLANGUAGE: php\nCODE:\n```\n$contacts->tag->get($tagId);\n```\n\n----------------------------------------\n\nTITLE: Creating Video Messages in EasyWeChat PHP SDK\nDESCRIPTION: This snippet demonstrates how to create and customize a video message in EasyWeChat. Video messages support multiple attributes including title, description, media_id, and thumb_media_id.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/messages.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nuse EasyWeChat\\Message\\Video;\n\n$video = new Video([\n        'title' => $title,\n        'media_id' => $mediaId,\n        'description' => '...',\n        // ...\n    ]);\n\n// or\n$video = new Video();\n$video->media_id = $mediaId; // or $video->mediaId = $media;\n$video->description = 'video description...'; // or $video->description = $description;\n// ...\n\n// or\n$video = new Video();\n$video->setAttribute('media_id', $mediaId);\n// ...\n```\n\n----------------------------------------\n\nTITLE: Uploading Voice Media in EasyWeChat\nDESCRIPTION: Uploads a voice file to WeChat's media server. Must be AMR or MP3 format, under 2MB and max 60s duration.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/basic-services/media.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$app->media->uploadVoice($path);\n```\n\n----------------------------------------\n\nTITLE: Fetching Public Template Titles in PHP\nDESCRIPTION: Retrieves public template titles for specified categories with pagination support.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/subscribe_message.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$ids = [612, 613];\n$start = 0;\n$limit = 30;\n\n$app->subscribe_message->getTemplateTitles($ids, $start, $limit);\n```\n\n----------------------------------------\n\nTITLE: Example of Sending a Message Through Customer Service in PHP\nDESCRIPTION: Demonstrates how to send a simple text message to a user through the customer service system using their OpenID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/customer_service.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n$app->customer_service->message('hello')\n                  >  ->to('oV-gpwdOIwSI958m9osAhGBFxxxx')\n                  >  ->send();\n```\n\n----------------------------------------\n\nTITLE: Specifying Callback URL in WeChat OAuth Redirect in PHP\nDESCRIPTION: This snippet demonstrates how to specify a custom callback URL when initiating the WeChat OAuth process, setting it to the current page URL.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/oauth.md#2025-04-22_snippet_2\n\nLANGUAGE: PHP\nCODE:\n```\n$response = $app->oauth->scopes(['snsapi_userinfo'])\n                          ->redirect($request->fullUrl());\n```\n\n----------------------------------------\n\nTITLE: Creating Voice Messages in EasyWeChat PHP SDK\nDESCRIPTION: This snippet shows how to create and customize a voice message in EasyWeChat. The voice message requires a media_id parameter which references a previously uploaded voice resource.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/messages.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nuse EasyWeChat\\Message\\Voice;\n\n$voice = new Voice(['media_id' => $mediaId]);\n\n// or\n$voice = new Voice();\n$voice->media_id = $mediaId; // or $voice->mediaId = $media;\n\n// or\n$voice = new Voice();\n$voice->setAttribute('media_id', $mediaId);\n```\n\n----------------------------------------\n\nTITLE: Uploading Article Images in PHP\nDESCRIPTION: Shows how to upload images that will be used within articles. Returns URL for use in article content.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/material.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$result = $material->uploadArticleImage($path);\n$url = $result->url;\n//{\n//    \"url\":  \"http://mmbiz.qpic.cn/mmbiz/gLO17UPS6FS2xsypf378iaNhWacZ1G1UplZYWEYfwvuU6Ont96b1roYsCNFwaRrSaKTPCUdBK9DgEHicsKwWCBRQ/0\"\n//}\n```\n\n----------------------------------------\n\nTITLE: Building JSSDK Configuration Array in PHP\nDESCRIPTION: Method to generate the JSSDK configuration array needed for initializing WeChat JS features. It takes an array of API names, debug mode flag, beta flag, and a parameter determining whether to return JSON or array.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/basic-services/jssdk.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$app->jssdk->buildConfig(array $APIs, $debug = false, $beta = false, $json = true);\n```\n\n----------------------------------------\n\nTITLE: Setting Up Authorizer Application in EasyWeChat PHP\nDESCRIPTION: This code demonstrates how to set up an authorizer application in EasyWeChat. It requires the authorizer's app ID and refresh token to create the application instance.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/open_platform.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$openPlatform = new Application($options)->open_platform;\n\n// 加载授权方信息，比如 $authorizer = Authorizer::find($id);\n$authorizerAppId = $authorizer->app_id;\n$authorizerRefreshToken = $authorizer->refresh_token;\n\n$app = $openPlatform->createAuthorizerApplication($authorizerAppId, $authorizerRefreshToken);\n// 然后调用方法和普通调用一致。\n// ...\n```\n\n----------------------------------------\n\nTITLE: Initializing EasyWeChat Open Work Application in PHP\nDESCRIPTION: This snippet demonstrates how to initialize an EasyWeChat Open Work application with configuration and create a work instance for an authorized enterprise.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/to-account.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$config = [...];\n\n$app = Factory::openWork($config);\n$work = $app->work('授权企业的corp_id','授权企业的永久授权码');\n```\n\n----------------------------------------\n\nTITLE: User List Response Example\nDESCRIPTION: Example response showing the structure of user list data including total count and OpenIDs\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/user.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n $users = $app->user->list();\n\n// result\n {\n  \"total\": 2,\n  \"count\": 2,\n  \"data\": {\n    \"openid\": [\n      \"OPENID1\",\n      \"OPENID2\"\n    ]\n  },\n  \"next_openid\": \"NEXT_OPENID\"\n}\n```\n\n----------------------------------------\n\nTITLE: 获取单个微信返佣商品信息 (PHP)\nDESCRIPTION: 使用EasyWeChat库获取已导入的单个商品信息。通过商品的pid来查询，用于验证信息和抽查导入情况。返回的product字段内容与导入商品接口字段一致。\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/goods.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$pid = 'pid001';\n\n$app->goods->get($pid);\n```\n\n----------------------------------------\n\nTITLE: Mentioning Users in Text Messages - PHP\nDESCRIPTION: Demonstrates various methods of mentioning users in text messages, including by userId, mobile number, or mentioning everyone.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/group-robot.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Work\\GroupRobot\\Messages\\Text;\n\n// 通过构造函数传参\n$text = new Text('hello', 'her-cat', '18700000000');\n//$text = new Text('hello', ['her-cat', 'overtrue'], ['18700000000', '18700000001']);\n\n// 通过 userId\n$text->mention('her-cat');\n//$text->mention(['her-cat', 'overtrue']);\n\n// 通过手机号\n$text->mentionByMobile('18700000000');\n//$text->mentionByMobile(['18700000000', '18700000001']);\n\n// @所有人\n$text->mention('@all');\n//$text->mentionByMobile('@all');\n\n$messenger->message($text)->toGroup($groupKey)->send();\n```\n\n----------------------------------------\n\nTITLE: Generating Invitation QR Code in EasyWeChat Contacts in PHP\nDESCRIPTION: Demonstrates how to generate an invitation QR code in the EasyWeChat contacts system, with options for different size types.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/contacts.md#2025-04-22_snippet_12\n\nLANGUAGE: php\nCODE:\n```\n$sizeType = 1;  // qrcode尺寸类型，1: 171 x 171; 2: 399 x 399; 3: 741 x 741; 4: 2052 x 2052\n\n$contacts->user->getInvitationQrCode($sizeType);\n```\n\n----------------------------------------\n\nTITLE: Marking Multiple Profit Sharing as Finished in EasyWeChat PHP\nDESCRIPTION: Finalizes a multiple profit sharing order by marking it as finished. This operation requires the transaction ID, out order number, and a description.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/profit-sharing.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$params = [\n\t\"transaction_id\" => \"\",\n\t\"out_order_no\"   => \"\",\n\t\"description\"    => \"\"\n];\n$payment->profit_sharing->markOrderAsFinished($params);\n```\n\n----------------------------------------\n\nTITLE: Fetching Geographic Information\nDESCRIPTION: Retrieves province, city and district information from Tencent Maps.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/store.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$app->store->districts();\n```\n\n----------------------------------------\n\nTITLE: Retrieving Existing Menu List in EasyWeChat (PHP)\nDESCRIPTION: Fetches the list of existing menus using the EasyWeChat SDK. This operation returns all currently set menus for the WeChat account.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/menu.md#2025-04-22_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n$list = $app->menu->list();\n```\n\n----------------------------------------\n\nTITLE: Preview Broadcast Messages by WeChat ID in PHP\nDESCRIPTION: Methods for previewing different types of broadcast messages to specific users by WeChat ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/broadcasting.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n$app->broadcasting->previewTextByName($text, $wxname);\n$app->broadcasting->previewNewsByName($mediaId, $wxname);\n$app->broadcasting->previewVoiceByName($mediaId, $wxname);\n$app->broadcasting->previewImageByName($mediaId, $wxname);\n$app->broadcasting->previewVideoByName($message, $wxname);\n$app->broadcasting->previewCardByName($cardId, $wxname);\n```\n\n----------------------------------------\n\nTITLE: Retrieving User Summary Data with EasyWeChat in PHP\nDESCRIPTION: This snippet demonstrates how to use the EasyWeChat library to fetch user summary data for a specific date range. It calls the userSummary method and outputs the result, which includes daily user statistics.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/data_cube.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$userSummary = $app->data_cube->userSummary('2014-12-07', '2014-12-08');\n\nvar_dump($userSummary);\n//\n//[\n//    {\n//        \"ref_date\": \"2014-12-07\",\n//        \"user_source\": 0,\n//        \"new_user\": 0,\n//        \"cancel_user\": 0\n//    }\n//    //后续还有ref_date在begin_date和end_date之间的数据\n// ]\n```\n\n----------------------------------------\n\nTITLE: Uploading Thumbnail Material in WeChat using EasyWeChat PHP SDK\nDESCRIPTION: This code demonstrates uploading a thumbnail image, which can be used as a cover for videos or music in WeChat.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/material.md#2025-04-22_snippet_3\n\nLANGUAGE: PHP\nCODE:\n```\n$result = $app->material->uploadThumb(\"/path/to/your/thumb.jpg\");\n// {\n//    \"media_id\":MEDIA_ID,\n// }\n```\n\n----------------------------------------\n\nTITLE: Retrieving Temporary Media Content in EasyWeChat\nDESCRIPTION: Downloads temporary media content like images or voice files as StreamResponse instance with options to save locally.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/basic-services/media.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$stream = $app->media->get($mediaId);\n\nif ($stream instanceof \\EasyWeChat\\Kernel\\Http\\StreamResponse) {\n  // 以内容 md5 为文件名存到本地\n  $stream->save('保存目录');\n\n  // 自定义文件名，不需要带后缀\n  $stream->saveAs('保存目录', '文件名');\n}\n```\n\n----------------------------------------\n\nTITLE: Generating JSSDK Config in PHP\nDESCRIPTION: This snippet shows how to generate the JSSDK configuration using the buildConfig method. It allows customization of API list, debug mode, and output format.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/jssdk.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$app->jssdk->buildConfig(array $APIs, $debug = false, $beta = false, $json = true, array $openTagList = []);\n```\n\n----------------------------------------\n\nTITLE: Example Usage of Mini Program Code Generation with EasyWeChat in PHP\nDESCRIPTION: Demonstrates how to generate and save mini program codes with different configurations. Shows basic usage, specifying width, and setting custom line colors. Also includes examples of saving the response as a file.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/app_code.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$response = $app->app_code->get('path/to/page');\n// 或者\n$response = $app->app_code->get('path/to/page', [\n    'width' => 600,\n    //...\n]);\n\n// 或者指定颜色\n$response = $app->app_code->get('path/to/page', [\n    'width' => 600,\n    'line_color' => [\n        'r' => 105,\n        'g' => 166,\n        'b' => 134,\n    ],\n]);\n\n// $response 成功时为 EasyWeChat\\Kernel\\Http\\StreamResponse 实例，失败时为数组或者你指定的 API 返回格式\n\n// 保存小程序码到文件\nif ($response instanceof \\EasyWeChat\\Kernel\\Http\\StreamResponse) {\n    $filename = $response->save('/path/to/directory');\n}\n\n// 或\nif ($response instanceof \\EasyWeChat\\Kernel\\Http\\StreamResponse) {\n    $filename = $response->saveAs('/path/to/directory', 'appcode.png');\n}\n```\n\n----------------------------------------\n\nTITLE: Listing All User Groups in EasyWeChat (PHP)\nDESCRIPTION: Retrieves all user groups from the WeChat API. Returns an object containing group details including ID, name, and user count.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/user-group.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$group->lists();\n```\n\nLANGUAGE: php\nCODE:\n```\n$groups = $group->lists();\n\n// {\n//     \"groups\": [\n//         {\n//             \"id\": 0,\n//             \"name\": \"未分组\",\n//             \"count\": 72596\n//         },\n//         {\n//             \"id\": 1,\n//             \"name\": \"黑名单\",\n//             \"count\": 36\n//         },\n//         ...\n//     ]\n// }\n\nvar_dump($groups->groups[0]['name']) // \"未分组\"\n```\n\n----------------------------------------\n\nTITLE: Creating a Tag in EasyWeChat Contacts in PHP\nDESCRIPTION: Illustrates how to create a new tag in the EasyWeChat contacts system by providing a tag name and optionally a tag ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/contacts.md#2025-04-22_snippet_17\n\nLANGUAGE: php\nCODE:\n```\n$contacts->tag->create($tagName, $tagId);\n```\n\n----------------------------------------\n\nTITLE: 查询微信返佣商品导入/更新状态 (PHP)\nDESCRIPTION: 使用EasyWeChat库查询之前导入或更新商品的结果。通过status_ticket参数获取详细的处理状态，包括成功和失败的数量、进度以及每个商品的具体状态。\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/goods.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$status_ticket = '115141102647330200';\n\n$result = $app->goods->status($status_ticket);\n\n// $result:\n//{\n//    \"errcode\": 0,\n//    \"errmsg\": \"ok\",\n//    \"result\": {\n//        \"succ_cnt\": 2,\n//        \"fail_cnt\": 0,\n//        \"total_cnt\": 2,\n//        \"progress\": \"100.00%\",\n//        \"statuses\": [\n//            {\n//                \"pid\": \"pid001\",\n//                \"ret\": 0,\n//                \"err_msg\": \"success\",\n//                \"err_msg_zh_cn\": \"成功\"\n//            },\n//            {\n//                \"pid\": \"pid002\",\n//                \"ret\": 0,\n//                \"err_msg\": \"success\",\n//                \"err_msg_zh_cn\": \"成功\"\n//            }\n//        ]\n//    }\n//}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Online Customer Service Accounts in PHP\nDESCRIPTION: Gets a list of all customer service accounts that are currently online and available.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/customer_service.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$app->customer_service->online();\n```\n\n----------------------------------------\n\nTITLE: Managing Moments in PHP\nDESCRIPTION: Demonstrates how to interact with the Moments feature, including listing posts, retrieving tasks, and getting interaction data.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/external-contact.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n// Get all published moments\n$params = [\n    'start_time' => 1605000000,\n    'end_time' => 1605172726,\n    'creator' => 'zhangshan',\n    'filter_type' => 1,\n    'cursor' => 'CURSOR',\n    'limit' => 10\n];\n$app->external_contact_moment->list(array $params);\n\n// Get moment tasks\n$momentId = 'momxxx';\n$cursor = 'CURSOR';\n$limit = 10;\n$app->external_contact_moment->getTasks(string $momentId, string $cursor, int $limit);\n\n// Get visible range for a moment\n$userId = 'xxx';\n$app->external_contact_moment->getCustomers(string $momentId, string $userId, string $cursor, int $limit);\n\n// Get visible customers after publishing\n$app->external_contact_moment->getSendResult(string $momentId, string $userId, string $cursor, int $limit);\n\n// Get interaction data for a moment\n$app->external_contact_moment->getComments(string $momentId, string $userId);\n```\n\n----------------------------------------\n\nTITLE: Updating User Remarks in PHP\nDESCRIPTION: Updates the remark for a specific user identified by OpenID\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/user.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$app->user->remark($openId, $remark); // 成功返回boolean\n```\n\n----------------------------------------\n\nTITLE: Searching Stores in Tencent Maps\nDESCRIPTION: Searches for stores in Tencent Maps using district ID and keywords.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/store.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$app->store->searchFromMap($districtId, $keyword);\n```\n\n----------------------------------------\n\nTITLE: Testing Personalized Menu in EasyWeChat (PHP)\nDESCRIPTION: Demonstrates how to test a personalized menu for a specific user. The user can be identified by their OpenID or WeChat ID. Returns the menu items that match the specified user.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/menu.md#2025-04-22_snippet_5\n\nLANGUAGE: PHP\nCODE:\n```\n$app->menu->match($userId);\n```\n\n----------------------------------------\n\nTITLE: Moving a Single User to a Group in EasyWeChat (PHP)\nDESCRIPTION: Moves a single user to a specified group. Requires the user's OpenID and the target group ID as parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/user-group.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$group->moveUser($openId, $groupId);\n```\n\nLANGUAGE: php\nCODE:\n```\n$group->moveUser($openId, $groupId);\n```\n\n----------------------------------------\n\nTITLE: Creating Personalized Menu in EasyWeChat (PHP)\nDESCRIPTION: Shows how to create a personalized menu with specific matching rules using the EasyWeChat SDK. The menu is customized based on user attributes like tag, gender, location, and language.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/menu.md#2025-04-22_snippet_3\n\nLANGUAGE: PHP\nCODE:\n```\n$buttons = [\n    // ...\n];\n$matchRule = [\n    \"tag_id\" => \"2\",\n    \"sex\" => \"1\",\n    \"country\" => \"中国\",\n    \"province\" => \"广东\",\n    \"city\" => \"广州\",\n    \"client_platform_type\" => \"2\",\n    \"language\" => \"zh_CN\"\n];\n$app->menu->create($buttons, $matchRule);\n```\n\n----------------------------------------\n\nTITLE: Configuring URL Endpoint for Multi-Account Access in WeChat Official Platform\nDESCRIPTION: Example URL configuration for accessing a specific WeChat account through a unique ID parameter. This URL should be set in the WeChat Official Platform configuration for each account, allowing the application to determine which account configuration to load based on the ID parameter.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/accounts.md#2025-04-22_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nhttp://easywechat.com/wechat?id=1\n```\n\n----------------------------------------\n\nTITLE: Retrieving JSSDK High-Quality Voice Media in EasyWeChat\nDESCRIPTION: Downloads high-quality voice media files uploaded through JSSDK and saves them locally.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/basic-services/media.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n$stream = $app->media->getJssdkMedia($mediaId);\n$stream->saveAs('保存目录', 'custom-name.speex');\n```\n\n----------------------------------------\n\nTITLE: Creating Raw JSON Messages in EasyWeChat PHP SDK\nDESCRIPTION: This snippet demonstrates how to create a raw JSON message in EasyWeChat for customer service scenarios. It allows direct formatting of JSON data according to WeChat API requirements.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/messages.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Message\\Raw;\n\n$message = new Raw('{\n    \"touser\":\"OPENID\",\n    \"msgtype\":\"text\",\n    \"text\":\n    {\n         \"content\":\"Hello World\"\n    }\n}');\n```\n\n----------------------------------------\n\nTITLE: Setting Check-in Schedules in PHP with EasyWeChat\nDESCRIPTION: Sets check-in schedules for employees using the OA module of EasyWeChat. Requires group ID, user details, and date information.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/oa.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n $params = [\n            'groupid' => 226,\n            'items' => [\n                [\n                    'userid' => 'james',\n                    'day' => 5,\n                    'schedule_id' => 234\n                ]\n            ],\n            'yearmonth' => 202012\n        ];\n$app->oa->setCheckinSchedus(array $params);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Public Template Titles by Category\nDESCRIPTION: Gets public template titles under account categories with pagination support.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/mini-program/subscribe_message.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$ids = [612, 613];  // 类目 id\n$start = 0;         // 用于分页，表示从 start 开始。从 0 开始计数。  \n$limit = 30;        // 用于分页，表示拉取 limit 条记录。最大为 30。\n\n$app->subscribe_message->getTemplateTitles($ids, $start, $limit);\n```\n\n----------------------------------------\n\nTITLE: Listing Tags in EasyWeChat Contacts in PHP\nDESCRIPTION: Illustrates how to retrieve a list of all tags in the EasyWeChat contacts system.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/contacts.md#2025-04-22_snippet_20\n\nLANGUAGE: php\nCODE:\n```\n$contacts->tag->list();\n```\n\n----------------------------------------\n\nTITLE: Retrieving Page Statistics in PHP\nDESCRIPTION: Retrieves statistics for a single page, including shake and click counts for a specified date range.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/shake-around.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$result = $shakearound->stats->pageSummary(12345, 1425052800, 1425139200);\n```\n\n----------------------------------------\n\nTITLE: Initializing Customer Service Session Management in PHP with EasyWeChat\nDESCRIPTION: Sets up the EasyWeChat application and initializes the customer service session management object. This is used for the new API functionality of customer service sessions.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/staff.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n<?php\nuse EasyWeChat\\Foundation\\Application;\n// ...\n$app = new Application($options);\n\n$session = $app->staff_session; // 客服会话管理\n```\n\n----------------------------------------\n\nTITLE: Creating a User Group in EasyWeChat (PHP)\nDESCRIPTION: Creates a new user group with the specified name. This method takes a single parameter which is the group name.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/user-group.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$group->create($name);\n```\n\nLANGUAGE: php\nCODE:\n```\n$group->create($name);\n```\n\n----------------------------------------\n\nTITLE: Removing Profit Sharing Receivers in PHP with EasyWeChat\nDESCRIPTION: Shows how to remove a profit sharing receiver using the EasyWeChat library. The receiver details should be provided in the $receiver variable.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/profit-sharing.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$payment->profit_sharing->deleteReceiver($receiver);\n```\n\n----------------------------------------\n\nTITLE: Disabling WeChat Card in PHP\nDESCRIPTION: Disables a WeChat card using the disable method. Requires the card code and optionally the card ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/card.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$card->disable($code, $cardId);\n```\n\nLANGUAGE: php\nCODE:\n```\n$code    = '736052543512';\n$cardId = '';\n\n$result = $card->disable($code, $cardId);\n```\n\n----------------------------------------\n\nTITLE: Approving Plugin Usage Request in WeChat Mini Program using PHP\nDESCRIPTION: This snippet shows how to approve a plugin usage request from another mini program. It requires the AppID of the requesting program.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/mini-program/plugin.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$appId = 'wxxxxxxxxxxxxxx';\n\n$app->plugin_dev->agree($appId);\n```\n\n----------------------------------------\n\nTITLE: Getting Limited Quantity Mini Program Code with EasyWeChat in PHP\nDESCRIPTION: Uses the get method to generate a limited quantity mini program code. This API is suitable for business scenarios that require fewer codes. It accepts a path parameter and optional settings for width and color configuration.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/app_code.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$app->app_code->get(string $path, array $optional = []);\n```\n\n----------------------------------------\n\nTITLE: Customer Service Messaging Operations in PHP\nDESCRIPTION: Methods for sending messages to users through customer service, including direct messaging and agent-specific messaging.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/customer_service.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$app->customer_service->message($message)->to($openId)->send();\n```\n\nLANGUAGE: php\nCODE:\n```\n$app->customer_service->message('hello')->to('oV-gpwdOIwSI958m9osAhGBFxxxx')->send();\n```\n\nLANGUAGE: php\nCODE:\n```\n$app->customer_service->message($message)->from('account@test')->to($openId)->send();\n```\n\nLANGUAGE: php\nCODE:\n```\n$app->customer_service->message('hello')->from('kf2001@gh_176331xxxx')->to('oV-gpwdOIwSI958m9osAhGBFxxxx')->send();\n```\n\n----------------------------------------\n\nTITLE: Initializing WeChat Work Application Instance in PHP\nDESCRIPTION: Creates an instance of the WeChat Work application using the Factory class. Requires configuration including corp_id, secret, and agent_id.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/oauth.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$config = [\n    'corp_id' => 'xxxxxxxxxxxxxxxxx',\n    'secret'   => 'xxxxxxxxxx', // 应用的 secret\n    'agent_id' => 100001,\n];\n\n$app = Factory::work($config);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Message Archive Enabled Users in PHP\nDESCRIPTION: Gets a list of members who have message archiving enabled. Requires enterprise application secret token for authentication.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/msg-audit.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$type = 1;\n\n$app->msg_audit->getPermitUsers(string $type);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Customer Service Chat Records in PHP with EasyWeChat\nDESCRIPTION: Demonstrates how to fetch customer service chat records within a specified time range and pagination parameters using EasyWeChat.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/staff.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$staff->records($startTime, $endTime, $pageIndex, $pageSize);\n\n// example: $records = $staff->records('2015-06-07', '2015-06-21', 1, 20);\n```\n\n----------------------------------------\n\nTITLE: Querying Pages Associated with a Device in PHP\nDESCRIPTION: Retrieves a list of pages associated with a specific device using its device ID or UUID/Major/Minor combination.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/shake-around.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$result = $shakearound->relation->listByDeviceId(['device_id' => 10011]);\n// or\n$result = $shakearound->relation->listByDeviceId([\n  'uuid' => 'FDA50693-A4E2-4FB1-AFCF-C6EB07647825',\n  'major' => 1002,\n  'minor' => 1223,\n]);\n\n// Return result\nvar_dump($result) // [50054,50055]\n```\n\n----------------------------------------\n\nTITLE: Retrieving POI Store Information with EasyWeChat in PHP\nDESCRIPTION: This snippet shows how to retrieve information for a specific store (POI) using its ID with the EasyWeChat library.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/poi.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$app->poi->get($poiId);\n```\n\nLANGUAGE: php\nCODE:\n```\n$info = $app->poi->get(271262077);\n```\n\n----------------------------------------\n\nTITLE: Removing Users from a Tag in EasyWeChat Contacts in PHP\nDESCRIPTION: Illustrates how to remove users or departments from a specific tag in the EasyWeChat contacts system.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/contacts.md#2025-04-22_snippet_23\n\nLANGUAGE: php\nCODE:\n```\n$contacts->tag->untagUsers($tagId, [$userId1, $userId2, ...]);\n\n// 指定部门\n$contacts->tag->untagDepartments($tagId, [$departmentId1, $departmentId2, ...]);\n```\n\n----------------------------------------\n\nTITLE: Listing Device Groups in PHP\nDESCRIPTION: Retrieves a list of device groups with pagination.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/shake-around.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n$result = $shakearound->group->list(0, 2);\n```\n\n----------------------------------------\n\nTITLE: Specific Account Message Transfer in EasyWeChat\nDESCRIPTION: Shows how to forward messages to a specific customer service account by passing the account parameter to the Transfer class constructor.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/message-transfer.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Kernel\\Messages\\Transfer;\n\n$app->server->push(function($message) {\n    return new Transfer($account);\n});\n```\n\n----------------------------------------\n\nTITLE: Moving Multiple Users to a Group in EasyWeChat (PHP)\nDESCRIPTION: Batch moves multiple users to a specified group. Takes an array of OpenIDs and the target group ID as parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/user-group.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$group->moveUsers(array $openIds, $groupId);\n```\n\nLANGUAGE: php\nCODE:\n```\n$openIds = [$openId1, $openId2, $openId3 ...];\n$group->moveUsers($openIds, $groupId);\n```\n\n----------------------------------------\n\nTITLE: Adding Template to Personal Library in PHP\nDESCRIPTION: Combines template and adds it to the account's personal template library. Requires template ID, keyword list, and optional scene description.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/subscribe_message.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$tid = 563;\n$kidList = [1, 2];\n$sceneDesc = '提示用户图书到期';\n\n$app->subscribe_message->addTemplate($tid, $kidList, $sceneDesc);\n```\n\n----------------------------------------\n\nTITLE: Deleting a Nearby POI in WeChat Mini Program using PHP\nDESCRIPTION: This snippet demonstrates how to delete a nearby Point of Interest (POI) using the EasyWeChat SDK. It requires the POI ID to identify which POI to delete.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/mini-program/nearby_poi.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$poiId = 'xxxxxxxx';\n\n$app->nearby_poi->delete($poiId);\n```\n\n----------------------------------------\n\nTITLE: Querying WeChat Semantic Understanding API Example\nDESCRIPTION: Demonstrates how to query the WeChat semantic understanding API with a specific keyword, service categories, and additional parameters. This example searches for flights from Beijing to Shanghai with specific user context.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/semantic.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$result = $semantic->query('查一下明天从北京到上海的南航机票', \"flight,hotel\", array('city' => '北京', 'uid' => '123456'));\n// 查询参数：\n// {\n//    \"query\":\"查一下明天从北京到上海的南航机票\",\n//    \"city\":\"北京\",\n//    \"category\": \"flight,hotel\",\n//    \"appid\":\"wxaaaaaaaaaaaaaaaa\",\n//    \"uid\":\"123456\"\n// }\n```\n\n----------------------------------------\n\nTITLE: Configuring Global Retry Mechanism in EasyWeChat\nDESCRIPTION: Shows how to configure the global retry mechanism for failed HTTP requests in EasyWeChat. The configuration allows customization of retry count, status codes to retry on, delay between retries, and delay multiplier.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/6.x/client.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\n    'http' => [\n        //...\n        'retry' => true, // 使用默认配置\n        // 'retry' => [\n        //     // 仅以下状态码重试\n        //     'status_codes' => [429, 500]\n        //     'max_retries' => 3\n        //     // 请求间隔 (毫秒)\n        //     'delay' => 1000,\n        //     // 如果设置，每次重试的等待时间都会增加这个系数\n        //     // (例如. 首次:1000ms; 第二次: 3 * 1000ms; etc.)\n        //     'multiplier' => 0.1\n        // ],\n    ],\n```\n\n----------------------------------------\n\nTITLE: Managing Customer Service Accounts in PHP with EasyWeChat\nDESCRIPTION: Shows how to create, update, delete, and set avatars for customer service accounts using EasyWeChat. These operations allow for the management of customer service staff.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/staff.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$staff->create('foo@test', '客服1');\n\n$staff->update('foo@test', '客服1');\n\n$staff->delete('foo@test');\n\n$staff->avatar('foo@test', $avatarPath); // $avatarPath 为本地图片路径，非 URL\n```\n\n----------------------------------------\n\nTITLE: Deleting a User Tag in EasyWeChat (PHP)\nDESCRIPTION: This snippet shows how to delete a user tag using the EasyWeChat library. It takes the tag ID as a parameter.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/user-tag.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$app->user_tag->delete($tagId);\n```\n\n----------------------------------------\n\nTITLE: Fetching Approval Records with EasyWeChat OA Module in PHP\nDESCRIPTION: This snippet demonstrates how to use the approvalRecords method to retrieve approval data. It requires start and end timestamps, and optionally a next number parameter to specify the first approval number to fetch from.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/oa.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$app->oa->approvalRecords(1492617600, 1492790400);\n\n// 指定第一个拉取的审批单号，不填从该时间段的第一个审批单拉取\n$app->oa->approvalRecords(1492617600, 1492790400, '201704240001');\n```\n\n----------------------------------------\n\nTITLE: Updating a Customer Service Account in PHP\nDESCRIPTION: Updates the information of an existing customer service account identified by the account ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/customer_service.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$app->customer_service->update('foo@test', '客服1');\n```\n\n----------------------------------------\n\nTITLE: Querying external_userid using unionid in Enterprise WeChat with PHP\nDESCRIPTION: This code snippet shows how to query an external user ID using unionid, openid, and optionally corpid using the EasyWeChat library.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/to-account.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$work->external_contact->unionidToexternalUserid3rd(string $unionid, string $openid, string $corpid = '');\n```\n\n----------------------------------------\n\nTITLE: Initializing WeChat Stats Instance in PHP\nDESCRIPTION: Creates an instance of the EasyWeChat Application and accesses the stats component for data retrieval.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/anaylsis.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nuse EasyWeChat\\Foundation\\Application;\n\n//...\n\n$app = new Application($options);\n$stats = $app->stats;\n```\n\n----------------------------------------\n\nTITLE: Initializing the Reply Service in EasyWeChat PHP\nDESCRIPTION: This snippet demonstrates how to create an Application instance and access the reply module in EasyWeChat. It shows the basic setup required to work with automatic replies in a WeChat application.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/reply.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nuse EasyWeChat\\Foundation\\Application;\n\n// ...\n\n$app = new Application($options);\n\n$reply = $app->reply;\n```\n\n----------------------------------------\n\nTITLE: Referencing WeChat Official Documentation in Markdown\nDESCRIPTION: A Markdown link to the WeChat official documentation, which provides detailed information about different event types supported by the WeChat platform.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/events.md#2025-04-22_snippet_1\n\nLANGUAGE: Markdown\nCODE:\n```\nhttp://mp.weixin.qq.com/wiki/\n```\n\n----------------------------------------\n\nTITLE: Retrieving Multiple Users Information in PHP\nDESCRIPTION: Fetches information for multiple WeChat users using an array of OpenIDs\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/user.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$users = $app->user->select([$openId1, $openId2, ...]);\n```\n\n----------------------------------------\n\nTITLE: Listing POI Stores with EasyWeChat in PHP\nDESCRIPTION: This snippet demonstrates how to retrieve a list of stores (POI) with pagination using the EasyWeChat library. It allows specifying the starting point and limit for the query.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/poi.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$app->poi->list($begin, $limit);// begin:0, limit:10\n```\n\nLANGUAGE: php\nCODE:\n```\n$pois = $app->poi->list(0, 2);// 取2条记录\n```\n\n----------------------------------------\n\nTITLE: Sending Group Red Packet with EasyWeChat in PHP\nDESCRIPTION: Shows the process of sending a group (fission) red packet using EasyWeChat. Includes parameters for multiple recipients and total amount.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/redpack.md#2025-04-22_snippet_3\n\nLANGUAGE: PHP\nCODE:\n```\n$redpackData = [\n    'mch_billno'   => 'xy123456',\n    'send_name'    => '测试红包',\n    're_openid'    => 'oxTWIuGaIt6gTKsQRLau2M0yL16E',\n    'total_num'    => 3,  //不小于3\n    'total_amount' => 300,  //单位为分，不小于300\n    'wishing'      => '祝福语',\n    'act_name'     => '测试活动',\n    'remark'       => '测试备注',\n    'amt_type'     => 'ALL_RAND',  //可不传\n    // ...\n];\n\n$result = $redpack->sendGroup($redpackData);\n```\n\n----------------------------------------\n\nTITLE: Listing Store Locations - PHP\nDESCRIPTION: Retrieves a paginated list of store locations. Supports offset and limit parameters for pagination.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/poi.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$app->poi->list($begin, $limit);// begin:0, limit:10\n```\n\nLANGUAGE: php\nCODE:\n```\n$pois = $app->poi->list(0, 2);// 取2条记录\n//\n//[\n//  {\n//    \"sid\": \"100\",\n//    \"poi_id\": \"271864249\",\n//    \"business_name\": \"麦当劳\",\n//    \"branch_name\": \"艺苑路店\",\n//    \"address\": \"艺苑路 11 号\",\n//    \"available_state\": 3\n//  },\n//  {\n//    \"sid\": \"101\",\n//    \"business_name\": \"麦当劳\",\n//    \"branch_name\": \"赤岗路店\",\n//    \"address\": \"赤岗路 102 号\",\n//    \"available_state\": 4\n//  }\n//]\n```\n\n----------------------------------------\n\nTITLE: Retrieving User Summary Data in PHP using EasyWeChat\nDESCRIPTION: Demonstrates how to use the userSummary method to fetch user increase/decrease data for a specific date range. The example shows the structure of the returned data.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/anaylsis.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$userSummary = $stats->userSummary('2014-12-07', '2014-12-08');\n\nvar_dump($userSummary);\n//\n//[\n//    {\n//        \"ref_date\": \"2014-12-07\",\n//        \"user_source\": 0,\n//        \"new_user\": 0,\n//        \"cancel_user\": 0\n//    }\n//    //后续还有ref_date在begin_date和end_date之间的数据\n// ]\n```\n\n----------------------------------------\n\nTITLE: 提交小微商户入驻申请 - PHP\nDESCRIPTION: 使用 EasyWeChat 框架提交小微商户资料进行入驻申请。需要提供业务申请编号、身份证照片等参数，具体参数需根据小微商户专属文档中的申请入驻 API 说明进行填写。\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/micro-merchant/submit-application.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$result = $app->submitApplication([\n    'business_code' => '123456', // 业务申请编号\n    'id_card_copy'  => 'media_id', // 身份证人像面照片\n    // ...\n    // 参数太多就不一一列出，自行根据 (小微商户专属文档 -> 申请入驻api) 填写\n]);\n```\n\n----------------------------------------\n\nTITLE: Blocking WeChat Users in PHP\nDESCRIPTION: Blocks single or multiple users using their OpenIDs\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/user.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$app->user->block('openidxxxxx');\n// 或者多个用户\n$app->user->block(['openid1', 'openid2', 'openid3', ...]);\n```\n\n----------------------------------------\n\nTITLE: Sending Text Messages Using Text Class - PHP\nDESCRIPTION: Shows how to send text messages using the Text class from EasyWeChat's GroupRobot Messages.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/group-robot.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Work\\GroupRobot\\Messages\\Text;\n\n// 准备消息\n$text = new Text('hello');\n\n// 发送\n$messenger->message($text)->toGroup($groupKey)->send();\n```\n\n----------------------------------------\n\nTITLE: Setting User Remarks in PHP\nDESCRIPTION: Updates the remark/note for a specific WeChat user identified by openId\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/user.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$app->user->remark($openId, \"僵尸粉\");\n```\n\n----------------------------------------\n\nTITLE: Custom Event Handlers for Open Platform Authorization Events in PHP\nDESCRIPTION: This code snippet shows how to set up custom event handlers for different authorization events (authorized, update_authorized, unauthorized) in EasyWeChat's Open Platform module using the push method.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/open-platform/server.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\OpenPlatform\\Server\\Guard;\n\n$server = $openPlatform->server;\n\n// 处理授权成功事件\n$server->push(function ($message) {\n    // ...\n}, Guard::EVENT_AUTHORIZED);\n\n// 处理授权更新事件\n$server->push(function ($message) {\n    // ...\n}, Guard::EVENT_UPDATE_AUTHORIZED);\n\n// 处理授权取消事件\n$server->push(function ($message) {\n    // ...\n}, Guard::EVENT_UNAUTHORIZED);\n```\n\n----------------------------------------\n\nTITLE: Sending Mini Program Red Packet with EasyWeChat in PHP\nDESCRIPTION: Illustrates the process of sending a red packet through a WeChat Mini Program using EasyWeChat. Includes specific parameters for mini program red packets.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/redpack.md#2025-04-22_snippet_4\n\nLANGUAGE: PHP\nCODE:\n```\n$redpackData = [\n    'mch_billno'   => 'xy123456',\n    'send_name'    => '测试红包',\n    're_openid'    => 'oxTWIuGaIt6gTKsQRLau2M0yL16E',\n    'total_amount' => 100,  //单位为分，不小于100\n    'wishing'      => '祝福语',\n    'client_ip'    => '192.168.0.1',  //可不传，不传则由 SDK 取当前客户端 IP\n    'act_name'     => '测试活动',\n    'remark'       => '测试备注',\n    // ...\n];\n\n$result = $redpack->sendMiniprogramNormal($redpackData);\n```\n\n----------------------------------------\n\nTITLE: Getting User Details by Ticket in PHP\nDESCRIPTION: Retrieves detailed member information using a user ticket.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/open-work/service.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n$app->corp->getUserByTicket(string $userTicket);\n```\n\n----------------------------------------\n\nTITLE: Retrieving All User Tags in EasyWeChat (PHP)\nDESCRIPTION: This snippet demonstrates how to retrieve all user tags using the EasyWeChat library. It returns an array of tags with their IDs, names, and counts.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/user-tag.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$app->user_tag->list();\n```\n\nLANGUAGE: php\nCODE:\n```\n$tags = $app->user_tag->list();\n\n// {\n//     \"tags\": [\n//         {\n//             \"id\": 0,\n//             \"name\": \"标签1\",\n//             \"count\": 72596\n//         },\n//         {\n//             \"id\": 1,\n//             \"name\": \"标签2\",\n//             \"count\": 36\n//         },\n//         ...\n//     ]\n// }\n```\n\n----------------------------------------\n\nTITLE: Retrieving Device Group Details in PHP using EasyWeChat\nDESCRIPTION: This code shows how to get detailed information about a specific device group, including its devices, using the EasyWeChat SDK. It requires the group ID, start index, and count as parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/shake-around.md#2025-04-22_snippet_16\n\nLANGUAGE: php\nCODE:\n```\n$result = $shakearound->group()->getDetails(123, 0, 2);\n\nvar_dump($result->data['devices'][0]['comment']) // test device1\nvar_dump($result->data['total_count']) // 100\n```\n\n----------------------------------------\n\nTITLE: Listing Store Locations\nDESCRIPTION: Retrieves a list of store locations with pagination support using offset and limit parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/poi.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$poi->lists($begin, $limit);// begin:0, limit:10\n```\n\nLANGUAGE: php\nCODE:\n```\n$pois = $poi->lists(0, 2);// 取2条记录\n```\n\n----------------------------------------\n\nTITLE: Checking Broadcast Message Status with EasyWeChat\nDESCRIPTION: Method for checking the sending status of a broadcast message using its message ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/broadcasting.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\n$app->broadcasting->status($msgId);\n```\n\n----------------------------------------\n\nTITLE: Checking Shake Around Device ID Application Status in EasyWeChat PHP SDK\nDESCRIPTION: Demonstrates how to check the status of a Shake Around device ID application using the EasyWeChat SDK. Includes example API call and response handling.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/shake-around.md#2025-04-22_snippet_6\n\nLANGUAGE: PHP\nCODE:\n```\n$result = $shakearound->device()->getStatus(123);\n\n/* 返回结果\n{\n    \"data\": {\n        \"apply_time\": 1432026025,\n        \"audit_comment\": \"test\",\n        \"audit_status\": 1,\n        \"audit_time\": 0\n    },\n    \"errcode\": 0,\n    \"errmsg\": \"success.\"\n}\n*/\nvar_dump($result->data['audit_status']) // 1\n```\n\n----------------------------------------\n\nTITLE: Converting userid to open userid in Enterprise WeChat using PHP\nDESCRIPTION: This snippet demonstrates how to batch convert userids to open userids using the EasyWeChat library.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/to-account.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$work->corp_group->batchUseridToOpenUserid(array $useridList);\n```\n\n----------------------------------------\n\nTITLE: Getting Pre-Authorization URL in PHP\nDESCRIPTION: Generates a pre-authorization URL for user authorization with a callback URI parameter.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/open-platform/index.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$openPlatform->getPreAuthorizationUrl('https://easywechat.com/callback'); // 传入回调URI即可\n```\n\n----------------------------------------\n\nTITLE: Retrieving External Contact Statistics in PHP\nDESCRIPTION: Demonstrates how to retrieve statistics for user behavior and group chats.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/external-contact.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n// Get 'Contact Customer Statistics' data\n$userIds = [\n    'zhangsan',\n    'lisi'\n];\n$partyIds = [\n    'PARTY_ID_1',\n    'PARTY_ID_2'\n];\n$from = 1536508800;\n$to = 1536940800;\n$app->external_contact_statistics->userBehavior($userIds, $from, $to, $partyIds);\n\n// Get 'Group Chat Statistics' data by group owner\n$params = [\n    'day_begin_time' => 1600272000,\n    'day_end_time' => 1600444800,\n    'owner_filter' => [\n        'userid_list' => ['zhangsan']\n    ],\n    'order_by' => 2,\n    'order_asc' => 0,\n    'offset' => 0,\n    'limit' => 1000\n];\n$app->external_contact_statistics->groupChatStatistic(array $params);\n\n// Get 'Group Chat Statistics' data by day\n$dayBeginTime = 1600272000;\n$dayEndTime = 1600444800;\n$userIds = ['userid1', 'userid2'];\n$app->external_contact_statistics->groupChatStatisticGroupByDay(int $dayBeginTime, int $dayEndTime, array $userIds);\n```\n\n----------------------------------------\n\nTITLE: Configuring EasyWeChat Payment for Red Packets in PHP\nDESCRIPTION: Sets up the configuration for EasyWeChat payment, including necessary parameters for red packet functionality. Requires SSL certificate configuration.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/redpack.md#2025-04-22_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\nuse EasyWeChat\\Factory;\n\n$config = [\n    'app_id'    => 'you-app-id',\n    'mch_id'    => 'your-mch-id',\n    'key'       => 'key-for-signature',\n    'cert_path' => 'path/to/your/cert.pem',\n    'key_path'  => 'path/to/your/key',\n    // ...\n];\n\n$payment = Factory::payment($config);\n\n$redpack = $payment->redpack;\n```\n\n----------------------------------------\n\nTITLE: Creating Image Messages in EasyWeChat PHP SDK\nDESCRIPTION: This snippet shows different ways to create and customize an image message in EasyWeChat. The image message requires a media_id parameter which references a previously uploaded media resource.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/messages.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nuse EasyWeChat\\Message\\Image;\n\n$text = new Image(['media_id' => $mediaId]);\n\n// or\n$text = new Image();\n$text->media_id = $mediaId; // or $text->mediaId = $media;\n\n// or\n$text = new Image();\n$text->setAttribute('media_id', $mediaId);\n```\n\n----------------------------------------\n\nTITLE: Custom Logger Implementation for EasyWeChat\nDESCRIPTION: Example of implementing a custom log driver using Monolog, demonstrating how to extend the logging functionality with a rotating file handler.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/configuration.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse Monolog\\Logger;\nuse Monolog\\Handler\\RotatingFileHandler;\n\n\n// 注册自定义日志\n$app->logger->extend('mylog', function($app, $config){\n    return new Logger($this->parseChannel($config), [\n        $this->prepareHandler(new RotatingFileHandler(\n            $config['path'], $config['days'], $this->level($config)\n        )),\n    ]);\n});\n```\n\n----------------------------------------\n\nTITLE: Deleting Profit Sharing Receiver in EasyWeChat PHP\nDESCRIPTION: Shows how to remove a profit sharing receiver from the system. This operation is performed using the profit_sharing object of the payment instance.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/profit-sharing.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$payment->profit_sharing->deleteReceiver($receiver);\n```\n\n----------------------------------------\n\nTITLE: Getting Authorizer Option Settings\nDESCRIPTION: Retrieves specific option settings for an authorized account identified by app ID and option name.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/open-platform/index.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$openPlatform->getAuthorizerOption(string $appId, string $name);\n```\n\n----------------------------------------\n\nTITLE: WeChat Semantic API Response Example\nDESCRIPTION: Shows the JSON response structure returned by the WeChat semantic understanding API. This example demonstrates how the API interprets a flight search query, identifying locations, dates, and airline information.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/semantic.md#2025-04-22_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"errcode\":0,\n    \"query\":\"查一下明天从北京到上海的南航机票\",\n    \"type\":\"flight\",\n    \"semantic\":{\n        \"details\":{\n            \"start_loc\":{\n                \"type\":\"LOC_CITY\",\n                \"city\":\"北京市\",\n                \"city_simple\":\"北京\",\n                \"loc_ori\":\"北京\"\n                },\n            \"end_loc\": {\n                \"type\":\"LOC_CITY\",\n                \"city\":\"上海市\",\n                \"city_simple\":\"上海\",\n                \"loc_ori\":\"上海\"\n              },\n            \"start_date\": {\n                \"type\":\"DT_ORI\",\n                \"date\":\"2014-03-05\",\n                \"date_ori\":\"明天\"\n              },\n           \"airline\":\"中国南方航空公司\"\n        },\n    \"intent\":\"SEARCH\"\n}\n```\n\n----------------------------------------\n\nTITLE: 上传图片到微信服务器使用EasyWeChat (PHP)\nDESCRIPTION: 使用EasyWeChat的media模块上传图片。支持jpeg、jpg、bmp、png格式，图片大小不超过2M。函数接受图片路径作为参数，并返回上传响应。\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/micro-merchant/media.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n// $path string 图片路径\n$response = $app->media->upload($path);\n```\n\n----------------------------------------\n\nTITLE: Activating WeChat Membership Card in PHP\nDESCRIPTION: Activates a WeChat membership card using the activate method. Requires an array of membership card information.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/card.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$result = $card->activate($info);\n```\n\nLANGUAGE: php\nCODE:\n```\n$activate = [\n      'membership_number'        => '357898858',\n      'code'                     => '916679873278',\n      'activate_begin_time'      => '1397577600',\n      'activate_end_time'        => '1422724261',\n      'init_bonus'               => '持白金会员卡到店消费，可享8折优惠。',\n      'init_balance'             => '持白金会员卡到店消费，可享8折优惠。',\n      'init_custom_field_value1' => '白银',\n      'init_custom_field_value2' => '9折',\n      'init_custom_field_value3' => '200',\n];\n\n$result = $card->activate($activate);\n```\n\n----------------------------------------\n\nTITLE: Creating a Department in EasyWeChat Contacts in PHP\nDESCRIPTION: Illustrates how to create a new department in the EasyWeChat contacts system by providing department details such as name, parent ID, order, and ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/contacts.md#2025-04-22_snippet_13\n\nLANGUAGE: php\nCODE:\n```\n$contacts->department->create([\n        'name' => '广州研发中心',\n        'parentid' => 1,\n        'order' => 1,\n        'id' => 2,\n    ]);\n```\n\n----------------------------------------\n\nTITLE: Listing Device Groups in PHP using EasyWeChat\nDESCRIPTION: This snippet demonstrates how to retrieve a list of device groups using the EasyWeChat SDK. It takes start index and count parameters to paginate the results.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/shake-around.md#2025-04-22_snippet_15\n\nLANGUAGE: php\nCODE:\n```\n$result = $shakearound->group()->lists(0, 2);\n\nvar_dump($result->data['groups'][1]['group_name']) // test2\nvar_dump($result->data['total_count']) // 100\n```\n\n----------------------------------------\n\nTITLE: Retrieving Internal Group Chat Archive Info in PHP\nDESCRIPTION: Gets the archived information for an internal group chat using the room ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/msg-audit.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$roomId = 'wrjc7bDwAASxc8tZvBErFE02BtPWyAAA';\n\n$app->msg_audit->getRoom(string $roomId);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Authorizer Information in EasyWeChat PHP\nDESCRIPTION: This snippet shows how to retrieve basic account information and option settings for an authorizer using EasyWeChat. It also demonstrates how to set option information.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/open_platform.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$openPlatform->getAuthorizerInfo($authorizerAppId);\n\n$openPlatform->getAuthorizerOption($authorizerAppId, $optionName);\n\n$openPlatform->setAuthorizerOption($authorizerAppId, $optionName, $optionValue);\n```\n\n----------------------------------------\n\nTITLE: Listing All Added WeChat Mini Program Plugins in PHP\nDESCRIPTION: Code to retrieve a list of all plugins that have been added to the current WeChat Mini Program.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/plugin.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$app->plugin->list();\n```\n\n----------------------------------------\n\nTITLE: Creating a Customer Service Account in PHP\nDESCRIPTION: Adds a new customer service account with the specified account ID and display name.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/customer_service.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$app->customer_service->create('foo@test', '客服1');\n```\n\n----------------------------------------\n\nTITLE: Setting Authorizer Options\nDESCRIPTION: Updates option settings for an authorized account with specified app ID, option name and value.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/open-platform/index.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$openPlatform->setAuthorizerOption(string $appId, string $name, string $value);\n```\n\n----------------------------------------\n\nTITLE: Uploading Generic File to WeChat Work API\nDESCRIPTION: Uploads a general file to WeChat Work platform with optional filename parameter. Files must be under 20MB. Supports setting custom filename for proper Chinese character display.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/media.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$path = '/path/to/企业微信操作手册.pdf'\n\n$form = [ //可选 发送时,中文文件名不显示或被过虑可传此参数\n    'filename' => '企业微信操作手册.pdf'\n];\n\n$app->media->uploadFile(string $path, array $form = []);\n```\n\n----------------------------------------\n\nTITLE: Converting Long URL to Short URL using EasyWeChat in PHP\nDESCRIPTION: This code snippet demonstrates how to use the EasyWeChat library to convert a long URL into a short URL. It uses the 'shorten' method of the 'url' object from the EasyWeChat app instance. The result includes error code, message, and the generated short URL.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/basic-services/url.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$shortUrl = $app->url->shorten('https://easywechat.com');\n//\n(\n    [errcode] => 0\n    [errmsg] => ok\n    [short_url] => https://w.url.cn/s/Aq7jWrd\n)\n```\n\n----------------------------------------\n\nTITLE: Searching Stores in Tencent Maps\nDESCRIPTION: Searches for stores in Tencent Maps using district ID and keywords.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/store.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$app->store->searchFromMap($districtId, $keyword);\n```\n\n----------------------------------------\n\nTITLE: Sample JSSDK Config Output in JavaScript\nDESCRIPTION: This code block shows an example of the generated JSSDK configuration as it would appear in the final HTML/JavaScript output.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/jssdk.md#2025-04-22_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\n<script src=\"https://res.wx.qq.com/open/js/jweixin-1.4.0.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n<script type=\"text/javascript\" charset=\"utf-8\">\nwx.config({\n    debug: true, // 请在上线前删除它\n    appId: 'wx3cf0f39249eb0e60',\n    timestamp: 1430009304,\n    nonceStr: 'qey94m021ik',\n    signature: '4F76593A4245644FAE4E1BC940F6422A0C3EC03E',\n    jsApiList: ['updateAppMessageShareData', 'updateTimelineShareData']\n});\n</script>\n```\n\n----------------------------------------\n\nTITLE: Updating Card Code in PHP\nDESCRIPTION: Updates the code of a WeChat card using the updateCode method. Requires current code, new code, and optionally card ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/card.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$card->updateCode($code, $newCode, $cardId);\n```\n\nLANGUAGE: php\nCODE:\n```\n$code     = '148246271394';\n$newCode = '659266965266';\n$cardId  = '';\n\n$result = $card->updateCode($code, $newCode, $cardId);\n```\n\n----------------------------------------\n\nTITLE: Deleting a Specific Template from an Account in PHP\nDESCRIPTION: This snippet demonstrates how to delete a specific template from an account. It uses the 'delete' method of the template_message object, taking the template id as a parameter.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/template_message.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$app->template_message->delete($templateId);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Mini Program Account Categories\nDESCRIPTION: Fetches all categories associated with the Mini Program account.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/mini-program/subscribe_message.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$app->subscribe_message->getCategory();\n```\n\n----------------------------------------\n\nTITLE: Closing a Customer Service Session in PHP\nDESCRIPTION: Ends an active customer service session between a customer service account and a user.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/customer_service.md#2025-04-22_snippet_14\n\nLANGUAGE: php\nCODE:\n```\n$app->customer_service_session->close('test1@test', 'OPENID');\n```\n\n----------------------------------------\n\nTITLE: Sending Video Messages with EasyWeChat Broadcasting\nDESCRIPTION: Process for sending video messages, which requires first uploading the video as a broadcasting media. The upload returns a media_id that can then be used for broadcasting.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/broadcasting.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n// 1. 先上传视频素材用于群发：\n$video = '/path/to/video.mp4';\n$videoMedia = $app->media->uploadVideoForBroadcasting($video, '视频标题', '视频描述');\n\n// 结果如下：\n//{\n//  \"type\":\"video\",\n//  \"media_id\":\"IhdaAQXuvJtGzwwc0abfXnzeezfO0NgPK6AQYShD8RQYMTtfzbLdBIQkQziv2XJc\",\n//  \"created_at\":1398848981\n//}\n\n// 2. 使用上面得到的 media_id 群发视频消息\n$app->broadcasting->sendVideo($videoMedia['media_id']);\n```\n\n----------------------------------------\n\nTITLE: Fetching Keywords for a Specific Template Title in PHP\nDESCRIPTION: This code retrieves the keyword library for a specific template title. It uses the 'get' method of the template_message object, taking the template id as a parameter.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/template_message.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$app->template_message->get($id);\n```\n\n----------------------------------------\n\nTITLE: Setting Sub-Merchant for Service Provider Mode in PHP\nDESCRIPTION: Configures the sub-merchant ID for service provider mode in EasyWeChat. Warns against passing subAppID to avoid signature errors.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/redpack.md#2025-04-22_snippet_1\n\nLANGUAGE: PHP\nCODE:\n```\n// 不能传递第二个参数subAppID，否则微信将一直返回签名错误\n$payment->setSubMerchant($subMerchantID);\n```\n\n----------------------------------------\n\nTITLE: Converting external_userid in Enterprise WeChat using PHP\nDESCRIPTION: This code shows how to convert external user IDs to new external user IDs using the EasyWeChat library.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/to-account.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$work->external_contact->getNewExternalUserid(array $externalUserIds);\n```\n\n----------------------------------------\n\nTITLE: Downloading and Saving QR Code Image in EasyWeChat PHP\nDESCRIPTION: Demonstrates how to fetch the QR code binary image content using the URL and save it to a local file. This enables storing QR codes on the server for later use.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/qrcode.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$url = $qrcode->url($ticket);\n\n$content = file_get_contents($url); // 得到二进制图片内容\n\nfile_put_contents(__DIR__ . '/code.jpg', $content); // 写入文件\n```\n\n----------------------------------------\n\nTITLE: Setting Custom URL for JSSDK Config in PHP\nDESCRIPTION: This code demonstrates how to set a custom URL for the JSSDK configuration instead of using the default one.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/jssdk.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$app->jssdk->setUrl($url);\n$app->jssdk->buildConfig(array $APIs, $debug = false, $beta = false, $json = true, array $openTagList = []);\n```\n\n----------------------------------------\n\nTITLE: Retrieving WeChat Membership Card User Info in PHP\nDESCRIPTION: Retrieves information about a WeChat membership card user using the getMemberCardUser method. Requires card ID and code.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/card.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n$card->getMemberCardUser($cardId, $code);\n```\n\nLANGUAGE: php\nCODE:\n```\n$cardId = 'pbLatjtZ7v1BG_ZnTjbW85GYc_E8';\n$code    = '916679873278';\n\n$result = $card->getMemberCardUser($cardId, $code);\n```\n\n----------------------------------------\n\nTITLE: Using Custom Cache Driver with EasyWeChat in PHP\nDESCRIPTION: This snippet shows how to instantiate and use a custom cache driver with the EasyWeChat SDK. It demonstrates setting the custom cache in the configuration options.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/cache.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$myCacheDriver = new MyCacheDriver();\n\n$config = [\n    //...\n    'cache'   => $myCacheDriver,\n];\n\n$wechatApp = new Application($options);\n```\n\n----------------------------------------\n\nTITLE: Uploading Permanent Video in PHP\nDESCRIPTION: Demonstrates uploading a permanent video file with title and description.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/material.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$result = $material->uploadVideo(\"/path/to/your/video.mp4\", \"视频标题\", \"视频描述\");\n$mediaId = $result->media_id;\n// {\n//    \"media_id\":MEDIA_ID,\n// }\n```\n\n----------------------------------------\n\nTITLE: Removing a WeChat Mini Program Plugin in PHP\nDESCRIPTION: Code to delete/unbind an already added plugin from a WeChat Mini Program. Requires the plugin's AppID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/plugin.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$pluginAppId = 'xxxxxxxxx';\n\n$app->plugin->unbind($pluginAppId);\n```\n\n----------------------------------------\n\nTITLE: Previewing Broadcast Message to Specific WeChat Account\nDESCRIPTION: Sends a preview of a broadcast message to a specific user identified by their WeChat username. Useful for testing broadcasts with official accounts.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/broadcast.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$broadcast->previewByName($messageType, $message, $wxname);\n\n// 别名方式\n$broadcast->previewTextByName($text, $wxname);\n$broadcast->previewNewsByName($mediaId, $wxname);\n$broadcast->previewVoiceByName($mediaId, $wxname);\n$broadcast->previewImageByName($mediaId, $wxname);\n$broadcast->previewVideoByName($message, $wxname);\n$broadcast->previewCardByName($cardId, $wxname);\n```\n\n----------------------------------------\n\nTITLE: Initializing Semantic Understanding Module in EasyWeChat\nDESCRIPTION: Shows how to initialize the semantic understanding module from an EasyWeChat Application instance. This is the first step required before making any semantic API calls.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/semantic.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\n// ... 前面部分省略\n\n$app = new Application($options);\n\n$semantic = $app->semantic;\n```\n\n----------------------------------------\n\nTITLE: Initializing URL Service in EasyWeChat PHP\nDESCRIPTION: This snippet demonstrates how to initialize the URL service from an EasyWeChat Application instance. It requires an Application instance with proper configuration options.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/short-url.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nuse EasyWeChat\\Foundation\\Application;\n// ...\n$app = new Application($options);\n\n$url = $app->url;\n```\n\n----------------------------------------\n\nTITLE: Using Preset Parameters in API Requests with EasyWeChat SDK\nDESCRIPTION: Illustrates how to use preset parameters in API requests, introduced in version 6.4.0. It shows methods to include account information like merchant ID in API calls without explicitly passing them each time.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/6.x/client.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$client->withMchId()->get('endpoint');\n// 结果：endpoint?mchid=xxxxx\n\n$client->withMchIdAs('mchid')->get('v3/pay/transactions/id/1217752501201407033233368018');\n// 结果：v3/pay/transactions/id/1217752501201407033233368018?mchid=xxxxx\n\n$client->withAppId()->post('/path/to/resources', [...]);\n$client->withAppId()->withMchid()->post('/path/to/resources', [...]);\n\n$client->withAppId('12345678')->post('/path/to/resources', [...]);\n// or\n$client->with('appid', '123456')->post('/path/to/resources', [...]);\n\n$client->withAppIdAs('mch_appid')->post('/path/to/resources', [...]);\n\n$client->with('appid')->post(...)\n$client->with(['appid', 'mchid'])->post(...)\n$client->with(['appid' => '1234565', 'mchid'])->post(...)\n```\n\n----------------------------------------\n\nTITLE: Converting Long URL to Short URL in EasyWeChat PHP\nDESCRIPTION: This example shows how to use the shorten method to convert a long URL to a short URL. It takes a long URL as input and returns a shortened version that can be used for QR code generation.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/short-url.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$shortUrl = $url->shorten('http://overtrue.me/open-source');\n//\n```\n\n----------------------------------------\n\nTITLE: Setting Activation Fields for WeChat Card in PHP\nDESCRIPTION: Sets the required and optional fields for WeChat card activation using the activateUserForm method. Takes card ID, required form fields, and optional form fields.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/card.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$card->activateUserForm($cardId, $requiredForm, $optionalForm);\n```\n\nLANGUAGE: php\nCODE:\n```\n$cardId = 'pdkJ9uJYAyfLXsUCwI2LdH2Pn1AU';\n\n$requiredForm = [\n    'required_form' => [\n        'common_field_id_list' => [\n            'USER_FORM_INFO_FLAG_MOBILE',\n            'USER_FORM_INFO_FLAG_LOCATION',\n            'USER_FORM_INFO_FLAG_BIRTHDAY',\n        ],\n        'custom_field_list' => [\n            '喜欢的食物',\n        ],\n    ],\n];\n\n$optionalForm = [\n    'optional_form' => [\n        'common_field_id_list' => [\n            'USER_FORM_INFO_FLAG_EMAIL',\n        ],\n        'custom_field_list' => [\n            '喜欢的食物',\n        ],\n    ],\n];\n\n$result = $card->activateUserForm($cardId, $requiredForm, $optionalForm);\n```\n\n----------------------------------------\n\nTITLE: Setting migration completion for external userids in Enterprise WeChat using PHP\nDESCRIPTION: This snippet demonstrates how to set the migration completion status for external user IDs using the EasyWeChat library.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/to-account.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$work->external_contact->finishExternalUseridMigration(string $corpId);\n```\n\n----------------------------------------\n\nTITLE: Getting QR Code URL in EasyWeChat PHP\nDESCRIPTION: Converts a QR code ticket into a URL that can be used to display the QR code. This URL can be used directly in image tags or for fetching the QR code content.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/qrcode.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$url = $qrcode->url($ticket);\n```\n\n----------------------------------------\n\nTITLE: Setting Authorizer Options in PHP\nDESCRIPTION: Updates option settings for an authorized account with specified appId, option name, and value.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/open-platform/index.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$openPlatform->setAuthorizerOption(string $appId, string $name, string $value);\n```\n\n----------------------------------------\n\nTITLE: Updating WeChat Membership Card User Info in PHP\nDESCRIPTION: Updates information for a WeChat membership card user using the updateMemberCardUser method. Requires an array of user information to update.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/card.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n$card->updateMemberCardUser($updateUser);\n```\n\nLANGUAGE: php\nCODE:\n```\n$updateUser = [\n    'code'                => '916679873278',\n    'card_id'             => 'pbLatjtZ7v1BG_ZnTjbW85GYc_E8',\n    'record_bonus'        => '消费30元，获得3积分',\n    'bonus'               => '100',\n    'balance'             => '持白金会员卡到店消费，可享8折优惠。',\n    'record_balance'      => '持白金会员卡到店消费，可享8折优惠。',\n    'custom_field_value1' => '100',\n    'custom_field_value2' => '200',\n    'custom_field_value3' => '300',\n];\n\n$result = $card->updateMemberCardUser($updateUser);\n```\n\n----------------------------------------\n\nTITLE: Getting User Group ID in EasyWeChat PHP\nDESCRIPTION: This snippet demonstrates how to retrieve the group ID that a user belongs to, using their OpenID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/user.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$userService->group($openId);\n```\n\nLANGUAGE: php\nCODE:\n```\n$userGroupId = $userService->group($openId);\n```\n\n----------------------------------------\n\nTITLE: Handling Authorization Code in WeChat Platform\nDESCRIPTION: Processes the authorization code received from the callback URL to obtain interface credentials and authorization information.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/open-platform/index.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$openPlatform->handleAuthorize(string $authCode = null);\n```\n\n----------------------------------------\n\nTITLE: Converting corpid in Enterprise WeChat using PHP\nDESCRIPTION: This code snippet shows how to convert a corpid to an open corpid using the EasyWeChat library.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/to-account.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$work->corp_group->getOpenCorpid(string $corpId);\n```\n\n----------------------------------------\n\nTITLE: Broadcasting Message to Specific Users in WeChat\nDESCRIPTION: Sends a broadcast message to specific users identified by their openIds. Requires at least two openIds provided as an array. Supports all message types.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/broadcast.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$broadcast->send($messageType, $message, [$openId1, $openId2]);\n\n// 别名方式\n$broadcast->sendText($text, [$openId1, $openId2]);\n$broadcast->sendNews($mediaId, [$openId1, $openId2]);\n$broadcast->sendVoice($mediaId, [$openId1, $openId2]);\n$broadcast->sendImage($mediaId, [$openId1, $openId2]);\n$broadcast->sendVideo($message, [$openId1, $openId2]);\n$broadcast->sendCard($cardId, [$openId1, $openId2]);\n```\n\n----------------------------------------\n\nTITLE: Initializing Media Manager Instance in PHP\nDESCRIPTION: Shows how to initialize both permanent and temporary media manager instances using the EasyWeChat Application class.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/material.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nuse EasyWeChat\\Foundation\\Application;\n\n$app = new Application($options);\n\n// 永久素材\n$material = $app->material;\n// 临时素材\n$temporary = $app->material_temporary;\n```\n\n----------------------------------------\n\nTITLE: Creating Card QR Code in EasyWeChat PHP\nDESCRIPTION: Generates a QR code specifically for cards/coupons. Takes an array of card data as the parameter.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/qrcode.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$qrcode->card($card);\n```\n\n----------------------------------------\n\nTITLE: Deleting Store Location - PHP\nDESCRIPTION: Removes a store location from WeChat POI system using its POI ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/poi.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$app->poi->delete($poiId);\n```\n\nLANGUAGE: php\nCODE:\n```\n$app->poi->delete(271262077);// true or exception\n```\n\n----------------------------------------\n\nTITLE: Checking Group Chat Consent Status in PHP\nDESCRIPTION: Retrieves the consent status for a group chat using the room ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/msg-audit.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$roomId = 'wrjc7bDwAASxc8tZvBErFE02BtPWyAAA';\n\n$app->msg_audit->getRoomAgreeStatus(string $roomId);\n```\n\n----------------------------------------\n\nTITLE: Updating WeChat Sub-Merchant in PHP\nDESCRIPTION: Updates an existing WeChat sub-merchant using the updateSubMerchant method. Requires sub-merchant ID and an array of information to update.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/card.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\n$card->updateSubMerchant($merchantId, $info);\n```\n\nLANGUAGE: php\nCODE:\n```\n$info = [\n  //...\n];\n$result = $card->updateSubMerchant('12', $info);\n```\n\n----------------------------------------\n\nTITLE: 获取EasyWeChat菜单模块实例\nDESCRIPTION: 展示如何创建EasyWeChat应用实例并获取菜单模块。需要先配置应用选项。\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/menu.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nuse EasyWeChat\\Foundation\\Application;\n\n// ...\n\n$app = new Application($options);\n\n$menu = $app->menu;\n```\n\n----------------------------------------\n\nTITLE: Sending Text Messages Using Text Class\nDESCRIPTION: Shows how to send text messages using the Text class from EasyWeChat GroupRobot Messages module.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/group-robot.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Work\\GroupRobot\\Messages\\Text;\n\n// 准备消息\n$text = new Text('hello');\n\n// 发送\n$messenger->message($text)->toGroup($groupKey)->send();\n```\n\n----------------------------------------\n\nTITLE: Creating WeChat Sub-Merchant in PHP\nDESCRIPTION: Creates a new WeChat sub-merchant using the craeteSubMerchant method. Requires various details about the sub-merchant including name, logo, and category IDs.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/card.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n$card->craeteSubMerchant($brandName, $logoUrl, $protocol, $endTime, $primaryCategoryId, $secondaryCategoryId, $agreementMediaId, $operatorMediaId, $appId); \n```\n\nLANGUAGE: php\nCODE:\n```\n$info = [\n    'brand_name' => 'overtrue',\n    'logo_url' => 'http://mmbiz.qpic.cn/mmbiz/iaL1LJM1mF9aRKPZJkmG8xXhiaHqkKSVMMWeN3hLut7X7hicFNjakmxibMLGWpXrEXB33367o7zHN0CwngnQY7zb7g/0',\n    'protocol' => 'qIqwTfzAdJ_1-VJFT0fIV53DSY4sZY2WyhkzZzbV498Qgdp-K5HJtZihbHLS0Ys0',\n    'end_time' => '1438990559',\n    'primary_category_id' => 1,\n    'secondary_category_id' => 101,\n    'agreement_media_id' => '',\n    'operator_media_id' => '',\n    'app_id' => '',\n];\n\n$result = $card->createSubMerchant($info);\n```\n\n----------------------------------------\n\nTITLE: Sending Image Messages - PHP\nDESCRIPTION: Demonstrates how to send image messages by converting image data to base64 and calculating MD5 hash.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/group-robot.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Work\\GroupRobot\\Messages\\Image;\n\n$img = file_get_contents('http://res.mail.qq.com/node/ww/wwopenmng/images/independent/doc/test_pic_msg1.png');\n\n$image = new Image(base64_encode($img), md5($img));\n\n$result = $messenger->message($image)->toGroup($groupKey)->send();\n```\n\n----------------------------------------\n\nTITLE: Generating JSSDK Payment Configuration in PHP\nDESCRIPTION: Creates the configuration for JSSDK payment method. Returns an array with necessary parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/jssdk.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$config = $jssdk->sdkConfig($prepayId); // 返回数组\n```\n\n----------------------------------------\n\nTITLE: Listing Nearby POIs in WeChat Mini Program using PHP\nDESCRIPTION: This snippet shows how to retrieve a list of nearby Points of Interest (POIs) using the EasyWeChat SDK. It supports pagination with page number and page size parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/mini-program/nearby_poi.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$page = 1;\n$pageRows = 10;\n\n$app->nearby_poi->list($page, $pageRows);\n```\n\n----------------------------------------\n\nTITLE: Fetching Approval Records Examples in PHP with EasyWeChat\nDESCRIPTION: Demonstrates how to retrieve approval records with and without specifying the first approval number to start from.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/oa.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\n$app->oa->approvalRecords(1492617600, 1492790400);\n\n// 指定第一个拉取的审批单号，不填从该时间段的第一个审批单拉取\n$app->oa->approvalRecords(1492617600, 1492790400, '201704240001');\n```\n\n----------------------------------------\n\nTITLE: Creating APP Contract with EasyWeChat\nDESCRIPTION: Initializes a contract for mobile applications using provided parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/contract.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$result = $app->contract->app(array $params);\n```\n\n----------------------------------------\n\nTITLE: Getting Suite Access Token in PHP\nDESCRIPTION: Retrieves the suite access token for third-party applications.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/open-work/service.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$app->suite_access_token->getToken()\n```\n\n----------------------------------------\n\nTITLE: Initializing User Group Instance in EasyWeChat (PHP)\nDESCRIPTION: Creates a new Application instance and accesses the user_group property to interact with WeChat user groups. This is the starting point for any user group operations.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/user-group.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nuse EasyWeChat\\Foundation\\Application;\n\n// ...\n\n$app = new Application($options);\n\n$group = $app->user_group; // $user['user_group']\n```\n\n----------------------------------------\n\nTITLE: Querying Shake Around Registration Status in EasyWeChat PHP SDK\nDESCRIPTION: Shows how to check the status of a Shake Around registration application using the EasyWeChat SDK. Includes example API call and response handling.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/shake-around.md#2025-04-22_snippet_3\n\nLANGUAGE: PHP\nCODE:\n```\n$result = $shakearound->getStatus();\n\n/* 返回结果\n{\n    \"data\": {\n        \"apply_time\": 1432026025,\n        \"audit_comment\": \"test\",\n        \"audit_status\": 1,\n        \"audit_time\": 0\n    },\n    \"errcode\": 0,\n    \"errmsg\": \"success.\"\n}\n*/\nvar_dump($result->data['audit_comment']) // test\n```\n\n----------------------------------------\n\nTITLE: Updating a Department in EasyWeChat Contacts in PHP\nDESCRIPTION: Shows how to update an existing department's information in the EasyWeChat contacts system by specifying the department ID and the fields to be updated.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/contacts.md#2025-04-22_snippet_14\n\nLANGUAGE: php\nCODE:\n```\n$contacts->department->update($id, [\n        'name' => '广州研发中心',\n        'parentid' => 1,\n        'order' => 1,\n    ]);\n```\n\n----------------------------------------\n\nTITLE: Download RSA Public Key Command\nDESCRIPTION: Command line example for downloading RSA public key using the EasyWeChat console tool with merchant credentials.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/transfer.md#2025-04-22_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n$ ./vendor/bin/easywechat payment:rsa_public_key \\\n  >  --mch_id=14339221228 \\\n  >  --api_key=36YTbDmLgyQ52noqdxgwGiYy \\\n  >  --cert_path=/Users/overtrue/www/demo/apiclient_cert.pem \\\n  >  --key_path=/Users/overtrue/www/demo/apiclient_key.pem\n```\n\n----------------------------------------\n\nTITLE: Modifying Card Stock in PHP\nDESCRIPTION: Increases or reduces the stock of a WeChat card using increaseStock and reductStock methods. Requires card ID and amount to modify.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/card.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$card->increaseStock($cardId, $amount); // 增加库存\n$card->reductStock($cardId, $amount); // 减少库存\n```\n\nLANGUAGE: php\nCODE:\n```\n$cardId = 'pdkJ9uLRSbnB3UFEjZAgUxAJrjeY';\n\n$result = $card->increaseStock($cardId, 100);\n```\n\n----------------------------------------\n\nTITLE: Inviting Members to EasyWeChat Contacts in PHP\nDESCRIPTION: Shows how to invite multiple members to use EasyWeChat by specifying user IDs, department IDs, or tag IDs. The invitation is sent via SMS or email.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/contacts.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\n$params = [\n    'user' => ['UserID1', 'UserID2', 'UserID3'],    // 成员ID列表, 最多支持1000个\n    'party' => ['PartyID1', 'PartyID2'],            // 部门ID列表，最多支持100个\n    'tag' => ['TagID1', 'TagID2'],                  // 标签ID列表，最多支持100个\n];\n\n$contacts->user->invite($params);\n```\n\n----------------------------------------\n\nTITLE: 提交小微商户入驻申请 - PHP EasyWeChat\nDESCRIPTION: 使用EasyWeChat SDK提交小微商户入驻申请。需要提供业务申请编号、身份证照片等商户资料信息。完整参数列表请参考小微商户专属文档。\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/micro-merchant/submit-application.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$result = $app->submitApplication([\n    'business_code' => '123456', // 业务申请编号\n    'id_card_copy'  => 'media_id', // 身份证人像面照片\n    // ...\n    // 参数太多就不一一列出，自行根据 (小微商户专属文档 -> 申请入驻api) 填写\n]);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Batch Page Statistics in PHP\nDESCRIPTION: Retrieves statistics for multiple pages on a specific date, with paginated results.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/shake-around.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$result = $shakearound->stats->pagesSummary(1435075200, 1);\n```\n\n----------------------------------------\n\nTITLE: Creating Material Messages in EasyWeChat PHP SDK\nDESCRIPTION: This snippet demonstrates how to create a material message, which is used for referencing existing media materials in group messaging or customer service scenarios. It requires specifying the material type and media ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/messages.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Message\\Material;\n\n$material = new Material('mpnews', $mediaId);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Plugin Users in WeChat Mini Program using PHP\nDESCRIPTION: This code fetches a list of all current users of the plugin. It supports pagination with page number and size parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/mini-program/plugin.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$page = 1;\n$size = 10;\n\n$app->plugin_dev->getUsers($page, $size);\n```\n\n----------------------------------------\n\nTITLE: Initializing EasyWeChat Shake Around SDK in PHP\nDESCRIPTION: Demonstrates how to initialize the EasyWeChat SDK and get an instance of the Shake Around API. Requires the EasyWeChat Foundation Application class.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/shake-around.md#2025-04-22_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n<?php\nuse EasyWeChat\\Foundation\\Application;\n// ...\n$app = new Application($options);\n\n$shakearound = $app->shakearound;\n```\n\n----------------------------------------\n\nTITLE: Applying for Payment with EasyWeChat Contract\nDESCRIPTION: Initiates a payment request for an existing contract using provided parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/contract.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$result = $app->contract->apply(array $params);\n```\n\n----------------------------------------\n\nTITLE: Configuring WeChat Platform URL with Account ID\nDESCRIPTION: Example URL format for setting up WeChat platform integration with a specific account ID. This allows the system to route incoming requests to the correct account configuration.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/accounts.md#2025-04-22_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nhttp://www.example.com/wechat?id=1\n```\n\n----------------------------------------\n\nTITLE: Sending Image Messages\nDESCRIPTION: Demonstrates how to send image messages by converting image data to base64 and calculating MD5 hash.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/group-robot.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Work\\GroupRobot\\Messages\\Image;\n\n$img = file_get_contents('http://res.mail.qq.com/node/ww/wwopenmng/images/independent/doc/test_pic_msg1.png');\n\n$image = new Image(base64_encode($img), md5($img));\n\n$result = $messenger->message($image)->toGroup($groupKey)->send();\n```\n\n----------------------------------------\n\nTITLE: Adding Payment Directory in EasyWeChat Micro Merchant (PHP)\nDESCRIPTION: Adds a new payment directory to the micro merchant configuration. Requires a JSAPI path parameter, with optional AppID and sub merchant ID parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/micro-merchant/merchant-config.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$response = $app->merchantConfig->addPath(string $jsapiPath, string $appId = '', string $subMchId = '');\n```\n\n----------------------------------------\n\nTITLE: Obtaining Access Token for Subordinate Enterprise in PHP using EasyWeChat\nDESCRIPTION: This code snippet shows how to obtain an access token for a subordinate enterprise within an enterprise group. It requires the corporation ID and agent ID as parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/corp-group.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$corpId = 'wwd216fa8c4c5c0e7x';\n$agentId = 100001;\n\n$app->corp_group->getToken(string $corpId, int $agentId)\n```\n\n----------------------------------------\n\nTITLE: Creating a Device Group in PHP\nDESCRIPTION: Creates a new device group with a specified name.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/shake-around.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$result = $shakearound->group->create('test');\n```\n\n----------------------------------------\n\nTITLE: 更新微信返佣商品信息 (PHP)\nDESCRIPTION: 使用EasyWeChat库更新已存在的商品信息。pid为必填字段且无法修改。不填写的字段表示不更新，字符串类型字段可设为空来清空，数字类型字段设为0来清空。返回status_ticket用于查询更新结果。\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/goods.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$data = [\n    [\n        'pid' => 'pid001',\n        'image_info' => [\n            'main_image_list' => [\n                [\n                    'url' => 'http://www.baidu.com/c.jpg',\n                ],\n                [\n                    'url' => 'http://www.baidu.com/d.jpg',\n                ],\n            ],\n        ],\n        \n        //...\n    ],\n    \n    //...\n];\n \n$result = $app->goods->update($data);\n \n// $result:\n//{\n//    \"errcode\": 0,\n//    \"errmsg\": \"ok\",\n//    \"status_ticket\": \"115141102647330200\"\n//}\n```\n\n----------------------------------------\n\nTITLE: Listing Departments in EasyWeChat Contacts in PHP\nDESCRIPTION: Shows how to retrieve a list of all departments or departments under a specific parent department in the EasyWeChat contacts system.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/contacts.md#2025-04-22_snippet_16\n\nLANGUAGE: php\nCODE:\n```\n$contacts->department->list();\n// 获取指定部门及其下的子部门\n$contacts->department->list($id);\n```\n\n----------------------------------------\n\nTITLE: Checking Images for Sensitive Content in EasyWeChat\nDESCRIPTION: Example of using the content security API to check if an image contains sensitive information such as pornography or politically sensitive faces. The API has a frequency limit of 1000 calls per minute and 100,000 calls per day.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/basic-services/content_security.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n// 所传参数为要检测的图片文件的绝对路径，图片格式支持PNG、JPEG、JPG、GIF, 像素不超过 750 x 1334，同时文件大小以不超过 300K 为宜，否则可能报错\n$result = $app->content_security->checkImage('/path/to/the/image');\n\n// 正常返回 0\n{\n    \"errcode\": \"0\",\n    \"errmsg\": \"ok\"\n}\n\n// 当图片文件内含有敏感内容，则返回 87014\n{\n    \"errcode\": 87014,\n    \"errmsg\": \"risky content\"\n}\n```\n\n----------------------------------------\n\nTITLE: Checking Single Chat Consent Status in PHP\nDESCRIPTION: Retrieves the consent status for individual chat participants using an array of user IDs and external OpenIDs.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/msg-audit.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$info = [\n    [\n        \"userid\" => \"XuJinSheng1\",\n        \"exteranalopenid\" => \"wmeDKaCQAAGd9oGiQWxVsAKwV2HxNAAA1\"\n    ],\n    [\n        \"userid\" => \"XuJinSheng2\",\n        \"exteranalopenid\" => \"wmeDKaCQAAGd9oGiQWxVsAKwV2HxNAAA2\"\n    ],\n    [\n        \"userid\" => \"XuJinSheng3\",\n        \"exteranalopenid\" => \"wmeDKaCQAAGd9oGiQWxVsAKwV2HxNAAA3\"\n    ]\n];\n\n$app->msg_audit->getSingleAgreeStatus(array $info);\n```\n\n----------------------------------------\n\nTITLE: Laravel Route for Handling Open Platform Events in PHP\nDESCRIPTION: This example shows how to set up a Laravel route to handle Open Platform events. It demonstrates handling the authorized event, but mentions that other events can be handled similarly. The code includes setting up the route and registering an event handler.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/open-platform/server.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n// 假设你的开放平台第三方平台设置的授权事件接收 URL 为: https://easywechat.com/open-platform （其他事件推送同样会推送到这个 URL）\nRoute::post('open-platform', function () { // 关闭 CSRF\n    // $openPlatform 为你实例化的开放平台对象，此处省略实例化步骤\n    return $openPlatform->server->serve(); // Done!\n});\n\n// 处理事件\nuse EasyWeChat\\OpenPlatform\\Server\\Guard;\nRoute::post('open-platform', function () {\n    $server = $openPlatform->server;\n    // 处理授权成功事件，其他事件同理\n    $server->push(function ($message) {\n        // $message 为微信推送的通知内容，不同事件不同内容，详看微信官方文档\n        // 获取授权公众号 AppId： $message['AuthorizerAppid']\n        // 获取 AuthCode：$message['AuthorizationCode']\n        // 然后进行业务处理，如存数据库等...\n    }, Guard::EVENT_AUTHORIZED);\n\n    return $server->serve();\n});\n```\n\n----------------------------------------\n\nTITLE: Deleting Rejected Plugin Usage Requests in WeChat Mini Program using PHP\nDESCRIPTION: This snippet shows how to remove previously rejected plugin usage requests from the system.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/mini-program/plugin.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$app->plugin_dev->delete();\n```\n\n----------------------------------------\n\nTITLE: Formatting Device Identifiers for Shake Around API Calls in PHP\nDESCRIPTION: Shows the correct format for device identifier parameters used in Shake Around API calls. Includes examples for single device identifiers and lists of device identifiers.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/shake-around.md#2025-04-22_snippet_1\n\nLANGUAGE: PHP\nCODE:\n```\n// 参数$deviceIdentifier的实参形式：\n['device_id' => 10097]\n// 或\n[\n    'uuid' => 'FDA50693-A4E2-4FB1-AFCF-C6EB07647825',\n    'major' => 10001,\n    'minor' => 12102,\n]\n// 参数$deviceIdentifiers的实参形式：\n[\n    ['device_id' => 10097],\n    ['device_id' => 10098],\n]\n// 或\n[\n    [\n        'uuid' => 'FDA50693-A4E2-4FB1-AFCF-C6EB07647825',\n        'major' => 10001,\n        'minor' => 12102,\n    ],\n    [\n        'uuid' => 'FDA50693-A4E2-4FB1-AFCF-C6EB07647825',\n        'major' => 10001,\n        'minor' => 12103,\n    ]\n]\n```\n\n----------------------------------------\n\nTITLE: Configure EasyWeChat with RSA Public Key\nDESCRIPTION: Example configuration for EasyWeChat payment setup including RSA public key path and other required credentials.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/transfer.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Factory;\n\n$config = [\n    // 必要配置\n    'app_id'             => 'xxxx',\n    'mch_id'             => 'your-mch-id',\n    'key'                => 'key-for-signature',   // API 密钥\n\n    // 如需使用敏感接口（如退款、发送红包等）需要配置 API 证书路径(登录商户平台下载 API 证书)\n    'cert_path'          => '/path/to/your/cert.pem', // XXX: 绝对路径！！！！\n    'key_path'           => '/path/to/your/key',      // XXX: 绝对路径！！！！\n\n    // 将上面得到的公钥存放路径填写在这里\n    'rsa_public_key_path' => '/path/to/your/rsa/publick/key/public-14339221228.pem', // <<<------------------------\n\n    'notify_url'         => '默认的订单回调地址',     // 你也可以在下单时单独设置来想覆盖它\n];\n```\n\n----------------------------------------\n\nTITLE: Laravel Route Setup for Open Platform Event Handling in PHP\nDESCRIPTION: This example demonstrates how to set up a Laravel route to handle Open Platform events. It shows both a simple setup for default event handling and a more complex setup with custom event processing for the authorized event.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/open-platform/server.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n// 假设你的开放平台第三方平台设置的授权事件接收 URL 为: https://easywechat.com/open-platform （其他事件推送同样会推送到这个 URL）\nRoute::post('open-platform', function () { // 关闭 CSRF\n    // $openPlatform 为你实例化的开放平台对象，此处省略实例化步骤\n    return $openPlatform->server->serve(); // Done!\n});\n\n// 处理事件\nuse EasyWeChat\\OpenPlatform\\Server\\Guard;\nRoute::post('open-platform', function () {\n    $server = $openPlatform->server;\n    // 处理授权成功事件，其他事件同理\n    $server->push(function ($message) {\n        // $message 为微信推送的通知内容，不同事件不同内容，详看微信官方文档\n        // 获取授权公众号 AppId： $message['AuthorizerAppid']\n        // 获取 AuthCode：$message['AuthorizationCode']\n        // 然后进行业务处理，如存数据库等...\n    }, Guard::EVENT_AUTHORIZED);\n\n    return $server->serve();\n});\n```\n\n----------------------------------------\n\nTITLE: Sending Markdown Messages - PHP\nDESCRIPTION: Shows how to send formatted Markdown messages with different text styles and colors.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/group-robot.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Work\\GroupRobot\\Messages\\Markdown;\n\n$content = '\n# 标题一\n## 标题二\n<font color=\"info\">绿色</font>\n<font color=\"comment\">灰色</font>\n<font color=\"warning\">橙红色</font>\n> 引用文字\n';\n\n$markdown = new Markdown($content);\n\n$messenger->message($markdown)->toGroup($groupKey)->send();\n```\n\n----------------------------------------\n\nTITLE: Building JSSDK Config Array in PHP\nDESCRIPTION: Method to generate JSSDK configuration array with options for debug mode, beta features, and JSON output format. Takes API list and various boolean parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/basic-services/jssdk.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$app->jssdk->buildConfig(array $APIs, $debug = false, $beta = false, $json = true, array $openTagList = []);\n```\n\n----------------------------------------\n\nTITLE: Initializing Broadcast Instance in PHP\nDESCRIPTION: Creates an instance of the EasyWeChat Application and accesses the broadcast component. This is the first step required before using any of the broadcast APIs.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/broadcast.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nuse EasyWeChat\\Foundation\\Application;\n// ...\n$app = new Application($options);\n\n$broadcast = $app->broadcast;\n```\n\n----------------------------------------\n\nTITLE: Obtaining Customer Service Instance in EasyWeChat (PHP)\nDESCRIPTION: This code snippet demonstrates how to get the customer service instance from the EasyWeChat application object. The instance can be used to interact with WeChat's customer service messaging API.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/customer_service.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$service = $app->customer_service;\n```\n\n----------------------------------------\n\nTITLE: Deleting Personal Template in PHP\nDESCRIPTION: Removes a specific template from the account's personal template library using the template ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/subscribe_message.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$templateId = 'bDmywsp2oEHjwAadTGKkUHpC0RgBVPvfAM7Cu1s03z8';\n\n$app->subscribe_message->deleteTemplate($templateId);\n```\n\n----------------------------------------\n\nTITLE: Deleting a Tag in EasyWeChat Contacts in PHP\nDESCRIPTION: Shows how to delete a tag from the EasyWeChat contacts system using its ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/contacts.md#2025-04-22_snippet_19\n\nLANGUAGE: php\nCODE:\n```\n$contacts->tag->delete($tagId);\n```\n\n----------------------------------------\n\nTITLE: Configuring WeChat Callback URL\nDESCRIPTION: Example URL format for configuring webhook callback endpoint in WeChat Official Account Platform, showing how to include account ID parameter\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/accounts.md#2025-04-22_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nhttp://easywechat.com/wechat?id=1\n```\n\n----------------------------------------\n\nTITLE: Checking Store Mini Program Review Status\nDESCRIPTION: Queries the review status of a store mini program application.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/store.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$app->store->getStatus($baseInfo);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Existing Templates for an Account in PHP\nDESCRIPTION: This code fetches the list of templates that already exist in the account. It uses the 'getTemplates' method of the template_message object, taking offset and count as parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/template_message.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$app->template_message->getTemplates($offset, $count);\n```\n\n----------------------------------------\n\nTITLE: Implementing Mini Program Payment in JavaScript\nDESCRIPTION: Uses the wx.requestPayment method to initiate the payment process in a Mini Program with the configuration generated by PHP.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/jssdk.md#2025-04-22_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nwx.requestPayment({\n    timeStamp: <?= $config['timeStamp'] ?>, //注意 timeStamp 的格式\n    nonceStr: '<?= $config['nonceStr'] ?>',\n    package: '<?= $config['package'] ?>',\n    signType: '<?= $config['signType'] ?>',\n    paySign: '<?= $config['paySign'] ?>', // 支付签名\n    success: function (res) {\n        // 支付成功后的回调函数\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Generating Pre-authorization URL in EasyWeChat PHP\nDESCRIPTION: This snippet shows how to generate a pre-authorization URL using EasyWeChat. It allows for direct redirection or retrieval of the target URL for further processing.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/open_platform.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n// 直接跳转\n$response = $openPlatform->pre_auth->redirect('https://domain.com/callback');\n\n// 获取跳转的链接\n$response->getTargetUrl();\n```\n\n----------------------------------------\n\nTITLE: Retrieving Current Auto-Reply Rules in EasyWeChat (PHP)\nDESCRIPTION: This code snippet demonstrates how to fetch the currently set auto-reply rules using the EasyWeChat library. It utilizes the 'auto_reply' component of the EasyWeChat application instance to access the current rules.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/reply.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$app->auto_reply->current();\n```\n\n----------------------------------------\n\nTITLE: Applying to Use a WeChat Mini Program Plugin in PHP\nDESCRIPTION: Code to apply for using a specific plugin in a WeChat Mini Program. Requires the plugin's AppID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/plugin.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$pluginAppId = 'xxxxxxxxx';\n\n$app->plugin->apply($pluginAppId);\n```\n\n----------------------------------------\n\nTITLE: Fetching Store Categories\nDESCRIPTION: Retrieves the store mini-program categories from WeChat API.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/store.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$app->store->categories();\n```\n\n----------------------------------------\n\nTITLE: Querying Configuration in EasyWeChat Micro Merchant (PHP)\nDESCRIPTION: Retrieves the current configuration for a micro merchant. Both parameters are optional if setSubMchId method has been called previously.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/micro-merchant/merchant-config.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$response = $app->merchantConfig->getConfig(string $subMchId = '', string $appId = '');\n```\n\n----------------------------------------\n\nTITLE: Deleting Broadcast Message in WeChat\nDESCRIPTION: Deletes a previously sent broadcast message identified by its message ID. This can be used to recall messages within a certain timeframe.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/broadcast.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$broadcast->delete($msgId);\n```\n\n----------------------------------------\n\nTITLE: Getting Authorizer Option Settings in PHP\nDESCRIPTION: Retrieves specific option settings for an authorized account identified by appId and option name.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/open-platform/index.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$openPlatform->getAuthorizerOption(string $appId, string $name);\n```\n\n----------------------------------------\n\nTITLE: Deleting Personal Template from WeChat Account\nDESCRIPTION: Removes a specific template from the account's personal template library using template ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/mini-program/subscribe_message.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$templateId = 'bDmywsp2oEHjwAadTGKkUHpC0RgBVPvfAM7Cu1s03z8';\n\n$app->subscribe_message->deleteTemplate($templateId);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Authorized User Information in PHP\nDESCRIPTION: This snippet shows how to retrieve authorized user information using the code obtained from the callback URL. It demonstrates accessing user ID and raw data returned by the WeChat Work API.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/6.x/open-work/oauth.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$code = \"回调URL中的code\";\n$user = $app->getOAuth()->detailed()->userFromCode($code);\n\n// 获取用户信息\n$user->getId(); // 对应企业微信英文名（userid）\n$user->getRaw(); // 获取企业微信接口返回的原始信息\n```\n\n----------------------------------------\n\nTITLE: Rejecting Plugin Usage Request in WeChat Mini Program using PHP\nDESCRIPTION: This code demonstrates how to reject a plugin usage request. It requires a reason for rejection as input.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/mini-program/plugin.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$app->plugin_dev->refuse('拒绝理由');\n```\n\n----------------------------------------\n\nTITLE: Creating Store Location\nDESCRIPTION: Basic store creation using POI interface. The photo_url must be from WeChat's domain and under 1MB in JPG format.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/poi.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$poi->create($baseInfo);\n```\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\n$info = array(\n         \"sid\"             => \"33788392\",\n         \"business_name\"   => \"麦当劳\",\n         \"branch_name\"     => \"艺苑路店\",\n         \"province\"        => \"广东省\",\n         \"city\"            => \"广州市\",\n         \"district\"        => \"海珠区\",\n         \"address\"         => \"艺苑路 11 号\",\n         \"telephone\"       => \"020-12345678\",\n         \"categories\"      => array(\"美食,快餐小吃\"),\n         \"offset_type\"     => 1,\n         \"longitude\"       => 115.32375,\n         \"latitude\"        => 25.097486,\n         \"photo_list\"      => array(\n                               array(\"photo_url\" => \"https://easywechat.com\"),\n                               array(\"photo_url\" => \"https://easywechat.com\"),\n                             ),\n         \"recommend\"       => \"麦辣鸡腿堡套餐,麦乐鸡,全家桶\",\n         \"special\"         => \"免费 wifi,外卖服务\",\n         \"introduction\"    => \"麦当劳是全球大型跨国连锁餐厅,1940 年创立于美国,在世界上大约拥有 3  万间分店。主要售卖汉堡包,以及薯条、炸鸡、汽水、冰品、沙拉、水果等 快餐食品\",\n         \"open_time\"       => \"8:00-20:00\",\n         \"avg_price\"       => 35,\n    );\n\n$result = $poi->create($info); // true or exception\n```\n\n----------------------------------------\n\nTITLE: Retrieving Application Sharing Information in PHP using EasyWeChat\nDESCRIPTION: This snippet demonstrates how to retrieve application sharing information for a specific agent ID using the EasyWeChat library. It utilizes the corp_group component of the application instance.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/corp-group.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$agentId = 100001;\n\n$app->corp_group->getAppShareInfo(int $agentId);\n```\n\n----------------------------------------\n\nTITLE: Adding User Face Information for Check-in in PHP with EasyWeChat\nDESCRIPTION: Adds facial recognition information for a user to be used in check-in processes using the OA module of EasyWeChat.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/oa.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n$app->oa->addCheckinUserface(string $userid, string $userface)\n```\n\n----------------------------------------\n\nTITLE: Setting Authorization Configuration in PHP\nDESCRIPTION: Configures authorization settings using a pre-authorization code and session information.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/open-work/service.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$app->corp->setSession(string $preAuthCode, array $sessionInfo);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Current Reply Rules in EasyWeChat PHP\nDESCRIPTION: This snippet shows how to fetch the currently configured automatic reply rules from the WeChat platform using the reply service. It returns the rules that determine how the application responds to incoming messages.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/reply.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$reply->current();\n```\n\n----------------------------------------\n\nTITLE: Deleting a Customer Service Account in PHP\nDESCRIPTION: Removes a customer service account from the WeChat Official Account using the account ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/customer_service.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$app->customer_service->delete('foo@test');\n```\n\n----------------------------------------\n\nTITLE: Retrieving Store Categories in WeChat Mini Program\nDESCRIPTION: Fetches store categories for WeChat Mini Program stores.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/store.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$app->store->categories();\n```\n\n----------------------------------------\n\nTITLE: Applying for Shake Around Device IDs in EasyWeChat PHP SDK\nDESCRIPTION: Shows how to apply for Shake Around device IDs using the EasyWeChat SDK. Includes example API call and response handling.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/shake-around.md#2025-04-22_snippet_5\n\nLANGUAGE: PHP\nCODE:\n```\n$result = $shakearound->device()->apply(3, '测试', '测试专用', 1234);\n\n/* 返回结果\n{\n    \"data\": {\n        \"apply_id\": 123,\n        \"audit_status\": 1,\n        \"audit_comment\": \"审核中\"\n    },\n    \"errcode\": 0,\n    \"errmsg\": \"success.\"\n}\n*/\nvar_dump($result->data['apply_id']) // 123\n```\n\n----------------------------------------\n\nTITLE: Creating Broadcast Message in EasyWeChat\nDESCRIPTION: Creates a video message material for broadcasting using an existing media_id, title, and description.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/basic-services/media.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$app->media->createVideoForBroadcasting($mediaId, $title, $description);\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom Log Driver in PHP\nDESCRIPTION: This snippet shows how to configure the custom 'mylog' driver in the EasyWeChat configuration file. It sets up a 'dev' channel using the custom driver with specific parameters for path, level, and retention period.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/6.x/logging.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n'logging' => [\n    'default' => 'dev', // 默认使用的 channel，生产环境可以改为下面的 prod\n    'channels' => [\n        // 测试环境\n        'dev' => [\n            'driver' => 'mylog',\n            'path' => '/tmp/easywechat.log',\n            'level' => 'debug',\n            'days' => 5,\n        ],\n\n        //...\n    ],\n],\n```\n\n----------------------------------------\n\nTITLE: Checking Store Mini-Program Review Status\nDESCRIPTION: Queries the review status of a store mini-program application.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/store.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$app->store->getStatus($baseInfo);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Tags for a Specific User in EasyWeChat (PHP)\nDESCRIPTION: This snippet demonstrates how to retrieve the tags associated with a specific user using their OpenID in the EasyWeChat library.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/user-tag.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$userTags = $app->user_tag->userTags($openId);\n//\n// {\n//     \"tagid_list\":[\"标签1\",\"标签2\"]\n// }\n```\n\n----------------------------------------\n\nTITLE: Retrieving Mini-Program Session for Subordinate Enterprise in PHP using EasyWeChat\nDESCRIPTION: This snippet illustrates how to retrieve a mini-program session for a subordinate enterprise. It requires the user ID and session key as input parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/corp-group.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$userId = 'wmAoNVCwAAUrSqEqz7oQpEIEMVWDrPeg';\n$sessionKey = 'n8cnNEoyW1pxSRz6/Lwjwg==';\n\n$app->corp_group->getMiniProgramTransferSession(string $userId, string $sessionKey);\n```\n\n----------------------------------------\n\nTITLE: Example of Setting User Remark\nDESCRIPTION: Example showing how to set a specific remark for a user\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/user.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$app->user->remark($openId, \"僵尸粉\");\n```\n\n----------------------------------------\n\nTITLE: Broadcasting Message to Specific Group in WeChat\nDESCRIPTION: Sends a broadcast message to a specific group of users identified by groupId. Supports all message types through generic or type-specific methods.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/broadcast.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$broadcast->send($messageType, $message, $groupId);\n\n// 别名方式\n$broadcast->sendText($text, $groupId);\n$broadcast->sendNews($mediaId, $groupId);\n$broadcast->sendVoice($mediaId, $groupId);\n$broadcast->sendImage($mediaId, $groupId);\n$broadcast->sendVideo($message, $groupId);\n$broadcast->sendCard($cardId, $groupId);\n```\n\n----------------------------------------\n\nTITLE: Creating Store in Tencent Maps\nDESCRIPTION: Creates a new store entry in Tencent Maps with detailed store information.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/store.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$baseInfo = [\n    \"name\"       => \"hardenzhang\",\n    \"longitude\"  => \"113.323753357\",\n    \"latitude\"   => \"23.0974903107\",\n    \"province\"   => \"广东省\",\n    \"city\"       => \"广州市\",\n    \"district\"   => \"海珠区\",\n    \"address\"    => \"TIT\",\n    \"category\"   => \"类目1:类目2\",\n    \"telephone\"  => \"12345678901\",\n    \"photo\"      => \"http://mmbiz.qpic.cn/mmbiz_png/tW66AWE2K6ECFPcyAcIZTG8RlcR0sAqBibOm8gao5xOoLfIic9ZJ6MADAktGPxZI7MZLcadZUT36b14NJ2cHRHA/0?wx_fmt=png\",\n    \"license\"    => \"http://mmbiz.qpic.cn/mmbiz_png/tW66AWE2K6ECFPcyAcIZTG8RlcR0sAqBibOm8gao5xOoLfIic9ZJ6MADAktGPxZI7MZLcadZUT36b14NJ2cHRHA/0?wx_fmt=png\",\n    \"introduct\"  => \"test\",\n    \"districtid\" => \"440105\",\n];\n```\n\n----------------------------------------\n\nTITLE: Install EasyWeChat Console Tool\nDESCRIPTION: Command to install the EasyWeChat console tool for RSA public key management.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/transfer.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n$ composer require easywechat/console -vvv\n```\n\n----------------------------------------\n\nTITLE: Updating Store Information\nDESCRIPTION: Updates store information including photos, operating hours, recommendations, special services, introduction, average price, and phone number.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/poi.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$poi->update($poiId, $data);\n```\n\nLANGUAGE: php\nCODE:\n```\n$data = array(\n         \"telephone\" => \"020-12345678\",\n         \"recommend\" => \"麦辣鸡腿堡套餐,麦乐鸡,全家桶\",\n         //...\n        );\n\n$res = $poi->update(271262077, $data); //true or exception\n```\n\n----------------------------------------\n\nTITLE: 生成微信小程序码 (wxacode.getUnlimited) - PHP\nDESCRIPTION: 使用EasyWeChat库调用微信小程序的wxacode.getUnlimited接口生成小程序码。此代码发送POST请求到指定接口，包含场景值、页面路径、宽度等参数，并将生成的小程序码保存为图片文件。\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/6.x/mini-app/examples.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\ntry {\n    $response = $app->getClient()->postJson('/wxa/getwxacodeunlimit', [\n        'scene' => '123',\n        'page' => 'pages/index/index',\n        'width' => 430,\n        'check_path' => false,\n    ]);\n    \n    $path = $response->saveAs('/tmp/wxacode-123.png');\n} catch (\\Throwable $e) {\n    // 失败\n    echo $e->getMessage();\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Store Mini Program Information\nDESCRIPTION: Updates store mini program information, currently supporting avatar and introduction updates.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/store.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$data = [\n    \"headimg_mediaid\" => \"RTZgKZ386yFn5kQSWLTxe4bqxwgzGBjs3OE02cg9CVQk1wRVE3c8fjUFX7jvpi-P\",\n    \"intro\"           => \"麦辣鸡腿堡套餐,麦乐鸡,全家桶\",\n];\n\n$result = $app->store->updateMerchant($data);\n```\n\n----------------------------------------\n\nTITLE: Linking to Server Documentation in Markdown\nDESCRIPTION: A Markdown link to the server-side documentation, which provides more information about event handling in EasyWeChat.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/events.md#2025-04-22_snippet_0\n\nLANGUAGE: Markdown\nCODE:\n```\n[服务端](server.html)\n```\n\n----------------------------------------\n\nTITLE: Previewing Messages to Specific WeChat Username with EasyWeChat\nDESCRIPTION: Methods for previewing different types of messages (text, news, voice, image, video, and cards) to a specific user by their WeChat username before broadcasting.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/broadcasting.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n$app->broadcasting->previewTextByName($text, $wxname);\n$app->broadcasting->previewNewsByName($mediaId, $wxname);\n$app->broadcasting->previewVoiceByName($mediaId, $wxname);\n$app->broadcasting->previewImageByName($mediaId, $wxname);\n$app->broadcasting->previewVideoByName($message, $wxname);\n$app->broadcasting->previewCardByName($cardId, $wxname);\n```\n\n----------------------------------------\n\nTITLE: Closing WeChat Payment Order\nDESCRIPTION: Method to close a payment order. Note that orders cannot be closed within 5 minutes of creation.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/order.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$app->order->close(商户系统内部的订单号（out_trade_no）);\n```\n\n----------------------------------------\n\nTITLE: Adding Store to Mini Program\nDESCRIPTION: Adds a new store to the mini program with detailed store information including images and credentials.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/store.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n$baseInfo = [\n    \"poi_id\"             => \"\",\n    \"map_poi_id\"         => \"2880741500279549033\",\n    \"pic_list\"           => \"['list' => ['http://mmbiz.qpic.cn/mmbiz_jpg/tW66AWvE2K4EJxIYOVpiaGOkfg0iayibiaP2xHOChvbmKQD5uh8ymibbEKlTTPmjTdQ8ia43sULLeG1pT2psOfPic4kTw/0?wx_fmt=jpeg']]\",\n    \"contract_phone\"     => \"1111222222\",\n    \"credential\"         => \"22883878-0\",\n    \"qualification_list\" => \"RTZgKZ386yFn5kQSWLTxe4bqxwgzGBjs3OE02cg9CVQk1wRVE3c8fjUFX7jvpi-P\"\n];\n```\n\n----------------------------------------\n\nTITLE: Converting OpenIDs During Account Migration\nDESCRIPTION: Converts OpenIDs from old account to new account during WeChat account migration\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/user.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n$app->user->changeOpenid($oldAppId, $openidList);\n```\n\n----------------------------------------\n\nTITLE: Enabling Manual Retry for HTTP Requests in EasyWeChat\nDESCRIPTION: Demonstrates how to manually enable the retry mechanism for individual HTTP requests. This approach allows for request-specific retry configuration rather than relying on global settings.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/6.x/client.md#2025-04-22_snippet_12\n\nLANGUAGE: php\nCODE:\n```\n$app->getClient()->retry()->get('/foo/bar');\n```\n\n----------------------------------------\n\nTITLE: Retrieving Corporate Check-in Rules in PHP with EasyWeChat\nDESCRIPTION: Fetches all check-in rules for the corporation using the OA module of EasyWeChat.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/oa.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$app->oa->corpCheckinRules();\n```\n\n----------------------------------------\n\nTITLE: Setting Sub-Merchant ID for EasyWeChat Micro Merchant Operations in PHP\nDESCRIPTION: This code snippet shows how to set the sub-merchant ID and optionally the service provider's public account ID for subsequent API calls. This is useful for operations that require sub-merchant context after successful registration.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/micro-merchant/index.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n// $subMchId 为子商户号\n// $appid    服务商的公众账号 ID\n$app->setSubMchId(string $subMchId, string $appId = '');\n```\n\n----------------------------------------\n\nTITLE: 查询已设置的EasyWeChat菜单\nDESCRIPTION: 使用all()方法查询已设置的菜单，返回完整的菜单信息。\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/menu.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$menus = $menu->all();\n```\n\n----------------------------------------\n\nTITLE: Retrieving Device Group Details in PHP\nDESCRIPTION: Retrieves detailed information about a device group, including its devices.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/shake-around.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\n$result = $shakearound->group->get(123, 0, 2);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Store Information\nDESCRIPTION: Fetches information for a specific store location using its POI ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/poi.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$poi->get($poiId);\n```\n\nLANGUAGE: php\nCODE:\n```\n$info = $poi->get(271262077);\nvar_dump($info->business_name); // 麦当劳\nvar_dump($info->introduction); // 麦当劳是全球大型跨国连锁餐厅...\nvar_dump($info->toArray());// array('business_name' => '麦当劳', 'branch_name' => '艺苑路店', ...);\n```\n\n----------------------------------------\n\nTITLE: Binding Shake Around Devices to Locations in EasyWeChat PHP SDK\nDESCRIPTION: Demonstrates how to bind Shake Around devices to locations (POIs) using the EasyWeChat SDK. Includes examples for binding to own and other accounts' POIs.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/shake-around.md#2025-04-22_snippet_8\n\nLANGUAGE: PHP\nCODE:\n```\n// 关联本公众账号门店\n$result = $shakearound->device()->bindLocation(['device_id' => 10011], 1231);\n// 或\n$result = $shakearound->device()->bindLocation(['uuid' => 'FDA50693-A4E2-4FB1-AFCF-C6EB07647825',\n                                                'major' => 1002,\n                                                'minor' => 1223,\n], 1231);\n\n// 关联其他公众账号门店\n// wxappid为关联门店所归属的公众账号的APPID\n$result = $shakearound->device()->bindLocation(['device_id' => 10011], 1231, 2, 'wxappid');\n// 或\n$result = $shakearound->device()->bindLocation(['uuid' => 'FDA50693-A4E2-4FB1-AFCF-C6EB07647825',\n                                                'major' => 1002,\n                                                'minor' => 1223,\n], 1231, 2, 'wxappid');\n\n/* 返回结果\n{\n    \"data\": {\n    },\n    \"errcode\": 0,\n    \"errmsg\": \"success.\"\n}\n*/\nvar_dump($result->errcode) // 0\n```\n\n----------------------------------------\n\nTITLE: Fetching Geographic Information from Tencent Maps\nDESCRIPTION: Retrieves province, city, and district information from Tencent Maps.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/store.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$app->store->districts();\n```\n\n----------------------------------------\n\nTITLE: Creating Permanent QR Code in EasyWeChat PHP\nDESCRIPTION: Generates a permanent QR code with a specified scene value (numeric or string). Returns a Bag object containing the ticket and URL for the QR code.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/qrcode.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$result = $qrcode->forever(56);// 或者 $qrcode->forever(\"foo\");\n\n$ticket = $result->ticket; // 或者 $result['ticket']\n$url = $result->url;\n```\n\n----------------------------------------\n\nTITLE: Paginated Listing of Commission Products with EasyWeChat in PHP\nDESCRIPTION: This snippet demonstrates how to retrieve a paginated list of all imported commission products. It supports pagination with a maximum of 100 items per page. The page_context parameter is used for fetching subsequent pages.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/goods.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$context = '';  // page 为 1 时传空即可。当 page 大于 1 时必填，填入上一次访问本接口返回的 page_context。\n$page = 1;      // 页码\n$size = 10;     // 每页数据大小，目前限制为100以内，注意一次全量验证过程中该参数的值需保持不变\n\n$app->goods->list($context, $page, $size);\n```\n\n----------------------------------------\n\nTITLE: Getting Blacklist in PHP\nDESCRIPTION: Retrieves the list of blocked WeChat users with optional pagination\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/user.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$app->user->blacklist($beginOpenid = null); // $beginOpenid 可选\n```\n\n----------------------------------------\n\nTITLE: Updating a Tag Name in EasyWeChat Contacts in PHP\nDESCRIPTION: Demonstrates how to update the name of an existing tag in the EasyWeChat contacts system using its ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/contacts.md#2025-04-22_snippet_18\n\nLANGUAGE: php\nCODE:\n```\n$contacts->tag->update($tagId, $tagName);\n```\n\n----------------------------------------\n\nTITLE: Converting OpenIDs During Account Migration in PHP\nDESCRIPTION: Converts old account OpenIDs to new account OpenIDs during WeChat account migration\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/user.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n$app->user->changeOpenid($oldAppId, $openidList);\n```\n\n----------------------------------------\n\nTITLE: Using Custom Retry Strategy in EasyWeChat\nDESCRIPTION: Shows how to apply a custom retry strategy to HTTP requests in EasyWeChat using the retryUsing method. This allows for advanced retry behaviors based on the custom implementation.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/6.x/client.md#2025-04-22_snippet_15\n\nLANGUAGE: php\nCODE:\n```\n$app->getClient()->retryUsing(new MyRetryStrategy())->get('/foo/bar');\n```\n\n----------------------------------------\n\nTITLE: Retrieving Check-in Records in PHP with EasyWeChat\nDESCRIPTION: Fetches check-in records for specified users within a date range. Supports filtering by check-in type: all, work, or out-of-office.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/oa.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n// 全部打卡数据\n$app->oa->checkinRecords(1492617600, 1492790400, [\"james\",\"paul\"]);\n\n// 获取上下班打卡\n$app->oa->checkinRecords(1492617600, 1492790400, [\"james\",\"paul\"], 1);\n\n// 获取外出打卡\n$app->oa->checkinRecords(1492617600, 1492790400, [\"james\",\"paul\"], 2);\n```\n\n----------------------------------------\n\nTITLE: Creating Shake Around Pages in EasyWeChat PHP SDK\nDESCRIPTION: Demonstrates how to create new pages for Shake Around interactions using the EasyWeChat SDK. Includes example API call and response handling.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/shake-around.md#2025-04-22_snippet_10\n\nLANGUAGE: PHP\nCODE:\n```\n$result = $shakearound->page()->add('主标题', '副标题', 'https://zb.weixin.qq.com', 'http://3gimg.qq.com/shake_nearby/dy/icon', 'test');\n\n/* 返回结果\n{\n   \"data\": {\n       \"page_id\": 28840\n   }\n   \"errcode\": 0,\n   \"errmsg\": \"success.\"\n}\n*/\nvar_dump($result->data['page_id']) // 28840\n```\n\n----------------------------------------\n\nTITLE: 获取EasyWeChat当前自定义菜单\nDESCRIPTION: 使用current()方法获取当前生效的自定义菜单信息。\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/menu.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$menus = $menu->current();\n```\n\n----------------------------------------\n\nTITLE: Retrieving Batch Device Statistics in PHP\nDESCRIPTION: Retrieves statistics for multiple devices on a specific date, with paginated results.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/shake-around.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$result = $shakearound->stats->devicesSummary(1435075200, 1);\n```\n\n----------------------------------------\n\nTITLE: Converting OpenID to User ID in EasyWeChat Contacts in PHP\nDESCRIPTION: Shows how to convert an OpenID to a user ID in the EasyWeChat contacts system.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/contacts.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n$contacts->user->openidToUserId($openid);\n```\n\n----------------------------------------\n\nTITLE: Sending Text Messages with EasyWeChat Broadcasting\nDESCRIPTION: Methods for sending text messages to all users, specific users by openid list, or users in a specific tag group.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/broadcasting.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$app->broadcasting->sendText(\"大家好！欢迎使用 EasyWeChat。\");\n\n// 指定目标用户\n// 至少两个用户的 openid，必须是数组。\n$app->broadcasting->sendText(\"大家好！欢迎使用 EasyWeChat。\", [$openid1, $openid2]);\n\n// 指定标签组用户\n$app->broadcasting->sendText(\"大家好！欢迎使用 EasyWeChat。\", $tagId); // $tagId 必须是整型数字\n```\n\n----------------------------------------\n\nTITLE: Creating Store in Tencent Maps\nDESCRIPTION: Creates a new store entry in Tencent Maps with detailed store information.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/store.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$baseInfo = [\n    \"name\"       => \"hardenzhang\",\n    \"longitude\"  => \"113.323753357\",\n    \"latitude\"   => \"23.0974903107\",\n    \"province\"   => \"广东省\",\n    \"city\"       => \"广州市\",\n    \"district\"   => \"海珠区\",\n    \"address\"    => \"TIT\",\n    \"category\"   => \"类目1:类目2\",\n    \"telephone\"  => \"12345678901\",\n    \"photo\"      => \"http://mmbiz.qpic.cn/mmbiz_png/tW66AWE2K6ECFPcyAcIZTG8RlcR0sAqBibOm8gao5xOoLfIic9ZJ6MADAktGPxZI7MZLcadZUT36b14NJ2cHRHA/0?wx_fmt=png\",\n    \"license\"    => \"http://mmbiz.qpic.cn/mmbiz_png/tW66AWE2K6ECFPcyAcIZTG8RlcR0sAqBibOm8gao5xOoLfIic9ZJ6MADAktGPxZI7MZLcadZUT36b14NJ2cHRHA/0?wx_fmt=png\",\n    \"introduct\"  => \"test\",\n    \"districtid\" => \"440105\",\n];\n```\n\n----------------------------------------\n\nTITLE: Default Event Handling for Open Platform in PHP\nDESCRIPTION: This snippet demonstrates the default handling of the 'component_verify_ticket' event in EasyWeChat's Open Platform module. It caches the verify_ticket automatically.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/open-platform/server.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$server = $openPlatform->server;\n\nreturn $server->serve();\n```\n\n----------------------------------------\n\nTITLE: Deleting a POI Store with EasyWeChat in PHP\nDESCRIPTION: This snippet demonstrates how to delete a specific store (POI) using its ID with the EasyWeChat library.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/poi.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$app->poi->delete($poiId);\n```\n\nLANGUAGE: php\nCODE:\n```\n$app->poi->delete(271262077);// true or exception\n```\n\n----------------------------------------\n\nTITLE: Unblocking WeChat Users in PHP\nDESCRIPTION: Unblocks single or multiple users using their OpenIDs\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/user.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n$app->user->unblock('openidxxxxx');\n// 或者多个用户\n$app->user->unblock(['openid1', 'openid2', 'openid3', ...]);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Shake Around Device and User Info in EasyWeChat PHP SDK\nDESCRIPTION: Demonstrates how to get information about a Shake Around device and user interaction using the EasyWeChat SDK. Includes example API call and response handling.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/shake-around.md#2025-04-22_snippet_4\n\nLANGUAGE: PHP\nCODE:\n```\n$result = $shakearound->getShakeInfo('6ab3d8465166598a5f4e8c1b44f44645', 1);\n\n/* 返回结果\n{\n   \"data\": {\n       \"page_id \": 14211,\n       \"beacon_info\": {\n           \"distance\": 55.00620700469034,\n           \"major\": 10001,\n           \"minor\": 19007,\n           \"uuid\": \"FDA50693-A4E2-4FB1-AFCF-C6EB07647825\"\n       },\n       \"openid\": \"oVDmXjp7y8aG2AlBuRpMZTb1-cmA\",\n       \"poi_id\":1234\n   },\n   \"errcode\": 0,\n   \"errmsg\": \"success.\"\n}\n*/\nvar_dump($result->data['page_id']) // 14211\nvar_dump($result->data['beacon_info']['distance']) // 55.00620700469034\n```\n\n----------------------------------------\n\nTITLE: Fetching Current Menu in EasyWeChat (PHP)\nDESCRIPTION: This code demonstrates how to fetch the current menu configuration using the EasyWeChat library. It uses the 'current' method of the menu object.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/menu.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$current = $app->menu->current();\n```\n\n----------------------------------------\n\nTITLE: Creating Article Messages in EasyWeChat PHP SDK\nDESCRIPTION: This snippet shows how to create and customize an article message in EasyWeChat. Article messages are used for group messaging and have more detailed attributes than news messages, including author, content, and cover settings.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/messages.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n<?php\nuse EasyWeChat\\Message\\Article;\n\n$article = new Article([\n        'title'   => 'EasyWeChat',\n        'author'  => 'overtrue',\n        'content' => 'EasyWeChat 是一个开源的微信 SDK，它... ...',\n        // ...\n    ]);\n\n// or\n$article = new Article();\n$article->title   = 'EasyWeChat';\n$article->author  = 'overtrue';\n$article->content = '微信 SDK ...';\n// ...\n```\n\n----------------------------------------\n\nTITLE: Alternative Message Sending Method - PHP\nDESCRIPTION: Demonstrates an alternative way to send messages using the group_robot property directly.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/group-robot.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$app->group_robot->message('大家好，我是本群的\"喝水提醒小助手\"')->toGroup($groupKey)->send();\n```\n\n----------------------------------------\n\nTITLE: 查询小微商户入驻申请状态 - PHP\nDESCRIPTION: 使用 EasyWeChat 框架查询小微商户入驻申请的状态。可以通过商户申请单号或业务申请编号进行查询，申请入驻后约5分钟可查询结果。当状态为待签约时，会返回签约二维码。\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/micro-merchant/submit-application.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$applymentId = '商户申请单号(applyment_id 申请入驻接口返回)';\n$businessCode = '业务申请编号(business_code)';\n$app->getStatus(string $applymentId, string $businessCode = '');\n```\n\n----------------------------------------\n\nTITLE: Retrieving Blacklist in PHP\nDESCRIPTION: Gets the list of blocked users with optional pagination\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/user.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n$app->user->blacklist($beginOpenid = null); // $beginOpenid 可选\n```\n\n----------------------------------------\n\nTITLE: Updating a Device Group in PHP\nDESCRIPTION: Updates the name of an existing device group.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/shake-around.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n$result = $shakearound->group->update(123, 'newName');\n```\n\n----------------------------------------\n\nTITLE: Accepting User in EasyWeChat Contacts after Verification in PHP\nDESCRIPTION: Demonstrates how to accept a user into the EasyWeChat contacts system after successful verification.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/contacts.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\n$contacts->user->accept($userId);\n```\n\n----------------------------------------\n\nTITLE: Setting Settlement Card for Merchant in EasyWeChat (PHP)\nDESCRIPTION: This code snippet demonstrates how to set or modify the settlement bank card for a merchant using the EasyWeChat library. It uses the material->setSettlementCard method to update the bank account details.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/micro-merchant/material.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$response = $app->material->setSettlementCard([\n    // 'sub_mch_id' => '1230000109',\n    'account_number' => '银行卡号',\n    'bank_name' => '开户银行全称（含支行）',\n    'account_bank' => '开户银行',\n    'bank_address_code' => '开户银行省市编码',\n]);\n```\n\n----------------------------------------\n\nTITLE: Adding Store Details\nDESCRIPTION: Adds detailed store information including images and credentials.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/store.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n$baseInfo = [\n    \"poi_id\"             => \"\",\n    \"map_poi_id\"         => \"2880741500279549033\",\n    \"pic_list\"           => \"['list' => ['http://mmbiz.qpic.cn/mmbiz_jpg/tW66AWvE2K4EJxIYOVpiaGOkfg0iayibiaP2xHOChvbmKQD5uh8ymibbEKlTTPmjTdQ8ia43sULLeG1pT2psOfPic4kTw/0?wx_fmt=jpeg']]\",\n    \"contract_phone\"     => \"1111222222\",\n    \"credential\"         => \"22883878-0\",\n    \"qualification_list\" => \"RTZgKZ386yFn5kQSWLTxe4bqxwgzGBjs3OE02cg9CVQk1wRVE3c8fjUFX7jvpi-P\"\n];\n```\n\n----------------------------------------\n\nTITLE: Deleting a Device Group in PHP\nDESCRIPTION: Deletes a device group if it contains no devices.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/shake-around.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n$result = $shakearound->group->delete(123);\n```\n\n----------------------------------------\n\nTITLE: Uploading Permanent Thumbnail in PHP\nDESCRIPTION: Shows how to upload a thumbnail image for video or music covers.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/material.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$result = $material->uploadThumb(\"/path/to/your/thumb.jpg\");\n$mediaId = $result->media_id;\n// {\n//    \"media_id\":MEDIA_ID,\n// }\n```\n\n----------------------------------------\n\nTITLE: Adding Devices to a Group in PHP using EasyWeChat\nDESCRIPTION: This snippet demonstrates how to add devices to an existing group using the EasyWeChat SDK. It supports adding devices by device ID or UUID/major/minor combination.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/shake-around.md#2025-04-22_snippet_17\n\nLANGUAGE: php\nCODE:\n```\n$result = $shakearound->group()->addDevice(123, [\n    ['device_id' => 10097],\n    ['device_id' => 10098],\n]);\n// or\n$result = $shakearound->group()->addDevice(123, [\n    ['uuid' => 'FDA50693-A4E2-4FB1-AFCF-C6EB07647825',\n    'major' => 10001,\n    'minor' => 12102,],\n    ['uuid' => 'FDA50693-A4E2-4FB1-AFCF-C6EB07647825',\n    'major' => 10001,\n    'minor' => 12103,]\n]);\n\nvar_dump($result->errcode) // 0\n```\n\n----------------------------------------\n\nTITLE: Creating Mini-Program Contract with EasyWeChat\nDESCRIPTION: Configures a contract for WeChat Mini-Program using JSSDK with provided parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/contract.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$result = $app->jssdk->contractConfig(array $params);\n```\n\n----------------------------------------\n\nTITLE: Replying with Image Messages in Server Handler with EasyWeChat PHP SDK\nDESCRIPTION: This snippet demonstrates how to reply with an Image message type using the server message handler in EasyWeChat. You need to create and return a specific message instance.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/messages.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Message\\Image;\n// ...\n$server->setMessageHandler(function ($message) {\n    return new Image(['media_id' => '........']);\n});\n// ...\n```\n\n----------------------------------------\n\nTITLE: Rejecting a Plugin Usage Application in PHP\nDESCRIPTION: Code for plugin developers to reject an application from a Mini Program that wants to use their plugin. Requires providing a reason for rejection.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/plugin.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$app->plugin_dev->refuse('拒绝理由');\n```\n\n----------------------------------------\n\nTITLE: Listing Personal Templates in PHP\nDESCRIPTION: Retrieves all personal templates associated with the current account.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/subscribe_message.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$app->subscribe_message->getTemplates();\n```\n\n----------------------------------------\n\nTITLE: Deleting Contract with EasyWeChat\nDESCRIPTION: Terminates an existing contract using provided parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/payment/contract.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$result = $app->contract->delete(array $params);\n```\n\n----------------------------------------\n\nTITLE: Updating a Device Group in PHP using EasyWeChat\nDESCRIPTION: This snippet demonstrates how to update an existing device group's name using the EasyWeChat SDK. It requires the group ID and the new name as parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/shake-around.md#2025-04-22_snippet_13\n\nLANGUAGE: php\nCODE:\n```\n$result = $shakearound->group()->update(123, 'newName');\n\nvar_dump($result->errcode) // 0\n```\n\n----------------------------------------\n\nTITLE: Adding Users to a Tag in EasyWeChat Contacts in PHP\nDESCRIPTION: Shows how to add users or departments to a specific tag in the EasyWeChat contacts system.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/contacts.md#2025-04-22_snippet_22\n\nLANGUAGE: php\nCODE:\n```\n$contacts->tag->tagUsers($tagId, [$userId1, $userId2, ...]);\n\n// 指定部门\n$contacts->tag->tagDepartments($tagId, [$departmentId1, $departmentId2, ...]);\n```\n\n----------------------------------------\n\nTITLE: Deleting Store Location\nDESCRIPTION: Removes a store location from WeChat using its POI ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/poi.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$poi->delete($poiId);\n```\n\nLANGUAGE: php\nCODE:\n```\n$poi->delete(271262077);// true or exception\n```\n\n----------------------------------------\n\nTITLE: Deleting a User Group in EasyWeChat (PHP)\nDESCRIPTION: Deletes a user group specified by its ID. Takes a single parameter which is the group ID to be deleted.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/user-group.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$group->delete($groupId);\n```\n\nLANGUAGE: php\nCODE:\n```\n$group->delete($groupId);\n```\n\n----------------------------------------\n\nTITLE: Binding WeChat Printer Operator in EasyWeChat (PHP)\nDESCRIPTION: Binds a printing operator for use with the WeChat printing PC software. Requires the operator's OpenID as input parameter. This API is only needed when using WeChat's dedicated printing software.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/express.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$app->express->bindPrinter($openid);\n```\n\n----------------------------------------\n\nTITLE: Updating a User Group in EasyWeChat (PHP)\nDESCRIPTION: Updates the name of an existing user group. Requires the group ID and the new name as parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/user-group.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$group->update($groupId, $name);\n```\n\nLANGUAGE: php\nCODE:\n```\n$group->update($groupId, \"新的组名\");\n```\n\n----------------------------------------\n\nTITLE: Registering for Shake Around Service in EasyWeChat PHP SDK\nDESCRIPTION: Demonstrates how to register for the Shake Around service using the EasyWeChat SDK. Includes example API call and response handling.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/shake-around.md#2025-04-22_snippet_2\n\nLANGUAGE: PHP\nCODE:\n```\n$result = $shakearound->register('zhang_san', '13512345678', 'weixin123@qq.com', '0118', [], 'test');\n\n/* 返回结果\n{\n   \"data\": {\n\n   },\n   \"errcode\": 0,\n   \"errmsg\": \"success.\"\n}\n*/\nvar_dump($result->data) // 空数组\nvar_dump($result->errcode) // 0\nvar_dump($result->errmsg) // success.\n```\n\n----------------------------------------\n\nTITLE: Deleting Permanent Material in WeChat using EasyWeChat PHP SDK\nDESCRIPTION: This snippet demonstrates how to delete a permanent material from WeChat servers using its media ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/material.md#2025-04-22_snippet_10\n\nLANGUAGE: PHP\nCODE:\n```\n$app->material->delete($mediaId);\n```\n\n----------------------------------------\n\nTITLE: Canceling Express Waybills in EasyWeChat (PHP)\nDESCRIPTION: Cancels an existing express delivery waybill through the WeChat Logistics API. Requires waybill data as input parameter to identify the specific waybill to be canceled.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/express.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$app->express->deleteWaybill($data);\n```\n\n----------------------------------------\n\nTITLE: 查询小微商户入驻申请状态 - PHP EasyWeChat\nDESCRIPTION: 查询小微商户入驻申请的处理状态，可使用商户申请单号或业务申请编号进行查询。申请提交后约5分钟可查询结果，如状态为待签约将返回签约二维码。\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/micro-merchant/submit-application.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$applymentId = '商户申请单号(applyment_id 申请入驻接口返回)';\n$businessCode = '业务申请编号(business_code)';\n$app->getStatus(string $applymentId, string $businessCode = '');\n```\n\n----------------------------------------\n\nTITLE: Customizing Retry Configuration for Individual Requests in EasyWeChat\nDESCRIPTION: Shows how to customize retry parameters for individual HTTP requests in EasyWeChat, overriding the global retry configuration. This allows fine-tuning retry behavior for specific API calls.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/6.x/client.md#2025-04-22_snippet_13\n\nLANGUAGE: php\nCODE:\n```\n$app->getClient()->retry([\n    'max_retries' => 2,\n    //...\n])->get('/foo/bar');\n```\n\n----------------------------------------\n\nTITLE: Deleting a Department in EasyWeChat Contacts in PHP\nDESCRIPTION: Demonstrates how to delete a department from the EasyWeChat contacts system using its ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/contacts.md#2025-04-22_snippet_15\n\nLANGUAGE: php\nCODE:\n```\n$contacts->department->delete($id);\n```\n\n----------------------------------------\n\nTITLE: Adding a New Device Group in PHP using EasyWeChat\nDESCRIPTION: This code shows how to create a new device group using the EasyWeChat SDK. It takes a group name as a parameter and returns the newly created group's ID and name.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/shake-around.md#2025-04-22_snippet_12\n\nLANGUAGE: php\nCODE:\n```\n$result = $shakearound->group()->add('test');\n\nvar_dump($result->data['group_id']) // 123\nvar_dump($result->data['group_name']) // test\n```\n\n----------------------------------------\n\nTITLE: Fetching Shake Around Device List by IDs in EasyWeChat PHP SDK\nDESCRIPTION: Shows how to retrieve information for multiple Shake Around devices by their IDs using the EasyWeChat SDK. Includes example API call and response handling.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/shake-around.md#2025-04-22_snippet_9\n\nLANGUAGE: PHP\nCODE:\n```\n$result = $shakearound->device()->fetchByIds([\n                                                ['device_id' => 10097],\n                                                ['device_id' => 10098],\n]);\n// 或\n$result = $shakearound->device()->fetchByIds([\n                                                ['uuid' => 'FDA50693-A4E2-4FB1-AFCF-C6EB07647825',\n                                                 'major' => 10001,\n                                                 'minor' => 12102,],\n                                                ['uuid' => 'FDA50693-A4E2-4FB1-AFCF-C6EB07647825',\n                                                 'major' => 10001,\n                                                 'minor' => 12103,]\n]);\n\n/* 返回结果\n{\n    \"data\": {\n        \"devices\": [\n            {\n                \"comment\": \"\",\n                \"device_id\": 10097,\n                \"major\": 10001,\n                \"minor\": 12102,\n                \"status\": 1,\n                \"last_active_time\":1437276018,\n                \"poi_id\": 0,\n                \"uuid\": \"FDA50693-A4E2-4FB1-AFCF-C6EB07647825\"\n            },\n            {\n                \"comment\": \"\",\n                \"device_id\": 10098,\n                \"major\": 10001,\n                \"minor\": 12103,\n                \"status\": 1,\n                \"last_active_time\":1437276018,\n                \"poi_appid\":\"wxe3813f5d8c546fc7\"\n                \"poi_id\": 123,\n                \"uuid\": \"FDA50693-A4E2-4FB1-AFCF-C6EB07647825\"\n            }\n        ],\n        \"total_count\": 151\n    },\n    \"errcode\": 0,\n    \"errmsg\": \"success.\"\n}\n*/\nvar_dump($result->data['devices'][0][device_id]) // 10097\nvar_dump($result->data['total_count']) // 151\n```\n\n----------------------------------------\n\nTITLE: Custom Logger Configuration Example\nDESCRIPTION: Configuration example showing how to implement a custom logging driver in the EasyWeChat configuration array.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/configuration.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n'log' => [\n    'default' => 'dev', // 默认使用的 channel，生产环境可以改为下面的 prod\n    'channels' => [\n        // 测试环境\n        'dev' => [\n            'driver' => 'mylog',\n            'path' => '/tmp/easywechat.log',\n            'level' => 'debug',\n            'days' => 5,\n        ],\n\n        //...\n    ],\n],\n```\n\n----------------------------------------\n\nTITLE: Setting Access Token in EasyWeChat\nDESCRIPTION: Shows how to modify an existing access token in the EasyWeChat application instance using setToken method.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/access_token.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$app['access_token']->setToken($newAccessToken, $expires);\n```\n\n----------------------------------------\n\nTITLE: Querying Batch Page Statistics in PHP using EasyWeChat\nDESCRIPTION: This snippet demonstrates how to query page statistics for a specified timestamp and page index using the EasyWeChat SDK. It returns data such as page views, unique visitors, and shake counts for each page.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/shake-around.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\n$result = $shakearound->stats()->batchPageSummary(1435075200, 1);\n\nvar_dump($result->data['pages'][0]['click_uv']) // 3\nvar_dump($result->total_count) // 151\n```\n\n----------------------------------------\n\nTITLE: Updating Shake Around Device Information in EasyWeChat PHP SDK\nDESCRIPTION: Shows how to update the comment for a Shake Around device using the EasyWeChat SDK. Includes example API calls and response handling.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/shake-around.md#2025-04-22_snippet_7\n\nLANGUAGE: PHP\nCODE:\n```\n$result = $shakearound->device()->update(['device_id' => 10011], 'test');\n// 或\n$result = $shakearound->device()->update(['uuid' => 'FDA50693-A4E2-4FB1-AFCF-C6EB07647825',\n                                          'major' => 1002,\n                                          'minor' => 1223,\n], 'test');\n\n/* 返回结果\n{\n    \"data\": {\n    },\n    \"errcode\": 0,\n    \"errmsg\": \"success.\"\n}\n*/\nvar_dump($result->errcode) // 0\n```\n\n----------------------------------------\n\nTITLE: Setting WeChat Pay Options for Card in PHP\nDESCRIPTION: Sets the pay options for a WeChat card using the setPayCell method. Takes card ID and boolean to enable/disable pay functionality.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/card.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$card->setPayCell($cardId, $isOpen);\n```\n\nLANGUAGE: php\nCODE:\n```\n$cardId = 'pdkJ9uH7u11R-Tu1kilbaW_zDFow';\n$isOpen = true;\n\n$result = $card->setPayCell($cardId, $isOpen);\n```\n\n----------------------------------------\n\nTITLE: OpenID Conversion Response Example\nDESCRIPTION: Example JSON response showing the result of OpenID conversion operation\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/user.md#2025-04-22_snippet_10\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"errcode\": 0,\n  \"errmsg\": \"ok\",\n  \"result_list\": [\n    {\n      \"ori_openid\": \"oEmYbwN-n24jxvk4Sox81qedINkQ\",\n      \"new_openid\": \"o2FwqwI9xCsVadFah_HtpPfaR-X4\",\n      \"err_msg\": \"ok\"\n    },\n    {\n      \"ori_openid\": \"oEmYbwH9uVd4RKJk7ZZg6SzL6tTo\",\n      \"err_msg\": \"ori_openid error\"\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing WeChat Mini Program Instance for Content Security API\nDESCRIPTION: Example of initializing a WeChat Mini Program instance that will be used with the content security API. This shows the required configuration for using the security content detection features.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/basic-services/content_security.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse EasyWeChat\\Factory;\n\n$config = [\n    'app_id' => 'wx3cf0f39249eb0exx',\n    'secret' => 'f1c242f4f28f735d4687abb469072axx',\n\n    // 下面为可选项\n    // 指定 API 调用返回结果的类型：array(default)/collection/object/raw/自定义类名\n    'response_type' => 'array',\n\n    'log' => [\n        'level' => 'debug',\n        'file' => __DIR__.'/wechat.log',\n    ],\n];\n\n$app = Factory::miniProgram($config);\n```\n\n----------------------------------------\n\nTITLE: Unbinding WeChat Printer Operator in EasyWeChat (PHP)\nDESCRIPTION: Unbinds a previously registered printing operator from the WeChat printing PC software. Requires the operator's OpenID as input parameter. This API is only needed when using WeChat's dedicated printing software.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/express.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n$app->express->unbindPrinter($openid);\n```\n\n----------------------------------------\n\nTITLE: Installing EasyWeChat with Composer\nDESCRIPTION: Command to install the EasyWeChat package using Composer package manager. Requires Composer 2.0 or higher.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/README.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncomposer require w7corp/easywechat\n```\n\n----------------------------------------\n\nTITLE: Generated WeChat JSSDK Configuration Output\nDESCRIPTION: This shows the actual JavaScript output after the PHP configuration has been rendered. It includes the debug flag, WeChat app ID, timestamp, nonce string, signature, and the list of requested API functions.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/js.md#2025-04-22_snippet_2\n\nLANGUAGE: js\nCODE:\n```\n<script src=\"http://res.wx.qq.com/open/js/jweixin-1.0.0.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n<script type=\"text/javascript\" charset=\"utf-8\">\nwx.config({\n    debug: true,\n    appId: 'wx3cf0f39249eb0e60',\n    timestamp: 1430009304,\n    nonceStr: 'qey94m021ik',\n    signature: '4F76593A4245644FAE4E1BC940F6422A0C3EC03E',\n    jsApiList: ['onMenuShareQQ', 'onMenuShareWeibo']\n});\n</script>\n```\n\n----------------------------------------\n\nTITLE: Retrieving WeChat Card Categories in PHP\nDESCRIPTION: Retrieves the available categories for WeChat cards using the getCategories method.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/card.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\n$card->getCategories();\n```\n\nLANGUAGE: php\nCODE:\n```\n$result = $card->getCategories();\n```\n\n----------------------------------------\n\nTITLE: Approving a Plugin Usage Application in PHP\nDESCRIPTION: Code for plugin developers to approve an application from a Mini Program that wants to use their plugin. Requires the applicant's AppID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/plugin.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$appId = 'wxxxxxxxxxxxxxx';\n\n$app->plugin_dev->agree($appId);\n```\n\n----------------------------------------\n\nTITLE: 添加EasyWeChat个性化菜单\nDESCRIPTION: 展示如何添加带有匹配规则的个性化菜单。需要提供菜单按钮数组和匹配规则数组。\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/menu.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$buttons = [\n    // ...\n];\n$matchRule = [\n    \"tag_id\" => \"2\",\n    \"sex\" => \"1\",\n    \"country\" => \"中国\",\n    \"province\" => \"广东\",\n    \"city\" => \"广州\",\n    \"client_platform_type\" => \"2\",\n    \"language\" => \"zh_CN\"\n];\n$menu->add($buttons, $matchRule);\n```\n\n----------------------------------------\n\nTITLE: Deleting Rejected Plugin Applicants in PHP\nDESCRIPTION: Code for plugin developers to remove applicants who have already been rejected from the applicant list.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/mini-program/plugin.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$app->plugin_dev->delete();\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Cache Driver for EasyWeChat in PHP\nDESCRIPTION: This snippet demonstrates how to create a custom cache driver by implementing the Doctrine\\Common\\Cache\\Cache interface. It includes a skeleton class with methods that need to be implemented.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/cache.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nuse Doctrine\\Common\\Cache\\Cache as CacheInterface;\n\nclass MyCacheDriver implements CacheInterface\n{\n    public function fetch($id)\n    {\n        // 你自己从你想实现的存储方式读取并返回\n    }\n\n    public function contains($id)\n    {\n        // 同理 返回存在与否 bool 值\n    }\n\n    public function save($id, $data, $lifeTime = 0)\n    {\n        // 用你的方式存储该缓存内容即可\n    }\n\n    public function delete($id)\n    {\n        // 删除并返回 bool 值\n    }\n\n    public function getStats()\n    {\n        // 这个你可以不用实现，返回 null 即可\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Alternative Message Sending Method\nDESCRIPTION: Demonstrates an alternative way to send messages using the group_robot property directly.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/wework/group-robot.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$app->group_robot->message('大家好，我是本群的\"喝水提醒小助手\"')->toGroup($groupKey)->send();\n```\n\n----------------------------------------\n\nTITLE: Generating Shared Address Configuration in PHP\nDESCRIPTION: Creates the configuration for the shared address feature using an OAuth access token.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/payment/jssdk.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n$configForPickAddress = $jssdk->shareAddressConfig($token);\n\n// 拿着这个生成好的配置 $configForPickAddress 去订单页（或者直接显示订单页）写 js 调用了\n// ...\n```\n\n----------------------------------------\n\nTITLE: Deleting WeChat Card in PHP\nDESCRIPTION: Deletes a WeChat card using the delete method. Requires the card ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/card.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$card->delete($cardId);\n```\n\nLANGUAGE: php\nCODE:\n```\n$cardId = 'pdkJ9uItT7iUpBp4GjZp8Cae0Vig';\n\n$result = $card->delete($cardId);\n```\n\n----------------------------------------\n\nTITLE: Removing Devices from a Group in PHP\nDESCRIPTION: Removes multiple devices from a specified device group.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/shake-around.md#2025-04-22_snippet_12\n\nLANGUAGE: php\nCODE:\n```\n$result = $shakearound->group->removeDevices(123, [\n  ['device_id' => 10097],\n  ['device_id' => 10098],\n]);\n// or\n$result = $shakearound->group->removeDevices(123, [\n    [\n      'uuid' => 'FDA50693-A4E2-4FB1-AFCF-C6EB07647825',\n      'major' => 10001,\n      'minor' => 12102,\n    ],\n    [\n      'uuid' => 'FDA50693-A4E2-4FB1-AFCF-C6EB07647825',\n      'major' => 10001,\n      'minor' => 12103,\n    ]\n]);\n```\n\n----------------------------------------\n\nTITLE: Configuring Predis Cache for EasyWeChat in Laravel\nDESCRIPTION: This snippet shows how to set up Predis caching for the EasyWeChat SDK in a Laravel application. It uses the Laravel Redis facade to get a Predis connection.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/cache.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse Doctrine\\Common\\Cache\\PredisCache;\n\n$predis = app('redis')->connection();// connection($name), $name 默认为 `default`\n$cacheDriver = new PredisCache($predis);\n\n$app->cache = $cacheDriver;\n```\n\n----------------------------------------\n\nTITLE: Blocking WeChat Users in PHP\nDESCRIPTION: Blocks one or multiple WeChat users from interacting with the account\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/user.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$app->user->block('openidxxxxx');\n// 或者多个用户\n$app->user->block(['openid1', 'openid2', 'openid3', ...]);\n```\n\n----------------------------------------\n\nTITLE: 添加EasyWeChat普通菜单\nDESCRIPTION: 展示如何使用add()方法添加普通菜单。菜单结构使用数组定义，包含按钮类型、名称和对应的动作。\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/menu.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$buttons = [\n    [\n        \"type\" => \"click\",\n        \"name\" => \"今日歌曲\",\n        \"key\"  => \"V1001_TODAY_MUSIC\"\n    ],\n    [\n        \"name\"       => \"菜单\",\n        \"sub_button\" => [\n            [\n                \"type\" => \"view\",\n                \"name\" => \"搜索\",\n                \"url\"  => \"http://www.soso.com/\"\n            ],\n            [\n                \"type\" => \"view\",\n                \"name\" => \"视频\",\n                \"url\"  => \"http://v.qq.com/\"\n            ],\n            [\n                \"type\" => \"click\",\n                \"name\" => \"赞一下我们\",\n                \"key\" => \"V1001_GOOD\"\n            ],\n        ],\n    ],\n];\n$menu->add($buttons);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Device Statistics in PHP\nDESCRIPTION: Retrieves statistics for a single device, including shake and click counts for a specified date range.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/shake-around.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$result = $shakearound->stats->deviceSummary(['device_id' => 10011], 1425052800, 1425139200);\n// or\n$result = $shakearound->stats->deviceSummary(['uuid' => 'FDA50693-A4E2-4FB1-AFCF-C6EB07647825',\n                                                'major' => 1002,\n                                                'minor' => 1223,\n], 1425052800, 1425139200);\n```\n\n----------------------------------------\n\nTITLE: Default Event Handling for Open Platform in PHP\nDESCRIPTION: This snippet demonstrates the default handling of the 'component_verify_ticket' event in EasyWeChat's Open Platform module. It caches the verify_ticket without requiring additional event processing.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/open-platform/server.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$server = $openPlatform->server;\n\nreturn $server->serve();\n```\n\n----------------------------------------\n\nTITLE: Uploading Video Media in EasyWeChat\nDESCRIPTION: Uploads a video file to WeChat's media server. Must be MP4 format and under 10MB. Requires title and description.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/basic-services/media.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$app->media->uploadVideo($path, $title, $description);\n```\n\n----------------------------------------\n\nTITLE: 测试EasyWeChat个性化菜单\nDESCRIPTION: 使用test()方法测试指定用户的个性化菜单匹配结果。可以使用OpenID或微信号作为用户标识。\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/menu.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$menus = $menu->test($userId);\n```\n\n----------------------------------------\n\nTITLE: Deleting a Device Group in PHP using EasyWeChat\nDESCRIPTION: This code shows how to delete a device group using the EasyWeChat SDK. It requires the group ID as a parameter and will only succeed if the group contains no devices.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/shake-around.md#2025-04-22_snippet_14\n\nLANGUAGE: php\nCODE:\n```\n$result = $shakearound->group()->delete(123);\n\nvar_dump($result->errcode) // 0\n```\n\n----------------------------------------\n\nTITLE: 分页获取微信返佣商品信息列表 (PHP)\nDESCRIPTION: 使用EasyWeChat库分页获取已导入的全量商品信息。支持分页查询，每页数据大小限制为100以内。返回的product字段内容与导入商品接口字段一致，page_context用于获取下一页数据。\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/goods.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$context = '';  // page 为 1 时传空即可。当 page 大于 1 时必填，填入上一次访问本接口返回的 page_context。\n$page = 1;      // 页码\n$size = 10;     // 每页数据大小，目前限制为100以内，注意一次全量验证过程中该参数的值需保持不变\n\n$app->goods->list($context, $page, $size);\n```\n\n----------------------------------------\n\nTITLE: Initializing POI Instance with EasyWeChat\nDESCRIPTION: Shows how to initialize the POI (Point of Interest) instance using EasyWeChat Application class.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/poi.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nuse EasyWeChat\\Foundation\\Application;\n\n// ...\n\n$app = new Application($options);\n\n$poi = $app->poi;\n```\n\n----------------------------------------\n\nTITLE: Removing Devices from a Group in PHP using EasyWeChat\nDESCRIPTION: This code shows how to remove devices from an existing group using the EasyWeChat SDK. It supports removing devices by device ID or UUID/major/minor combination.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/shake-around.md#2025-04-22_snippet_18\n\nLANGUAGE: php\nCODE:\n```\n$result = $shakearound->group()->removeDevice(123, [\n    ['device_id' => 10097],\n    ['device_id' => 10098],\n]);\n// or\n$result = $shakearound->group()->removeDevice(123, [\n    ['uuid' => 'FDA50693-A4E2-4FB1-AFCF-C6EB07647825',\n    'major' => 10001,\n    'minor' => 12102,],\n    ['uuid' => 'FDA50693-A4E2-4FB1-AFCF-C6EB07647825',\n    'major' => 10001,\n    'minor' => 12103,]\n]);\n\nvar_dump($result->errcode) // 0\n```\n\n----------------------------------------\n\nTITLE: Binding AppID in EasyWeChat Micro Merchant (PHP)\nDESCRIPTION: Creates a new association between the specified sub AppID and AppID for a micro merchant. Requires the sub AppID parameter, with optional AppID and sub merchant ID parameters.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/micro-merchant/merchant-config.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$response = $app->merchantConfig->bindAppId(string $subAppId, string $appId = '', string $subMchId = '');\n```\n\n----------------------------------------\n\nTITLE: Updating Commission Products with EasyWeChat in PHP\nDESCRIPTION: This snippet shows how to update commission products. Omitted fields are not updated. String fields can be set to empty to clear them, while numeric fields should be set to 0 to clear. The 'pid' field is required and cannot be modified.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/goods.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$data = [\n    [\n        'pid' => 'pid001',\n        'image_info' => [\n            'main_image_list' => [\n                [\n                    'url' => 'http://www.baidu.com/c.jpg',\n                ],\n                [\n                    'url' => 'http://www.baidu.com/d.jpg',\n                ],\n            ],\n        ],\n        \n        //...\n    ],\n    \n    //...\n];\n \n$result = $app->goods->update($data);\n \n// $result:\n//{\n//    \"errcode\": 0,\n//    \"errmsg\": \"ok\",\n//    \"status_ticket\": \"115141102647330200\"\n//}\n```\n\n----------------------------------------\n\nTITLE: Setting Custom URL for JSSDK in PHP\nDESCRIPTION: Method to manually set the URL for JSSDK configuration instead of using the automatically detected one. This is typically not needed in standard implementations.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/basic-services/jssdk.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$app->jssdk->setUrl($url)\n```\n\n----------------------------------------\n\nTITLE: Retrieving JSSDK Uploaded High-Quality Voice in PHP using EasyWeChat\nDESCRIPTION: Fetches a high-quality voice file uploaded via JSSDK and saves it with a custom name and .speex extension.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/basic-services/media.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n$stream = $app->media->getJssdkMedia($mediaId);\n$stream->saveAs('保存目录', 'custom-name.speex');\n```\n\n----------------------------------------\n\nTITLE: Updating Store Information\nDESCRIPTION: Updates existing store information in the mini program. Note that updating images requires a complete resubmission of all images.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/store.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n$app->store->update($baseInfo);\n```\n\n----------------------------------------\n\nTITLE: Updating Store Details\nDESCRIPTION: Updates existing store details. Note that updating images replaces all existing images.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/store.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n$app->store->update($baseInfo);\n```\n\n----------------------------------------\n\nTITLE: Setting Up Local Development Environment for EasyWeChat.com with pnpm\nDESCRIPTION: Commands to install dependencies and start the local development server for the EasyWeChat.com website. This uses pnpm as the preferred package manager to install all required dependencies and launch the development server.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/README.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\npnpm i\npnpm run dev\n```\n\n----------------------------------------\n\nTITLE: Creating Personalized Menu in EasyWeChat (PHP)\nDESCRIPTION: This code shows how to create a personalized menu with matching rules using the EasyWeChat library. It defines the menu buttons and a separate array for matching rules, then passes both to the 'create' method.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/menu.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$buttons = [\n    // ...\n];\n$matchRule = [\n    \"tag_id\" => \"2\",\n    \"sex\" => \"1\",\n    \"country\" => \"中国\",\n    \"province\" => \"广东\",\n    \"city\" => \"广州\",\n    \"client_platform_type\" => \"2\",\n    \"language\" => \"zh_CN\"\n];\n$app->menu->create($buttons, $matchRule);\n```\n\n----------------------------------------\n\nTITLE: Uploading Article Image in WeChat using EasyWeChat PHP SDK\nDESCRIPTION: This snippet shows how to upload an image specifically for use in WeChat articles. It returns a URL that can be used in subsequent group messages or article content.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/material.md#2025-04-22_snippet_6\n\nLANGUAGE: PHP\nCODE:\n```\n$result = $app->material->uploadArticleImage($path);\n//{\n//    \"url\":  \"http://mmbiz.qpic.cn/mmbiz/gLO17UPS6FS2xsypf378iaNhWacZ1G1UplZYWEYfwvuU6Ont96b1roYsCNFwaRrSaKTPCUdBK9DgEHicsKwWCBRQ/0\"\n//}\n```\n\n----------------------------------------\n\nTITLE: Creating Store Mini Program\nDESCRIPTION: Creates a new store mini program with basic information. Requires admin approval within 24 hours.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/store.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$info = [\n    \"first_catid\"        => 476,\n    \"second_catid\"       => 477,\n    \"qualification_list\" =>  \"RTZgKZ386yFn5kQSWLTxe4bqxwgzGBjs3OE02cg9CVQk1wRVE3c8fjUFX7jvpi-P\",\n    \"headimg_mediaid\"    => \"RTZgKZ386yFn5kQSWLTxe4bqxwgzGBjs3OE02cg9CVQk1wRVE3c8fjUFX7jvpi-P\",\n    \"nickname\"           => \"hardenzhang308\",\n    \"intro\"              => \"hardenzhangtest\",\n    \"org_code\"           => \"\",\n    \"other_files\"        => \"\"\n];\n\n$result = $app->store->createMerchant($info);\n```\n\n----------------------------------------\n\nTITLE: Uploading Video for Broadcasting in PHP using EasyWeChat\nDESCRIPTION: Uploads a video file and returns a media_id for use in creating broadcast messages. Includes title and description in the response.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/basic-services/media.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$app->media->uploadVideoForBroadcasting($path, $title, $description);\n\n//{\n//  \"media_id\": \"rF4UdIMfYK3efUfyoddYRMU50zMiRmmt_l0kszupYh_SzrcW5Gaheq05p_lHuOTQ\",\n//  \"title\": \"TITLE\",\n//  \"description\": \"Description\"\n//}\n```\n\n----------------------------------------\n\nTITLE: Deleting Users from EasyWeChat Contacts in PHP\nDESCRIPTION: Demonstrates how to delete one or multiple users from the EasyWeChat contacts system using their user IDs.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/wework/contacts.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$contacts->user->delete('overtrue');\n// 或者删除多个\n$contacts->user->delete(['overtrue', 'zhangsan', 'wangwu']);\n```\n\n----------------------------------------\n\nTITLE: Customer Service Profile and Chat Management in PHP\nDESCRIPTION: Operations for managing customer service profiles and chat records, including setting avatars and retrieving chat history.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/customer_service.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$app->customer_service->setAvatar('foo@test', $avatarPath);\n```\n\nLANGUAGE: php\nCODE:\n```\n$app->customer_service->messages($startTime, $endTime, $msgId = 1, $number = 10000);\n```\n\nLANGUAGE: php\nCODE:\n```\n$records = $app->customer_service->messages('2015-06-07', '2015-06-21', 1, 20000);\n```\n\n----------------------------------------\n\nTITLE: Setting Access Token with Expiration Time\nDESCRIPTION: Example of setting an access token with an optional expiration time specified in seconds.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/access_token.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$app['access_token']->setToken('ccfdec35bd7ba359f6101c2da321d675');\n// 或者指定过期时间\n$app['access_token']->setToken('ccfdec35bd7ba359f6101c2da321d675', 3600);  // 单位：秒\n```\n\n----------------------------------------\n\nTITLE: Retrieving Authorizer Account Information\nDESCRIPTION: Fetches basic account information for an authorized entity using their app ID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/open-platform/index.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$openPlatform->getAuthorizer(string $appId);\n```\n\n----------------------------------------\n\nTITLE: Creating a Customer Service Session in PHP\nDESCRIPTION: Establishes a new customer service session between a specific customer service account and a user identified by their OpenID.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/4.x/official-account/customer_service.md#2025-04-22_snippet_13\n\nLANGUAGE: php\nCODE:\n```\n$app->customer_service_session->create('test1@test', 'OPENID');\n```\n\n----------------------------------------\n\nTITLE: Customer Service Session Management in PHP\nDESCRIPTION: Operations for managing customer service sessions including creating, closing, and checking session status.\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/5.x/official-account/customer_service.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$app->customer_service->invite('foo@test', 'xxxx');\n```\n\nLANGUAGE: php\nCODE:\n```\n$app->customer_service_session->create('test1@test', 'OPENID');\n```\n\nLANGUAGE: php\nCODE:\n```\n$app->customer_service_session->close('test1@test', 'OPENID');\n```\n\nLANGUAGE: php\nCODE:\n```\n$app->customer_service_session->get('OPENID');\n```\n\nLANGUAGE: php\nCODE:\n```\n$app->customer_service_session->list('test1@test');\n```\n\nLANGUAGE: php\nCODE:\n```\n$app->customer_service_session->waiting();\n```\n\n----------------------------------------\n\nTITLE: 删除EasyWeChat菜单\nDESCRIPTION: 展示如何删除菜单，包括全部删除和根据菜单ID删除个性化菜单。\nSOURCE: https://github.com/w7corp/easywechat.git/blob/6.x/docs/src/3.x/menu.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$menu->destroy(); // 全部\n$menu->destroy($menuId);\n```"
  }
]
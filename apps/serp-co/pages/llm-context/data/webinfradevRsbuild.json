[
  {
    "owner": "web-infra-dev",
    "repo": "rsbuild",
    "content": "TITLE: Rsbuild Configuration - Entry Points\nDESCRIPTION: This TypeScript snippet shows how to configure Rsbuild entry points using the `source.entry` option in `rsbuild.config.ts`. This allows you to specify multiple entry points for your application, such as different pages or components.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/start/quick-start.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\n\"export default {\n  source: {\n    entry: {\n      foo: './src/pages/foo/index.ts',\n      bar: './src/pages/bar/index.ts',\n    },\n  },\n};\"\n```\n\n----------------------------------------\n\nTITLE: Configuring Emotion CSS-in-JS with Rsbuild\nDESCRIPTION: Setup for using Emotion CSS-in-JS library with Rsbuild and React. This configuration uses SWC plugins and custom React options to properly compile Emotion's CSS-in-JS syntax.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/framework/react.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginReact } from '@rsbuild/plugin-react';\n\nexport default defineConfig({\n  plugins: [\n    pluginReact({\n      swcReactOptions: {\n        importSource: '@emotion/react',\n      },\n    }),\n  ],\n  tools: {\n    swc: {\n      jsc: {\n        experimental: {\n          plugins: [['@swc/plugin-emotion', {}]],\n        },\n      },\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Creating basic Rsbuild configuration with React plugin\nDESCRIPTION: Basic Rsbuild configuration file that imports and registers the React plugin, which is required for React projects. This serves as the starting point for CRA migration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/migration/cra.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginReact } from '@rsbuild/plugin-react';\n\nexport default defineConfig({\n  plugins: [pluginReact()],\n});\n```\n\n----------------------------------------\n\nTITLE: Enabling Named Exports for CSS Modules - TypeScript\nDESCRIPTION: Configures Rsbuild's output settings to support named exports for CSS Modules. This approach allows class names to be imported directly as variables instead of through a default import.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/styling/css-modules.mdx#2025-04-21_snippet_2\n\nLANGUAGE: ts\nCODE:\n```\nexport default {\n  output: {\n    cssModules: {\n      namedExport: true,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Split Chunks (TS)\nDESCRIPTION: Configures the chunk splitting behavior for React and Router related packages. This is relevant when `chunkSplit.strategy` is set to `split-by-experience` and controls whether `react` and `router` are split into separate chunks.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-react.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\npluginReact({\n  splitChunks: {\n    react: false,\n    router: false,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Starting Development Server with Rsbuild\nDESCRIPTION: Uses the startDevServer method on an Rsbuild instance to start a local development server. This is typically used during development for real-time preview.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/start/index.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nawait rsbuild.startDevServer();\n```\n\n----------------------------------------\n\nTITLE: TypeScript Configuration with defineConfig\nDESCRIPTION: Example of using defineConfig utility in a TypeScript configuration file to set up resolve.alias with type hints and autocompletion support.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/configuration/rsbuild.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\n\nexport default defineConfig({\n  resolve: {\n    alias: {\n      '@common': './src/common',\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Rsbuild with Solid plugin\nDESCRIPTION: This code snippet demonstrates how to configure Rsbuild to work with Solid. It imports the necessary modules from `@rsbuild/core`, `@rsbuild/plugin-babel`, and `@rsbuild/plugin-solid`, and then defines an Rsbuild configuration that includes both the Babel and Solid plugins. The Babel plugin is configured to include JSX and TSX files.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/framework/solid.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginBabel } from '@rsbuild/plugin-babel';\nimport { pluginSolid } from '@rsbuild/plugin-solid';\n\nexport default defineConfig({\n  plugins: [\n    pluginBabel({\n      include: /\\.(?:jsx|tsx)$/,\n    }),\n    pluginSolid(),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring resolve.dedupe in Rsbuild\nDESCRIPTION: Example configuration showing how to use resolve.dedupe to force all React packages to resolve from the project root, eliminating duplication.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/resolve/dedupe.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  resolve: {\n    dedupe: ['react', 'react-dom'],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Rsbuild for Manifest Generation\nDESCRIPTION: Rsbuild configuration to enable manifest generation for asset management in SSR.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/ssr.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    manifest: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Basic Rsbuild Configuration Structure\nDESCRIPTION: Example showing the basic structure of a Rsbuild configuration file with all main configuration sections including plugins, dev, html, tools, output and other key options.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/configuration/rsbuild.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  plugins: [\n    // configure Rsbuild plugins\n  ],\n  dev: {\n    // options for local development\n  },\n  html: {\n    // options for HTML generation\n  },\n  tools: {\n    // options for the low-level tools\n  },\n  output: {\n    // options for build outputs\n  },\n  resolve: {\n    // options for module resolution\n  },\n  source: {\n    // options for input source code\n  },\n  server: {\n    // options for the Rsbuild server,\n    // will take effect during local development and preview\n  },\n  security: {\n    // options for Web security\n  },\n  performance: {\n    // options for build performance and runtime performance\n  },\n  moduleFederation: {\n    // options for module federation\n  },\n  environments: {\n    // define different Rsbuild configurations for each environment\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Tailwind CSS via Rsbuild Tools\nDESCRIPTION: This code snippet illustrates how to configure Tailwind CSS through the `tools.postcss` option in `rsbuild.config.js`. It involves importing the `tailwindcss` module and passing the configuration within the `postcssOptions`.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/styling/tailwindcss-v3.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nimport tailwindcss from 'tailwindcss';\n\nexport default {\n  tools: {\n    postcss: {\n      postcssOptions: {\n        plugins: [\n          tailwindcss({\n            content: ['./src/**/*.{html,js,ts,jsx,tsx}'],\n            // ...other options\n          }),\n        ],\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Integrating Cloudflare UA Polyfill Service in Rsbuild\nDESCRIPTION: Configuring Rsbuild to use Cloudflare's polyfill service which dynamically loads polyfills based on the user's browser User-Agent, using html.tags for script injection.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/browser-compatibility.mdx#2025-04-21_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  html: {\n    tags: [\n      {\n        tag: 'script',\n        attrs: {\n          defer: true,\n          src: 'https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=default',\n        },\n        append: false,\n      },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Module Federation v2.0 in Rsbuild\nDESCRIPTION: This snippet demonstrates how to configure Module Federation v2.0 in a Rsbuild project using the @module-federation/rsbuild-plugin. It shows the basic setup with the plugin name and options.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/module-federation.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginModuleFederation } from '@module-federation/rsbuild-plugin';\n\nexport default defineConfig({\n  plugins: {\n    pluginModuleFederation({\n      name: 'remote',\n     // other options\n    }),\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Importing WebAssembly Module in JavaScript\nDESCRIPTION: Demonstrates direct import of a .wasm module and using its exported functions.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/wasm-assets.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { add } from './add.wasm';\n\nconsole.log(add); // [native code]\nconsole.log(add(1, 2)); // 3\n```\n\n----------------------------------------\n\nTITLE: Integrating Third-Party Server Frameworks in Rsbuild\nDESCRIPTION: This configuration demonstrates how to integrate a third-party server framework (Express) as middleware in Rsbuild. It initializes an Express app and adds it to the Rsbuild server middlewares.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/server.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport express from 'express';\nimport expressMiddleware from 'my-express-middleware';\n\n// Initialize Express app\nconst app = express();\n\napp.use(expressMiddleware);\n\nexport default {\n  dev: {\n    setupMiddlewares: [\n      (middleware) => {\n        middleware.unshift(app);\n      },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Output of Rsbuild CLI Help Command\nDESCRIPTION: This snippet shows the output of the Rsbuild help command, listing all available commands and their brief descriptions.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/cli.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nUsage:\n  $ rsbuild <command> [options]\n\nCommands:\n  dev      starting the dev server\n  build    build the app for production\n  preview  preview the production build locally\n  inspect  inspect the Rspack and Rsbuild configs\n```\n\n----------------------------------------\n\nTITLE: Using onDevCompileDone Hook\nDESCRIPTION: This hook is triggered when a compilation is completed in development mode. It indicates whether it's the first compilation or a re-compilation, allowing for different handling based on compilation status.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_33\n\nLANGUAGE: typescript\nCODE:\n```\nrsbuild.onDevCompileDone(({ isFirstCompile }) => {\n  if (isFirstCompile) {\n    console.log('first compile!');\n  } else {\n    console.log('re-compile!');\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Rsdoctor Scripts in package.json\nDESCRIPTION: Defines npm scripts to run Rsbuild with Rsdoctor enabled via environment variables for both development and build modes.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/debug/rsdoctor.mdx#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"dev:rsdoctor\": \"RSDOCTOR=true rsbuild dev\",\n    \"build:rsdoctor\": \"RSDOCTOR=true rsbuild build\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Importing and Using RsbuildPlugin Type in TypeScript\nDESCRIPTION: Demonstrates how to import the RsbuildPlugin type and create a plugin with pre-execution configuration and a setup function.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/core.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { RsbuildPlugin } from '@rsbuild/core';\n\nexport default (): RsbuildPlugin => ({\n  name: 'plugin-foo',\n\n  pre: ['plugin-bar'],\n\n  setup(api) {\n    api.onAfterBuild(() => {\n      console.log('after build!');\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Server Base Path in Rsbuild\nDESCRIPTION: This snippet demonstrates how to modify the base path of the Rsbuild server using the server.base configuration option. It sets the base path to '/foo', allowing access to files through 'http://localhost:3000/foo/'.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/server.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    base: '/foo',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Declaring Types for Exposed APIs\nDESCRIPTION: This snippet illustrates how to use TypeScript generics to declare types for exposed APIs. By defining an interface `ParentAPI` and using it as a generic type in `api.useExposed`, you can ensure type safety when accessing the exposed API.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/core.mdx#2025-04-21_snippet_26\n\nLANGUAGE: typescript\nCODE:\n```\n// pluginParent.ts\nexport type ParentAPI = {\n  // ...\n};\n\n// pluginChild.ts\nimport type { ParentAPI } from './pluginParent';\n\nconst pluginChild = () => ({\n  name: 'plugin-child',\n  setup(api) {\n    const parentApi = api.useExposed<ParentAPI>(PARENT_API_ID);\n    if (parentApi) {\n      console.log(parentApi);\n    }\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Registering the React Plugin in Rsbuild Configuration (TS)\nDESCRIPTION: Registers the `@rsbuild/plugin-react` plugin in the `rsbuild.config.ts` file. This enables React support within the Rsbuild project.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-react.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginReact } from '@rsbuild/plugin-react';\n\nexport default {\n  plugins: [pluginReact()],\n};\n```\n\n----------------------------------------\n\nTITLE: Multiple Entry Points Configuration\nDESCRIPTION: Example showing how to configure multiple entry points for different pages in a Rsbuild application.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/entry.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\\n  source: {\\n    entry: {\\n      foo: './src/pages/foo/index.ts',\\n      bar: './src/pages/bar/index.ts',\\n    },\\n  },\\n};\n```\n\n----------------------------------------\n\nTITLE: Using environments Property in processAssets\nDESCRIPTION: This snippet shows how to use the `environments` property in the `ProcessAssetsDescriptor` to specify the environment. The `processAssets` handler will only be executed when the environment is `'web'`.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/core.mdx#2025-04-21_snippet_21\n\nLANGUAGE: javascript\nCODE:\n```\napi.processAssets(\n  { stage: 'additional', environments: ['web'] },\n  ({ assets }) => {\n    // ...\n  },\n);\n```\n\n----------------------------------------\n\nTITLE: Using rsbuild-plugin-tailwindcss\nDESCRIPTION: This code snippet demonstrates how to use the `rsbuild-plugin-tailwindcss` plugin to optimize CSS size. It imports the plugin and adds it to the plugins array in the Rsbuild configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/styling/tailwindcss-v3.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginTailwindCSS } from 'rsbuild-plugin-tailwindcss';\n\nexport default {\n  plugins: [pluginTailwindCSS()],\n};\n```\n\n----------------------------------------\n\nTITLE: Integrating Rsbuild Server with Express using Middleware Mode\nDESCRIPTION: This example demonstrates how to integrate the Rsbuild development server into a custom Express server by enabling middleware mode and using the createDevServer API to apply Rsbuild's middlewares to the Express app.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/middleware-mode.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRsbuild } from '@rsbuild/core';\nimport express from 'express';\n\nasync function startDevServer() {\n  // Initialize Rsbuild in middleware mode\n  const rsbuild = await createRsbuild({\n    rsbuildConfig: {\n      server: {\n        middlewareMode: true,\n      },\n    },\n  });\n\n  const app = express();\n\n  // Create Rsbuild dev server instance\n  const rsbuildServer = await rsbuild.createDevServer();\n\n  // Apply Rsbuild's built-in middlewares\n  app.use(rsbuildServer.middlewares);\n}\n```\n\n----------------------------------------\n\nTITLE: Updating NPM Scripts in package.json\nDESCRIPTION: This snippet shows how to replace Vite commands with Rsbuild commands in the npm scripts section of package.json. The purpose is to ensure that development, build, and preview commands use Rsbuild instead of Vite. Dependencies include a functional npm setup with Rsbuild installed. Key parameters are the 'scripts' entries using Rsbuild commands. Inputs and outputs are specific to npm's behavior in executing scripts.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/vite.mdx#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"dev\": \"vite\", // [!code --]\n    \"build\": \"vite build\", // [!code --]\n    \"preview\": \"vite preview\", // [!code --]\n    \"dev\": \"rsbuild dev\", // [!code ++]\n    \"build\": \"rsbuild build\", // [!code ++]\n    \"preview\": \"rsbuild preview\" // [!code ++]\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Tailwind CSS within PostCSS\nDESCRIPTION: This code snippet demonstrates how to directly pass the Tailwind CSS configuration within the `postcss.config.cjs` file, specifying the `content` option directly.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/styling/tailwindcss-v3.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nmodule.exports = {\n  plugins: {\n    tailwindcss: {\n      content: ['./src/**/*.{html,js,ts,jsx,tsx}'],\n      // ...other options\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring React Compiler with Babel Plugin\nDESCRIPTION: This code configures React Compiler with Rsbuild by registering the Babel plugin. It imports necessary modules, including `defineConfig`, `pluginBabel`, and `pluginReact`. The configuration specifies that the Babel plugin should be applied to JSX and TSX files and that `babel-plugin-react-compiler` should be added to the list of Babel plugins. This enables React Compiler to automatically optimize React code.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/framework/react.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginBabel } from '@rsbuild/plugin-babel';\nimport { pluginReact } from '@rsbuild/plugin-react';\n\nexport default defineConfig({\n  plugins: [\n    pluginReact(),\n    pluginBabel({\n      include: /\\.(?:jsx|tsx)$/,\n      babelLoaderOptions(opts) {\n        opts.plugins?.unshift('babel-plugin-react-compiler');\n      },\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Importing Assets as Raw Strings with ?raw Query (TS)\nDESCRIPTION: Shows how to import the raw content of a static asset as a string using the `?raw` query parameter. This is useful for working with files like SVG where you need the raw content directly in your JavaScript code.  Rsbuild >= 1.3.0 is required.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/static-assets.mdx#2025-04-21_snippet_12\n\nLANGUAGE: ts\nCODE:\n```\nimport rawSvg from './static/logo.svg?raw';\n\nconsole.log(rawSvg); // 输出 SVG 文件的原始内容\n```\n\n----------------------------------------\n\nTITLE: Configuring Multiple Environments for SSR in Rsbuild\nDESCRIPTION: This snippet demonstrates how to configure web and node environments for client-side and server-side rendering in Rsbuild. It shows how to set different entry points, output targets, and resolve aliases for each environment.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/environments.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  environments: {\n    // Configure the web environment for browsers\n    web: {\n      source: {\n        entry: {\n          index: './src/index.client.js',\n        },\n      },\n      output: {\n        // Use 'web' target for the browser outputs\n        target: 'web',\n      },\n      resolve: {\n        alias: {\n          '@common': './src/client/common',\n        },\n      },\n    },\n    // Configure the node environment for SSR\n    node: {\n      source: {\n        entry: {\n          index: './src/index.server.js',\n        },\n      },\n      output: {\n        // Use 'node' target for the Node.js outputs\n        target: 'node',\n      },\n      resolve: {\n        alias: {\n          '@common': './src/server/common',\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom SSR Server with Express\nDESCRIPTION: Custom server implementation for SSR using Express and Rsbuild's environment API.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/ssr.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport express from 'express';\nimport { createRsbuild, loadConfig } from '@rsbuild/core';\n\n// Implement SSR rendering function\nconst serverRender = (serverAPI) => async (_req, res) => {\n  // Load Node bundle for SSR\n  const indexModule = await serverAPI.environments.node.loadBundle('index');\n\n  const markup = indexModule.render();\n\n  const template = await serverAPI.environments.web.getTransformedHtml('index');\n\n  // Insert SSR rendering content into HTML template\n  const html = template.replace('<!--app-content-->', markup);\n\n  res.writeHead(200, {\n    'Content-Type': 'text/html',\n  });\n  res.end(html);\n};\n\n// Custom server\nasync function startDevServer() {\n  const { content } = await loadConfig();\n  const rsbuild = await createRsbuild({\n    rsbuildConfig: content,\n  });\n\n  const app = express();\n\n  const rsbuildServer = await rsbuild.createDevServer();\n\n  const serverRenderMiddleware = serverRender(rsbuildServer);\n\n  // SSR rendering when accessing /index.html\n  app.get('/', async (req, res, next) => {\n    try {\n      await serverRenderMiddleware(req, res, next);\n    } catch (err) {\n      logger.error('SSR render error, downgrade to CSR...\\n', err);\n      next();\n    }\n  });\n\n  app.use(rsbuildServer.middlewares);\n\n  const httpServer = app.listen(rsbuildServer.port, async () => {\n    await rsbuildServer.afterListen();\n  });\n\n  rsbuildServer.connectWebSocket({ server: httpServer });\n}\n\nstartDevServer(process.cwd());\n```\n\n----------------------------------------\n\nTITLE: Extending import.meta.env Type Declarations in Rsbuild\nDESCRIPTION: TypeScript declaration file example demonstrating how to extend the ImportMetaEnv interface to provide type support for environment variables accessed via import.meta.env.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/env-vars.mdx#2025-04-21_snippet_22\n\nLANGUAGE: ts\nCODE:\n```\ninterface ImportMetaEnv {\n  // import.meta.env.PUBLIC_FOO\n  readonly PUBLIC_FOO: string;\n}\n\ninterface ImportMeta {\n  readonly env: ImportMetaEnv;\n}\n```\n\n----------------------------------------\n\nTITLE: Updating npm scripts in package.json\nDESCRIPTION: This snippet demonstrates how to update the npm scripts in the `package.json` file to use Rsbuild CLI commands instead of Vue CLI commands for serving, building, and previewing the application. It replaces `vue-cli-service serve` and `vue-cli-service build` with `rsbuild dev`, `rsbuild build`, and `rsbuild preview`, respectively.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/migration/vue-cli.mdx#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"serve\": \"vue-cli-service serve\", // [!code --]\n    \"build\": \"vue-cli-service build\", // [!code --]\n    \"serve\": \"rsbuild dev\", // [!code ++]\n    \"build\": \"rsbuild build\", // [!code ++]\n    \"preview\": \"rsbuild preview\" // [!code ++]\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Advanced React Compiler Configuration with Options\nDESCRIPTION: Extended configuration for React Compiler that demonstrates how to pass custom options to the Babel plugin. This setup allows for more fine-grained control over the compiler's behavior.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/framework/react.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginBabel } from '@rsbuild/plugin-babel';\nimport { pluginReact } from '@rsbuild/plugin-react';\n\nconst ReactCompilerConfig = {\n  /* ... */\n};\n\nexport default defineConfig({\n  plugins: [\n    pluginReact(),\n    pluginBabel({\n      include: /\\.(?:jsx|tsx)$/,\n      babelLoaderOptions(opts) {\n        opts.plugins?.unshift([\n          'babel-plugin-react-compiler',\n          ReactCompilerConfig,\n        ]);\n      },\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring vanilla-extract with Rsbuild\nDESCRIPTION: This code configures Rsbuild to use vanilla-extract for CSS-in-JS. It imports the `VanillaExtractPlugin` from `@vanilla-extract/webpack-plugin` and adds it to the Rspack plugins. It also configures the `pluginReact` to exclude `.css.ts` files from React Refresh, preventing issues with vanilla-extract's CSS Modules. This setup enables the use of vanilla-extract for type-safe CSS.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/framework/react.mdx#2025-04-21_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginReact } from '@rsbuild/plugin-react';\nimport { VanillaExtractPlugin } from '@vanilla-extract/webpack-plugin';\n\nexport default defineConfig({\n  plugins: [\n    pluginReact({\n      reactRefreshOptions: {\n        exclude: [/\\.css\\.ts$/],\n      },\n    }),\n  ],\n  tools: {\n    rspack: {\n      plugins: [new VanillaExtractPlugin()],\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Integrating React Plugin in Rsbuild Configuration\nDESCRIPTION: This code snippet shows how to integrate the Rsbuild React plugin into the `rsbuild.config.ts` file.  It imports the `pluginReact` function from `@rsbuild/plugin-react` and adds it to the plugins array in the Rsbuild configuration, enabling React-specific features and optimizations.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/webpack.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginReact } from '@rsbuild/plugin-react'; // [!code highlight]\n\nexport default defineConfig({\n  plugins: [pluginReact()], // [!code highlight]\n});\n```\n\n----------------------------------------\n\nTITLE: Registering the Sass plugin in rsbuild.config.ts\nDESCRIPTION: This code snippet demonstrates how to register the `@rsbuild/plugin-sass` plugin within the `rsbuild.config.ts` file.  The plugin is imported and then included in the `plugins` array of the configuration object. This enables Sass processing for your project.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/list/plugin-sass.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginSass } from '@rsbuild/plugin-sass';\n\nexport default {\n  plugins: [pluginSass()],\n};\n\n```\n\n----------------------------------------\n\nTITLE: Inserting a Loader After SWC Loader\nDESCRIPTION: This snippet shows how to insert a custom loader after the built-in SWC loader in the execution chain.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/configuration/rspack.mdx#2025-04-21_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    bundlerChain: (chain, { CHAIN_ID }) => {\n      chain.module\n        .rule(CHAIN_ID.RULE.JS)\n        .use('my-loader')\n        .after(CHAIN_ID.USE.SWC)\n        // The package name or module path of the loader\n        .loader('my-loader')\n        .options({\n          // some options\n        });\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Exporting Types in TypeScript\nDESCRIPTION: This TypeScript snippet demonstrates the correct syntax for exporting types from a module using \"export type\", as opposed to the incorrect method which can cause issues with non-native TypeScript compilers.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/typescript.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n// Wrong\nexport { SomeType } from './types';\n\n// Correct\nexport type { SomeType } from './types';\n```\n\n----------------------------------------\n\nTITLE: Customizing Chunk Splitting in Rsbuild\nDESCRIPTION: Configuration example for custom chunk splitting in Rsbuild, which demonstrates how to split a specific library (axios) into its own chunk for better caching.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/optimization/optimize-bundle.mdx#2025-04-21_snippet_8\n\nLANGUAGE: js\nCODE:\n```\nexport default {\n  performance: {\n    chunkSplit: {\n      strategy: 'split-by-experience',\n      forceSplitting: {\n        axios: /node_modules[\\\\/]axios/,\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Build Scripts in package.json\nDESCRIPTION: Defines npm scripts for building and previewing the Rsbuild application in production mode.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/static-deploy.mdx#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"build\": \"rsbuild build\",\n    \"preview\": \"rsbuild preview\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating an Rsbuild Instance in TypeScript\nDESCRIPTION: Creates an Rsbuild instance using the createRsbuild method from the @rsbuild/core package. This is the first step needed to access Rsbuild's JavaScript API functionality.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/start/index.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRsbuild } from '@rsbuild/core';\n\nconst rsbuild = await createRsbuild();\n```\n\n----------------------------------------\n\nTITLE: Accessing Rspack API from @rsbuild/core\nDESCRIPTION: This example shows how to access Rspack API directly from @rsbuild/core without installing @rspack/core separately, using the BannerPlugin as an example.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/configuration/rspack.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { rspack } from '@rsbuild/core';\n\nexport default {\n  tools: {\n    rspack: {\n      plugins: [\n        new rspack.BannerPlugin({\n          // ...\n        }),\n      ],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: YAML Plugin Configuration and Usage\nDESCRIPTION: Setup for YAML plugin in Rsbuild configuration and example usage of YAML imports.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/json-files.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginYaml } from '@rsbuild/plugin-yaml';\n\nexport default {\n  plugins: [pluginYaml()],\n};\n```\n\nLANGUAGE: yaml\nCODE:\n```\n---\nhello: world\nfoo:\n  bar: baz\n```\n\nLANGUAGE: javascript\nCODE:\n```\nimport example from './example.yaml';\n\nconsole.log(example.hello); // 'world';\nconsole.log(example.foo); // { bar: 'baz' };\n```\n\n----------------------------------------\n\nTITLE: Updating npm scripts in package.json\nDESCRIPTION: Replace Webpack CLI commands with Rsbuild CLI commands in the package.json file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/migration/webpack.mdx#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"serve\": \"webpack serve -c webpack.config.js\", // [!code --]\n    \"build\": \"webpack build -c webpack.config.js\", // [!code --]\n    \"dev\": \"rsbuild dev\", // [!code ++]\n    \"build\": \"rsbuild build\" // [!code ++]\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Entry Points in Rsbuild\nDESCRIPTION: This snippet shows how to set up multiple entry points for a Rsbuild project. It defines two entry points: 'index' and 'foo', which correspond to different source files.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/server.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  source: {\n    entry: {\n      index: './src/index.ts',\n      foo: './src/pages/foo/index.ts',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Integrating Rspack Plugins into Rsbuild\nDESCRIPTION: Example showing how to use Rspack plugins within Rsbuild by registering them through the modifyRspackConfig hook.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/index.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst rsbuildPlugin = () => ({\n  name: 'example',\n  setup(api) {\n    api.modifyRspackConfig((config) => {\n      config.plugins?.push(new RspackExamplePlugin());\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Multi-Environment Builds in Rsbuild\nDESCRIPTION: Example of configuring Rsbuild for 'web' (client) and 'node' (SSR) environments, demonstrating how to set up shared and environment-specific configurations.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/environments.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  // Shared configuration for all environments\n  resolve: {\n    alias: {\n      '@common': './src/common',\n    },\n  },\n  environments: {\n    // configuration for client\n    web: {\n      source: {\n        entry: {\n          index: './src/index.client.js',\n        },\n      },\n      output: {\n        target: 'web',\n      },\n      resolve: {\n        alias: {\n          '@common1': './src/web/common1',\n        },\n      },\n    },\n    // configuration for SSR\n    node: {\n      source: {\n        entry: {\n          index: './src/index.server.js',\n        },\n      },\n      output: {\n        target: 'node',\n      },\n      resolve: {\n        alias: {\n          '@common1': './src/ssr/common1',\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Function-based Configuration\nDESCRIPTION: Example of exporting a function in the config file to dynamically compute configuration based on environment and command.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/configuration/rsbuild.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\n\nexport default defineConfig(({ env, command, envMode }) => ({\n  resolve: {\n    alias: {\n      '@foo': env === 'development' ? './src/foo.dev.ts' : './src/foo.prod.ts',\n    },\n  },\n}));\n```\n\n----------------------------------------\n\nTITLE: Plugin Hook Callback Order Example in TypeScript\nDESCRIPTION: Demonstrates the default execution order of plugin hooks when multiple plugins register the same hook. The callbacks execute in registration order.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/hooks.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst plugin1 = () => ({\n  setup(api) {\n    api.modifyRsbuildConfig(() => console.log('1'));\n  },\n});\n\nconst plugin2 = () => ({\n  setup(api) {\n    api.modifyRsbuildConfig(() => console.log('2'));\n  },\n});\n\nrsbuild.addPlugins([plugin1, plugin2]);\n```\n\n----------------------------------------\n\nTITLE: Setting Default CSS Extraction Options in JavaScript\nDESCRIPTION: This snippet shows the default configuration for CSS extraction in Rsbuild. It includes default plugin options for ignoring order, setting filename patterns for CSS output, and an empty object for loader options.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/css-extract.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultOptions = {\n  pluginOptions: {\n    ignoreOrder: true,\n    // The default value is determined by the output.distPath and output.filename options of Rsbuild\n    filename: 'static/css/[name].css',\n    chunkFilename: 'static/css/async/[name].css',\n  },\n  loaderOptions: {},\n};\n```\n\n----------------------------------------\n\nTITLE: Using Dynamic Import for Code Splitting in Javascript\nDESCRIPTION: This code snippet demonstrates how to use dynamic import in JavaScript to split a large module into a separate chunk.  The `import()` syntax is used to load `bigModule.ts` on-demand, which will be automatically split into a new chunk by the bundler.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/optimization/code-splitting.mdx#2025-04-21_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\n// Somewhere in your code where you need to use bigModule\nimport('./bigModule.ts').then((bigModule) => {\n  // Use bigModule here\n});\n\n```\n\n----------------------------------------\n\nTITLE: Registering React Plugin in Rsbuild Configuration\nDESCRIPTION: Code example showing how to register the React plugin in Rsbuild configuration to compile JSX syntax. This snippet defines a basic configuration that enables React support in an existing project.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/framework/react.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginReact } from '@rsbuild/plugin-react';\n\nexport default defineConfig({\n  plugins: [pluginReact()],\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing a Basic Web Worker in JavaScript\nDESCRIPTION: This snippet demonstrates how to create a simple Web Worker that receives a message, doubles the value, and sends it back to the main thread.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/web-workers.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nself.onmessage = (event) => {\n  const result = event.data * 2;\n  self.postMessage(result);\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling CSS Source Maps in Rsbuild Configuration\nDESCRIPTION: This example demonstrates how to enable source map generation for CSS files in Rsbuild configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/source-map.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    sourceMap: {\n      css: true,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Starting Rsbuild Dev Server\nDESCRIPTION: This command starts the Rsbuild development server. It can be used with additional options like --open to automatically open the page in a browser.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/cli.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nnpx rsbuild\n```\n\n----------------------------------------\n\nTITLE: Using onBeforeCreateCompiler in a Rsbuild Plugin\nDESCRIPTION: Example of creating a plugin that uses the onBeforeCreateCompiler hook to log bundler configurations before the compiler is created.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/hooks.mdx#2025-04-21_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onBeforeCreateCompiler(({ bundlerConfigs }) => {\n      console.log('the bundler config is ', bundlerConfigs);\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Custom Group with forceSplitting in Rsbuild\nDESCRIPTION: This code snippet shows how to use the `forceSplitting` option in Rsbuild to create a custom chunk splitting rule. In this case, the `axios` library is split into a separate chunk named `axios.js`. The split chunks will be injected into the HTML.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/optimization/code-splitting.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  performance: {\n    chunkSplit: {\n      forceSplitting: {\n        axios: /node_modules[\\\\/]axios/,\n      },\n    },\n  },\n};\n\n```\n\n----------------------------------------\n\nTITLE: Referencing Rsbuild's predefined types for static assets (TS)\nDESCRIPTION: Shows how to reference Rsbuild's predefined types by adding the following code to `src/env.d.ts`.  This utilizes the types provided by the `@rsbuild/core` package to provide accurate typings for imported static assets, avoiding the need to manually define them.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/static-assets.mdx#2025-04-21_snippet_17\n\nLANGUAGE: ts\nCODE:\n```\n/// <reference types=\"@rsbuild/core/types\" />\n```\n\n----------------------------------------\n\nTITLE: Referencing Preset Types in TypeScript\nDESCRIPTION: Illustrates how to reference preset type definitions provided by `@rsbuild/core` in a TypeScript project by using a reference path directive in a .d.ts file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/typescript.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n/// <reference types=\"@rsbuild/core/types\" />\n```\n\n----------------------------------------\n\nTITLE: Updating npm scripts for Rsbuild\nDESCRIPTION: Replace Builder CLI commands with Rsbuild CLI commands in package.json scripts section\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/modern-builder.mdx#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"dev\": \"builder dev\", // [!code --]\n    \"build\": \"builder build\", // [!code --]\n    \"serve\": \"builder serve\", // [!code --]\n    \"dev\": \"rsbuild dev\", // [!code ++]\n    \"build\": \"rsbuild build\", // [!code ++]\n    \"preview\": \"rsbuild preview\" // [!code ++]\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom Environment Variable Prefixes in Rsbuild\nDESCRIPTION: TypeScript configuration example demonstrating how to use the loadEnv method to inject environment variables with custom prefixes (like REACT_APP_) for compatibility with other frameworks.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/env-vars.mdx#2025-04-21_snippet_18\n\nLANGUAGE: ts\nCODE:\n```\nimport { defineConfig, loadEnv } from '@rsbuild/core';\n\nconst { publicVars } = loadEnv({ prefixes: ['REACT_APP_'] });\n\nexport default defineConfig({\n  source: {\n    define: publicVars,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Module Federation v1.5 in Rsbuild\nDESCRIPTION: This snippet shows how to configure Module Federation v1.5 in a Rsbuild project using the built-in moduleFederation.options. It demonstrates setting the name and mentions that other options can be added.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/module-federation.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  moduleFederation: {\n    options: {\n      name: 'remote',\n      // other options\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring resolve.alias with Object\nDESCRIPTION: Example of configuring path aliases using the resolve.alias object syntax in Rsbuild\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/alias.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  resolve: {\n    alias: {\n      '@common': './src/common',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Bypass Function in Proxy Configuration\nDESCRIPTION: Example of using the bypass function to conditionally proxy requests. HTML requests are served from '/index.html' while API requests are proxied to the target server.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/proxy.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    proxy: {\n      '/api': {\n        target: 'http://localhost:3000',\n        bypass(req, res, proxyOptions) {\n          if (req.headers.accept.indexOf('html') !== -1) {\n            console.log('Skipping proxy for browser request.');\n            return '/index.html';\n          }\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Nonce in Rsbuild JavaScript Config\nDESCRIPTION: This example shows how to set the nonce value in the Rsbuild configuration file. It demonstrates setting a placeholder value that can be replaced by a random value on the server side.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/security/nonce.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  security: {\n    nonce: 'CSP_NONCE_PLACEHOLDER',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Prepending Rspack Plugins in Rsbuild\nDESCRIPTION: This snippet shows how to prepend custom Rspack plugins to the configuration using the prependPlugins utility function.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/rspack.mdx#2025-04-21_snippet_14\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: (config, { prependPlugins }) => {\n      // add a single plugin\n      prependPlugins(new PluginA());\n\n      // Add multiple plugins\n      prependPlugins([new PluginA(), new PluginB()]);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring for Web Worker Builds\nDESCRIPTION: Example of using the isWebWorker utility to apply specific configurations for web worker builds.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/bundler-chain.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    bundlerChain: (chain, { isWebWorker }) => {\n      if (isWebWorker) {\n        // ...\n      }\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Demonstrating API Absence in Older Engines (JavaScript)\nDESCRIPTION: This snippet demonstrates calling a non-existent method on a string, which would cause a runtime error. It illustrates why API polyfills are necessary for browser compatibility.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/browser-compatibility.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nvar str = 'Hello world!';\nconsole.log(str.notExistedMethod());\n```\n\n----------------------------------------\n\nTITLE: Updating Environment Config in Rsbuild Plugin\nDESCRIPTION: This snippet demonstrates how to modify or add environment configurations using the modifyRsbuildConfig hook in a Rsbuild plugin. It shows adding a new 'web1' environment with a specific entry point.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/environments.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.modifyRsbuildConfig((config, { mergeRsbuildConfig }) => {\n      return mergeRsbuildConfig(config, {\n        environments: {\n          web1: {\n            source: {\n              entry: {\n                index: './src/web1/index',\n              },\n            },\n          },\n        },\n      });\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Static Assets Directory Configuration\nDESCRIPTION: Configuration to organize static assets (images, SVG, fonts, media) into a single assets directory.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/output-files.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    distPath: {\n      image: 'assets',\n      svg: 'assets',\n      font: 'assets',\n      media: 'assets',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Generating Accurate Type Declarations for CSS Modules - TypeScript\nDESCRIPTION: Explains how to register the @rsbuild/plugin-typed-css-modules plugin to generate accurate TypeScript declarations for CSS Modules, allowing for better type support in TypeScript projects.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/styling/css-modules.mdx#2025-04-21_snippet_6\n\nLANGUAGE: ts\nCODE:\n```\nimport { pluginTypedCSSModules } from '@rsbuild/plugin-typed-css-modules';\n\nexport default {\n  plugins: [pluginTypedCSSModules()],\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Default Chunk Splitting Strategy in JavaScript\nDESCRIPTION: This example shows how to set the default chunk splitting strategy to 'all-in-one' using the performance.chunkSplit configuration in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/chunk-split.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  performance: {\n    chunkSplit: {\n      strategy: 'all-in-one',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Modifying SWC Loader Options\nDESCRIPTION: This snippet shows how to access and modify the options of the built-in SWC loader using CHAIN_ID.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/configuration/rspack.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    bundlerChain: (chain, { CHAIN_ID }) => {\n      chain.module\n        .rule(CHAIN_ID.RULE.JS)\n        .use(CHAIN_ID.USE.SWC)\n        .tap((options) => {\n          console.log(options);\n          return options;\n        });\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Transpiled Code for Older Engines (JavaScript)\nDESCRIPTION: This snippet shows the transpiled version of the previous code, which is compatible with older JavaScript engines. It replaces the optional chaining operator with a more verbose but widely supported syntax.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/browser-compatibility.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nvar foo = {};\nfoo === null || foo === void 0 ? void 0 : foo.bar();\n```\n\n----------------------------------------\n\nTITLE: Defining Environment Variables in .env File for Rsbuild\nDESCRIPTION: Sample .env file demonstrating the format for declaring environment variables in Rsbuild. Variables prefixed with PUBLIC_ will be accessible in client code.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/env-vars.mdx#2025-04-21_snippet_15\n\nLANGUAGE: bash\nCODE:\n```\nPUBLIC_NAME=jack\nPASSWOARD=123\n```\n\n----------------------------------------\n\nTITLE: Including All Files in Manifest (TypeScript)\nDESCRIPTION: Configuration example to include all files in the manifest by setting the filter function to always return true.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/manifest.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    manifest: {\n      filter: () => true,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: PostCSS Configuration with a Configuration File\nDESCRIPTION: This code snippet shows how to configure PostCSS using a `postcss.config.cjs` file. It configures the `postcss-px-to-viewport` plugin to convert pixels to viewport units.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/styling/css-usage.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nmodule.exports = {\n  'postcss-px-to-viewport': {\n    viewportWidth: 375,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Rsbuild for Vue 3 Projects\nDESCRIPTION: This snippet demonstrates how to set up Rsbuild configuration for Vue 3 projects. It imports the necessary modules and registers the Vue plugin to enable Single File Component (SFC) compilation.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/framework/vue.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginVue } from '@rsbuild/plugin-vue';\n\nexport default defineConfig({\n  plugins: [pluginVue()],\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Rsbuild for Vue Project\nDESCRIPTION: Create a Rsbuild configuration file with Vue plugin and specify the entry point for the application\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/vue-cli.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginVue } from '@rsbuild/plugin-vue';\n\nexport default defineConfig({\n  plugins: [pluginVue()],\n  source: {\n    entry: {\n      index: './src/main.js',\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using onAfterCreateCompiler Hook\nDESCRIPTION: This hook is triggered after the Rspack compiler is created. It provides access to the created compiler instance, allowing for direct compiler customization.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_24\n\nLANGUAGE: typescript\nCODE:\n```\nrsbuild.onAfterCreateCompiler(({ compiler }) => {\n  console.log('the compiler is ', compiler);\n});\n```\n\n----------------------------------------\n\nTITLE: Integrating Rsbuild Server with Express using Middleware Mode\nDESCRIPTION: Demonstrates how to initialize Rsbuild in middleware mode and integrate it with an Express server. The example shows setting up Rsbuild with middleware mode enabled and using its middlewares in an Express application.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/server/middleware-mode.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRsbuild } from '@rsbuild/core';\nimport express from 'express';\n\nasync function startDevServer() {\n  // 以 middleware mode 初始化 Rsbuild\n  const rsbuild = await createRsbuild({\n    rsbuildConfig: {\n      server: {\n        middlewareMode: true,\n      },\n    },\n  });\n\n  const app = express();\n\n  // 创建 Rsbuild dev server 实例\n  const rsbuildServer = await rsbuild.createDevServer();\n\n  // 使用 Rsbuild 的内置中间件\n  app.use(rsbuildServer.middlewares);\n}\n```\n\n----------------------------------------\n\nTITLE: Registering Middleware Before Default Middlewares in Rsbuild Dev Server (TypeScript)\nDESCRIPTION: Example of using onBeforeStartDevServer hook to register custom middleware that will run before the default middlewares in Rsbuild's development server.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/hooks.mdx#2025-04-21_snippet_21\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onBeforeStartDevServer(({ server }) => {\n      server.middlewares.use((req, res, next) => {\n        next();\n      });\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Appending Rspack Plugins in Rsbuild\nDESCRIPTION: This example demonstrates how to append custom Rspack plugins to the end of the configuration using the appendPlugins utility function.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/rspack.mdx#2025-04-21_snippet_15\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: (config, { appendPlugins }) => {\n      // add a single plugin\n      appendPlugins([new PluginA()]);\n\n      // Add multiple plugins\n      appendPlugins([new PluginA(), new PluginB()]);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling Basic Lazy Compilation in Rsbuild\nDESCRIPTION: Simple configuration to enable lazy compilation with default settings in Rsbuild config file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/lazy-compilation.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    lazyCompilation: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using Self-Signed Certificate Plugin for Rsbuild\nDESCRIPTION: Example of how to use the @rsbuild/plugin-basic-ssl plugin to automatically create a self-signed certificate and configure HTTPS server in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/https.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginBasicSsl } from '@rsbuild/plugin-basic-ssl';\n\nexport default {\n  plugins: [pluginBasicSsl()],\n};\n```\n\n----------------------------------------\n\nTITLE: Sample File Size Output in Rsbuild\nDESCRIPTION: This code block shows an example of the default file size output after a production build in Rsbuild, displaying individual file sizes and the total size.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/print-file-size.mdx#2025-04-21_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\n  File (web)                              Size        Gzip\n  dist/static/js/lib-react.b0714b60.js    140.4 kB    45.0 kB\n  dist/static/js/index.f3fde9c7.js        1.9 kB      0.97 kB\n  dist/index.html                         0.39 kB     0.25 kB\n  dist/static/css/index.2960ac62.css      0.35 kB     0.26 kB\n\n  Total: 143.0 kB (gzip: 46.3 kB)\n```\n\n----------------------------------------\n\nTITLE: Conditional Rendering Based on Language Environment Variable in JavaScript\nDESCRIPTION: This JavaScript snippet showcases how to render different components based on the value of an environment variable. It exemplifies how tree shaking optimizations can remove unnecessary code during the build process.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_34\n\nLANGUAGE: JavaScript\nCODE:\n```\nconst App = () => {\n  if (import.meta.env.LANGUAGE === 'en') {\n    return <EntryFoo />;\n  } else if (import.meta.env.LANGUAGE === 'zh') {\n    return <EntryBar />;\n  }\n};\n```\n\n----------------------------------------\n\nTITLE: Injecting Custom Tags in Rsbuild Config (TypeScript)\nDESCRIPTION: This snippet shows how to inject custom tags into the HTML using the html.tags config in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/html-template.mdx#2025-04-21_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  html: {\n    tags: [\n      { tag: 'script', attrs: { src: 'https://cdn.example.com/my-script.js' } },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using Regular Expression for CORS Origin in Rsbuild Config\nDESCRIPTION: This example demonstrates how to use a regular expression to allow all matching origins in the CORS configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/cors.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    cors: {\n      origin: /\\.example\\.com$/,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Allowing Additional CSS Files as CSS Modules - TypeScript\nDESCRIPTION: This code snippet shows how to customize the Rsbuild configuration to recognize additional CSS files as CSS Modules, specifically files that contain '.module.' in their names or are located within a 'shared' directory.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/styling/css-modules.mdx#2025-04-21_snippet_3\n\nLANGUAGE: ts\nCODE:\n```\nexport default {\n  output: {\n    cssModules: {\n      auto: (resource) => {\n        return resource.includes('.module.') || resource.includes('shared/');\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Rspack Rules in Rsbuild\nDESCRIPTION: This snippet demonstrates how to add custom Rspack rules to the configuration using the addRules utility function.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/rspack.mdx#2025-04-21_snippet_12\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: (config, { addRules }) => {\n      // add a single rule\n      addRules({\n        test: /\\.foo/,\n        loader: require.resolve('foo-loader'),\n      });\n\n      // Add multiple rules as an array\n      addRules([\n        {\n          test: /\\.foo/,\n          loader: require.resolve('foo-loader'),\n        },\n        {\n          test: /\\.bar/,\n          loader: require.resolve('bar-loader'),\n        },\n      ]);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting CSS Modules Export Convention in Rsbuild\nDESCRIPTION: Configures the style of exported class names in CSS Modules to use camelCaseOnly format, which camelizes class names without exporting the original class names.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/css-modules.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    cssModules: {\n      exportLocalsConvention: 'camelCaseOnly',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Cross-Platform Bundle Analysis Script with cross-env\nDESCRIPTION: Demonstrates how to use cross-env package to enable bundle analysis in a cross-platform compatible way. This ensures the environment variable works correctly on Windows and other operating systems.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/performance/bundle-analyze.mdx#2025-04-21_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"build:analyze\": \"cross-env BUNDLE_ANALYZE=true rsbuild build\"\n  },\n  \"devDependencies\": {\n    \"cross-env\": \"^7.0.0\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Environment-Specific Browserslist in Rsbuild\nDESCRIPTION: This snippet shows how to configure different browserslist settings for multiple environments (web and node) in Rsbuild. It demonstrates setting separate targets and browser compatibility for each environment.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/override-browserslist.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  environments: {\n    web: {\n      output: {\n        target: 'web',\n        overrideBrowserslist: ['iOS >= 9', 'Android >= 4.4'],\n      },\n    },\n    node: {\n      output: {\n        target: 'node',\n        overrideBrowserslist: ['node >= 20'],\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Preconnect Configuration with Object Syntax\nDESCRIPTION: Example showing how to configure preconnect using the object syntax with href property.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/preconnect.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  performance: {\n    // Equivalent to `preconnect: ['https://example.com/'],`\n    preconnect: [\n      {\n        href: 'https://example.com/',\n      },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: PostCSS Configuration using tools.postcss\nDESCRIPTION: This code snippet shows how to configure PostCSS within the Rsbuild configuration file using the `tools.postcss` option.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/styling/css-usage.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    postcss: (opts) => {\n      const viewportPlugin = require('postcss-px-to-viewport')({\n        viewportWidth: 375,\n      });\n      opts.postcssOptions.plugins.push(viewportPlugin);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Loading Environment Variables Manually (TypeScript)\nDESCRIPTION: This TypeScript snippet shows how to manually load environment variables using the `loadEnv` function from `@rsbuild/core`.  It merges those variables into the Rsbuild configuration using `source.define`. This is necessary when not using the Rsbuild CLI.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_21\n\nLANGUAGE: typescript\nCODE:\n```\nimport { loadEnv, mergeRsbuildConfig } from '@rsbuild/core';\n\n// 默认情况下，`publicVars` 是以 `PUBLIC_` 为前缀的变量\nconst { parsed, publicVars } = loadEnv();\n\nconst mergedConfig = mergeRsbuildConfig(\n  {\n    source: {\n      define: publicVars,\n    },\n  },\n  userConfig,\n);\n```\n\n----------------------------------------\n\nTITLE: Adding Environment-Specific Plugins in Rsbuild\nDESCRIPTION: This snippet shows how to add plugins for specific environments in Rsbuild. It demonstrates enabling the React plugin only for the web environment while configuring a separate node environment.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/environments.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginReact } from '@rsbuild/plugin-react';\n\nexport default {\n  environments: {\n    web: {\n      output: {\n        target: 'web',\n      },\n      plugins: [pluginReact()],\n    },\n    node: {\n      output: {\n        target: 'node',\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining ResolveHandler Type in Rsbuild\nDESCRIPTION: This snippet defines the `ResolveHandler` type used in the `api.resolve` method. It shows the structure of the context object passed to the handler, which includes `resolveData`, `compiler`, `compilation`, and `environment` properties, allowing plugins to access module request information, the Rspack compiler and compilation objects, and the environment context.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/core.mdx#2025-04-21_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\ntype ResolveHandler = (context: {\n  resolveData: Rspack.ResolveData;\n  compiler: Rspack.Compiler;\n  compilation: Rspack.Compilation;\n  environment: EnvironmentContext;\n}) => Promise<void> | void;\n```\n\n----------------------------------------\n\nTITLE: Using onBeforeStartDevServer Hook\nDESCRIPTION: This hook is triggered before the development server starts. It provides access to the server instance and environment contexts, enabling server customization.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_28\n\nLANGUAGE: typescript\nCODE:\n```\nrsbuild.onBeforeStartDevServer(({ server, environments }) => {\n  console.log('before starting dev server.');\n  console.log('the server is ', server);\n  console.log('the environments contexts are: ', environments);\n});\n```\n\n----------------------------------------\n\nTITLE: Proxy Configuration with Online Domain in Rsbuild\nDESCRIPTION: Example showing how to proxy requests to an online domain rather than a local server. Requests to the '/api' path are forwarded to nodejs.org while preserving the original path.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/proxy.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  server: {\n    proxy: {\n      // http://localhost:3000/api -> https://nodejs.org/api\n      // http://localhost:3000/api/foo -> https://nodejs.org/api/foo\n      '/api': 'https://nodejs.org',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: GitHub Actions Workflow Configuration\nDESCRIPTION: GitHub Actions workflow configuration for automated deployment to GitHub Pages.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/static-deploy.mdx#2025-04-21_snippet_6\n\nLANGUAGE: yaml\nCODE:\n```\n# Sample workflow for building and deploying a Rsbuild site to GitHub Pages\nname: Rsbuild Deployment\n\non:\n  # Runs on pushes targeting the default branch\n  push:\n    branches: ['main']\n  # Allows you to run this workflow manually from the actions tab\n  workflow_dispatch:\n\n# Sets permissions of the GITHUB_TOKEN to allow deployment to GitHub Pages\npermissions:\n  contents: read\n  pages: write\n  id-token: write\n\n# Allow only one concurrent deployment\nconcurrency:\n  group: 'pages'\n  cancel-in-progress: false\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v4\n\n      - name: Use Node.js\n        uses: actions/setup-node@v4\n        with:\n          node-version: 22\n\n      # If you use other package managers like yarn or pnpm,\n      # you will need to install them first\n      - name: Install dependencies\n        run: npm i\n\n      - name: Build\n        run: npm run build\n\n      - name: Setup Pages\n        uses: actions/configure-pages@v5\n\n      - name: Upload artifact\n        uses: actions/upload-pages-artifact@v3\n        with:\n          path: './dist'\n\n      - name: Deploy to GitHub Pages\n        id: deployment\n        uses: actions/deploy-pages@v4\n```\n\n----------------------------------------\n\nTITLE: Setting App Icon in Rsbuild Config (TypeScript)\nDESCRIPTION: This snippet shows how to set web application icons for mobile devices using the html.appIcon config in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/html-template.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  html: {\n    appIcon: {\n      name: 'My Website',\n      icons: [\n        { src: './src/assets/logo-192.png', size: 192 },\n        { src: './src/assets/logo-512.png', size: 512 },\n      ],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Minimal Source Map Format in Development Mode\nDESCRIPTION: Configuration to use the lightweight 'eval' source map format in development mode while disabling source maps in production for better performance.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/optimization/build-performance.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    sourceMap: {\n      js: process.env.NODE_ENV === 'development' ? 'eval' : false,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using tools.rspack for Webpack config migration\nDESCRIPTION: Demonstrates how to use the `tools.rspack` option in `rsbuild.config.ts` to migrate webpack configurations. This is useful when direct equivalents exist between Webpack and Rspack configurations.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/webpack.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: {\n      plugins: [new SomeWebpackPlugin()],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Internationalization with Tree Shaking in Rsbuild\nDESCRIPTION: JavaScript example demonstrating how to use environment variables for conditional rendering based on language, which can be optimized via tree shaking during build time.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/env-vars.mdx#2025-04-21_snippet_25\n\nLANGUAGE: js\nCODE:\n```\nconst App = () => {\n  if (import.meta.env.LANGUAGE === 'en') {\n    return <EntryFoo />;\n  } else if (import.meta.env.LANGUAGE === 'zh') {\n    return <EntryBar />;\n  }\n};\n```\n\n----------------------------------------\n\nTITLE: Integrating Lightning CSS Plugin in Rsbuild\nDESCRIPTION: Shows how to register the Lightning CSS plugin in Rsbuild configuration. This allows users to replace built-in PostCSS, autoprefixer, and SWC CSS minimizer with Lightning CSS for better performance.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-5.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginLightningcss } from '@rsbuild/plugin-lightningcss';\n\nexport default {\n  plugins: [pluginLightningcss()],\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Local Plugins in Rsbuild\nDESCRIPTION: Example of importing and using local plugins in Rsbuild configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/plugins.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginCustom } from './plugins/pluginCustom';\n\nexport default defineConfig({\n  plugins: [pluginCustom()],\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring split-by-experience strategy in Rsbuild\nDESCRIPTION: This code snippet demonstrates how to configure the `split-by-experience` strategy in Rsbuild's `performance.chunkSplit` configuration. This strategy automatically splits commonly used npm packages into separate chunks based on predefined rules. It's the default strategy in Rsbuild and helps with browser caching.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/optimization/code-splitting.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  performance: {\n    chunkSplit: {\n      strategy: 'split-by-experience',\n    },\n  },\n};\n\n```\n\n----------------------------------------\n\nTITLE: Updating Existing Assets with api.processAssets\nDESCRIPTION: Demonstrates how to update an existing asset's content using the `api.processAssets` API. This example appends a console log statement to the `foo.js` asset during the `additions` stage.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/core.mdx#2025-04-21_snippet_15\n\nLANGUAGE: javascript\nCODE:\n```\napi.processAssets(\n  { stage: 'additions' },\n  ({ assets, sources, compilation }) => {\n    const asset = assets['foo.js'];\n    if (!asset) {\n      return;\n    }\n\n    const oldContent = asset.source();\n    const newContent = oldContent + '\\nconsole.log(\"hello world!\")';\n    const source = new sources.RawSource(newContent);\n\n    compilation.updateAsset(assetName, source);\n  },\n);\n```\n\n----------------------------------------\n\nTITLE: Customizing Automatic JSX Runtime with Comments\nDESCRIPTION: This snippet shows how to add comments at the top of a JSX or TSX file to customize the JSX behavior for the automatic runtime. This approach takes precedence over configuration settings.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/framework/react.mdx#2025-04-21_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\n/** @jsxImportSource custom-jsx-library */\n\nconst App = () => {\n  return <div>Hello World</div>;\n};\n```\n\n----------------------------------------\n\nTITLE: Dynamic Template Configuration for Multi-page Applications\nDESCRIPTION: Shows how to implement dynamic template selection based on entry names for multi-page applications using a function configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/template.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    template({ entryName }) {\n      const templates = {\n        foo: './static/foo.html',\n        bar: './static/bar.html',\n      };\n      return templates[entryName] || './static/index.html';\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using process.env.NODE_ENV in TypeScript\nDESCRIPTION: Shows how to use process.env.NODE_ENV to check the current environment in both Node.js and client-side code.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/env-vars.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nif (process.env.NODE_ENV === 'development') {\n  console.log('this is a development log');\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring styled-jsx with Rsbuild\nDESCRIPTION: This code configures Rsbuild to use styled-jsx for CSS-in-JS. It uses the `pluginReact` and configures the SWC compiler to use the `@swc/plugin-styled-jsx` plugin, enabling styled-jsx's features within the Rsbuild environment. The configuration ensures that styled-jsx is properly integrated into the build process, allowing for the use of styled-jsx components in the application.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/framework/react.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginReact } from '@rsbuild/plugin-react';\n\nexport default defineConfig({\n  plugins: [pluginReact()],\n  tools: {\n    swc: {\n      jsc: {\n        experimental: {\n          plugins: [['@swc/plugin-styled-jsx', {}]],\n        },\n      },\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom tsconfig.json Path in Rsbuild\nDESCRIPTION: Shows how to set a custom path for the tsconfig.json file using the source.tsconfigPath configuration in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/typescript.mdx#2025-04-21_snippet_2\n\nLANGUAGE: ts\nCODE:\n```\nexport default {\n  source: {\n    tsconfigPath: './tsconfig.custom.json',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Excluding Files from JS Minification in Rsbuild\nDESCRIPTION: This snippet shows how to exclude certain files from JavaScript minification in Rsbuild using the output.minify.js configuration. It demonstrates setting an exclusion pattern for files that should not be minified.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/configuration/swc.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    minify: {\n      jsOptions: {\n        exclude: /foo\\/bar/,\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Node.js Environment Output Configuration\nDESCRIPTION: Configuration for setting up separate output directories for web and Node.js environments.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/output-files.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  environments: {\n    web: {\n      output: {\n        target: 'web',\n      },\n    },\n    node: {\n      output: {\n        target: 'node',\n        distPath: {\n          root: 'dist/server',\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring JSX Import Source via Comment\nDESCRIPTION: This code snippet shows how to configure the JSX import source directly within a TSX file using a comment. The `/** @jsxImportSource custom-jsx-library */` comment instructs the JSX transformer to import React-related functions from `custom-jsx-library` instead of the default `react` package. The App component renders a simple \"Hello World\" message.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/framework/react.mdx#2025-04-21_snippet_14\n\nLANGUAGE: tsx\nCODE:\n```\n/** @jsxImportSource custom-jsx-library */\n\nconst App = () => {\n  return <div>Hello World</div>;\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Rspack Resolve Alias in Rsbuild\nDESCRIPTION: This snippet demonstrates how to add a resolve.alias configuration to Rspack using the tools.rspack object in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/rspack.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: {\n      resolve: {\n        alias: {\n          '@util': 'src/util',\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom Code Splitting in Rsbuild\nDESCRIPTION: This configuration demonstrates how to implement custom code splitting in Rsbuild, specifically splitting the 'axios' library from node_modules into a separate chunk.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/optimization/optimize-bundle.mdx#2025-04-21_snippet_7\n\nLANGUAGE: js\nCODE:\n```\nexport default {\n  performance: {\n    chunkSplit: {\n      strategy: 'split-by-experience',\n      forceSplitting: {\n        axios: /node_modules[\\\\/]axios/,\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Conditional Logging based on NODE_ENV (TypeScript)\nDESCRIPTION: This TypeScript snippet demonstrates how to use `process.env.NODE_ENV` to conditionally execute code based on the current environment. It logs a development-specific message. The process.env.NODE_ENV value is set by Rsbuild by default.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\nif (process.env.NODE_ENV === 'development') {\n  console.log('this is a development log');\n}\n```\n\n----------------------------------------\n\nTITLE: Setting dev.assetPrefix to a complete URL in Rsbuild\nDESCRIPTION: Configuration example that sets dev.assetPrefix to a complete URL, which allows loading resources from an external domain.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/asset-prefix.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  dev: {\n    assetPrefix: 'https://example.com/assets/',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Rspack Based on Environment in Rsbuild\nDESCRIPTION: This snippet shows how to adjust the Rspack configuration based on the current environment (development, production, or test).\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/rspack.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: (config, { env }) => {\n      if (env === 'development') {\n        config.devtool = 'cheap-module-eval-source-map';\n      }\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using Query-Based SVG Imports in Rsbuild\nDESCRIPTION: Demonstrates the new recommended pattern for SVG imports in Rsbuild 0.5, which uses the ?react query to differentiate between URL imports and React component imports for better performance.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-5.mdx#2025-04-21_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\nimport logoUrl from './logo.svg';\nimport Logo from './logo.svg?react';\n\nconsole.log(logoUrl); // -> string\nconsole.log(Logo); // -> React component\n```\n\n----------------------------------------\n\nTITLE: Defining CSS Styles Using CSS Modules - CSS\nDESCRIPTION: This snippet shows how to define styles in a CSS Modules file, specifically for a button with a red background. The use of the '.module.css' file extension indicates that this is a CSS Module.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/styling/css-modules.mdx#2025-04-21_snippet_0\n\nLANGUAGE: css\nCODE:\n```\n.red {\n  background: red;\n}\n```\n\n----------------------------------------\n\nTITLE: Running yarn-deduplicate for Automatic Dependency Deduplication\nDESCRIPTION: Command to automatically merge duplicated dependencies in Yarn-based projects, followed by reinstalling packages to apply changes.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/optimization/optimize-bundle.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nnpx yarn-deduplicate && yarn\n```\n\n----------------------------------------\n\nTITLE: Proper Usage Examples with Static Assets and Inline Scripts\nDESCRIPTION: Examples of proper usage of html.tags for injecting static assets from public directory, CDN URLs, and inline scripts.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/tags.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nfunction report() {\n  fetch('https://www.example.com/report');\n}\n\nexport default {\n  html: {\n    output: {\n      assetPrefix: 'https://example.com/',\n    },\n    tags: [\n      // Inject asset from the `public` directory.\n      { tag: 'script', attrs: { src: 'service-worker.js' } },\n      // Inject asset from other CDN url.\n      {\n        tag: 'script',\n        publicPath: false,\n        attrs: { src: 'https://cdn.example.com/foo.js' },\n      },\n      // Inject inline script.\n      {\n        tag: 'script',\n        children: report.toString() + '\\nreport()',\n      },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Removing the SWC Loader\nDESCRIPTION: This example demonstrates how to remove the built-in SWC loader from the JavaScript processing rule.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/configuration/rspack.mdx#2025-04-21_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    bundlerChain: (chain, { CHAIN_ID }) => {\n      chain.module.rule(CHAIN_ID.RULE.JS).uses.delete(CHAIN_ID.USE.SWC);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using source.define to Replace Global Identifiers in Rsbuild\nDESCRIPTION: JavaScript configuration example showing how to use source.define to replace global identifiers during build time. This is commonly used for injecting environment variables like NODE_ENV.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/env-vars.mdx#2025-04-21_snippet_19\n\nLANGUAGE: js\nCODE:\n```\nexport default {\n  source: {\n    define: {\n      'process.env.NODE_ENV': JSON.stringify(process.env.NODE_ENV),\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Merged Configuration for Node Environment in Rsbuild\nDESCRIPTION: Example of the final merged configuration for the 'node' environment, demonstrating how shared and environment-specific settings are combined for SSR builds.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/environments.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nconst nodeConfig = {\n  source: {\n    entry: {\n      index: './src/index.server.js',\n    },\n  },\n  output: {\n    target: 'node',\n  },\n  resolve: {\n    alias: {\n      '@common': './src/common',\n      '@common1': './src/ssr/common1',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Exact Matching Alias Configuration in Rsbuild\nDESCRIPTION: Using the $ symbol to enable exact matching for aliases, preventing automatic sub-path matching.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/resolve/alias.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport path from 'node:path';\n\nexport default {\n  resolve: {\n    alias: {\n      '@common$': './src/common',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using BundlerChain to Add Bundle Analyzer Plugin (TypeScript)\nDESCRIPTION: Example of using modifyBundlerChain in a Rsbuild plugin to add the webpack-bundle-analyzer plugin and configure the devtool in development environment.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/hooks.mdx#2025-04-21_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nimport { BundleAnalyzerPlugin } from 'webpack-bundle-analyzer';\n\nconst myPlugin = () => ({\n  setup(api) {\n    api.modifyBundlerChain((chain, utils) => {\n      if (utils.env === 'development') {\n        chain.devtool('eval');\n      }\n\n      chain.plugin('bundle-analyze').use(BundleAnalyzerPlugin);\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring split-by-size strategy in Rsbuild\nDESCRIPTION: This code snippet demonstrates how to configure the `split-by-size` strategy in Rsbuild, which automatically splits chunks based on module size, defined by `minSize` and `maxSize`. Rsbuild handles the splitting without further configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/optimization/code-splitting.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  performance: {\n    chunkSplit: {\n      strategy: 'split-by-size',\n      minSize: 30000,\n      maxSize: 50000,\n    },\n  },\n};\n\n```\n\n----------------------------------------\n\nTITLE: Rsbuild Config Modification Example in TypeScript\nDESCRIPTION: Demonstrates how to modify Rsbuild configuration by setting default values for specific config options.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/hooks.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.modifyRsbuildConfig((config) => {\n      config.html ||= {};\n      config.html.title = 'My Default Title';\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Referencing Public Folder Assets in HTML\nDESCRIPTION: Demonstrates how to reference files from the public folder in HTML templates using absolute paths and the BASE_URL environment variable.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/static-assets.mdx#2025-04-21_snippet_5\n\nLANGUAGE: html\nCODE:\n```\n<link rel=\"icon\" href=\"<%= process.env.BASE_URL %>/favicon.ico\" />\n```\n\n----------------------------------------\n\nTITLE: Forcing cleanDistPath Behavior in JavaScript\nDESCRIPTION: Example of forcing the cleanDistPath option to be true, which will always clean the output directory before building.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/clean-dist-path.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    cleanDistPath: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Rspack's IgnorePlugin for Bundle Exclusion\nDESCRIPTION: This snippet shows how to use Rspack's IgnorePlugin to exclude certain files from being bundled into the output. It demonstrates the configuration within the Rsbuild config file, specifically targeting locale files in the moment package.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/exclude.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: (config, { rspack }) => {\n      config.plugins?.push(\n        new rspack.IgnorePlugin({\n          resourceRegExp: /^\\.\\/(locale)$/,\n          contextRegExp: /moment$/,\n        }),\n      );\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Output Directory Structure Example\nDESCRIPTION: Shows the typical directory structure of Rsbuild build outputs including static assets and HTML files.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/static-deploy.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ndist\n├── static\n│   ├── image\n│   ├── css\n│   └── js\n└── [name].html\n```\n\n----------------------------------------\n\nTITLE: Configuring Tailwind CSS\nDESCRIPTION: This code snippet shows a basic `tailwind.config.js` file. It defines the content paths to scan for Tailwind CSS class names, sets up an empty `extend` object for theme customization, and initializes the `plugins` array.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/styling/tailwindcss-v3.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n/** @type {import('tailwindcss').Config} */\nmodule.exports = {\n  content: ['./src/**/*.{html,js,ts,jsx,tsx}'],\n  theme: {\n    extend: {},\n  },\n  plugins: [],\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring PostCSS Plugin with Parameters in Rsbuild\nDESCRIPTION: Example of adding a PostCSS plugin with custom parameters in the Rsbuild configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/postcss.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    postcss: (opts, { addPlugins }) => {\n      const viewportPlugin = require('postcss-px-to-viewport')({\n        viewportWidth: 375,\n      });\n      addPlugins(viewportPlugin);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling Error Overlay Configuration\nDESCRIPTION: Example showing how to disable the browser error overlay feature in Rsbuild's development environment.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/client.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    client: {\n      overlay: false,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Registering Middleware with onBeforeStartDevServer\nDESCRIPTION: Example of registering custom middleware using the onBeforeStartDevServer hook, which will execute before Rsbuild's internal middleware.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/hooks.mdx#2025-04-21_snippet_19\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onBeforeStartDevServer(({ server }) => {\n      server.middlewares.use((req, res, next) => {\n        next();\n      });\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Removing HTML Plugin with CHAIN_ID\nDESCRIPTION: This snippet demonstrates how to use CHAIN_ID to locate and remove the built-in HTML plugin from the Rspack configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/configuration/rspack.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    bundlerChain: (chain, { CHAIN_ID }) => {\n      //\n      chain.plugins.delete(CHAIN_ID.PLUGIN.HTML);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining Public Environment Variables (.env file)\nDESCRIPTION: This `.env` file defines two environment variables: `PUBLIC_NAME` which is considered a public variable, and `PASSWORD` which is not.  Public variables can be accessed in the client-side code. Note that sensitive information should not be included in public variables.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_22\n\nLANGUAGE: shell\nCODE:\n```\nPUBLIC_NAME=jack\nPASSWORD=123\n```\n\n----------------------------------------\n\nTITLE: Enabling Lazy Compilation in Rsbuild\nDESCRIPTION: Configuration to enable lazy compilation in development mode, which reduces the number of modules compiled at startup and improves startup time.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/optimization/build-performance.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    lazyCompilation: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Custom Template Parameters in Rsbuild Config (TypeScript)\nDESCRIPTION: This snippet demonstrates how to pass custom template parameters using the html.templateParameters config in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/html-template.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  html: {\n    templateParameters: {\n      text: 'world',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining OnBeforeEnvironmentCompile Callback Function in TypeScript\nDESCRIPTION: This TypeScript function defines a callback that is called before the environment compilation starts. It allows access to parameters like 'isWatch' to identify the mode of operation, 'isFirstCompile' to check if it's the initial build, and 'bundlerConfig' to retrieve the relevant Rspack configuration. The callback must accept an object containing these parameters and can optionally return a Promise or void.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/shared/onBeforeEnvironmentCompile.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction OnBeforeEnvironmentCompile(\n  callback: (params: {\n    isWatch: boolean;\n    isFirstCompile: boolean;\n    bundlerConfig?: Rspack.Configuration;\n    environment: EnvironmentContext;\n  }) => Promise<void> | void,\n): void;\n```\n\n----------------------------------------\n\nTITLE: Environment-specific Alias Configuration in Rsbuild\nDESCRIPTION: Setting different aliases for web and node environments in a Rsbuild configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/resolve/alias.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  environments: {\n    web: {\n      resolve: {\n        alias: {\n          '@common': './src/web/common',\n        },\n      },\n      output: {\n        target: 'web',\n      },\n    },\n    node: {\n      resolve: {\n        alias: {\n          '@common': './src/node/common',\n        },\n      },\n      output: {\n        target: 'node',\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: GitHub Pages Asset Prefix Configuration\nDESCRIPTION: Configure asset prefix specifically for GitHub Pages deployment, using repository name in URL path\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/static-deploy.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\n\nexport default defineConfig({\n  output: {\n    assetPrefix: '/<REPO_NAME>/'\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Function Configuration for HTML Plugin\nDESCRIPTION: Example demonstrating function-based configuration of the HTML plugin, allowing conditional configuration based on entry name.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/tools/html-plugin.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    htmlPlugin(config, { entryName, entryValue }) {\n      if (entryName === 'main') {\n        config.scriptLoading = 'blocking';\n      }\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Updating Build Entry in HTML\nDESCRIPTION: Modifies an HTML entry point to remove the script tag for Vite and updates Rsbuild config to specify these entries. Rsbuild will handle injection of scripts automatically during the build process. Dependencies include the correct Rsbuild configuration as outlined and Rsbuild's CLI for building. The input is an 'index.html' with Vite tag to be modified according to Rsbuild's structure.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/vite.mdx#2025-04-21_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<!-- [!code --] -->\n<script type=\"module\" src=\"/src/main.ts\"></script>\n```\n\n----------------------------------------\n\nTITLE: Checking Plugin Existence with rsbuild.isPluginExists\nDESCRIPTION: Checks whether a plugin with the specified name exists in the current Rsbuild instance. Returns true if the plugin exists, false otherwise.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_20\n\nLANGUAGE: typescript\nCODE:\n```\nrsbuild.addPlugins([pluginFoo()]);\n\nrsbuild.isPluginExists(pluginFoo().name); // true\n```\n\n----------------------------------------\n\nTITLE: Using CSS Module Styles in a React Component - TypeScript JSX\nDESCRIPTION: Demonstrates how to import styles from a CSS Module into a React functional component and apply them to the button element. This allows for scoped styling without class name conflicts.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/styling/css-modules.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport styles from './button.module.css';\n\nexport default () => {\n  return <button className={styles.red}>Button</button>;\n};\n```\n\n----------------------------------------\n\nTITLE: Environment-based Configuration\nDESCRIPTION: Example of using environment variables in Rsbuild configuration to set different aliases based on NODE_ENV.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/configuration/rsbuild.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\n\nexport default defineConfig({\n  resolve: {\n    alias: {\n      '@request':\n        process.env.NODE_ENV === 'development'\n          ? './src/request.dev.js'\n          : './src/request.prod.js',\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Relay Support in SWC with Rsbuild\nDESCRIPTION: This example demonstrates how to enable Relay support in Rsbuild by configuring the SWC loader to use the @swc/plugin-relay plugin. It utilizes the tools.swc configuration option.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/configuration/swc.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    swc: {\n      jsc: {\n        experimental: {\n          plugins: [['@swc/plugin-relay', {}]],\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Running pnpm-deduplicate Tool for Dependency Analysis\nDESCRIPTION: Command to analyze duplicate dependencies in projects using pnpm earlier than version 7.26.0, which lists all duplicated packages for manual resolution.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/optimization/optimize-bundle.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx pnpm-deduplicate --list\n```\n\n----------------------------------------\n\nTITLE: Default CORS Configuration in JavaScript\nDESCRIPTION: This snippet shows the default CORS configuration options used by the middleware.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/cors.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultOptions = {\n  origin: '*',\n  methods: 'GET,HEAD,PUT,PATCH,POST,DELETE',\n  preflightContinue: false,\n  optionsSuccessStatus: 204,\n};\n```\n\n----------------------------------------\n\nTITLE: Ignoring Sass deprecation warnings\nDESCRIPTION: This code shows how to suppress specific Sass deprecation warnings using the `silenceDeprecations` option. In this example, warnings related to the `@import` rule are ignored.  This can be useful for temporarily silencing warnings while migrating to newer syntax.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/list/plugin-sass.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\npluginSass({\n  sassLoaderOptions: {\n    sassOptions: {\n      silenceDeprecations: ['import'],\n    },\n  },\n});\n\n```\n\n----------------------------------------\n\nTITLE: Registering Svelte Plugin in Rsbuild Config (TS)\nDESCRIPTION: This code snippet demonstrates how to register the `@rsbuild/plugin-svelte` plugin within your `rsbuild.config.ts` file.  This registration enables the compilation of `.svelte` files in your project. The plugin is added to the `plugins` array in the configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-svelte.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginSvelte } from '@rsbuild/plugin-svelte';\n\nexport default {\n  plugins: [pluginSvelte()],\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Usage-Based Polyfill in Rsbuild\nDESCRIPTION: Configuration to set the polyfill strategy to 'usage' mode, which analyzes the code and injects only the necessary polyfills to reduce bundle size.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/optimization/optimize-bundle.mdx#2025-04-21_snippet_6\n\nLANGUAGE: js\nCODE:\n```\nexport default {\n  output: {\n    polyfill: 'usage',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Merging Environment Configurations in Rsbuild Plugin (TypeScript)\nDESCRIPTION: Example demonstrating how to use mergeEnvironmentConfig utility to merge custom configuration with user configuration in a Rsbuild plugin, allowing selective override of configuration properties.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/hooks.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { EnvironmentConfig } from '@rsbuild/core';\n\nconst myPlugin = () => ({\n  setup(api) {\n    api.modifyEnvironmentConfig((userConfig, { mergeEnvironmentConfig }) => {\n      const extraConfig: EnvironmentConfig = {\n        source: {\n          // ...\n        },\n        output: {\n          // ...\n        },\n      };\n\n      // extraConfig will override fields in userConfig,\n      // If you do not want to override the fields in userConfig,\n      // you can adjust to `mergeEnvironmentConfig(extraConfig, userConfig)`\n      return mergeEnvironmentConfig(userConfig, extraConfig);\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Setting Page Title in Rsbuild Config (TypeScript)\nDESCRIPTION: This snippet demonstrates how to set the HTML title tag for a single-page application using the html.title config in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/html-template.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  html: {\n    title: 'example',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Adding Multiple PostCSS Plugins in Rsbuild\nDESCRIPTION: Example of adding multiple PostCSS plugins using the addPlugins utility function in the Rsbuild configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/postcss.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    postcss: (config, { addPlugins }) => {\n      // Add a PostCSS Plugin\n      addPlugins(require('postcss-preset-env'));\n      // Add multiple PostCSS Plugins\n      addPlugins([require('postcss-preset-env'), require('postcss-import')]);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Monorepo Libraries Compilation Configuration\nDESCRIPTION: Shows how to configure compilation for libraries within a monorepo structure while excluding node_modules.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/include.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport path from 'node:path';\n\nconst packagesDir = path.resolve(__dirname, '../../packages');\n\nexport default {\n  source: {\n    include: [\n      {\n        and: [packagesDir, { not: /[\\\\/]node_modules[\\\\/]/ }],\n      },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Correct React Component Example 2\nDESCRIPTION: This code snippet also showcases the correct way of writing React components when using React Fast Refresh. The example demonstrates assigning an arrow function to a constant, thus allowing hot reloading to work without losing state, which adheres to React Fast Refresh's official recommendations.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/framework/react.mdx#2025-04-21_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n// 正确写法 2\nconst MyComponent = () => <div>Hello World</div>;\n\nexport default MyComponent;\n```\n\n----------------------------------------\n\nTITLE: Configuring 'linked' Legal Comments in Rsbuild\nDESCRIPTION: This configuration extracts all legal comments to separate '*.LICENSE.txt' files and links to them with a comment. This approach doesn't affect page performance as these files are not loaded by the page.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/legal-comments.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    legalComments: 'linked',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Multiple File Types as Static Assets in Rsbuild\nDESCRIPTION: This example demonstrates how to specify multiple file types (both .json5 and .pdf files) to be treated as static assets by using an array of regular expressions.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/source/assets-include.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  source: {\n    assetsInclude: [/\\.json5$/, /\\.pdf$/],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Example of Using HtmlTag in Rsbuild Configuration\nDESCRIPTION: Example showing how to configure html.tags with a script tag, demonstrating usage of assetPrefix, head placement, and hash generation.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/tags.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    assetPrefix: 'https://example.com/',\n  },\n  html: {\n    tags: [\n      {\n        tag: 'script',\n        attrs: { src: 'a.js' },\n        head: true,\n        append: true,\n        publicPath: true,\n        hash: true,\n      },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling Inlining for All Assets Regardless of Size\nDESCRIPTION: Example showing how to inline all static assets regardless of size by using JavaScript's MAX_SAFE_INTEGER.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/data-uri-limit.mdx#2025-04-21_snippet_4\n\nLANGUAGE: js\nCODE:\n```\nexport default {\n  output: {\n    dataUriLimit: Number.MAX_SAFE_INTEGER,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Adding Plugins with rsbuild.addPlugins\nDESCRIPTION: Registers one or more Rsbuild plugins. This method can be called multiple times and must be called before compiling. It supports options for plugin positioning and environment targeting.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_17\n\nLANGUAGE: typescript\nCODE:\n```\ntype AddPluginsOptions = { before?: string; environment?: string };\n\nfunction AddPlugins(\n  plugins: Array<RsbuildPlugin | Falsy>,\n  options?: AddPluginsOptions,\n): void;\n```\n\nLANGUAGE: typescript\nCODE:\n```\nrsbuild.addPlugins([pluginFoo(), pluginBar()]);\n\n// Insert before the bar plugin\nrsbuild.addPlugins([pluginFoo()], { before: 'bar' });\n\n// Add plugin for node environment\nrsbuild.addPlugins([pluginFoo()], { environment: 'node' });\n```\n\n----------------------------------------\n\nTITLE: Passing Options to Rsbuild Plugins\nDESCRIPTION: Demonstrates how to pass custom options to Rsbuild plugins during configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/plugins.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginStylus } from '@rsbuild/plugin-stylus';\n\nexport default defineConfig({\n  plugins: [\n    pluginStylus({\n      stylusOptions: {\n        lineNumbers: false,\n      },\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Creating Rsbuild Project with CLI Flags\nDESCRIPTION: These commands demonstrate how to use CLI flags with create-rsbuild to specify project directory and template. The second command shows abbreviated flag usage.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/packages/create-rsbuild/README.md#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-rsbuild --dir my-project --template react\n\n# Using abbreviations\nnpx create-rsbuild -d my-project -t react\n```\n\n----------------------------------------\n\nTITLE: Enabling React Profiler (TS)\nDESCRIPTION: Enables the React Profiler for performance analysis in production builds.  This option should only be enabled when `REACT_PROFILER` is true to avoid unnecessary overhead.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-react.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\npluginReact({\n  // Only enable the profiler when REACT_PROFILER is true,\n  // as the option will increase the build time and adds some small additional overhead.\n  enableProfiler: process.env.REACT_PROFILER === 'true',\n});\n```\n\n----------------------------------------\n\nTITLE: Using Rspack configuration in Rsbuild\nDESCRIPTION: Example of using the tools.rspack option to configure Rspack plugins in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/migration/webpack.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: {\n      plugins: [new SomeWebpackPlugin()],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Custom Output Directory Configuration Example\nDESCRIPTION: Example showing how to customize the output directory configuration to change the root directory and JavaScript files location.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/dist-path.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    distPath: {\n      root: 'build',\n      js: 'resource/js',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Rsbuild for Svelte Support\nDESCRIPTION: Configuration example showing how to register the Svelte plugin in an existing Rsbuild project. The pluginSvelte() function adds necessary configuration for compiling Svelte components (.svelte files).\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/framework/svelte.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginSvelte } from '@rsbuild/plugin-svelte';\n\nexport default defineConfig({\n  plugins: [pluginSvelte()],\n});\n```\n\n----------------------------------------\n\nTITLE: Modifying Module Resolution with api.resolve\nDESCRIPTION: Demonstrates how to intercept and modify module resolution requests using the `api.resolve` API. This example changes the request for `./a.js` to `./b.js` during module resolution.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/core.mdx#2025-04-21_snippet_13\n\nLANGUAGE: javascript\nCODE:\n```\napi.resolve(({ resolveData }) => {\n  if (resolveData.request === './a.js') {\n    resolveData.request = './b.js';\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Using modifyBundlerChain in a Rsbuild Plugin\nDESCRIPTION: Example of creating a plugin that uses the modifyBundlerChain hook to modify Rspack configuration with rspack-chain API, including adding a bundle analyzer plugin.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/hooks.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport { BundleAnalyzerPlugin } from 'webpack-bundle-analyzer';\n\nconst myPlugin = () => ({\n  setup(api) {\n    api.modifyBundlerChain((chain, utils) => {\n      if (utils.env === 'development') {\n        chain.devtool('eval');\n      }\n\n      chain.plugin('bundle-analyze').use(BundleAnalyzerPlugin);\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Correct React Component Example 1\nDESCRIPTION: These code snippets showcases the correct way of writing React components when using React Fast Refresh. The first example demonstrates using a named function, thus allowing hot reloading to work without losing state, which adheres to React Fast Refresh's official recommendations.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/framework/react.mdx#2025-04-21_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n// 正确写法 1\nexport default function MyComponent() {\n  return <div>Hello World</div>;\n}\n```\n\n----------------------------------------\n\nTITLE: Installing and Using Speedscope for Profile Visualization\nDESCRIPTION: Commands to install speedscope globally and view the generated CPU profile content.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/debug/build-profiling.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n# Install speedscope\nnpm install -g speedscope\n\n# View cpuprofile content\n# Replace the name with the local file name\nspeedscope CPU.date.000000.00000.0.001.cpuprofile\n```\n\n----------------------------------------\n\nTITLE: Using bundlerChain to Modify Rspack Configuration\nDESCRIPTION: This snippet demonstrates how to use tools.bundlerChain to modify Rspack configuration, specifically setting the devtool option in development environment.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/configuration/rspack.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    bundlerChain: (chain, { env }) => {\n      if (env === 'development') {\n        chain.devtool('cheap-module-eval-source-map');\n      }\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Updating npm Scripts for Rsbuild\nDESCRIPTION: This code snippet demonstrates how to update the npm scripts in a package.json file to use Rsbuild's CLI commands instead of Webpack's. The original 'serve' and 'build' scripts using webpack are replaced with Rsbuild's 'dev' and 'build' commands.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/webpack.mdx#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"serve\": \"webpack serve -c webpack.config.js\", // [!code --]\n    \"build\": \"webpack build -c webpack.config.js\", // [!code --]\n    \"dev\": \"rsbuild dev\", // [!code ++]\n    \"build\": \"rsbuild build\" // [!code ++]\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Adding a Custom Loader for Markdown Files\nDESCRIPTION: This example shows how to add a new loader to handle Markdown files using the bundlerChain API.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/configuration/rspack.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    bundlerChain: (chain) => {\n      chain.module\n        .rule('md')\n        .test(/\\.md$/)\n        .use('md-loader')\n        // The package name or module path of the loader\n        .loader('md-loader');\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Lightning CSS Loader with Object in JavaScript\nDESCRIPTION: An example of configuring the Lightning CSS loader using an object to disable vendor prefixes. This allows using PostCSS's autoprefixer plugin instead.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/lightningcss-loader.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    lightningcssLoader: {\n      exclude: {\n        vendorPrefixes: false,\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Appending Rspack Rules in Rsbuild\nDESCRIPTION: This example illustrates how to append custom Rspack rules to the end of the configuration using the appendRules utility function.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/rspack.mdx#2025-04-21_snippet_13\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: (config, { appendRules }) => {\n      // add a single rule\n      appendRules({\n        test: /\\.foo/,\n        loader: require.resolve('foo-loader'),\n      });\n\n      // Add multiple rules as an array\n      appendRules([\n        {\n          test: /\\.foo/,\n          loader: require.resolve('foo-loader'),\n        },\n        {\n          test: /\\.bar/,\n          loader: require.resolve('bar-loader'),\n        },\n      ]);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom Middlewares in Rsbuild\nDESCRIPTION: Example of using setupMiddlewares to add custom middleware functions to the development server. It demonstrates adding middleware to the beginning and end of the middleware chain.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/dev/setup-middlewares.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    setupMiddlewares: [\n      (middlewares, server) => {\n        middlewares.unshift((req, res, next) => {\n          console.log('first');\n          next();\n        });\n\n        middlewares.push((req, res, next) => {\n          console.log('last');\n          next();\n        });\n      },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Removing Plugins with rsbuild.removePlugins\nDESCRIPTION: Removes one or more Rsbuild plugins by name. This method can be called multiple times and must be called before compiling to affect the compilation result.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_19\n\nLANGUAGE: typescript\nCODE:\n```\nfunction RemovePlugins(pluginNames: string[]): void;\n```\n\nLANGUAGE: typescript\nCODE:\n```\n// add plugin\nconst pluginFoo = pluginFoo();\nrsbuild.addPlugins(pluginFoo);\n\n// remove plugin\nrsbuild.removePlugins([pluginFoo.name]);\n```\n\n----------------------------------------\n\nTITLE: Using onCloseDevServer Hook\nDESCRIPTION: This hook is triggered when the development server is closed. It allows for cleanup or other finalization tasks that need to run when the dev server shuts down.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_30\n\nLANGUAGE: typescript\nCODE:\n```\nrsbuild.onCloseDevServer(async () => {\n  console.log('close dev server!');\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Polyfill Usage in Rsbuild\nDESCRIPTION: Example of enabling polyfill injection based on browserslist configuration in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/browserslist.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    polyfill: 'usage',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Customizing Rspack Configuration in Development Mode (TypeScript)\nDESCRIPTION: Example of using modifyRspackConfig in a Rsbuild plugin to customize the source map type in development environment by setting the devtool property.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/hooks.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.modifyRspackConfig((config, utils) => {\n      if (utils.env === 'development') {\n        config.devtool = 'eval-cheap-source-map';\n      }\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using Exposed Plugin APIs\nDESCRIPTION: Example of using api.useExposed to access APIs from another plugin\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/core.mdx#2025-04-21_snippet_22\n\nLANGUAGE: typescript\nCODE:\n```\nconst pluginChild = () => ({\n  name: 'plugin-child',\n  pre: ['plugin-parent'],\n  setup(api) {\n    const parentApi = api.useExposed('plugin-parent');\n    if (parentApi) {\n      console.log(parentApi.value); // -> 1\n      console.log(parentApi.double(1)); // -> 2\n    }\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Retrieving Normalized Rsbuild Configuration for Specified Environment - TypeScript\nDESCRIPTION: This function retrieves the Rsbuild configuration for a specific environment. It takes an options object with an 'environment' string parameter and returns a read-only type of NormalizedEnvironmentConfig. Ensure that this function is called after the modifyRsbuildConfig hook.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/shared/getNormalizedConfig.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n/** Get the Rsbuild configuration of the specified environment */\nfunction GetNormalizedConfig(options: {\n  environment: string;\n}): Readonly<NormalizedEnvironmentConfig>;\n```\n\n----------------------------------------\n\nTITLE: Output Filenames Without Hash Values\nDESCRIPTION: Shows the structure of output files when filenameHash is disabled, resulting in clean filenames without hash values.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/filename-hash.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\ndist/static/css/index.css\ndist/static/js/index.js\n```\n\n----------------------------------------\n\nTITLE: Configuring Automatic JSX Runtime in Rsbuild\nDESCRIPTION: This snippet demonstrates how to configure Rsbuild to use the automatic JSX runtime with a custom import source, specifically '@emotion/react'. It makes use of the '@rsbuild/plugin-react' plugin and the 'defineConfig' function from '@rsbuild/core'.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/framework/react.mdx#2025-04-21_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginReact } from '@rsbuild/plugin-react';\n\nexport default defineConfig({\n  plugins: [\n    pluginReact({\n      swcReactOptions: {\n        runtime: 'automatic',\n        jsxImportSource: '@emotion/react',\n      },\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Setting Page Title in Rsbuild\nDESCRIPTION: Explains how to set the HTML title tag using the html.title configuration for single and multi-page applications.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/html-template.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  html: {\n    title: 'example',\n  },\n};\n```\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  html: {\n    title({ entryName }) {\n      const titles = {\n        foo: 'Foo',\n        bar: 'Bar',\n      };\n      return titles[entryName];\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Working with Rsbuild Configuration in Plugins\nDESCRIPTION: Example plugin demonstrating how to modify and access Rsbuild configuration, including using getNormalizedConfig to read the final configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/index.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nexport const pluginUploadDist = (): RsbuildPlugin => ({\n  name: 'plugin-upload-dist',\n  setup(api) {\n    api.modifyRsbuildConfig((config) => {\n      // try to disable minimize.\n      config.output ||= {};\n      config.output.minify = false;\n      // but also can be enable by other plugins...\n    });\n    api.onBeforeBuild(() => {\n      // use the normalized config.\n      const config = api.getNormalizedConfig();\n      if (config.output.minify !== false) {\n        // let it crash when enable minimize.\n        throw new Error(\n          'You must disable minimize to upload readable dist files.',\n        );\n      }\n    });\n    api.onAfterBuild(() => {\n      const config = api.getNormalizedConfig();\n      const distRoot = config.output.distPath.root;\n\n      // upload all files in `distRoot`...\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: TypeScript Definition for Title Function in Rsbuild\nDESCRIPTION: This TypeScript definition describes the function signature for the html.title when used as a function. It takes an object with value and entryName properties and returns a string or void.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/title.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\ntype TitleFunction = ({ value: string; entryName: string }) => string | void;\n```\n\n----------------------------------------\n\nTITLE: Type Definition for setupMiddlewares in Rsbuild\nDESCRIPTION: Type definitions for the dev.setupMiddlewares configuration option, including SetupMiddlewaresServer and SetupMiddlewares types.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/setup-middlewares.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype SetupMiddlewaresServer = {\n  sockWrite: (\n    type: string,\n    data?: string | boolean | Record<string, any>,\n  ) => void;\n  environments: EnvironmentAPI;\n};\n\ntype SetupMiddlewares = Array<\n  (\n    middlewares: {\n      unshift: (...handlers: RequestHandler[]) => void;\n      push: (...handlers: RequestHandler[]) => void;\n    },\n    server: SetupMiddlewaresServer,\n  ) => void\n>;\n```\n\n----------------------------------------\n\nTITLE: Defining Type Signatures for ModifyRspackConfig Method in Rsbuild (TypeScript)\nDESCRIPTION: Type definitions for the modifyRspackConfig method in Rsbuild, which allows direct modification of the Rspack bundler configuration. Includes utility type definitions for accessing environment information and Rspack plugins.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/hooks.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\ntype ModifyRspackConfigUtils = {\n  environment: EnvironmentContext;\n  env: string;\n  isDev: boolean;\n  isProd: boolean;\n  target: RsbuildTarget;\n  isServer: boolean;\n  isWebWorker: boolean;\n  rspack: Rspack;\n  HtmlPlugin: typeof import('html-rspack-plugin');\n  // more...\n};\n\nfunction ModifyRspackConfig(\n  callback: (\n    config: Rspack.Configuration,\n    utils: ModifyRspackConfigUtils,\n  ) => Promise<RspackConfig | void> | Rspack.Configuration | void,\n): void;\n```\n\n----------------------------------------\n\nTITLE: Specifying HMR URL in Rsbuild Configuration\nDESCRIPTION: This snippet shows how to specify a custom WebSocket URL for Hot Module Replacement by configuring the 'dev.client' options in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/hmr.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    client: {\n      host: 'localhost',\n      protocol: 'ws',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Meta Tags in Rsbuild Config (TypeScript)\nDESCRIPTION: This snippet demonstrates how to add custom meta tags to your HTML using the html.meta config in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/html-template.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  html: {\n    meta: {\n      description: 'a description of the page',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Custom Chunk Splitting Configuration in JavaScript\nDESCRIPTION: This snippet demonstrates how to use a custom chunk splitting strategy, specifically splitting React and React DOM into a separate chunk in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/chunk-split.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  performance: {\n    chunkSplit: {\n      strategy: 'custom',\n      splitChunks: {\n        cacheGroups: {\n          react: {\n            test: /node_modules[\\/](react|react-dom)[\\/]/,\n            name: 'react',\n            chunks: 'all',\n          },\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Babel Loader Options: Function Type Configuration (JS)\nDESCRIPTION: This JavaScript code snippet demonstrates how to modify the Babel configuration using a function. It shows how to add a Babel plugin, specifically `babel-plugin-import`, to support on-demand loading of components.  It assumes that `pluginBabel` is available in the scope. It also demonstrates modifying the plugins array and using the `||=` operator to ensure it exists.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-babel.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\npluginBabel({\n  babelLoaderOptions: (config) => {\n    // Add a Babel plugin\n    // note: the plugin have been added to the default config to support antd load on demand\n    config.plugins ||= [];\n    config.plugins.push([\n      'babel-plugin-import',\n      {\n        libraryName: 'my-components',\n        libraryDirectory: 'es',\n        style: true,\n      },\n    ]);\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Asset Prefix (TypeScript)\nDESCRIPTION: This code snippet shows how to configure the `assetPrefix` for both development and production environments using the `dev.assetPrefix` and `output.assetPrefix` options in the Rsbuild configuration.  It copies static files to the `dist` directory and sets the production asset prefix to a CDN URL.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    assetPrefix: '/',\n  },\n  output: {\n    copy: [{ from: './static', to: 'static' }],\n    assetPrefix: 'https://example.com',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Dynamic CSS Modules Mode Based on File Path\nDESCRIPTION: Uses a function to determine CSS Modules mode based on the file path, applying local scoping only to .module.css files.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/css-modules.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nmodules: {\n  mode: (resourcePath) => {\n    if (/\\.module\\.\\css$/.test(resourcePath)) {\n      return 'local';\n    }\n    return 'global';\n  };\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring StyleX with Rsbuild\nDESCRIPTION: Configuration for integrating Facebook's StyleX CSS-in-JS library with Rsbuild. This setup uses the unplugin-stylex package to enable StyleX in React applications built with Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/framework/react.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginReact } from '@rsbuild/plugin-react';\nimport stylexPlugin from 'unplugin-stylex/rspack';\n\nexport default defineConfig({\n  plugins: [pluginReact()],\n  tools: {\n    rspack: {\n      plugins: [stylexPlugin()],\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: React Component Anti-patterns with Fast Refresh\nDESCRIPTION: Examples of incorrect ways to define React components that break Fast Refresh functionality. These anonymous functions prevent state preservation during hot module replacement.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/framework/react.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n// bad\nexport default function () {\n  return <div>Hello World</div>;\n}\n\n// bad\nexport default () => <div>Hello World</div>;\n```\n\n----------------------------------------\n\nTITLE: Configuring Function-based Template Parameters for Multi-page Applications\nDESCRIPTION: This example shows how to use a function to set different template parameters based on the entry name in a multi-page application setup. It demonstrates conditional parameter assignment.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/template-parameters.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    templateParameters(defaultValue, { entryName }) {\n      const params = {\n        foo: {\n          ...defaultValue,\n          type: 'Foo',\n        },\n        bar: {\n          ...defaultValue,\n          type: 'Bar',\n          hello: 'world',\n        },\n      };\n      return params[entryName] || defaultValue;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling .env File Loading with CLI Flag in Rsbuild\nDESCRIPTION: Command line example showing how to disable .env file loading in Rsbuild by using the --no-env flag. This allows environment variables to be managed with alternative tools like dotenvx.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/env-vars.mdx#2025-04-21_snippet_14\n\nLANGUAGE: bash\nCODE:\n```\nnpx rsbuild dev --no-env\n```\n\n----------------------------------------\n\nTITLE: Generated Manifest JSON File Structure\nDESCRIPTION: Example of the manifest.json file structure generated by Rsbuild after building, showing the allFiles array and entries object with their relationships.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/manifest.mdx#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"allFiles\": [\n    \"/static/css/index.[hash].css\",\n    \"/static/js/index.[hash].js\",\n    \"/static/images/logo.[hash].png\",\n    \"/index.html\"\n  ],\n  \"entries\": {\n    \"index\": {\n      \"initial\": {\n        \"js\": [\"/static/js/index.[hash].js\"],\n        \"css\": [\"/static/css/index.[hash].css\"]\n      },\n      \"assets\": [\"/static/images/logo.[hash].png\"],\n      \"html\": [\"/index.html\"]\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Defining TransformImport Type in TypeScript\nDESCRIPTION: TypeScript type definition for the transformImport configuration option, which can be an array of objects with specific properties or a function.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/transform-import.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype TransformImport =\n  | Array<{\n      libraryName: string;\n      libraryDirectory?: string;\n      style?: string | boolean;\n      styleLibraryDirectory?: string;\n      camelToDashComponentName?: boolean;\n      transformToDefaultImport?: boolean;\n      customName?: string;\n      customStyleName?: string;\n    }>\n  | Function;\n```\n\n----------------------------------------\n\nTITLE: Configuring On-Demand Import for Antd in JavaScript\nDESCRIPTION: Example configuration for importing Antd components on demand, including their CSS styles.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/transform-import.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  source: {\n    transformImport: [\n      {\n        libraryName: 'antd',\n        libraryDirectory: 'es',\n        style: 'css',\n      },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Registering Middleware After Default Middlewares in Rsbuild Dev Server (TypeScript)\nDESCRIPTION: Example of using onBeforeStartDevServer hook with a callback return to register custom middleware that will run after the default middlewares in Rsbuild's development server.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/hooks.mdx#2025-04-21_snippet_22\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onBeforeStartDevServer(({ server }) => {\n      // the returned callback will be called when the default\n      // middlewares are registered\n      return () => {\n        server.middlewares.use((req, res, next) => {\n          next();\n        });\n      };\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using targets Property in processAssets\nDESCRIPTION: This snippet shows how to use the `targets` property in the `ProcessAssetsDescriptor` to specify the build targets. The `processAssets` handler will only be executed when the target is `'web'`.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/core.mdx#2025-04-21_snippet_20\n\nLANGUAGE: javascript\nCODE:\n```\napi.processAssets({ stage: 'additional', targets: ['web'] }, ({ assets }) => {\n  // ...\n});\n```\n\n----------------------------------------\n\nTITLE: Forcing Package Splitting in JavaScript\nDESCRIPTION: This example shows how to force split specific npm packages, such as 'axios', into separate chunks using the forceSplitting option in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/chunk-split.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  performance: {\n    chunkSplit: {\n      forceSplitting: {\n        axios: /node_modules[\\/]axios/,\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Loading Bundle in TypeScript\nDESCRIPTION: Example demonstrating how to load and execute bundles on the server side.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/environment-api.mdx#2025-04-21_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\n// Load the bundle of `main` entry\nconst result = await environments.node.loadBundle('main');\n```\n\n----------------------------------------\n\nTITLE: Dynamic Injection Configuration in Rsbuild\nDESCRIPTION: Shows how to use a function for the 'html.inject' option to dynamically determine the injection position based on the entry name in a Multi-Page Application.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/inject.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    inject({ entryName }) {\n      return entryName === 'foo' ? 'body' : 'head';\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Running Bundle Analysis in Rsbuild\nDESCRIPTION: This command runs the build process with bundle analysis enabled, allowing you to identify large third-party libraries in your project.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/optimization/optimize-bundle.mdx#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nBUNDLE_ANALYZE=true pnpm build\n```\n\n----------------------------------------\n\nTITLE: Async Configuration Function\nDESCRIPTION: Example of using an async function to generate Rsbuild configuration with async operations.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/configuration/rsbuild.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\n\nexport default defineConfig(async ({ env, command }) => {\n  const result = await someAsyncFunction();\n\n  return {\n    html: {\n      title: result,\n    },\n  };\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom Asset Rules with tools.rspack in Rsbuild\nDESCRIPTION: Configuration showing how to add custom rules for handling PDF files using tools.rspack. This approach uses Rspack's asset/resource type to output the files as separate assets.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/static-assets.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    rspack(config, { addRules }) {\n      addRules([\n        {\n          test: /\\.pdf$/,\n          // converts asset to a separate file and exports the URL address.\n          type: 'asset/resource',\n        },\n      ]);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Starting Development Server with Rsbuild\nDESCRIPTION: Demonstrates starting a development server using rsbuild.startDevServer() method, with error handling and server instance management.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/instance.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { logger } from '@rsbuild/core';\n\n// Start dev server\nawait rsbuild.startDevServer();\n\n// Start dev server with error handling\ntry {\n  await rsbuild.startDevServer();\n} catch (err) {\n  logger.error('Failed to start dev server.');\n  logger.error(err);\n  process.exit(1);\n}\n```\n\n----------------------------------------\n\nTITLE: Registering Middlewares in Rsbuild Plugin\nDESCRIPTION: This snippet shows how to register middlewares in a Rsbuild plugin using the onBeforeStartDevServer hook. It adds a simple middleware function to the server instance.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/server.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onBeforeStartDevServer(({ server }) => {\n      server.middlewares.use((req, res, next) => {\n        next();\n      });\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Getting Transformed HTML in TypeScript\nDESCRIPTION: Example showing how to retrieve compiled and transformed HTML content.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/environment-api.mdx#2025-04-21_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\n// Get the HTML content of main entry\nconst html = await environments.web.getTransformedHtml('main');\n```\n\n----------------------------------------\n\nTITLE: Creating Rspack Compiler with rsbuild.createCompiler\nDESCRIPTION: Creates an Rspack Compiler instance. If there are multiple environments for this build, the return value is MultiCompiler. This API is intended for advanced scenarios when you need to customize the dev server.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\nfunction CreateCompiler(): Promise<Compiler | MultiCompiler>;\n```\n\nLANGUAGE: typescript\nCODE:\n```\nconst compiler = await rsbuild.createCompiler();\n```\n\n----------------------------------------\n\nTITLE: Transforming Pug Files to JavaScript\nDESCRIPTION: Example of using the transform API to convert Pug templates to JavaScript code within a plugin.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/core.mdx#2025-04-21_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nimport pug from 'pug';\n\nconst pluginPug = () => ({\n  name: 'my-pug-plugin',\n  setup(api) {\n    api.transform({ test: /\\.pug$/ }, ({ code }) => {\n      const templateCode = pug.compileClient(code, {});\n      return `${templateCode}; module.exports = template;`;\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using onBeforeStartDevServer Hook in TypeScript\nDESCRIPTION: This example shows how to use the onBeforeStartDevServer hook to log information about the server and environments before the development server starts.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/instance.mdx#2025-04-21_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\nrsbuild.onBeforeStartDevServer(({ server, environments }) => {\n  console.log('before starting dev server.');\n  console.log('the server is ', server);\n  console.log('the environments contexts are: ', environments);\n});\n```\n\n----------------------------------------\n\nTITLE: Using import.meta.env.DEV in TypeScript\nDESCRIPTION: Shows how to use import.meta.env.DEV to check if the current mode is development.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/env-vars.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nif (import.meta.env.DEV) {\n  console.log('this is development mode');\n}\n```\n\n----------------------------------------\n\nTITLE: Creating .env File\nDESCRIPTION: Shows an example of creating a .env file with environment variables.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/env-vars.mdx#2025-04-21_snippet_11\n\nLANGUAGE: shell\nCODE:\n```\nFOO=hello\nBAR=1\n```\n\n----------------------------------------\n\nTITLE: Using onAfterStartProdServer in a Rsbuild Plugin\nDESCRIPTION: Example of creating a plugin that uses the onAfterStartProdServer hook to access port and routes after the production server has started.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/hooks.mdx#2025-04-21_snippet_27\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onAfterStartProdServer(({ port, routes }) => {\n      console.log('this port is: ', port);\n      console.log('this routes is: ', routes);\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Environment-Specific Browserslist in Rsbuild\nDESCRIPTION: Setting different browser targets for development and production environments to reduce compilation overhead in development mode while maintaining proper compatibility in production.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/optimization/build-performance.mdx#2025-04-21_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\n[production]\nchrome >= 87\nedge >= 88\nfirefox >= 78\nsafari >= 14\n\n[development]\nlast 1 chrome version\nlast 1 firefox version\nlast 1 safari version\n```\n\n----------------------------------------\n\nTITLE: Configuration with Matching server.base and output.assetPrefix Prefixes\nDESCRIPTION: Example showing how to correctly configure output.assetPrefix to work with server.base when using Rsbuild preview. The assetPrefix should contain the same URL prefix as server.base.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/asset-prefix.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    assetPrefix: '/foo/bar/',\n  },\n  server: {\n    base: '/foo',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Rspack Extension Alias Configuration in JavaScript\nDESCRIPTION: This JavaScript snippet configures Rspack to handle file extensions in a TypeScript project, allowing `.js` to map to `.ts` and `.tsx`, and `.jsx` to map to `.tsx`.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/typescript.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nconst rspackConfig = {\n  resolve: {\n    extensionAlias: {\n      '.js': ['.js', '.ts', '.tsx'],\n      '.jsx': ['.jsx', '.tsx'],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining Environment Variables (.env file)\nDESCRIPTION: This `.env` file defines two environment variables: `FOO` and `BAR`. These environment variables are accessible in the Rsbuild configuration and in the client-side code. The .env file must be in the root directory of the project.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_17\n\nLANGUAGE: shell\nCODE:\n```\nFOO=hello\nBAR=1\n```\n\n----------------------------------------\n\nTITLE: Default Output Directory Configuration in JavaScript\nDESCRIPTION: Default configuration object for output directories, showing the standard file structure with separate directories for different asset types. The JS path varies based on the output target.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/dist-path.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultDistPath = {\n  root: 'dist',\n  html: './',\n  js: output.target === 'node' ? '' : 'static/js',\n  jsAsync: output.target === 'node' ? '' : 'static/js/async',\n  css: 'static/css',\n  cssAsync: 'static/css/async',\n  svg: 'static/svg',\n  font: 'static/font',\n  wasm: 'static/wasm',\n  image: 'static/image',\n  media: 'static/media',\n  assets: 'static/assets',\n};\n```\n\n----------------------------------------\n\nTITLE: Adding React plugin to Rsbuild configuration\nDESCRIPTION: This snippet demonstrates how to add the React plugin to the Rsbuild configuration for React projects.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/migration/modern-builder.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginReact } from '@rsbuild/plugin-react';\n\nexport default {\n  plugins: [pluginReact()],\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring High-Quality JS Source Maps in Rsbuild\nDESCRIPTION: Example of setting a specific source map format ('source-map') for JavaScript files in all build modes.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/source-map.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    sourceMap: {\n      js: 'source-map',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Manually Loading Environment Variables in TypeScript\nDESCRIPTION: Shows how to manually load environment variables using the loadEnv method when using Rsbuild's JavaScript API.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/env-vars.mdx#2025-04-21_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\nimport { loadEnv, mergeRsbuildConfig } from '@rsbuild/core';\n\n// By default, `publicVars` are variables prefixed with `PUBLIC_`\nconst { parsed, publicVars } = loadEnv();\n\nconst mergedConfig = mergeRsbuildConfig(\n  {\n    source: {\n      define: publicVars,\n    },\n  },\n  userConfig,\n);\n```\n\n----------------------------------------\n\nTITLE: Customizing the query\nDESCRIPTION: This configures the SVGR plugin to use a custom query suffix for matching SVGR transformations.  The query has to be a regular expression.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-svgr.mdx#2025-04-21_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\npluginSvgr({\n  query: /svgr/,\n});\n```\n\n----------------------------------------\n\nTITLE: Using onAfterBuild Hook in TypeScript\nDESCRIPTION: This example shows how to use the onAfterBuild hook to log the stats object after the build process completes.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/instance.mdx#2025-04-21_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\nrsbuild.onAfterBuild(({ stats }) => {\n  console.log(stats?.toJson());\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring SRI Enable Option\nDESCRIPTION: Example showing how to enable SRI with auto mode configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/security/sri.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  security: {\n    sri: {\n      enable: 'auto',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Modifying Module Request with api.resolve\nDESCRIPTION: This snippet demonstrates how to use `api.resolve` to modify module requests. It checks if the requested module is `'./a.js'` and, if so, changes the request to `'./b.js'`, effectively redirecting the module resolution.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/core.mdx#2025-04-21_snippet_12\n\nLANGUAGE: javascript\nCODE:\n```\napi.resolve(({ resolveData }) => {\n  if (resolveData.request === './a.js') {\n    resolveData.request = './b.js';\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Using onAfterStartProdServer Hook in TypeScript\nDESCRIPTION: This example shows how to use the onAfterStartProdServer hook to log the port and routes after the production server has started.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/instance.mdx#2025-04-21_snippet_20\n\nLANGUAGE: typescript\nCODE:\n```\nrsbuild.onAfterStartProdServer(({ port, routes }) => {\n  console.log('this port is: ', port);\n  console.log('this routes is: ', routes);\n});\n```\n\n----------------------------------------\n\nTITLE: Using Rspack Instance for Plugin Configuration\nDESCRIPTION: Example of using the rspack utility to access the Rspack instance and configure a DefinePlugin.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/bundler-chain.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    bundlerChain: (chain, { rspack }) => {\n      chain.plugin('extra-define').use(rspack.DefinePlugin, [\n        {\n          'process.env': {\n            NODE_ENV: JSON.stringify(process.env.NODE_ENV),\n          },\n        },\n      ]);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Module Federation in Rsbuild 0.4\nDESCRIPTION: Demonstrates how to use the new built-in moduleFederation option in Rsbuild 0.4 to easily configure module federation.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/community/releases/v0-4.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  moduleFederation: {\n    options: {\n      // ModuleFederationPluginOptions\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring SWC React Options (TS)\nDESCRIPTION: Configures the SWC React options within the `pluginReact` configuration. This allows customization of how SWC transforms React code, mirroring SWC's `jsc.transform.react` settings.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-react.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\npluginReact({\n  swcReactOptions: {\n    runtime: 'classic',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring styled-jsx with Rsbuild\nDESCRIPTION: Configuration for integrating styled-jsx CSS-in-JS solution with Rsbuild. This setup uses the SWC plugin for styled-jsx to enable component-scoped CSS in React applications.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/framework/react.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginReact } from '@rsbuild/plugin-react';\n\nexport default defineConfig({\n  plugins: [pluginReact()],\n  tools: {\n    swc: {\n      jsc: {\n        experimental: {\n          plugins: [['@swc/plugin-styled-jsx', {}]],\n        },\n      },\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring TypeScript Resolve Alias\nDESCRIPTION: Shows how to use the defineConfig utility from @rsbuild/core to set up module alias configurations in a TypeScript Rsbuild configuration file\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/configuration/rsbuild.mdx#2025-04-21_snippet_1\n\nLANGUAGE: ts\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\n\nexport default defineConfig({\n  resolve: {\n    alias: {\n      '@common': './src/common'\n    }\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Accessing Build Stats Through environments API in Rsbuild\nDESCRIPTION: Example demonstrating how to use the environments API to access build statistics for a specific environment from server-side middleware.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/setup-middlewares.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    setupMiddlewares: [\n      (middlewares, server) => {\n        middlewares.unshift(async (req, _res, next) => {\n          const webStats = await server.environments.web.getStats();\n\n          console.log(webStats.toJson({ all: false }));\n\n          next();\n        });\n      },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using Define for Tree Shaking in Rsbuild\nDESCRIPTION: TypeScript configuration example showing how to use source.define for tree shaking optimization by replacing environment variables to mark code paths as dead code during build.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/env-vars.mdx#2025-04-21_snippet_24\n\nLANGUAGE: ts\nCODE:\n```\nexport default {\n  source: {\n    define: {\n      'import.meta.env.LANGUAGE': JSON.stringify(import.meta.env.LANGUAGE),\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using stage Property in processAssets\nDESCRIPTION: This snippet demonstrates how to use the `stage` property in the `ProcessAssetsDescriptor` to specify the processing stage. Here, the `processAssets` handler will be executed during the `'additional'` stage.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/core.mdx#2025-04-21_snippet_19\n\nLANGUAGE: javascript\nCODE:\n```\napi.processAssets({ stage: 'additional' }, ({ assets }) => {\n  // ...\n});\n```\n\n----------------------------------------\n\nTITLE: Using onAfterBuild Hook in Rsbuild Plugin (TypeScript)\nDESCRIPTION: Example of implementing the onAfterBuild hook in a Rsbuild plugin to access compilation statistics after the build process completes, with information about whether it's the first compilation.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/hooks.mdx#2025-04-21_snippet_18\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onAfterBuild(({ isFirstCompile, stats }) => {\n      console.log(stats?.toJson(), isFirstCompile);\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Updating an Existing Asset with api.processAssets\nDESCRIPTION: This snippet demonstrates how to update an existing asset using `api.processAssets`. It retrieves the content of the asset `'foo.js'`, appends `'\\nconsole.log(\"hello world!\")'` to it, and updates the asset with the modified content.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/core.mdx#2025-04-21_snippet_16\n\nLANGUAGE: javascript\nCODE:\n```\napi.processAssets(\n  { stage: 'additions' },\n  ({ assets, sources, compilation }) => {\n    const asset = assets['foo.js'];\n    if (!asset) {\n      return;\n    }\n\n    const oldContent = asset.source();\n    const newContent = oldContent + '\\nconsole.log(\"hello world!\")';\n    const source = new sources.RawSource(newContent);\n\n    compilation.updateAsset(assetName, source);\n  },\n);\n```\n\n----------------------------------------\n\nTITLE: Configuring Rspack Resolve Alias\nDESCRIPTION: Example of setting up path aliases in Rspack configuration using object syntax.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/tools/rspack.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: {\n      resolve: {\n        alias: {\n          '@util': 'src/util',\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring HTML Output Path in Rsbuild\nDESCRIPTION: This snippet shows how to configure the output path for HTML files in Rsbuild. It sets the HTML output directory to 'html' and defines multiple entry points.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/server.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  source: {\n    entry: {\n      index: './src/index.ts',\n      foo: './src/pages/foo/index.ts',\n    },\n  },\n  output: {\n    distPath: {\n      html: 'html',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Running Bundle Analysis in Rsbuild\nDESCRIPTION: Command to enable bundle analysis during the build process, which helps identify large libraries and optimize bundle size by visualizing the composition of output bundles.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/optimization/optimize-bundle.mdx#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nBUNDLE_ANALYZE=true pnpm build\n```\n\n----------------------------------------\n\nTITLE: Accessing Dev Server in Rsbuild Plugin (TypeScript)\nDESCRIPTION: Demonstrates how to access the dev server instance through the onBeforeStartDevServer hook in a Rsbuild plugin.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/dev-server-api.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onBeforeStartDevServer(({ server }) => {\n      console.log('the server is ', server);\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using onBeforeStartDevServer Hook in Rsbuild Plugin (TypeScript)\nDESCRIPTION: Example of implementing the onBeforeStartDevServer hook in a Rsbuild plugin to access the development server and environment contexts before the dev server starts, enabling server customization.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/hooks.mdx#2025-04-21_snippet_20\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onBeforeStartDevServer(({ server, environments }) => {\n      console.log('before starting dev server.');\n      console.log('the server is ', server);\n      console.log('the environments contexts are: ', environments);\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Rspack for Production Builds in Rsbuild\nDESCRIPTION: This snippet shows how to adjust the Rspack configuration specifically for production builds using the isProd utility.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/rspack.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: (chain, { isProd }) => {\n      if (isProd) {\n        chain.devtool('source-map');\n      }\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Basic Alias Configuration in Rsbuild\nDESCRIPTION: Example of setting up a basic alias in the Rsbuild configuration file to map @common to a local directory.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/resolve/alias.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  resolve: {\n    alias: {\n      '@common': './src/common',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Split-by-Size Strategy in JavaScript\nDESCRIPTION: This snippet demonstrates how to configure the 'split-by-size' strategy with custom minSize and maxSize values for chunk splitting in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/chunk-split.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  performance: {\n    chunkSplit: {\n      strategy: 'split-by-size',\n      minSize: 20000,\n      maxSize: 50000,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Initializing Rsbuild Context Properties\nDESCRIPTION: Demonstrates accessing various context properties provided by the Rsbuild instance, including version, root path, and build action information.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/instance.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nif (rsbuild.context.action === 'dev') {\n  // do something\n}\n```\n\n----------------------------------------\n\nTITLE: Resulting Script Tag with Crossorigin Attribute\nDESCRIPTION: The HTML output for script tags after compilation with the crossorigin configuration. This shows how the crossorigin attribute is applied to script tags that reference assets from the configured asset prefix domain.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/crossorigin.mdx#2025-04-21_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<script\n  defer\n  src=\"https://example.com/static/js/main.js\"\n  crossorigin=\"anonymous\"\n></script>\n```\n\n----------------------------------------\n\nTITLE: Using RsbuildConfig Type for Configuration\nDESCRIPTION: Shows how to import and use the RsbuildConfig type when defining Rsbuild configuration options.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/types.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { RsbuildConfig } from '@rsbuild/core';\n\nconst config: RsbuildConfig = {\n  // ...\n};\n```\n\n----------------------------------------\n\nTITLE: Basic Source Include Configuration\nDESCRIPTION: Demonstrates how to include additional directories for compilation using source.include configuration in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/source/include.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport path from 'node:path';\n\nexport default {\n  source: {\n    include: [path.resolve(__dirname, '../other-dir')],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Different Filenames for Development and Production\nDESCRIPTION: Example showing how to set different JavaScript filenames for development and production environments in Rsbuild configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/filename.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst isProd = process.env.NODE_ENV === 'production';\n\nexport default {\n  output: {\n    filename: {\n      js: isProd ? '[name]_script.[contenthash:8].js' : '[name]_script.js',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Creating Dev Server Instance - JavaScript\nDESCRIPTION: This snippet demonstrates how to obtain an instance of the Rsbuild development server using the createDevServer method. It allows developers to access instance methods for further integration into custom servers.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/server.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nconst devServer = Rsbuild.createDevServer();\n```\n\n----------------------------------------\n\nTITLE: Removing Built-in Aliases in Rsbuild\nDESCRIPTION: Example of removing the built-in @swc/helpers alias using a function-based configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/resolve/alias.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  resolve: {\n    alias: (alias) => {\n      delete alias['@swc/helpers'];\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Verbose Inspection of Rsbuild Configuration\nDESCRIPTION: This command performs a verbose inspection of the Rsbuild configuration, including the complete content of functions in the configuration object.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/cli.mdx#2025-04-21_snippet_8\n\nLANGUAGE: bash\nCODE:\n```\nrsbuild inspect --verbose\n```\n\n----------------------------------------\n\nTITLE: Enabling Source Maps in Rsbuild Configuration\nDESCRIPTION: This JavaScript example demonstrates how to enable source maps for both JS and CSS files in Rsbuild configuration. It uses different source map types based on the build mode.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/source-map.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    sourceMap: {\n      js: mode === 'development' ? 'cheap-module-source-map' : 'source-map',\n      css: true,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Correct Component Definition for Preact Fast Refresh\nDESCRIPTION: Proper component definition pattern for Preact Fast Refresh that uses a named function component and then exports it, allowing prefresh to recognize it as a component.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/framework/preact.mdx#2025-04-21_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\nconst MyComponent = () => {\n  return <p>Want to refresh</p>;\n};\n\nexport default MyComponent;\n```\n\n----------------------------------------\n\nTITLE: Default Output Directory Structure in Rsbuild\nDESCRIPTION: Shows the basic directory structure for output files in Rsbuild, including static assets, CSS, JS, and HTML files.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/output-files.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ndist\n├── static\n│   ├── css\n│   │   ├── [name].[hash].css\n│   │   └── [name].[hash].css.map\n│   │\n│   └── js\n│       ├── [name].[hash].js\n│       ├── [name].[hash].js.LICENSE.txt\n│       └── [name].[hash].js.map\n│\n└── [name].html\n```\n\n----------------------------------------\n\nTITLE: Function-based SWC Configuration\nDESCRIPTION: Example of configuring SWC using a function that modifies the default config. Demonstrates how to modify the jsc options programmatically.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/swc.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    swc: (config) => {\n      config.jsc ||= {};\n      config.jsc.externalHelpers = false;\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring for Server-Side Rendering\nDESCRIPTION: Example of using the isServer utility to apply specific configurations for server-side rendering builds.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/bundler-chain.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    bundlerChain: (chain, { isServer }) => {\n      if (isServer) {\n        // ...\n      }\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Accessing Entry Configuration\nDESCRIPTION: Shows how to access the entry configuration within an Rsbuild plugin. The entry configuration defines the entry points for the build, corresponding to the `source.entry` option. This example logs the entry configuration to the console.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/environment-api.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\n```js\napi.modifyRspackConfig((config, { environment }) => {\n  console.log(environment.entry);\n  return config;\n});\n```\n```\n\n----------------------------------------\n\nTITLE: PNG Files Prefetch Configuration in TypeScript\nDESCRIPTION: Example of configuring prefetch for PNG files using type and include filters.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/prefetch.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  performance: {\n    prefetch: {\n      type: 'all-chunks',\n      include: [/\\.png$/],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Accessing Browserslist in JavaScript\nDESCRIPTION: Example demonstrating how to access the browserslist configuration in a plugin.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/environment-api.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\napi.modifyRspackConfig((config, { environment }) => {\n  console.log(environment.browserslist);\n  return config;\n});\n```\n\n----------------------------------------\n\nTITLE: Getting Plugins with rsbuild.getPlugins\nDESCRIPTION: Retrieves all Rsbuild plugins registered in the current Rsbuild instance. It can get either global plugins or environment-specific plugins based on the provided options.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_18\n\nLANGUAGE: typescript\nCODE:\n```\nfunction GetPlugins(options?: {\n  /**\n   * Get the plugins in the specified environment.\n   * If environment is not specified, get the global plugins.\n   */\n  environment: string;\n}): RsbuildPlugin[];\n```\n\nLANGUAGE: typescript\nCODE:\n```\n// get all plugins\nconsole.log(rsbuild.getPlugins());\n\n// get plugins in `web` environment\nconsole.log(rsbuild.getPlugins({ environment: 'web' }));\n```\n\n----------------------------------------\n\nTITLE: Enable Bundle Analysis via Configuration\nDESCRIPTION: Shows how to enable bundle analysis permanently through the Rsbuild configuration file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/bundle-analyze.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  performance: {\n    bundleAnalyze: {},\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using RsbuildPluginAPI in Plugin Setup\nDESCRIPTION: Demonstrates how to import and use the RsbuildPluginAPI type for the api object passed into plugin setup functions.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/types.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { RsbuildPluginAPI } from '@rsbuild/core';\n\nconst myPlugin = {\n  name: 'my-plugin',\n  setup(api: RsbuildPluginAPI) {},\n};\n```\n\n----------------------------------------\n\nTITLE: Managing Asset Prefixes with ensureAssetPrefix Function\nDESCRIPTION: Demonstrates the ensureAssetPrefix utility that intelligently prepends asset prefixes to URLs, handling both relative paths and absolute URLs appropriately.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/core.mdx#2025-04-21_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nimport { ensureAssetPrefix } from '@rsbuild/core';\n\nensureAssetPrefix('foo/bar.js', '/static/');\n// -> '/static/foo/bar.js'\n\nensureAssetPrefix('foo/bar.js', 'https://example.com/static/');\n// -> 'https://example.com/static/foo/bar.js'\n\nensureAssetPrefix(\n  'https://example.com/index.html',\n  'https://example.com/static/',\n);\n// -> 'https://example.com/index.html'\n```\n\n----------------------------------------\n\nTITLE: Importing Tailwind CSS Directives\nDESCRIPTION: This code snippet shows how to import the Tailwind CSS directives into your main CSS file.  It includes base, components, and utilities styles.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/styling/tailwindcss-v3.mdx#2025-04-21_snippet_5\n\nLANGUAGE: css\nCODE:\n```\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n```\n\n----------------------------------------\n\nTITLE: Setting Port via CLI in Rsbuild\nDESCRIPTION: Demonstrates how to set the port number using the Rsbuild CLI. The --port option has higher priority than the server.port configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/port.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx rsbuild dev --port 8080\n```\n\n----------------------------------------\n\nTITLE: Extending Static Asset Types with source.assetsInclude (TS)\nDESCRIPTION: Demonstrates how to extend the supported static asset types in Rsbuild using the `source.assetsInclude` configuration option.  This allows you to include additional file types, such as PDF files, as static assets. After the configuration, the PDF file can be imported and its URL will be resolved.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/static-assets.mdx#2025-04-21_snippet_18\n\nLANGUAGE: ts\nCODE:\n```\nexport default {\n  source: {\n    assetsInclude: /\\.pdf$/,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Accessing Build Stats in TypeScript\nDESCRIPTION: Example showing how to retrieve build statistics using the Environment API.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/environment-api.mdx#2025-04-21_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nconst webStats = await environments.web.getStats();\n\nconsole.log(webStats.toJson({ all: false }));\n```\n\n----------------------------------------\n\nTITLE: Conditional Logging based on Mode (TypeScript)\nDESCRIPTION: This code snippet demonstrates how to use `import.meta.env.MODE` to conditionally execute code based on the current build mode.  It logs a message to the console only when the mode is 'development'. The code shows how Rsbuild will replace the condition with `true` or `false` during the build process based on the mode.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nif (import.meta.env.MODE === 'development') {\n  console.log('this is development mode');\n}\n```\n\n----------------------------------------\n\nTITLE: Using Global Selectors in CSS Modules\nDESCRIPTION: Demonstrates how to use :global() selector in CSS Modules to define global styles that can be imported when exportGlobals is enabled.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/css-modules.mdx#2025-04-21_snippet_3\n\nLANGUAGE: css\nCODE:\n```\n:global(.blue) {\n  color: blue;\n}\n\n.red {\n  color: red;\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring HTML Plugin with Object Type in JavaScript\nDESCRIPTION: An example of configuring the HTML plugin using an object type. This configuration sets the scriptLoading option to 'blocking'.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/html-plugin.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    htmlPlugin: {\n      scriptLoading: 'blocking',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting REACT_PROFILER with cross-env (JSON)\nDESCRIPTION: Uses `cross-env` to set the `REACT_PROFILER` environment variable to true in the `package.json` script. This ensures cross-platform compatibility when setting environment variables.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-react.mdx#2025-04-21_snippet_6\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"build:profiler\": \"cross-env REACT_PROFILER=true rsbuild build\"\n  },\n  \"devDependencies\": {\n    \"cross-env\": \"^7.0.0\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Including Multiple File Types as Static Assets in Rsbuild\nDESCRIPTION: This example shows how to configure Rsbuild to treat multiple file types (json5 and pdf) as static assets using an array of regular expressions.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/assets-include.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  source: {\n    assetsInclude: [/\\.json5$/, /\\.pdf$/],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Enabling Build Cache in Rsbuild Configuration\nDESCRIPTION: Example of enabling the persistent build cache by setting buildCache to true in the Rsbuild configuration file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/build-cache.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  performance: {\n    buildCache: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Handling Inline Assets in JavaScript\nDESCRIPTION: Explains how Rsbuild handles asset inlining based on file size and demonstrates the use of ?url and ?inline query parameters to control asset loading behavior.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/static-assets.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nimport largeImage from './static/largeImage.png';\nimport smallImage from './static/smallImage.png';\n\nconsole.log(largeImage); // \"/static/largeImage.[hash].png\"\nconsole.log(smallImage); // \"data:image/png;base64,iVBORw0KGgo...\"\n\nimport image from './static/image.png?url';\nconsole.log(image); // \"/static/image.[hash].png\"\n\nimport image from './static/image.png?inline';\nconsole.log(image); // \"data:image/png;base64,iVBORw0KGgo...\"\n```\n\n----------------------------------------\n\nTITLE: Using CreateRsbuildOptions Type\nDESCRIPTION: Demonstrates how to import the CreateRsbuildOptions type, which defines the parameter type for the createRsbuild method.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/types.mdx#2025-04-21_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { CreateRsbuildOptions } from '@rsbuild/core';\n```\n\n----------------------------------------\n\nTITLE: Proxy Type Definition in Rsbuild\nDESCRIPTION: TypeScript type definitions for the proxy configuration options. It extends the http-proxy-middleware Options type and adds Rsbuild-specific options like bypass and context.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/proxy.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { Options as HttpProxyOptions } from 'http-proxy-middleware';\n\ntype Filter = string | string[] | ((pathname: string, req: Request) => boolean);\n\ntype ProxyOptions = HttpProxyOptions & {\n  bypass?: (\n    req: IncomingMessage,\n    res: ServerResponse,\n    proxyOptions: ProxyOptions,\n  ) => MaybePromise<string | undefined | null | boolean>;\n  context?: Filter;\n};\n\ntype ProxyConfig =\n  | ProxyOptions\n  | ProxyOptions[]\n  | Record<string, string>\n  | Record<string, ProxyOptions>;\n```\n\n----------------------------------------\n\nTITLE: Configuring Rsbuild Less Plugin\nDESCRIPTION: This configuration snippet demonstrates how to install and register the Less plugin in Rsbuild 0.7.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/community/releases/v0-7.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginLess } from '@rsbuild/plugin-less';\n\nexport default {\n  plugins: [pluginLess()],\n};\n```\n\n----------------------------------------\n\nTITLE: LoadConfig Function Type Definition\nDESCRIPTION: Type definition for the loadConfig function that loads Rsbuild configuration files.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/core.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nfunction loadConfig(params?: {\n  cwd?: string;\n  path?: string;\n  meta?: Record<string, unknown>;\n  envMode?: string;\n  loader?: 'jiti' | 'native';\n}): Promise<{\n  content: RsbuildConfig;\n  filePath: string | null;\n}>;\n```\n\n----------------------------------------\n\nTITLE: Using Path Alias in TypeScript\nDESCRIPTION: Example of using a configured path alias to import a module in TypeScript\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/alias.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport request from '@request'; // resolve to `src/common/request.ts`\n```\n\n----------------------------------------\n\nTITLE: Referencing Other Plugins in a Plugin\nDESCRIPTION: Example showing how a plugin can reference and register other Rsbuild plugins by returning an array of plugin instances.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/index.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginBar } from 'rsbuild-plugin-bar';\n\nexport const pluginFoo = (): RsbuildPlugin => {\n  const foo = {\n    name: 'plugin-foo',\n    setup(api) {\n      // ...\n    },\n  };\n  return [foo, pluginBar()];\n};\n```\n\n----------------------------------------\n\nTITLE: Modifying Default PostCSS Loader Options\nDESCRIPTION: Example of modifying default PostCSS loader options by updating the configuration object.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/tools/postcss.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    postcss: (opts) => {\n      opts.sourceMap = false;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Transform Processing Raw Buffer Data\nDESCRIPTION: Demonstrates how to use the `raw` property in the transform descriptor to receive the module's code as a Buffer instead of a string. This is useful when dealing with binary files, such as `.node` files.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/core.mdx#2025-04-21_snippet_11\n\nLANGUAGE: javascript\nCODE:\n```\napi.transform({ test: /\\.node$/, raw: true }, ({ code }) => {\n  // ...\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Externals in JavaScript\nDESCRIPTION: This JavaScript example demonstrates how to configure the output.externals option in Rsbuild. It excludes the 'react-dom' dependency from the build and maps it to the global 'ReactDOM' variable at runtime.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/externals.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    externals: {\n      'react-dom': 'ReactDOM',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using onAfterEnvironmentCompile in a Rsbuild Plugin\nDESCRIPTION: Example of creating a plugin that uses the onAfterEnvironmentCompile hook to access compilation statistics after an environment has been compiled.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/hooks.mdx#2025-04-21_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onAfterEnvironmentCompile(({ isFirstCompile, stats }) => {\n      console.log(stats?.toJson(), isFirstCompile);\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Specify HTML Template and Source Entry in Rsbuild Config\nDESCRIPTION: This snippet updates the Rsbuild config to set HTML template and source entry. It includes ‘html.template’ and ‘source.entry’ parameters, ensuring custom HTML setup and correct source entry point. Assumes correct Rsbuild version with support for these fields. The expected output is an updated configuration that dictates build entries and HTML templates.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/vite.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  html: {\n    template: './index.html',\n  },\n  source: {\n    entry: {\n      index: './src/main.ts',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Eager Loading for Dynamic Imports in Rsbuild\nDESCRIPTION: Configuration to enable eager loading of dynamic imports, allowing async chunks to be inlined when using output.inlineScripts.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/inline-scripts.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    inlineScripts: true,\n  },\n  tools: {\n    rspack: {\n      module: {\n        parser: {\n          javascript: {\n            dynamicImportMode: 'eager',\n          },\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using onBeforeBuild Hook in Rsbuild Plugin (TypeScript)\nDESCRIPTION: Example of implementing the onBeforeBuild hook in a Rsbuild plugin to access bundler configurations before the build process starts, allowing for last-minute configuration inspection.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/hooks.mdx#2025-04-21_snippet_17\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onBeforeBuild(({ bundlerConfigs }) => {\n      console.log('the bundler config is ', bundlerConfigs);\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring output.emitAssets in Rsbuild for Web and Node Environments\nDESCRIPTION: This code demonstrates how to configure Rsbuild to emit static assets for web builds while preventing asset emission for node builds. This is useful in SSR scenarios where you want to avoid duplicate static assets in the node bundle.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/emit-assets.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  environments: {\n    web: {\n      output: {\n        target: 'web',\n      },\n    },\n    node: {\n      output: {\n        target: 'node',\n        emitAssets: false,\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using onBeforeBuild in a Rsbuild Plugin\nDESCRIPTION: Example of creating a plugin that uses the onBeforeBuild hook to log bundler configurations before the build process starts.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/hooks.mdx#2025-04-21_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onBeforeBuild(({ bundlerConfigs }) => {\n      console.log('the bundler config is ', bundlerConfigs);\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Initializing Rspack Configs with rsbuild.initConfigs\nDESCRIPTION: Initializes and returns the internal Rspack configurations used by Rsbuild. This method processes all plugins and configurations to generate the final Rspack configs. It's automatically invoked by build and dev server methods.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_21\n\nLANGUAGE: typescript\nCODE:\n```\nfunction InitConfigs(): Promise<{\n  rspackConfigs: Rspack.Configuration[];\n}>;\n```\n\nLANGUAGE: typescript\nCODE:\n```\nconst rspackConfigs = await rsbuild.initConfigs();\n\nconsole.log(rspackConfigs);\n```\n\n----------------------------------------\n\nTITLE: Using Tailwind CSS Utility Classes\nDESCRIPTION: This code snippet shows an example of using Tailwind CSS utility classes within an HTML element to style text.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/styling/tailwindcss-v3.mdx#2025-04-21_snippet_6\n\nLANGUAGE: html\nCODE:\n```\n<h1 class=\"text-3xl font-bold underline\">Hello world!</h1>\n```\n\n----------------------------------------\n\nTITLE: Registering SWC Plugin for Styled Components in Rsbuild\nDESCRIPTION: This snippet demonstrates how to register the @swc/plugin-styled-components plugin using the tools.swc configuration in Rsbuild. It configures the SWC loader to use the styled-components plugin.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/configuration/swc.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    swc: {\n      jsc: {\n        experimental: {\n          plugins: [['@swc/plugin-styled-components', {}]],\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Multiple Response Headers - TypeScript\nDESCRIPTION: This snippet illustrates how to configure multiple values for a single response header in Rsbuild. It demonstrates setting multiple `Set-Cookie` headers using an array of strings, allowing the server to send multiple headers with the same name. The implementation follows the same pattern as the single header configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/server/headers.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    headers: {\n      // 多个 Set-Cookie headers\n      'Set-Cookie': ['type=ninja', 'language=javascript'],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Default Include Configuration in TypeScript\nDESCRIPTION: Shows the default include patterns used by Rsbuild's swc-loader for TypeScript, JSX, and JavaScript files.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/include.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst defaultInclude = [\n  {\n    and: [rootPath, { not: /[\\\\/]node_modules[\\\\/]/ }],\n  },\n  /\\.(?:ts|tsx|jsx|mts|cts)$/,\n];\n```\n\n----------------------------------------\n\nTITLE: Defining Plugin with Pre-dependencies\nDESCRIPTION: Illustrates how to define a plugin that depends on another plugin to execute before it. This utilizes the `pre` property to ensure the execution order of plugins. The Foo plugin will execute before the Bar plugin.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/core.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst pluginFoo = {\n  name: 'plugin-foo',\n};\n\nconst pluginBar = {\n  name: 'plugin-bar',\n  pre: ['plugin-foo'],\n};\n```\n\n----------------------------------------\n\nTITLE: Customizing CSS Minification Options\nDESCRIPTION: Example showing how to customize Lightning CSS minification options by disabling error recovery.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/minify.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    minify: {\n      cssOptions: {\n        minimizerOptions: {\n          errorRecovery: false,\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring worker-rspack-loader in Rsbuild\nDESCRIPTION: This configuration snippet shows how to set up worker-rspack-loader as an alternative to worker-loader in a Rsbuild or Rspack project, including resolver and module rule settings.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/web-workers.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: {\n      resolveLoader: {\n        alias: {\n          // Modify the resolution of worker-loader in the inline loader, such as `worker-loader!pdfjs-dist/es5/build/pdf.worker.js`\n          'worker-loader': require.resolve('worker-rspack-loader'),\n        },\n      },\n      module: {\n        rules: [\n          {\n            test: /\\.worker\\.js$/,\n            loader: 'worker-rspack-loader',\n          },\n        ],\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Registering Middlewares in Rsbuild Config\nDESCRIPTION: This configuration demonstrates how to register custom middlewares in Rsbuild using the dev.setupMiddlewares option. It adds a simple middleware function to the server.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/server.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    setupMiddlewares: [\n      (middlewares, server) => {\n        middlewares.push((req, res, next) => {\n          next();\n        });\n      },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Preact Plugin in Rsbuild\nDESCRIPTION: Configuration for integrating Preact with Rsbuild by adding the Preact plugin to the Rsbuild configuration. The plugin automatically adds necessary settings for Preact builds.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/framework/preact.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginPreact } from '@rsbuild/plugin-preact';\n\nexport default defineConfig({\n  plugins: [pluginPreact()],\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring all-in-one strategy in Rsbuild\nDESCRIPTION: This code snippet demonstrates how to configure the `all-in-one` strategy in Rsbuild, which bundles all code into a single chunk. While simple, this strategy can lead to a large JS file and reduced page loading performance, except for dynamically imported chunks.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/optimization/code-splitting.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  performance: {\n    chunkSplit: {\n      strategy: 'all-in-one',\n    },\n  },\n};\n\n```\n\n----------------------------------------\n\nTITLE: Registering a Plugin in Rsbuild Configuration\nDESCRIPTION: Example showing how to register a custom plugin in the Rsbuild configuration file with options.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/index.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginFoo } from './pluginFoo';\n\nexport default {\n  plugins: [pluginFoo({ message: 'world!' })],\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Image Filenames Based on File Path\nDESCRIPTION: Demonstrates how to set image filenames dynamically based on the original filename using a function.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/filename.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    filename: {\n      image: (pathData) => {\n        if (pathData.filename?.includes('foo')) {\n          return '/foo/[name][ext]';\n        }\n        return '/bar/[name][ext]';\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: WebSocket Proxy Configuration in Rsbuild\nDESCRIPTION: Configuration for proxying WebSocket requests. Setting the 'ws' option to true enables WebSocket proxying for the specified path.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/proxy.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  server: {\n    proxy: {\n      '/rsbuild-hmr': {\n        target: 'http://localhost:3000', // will proxy to ws://localhost:3000/rsbuild-hmr\n        ws: true,\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Multiple Pre-Entry Scripts in Rsbuild\nDESCRIPTION: Configuration example for adding multiple pre-entry scripts in Rsbuild. This setup demonstrates how to include multiple polyfill scripts that will be executed in the specified order.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/pre-entry.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  source: {\n    preEntry: ['./src/polyfill-a.ts', './src/polyfill-b.ts'],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: HTML Output with Inlined JavaScript\nDESCRIPTION: Example HTML output showing how JavaScript code is inlined directly in the HTML file when the inlineScripts option is enabled.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/inline-scripts.mdx#2025-04-21_snippet_4\n\nLANGUAGE: html\nCODE:\n```\n<html>\n  <head>\n    <script>\n      // content of dist/static/js/main.js\n    </script>\n  </head>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Importing Rsbuild (CommonJS)\nDESCRIPTION: This code snippet shows how to import the createRsbuild function using CommonJS syntax. The createRsbuild function is imported from the '@rsbuild/core' package using the require function. This approach is an alternative to ES modules.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/start/index.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nconst { createRsbuild } = require('@rsbuild/core');\n```\n\n----------------------------------------\n\nTITLE: Using onAfterCreateCompiler Hook in Rsbuild Plugin (TypeScript)\nDESCRIPTION: Example of implementing the onAfterCreateCompiler hook in a Rsbuild plugin to access the Rspack compiler instance after it has been created, enabling compiler-level customizations.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/hooks.mdx#2025-04-21_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onAfterCreateCompiler(({ compiler }) => {\n      console.log('the compiler is ', compiler);\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Registering Vue Plugin in Rsbuild\nDESCRIPTION: This code snippet demonstrates how to register the Vue plugin in the `rsbuild.config.ts` file. It imports the `pluginVue` function from the `@rsbuild/plugin-vue` package and adds it to the `plugins` array in the Rsbuild configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/list/plugin-vue.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginVue } from '@rsbuild/plugin-vue';\n\nexport default {\n  plugins: [pluginVue()],\n};\n```\n\n----------------------------------------\n\nTITLE: Type Definitions for Server URL Printing in TypeScript\nDESCRIPTION: TypeScript type definitions for Routes array and PrintUrls configuration option, defining the structure for URL printing customization.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/print-urls.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype Routes = Array<{\n  entryName: string;\n  pathname: string;\n}>;\n\ntype PrintUrls =\n  | boolean\n  | ((params: {\n      urls: string[];\n      port: number;\n      routes: Routes;\n      protocol: string;\n    }) => string[] | void);\n```\n\n----------------------------------------\n\nTITLE: Storing DevServer Instance for Later Use\nDESCRIPTION: Example of storing the dev server instance for access in other hooks, including managing the reference throughout the plugin lifecycle.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/hooks.mdx#2025-04-21_snippet_21\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { RsbuildDevServer } from '@rsbuild/core';\n\nconst myPlugin = () => ({\n  setup(api) {\n    let devServer: RsbuildDevServer | null = null;\n\n    api.onBeforeStartDevServer(({ server, environments }) => {\n      devServer = server;\n    });\n\n    api.transform({ test: /\\.foo$/ }, ({ code }) => {\n      if (devServer) {\n        // access server API\n      }\n      return code;\n    });\n\n    api.onCloseDevServer(() => {\n      devServer = null;\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Conditional Style Injection Based on Environment (TypeScript)\nDESCRIPTION: This example shows how to conditionally enable style injection based on the environment. It's recommended to use injection in development and separate CSS bundles in production for better performance.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/inject-styles.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    injectStyles: process.env.NODE_ENV === 'development',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using getNormalizedConfig Method in TypeScript\nDESCRIPTION: This example shows how to use the getNormalizedConfig method within the onBeforeBuild hook to access and log a normalized configuration value.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/instance.mdx#2025-04-21_snippet_24\n\nLANGUAGE: typescript\nCODE:\n```\nrsbuild.onBeforeBuild(() => {\n  const config = rsbuild.getNormalizedConfig();\n  console.log(config.html.title);\n});\n```\n\n----------------------------------------\n\nTITLE: Adding ESLint Plugin to Rsbuild Configuration\nDESCRIPTION: Register the ESLint plugin to run linting during development and build processes\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/cra.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginEslint } from '@rsbuild/plugin-eslint';\n\nexport default {\n  plugins: [pluginEslint()],\n};\n```\n\n----------------------------------------\n\nTITLE: Entry Type Definition in TypeScript\nDESCRIPTION: Type definition for entry configuration that supports string paths, arrays, or Rspack entry descriptions with optional HTML generation.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/entry.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype Entry = Record<\\n  string,\\n  string | string[] | (Rspack.EntryDescription & { html?: boolean })\\n>;\n```\n\n----------------------------------------\n\nTITLE: Customizing HTML Fallback in Rsbuild\nDESCRIPTION: This configuration demonstrates how to customize the HTML fallback behavior in Rsbuild. It disables the default htmlFallback and sets up a custom historyApiFallback to serve 'main.html' for the root path.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/server.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  source: {\n    entry: {\n      main: './src/index.ts',\n    },\n  },\n  server: {\n    htmlFallback: false,\n    historyApiFallback: {\n      index: '/main.html',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling Progress Bar in Rsbuild Configuration\nDESCRIPTION: Example of disabling the progress bar in Rsbuild configuration using JavaScript.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/progress-bar.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  dev: {\n    progressBar: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining ModifyBundlerChain Type with TypeScript\nDESCRIPTION: Type definition for the modifyBundlerChain hook, which allows modification of Rspack configuration using the rspack-chain API. It provides similar utilities as modifyRspackConfig.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/hooks.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\ntype ModifyBundlerChainUtils = {\n  environment: EnvironmentContext;\n  env: string;\n  isDev: boolean;\n  isProd: boolean;\n  target: RsbuildTarget;\n  isServer: boolean;\n  isWebWorker: boolean;\n  CHAIN_ID: ChainIdentifier;\n  HtmlPlugin: typeof import('html-rspack-plugin');\n  bundler: {\n    // some Rspack built-in plugins\n  };\n};\n\nfunction ModifyBundlerChain(\n  callback: (\n    chain: RspackChain,\n    utils: ModifyBundlerChainUtils,\n  ) => Promise<void> | void,\n): void;\n```\n\n----------------------------------------\n\nTITLE: Migrating Glob Import from Vite to Rsbuild\nDESCRIPTION: Compares Vite's import.meta.glob() with Rsbuild's import.meta.webpackContext() for importing multiple modules\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/vite.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\n// Vite\nconst modules = import.meta.glob('./dir/*.js');\n\nfor (const path in modules) {\n  modules[path]().then((mod) => {\n    console.log(path, mod);\n  });\n}\n```\n\nLANGUAGE: javascript\nCODE:\n```\n// Rsbuild\nconst context = import.meta.webpackContext('./dir', {\n  recursive: false,\n  regExp: /\\.js$/,\n});\n\nfor (const path of context.keys()) {\n  const mod = context(path);\n  console.log(path, mod);\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Rsbuild Configuration Structure\nDESCRIPTION: Demonstrates the complete configuration structure for Rsbuild, showing different configuration sections including plugins, development, HTML, tools, output, and more\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/configuration/rsbuild.mdx#2025-04-21_snippet_0\n\nLANGUAGE: js\nCODE:\n```\nexport default {\n  plugins: [\n    // 配置 Rsbuild 插件\n  ],\n  dev: {\n    // 与本地开发有关的选项\n  },\n  html: {\n    // 与 HTML 生成有关的选项\n  },\n  tools: {\n    // 与底层工具有关的选项\n  },\n  output: {\n    // 与构建产物有关的选项\n  },\n  resolve: {\n    // 与模块解析相关的选项\n  },\n  source: {\n    // 与输入的源代码相关的选项\n  },\n  server: {\n    // 与 Rsbuild 服务器有关的选项\n  },\n  security: {\n    // 与 Web 安全有关的选项\n  },\n  performance: {\n    // 与构建性能、运行时性能有关的选项\n  },\n  moduleFederation: {\n    // 与模块联邦有关的选项\n  },\n  environments: {\n    // 为每个环境定义不同的 Rsbuild 配置\n  }\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling Named Exports for CSS Modules\nDESCRIPTION: Configures CSS Modules to enable ES modules named exports for class names, allowing direct import of class names as variables.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/css-modules.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    cssModules: {\n      namedExport: true,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Previewing Production Build\nDESCRIPTION: Demonstrates using rsbuild.preview() to start a local server for previewing production build artifacts with error handling.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/instance.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { logger } from '@rsbuild/core';\n\n// Start preview server\ntry {\n  const { urls, port } = await rsbuild.preview();\n  console.log(urls);\n  console.log(port);\n} catch (err) {\n  logger.error('Failed to start preview server.');\n  logger.error(err);\n  process.exit(1);\n}\n```\n\n----------------------------------------\n\nTITLE: Adding SVGR plugin to Rsbuild configuration\nDESCRIPTION: This code shows how to add the SVGR plugin to the Rsbuild configuration for projects using SVGR.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/migration/modern-builder.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginSvgr } from '@rsbuild/plugin-svgr';\n\nexport default {\n  plugins: [pluginSvgr()],\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling Asset Inlining in Rsbuild Configuration\nDESCRIPTION: This configuration example shows how to completely disable the inlining of static assets by setting the dataUriLimit to 0.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/data-uri-limit.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    dataUriLimit: 0,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: PNG Files Preload Configuration - TypeScript\nDESCRIPTION: Example of configuring preload for PNG files using type and include filters.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/preload.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  performance: {\n    preload: {\n      type: 'all-chunks',\n      include: [/\\.png$/],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Environment API Interface Definition in TypeScript\nDESCRIPTION: TypeScript interface defining the structure of the Environment API for accessing build outputs.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/environment-api.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\ntype EnvironmentAPI = {\n  [name: string]: {\n    getStats: () => Promise<Stats>;\n    loadBundle: <T = unknown>(entryName: string) => Promise<T>;\n    getTransformedHtml: (entryName: string) => Promise<string>;\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Extending Rspack Resolve Extensions in Rsbuild\nDESCRIPTION: This example shows how to add a custom file extension to the Rspack resolve.extensions array using the tools.rspack object in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/rspack.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: {\n      resolve: {\n        // merged with the built-in resolve.extensions\n        extensions: ['.foo'],\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Context Option in Proxy Configuration\nDESCRIPTION: Using the context option to proxy multiple paths to the same target. This configuration proxies both '/auth' and '/api' paths to the same server.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/proxy.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  server: {\n    proxy: [\n      {\n        context: ['/auth', '/api'],\n        target: 'http://localhost:3000',\n      },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Asset Prefix in Rsbuild\nDESCRIPTION: Set static asset URL prefix for deployment, supporting local base paths and CDN configurations\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/static-deploy.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\n\nexport default defineConfig({\n  output: {\n    assetPrefix: '/some-base-folder/'\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Specifying Additional Build Dependencies in Rsbuild Configuration\nDESCRIPTION: Example of adding custom build dependencies to the buildCache configuration, which are used to invalidate the filesystem cache.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/build-cache.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  performance: {\n    buildCache: {\n      buildDependencies: [__filename],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Accessing Rspack Core Functionality\nDESCRIPTION: Demonstrates how to access Rspack APIs and plugins directly from @rsbuild/core without installing @rspack/core separately, preventing version conflicts.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/core.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\n// the same as `import { rspack } from '@rspack/core'`\nimport { rspack } from '@rsbuild/core';\n\nconsole.log(rspack.rspackVersion); // a.b.c\nconsole.log(rspack.util.createHash);\nconsole.log(rspack.BannerPlugin);\n```\n\n----------------------------------------\n\nTITLE: Enabling Inline Scripts Configuration in TypeScript\nDESCRIPTION: This TypeScript snippet configures Rsbuild to inline JavaScript files into HTML instead of writing them separately, an efficiency-driven approach that negates HTTP requests for scripts. Relevant for projects needing reduced network requests or where inline scripts are viable.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/optimization/inline-assets.mdx#2025-04-21_snippet_6\n\nLANGUAGE: TypeScript\nCODE:\n```\nexport default {\n  output: {\n    inlineScripts: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Absolute Root Path in Rsbuild Configuration (TypeScript)\nDESCRIPTION: This example shows how to set an absolute path for the root directory in the Rsbuild configuration file. It uses the 'join' function from 'node:path' to create an absolute path.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/root.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { join } from 'node:path';\n\nexport default {\n  root: join(__dirname, 'foo'),\n};\n```\n\n----------------------------------------\n\nTITLE: Conditionally Enabling Build Cache in Development Mode\nDESCRIPTION: Example of enabling the build cache only in development mode by checking the NODE_ENV environment variable.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/build-cache.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst isDev = process.env.NODE_ENV === 'development';\n\nexport default {\n  performance: {\n    buildCache: isDev,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring PublicDir with Relative Path\nDESCRIPTION: Example of configuring server.publicDir with a relative path, which will be resolved relative to the project root directory.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/public-dir.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    publicDir: {\n      name: '../some-public',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Asset Prefix for CDN Deployment\nDESCRIPTION: Configuration example for setting up asset prefix when using a CDN for static assets.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/static-deploy.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\n\nexport default defineConfig({\n  output: {\n    assetPrefix: 'https://cdn.com/path/',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using onCloseDevServer in a Rsbuild Plugin\nDESCRIPTION: Example of creating a plugin that uses the onCloseDevServer hook to execute code when the dev server is closed.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/hooks.mdx#2025-04-21_snippet_25\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onCloseDevServer(async () => {\n      console.log('close dev server!');\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using Function to Control Inlining Based on File Size\nDESCRIPTION: JavaScript configuration example showing how to use a function to conditionally inline CSS files based on their size, in this case inlining files smaller than 10KB.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/inline-styles.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    inlineStyles({ size }) {\n      return size < 10 * 1000;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling NODE_ENV Injection in TypeScript\nDESCRIPTION: Demonstrates how to disable the automatic injection of NODE_ENV using Rspack configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/env-vars.mdx#2025-04-21_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: { optimization: { nodeEnv: false } },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Default Values for Environment Configuration in Rsbuild Plugin (TypeScript)\nDESCRIPTION: Example of using modifyEnvironmentConfig in a Rsbuild plugin to set default values for a specific environment. The plugin checks if the environment is 'web' and sets a default HTML title.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/hooks.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.modifyEnvironmentConfig((config, { name }) => {\n      if (name !== 'web') {\n        return config;\n      }\n      config.html.title = 'My Default Title';\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Multiple PostCSS Options Based on File Path in Rsbuild\nDESCRIPTION: Example of using different PostCSS options for different file paths in Rsbuild by setting postcssOptions as a function.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/postcss.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    postcss: {\n      postcssOptions: (loaderContext) => {\n        if (/foo/.test(loaderContext.resourcePath)) {\n          return {\n            plugins: [require('postcss-plugin-a')],\n          };\n        }\n        return {\n          plugins: [require('postcss-plugin-b')],\n        };\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using port placeholder in dev.assetPrefix\nDESCRIPTION: Example showing how to use the <port> placeholder in dev.assetPrefix to handle dynamic port allocation by Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/asset-prefix.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    assetPrefix: 'http://localhost:<port>/',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Including All Files in Manifest with filter Function\nDESCRIPTION: Example of configuring the manifest.filter function to include all files in the manifest by always returning true.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/manifest.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    manifest: {\n      filter: () => true,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling React Aliases in Preact Plugin\nDESCRIPTION: Disables the default behavior of aliasing `react` and `react-dom` to `preact/compat`. This can be useful if you want to use a different React compatibility layer or if you don't need React compatibility at all. `reactAliasesEnabled` is set to `false` in the plugin options.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/list/plugin-preact.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\npluginPreact({\n  reactAliasesEnabled: false,\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring PostCSS with Tailwind CSS - JavaScript\nDESCRIPTION: This snippet shows how to configure PostCSS to use the Tailwind CSS plugin by creating a configuration file named postcss.config.cjs. It exports an object that specifies Tailwind CSS as a plugin.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/styling/tailwindcss-v3.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nmodule.exports = {\n  plugins: {\n    tailwindcss: {},\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling Asset Inlining Completely\nDESCRIPTION: Example showing how to disable inlining of all static assets by setting the threshold to 0.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/data-uri-limit.mdx#2025-04-21_snippet_3\n\nLANGUAGE: js\nCODE:\n```\nexport default {\n  output: {\n    dataUriLimit: 0,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: LoadEnv Options and Result Type Definition\nDESCRIPTION: Type definitions for loadEnv function options and its return value.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/core.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\ntype LoadEnvOptions = {\n  cwd?: string;\n  mode?: string;\n  prefixes?: string[];\n  processEnv?: Record<string, string>;\n};\n\ntype LoadEnvResult = {\n  parsed: Record<string, string>;\n  filePaths: string[];\n  rawPublicVars: Record<string, string | undefined>;\n  publicVars: Record<string, string>;\n  cleanup: () => void;\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring External React Dependencies\nDESCRIPTION: Example of how to configure external React dependencies in the build configuration, which can affect HMR functionality if not properly set up with development builds.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/faq/hmr.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    externals: {\n      react: 'React',\n      'react-dom': 'ReactDOM',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Testing Build Order with Rsbuild Plugin in TypeScript\nDESCRIPTION: This snippet provides a simple plugin for Rsbuild that logs the start and completion of the build process for different environments. It outputs the build order and statistics during the compilation phase.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/environments.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nconst testPlugin: RsbuildPlugin = {\n  name: 'test-plugin',\n  setup(api) {\n    api.onBeforeEnvironmentCompile(({ environment }) => {\n      console.log('build start:', environment.name);\n    });\n\n    api.onAfterEnvironmentCompile(({ stats, environment }) => {\n      console.log('build done:', environment.name);\n      console.log('stats', stats);\n    });\n  },\n};\n\n// The plugin will output:\n// - build start: web\n// - build done: web\n// - stats: { ... }\n// - build start: node\n// - build done: node\n// - stats: { ... }\n```\n\n----------------------------------------\n\nTITLE: Using Async Function with bundlerChain\nDESCRIPTION: This example shows how to use an async function with tools.bundlerChain to modify Rspack configuration with asynchronously fetched values.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/configuration/rspack.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    bundlerChain: (chain, { env }) => {\n      const value = await fetchValue();\n      chain.devtool(value);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Importing RsbuildInstance Type in TypeScript\nDESCRIPTION: Demonstrates how to import and use the RsbuildInstance type, which corresponds to the return value of the createRsbuild method.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/types.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { RsbuildInstance } from '@rsbuild/core';\n\nlet rsbuild: RsbuildInstance;\n```\n\n----------------------------------------\n\nTITLE: Accessing HTML Paths in JavaScript\nDESCRIPTION: Example demonstrating how to access HTML asset paths in a plugin.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/environment-api.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\napi.modifyRspackConfig((config, { environment }) => {\n  console.log(environment.htmlPaths);\n  return config;\n});\n```\n\n----------------------------------------\n\nTITLE: Importing Tailwind CSS in CSS File\nDESCRIPTION: This CSS snippet demonstrates how to import Tailwind CSS into the main CSS entry file of the project. It uses the @import directive to include Tailwind CSS, which is necessary for accessing Tailwind's utility classes.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/styling/tailwindcss.mdx#2025-04-21_snippet_1\n\nLANGUAGE: css\nCODE:\n```\n@import 'tailwindcss';\n```\n\n----------------------------------------\n\nTITLE: Configuring ESLint in package.json\nDESCRIPTION: Configuration for adding ESLint to a Rsbuild project, including the lint script and eslintConfig settings that extend CRA's ESLint configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/migration/cra.mdx#2025-04-21_snippet_14\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"lint\": \"eslint src\"\n  },\n  \"eslintConfig\": {\n    \"extends\": [\"react-app\", \"react-app/jest\"]\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Enabling Build Profiling in Rsbuild Configuration (JavaScript)\nDESCRIPTION: This snippet demonstrates how to enable the performance.profile option in the Rsbuild configuration. When set to true, it activates build profiling, generating timing information for each module and creating a stats.json file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/profile.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  performance: {\n    profile: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: HTML Output with Module Script Loading\nDESCRIPTION: Shows the resulting HTML output when using 'module' scriptLoading, where scripts include the type=\"module\" attribute for ES module support.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/script-loading.mdx#2025-04-21_snippet_4\n\nLANGUAGE: html\nCODE:\n```\n<head>\n  <script type=\"module\" src=\"/static/js/main.js\"></script>\n</head>\n<body></body>\n```\n\n----------------------------------------\n\nTITLE: Configuring SRI with Crossorigin in Rsbuild\nDESCRIPTION: Example configuration showing how to enable SRI and set crossorigin attribute for proper cross-origin resource validation.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/security/sri.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  security: {\n    sri: {\n      enable: 'auto',\n    },\n  },\n  html: {\n    crossorigin: 'anonymous',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Merging SVGO Plugin Configurations\nDESCRIPTION: This example demonstrates how SVGO plugin configurations are merged.  The provided plugins are merged with the default plugins, overriding settings when necessary. Here the `cleanupIds` option is overridden.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-svgr.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\npluginSvgr({\n  svgrOptions: {\n    svgoConfig: {\n      plugins: [\n        {\n          name: 'preset-default',\n          params: {\n            overrides: {\n              cleanupIds: false,\n            },\n          },\n        },\n      ],\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Enabling Inline Styles Configuration in TypeScript\nDESCRIPTION: This snippet enables inlining CSS files into HTML documents via Rsbuild configuration, which supports scenarios reducing separate file HTTP requests, while emphasizing careful use due to possible increases in HTML size and the impact on cache.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/optimization/inline-assets.mdx#2025-04-21_snippet_7\n\nLANGUAGE: TypeScript\nCODE:\n```\nexport default {\n  output: {\n    inlineStyles: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring CSS Injection Based on Environment in Rsbuild (TypeScript)\nDESCRIPTION: This example shows how to conditionally enable CSS injection based on the environment. It's recommended to use injectStyles only in development mode, while keeping the default behavior of extracting CSS into separate files for production builds.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/inject-styles.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    injectStyles: process.env.NODE_ENV === 'development',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Module Script Loading in Rsbuild\nDESCRIPTION: Example configuration for setting scriptLoading to 'module', which adds type=\"module\" to script tags for ES module support with defer-like behavior.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/script-loading.mdx#2025-04-21_snippet_3\n\nLANGUAGE: js\nCODE:\n```\nexport default {\n  html: {\n    scriptLoading: 'module',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Custom Index Page Configuration in TypeScript\nDESCRIPTION: Configuration example showing how to set a custom index page (main.html) for fallback behavior while disabling HTML fallback.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/history-api-fallback.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  source: {\n    entry: {\n      main: './src/index.ts',\n    },\n  },\n  server: {\n    htmlFallback: false,\n    historyApiFallback: {\n      index: '/main.html',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using onBeforeEnvironmentCompile Hook in Rsbuild Plugin (TypeScript)\nDESCRIPTION: Example of implementing the onBeforeEnvironmentCompile hook in a Rsbuild plugin to inspect the bundler configuration for a specific environment before compilation starts.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/hooks.mdx#2025-04-21_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onBeforeEnvironmentCompile(({ bundlerConfig, environment }) => {\n      console.log(\n        `the bundler config for the ${environment.name} is `,\n        bundlerConfig,\n      );\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Conditional Filename Hashing in Rsbuild\nDESCRIPTION: This code snippet demonstrates the correct way to conditionally apply filename hashing based on the `NODE_ENV` environment variable. It shows how to only apply content hashing in production mode to avoid issues with hot reloading during development. The configuration uses a ternary operator to determine whether to include the content hash in the CSS filename based on the environment.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/faq/hmr.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    filename: {\n      css:\n        process.env.NODE_ENV === 'production'\n          ? '[name].[contenthash:8].css'\n          : '[name].css',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Nested Structure Configuration in Rsbuild\nDESCRIPTION: Shows how to configure Rsbuild to use nested directory structure for HTML output files using the html.outputStructure option.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/output-structure.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    outputStructure: 'nested',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Overriding Default Chunk Splitting in JavaScript\nDESCRIPTION: This example shows how to override the default chunk splitting configuration to create a separate chunk for React and React DOM when using predefined strategies in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/chunk-split.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  performance: {\n    chunkSplit: {\n      override: {\n        cacheGroups: {\n          react: {\n            test: /node_modules[\\/](react|react-dom)[\\/]/,\n            name: 'react',\n            chunks: 'all',\n          },\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring dev.assetPrefix with server.base in Rsbuild\nDESCRIPTION: Example showing how to configure dev.assetPrefix alongside server.base to ensure static assets are correctly accessible through the Rsbuild dev server.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/asset-prefix.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    assetPrefix: '/foo/bar/',\n  },\n  server: {\n    base: '/foo',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Util Functions: addPlugins (JS)\nDESCRIPTION: This JavaScript code demonstrates the usage of the `addPlugins` utility function to add Babel plugins within the `babelLoaderOptions` configuration. It showcases adding a plugin configuration for `babel-plugin-import`. It is assumed that `pluginBabel` is in scope and that a babel config and an addPlugins function is passed to the configuration function.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-babel.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\npluginBabel({\n  babelLoaderOptions: (config, { addPlugins }) => {\n    addPlugins([\n      [\n        'babel-plugin-import',\n        {\n          libraryName: 'my-components',\n          libraryDirectory: 'es',\n          style: true,\n        },\n      ],\n    ]);\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Creating an Environment-aware Plugin\nDESCRIPTION: Implementation of a plugin that supports multiple build environments by using environment-specific configuration hooks.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/index.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { RsbuildPlugin } from '@rsbuild/core';\n\nexport type PluginFooOptions = {\n  title?: string;\n};\n\nexport const pluginFoo = (options: PluginFooOptions = {}): RsbuildPlugin => ({\n  name: 'plugin-foo',\n\n  setup(api) {\n    api.modifyEnvironmentConfig((config) => {\n      config.html.title = options.title || 'My Default Title';\n    });\n    api.modifyBundlerChain((chain, { environment }) => {\n      chain.name(environment.config.html.title);\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Result of Usage-Based Polyfill Injection for Map\nDESCRIPTION: The compiled output when using 'usage' polyfill mode, showing how core-js imports are automatically added for Map functionality.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/browser-compatibility.mdx#2025-04-21_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\nimport 'core-js/modules/es.map';\nvar b = new Map();\n```\n\n----------------------------------------\n\nTITLE: Setting Devtool Based on Build Type\nDESCRIPTION: Example of using the isDev utility to set different devtool options for development and production builds.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/bundler-chain.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    bundlerChain: (config, { isDev }) => {\n      if (isDev) {\n        config.devtool = 'eval-cheap-source-map';\n      }\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: MetaOptions Type Definition for Object Values\nDESCRIPTION: Type definition for meta options that can be strings, false, or objects containing attribute key-value pairs.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/html/meta.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\ntype MetaOptions = {\n  [name: string]:\n    | string\n    | false\n    | {\n        [attr: string]: string | boolean;\n      };\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Rsbuild to Downgrade External Code (JavaScript)\nDESCRIPTION: This snippet demonstrates how to configure Rsbuild to compile code outside the current project, such as packages in a monorepo. It shows two methods using the source.include config option.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/browser-compatibility.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nimport path from 'node:path';\n\nexport default {\n  source: {\n    include: [\n      // method one:\n      // Compile all files in the package directory of Monorepo\n      path.resolve(__dirname, '../../packages'),\n\n      // Method Two:\n      // Compile the source code of a package in the Monorepo's package directory\n      // The matching range of this writing method is more precise, and has less impact on the overall compilation performance\n      path.resolve(__dirname, '../../packages/abc/src'),\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Generating Stats JSON File with Bundle Analyzer\nDESCRIPTION: Shows how to configure bundle analyzer to generate a stats.json file alongside the HTML report. This is useful for further analysis or automated processing of bundle data.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/performance/bundle-analyze.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  performance: {\n    bundleAnalyze: {\n      generateStatsFile: true,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling Source Maps in Rsbuild Configuration\nDESCRIPTION: This JavaScript snippet shows how to completely disable source map generation for both JS and CSS files in Rsbuild configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/source-map.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    sourceMap: {\n      js: false,\n      css: false,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Updating npm Scripts in package.json\nDESCRIPTION: Replace Vue CLI service commands with Rsbuild CLI commands for development, production build, and preview\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/vue-cli.mdx#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"serve\": \"vue-cli-service serve\",\n    \"build\": \"vue-cli-service build\",\n    \"serve\": \"rsbuild dev\",\n    \"build\": \"rsbuild build\",\n    \"preview\": \"rsbuild preview\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Page Reload on File Changes in Rsbuild\nDESCRIPTION: Example showing how to configure Rsbuild to reload the page when watched files change. This is useful for monitoring static assets that should trigger a page refresh when modified.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/watch-files.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  dev: {\n    watchFiles: {\n      type: 'reload-page',\n      paths: 'public/**/*',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring CSS Extract Plugin Options in JavaScript\nDESCRIPTION: This example demonstrates how to configure the CSS Extract Plugin options in Rsbuild. It shows how to set the ignoreOrder option to false.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/css-extract.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    cssExtract: {\n      pluginOptions: {\n        ignoreOrder: false,\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring CSS File Inlining in Rsbuild\nDESCRIPTION: Demonstrates how to enable inlining of CSS files into HTML files using the output.inlineStyles configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/optimization/inline-assets.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    inlineStyles: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Customizing Hash Format in Rsbuild Configuration\nDESCRIPTION: Example of how to customize the hash format by specifying both the hash type (fullhash) and length (16) in the output.filenameHash configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/filename-hash.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    filenameHash: 'fullhash:16',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Creating Rsbuild configuration file\nDESCRIPTION: Create a rsbuild.config.ts file in the same directory as package.json with basic configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/migration/webpack.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\n\nexport default defineConfig({\n  plugins: [],\n});\n```\n\n----------------------------------------\n\nTITLE: Generating Only Stats JSON Without HTML Report\nDESCRIPTION: Demonstrates how to configure bundle analyzer to generate only the stats.json file without creating an HTML report by setting analyzerMode to disabled.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/performance/bundle-analyze.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  performance: {\n    bundleAnalyze: {\n      analyzerMode: 'disabled',\n      generateStatsFile: true,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling JavaScript Minification\nDESCRIPTION: Configuration example showing how to disable JavaScript minification while keeping CSS minification enabled.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/minify.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    minify: {\n      js: false,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using basic SSL plugin for self-signed certificates\nDESCRIPTION: Example of using the @rsbuild/plugin-basic-ssl plugin to automatically create and configure a self-signed certificate for HTTPS development.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/server/https.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginBasicSsl } from '@rsbuild/plugin-basic-ssl';\n\nexport default {\n  plugins: [pluginBasicSsl()],\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling Bundle Analysis through Rsbuild Configuration\nDESCRIPTION: Shows how to enable bundle analysis by setting the performance.bundleAnalyze option in the Rsbuild configuration file. This method permanently enables bundle analysis for the project.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/performance/bundle-analyze.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  performance: {\n    bundleAnalyze: {},\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using modifyRspackConfig in a Rsbuild Plugin\nDESCRIPTION: Example of creating a plugin that uses the modifyRspackConfig hook to modify the devtool configuration in development environment.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/hooks.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.modifyRspackConfig((config, utils) => {\n      if (utils.env === 'development') {\n        config.devtool = 'eval-cheap-source-map';\n      }\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Enabling Emotion Support in SWC with Rsbuild\nDESCRIPTION: This code snippet shows how to enable Emotion support in Rsbuild by configuring the SWC loader to use the @swc/plugin-emotion plugin. It uses the tools.swc configuration option.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/configuration/swc.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    swc: {\n      jsc: {\n        experimental: {\n          plugins: [['@swc/plugin-emotion', {}]],\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Plugin Hook Order Demonstration\nDESCRIPTION: Illustrates how multiple plugins with hooks are executed in registration order, with optional 'order' field to modify execution sequence\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/hooks.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nconst plugin1 = () => ({\n  setup(api) {\n    api.modifyRsbuildConfig(() => console.log('1'));\n  },\n});\n\nconst plugin2 = () => ({\n  setup(api) {\n    api.modifyRsbuildConfig({\n      handler: () => console.log('2'),\n      order: 'pre',\n    });\n  },\n});\n\nrsbuild.addPlugins([plugin1, plugin2]);\n```\n\n----------------------------------------\n\nTITLE: Referencing Static Assets in CSS\nDESCRIPTION: Shows how to reference static assets within CSS files using relative paths.  The `url()` function is used to specify the path to the asset. Rsbuild will process these URLs during the build process, potentially inlining or copying the assets to the output directory.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/static-assets.mdx#2025-04-21_snippet_5\n\nLANGUAGE: css\nCODE:\n```\n.logo {\n  background-image: url('../static/logo.png');\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Vue Loader Options\nDESCRIPTION: This TypeScript snippet demonstrates how to configure the `vueLoaderOptions` for the Vue plugin. It sets the `hotReload` option to `false`, customizing the Vue Loader's behavior.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/list/plugin-vue.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\npluginVue({\n  vueLoaderOptions: {\n    hotReload: false,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Generate Stats JSON Configuration\nDESCRIPTION: Configuration to generate stats.json file for bundle analysis.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/bundle-analyze.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  performance: {\n    bundleAnalyze: {\n      generateStatsFile: true,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring CDN Path for Static Assets - JavaScript\nDESCRIPTION: This snippet shows how to set the URL prefix for static assets in Rsbuild, enabling the upload of assets like JS and CSS to a CDN. The configuration uses the 'output.assetPrefix' option.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/faq/features.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    assetPrefix: 'https://cdn.example.com/assets/',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining Environment Configuration Types in TypeScript\nDESCRIPTION: TypeScript interface definitions for the EnvironmentConfig and Environments types used in Rsbuild's multi-environment configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/environments.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface EnvironmentConfig {\n  plugins?: RsbuildPlugins;\n  dev?: Pick<\n    DevConfig,\n    'hmr' | 'assetPrefix' | 'progressBar' | 'lazyCompilation' | 'writeToDisk'\n  >;\n  html?: HtmlConfig;\n  tools?: ToolsConfig;\n  source?: SourceConfig;\n  output?: OutputConfig;\n  resolve?: ResolveConfig;\n  security?: SecurityConfig;\n  performance?: PerformanceConfig;\n  moduleFederation?: ModuleFederationConfig;\n}\n\ntype Environments = {\n  [name: string]: EnvironmentConfig;\n};\n```\n\n----------------------------------------\n\nTITLE: Using import.meta.env.PROD in TypeScript\nDESCRIPTION: Demonstrates how to use import.meta.env.PROD to check if the current mode is production.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/env-vars.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nif (import.meta.env.PROD) {\n  console.log('this is production mode');\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Classic JSX Runtime in Rsbuild\nDESCRIPTION: This snippet outlines the configuration for using the classic JSX runtime in Rsbuild. It specifies the JSX pragma and fragment pragma to be used, allowing customization of how JSX is compiled.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/framework/react.mdx#2025-04-21_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginReact } from '@rsbuild/plugin-react';\n\nexport default defineConfig({\n  plugins: [\n    pluginReact({\n      swcReactOptions: {\n        runtime: 'classic',\n        pragma: 'h',\n        pragmaFrag: 'Fragment',\n      },\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Rsdoctor Plugin Options in Rsbuild\nDESCRIPTION: Shows how to manually register the Rsdoctor Rspack plugin with custom options in the Rsbuild configuration file. This approach allows for more fine-grained control over the plugin's behavior.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/debug/rsdoctor.mdx#2025-04-21_snippet_2\n\nLANGUAGE: ts\nCODE:\n```\nimport { RsdoctorRspackPlugin } from '@rsdoctor/rspack-plugin';\n\nexport default {\n  tools: {\n    rspack: {\n      plugins: [\n        process.env.RSDOCTOR === 'true' &&\n          new RsdoctorRspackPlugin({\n            // plugin options\n          }),\n      ],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting dev.assetPrefix and server.base in Rsbuild Config (JavaScript)\nDESCRIPTION: Example of configuring dev.assetPrefix and server.base to ensure static assets are accessible through the Rsbuild development server.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/dev/asset-prefix.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  dev: {\n    assetPrefix: '/foo/bar/',\n  },\n  server: {\n    base: '/foo',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Modifying Rspack Config in Development Environment\nDESCRIPTION: Example of using tools.bundlerChain to modify the Rspack configuration specifically for the development environment.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/bundler-chain.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    bundlerChain: (chain, { env }) => {\n      if (env === 'development') {\n        chain.devtool('cheap-module-eval-source-map');\n      }\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Global Style as Pre-Entry in Rsbuild\nDESCRIPTION: Example of configuring a global CSS file as a pre-entry script in Rsbuild. This setup loads the CSS file before the main page code, useful for styles like normalize.css.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/pre-entry.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  source: {\n    preEntry: './src/normalize.css',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling Image Compression in Rsbuild\nDESCRIPTION: This configuration adds the image compression plugin to Rsbuild, which can significantly reduce the size of image assets in the project bundle.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/optimization/optimize-bundle.mdx#2025-04-21_snippet_6\n\nLANGUAGE: ts\nCODE:\n```\nimport { pluginImageCompress } from '@rsbuild/plugin-image-compress';\n\nexport default {\n  plugins: [pluginImageCompress()],\n};\n```\n\n----------------------------------------\n\nTITLE: Executing Shell Commands in Integration Tests with JavaScript\nDESCRIPTION: Example of using execa to run shell commands within integration tests, which is useful for testing CLI tools or command execution.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/e2e/cases/server/watch-files/assets/example.txt#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nimport { execa } from 'execa';\n\ntest('should run command successfully', async () => {\n  const { stdout } = await execa('node', ['./path/to/script.js'], {\n    cwd: tempDir,\n  });\n  \n  expect(stdout).toContain('expected output');\n});\n```\n\n----------------------------------------\n\nTITLE: Ignoring Specific Warnings in Rsbuild - TypeScript\nDESCRIPTION: This snippet configures Rsbuild to ignore specific warning logs during the build process. It uses the 'ignoreWarnings' configuration option with a regex pattern to filter unwanted warnings.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/faq/features.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: {\n      ignoreWarnings: [/Using \\/ for division outside of calc()/],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling Detailed File Size Output in Rsbuild\nDESCRIPTION: This snippet shows how to configure Rsbuild to only output the total file size without printing details for individual files.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/print-file-size.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  performance: {\n    printFileSize: {\n      detail: false,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Writing Configurations to Disk Using inspectConfig in TypeScript\nDESCRIPTION: This example demonstrates how to use the inspectConfig method to write configuration contents directly to disk by setting the writeToDisk option to true.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/instance.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nawait rsbuild.inspectConfig({\n  writeToDisk: true,\n});\n```\n\n----------------------------------------\n\nTITLE: Accessing Environment Name in Plugin\nDESCRIPTION: Demonstrates how to access the environment name within an Rsbuild plugin. The environment name is a unique identifier for the current environment, corresponding to the key in the environments configuration. This example shows how to modify the Rspack configuration based on the environment name.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/environment-api.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n```js\napi.modifyRspackConfig((config, { environment }) => {\n  if (environment.name === 'node') {\n    // modify config for node environment\n  }\n  return config;\n});\n```\n```\n\n----------------------------------------\n\nTITLE: Flatten Directory Structure Configuration\nDESCRIPTION: Configuration to flatten the output directory structure by setting empty paths for JS and CSS files.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/output-files.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    distPath: {\n      js: '',\n      css: '',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Rendering HTML Page with Asset Manifest\nDESCRIPTION: Function to dynamically generate HTML using the asset manifest for SSR.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/ssr.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nasync function renderHtmlPage(): Promise<string> {\n  const manifest = await fs.promises.readFile('./dist/manifest.json', 'utf-8');\n  const { entries } = JSON.parse(manifest);\n\n  const { js, css } = entries['index'].initial;\n\n  const scriptTags = js\n    .map((url) => `<script src=\"${url}\" defer></script>`)\n    .join('\\n');\n  const styleTags = css\n    .map((file) => `<link rel=\"stylesheet\" href=\"${file}\">`)\n    .join('\\n');\n\n  return `\n    <!DOCTYPE html>\n    <html>\n      <head>\n        ${scriptTags}\n        ${styleTags}\n      </head>\n      <body>\n        <div id=\"root\"></div>\n      </body>\n    </html>`;\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring a Single Response Header - TypeScript\nDESCRIPTION: This snippet demonstrates how to configure a single custom response header in Rsbuild using the `server.headers` option. The header is specified as a key-value pair, with the header name being case-insensitive. The application leverages the Node.js `response.setHeader()` method to set the defined headers.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/server/headers.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    headers: {\n      'X-Custom-Foo': 'bar',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Forcing Asset Inlining with ?inline Query (JS)\nDESCRIPTION: Demonstrates how to force Rsbuild to inline an asset as a base64 string, regardless of its size, using the `?inline` query parameter.  This is useful for assets that should always be included directly in the code.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/static-assets.mdx#2025-04-21_snippet_11\n\nLANGUAGE: js\nCODE:\n```\nimport image from './static/image.png?inline';\n\nconsole.log(image); // \"data:image/png;base64,iVBORw0KGgo...\"\n```\n\n----------------------------------------\n\nTITLE: Configuring Rspack Dashboard in TypeScript\nDESCRIPTION: This snippet shows how to configure Rsbuild to enable the Rspack Dashboard in development mode with TypeScript. It includes type definitions and proper configuration for TypeScript projects.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/e2e/cases/server/watch-files/assets/example2.txt#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\n\nexport default defineConfig({\n  // Enables the Rspack Dashboard in development mode\n  dev: {\n    // Set to true to open the Rspack Dashboard by default\n    startUrl: true,\n  },\n  tools: {\n    rspack: {\n      plugins: [\n        // All plugins are already set by Rsbuild\n      ],\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring JavaScript Module Alias with Dynamic Resolution\nDESCRIPTION: Demonstrates how to set up module aliases in a JavaScript configuration file with a function-based approach for dynamic path resolution\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/configuration/rsbuild.mdx#2025-04-21_snippet_2\n\nLANGUAGE: js\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\n\nexport default defineConfig({\n  resolve: {\n    alias: (opts) => {\n      opts['@common'] = './src/common';\n    }\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring On-Demand Import for Component Library - TypeScript\nDESCRIPTION: This snippet demonstrates how to configure on-demand imports for a UI component library using Rsbuild's configuration. It utilizes the 'transformImport' setting to customize the import behavior.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/faq/features.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  source: {\n    transformImport: [\n      {\n        libraryName: 'my-components',\n        libraryDirectory: 'es',\n        style: true,\n      },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Resulting HTML Script Tag with CDN URL Prefix\nDESCRIPTION: HTML output showing how the JavaScript file URL is prefixed with the CDN address after building with the specified assetPrefix configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/asset-prefix.mdx#2025-04-21_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<script\n  defer\n  src=\"https://cdn.example.com/assets/static/js/index.ebc4ff4f.js\"\n></script>\n```\n\n----------------------------------------\n\nTITLE: PostCSS Configuration in CommonJS Format\nDESCRIPTION: Example of PostCSS configuration file using px-to-viewport plugin.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/styling/css-usage.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nmodule.exports = {\n  'postcss-px-to-viewport': {\n    viewportWidth: 375,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Updating HTML template with assetPrefix\nDESCRIPTION: This snippet demonstrates how to update the HTML template to use Rsbuild's `assetPrefix` variable instead of Vue CLI's `BASE_URL` variable. It replaces the `<link>` tag referencing `BASE_URL` with one using `assetPrefix` to ensure correct asset paths.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/migration/vue-cli.mdx#2025-04-21_snippet_3\n\nLANGUAGE: html\nCODE:\n```\n<link rel=\"icon\" href=\"<%= BASE_URL %>favicon.ico\" />\n<!-- [!code --] -->\n<link rel=\"icon\" href=\"<%= assetPrefix %>/favicon.ico\" />\n<!-- [!code ++] -->\n```\n\n----------------------------------------\n\nTITLE: Configuring Asset Prefix for Subdirectory Deployment\nDESCRIPTION: Configuration example for setting up asset prefix when deploying to a subdirectory.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/static-deploy.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\n\nexport default defineConfig({\n  output: {\n    assetPrefix: '/some-base-folder/',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Overriding Asset Prefixes with Custom Base Path\nDESCRIPTION: Configure custom asset prefixes while setting a different server base path. This example sets dev.assetPrefix to '/' and output.assetPrefix to a CDN URL while maintaining '/foo' as the server base path.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/base.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    assetPrefix: '/',\n  },\n  output: {\n    assetPrefix: 'https://cdn.example.com/assets/',\n  },\n  server: {\n    base: '/foo',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Complete Console Removal in Rsbuild\nDESCRIPTION: Configuration to remove all console methods in production builds by setting removeConsole to true.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/remove-console.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  performance: {\n    removeConsole: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using Escaped Parameters in HTML Template (HTML)\nDESCRIPTION: This snippet shows how to use escaped parameters in an HTML template when using Rsbuild's default template engine.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/html-template.mdx#2025-04-21_snippet_9\n\nLANGUAGE: html\nCODE:\n```\n<div>hello <%- text %>!</div>\n```\n\n----------------------------------------\n\nTITLE: Dynamic CORS Origin Configuration in Rsbuild Config\nDESCRIPTION: This example shows how to use a function to dynamically determine the allowed origin for CORS in the Rsbuild configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/cors.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    cors: {\n      origin: (origin, callback) => {\n        // loadMyOrigins is an example call to load a list of origins\n        loadMyOrigins((error, origins) => {\n          callback(error, origins);\n        });\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Svelte Plugin with svelteLoaderOptions (TS)\nDESCRIPTION: This code shows how to configure the `svelteLoaderOptions` when registering the `@rsbuild/plugin-svelte` plugin. It provides an example of overriding the default `preprocess` option. The `svelteLoaderOptions` allow fine-grained control over how `svelte-loader` processes Svelte components.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-svelte.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\npluginSvelte({\n  svelteLoaderOptions: {\n    preprocess: null,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Importing Static Assets with Path Aliases (TSX)\nDESCRIPTION: Illustrates importing static assets using path aliases configured in Rsbuild.  This allows referencing assets without relative paths. The `@` alias is assumed to be configured to point to a specific directory, such as the project's source directory or a specific assets folder.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/static-assets.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport logo from '@/static/logo.png';\n\nconsole.log(logo); // \"/static/logo.[hash].png\"\n\nexport default = () => <img src={logo} />;\n```\n\n----------------------------------------\n\nTITLE: Using onBeforeStartProdServer Hook in TypeScript\nDESCRIPTION: This example demonstrates how to use the onBeforeStartProdServer hook to log a message before the production server starts.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/instance.mdx#2025-04-21_snippet_19\n\nLANGUAGE: typescript\nCODE:\n```\nrsbuild.onBeforeStartProdServer(() => {\n  console.log('before start!');\n});\n```\n\n----------------------------------------\n\nTITLE: Defining Default vueLoaderOptions for Vue Plugin\nDESCRIPTION: This snippet defines default options for vue-loader, configuring the compilation behavior by setting compiler options like 'preserveWhitespace' and enabling 'experimentalInlineMatchResource'. It serves as a basis for customizing the behavior of the Vue plugin.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-vue.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n```js\nconst defaultOptions = {\n  compilerOptions: {\n    preserveWhitespace: false,\n  },\n  experimentalInlineMatchResource: true,\n};\n```\n```\n\n----------------------------------------\n\nTITLE: Using onAfterStartDevServer Hook\nDESCRIPTION: This hook is triggered after the development server has started. It provides access to the server port and routes information, useful for logging or programmatic access to server details.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_29\n\nLANGUAGE: typescript\nCODE:\n```\nrsbuild.onAfterStartDevServer(({ port, routes }) => {\n  console.log('this port is: ', port);\n  console.log('this routes is: ', routes);\n});\n```\n\n----------------------------------------\n\nTITLE: Default Server URL Output Example\nDESCRIPTION: Example of default server URL output format showing local and network addresses.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/print-urls.mdx#2025-04-21_snippet_1\n\nLANGUAGE: text\nCODE:\n```\n  ➜ Local:    http://localhost:3000\n  ➜ Network:  http://192.168.0.1:3000\n```\n\n----------------------------------------\n\nTITLE: React Compiler Configuration for Older React Versions\nDESCRIPTION: Configuration example for using React Compiler with React 17 or 18 by specifying the target version. This allows using the compiler's optimizations with pre-React 19 projects.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/framework/react.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nconst ReactCompilerConfig = {\n  target: '18', // '17' | '18' | '19'\n};\n```\n\n----------------------------------------\n\nTITLE: Accessing Public Environment Variables in Client Code with Rsbuild\nDESCRIPTION: TypeScript example showing how to access public environment variables in client code using either import.meta.env or process.env. Only variables prefixed with PUBLIC_ are accessible.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/env-vars.mdx#2025-04-21_snippet_16\n\nLANGUAGE: ts\nCODE:\n```\nconsole.log(import.meta.env.PUBLIC_NAME); // -> 'jack'\nconsole.log(import.meta.env.PASSWORD); // -> undefined\n\nconsole.log(process.env.PUBLIC_NAME); // -> 'jack'\nconsole.log(process.env.PASSWORD); // -> undefined\n```\n\n----------------------------------------\n\nTITLE: Using SVGR Plugin with Query-based Import in React\nDESCRIPTION: This example demonstrates the new way of using the SVGR plugin in Rsbuild 0.5, which allows importing SVGs as React components using a '?react' query, improving performance and reducing bundle size.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/community/releases/v0-5.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport logoUrl from './logo.svg';\nimport Logo from './logo.svg?react';\n\nconsole.log(logoUrl); // -> string\nconsole.log(Logo); // -> React component\n```\n\n----------------------------------------\n\nTITLE: Using RegExp to Target Specific CSS Files for Inlining\nDESCRIPTION: JavaScript configuration example showing how to use a regular expression to selectively inline specific CSS files based on their filename pattern.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/inline-styles.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    inlineStyles: /[\\\\/]main\\.\\w+\\.css$/,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring resolve.extensions in Rsbuild\nDESCRIPTION: Example of how to override the default resolve.extensions in Rsbuild to specify which file extensions should be automatically resolved when importing modules.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/resolve/extensions.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  resolve: {\n    extensions: ['.ts', '.tsx', '.js'],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Importing Global and Local Class Names in React Component\nDESCRIPTION: Shows how to import and use both global and local class names from a CSS Module in a React component.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/css-modules.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport styles from './style.module.css';\n\nconsole.log(styles.blue); // 'blue'\nconsole.log(styles.red); // 'red-[hash]'\n```\n\n----------------------------------------\n\nTITLE: Configuring multiple Sass plugins\nDESCRIPTION: This demonstrates how to register multiple instances of the Sass plugin with different configurations. This allows applying specific options to certain sets of Sass files using the `include` and `exclude` options. In this example, `.another.scss` files have separate options.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/list/plugin-sass.mdx#2025-04-21_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  plugins: [\n    pluginSass({\n      exclude: /\\.another\\.scss$/,\n    }),\n    pluginSass({\n      include: /\\.another\\.scss$/,\n      sassLoaderOptions: {\n        // some custom options\n      },\n    }),\n  ],\n};\n\n```\n\n----------------------------------------\n\nTITLE: Listing Duplicate Dependencies with pnpm-deduplicate\nDESCRIPTION: This command uses the pnpm-deduplicate tool to analyze and list all duplicate dependencies in pnpm projects with versions below 7.26.0.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/optimization/optimize-bundle.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx pnpm-deduplicate --list\n```\n\n----------------------------------------\n\nTITLE: Configuring DNS Prefetch in Rsbuild JavaScript Configuration\nDESCRIPTION: Example of how to set up DNS prefetch for a specific domain in the Rsbuild configuration file. This snippet demonstrates adding 'https://example.com' to the list of DNS prefetch domains.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/dns-prefetch.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  performance: {\n    dnsPrefetch: ['https://example.com'],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Manual Prefetch Configuration in TypeScript\nDESCRIPTION: Example of manually configuring prefetch tags using html.tags configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/prefetch.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  html: {\n    tags: [\n      {\n        tag: 'link',\n        attrs: {\n          rel: 'prefetch',\n          href: 'https://example.com/some-script.js',\n        },\n      },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring HTML Crossorigin in Rsbuild\nDESCRIPTION: Example configuration for setting the crossorigin attribute to 'anonymous' in Rsbuild, alongside setting an asset prefix. This configuration affects how script and style tags are generated in the HTML output.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/crossorigin.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    crossorigin: 'anonymous',\n  },\n  output: {\n    assetPrefix: 'https://example.com',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Removing Rspack Plugins in Rsbuild\nDESCRIPTION: This snippet illustrates how to remove a specific Rspack plugin from the configuration using the removePlugin utility function.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/rspack.mdx#2025-04-21_snippet_16\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: (config, { removePlugin }) => {\n      removePlugin('BundleAnalyzerPlugin');\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Conditional Logging based on DEV environment (TypeScript)\nDESCRIPTION: This code snippet demonstrates how to use `import.meta.env.DEV` to conditionally execute code.  `import.meta.env.DEV` is true when the mode is 'development' and false otherwise. This allows for development-specific logic that is excluded from production builds.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nif (import.meta.env.DEV) {\n  console.log('this is development mode');\n}\n```\n\n----------------------------------------\n\nTITLE: Viewing Available Rsbuild CLI Commands\nDESCRIPTION: This command displays all available CLI commands for Rsbuild in the project directory.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/cli.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx rsbuild -h\n```\n\n----------------------------------------\n\nTITLE: Adding E2E Test Cases for Both Rspack and Webpack in TypeScript\nDESCRIPTION: This snippet demonstrates how to add test cases that will run for both Rspack and webpack in the Rsbuild e2e testing setup. It uses the 'test' method from Playwright.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/e2e/README.md#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { test, expect } from '@playwright/test';\n\n// both webpack and Rspack\ntest('test 1 + 1', () => {\n  expect(1 + 1).toBe(2);\n});\n```\n\n----------------------------------------\n\nTITLE: Using CSS Modules in Vue SFC with Rsbuild\nDESCRIPTION: This example demonstrates how to use CSS Modules within a Vue Single File Component (SFC) in Rsbuild 0.7. It shows the syntax for applying a modular CSS class to a template element.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-7.mdx#2025-04-21_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<template>\n  <p :class=\"$style.red\">Red</p>\n</template>\n\n<style module>\n  .red {\n    color: red;\n  }\n</style>\n```\n\n----------------------------------------\n\nTITLE: Using addPlugins Utility Function\nDESCRIPTION: Example of using addPlugins utility function to add single or multiple PostCSS plugins.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/tools/postcss.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    postcss: (config, { addPlugins }) => {\n      // 添加一个插件\n      addPlugins(require('postcss-preset-env'));\n      // 批量添加插件\n      addPlugins([require('postcss-preset-env'), require('postcss-import')]);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Incorrect React Component Example 1\nDESCRIPTION: These code snippets showcases an incorrect way of writing React components when using React Fast Refresh. The first example demonstrates using an anonymous function which can lead to state loss upon hot reloading, making it an anti-pattern for React Fast Refresh. These function declarations should be named for proper hot-reloading.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/framework/react.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n// 错误写法 1\nexport default function () {\n  return <div>Hello World</div>;\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring On-Demand Polyfill in Rsbuild\nDESCRIPTION: This configuration sets the polyfill mode to 'usage', which enables on-demand injection of polyfills based on the syntax used in the source code, reducing the overall polyfill code size.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/optimization/optimize-bundle.mdx#2025-04-21_snippet_5\n\nLANGUAGE: js\nCODE:\n```\nexport default {\n  output: {\n    polyfill: 'usage',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Importing CSS with ?inline Query Parameter\nDESCRIPTION: This code snippet demonstrates how to import the compiled CSS content as a string in JavaScript using the `?inline` query parameter.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/styling/css-usage.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nimport inlineCss from './style.css?inline';\n\nconsole.log(inlineCss); // 输出编译后的 CSS 文件内容\n```\n\n----------------------------------------\n\nTITLE: Configuring 'none' Legal Comments in Rsbuild\nDESCRIPTION: This configuration removes all legal comments from the output. It's important to ensure you have the right to remove these comments before using this option, as it may violate some open-source license requirements.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/legal-comments.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    legalComments: 'none',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Filtering File Size Output by File Type and Size in Rsbuild\nDESCRIPTION: This configuration example shows how to filter file size output to include only JavaScript files larger than 10kB in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/print-file-size.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  performance: {\n    printFileSize: {\n      include: (asset) => /\\.js$/.test(asset.name) && asset.size > 10 * 1000,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: TOML Plugin Configuration and Usage\nDESCRIPTION: Setup for TOML plugin in Rsbuild configuration and example usage of TOML imports.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/json-files.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginToml } from '@rsbuild/plugin-toml';\n\nexport default {\n  plugins: [pluginToml()],\n};\n```\n\nLANGUAGE: toml\nCODE:\n```\nhello = \"world\"\n\n[foo]\nbar = \"baz\"\n```\n\nLANGUAGE: javascript\nCODE:\n```\nimport example from './example.toml';\n\nconsole.log(example.hello); // 'world';\nconsole.log(example.foo); // { bar: 'baz' };\n```\n\n----------------------------------------\n\nTITLE: Switching to Terser Minimizer in Rsbuild\nDESCRIPTION: This code example demonstrates how to switch from the default SWC minimizer to Terser for JavaScript minification in Rsbuild. It uses the tools.bundlerChain configuration to replace the default minimizer with TerserPlugin.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/configuration/swc.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    bundlerChain(chain, { CHAIN_ID, isProd }) {\n      if (isProd) {\n        chain.optimization.minimizer(CHAIN_ID.MINIMIZER.JS).use(TerserPlugin, [\n          {\n            minify: TerserPlugin.terserMinify,\n          },\n        ]);\n      }\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: HTML Output with SRI Attributes\nDESCRIPTION: Example of generated HTML output showing script and link tags with integrity and crossorigin attributes added by SRI.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/security/sri.mdx#2025-04-21_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<script\n  defer\n  src=\"https://cdn.com/static/js/index.js\"\n  crossorigin=\"anonymous\"\n  integrity=\"sha384-d8fhhhTWXaPPIEMw+POJ9hqCIRvsFbegq/oef7k9R8Rpb8Dy95B2THPOECdZoLDF\"\n></script>\n\n<link\n  href=\"https://cdn.com/static/css/index.css\"\n  rel=\"stylesheet\"\n  crossorigin=\"anonymous\"\n  integrity=\"sha384-8U9HYzsHbf55cFZyiWIE29+QPYQ9WO+U5uT/ViFw0TOwM2Fbbb74ZegzRV/nvwrD\"\n/>\n```\n\n----------------------------------------\n\nTITLE: Dynamically Setting CSS Filenames in Rsbuild Config\nDESCRIPTION: Example of using a function to dynamically set CSS filenames based on chunk name and build environment.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/filename.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nconst isProd = process.env.NODE_ENV === 'production';\n\nexport default {\n  output: {\n    filename: {\n      css: (pathData, assetInfo) => {\n        if (pathData.chunk?.name === 'index') {\n          return isProd ? '[name].[contenthash:8].css' : '[name].css';\n        }\n        return '/some-path/[name].css';\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Rsbuild onBeforeCreateCompiler Hook Definition\nDESCRIPTION: Defines the type signature for the `onBeforeCreateCompiler` hook in Rsbuild. This hook is executed before the Rspack compiler is created, allowing modifications to the bundler configurations based on the specified environments. The callback function receives an object containing bundler configurations and environment contexts.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/shared/onBeforeCreateCompiler.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction OnBeforeCreateCompiler(\n  callback: (params: {\n    bundlerConfigs: Rspack.Configuration[];\n    environments: Record<string, EnvironmentContext>;\n  }) => Promise<void> | void,\n): void;\n```\n\n----------------------------------------\n\nTITLE: Include specific Less files (TypeScript)\nDESCRIPTION: Configures the Less plugin to only include `.less` files that match the provided regular expression. This allows for targeted application of Less transformations.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-less.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\npluginLess({\n  include: /\\.custom\\.less$/,\n});\n```\n\n----------------------------------------\n\nTITLE: Using Template Parameters in HTML Templates\nDESCRIPTION: Example showing how to access custom template parameters within an HTML template using EJS syntax. Parameters defined in the Rsbuild configuration can be referenced with <%= paramName %>.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/html/template-parameters.mdx#2025-04-21_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<script>\n  window.foo = '<%= foo %>';\n</script>\n```\n\n----------------------------------------\n\nTITLE: Setting Up Environment Variables\nDESCRIPTION: Configures Rsbuild to handle CRA-style environment variables with REACT_APP_ prefix.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/cra.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig, loadEnv } from '@rsbuild/core';\n\nconst { publicVars, rawPublicVars } = loadEnv({ prefixes: ['REACT_APP_'] });\n\nexport default defineConfig({\n  source: {\n    define: {\n      ...publicVars,\n      'process.env': JSON.stringify(rawPublicVars),\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Creating Dev Server Instance with JavaScript API (TypeScript)\nDESCRIPTION: Shows how to create a dev server instance using the rsbuild.createDevServer method in Rsbuild's JavaScript API.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/dev-server-api.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst server = await rsbuild.createDevServer();\n\nconsole.log('the server is ', server);\n```\n\n----------------------------------------\n\nTITLE: Dynamic Import Example - JavaScript\nDESCRIPTION: Example of dynamic imports that trigger async chunk preloading.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/preload.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport('./foo');\nimport('./bar');\n```\n\n----------------------------------------\n\nTITLE: Example - Watch Mode Build\nDESCRIPTION: Example showing how to use build in watch mode.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nawait rsbuild.build({\n  watch: true,\n});\n```\n\n----------------------------------------\n\nTITLE: Using define for Tree Shaking Optimization in TypeScript\nDESCRIPTION: This code demonstrates using the define property for tree shaking optimizations in Rspack. It replaces a language-specific environment variable with its value to reduce the bundle size by excluding unused code paths in the final output.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_33\n\nLANGUAGE: TypeScript\nCODE:\n```\nexport default {\n  source: {\n    define: {\n      'import.meta.env.LANGUAGE': JSON.stringify(import.meta.env.LANGUAGE),\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling Code Minification\nDESCRIPTION: Example configuration to disable both JS and CSS minification in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/minify.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    minify: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Less Plugin with Include/Exclude\nDESCRIPTION: Registering multiple Less plugins with specific include and exclude conditions\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/list/plugin-less.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  plugins: [\n    pluginLess({\n      exclude: /\\.another\\.less$/,\n    }),\n    pluginLess({\n      include: /\\.another\\.less$/,\n      lessLoaderOptions: {\n        // some custom options\n      },\n    }),\n  ],\n};\n```\n\n----------------------------------------\n\nTITLE: Create Rsbuild application with CLI flags\nDESCRIPTION: These commands demonstrate how to create a new Rsbuild application using the `create-rsbuild` CLI tool with specified directory and template options. This allows skipping interactive prompts and quickly scaffolding a project.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/start/quick-start.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n\"npx create-rsbuild --dir my-app --template react\n\n# Using abbreviations\nnpx create-rsbuild -d my-app -t react\"\n```\n\n----------------------------------------\n\nTITLE: Configuring External Dependencies in JavaScript\nDESCRIPTION: This example demonstrates how to configure output.externals to exclude react-dom from the build output. It specifies that react-dom should be resolved to the global ReactDOM variable at runtime.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/externals.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    externals: {\n      'react-dom': 'ReactDOM',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Manual Prefetch Configuration with HTML Tags\nDESCRIPTION: Shows how to manually add prefetch tags for resources not managed by Rsbuild using the html.tags configuration option.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/performance/prefetch.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  html: {\n    tags: [\n      {\n        tag: 'link',\n        attrs: {\n          rel: 'prefetch',\n          href: 'https://example.com/some-script.js',\n        },\n      },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Customizing Asset-Specific Inlining Thresholds in Rsbuild\nDESCRIPTION: This example shows how to set different inlining thresholds for specific asset types, such as 5KiB for images and disabling inlining for media files.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/data-uri-limit.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    dataUriLimit: {\n      image: 5 * 1024,\n      media: 0,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining Function OnAfterStartProdServer in TypeScript\nDESCRIPTION: This snippet defines the function `OnAfterStartProdServer`, which accepts a callback function that processes server parameters such as the port number and routing information. The callback can return a promise or void, making this function versatile for both synchronous and asynchronous executions.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/shared/onAfterStartProdServer.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nfunction OnAfterStartProdServer(\\n  callback: (params: {\\n    port: number;\\n    routes: Routes;\\n    environments: Record<string, EnvironmentContext>;\\n  }) => Promise<void> | void,\\n): void;\n```\n\n----------------------------------------\n\nTITLE: Configuring Rspack for Web Worker Target in Rsbuild\nDESCRIPTION: This example shows how to modify the Rspack configuration specifically for the Web Worker target using the isWebWorker utility.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/rspack.mdx#2025-04-21_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: (config, { isWebWorker }) => {\n      if (isWebWorker) {\n        // ...\n      }\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Type Declarations for CSS Modules in TypeScript - TypeScript\nDESCRIPTION: Illustrates how to declare TypeScript modules for various CSS Module file types to prevent errors related to missing type definitions when importing CSS modules.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/styling/css-modules.mdx#2025-04-21_snippet_5\n\nLANGUAGE: ts\nCODE:\n```\ndeclare module '*.module.css' {\n  const classes: { readonly [key: string]: string };\n  export default classes;\n}\ndeclare module '*.module.scss' {\n  const classes: { readonly [key: string]: string };\n  export default classes;\n}\ndeclare module '*.module.sass' {\n  const classes: { readonly [key: string]: string };\n  export default classes;\n}\ndeclare module '*.module.less' {\n  const classes: { readonly [key: string]: string };\n  export default classes;\n}\ndeclare module '*.module.styl' {\n  const classes: { readonly [key: string]: string };\n  export default classes;\n}\ndeclare module '*.module.stylus' {\n  const classes: { readonly [key: string]: string };\n  export default classes;\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Pug Template Transform Plugin\nDESCRIPTION: Example of using the new transform API to create a plugin that converts Pug templates to JavaScript code.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-6.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport pug from 'pug';\n\nconst pluginPug = () => ({\n  name: 'my-pug-plugin',\n  setup(api) {\n    api.transform({ test: /\\.pug$/ }, ({ code }) => {\n      const templateCode = pug.compileClient(code, {});\n      return `${templateCode}; module.exports = template;`;\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Defining OnBeforeStartDevServer Type and Function in TypeScript\nDESCRIPTION: This snippet defines a TypeScript type for the OnBeforeStartDevServer function used to process parameters including the dev server instance and environment context. It also includes the function which takes a callback of this type to handle operations before server start. Dependencies include RsbuildDevServer and EnvironmentContext types.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/shared/onBeforeStartDevServer.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype OnBeforeStartDevServerFn = (params: {\n  /**\n   * The dev server instance, the same as the return value of `createDevServer`.\n   */\n  server: RsbuildDevServer;\n  /**\n   * A read-only object that provides some context information about different environments.\n   */\n  environments: Record<string, EnvironmentContext>;\n}) => MaybePromise<void>;\n\nfunction OnBeforeStartDevServer(callback: OnBeforeStartDevServerFn): void;\n```\n\n----------------------------------------\n\nTITLE: Forcing Asset Inlining from CSS\nDESCRIPTION: This snippet depicts using the inline query in CSS to force an image asset to be inlined as a Base64 string. It modifies the background image property of a CSS class, illustrating inlining assets directly in .css files.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/optimization/inline-assets.mdx#2025-04-21_snippet_3\n\nLANGUAGE: CSS\nCODE:\n```\n.foo {\n  background-image: url('. /icon.png?inline');\n}\n```\n\n----------------------------------------\n\nTITLE: TypeScript Type Definition for Template Parameters Function in Rsbuild\nDESCRIPTION: Type definition for the function-based approach to defining template parameters. Shows the function signature with its parameters and return type.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/html/template-parameters.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\ntype TemplateParametersFunction = (\n  defaultValue: Record<string, unknown>,\n  utils: { entryName: string },\n) => Record<string, unknown> | void;\n```\n\n----------------------------------------\n\nTITLE: Object-based PostCSS Configuration\nDESCRIPTION: Shows how to configure PostCSS using object notation, which merges with default config using Object.assign.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/tools/postcss.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    postcss: {\n      postcssOptions: {\n        plugins: [require('postcss-px-to-viewport')],\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring all-in-one strategy with asyncChunks false in Rsbuild\nDESCRIPTION: This code snippet shows how to configure the `all-in-one` strategy and also sets the Rspack's `output.asyncChunks` option to `false`, to bundle dynamically imported chunks into the single file. It could potentially lead to decrease in page loading performance.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/optimization/code-splitting.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  performance: {\n    chunkSplit: {\n      strategy: 'all-in-one',\n    },\n  },\n  tools: {\n    rspack: {\n      output: {\n        asyncChunks: false,\n      },\n    },\n  },\n});\n\n```\n\n----------------------------------------\n\nTITLE: Configuring Server Port in Rsbuild\nDESCRIPTION: Configuration example showing how to set a custom port (8080) for the development server in Rsbuild 0.6.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-6.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  server: {\n    port: 8080,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Function-based Alias Configuration in Rsbuild\nDESCRIPTION: Using a function to configure aliases, allowing for more dynamic and complex alias setups.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/resolve/alias.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  resolve: {\n    alias: (alias) => {\n      alias['@common'] = './src/common';\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Customizing JavaScript Filename in Rsbuild Config\nDESCRIPTION: Example of setting a custom filename for JavaScript files in the Rsbuild configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/filename.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    filename: {\n      js: '[name]_script.js',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Custom WebSocket Configuration Example\nDESCRIPTION: Example configuration for setting up a custom WebSocket connection in Rsbuild, specifically targeting a local development server.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/client.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    client: {\n      protocol: 'ws',\n      // Usually `127.0.0.1` is used to avoid cross-origin requests being blocked by the browser\n      host: '127.0.0.1',\n      port: 3000,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Customizing JavaScript Minification Options in Rsbuild\nDESCRIPTION: Demonstrates how to configure custom JavaScript minification options using the new output.minify property, specifically disabling name mangling in this example.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-5.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    minify: {\n      jsOptions: {\n        minimizerOptions: {\n          mangle: false,\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling URL rewriting in Sass files\nDESCRIPTION: This code snippet demonstrates how to disable the `rewriteUrls` option, which controls whether `resolve-url-loader` is used to rewrite URLs in Sass files.  Setting it to `false` can improve build performance, but requires that all URLs in Sass files are relative to the Sass entry file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/list/plugin-sass.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\npluginSass({\n  rewriteUrls: false,\n});\n\n```\n\n----------------------------------------\n\nTITLE: React Component Best Practices for Fast Refresh\nDESCRIPTION: Examples of correctly named React components that work properly with Fast Refresh. These patterns ensure that component state is preserved during hot module replacement.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/framework/react.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n// good\nexport default function MyComponent() {\n  return <div>Hello World</div>;\n}\n\n// good\nconst MyComponent = () => <div>Hello World</div>;\n\nexport default MyComponent;\n```\n\n----------------------------------------\n\nTITLE: Running pnpm dedupe Command for Dependency Deduplication\nDESCRIPTION: Command to upgrade and eliminate duplicate dependencies using pnpm's dedicated deduplication tool, available in pnpm version 7.26.0 or higher.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/optimization/optimize-bundle.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\npnpm dedupe\n```\n\n----------------------------------------\n\nTITLE: Initializing Rsbuild Configuration with React Plugin\nDESCRIPTION: Creates the basic Rsbuild configuration file with React plugin integration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/cra.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginReact } from '@rsbuild/plugin-react';\n\nexport default defineConfig({\n  plugins: [pluginReact()],\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Rsbuild for Vue 2 Projects\nDESCRIPTION: This snippet shows how to configure Rsbuild for Vue 2 projects. It imports the required modules and registers the Vue 2 plugin to enable Single File Component (SFC) compilation for Vue 2.7.0 and above.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/framework/vue.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginVue2 } from '@rsbuild/plugin-vue2';\n\nexport default defineConfig({\n  plugins: [pluginVue2()],\n});\n```\n\n----------------------------------------\n\nTITLE: Rsbuild Alias Configuration\nDESCRIPTION: Example of configuring path aliases in Rsbuild using resolve.alias option.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/resolve/alias-strategy.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  resolve: {\n    alias: {\n      '@common': './src/common-2',\n      '@utils': './src/utils',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Default SWC Configuration Options\nDESCRIPTION: Default configuration object for SWC loader showing basic parser settings and external helpers configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/swc.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultOptions = {\n  jsc: {\n    externalHelpers: true,\n    parser: {\n      tsx: false,\n      syntax: 'typescript',\n      decorators: true,\n    },\n  },\n  isModule: 'unknown',\n  // ...some other conditional options\n};\n```\n\n----------------------------------------\n\nTITLE: Modifying Rspack Configuration Using Function in Rsbuild\nDESCRIPTION: This snippet illustrates how to use a function to modify the Rspack configuration, specifically adding a resolve alias.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/rspack.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: (config) => {\n      config.resolve ||= {};\n      config.resolve.alias ||= {};\n      config.resolve.alias['@util'] = 'src/util';\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Accessing Rsbuild Configuration\nDESCRIPTION: Demonstrates how to access the normalized Rsbuild configuration within an Rsbuild plugin. The normalized configuration includes all Rsbuild options, such as `dev`, `html`, `tools`, `source`, `server`, `output`, `plugins`, `security`, `performance`, and `moduleFederation`. This example logs both the Rspack configuration and the Rsbuild configuration for the current environment to the console.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/environment-api.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\n```js\napi.modifyRspackConfig((config, { environment }) => {\n  // Rspack\n  console.log(config);\n  // Rsbuild config for current environment\n  console.log(environment.config);\n  return config;\n});\n```\n```\n\n----------------------------------------\n\nTITLE: Using Bypass Function in Proxy Configuration\nDESCRIPTION: Example of using the bypass function to conditionally skip proxy for certain requests. This configuration bypasses proxy for browser HTML requests while proxying API requests.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/server/proxy.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  server: {\n    proxy: {\n      '/api': {\n        target: 'http://localhost:3000',\n        bypass(req, res, proxyOptions) {\n          if (req.headers.accept.indexOf('html') !== -1) {\n            console.log('Skipping proxy for browser request.');\n            return '/index.html';\n          }\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Lazy Compilation with Explicit Options\nDESCRIPTION: Detailed configuration showing explicit enablement of both imports and entries for lazy compilation.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/dev/lazy-compilation.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    lazyCompilation: {\n      imports: true,\n      entries: true,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Importing Tailwind CSS in Entry CSS File\nDESCRIPTION: CSS import directive to include Tailwind CSS styles in the project's main CSS file\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/styling/tailwindcss.mdx#2025-04-21_snippet_1\n\nLANGUAGE: css\nCODE:\n```\n@import 'tailwindcss';\n```\n\n----------------------------------------\n\nTITLE: Monorepo Libraries Compilation\nDESCRIPTION: Configuration for compiling JavaScript files from other libraries within a monorepo setup, excluding their node_modules.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/source/include.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport path from 'node:path';\n\nconst packagesDir = path.resolve(__dirname, '../../packages');\n\nexport default {\n  source: {\n    include: [\n      {\n        and: [packagesDir, { not: /[\\\\/]node_modules[\\\\/]/ }],\n      },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Loading Cross-Origin Web Worker Scripts in JavaScript\nDESCRIPTION: This code demonstrates how to load Web Worker scripts from remote URLs that are accessible across domains, using the remote-web-worker package.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/web-workers.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\n// https://github.com/jantimon/remote-web-worker\nimport 'remote-web-worker';\n\nconst worker = new Worker(new URL('./worker.js', import.meta.url), {\n  type: 'classic',\n});\n\nworker.onmessage = (event) => {\n  console.log('The results from Workers:', event.data);\n};\n\nworker.postMessage(10);\n```\n\n----------------------------------------\n\nTITLE: Migrating Configuration File from Builder to Rsbuild\nDESCRIPTION: Update configuration file by renaming, changing import, and modifying plugin configuration\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/modern-builder.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@modern-js/builder-cli'; // [!code --]\nimport { defineConfig } from '@rsbuild/core'; // [!code ++]\n\nexport default defineConfig({\n  builderPlugins: [], // [!code --]\n  plugins: [], // [!code ++]\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring build output directory in Rsbuild\nDESCRIPTION: Configuration to change Rsbuild's default output directory from 'dist' to 'build', maintaining compatibility with CRA's directory structure.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/migration/cra.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    distPath: {\n      root: 'build',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Global Inlining Threshold in Rsbuild\nDESCRIPTION: This example sets a global threshold of 10KiB for inlining all static assets in the Rsbuild configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/data-uri-limit.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    dataUriLimit: 10 * 1024,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling Image Compression Plugin in Rsbuild\nDESCRIPTION: Configuration to enable image compression in Rsbuild by registering the image-compress plugin, which can significantly reduce the size of image assets.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/optimization/optimize-bundle.mdx#2025-04-21_snippet_7\n\nLANGUAGE: ts\nCODE:\n```\nimport { pluginImageCompress } from '@rsbuild/plugin-image-compress';\n\nexport default {\n  plugins: [pluginImageCompress()],\n};\n```\n\n----------------------------------------\n\nTITLE: CSS Modules Usage in React Component\nDESCRIPTION: Example of importing and using CSS Modules styles in a React component\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/css-modules.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport styles from './style.module.css';\n\nconsole.log(styles.blue); // 'blue'\nconsole.log(styles.red); // 'red-[hash]'\n```\n\n----------------------------------------\n\nTITLE: Using Callback Before Opening\nDESCRIPTION: Configuration with a callback function that executes before opening pages.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/open.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    open: {\n      before: async () => {\n        await doSomeThing();\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Dynamic Import of WebAssembly Module\nDESCRIPTION: Shows how to dynamically import a .wasm module using async/await pattern.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/wasm-assets.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport('./add.wasm').then(({ add }) => {\n  console.log('---- Async Wasm Module');\n  console.log(add); // [native code]\n  console.log(add(1, 2)); // 3\n});\n```\n\n----------------------------------------\n\nTITLE: Simplified Custom Manifest Path Configuration\nDESCRIPTION: A simplified way to specify the manifest file path by directly assigning the path string to output.manifest.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/manifest.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    manifest: './static/my-manifest.json',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Babel Plugin for Private Methods (TS)\nDESCRIPTION: This TypeScript code shows how to add the `@babel/plugin-transform-private-methods` plugin to enable Babel to correctly compile private properties in JavaScript classes. The configuration is applied within the `babelLoaderOptions` of the `pluginBabel` function.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-babel.mdx#2025-04-21_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\npluginBabel({\n  babelLoaderOptions: {\n    plugins: ['@babel/plugin-transform-private-methods'],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Forcing URL Loading with ?url Query (JS)\nDESCRIPTION: Shows how to force Rsbuild to load an asset as a separate file and return a URL, regardless of its size, using the `?url` query parameter.  This can be useful when you want to explicitly control asset loading behavior.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/static-assets.mdx#2025-04-21_snippet_10\n\nLANGUAGE: js\nCODE:\n```\nimport image from './static/image.png?url';\n\nconsole.log(image); // \"/static/image.[hash].png\"\n```\n\n----------------------------------------\n\nTITLE: Configuring node_modules compilation in Rsbuild\nDESCRIPTION: Configuration to enable compilation of node_modules dependencies in Rsbuild, similar to CRA's behavior, while excluding core-js to avoid issues.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/migration/cra.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  source: {\n    // 编译所有 JS 文件并排除 core-js\n    include: [{ not: /[\\\\/]core-js[\\\\/]/ }],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Customizing CSS Modules Class Name Format\nDESCRIPTION: Sets a custom format for generated CSS Modules class names using a hash-based pattern to create shorter identifiers.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/css-modules.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    cssModules: {\n      localIdentName: '[hash:base64:4]',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Accessing Output Directory\nDESCRIPTION: Illustrates how to access the absolute path to the build output directory within an Rsbuild plugin. The output directory corresponds to the `output.distPath.root` configuration option. This snippet logs the output directory to the console.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/environment-api.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\n```js\napi.modifyRspackConfig((config, { environment }) => {\n  console.log(environment.distPath);\n  return config;\n});\n```\n```\n\n----------------------------------------\n\nTITLE: Default HTML Template Structure in Rsbuild\nDESCRIPTION: Shows the default HTML template structure used by Rsbuild when no custom template is specified. Includes a dynamic mountId placeholder.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/template.mdx#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<!doctype html>\n<html>\n  <head></head>\n  <body>\n    <div id=\"<%= mountId %>\"></div>\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Using Object Configuration with Auto-Enable in Production\nDESCRIPTION: Example showing how to use the object configuration format with 'auto' enable option, which automatically enables inlineScripts in production mode.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/inline-scripts.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    inlineScripts: {\n      enable: 'auto',\n      test: /[\\\\/]main\\.\\w+\\.js$/,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Complex CSS Modules Global Syntax\nDESCRIPTION: This CSS snippet shows the support for complex CSS Modules :global() syntax in Rsbuild 0.7.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/community/releases/v0-7.mdx#2025-04-21_snippet_2\n\nLANGUAGE: css\nCODE:\n```\n:local(.parent):global(.child) > ul {\n  color: red;\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Environment-specific Browserslist in package.json\nDESCRIPTION: Configuration example showing different browser targets for development and production environments.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/browserslist.mdx#2025-04-21_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"browserslist\": {\n    \"production\": [\n      \"chrome >= 87\",\n      \"edge >= 88\",\n      \"firefox >= 78\",\n      \"safari >= 14\"\n    ],\n    \"development\": [\n      \"last 1 chrome version\",\n      \"last 1 firefox version\",\n      \"last 1 safari version\"\n    ]\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Importing PDF Files as Assets in JavaScript\nDESCRIPTION: Example of importing a PDF file as a static asset in JavaScript after configuring source.assetsInclude. The import will return the URL to the processed asset.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/static-assets.mdx#2025-04-21_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nimport myFile from './static/myFile.pdf';\n\nconsole.log(myFile); // \"/static/myFile.[hash].pdf\"\n```\n\n----------------------------------------\n\nTITLE: Importing JSON Files in JavaScript\nDESCRIPTION: Example of JSON file structure and how to import it in JavaScript, including both default and named imports.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/json-files.mdx#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"name\": \"foo\",\n  \"items\": [1, 2]\n}\n```\n\nLANGUAGE: javascript\nCODE:\n```\nimport example from './example.json';\n\nconsole.log(example.name); // 'foo';\nconsole.log(example.items); // [1, 2];\n```\n\n----------------------------------------\n\nTITLE: Default Meta Configuration in TypeScript\nDESCRIPTION: Default configuration object for HTML meta tags including charset and viewport settings.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/meta.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst defaultMeta = {\n  // <meta charset=\"UTF-8\" />\n  charset: {\n    charset: 'UTF-8',\n  },\n  // <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n  viewport: 'width=device-width, initial-scale=1.0',\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring isolatedModules in tsconfig.json\nDESCRIPTION: This snippet illustrates how to enable the \"isolatedModules\" option in the `tsconfig.json` file to aid the correct compilation by SWC and Babel, especially for cross-file type references. It mandates enabling this option to ensure compatibility with non-native TypeScript compilers.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/typescript.mdx#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"compilerOptions\": {\n    \"isolatedModules\": true\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Environment-Specific JS Source Maps in Rsbuild\nDESCRIPTION: This snippet shows how to set different source map formats for JavaScript files based on the build environment in Rsbuild configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/source-map.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    sourceMap: {\n      js:\n        process.env.NODE_ENV === 'production'\n          ? // Use a high quality source map format for production\n            'source-map'\n          : // Use a more performant source map format for development\n            'cheap-module-source-map',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Selective Console Removal in Rsbuild\nDESCRIPTION: Configuration to remove specific console methods (log and warn) in production builds by providing an array of console types.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/remove-console.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  performance: {\n    removeConsole: ['log', 'warn'],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring named exports for React Components\nDESCRIPTION: This configures the SVGR plugin to use named exports for React components.  The `exportType` is set to `'named'` within the `svgrOptions`, allowing you to import the React component as `ReactComponent`.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-svgr.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\npluginSvgr({\n  svgrOptions: {\n    exportType: 'named',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Parallel Build Configuration\nDESCRIPTION: Example of configuring multiple build targets to run in parallel using environments.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/target.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  environments: {\n    web: {\n      output: {\n        target: 'web',\n      },\n    },\n    node: {\n      output: {\n        target: 'node',\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining FilenameConfig Type in TypeScript\nDESCRIPTION: TypeScript type definition for the FilenameConfig object, specifying the structure for customizing filenames of different asset types.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/filename.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype FilenameConfig = {\n  html?: string;\n  js?: string | Function;\n  css?: string | Function;\n  svg?: string | Function;\n  font?: string | Function;\n  image?: string | Function;\n  media?: string | Function;\n  assets?: string | Function;\n};\n```\n\n----------------------------------------\n\nTITLE: Type Definition - Dev Server Context\nDESCRIPTION: Type definition for the dev server context information.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\ntype DevServer = {\n  hostname: string;\n  port: number;\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring External Output Directory in JavaScript\nDESCRIPTION: Example of setting an external output directory, which prevents Rsbuild from cleaning it to avoid accidental deletion of files in other directories.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/clean-dist-path.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    distPath: {\n      root: '../../some-dir',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: HTML Structure with Body Injection in Rsbuild\nDESCRIPTION: Illustrates the resulting HTML structure when scripts are injected into the body tag, as configured in the previous snippet.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/inject.mdx#2025-04-21_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<html>\n  <head>\n    <title></title>\n    <link href=\"/static/css/main.css\" rel=\"stylesheet\" />\n  </head>\n  <body>\n    <div id=\"root\"></div>\n    <script defer src=\"/static/js/runtime-main.js\"></script>\n    <script defer src=\"/static/js/main.js\"></script>\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: HtmlTag Interface Definition in TypeScript\nDESCRIPTION: TypeScript interface for the HtmlTag object, which defines the structure for tags to be injected into HTML. It includes properties for the tag name, attributes, children, and placement options.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/tags.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ntype HtmlTag = {\n  tag: string;\n  attrs?: Record<string, string | boolean | null | undefined>;\n  children?: string;\n  /** @default false */\n  hash?: boolean | string | ((url: string, hash: string) => string);\n  /** @default true */\n  publicPath?: boolean | string | ((url: string, publicPath: string) => string);\n  /**\n   * Sets the insertion position of the current tag relative to the original tags.\n   * If set to `true` it will be inserted after the original tags, if set to `false` it will be inserted before the original tags.\n   * @default true\n   */\n  append?: boolean;\n  /**\n   * Whether to add tags to head\n   * Enable by default only for elements that are allowed to be included in the `head` tag.\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/head#see_also}\n   */\n  head?: boolean;\n};\n```\n\n----------------------------------------\n\nTITLE: Referencing Absolute Paths in CSS\nDESCRIPTION: Illustrates referencing static assets using absolute paths in CSS. Rsbuild's `css-loader` resolves these paths by default.  The configuration shows how to disable absolute path resolution for specific paths, allowing them to be used as-is in the output CSS.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/static-assets.mdx#2025-04-21_snippet_7\n\nLANGUAGE: css\nCODE:\n```\n@font-face {\n  font-family: DingTalk;\n  src: url('/image/font/foo.ttf');\n}\n```\n\n----------------------------------------\n\nTITLE: Example - Close Build\nDESCRIPTION: Examples showing how to close builds in different modes.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nconst buildResult = await rsbuild.build({\n  watch: true,\n});\nawait buildResult.close();\n```\n\n----------------------------------------\n\nTITLE: Configuring HTML Template Path\nDESCRIPTION: Sets up HTML template configuration in Rsbuild to use CRA's public/index.html file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/cra.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  html: {\n    template: './public/index.html',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: CSS Modules Export Convention Configuration\nDESCRIPTION: Example of configuring the export locals convention for CSS Modules class names\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/css-modules.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    cssModules: {\n      exportLocalsConvention: 'camelCaseOnly',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Shorthand for Customizing Manifest Filename (TypeScript)\nDESCRIPTION: A simplified way to specify the manifest filename directly as a string in the Rsbuild configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/manifest.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    manifest: './static/my-manifest.json',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Proxy Configuration with Path Rewriting in Rsbuild\nDESCRIPTION: Advanced proxy configuration that rewrites the path when forwarding requests. It removes the '/api' prefix from the path using the pathRewrite option.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/proxy.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  server: {\n    proxy: {\n      // http://localhost:3000/api -> http://localhost:3000\n      // http://localhost:3000/api/foo -> http://localhost:3000/foo\n      '/api': {\n        target: 'http://localhost:3000',\n        pathRewrite: { '^/api': '' },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Checking Plugin Existence in JavaScript\nDESCRIPTION: Demonstrates how to use the isPluginExists method to check if a specific plugin is registered.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/core.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nexport default () => ({\n  setup(api) {\n    console.log(api.isPluginExists('plugin-foo'));\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Recursive Monorepo Update\nDESCRIPTION: Command to recursively upgrade Rsbuild packages in a monorepo environment using the -r flag.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/upgrade-rsbuild.mdx#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nnpx taze --include /rsbuild/ -w -r\n```\n\n----------------------------------------\n\nTITLE: Disabling Image Inlining in React Component\nDESCRIPTION: Illustrates how to prevent inlining of an image resource using the 'url' URL parameter, ensuring it's always loaded as a separate file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/optimization/inline-assets.mdx#2025-04-21_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport React from 'react';\nimport img from './foo.png?url';\n\nexport default function Foo() {\n  return <img src={img} />;\n}\n```\n\n----------------------------------------\n\nTITLE: Export Resolution Error Example\nDESCRIPTION: Example of TypeScript code demonstrating incorrect export usage causing compilation errors.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/faq/exceptions.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n// utils.ts\nexport const bar = 'bar';\n\n// index.ts\nimport { foo } from './utils';\n```\n\n----------------------------------------\n\nTITLE: Using Mixed Imports\nDESCRIPTION: This demonstrates how to use mixed imports, allowing both the URL and the React component to be imported from the SVG file. This requires the `mixedImport` option to be enabled in the plugin configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-svgr.mdx#2025-04-21_snippet_15\n\nLANGUAGE: javascript\nCODE:\n```\nimport logoUrl, { ReactComponent as Logo } from './logo.svg';\n\nconsole.log(logoUrl); // -> string\nconsole.log(Logo); // -> React component\n```\n\n----------------------------------------\n\nTITLE: Adding ESLint plugin to Rsbuild\nDESCRIPTION: Configuration to add the ESLint plugin to Rsbuild, which enables running ESLint during the build process similar to CRA's behavior.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/migration/cra.mdx#2025-04-21_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginEslint } from '@rsbuild/plugin-eslint';\n\nexport default {\n  plugins: [pluginEslint()],\n};\n```\n\n----------------------------------------\n\nTITLE: Adding Type Declarations for Static Assets\nDESCRIPTION: Shows how to add type declarations for static assets in TypeScript to resolve type errors when importing assets.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/static-assets.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\n/// <reference types=\"@rsbuild/core/types\" />\n```\n\nLANGUAGE: typescript\nCODE:\n```\n// Taking png images as an example\ndeclare module '*.png' {\n  const content: string;\n  export default content;\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Favicon as Relative Path in Rsbuild Configuration\nDESCRIPTION: This snippet demonstrates how to set the favicon using a relative path in the Rsbuild configuration. The path is relative to the project root.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/favicon.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    favicon: './src/assets/icon.png',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Example of CSS Module Usage and Type Generation - TypeScript JSX and CSS\nDESCRIPTION: Provides an example of a TypeScript file importing styles from a CSS Module, and the corresponding CSS file defining those styles, illustrating how Rsbuild generates type declarations.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/styling/css-modules.mdx#2025-04-21_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nimport styles from './index.module.css';\n\nconsole.log(styles.pageHeader);\n```\n\nLANGUAGE: css\nCODE:\n```\n.page-header {\n  color: black;\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Type Signatures for ModifyBundlerChain Method in Rsbuild (TypeScript)\nDESCRIPTION: Type definitions for the modifyBundlerChain method in Rsbuild, allowing modification of Rspack configuration using the rspack-chain API. Includes utility types for accessing environment context and chain identifiers.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/hooks.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\ntype ModifyBundlerChainUtils = {\n  environment: EnvironmentContext;\n  env: string;\n  isDev: boolean;\n  isProd: boolean;\n  target: RsbuildTarget;\n  isServer: boolean;\n  isWebWorker: boolean;\n  CHAIN_ID: ChainIdentifier;\n  HtmlPlugin: typeof import('html-rspack-plugin');\n  bundler: {\n    // some Rspack built-in plugins\n  };\n};\n\nfunction ModifyBundlerChain(\n  callback: (\n    chain: RspackChain,\n    utils: ModifyBundlerChainUtils,\n  ) => Promise<void> | void,\n): void;\n```\n\n----------------------------------------\n\nTITLE: Node Modules Compilation Configuration\nDESCRIPTION: Demonstrates how to compile all JavaScript files in node_modules while excluding core-js (not recommended for general use).\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/include.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  source: {\n    include: [{ not: /[\\\\/]core-js[\\\\/]/ }],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Customizing HTML Filename with Hash\nDESCRIPTION: Example showing how to modify HTML output filename by adding a content hash in production mode.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/tools/html-plugin.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    htmlPlugin(config, { entryName }) {\n      if (process.env.NODE_ENV === 'production') {\n        config.filename = `${entryName}.[contenthash:8].html`;\n      }\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Host App Configuration for Module Federation\nDESCRIPTION: Configuration for a host application in Module Federation, setting up remote module references and server port.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/module-federation/options.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\n\nexport default defineConfig({\n  server: {\n    port: 3002,\n  },\n  moduleFederation: {\n    options: {\n      name: 'host',\n      remotes: {\n        remote: 'remote@http://localhost:3002/remoteEntry.js',\n      },\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Loading environment variables with loadEnv\nDESCRIPTION: This snippet shows how to load environment variables prefixed with `VUE_APP_` using the `loadEnv` function from `@rsbuild/core` and inject them into the client code via the `source.define` configuration option. This ensures compatibility with Vue CLI's environment variable handling.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/migration/vue-cli.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig, loadEnv } from '@rsbuild/core';\n\nconst { publicVars } = loadEnv({ prefixes: ['VUE_APP_'] });\n\nexport default defineConfig({\n  source: {\n    define: publicVars,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: TypeScript Interface for Manifest Structure\nDESCRIPTION: TypeScript type definition showing the structure of the manifest file, with entries mapping and allFiles array.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/manifest.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\ntype FilePath = string;\n\ntype ManifestList = {\n  entries: {\n    /** The key is the entry name, from Rsbuild's source.entry config. */\n    [entryName: string]: {\n      initial?: {\n        js?: FilePath[];\n        css?: FilePath[];\n      };\n      async?: {\n        js?: FilePath[];\n        css?: FilePath[];\n      };\n      /** HTML files related to the current entry */\n      html?: FilePath[];\n      /** other assets (e.g. png、svg、source map) related to the current entry */\n      assets?: FilePath[];\n    };\n  };\n  /** Flatten all assets */\n  allFiles: FilePath[];\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Middlewares in Rsbuild Config\nDESCRIPTION: Example showing how to apply custom middlewares in order using unshift and push methods. The unshift method adds middleware to the beginning of the stack, while push adds it to the end.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/setup-middlewares.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    setupMiddlewares: [\n      (middlewares, server) => {\n        middlewares.unshift((req, res, next) => {\n          console.log('first');\n          next();\n        });\n\n        middlewares.push((req, res, next) => {\n          console.log('last');\n          next();\n        });\n      },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Registering React Plugin in Rsbuild\nDESCRIPTION: This code snippet demonstrates how to register the React plugin in your Rsbuild configuration file. This plugin enables Rsbuild to compile React's JSX syntax and adds the necessary configuration for building a React application. It imports the `defineConfig` and `pluginReact` functions from `@rsbuild/core` and `@rsbuild/plugin-react` respectively, and exports a configuration object with the React plugin registered.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/framework/react.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginReact } from '@rsbuild/plugin-react';\n\nexport default defineConfig({\n  plugins: [pluginReact()],\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Object-based Template Parameters in JavaScript\nDESCRIPTION: This example demonstrates how to set custom template parameters using an object in the Rsbuild configuration. It adds a 'foo' parameter with the value 'bar'.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/template-parameters.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    templateParameters: {\n      foo: 'bar',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Inspecting Configuration with rsbuild.inspectConfig\nDESCRIPTION: Inspects and debugs Rsbuild's internal configurations, providing access to resolved Rsbuild configuration, environment-specific configurations, and generated Rspack configurations. The method serializes these configurations for inspection.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_22\n\nLANGUAGE: typescript\nCODE:\n```\ntype InspectConfigOptions = {\n  /**\n   * Inspect the config in the specified mode.\n   * Available options: 'development' or 'production'.\n   * @default 'development'\n   */\n  mode?: RsbuildMode;\n  /**\n   * Enables verbose mode to display the complete function\n   * content in the configuration.\n   * @default false\n   */\n  verbose?: boolean;\n  /**\n   * Specify the output path for inspection results.\n   * @default 'output.distPath.root'\n   */\n  outputPath?: string;\n  /**\n   * Whether to write the inspection results to disk.\n   * @default false\n   */\n  writeToDisk?: boolean;\n};\n\nasync function InspectConfig(options?: InspectConfigOptions): Promise<{\n  rsbuildConfig: string;\n  bundlerConfigs: string[];\n  environmentConfigs: string[];\n  origin: {\n    rsbuildConfig: RsbuildConfig;\n    environmentConfigs: Record<string, EnvironmentConfig>;\n    bundlerConfigs: BundlerConfigs[];\n  };\n}>;\n```\n\nLANGUAGE: typescript\nCODE:\n```\nconst { rsbuildConfig, bundlerConfigs } = await rsbuild.inspectConfig();\n\nconsole.log(rsbuildConfig, bundlerConfigs);\n```\n\nLANGUAGE: typescript\nCODE:\n```\nawait rsbuild.inspectConfig({\n  writeToDisk: true,\n});\n```\n\nLANGUAGE: typescript\nCODE:\n```\nimport path from 'node:path';\n\nawait rsbuild.inspectConfig({\n  writeToDisk: true,\n  outputPath: path.join(__dirname, 'custom-dir'),\n});\n```\n\n----------------------------------------\n\nTITLE: Importing Modules with Path Extensions in TypeScript\nDESCRIPTION: Demonstrates how TypeScript allows the use of `.js` file extensions in imports, where Rsbuild configures Rspack to resolve such imports to `.ts` or `.tsx` files by default.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/typescript.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { someFn } from './some-module.js';\n```\n\n----------------------------------------\n\nTITLE: Registering Vue 3 Plugin with Rsbuild Configuration\nDESCRIPTION: The snippet demonstrates how to register the Vue plugin for Rsbuild in an existing project to enable the compilation of Vue Single File Components. It adds essential configurations required by Rsbuild to support Vue builds.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/framework/vue.mdx#2025-04-21_snippet_0\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginVue } from '@rsbuild/plugin-vue';\n\nexport default defineConfig({\n  plugins: [pluginVue()],\n});\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Script Tags to HTML in Rsbuild Plugin (TypeScript)\nDESCRIPTION: Example of using modifyHTMLTags in a Rsbuild plugin to add custom script tags to the head and body of generated HTML pages, including both external scripts and inline JavaScript.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/hooks.mdx#2025-04-21_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.modifyHTMLTags(({ headTags, bodyTags }) => {\n      headTags.push({\n        tag: 'script',\n        attrs: { src: 'https://example.com/foo.js' },\n      });\n      bodyTags.push({\n        tag: 'script',\n        children: 'console.log(\"hello world!\");',\n      });\n\n      return { headTags, bodyTags };\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Modifying configuration file for Rsbuild\nDESCRIPTION: This snippet demonstrates how to modify the configuration file from builder.config.ts to rsbuild.config.ts, including changing imports and replacing the builderPlugins field with plugins.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/migration/modern-builder.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\n\nexport default defineConfig({\n  plugins: [],\n});\n```\n\n----------------------------------------\n\nTITLE: Executing Node.js CPU Profiling for Rsbuild\nDESCRIPTION: Commands to run CPU profiling analysis for Rsbuild dev and build processes. This generates a cpuprofile file that can be visualized using speedscope.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/debug/build-profiling.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n# dev\nnode --cpu-prof ./node_modules/@rsbuild/core/bin/rsbuild.js dev\n\n# build\nnode --cpu-prof ./node_modules/@rsbuild/core/bin/rsbuild.js build\n```\n\n----------------------------------------\n\nTITLE: Setting Default Output Paths in JavaScript\nDESCRIPTION: Default configuration for output paths in Rsbuild. It defines the directory structure for various file types, with conditional logic for Node.js targets.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/dist-path.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultDistPath = {\n  root: 'dist',\n  html: './',\n  js: output.target === 'node' ? '' : 'static/js',\n  jsAsync: output.target === 'node' ? '' : 'static/js/async',\n  css: 'static/css',\n  cssAsync: 'static/css/async',\n  svg: 'static/svg',\n  font: 'static/font',\n  wasm: 'static/wasm',\n  image: 'static/image',\n  media: 'static/media',\n  assets: 'static/assets';\n};\n```\n\n----------------------------------------\n\nTITLE: Customizing HTML Plugin in Rsbuild Config (TypeScript)\nDESCRIPTION: This snippet demonstrates how to customize the HTML plugin options using the tools.htmlPlugin config in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/html-template.mdx#2025-04-21_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    htmlPlugin(config, { entryName }) {\n      if (process.env.NODE_ENV === 'production') {\n        config.filename = `${entryName}.[contenthash:8].html`;\n      }\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Localhost Host in Rsbuild\nDESCRIPTION: Configuration example for setting the Rsbuild server to listen only on localhost instead of all network interfaces.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/host.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    host: 'localhost',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Example of Generated Alias Configuration\nDESCRIPTION: Demonstrates how resolve.dedupe is internally transformed into alias configuration, showing the absolute paths to which packages are resolved.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/resolve/dedupe.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst alias = {\n  react: '/app/node_modules/react',\n  'react-dom': '/app/node_modules/react-dom',\n};\n```\n\n----------------------------------------\n\nTITLE: Customizing Chokidar Watch Options in Rsbuild\nDESCRIPTION: Example showing how to provide custom options to the underlying Chokidar file watcher in Rsbuild. This configuration disables polling for file watching.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/watch-files.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  dev: {\n    watchFiles: {\n      paths: 'src/**/*.txt',\n      options: {\n        usePolling: false,\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Importing Rsbuild (ES Modules)\nDESCRIPTION: This code snippet shows how to import the createRsbuild function using ES modules syntax. The createRsbuild function is imported from the '@rsbuild/core' package. This approach is recommended for its adherence to community standards.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/start/index.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createRsbuild } from '@rsbuild/core';\n```\n\n----------------------------------------\n\nTITLE: Modifying Default PostCSS Loader Options in Rsbuild\nDESCRIPTION: Example of modifying the default PostCSS loader options in the Rsbuild configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/postcss.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    postcss: (opts) => {\n      opts.sourceMap = false;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Dynamic Import Example in JavaScript\nDESCRIPTION: Example showing dynamic imports that will trigger prefetch tag generation.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/prefetch.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport('./foo');\nimport('./bar');\n```\n\n----------------------------------------\n\nTITLE: Config Merging Example\nDESCRIPTION: Example showing how to merge multiple Rsbuild configuration objects using mergeRsbuildConfig.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/core.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { mergeRsbuildConfig } from '@rsbuild/core';\n\nconst config1 = {\n  dev: {\n    https: false,\n  },\n};\nconst config2 = {\n  dev: {\n    https: true,\n  },\n};\n\nconst mergedConfig = mergeRsbuildConfig(config1, config2);\n\nconsole.log(mergedConfig); // { dev: { https: true } }\n```\n\n----------------------------------------\n\nTITLE: Setting App Icon in Rsbuild\nDESCRIPTION: Demonstrates how to set app icons for mobile devices using the html.appIcon configuration in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/html-template.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  html: {\n    appIcon: {\n      name: 'My Website',\n      icons: [\n        { src: './src/assets/logo-192.png', size: 192 },\n        { src: './src/assets/logo-512.png', size: 512 },\n      ],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Example Build Output with Default Hash\nDESCRIPTION: Shows the default output file structure with hash values in production build.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/filename-hash.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ndist/static/css/index.7879e19d.css\ndist/static/js/index.18a568e5.js\n```\n\n----------------------------------------\n\nTITLE: Defining NODE_ENV with source.define (JavaScript Config)\nDESCRIPTION: This JavaScript snippet demonstrates how to use the `source.define` option to manually define the `process.env.NODE_ENV` environment variable.  This allows for overwriting the default behaviour.  It is essential to use `JSON.stringify` to ensure the value is properly processed.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_26\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  source: {\n    define: {\n      'process.env.NODE_ENV': JSON.stringify(process.env.NODE_ENV),\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Conditionally Enabling CORS for Dev Server in Rsbuild Config\nDESCRIPTION: This example demonstrates how to enable CORS only for the development server based on the NODE_ENV environment variable.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/cors.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst isDev = process.env.NODE_ENV === 'development';\n\nexport default {\n  server: {\n    cors: isDev ? { origin: 'https://example.com' } : false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Extending process.env Type Declarations in Rsbuild\nDESCRIPTION: TypeScript declaration file example showing how to extend the NodeJS.ProcessEnv interface to provide type support for environment variables accessed via process.env.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/env-vars.mdx#2025-04-21_snippet_23\n\nLANGUAGE: ts\nCODE:\n```\ndeclare namespace NodeJS {\n  interface ProcessEnv {\n    // process.env.PUBLIC_FOO\n    PUBLIC_FOO: string;\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Default Template Parameters Type in TypeScript\nDESCRIPTION: This snippet defines the default template parameters type for HTML templates in Rsbuild. It includes various properties such as mountId, entryName, assetPrefix, and compilation-related information.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/template-parameters.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype DefaultParameters = {\n  mountId: string; // the value of `html.mountId` config\n  entryName: string; // entry name\n  assetPrefix: string; // the value of dev.assetPrefix or output.assetPrefix configs\n  compilation: Compilation; // Compilation object of Rspack\n  rspackConfig: Rspack.Configuration; // Rspack config object\n  // generated by html-rspack-plugin\n  htmlPlugin: {\n    tags: {\n      headTags: HtmlTagObject[];\n      bodyTags: HtmlTagObject[];\n    };\n    files: {\n      publicPath: string;\n      js: Array<string>;\n      css: Array<string>;\n      favicon?: string;\n    };\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Customizing Logger Behavior in Rsbuild\nDESCRIPTION: Shows how to override the default logger methods in @rsbuild/core with custom implementations, allowing for custom formatting and conditional logging.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/core.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport { logger } from '@rsbuild/core';\n\nlogger.override({\n  log: (message) => {\n    console.log(`[log] ${message}`);\n  },\n  info: (message) => {\n    console.log(`[info] ${message}`);\n  },\n  warn: (message) => {\n    console.warn(`[warn] ${message}`);\n  },\n  start: (message) => {\n    console.log(`[start] ${message}`);\n  },\n  ready: (message) => {\n    console.log(`[ready] ${message}`);\n  },\n  error: (message) => {\n    console.error(`[error] ${message}`);\n  },\n  success: (message) => {\n    console.error(`[success] ${message}`);\n  },\n  debug: (message) => {\n    if (process.env.DEBUG) {\n      console.log(`[debug] ${message}`);\n    }\n  },\n});\n\nlogger.info('hello'); // [info] hello\n```\n\n----------------------------------------\n\nTITLE: Forcing Asset Inlining with React in TSX\nDESCRIPTION: This snippet illustrates how to force an asset to be inlined using a query parameter when importing the asset in a React component. The snippet imports an image and ensures it is always inlined regardless of size, requiring React environment setup.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/optimization/inline-assets.mdx#2025-04-21_snippet_2\n\nLANGUAGE: TSX\nCODE:\n```\nimport React from 'react';\nimport img from '. /foo.png?inline';\n\nexport default function Foo() {\n  return <img src={img} />;\n}\n```\n\n----------------------------------------\n\nTITLE: Example Build Output without Hash\nDESCRIPTION: Shows the output file structure when hash is disabled in the build configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/filename-hash.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\ndist/static/css/index.css\ndist/static/js/index.js\n```\n\n----------------------------------------\n\nTITLE: Configuring Asset Module Rules\nDESCRIPTION: Sets up asset module configuration for handling unknown file types in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/cra.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: {\n      module: {\n        rules: [\n          {\n            test: /\\.png$/,\n            type: 'asset/resource',\n            generator: {\n              filename: 'static/media/[name].[hash][ext]',\n            },\n          },\n        ],\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining Plugin to Remove Another Plugin\nDESCRIPTION: Demonstrates how a plugin can remove another plugin using the `remove` property. This prevents the specified plugin from being executed during the build process. The Foo plugin will not be executed when both Foo and Bar are registered.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/core.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nconst pluginFoo = {\n  name: 'plugin-foo',\n};\n\nconst pluginBar = {\n  name: 'plugin-bar',\n  remove: ['plugin-foo'],\n};\n```\n\n----------------------------------------\n\nTITLE: Defining ModifyRspackConfig Type with TypeScript\nDESCRIPTION: Type definition for the modifyRspackConfig hook, which allows direct modification of Rspack configuration. The hook receives the Rspack config object and utility functions, and can return a new config or modify the existing one.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/hooks.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\ntype ModifyRspackConfigUtils = {\n  environment: EnvironmentContext;\n  env: string;\n  isDev: boolean;\n  isProd: boolean;\n  target: RsbuildTarget;\n  isServer: boolean;\n  isWebWorker: boolean;\n  rspack: Rspack;\n  HtmlPlugin: typeof import('html-rspack-plugin');\n  // more...\n};\n\nfunction ModifyRspackConfig(\n  callback: (\n    config: Rspack.Configuration,\n    utils: ModifyRspackConfigUtils,\n  ) => Promise<RspackConfig | void> | Rspack.Configuration | void,\n): void;\n```\n\n----------------------------------------\n\nTITLE: Configuring PostCSS with Tailwind CSS\nDESCRIPTION: This code snippet demonstrates how to configure PostCSS to use the `tailwindcss` plugin. It shows a basic configuration within `postcss.config.cjs` to register the plugin.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/styling/tailwindcss-v3.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nmodule.exports = {\n  plugins: {\n    tailwindcss: {},\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Build Entry Points with Rsbuild\nDESCRIPTION: This code snippet illustrates how to configure build entry points in Rsbuild using the `source.entry` option within the `rsbuild.config.ts` file. It defines multiple entry points, mapping names like 'foo' and 'bar' to their respective TypeScript file paths.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/webpack.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  source: {\n    entry: {\n      foo: './src/pages/foo/index.ts',\n      bar: './src/pages/bar/index.ts',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using getRsbuildConfig in Plugin Setup\nDESCRIPTION: Demonstrates how to use the getRsbuildConfig method to access the current Rsbuild configuration within a plugin.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/core.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nconst pluginFoo = () => ({\n  setup(api) {\n    const config = api.getRsbuildConfig();\n    console.log(config.html?.title);\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using Object Configuration with Explicit Test Pattern\nDESCRIPTION: Configuration example using the object format with explicit enable and test options to specify which files should be inlined.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/inline-scripts.mdx#2025-04-21_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    inlineScripts: {\n      enable: true,\n      test: /[\\\\/]main\\.\\w+\\.js$/,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring isolatedModules in tsconfig.json for TypeScript\nDESCRIPTION: Enables the isolatedModules option in tsconfig.json to ensure compatibility with SWC and Babel compilation in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/typescript.mdx#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"compilerOptions\": {\n    \"isolatedModules\": true\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Preserving Specific Files During Cleaning in JavaScript\nDESCRIPTION: Example of using the 'keep' option to preserve specific files (matching a regex) when cleaning the output directory.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/clean-dist-path.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    cleanDistPath: {\n      keep: [/dist\\/foo.json/],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using Transform API with Various Conditions\nDESCRIPTION: Demonstrates different ways to use the transform API with various matching conditions and transformation handlers.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/core.mdx#2025-04-21_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\napi.transform({ test: /\\.pug$/ }, ({ code }) => {\n  // ...\n});\n\napi.transform({ test: /\\.pug$/, targets: ['web'] }, ({ code }) => {\n  // ...\n});\n\napi.transform({ test: /\\.pug$/, environments: ['web'] }, ({ code }) => {\n  // ...\n});\n\napi.transform({ resourceQuery: /raw/ }, ({ code }) => {\n  // ...\n});\n\napi.transform({ test: /\\.node$/, raw: true }, ({ code }) => {\n  // ...\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring single-vendor strategy in Rsbuild\nDESCRIPTION: This code snippet illustrates how to configure the `single-vendor` strategy in Rsbuild, which bundles all third-party dependencies into one chunk and source code into another. This can lead to very large vendor files, potentially impacting page loading performance.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/optimization/code-splitting.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  performance: {\n    chunkSplit: {\n      strategy: 'single-vendor',\n    },\n  },\n};\n\n```\n\n----------------------------------------\n\nTITLE: Using Environment Variables in HTML Templates with Rsbuild\nDESCRIPTION: Example showing how to include public environment variables in HTML template files. Public variables can replace identifiers in both JavaScript and HTML template files.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/env-vars.mdx#2025-04-21_snippet_17\n\nLANGUAGE: xml\nCODE:\n```\n<div><%= process.env.PUBLIC_NAME %></div>\n```\n\n----------------------------------------\n\nTITLE: Setting Script Tag Position with html.inject\nDESCRIPTION: Configuration example showing how to change the script tag injection position to the body tag for better DOM access with inlined scripts.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/inline-scripts.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  html: {\n    inject: 'body', // [!code highlight]\n  },\n  output: {\n    inlineScripts: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring inlineStyles with Object Syntax and Custom Test\nDESCRIPTION: TypeScript configuration example showing how to use the object syntax with explicit enable option and a regular expression test to target specific CSS files.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/inline-styles.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    inlineStyles: {\n      enable: true,\n      test: /[\\\\/]main\\.\\w+\\.css$/,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring HTML Plugin with Function Type in JavaScript\nDESCRIPTION: An example of configuring the HTML plugin using a function type. This function modifies the scriptLoading option for the 'main' entry.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/html-plugin.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    htmlPlugin(config, { entryName, entryValue }) {\n      if (entryName === 'main') {\n        config.scriptLoading = 'blocking';\n      }\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Default HTML Fallback in Rsbuild Configuration (TypeScript)\nDESCRIPTION: This snippet demonstrates how to set the default HTML fallback behavior in the Rsbuild configuration. It uses the 'index' value, which is also the default setting if not specified.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/html-fallback.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    htmlFallback: 'index',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Importing Small Image Asset for Inline Inlining in JavaScript\nDESCRIPTION: This snippet demonstrates importing a small image into a JavaScript file, which Rsbuild automatically inlines as a Base64 string if it is below the size threshold. Dependencies include the 'smallImage' asset and appropriate Rsbuild configurations. Outputs a Base64 encoded string representation of the image.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/optimization/inline-assets.mdx#2025-04-21_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport smallImage from './static/smallImage.png';\n\nconsole.log(smallImage); // \"data:image/png;base64,iVBORw0KGgo...\"\n```\n\n----------------------------------------\n\nTITLE: Default HTML Plugin Configuration Options in JavaScript\nDESCRIPTION: Shows the default configuration options used by the HTML plugin including meta, title, inject, favicon, template and other HTML-related settings.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/tools/html-plugin.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultOptions = {\n  meta, // 对应 `html.meta` 配置\n  title, // 对应 `html.title` 配置\n  inject, // 对应 `html.inject` 配置\n  favicon, // 对应 `html.favicon` 配置\n  template, // 对应 `html.template` 配置\n  filename, // 基于 `output.distPath` 和 `entryName` 生成\n  templateParameters, // 对应 `html.templateParameters` 配置\n  chunks: [entryName],\n};\n```\n\n----------------------------------------\n\nTITLE: Example Tailwind CSS Utility Class Usage\nDESCRIPTION: Demonstration of using Tailwind CSS utility classes in an HTML element to style text\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/styling/tailwindcss.mdx#2025-04-21_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<h1 class=\"text-3xl font-bold underline\">Hello world!</h1>\n```\n\n----------------------------------------\n\nTITLE: Registering Stylus Plugin in Rsbuild Configuration\nDESCRIPTION: Example of how to register the Stylus plugin in Rsbuild configuration file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/plugins.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginStylus } from '@rsbuild/plugin-stylus';\n\nexport default defineConfig({\n  plugins: [pluginStylus()],\n});\n```\n\n----------------------------------------\n\nTITLE: CreateRsbuild Options Type Definition\nDESCRIPTION: Type definition showing available options for creating a Rsbuild instance.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/core.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\ntype CreateRsbuildOptions = {\n  cwd?: string;\n  environment?: string[];\n  rsbuildConfig?: RsbuildConfig | (() => Promise<RsbuildConfig>);\n  loadEnv?: boolean | LoadEnvOptions;\n};\n```\n\n----------------------------------------\n\nTITLE: Using onAfterStartProdServer Hook\nDESCRIPTION: This hook is triggered after the production server has started. It provides access to the server port and routes information for the production server.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_32\n\nLANGUAGE: typescript\nCODE:\n```\nrsbuild.onAfterStartProdServer(({ port, routes }) => {\n  console.log('this port is: ', port);\n  console.log('this routes is: ', routes);\n});\n```\n\n----------------------------------------\n\nTITLE: Setting Custom SSL Certificates for HTTPS in Rsbuild\nDESCRIPTION: Example configuration showing how to manually set SSL certificates for HTTPS server in Rsbuild by reading certificate files from the filesystem and setting them in the server.https option.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/https.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport fs from 'node:fs';\n\nexport default {\n  server: {\n    https: {\n      key: fs.readFileSync('certificates/private.pem'),\n      cert: fs.readFileSync('certificates/public.pem'),\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Inspecting Rsbuild Production Configuration\nDESCRIPTION: This command inspects and outputs the Rsbuild configuration for the production mode. It's useful for verifying production-specific settings.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/cli.mdx#2025-04-21_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\nrsbuild inspect --mode production\n```\n\n----------------------------------------\n\nTITLE: Basic Module Federation Configuration in TypeScript\nDESCRIPTION: Basic example of configuring moduleFederation.options in Rsbuild config file. Shows how to set up the name and other options for Module Federation.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/module-federation/options.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  moduleFederation: {\n    options: {\n      name: 'remote',\n      // other options\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Registering Solid Plugin with Rsbuild\nDESCRIPTION: Demonstrates how to register the Solid plugin in the Rsbuild configuration. This example includes the required Babel plugin configuration with an include pattern to match only JSX and TSX files to reduce performance overhead.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-solid.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginBabel } from '@rsbuild/plugin-babel';\nimport { pluginSolid } from '@rsbuild/plugin-solid';\n\nexport default {\n  plugins: [\n    pluginBabel({\n      include: /\\.(?:jsx|tsx)$/,\n    }),\n    pluginSolid(),\n  ],\n};\n```\n\n----------------------------------------\n\nTITLE: Importing SVG as URL after setting exportType\nDESCRIPTION: This demonstrates that after setting the export type, the url can still be imported. It is done by specifying the `?url` query.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-svgr.mdx#2025-04-21_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\nimport logo from './logo.svg?url';\n\nconsole.log(logo); // => asset url\n```\n\n----------------------------------------\n\nTITLE: Configuring overrideBrowserslist in Rsbuild\nDESCRIPTION: Example of using the overrideBrowserslist configuration in Rsbuild to override default browser targets.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/browserslist.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    overrideBrowserslist: [\n      'iOS >= 9',\n      'Android >= 4.4',\n      'last 2 versions',\n      '> 0.2%',\n      'not dead',\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Transform with Target Specification\nDESCRIPTION: Demonstrates how to use the `targets` property in the transform descriptor to match modules based on the Rsbuild output target. The transform will only apply when the build target is set to 'web'. This enables target-specific code transformations.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/core.mdx#2025-04-21_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\napi.transform({ test: /\\.pug$/, targets: ['web'] }, ({ code }) => {\n  // ...\n});\n```\n\n----------------------------------------\n\nTITLE: Using Function to Inline Scripts Based on File Size\nDESCRIPTION: Configuration example showing how to use a function to conditionally inline JavaScript files based on their size, inlining only files smaller than 10KB.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/inline-scripts.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    inlineScripts({ size }) {\n      return size < 10 * 1000;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using sockWrite to Trigger Page Reload in Rsbuild\nDESCRIPTION: Example of using the sockWrite server API to send a message to the HMR client, triggering a page reload when specific conditions are met.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/setup-middlewares.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    setupMiddlewares: [\n      (middlewares, server) => {\n        if (someCondition) {\n          server.sockWrite('static-changed');\n        }\n      },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using import.meta.env.MODE in TypeScript\nDESCRIPTION: Demonstrates how to use import.meta.env.MODE to check the current mode (development or production) in client-side code.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/env-vars.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nif (import.meta.env.MODE === 'development') {\n  console.log('this is development mode');\n}\n```\n\n----------------------------------------\n\nTITLE: Conditional Cleanup Configuration\nDESCRIPTION: Example of conditional cleanup based on NODE_ENV environment variable.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/clean-dist-path.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    cleanDistPath: process.env.NODE_ENV === 'production',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Rsbuild for SSR\nDESCRIPTION: Rsbuild configuration for SSR, defining separate environments for web and node targets.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/ssr.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  environments: {\n    // Configure the web environment for browsers\n    web: {\n      source: {\n        entry: {\n          index: './src/index.client.js',\n        },\n      },\n      output: {\n        // Use 'web' target for the browser outputs\n        target: 'web',\n      },\n      html: {\n        // Custom HTML template\n        template: './index.html',\n      },\n    },\n    // Configure the node environment for SSR\n    node: {\n      source: {\n        entry: {\n          index: './src/index.server.js',\n        },\n      },\n      output: {\n        // Use 'node' target for the Node.js outputs\n        target: 'node',\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling HMR in Rsbuild Configuration\nDESCRIPTION: This snippet shows how to disable Hot Module Replacement in Rsbuild by setting the 'dev.hmr' option to false in the configuration file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/hmr.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    hmr: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Legacy Decorators in Rsbuild v1\nDESCRIPTION: Example showing how to configure Rsbuild to use legacy decorators instead of the default 2022-11 decorators version.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/rsbuild-0-x.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\n\nexport default defineConfig({\n  source: {\n    decorators: {\n      version: 'legacy',\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Enabling Incremental Build in Rsbuild with Rspack\nDESCRIPTION: Configuration to enable Rspack's experimental incremental build feature in development mode to improve HMR (Hot Module Replacement) speed.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/optimization/build-performance.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst isDev = process.env.NODE_ENV === 'development';\n\nexport default {\n  tools: {\n    rspack: {\n      experiments: {\n        incremental: isDev,\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Handling After Dev Server Start Hook\nDESCRIPTION: Example of using onAfterStartDevServer hook to access port and routes information after the development server has started.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/hooks.mdx#2025-04-21_snippet_24\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onAfterStartDevServer(({ port, routes }) => {\n      console.log('this port is: ', port);\n      console.log('this routes is: ', routes);\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Basic Rsbuild Instance Creation\nDESCRIPTION: Example showing how to create a basic Rsbuild instance with configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/core.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRsbuild } from '@rsbuild/core';\n\nconst rsbuild = await createRsbuild({\n  rsbuildConfig: {\n    // Rsbuild configuration\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Source Include for Node Modules in TypeScript\nDESCRIPTION: Example of including specific node_modules in the transformImport process using the source.include configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/transform-import.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  source: {\n    include: [/node_modules[\\/]some-package[\\/]/],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Flat Directory Structure Example in Rsbuild\nDESCRIPTION: Shows the default flat directory structure where HTML files are placed directly in the dist directory.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/output-structure.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n/dist\n └── [name].html\n```\n\n----------------------------------------\n\nTITLE: Setting a Specific File as Static Asset using Absolute Path in Rsbuild\nDESCRIPTION: This example shows how to designate a specific file as a static asset by providing its absolute path using Node's path module.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/source/assets-include.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport path from 'node:path';\n\nexport default defineConfig({\n  source: {\n    assetsInclude: path.resolve(__dirname, 'src/assets/foo.json5'),\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Resulting Script Tag with Full URL assetPrefix (HTML)\nDESCRIPTION: Example of the resulting script tag in HTML when dev.assetPrefix is set to a full URL.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/dev/asset-prefix.mdx#2025-04-21_snippet_6\n\nLANGUAGE: html\nCODE:\n```\n<script defer src=\"https://example.com/assets/static/js/index.js\"></script>\n```\n\n----------------------------------------\n\nTITLE: Creating Rsbuild Plugin with Dev Server Hook\nDESCRIPTION: Demonstrates how to create a Rsbuild plugin and access the development server instance using the onBeforeStartDevServer hook\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/dev-server-api.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onBeforeStartDevServer(({ server }) => {\n      console.log('the server is ', server);\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Script Tag Injection in Rsbuild\nDESCRIPTION: Configuration to set the injection point of inlined scripts to the body tag, ensuring inlined scripts can access DOM elements in the body.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/inline-scripts.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  html: {\n    inject: 'body', // [!code highlight]\n  },\n  output: {\n    inlineScripts: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Retrieving Normalized Rsbuild Configuration\nDESCRIPTION: Obtains the normalized Rsbuild configuration, which can only be called after the `modifyRsbuildConfig` hook has completed. Equivalent to the `getNormalizedConfig` method.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/shared/getRsbuildConfig.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\ngetRsbuildConfig('normalized');\n```\n\n----------------------------------------\n\nTITLE: Defining CSSExtractOptions Type in TypeScript\nDESCRIPTION: This snippet defines the TypeScript type for CSS extraction options in Rsbuild. It includes types for both plugin and loader options from @rspack/core.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/css-extract.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport type {\n  CssExtractRspackPluginOptions,\n  CssExtractRspackLoaderOptions,\n} from '@rspack/core';\n\ntype CSSExtractOptions = {\n  pluginOptions?: CssExtractRspackPluginOptions;\n  loaderOptions?: CssExtractRspackLoaderOptions;\n};\n```\n\n----------------------------------------\n\nTITLE: Configure lessLoaderOptions (JavaScript)\nDESCRIPTION: Demonstrates how to configure the `lessLoaderOptions` in two ways: using an object to merge with the default config or using a function to modify the default config directly.  It is important to understand that `lessOptions` is merged using `deepMerge`.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-less.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\npluginLess({\n  lessLoaderOptions: {\n    lessOptions: {\n      javascriptEnabled: false,\n    },\n  },\n});\n```\n\nLANGUAGE: javascript\nCODE:\n```\npluginLess({\n  lessLoaderOptions(config) {\n    config.lessOptions = {\n      javascriptEnabled: false,\n    };\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring ASCII Charset in Rsbuild\nDESCRIPTION: Example configuration to set ASCII character encoding for output files in Rsbuild. This setting affects files compiled by SWC, primarily JavaScript and TypeScript files. Non-ASCII characters will be escaped with backslashes.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/charset.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    charset: 'ascii',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling HTML Fallback in Rsbuild Configuration (TypeScript)\nDESCRIPTION: This code example shows how to disable the HTML fallback feature in Rsbuild by setting the htmlFallback option to false in the server configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/html-fallback.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    htmlFallback: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Importing YAML Plugin in Rsbuild Configuration\nDESCRIPTION: Code snippet demonstrating how to import and use the YAML plugin in Rsbuild configuration. The YAML plugin is now a separate package that needs to be explicitly imported and added to the plugins array.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-3.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n// rsbuild.config.ts\nimport { pluginYaml } from '@rsbuild/plugin-yaml';\n\nexport default {\n  plugins: [pluginYaml()],\n};\n```\n\n----------------------------------------\n\nTITLE: Optimizing Tailwind CSS Style Size with Plugin - TypeScript\nDESCRIPTION: This TypeScript code snippet demonstrates how to use the rsbuild-plugin-tailwindcss plugin to optimize Tailwind CSS build performance by setting accurate content paths automatically.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/styling/tailwindcss-v3.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginTailwindCSS } from 'rsbuild-plugin-tailwindcss';\n\nexport default {\n  plugins: [pluginTailwindCSS()],\n};\n```\n\n----------------------------------------\n\nTITLE: Basic Source Include Configuration\nDESCRIPTION: Demonstrates how to include additional directories for SWC compilation using path resolution.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/include.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport path from 'node:path';\n\nexport default {\n  source: {\n    include: [path.resolve(__dirname, '../other-dir')],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: GitHub Pages Asset Prefix Configuration\nDESCRIPTION: Configuration for setting up asset prefix specifically for GitHub Pages deployment.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/static-deploy.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\n\nexport default defineConfig({\n  output: {\n    // Please replace <REPO_NAME> with the repository name.\n    // For example, \"/my-project/\"\n    assetPrefix: '/<REPO_NAME>/',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Object-based Meta Configuration\nDESCRIPTION: Example of setting meta tags using object configuration, demonstrating charset configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/meta.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    meta: {\n      charset: {\n        charset: 'UTF-8',\n      },\n    },\n  },\n};\n```\n\nLANGUAGE: html\nCODE:\n```\n<meta charset=\"UTF-8\" />\n```\n\n----------------------------------------\n\nTITLE: Configuring Include and Exclude Options (JS)\nDESCRIPTION: This JavaScript code snippet demonstrates how to configure the `include` and `exclude` options of the Babel plugin to specify which files should be compiled by Babel. It includes files ending with `.custom.js` and excludes files under `node_modules`, improving build performance. Assumes the pluginBabel function is available in the scope.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-babel.mdx#2025-04-21_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\npluginBabel({\n  include: /\\.custom\\.js$/,\n  // recommended to exclude the node_modules to improve build performance\n  exclude: /[\\\\/]node_modules[\\\\/]/,\n});\n```\n\n----------------------------------------\n\nTITLE: Using process.env.ASSET_PREFIX in HTML\nDESCRIPTION: Demonstrates how to use process.env.ASSET_PREFIX to construct URLs for static assets in HTML templates.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/env-vars.mdx#2025-04-21_snippet_8\n\nLANGUAGE: html\nCODE:\n```\n<!-- Equivalent to \"https://example.com/static/icon.png\" -->\n<link rel=\"icon\" href=\"<%= process.env.ASSET_PREFIX %>/static/icon.png\" />\n```\n\n----------------------------------------\n\nTITLE: Generated HTML Output with Injected Script Tag\nDESCRIPTION: Example HTML output showing how the configured script tag is injected into the HTML document with applied assetPrefix and hash.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/tags.mdx#2025-04-21_snippet_3\n\nLANGUAGE: html\nCODE:\n```\n<html>\n  <head>\n    <!-- some other headTags... -->\n    <script src=\"https://example.com/a.js?8327ec63\"></script>\n  </head>\n  <body>\n    <!-- some other bodyTags... -->\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Bad Tailwind CSS Configuration - Scanning node_modules\nDESCRIPTION: This code snippet shows an incorrect configuration of Tailwind CSS where `node_modules` is included in the `content` array, which can lead to significant performance degradation.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/styling/tailwindcss-v3.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\n/** @type {import('tailwindcss').Config} */\nmodule.exports = {\n  content: [\n    './src/**/*.{html,js,ts,jsx,tsx}',\n    // Scanning a large number of files, leading to performance degradation\n    './node_modules/**/*.js',\n  ],\n};\n```\n\n----------------------------------------\n\nTITLE: Handling Dev Server Close Hook\nDESCRIPTION: Shows implementation of onCloseDevServer hook to handle cleanup when development server is closing.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/hooks.mdx#2025-04-21_snippet_27\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onCloseDevServer(async () => {\n      console.log('close dev server!');\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Node.js Build Target\nDESCRIPTION: Example configuration for setting Node.js as the build target in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/target.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    target: 'node',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Type Declarations for Environment Variables in TypeScript\nDESCRIPTION: This TypeScript snippet shows how to declare a constant for an environment variable, which helps TypeScript recognize the variable and prevent errors related to missing type definitions.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_30\n\nLANGUAGE: TypeScript\nCODE:\n```\ndeclare const PUBLIC_FOO: string;\n```\n\n----------------------------------------\n\nTITLE: Modifying HTML Filename in Production Mode using JavaScript\nDESCRIPTION: An example of how to modify the HTML file name in production mode by adding a content hash to the filename.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/html-plugin.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    htmlPlugin(config, { entryName }) {\n      if (process.env.NODE_ENV === 'production') {\n        config.filename = `${entryName}.[contenthash:8].html`;\n      }\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining RsbuildTarget Type in TypeScript\nDESCRIPTION: Type definition for supported build targets in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/target.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype RsbuildTarget = 'web' | 'node' | 'web-worker';\n```\n\n----------------------------------------\n\nTITLE: Asynchronous Entry Configuration\nDESCRIPTION: Example demonstrating how to configure entry points asynchronously using glob pattern matching.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/entry.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport path from 'node:path';\\nimport { glob } from 'glob';\\nimport { defineConfig } from '@rsbuild/core';\\n\\nexport default defineConfig(async () => {\\n  const entryFiles = await glob('./src/**/main.{ts,tsx,js,jsx}');\\n\\n  const entry = Object.fromEntries(\\n    entryFiles.map((file) => {\\n      const entryName = path.basename(path.dirname(file));\\n      return [entryName, `./${file}`];\\n    }),\\n  );\\n\\n  return {\\n    source: {\\n      entry: entry,\\n    },\\n  };\\n});\n```\n\n----------------------------------------\n\nTITLE: Resulting Script Tag with Relative Path assetPrefix (HTML)\nDESCRIPTION: Example of the resulting script tag in HTML when dev.assetPrefix is set to a relative path.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/dev/asset-prefix.mdx#2025-04-21_snippet_4\n\nLANGUAGE: html\nCODE:\n```\n<script defer src=\"http://localhost:3000/example/static/js/index.js\"></script>\n```\n\n----------------------------------------\n\nTITLE: Configuring Split Chunks Options\nDESCRIPTION: This TypeScript snippet demonstrates how to configure the `splitChunks` option for the Vue plugin. It sets both `vue` and `router` to `false`, disabling the splitting of these libraries into separate chunks.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/list/plugin-vue.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\npluginVue({\n  splitChunks: {\n    vue: false,\n    router: false,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Svelte Plugin with preprocessOptions (TS)\nDESCRIPTION: This code demonstrates how to use the `preprocessOptions` to customize the behavior of `svelte-preprocess`.  It showcases the use of aliases and a custom language preprocessor for a fictitious \"potatoLanguage\".  This configuration allows for highly customized pre-processing of Svelte components.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-svelte.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\npluginSvelte({\n  preprocessOptions: {\n    aliases: [\n      ['potato', 'potatoLanguage'],\n      ['pot', 'potatoLanguage'],\n    ],\n    /** Add a custom language preprocessor */\n    potatoLanguage({ content, filename, attributes }) {\n      const { code, map } = require('potato-language').render(content);\n      return { code, map };\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Enabling Debug Mode for Rsbuild in Bash\nDESCRIPTION: Commands to enable debug mode for Rsbuild in both development and production environments. This allows for additional logging and configuration inspection.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/debug/debug-mode.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n# Debug in development mode\nDEBUG=rsbuild pnpm dev\n\n# Debug in production mode\nDEBUG=rsbuild pnpm build\n```\n\n----------------------------------------\n\nTITLE: Generated HTML Favicon Link Tag\nDESCRIPTION: This HTML snippet shows the automatically generated link tag for the favicon after recompiling the project with the favicon configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/favicon.mdx#2025-04-21_snippet_3\n\nLANGUAGE: html\nCODE:\n```\n<link rel=\"icon\" href=\"/favicon.ico\" />\n```\n\n----------------------------------------\n\nTITLE: Function-based CSS Loader Configuration\nDESCRIPTION: Shows how to configure css-loader using a function that receives the default config and can modify it directly or return a new config\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/css-loader.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    cssLoader: (config) => {\n      config.modules.exportOnlyLocals = true;\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Good NODE_ENV Usage (JavaScript)\nDESCRIPTION: This JavaScript snippet shows the correct way to access a defined environment variable using `process.env.NODE_ENV`. The define plugin requires a fully qualified variable name.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_27\n\nLANGUAGE: javascript\nCODE:\n```\nconsole.log(process.env.NODE_ENV);\n```\n\n----------------------------------------\n\nTITLE: Type Definition - Cache Path Context\nDESCRIPTION: Type definition for the cache path context property.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\ntype CachePath = string;\n```\n\n----------------------------------------\n\nTITLE: Running Linting Checks\nDESCRIPTION: Command to run the Biome linter to maintain code consistency and readability across the codebase.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/CONTRIBUTING.md#2025-04-21_snippet_14\n\nLANGUAGE: sh\nCODE:\n```\npnpm run lint\n```\n\n----------------------------------------\n\nTITLE: Customizing Classic JSX Runtime with Comments\nDESCRIPTION: In this snippet, comments are used to customize the classic JSX runtime settings by specifying the JSX pragma and fragment pragma directly in a TSX file. This allows for localized configuration within the component.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/framework/react.mdx#2025-04-21_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\n/** @jsx Preact.h */\n/** @jsxFrag Preact.Fragment */\n\nconst App = () => {\n  return <div>Hello World</div>;\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring 'inline' Legal Comments in Rsbuild\nDESCRIPTION: This configuration preserves all legal comments in their original positions within the output bundles. While this maintains the comments, it may increase the size of the output bundles.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/legal-comments.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    legalComments: 'inline',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Rsbuild Dev Server API Interface Definition (TypeScript)\nDESCRIPTION: Defines the TypeScript interface for the Rsbuild dev server API, including EnvironmentAPI, RsbuildDevServer, and CreateDevServerOptions types.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/dev-server-api.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\ntype EnvironmentAPI = {\n  [name: string]: {\n    /**\n     * Get stats info about current environment.\n     */\n    getStats: () => Promise<Stats>;\n    /**\n     * Load and execute stats bundle in server.\n     *\n     * @param entryName - relate to Rsbuild's `source.entry`\n     * @returns the return value of entry module.\n     */\n    loadBundle: <T = unknown>(entryName: string) => Promise<T>;\n    /**\n     * Get the compiled HTML template.\n     */\n    getTransformedHtml: (entryName: string) => Promise<string>;\n  };\n};\n\ntype RsbuildDevServer = {\n  /**\n   * The `connect` app instance.\n   * Can be used to attach custom middlewares to the dev server.\n   */\n  middlewares: Connect.Server;\n  /**\n   * The Node.js HTTP server instance.\n   * - Will be `Http2SecureServer` if `server.https` config is used.\n   * - Will be `null` if `server.middlewareMode` is enabled.\n   */\n  httpServer:\n    | import('node:http').Server\n    | import('node:http2').Http2SecureServer\n    | null;\n  /**\n   * Start listening on the Rsbuild dev server.\n   * Do not call this method if you are using a custom server.\n   */\n  listen: () => Promise<{\n    port: number;\n    urls: string[];\n    server: {\n      close: () => Promise<void>;\n    };\n  }>;\n  /**\n   * Environment API of Rsbuild server.\n   */\n  environments: EnvironmentAPI;\n  /**\n   * The resolved port.\n   * By default, Rsbuild server listens on port `3000` and automatically increments the port number if the port is occupied.\n   */\n  port: number;\n  /**\n   * Notify that the Rsbuild server has been started.\n   * Rsbuild will trigger `onAfterStartDevServer` hook in this stage.\n   */\n  afterListen: () => Promise<void>;\n  /**\n   * Activate socket connection.\n   * This ensures that HMR works properly.\n   */\n  connectWebSocket: (options: { server: HTTPServer }) => void;\n  /**\n   * Close the Rsbuild server.\n   */\n  close: () => Promise<void>;\n  /**\n   * Print the server URLs.\n   */\n  printUrls: () => void;\n  /**\n   * Open URL in the browser after starting the server.\n   */\n  open: () => Promise<void>;\n};\n\ntype CreateDevServerOptions = {\n  /**\n   * Using a custom Rspack Compiler object.\n   */\n  compiler?: Compiler | MultiCompiler;\n  /**\n   * Whether to get port silently and not print any logs.\n   * @default false\n   */\n  getPortSilently?: boolean;\n  /**\n   * Whether to trigger Rsbuild compilation\n   * @default true\n   */\n  runCompile?: boolean;\n};\n\nfunction CreateDevServer(\n  options?: CreateDevServerOptions,\n): Promise<RsbuildDevServer>;\n```\n\n----------------------------------------\n\nTITLE: Configuring resolve.extensions via tools.rspack in Rsbuild\nDESCRIPTION: Alternative way to configure resolve.extensions using the tools.rspack option, which merges with the default values rather than overriding them.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/resolve/extensions.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: {\n      resolve: {\n        extensions: ['.ts', '.tsx', '.js'],\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Supporting full process.env access in Rsbuild\nDESCRIPTION: Configuration to support full process.env access in client code, similar to CRA's behavior, by defining the process.env object with environment variables.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/migration/cra.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig, loadEnv } from '@rsbuild/core';\n\nconst { publicVars, rawPublicVars } = loadEnv({ prefixes: ['REACT_APP_'] });\n\nexport default defineConfig({\n  source: {\n    define: {\n      ...publicVars,\n      'process.env': JSON.stringify(rawPublicVars),\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Transform Handler Parameters Example\nDESCRIPTION: Shows how to access the various parameters provided by the transform handler function, such as the module's code, resource path, and query parameters. This example logs these values to the console.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/core.mdx#2025-04-21_snippet_12\n\nLANGUAGE: javascript\nCODE:\n```\napi.transform(\n  { test: /\\.pug$/ },\n  ({ code, resource, resourcePath, resourceQuery }) => {\n    console.log(code); // -> some code\n    console.log(resource); // -> '/home/user/project/src/template.pug?foo=123'\n    console.log(resourcePath); // -> '/home/user/project/src/template.pug'\n    console.log(resourceQuery); // -> '?foo=123'\n  },\n);\n```\n\n----------------------------------------\n\nTITLE: Accessing Environment Config in JavaScript\nDESCRIPTION: Example showing how to access both Rspack and Rsbuild configurations in a plugin.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/environment-api.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\napi.modifyRspackConfig((config, { environment }) => {\n  // Rspack config\n  console.log(config);\n  // Rsbuild config for current environment\n  console.log(environment.config);\n  return config;\n});\n```\n\n----------------------------------------\n\nTITLE: Importing Rsbuild Core in JavaScript\nDESCRIPTION: These snippets demonstrate how to import the createRsbuild function from @rsbuild/core using both ES modules and CommonJS syntax, showcasing Rsbuild 0.7's dual module support.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-7.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\n// ES module\nimport { createRsbuild } from '@rsbuild/core';\n\n// CommonJS\nconst { createRsbuild } = require('@rsbuild/core');\n```\n\n----------------------------------------\n\nTITLE: Resulting Script Tag with True assetPrefix (HTML)\nDESCRIPTION: Example of the resulting script tag in HTML when dev.assetPrefix is set to true.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/dev/asset-prefix.mdx#2025-04-21_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<script defer src=\"http://localhost:3000/static/js/main.js\"></script>\n```\n\n----------------------------------------\n\nTITLE: Defining Type Signatures for ModifyHTMLTags Method in Rsbuild (TypeScript)\nDESCRIPTION: Type definitions for the modifyHTMLTags method in Rsbuild, which allows modification of HTML tags injected into the generated HTML pages. Includes types for tag structure and compilation context.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/hooks.mdx#2025-04-21_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\ntype HtmlBasicTag = {\n  // Tag name\n  tag: string;\n  // Attributes of the tag\n  attrs?: Record<string, string | boolean | null | undefined>;\n  // innerHTML of the tag\n  children?: string;\n};\n\ntype HTMLTags = {\n  // Tags group inserted into <head>\n  headTags: HtmlBasicTag[];\n  // Tags group inserted into <body>\n  bodyTags: HtmlBasicTag[];\n};\n\ntype Context = {\n  /**\n   * The Compiler object of Rspack.\n   */\n  compiler: Rspack.Compiler;\n  /**\n   * The Compilation object of Rspack.\n   */\n  compilation: Rspack.Compilation;\n  /**\n   * URL prefix of assets.\n   * @example 'https://example.com/'\n   */\n  assetPrefix: string;\n  /**\n   * The name of the HTML file, relative to the dist directory.\n   * @example 'index.html'\n   */\n  filename: string;\n  /**\n   * The environment context for current build.\n   */\n  environment: EnvironmentContext;\n};\n\nfunction ModifyHTMLTags(\n  callback: (tags: HTMLTags, context: Context) => MaybePromise<HTMLTags>,\n): void;\n```\n\n----------------------------------------\n\nTITLE: Transform with Environment Specification\nDESCRIPTION: Demonstrates how to use the `environments` property in the transform descriptor to match modules based on the Rsbuild environment. The transform will only apply when the build environment is set to 'web'. This enables environment-specific code transformations.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/core.mdx#2025-04-21_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\napi.transform({ test: /\\.pug$/, environments: ['web'] }, ({ code }) => {\n  // ...\n});\n```\n\n----------------------------------------\n\nTITLE: Replacing Default PostCSS Configuration\nDESCRIPTION: Demonstrates how to completely replace the default PostCSS configuration with custom options.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/tools/postcss.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    postcss: () => {\n      return {\n        postcssOptions: {\n          plugins: [require('postcss-px-to-viewport')],\n        },\n      };\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Removing HTML Title Tag in Rsbuild Configuration\nDESCRIPTION: This configuration snippet demonstrates how to prevent Rsbuild from injecting the <title> tag by setting html.title to an empty string.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/title.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    title: '',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring PublicDir with Absolute Path\nDESCRIPTION: Example of configuring server.publicDir with an absolute path by using Node.js path module to resolve the directory location.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/public-dir.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport path from 'node:path';\n\nexport default {\n  server: {\n    publicDir: {\n      name: path.join(__dirname, '../some-public'),\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Specifying Import Source for JSX Runtime (TS)\nDESCRIPTION: Specifies the import source for the JSX runtime when using the `automatic` runtime.  This is useful for libraries like Emotion that require a different import source.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-react.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\npluginReact({\n  swcReactOptions: {\n    importSource: '@emotion/react',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Absolute Path Icon Configuration\nDESCRIPTION: JavaScript configuration example using absolute paths for icon sources\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/app-icon.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nimport path from 'node:path';\n\nexport default {\n  html: {\n    appIcon: {\n      name: 'My Website',\n      icons: [\n        { src: path.resolve(__dirname, './assets/icon-192.png'), size: 192 },\n        { src: path.resolve(__dirname, './assets/icon-512.png'), size: 512 },\n      ],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: HTML Output with Blocking Script Loading\nDESCRIPTION: Shows the resulting HTML output when using 'blocking' scriptLoading with scripts injected in the body to reduce rendering blockage.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/script-loading.mdx#2025-04-21_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<head></head>\n<body>\n  <script src=\"/static/js/main.js\"></script>\n</body>\n```\n\n----------------------------------------\n\nTITLE: Adding Cache Digests in Rsbuild Configuration\nDESCRIPTION: Example of adding cache digests to invalidate previous build cache when specific values change, such as environment variables.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/build-cache.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  performance: {\n    buildCache: {\n      cacheDigest: [process.env.SOME_ENV],\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Default Svelte Loader Options (JS)\nDESCRIPTION: This code defines the default options passed to `svelte-loader`. These options include settings for the Svelte compiler, preprocessor, CSS emission, and hot reloading. The `isDev`, `isProd`, and `rsbuildConfig` variables are assumed to be defined in the surrounding context.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-svelte.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultOptions = {\n  compilerOptions: {\n    dev: isDev,\n  },\n  preprocess: require('svelte-preprocess')(),\n  emitCss: isProd && !rsbuildConfig.output.injectStyles,\n  hotReload: isDev && rsbuildConfig.dev.hmr,\n};\n```\n\n----------------------------------------\n\nTITLE: HTML Output with Inlined CSS Styles\nDESCRIPTION: Example of the HTML output after enabling inlineStyles, showing how the CSS content is included within a style tag in the head of the document.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/inline-styles.mdx#2025-04-21_snippet_4\n\nLANGUAGE: html\nCODE:\n```\n<html>\n  <head>\n    <style>\n      /* content of dist/static/css/style.css */\n    </style>\n  </head>\n  <body></body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Bundle Analyzer Terminal Output\nDESCRIPTION: Example of the console output when bundle analysis report is generated.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/bundle-analyze.mdx#2025-04-21_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nWebpack Bundle Analyzer saved report to /Project/my-project/dist/report-web.html\n```\n\n----------------------------------------\n\nTITLE: Using onBeforeEnvironmentCompile in a Rsbuild Plugin\nDESCRIPTION: Example of creating a plugin that uses the onBeforeEnvironmentCompile hook to log bundler configuration for a specific environment before compilation.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/hooks.mdx#2025-04-21_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onBeforeEnvironmentCompile(({ bundlerConfig, environment }) => {\n      console.log(\n        `the bundler config for the ${environment.name} is `,\n        bundlerConfig,\n      );\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Server URL for Lazy Compilation\nDESCRIPTION: Configuration showing how to specify a custom server URL for lazy compilation client requests.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/dev/lazy-compilation.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    lazyCompilation: {\n      serverUrl: 'http://localhost:<port>',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining Decorator Types in TypeScript\nDESCRIPTION: Type definition for decorator configuration options, specifying available decorator syntax versions.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/decorators.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype Decorators = {\n  version?: 'legacy' | '2022-03';\n};\n```\n\n----------------------------------------\n\nTITLE: Installing Node.js Types for process.env in TypeScript\nDESCRIPTION: This snippet discusses the need to install the @types/node package and how to extend the ProcessEnv interface to define environment variables required by the application.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_32\n\nLANGUAGE: TypeScript\nCODE:\n```\ndeclare namespace NodeJS {\n  interface ProcessEnv {\n    // process.env.PUBLIC_FOO\n    PUBLIC_FOO: string;\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Modifying Package.json for SSR\nDESCRIPTION: Updated package.json scripts for running SSR development and production servers.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/ssr.mdx#2025-04-21_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"build\": \"rsbuild build\",\n    \"dev\": \"node ./server.mjs\",\n    \"preview\": \"node ./prod-server.mjs\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: CSS Module Import Examples\nDESCRIPTION: Examples of importing CSS files from node_modules and using inline/raw query parameters.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/styling/css-usage.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport 'normalize.css';\n```\n\nLANGUAGE: css\nCODE:\n```\n@import 'normalize.css';\n\nbody {\n  /* */\n}\n```\n\nLANGUAGE: scss\nCODE:\n```\n@import 'normalize.css';\n```\n\nLANGUAGE: typescript\nCODE:\n```\nimport inlineCss from './style.css?inline';\n\nconsole.log(inlineCss);\n```\n\nLANGUAGE: typescript\nCODE:\n```\nimport rawCss from './style.css?raw';\n\nconsole.log(rawCss);\n```\n\n----------------------------------------\n\nTITLE: Type Definition - Root Path Context\nDESCRIPTION: Type definition for the root path context property.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ntype RootPath = string;\n```\n\n----------------------------------------\n\nTITLE: Using import.meta.env.ASSET_PREFIX in JSX\nDESCRIPTION: Demonstrates how to use import.meta.env.ASSET_PREFIX to construct URLs for static assets in JSX code.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/env-vars.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nconst Image = <img src={`${import.meta.env.ASSET_PREFIX}/static/icon.png`} />;\n```\n\n----------------------------------------\n\nTITLE: Target-Specific Icon Configuration\nDESCRIPTION: JavaScript configuration example specifying different targets for icons\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/app-icon.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    appIcon: {\n      name: 'My Website',\n      icons: [\n        {\n          src: './src/assets/icon-180.png',\n          size: 180,\n          target: 'apple-touch-icon',\n        },\n        {\n          src: './src/assets/icon-192.png',\n          size: 192,\n          target: 'web-app-manifest',\n        },\n        {\n          src: './src/assets/icon-512.png',\n          size: 512,\n          target: 'web-app-manifest',\n        },\n      ],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Rspack DevTool for Development in Rsbuild\nDESCRIPTION: This example demonstrates how to set the Rspack devtool option specifically for development builds using the isDev utility.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/rspack.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: (config, { isDev }) => {\n      if (isDev) {\n        config.devtool = 'eval-cheap-source-map';\n      }\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using onBeforeStartProdServer Hook\nDESCRIPTION: This hook is triggered before the production server starts. It can be used for setup tasks or server customization before serving production builds.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_31\n\nLANGUAGE: typescript\nCODE:\n```\nrsbuild.onBeforeStartProdServer(() => {\n  console.log('before start!');\n});\n```\n\n----------------------------------------\n\nTITLE: TypeScript Definitions for Vue Components\nDESCRIPTION: In a TypeScript project using Vue 2, this snippet illustrates how to declare modules for '*.vue' files, allowing TypeScript to recognize Vue components appropriately.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/framework/vue.mdx#2025-04-21_snippet_2\n\nLANGUAGE: TypeScript\nCODE:\n```\ndeclare module '*.vue' {\n  import Vue from 'vue';\n\n  export default Vue;\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Loader Aliases in Rsbuild\nDESCRIPTION: Using Rspack's resolveLoader configuration to create aliases for loaders, as resolve.alias doesn't support loader aliases directly.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/resolve/alias.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: {\n      resolveLoader: {\n        alias: {\n          'amazing-loader': require.resolve('path-to-your-amazing-loader'),\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Getting Rsbuild Core Version\nDESCRIPTION: Shows how to retrieve the current version of the @rsbuild/core package, useful for diagnostics and version-dependent functionality.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/core.mdx#2025-04-21_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nimport { version } from '@rsbuild/core';\n\nconsole.log(version); // 1.0.0\n```\n\n----------------------------------------\n\nTITLE: Basic Preconnect Configuration Example\nDESCRIPTION: Simple example showing how to configure preconnect with a direct URL string.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/preconnect.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  performance: {\n    preconnect: ['https://example.com/'],\n  },\n};\n```\n\nLANGUAGE: html\nCODE:\n```\n<link ref=\"preconnect\" href=\"https://example.com\" />\n```\n\n----------------------------------------\n\nTITLE: Enabling inlineScripts with Boolean Configuration\nDESCRIPTION: JavaScript configuration example showing how to enable the inlineScripts option using a simple boolean value.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/inline-scripts.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    inlineScripts: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using Template Parameters in HTML (HTML)\nDESCRIPTION: This snippet shows how to use template parameters in an HTML file when using Rsbuild's default template engine.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/html-template.mdx#2025-04-21_snippet_7\n\nLANGUAGE: html\nCODE:\n```\n<div>hello <%= text %>!</div>\n```\n\n----------------------------------------\n\nTITLE: Running Unit Tests for a Single Package\nDESCRIPTION: Command to run unit tests for a specific package in the monorepo, targeting the core package.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/CONTRIBUTING.md#2025-04-21_snippet_11\n\nLANGUAGE: sh\nCODE:\n```\npnpm run ut packages/core\n```\n\n----------------------------------------\n\nTITLE: Including .json5 Files as Static Assets in Rsbuild\nDESCRIPTION: This example demonstrates how to configure Rsbuild to treat .json5 files as static assets using the source.assetsInclude option.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/assets-include.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  source: {\n    assetsInclude: /\\.json5$/,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using Custom Parameters in HTML Template\nDESCRIPTION: This HTML snippet shows how to use a custom parameter 'foo' in an HTML template. The parameter value is inserted using the <%= %> syntax.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/template-parameters.mdx#2025-04-21_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<script>\n  window.foo = '<%= foo %>';\n</script>\n```\n\n----------------------------------------\n\nTITLE: Building Rsbuild Project for Production\nDESCRIPTION: This command builds the Rsbuild project for production, generating output in the 'dist/' directory by default. It can be used with the --watch option for incremental builds.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/cli.mdx#2025-04-21_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nrsbuild build\n```\n\n----------------------------------------\n\nTITLE: Using onDevCompileDone Hook in TypeScript\nDESCRIPTION: This example demonstrates how to use the onDevCompileDone hook to log different messages based on whether it's the first compile or a re-compile in development mode.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/instance.mdx#2025-04-21_snippet_21\n\nLANGUAGE: typescript\nCODE:\n```\nrsbuild.onDevCompileDone(({ isFirstCompile }) => {\n  if (isFirstCompile) {\n    console.log('first compile!');\n  } else {\n    console.log('re-compile!');\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Setting strictPort in Rsbuild Configuration (TypeScript)\nDESCRIPTION: This code snippet demonstrates how to set the 'strictPort' option to true in the Rsbuild configuration. When enabled, Rsbuild will throw an exception if the specified port is already occupied, instead of automatically finding the next available port.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/strict-port.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    strictPort: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Accessing Transform Handler Context\nDESCRIPTION: Shows how to access various properties and methods provided in the transform handler's context.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/core.mdx#2025-04-21_snippet_10\n\nLANGUAGE: javascript\nCODE:\n```\napi.transform(\n  { test: /\\.pug$/ },\n  ({ code, resource, resourcePath, resourceQuery }) => {\n    console.log(code); // -> some code\n    console.log(resource); // -> '/home/user/project/src/template.pug?foo=123'\n    console.log(resourcePath); // -> '/home/user/project/src/template.pug'\n    console.log(resourceQuery); // -> '?foo=123'\n  },\n);\n```\n\n----------------------------------------\n\nTITLE: Using Async Function for Rspack Configuration in Rsbuild\nDESCRIPTION: This example demonstrates how to use an async function to modify the Rspack configuration, adding an ESLint plugin dynamically.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/rspack.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: async (config) => {\n      const { default: ESLintPlugin } = await import('eslint-webpack-plugin');\n      config.plugins?.push(new ESLintPlugin());\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring HTML Template in Rsbuild\nDESCRIPTION: Specify the HTML template path and update asset prefix usage in template\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/vue-cli.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  html: {\n    template: './public/index.html',\n  },\n});\n```\n\nLANGUAGE: html\nCODE:\n```\n<link rel=\"icon\" href=\"<%= BASE_URL %>favicon.ico\" />\n<link rel=\"icon\" href=\"<%= assetPrefix %>/favicon.ico\" />\n```\n\n----------------------------------------\n\nTITLE: Using Symbol as Unique Identifier\nDESCRIPTION: This snippet shows how to use a `Symbol` as a unique identifier for plugin APIs to avoid naming conflicts. `PARENT_API_ID` is a symbol, and both the parent and child plugins use it to expose and use the API, respectively.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/core.mdx#2025-04-21_snippet_25\n\nLANGUAGE: typescript\nCODE:\n```\n// pluginParent.ts\nexport const PARENT_API_ID = Symbol('plugin-parent');\n\nconst pluginParent = () => ({\n  name: 'plugin-parent',\n  setup(api) {\n    api.expose(PARENT_API_ID, {\n      // some api\n    });\n  },\n});\n\n// pluginChild.ts\nimport { PARENT_API_ID } from './pluginParent';\n\nconst pluginChild = () => ({\n  name: 'plugin-child',\n  setup(api) {\n    const parentApi = api.useExposed(PARENT_API_ID);\n    if (parentApi) {\n      console.log(parentApi);\n    }\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Environment Context Type Definition\nDESCRIPTION: Defines the structure of the EnvironmentContext object, which provides read-only information about the current environment. It includes properties like the environment's name, target browsers, Rsbuild configuration, output path, entry points, HTML paths, and the path to the tsconfig.json file, if it exists.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/environment-api.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n```ts\ntype EnvironmentContext = {\n  name: string;\n  browserslist: string[];\n  config: NormalizedEnvironmentConfig;\n  distPath: string;\n  entry: RsbuildEntry;\n  htmlPaths: Record<string, string>;\n  tsconfigPath?: string;\n};\n```\n```\n\n----------------------------------------\n\nTITLE: Modifying Specific Environment Config in Rsbuild Plugin\nDESCRIPTION: This snippet shows how to modify the Rsbuild configuration for a specific environment using the modifyEnvironmentConfig hook. It demonstrates setting the HTML title for the 'web' environment.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/environments.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.modifyEnvironmentConfig((config, { name }) => {\n      if (name !== 'web') {\n        return config;\n      }\n      config.html.title = 'My Default Title';\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Defining Dev Client Type in TypeScript\nDESCRIPTION: TypeScript type definition for the dev client configuration object, including WebSocket connection settings and error overlay options.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/client.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype Client = {\n  // The protocol name for the WebSocket request\n  protocol?: 'ws' | 'wss';\n  // The path for the WebSocket request\n  path?: string;\n  // The port number for the WebSocket request\n  port?: string | number;\n  // The host for the WebSocket request\n  host?: string;\n  // The maximum number of reconnection attempts after a WebSocket request is disconnected.\n  reconnect?: number;\n  // Whether to display an error overlay in the browser when a compilation error occurs\n  overlay?: boolean;\n};\n```\n\n----------------------------------------\n\nTITLE: Installing Less Plugin for Rsbuild\nDESCRIPTION: Installation instructions for the Rsbuild Less plugin using package managers\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/list/plugin-less.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n# Package manager installation command\n@rsbuild/plugin-less -D\n```\n\n----------------------------------------\n\nTITLE: Modifying Environment-Specific Configuration\nDESCRIPTION: Demonstrates how to conditionally modify Rsbuild configuration for a specific environment using modifyEnvironmentConfig\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/hooks.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.modifyEnvironmentConfig((config, { name }) => {\n      if (name !== 'web') {\n        return config;\n      }\n      config.html.title = 'My Default Title';\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Enable Option Configuration\nDESCRIPTION: Example of using the enable option in object configuration format.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/clean-dist-path.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    // Equivalent to `cleanDistPath: true`\n    cleanDistPath: {\n      enable: true,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Server URL for Lazy Compilation\nDESCRIPTION: Configuration to specify the server URL for lazy compilation requests, with support for dynamic port placeholder.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/lazy-compilation.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    lazyCompilation: {\n      serverUrl: 'http://localhost:<port>',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Conditional Logging based on NODE_ENV (JavaScript, Development)\nDESCRIPTION: This JavaScript snippet is the compiled version of the prior TypeScript code when in development mode. `process.env.NODE_ENV` has been replaced with the boolean value `true` for the conditional statement.  Minifiers can take advantage of this substitution.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_14\n\nLANGUAGE: javascript\nCODE:\n```\nif (true) {\n  console.log('this is a development log');\n}\n```\n\n----------------------------------------\n\nTITLE: Enabling Mixed Import for SVGR Plugin\nDESCRIPTION: Shows how to configure the SVGR plugin to maintain backward compatibility with the mixed import pattern if needed in a project.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-5.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\npluginSvgr({\n  mixedImport: true,\n});\n```\n\n----------------------------------------\n\nTITLE: Meta Options Type Definition\nDESCRIPTION: TypeScript type definition for meta options with string key-value pairs.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/meta.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ntype MetaOptions = {\n  [name: string]: string;\n};\n```\n\n----------------------------------------\n\nTITLE: Using custom query suffix\nDESCRIPTION: This imports an SVG with the `?svgr` suffix, as configured in the query. This enables the transformation of the SVG into a React component.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-svgr.mdx#2025-04-21_snippet_17\n\nLANGUAGE: jsx\nCODE:\n```\nimport Logo from './logo.svg?svgr';\n\nexport const App = () => <Logo />;\n```\n\n----------------------------------------\n\nTITLE: Enabling inlineStyles with Boolean Value in JavaScript\nDESCRIPTION: JavaScript configuration example showing how to enable inlineStyles by setting it to true in the output configuration object.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/inline-styles.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    inlineStyles: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Internal Implementation of resolve.dedupe as Alias\nDESCRIPTION: Example showing how resolve.dedupe is internally converted to resolve.alias configuration by determining the absolute paths to packages in the project root.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/resolve/dedupe.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst alias = {\n  react: '/app/node_modules/react',\n  'react-dom': '/app/node_modules/react-dom',\n};\n```\n\n----------------------------------------\n\nTITLE: Importing RsbuildTarget Type\nDESCRIPTION: Shows how to import the RsbuildTarget type, which represents build targets in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/types.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { RsbuildTarget } from '@rsbuild/core';\n```\n\n----------------------------------------\n\nTITLE: Using sockWrite in Rsbuild Middleware\nDESCRIPTION: Example of using the sockWrite API to send messages to the HMR client. This snippet shows how to trigger a page reload by sending a 'static-changed' message.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/dev/setup-middlewares.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    setupMiddlewares: [\n      (middlewares, server) => {\n        if (someCondition) {\n          server.sockWrite('static-changed');\n        }\n      },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using Default Defer Script Loading in HTML Output\nDESCRIPTION: Shows the resulting HTML output when using the default 'defer' scriptLoading option. Scripts are loaded asynchronously without blocking page parsing.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/script-loading.mdx#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<head>\n  <script defer src=\"/static/js/main.js\"></script>\n</head>\n<body></body>\n```\n\n----------------------------------------\n\nTITLE: Using Template Parameters in Rsbuild\nDESCRIPTION: Shows how to use custom template parameters in Rsbuild's HTML templates.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/html-template.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  html: {\n    templateParameters: {\n      text: 'world',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Default Lightning CSS Loader Configuration in TypeScript\nDESCRIPTION: The default configuration for the Lightning CSS loader in Rsbuild. It sets error recovery, targets based on browserslist, and minification based on production mode and injectStyles setting.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/lightningcss-loader.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst defaultOptions = {\n  errorRecovery: true,\n  // use current project's browserslist config\n  targets: browserslist,\n  // minify is enabled when output.injectStyles is true and in production mode\n  minify: config.mode === 'production' && config.output.injectStyles,\n};\n```\n\n----------------------------------------\n\nTITLE: Excluding Files from Prefresh Processing\nDESCRIPTION: Specifies files that should be excluded from Prefresh processing. The `exclude` option accepts a RuleSetCondition, allowing you to define regular expressions or file paths. This example excludes files in `node_modules` and an additional module.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/list/plugin-preact.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\npluginPreact({\n  exclude: [/[\\[\\\\]node_modules[\\[\\\\]/, /some-other-module/],\n});\n```\n\n----------------------------------------\n\nTITLE: Extended Meta Options Type Definition\nDESCRIPTION: Advanced TypeScript type definition for meta options supporting strings, boolean flags, and attribute objects.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/meta.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\ntype MetaOptions = {\n  [name: string]:\n    | string\n    | false\n    | {\n        [attr: string]: string | boolean;\n      };\n};\n```\n\n----------------------------------------\n\nTITLE: Storing Dev Server Instance in Rsbuild Plugin\nDESCRIPTION: Demonstrates how to store and access the dev server instance across different hooks in a Rsbuild plugin. Shows pattern for maintaining server reference between onBeforeStartDevServer and other hooks.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/hooks.mdx#2025-04-21_snippet_23\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { RsbuildDevServer } from '@rsbuild/core';\n\nconst myPlugin = () => ({\n  setup(api) {\n    let devServer: RsbuildDevServer | null = null;\n\n    api.onBeforeStartDevServer(({ server, environments }) => {\n      devServer = server;\n    });\n\n    api.transform({ test: /\\.foo$/ }, ({ code }) => {\n      if (devServer) {\n        // access server API\n      }\n      return code;\n    });\n\n    api.onCloseDevServer(() => {\n      devServer = null;\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using NormalizedConfig Type for Normalized Configuration\nDESCRIPTION: Shows how to import and use the NormalizedConfig type, which represents Rsbuild configuration after normalization.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/types.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { NormalizedConfig } from '@rsbuild/core';\n\nconst config: NormalizedConfig = api.getNormalizedConfig();\n```\n\n----------------------------------------\n\nTITLE: Default usage of SVGR plugin in App.jsx\nDESCRIPTION: This example demonstrates the default usage of the SVGR plugin. By importing an SVG file with the `?react` suffix, the SVG is transformed into a React component, which can then be used within the application.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-svgr.mdx#2025-04-21_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\nimport Logo from './logo.svg?react';\n\nexport const App = () => <Logo />;\n```\n\n----------------------------------------\n\nTITLE: Removing an Asset with api.processAssets\nDESCRIPTION: This snippet shows how to remove an asset using `api.processAssets`. It checks if the asset `'unwanted-script.js'` exists and, if so, deletes it from the compilation.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/core.mdx#2025-04-21_snippet_17\n\nLANGUAGE: javascript\nCODE:\n```\napi.processAssets({ stage: 'optimize' }, ({ assets, compilation }) => {\n  const assetName = 'unwanted-script.js';\n  if (assets[assetName]) {\n    compilation.deleteAsset(assetName);\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Processing Assets with api.processAssets\nDESCRIPTION: Shows how to process and modify assets before they are outputted using the `api.processAssets` API. This example adds a new asset file to the compilation output during the `additional` stage.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/core.mdx#2025-04-21_snippet_14\n\nLANGUAGE: javascript\nCODE:\n```\napi.processAssets(\n  { stage: 'additional' },\n  ({ assets, sources, compilation }) => {\n    const source = new sources.RawSource('This is a new asset!');\n    compilation.emitAsset('new-asset.txt', source);\n  },\n);\n```\n\n----------------------------------------\n\nTITLE: Configuring Source Exclusion in Rsbuild with TypeScript\nDESCRIPTION: This snippet demonstrates how to use the source.exclude option in Rsbuild to exclude specific files or directories from SWC compilation. It shows how to use both file paths and regular expressions for exclusion.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/exclude.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport path from 'node:path';\n\nexport default {\n  source: {\n    exclude: [path.resolve(__dirname, 'src/module-a'), /src\\/module-b/],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: URL Rewrite Rules Configuration in TypeScript\nDESCRIPTION: Advanced configuration example demonstrating how to set up URL rewrite rules for different paths using regular expressions.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/history-api-fallback.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    historyApiFallback: {\n      rewrites: [\n        { from: /^\\/$/, to: '/views/landing.html' },\n        { from: /^\\/subpage/, to: '/views/subpage.html' },\n        { from: /./, to: '/views/404.html' },\n      ],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling Inlining for All Assets in Rsbuild\nDESCRIPTION: This snippet demonstrates how to configure Rsbuild to inline all static assets regardless of their size by using Number.MAX_SAFE_INTEGER.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/data-uri-limit.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    dataUriLimit: Number.MAX_SAFE_INTEGER,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Server Compression in Rsbuild with TypeScript\nDESCRIPTION: Shows how to disable gzip compression for static assets served by the Rsbuild dev server or preview server by setting the compress option to false in the server configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/compress.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    compress: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Handling Dev Compilation Complete Hook\nDESCRIPTION: Demonstrates using onDevCompileDone hook to detect when development compilation finishes, including first compile and recompiles.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/hooks.mdx#2025-04-21_snippet_26\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onDevCompileDone(({ isFirstCompile }) => {\n      if (isFirstCompile) {\n        console.log('first compile!');\n      } else {\n        console.log('re-compile!');\n      }\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Callback Function Configuration\nDESCRIPTION: Example of using before callback function in server.open configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/server/open.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    open: {\n      before: async () => {\n        await doSomeThing();\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Lightning CSS with PostCSS and Autoprefixer\nDESCRIPTION: Example showing how to enable autoprefixer via a PostCSS config file when Lightning CSS doesn't cover edge cases.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/rsbuild-0-x.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nmodule.exports = {\n  plugins: {\n    autoprefixer: {},\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Custom Cache Directory in Rsbuild Configuration\nDESCRIPTION: Example of specifying a custom cache directory using the cacheDirectory option in the Rsbuild configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/build-cache.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport path from 'node:path';\n\nexport default {\n  performance: {\n    buildCache: {\n      cacheDirectory: path.resolve(__dirname, 'node_modules/.my-cache'),\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Opening Specific URL\nDESCRIPTION: Configuration to open a specific URL when server starts.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/open.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    open: 'http://localhost:3000',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Conditional Logging based on NODE_ENV (JavaScript, Production)\nDESCRIPTION: This JavaScript snippet is the compiled version of the prior TypeScript code when in production mode. `process.env.NODE_ENV` has been replaced with the boolean value `false` for the conditional statement. Minifiers can then strip the dead code from the resulting bundle.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_15\n\nLANGUAGE: javascript\nCODE:\n```\nif (false) {\n  console.log('this is a development log');\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Function-based Template Parameters Type in TypeScript\nDESCRIPTION: This type definition describes the function signature for template parameters when using a function-based configuration. It includes the default value and utils object with entryName.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/template-parameters.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\ntype TemplateParametersFunction = (\n  defaultValue: Record<string, unknown>,\n  utils: { entryName: string },\n) => Record<string, unknown> | void;\n```\n\n----------------------------------------\n\nTITLE: Default HTML Template in Rsbuild (HTML)\nDESCRIPTION: This snippet shows the default HTML template used by Rsbuild if no custom template is specified.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/html-template.mdx#2025-04-21_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<!doctype html>\n<html>\n  <head></head>\n  <body>\n    <div id=\"<%= mountId %>\"></div>\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Logging Browserslist Configuration\nDESCRIPTION: Shows how to access and log the browserslist configuration for the current environment within an Rsbuild plugin. The browserslist configuration specifies the target browsers for the environment. This snippet logs the array of browsers to the console.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/environment-api.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n```js\napi.modifyRspackConfig((config, { environment }) => {\n  console.log(environment.browserslist);\n  return config;\n});\n```\n```\n\n----------------------------------------\n\nTITLE: Configuring Public Directory with Relative Path\nDESCRIPTION: Example of configuring the server.publicDir option with a relative path for the public directory, which will be resolved relative to the project root.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/server/public-dir.mdx#2025-04-21_snippet_2\n\nLANGUAGE: ts\nCODE:\n```\nexport default {\n  server: {\n    publicDir: {\n      name: '../some-public',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring On-Demand Import for Lodash in JavaScript\nDESCRIPTION: Example configuration for importing Lodash functions on demand to reduce bundle size.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/transform-import.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  source: {\n    transformImport: [\n      {\n        libraryName: 'lodash',\n        customName: 'lodash/{{ member }}',\n      },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Relative Path in output.assetPrefix Configuration in JavaScript\nDESCRIPTION: Example of setting output.assetPrefix to a relative path in Rsbuild configuration. This adds './' as a prefix to all static asset URLs.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/asset-prefix.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    assetPrefix: './',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Updating Babel Plugin Configuration in Rsbuild 0.2\nDESCRIPTION: All babel-loader options in @rsbuild/plugin-babel have been moved to 'babelLoaderOptions'.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-2.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\npluginBabel({\n  plugins: [],\n  presets: [],\n});\n```\n\nLANGUAGE: javascript\nCODE:\n```\npluginBabel([\n  babelLoaderOptions: {\n    plugins: [],\n    presets: [],\n  }\n]);\n```\n\n----------------------------------------\n\nTITLE: Merging Rsbuild Configurations using mergeRsbuildConfig\nDESCRIPTION: Shows how to merge multiple Rsbuild configurations using the mergeRsbuildConfig utility with type safety\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/hooks.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { RsbuildConfig } from '@rsbuild/core';\n\nconst myPlugin = () => ({\n  setup(api) {\n    api.modifyRsbuildConfig((userConfig, { mergeRsbuildConfig }) => {\n      const extraConfig: RsbuildConfig = {\n        source: { /* ... */ },\n        output: { /* ... */ },\n      };\n\n      return mergeRsbuildConfig(userConfig, extraConfig);\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Output Directory\nDESCRIPTION: Changes Rsbuild's output directory from 'dist' to 'build' to match CRA's default.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/cra.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    distPath: {\n      root: 'build',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Default Prefetch Options Configuration in JavaScript\nDESCRIPTION: Shows the default configuration options used when performance.prefetch is set to true, which prefetches all async resources for the current page.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/performance/prefetch.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultOptions = {\n  type: 'async-chunks',\n};\n```\n\n----------------------------------------\n\nTITLE: Incorrect Multiple babel-plugin-import Configuration (TS)\nDESCRIPTION: This TypeScript code demonstrates an incorrect usage of multiple `babel-plugin-import` configurations without declaring a unique name for each. This often leads to compilation failures. `pluginBabel` is assumed to be in scope and that a babel config and an addPlugins function is passed to the configuration function.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-babel.mdx#2025-04-21_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\n// wrong example\npluginBabel({\n  babelLoaderOptions: (config, { addPlugins }) => {\n    addPlugins([\n      ['babel-plugin-import', { libraryName: 'antd', libraryDirectory: 'es' }],\n      [\n        'babel-plugin-import',\n        { libraryName: 'antd-mobile', libraryDirectory: 'es' },\n      ],\n    ]);\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Environment-Specific CSS Source Maps in Rsbuild\nDESCRIPTION: Example of enabling CSS source maps only in development mode when using injectStyles to avoid performance issues in production.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/source-map.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    injectStyles: true,\n    sourceMap: {\n      css: process.env.NODE_ENV === 'development',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Creating Rsbuild Instance Type Definition\nDESCRIPTION: Type definition for the createRsbuild function that creates a new Rsbuild instance.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/core.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction createRsbuild(\n  options?: CreateRsbuildOptions,\n): Promise<RsbuildInstance>;\n```\n\n----------------------------------------\n\nTITLE: Resulting HTML Script Tag with Relative Path Prefix\nDESCRIPTION: HTML output showing how the JavaScript file URL is prefixed with the relative path after building with the specified assetPrefix configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/asset-prefix.mdx#2025-04-21_snippet_3\n\nLANGUAGE: html\nCODE:\n```\n<script defer src=\"./static/js/index.ebc4ff4f.js\"></script>\n```\n\n----------------------------------------\n\nTITLE: Removing Plugins in JavaScript\nDESCRIPTION: Demonstrates how to use the 'remove' field to prevent specific plugins from being executed.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/core.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nconst pluginFoo = {\n  name: 'plugin-foo',\n};\n\nconst pluginBar = {\n  name: 'plugin-bar',\n  remove: ['plugin-foo'],\n};\n```\n\n----------------------------------------\n\nTITLE: LoadConfig API Usage Update\nDESCRIPTION: Shows the change in loadConfig method return value structure between versions 0.3 and 0.4.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-4.mdx#2025-04-21_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nimport { loadConfig } from '@rsbuild/core';\n\n// 0.3\nconst config = await loadConfig();\n\n// 0.4\nconst { content, filePath } = await loadConfig();\n```\n\n----------------------------------------\n\nTITLE: Loading Environment Variables in Rsbuild\nDESCRIPTION: Demonstrates how to load Vite-style environment variables using Rsbuild's loadEnv method and inject them into client code\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/vite.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig, loadEnv } from '@rsbuild/core';\n\nconst { publicVars } = loadEnv({ prefixes: ['VITE_'] });\n\nexport default defineConfig({\n  source: {\n    define: publicVars,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Public Directory with Absolute Path\nDESCRIPTION: Example of configuring the server.publicDir option with an absolute path for the public directory using Node.js path module.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/server/public-dir.mdx#2025-04-21_snippet_3\n\nLANGUAGE: ts\nCODE:\n```\nimport path from 'node:path';\n\nexport default {\n  server: {\n    publicDir: {\n      name: path.join(__dirname, '../some-public'),\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting CSS Modules Mode to Global\nDESCRIPTION: Configures CSS Modules to use global mode, which disables local scoping and @value bindings, preserving global selectors as-is.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/css-modules.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    cssModules: {\n      mode: 'global',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using onCloseBuild Hook in Rsbuild Plugin (TypeScript)\nDESCRIPTION: Example of implementing the onCloseBuild hook in a Rsbuild plugin to perform cleanup or logging actions when the build process is closing.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/hooks.mdx#2025-04-21_snippet_19\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onCloseBuild(() => {\n      console.log('close build!');\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Comparing Plugin Systems Across Build Tools\nDESCRIPTION: Comparison of plugin implementation in esbuild, Rsbuild, and Rspack, showing the syntax differences for creating similar functionality.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/index.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// esbuild plugin\nconst esbuildPlugin = {\n  name: 'example',\n  setup(build) {\n    build.onEnd(() => console.log('done'));\n  },\n};\n\n// Rsbuild plugin\nconst rsbuildPlugin = () => ({\n  name: 'example',\n  setup(api) {\n    api.onAfterBuild(() => console.log('done'));\n  },\n});\n\n// Rspack plugin\nclass RspackExamplePlugin {\n  apply(compiler) {\n    compiler.hooks.done.tap('RspackExamplePlugin', () => {\n      console.log('done');\n    });\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Generated HTML with Preload Tags\nDESCRIPTION: Example of HTML output showing injected preload tags for async chunks.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/preload.mdx#2025-04-21_snippet_3\n\nLANGUAGE: html\nCODE:\n```\n<html>\n  <head>\n    <title>Rsbuild App</title>\n    <script defer src=\"/static/js/index.js\"></script>\n    <!-- Generated preload tags -->\n    <link href=\"/static/js/async/src_bar_js.js\" rel=\"preload\" as=\"script\" />\n    <link href=\"/static/js/async/src_foo_js.js\" rel=\"preload\" as=\"script\" />\n  </head>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Importing Next Steps Component and Rendering Steps in React\nDESCRIPTION: This snippet demonstrates the usage of the NextSteps and Step components to present next actions for users. It imports the components and renders them with specified titles, descriptions, and links to guides for Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/start/index.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport NextSteps from '@components/NextSteps';\nimport Step from '@components/Step';\n\n<NextSteps>\n  <Step\n    href=\"/guide/start/quick-start\"\n    title=\"Quick start\"\n    description=\"Learn how to use Rsbuild\"\n  />\n  <Step\n    href=\"/guide/start/features\"\n    title=\"All features\"\n    description=\"Learn all features of Rsbuild\"\n  />\n  <Step\n    href=\"https://github.com/web-infra-dev/rsbuild\"\n    title=\"Support Rsbuild\"\n    description=\"Support us with a star ⭐️\"\n  />\n</NextSteps>\n```\n\n----------------------------------------\n\nTITLE: Rspack Export Presence Configuration\nDESCRIPTION: Configuration example for modifying the export presence warning level in Rspack.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/faq/exceptions.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: {\n      module: {\n        parser: {\n          javascript: {\n            exportsPresence: 'warn',\n          },\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining Minification Type in TypeScript\nDESCRIPTION: Type definition for minification configuration options, allowing boolean or object with detailed JS and CSS minification settings.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/minify.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype Minify =\n  | boolean\n  | {\n      js?: boolean;\n      jsOptions?: Rspack.SwcJsMinimizerRspackPluginOptions;\n      css?: boolean;\n      cssOptions?: Rspack.LightningcssMinimizerRspackPluginOptions;\n    };\n```\n\n----------------------------------------\n\nTITLE: Util Functions: removePresets (JS)\nDESCRIPTION: This JavaScript code demonstrates using the `removePresets` utility function to remove a Babel preset by name. The example removes the `@babel/preset-env` preset. `pluginBabel` is assumed to be in scope and that a babel config and a removePresets function is passed to the configuration function.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-babel.mdx#2025-04-21_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\npluginBabel({\n  babelLoaderOptions: (config, { removePresets }) => {\n    removePresets('@babel/preset-env');\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Adding TypeScript Declarations for URL Parameters\nDESCRIPTION: Provides two methods to add TypeScript declarations for URL parameters used in resource imports.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/optimization/inline-assets.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\n/// <reference types=\"@rsbuild/core/types\" />\n```\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare module '*?url' {\n  const content: string;\n  export default content;\n}\ndeclare module '*?inline' {\n  const content: string;\n  export default content;\n}\n```\n\n----------------------------------------\n\nTITLE: Using onExit Hook in TypeScript\nDESCRIPTION: This example shows how to use the onExit hook to log the exit code when the process is exiting.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/instance.mdx#2025-04-21_snippet_22\n\nLANGUAGE: typescript\nCODE:\n```\nrsbuild.onExit(({ exitCode }) => {\n  console.log('exit: ', exitCode);\n});\n```\n\n----------------------------------------\n\nTITLE: Disabling Build Cache in Rsbuild Configuration (TS)\nDESCRIPTION: This snippet illustrates how to disable the build cache for Babel transpilation within the `rsbuild.config.ts` file. Setting `performance.buildCache` to `false` prevents Rsbuild from caching Babel's output, useful during debugging or when cache invalidation issues arise. This might result in slower builds.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-babel.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  performance: {\n    buildCache: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Modifying Rspack Configuration with tools.rspack\nDESCRIPTION: This snippet demonstrates how to use the tools.rspack option to register plugins in Rspack configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/configuration/rspack.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: {\n      plugins: [SomeWebpackPlugin()],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Customizing JavaScript Minification Options\nDESCRIPTION: Example showing how to customize SWC minification options by disabling the mangle feature.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/minify.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    minify: {\n      jsOptions: {\n        minimizerOptions: {\n          mangle: false,\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Asset Reference Example in HTML\nDESCRIPTION: Shows how static assets are referenced in HTML with configured asset prefix.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/static-deploy.mdx#2025-04-21_snippet_4\n\nLANGUAGE: html\nCODE:\n```\n<script src=\"https://cdn.com/path/static/js/index.some-hash.js\"></script>\n```\n\n----------------------------------------\n\nTITLE: Meta Function Type Definition\nDESCRIPTION: TypeScript type definition for function-based meta configuration with value and entryName parameters.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/meta.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\ntype MetaFunction = ({\n  value: MetaOptions,\n  entryName: string,\n}) => MetaOptions | void;\n```\n\n----------------------------------------\n\nTITLE: Configuring Specific IPv6 Host in Rsbuild\nDESCRIPTION: Configuration example for setting the Rsbuild server to listen on a specific IPv6 host using '::1'.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/host.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    host: '::1',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using Function to Dynamically Set JavaScript Filenames\nDESCRIPTION: Example of using a function to dynamically set JavaScript filenames based on file information and build environment.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/filename.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nconst isProd = process.env.NODE_ENV === 'production';\n\nexport default {\n  output: {\n    filename: {\n      js: (pathData, assetInfo) => {\n        console.log(pathData); // You can check the contents of pathData here\n\n        if (pathData.chunk?.name === 'index') {\n          return isProd ? '[name].[contenthash:8].js' : '[name].js';\n        }\n        return '/some-path/[name].js';\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Output Configuration After Update\nDESCRIPTION: Example of the new filenameHash configuration syntax replacing disableFilenameHash.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-4.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    filenameHash: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Build Order in Rsbuild with TypeScript\nDESCRIPTION: This snippet illustrates how to configure the build order between environments in Rsbuild by specifying dependencies. In this example, the `web` environment is set to build before the `node` environment using Rspack's configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/environments.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  environments: {\n    web: {\n      tools: {\n        rspack: {\n          name: 'foo',\n        },\n      },\n    },\n    node: {\n      tools: {\n        rspack: {\n          dependencies: ['foo'],\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Accessing Environment Name in JavaScript\nDESCRIPTION: Example showing how to access and use the environment name in a plugin configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/environment-api.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\napi.modifyRspackConfig((config, { environment }) => {\n  if (environment.name === 'node') {\n    // modify config for node environment\n  }\n  return config;\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Rsbuild Sass Plugin in TypeScript\nDESCRIPTION: This TypeScript configuration snippet shows how to import and use the @rsbuild/plugin-sass plugin in a Rsbuild configuration file, necessary for compiling .scss or .sass files in Rsbuild 0.7.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-7.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginSass } from '@rsbuild/plugin-sass';\n\nexport default {\n  plugins: [pluginSass()],\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Default Browserslist in Rsbuild Configuration\nDESCRIPTION: This snippet shows the default browserslist configuration used by Rsbuild when no custom configuration is provided. It targets recent versions of major browsers.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/override-browserslist.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n['chrome >= 87', 'edge >= 88', 'firefox >= 78', 'safari >= 14'];\n```\n\n----------------------------------------\n\nTITLE: Registering the SVGR plugin in rsbuild.config.ts\nDESCRIPTION: This code snippet demonstrates how to register the SVGR plugin within the `rsbuild.config.ts` file. The `pluginSvgr` function is imported and added to the `plugins` array, enabling the transformation of SVG files into React components.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-svgr.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginReact } from '@rsbuild/plugin-react';\nimport { pluginSvgr } from '@rsbuild/plugin-svgr';\n\nexport default {\n  plugins: [pluginReact(), pluginSvgr()],\n};\n\n```\n\n----------------------------------------\n\nTITLE: Enabling Mixed Imports\nDESCRIPTION: This enables the mixedImport, so both the React component and URL can be imported at the same time. The export type must be set to named for mixed imports to function correctly.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-svgr.mdx#2025-04-21_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\npluginSvgr({\n  mixedImport: true,\n  svgrOptions: {\n    exportType: 'named',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring tsconfig.json Path in Rsbuild\nDESCRIPTION: This configuration snippet shows how to override the default path to the `tsconfig.json` file in Rsbuild by specifying a custom path through the `source.tsconfigPath` configuration key.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/typescript.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  source: {\n    tsconfigPath: './tsconfig.custom.json',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Dynamic HTML Title Configuration for Multi-Page Applications in Rsbuild\nDESCRIPTION: This JavaScript snippet shows how to use a function to dynamically set HTML titles for different pages in a multi-page application based on the entry name.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/title.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    title({ entryName }) {\n      const titles = {\n        foo: 'Foo Page',\n        bar: 'Bar Page',\n      };\n      return titles[entryName] || 'Other Page';\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling Global Class Names Export in CSS Modules\nDESCRIPTION: Configures CSS Modules to export global class names by setting exportGlobals to true, allowing the use of :global() selector in CSS and importing those class names.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/css-modules.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    cssModules: {\n      exportGlobals: true,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Babel Loader Options: Object Type Configuration (JS)\nDESCRIPTION: This JavaScript snippet shows how to configure `babel-loader` options by passing an object. It demonstrates adding the `babel-plugin-import` plugin to handle component imports. The configuration uses shallow merging, potentially overwriting default presets or plugins.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-babel.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\npluginBabel({\n  babelLoaderOptions: {\n    plugins: [\n      [\n        'babel-plugin-import',\n        {\n          libraryName: 'my-components',\n          libraryDirectory: 'es',\n          style: true,\n        },\n      ],\n    ],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Type Definition - Dev Server Options\nDESCRIPTION: Type definitions for the dev server start method options and return type.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\ntype StartDevServerOptions = {\n  /**\n   * Using a custom Rspack Compiler object.\n   */\n  compiler?: Compiler | MultiCompiler;\n  /**\n   * Whether to get port silently and not print any logs.\n   * @default false\n   */\n  getPortSilently?: boolean;\n};\n\ntype StartServerResult = {\n  /**\n   * The URLs that server is listening on.\n   */\n  urls: string[];\n  /**\n   * The actual port used by the server.\n   */\n  port: number;\n  server: {\n    /**\n     * Close the server.\n     * In development mode, this will call the `onCloseDevServer` hook.\n     */\n    close: () => Promise<void>;\n  };\n};\n\nfunction StartDevServer(\n  options?: StartDevServerOptions,\n): Promise<StartServerResult>;\n```\n\n----------------------------------------\n\nTITLE: Default Bundle Analyzer Configuration in JavaScript\nDESCRIPTION: Shows the default configuration values used by webpack-bundle-analyzer when enabled in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/bundle-analyze.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultConfig = {\n  analyzerMode: 'static',\n  openAnalyzer: false,\n  // Distinguish by environment names, such as `web`, `node`, etc.\n  reportFilename: `report-${environment}.html`,\n};\n```\n\n----------------------------------------\n\nTITLE: Preconnect Configuration with Crossorigin\nDESCRIPTION: Example demonstrating how to configure preconnect with the crossorigin attribute enabled.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/preconnect.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  performance: {\n    preconnect: [\n      {\n        href: 'https://example.com/',\n        crossorigin: true,\n      },\n    ],\n  },\n};\n```\n\nLANGUAGE: html\nCODE:\n```\n<link rel=\"preconnect\" href=\"https://example.com\" crossorigin />\n```\n\n----------------------------------------\n\nTITLE: Filtering Manifest Files in Rsbuild Configuration (TypeScript)\nDESCRIPTION: Demonstration of using the manifest.filter function to include only JavaScript files in the generated manifest.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/manifest.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    manifest: {\n      filter: (file) => file.name.endsWith('.js'),\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: package.json scripts for Rsbuild\nDESCRIPTION: This JSON snippet shows how to define scripts in `package.json` to run Rsbuild commands such as `dev`, `build`, and `preview`. These scripts provide a convenient way to start the development server, build the application for production, and preview the production build locally.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/start/quick-start.mdx#2025-04-21_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n\"{\n  \"scripts\": {\n    // starting the dev server\n    \"dev\": \"rsbuild dev\",\n    // build the app for production\n    \"build\": \"rsbuild build\",\n    // preview the production build locally\n    \"preview\": \"rsbuild preview\"\n  }\n}\"\n```\n\n----------------------------------------\n\nTITLE: Transform with Resource Query Matching\nDESCRIPTION: Illustrates how to use the `resourceQuery` property in the transform descriptor to match modules based on their query parameters. This transform applies to modules that have a `raw` query parameter in their import path.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/core.mdx#2025-04-21_snippet_10\n\nLANGUAGE: javascript\nCODE:\n```\napi.transform({ resourceQuery: /raw/ }, ({ code }) => {\n  // ...\n});\n```\n\n----------------------------------------\n\nTITLE: Callback with Target URLs\nDESCRIPTION: Configuration combining callback function with specific target URLs.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/open.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    open: {\n      target: ['/', '/about'],\n      before: async () => {\n        await doSomeThing();\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Pre-Production Server Start Callback in TypeScript\nDESCRIPTION: Defines a function that allows registering a callback to be executed before starting the production preview server. The callback can be synchronous or return a Promise, enabling async preparation tasks.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/shared/onBeforeStartProdServer.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction OnBeforeStartProdServer(callback: () => Promise<void> | void): void;\n```\n\n----------------------------------------\n\nTITLE: Importing Static Assets in JavaScript\nDESCRIPTION: Demonstrates how to import static assets in JavaScript files using relative paths or aliases. The imported asset's URL is returned for use in the code.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/static-assets.mdx#2025-04-21_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n// Import the logo.png image in the static directory\nimport logo from './static/logo.png';\n\nconsole.log(logo); // \"/static/logo.[hash].png\"\n\nexport default = () => <img src={logo} />;\n```\n\n----------------------------------------\n\nTITLE: Default HTML Structure with Head Injection in Rsbuild\nDESCRIPTION: Shows the default HTML structure when scripts are injected into the head tag. This is the default behavior when 'html.inject' is set to 'head'.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/inject.mdx#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<html>\n  <head>\n    <title></title>\n    <script defer src=\"/static/js/runtime-main.js\"></script>\n    <script defer src=\"/static/js/main.js\"></script>\n    <link href=\"/static/css/main.css\" rel=\"stylesheet\" />\n  </head>\n  <body>\n    <div id=\"root\"></div>\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Correct Multiple babel-plugin-import Configuration (TS)\nDESCRIPTION: This TypeScript code shows the correct way to configure multiple `babel-plugin-import` plugins by providing a unique name for each configuration in the third array item. This resolves potential conflicts and allows proper tree shaking. `pluginBabel` is assumed to be in scope and that a babel config and an addPlugins function is passed to the configuration function.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-babel.mdx#2025-04-21_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\n// correct example\npluginBabel({\n  babelLoaderOptions: (config, { addPlugins }) => {\n    addPlugins([\n      [\n        'babel-plugin-import',\n        { libraryName: 'antd', libraryDirectory: 'es' },\n        'antd',\n      ],\n      [\n        'babel-plugin-import',\n        { libraryName: 'antd-mobile', libraryDirectory: 'es' },\n        'antd-mobile',\n      ],\n    ]);\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring worker-rspack-loader\nDESCRIPTION: This TypeScript code shows how to configure `worker-rspack-loader` as a replacement for `worker-loader` in Rsbuild. It modifies the `resolveLoader` alias and adds a rule to process `.worker.js` files using the `worker-rspack-loader`.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/web-workers.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: {\n      resolveLoader: {\n        alias: {\n          // 修改内联 loader 中 worker-loader 的指向，如 `worker-loader!pdfjs-dist/es5/build/pdf.worker.js`\n          'worker-loader': require.resolve('worker-rspack-loader'),\n        },\n      },\n      module: {\n        rules: [\n          {\n            test: /\\.worker\\.js$/,\n            loader: 'worker-rspack-loader',\n          },\n        ],\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Migrating html.appIcon to new format\nDESCRIPTION: Example showing how to update from the string-based appIcon format to the new object format with icons array.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/rsbuild-0-x.mdx#2025-04-21_snippet_13\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    appIcon: {\n      icons: [{ src: './src/icon.png', size: 180 }],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Default Head Script Injection HTML Structure\nDESCRIPTION: Example of default script tag injection in the head section of HTML when using Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/html/inject.mdx#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<html>\n  <head>\n    <title></title>\n    <script defer src=\"/static/js/runtime-main.js\"></script>\n    <script defer src=\"/static/js/main.js\"></script>\n    <link href=\"/static/css/main.css\" rel=\"stylesheet\" />\n  </head>\n  <body>\n    <div id=\"root\"></div>\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Enabling CSS Source Maps in Rsbuild\nDESCRIPTION: Example of enabling source map generation specifically for CSS files.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/source-map.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    sourceMap: {\n      css: true,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Named JSON Import Example\nDESCRIPTION: Demonstrates how to use named imports with JSON files in JavaScript.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/json-files.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport { name } from './example.json';\n\nconsole.log(name); // 'foo';\n```\n\n----------------------------------------\n\nTITLE: Adding Query Hash to Asset Filenames\nDESCRIPTION: Example of adding a hash value to the URL query of assets for cache busting in production builds.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/filename.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nconst isProd = process.env.NODE_ENV === 'production';\n\nexport default {\n  output: {\n    filename: {\n      js: isProd ? '[name].js?v=[contenthash:8]' : `[name].js`,\n      css: isProd ? '[name].css?v=[contenthash:8]' : `[name].css`,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling Static Assets Serving\nDESCRIPTION: Example of disabling the static assets serving completely by setting server.publicDir to false.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/public-dir.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    publicDir: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting dev.assetPrefix to a Full URL in Rsbuild Config (JavaScript)\nDESCRIPTION: Example of setting dev.assetPrefix to a complete URL, which will be used as the base for static asset URLs.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/dev/asset-prefix.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  dev: {\n    assetPrefix: 'https://example.com/assets/',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Babel Configuration for import plugin\nDESCRIPTION: This Babel configuration uses the `babel-plugin-import` to transform imports for a specific library.  It configures the `import` plugin with the library name, directory, and style settings. This configuration is used to automatically import components and styles from the specified library.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/webpack.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nmodule.exports = {\n  plugins: [\n    [\n      'import',\n      { libraryName: 'some-library', libraryDirectory: 'es', style: true },\n    ],\n  ],\n};\n```\n\n----------------------------------------\n\nTITLE: Using onCloseDevServer Hook in TypeScript\nDESCRIPTION: This example shows how to use the onCloseDevServer hook to log a message when the development server is closed.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/instance.mdx#2025-04-21_snippet_18\n\nLANGUAGE: typescript\nCODE:\n```\nrsbuild.onCloseDevServer(async () => {\n  console.log('close dev server!');\n});\n```\n\n----------------------------------------\n\nTITLE: Using Glob Pattern to Watch Multiple Files in Rsbuild\nDESCRIPTION: Example showing how to use glob patterns to watch multiple files matching a pattern in Rsbuild. This configuration monitors all text files in the src directory and its subdirectories.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/watch-files.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  dev: {\n    watchFiles: {\n      paths: 'src/**/*.txt',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining LazyCompilationOptions Type in TypeScript\nDESCRIPTION: TypeScript type definition for lazy compilation options, including controls for entries, imports, test conditions, custom client runtime, and server URL configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/lazy-compilation.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype LazyCompilationOptions =\n  | boolean\n  | {\n      /**\n       * Enable lazy compilation for entries.\n       */\n      entries?: boolean;\n      /**\n       * Enable lazy compilation for dynamic imports.\n       */\n      imports?: boolean;\n      /**\n       * Specify which imported modules should be lazily compiled.\n       */\n      test?: RegExp | ((m: Module) => boolean);\n      /**\n       * The path to a custom runtime code that overrides the default lazy compilation client.\n       */\n      client?: string;\n      /**\n       * Tells the client the server URL that needs to be requested.\n       */\n      serverUrl?: string;\n    };\n```\n\n----------------------------------------\n\nTITLE: Environment Context Type Definition in TypeScript\nDESCRIPTION: TypeScript interface defining the structure of the environment context object available in Rsbuild plugin hooks.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/environment-api.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype EnvironmentContext = {\n  name: string;\n  browserslist: string[];\n  config: NormalizedEnvironmentConfig;\n  distPath: string;\n  entry: RsbuildEntry;\n  htmlPaths: Record<string, string>;\n  tsconfigPath?: string;\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Usage-based Polyfill Injection in Rsbuild\nDESCRIPTION: Sets the output.polyfill option to 'usage', which injects polyfills based on the APIs used in each file. This is useful for optimizing polyfill inclusion.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/polyfill.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    polyfill: 'usage',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using onBeforeCreateCompiler Hook in TypeScript\nDESCRIPTION: This example demonstrates how to use the onBeforeCreateCompiler hook to log the Rspack configuration before the compiler is created.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/instance.mdx#2025-04-21_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nrsbuild.onBeforeCreateCompiler(({ bundlerConfigs }) => {\n  console.log('the Rspack config is ', bundlerConfigs);\n});\n```\n\n----------------------------------------\n\nTITLE: Using onBeforeBuild Hook in TypeScript\nDESCRIPTION: This example demonstrates how to use the onBeforeBuild hook to log the Rspack configuration before the build process starts.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/instance.mdx#2025-04-21_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\nrsbuild.onBeforeBuild(({ bundlerConfigs }) => {\n  console.log('the Rspack config is ', bundlerConfigs);\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing SSR Function using Rsbuild in TypeScript\nDESCRIPTION: This snippet shows how to implement a server-side rendering function within an Express application using Rsbuild APIs. It loads the main bundle for rendering and transforms the output HTML. It handles requests to the root endpoint and catches errors during the rendering process.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/environments.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport express from 'express';\nimport { createRsbuild, loadConfig } from '@rsbuild/core';\n\nconst serverRender = (serverAPI) => async (_req, res) => {\n  const indexModule = await serverAPI.environments.node.loadBundle('index');\n\n  const markup = indexModule.render();\n\n  const template = await serverAPI.environments.web.getTransformedHtml('index');\n\n  const html = template.replace('<!--app-content-->', markup);\n\n  res.writeHead(200, {\n    'Content-Type': 'text/html',\n  });\n  res.end(html);\n};\n\nexport async function startDevServer() {\n  const { content } = await loadConfig();\n\n  // Init Rsbuild\n  const rsbuild = await createRsbuild({\n    rsbuildConfig: content,\n  });\n\n  const app = express();\n\n  // Create Rsbuild dev server instance\n  const rsbuildServer = await rsbuild.createDevServer();\n\n  const serverRenderMiddleware = serverRender(rsbuildServer);\n\n  app.get('/', async (req, res, next) => {\n    try {\n      await serverRenderMiddleware(req, res, next);\n    } catch (err) {\n      logger.error('SSR render error, downgrade to CSR...\\n', err);\n      next();\n    }\n  });\n\n  // Apply Rsbuild’s built-in middlewares\n  app.use(rsbuildServer.middlewares);\n\n  // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Rsbuild Mode Configuration\nDESCRIPTION: Example of setting the build mode in Rsbuild configuration file. This snippet demonstrates how to explicitly set the mode to 'production' in the Rsbuild config file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/mode.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  mode: 'production',\n};\n```\n\n----------------------------------------\n\nTITLE: Type Definition for Preconnect Configuration\nDESCRIPTION: TypeScript type definition for the preconnect configuration option that accepts an array of strings or objects with href and optional crossorigin properties.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/preconnect.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype Preconnect =\n  | Array<\n      | string\n      | {\n          href: string;\n          crossorigin?: boolean;\n        }\n    >\n  | undefined;\n```\n\n----------------------------------------\n\nTITLE: Customizing Progress Bar ID in Rsbuild Configuration\nDESCRIPTION: Example of modifying the progress bar's id option to change the displayed text in TypeScript configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/progress-bar.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    progressBar: {\n      id: 'Some Text',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using Test Utilities to Create Temporary Fixtures in JavaScript\nDESCRIPTION: Shows how to leverage utility functions to create temporary test fixtures, including filesystem operations and test environment setup.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/e2e/cases/server/watch-files/assets/example.txt#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\n// Utility function to create and clean temporary test files\nimport { createTempDir, removeTempDir } from '../utils/temp';\n\nlet tempDir = '';\n\nbeforeEach(async () => {\n  tempDir = await createTempDir();\n});\n\nafterEach(async () => {\n  await removeTempDir(tempDir);\n});\n```\n\n----------------------------------------\n\nTITLE: Customizing Bundle Analyzer Configuration in Rsbuild\nDESCRIPTION: Demonstrates how to override the default bundle analyzer settings by providing custom options. This example shows how to enable server mode and automatic opening of the analyzer when triggered by an environment variable.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/performance/bundle-analyze.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  performance: {\n    bundleAnalyze: process.env.BUNDLE_ANALYZE\n      ? {\n          analyzerMode: 'server',\n          openAnalyzer: true,\n        }\n      : {},\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using Unplugin with Rsbuild and Vue\nDESCRIPTION: Demonstrates how to use unplugin-vue-components with Rsbuild and the Vue plugin.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/plugins.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginVue } from '@rsbuild/plugin-vue';\nimport Components from 'unplugin-vue-components/rspack';\n\nexport default defineConfig({\n  plugins: [pluginVue()],\n  tools: {\n    rspack: {\n      plugins: [\n        Components({\n          // options\n        }),\n      ],\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Including PDF Files as Assets with source.assetsInclude in Rsbuild\nDESCRIPTION: Configuration snippet showing how to add PDF files as static assets using source.assetsInclude. This allows importing PDF files directly in your code and serving them as assets.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/static-assets.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  source: {\n    assetsInclude: /\\.pdf$/,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Naming Convention for Rsbuild Plugins\nDESCRIPTION: Example demonstrating the recommended naming convention for Rsbuild plugins, including function naming and the name property format.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/index.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { RsbuildPlugin } from '@rsbuild/core';\n\nexport const pluginFooBar = (): RsbuildPlugin => ({\n  name: 'scope:foo-bar',\n  setup() {},\n});\n```\n\n----------------------------------------\n\nTITLE: Default DataUriLimit Configuration\nDESCRIPTION: Default configuration values for dataUriLimit, setting 4KiB thresholds for all asset types.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/data-uri-limit.mdx#2025-04-21_snippet_1\n\nLANGUAGE: js\nCODE:\n```\nconst defaultDatUriLimit = {\n  svg: 4096,\n  font: 4096,\n  image: 4096,\n  media: 4096,\n  assets: 4096,\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Source Map in Rsbuild 0.2\nDESCRIPTION: 'output.disableSourceMap' has been renamed to 'output.sourceMap' with updated default values for improved build performance.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-2.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    disableSourceMap: {\n      js: true,\n      css: true,\n    },\n  },\n};\n```\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    sourceMap: {\n      js: false,\n      css: false,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Target-specific Configuration\nDESCRIPTION: Shows how to configure Rspack based on target runtime environment.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/tools/rspack.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: (config, { target }) => {\n      if (target === 'node') {\n        // ...\n      }\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Callback Initialization Rspack TypeScript\nDESCRIPTION: This snippet defines a callback function 'OnBeforeBuild' that is executed before the production build in a Rspack environment. It takes a single parameter 'callback' which is a function accepting an object with properties 'isWatch', 'isFirstCompile', 'bundlerConfigs', and 'environments'. The function can return either a promise or void. Rspack configurations can be accessed through 'bundlerConfigs', and the environments configured can be managed through the 'environments' parameter. This setup allows users to customize the pre-build behaviors with optional watch and compile mode indicators.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/shared/onBeforeBuild.mdx#2025-04-21_snippet_0\n\nLANGUAGE: TypeScript\nCODE:\n```\nfunction OnBeforeBuild(\\n  callback: (params: {\\n    isWatch: boolean;\\n    isFirstCompile: boolean;\\n    bundlerConfigs?: Rspack.Configuration[];\\n    environments: Record<string, EnvironmentContext>;\\n  }) => Promise<void> | void,\\n): void;\n```\n\n----------------------------------------\n\nTITLE: Disabling Asset Inlining with React in TSX\nDESCRIPTION: This snippet shows how to disable asset inlining through a query parameter when importing in a React component. The imported image is always loaded separately regardless of size. Necessary Prerequisites include React setup and understanding queries in imports.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/optimization/inline-assets.mdx#2025-04-21_snippet_4\n\nLANGUAGE: TSX\nCODE:\n```\nimport React from 'react';\nimport img from '. /foo.png?url';\n\nexport default function Foo() {\n  return <img src={img} />;\n}\n```\n\n----------------------------------------\n\nTITLE: Enabling moment.js Locale Removal in Rsbuild Configuration\nDESCRIPTION: Configuration example showing how to enable the removeMomentLocale option in Rsbuild to automatically exclude all moment.js locale files from the bundle.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/performance/remove-moment-locale.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  performance: {\n    removeMomentLocale: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Example of Restrictive Browserslist Configuration\nDESCRIPTION: A more restrictive Browserslist configuration example that targets only Chrome version 100 and above, which can reduce polyfill and compilation overhead.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/optimization/optimize-bundle.mdx#2025-04-21_snippet_5\n\nLANGUAGE: js\nCODE:\n```\n['Chrome >= 100'];\n```\n\n----------------------------------------\n\nTITLE: Cross-Platform Bundle Analysis Configuration\nDESCRIPTION: Demonstrates how to set up bundle analysis using cross-env for cross-platform compatibility.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/bundle-analyze.mdx#2025-04-21_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"build:analyze\": \"cross-env BUNDLE_ANALYZE=true rsbuild build\"\n  },\n  \"devDependencies\": {\n    \"cross-env\": \"^7.0.0\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Merging Rspack Configurations in Rsbuild\nDESCRIPTION: This example shows how to merge multiple Rspack configurations using the mergeConfig utility function.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/rspack.mdx#2025-04-21_snippet_17\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: (config, { mergeConfig }) => {\n      return mergeConfig(config, {\n        devtool: 'eval',\n      });\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling HMR and Live Reload in Rsbuild Configuration\nDESCRIPTION: This code demonstrates how to disable both Hot Module Replacement and live reload functionality in Rsbuild by setting both 'dev.hmr' and 'dev.liveReload' to false.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/hmr.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    hmr: false,\n    liveReload: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Static Port in Rsbuild\nDESCRIPTION: Shows how to set a static port number (8080) for the Rsbuild server using the server.port configuration option.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/port.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    port: 8080,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Register Less Plugin in Rsbuild Config (TypeScript)\nDESCRIPTION: Registers the `@rsbuild/plugin-less` plugin within the `rsbuild.config.ts` file. This enables Less support in the Rsbuild project, allowing the import of `.less` files without further configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-less.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginLess } from '@rsbuild/plugin-less';\n\nexport default {\n  plugins: [pluginLess()],\n};\n```\n\n----------------------------------------\n\nTITLE: Dynamic Favicon Function for Multi-Page Applications\nDESCRIPTION: This JavaScript function demonstrates how to dynamically set different favicons for different pages in a multi-page application using the html.favicon configuration option.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/favicon.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    favicon({ entryName }) {\n      const icons = {\n        foo: 'https://example.com/foo.ico',\n        bar: 'https://example.com/bar.ico',\n      };\n      return icons[entryName] || 'https://example.com/default.ico';\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Inspecting Rsbuild and Rspack Configurations\nDESCRIPTION: This command generates files containing the Rsbuild and Rspack configurations used during the build process. It can be customized with options like --output and --verbose.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/cli.mdx#2025-04-21_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\nnpx rsbuild inspect\n```\n\n----------------------------------------\n\nTITLE: Defining PrefetchOptions Interface in TypeScript\nDESCRIPTION: TypeScript interface definition for prefetch configuration options, including type, include and exclude filters.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/prefetch.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface PrefetchOptions {\n  type?: ResourceHintsIncludeType;\n  include?: ResourceHintsFilter;\n  exclude?: ResourceHintsFilter;\n}\n```\n\n----------------------------------------\n\nTITLE: Defining PrefetchOptions Interface in TypeScript\nDESCRIPTION: TypeScript interface defining the available options for the performance.prefetch configuration in Rsbuild, including type, include, and exclude filters.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/performance/prefetch.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface PrefetchOptions {\n  type?: ResourceHintsIncludeType;\n  include?: ResourceHintsFilter;\n  exclude?: ResourceHintsFilter;\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Source Define in Rsbuild\nDESCRIPTION: Example configuration showing various ways to define compile-time variables including strings, booleans, expressions, and typeof checks. The define object supports multiple data types and nested object structures.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/define.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  source: {\n    define: {\n      PRODUCTION: JSON.stringify(true),\n      VERSION: JSON.stringify('5fa3b9'),\n      BROWSER_SUPPORTS_HTML5: true,\n      TWO: '1 + 1',\n      'typeof window': JSON.stringify('object'),\n      'process.env.NODE_ENV': JSON.stringify(process.env.NODE_ENV),\n      'import.meta.test': JSON.stringify('foo'),\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using getNormalizedConfig in Plugin Setup\nDESCRIPTION: Shows how to use the getNormalizedConfig method to access the normalized Rsbuild configuration within a plugin's lifecycle hook.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/core.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nconst pluginFoo = () => ({\n  setup(api) {\n    api.onBeforeBuild(({ bundlerConfigs }) => {\n      const config = api.getNormalizedConfig();\n      console.log(config.html.title);\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Filtering Files in Manifest with filter Function\nDESCRIPTION: Example of using the manifest.filter function to include only JavaScript files in the manifest.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/manifest.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    manifest: {\n      filter: (file) => file.name.endsWith('.js'),\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Babel Loader Options: Default Configuration (TS)\nDESCRIPTION: This TypeScript code defines the default options object passed to `babel-loader`. It includes settings such as disabling `babelrc` and `configFile`, setting `compact` to `false` and configuring presets and plugins for TypeScript and decorators. `config` and `isLegacyDecorators` are assumed to be defined in the surrounding scope.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-babel.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst defaultOptions = {\n  babelrc: false,\n  compact: false,\n  configFile: false,\n  plugins: [\n    ['@babel/plugin-proposal-decorators', config.source.decorators],\n    ...(isLegacyDecorators ? ['@babel/plugin-transform-class-properties'] : []),\n  ],\n  presets: [\n    [\n      '@babel/preset-typescript',\n      {\n        allExtensions: true,\n        allowDeclareFields: true,\n        allowNamespaces: true,\n        isTSX: true,\n        optimizeConstEnums: true,\n      },\n    ],\n  ],\n};\n```\n\n----------------------------------------\n\nTITLE: Example of React Package Duplication Structure\nDESCRIPTION: An example directory structure showing duplicate React packages in a project, where the main app uses React 19 while a dependency uses React 17.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/resolve/dedupe.mdx#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\napp/\n├── src/\n└── node_modules/\n    ├── foo/\n    │   └── node_modules/\n    │       ├── react (v17)\n    │       └── react-dom (v17)\n    ├── react (v19)\n    └── react-dom (v19)\n```\n\n----------------------------------------\n\nTITLE: Configuring React Externals in Rsbuild\nDESCRIPTION: This code snippet shows how to configure `externals` in Rsbuild to exclude React and ReactDOM from the bundle. This can cause issues with hot reloading if the production version of React is used. The `externals` configuration prevents these libraries from being included in the bundle, and they are expected to be provided at runtime via a CDN or other mechanism.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/faq/hmr.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    externals: {\n      react: 'React',\n      'react-dom': 'ReactDOM',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Cross-Platform Rspack Profiling Configuration\nDESCRIPTION: Package.json configuration using cross-env for cross-platform compatible Rspack profiling setup.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/debug/build-profiling.mdx#2025-04-21_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"dev:profile\": \"cross-env RSPACK_PROFILE=ALL rsbuild dev\",\n    \"build:profile\": \"cross-env RSPACK_PROFILE=ALL rsbuild build\"\n  },\n  \"devDependencies\": {\n    \"cross-env\": \"^7.0.0\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Excluding Importers from Transformation\nDESCRIPTION: This configures the SVGR plugin to exclude specific modules (importers) from having their SVG imports transformed. The `excludeImporter` option accepts a regular expression to match the modules that should be excluded.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-svgr.mdx#2025-04-21_snippet_20\n\nLANGUAGE: typescript\nCODE:\n```\npluginSvgr({\n  svgrOptions: {\n    exportType: 'default',\n  },\n  excludeImporter: /\\/page-b\\/index\\.ts/,\n});\n```\n\n----------------------------------------\n\nTITLE: Defining Plugin Hook Order in Rsbuild 0.4\nDESCRIPTION: Shows how to use the new 'order' field to declare the execution order of plugin hooks in Rsbuild 0.4.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/community/releases/v0-4.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.modifyRsbuildConfig({\n      handler: () => console.log('hello'),\n      order: 'pre',\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Enabling copyOnBuild for Node Target\nDESCRIPTION: Example of enabling copyOnBuild for Node.js target builds, which overrides the default behavior of not copying files for node targets.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/server/public-dir.mdx#2025-04-21_snippet_5\n\nLANGUAGE: ts\nCODE:\n```\nexport default {\n  output: {\n    target: 'node',\n  },\n  server: {\n    publicDir: {\n      copyOnBuild: true,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Path Aliases in tsconfig.json\nDESCRIPTION: Configuration example showing how to set up path aliases in tsconfig.json using the paths compiler option\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/alias.mdx#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"compilerOptions\": {\n    \"paths\": {\n      \"@common/*\": [\"./src/common/*\"]\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Async Configuration Loading\nDESCRIPTION: Example of loading Rsbuild configuration asynchronously using a function.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/core.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRsbuild, loadConfig } from '@rsbuild/core';\n\nconst rsbuild = await createRsbuild({\n  rsbuildConfig: async () => {\n    const { content } = await loadConfig();\n    someFunctionToUpdateConfig(content);\n    return content;\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring split-by-module strategy in Rsbuild\nDESCRIPTION: This code snippet shows how to configure the `split-by-module` strategy in Rsbuild, where each NPM package is split into a separate chunk. This granular splitting can be beneficial in HTTP/2 environments due to multiplexing but should be used cautiously in non-HTTP/2 environments due to potential head-of-line blocking.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/optimization/code-splitting.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  performance: {\n    chunkSplit: {\n      strategy: 'split-by-module',\n    },\n  },\n};\n\n```\n\n----------------------------------------\n\nTITLE: Customizing Manifest Content with generate Function\nDESCRIPTION: Example of using the manifest.generate function to customize the content of the manifest file, keeping only the allAssets field.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/manifest.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    manifest: {\n      generate: ({ manifestData }) => {\n        return {\n          allAssets: manifestData.allFiles,\n        };\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Rspack Dashboard in Production with TypeScript\nDESCRIPTION: This snippet demonstrates how to enable the Rspack Dashboard in production mode using TypeScript, with environment-based configuration and proper type definitions for the DashboardPlugin.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/e2e/cases/server/watch-files/assets/example2.txt#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { DashboardPlugin } from '@rspack/core';\n\nexport default defineConfig({\n  dev: {\n    // Set to true to open the Rspack Dashboard by default\n    startUrl: true,\n  },\n  tools: {\n    rspack: (config, { environment }) => {\n      if (environment === 'production') {\n        config.plugins.push(\n          // DashboardPlugin is added to Rspack config by default in production mode\n          new DashboardPlugin({\n            // Set options\n          })\n        );\n      }\n      return config;\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Production Mode Configuration\nDESCRIPTION: Example of applying production-specific Rspack settings.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/tools/rspack.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: (chain, { isProd }) => {\n      if (isProd) {\n        chain.devtool('source-map');\n      }\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Web Worker Configuration\nDESCRIPTION: Demonstrates how to configure Rspack for web worker builds.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/tools/rspack.mdx#2025-04-21_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: (config, { isWebWorker }) => {\n      if (isWebWorker) {\n        // ...\n      }\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining OnAfterEnvironmentCompile Callback Function in TypeScript\nDESCRIPTION: Type definition for the OnAfterEnvironmentCompile callback function that is triggered after environment compilation. The callback receives parameters including build statistics, environment context, and flags to determine if it's the first compilation or running in watch mode.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/shared/onAfterEnvironmentCompile.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction OnAfterEnvironmentCompile(\n  callback: (params: {\n    isFirstCompile: boolean;\n    isWatch: boolean;\n    stats?: Stats;\n    environment: EnvironmentContext;\n  }) => Promise<void> | void,\n): void;\n```\n\n----------------------------------------\n\nTITLE: Loading Specific Moment.js Locale After Removal\nDESCRIPTION: This code demonstrates how to load a specific locale for moment.js after enabling the removeMomentLocale option. It imports moment and a specific locale file, then sets the locale for use.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/remove-moment-locale.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport moment from 'moment';\nimport 'moment/locale/zh-cn';\n\nmoment.locale('zh-cn');\n```\n\n----------------------------------------\n\nTITLE: Defining Type for Routes in TypeScript\nDESCRIPTION: This code snippet defines a TypeScript type, `Routes`, which represents an array of route objects each containing an `entryName` and a `pathname`. It is used in the context of a server application to manage routing information.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/shared/onAfterStartProdServer.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype Routes = Array<{\\n  entryName: string;\\n  pathname: string;\\n}>;\n```\n\n----------------------------------------\n\nTITLE: Using a Web Worker in the Main Thread with JavaScript\nDESCRIPTION: This code shows how to create and use a Web Worker in the main thread, including sending a message to the worker and handling the response.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/web-workers.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst worker = new Worker(new URL('./worker.js', import.meta.url));\n\nworker.onmessage = (event) => {\n  console.log('The results from Workers:', event.data);\n};\n\nworker.postMessage(10);\n```\n\n----------------------------------------\n\nTITLE: Copying Files to Subdirectory in Rsbuild\nDESCRIPTION: Example showing how to copy files from ./src/assets to a specific subdirectory (assets) within the dist folder. This maintains better organization in the output directory.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/copy.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    copy: [\n      // `./src/assets/image.png` -> `./dist/assets/image.png`\n      { from: './src/assets', to: 'assets' },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Building All Packages in the Project\nDESCRIPTION: Command to build all packages in the monorepo project using the predefined build script.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/CONTRIBUTING.md#2025-04-21_snippet_9\n\nLANGUAGE: sh\nCODE:\n```\npnpm run build\n```\n\n----------------------------------------\n\nTITLE: Enabling CLI Shortcuts in Rsbuild Configuration\nDESCRIPTION: This JavaScript code snippet shows how to enable CLI shortcuts in the Rsbuild configuration file. It sets the 'cliShortcuts' option to true under the 'dev' configuration object.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/cli-shortcuts.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  dev: {\n    cliShortcuts: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Dynamic Import Example in JavaScript\nDESCRIPTION: Demonstrates how to dynamically import modules in JavaScript, which will generate prefetch tags when prefetch is enabled.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/performance/prefetch.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport('./foo');\nimport('./bar');\n```\n\n----------------------------------------\n\nTITLE: Using initConfigs Method in TypeScript\nDESCRIPTION: This example demonstrates how to use the initConfigs method to retrieve Rspack configurations and log them to the console.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/instance.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nconst rspackConfigs = await rsbuild.initConfigs();\n\nconsole.log(rspackConfigs);\n```\n\n----------------------------------------\n\nTITLE: Running pnpm dedupe for Dependency Deduplication\nDESCRIPTION: This command uses pnpm's built-in dedupe feature to upgrade and eliminate duplicate dependencies in versions 7.26.0 and above.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/optimization/optimize-bundle.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\npnpm dedupe\n```\n\n----------------------------------------\n\nTITLE: Accessing HTML Rspack Plugin in Rsbuild Configuration\nDESCRIPTION: This example shows how to access the HTML Rspack Plugin in the configuration function using the HtmlPlugin utility.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/rspack.mdx#2025-04-21_snippet_11\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: (config, { HtmlPlugin }) => {\n      console.log(HtmlPlugin);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Entry-Based Polyfill Mode in Rsbuild\nDESCRIPTION: Setting the polyfill mode to 'entry', which injects comprehensive polyfills based on browserslist into each entry file, providing better compatibility at the cost of larger bundle size.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/browser-compatibility.mdx#2025-04-21_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    polyfill: 'entry',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Adding PostCSS Plugin in Rsbuild Configuration\nDESCRIPTION: Example of adding a PostCSS plugin using the addPlugins utility function in the Rsbuild configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/postcss.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    postcss: (opts, { addPlugins }) => {\n      addPlugins(require('postcss-px-to-viewport'));\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Install Node.js LTS using nvm\nDESCRIPTION: These commands install the latest LTS version of Node.js using nvm (Node Version Manager) and switch to that version. Nvm is a tool for managing multiple active Node.js versions.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/start/quick-start.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n\"# Install Node.js LTS\nnvm install --lts\n# Switch to Node.js LTS\nnvm use --lts\"\n```\n\n----------------------------------------\n\nTITLE: Registering Babel Plugin in Rsbuild Configuration (TS)\nDESCRIPTION: This code snippet demonstrates how to register the Babel plugin within the `rsbuild.config.ts` file. It showcases the import statement for the `pluginBabel` function and its inclusion within the `plugins` array of the configuration object, enabling Babel transpilation within the Rsbuild project.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-babel.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginBabel } from '@rsbuild/plugin-babel';\n\nexport default {\n  plugins: [pluginBabel()],\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling Progress Bar in Rsbuild Configuration\nDESCRIPTION: Shows how to disable the progress bar in the Rsbuild configuration using JavaScript.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/dev/progress-bar.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  dev: {\n    progressBar: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Emitting a New Asset with api.processAssets\nDESCRIPTION: This snippet shows how to use `api.processAssets` to emit a new asset in the `additional` stage. It creates a new asset named `'new-asset.txt'` with the content `'This is a new asset!'` using the provided `sources` object and adds it to the compilation.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/core.mdx#2025-04-21_snippet_15\n\nLANGUAGE: javascript\nCODE:\n```\napi.processAssets(\n  { stage: 'additional' },\n  ({ assets, sources, compilation }) => {\n    const source = new sources.RawSource('This is a new asset!');\n    compilation.emitAsset('new-asset.txt', source);\n  },\n);\n```\n\n----------------------------------------\n\nTITLE: Basic Rsbuild Package Update Using Taze\nDESCRIPTION: Command to upgrade all dependencies containing 'rsbuild' in their names using Taze CLI tool. The -w flag writes changes to package.json.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/upgrade-rsbuild.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx taze --include /rsbuild/ -w\n```\n\n----------------------------------------\n\nTITLE: Filtered Manifest JSON Output Example\nDESCRIPTION: Example of the manifest.json file structure after filtering to include only JavaScript files.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/manifest.mdx#2025-04-21_snippet_8\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"allFiles\": [\"/static/js/index.[hash].js\"],\n  \"entries\": {\n    \"index\": {\n      \"initial\": {\n        \"js\": [\"/static/js/index.[hash].js\"]\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Switching Compression Tools in Rspack (TypeScript)\nDESCRIPTION: This snippet demonstrates how to switch from the default SwcJsMinimizerRspackPlugin to Terser for compressing JavaScript files in a production environment.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/configuration/swc.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    bundlerChain(chain, { CHAIN_ID, isProd }) {\n      if (isProd) {\n        chain.optimization.minimizer(CHAIN_ID.MINIMIZER.JS).use(TerserPlugin, [\n          {\n            minify: TerserPlugin.terserMinify,\n          },\n        ]);\n      }\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Default Dev Client Configuration in JavaScript\nDESCRIPTION: Default configuration values for the development client, including WebSocket connection parameters and error overlay settings.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/client.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultConfig = {\n  path: '/rsbuild-hmr',\n  // By default it is set to \"location.port\"\n  port: '',\n  // By default it is set to \"location.hostname\"\n  host: '',\n  // By default it is set to \"location.protocol === 'https:' ? 'wss' : 'ws'\"\"\n  protocol: undefined,\n  reconnect: 100,\n  overlay: true,\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Lightning CSS Loader with Function in JavaScript\nDESCRIPTION: An example of configuring the Lightning CSS loader using a function. It receives the default config as a parameter and can modify it or return a new object.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/lightningcss-loader.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    lightningcssLoader: (config) => {\n      config.exclude = {\n        vendorPrefixes: false,\n      };\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Building Rsbuild Project for Production in Bash\nDESCRIPTION: Command to build the Rsbuild application for production deployment using pnpm, which creates optimized output files.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/packages/create-rsbuild/template-common/README.md#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\npnpm build\n```\n\n----------------------------------------\n\nTITLE: Setting Multiple Page Titles in Rsbuild Config (TypeScript)\nDESCRIPTION: This snippet shows how to set different titles for multiple pages based on the entry name in a Rsbuild project.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/html-template.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  html: {\n    title({ entryName }) {\n      const titles = {\n        foo: 'Foo',\n        bar: 'Bar',\n      };\n      return titles[entryName];\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Generated Rspack Configuration Structure in JavaScript\nDESCRIPTION: Example structure of the generated Rspack configuration file in debug mode. It includes sections for resolve, module, and plugins.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/debug/debug-mode.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  resolve: {\n    // some resolve configs...\n  },\n  module: {\n    // some Rspack loaders...\n  },\n  plugins: [\n    // some Rspack plugins...\n  ],\n  // other configs...\n};\n```\n\n----------------------------------------\n\nTITLE: Resulting HTML Tag for DNS Prefetch\nDESCRIPTION: Shows the HTML link tag that is generated and injected into the HTML file based on the DNS prefetch configuration. This example corresponds to the JavaScript configuration above.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/dns-prefetch.mdx#2025-04-21_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<link rel=\"dns-prefetch\" href=\"https://example.com\" />\n```\n\n----------------------------------------\n\nTITLE: Filtering File Size Output by Asset Size in Rsbuild\nDESCRIPTION: This example demonstrates how to use the 'include' option to filter file size output, showing only static assets larger than 10kB in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/print-file-size.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  performance: {\n    printFileSize: {\n      include: (asset) => asset.size > 10 * 1000,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining onCloseBuild Hook in Rsbuild\nDESCRIPTION: This TypeScript code snippet defines the `onCloseBuild` hook function. It accepts a callback function as an argument, which can be either a synchronous or asynchronous function that performs cleanup operations. This hook is used to execute cleanup tasks after the Rsbuild build process.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/shared/onCloseBuild.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n```ts\nfunction onCloseBuild(callback: () => Promise<void> | void): void;\n```\n```\n\n----------------------------------------\n\nTITLE: Setting Multiple Header Values in Rsbuild Server\nDESCRIPTION: Shows how to set multiple values for the same HTTP header in Rsbuild server configuration. Uses an array of strings to specify multiple Set-Cookie headers.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/headers.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    headers: {\n      // Multiple Set-Cookie headers\n      'Set-Cookie': ['type=ninja', 'language=javascript'],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring style-loader with Function in Rsbuild\nDESCRIPTION: This snippet shows how to configure style-loader using a function. The default options are passed as the first parameter, which can be modified directly or a new object can be returned.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/style-loader.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    styleLoader: (config) => {\n      config.insert = 'head';\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Accessing Build Context in a Plugin\nDESCRIPTION: Demonstrates how to access the build context within a plugin's setup function using `api.context`. This allows plugins to retrieve information about the project's configuration and environment, like the output directory.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/core.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nconst pluginFoo = () => ({\n  setup(api) {\n    console.log(api.context.distPath);\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Dynamic Port Based on Environment in Rsbuild\nDESCRIPTION: Demonstrates how to set different port numbers for development and preview servers using environment variables in the server.port configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/port.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    port: process.env.NODE_ENV === 'development' ? 3000 : 8080,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom Manifest Filename in Rsbuild\nDESCRIPTION: Example of specifying a custom filename or path for the manifest file using the output.manifest.filename option.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/manifest.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    manifest: {\n      filename: './static/my-manifest.json',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining Output Directory Types in TypeScript\nDESCRIPTION: TypeScript interface defining the structure of output directory configuration object, specifying paths for different types of files like HTML, JS, CSS, images, and other assets.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/dist-path.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype DistPathConfig = {\n  root?: string;\n  html?: string;\n  js?: string;\n  jsAsync?: string;\n  css?: string;\n  cssAsync?: string;\n  svg?: string;\n  font?: string;\n  wasm?: string;\n  image?: string;\n  media?: string;\n  assets?: string;\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Source Map Generation with Stylus Plugin (TypeScript)\nDESCRIPTION: This snippet shows how to configure the `pluginStylus()` function to set the `sourceMap` option to false. This configuration decides whether to generate source maps during the Stylus file compilation, which helps with debugging.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-stylus.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\npluginStylus({\n  sourceMap: false,\n});\n```\n\n----------------------------------------\n\nTITLE: Removing react-app-polyfill imports\nDESCRIPTION: Demonstrates how to remove react-app-polyfill imports from code when migrating to Rsbuild, as Rsbuild provides its own polyfill mechanism.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/migration/cra.mdx#2025-04-21_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nimport 'react-app-polyfill/ie11'; // [!code --]\nimport 'react-app-polyfill/stable'; // [!code --]\n```\n\n----------------------------------------\n\nTITLE: Forced Cleanup Configuration\nDESCRIPTION: Example of forcing the cleanup behavior to be enabled regardless of other settings.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/clean-dist-path.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    cleanDistPath: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Adding Rspack-Only E2E Test Cases in TypeScript\nDESCRIPTION: This snippet shows how to add test cases that will run only for Rspack in the Rsbuild e2e testing setup. It uses a custom 'rspackOnlyTest' method.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/e2e/README.md#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { rspackOnlyTest } from '@e2e/helper';\n\nrspackOnlyTest('test 1 + 1', () => {\n  expect(1 + 1).toBe(2);\n});\n```\n\n----------------------------------------\n\nTITLE: Body Script Injection Configuration\nDESCRIPTION: JavaScript configuration to inject script tags at the end of the body tag.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/html/inject.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    inject: 'body',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining ProcessAssetsDescriptor Type in Rsbuild\nDESCRIPTION: This snippet defines the `ProcessAssetsDescriptor` type used with `api.processAssets`. It allows specifying the stage, targets, and environments to control when the `processAssets` handler is triggered.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/core.mdx#2025-04-21_snippet_18\n\nLANGUAGE: typescript\nCODE:\n```\ntype ProcessAssetsDescriptor = {\n  stage: ProcessAssetsStage;\n  targets?: RsbuildTarget[];\n  environments?: string[];\n};\n```\n\n----------------------------------------\n\nTITLE: Default PostCSS Configuration in Rsbuild\nDESCRIPTION: Shows the default PostCSS configuration options in Rsbuild, including sourceMap settings based on CSS output configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/tools/postcss.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultOptions = {\n  postcssOptions: {\n    config: false,\n    sourceMap: rsbuildConfig.output.sourceMap.css,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Accessing Dist Path in JavaScript\nDESCRIPTION: Example demonstrating how to access the output directory path in a plugin.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/environment-api.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\napi.modifyRspackConfig((config, { environment }) => {\n  console.log(environment.distPath);\n  return config;\n});\n```\n\n----------------------------------------\n\nTITLE: Example of Using Tag Handlers in Rsbuild Configuration\nDESCRIPTION: Example showing how to use tag handlers to manipulate tags programmatically, including adding new tags, modifying existing tags, and controlling insertion order.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/tags.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  html: {\n    tags: [\n      (tags) => [{ tag: 'script', attrs: { src: 'a.js' } }, ...tags],\n      (tags) => {\n        // Modify 'a.js' tag\n        const target = tags.find((tag) => tag.attrs?.src === 'a.js');\n        if (target) {\n          target.attrs ||= {};\n          target.attrs.defer = true;\n        }\n      },\n      (tags) => {\n        // Insert 'b.js' after 'a.js'\n        const targetIndex = tags.findIndex((tag) => tag.attrs?.src === 'a.js');\n\n        tags.splice(targetIndex + 1, 0, {\n          tag: 'script',\n          attrs: { src: 'd.js' },\n        });\n      },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting HTML Title using Function in Rsbuild Configuration (JavaScript)\nDESCRIPTION: This code snippet illustrates how to use a function to dynamically set HTML titles in a multi-page application. It uses the entryName parameter to determine the appropriate title for each page.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/html/title.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    title({ entryName }) {\n      const titles = {\n        foo: 'Foo Page',\n        bar: 'Bar Page',\n      };\n      return titles[entryName] || 'Other Page';\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Favicon in Rsbuild Config (TypeScript)\nDESCRIPTION: This snippet demonstrates how to set a favicon for your web application using the html.favicon config in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/html-template.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  html: {\n    favicon: './src/assets/icon.png',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Opening External URL\nDESCRIPTION: Configuration to open a non-localhost URL, typically used with proxy.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/open.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    open: 'http://www.example.com',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using onBeforeStartProdServer in a Rsbuild Plugin\nDESCRIPTION: Example of creating a plugin that uses the onBeforeStartProdServer hook to execute code before the production server starts.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/hooks.mdx#2025-04-21_snippet_26\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onBeforeStartProdServer(() => {\n      console.log('before start!');\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Keep Files Configuration\nDESCRIPTION: Example of keeping specific files during cleanup using regular expressions.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/clean-dist-path.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    cleanDistPath: {\n      keep: [/dist\\/foo.json/],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling HMR and Live Reload in Rsbuild Configuration (JavaScript)\nDESCRIPTION: This code snippet demonstrates how to disable both Hot Module Replacement (HMR) and live reload in Rsbuild by setting the appropriate configuration options to false. This prevents automatic page refreshes and WebSocket connections to the dev server when files change.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/live-reload.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  dev: {\n    hmr: false,\n    liveReload: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Customizing Manifest Filename in Rsbuild Configuration (TypeScript)\nDESCRIPTION: Example of specifying a custom filename and path for the manifest file using the output.manifest configuration option.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/manifest.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    manifest: {\n      filename: './static/my-manifest.json',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining Type Structure for inlineStyles Configuration in TypeScript\nDESCRIPTION: TypeScript type definitions for the inlineStyles configuration option in Rsbuild, showing the possible values including boolean, RegExp test, function test, or object with enable and test properties.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/inline-styles.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype InlineStylesTest =\n  | RegExp\n  | ((params: { size: number; name: string }) => boolean);\n\ntype InlineStyles =\n  | boolean\n  | InlineStylesTest\n  | {\n      enable?: boolean | 'auto';\n      test: InlineStylesTest;\n    };\n```\n\n----------------------------------------\n\nTITLE: Applying Target-Specific Configuration\nDESCRIPTION: Example of using the target utility to apply specific configurations based on the build target environment.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/bundler-chain.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    bundlerChain: (chain, { target }) => {\n      if (target === 'node') {\n        // ...\n      }\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Directory Structure Before Inlining\nDESCRIPTION: Example of the default file structure before CSS inlining is enabled.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/inline-styles.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ndist/html/main/index.html\ndist/static/css/style.css\ndist/static/js/main.js\n```\n\n----------------------------------------\n\nTITLE: CRACO Migration Example: Webpack Configuration\nDESCRIPTION: Migrate webpack configuration from CRACO to Rsbuild's tools.rspack configuration\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/cra.mdx#2025-04-21_snippet_10\n\nLANGUAGE: javascript\nCODE:\n```\n// Before migration (CRACO)\nmodule.exports = {\n  webpack: {\n    configure: {\n      resolve: {\n        mainFields: ['browser', 'module', 'main'],\n      },\n    },\n    plugins: [...whenDev(() => [new MyWebpackPlugin()], [])],\n  },\n};\n```\n\nLANGUAGE: typescript\nCODE:\n```\n// After migration (Rsbuild)\nexport default {\n  tools: {\n    rspack: {\n      resolve: {\n        mainFields: ['browser', 'module', 'main'],\n      },\n      plugins:\n        process.env.NODE_ENV === 'development' ? [new MyWebpackPlugin()] : [],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Incorrect Usage Example with Unprocessed Source Files\nDESCRIPTION: Example of incorrect usage where an unprocessed source file is referenced directly, which will not be transpiled or bundled properly.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/tags.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    assetPrefix: 'https://example.com/',\n  },\n  html: {\n    tags: [{ tag: 'script', attrs: { src: './src/polyfill.ts' } }],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Accessing HtmlPlugin Instance\nDESCRIPTION: Example of accessing the HtmlPlugin instance provided by the utils object.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/bundler-chain.mdx#2025-04-21_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    bundlerChain: (chain, { HtmlPlugin }) => {\n      console.log(HtmlPlugin);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Opening Non-localhost URL Configuration\nDESCRIPTION: Example of opening a non-localhost URL using server.open configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/server/open.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    open: 'http://www.example.com',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Structuring Integration Test Files in JavaScript\nDESCRIPTION: Guidelines for organizing integration test files, showing correct setup of a test file with imports, test case structure, and proper code organization.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/e2e/cases/server/watch-files/assets/example.txt#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n// Import modules needed\nimport fs from 'node:fs';\nimport path from 'node:path';\nimport { build } from '@rsbuild/core';\n\n// Add necessary variables\nconst fixtures = path.join(__dirname, 'fixtures'); // fixtures of test case\n\n// Create main test description\ndescribe('integration test case', () => {\n  // Create sub test cases\n  // ...\n});\n```\n\n----------------------------------------\n\nTITLE: Inline CSS Configuration\nDESCRIPTION: This code snippet demonstrates how to configure Rsbuild to inject CSS styles directly into the JavaScript bundle, disabling separate CSS file extraction.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/styling/css-usage.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    injectStyles: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Complex CSS Modules Syntax in Rsbuild\nDESCRIPTION: This CSS snippet showcases the support for complex CSS Modules syntax in Rsbuild 0.7, including the use of :local() and :global() pseudo-classes for scoping styles.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-7.mdx#2025-04-21_snippet_2\n\nLANGUAGE: css\nCODE:\n```\n:local(.parent):global(.child) > ul {\n  color: red;\n}\n```\n\n----------------------------------------\n\nTITLE: Disabling CSS Minification\nDESCRIPTION: Configuration example showing how to disable CSS minification while keeping JavaScript minification enabled.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/minify.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    minify: {\n      css: false,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Single Pre-Entry Script in Rsbuild\nDESCRIPTION: Configuration example for adding a single pre-entry script in Rsbuild. This setup includes the polyfill script created earlier as the pre-entry file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/pre-entry.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  source: {\n    preEntry: './src/polyfill.ts',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Including Files for Prefresh Processing\nDESCRIPTION: Specifies which files should be processed by the Prefresh plugin for fast refresh (HMR). The `include` option accepts a RuleSetCondition, allowing you to define regular expressions or file paths. This example includes the default JavaScript/TypeScript files and an additional module.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/list/plugin-preact.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\npluginPreact({\n  include: [/\\.(?:js|jsx|mjs|cjs|ts|tsx|mts|cts)$/, /some-other-module/],\n});\n```\n\n----------------------------------------\n\nTITLE: Example - Action Context Usage\nDESCRIPTION: Example showing how to use the action context property.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nif (rsbuild.context.action === 'dev') {\n  // do something\n}\n```\n\n----------------------------------------\n\nTITLE: Custom Static Asset Rules with tools.bundlerChain and tools.rspack (TS)\nDESCRIPTION: Demonstrates how to customize static asset handling by excluding default rules and adding custom loaders using `tools.bundlerChain` and `tools.rspack`.  This allows completely overriding the default handling of specific file types, such as PNG images. The example shows how to exclude the default image rule for PNG files and add a custom loader.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/static-assets.mdx#2025-04-21_snippet_20\n\nLANGUAGE: ts\nCODE:\n```\nexport default {\n  tools: {\n    bundlerChain(chain, { CHAIN_ID }) {\n      chain.module\n        // 通过 `CHAIN_ID.RULE.IMAGE` 来定位到内置的图片规则\n        .rule(CHAIN_ID.RULE.IMAGE)\n        .exclude.add(/\\.png$/);\n    },\n    rspack(config, { addRules }) {\n      addRules([\n        {\n          test: /\\.png$/,\n          // 添加一个自定义的 loader 来处理 png 图片\n          loader: 'custom-png-loader',\n        },\n      ]);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Updating Entry Configuration in Rsbuild 0.2\nDESCRIPTION: The deprecated 'source.entries' config has been removed. Users should now use 'source.entry' instead.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-2.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n// rsbuild.config.ts\nexport default {\n  source: {\n    entries: {},\n  },\n};\n```\n\nLANGUAGE: javascript\nCODE:\n```\n// rsbuild.config.ts\nexport default {\n  source: {\n    entry: {},\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Directory Structure After Enabling inlineScripts\nDESCRIPTION: Example of the output directory structure after enabling the inlineScripts option, showing that the JS file is no longer present as a separate file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/inline-scripts.mdx#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\ndist/html/main/index.html\ndist/static/css/style.css\n```\n\n----------------------------------------\n\nTITLE: Copying Files to Root Directory in Rsbuild\nDESCRIPTION: Example showing how to copy files from ./src/assets directory directly to the dist directory root. Files will maintain their original names but be placed in the output root.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/copy.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    copy: [\n      // `./src/assets/image.png` -> `./dist/image.png`\n      { from: './src/assets' },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Watching Multiple File Paths in Rsbuild\nDESCRIPTION: Configuration example showing how to watch multiple file paths in Rsbuild by providing an array of paths. This setup monitors both text files in src and all files in the public directory.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/watch-files.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  dev: {\n    watchFiles: {\n      paths: ['src/**/*.txt', 'public/**/*'],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining FilenameConfig Type in TypeScript\nDESCRIPTION: TypeScript type definition for the FilenameConfig object, specifying the structure for configuring output filenames of different asset types.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/filename.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype FilenameConfig = {\n  html?: string;\n  js?: string | Function;\n  css?: string | Function;\n  svg?: string | Function;\n  font?: string | Function;\n  image?: string | Function;\n  media?: string | Function;\n  assets?: string | Function;\n};\n```\n\n----------------------------------------\n\nTITLE: Custom Manifest Filename Configuration\nDESCRIPTION: JavaScript configuration example showing how to customize the manifest filename\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/app-icon.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    appIcon: {\n      filename: 'manifest.json',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Browserslist for Mobile Compatibility in Rsbuild\nDESCRIPTION: Example configuration for mobile-friendly browserslist in Rsbuild. This targets iOS 9+, Android 4.4+, and includes the last 2 versions of all browsers with market share above 0.2%.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/override-browserslist.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    overrideBrowserslist: [\n      'iOS >= 9',\n      'Android >= 4.4',\n      'last 2 versions',\n      '> 0.2%',\n      'not dead',\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Explicit Lazy Compilation Options\nDESCRIPTION: Detailed configuration showing explicit settings for both imports and entries lazy compilation.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/lazy-compilation.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    lazyCompilation: {\n      imports: true,\n      entries: true,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Sub Dependencies Compilation Configuration\nDESCRIPTION: Demonstrates how to include sub-dependencies for compilation when they contain ESNext code.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/include.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  source: {\n    include: [\n      /node_modules[\\\\/]query-string[\\\\/]/,\n      /node_modules[\\\\/]decode-uri-component[\\\\/]/,\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Incorrect and Correct JS import of public assets\nDESCRIPTION: This JavaScript example illustrates the incorrect and correct methods for importing assets. It stresses that files in the `public` folder should not be imported into JavaScript. It promotes the usage of a different directory e.g. `/src/assets` for storing the static assets.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/static-assets.mdx#2025-04-21_snippet_14\n\nLANGUAGE: js\nCODE:\n```\n// 错误\nimport logo from '../public/logo.png';\n\n// 正确\nimport logo from './assets/logo.png';\n```\n\n----------------------------------------\n\nTITLE: Defining PrintFileSizeOptions Type in TypeScript\nDESCRIPTION: This snippet defines the type for PrintFileSizeOptions, which can be a boolean or an object with specific properties for customizing file size output.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/print-file-size.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype PrintFileSizeOptions =\n  | boolean\n  | {\n      total?: boolean;\n      detail?: boolean;\n      compressed?: boolean;\n      include?: (asset: PrintFileSizeAsset) => boolean;\n    };\n```\n\n----------------------------------------\n\nTITLE: Installing Stylus Plugin Package Name Reference\nDESCRIPTION: The NPM package name used for installing the Rsbuild Stylus plugin.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/packages/plugin-stylus/README.md#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\n@rsbuild/plugin-stylus\n```\n\n----------------------------------------\n\nTITLE: Default Configuration Values for PublicDir\nDESCRIPTION: The default configuration values for server.publicDir, setting the name to 'public', copyOnBuild to 'auto', and watch to false.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/public-dir.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultValue = {\n  name: 'public',\n  copyOnBuild: 'auto',\n  watch: false,\n};\n```\n\n----------------------------------------\n\nTITLE: CSS Module Definition in Rsbuild\nDESCRIPTION: This CSS snippet defines a class in a CSS Module file for use with Rsbuild 0.7. It demonstrates the naming convention for CSS Modules files and a simple class definition.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-7.mdx#2025-04-21_snippet_4\n\nLANGUAGE: css\nCODE:\n```\n.page-header {\n  color: black;\n}\n```\n\n----------------------------------------\n\nTITLE: Merge Configuration Example\nDESCRIPTION: Example of using mergeRsbuildConfig to combine multiple configuration objects.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/configuration/rsbuild.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig, mergeRsbuildConfig } from '@rsbuild/core';\n\nconst config1 = defineConfig({\n  dev: { port: '3000' },\n});\nconst config2 = defineConfig({\n  dev: { port: '3001' },\n});\n\n// { dev: { port: '3001' }\nexport default mergeRsbuildConfig(config1, config2);\n```\n\n----------------------------------------\n\nTITLE: Defining DataUriLimit Type in TypeScript\nDESCRIPTION: This snippet defines the TypeScript type for the dataUriLimit configuration option. It can be either a number or an object with specific asset type thresholds.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/data-uri-limit.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype DataUriLimit =\n  | number\n  | {\n      svg?: number;\n      font?: number;\n      image?: number;\n      media?: number;\n      assets?: number;\n    };\n```\n\n----------------------------------------\n\nTITLE: Accessing Context in Plugin Setup\nDESCRIPTION: Shows how to access the context object within a plugin's setup function to retrieve build information.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/core.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nconst pluginFoo = () => ({\n  setup(api) {\n    console.log(api.context.distPath);\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Importing Individual Config Type Definitions\nDESCRIPTION: Demonstrates how to import type definitions for individual configuration fields in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/types.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport type {\n  DevConfig,\n  HtmlConfig,\n  ToolsConfig,\n  SourceConfig,\n  ServerConfig,\n  OutputConfig,\n  SecurityConfig,\n  PerformanceConfig,\n  ModuleFederationConfig,\n} from '@rsbuild/core';\n```\n\n----------------------------------------\n\nTITLE: Setting Custom Base Path in Rsbuild\nDESCRIPTION: Configure the server.base option to change the base path from the default '/' to '/foo', allowing access to index.html through http://localhost:3000/foo/.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/base.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    base: '/foo',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining Nonce Type in TypeScript\nDESCRIPTION: This snippet defines the type for the nonce configuration option in TypeScript. It specifies that the nonce value should be a string.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/security/nonce.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype Nonce = string;\n```\n\n----------------------------------------\n\nTITLE: Defining Externals Type in TypeScript\nDESCRIPTION: This TypeScript code defines the type for the externals configuration. It can be a string, object, function, RegExp, or an array containing any of these types.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/externals.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype Externals =\n  | string\n  | object\n  | function\n  | RegExp\n  | Array<string | object | function | RegExp>;\n```\n\n----------------------------------------\n\nTITLE: HTML Output from Tag Handler Example\nDESCRIPTION: Example HTML output showing the result of applying the tag handlers, with script tags properly positioned and attributes applied.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/tags.mdx#2025-04-21_snippet_7\n\nLANGUAGE: html\nCODE:\n```\n<html>\n  <head>\n    <script src=\"/a.js\" defer></script>\n    <script src=\"/d.js\"></script>\n    <!-- some other headTags... -->\n  </head>\n  <body>\n    <!-- some bodyTags... -->\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Registering Middleware After Internal Middleware\nDESCRIPTION: Example of registering custom middleware that executes after Rsbuild's internal middleware by returning a callback function from onBeforeStartDevServer.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/hooks.mdx#2025-04-21_snippet_20\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onBeforeStartDevServer(({ server }) => {\n      // the returned callback will be called when the default\n      // middlewares are registered\n      return () => {\n        server.middlewares.use((req, res, next) => {\n          next();\n        });\n      };\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Template Function Type Definition\nDESCRIPTION: TypeScript type definition for the template function, showing the expected parameters and return type.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/template.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\ntype TemplateFunction = ({ value: string; entryName: string }) => string | void;\n```\n\n----------------------------------------\n\nTITLE: Importing CSS Module with Named Exports\nDESCRIPTION: Shows how to import CSS Module classes directly as named exports or as a namespace when namedExport is enabled.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/css-modules.mdx#2025-04-21_snippet_11\n\nLANGUAGE: javascript\nCODE:\n```\nimport { foo } from './style.module.css';\n// or\nimport * as styles from './style.module.css';\n\nconsole.log(foo);\nconsole.log(styles.foo);\n```\n\n----------------------------------------\n\nTITLE: Configuring Decorators Version in Rsbuild\nDESCRIPTION: Shows how to specify the version of decorators used in a TypeScript project configuration with Rsbuild through the `decorators.version` setting, allowing selection between the default and legacy versions.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/typescript.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  source: {\n    decorators: {\n      version: 'legacy',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Exclude specific Less files (TypeScript)\nDESCRIPTION: Configures the Less plugin to exclude `.less` files that match the provided regular expression.  This prevents specified files from being transformed by `less-loader`.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-less.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\npluginLess({\n  exclude: /some-folder[\\\\/]foo\\.less/,\n});\n```\n\n----------------------------------------\n\nTITLE: Setting CDN URL in output.assetPrefix Configuration in JavaScript\nDESCRIPTION: Example of setting output.assetPrefix to a CDN address in Rsbuild configuration. This adds the specified CDN URL as a prefix to all static assets when building for production.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/asset-prefix.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    assetPrefix: 'https://cdn.example.com/assets/',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Example - Build Usage\nDESCRIPTION: Examples demonstrating different ways to use the build method.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nimport { logger } from '@rsbuild/core';\n\n// Example 1: run build\nawait rsbuild.build();\n\n// Example 2: build and handle the error\ntry {\n  await rsbuild.build();\n} catch (err) {\n  logger.error('Failed to build.');\n  logger.error(err);\n  process.exit(1);\n}\n\n// Example 3: build and get all assets\nconst { stats } = await rsbuild.build();\n\nif (stats) {\n  const { assets } = stats.toJson({\n    // exclude unused fields to improve performance\n    all: false,\n    assets: true,\n  });\n  console.log(assets);\n}\n```\n\n----------------------------------------\n\nTITLE: Displaying Rsbuild Logo in Markdown\nDESCRIPTION: This code snippet shows how to embed the Rsbuild logo image in a centered alignment using Markdown and HTML.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/scripts/test-helper/README.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n<p align=\"center\">\n  <a href=\"https://rsbuild.dev\" target=\"blank\"><img src=\"https://assets.rspack.dev/rsbuild/rsbuild-banner.png\" alt=\"Rsbuild Logo\" /></a>\n</p>\n```\n\n----------------------------------------\n\nTITLE: Disabling copyOnBuild for Public Directory\nDESCRIPTION: Example of disabling the copyOnBuild option to prevent copying files from the public directory to the build output directory during production builds.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/server/public-dir.mdx#2025-04-21_snippet_4\n\nLANGUAGE: ts\nCODE:\n```\nexport default {\n  server: {\n    publicDir: {\n      copyOnBuild: false,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Generated HTML Tags\nDESCRIPTION: Example of HTML tags automatically generated after compilation for app icons\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/app-icon.mdx#2025-04-21_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<link rel=\"manifest\" href=\"/manifest.webmanifest\" />\n<link\n  rel=\"apple-touch-icon\"\n  sizes=\"180x180\"\n  href=\"/static/image/icon-192.png\"\n/>\n```\n\n----------------------------------------\n\nTITLE: Disabling Compressed Size Output in Rsbuild\nDESCRIPTION: This configuration example shows how to disable the output of gzip-compressed file sizes in Rsbuild, which can save computation time for large projects.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/print-file-size.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  performance: {\n    printFileSize: {\n      compressed: false,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Processing Assets with Target and Environment Filtering\nDESCRIPTION: Example of filtering processAssets execution based on specific targets and environments\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/core.mdx#2025-04-21_snippet_19\n\nLANGUAGE: javascript\nCODE:\n```\napi.processAssets({ stage: 'additional', targets: ['web'] }, ({ assets }) => {\n  // ...\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Multiple Public Directories\nDESCRIPTION: Example of configuring multiple directories as static asset service folders using the array syntax for server.publicDir.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/server/public-dir.mdx#2025-04-21_snippet_7\n\nLANGUAGE: ts\nCODE:\n```\nexport default {\n  server: {\n    publicDir: [\n      {\n        name: 'public',\n      },\n      {\n        name: 'assets',\n        watch: false,\n      },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: CSS Module with Class Definition\nDESCRIPTION: Simple CSS Module file defining a class with blue color that can be imported in JavaScript components.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/css-modules.mdx#2025-04-21_snippet_9\n\nLANGUAGE: css\nCODE:\n```\n.foo {\n  color: blue;\n}\n```\n\n----------------------------------------\n\nTITLE: Setting ASCII charset in Rsbuild v1\nDESCRIPTION: Example showing how to set the output charset to ascii, as the default has changed to utf8.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/rsbuild-0-x.mdx#2025-04-21_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    charset: 'ascii',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using onAfterCreateCompiler Hook in TypeScript\nDESCRIPTION: This example shows how to use the onAfterCreateCompiler hook to log the compiler instance after it has been created.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/instance.mdx#2025-04-21_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nrsbuild.onAfterCreateCompiler(({ compiler }) => {\n  console.log('the compiler is ', compiler);\n});\n```\n\n----------------------------------------\n\nTITLE: Using process.env.BASE_URL in HTML\nDESCRIPTION: Shows how to use process.env.BASE_URL to construct URLs for static assets in HTML templates.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/env-vars.mdx#2025-04-21_snippet_7\n\nLANGUAGE: html\nCODE:\n```\n<!-- Equivalent to \"/foo/favicon.ico\" -->\n<link rel=\"icon\" href=\"<%= process.env.BASE_URL %>/favicon.ico\" />\n```\n\n----------------------------------------\n\nTITLE: Defining Rsbuild onCloseDevServer Hook\nDESCRIPTION: This TypeScript code snippet defines the signature for the `onCloseDevServer` hook within the Rsbuild framework. It takes a callback function as an argument, which can be either synchronous or asynchronous (returning a Promise). The hook allows users to perform cleanup operations when the development server is closed.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/shared/onCloseDevServer.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction onCloseDevServer(callback: () => Promise<void> | void): void;\n```\n\n----------------------------------------\n\nTITLE: Configuring Multiple Public Directories\nDESCRIPTION: Example of configuring multiple directories to serve as static assets folders by setting server.publicDir as an array of PublicDirOptions objects.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/public-dir.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    publicDir: [\n      {\n        name: 'public',\n      },\n      {\n        name: 'assets',\n        watch: false,\n      },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Default Preload Options - JavaScript\nDESCRIPTION: Default configuration options used when preload is enabled.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/preload.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultOptions = {\n  type: 'async-chunks',\n};\n```\n\n----------------------------------------\n\nTITLE: Defining CliShortcuts Type in TypeScript\nDESCRIPTION: This TypeScript code defines the 'CliShortcuts' type, which can be a boolean or an object with optional 'help' and 'custom' properties. The 'custom' property is a function that takes and returns an array of CliShortcut objects.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/cli-shortcuts.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype CliShortcuts =\n  | boolean\n  | {\n      help?: boolean;\n      custom?: (shortcuts: CliShortcut[]) => CliShortcut[];\n    };\n```\n\n----------------------------------------\n\nTITLE: Setting dev.assetPrefix to a relative path in Rsbuild\nDESCRIPTION: Example showing how to set dev.assetPrefix to a path relative to the root directory, which will be appended to the static resource URL.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/asset-prefix.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  dev: {\n    assetPrefix: '/example/',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Specifying Custom Less Implementation\nDESCRIPTION: Configuring a specific Less version implementation for loader\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/list/plugin-less.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\npluginLess({\n  lessLoaderOptions: {\n    implementation: require('less'),\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Enabling copyOnBuild for Node Target\nDESCRIPTION: Example of enabling copyOnBuild for Node.js target, overriding the default behavior which would otherwise not copy files when the target is 'node'.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/public-dir.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    target: 'node',\n  },\n  server: {\n    publicDir: {\n      copyOnBuild: true,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring style-loader with Object in Rsbuild\nDESCRIPTION: This snippet demonstrates how to configure style-loader using an object. The configuration is merged with the default options using Object.assign.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/style-loader.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    styleLoader: {\n      insert: 'head',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using Mixed Import Pattern with SVG in Rsbuild\nDESCRIPTION: Shows the previous mixed import pattern for SVG files, which allows importing both the URL and React component from a single import statement but causes bundle size and performance issues.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-5.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport logoUrl, { ReactComponent as Logo } from './logo.svg';\n\nconsole.log(logoUrl); // -> string\nconsole.log(Logo); // -> React component\n```\n\n----------------------------------------\n\nTITLE: Adding Custom CLI Shortcuts in Rsbuild\nDESCRIPTION: This JavaScript code example shows how to add custom CLI shortcuts in Rsbuild. It uses the 'custom' function to append a new shortcut to the existing shortcuts array, adding a 'say hello' action triggered by the 's' key.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/cli-shortcuts.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  dev: {\n    cliShortcuts: {\n      custom: (shortcuts) => {\n        return [\n          ...shortcuts,\n          {\n            key: 's',\n            description: 'say hello',\n            action: () => {\n              console.log('hello world!');\n            },\n          },\n        ];\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Incorrect Define Usage for process.env Replacement in Rsbuild\nDESCRIPTION: Example of a non-recommended approach to replace the entire process.env object. This can leak server environment variables to client code and increase bundle size.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/env-vars.mdx#2025-04-21_snippet_20\n\nLANGUAGE: js\nCODE:\n```\nexport default {\n  source: {\n    define: {\n      'process.env': JSON.stringify(process.env),\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Modular Stylus File Example for CSS Modules (Stylus)\nDESCRIPTION: This snippet shows a Stylus module file named `title.module.styl` for defining a CSS module with a class `.title`. Stylus syntax simplifies the definition of CSS properties by removing the need for braces and semicolons.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-stylus.mdx#2025-04-21_snippet_2\n\nLANGUAGE: stylus\nCODE:\n```\n.title\n   font-size: 14px;\n```\n\n----------------------------------------\n\nTITLE: CSS Module File Example\nDESCRIPTION: This is a sample CSS Module file that will be used to generate TypeScript declarations.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/community/releases/v0-7.mdx#2025-04-21_snippet_4\n\nLANGUAGE: css\nCODE:\n```\n.page-header {\n  color: black;\n}\n```\n\n----------------------------------------\n\nTITLE: Defining tools.bundlerChain Type in TypeScript\nDESCRIPTION: TypeScript type definition for the bundlerChain function, which takes an RspackChain instance and a utils object as parameters.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/bundler-chain.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype BundlerChainFn = (\n  chain: RspackChain,\n  utils: ModifyBundlerChainUtils,\n) => Promise<void> | void;\n```\n\n----------------------------------------\n\nTITLE: Defining SourceMap Type in TypeScript\nDESCRIPTION: This snippet defines the TypeScript type for the SourceMap configuration option. It allows boolean values or an object with separate js and css properties.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/source-map.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype SourceMap =\n  | boolean\n  | {\n      js?: Rspack.Configuration['devtool'];\n      css?: boolean;\n    };\n```\n\n----------------------------------------\n\nTITLE: Util Functions: removePlugins (JS)\nDESCRIPTION: This JavaScript code demonstrates how to use the `removePlugins` utility function to remove a Babel plugin by name. It removes the `babel-plugin-import` plugin from the configuration. `pluginBabel` is assumed to be in scope and that a babel config and a removePlugins function is passed to the configuration function.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-babel.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\npluginBabel({\n  babelLoaderOptions: (config, { removePlugins }) => {\n    removePlugins('babel-plugin-import');\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using Logger Methods in Rsbuild Core\nDESCRIPTION: Demonstrates how to use various logging methods from the logger object in @rsbuild/core for displaying different types of log messages with appropriate formatting.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/core.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport { logger } from '@rsbuild/core';\n\n// A gradient welcome log\nlogger.greet(`\\n➜ Rsbuild v1.0.0\\n`);\n\n// Info\nlogger.info('This is a info message');\n\n// Start\nlogger.start('This is a start message');\n\n// Warn\nlogger.warn('This is a warn message');\n\n// Ready\nlogger.ready('This is a ready message');\n\n// Success\nlogger.success('This is a success message');\n\n// Error\nlogger.error('This is a error message');\nlogger.error(new Error('This is a error message with stack'));\n\n// Debug\nlogger.debug('This is a debug message');\n\n// Same as console.log\nlogger.log('This is a log message');\n```\n\n----------------------------------------\n\nTITLE: Defining TagsConfig Type in TypeScript\nDESCRIPTION: Type definition for the html.tags configuration option in Rsbuild. It can accept a single tag object, a tag handler function, or an array of either.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/tags.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype TagsConfig = HtmlTag | HtmlTagHandler | Array<HtmlTag | HtmlTagHandler>;\n```\n\n----------------------------------------\n\nTITLE: Disabling Asset Inlining from CSS\nDESCRIPTION: This snippet uses the URL query to prevent an image asset from being inlined, ensuring it loads separately, which is applied in setting the background-image property of a CSS class. It showcases handling asset URLs directly in CSS.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/optimization/inline-assets.mdx#2025-04-21_snippet_5\n\nLANGUAGE: CSS\nCODE:\n```\n.foo {\n  background-image: url('. /icon.png?url');\n}\n```\n\n----------------------------------------\n\nTITLE: Disabling CLI Shortcuts in Rsbuild Configuration\nDESCRIPTION: This JavaScript code snippet demonstrates how to disable CLI shortcuts in the Rsbuild configuration file. It sets the 'cliShortcuts' option to false under the 'dev' configuration object.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/cli-shortcuts.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  dev: {\n    cliShortcuts: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: TypeScript Type Declaration for Static Assets (TS)\nDESCRIPTION: Shows how to create a TypeScript type declaration file (`src/env.d.ts`) to resolve module import errors for static assets like PNG images. This allows TypeScript to recognize and properly type the imported asset. Two alternative methods are provided, including referencing a predefined type or manually adding the declaration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/static-assets.mdx#2025-04-21_snippet_16\n\nLANGUAGE: ts\nCODE:\n```\n// 以 png 图片为例\ndeclare module '*.png' {\n  const content: string;\n  export default content;\n}\n```\n\n----------------------------------------\n\nTITLE: Disable HTML Report Generation\nDESCRIPTION: Configuration to generate only stats.json without the HTML report.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/bundle-analyze.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  performance: {\n    bundleAnalyze: {\n      analyzerMode: 'disabled',\n      generateStatsFile: true,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Meta Charset using Object Value\nDESCRIPTION: Example of setting a charset meta tag using an object value, where the object's key-value pairs become the attributes of the meta tag.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/html/meta.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    meta: {\n      charset: {\n        charset: 'UTF-8',\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: HTML Output from Proper Usage Examples\nDESCRIPTION: Example HTML output showing the result of properly configured tags with static assets and inline scripts.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/tags.mdx#2025-04-21_snippet_10\n\nLANGUAGE: html\nCODE:\n```\n<body>\n  <script src=\"https://example.com/service-worker.js\"></script>\n  <script src=\"https://cdn.example.com/foo.js\"></script>\n  <script>\n    function report() {\n      fetch('https://www.example.com/report');\n    }\n    report();\n  </script>\n</body>\n```\n\n----------------------------------------\n\nTITLE: Defining Type Signatures for ModifyEnvironmentConfig Method in Rsbuild (TypeScript)\nDESCRIPTION: Type definitions for the modifyEnvironmentConfig method in Rsbuild, which allows modifying configuration for a specific environment. It includes utility types for handling arrays and environment configuration objects.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/hooks.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\ntype ArrayAtLeastOne<A, B> = [A, ...Array<A | B>] | [...Array<A | B>, A];\n\ntype ModifyEnvironmentConfigUtils = {\n  /** Current environment name */\n  name: string;\n  mergeEnvironmentConfig: (\n    ...configs: ArrayAtLeastOne<MergedEnvironmentConfig, EnvironmentConfig>\n  ) => EnvironmentConfig;\n};\n\nfunction ModifyEnvironmentConfig(\n  callback: (\n    config: EnvironmentConfig,\n    utils: ModifyEnvironmentConfigUtils,\n  ) => MaybePromise<EnvironmentConfig | void>,\n): void;\n```\n\n----------------------------------------\n\nTITLE: Configuring Browserslist for Mobile H5 in Rsbuild\nDESCRIPTION: This example demonstrates how to configure the overrideBrowserslist option for mobile H5 compatibility in Rsbuild. It targets iOS and Android devices, as well as recent browser versions.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/override-browserslist.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    overrideBrowserslist: [\n      'iOS >= 9',\n      'Android >= 4.4',\n      'last 2 versions',\n      '> 0.2%',\n      'not dead',\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling Help Hint for CLI Shortcuts in Rsbuild\nDESCRIPTION: This JavaScript code example shows how to disable the help hint for CLI shortcuts when the server starts in Rsbuild. It sets the 'help' option to false within the 'cliShortcuts' configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/cli-shortcuts.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  dev: {\n    cliShortcuts: {\n      help: false,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Creating .env.local File\nDESCRIPTION: Demonstrates creating a .env.local file to override environment variables.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/env-vars.mdx#2025-04-21_snippet_12\n\nLANGUAGE: shell\nCODE:\n```\nBAR=2\n```\n\n----------------------------------------\n\nTITLE: Preload Interface Definition - TypeScript\nDESCRIPTION: TypeScript interface defining the configuration options for resource preloading.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/preload.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface PrefetchOptions {\n  type?: ResourceHintsIncludeType;\n  include?: ResourceHintsFilter;\n  exclude?: ResourceHintsFilter;\n  dedupe?: boolean;\n}\n```\n\n----------------------------------------\n\nTITLE: Bad NODE_ENV Usage (JavaScript)\nDESCRIPTION: This JavaScript snippet shows incorrect ways to access a defined environment variable using `process.env.NODE_ENV`. The define plugin can't resolve if the full qualified name is not found.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_28\n\nLANGUAGE: javascript\nCODE:\n```\nconsole.log(process.env['NODE_ENV']); // process is not defined!\n\n// Bad\nconsole.log(process.env?.NODE_ENV); // process is not defined!\n\n// Bad\nconst { NODE_ENV } = process.env;\nconsole.log(NODE_ENV); // process is not defined!\n\n// Bad\nconst env = process.env;\nconsole.log(env.NODE_ENV); // process is not defined!\n```\n\n----------------------------------------\n\nTITLE: Generated Rsbuild Configuration Structure in JavaScript\nDESCRIPTION: Example structure of the generated Rsbuild configuration file in debug mode. It shows the main configuration sections like dev and source.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/debug/debug-mode.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  dev: {\n    // some configs...\n  },\n  source: {\n    // some configs...\n  },\n  // other configs...\n};\n```\n\n----------------------------------------\n\nTITLE: Type Definition - Preview Options\nDESCRIPTION: Type definitions for the preview method options and return type.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\ntype PreviewOptions = {\n  /**\n   * Whether to get port silently\n   * @default false\n   */\n  getPortSilently?: boolean;\n  /**\n   * Whether to check if the dist directory exists and is not empty.\n   * @default true\n   */\n  checkDistDir?: boolean;\n};\n\ntype StartServerResult = {\n  /**\n   * The URLs that server is listening on.\n   */\n  urls: string[];\n  /**\n   * The actual port used by the server.\n   */\n  port: number;\n  server: {\n    /**\n     * Close the server.\n     */\n    close: () => Promise<void>;\n  };\n};\n\nfunction preview(options?: PreviewOptions): Promise<StartServerResult>;\n```\n\n----------------------------------------\n\nTITLE: Using onBeforeCreateCompiler Hook in Rsbuild Plugin (TypeScript)\nDESCRIPTION: Example of implementing the onBeforeCreateCompiler hook in a Rsbuild plugin to log bundler configurations before the compiler is created, allowing inspection or modification of configs.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/hooks.mdx#2025-04-21_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onBeforeCreateCompiler(({ bundlerConfigs }) => {\n      console.log('the bundler config is ', bundlerConfigs);\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Rspack Profiling in package.json\nDESCRIPTION: Package.json configuration for enabling Rspack build performance profiling using the RSPACK_PROFILE environment variable.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/debug/build-profiling.mdx#2025-04-21_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"dev:profile\": \"RSPACK_PROFILE=ALL rsbuild dev\",\n    \"build:profile\": \"RSPACK_PROFILE=ALL rsbuild build\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring CSS Emission for Node.js Bundles in Rsbuild\nDESCRIPTION: This example demonstrates how to configure Rsbuild to emit CSS files when building Node.js bundles by setting output.target to 'node' and output.emitCss to true.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/emit-css.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    target: 'node',\n    emitCss: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: URL Modification Configuration\nDESCRIPTION: Configuration example showing how to modify server URLs by adding a base path to all URLs.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/print-urls.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    printUrls({ urls }) {\n      return urls.map((url) => `${url}/base/`);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Default Browserslist Configuration in Rsbuild\nDESCRIPTION: The default Browserslist configuration used by Rsbuild to determine browser compatibility targets, which affects code compilation and polyfill injection.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/optimization/optimize-bundle.mdx#2025-04-21_snippet_4\n\nLANGUAGE: js\nCODE:\n```\n['chrome >= 87', 'edge >= 88', 'firefox >= 78', 'safari >= 14'];\n```\n\n----------------------------------------\n\nTITLE: Defining ProcessAssetsHandler Type in Rsbuild\nDESCRIPTION: This snippet defines the `ProcessAssetsHandler` type, which describes the callback function used to modify assets.  The context object includes properties like `assets`, `compiler`, `compilation`, `environment`, and `sources` for asset manipulation.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/core.mdx#2025-04-21_snippet_22\n\nLANGUAGE: typescript\nCODE:\n```\ntype ProcessAssetsHandler = (context: {\n  assets: Record<string, Rspack.sources.Source>;\n  compiler: Rspack.Compiler;\n  compilation: Rspack.Compilation;\n  environment: EnvironmentContext;\n  sources: RspackSources;\n}) => Promise<void> | void;\n```\n\n----------------------------------------\n\nTITLE: Configuring svgoConfig.datauri\nDESCRIPTION: This shows how to configure the `datauri` option within `svgoConfig`.  Here it is set to `base64`.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-svgr.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\npluginSvgr({\n  svgrOptions: {\n    svgoConfig: {\n      datauri: 'base64',\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Plugin Execution Order in JavaScript\nDESCRIPTION: Shows how to use the 'pre' and 'post' fields to control the execution order of plugins.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/core.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst pluginFoo = {\n  name: 'plugin-foo',\n};\n\nconst pluginBar = {\n  name: 'plugin-bar',\n  pre: ['plugin-foo'],\n};\n```\n\n----------------------------------------\n\nTITLE: PluginSvgrOptions Type Definition\nDESCRIPTION: This code defines the type `PluginSvgrOptions` for configuring the SVGR plugin. It includes options for specifying SVGR configurations and enabling mixed imports (both default and named imports).\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-svgr.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\ntype PluginSvgrOptions = {\n  /**\n   * Configure SVGR options.\n   */\n  svgrOptions?: import('@svgr/core').Config;\n  /**\n   * Whether to allow the use of default import and named import at the same time.\n   * @default false\n   */\n  mixedImport?: boolean;\n};\n```\n\n----------------------------------------\n\nTITLE: Using Modern String Method (JavaScript)\nDESCRIPTION: This snippet shows the usage of the replaceAll method, which is not available in older browsers. It demonstrates the need for polyfills for newer JavaScript APIs.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/browser-compatibility.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\n'abc'.replaceAll('abc', 'xyz');\n```\n\n----------------------------------------\n\nTITLE: Incorrect Babel Plugin Configuration Example (TS)\nDESCRIPTION: This TypeScript snippet shows an example of incorrect Babel plugin configuration, where a non-existent plugin is added.  This will cause the compilation to freeze. `pluginBabel` is assumed to be in scope and that a babel config and an addPlugins function is passed to the configuration function.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-babel.mdx#2025-04-21_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\n// wrong example\npluginBabel({\n  babelLoaderOptions: (config, { addPlugins }) => {\n    // The plugin has the wrong name or is not installed\n    addPlugins('babel-plugin-not-exists');\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Resulting Style Tag with Crossorigin Attribute\nDESCRIPTION: The HTML output for style tags after compilation with the crossorigin configuration. This demonstrates how the crossorigin attribute is applied to link tags that reference CSS assets from the configured asset prefix domain.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/crossorigin.mdx#2025-04-21_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<link\n  href=\"https://example.com/static/css/main.css\"\n  rel=\"stylesheet\"\n  crossorigin=\"anonymous\"\n/>\n```\n\n----------------------------------------\n\nTITLE: Setting ASCII Charset for Output Files in Rsbuild Configuration\nDESCRIPTION: This code snippet demonstrates how to configure Rsbuild to use ASCII encoding for output files. It sets the output.charset option to 'ascii' in the Rsbuild configuration file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/charset.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    charset: 'ascii',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring build entry points in Rsbuild\nDESCRIPTION: Use the source.entry option to set build entry points in Rsbuild configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/migration/webpack.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  source: {\n    entry: {\n      foo: './src/pages/foo/index.ts',\n      bar: './src/pages/bar/index.ts',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Running E2E Tests\nDESCRIPTION: Command to run end-to-end tests using playwright to verify functionality across the entire application.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/CONTRIBUTING.md#2025-04-21_snippet_12\n\nLANGUAGE: sh\nCODE:\n```\npnpm run e2e\n```\n\n----------------------------------------\n\nTITLE: Enabling CSS Injection in Rsbuild Configuration (TypeScript)\nDESCRIPTION: This snippet demonstrates how to enable CSS injection in Rsbuild by setting the output.injectStyles option to true. When enabled, CSS will be inlined in JS files and inserted into the page via <style> tags at runtime.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/inject-styles.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    injectStyles: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling HTML Plugin in JavaScript\nDESCRIPTION: An example of how to disable the built-in HTML plugin in Rsbuild, which prevents the generation of HTML files.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/html-plugin.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    htmlPlugin: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Creating Rsbuild Project with npm\nDESCRIPTION: This command uses npm create to initialize a new Rsbuild project with the latest version of create-rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/packages/create-rsbuild/README.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm create rsbuild@latest\n```\n\n----------------------------------------\n\nTITLE: Default sassLoaderOptions Configuration\nDESCRIPTION: This JavaScript snippet shows the default options passed to `sass-loader`. It includes the `api`, `implementation`, `sourceMap`, and `sassOptions` configurations.  The `implementation` defaults to 'sass-embedded' and source maps are enabled based on the Rsbuild configuration.  `sassOptions` configures `quietDeps` and `silenceDeprecations`.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/list/plugin-sass.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultOptions = {\n  api: 'modern-compiler',\n  implementation: require.resolve('sass-embedded'),\n  sourceMap: rsbuildConfig.output.sourceMap.css,\n  sassOptions: {\n    quietDeps: true,\n    silenceDeprecations: ['legacy-js-api', 'import'],\n  },\n};\n\n```\n\n----------------------------------------\n\nTITLE: Package.json Script Configuration\nDESCRIPTION: Example of configuring npm scripts in package.json to specify a custom Rsbuild config file path.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/configuration/rsbuild.mdx#2025-04-21_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"build\": \"rsbuild build --config rsbuild.prod.config.mjs\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Setting HTML Title as String in Rsbuild Configuration\nDESCRIPTION: This snippet demonstrates how to set a static HTML title using the html.title configuration in Rsbuild. It sets the title to 'Example'.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/title.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    title: 'Example',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting HTML Title as String in Rsbuild Configuration (JavaScript)\nDESCRIPTION: This snippet demonstrates how to set a static HTML title using a string value in the Rsbuild configuration. It directly assigns the title 'Example' to the html.title property.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/html/title.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    title: 'Example',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Incorrect Filename Hash Configuration Example\nDESCRIPTION: Shows an incorrect configuration where filename hashing is always enabled, which can break HMR functionality in development mode.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/faq/hmr.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    filename: {\n      css: '[name].[contenthash:8].css',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Complete Type Definition for Proxy Configuration\nDESCRIPTION: TypeScript type definition for the Rsbuild proxy configuration. It shows the underlying http-proxy-middleware options as well as Rsbuild-specific additions like bypass and context.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/server/proxy.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { Options as HttpProxyOptions } from 'http-proxy-middleware';\n\ntype Filter = string | string[] | ((pathname: string, req: Request) => boolean);\n\ntype ProxyOptions = HttpProxyOptions & {\n  bypass?: (\n    req: IncomingMessage,\n    res: ServerResponse,\n    proxyOptions: ProxyOptions,\n  ) => MaybePromise<string | undefined | null | boolean>;\n  context?: Filter;\n};\n\ntype ProxyConfig =\n  | ProxyOptions\n  | ProxyOptions[]\n  | Record<string, string>\n  | Record<string, ProxyOptions>;\n```\n\n----------------------------------------\n\nTITLE: Opening Specific Path\nDESCRIPTION: Configuration to open a specific path relative to server root.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/open.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    open: '/home',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining Alias Types in TypeScript\nDESCRIPTION: Type definition for the Alias configuration, which can be a record of string or false values, or a function.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/resolve/alias.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype Alias = Record<string, string | false | (string | false)[]> | Function;\n```\n\n----------------------------------------\n\nTITLE: Customizing Less Loader Options - Object Configuration\nDESCRIPTION: Configuring Less loader options using object-based approach with shallow merging\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/list/plugin-less.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\npluginLess({\n  lessLoaderOptions: {\n    lessOptions: {\n      javascriptEnabled: false,\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Injecting Tags in HTML Template (HTML)\nDESCRIPTION: This snippet demonstrates how to inject head and body tags in an HTML template using Rsbuild's htmlPlugin.tags variable.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/html-template.mdx#2025-04-21_snippet_10\n\nLANGUAGE: html\nCODE:\n```\n<html>\n  <head>\n    <%= htmlPlugin.tags.headTags %>\n  </head>\n  <body>\n    <div id=\"root\"></div>\n    <%= htmlPlugin.tags.bodyTags %>\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Registering the Preact Plugin in Rsbuild\nDESCRIPTION: Registers the Preact plugin within the Rsbuild configuration. This enables Preact support in the project, including JSX compilation and React aliasing. The pluginPreact() function is imported and added to the plugins array in rsbuild.config.ts.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/list/plugin-preact.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginPreact } from '@rsbuild/plugin-preact';\n\nexport default {\n  plugins: [pluginPreact()],\n};\n```\n\n----------------------------------------\n\nTITLE: Entry Description Object Configuration\nDESCRIPTION: Advanced entry configuration using Rspack's description object format with custom runtime settings.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/entry.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\\n  source: {\\n    entry: {\\n      foo: {\\n        import: './src/foo.js',\\n        runtime: 'foo',\\n      },\\n      bar: {\\n        import: './src/bar.js',\\n        runtime: 'bar',\\n      },\\n    },\\n  },\\n};\n```\n\n----------------------------------------\n\nTITLE: PostCSS Configuration\nDESCRIPTION: Configuration for postcss-flexbugs-fixes plugin in PostCSS config file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-4.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nmodule.exports = {\n  'postcss-flexbugs-fixes': {},\n};\n```\n\n----------------------------------------\n\nTITLE: Type Export Correction Example\nDESCRIPTION: Example showing incorrect and correct ways to re-export types in TypeScript.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/faq/exceptions.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\n// utils.ts\nexport type Foo = 'bar';\n\n// index.ts\nexport { Foo } from './utils'; // Incorrect\nexport type { Foo } from './utils'; // Correct\n```\n\n----------------------------------------\n\nTITLE: Migrating from output.targets to environments config\nDESCRIPTION: Example showing how to convert from the old output.targets format to the new environments configuration for multi-target builds.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/rsbuild-0-x.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  environments: {\n    web: {\n      output: {\n        target: 'web',\n      },\n    },\n    node: {\n      output: {\n        target: 'node',\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Running Filtered E2E Tests with Rspack\nDESCRIPTION: Commands to run specific E2E tests that match a keyword, either in file paths or test names, using Rspack.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/CONTRIBUTING.md#2025-04-21_snippet_13\n\nLANGUAGE: sh\nCODE:\n```\n# Only run test cases which contains `vue` keyword in file path with Rspack\npnpm e2e:rspack vue\n# Only run test cases which contains `vue` keyword in test name with Rspack\npnpm e2e:rspack -g vue\n```\n\n----------------------------------------\n\nTITLE: Configuring Entry Module Lazy Compilation\nDESCRIPTION: Configuration focusing on lazy compilation for entry modules only.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/dev/lazy-compilation.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    lazyCompilation: {\n      entries: true,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Node Addon Import Example\nDESCRIPTION: Example of importing Node.js addons in a JavaScript file when using node target.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/target.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nimport addon from './addon.node';\n\naddon.doSomething();\n```\n\n----------------------------------------\n\nTITLE: Defining OnAfterStartDevServer Hook Type in TypeScript\nDESCRIPTION: TypeScript definition for the OnAfterStartDevServer hook function that gets called after the dev server starts. The callback provides access to the port number, page routes information, and environment contexts.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/shared/onAfterStartDevServer.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype Routes = Array<{\n  entryName: string;\n  pathname: string;\n}>;\n\nfunction OnAfterStartDevServer(\n  callback: (params: {\n    port: number;\n    routes: Routes;\n    environments: Record<string, EnvironmentContext>;\n  }) => Promise<void> | void,\n): void;\n```\n\n----------------------------------------\n\nTITLE: Debug Mode Config File Generation Log in Bash\nDESCRIPTION: Log output indicating the generation of Rsbuild and Rspack configuration files in debug mode, showing their locations on disk.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/debug/debug-mode.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nconfig inspection completed, generated files:\n\n   - Rsbuild config: /Project/demo/dist/.rsbuild/rsbuild.config.mjs\n   - Rspack config (web): /Project/demo/dist/.rsbuild/rspack.config.web.mjs\n```\n\n----------------------------------------\n\nTITLE: Util Functions: addPresets (JS)\nDESCRIPTION: This JavaScript snippet showcases the `addPresets` utility function, used to add Babel preset configurations within the `babelLoaderOptions`. In this example, it adds the `@babel/preset-env` preset. `pluginBabel` is assumed to be in scope and that a babel config and an addPresets function is passed to the configuration function.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-babel.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\npluginBabel({\n  babelLoaderOptions: (config, { addPresets }) => {\n    addPresets(['@babel/preset-env']);\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Tailwind CSS with Multiple Content Paths\nDESCRIPTION: This code snippet demonstrates how to configure the `content` option in `tailwind.config.js` to include multiple paths for scanning Tailwind CSS class names, useful in monorepo setups.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/styling/tailwindcss-v3.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n/** @type {import('tailwindcss').Config} */\nmodule.exports = {\n  content: [\n    './src/**/*.{html,js,ts,jsx,tsx}',\n    '../../lib1/src/**/*.{js,ts,jsx,tsx}',\n  ],\n  theme: {\n    extend: {},\n  },\n  plugins: [],\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring SVGR Plugin for Mixed Import in Rsbuild\nDESCRIPTION: This snippet shows how to enable the mixed import option for the SVGR plugin in Rsbuild, allowing both URL and React component imports from a single SVG file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/community/releases/v0-5.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\npluginSvgr({\n  mixedImport: true,\n});\n```\n\n----------------------------------------\n\nTITLE: Setting Single Header Value in Rsbuild Server\nDESCRIPTION: Demonstrates how to set a single custom HTTP header in Rsbuild server configuration. Uses server.headers option to define a key-value pair where the key is the header name and value is a string.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/headers.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    headers: {\n      'X-Custom-Foo': 'bar',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Prefetch for PNG Files\nDESCRIPTION: Example configuration that includes all PNG files in the current page for prefetching using the prefetch.type and prefetch.include options.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/performance/prefetch.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  performance: {\n    prefetch: {\n      type: 'all-chunks',\n      include: [/\\.png$/],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Web App Manifest JSON\nDESCRIPTION: Example of the generated manifest.webmanifest JSON file containing app information and icons\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/app-icon.mdx#2025-04-21_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"name\": \"My Website\",\n  \"icons\": [\n    {\n      \"src\": \"/static/image/icon-192.png\",\n      \"sizes\": \"192x192\",\n      \"type\": \"image/png\"\n    },\n    {\n      \"src\": \"/static/image/icon-512.png\",\n      \"sizes\": \"512x512\",\n      \"type\": \"image/png\"\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Using URL Assets with import.meta.url (TSX)\nDESCRIPTION: Shows how to use `URL` and `import.meta.url` to reference static assets in JavaScript/TypeScript.  This provides a more explicit way to define asset URLs. This approach ensures that the asset is treated as a URL and processed accordingly by the build tool.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/static-assets.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nconst logo = new URL('./static/logo.png', import.meta.url).href;\n\nconsole.log(logo); // \"/static/logo.[hash].png\"\n\nexport default = () => <img src={logo} />;\n```\n\n----------------------------------------\n\nTITLE: Handling 'You may need additional loader' Error in Rsbuild\nDESCRIPTION: This snippet shows an example error message when Rsbuild encounters a file it cannot compile. It suggests checking for unsupported file formats and configuring appropriate Rspack loaders.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/faq/exceptions.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nModule parse failed: Unexpected token\nFile was processed with these loaders:\n * some-loader/index.js\n\nYou may need an additional loader to handle the result of these loaders.\n```\n\n----------------------------------------\n\nTITLE: Installing Project Dependencies with pnpm\nDESCRIPTION: Command to install all project dependencies using pnpm, which will also create symlinks between packages and build all packages.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/CONTRIBUTING.md#2025-04-21_snippet_3\n\nLANGUAGE: sh\nCODE:\n```\npnpm install\n```\n\n----------------------------------------\n\nTITLE: Defining InlineScripts Type in TypeScript\nDESCRIPTION: TypeScript type definition for the inlineScripts configuration option. It can be a boolean, a test function, or an object with enable and test properties.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/inline-scripts.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype InlineScriptsTest =\n  | RegExp\n  | ((params: { size: number; name: string }) => boolean);\n\ntype InlineScripts =\n  | boolean\n  | InlineScriptsTest\n  | {\n      enable?: boolean | 'auto';\n      test: InlineScriptsTest;\n    };\n```\n\n----------------------------------------\n\nTITLE: Disabling CORS in Rsbuild Config\nDESCRIPTION: This example shows how to disable CORS in the Rsbuild configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/cors.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    cors: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining Rsbuild Plugin Types in TypeScript\nDESCRIPTION: TypeScript type definition for Rsbuild plugins, including support for falsy values and promises.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/plugins.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype Falsy = false | null | undefined;\n\ntype RsbuildPlugins = (\n  | RsbuildPlugin\n  | Falsy\n  | Promise<RsbuildPlugin | Falsy | RsbuildPlugins>\n  | RsbuildPlugins\n)[];\n```\n\n----------------------------------------\n\nTITLE: Configuring Rsbuild Home Page Metadata in YAML\nDESCRIPTION: This YAML configuration sets up the metadata for the Rsbuild project's home page. It defines the page type, appends a title suffix, and specifies RSS feed links for releases.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/index.mdx#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\npageType: home\ntitleSuffix: ' - Rspack based build tool'\n\nlink-rss:\n  - releases-rss\n  - releases-atom\n```\n\n----------------------------------------\n\nTITLE: Using modifyHTMLTags in a Rsbuild Plugin\nDESCRIPTION: Example of creating a plugin that uses the modifyHTMLTags hook to add custom script tags to the HTML head and body sections.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/hooks.mdx#2025-04-21_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.modifyHTMLTags(({ headTags, bodyTags }) => {\n      headTags.push({\n        tag: 'script',\n        attrs: { src: 'https://example.com/foo.js' },\n      });\n      bodyTags.push({\n        tag: 'script',\n        children: 'console.log(\"hello world!\");',\n      });\n\n      return { headTags, bodyTags };\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Setting Favicon in Rsbuild\nDESCRIPTION: Shows how to set a favicon using the html.favicon configuration in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/html-template.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  html: {\n    favicon: './src/assets/icon.png',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling copyOnBuild in PublicDir Configuration\nDESCRIPTION: Example of disabling the copyOnBuild option, which prevents files from being copied from the public directory to the dist directory during production builds.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/public-dir.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    publicDir: {\n      copyOnBuild: false,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Customizing JavaScript Minification Options in Rsbuild\nDESCRIPTION: This configuration example demonstrates how to customize JavaScript minification options in Rsbuild 0.5, specifically disabling name mangling in this case.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/community/releases/v0-5.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    minify: {\n      jsOptions: {\n        minimizerOptions: {\n          mangle: false,\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Correcting Type Re-exports in TypeScript with Rsbuild\nDESCRIPTION: This snippet demonstrates the correct way to re-export types in TypeScript to avoid compilation errors in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/faq/exceptions.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\n// utils.ts\nexport type Foo = 'bar';\n\n// index.ts\nexport { Foo } from './utils'; // Incorrect\nexport type { Foo } from './utils'; // Correct\n```\n\n----------------------------------------\n\nTITLE: Default Alias Configuration in Rsbuild\nDESCRIPTION: The default alias configuration in Rsbuild, which includes an alias for @swc/helpers.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/resolve/alias.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst defaultAlias = {\n  '@swc/helpers': path.dirname(require.resolve('@swc/helpers/package.json')),\n};\n```\n\n----------------------------------------\n\nTITLE: Default PostCSS Configuration in Rsbuild\nDESCRIPTION: The default configuration object for PostCSS in Rsbuild. It disables the PostCSS config file and sets the sourceMap option based on the Rsbuild configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/postcss.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultOptions = {\n  postcssOptions: {\n    config: false,\n    sourceMap: rsbuildConfig.output.sourceMap.css,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Creating Plugins with RsbuildPlugin Type\nDESCRIPTION: Shows how to import and use the RsbuildPlugin type to define custom Rsbuild plugins.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/types.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { RsbuildPlugin } from '@rsbuild/core';\n\nconst myPlugin: RsbuildPlugin = {\n  name: 'my-plugin',\n  setup() {},\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Nested HTML Output Structure in JavaScript\nDESCRIPTION: Demonstrates how to set the html.outputStructure option to 'nested' in the Rsbuild configuration file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/html/output-structure.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    outputStructure: 'nested',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Module Federation in TypeScript\nDESCRIPTION: Example of using the new built-in moduleFederation configuration option in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-4.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  moduleFederation: {\n    options: {\n      // ModuleFederationPluginOptions\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Checking Git Email Configuration\nDESCRIPTION: Command to verify if git client has email configured, which is required for contributing to the project.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/CONTRIBUTING.md#2025-04-21_snippet_4\n\nLANGUAGE: sh\nCODE:\n```\ngit config --list | grep email\n```\n\n----------------------------------------\n\nTITLE: Combined Target and Callback Configuration\nDESCRIPTION: Example of combining target URLs with before callback in server.open configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/server/open.mdx#2025-04-21_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    open: {\n      target: ['/', '/about'],\n      before: async () => {\n        await doSomeThing();\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Generated HTML with Prefetch Tags\nDESCRIPTION: Shows how the generated HTML will include prefetch link tags for dynamically imported modules when prefetch is enabled.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/performance/prefetch.mdx#2025-04-21_snippet_3\n\nLANGUAGE: html\nCODE:\n```\n<html>\n  <head>\n    <title>Rsbuild App</title>\n    <script defer src=\"/static/js/index.js\"></script>\n    <!-- 生成的 prefetch 标签 -->\n    <link href=\"/static/js/async/src_bar_js.js\" rel=\"prefetch\" />\n    <link href=\"/static/js/async/src_foo_js.js\" rel=\"prefetch\" />\n  </head>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Resulting HTML Title Tag\nDESCRIPTION: This HTML snippet shows the resulting title tag that will be generated in the HTML output when the title is set to 'Example'.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/title.mdx#2025-04-21_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<title>Example</title>\n```\n\n----------------------------------------\n\nTITLE: Displaying Nested HTML Output Structure in Bash\nDESCRIPTION: Shows the resulting 'nested' directory structure for HTML output files after configuring html.outputStructure to 'nested'.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/html/output-structure.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n/dist\n └── [name]\n     └── index.html\n```\n\n----------------------------------------\n\nTITLE: Variable Replacement Example\nDESCRIPTION: Demonstrates how expressions are replaced during compilation. Shows a simple example of how TWO gets replaced with its defined value.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/define.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst foo = TWO;\n\n// ⬇️ Turn into being...\nconst foo = 1 + 1;\n```\n\n----------------------------------------\n\nTITLE: Disabling Fast Refresh (TS)\nDESCRIPTION: Disables React Fast Refresh in development mode. By default, Fast Refresh is enabled, and this option allows it to be turned off.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-react.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\npluginReact({\n  fastRefresh: false,\n});\n```\n\n----------------------------------------\n\nTITLE: MPA Routes Configuration Example\nDESCRIPTION: Configuration example showing how to handle routes in a Multi-Page Application setup.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/print-urls.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    printUrls({ routes }) {\n      /**\n       * [\n       *   { entryName: 'index', pathname: '/' },\n       *   { entryName: 'detail', pathname: '/detail' }\n       * ]\n       */\n      console.log(routes);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Check Node.js version\nDESCRIPTION: This command checks the currently installed Node.js version in the environment. It is a prerequisite to ensure that the Node.js version meets Rsbuild's minimum requirements (>= version 16).\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/start/quick-start.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n\"node -v\"\n```\n\n----------------------------------------\n\nTITLE: Handling After Production Server Start Hook\nDESCRIPTION: Shows usage of onAfterStartProdServer hook to access port and routes information after production server has started.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/hooks.mdx#2025-04-21_snippet_29\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onAfterStartProdServer(({ port, routes }) => {\n      console.log('this port is: ', port);\n      console.log('this routes is: ', routes);\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Migrating from disableMinimize to minify Option\nDESCRIPTION: Shows how to migrate from the deprecated output.disableMinimize option to the new output.minify option for disabling minification in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-5.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    disableMinimize: true, // [!code --]\n    minify: false, // [!code ++]\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Global Git Email\nDESCRIPTION: Command to set the email address in git global configuration for contributing to GitHub projects.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/CONTRIBUTING.md#2025-04-21_snippet_5\n\nLANGUAGE: sh\nCODE:\n```\ngit config --global user.email \"SOME_EMAIL@example.com\"\n```\n\n----------------------------------------\n\nTITLE: Prefer-Alias Strategy Configuration\nDESCRIPTION: Example showing how to set aliasStrategy to prefer-alias in Rsbuild configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/resolve/alias-strategy.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  resolve: {\n    aliasStrategy: 'prefer-alias',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Resulting Style Link Tag with Crossorigin Attribute in HTML\nDESCRIPTION: This HTML snippet shows the resulting <link> tag for stylesheets after building with the crossorigin attribute set to 'anonymous' and an asset prefix configured.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/html/crossorigin.mdx#2025-04-21_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<link\n  href=\"https://example.com/static/css/main.css\"\n  rel=\"stylesheet\"\n  crossorigin=\"anonymous\"\n/>\n```\n\n----------------------------------------\n\nTITLE: Configuring Browserslist in Rsbuild\nDESCRIPTION: This code snippet shows how to configure Browserslist in Rsbuild to target specific browser versions, which can help reduce compilation overhead for syntax and polyfills.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/optimization/optimize-bundle.mdx#2025-04-21_snippet_4\n\nLANGUAGE: js\nCODE:\n```\n['Chrome >= 100'];\n```\n\n----------------------------------------\n\nTITLE: Installing Node.js LTS with nvm\nDESCRIPTION: Commands to install and switch to the Node.js LTS version using Node Version Manager (nvm).\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/CONTRIBUTING.md#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n# Install Node.js LTS\nnvm install --lts\n# Switch to Node.js LTS\nnvm use --lts\n```\n\n----------------------------------------\n\nTITLE: Adding React Plugin in Rsbuild Configuration\nDESCRIPTION: Manually add React plugin to Rsbuild configuration for React projects\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/modern-builder.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginReact } from '@rsbuild/plugin-react';\n\nexport default {\n  plugins: [pluginReact()],\n};\n```\n\n----------------------------------------\n\nTITLE: Defining DataUriLimit Type in TypeScript\nDESCRIPTION: TypeScript type definition for the dataUriLimit configuration option, showing it can be either a number or an object with specific asset type thresholds.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/data-uri-limit.mdx#2025-04-21_snippet_0\n\nLANGUAGE: ts\nCODE:\n```\ntype DataUriLimit =\n  | number\n  | {\n      svg?: number;\n      font?: number;\n      image?: number;\n      media?: number;\n      assets?: number;\n    };\n```\n\n----------------------------------------\n\nTITLE: Basic History API Fallback Configuration in TypeScript\nDESCRIPTION: Simple example showing how to enable history API fallback in Rsbuild configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/history-api-fallback.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    historyApiFallback: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Async Module Lazy Compilation\nDESCRIPTION: Configuration specifically for enabling lazy compilation of dynamically imported modules.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/dev/lazy-compilation.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    lazyCompilation: {\n      imports: true,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Nested Directory Structure Example in Rsbuild\nDESCRIPTION: Shows the resulting nested directory structure where HTML files are placed in subdirectories named after the entry point.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/output-structure.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n/dist\n └── [name]\n     └── index.html\n```\n\n----------------------------------------\n\nTITLE: Customizing Total Size Output in Rsbuild\nDESCRIPTION: This configuration example demonstrates how to disable the total size output while still printing individual file sizes in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/print-file-size.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  performance: {\n    printFileSize: {\n      total: false,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Port Placeholder Configuration\nDESCRIPTION: Configuration example showing how to use the port placeholder to handle dynamic port allocation in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/client.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    client: {\n      port: '<port>',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: HTML Structure for SSR Application\nDESCRIPTION: Basic HTML structure with a placeholder for server-rendered content in an SSR application.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/ssr.mdx#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<div id=\"root\"><!--app-content--></div>\n```\n\n----------------------------------------\n\nTITLE: Configuring ESLint in package.json\nDESCRIPTION: Add ESLint configuration and lint script to package.json for code quality checks\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/cra.mdx#2025-04-21_snippet_8\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"lint\": \"eslint src\"\n  },\n  \"eslintConfig\": {\n    \"extends\": [\"react-app\", \"react-app/jest\"]\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Optimizing Tailwind CSS Configuration for Performance - JavaScript\nDESCRIPTION: This code snippet illustrates an example of a problematic Tailwind CSS configuration that unintentionally scans the node_modules directory, potentially leading to performance issues in builds.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/styling/tailwindcss-v3.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\n/** @type {import('tailwindcss').Config} */\nmodule.exports = {\n  content: [\n    './src/**/*.{html,js,ts,jsx,tsx}',\n    // 扫描大量文件，导致性能下降\n    './node_modules/**/*.js',\n  ],\n};\n```\n\n----------------------------------------\n\nTITLE: Creating Rsbuild Configuration File in TypeScript\nDESCRIPTION: Defines a basic Rsbuild configuration using TypeScript. The purpose is to set up Rsbuild with no plugins initially. Dependencies include having '@rsbuild/core' installed. The config file should be named 'rsbuild.config.ts' and placed in the same directory as 'package.json'. No outputs are directly involved, but configuration is crucial for correct Rsbuild behavior.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/vite.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\n\nexport default defineConfig({\n  plugins: [],\n});\n```\n\n----------------------------------------\n\nTITLE: Enabling writeToDisk in Rsbuild Configuration (TypeScript)\nDESCRIPTION: Sets the dev.writeToDisk option to true to write all build output to disk during development mode. This is useful for inspecting build content or configuring proxy rules for static assets.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/write-to-disk.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    writeToDisk: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Repository-specific Git Email\nDESCRIPTION: Command to set the email address in git configuration for the current repository only.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/CONTRIBUTING.md#2025-04-21_snippet_6\n\nLANGUAGE: sh\nCODE:\n```\ngit config user.email \"SOME_EMAIL@example.com\"\n```\n\n----------------------------------------\n\nTITLE: Configuring Targets in Rsbuild 0.2\nDESCRIPTION: The 'target' option has been moved from createRsbuild to the Rsbuild config file. This allows users to configure targets directly in the configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-2.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst rsbuild = await createRsbuild({\n  target: ['web', 'node'],\n});\n```\n\nLANGUAGE: javascript\nCODE:\n```\n// rsbuild.config.ts\nexport default {\n  output: {\n    targets: ['web', 'node'],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using loadConfig in Rsbuild 0.4 JavaScript API\nDESCRIPTION: Demonstrates the updated usage of the loadConfig method in Rsbuild 0.4, which now returns both the configuration content and the file path.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/community/releases/v0-4.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nimport { loadConfig } from '@rsbuild/core';\n\n// 0.3\nconst config = await loadConfig();\n\n// 0.4\nconst { content, filePath } = await loadConfig();\n```\n\n----------------------------------------\n\nTITLE: Configuring Rsbuild Monorepo Workspace and Packages in YAML\nDESCRIPTION: This YAML configuration defines the workspace root, package locations, and package manager settings for a Rsbuild monorepo project. It specifies the root directory, package locations, and npmClient as pnpm.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/e2e/cases/server/watch-files/other/other.txt#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nroot: true\n\nworkspace:\n  root: .\n  packages:\n    - 'packages/*'\n    - 'scripts'\n\npackageManager: pnpm@8.9.0\n\nnpmClient: pnpm\n\n```\n\n----------------------------------------\n\nTITLE: Type Declarations for URL Queries in TypeScript\nDESCRIPTION: This TypeScript snippet provides two methods for handling missing type declarations when using URL queries such as `?inline` or `?url`, resolving TypeScript errors by setting global types through `@rsbuild/core` or manually adding declarations.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/optimization/inline-assets.mdx#2025-04-21_snippet_8\n\nLANGUAGE: TypeScript\nCODE:\n```\n/// <reference types=\"@rsbuild/core/types\" />\n```\n\nLANGUAGE: TypeScript\nCODE:\n```\ndeclare module '*?url' {\n  const content: string;\n  export default content;\n}\ndeclare module '*?inline' {\n  const content: string;\n  export default content;\n}\n```\n\n----------------------------------------\n\nTITLE: Svelte Preprocess Options Interface (TS)\nDESCRIPTION: This code snippet presents the interface for `AutoPreprocessOptions`, which are passed to `svelte-preprocess`. It defines the structure of options related to global styles, replacements, and preprocessors for different languages like TypeScript, SCSS, Sass, Less, Stylus, Babel, PostCSS, CoffeeScript, and Pug. It allows for extensive customization during the preprocessing stage.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-svelte.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\ninterface AutoPreprocessOptions {\n  globalStyle: { ... },\n  replace: { ... },\n  typescript: { ... },\n  scss: { ... },\n  sass: { ... },\n  less: { ... },\n  stylus: { ... },\n  babel: { ... },\n  postcss: { ... },\n  coffeescript: { ... },\n  pug: { ... },\n}\n```\n\n----------------------------------------\n\nTITLE: Registering Stylus Plugin in Rsbuild (TypeScript)\nDESCRIPTION: This snippet demonstrates how to register the Stylus plugin in the Rsbuild configuration file. The `pluginStylus` is imported from `@rsbuild/plugin-stylus` and added to the plugins array. This setup allows the use of Stylus as a CSS preprocessor within the project.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-stylus.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginStylus } from '@rsbuild/plugin-stylus';\n\nexport default {\n  plugins: [pluginStylus()],\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Default Filenames for Development and Production in JavaScript\nDESCRIPTION: Default filename configurations for development and production environments, including patterns for HTML, JavaScript, CSS, and various asset types.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/filename.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n// Development mode\nconst devDefaultFilename = {\n  html: '[name].html',\n  js: '[name].js',\n  css: '[name].css',\n  svg: '[name].[contenthash:8].svg',\n  font: '[name].[contenthash:8][ext]',\n  image: '[name].[contenthash:8][ext]',\n  media: '[name].[contenthash:8][ext]',\n  assets: '[name].[contenthash:8][ext]',\n};\n\n// Production mode\nconst prodDefaultFilename = {\n  html: '[name].html',\n  js: output.target === 'node' ? '[name].js' : '[name].[contenthash:8].js',\n  css: '[name].[contenthash:8].css',\n  svg: '[name].[contenthash:8].svg',\n  font: '[name].[contenthash:8][ext]',\n  image: '[name].[contenthash:8][ext]',\n  media: '[name].[contenthash:8][ext]',\n  assets: '[name].[contenthash:8][ext]',\n};\n```\n\n----------------------------------------\n\nTITLE: HTML Output with Inlined Styles\nDESCRIPTION: Example of how the inlined CSS appears in the HTML output.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/inline-styles.mdx#2025-04-21_snippet_4\n\nLANGUAGE: html\nCODE:\n```\n<html>\n  <head>\n    <style>\n      /* content of dist/static/css/style.css */\n    </style>\n  </head>\n  <body></body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Opening Default Preview Page\nDESCRIPTION: Configuration to open the default preview page when server starts.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/open.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    open: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Creating Rsbuild Configuration File\nDESCRIPTION: This code snippet shows how to create a basic Rsbuild configuration file (rsbuild.config.ts) with an empty plugins array. This serves as the starting point for configuring Rsbuild with various plugins and settings.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/webpack.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\n\nexport default defineConfig({\n  plugins: [],\n});\n```\n\n----------------------------------------\n\nTITLE: Migrating source.entry function to environments config\nDESCRIPTION: Example showing how to convert target-specific entries from the old function-based format to the new environments configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/rsbuild-0-x.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  environments: {\n    web: {\n      source: {\n        entry: {\n          index: './src/index.client.js',\n        },\n      },\n      output: {\n        target: 'web',\n      },\n    },\n    node: {\n      source: {\n        entry: {\n          index: './src/index.server.js',\n        },\n      },\n      output: {\n        target: 'node',\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Migrating conditional output.emitAssets to environments config\nDESCRIPTION: Example showing how to convert the function-based emitAssets option to target-specific configurations in the environments object.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/rsbuild-0-x.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  environments: {\n    web: {\n      output: {\n        target: 'web',\n      },\n    },\n    node: {\n      output: {\n        target: 'node',\n        emitAssets: false,\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Replacing Default PostCSS Configuration in Rsbuild\nDESCRIPTION: Example of completely replacing the default PostCSS configuration in Rsbuild by returning a new configuration object.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/postcss.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    postcss: () => {\n      return {\n        postcssOptions: {\n          plugins: [require('postcss-px-to-viewport')],\n        },\n      };\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling Asset Manifest in Rsbuild Configuration\nDESCRIPTION: Basic example of enabling the asset manifest by setting output.manifest to true in the Rsbuild configuration file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/manifest.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    manifest: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring 2022-03 Decorators in Rsbuild\nDESCRIPTION: Example configuration for using the Stage 3 decorator proposal (2022-03 version) in Rsbuild, compatible with TypeScript 5.0.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/decorators.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  source: {\n    decorators: {\n      version: '2022-03',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Example HTML output with dev.assetPrefix set to true\nDESCRIPTION: Shows the resulting script tag in HTML when dev.assetPrefix is set to true, using the full server URL.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/asset-prefix.mdx#2025-04-21_snippet_5\n\nLANGUAGE: html\nCODE:\n```\n<script defer src=\"http://localhost:3000/static/js/main.js\"></script>\n```\n\n----------------------------------------\n\nTITLE: Custom Bundle Analyzer Configuration\nDESCRIPTION: Example of overriding default bundle analyzer settings with custom configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/bundle-analyze.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  performance: {\n    bundleAnalyze: process.env.BUNDLE_ANALYZE\n      ? {\n          analyzerMode: 'server',\n          openAnalyzer: true,\n        }\n      : {},\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Adding SVGR Plugin in Rsbuild Configuration\nDESCRIPTION: Register SVGR plugin for handling SVG imports in React projects\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/modern-builder.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginSvgr } from '@rsbuild/plugin-svgr';\n\nexport default {\n  plugins: [pluginSvgr()],\n};\n```\n\n----------------------------------------\n\nTITLE: Manual Preload Configuration - TypeScript\nDESCRIPTION: Example of manually configuring preload tags through html.tags configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/preload.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  html: {\n    tags: [\n      {\n        tag: 'link',\n        attrs: {\n          rel: 'preload',\n          as: 'script',\n          href: 'https://example.com/some-script.js',\n        },\n      },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Package.json Configuration for Bundle Analysis\nDESCRIPTION: Shows how to configure the build script to enable bundle analysis using environment variables.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/bundle-analyze.mdx#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"build:analyze\": \"BUNDLE_ANALYZE=true rsbuild build\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Write to Disk in Rsbuild 0.2\nDESCRIPTION: The 'dev.writeToDisk' option now defaults to false. Users can manually enable it if needed.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-2.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  dev: {\n    writeToDisk: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Running Rsbuild in Debug Mode - Bash\nDESCRIPTION: This bash snippet illustrates how to start Rsbuild in debug mode, which outputs the generated Rspack configuration files to the 'dist' directory. It requires setting the 'DEBUG' environment variable.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/faq/features.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n➜ DEBUG=rsbuild pnpm dev\n```\n\n----------------------------------------\n\nTITLE: Checking Node.js Version with bash\nDESCRIPTION: Command to verify the current Node.js version installed in your environment.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/CONTRIBUTING.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnode -v\n```\n\n----------------------------------------\n\nTITLE: Less v4 Division Syntax (Less)\nDESCRIPTION: Illustrates the division syntax in Less v4, where division requires escaping or parentheses to be performed. This file shows how division operations are interpreted differently in Less v4 compared to v3.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-less.mdx#2025-04-21_snippet_8\n\nLANGUAGE: less\nCODE:\n```\n// Less v4\n.math {\n  width: 2px / 2; // 2px / 2\n  width: 2px ./ 2; // 1px\n  width: (2px / 2); // 1px\n}\n```\n\n----------------------------------------\n\nTITLE: Example of Files Structure in generate Function\nDESCRIPTION: An example showing the structure of the files parameter passed to the manifest.generate function.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/manifest.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nconst files = [\n  {\n    name: 'index.js',\n    path: '/static/js/index.[hash].js',\n    isAsset: false,\n    isChunk: true,\n    isInitial: true,\n    isModuleAsset: false,\n    chunk: {\n      // Chunk info...\n    },\n  },\n  {\n    name: 'index.html',\n    path: '/index.html',\n    isAsset: true,\n    isChunk: false,\n    isInitial: false,\n    isModuleAsset: false,\n  },\n];\n```\n\n----------------------------------------\n\nTITLE: Configuring Arco Design Import Transformation in Rsbuild 0.4\nDESCRIPTION: Illustrates how to manually add the import transformation configuration for Arco Design v3 or v4 in Rsbuild 0.4, which is no longer included by default in the React plugin.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/community/releases/v0-4.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  source: {\n    transformImport: [\n      {\n        libraryName: '@arco-design/web-react',\n        libraryDirectory: 'es',\n        camelToDashComponentName: false,\n        style: 'css',\n      },\n      {\n        libraryName: '@arco-design/web-react/icon',\n        libraryDirectory: 'react-icon',\n        camelToDashComponentName: false,\n      },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Classic JSX Runtime via Comments\nDESCRIPTION: This code snippet shows how to configure the classic JSX runtime directly within a TSX file using comments. The `/** @jsx Preact.h */` and `/** @jsxFrag Preact.Fragment */` comments instruct the JSX transformer to use `Preact.h` as the function for transforming JSX elements and `Preact.Fragment` for fragments. The App component renders a simple \"Hello World\" message using Preact's JSX functions.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/framework/react.mdx#2025-04-21_snippet_15\n\nLANGUAGE: tsx\nCODE:\n```\n/** @jsx Preact.h */\n/** @jsxFrag Preact.Fragment */\n\nconst App = () => {\n  return <div>Hello World</div>;\n};\n```\n\n----------------------------------------\n\nTITLE: Migrating output.distPath.server to environments config\nDESCRIPTION: Example showing how to move server-specific distPath configuration to the node environment configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/rsbuild-0-x.mdx#2025-04-21_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  environments: {\n    web: {\n      output: {\n        target: 'web',\n      },\n    },\n    node: {\n      output: {\n        target: 'node',\n        distPath: {\n          root: 'dist/server',\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Example of Legal Comment in JavaScript\nDESCRIPTION: This snippet demonstrates a typical legal comment found in React's production build. It includes license information, copyright notice, and licensing terms.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/legal-comments.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n/**\n * @license React\n * react.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n```\n\n----------------------------------------\n\nTITLE: Configuring Data URI Limit in Rsbuild\nDESCRIPTION: Shows how to modify the automatic inlining threshold for different resource types using the output.dataUriLimit configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/optimization/inline-assets.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    dataUriLimit: {\n      image: 5000,\n      media: 0,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Importing Rsbuild Core (ESM and CommonJS)\nDESCRIPTION: These snippets demonstrate how to import the Rsbuild core functionality using both ES Modules and CommonJS syntax.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/community/releases/v0-7.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\n// ES Modules\nimport { createRsbuild } from '@rsbuild/core';\n\n// CommonJS\nconst { createRsbuild } = require('@rsbuild/core');\n```\n\n----------------------------------------\n\nTITLE: Importing Rsbuild in ES Modules Format\nDESCRIPTION: Demonstrates how to import the createRsbuild function using ES Modules syntax. This is the recommended import format for Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/start/index.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createRsbuild } from '@rsbuild/core';\n```\n\n----------------------------------------\n\nTITLE: Incorrect Component Definition for Preact Fast Refresh\nDESCRIPTION: Example of a component definition that won't work properly with Preact Fast Refresh because it uses an anonymous function export instead of a named component.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/framework/preact.mdx#2025-04-21_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\nexport default () => {\n  return <p>Want to refresh</p>;\n};\n```\n\n----------------------------------------\n\nTITLE: Checking PostCSS Dependencies\nDESCRIPTION: Example output of npm ls postcss command showing unmet peer dependencies for css-loader and css-minimizer-webpack-plugin.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/faq/exceptions.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm ls postcss\n\n ├─┬ css-loader@6.3.0\n │ └── UNMET PEER DEPENDENCY postcss@8.3.9\n ├─┬ css-minimizer-webpack-plugin@3.0.0\n │ └── UNMET PEER DEPENDENCY postcss@8.3.9\n```\n\n----------------------------------------\n\nTITLE: Environment-based Configuration\nDESCRIPTION: Shows how to apply different configurations based on build environment.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/tools/rspack.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: (config, { env }) => {\n      if (env === 'development') {\n        config.devtool = 'cheap-module-eval-source-map';\n      }\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using CSS Modules with TypeScript in Rsbuild\nDESCRIPTION: This TypeScript example demonstrates how to import and use CSS Modules in a TypeScript file with Rsbuild 0.7. It shows the import syntax and usage of a CSS class.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-7.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport styles from './index.module.css';\n\nconsole.log(styles.pageHeader);\n```\n\n----------------------------------------\n\nTITLE: Importing Assets in CSS\nDESCRIPTION: Demonstrates how to reference static assets in CSS files using relative paths or aliases. It also shows how to handle absolute paths in CSS and configure CSS loader to skip resolving certain paths.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/static-assets.mdx#2025-04-21_snippet_2\n\nLANGUAGE: css\nCODE:\n```\n.logo {\n  background-image: url('../static/logo.png');\n}\n```\n\nLANGUAGE: css\nCODE:\n```\n@font-face {\n  font-family: DingTalk;\n  src: url('/image/font/foo.ttf');\n}\n```\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    cssLoader: {\n      url: {\n        filter: (url) => {\n          if (/\\/image\\/font/.test(url)) {\n            return false;\n          }\n          return true;\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Browser Arguments Configuration\nDESCRIPTION: Example of passing browser arguments using environment variables.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/server/open.mdx#2025-04-21_snippet_8\n\nLANGUAGE: bash\nCODE:\n```\nBROWSER=chrome BROWSER_ARGS=\"--incognito\" npx rsbuild dev\n```\n\n----------------------------------------\n\nTITLE: Object-based CSS Loader Configuration\nDESCRIPTION: Demonstrates how to configure css-loader using an object that gets deep merged with default options\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/css-loader.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    cssLoader: {\n      modules: {\n        exportOnlyLocals: true,\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Migrating source.alias with target to environments config\nDESCRIPTION: Example showing how to convert target-specific aliases from the old function-based format to the new environments configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/rsbuild-0-x.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  environments: {\n    web: {\n      source: {\n        alias: {\n          '@common': './src/web/common',\n        },\n      },\n      output: {\n        target: 'web',\n      },\n    },\n    node: {\n      source: {\n        alias: {\n          '@common': './src/node/common',\n        },\n      },\n      output: {\n        target: 'node',\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Opening Specific Path Configuration\nDESCRIPTION: Example of opening a specific path using server.open configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/server/open.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    open: '/home',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Rsbuild to Downgrade Third-Party Dependencies (JavaScript)\nDESCRIPTION: This snippet shows how to configure Rsbuild to include and compile a specific third-party dependency (query-string) that may cause compatibility issues. It uses the source.include config option.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/browser-compatibility.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nimport path from 'node:path';\n\nexport default {\n  source: {\n    include: [/node_modules[\\/]query-string[\\/]/],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining Default CORS Options in TypeScript\nDESCRIPTION: This snippet defines the default CORS options, allowing localhost, 127.0.0.1, and [::1] origins.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/cors.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst defaultCorsOptions = {\n  // Default allowed:\n  // - localhost\n  // - 127.0.0.1\n  // - [::1]\n  origin:\n    /^https?:\\/\\/(?:(?:[^:]+\\.)?localhost|127\\.0\\.0\\.1|\\[::1\\])(?::\\d+)?$/,\n};\n```\n\n----------------------------------------\n\nTITLE: Defining HTTPS server types in TypeScript\nDESCRIPTION: Type definition for the server.https configuration option in Rsbuild. It accepts server options from Node.js https or http2 modules.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/server/https.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { ServerOptions } from 'node:https';\nimport type { SecureServerSessionOptions } from 'node:http2';\n\ntype Https = ServerOptions | SecureServerSessionOptions;\n```\n\n----------------------------------------\n\nTITLE: Default Bundle Analyzer Configuration in Rsbuild\nDESCRIPTION: Shows the default configuration for webpack-bundle-analyzer when enabled in Rsbuild. The configuration sets the analyzer mode to static, disables automatic opening of the report, and generates a report filename based on the environment name.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/performance/bundle-analyze.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultConfig = {\n  analyzerMode: 'static',\n  openAnalyzer: false,\n  // 通过 environment 名称区分，如 `web`、`node` 等\n  reportFilename: `report-${environment}.html`,\n};\n```\n\n----------------------------------------\n\nTITLE: Using CSS Modules in Vue SFC\nDESCRIPTION: This example demonstrates how to use CSS Modules within a Vue Single File Component, which is now supported in Rsbuild 0.7.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/community/releases/v0-7.mdx#2025-04-21_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<template>\n  <p :class=\"$style.red\">Red</p>\n</template>\n\n<style module>\n  .red {\n    color: red;\n  }\n</style>\n```\n\n----------------------------------------\n\nTITLE: Sample Taze Update Output\nDESCRIPTION: Example output showing version updates for Rsbuild-related packages, including core and plugins, displaying current and target versions.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/upgrade-rsbuild.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nrsbuild - 3 patch\n\n  @rsbuild/core               dev  ~2mo  ^0.6.0  →  ^0.6.15\n  @rsbuild/plugin-react       dev  ~2mo  ^0.6.0  →  ^0.6.15\n  @rsbuild/plugin-type-check  dev  ~2mo  ^0.6.0  →  ^0.6.15\n\nℹ changes written to package.json, run npm i to install updates.\n```\n\n----------------------------------------\n\nTITLE: Using onAfterEnvironmentCompile Hook in Rsbuild Plugin (TypeScript)\nDESCRIPTION: Example of implementing the onAfterEnvironmentCompile hook in a Rsbuild plugin to access compilation statistics after an environment has been compiled, with information about whether it's the first compilation.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/hooks.mdx#2025-04-21_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onAfterEnvironmentCompile(({ isFirstCompile, stats }) => {\n      console.log(stats?.toJson(), isFirstCompile);\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Crossorigin Attribute in Rsbuild JavaScript Config\nDESCRIPTION: This snippet demonstrates how to set the crossorigin attribute to 'anonymous' and configure an asset prefix in the Rsbuild configuration file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/html/crossorigin.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    crossorigin: 'anonymous',\n  },\n  output: {\n    assetPrefix: 'https://example.com',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: SVG Type Declaration for Default Export Type\nDESCRIPTION: TypeScript type declarations when svgrOptions.exportType is set to 'default', defining SVG modules as React components.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-svgr.mdx#2025-04-21_snippet_24\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare module '*.svg' {\n  const ReactComponent: React.FunctionComponent<React.SVGProps<SVGSVGElement>>;\n  export default ReactComponent;\n}\ndeclare module '*.svg?react' {\n  const ReactComponent: React.FunctionComponent<React.SVGProps<SVGSVGElement>>;\n  export default ReactComponent;\n}\n```\n\n----------------------------------------\n\nTITLE: Starting Development Server for Rsbuild Project in Bash\nDESCRIPTION: Command to start the development server for a Rsbuild project using pnpm, which enables live reloading and development features.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/packages/create-rsbuild/template-common/README.md#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\npnpm dev\n```\n\n----------------------------------------\n\nTITLE: Type Definition for CleanDistPath in TypeScript\nDESCRIPTION: Type definition showing the possible values for the cleanDistPath configuration option.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/clean-dist-path.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype CleanDistPath = boolean | 'auto' | CleanDistPathObject;\n```\n\n----------------------------------------\n\nTITLE: Debugging Export Not Found Errors in TypeScript with Rsbuild\nDESCRIPTION: This snippet shows an example of incorrect exports in TypeScript files that can lead to 'export 'foo' (imported as 'foo') was not found in './utils'' errors in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/faq/exceptions.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n// utils.ts\nexport const bar = 'bar';\n\n// index.ts\nimport { foo } from './utils';\n```\n\n----------------------------------------\n\nTITLE: Defining CSS Modules Auto Configuration in Rsbuild\nDESCRIPTION: Configures when CSS Modules should be automatically enabled based on filenames using a custom function that checks if the filename includes '.module.' or is in a 'shared/' directory.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/css-modules.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    cssModules: {\n      auto: (resource) => {\n        return resource.includes('.module.') || resource.includes('shared/');\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing a Simple Rsbuild Plugin\nDESCRIPTION: Shows how to implement a basic Rsbuild plugin, including defining its name, specifying pre-dependencies, and registering a lifecycle hook to execute after the build process. This example demonstrates the fundamental structure of an Rsbuild plugin.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/core.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { RsbuildPlugin } from '@rsbuild/core';\n\nexport default (): RsbuildPlugin => ({\n  name: 'plugin-foo',\n\n  pre: ['plugin-bar'],\n\n  setup(api) {\n    api.onAfterBuild(() => {\n      console.log('after build!');\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Importing TOML Plugin in Rsbuild Configuration\nDESCRIPTION: Code snippet demonstrating how to import and use the TOML plugin in Rsbuild configuration. The TOML plugin is now a separate package that needs to be explicitly imported and added to the plugins array.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-3.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// rsbuild.config.ts\nimport { pluginToml } from '@rsbuild/plugin-toml';\n\nexport default {\n  plugins: [pluginToml()],\n};\n```\n\n----------------------------------------\n\nTITLE: Major Version Update\nDESCRIPTION: Command to upgrade Rsbuild packages to their latest major versions.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/upgrade-rsbuild.mdx#2025-04-21_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nnpx taze major --include /rsbuild/ -w\n```\n\n----------------------------------------\n\nTITLE: Defining processAssets Function Type in Rsbuild\nDESCRIPTION: This snippet shows the type definition for the `processAssets` function. It takes a `ProcessAssetsDescriptor` and a `ProcessAssetsHandler` as arguments, allowing plugins to modify assets before they are emitted, similar to Rspack's `compilation.hooks.processAssets` hook.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/core.mdx#2025-04-21_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\nfunction processAssets(\n  descriptor: ProcessAssetsDescriptor,\n  handler: ProcessAssetsHandler,\n): void;\n```\n\n----------------------------------------\n\nTITLE: Disabling File Size Output in Rsbuild Configuration\nDESCRIPTION: This TypeScript snippet shows how to disable the file size output in Rsbuild by setting the 'printFileSize' option to false in the performance configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/print-file-size.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  performance: {\n    printFileSize: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Development Mode WriteToDisk Configuration\nDESCRIPTION: Configuration to enable writing output files to disk in development mode instead of keeping them in memory.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/output-files.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    writeToDisk: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Rsbuild Less Plugin in TypeScript\nDESCRIPTION: This TypeScript configuration snippet demonstrates how to import and use the @rsbuild/plugin-less plugin in a Rsbuild configuration file, required for compiling .less files in Rsbuild 0.7.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-7.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginLess } from '@rsbuild/plugin-less';\n\nexport default {\n  plugins: [pluginLess()],\n};\n```\n\n----------------------------------------\n\nTITLE: String-based Meta Configuration\nDESCRIPTION: Example of setting meta tags using string values, demonstrating description meta tag configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/meta.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    meta: {\n      description: 'a description of the page',\n    },\n  },\n};\n```\n\nLANGUAGE: html\nCODE:\n```\n<meta name=\"description\" content=\"a description of the page\" />\n```\n\n----------------------------------------\n\nTITLE: Debugging with Rsbuild: Production Mode (Bash)\nDESCRIPTION: This bash command demonstrates how to enable debug mode for Rsbuild in production mode. The `DEBUG=rsbuild` environment variable enables detailed logging, which can be useful for understanding the generated production configuration and diagnosing build problems.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-babel.mdx#2025-04-21_snippet_12\n\nLANGUAGE: bash\nCODE:\n```\n# Debug production mode\nDEBUG=rsbuild pnpm build\n```\n\n----------------------------------------\n\nTITLE: Polyfill for String.prototype.replaceAll (JavaScript)\nDESCRIPTION: This snippet provides a polyfill implementation for the replaceAll method on String.prototype. It checks if the method doesn't exist before adding it, ensuring compatibility with older browsers.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/browser-compatibility.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nif (!String.prototype.replaceAll) {\n  String.prototype.replaceAll = function (str, newStr) {\n    // If a regex pattern\n    if (\n      Object.prototype.toString.call(str).toLowerCase() === '[object regexp]'\n    ) {\n      return this.replace(str, newStr);\n    }\n    // If a string\n    return this.replace(new RegExp(str, 'g'), newStr);\n  };\n}\n```\n\n----------------------------------------\n\nTITLE: Using Object Type Configuration for PostCSS in Rsbuild\nDESCRIPTION: Example of using an object type configuration for PostCSS in Rsbuild, which will be merged with the default configuration using Object.assign.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/postcss.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    postcss: {\n      // As `Object.assign` is used, the default postcssOptions will be overwritten.\n      postcssOptions: {\n        plugins: [require('postcss-px-to-viewport')],\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: CSS Modules Auto Configuration Type Definition\nDESCRIPTION: Type definition for the auto configuration option that determines CSS Modules activation based on file names\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/css-modules.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype Auto =\n  | boolean\n  | RegExp\n  | ((resourcePath: string, resourceQuery: string, resourceFragment: string,) => boolean);\n```\n\n----------------------------------------\n\nTITLE: Using NormalizedEnvironmentConfig Type\nDESCRIPTION: Shows how to import and use the NormalizedEnvironmentConfig type for environment-specific configurations.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/types.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { NormalizedEnvironmentConfig } from '@rsbuild/core';\n\nconst config: NormalizedEnvironmentConfig = api.getNormalizedConfig({\n  environment,\n});\n```\n\n----------------------------------------\n\nTITLE: Importing TypeScript Modules with .js Extension\nDESCRIPTION: Demonstrates how Rsbuild supports importing TypeScript modules using .js file extensions through Rspack's extensionAlias configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/typescript.mdx#2025-04-21_snippet_3\n\nLANGUAGE: ts\nCODE:\n```\n// 实际引用的模块可能是 `./some-module.ts` 或 `./some-module.tsx`\nimport { someFn } from './some-module.js';\n```\n\n----------------------------------------\n\nTITLE: Example of Legal Comment in React\nDESCRIPTION: This snippet shows an example of a legal comment from React's production build, which includes license and copyright information.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/legal-comments.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n/**\n * @license React\n * react.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n```\n\n----------------------------------------\n\nTITLE: Implementing Integration Tests with jest.mock() in JavaScript\nDESCRIPTION: Example showing how to use jest.mock() to mock modules in integration tests, with proper patterns for cleaning up mocks and temp directories.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/e2e/cases/server/watch-files/assets/example.txt#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n/**\n * Don't call `jest.mock()` directly in test cases. Prefer to use patterns below.\n */\nbeforeAll(() => {\n  // Add mock data before all test cases\n});\n\nafterAll(() => {\n  // To clean all mock data after all test cases\n});\n\nbeforeEach(() => {\n  // Add mock data before each test case\n});\n\nafterEach(() => {\n  // Clean all mock data after each test cases\n  // For instance, clean temporary directory\n});\n```\n\n----------------------------------------\n\nTITLE: Setting dev.assetPrefix to true in Rsbuild\nDESCRIPTION: Configuration example that sets dev.assetPrefix to true, which makes the URL prefix use http://localhost:<port>/.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/asset-prefix.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  dev: {\n    assetPrefix: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Multiple CORS Origins in Rsbuild Config\nDESCRIPTION: This example shows how to specify multiple allowed origins using an array in the Rsbuild configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/cors.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    cors: {\n      origin: [\n        /^https?:\\/\\/(?:(?:[^:]+\\.)?localhost|127\\.0\\.0\\.1|\\[::1\\])(?::\\d+)?$/,\n        'https://example.com',\n      ],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Less v3 Division Syntax (Less)\nDESCRIPTION: Illustrates the division syntax in Less v3, where division is automatically performed. The file provides different examples of calculations.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-less.mdx#2025-04-21_snippet_7\n\nLANGUAGE: less\nCODE:\n```\n// Less v3\n.math {\n  width: 2px / 2; // 1px\n  width: 2px ./ 2; // 1px\n  width: (2px / 2); // 1px\n}\n```\n\n----------------------------------------\n\nTITLE: HTML Structure with Tag Insertion Positions\nDESCRIPTION: Demonstration of how tags are positioned in the HTML document based on the head and append configuration options.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/tags.mdx#2025-04-21_snippet_4\n\nLANGUAGE: html\nCODE:\n```\n<html>\n  <head>\n    <!-- tags with `{ head: true, append: false }` here. -->\n    <!-- some other headTags... -->\n    <!-- tags with `{ head: true, append: true }` here. -->\n  </head>\n  <body>\n    <!-- tags with `{ head: false, append: false }` here. -->\n    <!-- some other bodyTags... -->\n    <!-- tags with `{ head: false, append: true }` here. -->\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Result of Merged SVGO Config\nDESCRIPTION: This demonstrates the result of merging configurations. The configurations are combined with the defaults, creating an effective configuration object.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-svgr.mdx#2025-04-21_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nconst mergedSvgoConfig = {\n  plugins: [\n    {\n      name: 'preset-default',\n      params: {\n        overrides: {\n          removeViewBox: true,\n          cleanupIds: false,\n        },\n      },\n    },\n    'prefixIds',\n  ],\n};\n```\n\n----------------------------------------\n\nTITLE: Selective File Writing with Custom Function in Rsbuild (TypeScript)\nDESCRIPTION: Configures dev.writeToDisk with a function that selectively determines which files to write to disk. This example excludes hot-update temporary files while writing all other files to disk.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/write-to-disk.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    writeToDisk: (file) => !file.includes('.hot-update.'),\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Basic Proxy Configuration in Rsbuild\nDESCRIPTION: Simple example of configuring a proxy to redirect requests from '/api' path to a local server running on port 3000. This maintains the original path when forwarding the request.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/proxy.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  server: {\n    proxy: {\n      // http://localhost:3000/api -> http://localhost:3000/api\n      // http://localhost:3000/api/foo -> http://localhost:3000/api/foo\n      '/api': 'http://localhost:3000',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Importing and Using Stylus Styles in JavaScript (JavaScript)\nDESCRIPTION: This JavaScript snippet imports Stylus files into a JavaScript module. It demonstrates the use of CSS modules by importing `title.module.styl` as a module and logging the class name `style.title` to the console.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-stylus.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nimport './normalize.styl';\nimport style from './title.module.styl';\n\nconsole.log(style.title);\n```\n\n----------------------------------------\n\nTITLE: Adjusting Rspack Configuration Based on Target in Rsbuild\nDESCRIPTION: This example illustrates how to modify the Rspack configuration based on the build target environment (web, node, or web-worker).\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/rspack.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: (config, { target }) => {\n      if (target === 'node') {\n        // ...\n      }\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Server Restart on Configuration File Changes in Rsbuild\nDESCRIPTION: Configuration example showing how to restart the dev server when configuration files change. This setup monitors TypeScript files in the config directory and restarts the server when they're modified.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/watch-files.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { commonConfig } from './config/common';\n\nexport default {\n  ...commonConfig,\n  dev: {\n    watchFiles: {\n      type: 'reload-server',\n      paths: ['./config/*.ts'],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Installing PostCSS Flexbugs Fixes\nDESCRIPTION: Command to install the postcss-flexbugs-fixes package as a dev dependency.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-4.mdx#2025-04-21_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nnpm add postcss-flexbugs-fixes -D\n```\n\n----------------------------------------\n\nTITLE: Using InspectConfigOptions Type\nDESCRIPTION: Shows how to import the InspectConfigOptions type, which defines the parameter type for the rsbuild.inspectConfig method.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/types.mdx#2025-04-21_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { InspectConfigOptions } from '@rsbuild/core';\n```\n\n----------------------------------------\n\nTITLE: Removing react-app-polyfill Import Statements\nDESCRIPTION: Remove deprecated polyfill imports from the project's entry file and replace with Rsbuild's built-in polyfill configuration\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/cra.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport 'react-app-polyfill/ie11'; // [!code --]\nimport 'react-app-polyfill/stable'; // [!code --]\n```\n\n----------------------------------------\n\nTITLE: Object-based SWC Configuration\nDESCRIPTION: Example of configuring SWC using an object that will be merged with built-in swc-loader options. Shows how to override externalHelpers setting.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/swc.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    swc: {\n      jsc: {\n        externalHelpers: false,\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring the include option for Sass files\nDESCRIPTION: This example demonstrates how to use the `include` option to specify which `.scss` files should be processed by `sass-loader`. The value is a regular expression that matches the filenames to include. In this case, only files ending with `.custom.scss` will be processed.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/list/plugin-sass.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\npluginSass({\n  include: /\\.custom\\.scss$/,\n});\n\n```\n\n----------------------------------------\n\nTITLE: Disabling Specific CLI Shortcuts in Rsbuild\nDESCRIPTION: This JavaScript code snippet demonstrates how to disable specific CLI shortcuts in Rsbuild. It uses the 'custom' function to filter out the shortcut with the key 'o' from the shortcuts array.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/cli-shortcuts.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  dev: {\n    cliShortcuts: {\n      custom: (shortcuts) => {\n        return shortcuts.filter((shortcut) => shortcut.key !== 'o');\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining ModifyHTMLTags Type with TypeScript\nDESCRIPTION: Type definition for the modifyHTMLTags hook, which allows modification of HTML tags injected into the HTML template. It provides context objects with compiler information and environment details.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/hooks.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\ntype HtmlBasicTag = {\n  // 标签名\n  tag: string;\n  // 标签的属性\n  attrs?: Record<string, string | boolean | null | undefined>;\n  // 标签的 innerHTML\n  children?: string;\n};\n\ntype HTMLTags = {\n  // 插入到 <head> 的标签组\n  headTags: HtmlBasicTag[];\n  // 插入到 <body> 的标签组\n  bodyTags: HtmlBasicTag[];\n};\n\ntype Context = {\n  /**\n   * Rspack 的 Compiler 对象\n   */\n  compiler: Rspack.Compiler;\n  /**\n   * Rspack 的 Compilation 对象\n   */\n  compilation: Rspack.Compilation;\n  /**\n   * 静态资源的 URL 前缀\n   * @example 'https://example.com/'\n   */\n  assetPrefix: string;\n  /**\n   * HTML 文件的名称，相对于 dist 目录\n   * @example 'index.html'\n   */\n  filename: string;\n  /**\n   * 当前构建的 environment 上下文\n   */\n  environment: EnvironmentContext;\n};\n\nfunction ModifyHTMLTags(\n  callback: (tags: HTMLTags, context: Context) => MaybePromise<HTMLTags>,\n): void;\n```\n\n----------------------------------------\n\nTITLE: Demonstrating Syntax Error in Older Engines (JavaScript)\nDESCRIPTION: This snippet shows code that would cause a syntax error in older JavaScript engines due to the use of optional chaining. It demonstrates why syntax transpilation is necessary for browser compatibility.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/browser-compatibility.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst foo = {};\nfoo?.bar();\n```\n\n----------------------------------------\n\nTITLE: Adding TypeScript Declarations for Environment Variables in Rsbuild\nDESCRIPTION: TypeScript declaration file example showing how to define types for custom environment variables to avoid type errors when accessing them in code.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/env-vars.mdx#2025-04-21_snippet_21\n\nLANGUAGE: ts\nCODE:\n```\ndeclare const PUBLIC_FOO: string;\n```\n\n----------------------------------------\n\nTITLE: Updating HTML template variable syntax for Rsbuild\nDESCRIPTION: Shows how to replace CRA's %PUBLIC_URL% variable syntax with Rsbuild's template parameter syntax for asset paths in HTML files.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/migration/cra.mdx#2025-04-21_snippet_3\n\nLANGUAGE: html\nCODE:\n```\n<!-- [!code --] -->\n<link rel=\"icon\" href=\"%PUBLIC_URL%/favicon.ico\" />\n<!-- [!code ++] -->\n<link rel=\"icon\" href=\"<%= assetPrefix %>/favicon.ico\" />\n```\n\n----------------------------------------\n\nTITLE: Locked Version Update\nDESCRIPTION: Command to upgrade locked versions of Rsbuild packages using the -l flag.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/upgrade-rsbuild.mdx#2025-04-21_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nnpx taze --include /rsbuild/ -w -l\n```\n\n----------------------------------------\n\nTITLE: Defining RsbuildPlugin Type\nDESCRIPTION: Defines the structure of an Rsbuild plugin, including its name, pre/post dependencies, removal instructions, and the setup function where plugin logic resides. The setup function receives an RsbuildPluginAPI object.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/core.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype RsbuildPlugin = {\n  name: string;\n  pre?: string[];\n  post?: string[];\n  remove?: string[];\n  setup: (api: RsbuildPluginAPI) => Promise<void> | void;\n};\n```\n\n----------------------------------------\n\nTITLE: Importing Assets with URL in JavaScript\nDESCRIPTION: Shows how to use JavaScript's native URL and import.meta.url to import static assets. This method can also be used to reference JS, TS, or CSS files as URL assets without processing.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/static-assets.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst logo = new URL('./static/logo.png', import.meta.url).href;\n\nconsole.log(logo); // \"/static/logo.[hash].png\"\n\nexport default = () => <img src={logo} />;\n```\n\n----------------------------------------\n\nTITLE: Defining OnDevCompileDone Hook in TypeScript\nDESCRIPTION: This snippet defines the OnDevCompileDone function in a TypeScript environment. It accepts a callback function as an argument, which receives parameters including a boolean to check if it is the first compile, build statistics, and environment contexts. This function is intended to be used after each development mode build and can perform asynchronous operations. There are no specific dependencies; however, access to the Stats, MultiStats, and EnvironmentContext types is required.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/shared/onDevCompileDone.mdx#2025-04-21_snippet_0\n\nLANGUAGE: TypeScript\nCODE:\n```\nfunction OnDevCompileDone(\\n  callback: (params: {\\n    isFirstCompile: boolean;\\n    stats: Stats | MultiStats;\\n    environments: Record<string, EnvironmentContext>;\\n  }) => Promise<void> | void,\\n): void;\n```\n\n----------------------------------------\n\nTITLE: Function-based Meta Configuration\nDESCRIPTION: Examples of using functions to configure meta tags, including direct modification and MPA scenarios.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/meta.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    meta({ value }) {\n      value.description = 'this is my page';\n      return value;\n    },\n  },\n};\n```\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    meta({ entryName }) {\n      switch (entryName) {\n        case 'foo':\n          return {\n            description: 'this is foo page',\n          };\n        case 'bar':\n          return {\n            description: 'this is bar page',\n          };\n        default:\n          return {\n            description: 'this is other pages',\n          };\n      }\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using onBeforeCreateCompiler Hook\nDESCRIPTION: This hook is triggered before the Rspack compiler is created. It provides access to the bundler configurations, allowing you to modify the Rspack configurations before they're used to create the compiler.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_23\n\nLANGUAGE: typescript\nCODE:\n```\nrsbuild.onBeforeCreateCompiler(({ bundlerConfigs }) => {\n  console.log('the Rspack config is ', bundlerConfigs);\n});\n```\n\n----------------------------------------\n\nTITLE: HtmlTagHandler Type Definition in TypeScript\nDESCRIPTION: Type definitions for the tag handler function and its context, allowing dynamic modification of HTML tags during the build process.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/tags.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\ntype HtmlTagContext = {\n  hash: string;\n  entryName: string;\n  outputName: string;\n  publicPath: string;\n};\n\ntype HtmlTagHandler = (\n  tags: HtmlTag[],\n  context: HtmlTagContext,\n) => HtmlTag[] | void;\n```\n\n----------------------------------------\n\nTITLE: Removing Default Meta Tags\nDESCRIPTION: Example of removing a default meta tag (viewport) by setting its value to false in the configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/html/meta.mdx#2025-04-21_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  html: {\n    meta: {\n      viewport: false,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring React Refresh Options (JS)\nDESCRIPTION: Configures options for the `@rspack/plugin-react-refresh` plugin. The provided value is shallowly merged with the default options. The example shows how to exclude specific modules from React Refresh.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-react.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\npluginReact({\n  reactRefreshOptions: {\n    exclude: [/some-module-to-exclude/, /[\\\\/]node_modules[\\\\/]/],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Package JSON Script Configuration for Custom Build\nDESCRIPTION: Shows how to specify a custom Rsbuild configuration file using the --config option in package.json scripts\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/configuration/rsbuild.mdx#2025-04-21_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"build\": \"rsbuild build --config rsbuild.prod.config.mjs\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Using CSS Modules in TypeScript\nDESCRIPTION: This example shows how to import and use CSS Modules in a TypeScript file, demonstrating the new type generation feature.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/community/releases/v0-7.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport styles from './index.module.css';\n\nconsole.log(styles.pageHeader);\n```\n\n----------------------------------------\n\nTITLE: Customizing Generated Class Names for CSS Modules - TypeScript\nDESCRIPTION: This snippet demonstrates how to customize the naming convention of generated class names by using the localIdentName property in the CSS Modules configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/styling/css-modules.mdx#2025-04-21_snippet_4\n\nLANGUAGE: ts\nCODE:\n```\nexport default {\n  output: {\n    cssModules: {\n      localIdentName: '[hash:base64:4]',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining InspectConfig Types and Options in TypeScript\nDESCRIPTION: This snippet defines the types and options for the inspectConfig method, which allows inspecting and debugging Rsbuild's internal configuration. It includes options for specifying the mode, verbosity, output path, and whether to write to disk.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/instance.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\ntype InspectConfigOptions = {\n  /**\n   * 检查指定 mode 下的配置\n   * 可选值：'development' 或 'production'\n   * @default 'development'\n   */\n  mode?: RsbuildMode;\n  /**\n   * 启用详细模式，显示配置中函数的完整内容\n   * @default false\n   */\n  verbose?: boolean;\n  /**\n   * 指定检查结果的输出路径\n   * @default 'output.distPath.root'\n   */\n  outputPath?: string;\n  /**\n   * 是否将检查结果写入磁盘\n   * @default false\n   */\n  writeToDisk?: boolean;\n};\n\nasync function InspectConfig(options?: InspectConfigOptions): Promise<{\n  rsbuildConfig: string;\n  bundlerConfigs: string[];\n  environmentConfigs: string[];\n  origin: {\n    rsbuildConfig: RsbuildConfig;\n    environmentConfigs: Record<string, EnvironmentConfig>;\n    bundlerConfigs: BundlerConfigs[];\n  };\n}>;\n```\n\n----------------------------------------\n\nTITLE: Enabling removeMomentLocale in Rsbuild Configuration\nDESCRIPTION: This snippet shows how to enable the removeMomentLocale option in the Rsbuild configuration file. When set to true, it automatically excludes all moment.js locales to reduce bundle size.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/remove-moment-locale.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  performance: {\n    removeMomentLocale: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Opening Multiple Pages Configuration\nDESCRIPTION: Example of opening multiple pages using server.open configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/server/open.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    open: ['/', '/about'],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using getRsbuildConfig with Different Parameters\nDESCRIPTION: Examples of calling getRsbuildConfig with different parameters to retrieve original, current, or normalized Rsbuild configuration objects. Includes comments explaining the differences between these config types.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/shared/getRsbuildConfig.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n// Get the original Rsbuild config defined by the user.\ngetRsbuildConfig('original');\n\n// Get the current Rsbuild config.\n// The content of this config will change at different execution stages of Rsbuild.\n// For example, the content of the current Rsbuild config will be modified after running the `modifyRsbuildConfig` hook.\ngetRsbuildConfig('current');\n\n// Get the normalized Rsbuild config.\n// This method must be called after the `modifyRsbuildConfig` hook has been executed.\n// It is equivalent to the `getNormalizedConfig` method.\ngetRsbuildConfig('normalized');\n```\n\n----------------------------------------\n\nTITLE: Excluding SVG files from transformation\nDESCRIPTION: This configures the SVGR plugin to exclude specific SVG files from being transformed.  The `exclude` option accepts a regular expression to match the files that should be excluded.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-svgr.mdx#2025-04-21_snippet_18\n\nLANGUAGE: typescript\nCODE:\n```\npluginSvgr({\n  svgrOptions: {\n    exportType: 'default',\n  },\n  exclude: /b\\.svg/,\n});\n```\n\n----------------------------------------\n\nTITLE: Correct Filename Hash Configuration for Development\nDESCRIPTION: Demonstrates the correct way to configure filename hashing conditionally based on the environment to ensure proper HMR functionality.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/faq/hmr.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    filename: {\n      css:\n        process.env.NODE_ENV === 'production'\n          ? '[name].[contenthash:8].css'\n          : '[name].css',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Sample Debug Log Output in Bash\nDESCRIPTION: Example of the log output when running Rsbuild in debug mode. It shows internal operations and version information.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/debug/debug-mode.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n$ DEBUG=rsbuild pnpm dev\n\n  ...\n  rsbuild init plugins\n  rsbuild init plugins done\n  rsbuild use Rspack v1.0.0\n  ...\n```\n\n----------------------------------------\n\nTITLE: Configuring inlineStyles with Object Syntax and Auto Enable\nDESCRIPTION: TypeScript configuration example showing how to use the object syntax with 'auto' enable option that activates inlining only in production mode.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/inline-styles.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    inlineStyles: {\n      enable: 'auto',\n      test: /[\\\\/]main\\.\\w+\\.css$/,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Including Specific Files as Static Assets in Rsbuild\nDESCRIPTION: This example demonstrates how to include a specific file as a static asset in Rsbuild using the path.resolve function to provide an absolute file path.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/assets-include.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport path from 'node:path';\n\nexport default defineConfig({\n  source: {\n    assetsInclude: path.resolve(__dirname, 'src/assets/foo.json5'),\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: HTML Plugin Disabled Configuration\nDESCRIPTION: Configuration example showing how to print URLs when HTML plugin is disabled.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/print-urls.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    htmlPlugin: false,\n  },\n  server: {\n    printUrls: ({ port }) => [`http://localhost:${port}`],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining BuildCacheConfig Type in TypeScript\nDESCRIPTION: TypeScript type definition for the BuildCacheConfig option, which can be a boolean or an object with specific properties.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/build-cache.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype BuildCacheConfig =\n  | boolean\n  | {\n      cacheDirectory?: string;\n      cacheDigest?: Array<string | undefined>;\n      buildDependencies?: string[];\n    };\n```\n\n----------------------------------------\n\nTITLE: Importing Overview Component in Markdown\nDESCRIPTION: This snippet imports and renders an Overview component, likely used to display the configuration options in a structured format.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/index.mdx#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\nimport Overview from '@components/Overview';\n\n<Overview />\n```\n\n----------------------------------------\n\nTITLE: Custom ChunkSplit override with CSS bundling in Rsbuild\nDESCRIPTION: This code snippet demonstrates how to override the Rspack `splitChunks` configuration to bundle all CSS files into a single `styles.css` file.  It uses the `cacheGroups` option to define a custom rule for CSS files, setting the `test` property to match CSS, LESS, SASS, SCSS, and Stylus files.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/optimization/code-splitting.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  performance: {\n    chunkSplit: {\n      override: {\n        cacheGroups: {\n          styles: {\n            name: 'styles',\n            minSize: 0,\n            chunks: 'all',\n            test: /\\.(?:css|less|sass|scss|styl)$/,\n            priority: 99,\n          },\n        },\n      },\n    },\n  },\n};\n\n```\n\n----------------------------------------\n\nTITLE: Transform Descriptor Example\nDESCRIPTION: Illustrates how to use the `test` property in the transform descriptor to match modules based on their file extension. Only `.pug` files will be transformed by this configuration.  This shows how to configure a transform to only apply to specific files.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/core.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\napi.transform({ test: /\\.pug$/ }, ({ code }) => {\n  // ...\n});\n```\n\n----------------------------------------\n\nTITLE: Example Usage of Customizing vueLoaderOptions\nDESCRIPTION: This code snippet illustrates how to pass custom vueLoaderOptions to the plugin, specifically turning off hot reload during compilation. It shows the practical implementation of customizing plugin behavior.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-vue.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\n```ts\npluginVue({\n  vueLoaderOptions: {\n    hotReload: false,\n  },\n});\n```\n```\n\n----------------------------------------\n\nTITLE: Importing Individual Normalized Config Type Definitions\nDESCRIPTION: Demonstrates how to import type definitions for individual normalized configuration fields in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/types.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport type {\n  NormalizedDevConfig,\n  NormalizedHtmlConfig,\n  NormalizedToolsConfig,\n  NormalizedSourceConfig,\n  NormalizedServerConfig,\n  NormalizedOutputConfig,\n  NormalizedSecurityConfig,\n  NormalizedPerformanceConfig,\n  NormalizedModuleFederationConfig,\n} from '@rsbuild/core';\n```\n\n----------------------------------------\n\nTITLE: NODE_OPTIONS Memory Configuration\nDESCRIPTION: Package.json configuration example showing how to increase Node.js memory limit for build process.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/faq/exceptions.mdx#2025-04-21_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"build\": \"NODE_OPTIONS=--max_old_space_size=16384 rsbuild build\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom Thresholds for Different Asset Types\nDESCRIPTION: Example showing how to set different thresholds for specific asset types, with images at 5KiB and media assets disabled.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/data-uri-limit.mdx#2025-04-21_snippet_5\n\nLANGUAGE: js\nCODE:\n```\nexport default {\n  output: {\n    dataUriLimit: {\n      image: 5 * 1024,\n      media: 0,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring IPv6 All Interfaces in Rsbuild\nDESCRIPTION: Configuration example for setting the Rsbuild server to listen on all IPv6 network interfaces using '::'.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/host.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    host: '::',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring resolve.alias with Function\nDESCRIPTION: Example of configuring path aliases using the resolve.alias function syntax in Rsbuild\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/alias.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  resolve: {\n    alias: (alias) => {\n      alias['@common'] = './src/common';\n      return alias;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Extending Static Asset Types with tools.rspack (TS)\nDESCRIPTION: Shows how to extend static asset handling by directly configuring Rspack using `tools.rspack`. This approach allows adding custom rules for handling specific file types, such as PDF files. In this example, PDF files are treated as asset resources, which means they will be emitted as separate files with their URLs exposed.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/static-assets.mdx#2025-04-21_snippet_19\n\nLANGUAGE: ts\nCODE:\n```\nexport default {\n  tools: {\n    rspack(config, { addRules }) {\n      addRules([\n        {\n          test: /\\.pdf$/,\n          // 将资源转换为单独的文件，并且导出产物地址\n          type: 'asset/resource',\n        },\n      ]);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining OnAfterBuild Callback Function in TypeScript\nDESCRIPTION: Type definition for the OnAfterBuild callback function that executes after a production build. It provides access to build statistics via the stats parameter, and flags to determine if it's the first compilation in watch mode.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/shared/onAfterBuild.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction OnAfterBuild(\n  callback: (params: {\n    isFirstCompile: boolean;\n    isWatch: boolean;\n    stats?: Stats | MultiStats;\n    environments: Record<string, EnvironmentContext>;\n  }) => Promise<void> | void,\n): void;\n```\n\n----------------------------------------\n\nTITLE: Defining SRI Options Type in TypeScript\nDESCRIPTION: TypeScript type definition for SRI configuration options, including enable flag and hash algorithm selection.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/security/sri.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype SriOptions = {\n  enable?: 'auto' | boolean;\n  algorithm?: 'sha256' | 'sha384' | 'sha512';\n};\n```\n\n----------------------------------------\n\nTITLE: Example of Code Requiring Map Polyfill\nDESCRIPTION: An example JavaScript code that uses the Map object, which might require polyfilling for older browsers.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/browser-compatibility.mdx#2025-04-21_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nvar b = new Map();\n```\n\n----------------------------------------\n\nTITLE: Aliasing NPM Packages in Rsbuild\nDESCRIPTION: Example of using alias to resolve an npm package to a specific directory, useful for managing multiple versions of a package.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/resolve/alias.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport path from 'node:path';\n\nexport default {\n  resolve: {\n    alias: {\n      react: path.resolve(__dirname, './node_modules/react'),\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Registering Vue 2 Plugin with Rsbuild Configuration\nDESCRIPTION: This snippet shows how to add the Vue 2 plugin in a Rsbuild configuration file. It ensures that the necessary setup is done for Vue Single File Components to work with Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/framework/vue.mdx#2025-04-21_snippet_1\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginVue2 } from '@rsbuild/plugin-vue2';\n\nexport default defineConfig({\n  plugins: [pluginVue2()],\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Emotion with Rsbuild\nDESCRIPTION: This code configures Rsbuild to use Emotion for CSS-in-JS. It uses the `pluginReact` to configure `swcReactOptions` and set the `importSource` to `@emotion/react`. It also configures the SWC compiler to use the `@swc/plugin-emotion` plugin, enabling Emotion's features within the Rsbuild environment. This setup allows for efficient and optimized Emotion compilation.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/framework/react.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginReact } from '@rsbuild/plugin-react';\n\nexport default defineConfig({\n  plugins: [\n    pluginReact({\n      swcReactOptions: {\n        importSource: '@emotion/react',\n      },\n    }),\n  ],\n  tools: {\n    swc: {\n      jsc: {\n        experimental: {\n          plugins: [['@swc/plugin-emotion', {}]],\n        },\n      },\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring JSX Import Source with Rsbuild\nDESCRIPTION: This code configures the JSX import source using the `jsxImportSource` option within the `swcReactOptions` of the `@rsbuild/plugin-react`. This setting is used when the JSX runtime is set to `automatic`. It specifies that JSX transformations should import React-related functions from `@emotion/react` instead of the default `react` package, allowing usage of libraries like Emotion.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/framework/react.mdx#2025-04-21_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginReact } from '@rsbuild/plugin-react';\n\nexport default defineConfig({\n  plugins: [\n    pluginReact({\n      swcReactOptions: {\n        runtime: 'automatic',\n        jsxImportSource: '@emotion/react',\n      },\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Passing Configurations to React Compiler\nDESCRIPTION: This code configures React Compiler with Rsbuild and passes a custom configuration object. It imports necessary modules and defines a `ReactCompilerConfig` object with custom settings. The `babelLoaderOptions` function is used to pass this configuration to the `babel-plugin-react-compiler` plugin, allowing for fine-grained control over the compilation process.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/framework/react.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginBabel } from '@rsbuild/plugin-babel';\nimport { pluginReact } from '@rsbuild/plugin-react';\n\nconst ReactCompilerConfig = {\n  /* ... */\n};\n\nexport default defineConfig({\n  plugins: [\n    pluginReact(),\n    pluginBabel({\n      include: /\\.(?:jsx|tsx)$/,\n      babelLoaderOptions(opts) {\n        opts.plugins?.unshift([\n          'babel-plugin-react-compiler',\n          ReactCompilerConfig,\n        ]);\n      },\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Asset Inlining and URL Loading (JS)\nDESCRIPTION: Demonstrates how Rsbuild handles asset inlining based on file size.  Small files (under 4KiB) are automatically inlined as base64 strings, while larger files are loaded as separate files with URLs. The example shows the output for both small and large images.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/static-assets.mdx#2025-04-21_snippet_9\n\nLANGUAGE: js\nCODE:\n```\nimport largeImage from './static/largeImage.png';\nimport smallImage from './static/smallImage.png';\n\nconsole.log(largeImage); // \"/static/largeImage.[hash].png\"\nconsole.log(smallImage); // \"data:image/png;base64,iVBORw0KGgo...\"\n```\n\n----------------------------------------\n\nTITLE: Configuring Classic JSX Runtime with Rsbuild\nDESCRIPTION: This code configures the classic JSX runtime, specifying the `pragma` and `pragmaFrag` options within the `swcReactOptions` of the `@rsbuild/plugin-react`. When the JSX runtime is set to `classic`, these options define the functions used to transform JSX elements (pragma) and fragments (pragmaFrag). The example configures the pragma to `h` and the pragmaFrag to `Fragment`.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/framework/react.mdx#2025-04-21_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginReact } from '@rsbuild/plugin-react';\n\nexport default defineConfig({\n  plugins: [\n    pluginReact({\n      swcReactOptions: {\n        runtime: 'classic',\n        pragma: 'h',\n        pragmaFrag: 'Fragment',\n      },\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Rsbuild with webpack Provider and SWC Plugin\nDESCRIPTION: This snippet demonstrates how to configure a Rsbuild project to use webpack as the bundler instead of the default Rspack. It shows how to import and use the webpackProvider and register the necessary SWC plugin for transformation and minimization, which is required since @rsbuild/webpack has no built-in transformer.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/packages/compat/webpack/README.md#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { webpackProvider } from '@rsbuild/webpack';\nimport { pluginSwc } from '@rsbuild/plugin-webpack-swc';\n\nexport default defineConfig({\n  provider: webpackProvider,\n  plugins: [\n    // @rsbuild/webpack has no built-in transformer and minimizer,\n    // so you need to register the @rsbuild/plugin-webpack-swc.\n    pluginSwc(),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Creating a Basic Rsbuild Plugin\nDESCRIPTION: A complete example of defining a Rsbuild plugin with typings and options, showing the basic structure and setup function implementation.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/index.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { RsbuildPlugin } from '@rsbuild/core';\n\nexport type PluginFooOptions = {\n  message?: string;\n};\n\nexport const pluginFoo = (options: PluginFooOptions = {}): RsbuildPlugin => ({\n  name: 'plugin-foo',\n\n  setup(api) {\n    api.onAfterStartDevServer(() => {\n      const msg = options.message || 'hello!';\n      console.log(msg);\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Bad Tailwind CSS Configuration - Monorepo Issue\nDESCRIPTION: This code snippet shows an incorrect configuration of Tailwind CSS within a monorepo, where the path to a UI package's source files is incorrectly specified, leading to the inclusion of its `node_modules` directory.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/styling/tailwindcss-v3.mdx#2025-04-21_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nmodule.exports = {\n  content: [\n    './src/**/*.{html,js,ts,jsx,tsx}',\n    // Incorrectly includes the `packages/ui/node_modules` directory\n    // Should be '../../packages/ui/src/**/*.{html,js,ts,jsx,tsx}'\n    '../../packages/ui/**/*.{html,js,ts,jsx,tsx}',\n  ],\n};\n```\n\n----------------------------------------\n\nTITLE: Merging Rsbuild Configurations\nDESCRIPTION: Demonstrates how to use mergeRsbuildConfig to combine multiple configuration objects with precedence rules\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/configuration/rsbuild.mdx#2025-04-21_snippet_6\n\nLANGUAGE: ts\nCODE:\n```\nimport { defineConfig, mergeRsbuildConfig } from '@rsbuild/core';\n\nconst config1 = defineConfig({\n  dev: { port: '3000' }\n});\nconst config2 = defineConfig({\n  dev: { port: '3001' }\n});\n\n// { dev: { port: '3001' } }\nexport default mergeRsbuildConfig(config1, config2);\n```\n\n----------------------------------------\n\nTITLE: Defining ResolveFn Type in Rsbuild\nDESCRIPTION: This snippet shows the type definition for the `ResolveFn` function used with `api.resolve`. It defines a function that accepts a `ResolveHandler` as an argument, allowing plugins to intercept and modify module request information during the module resolution process.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/core.mdx#2025-04-21_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nfunction ResolveFn(handler: ResolveHandler): void;\n```\n\n----------------------------------------\n\nTITLE: TypeScript Declaration for WebAssembly Module\nDESCRIPTION: Type declaration example for a .wasm module in TypeScript.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/wasm-assets.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport const add = (num1: number, num2: number) => number;\n```\n\n----------------------------------------\n\nTITLE: Accessing Entry Object in JavaScript\nDESCRIPTION: Example showing how to access the entry configuration in a plugin.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/environment-api.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\napi.modifyRspackConfig((config, { environment }) => {\n  console.log(environment.entry);\n  return config;\n});\n```\n\n----------------------------------------\n\nTITLE: SVG Type Declaration for Named Export Type\nDESCRIPTION: TypeScript type declarations when svgrOptions.exportType is set to 'named', using named exports for React components.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-svgr.mdx#2025-04-21_snippet_25\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare module '*.svg' {\n  export const ReactComponent: React.FunctionComponent<\n    React.SVGProps<SVGSVGElement>\n  >;\n}\ndeclare module '*.svg?react' {\n  const ReactComponent: React.FunctionComponent<React.SVGProps<SVGSVGElement>>;\n  export default ReactComponent;\n}\n```\n\n----------------------------------------\n\nTITLE: Module Parse Error Example\nDESCRIPTION: Example error message when a module cannot be parsed due to missing or incorrect loaders.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/faq/exceptions.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nModule parse failed: Unexpected token\nFile was processed with these loaders:\n * some-loader/index.js\n\nYou may need an additional loader to handle the result of these loaders.\n```\n\n----------------------------------------\n\nTITLE: Configuring StyleX with Rsbuild\nDESCRIPTION: This code configures Rsbuild to use StyleX for CSS-in-JS. It imports the `stylexPlugin` from `unplugin-stylex/rspack` and adds it to the Rspack plugins. It enables StyleX's features within the Rsbuild environment. This configuration ensures that StyleX is properly integrated into the build process, allowing for the use of StyleX components in the application.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/framework/react.mdx#2025-04-21_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginReact } from '@rsbuild/plugin-react';\nimport stylexPlugin from 'unplugin-stylex/rspack';\n\nexport default defineConfig({\n  plugins: [pluginReact()],\n  tools: {\n    rspack: {\n      plugins: [stylexPlugin()],\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring CSS Loader to Skip Absolute Path Resolution (TS)\nDESCRIPTION: Shows how to configure the `tools.cssLoader` option in Rsbuild to prevent the resolution of absolute paths in CSS files. This is useful when you want to use absolute URLs directly without Rsbuild attempting to find corresponding modules. The `filter` function allows specifying which URLs should be excluded from resolution.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/static-assets.mdx#2025-04-21_snippet_8\n\nLANGUAGE: ts\nCODE:\n```\nexport default {\n  tools: {\n    cssLoader: {\n      url: {\n        filter: (url) => {\n          if (/\\/image\\/font/.test(url)) {\n            return false;\n          }\n          return true;\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: OnBeforeEnvironmentCompile Function Definition\nDESCRIPTION: Defines the structure and parameters of the `onBeforeEnvironmentCompile` callback function in Rsbuild.  The callback receives parameters providing information about the current build environment, including whether it is a watch build (`isWatch`), whether it is the first compilation (`isFirstCompile`), the Rspack configuration (`bundlerConfig`), and the environment context (`environment`). The callback can be asynchronous or synchronous.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/shared/onBeforeEnvironmentCompile.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction OnBeforeEnvironmentCompile(\n  callback: (params: {\n    isWatch: boolean;\n    isFirstCompile: boolean;\n    bundlerConfig?: Rspack.Configuration;\n    environment: EnvironmentContext;\n  }) => Promise<void> | void,\n): void;\n```\n\n----------------------------------------\n\nTITLE: Enabling Progress Bar in Rsbuild Configuration\nDESCRIPTION: Demonstrates how to enable the progress bar in the Rsbuild configuration using JavaScript.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/dev/progress-bar.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  dev: {\n    progressBar: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Accessing Environment Context in Rsbuild Plugin Hooks\nDESCRIPTION: These snippets demonstrate how to access environment context information in different Rsbuild plugin hooks. The first example shows checking the environment name in modifyRspackConfig, while the second shows iterating over all environments in onDevCompileDone.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/environments.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.modifyRspackConfig((rspackConfig, { environment }) => {\n      if (environment.name === 'node') {\n        // do some thing\n      }\n    });\n  },\n});\n```\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onDevCompileDone(({ environments }) => {\n      environments.forEach((environment) => {\n        console.log('environment', environment);\n      });\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Setting Default Filenames for Development and Production in JavaScript\nDESCRIPTION: Default filename configurations for development and production builds, showing how different asset types are named by default in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/filename.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n// 开发模式构建\nconst devDefaultFilename = {\n  html: '[name].html',\n  js: '[name].js',\n  css: '[name].css',\n  svg: '[name].[contenthash:8].svg',\n  font: '[name].[contenthash:8][ext]',\n  image: '[name].[contenthash:8][ext]',\n  media: '[name].[contenthash:8][ext]',\n  assets: '[name].[contenthash:8][ext]',\n};\n\n// 生产模式构建\nconst prodDefaultFilename = {\n  html: '[name].html',\n  js: output.target === 'node' ? '[name].js' : '[name].[contenthash:8].js',\n  css: '[name].[contenthash:8].css',\n  svg: '[name].[contenthash:8].svg',\n  font: '[name].[contenthash:8][ext]',\n  image: '[name].[contenthash:8][ext]',\n  media: '[name].[contenthash:8][ext]',\n  assets: '[name].[contenthash:8][ext]',\n};\n```\n\n----------------------------------------\n\nTITLE: Using Exposed Plugin API with api.useExposed\nDESCRIPTION: This snippet demonstrates how to use `api.useExposed` to access properties and methods exposed by another plugin. It defines a plugin named `'plugin-child'` that uses the `'plugin-parent'` identifier to retrieve the exposed API and then logs the `value` and calls the `double` method.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/core.mdx#2025-04-21_snippet_24\n\nLANGUAGE: typescript\nCODE:\n```\nconst pluginChild = () => ({\n  name: 'plugin-child',\n  pre: ['plugin-parent'],\n  setup(api) {\n    const parentApi = api.useExposed('plugin-parent');\n    if (parentApi) {\n      console.log(parentApi.value); // -> 1\n      console.log(parentApi.double(1)); // -> 2\n    }\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Incorrect Filename Hashing in Rsbuild\nDESCRIPTION: This code snippet shows an incorrect way to configure filename hashing in Rsbuild, where the content hash is always applied, even in development mode. This can cause issues with hot reloading, especially for CSS files, as the filename changes with every change, preventing the hot module replacement from working correctly.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/faq/hmr.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    filename: {\n      css: '[name].[contenthash:8].css',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring PostCSS Tools in Rsbuild\nDESCRIPTION: Example of configuring PostCSS tools with viewport plugin in Rsbuild configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/styling/css-usage.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    postcss: (opts) => {\n      const viewportPlugin = require('postcss-px-to-viewport')({\n        viewportWidth: 375,\n      });\n      opts.postcssOptions.plugins.push(viewportPlugin);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: URL Assets for CSS/SCSS files (TSX)\nDESCRIPTION: Explains how using `new URL()` with `.css` or `.scss` files treats them as URL assets, bypassing the default CSS loaders. The files are copied to the output directory without any CSS processing (like minification or autoprefixer). This allows including raw CSS files as assets.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/static-assets.mdx#2025-04-21_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n// foo.css 文件将保持原始内容被输出到产物目录下\nconst fooCss = new URL('./foo.css', import.meta.url).href;\n\nconsole.log(fooCss); // \"/static/foo.[hash].css\"\n```\n\n----------------------------------------\n\nTITLE: Custom URL Logging Configuration\nDESCRIPTION: Example of fully customizable URL logging with access to port, protocol, and URLs parameters.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/print-urls.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    printUrls({ urls, port, protocol }) {\n      console.log(urls); // ['http://localhost:3000', 'http://192.168.0.1:3000']\n      console.log(port); // 3000\n      console.log(protocol); // 'http' or 'https'\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining StylusOptions Type in TypeScript (TypeScript)\nDESCRIPTION: This snippet defines a TypeScript type, `StylusOptions`, which specifies the configuration options that can be used with the Stylus plugin. These options include plugins, variable definitions, CSS imports, and more, allowing customization of how the Stylus compiler behaves.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-stylus.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\ntype StylusOptions = {\n  use?: string[];\n  define?: [string, any, boolean?][];\n  include?: string[];\n  includeCSS?: boolean;\n  import?: string[];\n  resolveURL?: boolean;\n  lineNumbers?: boolean;\n  hoistAtrules?: boolean;\n};\n```\n\n----------------------------------------\n\nTITLE: Specifying Target for React Compiler in Older React Versions\nDESCRIPTION: This code snippet configures the `target` option for React Compiler when used with React versions 17 or 18. It defines a `ReactCompilerConfig` object and sets the `target` property to either '17', '18', or '19', which specifies the React version for which the code should be compiled. This is necessary for ensuring compatibility when using React Compiler with older React versions.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/framework/react.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nconst ReactCompilerConfig = {\n  target: '18', // '17' | '18' | '19'\n};\n```\n\n----------------------------------------\n\nTITLE: Transforming Module Code with api.transform\nDESCRIPTION: Shows how to transform module code using the `api.transform` API, allowing plugins to modify the source code of modules based on specific criteria (e.g., file extension). This example transforms `.pug` files into JavaScript code using the `pug` compiler.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/core.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nimport pug from 'pug';\n\nconst pluginPug = () => ({\n  name: 'my-pug-plugin',\n  setup(api) {\n    api.transform({ test: /\\.pug$/ }, ({ code }) => {\n      const templateCode = pug.compileClient(code, {});\n      return `${templateCode}; module.exports = template;`;\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Importing Static Assets in JavaScript (TSX)\nDESCRIPTION: Demonstrates how to import static assets (like images) into JavaScript/TypeScript files using the `import` statement in Rsbuild.  It shows how to import a `logo.png` file and use it within a React component's `img` tag. The imported `logo` variable will contain the resolved URL of the asset.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/static-assets.mdx#2025-04-21_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n// 引用 static 目录下的 logo.png 图片\nimport logo from './static/logo.png';\n\nconsole.log(logo); // \"/static/logo.[hash].png\"\n\nexport default = () => <img src={logo} />;\n```\n\n----------------------------------------\n\nTITLE: Manual Injection in Rsbuild HTML Template\nDESCRIPTION: Demonstrates manual injection of scripts in an HTML template when 'html.inject' is set to false. This allows for precise control over script placement.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/inject.mdx#2025-04-21_snippet_4\n\nLANGUAGE: html\nCODE:\n```\n<html>\n  <head>\n    <script src=\"https://example.com/a.js\"></script>\n    <%= htmlPlugin.tags.headTags %>\n    <script src=\"https://example.com/b.js\"></script>\n  </head>\n  <body>\n    <div id=\"root\"></div>\n    <%= htmlPlugin.tags.bodyTags %>\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Configuring Storybook with Rsbuild in JavaScript\nDESCRIPTION: This snippet shows how to set up Storybook configuration using Rsbuild for a React project. It demonstrates the use of the 'storybook-react-rsbuild' framework in the Storybook main configuration file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-7.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { StorybookConfig } from 'storybook-react-rsbuild';\n\nconst config: StorybookConfig = {\n  framework: 'storybook-react-rsbuild',\n};\n\nexport default config;\n```\n\n----------------------------------------\n\nTITLE: URL Assets for JS/TS files (TSX)\nDESCRIPTION: Demonstrates how using `new URL()` with `.js` or `.ts` files treats them as URL assets, bypassing the default `swc-loader` processing. The files are copied to the output directory without transformation. This is useful for including raw JavaScript or TypeScript files as assets.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/static-assets.mdx#2025-04-21_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n// foo.ts 文件将保持原始内容被输出到产物目录下\nconst fooTs = new URL('./foo.ts', import.meta.url).href;\n\nconsole.log(fooTs); // \"/static/foo.[hash].ts\"\n```\n\n----------------------------------------\n\nTITLE: Custom ChunkSplit override with minSize in Rsbuild\nDESCRIPTION: This code snippet demonstrates how to override the default Rspack `splitChunks` configuration in Rsbuild using the `override` option.  Here, the `minSize` option is set to 30000, meaning modules smaller than 30,000 bytes will not be split into separate chunks.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/optimization/code-splitting.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  performance: {\n    chunkSplit: {\n      override: {\n        chunks: 'all',\n        minSize: 30000,\n      },\n    },\n  },\n};\n\n```\n\n----------------------------------------\n\nTITLE: Defining TypeScript Interface for Default HTML Template Parameters in Rsbuild\nDESCRIPTION: Type definition for the default template parameters available in Rsbuild HTML templates. It includes entry metadata, asset information, and Rspack-related objects that can be accessed in templates.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/html/template-parameters.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype DefaultParameters = {\n  mountId: string; // 对应 html.mountId 配置\n  entryName: string; // 入口名称\n  assetPrefix: string; // 对应 dev.assetPrefix 和 output.assetPrefix 配置\n  compilation: Compilation; // Rspack 的 compilation 对象\n  rspackConfig: Rspack.Configuration; // Rspack 的配置对象\n  // html-rspack-plugin 生成的参数\n  htmlPlugin: {\n    tags: {\n      headTags: HtmlTagObject[];\n      bodyTags: HtmlTagObject[];\n    };\n    files: {\n      publicPath: string;\n      js: Array<string>;\n      css: Array<string>;\n      favicon?: string;\n    };\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Function-Based CSS Inlining Configuration\nDESCRIPTION: Configuration example using a function to determine which CSS files to inline based on file size.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/inline-styles.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    inlineStyles({ size }) {\n      return size < 10 * 1000;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Example of Default Hashed Output Filenames in Rsbuild\nDESCRIPTION: Shows the default output file structure with hash values included in the filenames after a production build.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/filename-hash.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ndist/static/css/index.7879e19d.css\ndist/static/js/index.18a568e5.js\n```\n\n----------------------------------------\n\nTITLE: Plugin Hook Order Override Example in TypeScript\nDESCRIPTION: Shows how to control hook execution order using the order field with pre/post/default options when registering hooks.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/hooks.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst plugin1 = () => ({\n  setup(api) {\n    api.modifyRsbuildConfig(() => console.log('1'));\n  },\n});\n\nconst plugin2 = () => ({\n  setup(api) {\n    api.modifyRsbuildConfig({\n      handler: () => console.log('2'),\n      order: 'pre',\n    });\n  },\n});\n\nrsbuild.addPlugins([plugin1, plugin2]);\n```\n\n----------------------------------------\n\nTITLE: Using BASE_URL in HTML\nDESCRIPTION: This HTML snippet shows how to use `process.env.BASE_URL` within an HTML template to set the favicon URL. It's necessary to set the base URL to something other than `/` when deploying to subdirectories of a domain. The template engine will replace this variable with the proper value at build time.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_11\n\nLANGUAGE: html\nCODE:\n```\n<!-- 等价于 \"/foo/favicon.ico\" -->\n<link rel=\"icon\" href=\"<%= process.env.BASE_URL %>/favicon.ico\" />\n```\n\n----------------------------------------\n\nTITLE: Accessing Public Variables in Client Code (TypeScript)\nDESCRIPTION: This TypeScript snippet demonstrates how to access public environment variables in client-side code.  It uses `import.meta.env` and `process.env` to read the value of `PUBLIC_NAME`.  Attempts to read `PASSWORD` will return `undefined`. It is important that PUBLIC_ variables are not security sensitive.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_23\n\nLANGUAGE: typescript\nCODE:\n```\nconsole.log(import.meta.env.PUBLIC_NAME); // -> 'jack'\nconsole.log(import.meta.env.PASSWORD); // -> undefined\n\nconsole.log(process.env.PUBLIC_NAME); // -> 'jack'\nconsole.log(process.env.PASSWORD); // -> undefined\n```\n\n----------------------------------------\n\nTITLE: Incorrect React Component Example 2\nDESCRIPTION: This code snippet also showcases an incorrect way of writing React components when using React Fast Refresh. The example demonstrates using an arrow function which can lead to state loss upon hot reloading, making it an anti-pattern for React Fast Refresh. These function declarations should be named for proper hot-reloading.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/framework/react.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n// 错误写法 2\nexport default () => <div>Hello World</div>;\n```\n\n----------------------------------------\n\nTITLE: Example Manifest File Output (JSON)\nDESCRIPTION: Sample content of a generated manifest.json file, showing the structure with allFiles and entries containing information about build artifacts and their relationships to entry points.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/manifest.mdx#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"allFiles\": [\n    \"/static/css/index.[hash].css\",\n    \"/static/js/index.[hash].js\",\n    \"/static/images/logo.[hash].png\",\n    \"/index.html\"\n  ],\n  \"entries\": {\n    \"index\": {\n      \"initial\": {\n        \"js\": [\"/static/js/index.[hash].js\"],\n        \"css\": [\"/static/css/index.[hash].css\"]\n      },\n      \"assets\": [\"/static/images/logo.[hash].png\"],\n      \"html\": [\"/index.html\"]\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Integrating Express with Rsbuild Dev Server (TypeScript)\nDESCRIPTION: Demonstrates how to integrate an Express server with the Rsbuild dev server, including setting up middleware and enabling WebSocket connections for HMR.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/dev-server-api.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRsbuild } from '@rsbuild/core';\nimport express from 'express';\n\nasync function startDevServer() {\n  // Init Rsbuild\n  const rsbuild = await createRsbuild({\n    rsbuildConfig: {\n      server: {\n        middlewareMode: true,\n      },\n    },\n  });\n\n  const app = express();\n\n  // Create Rsbuild dev server instance\n  const rsbuildServer = await rsbuild.createDevServer();\n\n  // Apply Rsbuild's built-in middlewares\n  app.use(rsbuildServer.middlewares);\n\n  const httpServer = app.listen(rsbuildServer.port, async () => {\n    // Notify Rsbuild that the custom server has started\n    await rsbuildServer.afterListen();\n  });\n\n  rsbuildServer.connectWebSocket({ server: httpServer });\n}\n```\n\n----------------------------------------\n\nTITLE: Using RegExp to Selectively Inline JavaScript Files\nDESCRIPTION: Configuration example showing how to use a regular expression to selectively inline specific JavaScript files based on their filenames.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/inline-scripts.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    inlineScripts: /[\\\\/]main\\.\\w+\\.js$/,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Conditional Logging based on Mode (JavaScript, Production)\nDESCRIPTION: This is the compiled JavaScript output for the previous TypeScript snippet when the build mode is 'production'. The `import.meta.env.MODE === 'development'` condition has been replaced with `false` by Rsbuild.  The `if (false)` block can then be removed during minification.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nif (false) {\n  console.log('this is development mode');\n}\n```\n\n----------------------------------------\n\nTITLE: Rsbuild Configuration for transformImport\nDESCRIPTION: This Rsbuild configuration uses the `transformImport` option to achieve the same functionality as `babel-plugin-import`. It specifies the library name, directory, and style settings within the `source` configuration.  This configuration instructs Rsbuild on how to transform imports from the specified library during the build process.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/webpack.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  source: {\n    transformImport: [\n      { libraryName: 'some-library', libraryDirectory: 'es', style: true },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Exposing Plugin API with api.expose\nDESCRIPTION: This snippet shows how to use `api.expose` to expose properties and methods from a plugin. It defines a plugin named `'plugin-parent'` and exposes an object with a `value` property and a `double` method using the identifier `'plugin-parent'`.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/core.mdx#2025-04-21_snippet_23\n\nLANGUAGE: typescript\nCODE:\n```\nconst pluginParent = () => ({\n  name: 'plugin-parent',\n  setup(api) {\n    api.expose('plugin-parent', {\n      value: 1,\n      double: (val: number) => val * 2,\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Customizing Public Variable Prefix (TypeScript Config)\nDESCRIPTION: This TypeScript snippet shows how to customize the prefix for public environment variables using the `loadEnv` function and the `prefixes` option. This allows developers to use a different prefix, such as `REACT_APP_`.  It merges these variables into the Rsbuild configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_25\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig, loadEnv } from '@rsbuild/core';\n\nconst { publicVars } = loadEnv({ prefixes: ['REACT_APP_'] });\n\nexport default defineConfig({\n  source: {\n    define: publicVars,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Node Modules Full Compilation\nDESCRIPTION: Example of compiling all JavaScript files while excluding core-js to prevent runtime errors.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/source/include.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  source: {\n    include: [{ not: /[\\\\/]core-js[\\\\/]/ }],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Blocking Script Loading in Rsbuild\nDESCRIPTION: Example configuration for setting scriptLoading to 'blocking' which removes the defer attribute. It's recommended to set html.inject to 'body' to minimize rendering blocking.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/script-loading.mdx#2025-04-21_snippet_1\n\nLANGUAGE: js\nCODE:\n```\nexport default {\n  html: {\n    inject: 'body',\n    scriptLoading: 'blocking',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Data URI Limit for Inlining in TypeScript\nDESCRIPTION: This snippet configures Rsbuild to set specific data URI limits for different asset types, allowing customization of inlining behavior. It sets a 5000 bytes limit for images and disables inlining for media assets. This requires an understanding of Rsbuild configuration files.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/optimization/inline-assets.mdx#2025-04-21_snippet_1\n\nLANGUAGE: TypeScript\nCODE:\n```\nexport default {\n  output: {\n    dataUriLimit: {\n      image: 5000,\n      media: 0,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Accessing Environment Variables in Rsbuild Config (TypeScript)\nDESCRIPTION: This TypeScript snippet shows how to access environment variables defined in `.env` and `.env.local` files within the Rsbuild configuration.  It uses `import.meta.env` and `process.env` to read the values of `FOO` and `BAR`. These variables will be available during the build process.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_19\n\nLANGUAGE: typescript\nCODE:\n```\nconsole.log(import.meta.env.FOO); // 'hello'\nconsole.log(import.meta.env.BAR); // '1'\n\nconsole.log(process.env.FOO); // 'hello'\nconsole.log(process.env.BAR); // '1'\n```\n\n----------------------------------------\n\nTITLE: Rsbuild: onDevCompileDone hook\nDESCRIPTION: Defines the `onDevCompileDone` hook in Rsbuild, which accepts a callback function to be executed after each development build. The callback receives parameters indicating if it's the first compile, stats, and environments. The callback can be an async or synchronous function.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/shared/onDevCompileDone.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction OnDevCompileDone(\n  callback: (params: {\n    isFirstCompile: boolean;\n    stats: Stats | MultiStats;\n    environments: Record<string, EnvironmentContext>;\n  }) => Promise<void> | void,\n): void;\n```\n\n----------------------------------------\n\nTITLE: HTML Template referencing public assets\nDESCRIPTION: This HTML snippet demonstrates how to correctly reference files located in the `public` directory within an HTML template. It emphasizes the use of absolute paths and the `BASE_URL` environment variable for proper resolution after deployment. Incorrect relative paths are also highlighted.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/static-assets.mdx#2025-04-21_snippet_13\n\nLANGUAGE: html\nCODE:\n```\n<link rel=\"icon\" href=\"<%= process.env.BASE_URL %>/favicon.ico\" />\n```\n\n----------------------------------------\n\nTITLE: Environment API Type Definition\nDESCRIPTION: Defines the structure of the EnvironmentAPI object, which provides access to environment-specific build artifacts on the server-side. It includes methods for getting build statistics, loading bundles, and retrieving transformed HTML content for each environment.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/environment-api.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\n```ts\ntype EnvironmentAPI = {\n  [name: string]: {\n    getStats: () => Promise<Stats>;\n    loadBundle: <T = unknown>(entryName: string) => Promise<T>;\n    getTransformedHtml: (entryName: string) => Promise<string>;\n  };\n};\n```\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Server with Express in Rsbuild\nDESCRIPTION: This code snippet shows how to create a custom server using Express while leveraging Rsbuild's dev server features such as page preview, routing, and hot module replacement.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/community/releases/v0-5.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport express from 'express';\nimport { createRsbuild } from '@rsbuild/core';\n\nasync function startCustomServer() {\n  const app = express();\n  const rsbuild = await createRsbuild({\n    rsbuildConfig: {\n      server: {\n        middlewareMode: true,\n      },\n    },\n  });\n  const { port, middlewares } = await rsbuild.createDevServer();\n\n  app.use(middlewares);\n  app.listen(port);\n}\n```\n\n----------------------------------------\n\nTITLE: Defining OnExit Hook in TypeScript\nDESCRIPTION: This function definition allows a user to provide a callback that will be executed with the process exit code when the Node.js process is about to exit. It ensures that necessary cleanup or finalization tasks can take place synchronously before the application shuts down.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/shared/onExit.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction OnExit(callback: (context: { exitCode: number }) => void): void;\n```\n\n----------------------------------------\n\nTITLE: Loading a Bundle\nDESCRIPTION: Shows how to use the `loadBundle` method to load and execute a specific entry point bundle on the server-side. The `loadBundle` method returns a Promise that resolves with the exports of the loaded module. This example loads the 'main' entry point bundle for the 'node' environment.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/environment-api.mdx#2025-04-21_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\n```ts\n// 加载 `main` 入口的 bundle\nconst result = await environments.node.loadBundle('main');\n```\n```\n\n----------------------------------------\n\nTITLE: Configuring vanilla-extract CSS with Rsbuild\nDESCRIPTION: Setup for using vanilla-extract CSS-in-JS library with Rsbuild. This configuration includes the webpack plugin and excludes CSS files from React Refresh to ensure proper compilation.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/framework/react.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginReact } from '@rsbuild/plugin-react';\nimport { VanillaExtractPlugin } from '@vanilla-extract/webpack-plugin';\n\nexport default defineConfig({\n  plugins: [\n    pluginReact({\n      reactRefreshOptions: {\n        exclude: [/\\.css\\.ts$/],\n      },\n    }),\n  ],\n  tools: {\n    rspack: {\n      plugins: [new VanillaExtractPlugin()],\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Rspack Dashboard in Production with JavaScript\nDESCRIPTION: This snippet demonstrates how to enable the Rspack Dashboard in production mode by adding the DashboardPlugin with custom options. It shows integration with the Rsbuild server for a JavaScript project.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/e2e/cases/server/watch-files/assets/example2.txt#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { DashboardPlugin } from '@rspack/core';\n\nexport default defineConfig({\n  dev: {\n    // Set to true to open the Rspack Dashboard by default\n    startUrl: true,\n  },\n  tools: {\n    rspack: (config, { environment }) => {\n      if (environment === 'production') {\n        config.plugins.push(\n          // DashboardPlugin is added to Rspack config by default in production mode\n          new DashboardPlugin({\n            // Set options\n          })\n        );\n      }\n      return config;\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Defining Lazy Compilation Type Structure in TypeScript\nDESCRIPTION: TypeScript type definition for lazy compilation options, including entries, imports, test patterns, client customization, and server URL configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/dev/lazy-compilation.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype LazyCompilationOptions =\n  | boolean\n  | {\n      /**\n       * 为 entries 启用 lazy compilation\n       */\n      entries?: boolean;\n      /**\n       * 为 dynamic imports 启用 lazy compilation\n       */\n      imports?: boolean;\n      /**\n       * 指定哪些导入的模块应该被延迟编译\n       */\n      test?: RegExp | ((m: Module) => boolean);\n      /**\n       * 指定一个自定义的运行时代码路径，用于覆盖默认的 lazy compilation client\n       */\n      client?: string;\n      /**\n       * 指定 client 需要请求的 server URL\n       */\n      serverUrl?: string;\n    };\n```\n\n----------------------------------------\n\nTITLE: Getting Transformed HTML\nDESCRIPTION: Demonstrates how to use the `getTransformedHtml` method to retrieve the transformed HTML content for a specific entry point. The `getTransformedHtml` method returns a Promise that resolves with the complete HTML string. This example retrieves the HTML for the 'main' entry point for the 'web' environment.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/environment-api.mdx#2025-04-21_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\n```ts\n// 获取 main 入口的 HTML 内容\nconst html = await environments.web.getTransformedHtml('main');\n```\n```\n\n----------------------------------------\n\nTITLE: GitHub Actions Workflow for Rsbuild Deployment\nDESCRIPTION: Automated GitHub Actions workflow for building and deploying Rsbuild project to GitHub Pages\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/static-deploy.mdx#2025-04-21_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\nname: Rsbuild Deployment\n\non:\n  push:\n    branches: ['main']\n  workflow_dispatch:\n\npermissions:\n  contents: read\n  pages: write\n  id-token: write\n\nconcurrency:\n  group: 'pages'\n  cancel-in-progress: false\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v4\n\n      - name: Use Node.js\n        uses: actions/setup-node@v4\n        with:\n          node-version: 22\n\n      - name: Install dependencies\n        run: npm i\n\n      - name: Build\n        run: npm run build\n\n      - name: Setup Pages\n        uses: actions/configure-pages@v5\n\n      - name: Upload artifact\n        uses: actions/upload-pages-artifact@v3\n        with:\n          path: './dist'\n\n      - name: Deploy to GitHub Pages\n        id: deployment\n        uses: actions/deploy-pages@v4\n```\n\n----------------------------------------\n\nTITLE: Default SVGR Options\nDESCRIPTION: These are the default SVGR options used by the plugin. They include settings for SVGO (SVG Optimizer) and its plugins, which optimize the SVG files before transforming them into React components.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-svgr.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nconst defaultSvgrOptions = {\n  svgo: true,\n  svgoConfig: {\n    plugins: [\n      {\n        name: 'preset-default',\n        params: {\n          overrides: {\n            removeViewBox: false,\n          },\n        },\n      },\n      'prefixIds',\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using ASSET_PREFIX in HTML\nDESCRIPTION: This HTML snippet shows how to use `process.env.ASSET_PREFIX` within an HTML template to set the favicon URL.  This snippet would point to a CDN for asset delivery. The template engine will replace this variable with the proper value at build time.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_12\n\nLANGUAGE: html\nCODE:\n```\n<!-- 等价于 \"https://example.com/static/icon.png\" -->\n<link rel=\"icon\" href=\"<%= process.env.ASSET_PREFIX %>/static/icon.png\" />\n```\n\n----------------------------------------\n\nTITLE: Conditional Logging based on Mode (JavaScript, Development)\nDESCRIPTION: This is the compiled JavaScript output for the previous TypeScript snippet when the build mode is 'development'.  The `import.meta.env.MODE === 'development'` condition has been replaced with `true` by Rsbuild during the build process.  This enables conditional logic based on the build environment.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nif (true) {\n  console.log('this is development mode');\n}\n```\n\n----------------------------------------\n\nTITLE: Stylus File Example for Style Definitions (Stylus)\nDESCRIPTION: This snippet provides an example of a Stylus file named `normalize.styl` that defines basic CSS styles. Stylus offers a clean syntax without braces and semicolons, demonstrating how CSS attributes can be defined with indentation.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-stylus.mdx#2025-04-21_snippet_1\n\nLANGUAGE: stylus\nCODE:\n```\nthe body\n   color#000\n   font 14px Arial, sans-serif\n```\n\n----------------------------------------\n\nTITLE: Updating npm scripts for Rsbuild migration\nDESCRIPTION: Changes required in package.json to replace CRA scripts with Rsbuild commands. Removes react-scripts commands and adds Rsbuild development, build and preview commands.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/migration/cra.mdx#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"start\": \"react-scripts start\", // [!code --]\n    \"build\": \"react-scripts build\", // [!code --]\n    \"eject\": \"react-scripts eject\", // [!code --]\n    \"start\": \"rsbuild dev\", // [!code ++]\n    \"build\": \"rsbuild build\", // [!code ++]\n    \"preview\": \"rsbuild preview\" // [!code ++]\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing HTML Paths\nDESCRIPTION: Demonstrates how to access the paths to the generated HTML files within an Rsbuild plugin.  The htmlPaths is an object where the keys are entry names, and the values are the relative paths to the corresponding HTML files within the output directory. This example logs the HTML paths to the console.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/environment-api.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\n```js\napi.modifyRspackConfig((config, { environment }) => {\n  console.log(environment.htmlPaths);\n  return config;\n});\n```\n```\n\n----------------------------------------\n\nTITLE: Defining CleanDistPath Type in TypeScript\nDESCRIPTION: TypeScript type definition for the CleanDistPath option, which can be a boolean, 'auto', or a CleanDistPathObject.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/clean-dist-path.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype CleanDistPath = boolean | 'auto' | CleanDistPathObject;\n```\n\n----------------------------------------\n\nTITLE: Registering Vue Plugin in Rsbuild Configuration\nDESCRIPTION: This code snippet shows how to register the Vue plugin within the Rsbuild configuration file (rsbuild.config.ts). It imports the plugin and adds it to the plugins array, enabling the ability to work with Vue Single File Components (SFC).\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-vue.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n```ts\nimport { pluginVue } from '@rsbuild/plugin-vue';\n\nexport default {\n  plugins: [pluginVue()],\n};\n```\n```\n\n----------------------------------------\n\nTITLE: Configuring Entry-based Polyfill Injection in Rsbuild\nDESCRIPTION: Sets the output.polyfill option to 'entry', which injects polyfills in each entry file. This ensures all necessary polyfills are included at the entry point of the application.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/polyfill.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    polyfill: 'entry',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Avoiding Full Replacement of process.env in JavaScript\nDESCRIPTION: This code snippet demonstrates why you should not replace the entire process.env object with a stringified version in JavaScript. Full replacement may expose unnecessary environment variables to the frontend and inflate the bundle size, leading to performance issues.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_29\n\nLANGUAGE: JavaScript\nCODE:\n```\nexport default {\n  source: {\n    define: {\n      'process.env': JSON.stringify(process.env),\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Getting Build Statistics\nDESCRIPTION: Demonstrates how to use the `getStats` method to retrieve build statistics for a specific environment. The `getStats` method returns a Promise that resolves with the build statistics object. This example retrieves the stats for the 'web' environment and logs a summary of the stats to the console.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/environment-api.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\n```ts\nconst webStats = await environments.web.getStats();\n\nconsole.log(webStats.toJson({ all: false }));\n```\n```\n\n----------------------------------------\n\nTITLE: Configuring sassLoaderOptions with a function\nDESCRIPTION: This demonstrates how to use a function to configure `sassLoaderOptions`. The function receives the default configuration as an argument, allowing you to modify it directly or return a new configuration object. This example shows how to set `additionalData` using a function.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/list/plugin-sass.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\npluginSass({\n  sassLoaderOptions(config) {\n    config.additionalData = async (content, loaderContext) => {\n      // ...\n    };\n  },\n});\n\n```\n\n----------------------------------------\n\nTITLE: Resolving PostCSS Version Conflicts in Rsbuild\nDESCRIPTION: This snippet demonstrates how to use 'npm ls postcss' to identify PostCSS version conflicts, which can cause 'Error: [object Object] is not a PostCSS plugin' errors in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/faq/exceptions.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpm ls postcss\n\n ├─┬ css-loader@6.3.0\n │ └── UNMET PEER DEPENDENCY postcss@8.3.9\n ├─┬ css-minimizer-webpack-plugin@3.0.0\n │ └── UNMET PEER DEPENDENCY postcss@8.3.9\n```\n\n----------------------------------------\n\nTITLE: Conditional Logging based on PROD environment (TypeScript)\nDESCRIPTION: This code snippet demonstrates how to use `import.meta.env.PROD` to conditionally execute code.  `import.meta.env.PROD` is true when the mode is 'production' and false otherwise.  This is useful for production-specific tasks like performance monitoring.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nif (import.meta.env.PROD) {\n  console.log('this is production mode');\n}\n```\n\n----------------------------------------\n\nTITLE: Defining ChunkSplit Type in TypeScript\nDESCRIPTION: This snippet defines the TypeScript types for the chunkSplit configuration, including various strategies and their associated options.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/chunk-split.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype ForceSplitting = RegExp[] | Record<string, RegExp>;\n\ninterface BaseChunkSplit {\n  strategy?:\n    | 'split-by-module'\n    | 'split-by-experience'\n    | 'all-in-one'\n    | 'single-vendor';\n  override?: Rspack.OptimizationSplitChunksOptions;\n  forceSplitting?: ForceSplitting;\n}\n\ninterface SplitBySize extends BaseSplitRules {\n  strategy: 'split-by-size';\n  minSize?: number;\n  maxSize?: number;\n}\n\ninterface SplitCustom extends BaseSplitRules {\n  strategy: 'custom';\n  splitChunks?: SplitChunks;\n}\n\ntype ChunkSplit = BaseChunkSplit | SplitBySize | SplitCustom;\n```\n\n----------------------------------------\n\nTITLE: Disabling NODE_ENV Injection (TypeScript Config)\nDESCRIPTION: This code snippet shows how to disable the default injection of `process.env.NODE_ENV` by Rspack using the `optimization.nodeEnv` option.  This enables developers to completely control the NODE_ENV variable.  This may be necessary when using custom build pipelines.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: {\n      optimization: { nodeEnv: false },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring asset modules for unknown file types\nDESCRIPTION: Configuration to handle unknown file types in Rsbuild, similar to CRA's behavior of copying files to static/media directory, using asset modules.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/migration/cra.mdx#2025-04-21_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: {\n      module: {\n        rules: [\n          {\n            // 匹配 .png 文件\n            // 你可以调整该正则表达式，以匹配不同类型的文件\n            test: /\\.png$/,\n            type: 'asset/resource',\n            generator: {\n              filename: 'static/media/[name].[hash][ext]',\n            },\n          },\n        ],\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Overriding Environment Variables in Rsbuild Config (TypeScript)\nDESCRIPTION: This TypeScript snippet continues from the previous example and shows how the `.env.local` file overrides the value of `BAR`. After loading `.env.local`, `BAR` now has the value `'2'`. This reflects the priority of `.env.local` over `.env`.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_20\n\nLANGUAGE: typescript\nCODE:\n```\nconsole.log(import.meta.env.BAR); // '2'\nconsole.log(process.env.BAR); // '2'\n```\n\n----------------------------------------\n\nTITLE: Debugging with Rsbuild: Development Mode (Bash)\nDESCRIPTION: This bash command demonstrates how to enable debug mode for Rsbuild in development mode. The `DEBUG=rsbuild` environment variable activates detailed logging, allowing developers to inspect the generated Rspack configuration and troubleshoot issues.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-babel.mdx#2025-04-21_snippet_11\n\nLANGUAGE: bash\nCODE:\n```\n# Debug development mode\nDEBUG=rsbuild pnpm dev\n```\n\n----------------------------------------\n\nTITLE: Loading Worker Script from Remote URL\nDESCRIPTION: This JavaScript code demonstrates how to load a worker script from a remote URL, handling potential cross-origin issues. It uses the 'remote-web-worker' library and sets the worker type to 'classic'.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/web-workers.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\n// https://github.com/jantimon/remote-web-worker\nimport 'remote-web-worker';\n\nconst worker = new Worker(new URL('./worker.js', import.meta.url), {\n  type: 'classic',\n});\n\nworker.onmessage = (event) => {\n  console.log('The results from Workers:', event.data);\n};\n\nworker.postMessage(10);\n```\n\n----------------------------------------\n\nTITLE: Accessing BASE_URL in JavaScript\nDESCRIPTION: This JavaScript snippet demonstrates how to use `import.meta.env.BASE_URL` to construct a URL to a resource in the `public` directory. It accesses the `favicon.ico` file served from the base URL. It expects that the base url has been set in the Rsbuild config.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nconst image = new Image();\n// 等价于 \"/foo/favicon.ico\"\nimage.src = `${import.meta.env.BASE_URL}/favicon.ico`;\n```\n\n----------------------------------------\n\nTITLE: Using /deep/ Selector in Vue Styles\nDESCRIPTION: This snippet addresses the issue of using the deprecated '/deep/' selector in Vue, offering the recommended alternative ':deep()'. It shows a scoped style usage example in a Vue SFC to clarify the proper implementation.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-vue.mdx#2025-04-21_snippet_4\n\nLANGUAGE: html\nCODE:\n```\n```html\n<style scoped>\n  .a :deep(.b) {\n    /* ... */\n  }\n</style>\n```\n```\n\n----------------------------------------\n\nTITLE: Selecting a Sass API version\nDESCRIPTION: This snippet illustrates how to specify the Sass API version to use. It switches from the default `modern-compiler` API to the `legacy` API. This is done through the `api` option in `sassLoaderOptions` and could be necessary to support older Sass syntax.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/list/plugin-sass.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\npluginSass({\n  sassLoaderOptions: {\n    api: 'legacy',\n  },\n});\n\n```\n\n----------------------------------------\n\nTITLE: Defining onBeforeCreateCompiler Hook in Rsbuild\nDESCRIPTION: Defines the `onBeforeCreateCompiler` hook function signature in Rsbuild. This hook allows modification of Rspack configurations before compiler creation. It receives an object containing the bundler configurations (Rspack configurations) and environment contexts.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/shared/onBeforeCreateCompiler.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction OnBeforeCreateCompiler(\n  callback: (params: {\n    bundlerConfigs: Rspack.Configuration[];\n    environments: Record<string, EnvironmentContext>;\n  }) => Promise<void> | void,\n): void;\n```\n\n----------------------------------------\n\nTITLE: Setting Entry-Specific Template Parameters for Multi-Page Applications\nDESCRIPTION: Example of using the function approach to provide different template parameters for different entry points in a multi-page application. Each entry receives custom parameters based on its name.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/html/template-parameters.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    templateParameters(defaultValue, { entryName }) {\n      const params = {\n        foo: {\n          ...defaultValue,\n          type: 'Foo',\n        },\n        bar: {\n          ...defaultValue,\n          type: 'Bar',\n          hello: 'world',\n        },\n      };\n      return params[entryName] || defaultValue;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining OnAfterCreateCompiler Hook Function Type in TypeScript\nDESCRIPTION: TypeScript type definition for the OnAfterCreateCompiler hook callback function. The callback receives a parameter object containing the compiler instance (either Compiler or MultiCompiler) and an environments object with environment contexts. The function can return a Promise or void.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/shared/onAfterCreateCompiler.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction OnAfterCreateCompiler(callback: (params: {\n  compiler: Compiler | MultiCompiler;\n  environments: Record<string, EnvironmentContext>;\n}) => Promise<void> | void;): void;\n```\n\n----------------------------------------\n\nTITLE: Customizing Compilation with Stylus pluginStylus Method (TypeScript)\nDESCRIPTION: This code demonstrates how to configure the `pluginStylus()` function to customize the compilation behavior of Stylus. The `stylusOptions` parameter is set to disable line numbers, which affects the output style.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-stylus.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\npluginStylus({\n  stylusOptions: {\n    lineNumbers: false,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Defining Plugin with Post-dependencies\nDESCRIPTION: Illustrates how to define a plugin that depends on another plugin to execute after it. This utilizes the `post` property to ensure the execution order of plugins. The Foo plugin will execute after the Bar plugin.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/core.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst pluginFoo = {\n  name: 'plugin-foo',\n};\n\nconst pluginBar = {\n  name: 'plugin-bar',\n  post: ['plugin-foo'],\n};\n```\n\n----------------------------------------\n\nTITLE: Modifying the Sass implementation\nDESCRIPTION: This demonstrates how to change the Sass implementation from the default `sass-embedded` to another implementation, such as the `sass` package.  This is done by setting the `implementation` option within the `sassLoaderOptions` object. Requires installing the desired Sass implementation.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/list/plugin-sass.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\npluginSass({\n  sassLoaderOptions: {\n    implementation: require.resolve('sass'),\n  },\n});\n\n```\n\n----------------------------------------\n\nTITLE: Disabling Prefresh in Preact Plugin\nDESCRIPTION: Disables Prefresh, which provides fast refresh (HMR) for Preact components. This might be useful if you are experiencing issues with Prefresh or if you don't need HMR. `prefreshEnabled` is set to `false` in the plugin options.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/list/plugin-preact.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\npluginPreact({\n  prefreshEnabled: false,\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Query Hash for Asset URLs in Rsbuild\nDESCRIPTION: Example of adding a hash value to the URL query of JavaScript and CSS assets in production builds.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/filename.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nconst isProd = process.env.NODE_ENV === 'production';\n\nexport default {\n  output: {\n    filename: {\n      js: isProd ? '[name].js?v=[contenthash:8]' : `[name].js`,\n      css: isProd ? '[name].css?v=[contenthash:8]' : `[name].css`,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting up HTTPS certificates in Rsbuild configuration\nDESCRIPTION: Example of manually setting up HTTPS certificates by providing key and certificate files to the server.https configuration option.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/server/https.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport fs from 'node:fs';\n\nexport default {\n  server: {\n    https: {\n      key: fs.readFileSync('certificates/private.pem'),\n      cert: fs.readFileSync('certificates/public.pem'),\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Favicon as URL in Rsbuild Configuration\nDESCRIPTION: This snippet illustrates how to set the favicon using a URL in the Rsbuild configuration. This is useful when the favicon is hosted externally.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/favicon.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport path from 'node:path';\n\nexport default {\n  html: {\n    favicon: 'https://foo.com/favicon.ico',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using Web Worker in Main Thread\nDESCRIPTION: This JavaScript code demonstrates how to create and use a Web Worker in the main thread. It instantiates a new Worker using the URL of the worker script, sends a message to the worker, and listens for messages from the worker.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/web-workers.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst worker = new Worker(new URL('./worker.js', import.meta.url));\n\nworker.onmessage = (event) => {\n  console.log('The results from Workers:', event.data);\n};\n\nworker.postMessage(10);\n```\n\n----------------------------------------\n\nTITLE: Extended Tailwind Configuration for Additional Sources - JavaScript\nDESCRIPTION: This snippet extends the earlier tailwind.config.js configuration to include additional file paths, allowing Tailwind CSS to detect utility classes in more locations across the project.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/styling/tailwindcss-v3.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n/** @type {import('tailwindcss').Config} */\nmodule.exports = {\n  content: [\n    './src/**/*.{html,js,ts,jsx,tsx}',\n    '../../lib1/src/**/*.{js,ts,jsx,tsx}',\n  ],\n  theme: {\n    extend: {},\n  },\n  plugins: [],\n};\n```\n\n----------------------------------------\n\nTITLE: Inspecting Rsbuild and Rspack Configs\nDESCRIPTION: This bash snippet shows how to use the 'rsbuild inspect' command to generate and view the Rsbuild and Rspack configurations for different environments.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/environments.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n➜ npx rsbuild inspect\n\nconfig inspection completed, generated files:\n\n  - Rsbuild config (web): /project/dist/.rsbuild/rsbuild.config.web.mjs\n  - Rsbuild config (node): /project/dist/.rsbuild/rsbuild.config.node.mjs\n  - Rspack config (web): /project/dist/.rsbuild/rspack.config.web.mjs\n  - Rspack config (node): /project/dist/.rsbuild/rspack.config.node.mjs\n```\n\n----------------------------------------\n\nTITLE: Configuring Plugins with bundlerChain\nDESCRIPTION: This comprehensive example shows how to add, modify, and delete plugins using the bundlerChain API.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/configuration/rspack.mdx#2025-04-21_snippet_12\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    bundlerChain: (chain, { bundler, CHAIN_ID }) => {\n      // Add plugin\n      chain.plugin('custom-define').use(bundler.DefinePlugin, [\n        {\n          'process.env': {\n            NODE_ENV: JSON.stringify(process.env.NODE_ENV),\n          },\n        },\n      ]);\n\n      // Modify plugin\n      chain.plugin(CHAIN_ID.PLUGIN.HMR).tap((options) => {\n        options[0].fullBuildTimeout = 200;\n        return options;\n      });\n\n      // Delete plugin\n      chain.plugins.delete(CHAIN_ID.PLUGIN.HMR);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Creating Tailwind CSS Configuration - JavaScript\nDESCRIPTION: This snippet demonstrates how to create the Tailwind CSS configuration file (tailwind.config.js) in the project's root directory. It defines the content paths to scan for Tailwind utility classes and theme configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/styling/tailwindcss-v3.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n/** @type {import('tailwindcss').Config} */\nmodule.exports = {\n  content: ['./src/**/*.{html,js,ts,jsx,tsx}'],\n  theme: {\n    extend: {},\n  },\n  plugins: [],\n};\n```\n\n----------------------------------------\n\nTITLE: Customizing the splitChunks Behavior for Vue Plugin\nDESCRIPTION: This snippet provides an example of how to customize the splitChunks behavior for the Vue plugin by specifying whether Vue and router-related packages should be split into separate chunks. Default values are also provided.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-vue.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n```js\nconst defaultOptions = {\n  vue: true,\n  router: true,\n};\n```\n```\n\n----------------------------------------\n\nTITLE: Rsbuild Config Merge Example in TypeScript\nDESCRIPTION: Shows how to use mergeRsbuildConfig utility to merge configuration objects while maintaining proper override behavior.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/hooks.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { RsbuildConfig } from '@rsbuild/core';\n\nconst myPlugin = () => ({\n  setup(api) {\n    api.modifyRsbuildConfig((userConfig, { mergeRsbuildConfig }) => {\n      const extraConfig: RsbuildConfig = {\n        source: {\n          // ...\n        },\n        output: {\n          // ...\n        },\n      };\n\n      // extraConfig will override fields in userConfig,\n      // If you do not want to override the fields in userConfig,\n      // you can adjust to `mergeRsbuildConfig(extraConfig, userConfig)`\n      return mergeRsbuildConfig(userConfig, extraConfig);\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring React Compiler with Babel Plugin\nDESCRIPTION: Configuration for using React Compiler in Rsbuild by integrating the Babel plugin. This setup enables React 19's experimental compiler to automatically optimize React code.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/framework/react.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginBabel } from '@rsbuild/plugin-babel';\nimport { pluginReact } from '@rsbuild/plugin-react';\n\nexport default defineConfig({\n  plugins: [\n    pluginReact(),\n    pluginBabel({\n      include: /\\.(?:jsx|tsx)$/,\n      babelLoaderOptions(opts) {\n        opts.plugins?.unshift('babel-plugin-react-compiler');\n      },\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Running E2E Tests for Rsbuild with Bash Commands\nDESCRIPTION: This snippet shows various bash commands to run e2e tests for Rsbuild. It includes commands for running all tests, Rspack-specific tests, webpack-specific tests, and running specific test cases.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/e2e/README.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n# Run all test cases, including Rspack and webpack\npnpm test\n\n# Run test cases for Rspack\npnpm test:rspack\n\n# Run test cases for webpack\npnpm test:webpack\n\n# Run specific test case, such as \"css\"\npnpm test:webpack css\npnpm test:rspack css\n```\n\n----------------------------------------\n\nTITLE: SVG Type Declaration for Mixed Imports\nDESCRIPTION: TypeScript type declarations when using named exports with mixedImport enabled, supporting both string content and React component exports.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-svgr.mdx#2025-04-21_snippet_26\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare module '*.svg' {\n  export const ReactComponent: React.FunctionComponent<\n    React.SVGProps<SVGSVGElement>\n  >;\n  const content: string;\n  export default content;\n}\ndeclare module '*.svg?react' {\n  const ReactComponent: React.FunctionComponent<React.SVGProps<SVGSVGElement>>;\n  export default ReactComponent;\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Rsbuild Instance\nDESCRIPTION: This code snippet demonstrates how to create an Rsbuild instance using the createRsbuild method. The method is imported from the '@rsbuild/core' package and is used to initialize an Rsbuild instance. This is a fundamental step in utilizing the Rsbuild API.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/start/index.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRsbuild } from '@rsbuild/core';\n\nconst rsbuild = await createRsbuild();\n```\n\n----------------------------------------\n\nTITLE: Using Functions for Dynamic JavaScript Filename Generation\nDESCRIPTION: Advanced example of using a function to dynamically generate JavaScript filenames based on chunk information and environment.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/filename.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nconst isProd = process.env.NODE_ENV === 'production';\n\nexport default {\n  output: {\n    filename: {\n      js: (pathData, assetInfo) => {\n        console.log(pathData); // 你可以在这里查看 pathData 的内容\n\n        if (pathData.chunk?.name === 'index') {\n          return isProd ? '[name].[contenthash:8].js' : '[name].js';\n        }\n        return '/some-path/[name].js';\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using Snapshots in Integration Tests with JavaScript\nDESCRIPTION: Shows how to use Jest snapshots for validating test outputs, which helps ensure consistent behavior across test runs.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/e2e/cases/server/watch-files/assets/example.txt#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\ntest('should generate expected output', async () => {\n  // Run build or other operations\n  await build({\n    cwd: tempDir,\n    // other options\n  });\n  \n  // Read output files\n  const outputFile = fs.readFileSync(\n    path.join(tempDir, 'dist', 'output.js'),\n    'utf-8'\n  );\n  \n  // Compare with snapshot\n  expect(outputFile).toMatchSnapshot();\n});\n```\n\n----------------------------------------\n\nTITLE: Removing Assets with api.processAssets\nDESCRIPTION: Shows how to remove an asset from the compilation output using the `api.processAssets` API. This example deletes the `unwanted-script.js` asset during the `optimize` stage.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/core.mdx#2025-04-21_snippet_16\n\nLANGUAGE: javascript\nCODE:\n```\napi.processAssets({ stage: 'optimize' }, ({ assets, compilation }) => {\n  const assetName = 'unwanted-script.js';\n  if (assets[assetName]) {\n    compilation.deleteAsset(assetName);\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Disabling Hot Module Replacement in Rsbuild Configuration\nDESCRIPTION: This code snippet demonstrates how to disable Hot Module Replacement (HMR) in a Rsbuild project by setting the dev.hmr option to false in the configuration object. When HMR is disabled, Rsbuild automatically falls back to live reloading.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/dev/hmr.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  dev: {\n    hmr: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Server Base URL (TypeScript)\nDESCRIPTION: This configuration snippet shows how to set the base URL for the server using the `server.base` option in the Rsbuild configuration.  The base URL is used as a prefix for serving static assets and API endpoints. The server base is set to `/foo`.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    base: '/foo',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Initializing and Returning Rspack Configurations in TypeScript\nDESCRIPTION: This snippet defines the type signature for the initConfigs method, which initializes and returns Rspack configurations used internally by Rsbuild. It processes all plugins and configurations to generate the final Rspack configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/instance.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nfunction InitConfigs(): Promise<{\n  rspackConfigs: Rspack.Configuration[];\n}>;\n```\n\n----------------------------------------\n\nTITLE: Specifying HTML template in Rsbuild\nDESCRIPTION: This snippet demonstrates how to specify the HTML template file to be used by Rsbuild using the `html.template` configuration option. It assumes that the HTML template file is located at `./public/index.html` and configures Rsbuild to use this file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/migration/vue-cli.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  html: {\n    template: './public/index.html',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using ASSET_PREFIX in JSX\nDESCRIPTION: This JSX snippet shows how to construct the URL for an image using `import.meta.env.ASSET_PREFIX`.  The value of `ASSET_PREFIX` will depend on the current environment (development or production).  It correctly constructs a URL regardless of build environment.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nconst Image = <img src={`${import.meta.env.ASSET_PREFIX}/static/icon.png`} />;\n```\n\n----------------------------------------\n\nTITLE: Preventing Title Tag Injection in Rsbuild Configuration (JavaScript)\nDESCRIPTION: This snippet shows how to prevent Rsbuild from injecting a <title> tag by setting html.title to an empty string. This is useful when you want to manually control the title tag in your HTML template.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/html/title.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    title: '',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Environment-Specific Browserslist in Rsbuild\nDESCRIPTION: Example showing how to configure different browser targets for web and Node.js environments in Rsbuild. Web targets mobile browsers while Node targets Node.js 20+.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/override-browserslist.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  environments: {\n    web: {\n      output: {\n        target: 'web',\n        overrideBrowserslist: ['iOS >= 9', 'Android >= 4.4'],\n      },\n    },\n    node: {\n      output: {\n        target: 'node',\n        overrideBrowserslist: ['node >= 20'],\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Accessing tsconfig.json Path\nDESCRIPTION: Shows how to access the absolute path to the tsconfig.json file within an Rsbuild plugin. If the project does not have a tsconfig.json file, the value will be undefined. This example logs the tsconfig.json path to the console.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/environment-api.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\n```js\napi.modifyRspackConfig((config, { environment }) => {\n  console.log(environment.tsconfigPath);\n  return config;\n});\n```\n```\n\n----------------------------------------\n\nTITLE: Accessing Environment API in Rsbuild Middleware\nDESCRIPTION: Example of using the environments API to access build artifact information in the server-side middleware. It demonstrates how to retrieve and log web stats.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/dev/setup-middlewares.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    setupMiddlewares: [\n      (middlewares, server) => {\n        middlewares.unshift(async (req, _res, next) => {\n          const webStats = await server.environments.web.getStats();\n\n          console.log(webStats.toJson({ all: false }));\n\n          next();\n        });\n      },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Integrating Rsbuild Dev Server with Express\nDESCRIPTION: Demonstrates how to integrate Rsbuild development server with an Express application, including middleware and WebSocket connection\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/dev-server-api.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRsbuild } from '@rsbuild/core';\nimport express from 'express';\n\nasync function startDevServer() {\n  const rsbuild = await createRsbuild({\n    rsbuildConfig: {\n      server: {\n        middlewareMode: true,\n      },\n    },\n  });\n\n  const app = express();\n\n  const rsbuildServer = await rsbuild.createDevServer();\n\n  app.use(rsbuildServer.middlewares);\n\n  const httpServer = app.listen(rsbuildServer.port, async () => {\n    await rsbuildServer.afterListen();\n  });\n\n  rsbuildServer.connectWebSocket({ server: httpServer });\n}\n```\n\n----------------------------------------\n\nTITLE: Using cross-env for Cross-Platform Compatibility\nDESCRIPTION: Demonstrates how to use cross-env package to set environment variables in a way that works across different operating systems, including Windows.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/debug/rsdoctor.mdx#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"dev:rsdoctor\": \"cross-env RSDOCTOR=true rsbuild dev\",\n    \"build:rsdoctor\": \"cross-env RSDOCTOR=true rsbuild build\"\n  },\n  \"devDependencies\": {\n    \"cross-env\": \"^7.0.0\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Customizing File Exclusion in Rsbuild Size Output\nDESCRIPTION: This snippet demonstrates how to customize the 'exclude' option to filter out specific file types (HTML files in this case) from the file size output in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/print-file-size.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  performance: {\n    printFileSize: {\n      exclude: (asset) =>\n        /\\.(?:map|LICENSE\\.txt)$/.test(asset.name) ||\n        /\\.html$/.test(asset.name),\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining TypeScript Types for inlineScripts Configuration\nDESCRIPTION: TypeScript type definitions for the output.inlineScripts option, showing the possible configuration formats including boolean, RegExp, function, or an object with enable and test properties.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/inline-scripts.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype InlineScriptsTest =\n  | RegExp\n  | ((params: { size: number; name: string }) => boolean);\n\ntype InlineScripts =\n  | boolean\n  | InlineScriptsTest\n  | {\n      enable?: boolean | 'auto';\n      test: InlineScriptsTest;\n    };\n```\n\n----------------------------------------\n\nTITLE: Using Public Variable in HTML Template\nDESCRIPTION: This HTML code shows the usage of a public variable inside an HTML template. Rsbuild will find and replace the variable name with its corresponding value during the compilation process. The public variable should be prefixed with PUBLIC_.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_24\n\nLANGUAGE: xml\nCODE:\n```\n<div><%= process.env.PUBLIC_NAME %></div>\n```\n\n----------------------------------------\n\nTITLE: Configuring Async Chunks with dynamicImportMode\nDESCRIPTION: Configuration example showing how to handle async chunks by setting dynamicImportMode to 'eager', which prevents Rspack from generating separate JS files for dynamic imports.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/inline-scripts.mdx#2025-04-21_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    inlineScripts: true,\n  },\n  tools: {\n    rspack: {\n      module: {\n        parser: {\n          javascript: {\n            dynamicImportMode: 'eager',\n          },\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Correct Tailwind CSS Configuration - JavaScript\nDESCRIPTION: This snippet shows the correct way to specify the content paths in the Tailwind CSS configuration to avoid scanning unnecessary directories like node_modules, especially in a monorepo setting.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/styling/tailwindcss-v3.mdx#2025-04-21_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nmodule.exports = {\n  content: [\n    './src/**/*.{html,js,ts,jsx,tsx}',\n    // 正确写法为 '../../packages/ui/src/**/*.{html,js,ts,jsx,tsx}'\n    '../../packages/ui/**/*.{html,js,ts,jsx,tsx}',\n  ],\n};\n```\n\n----------------------------------------\n\nTITLE: Overriding Environment Variables (.env.local file)\nDESCRIPTION: This `.env.local` file overrides the value of the `BAR` environment variable. `.env.local` files are intended for local development and should be added to `.gitignore`. Variables declared in `.env.local` take precedence over those in `.env`.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_18\n\nLANGUAGE: shell\nCODE:\n```\nBAR=2\n```\n\n----------------------------------------\n\nTITLE: Configuring Tailwind CSS Using rsbuild - JavaScript\nDESCRIPTION: This code snippet configures Tailwind CSS via the Rsbuild configuration file. It imports Tailwind CSS and sets up the postcssOptions for defining Tailwind's content scanning.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/styling/tailwindcss-v3.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nimport tailwindcss from 'tailwindcss';\n\nexport default {\n  tools: {\n    postcss: {\n      postcssOptions: {\n        plugins: [\n          tailwindcss({\n            content: ['./src/**/*.{html,js,ts,jsx,tsx}'],\n            // ...other options\n          }),\n        ],\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting a Single File Type as Static Asset in Rsbuild\nDESCRIPTION: This example shows how to configure Rsbuild to treat .json5 files as static assets using a regular expression pattern.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/source/assets-include.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  source: {\n    assetsInclude: /\\.json5$/,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Default CSS Loader Configuration in Rsbuild\nDESCRIPTION: Shows the default configuration options for css-loader, including CSS modules and source map settings based on Rsbuild config\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/css-loader.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultOptions = {\n  modules: rsbuildConfig.output.cssModules,\n  sourceMap: rsbuildConfig.output.sourceMap.css,\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Style Injection in Rsbuild (TypeScript)\nDESCRIPTION: This snippet demonstrates how to enable style injection in Rsbuild configuration. When set to true, CSS will be inlined into JS files and inserted via <style> tags at runtime.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/inject-styles.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    injectStyles: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring SRI Algorithm Option\nDESCRIPTION: Example demonstrating how to specify a custom hash algorithm (sha512) for SRI.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/security/sri.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  security: {\n    sri: {\n      algorithm: 'sha512',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using ASSET_PREFIX in JSX (JavaScript, Production)\nDESCRIPTION: This is the compiled output from the previous JSX snippet in production mode. The `ASSET_PREFIX` has been replaced with `https://example.com`. This will load the image from the configured CDN URL.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_10\n\nLANGUAGE: javascript\nCODE:\n```\nconst Image = <img src={`https://example.com/static/icon.png`} />;\n```\n\n----------------------------------------\n\nTITLE: Path Rewriting in Proxy Configuration\nDESCRIPTION: Example of rewriting the path when proxying requests. This configuration removes the '/api' prefix from the path when forwarding to the target server using the pathRewrite option.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/server/proxy.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  server: {\n    proxy: {\n      // http://localhost:3000/api -> http://localhost:3000\n      // http://localhost:3000/api/foo -> http://localhost:3000/foo\n      '/api': {\n        target: 'http://localhost:3000',\n        pathRewrite: { '^/api': '' },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Basic Proxy Configuration in Rsbuild\nDESCRIPTION: Basic example of configuring a proxy in Rsbuild to forward requests from a path to a target server. This setup proxies all requests with the '/api' path prefix to 'http://localhost:3000'.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/server/proxy.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  server: {\n    proxy: {\n      // http://localhost:3000/api -> http://localhost:3000/api\n      // http://localhost:3000/api/foo -> http://localhost:3000/api/foo\n      '/api': 'http://localhost:3000',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Custom HTML Template Parameters with Object Syntax in Rsbuild\nDESCRIPTION: Example of configuring custom template parameters using the object syntax. This approach allows defining static values that will be merged with default parameters and made available in HTML templates.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/html/template-parameters.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    templateParameters: {\n      foo: 'bar',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Creating Entry-Specific Meta Tags for MPA\nDESCRIPTION: Example of using a function to return different meta configurations based on the entry name in a Multi-Page Application (MPA).\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/html/meta.mdx#2025-04-21_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    meta({ entryName }) {\n      switch (entryName) {\n        case 'foo':\n          return {\n            description: 'this is foo page',\n          };\n        case 'bar':\n          return {\n            description: 'this is bar page',\n          };\n        default:\n          return {\n            description: 'this is other pages',\n          };\n      }\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Directly Passing Tailwind CSS Configuration in PostCSS - JavaScript\nDESCRIPTION: This snippet illustrates another way to include Tailwind CSS settings directly in the PostCSS configuration. It provides a convenient option for projects without a separate config file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/styling/tailwindcss-v3.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nmodule.exports = {\n  plugins: {\n    tailwindcss: {\n      content: ['./src/**/*.{html,js,ts,jsx,tsx}'],\n      // ...other options\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Rspack to Warn on Export Presence in Rsbuild\nDESCRIPTION: This snippet shows how to configure Rspack in Rsbuild to change export presence errors to warnings, which can be useful for third-party dependencies with known issues.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/faq/exceptions.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: {\n      module: {\n        parser: {\n          javascript: {\n            exportsPresence: 'warn',\n          },\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configure multiple Less plugins (TypeScript)\nDESCRIPTION: Registers multiple Less plugins with different configurations using the `include` and `exclude` options. This enables applying different Less loader options to different sets of Less files.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-less.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  plugins: [\n    pluginLess({\n      exclude: /\\.another\\.less$/,\n    }),\n    pluginLess({\n      include: /\\.another\\.less$/,\n      lessLoaderOptions: {\n        // some custom options\n      },\n    }),\n  ],\n};\n```\n\n----------------------------------------\n\nTITLE: Type Definition - Build Options\nDESCRIPTION: Type definitions for the build method options and return type.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\ntype BuildOptions = {\n  /**\n   * Whether to watch for file changes and rebuild.\n   * @default false\n   */\n  watch?: boolean;\n  /**\n   * Using a custom Rspack Compiler object.\n   */\n  compiler?: Compiler | MultiCompiler;\n};\n\nfunction Build(options?: BuildOptions): Promise<{\n  /**\n   * Rspack's [stats](https://rspack.dev/api/javascript-api/stats) object.\n   */\n  stats?: Rspack.Stats | Rspack.MultiStats;\n  /**\n   * Close the build and call the `onCloseBuild` hook.\n   * In watch mode, this method will stop watching.\n   */\n  close: () => Promise<void>;\n}>;\n```\n\n----------------------------------------\n\nTITLE: Importing components and URLs with exclude\nDESCRIPTION: This demonstrates how the `exclude` option affects the import behavior. The `a.svg` will be transformed and `b.svg` will be used as a normal static asset.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-svgr.mdx#2025-04-21_snippet_19\n\nLANGUAGE: typescript\nCODE:\n```\nimport component from './a.svg';\nimport url from './b.svg';\n\nconsole.log(component); // => React component\nconsole.log(url); // => resource url\n```\n\n----------------------------------------\n\nTITLE: Configuring Environment-Specific JS Source Maps in Rsbuild\nDESCRIPTION: Example of setting different source map formats based on NODE_ENV, using high-quality maps in production and faster maps in development.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/source-map.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    sourceMap: {\n      js:\n        process.env.NODE_ENV === 'production'\n          ? // 生产模式使用高质量的 source map 格式\n            'source-map'\n          : // 开发模式使用性能更好的 source map 格式\n            'cheap-module-source-map',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Environment-Based Configuration Modifications\nDESCRIPTION: This snippet demonstrates how to conditionally modify the Rspack configuration based on environment variables and build targets.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/configuration/rspack.mdx#2025-04-21_snippet_13\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    bundlerChain: (chain, { env, isProd, target, isServer, isWebWorker }) => {\n      if (env === 'development' || env === 'test') {\n        // ...\n      }\n      if (isProd) {\n        // ...\n      }\n      if (target === 'node') {\n        // ...\n      }\n      if (isServer) {\n        // ...\n      }\n      if (isWebWorker) {\n        // ...\n      }\n    },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Default DataUriLimit Values in JavaScript\nDESCRIPTION: This code snippet shows the default values for the dataUriLimit option. By default, assets smaller than 4KiB are inlined as base64.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/data-uri-limit.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultDatUriLimit = {\n  svg: 4096,\n  font: 4096,\n  image: 4096,\n  media: 4096,\n  assets: 4096,\n};\n```\n\n----------------------------------------\n\nTITLE: Customizing Output Path for inspectConfig in TypeScript\nDESCRIPTION: This example shows how to set a custom output path for the inspectConfig method using both writeToDisk and outputPath options. It demonstrates using an absolute path with path.join.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/instance.mdx#2025-04-21_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nimport path from 'node:path';\n\nawait rsbuild.inspectConfig({\n  writeToDisk: true,\n  outputPath: path.join(__dirname, 'custom-dir'),\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring SSR Environment Variables in Rsbuild\nDESCRIPTION: Shows how to set different SSR configurations for web and node environments using Rsbuild's environments feature\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/vite.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  environments: {\n    web: {\n      source: {\n        define: {\n          'import.meta.env.SSR': JSON.stringify(false),\n        },\n      },\n    },\n    node: {\n      source: {\n        define: {\n          'import.meta.env.SSR': JSON.stringify(true),\n        },\n      },\n      output: {\n        target: 'node',\n      },\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Setting exportType to default\nDESCRIPTION: This configures the SVGR plugin to use default exports for React components. Setting `exportType` to `'default'` allows you to import the SVG directly as a React component without using named imports.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-svgr.mdx#2025-04-21_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\npluginSvgr({\n  svgrOptions: {\n    exportType: 'default',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Example of environment variable usage in CRA\nDESCRIPTION: Shows how environment variables can be accessed in CRA projects, including destructuring the process.env object, which requires additional configuration in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/migration/cra.mdx#2025-04-21_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\n// CRA 中可以这样访问\nconst { PUBLIC_URL } = process.env;\nconsole.log(PUBLIC_URL);\nconsole.log(process.env);\n```\n\n----------------------------------------\n\nTITLE: Setting Absolute Path for Custom tsconfig in Rsbuild (TypeScript)\nDESCRIPTION: This example shows how to set an absolute path for a custom tsconfig.json file in Rsbuild configuration. It uses the path module to join the current directory with the custom tsconfig filename.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/tsconfig-path.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport path from 'node:path';\n\nexport default {\n  source: {\n    tsconfigPath: path.join(__dirname, 'tsconfig.custom.json'),\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using ASSET_PREFIX in JSX (JavaScript, Development)\nDESCRIPTION: This is the compiled output from the previous JSX snippet in development mode. The `ASSET_PREFIX` has been replaced with `/`.  This will load the image from the root of the development server.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\nconst Image = <img src={`/static/icon.png`} />;\n```\n\n----------------------------------------\n\nTITLE: Example usage of SVG as React component\nDESCRIPTION: Example showing how to import and use SVG files as React components in a React application, using the SVGR feature which needs to be configured in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/migration/cra.mdx#2025-04-21_snippet_6\n\nLANGUAGE: jsx\nCODE:\n```\nimport { ReactComponent as Logo } from './logo.svg';\n\nconst App = () => (\n  <div>\n    <Logo />\n  </div>\n);\n```\n\n----------------------------------------\n\nTITLE: Web Worker Script\nDESCRIPTION: This JavaScript code defines a simple Web Worker that listens for messages, multiplies the received data by 2, and posts the result back to the main thread. The worker is defined in the `worker.js` file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/web-workers.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nself.onmessage = (event) => {\n  const result = event.data * 2;\n  self.postMessage(result);\n};\n```\n\n----------------------------------------\n\nTITLE: Multiple Path Proxying with Context Option\nDESCRIPTION: Example of using the context option to proxy multiple paths to the same target. This configuration forwards both '/auth' and '/api' paths to the specified target server.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/server/proxy.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  server: {\n    proxy: [\n      {\n        context: ['/auth', '/api'],\n        target: 'http://localhost:3000',\n      },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using Tailwind CSS Utility Classes in HTML\nDESCRIPTION: This HTML snippet shows an example of using Tailwind CSS utility classes to style an h1 element. It demonstrates how to apply text size, font weight, and underline styles using Tailwind's class-based approach.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/styling/tailwindcss.mdx#2025-04-21_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<h1 class=\"text-3xl font-bold underline\">Hello world!</h1>\n```\n\n----------------------------------------\n\nTITLE: Environment-Specific Entry Configuration\nDESCRIPTION: Configuration showing how to set different entry points for web and node environments.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/entry.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\\n  environments: {\\n    web: {\\n      source: {\\n        entry: {\\n          index: './src/index.client.js',\\n        },\\n      },\\n      output: {\\n        target: 'web',\\n      },\\n    },\\n    node: {\\n      source: {\\n        entry: {\\n          index: './src/index.server.js',\\n        },\\n      },\\n      output: {\\n        target: 'node',\\n      },\\n    },\\n  },\\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring PostCSS for Tailwind CSS in JavaScript\nDESCRIPTION: This code snippet shows how to configure PostCSS to use the Tailwind CSS plugin in a postcss.config.mjs file. It registers the @tailwindcss/postcss plugin, which is necessary for integrating Tailwind CSS into the project.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/styling/tailwindcss.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  plugins: {\n    '@tailwindcss/postcss': {},\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Default Include Configuration in TypeScript\nDESCRIPTION: Shows the default configuration for source.include, which specifies which files are compiled by default, excluding node_modules for JavaScript files and including TypeScript/JSX files from any directory.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/source/include.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst defaultInclude = [\n  {\n    and: [rootPath, { not: /[\\\\/]node_modules[\\\\/]/ }],\n  },\n  /\\.(?:ts|tsx|jsx|mts|cts)$/,\n];\n```\n\n----------------------------------------\n\nTITLE: Updating Rsbuild Configuration to Disable Minification\nDESCRIPTION: This snippet shows how to update the Rsbuild configuration from the deprecated 'disableMinimize' option to the new 'minify' option for disabling minification in version 0.5.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/community/releases/v0-5.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    disableMinimize: true, // [!code --]\n    minify: false, // [!code ++]\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Accessing Normalized Config with getNormalizedConfig\nDESCRIPTION: Retrieves the normalized Rsbuild configuration. This method returns a processed configuration object with all function properties resolved to their values, providing the final effective configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_36\n\nLANGUAGE: typescript\nCODE:\n```\nrsbuild.onBeforeBuild(() => {\n  const config = api.getNormalizedConfig();\n  console.log(config.html.title);\n});\n```\n\n----------------------------------------\n\nTITLE: Increasing Node.js Memory Limit for Rsbuild Builds\nDESCRIPTION: This snippet demonstrates how to increase the Node.js memory limit to resolve 'JavaScript heap out of memory' errors during Rsbuild builds by modifying the package.json script.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/faq/exceptions.mdx#2025-04-21_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"build\": \"NODE_OPTIONS=--max_old_space_size=16384 rsbuild build\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Rsbuild for Web Worker Target\nDESCRIPTION: This TypeScript code shows how to configure Rsbuild to build Web Workers artifacts. It sets the `output.target` configuration option to `'web-worker'`, which instructs Rsbuild to generate a build that runs in a Worker thread.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/web-workers.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    target: 'web-worker',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Ant Design Import Transformation in Rsbuild 0.4\nDESCRIPTION: Shows how to manually add the import transformation configuration for Ant Design v3 or v4 in Rsbuild 0.4, which is no longer included by default in the React plugin.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/community/releases/v0-4.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  source: {\n    transformImport: [\n      {\n        libraryName: 'antd',\n        libraryDirectory: 'es',\n        style: 'css',\n      },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Modifying Rspack Configuration with a Plugin\nDESCRIPTION: Example showing how to integrate a third-party Rspack plugin (eslint-rspack-plugin) into Rsbuild by creating a wrapper plugin.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/index.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { RsbuildPlugin } from '@rsbuild/core';\nimport ESLintRspackPlugin from 'eslint-rspack-plugin';\n\nexport const pluginEslint = (options?: Options): RsbuildPlugin => ({\n  name: 'plugin-eslint',\n  setup(api) {\n    api.modifyRspackConfig((config) => {\n      config.plugins?.push(\n        new ESLintRspackPlugin({\n          // plugins options\n        }),\n      );\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using Tailwind CSS Utility Class in HTML - HTML\nDESCRIPTION: This snippet demonstrates how to use Tailwind CSS utility classes in an HTML element. It provides an example of a header element styled with Tailwind classes for size, font weight, and underline.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/styling/tailwindcss-v3.mdx#2025-04-21_snippet_6\n\nLANGUAGE: html\nCODE:\n```\n<h1 class=\"text-3xl font-bold underline\">Hello world!</h1>\n```\n\n----------------------------------------\n\nTITLE: Using onDevCompileDone in a Rsbuild Plugin\nDESCRIPTION: Example of creating a plugin that uses the onDevCompileDone hook to detect when compilation is complete and whether it's the first compile or a re-compile.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/hooks.mdx#2025-04-21_snippet_24\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onDevCompileDone(({ isFirstCompile }) => {\n      if (isFirstCompile) {\n        console.log('first compile!');\n      } else {\n        console.log('re-compile!');\n      }\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Final Code Output After Tree Shaking in JavaScript\nDESCRIPTION: This snippet illustrates the resulting code after applying tree shaking based on the language environment variable. The unused components are removed, reducing the overall bundle size.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_35\n\nLANGUAGE: JavaScript\nCODE:\n```\nconst App = () => {\n  if (false) {\n  } else if (true) {\n    return <EntryBar />;\n  }\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling Bundle Analysis via Package.json Script\nDESCRIPTION: Shows how to enable bundle analysis by adding an environment variable to the build script in package.json. This approach allows for on-demand bundle analysis without changing the project configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/performance/bundle-analyze.mdx#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"build:analyze\": \"BUNDLE_ANALYZE=true rsbuild build\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Inserting a Loader Before SWC Loader\nDESCRIPTION: This example demonstrates how to insert a custom loader before the built-in SWC loader in the execution chain.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/configuration/rspack.mdx#2025-04-21_snippet_10\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    bundlerChain: (chain, { CHAIN_ID }) => {\n      chain.module\n        .rule(CHAIN_ID.RULE.JS)\n        // Loader ID, not actually meaningful, just for locating\n        .use('my-loader')\n        .before(CHAIN_ID.USE.SWC)\n        // The package name or module path of the loader\n        .loader('my-loader')\n        .options({\n          // some options\n        });\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring File Watching in Rsbuild\nDESCRIPTION: This code example demonstrates how to customize file watching behavior in Rsbuild by configuring Rspack's 'watchOptions.ignored' to watch the 'node_modules/' directory while ignoring the '.git/' directory.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/hmr.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: {\n      watchOptions: {\n        ignored: /\\.git/,\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disable public directory\nDESCRIPTION: This TypeScript configuration shows how to disable the `public` directory feature using the `server.publicDir` option in `rsbuild.config.ts`. Setting it to `false` prevents Rsbuild from treating the directory as a source for static assets.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/static-assets.mdx#2025-04-21_snippet_15\n\nLANGUAGE: ts\nCODE:\n```\nexport default {\n  server: {\n    publicDir: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using getRsbuildConfig Method in TypeScript\nDESCRIPTION: This example demonstrates how to use the getRsbuildConfig method within the onBeforeBuild hook to access and log a specific configuration value.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/instance.mdx#2025-04-21_snippet_23\n\nLANGUAGE: typescript\nCODE:\n```\nrsbuild.onBeforeBuild(() => {\n  const config = rsbuild.getRsbuildConfig();\n  console.log(config.html?.title);\n});\n```\n\n----------------------------------------\n\nTITLE: Static HTML Template Configuration\nDESCRIPTION: Demonstrates how to configure a static HTML template file path in Rsbuild configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/template.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    template: './static/index.html',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Environment-Specific Filenames in Rsbuild Config\nDESCRIPTION: Demonstrates how to set different filenames for development and production builds using environment variables.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/filename.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst isProd = process.env.NODE_ENV === 'production';\n\nexport default {\n  output: {\n    filename: {\n      js: isProd ? '[name]_script.[contenthash:8].js' : '[name]_script.js',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Default Vue Loader Options\nDESCRIPTION: This JavaScript snippet shows the default options that are passed to `vue-loader`. It includes `compilerOptions` with `preserveWhitespace` set to `false`, and `experimentalInlineMatchResource` set to `true`.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/list/plugin-vue.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultOptions = {\n  compilerOptions: {\n    preserveWhitespace: false,\n  },\n  experimentalInlineMatchResource: true,\n};\n```\n\n----------------------------------------\n\nTITLE: Defining SetupMiddlewares Type in TypeScript\nDESCRIPTION: Type definition for the SetupMiddlewares configuration option, including the SetupMiddlewaresServer interface and the middleware function signature.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/dev/setup-middlewares.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype SetupMiddlewaresServer = {\n  sockWrite: (\n    type: string,\n    data?: string | boolean | Record<string, any>,\n  ) => void;\n  environments: EnvironmentAPI;\n};\n\ntype SetupMiddlewares = Array<\n  (\n    middlewares: {\n      unshift: (...handlers: RequestHandler[]) => void;\n      push: (...handlers: RequestHandler[]) => void;\n    },\n    server: SetupMiddlewaresServer,\n  ) => void\n>;\n```\n\n----------------------------------------\n\nTITLE: Loading Specific moment.js Locale File After Removal\nDESCRIPTION: Code example demonstrating how to selectively load a specific locale file after enabling the removeMomentLocale option, showing the import of moment.js and the Chinese locale file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/performance/remove-moment-locale.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport moment from 'moment';\nimport 'moment/locale/zh-cn';\n\nmoment.locale('zh-cn');\n```\n\n----------------------------------------\n\nTITLE: Using onAfterEnvironmentCompile for Dev Environment\nDESCRIPTION: Example of creating a plugin that uses the onAfterEnvironmentCompile hook to detect first compilation versus re-compilation in development mode.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/hooks.mdx#2025-04-21_snippet_23\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onAfterEnvironmentCompile(({ isFirstCompile }) => {\n      if (isFirstCompile) {\n        console.log('first compile!');\n      } else {\n        console.log('re-compile!');\n      }\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Referencing Static Assets with Aliases in CSS\nDESCRIPTION: Demonstrates using path aliases to reference static assets in CSS files.  This approach simplifies asset referencing and improves maintainability. Rsbuild resolves the alias to the correct file path during the build process.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/static-assets.mdx#2025-04-21_snippet_6\n\nLANGUAGE: css\nCODE:\n```\n.logo {\n  background-image: url('@/static/logo.png');\n}\n```\n\n----------------------------------------\n\nTITLE: Rendered HTML Output After Template Processing\nDESCRIPTION: Example of the resulting HTML after template parameters have been processed and applied. Shows how the '<%= foo %>' placeholder is replaced with the actual value 'bar'.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/html/template-parameters.mdx#2025-04-21_snippet_3\n\nLANGUAGE: html\nCODE:\n```\n<script>\n  window.foo = 'bar';\n</script>\n```\n\n----------------------------------------\n\nTITLE: Using onBeforeStartDevServer in a Rsbuild Plugin\nDESCRIPTION: Example of creating a plugin that uses the onBeforeStartDevServer hook to access the dev server instance and environment contexts before the server starts.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/hooks.mdx#2025-04-21_snippet_18\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onBeforeStartDevServer(({ server, environments }) => {\n      console.log('before starting dev server.');\n      console.log('the server is ', server);\n      console.log('the environments contexts are: ', environments);\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Rspack SplitChunks for Node Targets in TypeScript\nDESCRIPTION: This snippet demonstrates how to configure Rspack's splitChunks option directly for Node.js targets, where performance.chunkSplit doesn't apply in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/chunk-split.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: {\n      optimization: {\n        splitChunks: {\n          // options\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling Polyfill Injection in Rsbuild\nDESCRIPTION: Sets the output.polyfill option to 'off', which disables automatic polyfill injection. In this mode, developers are responsible for ensuring code compatibility across different browsers.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/polyfill.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    polyfill: 'off',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling Lightning CSS Plugin in Rsbuild Configuration\nDESCRIPTION: This snippet demonstrates how to enable the Lightning CSS plugin in Rsbuild configuration to replace built-in PostCSS, autoprefixer, and SWC CSS minimizer with Lightning CSS capabilities.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/community/releases/v0-5.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginLightningcss } from '@rsbuild/plugin-lightningcss';\n\nexport default {\n  plugins: [pluginLightningcss()],\n};\n```\n\n----------------------------------------\n\nTITLE: Modifying Rspack Config with a Function\nDESCRIPTION: This snippet shows how to modify Rspack configuration conditionally with a function, specifically setting the devtool option based on the environment.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/configuration/rspack.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: (config, { env }) => {\n      if (env === 'development') {\n        config.devtool = 'cheap-module-eval-source-map';\n      }\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Split Chunks Options Type Definition\nDESCRIPTION: This TypeScript snippet defines the type for the `splitChunks` option.  It specifies that both `vue` and `router` properties are boolean and configurable.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/list/plugin-vue.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\ntype SplitVueChunkOptions = {\n  vue?: boolean;\n  router?: boolean;\n};\n```\n\n----------------------------------------\n\nTITLE: Building Production Artifacts\nDESCRIPTION: This snippet demonstrates how to build production artifacts using the rsbuild.build method. The build method is called on the Rsbuild instance, triggering the production build process. This is necessary for deploying the application to a production environment.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/start/index.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nawait rsbuild.build();\n```\n\n----------------------------------------\n\nTITLE: Configuring resolve.extensions through tools.rspack\nDESCRIPTION: Alternative approach to configure file extensions using tools.rspack config. This method merges with default extensions rather than replacing them using webpack-merge.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/resolve/extensions.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: {\n      resolve: {\n        extensions: ['.ts', '.tsx', '.js'],\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Default Browserslist in Rsbuild\nDESCRIPTION: Default browserslist configuration used by Rsbuild when no custom configuration is defined. This targets modern browsers including Chrome 87+, Edge 88+, Firefox 78+, and Safari 14+.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/override-browserslist.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n['chrome >= 87', 'edge >= 88', 'firefox >= 78', 'safari >= 14'];\n```\n\n----------------------------------------\n\nTITLE: Configuring resolve.dedupe in Rsbuild Config File\nDESCRIPTION: Example showing how to configure resolve.dedupe to deduplicate React and ReactDOM packages by forcing them to resolve from the root node_modules directory.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/resolve/dedupe.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  resolve: {\n    dedupe: ['react', 'react-dom'],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring CSS Source Maps for Development in Rsbuild\nDESCRIPTION: This snippet shows how to enable CSS source maps only in development mode while using injectStyles, to avoid performance issues in production builds.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/source-map.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    injectStyles: true,\n    sourceMap: {\n      css: process.env.NODE_ENV === 'development',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Generated TypeScript Declaration for CSS Modules in Rsbuild\nDESCRIPTION: This TypeScript declaration file is automatically generated by Rsbuild 0.7's Typed CSS Modules plugin. It provides type definitions for the CSS classes defined in a CSS Module file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-7.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\ninterface CssExports {\n  'page-header': string;\n  pageHeader: string;\n}\ndeclare const cssExports: CssExports;\nexport default cssExports;\n```\n\n----------------------------------------\n\nTITLE: Filtered Manifest File Output Example (JSON)\nDESCRIPTION: Example of a manifest.json file after applying a filter to include only JavaScript files, showing the reduced content structure.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/manifest.mdx#2025-04-21_snippet_6\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"allFiles\": [\"/static/js/index.[hash].js\"],\n  \"entries\": {\n    \"index\": {\n      \"initial\": {\n        \"js\": [\"/static/js/index.[hash].js\"]\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Merged Configuration for Web Environment in Rsbuild\nDESCRIPTION: Example of the final merged configuration for the 'web' environment, showing how shared and environment-specific settings are combined.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/environments.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst webConfig = {\n  source: {\n    entry: {\n      index: './src/index.client.js',\n    },\n  },\n  output: {\n    target: 'web',\n  },\n  resolve: {\n    alias: {\n      '@common': './src/common',\n      '@common1': './src/web/common1',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling All Source Maps in Rsbuild\nDESCRIPTION: Example of using boolean true to enable source maps for both JS and CSS, with behavior dependent on the build mode.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/source-map.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    sourceMap: {\n      js: mode === 'development' ? 'cheap-module-source-map' : 'source-map',\n      css: true,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring SVGR plugin for Rsbuild\nDESCRIPTION: Configuration for setting up SVGR plugin in Rsbuild to support importing SVG files as React components, maintaining compatibility with CRA's ReactComponent feature.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/migration/cra.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginSvgr } from '@rsbuild/plugin-svgr';\n\nexport default {\n  plugins: [pluginSvgr({ mixedImport: true })],\n};\n```\n\n----------------------------------------\n\nTITLE: Defining output.externals Type in TypeScript\nDESCRIPTION: This snippet defines the type for the output.externals configuration option in TypeScript. It can be a string, object, function, RegExp, or an array of these types.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/externals.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype Externals =\n  | string\n  | object\n  | function\n  | RegExp\n  | Array<string | object | function | RegExp>;\n```\n\n----------------------------------------\n\nTITLE: Configuring Data URI Limit in Rsbuild\nDESCRIPTION: This TypeScript configuration snippet shows how to set the output.dataUriLimit option in Rsbuild 0.7 to 10000 bytes, reverting to the previous default value if desired.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-7.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    dataUriLimit: 10000,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using onBeforeBuild Hook\nDESCRIPTION: This hook is triggered before the build process starts. It provides access to the bundler configurations, allowing you to modify the Rspack configurations before the build.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_25\n\nLANGUAGE: typescript\nCODE:\n```\nrsbuild.onBeforeBuild(({ bundlerConfigs }) => {\n  console.log('the Rspack config is ', bundlerConfigs);\n});\n```\n\n----------------------------------------\n\nTITLE: Executing Production Build with Rsbuild\nDESCRIPTION: Shows how to perform a production build using the rsbuild.build() method, with error handling and optional watch mode.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/instance.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { logger } from '@rsbuild/core';\n\n// Basic build\nawait rsbuild.build();\n\n// Build with error handling\ntry {\n  await rsbuild.build();\n} catch (err) {\n  logger.error('Failed to build.');\n  logger.error(err);\n  process.exit(1);\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Default SourceMap Configuration in TypeScript\nDESCRIPTION: This code snippet shows the default configuration for source map generation. It enables JS source maps in development mode and disables them for CSS.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/source-map.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst defaultSourceMap = {\n  js: mode === 'development' ? 'cheap-module-source-map' : false,\n  css: false,\n};\n```\n\n----------------------------------------\n\nTITLE: Using onAfterStartDevServer in a Rsbuild Plugin\nDESCRIPTION: Example of creating a plugin that uses the onAfterStartDevServer hook to access the port and routes after the dev server has started.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/hooks.mdx#2025-04-21_snippet_22\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onAfterStartDevServer(({ port, routes }) => {\n      console.log('this port is: ', port);\n      console.log('this routes is: ', routes);\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring 'linked' Legal Comments in Rsbuild\nDESCRIPTION: This configuration moves all legal comments to a separate *.LICENSE.txt file and links to them via comments. This approach preserves legal information without affecting page performance.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/legal-comments.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    legalComments: 'linked',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using onCloseBuild Hook\nDESCRIPTION: This hook is triggered when the build process is closed. It can be used for cleanup or other finalization tasks that need to run when the build process ends.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_27\n\nLANGUAGE: typescript\nCODE:\n```\nrsbuild.onCloseBuild(async () => {\n  console.log('close build!');\n});\n```\n\n----------------------------------------\n\nTITLE: Type Definition of server.open Configuration in TypeScript\nDESCRIPTION: Defines the TypeScript type for server.open configuration, supporting boolean, string, string array, or object with target and before callback options.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/server/open.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype Open =\n  | boolean\n  | string\n  | string[]\n  | {\n      target?: string | string[];\n      before?: () => Promise<void> | void;\n    };\n```\n\n----------------------------------------\n\nTITLE: Setting Browserslist in package.json\nDESCRIPTION: Example of configuring browser support targets in package.json using the browserslist field.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/browserslist.mdx#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"browserslist\": [\n    \"iOS >= 9\",\n    \"Android >= 4.4\",\n    \"last 2 versions\",\n    \"> 0.2%\",\n    \"not dead\"\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Checking Plugin Existence in Rsbuild\nDESCRIPTION: TypeScript function signature for determining if a plugin has been registered in the current Rsbuild instance. It takes a plugin name as a string parameter and returns a boolean indicating whether the plugin exists.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/shared/isPluginExists.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction IsPluginExists(pluginName: string): boolean;\n```\n\n----------------------------------------\n\nTITLE: Defining HTTPS Types for Rsbuild Server Configuration\nDESCRIPTION: Type definition for the server.https configuration option in Rsbuild, which can accept either Node.js HTTPS ServerOptions or HTTP/2 SecureServerSessionOptions.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/https.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { ServerOptions } from 'node:https';\nimport type { SecureServerSessionOptions } from 'node:http2';\n\ntype Https = ServerOptions | SecureServerSessionOptions;\n```\n\n----------------------------------------\n\nTITLE: Using :deep() Selector in Vue Styles\nDESCRIPTION: This HTML snippet demonstrates how to use the `:deep()` selector in Vue scoped styles.  `:deep()` replaces the deprecated `/deep/` selector for targeting nested elements.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/list/plugin-vue.mdx#2025-04-21_snippet_6\n\nLANGUAGE: html\nCODE:\n```\n<style scoped>\n  .a :deep(.b) {\n    /* ... */\n  }\n</style>\n```\n\n----------------------------------------\n\nTITLE: Default sourceMap Configuration in Rsbuild\nDESCRIPTION: The default configuration enables JS source maps only in development mode using 'cheap-module-source-map' format, while CSS source maps are disabled in all modes.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/source-map.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst defaultSourceMap = {\n  js: mode === 'development' ? 'cheap-module-source-map' : false,\n  css: false,\n};\n```\n\n----------------------------------------\n\nTITLE: Defining GetRsbuildConfig Type in TypeScript\nDESCRIPTION: TypeScript type definition for the getRsbuildConfig function, showing its function signatures with different parameter options and return types.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/shared/getRsbuildConfig.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype GetRsbuildConfig = {\n  (): Readonly<RsbuildConfig>;\n  (type: 'original' | 'current'): Readonly<RsbuildConfig>;\n  (type: 'normalized'): NormalizedConfig;\n};\n```\n\n----------------------------------------\n\nTITLE: Accessing Config with getRsbuildConfig\nDESCRIPTION: Retrieves the current Rsbuild configuration. This method returns the raw configuration object, with function properties not resolved to their values.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_35\n\nLANGUAGE: typescript\nCODE:\n```\nrsbuild.onBeforeBuild(() => {\n  const config = rsbuild.getRsbuildConfig();\n  console.log(config.html?.title);\n});\n```\n\n----------------------------------------\n\nTITLE: Defining DistPathConfig Type in TypeScript\nDESCRIPTION: TypeScript type definition for the DistPathConfig object, which specifies the structure for configuring output paths of different file types in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/dist-path.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype DistPathConfig = {\n  root?: string;\n  html?: string;\n  js?: string;\n  jsAsync?: string;\n  css?: string;\n  cssAsync?: string;\n  svg?: string;\n  font?: string;\n  wasm?: string;\n  image?: string;\n  media?: string;\n  assets?: string;\n};\n```\n\n----------------------------------------\n\nTITLE: NPM Package Compilation Configuration\nDESCRIPTION: Shows how to configure source.include to compile specific npm packages from node_modules using both regex and path-based approaches.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/source/include.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport path from 'node:path';\n\nexport default {\n  source: {\n    include: [\n      /node_modules[\\\\/]query-string[\\\\/]/,\n      path.dirname(require.resolve('query-string')),\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Advanced Environment Configuration Merging\nDESCRIPTION: Shows how to merge multiple environment configurations using mergeEnvironmentConfig with type safety\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/hooks.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { EnvironmentConfig } from '@rsbuild/core';\n\nconst myPlugin = () => ({\n  setup(api) {\n    api.modifyEnvironmentConfig((userConfig, { mergeEnvironmentConfig }) => {\n      const extraConfig: EnvironmentConfig = {\n        source: { /* ... */ },\n        output: { /* ... */ },\n      };\n\n      return mergeEnvironmentConfig(userConfig, extraConfig);\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Dynamic PostCSS Configuration Based on File Path\nDESCRIPTION: Demonstrates how to apply different PostCSS configurations based on file paths using a function approach.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/tools/postcss.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    postcss: {\n      postcssOptions: (loaderContext) => {\n        if (/foo/.test(loaderContext.resourcePath)) {\n          return {\n            plugins: [require('postcss-plugin-a')],\n          };\n        }\n        return {\n          plugins: [require('postcss-plugin-b')],\n        };\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling File Watching for PublicDir\nDESCRIPTION: Example of enabling the watch option, which makes the dev server watch for changes in the public directory and reload the page when files change.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/public-dir.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    publicDir: {\n      watch: true,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Updating React Code After Mount ID Change\nDESCRIPTION: Example of how to update React code to use the new mount ID for selecting the DOM node when rendering the application.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/mount-id.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst domNode = document.getElementById('root'); // [!code --]\nconst domNode = document.getElementById('app'); // [!code ++]\n\nReactDOM.createRoot(domNode).render(<App />);\n```\n\n----------------------------------------\n\nTITLE: Proxying to External Domain in Rsbuild\nDESCRIPTION: Example of proxying requests to an external domain rather than a local server. This configuration forwards '/api' path requests to 'https://nodejs.org'.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/server/proxy.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  server: {\n    proxy: {\n      // http://localhost:3000/api -> https://nodejs.org/api\n      // http://localhost:3000/api/foo -> https://nodejs.org/api/foo\n      '/api': 'https://nodejs.org',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Rsbuild for Web Worker Output\nDESCRIPTION: This configuration snippet shows how to set up Rsbuild to generate build outputs suitable for the Web Workers environment by setting the output target to 'web-worker'.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/web-workers.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    target: 'web-worker',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Prefetch with String Include Filter\nDESCRIPTION: Example showing how to use a string pattern with the include option which gets converted to a RegExp to filter files for prefetching.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/performance/prefetch.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  performance: {\n    prefetch: {\n      include: '\\\\.png', // 等价于 `new RegExp('\\\\.png')`\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: MetaFunction Type Definition\nDESCRIPTION: Type definition for a function that can be used to configure meta tags dynamically, with access to default values and the current entry name.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/html/meta.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\ntype MetaFunction = ({\n  value: MetaOptions,\n  entryName: string,\n}) => MetaOptions | void;\n```\n\n----------------------------------------\n\nTITLE: Importing CSS with ?raw Query Parameter\nDESCRIPTION: This code snippet demonstrates how to import the raw CSS content as a string in JavaScript using the `?raw` query parameter.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/styling/css-usage.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport rawCss from './style.css?raw';\n\nconsole.log(rawCss); // 输出 CSS 文件的原始内容\n```\n\n----------------------------------------\n\nTITLE: Appending Rules\nDESCRIPTION: Shows how to append loader rules to the end of Rspack's rules list.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/tools/rspack.mdx#2025-04-21_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: (config, { appendRules }) => {\n      // 追加单条规则\n      appendRules({\n        test: /\\.foo/,\n        loader: require.resolve('foo-loader'),\n      });\n\n      // 以数组形式追加多条规则\n      appendRules([\n        {\n          test: /\\.foo/,\n          loader: require.resolve('foo-loader'),\n        },\n        {\n          test: /\\.bar/,\n          loader: require.resolve('bar-loader'),\n        },\n      ]);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Default SVG Type Declaration\nDESCRIPTION: Basic TypeScript type declarations for SVG modules, supporting both standard string content and React component imports.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-svgr.mdx#2025-04-21_snippet_23\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare module '*.svg' {\n  const content: string;\n  export default content;\n}\ndeclare module '*.svg?react' {\n  const ReactComponent: React.FunctionComponent<React.SVGProps<SVGSVGElement>>;\n  export default ReactComponent;\n}\n```\n\n----------------------------------------\n\nTITLE: Remote App Configuration for Module Federation\nDESCRIPTION: Configuration for a remote application in Module Federation, exposing a Button component and setting up the remote entry filename.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/module-federation/options.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\n\nexport default defineConfig({\n  server: {\n    port: 3002,\n  },\n  moduleFederation: {\n    options: {\n      name: 'remote',\n      exposes: {\n        './Button': './src/Button',\n      },\n      filename: 'remoteEntry.js',\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Importing Tailwind CSS Styles in CSS File - CSS\nDESCRIPTION: This snippet shows how to include Tailwind CSS styles in your main CSS entry file by using the @tailwind directive to import base, components, and utility styles.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/styling/tailwindcss-v3.mdx#2025-04-21_snippet_5\n\nLANGUAGE: css\nCODE:\n```\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n```\n\n----------------------------------------\n\nTITLE: Configuration Function with Dynamic Parameters\nDESCRIPTION: Shows how to export a configuration function that can dynamically compute configuration based on environment, command, and mode\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/configuration/rsbuild.mdx#2025-04-21_snippet_5\n\nLANGUAGE: js\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\n\nexport default defineConfig(({ env, command, envMode }) => ({\n  resolve: {\n    alias: {\n      '@foo': env === 'development' \n        ? './src/foo.dev.ts' \n        : './src/foo.prod.ts'\n    }\n  }\n}));\n```\n\n----------------------------------------\n\nTITLE: Extending import.meta.env Type in TypeScript\nDESCRIPTION: This snippet defines an interface to extend the type of import.meta.env in TypeScript. It ensures that TypeScript understands the properties of import.meta.env that are being used in the project.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/advanced/env-vars.mdx#2025-04-21_snippet_31\n\nLANGUAGE: TypeScript\nCODE:\n```\ninterface ImportMetaEnv {\n  // import.meta.env.PUBLIC_FOO\n  readonly PUBLIC_FOO: string;\n}\n\ninterface ImportMeta {\n  readonly env: ImportMetaEnv;\n}\n```\n\n----------------------------------------\n\nTITLE: Custom Manifest Generation Function in Rsbuild (TypeScript)\nDESCRIPTION: Example of using the manifest.generate function to customize the content of the manifest file, in this case only keeping the allAssets field.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/manifest.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    manifest: {\n      generate: ({ manifestData }) => {\n        return {\n          allAssets: manifestData.allFiles,\n        };\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using onAfterStartDevServer Hook in TypeScript\nDESCRIPTION: This example demonstrates how to use the onAfterStartDevServer hook to log the port and routes after the development server has started.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/instance.mdx#2025-04-21_snippet_17\n\nLANGUAGE: typescript\nCODE:\n```\nrsbuild.onAfterStartDevServer(({ port, routes }) => {\n  console.log('this port is: ', port);\n  console.log('this routes is: ', routes);\n});\n```\n\n----------------------------------------\n\nTITLE: Using onAfterBuild Hook\nDESCRIPTION: This hook is triggered after the build process completes. It provides access to the Rspack stats object, allowing you to process build results and statistics.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_26\n\nLANGUAGE: typescript\nCODE:\n```\nrsbuild.onAfterBuild(({ stats }) => {\n  console.log(stats?.toJson());\n});\n```\n\n----------------------------------------\n\nTITLE: Migrating output.overrideBrowserslist to environments config\nDESCRIPTION: Example showing how to convert target-specific browserslist configurations to the new environments format.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/rsbuild-0-x.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  environments: {\n    web: {\n      output: {\n        overrideBrowserslist: ['iOS >= 9', 'Android >= 4.4'],\n      },\n    },\n    node: {\n      output: {\n        overrideBrowserslist: ['node >= 20'],\n      },\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring HTML template in Rsbuild\nDESCRIPTION: Configuration example showing how to specify the HTML template path in Rsbuild, equivalent to CRA's behavior of using public/index.html as the template.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/migration/cra.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  html: {\n    template: './public/index.html',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Plugin Management with Rsbuild\nDESCRIPTION: Shows how to add, remove, and check for plugins in a Rsbuild instance, with options for environment-specific plugin registration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/instance.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\n// Add plugins\nrsbuild.addPlugins([pluginFoo(), pluginBar()]);\n\n// Add plugin before another plugin\nrsbuild.addPlugins([pluginFoo()], { before: 'bar' });\n\n// Check if plugin exists\nrsbuild.isPluginExists(pluginFoo().name); // true\n```\n\n----------------------------------------\n\nTITLE: Using onExit Hook\nDESCRIPTION: This hook is triggered when the Rsbuild process is about to exit. It provides the exit code, allowing for cleanup or logging before the process terminates.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_34\n\nLANGUAGE: typescript\nCODE:\n```\nrsbuild.onExit(({ exitCode }) => {\n  console.log('exit: ', exitCode);\n});\n```\n\n----------------------------------------\n\nTITLE: Creating Rsbuild configuration file\nDESCRIPTION: This snippet shows how to create an `rsbuild.config.ts` file and configure Rsbuild with the essential settings, including importing the `defineConfig` and `pluginVue` functions, defining the plugins, and specifying the entry point for the application. It leverages the `@rsbuild/core` and `@rsbuild/plugin-vue` packages.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/migration/vue-cli.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginVue } from '@rsbuild/plugin-vue';\n\nexport default defineConfig({\n  plugins: [pluginVue()],\n  source: {\n    // 指定入口文件\n    entry: {\n      index: './src/main.js',\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Adding TypeScript Declarations for Vue Files in Vue 2 Projects\nDESCRIPTION: This snippet provides the TypeScript type declaration for .vue files in Vue 2 projects. It allows TypeScript to correctly recognize Vue component files.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/framework/vue.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare module '*.vue' {\n  import Vue from 'vue';\n\n  export default Vue;\n}\n```\n\n----------------------------------------\n\nTITLE: Watching a Single File in Rsbuild\nDESCRIPTION: Configuration example showing how to watch a single file in Rsbuild. This setup will monitor a specific text file in the public directory for changes.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/watch-files.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  dev: {\n    watchFiles: {\n      paths: 'public/demo.txt',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using Function to Match Scripts for Inlining in Rsbuild\nDESCRIPTION: Configuration using a function to determine which scripts to inline based on file size, in this example, inlining files smaller than 10KB.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/inline-scripts.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    inlineScripts({ size }) {\n      return size < 10 * 1000;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Installing Rsbuild SVGR Plugin\nDESCRIPTION: This command installs the `@rsbuild/plugin-svgr` package as a development dependency using a package manager. The `-D` flag ensures that the plugin is only installed for development purposes.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-svgr.mdx#2025-04-21_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nadd @rsbuild/plugin-svgr -D\n```\n\n----------------------------------------\n\nTITLE: Setting REACT_PROFILER environment variable (JSON)\nDESCRIPTION: Sets the `REACT_PROFILER` environment variable to true in the `package.json` script. This allows enabling the React Profiler during the build process.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-react.mdx#2025-04-21_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"build:profiler\": \"REACT_PROFILER=true rsbuild build\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Using onExit in a Rsbuild Plugin\nDESCRIPTION: Example of creating a plugin that uses the onExit hook to execute code when the process is exiting, with access to the exit code.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/hooks.mdx#2025-04-21_snippet_28\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onExit(({ exitCode }) => {\n      console.log('exit: ', exitCode);\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Displaying Directory Structure After Enabling inlineStyles\nDESCRIPTION: Shows the modified output directory structure after enabling inlineStyles, with CSS content inlined in the HTML file and no separate CSS file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/inline-styles.mdx#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\ndist/html/main/index.html\ndist/static/js/main.js\n```\n\n----------------------------------------\n\nTITLE: Setting Favicon as Absolute Path in Rsbuild Configuration\nDESCRIPTION: This example shows how to set the favicon using an absolute file path in the Rsbuild configuration. It uses the path module to resolve the file location.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/favicon.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport path from 'node:path';\n\nexport default {\n  html: {\n    favicon: path.resolve(__dirname, './src/assets/icon.png'),\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using inspectConfig Method to Retrieve Configurations in TypeScript\nDESCRIPTION: This example shows how to use the inspectConfig method to get the Rsbuild and bundler configurations as strings and log them to the console.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/instance.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nconst { rsbuildConfig, bundlerConfigs } = await rsbuild.inspectConfig();\n\nconsole.log(rsbuildConfig, bundlerConfigs);\n```\n\n----------------------------------------\n\nTITLE: Configuring 'inline' Legal Comments in Rsbuild\nDESCRIPTION: This configuration keeps all legal comments in their original positions within the code. While preserving all information, it may increase the output file size.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/legal-comments.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    legalComments: 'inline',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing Function-based TransformImport in TypeScript\nDESCRIPTION: Examples of using a function to customize the transformImport behavior, either by modifying the existing imports or returning a new configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/transform-import.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  source: {\n    transformImport: (imports) => {\n      return imports.filter((data) => data.libraryName !== 'antd');\n    },\n  },\n};\n```\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  source: {\n    transformImport: () => {\n      return [\n        {\n          libraryName: 'antd',\n          libraryDirectory: 'es',\n          style: 'css',\n        },\n      ];\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Registering SWC Plugin with Rspack (JavaScript)\nDESCRIPTION: This snippet demonstrates how to register SWC's Wasm plugins, such as @swc/plugin-styled-components, in the Rspack configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/configuration/swc.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    swc: {\n      jsc: {\n        experimental: {\n          plugins: [['@swc/plugin-styled-components', {}]],\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining Rsbuild Configuration Retrieval Type\nDESCRIPTION: TypeScript type definition for the configuration retrieval function with multiple overload signatures. Supports retrieving original, current, and normalized configurations.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/shared/getRsbuildConfig.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype GetRsbuildConfig = {\n  (): Readonly<RsbuildConfig>;\n  (type: 'original' | 'current'): Readonly<RsbuildConfig>;\n  (type: 'normalized'): NormalizedConfig;\n};\n```\n\n----------------------------------------\n\nTITLE: Prefetch with Array Include Filter\nDESCRIPTION: Example showing how to use an array of filters with the include option to match files against multiple patterns for prefetching.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/performance/prefetch.mdx#2025-04-21_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  performance: {\n    prefetch: {\n      include: [/\\.png$/, '\\\\.jpg'],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Generated HTML with Prefetch Tags\nDESCRIPTION: Example of HTML output showing automatically injected prefetch tags for dynamic imports.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/prefetch.mdx#2025-04-21_snippet_3\n\nLANGUAGE: html\nCODE:\n```\n<html>\n  <head>\n    <title>Rsbuild App</title>\n    <script defer src=\"/static/js/index.js\"></script>\n    <!-- Generated prefetch tags -->\n    <link href=\"/static/js/async/src_bar_js.js\" rel=\"prefetch\" />\n    <link href=\"/static/js/async/src_foo_js.js\" rel=\"prefetch\" />\n  </head>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Configuring Usage-Based Polyfill Mode in Rsbuild\nDESCRIPTION: Setting the polyfill mode to 'usage', which analyzes source code and injects only required polyfills, resulting in smaller bundle sizes.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/browser-compatibility.mdx#2025-04-21_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    polyfill: 'usage',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining PublicDir Type in TypeScript\nDESCRIPTION: Type definition for the server.publicDir configuration option, which can be false, a single PublicDirOptions object, or an array of PublicDirOptions objects.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/public-dir.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype PublicDirOptions = {\n  name?: string;\n  copyOnBuild?: boolean | 'auto';\n  watch?: boolean;\n};\ntype PublicDir = false | PublicDirOptions | PublicDirOptions[];\n```\n\n----------------------------------------\n\nTITLE: Defining RsbuildPlugin Type in TypeScript\nDESCRIPTION: Defines the structure of a Rsbuild plugin, including properties for name, setup function, and plugin execution order.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/core.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype RsbuildPlugin = {\n  name: string;\n  pre?: string[];\n  post?: string[];\n  remove?: string[];\n  setup: (api: RsbuildPluginAPI) => Promise<void> | void;\n};\n```\n\n----------------------------------------\n\nTITLE: NPM Package Compilation Configuration\nDESCRIPTION: Shows how to configure compilation for specific npm packages using both regex and path-based matching.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/include.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport path from 'node:path';\n\nexport default {\n  source: {\n    include: [\n      /node_modules[\\\\/]query-string[\\\\/]/,\n      path.dirname(require.resolve('query-string')),\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Handling Environment Compilation Hook\nDESCRIPTION: Shows usage of onAfterEnvironmentCompile hook to detect first compilation and subsequent recompilations in development mode.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/hooks.mdx#2025-04-21_snippet_25\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onAfterEnvironmentCompile(({ isFirstCompile }) => {\n      if (isFirstCompile) {\n        console.log('first compile!');\n      } else {\n        console.log('re-compile!');\n      }\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: WebSocket Proxy Configuration in Rsbuild\nDESCRIPTION: Example of proxying WebSocket requests. This configuration enables WebSocket proxying for the '/rsbuild-hmr' path to the specified target server.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/server/proxy.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  server: {\n    proxy: {\n      '/rsbuild-hmr': {\n        target: 'http://localhost:3000', // 将会代理到 ws://localhost:3000/rsbuild-hmr\n        ws: true,\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting dev.client.port in Rsbuild v1\nDESCRIPTION: Example showing how to explicitly set the dev client port value, which now defaults to empty string.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/rsbuild-0-x.mdx#2025-04-21_snippet_12\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  dev: {\n    client: {\n      port: '<port>',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Solid Plugin Options\nDESCRIPTION: Shows how to customize the Solid plugin behavior by passing options to babel-preset-solid. The example demonstrates setting up server-side rendering and hydratable components.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-solid.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\npluginSolid({\n  solidPresetOptions: {\n    generate: 'ssr',\n    hydratable: true,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Defining Type for sourceMap Configuration in Rsbuild\nDESCRIPTION: TypeScript type definition for the output.sourceMap option, allowing boolean or object configuration with separate controls for JS and CSS source maps.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/source-map.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype SourceMap =\n  | boolean\n  | {\n      js?: Rspack.Configuration['devtool'];\n      css?: boolean;\n    };\n```\n\n----------------------------------------\n\nTITLE: Setting Relative Path for Custom tsconfig in Rsbuild (TypeScript)\nDESCRIPTION: This snippet demonstrates how to set a relative path for a custom tsconfig.json file in Rsbuild configuration. The path is relative to the project root directory.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/tsconfig-path.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  source: {\n    tsconfigPath: './tsconfig.custom.json',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring polyfill injection in Rsbuild\nDESCRIPTION: Configuration to enable automatic polyfill injection in Rsbuild based on usage, replacing the need for manually importing polyfills as in CRA.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/migration/cra.mdx#2025-04-21_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    polyfill: 'usage',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Dynamic Configuration with Environment Variables\nDESCRIPTION: Demonstrates how to use Node.js environment variables to conditionally set module aliases based on the current environment\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/configuration/rsbuild.mdx#2025-04-21_snippet_4\n\nLANGUAGE: ts\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\n\nexport default defineConfig({\n  resolve: {\n    alias: {\n      '@request': process.env.NODE_ENV === 'development'\n        ? './src/request.dev.js'\n        : './src/request.prod.js'\n    }\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: HTML Generation Control Configuration\nDESCRIPTION: Example showing how to control HTML file generation for specific entry points using the html attribute.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/entry.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\\n  source: {\\n    entry: {\\n      foo: './src/foo.js',\\n      bar: {\\n        import: './src/bar.js',\\n        html: false,\\n      },\\n    },\\n  },\\n};\n```\n\n----------------------------------------\n\nTITLE: Resulting Script Tag with Crossorigin Attribute in HTML\nDESCRIPTION: This HTML snippet shows the resulting <script> tag after building with the crossorigin attribute set to 'anonymous' and an asset prefix configured.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/html/crossorigin.mdx#2025-04-21_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<script\n  defer\n  src=\"https://example.com/static/js/main.js\"\n  crossorigin=\"anonymous\"\n></script>\n```\n\n----------------------------------------\n\nTITLE: Defining ProcessAssets Descriptor Type in TypeScript\nDESCRIPTION: Type definition for the descriptor parameter in processAssets, specifying stage, targets, and environments configuration for asset processing\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/core.mdx#2025-04-21_snippet_17\n\nLANGUAGE: typescript\nCODE:\n```\ntype ProcessAssetsDescriptor = {\n  stage: ProcessAssetsStage;\n  targets?: RsbuildTarget[];\n  environments?: string[];\n};\n```\n\n----------------------------------------\n\nTITLE: ProcessAssets Handler Type Definition\nDESCRIPTION: TypeScript type definition for the handler parameter in processAssets, detailing the context and available parameters\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/core.mdx#2025-04-21_snippet_20\n\nLANGUAGE: typescript\nCODE:\n```\ntype ProcessAssetsHandler = (context: {\n  assets: Record<string, Rspack.sources.Source>;\n  compiler: Rspack.Compiler;\n  compilation: Rspack.Compilation;\n  environment: EnvironmentContext;\n  sources: RspackSources;\n}) => Promise<void> | void;\n```\n\n----------------------------------------\n\nTITLE: Terminal Output When Bundle Analysis is Enabled\nDESCRIPTION: Shows the log message that appears in the terminal when bundle analysis is enabled, indicating where the HTML report file has been saved.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/performance/bundle-analyze.mdx#2025-04-21_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nWebpack Bundle Analyzer saved report to /Project/my-project/dist/report-web.html\n```\n\n----------------------------------------\n\nTITLE: Importing CSS from node_modules in SCSS (Deprecated)\nDESCRIPTION: This code snippet shows how to import a CSS file from `node_modules` in a SCSS file. Note: the `~` prefix is deprecated.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/styling/css-usage.mdx#2025-04-21_snippet_6\n\nLANGUAGE: scss\nCODE:\n```\n@import '~normalize.css';\n```\n\n----------------------------------------\n\nTITLE: Defining OnExit Hook in Typescript\nDESCRIPTION: Defines the signature of the `OnExit` function in TypeScript. The function accepts a callback that takes the exit code as a parameter and executes synchronously.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/shared/onExit.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction OnExit(callback: (context: { exitCode: number }) => void): void;\n```\n\n----------------------------------------\n\nTITLE: Using RegExp to Match Scripts for Inlining in Rsbuild\nDESCRIPTION: Configuration using a regular expression to match specific JavaScript files for inlining, in this case, targeting the main.js file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/inline-scripts.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    inlineScripts: /[\\\\/]main\\.\\w+\\.js$/,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Example HTML output with dev.assetPrefix set to a relative path\nDESCRIPTION: Shows the resulting script tag in HTML when dev.assetPrefix is set to '/example/', appending the path to the server URL.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/asset-prefix.mdx#2025-04-21_snippet_6\n\nLANGUAGE: html\nCODE:\n```\n<script defer src=\"http://localhost:3000/example/static/js/index.js\"></script>\n```\n\n----------------------------------------\n\nTITLE: Setting Meta Description using String Value\nDESCRIPTION: Example of setting a description meta tag using a string value, where the key becomes the name attribute and the value becomes the content attribute.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/html/meta.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    meta: {\n      description: 'a description of the page',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Environment Config Type Definition in TypeScript\nDESCRIPTION: TypeScript interface showing the structure of the normalized environment configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/environment-api.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\ntype NormalizedEnvironmentConfig = DeepReadonly<{\n  dev: NormalizedDevConfig;\n  html: NormalizedHtmlConfig;\n  tools: NormalizedToolsConfig;\n  source: NormalizedSourceConfig;\n  server: NormalizedServerConfig;\n  output: NormalizedOutputConfig;\n  plugins?: RsbuildPlugins;\n  security: NormalizedSecurityConfig;\n  performance: NormalizedPerformanceConfig;\n  moduleFederation?: ModuleFederationConfig;\n}>;\n```\n\n----------------------------------------\n\nTITLE: Updating Type References from Vite to Rsbuild\nDESCRIPTION: Demonstrates how to replace Vite's type definitions with Rsbuild's preset types in environment declaration file\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/vite.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\n// [!code --]\n/// <reference types=\"vite/client\" />\n// [!code ++]\n/// <reference types=\"@rsbuild/core/types\" />\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Rules\nDESCRIPTION: Demonstrates how to add custom loader rules to Rspack configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/tools/rspack.mdx#2025-04-21_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: (config, { addRules }) => {\n      // 添加单条规则\n      addRules({\n        test: /\\.foo/,\n        loader: require.resolve('foo-loader'),\n      });\n\n      // 以数组形式添加多条规则\n      addRules([\n        {\n          test: /\\.foo/,\n          loader: require.resolve('foo-loader'),\n        },\n        {\n          test: /\\.bar/,\n          loader: require.resolve('bar-loader'),\n        },\n      ]);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining Default HTML Meta Tags in Rsbuild\nDESCRIPTION: The default configuration for HTML meta tags in Rsbuild, which includes charset and viewport settings.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/html/meta.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst defaultMeta = {\n  // <meta charset=\"UTF-8\" />\n  charset: {\n    charset: 'UTF-8',\n  },\n  // <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n  viewport: 'width=device-width, initial-scale=1.0',\n};\n```\n\n----------------------------------------\n\nTITLE: Body Script Injection HTML Structure\nDESCRIPTION: Example of script tag injection in the body section when configured with body injection.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/html/inject.mdx#2025-04-21_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<html>\n  <head>\n    <title></title>\n    <link href=\"/static/css/main.css\" rel=\"stylesheet\" />\n  </head>\n  <body>\n    <div id=\"root\"></div>\n    <script defer src=\"/static/js/runtime-main.js\"></script>\n    <script defer src=\"/static/js/main.js\"></script>\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Manual Tag Injection Template\nDESCRIPTION: Example of manual script tag injection using template parameters when html.inject is set to false.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/html/inject.mdx#2025-04-21_snippet_5\n\nLANGUAGE: html\nCODE:\n```\n<html>\n  <head>\n    <script src=\"https://example.com/a.js\"></script>\n    <%= htmlPlugin.tags.headTags %>\n    <script src=\"https://example.com/b.js\"></script>\n  </head>\n  <body>\n    <div id=\"root\"></div>\n    <%= htmlPlugin.tags.bodyTags %>\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Enabling Emotion Support with SWC (JavaScript)\nDESCRIPTION: This snippet shows how to enable Emotion support in Rspack using SWC by registering the @swc/plugin-emotion plugin.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/configuration/swc.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    swc: {\n      jsc: {\n        experimental: {\n          plugins: [['@swc/plugin-emotion', {}]],\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling All Source Maps in Rsbuild\nDESCRIPTION: Example of using boolean false to disable source maps for both JS and CSS files regardless of build mode.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/source-map.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    sourceMap: {\n      js: false,\n      css: false,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Connecting WebSocket for HMR\nDESCRIPTION: Illustrates how to connect WebSocket to enable Hot Module Replacement (HMR) when using a custom server\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/dev-server-api.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst rsbuildServer = await rsbuild.createDevServer();\n\nconst httpServer = app.listen(rsbuildServer.port);\n\nrsbuildServer.connectWebSocket({ server: httpServer });\n```\n\n----------------------------------------\n\nTITLE: Setting dev.assetPrefix to True in Rsbuild Config (JavaScript)\nDESCRIPTION: Example of setting dev.assetPrefix to true, which causes Rsbuild to use http://localhost:<port>/ as the URL prefix for static assets.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/dev/asset-prefix.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  dev: {\n    assetPrefix: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring CSS Extract Loader Options in JavaScript\nDESCRIPTION: This example shows how to set CSS Extract Loader options in Rsbuild. It demonstrates setting the esModule option to false.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/css-extract.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    cssExtract: {\n      loaderOptions: {\n        esModule: false,\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Prefetch with RegExp Include Filter\nDESCRIPTION: Example showing how to use a regular expression with the include option to filter which files should be prefetched.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/performance/prefetch.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  performance: {\n    prefetch: {\n      // 匹配所有 .png 文件\n      include: /\\.png$/,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Updating npm scripts in package.json for Rsbuild\nDESCRIPTION: This snippet shows how to update the npm scripts in package.json from Modern.js Builder commands to Rsbuild CLI commands.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/migration/modern-builder.mdx#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"dev\": \"rsbuild dev\",\n    \"build\": \"rsbuild build\",\n    \"preview\": \"rsbuild preview\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Modify Less version (JavaScript)\nDESCRIPTION: Demonstrates how to override the default Less version used by the plugin by specifying the `implementation` option. This allows using a project-specific Less version.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-less.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\npluginLess({\n  lessLoaderOptions: {\n    implementation: require('less'),\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Setting Relative Root Path in Rsbuild Configuration (TypeScript)\nDESCRIPTION: This snippet demonstrates how to set a relative path for the root directory in the Rsbuild configuration file. The root is set to './foo' relative to the current working directory.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/root.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  root: './foo',\n};\n```\n\n----------------------------------------\n\nTITLE: Using onAfterCreateCompiler in a Rsbuild Plugin\nDESCRIPTION: Example of creating a plugin that uses the onAfterCreateCompiler hook to access the compiler instance after it has been created.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/hooks.mdx#2025-04-21_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onAfterCreateCompiler(({ compiler }) => {\n      console.log('the compiler is ', compiler);\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Resulting HTML Title Tag (HTML)\nDESCRIPTION: This snippet shows the HTML output generated when setting the title to 'Example'. It demonstrates the <title> tag that will be inserted into the HTML document.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/html/title.mdx#2025-04-21_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<title>Example</title>\n```\n\n----------------------------------------\n\nTITLE: Configuring resolve.extensions in Rsbuild\nDESCRIPTION: Example showing how to configure custom file extensions for automatic resolution in Rsbuild. This configuration overrides the default extensions list.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/resolve/extensions.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  resolve: {\n    extensions: ['.ts', '.tsx', '.js'],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Importing CSS from node_modules in JS\nDESCRIPTION: This code snippet illustrates how to import a CSS file from the `node_modules` directory within a JavaScript file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/styling/css-usage.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\n/* 引用 normalize.css */\n/* https://github.com/necolas/normalize.css */\nimport 'normalize.css';\n```\n\n----------------------------------------\n\nTITLE: Default PublicDir Configuration Values\nDESCRIPTION: The default configuration values for Rsbuild's public directory settings, including the directory name, copy behavior during build, and watch setting.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/server/public-dir.mdx#2025-04-21_snippet_1\n\nLANGUAGE: js\nCODE:\n```\nconst defaultValue = {\n  name: 'public',\n  copyOnBuild: 'auto',\n  watch: false,\n};\n```\n\n----------------------------------------\n\nTITLE: Prefetch with Function Include Filter\nDESCRIPTION: Example showing how to use a function with the include option to programmatically determine which files should be prefetched.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/performance/prefetch.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  performance: {\n    prefetch: {\n      include: (filename) => filename.endsWith('.png'),\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Plugin Communication with Symbol Identifier\nDESCRIPTION: Advanced example of using Symbol for unique plugin API identification to prevent naming conflicts\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/core.mdx#2025-04-21_snippet_23\n\nLANGUAGE: typescript\nCODE:\n```\nexport const PARENT_API_ID = Symbol('plugin-parent');\n\nconst pluginParent = () => ({\n  name: 'plugin-parent',\n  setup(api) {\n    api.expose(PARENT_API_ID, {\n      // some api\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Deduplicating Dependencies in Yarn Projects\nDESCRIPTION: This command uses yarn-deduplicate to automatically merge duplicate dependencies in Yarn projects, followed by running yarn to update the lock file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/optimization/optimize-bundle.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nnpx yarn-deduplicate && yarn\n```\n\n----------------------------------------\n\nTITLE: Displaying Directory Structure Before Enabling inlineStyles\nDESCRIPTION: Shows the default output directory structure in Rsbuild before enabling the inlineStyles option, with separate HTML, CSS, and JS files.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/inline-styles.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ndist/html/main/index.html\ndist/static/css/style.css\ndist/static/js/main.js\n```\n\n----------------------------------------\n\nTITLE: Defining PublicDir Types in TypeScript\nDESCRIPTION: TypeScript type definitions for the PublicDir configuration options, including the structure of PublicDirOptions and the possible values for PublicDir.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/server/public-dir.mdx#2025-04-21_snippet_0\n\nLANGUAGE: ts\nCODE:\n```\ntype PublicDirOptions = {\n  name?: string;\n  copyOnBuild?: boolean | 'auto';\n  watch?: boolean;\n};\ntype PublicDir = false | PublicDirOptions | PublicDirOptions[];\n```\n\n----------------------------------------\n\nTITLE: Customizing Progress Bar ID in Rsbuild Configuration\nDESCRIPTION: Illustrates how to modify the progress bar's ID, which changes the text displayed on the left side of the progress bar, using TypeScript.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/dev/progress-bar.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    progressBar: {\n      id: 'Some Text',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Excluding Files from JavaScript Compression (TypeScript)\nDESCRIPTION: This snippet configures the SwcJsMinimizerRspackPlugin to exclude specific files from compression in the output settings.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/configuration/swc.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    minify: {\n      jsOptions: {\n        exclude: /foo\\/bar/,\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Rspack for Node Target in Rsbuild\nDESCRIPTION: This snippet demonstrates how to adjust the Rspack configuration specifically for the Node.js target using the isServer utility.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/rspack.mdx#2025-04-21_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: (config, { isServer }) => {\n      if (isServer) {\n        // ...\n      }\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring PostCSS Plugin with Parameters\nDESCRIPTION: Shows how to configure a PostCSS plugin with custom parameters using function call approach.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/tools/postcss.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    postcss: (opts, { addPlugins }) => {\n      const viewportPlugin = require('postcss-px-to-viewport')({\n        viewportWidth: 375,\n      });\n      addPlugins(viewportPlugin);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Forcing Image Inlining in React Component\nDESCRIPTION: Demonstrates how to force inlining of an image resource using the 'inline' URL parameter, regardless of its size.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/optimization/inline-assets.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport React from 'react';\nimport img from './foo.png?inline';\n\nexport default function Foo() {\n  return <img src={img} />;\n}\n```\n\n----------------------------------------\n\nTITLE: Defining InlineStyles Types in TypeScript\nDESCRIPTION: TypeScript type definitions for the inlineStyles configuration option, including boolean, test function, and object-based configurations.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/inline-styles.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype InlineStylesTest =\n  | RegExp\n  | ((params: { size: number; name: string }) => boolean);\n\ntype InlineStyles =\n  | boolean\n  | InlineStylesTest\n  | {\n      enable?: boolean | 'auto';\n      test: InlineStylesTest;\n    };\n```\n\n----------------------------------------\n\nTITLE: Creating Custom Asset Processing Rules for PNG Files in Rsbuild\nDESCRIPTION: Configuration demonstrating how to bypass Rsbuild's built-in asset processing for PNG files and implement custom handling. This example excludes PNG files from the default image rule and adds a custom loader.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/static-assets.mdx#2025-04-21_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    bundlerChain(chain, { CHAIN_ID }) {\n      chain.module\n        // Use `CHAIN_ID.RULE.IMAGE` to locate the built-in image rule\n        .rule(CHAIN_ID.RULE.IMAGE)\n        .exclude.add(/\\.png$/);\n    },\n    rspack(config, { addRules }) {\n      addRules([\n        {\n          test: /\\.png$/,\n          // Add a custom loader to handle png images\n          loader: 'custom-png-loader',\n        },\n      ]);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Adjusting Data URI Limit in Rsbuild Configuration\nDESCRIPTION: This configuration example shows how to set the data URI limit to the previous default value of 10KB in Rsbuild 0.7.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/community/releases/v0-7.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    dataUriLimit: 10000,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Body Injection in Rsbuild\nDESCRIPTION: Demonstrates how to configure Rsbuild to inject script tags into the body. This is done by setting 'html.inject' to 'body' in the configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/inject.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    inject: 'body',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Custom Hash Format Configuration\nDESCRIPTION: Example showing how to customize the hash format and length using fullhash with 16 characters.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/filename-hash.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    filenameHash: 'fullhash:16',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using named imports in App.jsx\nDESCRIPTION: This demonstrates how to use named imports in the component. The `ReactComponent` is imported and can then be used in the component.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-svgr.mdx#2025-04-21_snippet_5\n\nLANGUAGE: jsx\nCODE:\n```\nimport { ReactComponent as Logo } from './logo.svg';\n\nexport const App = () => <Logo />;\n```\n\n----------------------------------------\n\nTITLE: Customizing Output Paths in Rsbuild Configuration\nDESCRIPTION: Example of customizing the output paths in Rsbuild configuration. This snippet demonstrates how to change the root directory and JavaScript output path.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/dist-path.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    distPath: {\n      root: 'build',\n      js: 'resource/js',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Retrieving All Rsbuild Configurations - TypeScript\nDESCRIPTION: This function retrieves all Rsbuild configurations in a normalized form. It does not require any parameters and returns a read-only type of NormalizedConfig.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/shared/getNormalizedConfig.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n/** Get all Rsbuild configurations */\nfunction GetNormalizedConfig(): Readonly<NormalizedConfig>;\n```\n\n----------------------------------------\n\nTITLE: Building Production Outputs with Rsbuild\nDESCRIPTION: Uses the build method on an Rsbuild instance to create production-ready outputs. This method is used for creating deployable assets for production environments.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/start/index.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nawait rsbuild.build();\n```\n\n----------------------------------------\n\nTITLE: Using onAfterBuild in a Rsbuild Plugin\nDESCRIPTION: Example of creating a plugin that uses the onAfterBuild hook to access build statistics after the build process completes.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/hooks.mdx#2025-04-21_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onAfterBuild(({ isFirstCompile, stats }) => {\n      console.log(stats?.toJson(), isFirstCompile);\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Source Maps for Production\nDESCRIPTION: Example of using the isProd utility to set source map configuration specifically for production builds.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/bundler-chain.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    bundlerChain: (chain, { isProd }) => {\n      if (isProd) {\n        chain.devtool('source-map');\n      }\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using Dynamic Import with Magic Comments for Chunk Naming\nDESCRIPTION: Example of using dynamic import with magic comments to specify a custom chunk name for asynchronously loaded modules.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/filename.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nconst { add } = await import(\n  /* webpackChunkName: \"my-chunk-name\" */ './add.ts'\n);\n```\n\n----------------------------------------\n\nTITLE: Importing CSS from node_modules in CSS\nDESCRIPTION: This code snippet demonstrates how to import a CSS file from `node_modules` inside another CSS file using the `@import` rule.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/styling/css-usage.mdx#2025-04-21_snippet_5\n\nLANGUAGE: css\nCODE:\n```\n@import 'normalize.css';\n\nbody {\n  /* */\n}\n```\n\n----------------------------------------\n\nTITLE: Default Entry Configuration\nDESCRIPTION: Default entry configuration showing the standard index.js entry point, with support for various file extensions.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/entry.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst defaultEntry = {\\n  // Rsbuild also supports other suffixes by default, such as ts, tsx, jsx, mts, cts, mjs, cjs\\n  index: './src/index.js',\\n};\n```\n\n----------------------------------------\n\nTITLE: Opening Page Automatically in Rsbuild Dev Server\nDESCRIPTION: This command starts the Rsbuild dev server and automatically opens the page in the browser. It can also specify a custom URL to open.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/cli.mdx#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nrsbuild dev --open\n```\n\n----------------------------------------\n\nTITLE: Configuring Build Scripts in package.json\nDESCRIPTION: Define npm scripts for building and previewing Rsbuild project, enabling standard build and preview commands\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/static-deploy.mdx#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"build\": \"rsbuild build\",\n    \"preview\": \"rsbuild preview\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Automatically Inlined Image in JavaScript\nDESCRIPTION: Demonstrates how Rsbuild automatically inlines small images and converts them to Base64 encoded strings.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/optimization/inline-assets.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport smallImage from './static/smallImage.png';\n\nconsole.log(smallImage); // \"data:image/png;base64,iVBORw0KGgo...\"\n```\n\n----------------------------------------\n\nTITLE: Enabling CORS for All Origins in Rsbuild Config\nDESCRIPTION: This example demonstrates how to enable CORS for all origins, which is not recommended for security reasons.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/cors.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    // Equivalent to `{ origin: '*' }`\n    cors: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Previewing Production Build of Rsbuild Project in Bash\nDESCRIPTION: Command to preview the production build of a Rsbuild project locally using pnpm, which serves the built files for testing before deployment.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/packages/create-rsbuild/template-common/README.md#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\npnpm preview\n```\n\n----------------------------------------\n\nTITLE: Defining AppIcon TypeScript Types\nDESCRIPTION: TypeScript type definitions for app icon configuration, including AppIconItem and AppIcon interfaces\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/app-icon.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype AppIconItem = {\n  src: string;\n  size: number;\n  target?: 'apple-touch-icon' | 'web-app-manifest';\n};\n\ntype AppIcon = {\n  name?: string;\n  icons: AppIconItem[];\n  filename?: string;\n};\n```\n\n----------------------------------------\n\nTITLE: MetaOptions Type Definition for String Values\nDESCRIPTION: Type definition for meta options where values are strings, which will be mapped to name and content attributes.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/html/meta.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ntype MetaOptions = {\n  [name: string]: string;\n};\n```\n\n----------------------------------------\n\nTITLE: Directory Structure Before Enabling inlineScripts\nDESCRIPTION: Example of the default output directory structure before enabling the inlineScripts option, showing separate HTML, CSS, and JS files.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/inline-scripts.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ndist/html/main/index.html\ndist/static/css/style.css\ndist/static/js/main.js\n```\n\n----------------------------------------\n\nTITLE: Example - Dev Server Usage\nDESCRIPTION: Examples showing how to use the dev server start method.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\nimport { logger } from '@rsbuild/core';\n\n// Start dev server\nawait rsbuild.startDevServer();\n\n// Start dev server and handle the error\ntry {\n  await rsbuild.startDevServer();\n} catch (err) {\n  logger.error('Failed to start dev server.');\n  logger.error(err);\n  process.exit(1);\n}\n```\n\n----------------------------------------\n\nTITLE: Indirect Dependencies Compilation\nDESCRIPTION: Configuration example for compiling both a package and its dependencies that contain ESNext code.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/source/include.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  source: {\n    include: [\n      /node_modules[\\\\/]query-string[\\\\/]/,\n      /node_modules[\\\\/]decode-uri-component[\\\\/]/,\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Arco Design Transform Import Configuration\nDESCRIPTION: Configuration for @arco-design/web-react import transformation.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-4.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  source: {\n    transformImport: [\n      {\n        libraryName: '@arco-design/web-react',\n        libraryDirectory: 'es',\n        camelToDashComponentName: false,\n        style: 'css',\n      },\n      {\n        libraryName: '@arco-design/web-react/icon',\n        libraryDirectory: 'react-icon',\n        camelToDashComponentName: false,\n      },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Registering Default Configuration Plugin in Typescript\nDESCRIPTION: Demonstrates how to modify Rsbuild configuration by setting default values and using the modifyRsbuildConfig hook\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/hooks.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.modifyRsbuildConfig((config) => {\n      config.html ||= {};\n      config.html.title = 'My Default Title';\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Importing Assets as Raw Strings\nDESCRIPTION: Shows how to use the ?raw query parameter to import the raw content of static assets as a string in JavaScript.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/static-assets.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport rawSvg from './static/logo.svg?raw';\n\nconsole.log(rawSvg); // The raw content of the SVG file\n```\n\n----------------------------------------\n\nTITLE: Configuring Advanced Script Inlining Options in Rsbuild\nDESCRIPTION: Advanced configuration for script inlining, demonstrating the use of the enable and test options to control inlining behavior.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/inline-scripts.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    inlineScripts: {\n      enable: 'auto',\n      test: /[\\\\/]main\\.\\w+\\.js$/,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling Lightning CSS in Rsbuild\nDESCRIPTION: This code snippet demonstrates how to disable Lightning CSS in Rsbuild and configure the css-minimizer plugin.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/styling/css-usage.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginCssMinimizer } from '@rsbuild/plugin-css-minimizer';\n\nexport default {\n  plugins: [pluginCssMinimizer()],\n  tools: {\n    lightningcssLoader: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting a Global Threshold for All Assets\nDESCRIPTION: Example showing how to set a single threshold of 10KiB for all static asset types.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/data-uri-limit.mdx#2025-04-21_snippet_2\n\nLANGUAGE: js\nCODE:\n```\nexport default {\n  output: {\n    dataUriLimit: 10 * 1024,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Polyfill Option in Rsbuild v1\nDESCRIPTION: Example showing how to set the output.polyfill option to 'usage' when an application needs polyfills.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/rsbuild-0-x.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    polyfill: 'usage',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using onCloseBuild in a Rsbuild Plugin\nDESCRIPTION: Example of creating a plugin that uses the onCloseBuild hook to execute code when the build process is closed.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/hooks.mdx#2025-04-21_snippet_17\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onCloseBuild(() => {\n      console.log('close build!');\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: RegExp-Based CSS Inlining Configuration\nDESCRIPTION: Configuration example using regular expression to match specific CSS files for inlining.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/inline-styles.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    inlineStyles: /[\\\\/]main\\.\\w+\\.css$/,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Default Polyfill Mode in Rsbuild (Off)\nDESCRIPTION: Setting the default polyfill mode to 'off', which doesn't inject any polyfills. This is the default behavior in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/browser-compatibility.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    polyfill: 'off',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Selective File Writing Pattern in TypeScript\nDESCRIPTION: Configuration to selectively write files to disk based on a pattern matching function, excluding hot-update temporary files.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/dev/write-to-disk.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    writeToDisk: (file) => !file.includes('.hot-update.'),\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting dev.assetPrefix to a Relative Path in Rsbuild Config (JavaScript)\nDESCRIPTION: Example of setting dev.assetPrefix to a relative path, which will be prepended to static asset URLs.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/dev/asset-prefix.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  dev: {\n    assetPrefix: '/example/',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Removing the CSS Rule\nDESCRIPTION: This snippet shows how to completely remove the built-in CSS processing rule from the configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/configuration/rspack.mdx#2025-04-21_snippet_11\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    bundlerChain: (chain, { CHAIN_ID }) => {\n      chain.module.rules.delete(CHAIN_ID.RULE.CSS);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Adding PostCSS Plugin using Function Approach\nDESCRIPTION: Demonstrates how to add a PostCSS plugin using the function approach with addPlugins utility.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/tools/postcss.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    postcss: (opts, { addPlugins }) => {\n      addPlugins(require('postcss-px-to-viewport'));\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Decorator Version in Rsbuild\nDESCRIPTION: Shows how to set the decorator version in Rsbuild configuration, allowing the use of legacy decorators instead of the default 2022-03 version.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/typescript.mdx#2025-04-21_snippet_4\n\nLANGUAGE: ts\nCODE:\n```\nexport default {\n  source: {\n    decorators: {\n      version: 'legacy',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining ProgressBar Type in TypeScript\nDESCRIPTION: Type definition for the ProgressBar option, which can be a boolean or an object with an optional id property.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/progress-bar.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype ProgressBar =\n  | boolean\n  | {\n      id?: string;\n    };\n```\n\n----------------------------------------\n\nTITLE: Configuring HTML Plugin in Rsbuild\nDESCRIPTION: Shows how to modify html-rspack-plugin options using the tools.htmlPlugin configuration in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/html-template.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    htmlPlugin(config, { entryName }) {\n      if (process.env.NODE_ENV === 'production') {\n        config.filename = `${entryName}.[contenthash:8].html`;\n      }\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Storybook with Rsbuild for React\nDESCRIPTION: This snippet shows how to set up Storybook configuration to use Rsbuild with React framework.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/community/releases/v0-7.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { StorybookConfig } from 'storybook-react-rsbuild';\n\nconst config: StorybookConfig = {\n  framework: 'storybook-react-rsbuild',\n};\n\nexport default config;\n```\n\n----------------------------------------\n\nTITLE: Creating a Polyfill Script in JavaScript\nDESCRIPTION: Example of creating a simple polyfill script that logs a message to the console. This script can be used as a pre-entry file in Rsbuild configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/pre-entry.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconsole.log('I am a polyfill');\n```\n\n----------------------------------------\n\nTITLE: Importing CSS Module without Named Exports\nDESCRIPTION: Demonstrates the standard way to import and use CSS Module classes when namedExport is disabled.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/css-modules.mdx#2025-04-21_snippet_10\n\nLANGUAGE: javascript\nCODE:\n```\nimport styles from './style.module.css';\n\nconsole.log(styles.foo);\n```\n\n----------------------------------------\n\nTITLE: Plugin API Exposure with Symbol Identifier\nDESCRIPTION: Example of using api.expose to share plugin APIs with a unique Symbol identifier\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/core.mdx#2025-04-21_snippet_21\n\nLANGUAGE: typescript\nCODE:\n```\nconst pluginParent = () => ({\n  name: 'plugin-parent',\n  setup(api) {\n    api.expose('plugin-parent', {\n      value: 1,\n      double: (val: number) => val * 2,\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Basic App Icon Configuration\nDESCRIPTION: Basic JavaScript configuration example showing how to set up app icons with different sizes\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/app-icon.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    appIcon: {\n      name: 'My Website',\n      icons: [\n        { src: './src/assets/icon-192.png', size: 192 },\n        { src: './src/assets/icon-512.png', size: 512 },\n      ],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling Filename Hash in Rsbuild Configuration\nDESCRIPTION: Configuration example showing how to disable the hash value in output filenames by setting the output.filenameHash option to false.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/filename-hash.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    filenameHash: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Asset Prefix in TypeScript\nDESCRIPTION: Shows how to configure asset prefixes for development and production environments in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/env-vars.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    assetPrefix: '/',\n  },\n  output: {\n    copy: [{ from: './static', to: 'static' }],\n    assetPrefix: 'https://example.com',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Appending Plugins\nDESCRIPTION: Shows how to add plugins to the end of Rspack's plugin list.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/tools/rspack.mdx#2025-04-21_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: (config, { appendPlugins }) => {\n      // 添加单个插件\n      appendPlugins([new PluginA()]);\n\n      // 以数组形式添加多个插件\n      appendPlugins([new PluginA(), new PluginB()]);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting High-Quality Source Maps for JS in Rsbuild\nDESCRIPTION: This example demonstrates how to configure Rsbuild to generate high-quality source maps for JavaScript files in all environments.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/source-map.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    sourceMap: {\n      js: 'source-map',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Custom Injection Based on Entry Name\nDESCRIPTION: Example of using a function to determine injection location based on entry name in MPA scenarios.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/html/inject.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    inject({ entryName }) {\n      return entryName === 'foo' ? 'body' : 'head';\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Replacing Builder plugin with Rsbuild plugin\nDESCRIPTION: This example shows how to replace the Modern.js Builder Vue plugin with the Rsbuild Vue plugin in the configuration file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/migration/modern-builder.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginVue } from '@rsbuild/plugin-vue';\n\nexport default defineConfig({\n  plugins: [pluginVue()],\n});\n```\n\n----------------------------------------\n\nTITLE: Installing Dependencies for Rsbuild Project in Bash\nDESCRIPTION: Command to install project dependencies using pnpm package manager, which is required before running any other commands.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/packages/create-rsbuild/template-common/README.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\npnpm install\n```\n\n----------------------------------------\n\nTITLE: Plugin Hook Order Configuration\nDESCRIPTION: Demonstrates how to set the order of plugin hooks using the new order field.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-4.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.modifyRsbuildConfig({\n      handler: () => console.log('hello'),\n      order: 'pre',\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Processing Assets with Stage Configuration\nDESCRIPTION: Example of using processAssets API with 'additional' stage to modify assets during the build process\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/dev/core.mdx#2025-04-21_snippet_18\n\nLANGUAGE: javascript\nCODE:\n```\napi.processAssets({ stage: 'additional' }, ({ assets }) => {\n  // ...\n});\n```\n\n----------------------------------------\n\nTITLE: Using onCloseBuild Hook in TypeScript\nDESCRIPTION: This example demonstrates how to use the onCloseBuild hook to log a message when the build process is closed.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/instance.mdx#2025-04-21_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\nrsbuild.onCloseBuild(async () => {\n  console.log('close build!');\n});\n```\n\n----------------------------------------\n\nTITLE: Enabling CORS for Specific Origin in Rsbuild Config\nDESCRIPTION: This example shows how to enable CORS for a specific origin in the Rsbuild configuration file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/cors.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    cors: {\n      // Configures the `Access-Control-Allow-Origin` CORS response header\n      origin: 'https://example.com',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Replacing Preset Aliases in Rsbuild\nDESCRIPTION: Using a function to completely replace the preset alias object with a new configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/resolve/alias.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  resolve: {\n    alias: (alias) => {\n      return {\n        '@common': './src/common',\n      };\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Adding Rspack Banner Plugin in Rsbuild\nDESCRIPTION: This snippet demonstrates how to add the Rspack Banner Plugin to the configuration using the rspack utility.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/rspack.mdx#2025-04-21_snippet_10\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: (config, { rspack }) => {\n      config.plugins?.push(new rspack.BannerPlugin());\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Rsbuild Sass Plugin\nDESCRIPTION: This configuration snippet shows how to install and register the Sass plugin in Rsbuild 0.7.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/community/releases/v0-7.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginSass } from '@rsbuild/plugin-sass';\n\nexport default {\n  plugins: [pluginSass()],\n};\n```\n\n----------------------------------------\n\nTITLE: Manual Prefetch Tag in HTML\nDESCRIPTION: Shows the HTML output for a manually added prefetch tag, which can be used to prefetch external resources.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/performance/prefetch.mdx#2025-04-21_snippet_5\n\nLANGUAGE: html\nCODE:\n```\n<link rel=\"prefetch\" href=\"https://example.com/some-script.js\" />\n```\n\n----------------------------------------\n\nTITLE: Accessing Rspack Types\nDESCRIPTION: Demonstrates how to import and use types from @rspack/core through the Rspack namespace in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/types.mdx#2025-04-21_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { Rspack } from '@rsbuild/core';\n\nconst rspackConfig: Rspack.Configuration = {};\n```\n\n----------------------------------------\n\nTITLE: Previewing Rsbuild Production Build\nDESCRIPTION: This command previews the production build of a Rsbuild project locally. It requires the build command to be run first to generate the build outputs.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/cli.mdx#2025-04-21_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nrsbuild preview\n```\n\n----------------------------------------\n\nTITLE: Accessing RsbuildContext Type\nDESCRIPTION: Demonstrates how to import and use the RsbuildContext type, which represents the context property in the Rsbuild instance.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/types.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { RsbuildContext } from '@rsbuild/core';\n\nconst context: RsbuildContext = rsbuild.context;\n```\n\n----------------------------------------\n\nTITLE: Configuring sassLoaderOptions with a simple object\nDESCRIPTION: This code shows how to configure the `sassLoaderOptions` by providing an object.  The provided options will be shallowly merged with the default configuration, except for `sassOptions`, which will be deeply merged. In this example, only the `sourceMap` option is modified.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/list/plugin-sass.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\npluginSass({\n  sassLoaderOptions: {\n    sourceMap: true,\n  },\n});\n\n```\n\n----------------------------------------\n\nTITLE: Setting Custom HTML Template in Rsbuild Config (TypeScript)\nDESCRIPTION: This snippet shows how to set a custom HTML template path using the html.template config in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/html-template.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  html: {\n    template: './static/index.html',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling Source Maps in Rsbuild\nDESCRIPTION: Configuration to disable JavaScript source maps in Rsbuild to improve build performance.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/optimization/build-performance.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    sourceMap: {\n      js: false,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining ProgressBar Type in TypeScript\nDESCRIPTION: Defines the TypeScript type for the ProgressBar configuration, which can be a boolean or an object with an optional id property.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/dev/progress-bar.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype ProgressBar =\n  | boolean\n  | {\n      id?: string;\n    };\n```\n\n----------------------------------------\n\nTITLE: Handling Process Exit Hook\nDESCRIPTION: Demonstrates using onExit hook to handle process exit events with access to exit code.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/hooks.mdx#2025-04-21_snippet_30\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onExit(({ exitCode }) => {\n      console.log('exit: ', exitCode);\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Manually Adding postcss-flexbugs-fixes in Rsbuild 0.4\nDESCRIPTION: Demonstrates how to manually add the postcss-flexbugs-fixes plugin in Rsbuild 0.4, which is no longer included by default.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/community/releases/v0-4.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nmodule.exports = {\n  'postcss-flexbugs-fixes': {},\n};\n```\n\n----------------------------------------\n\nTITLE: Renaming disableFilenameHash to filenameHash in Rsbuild 0.4\nDESCRIPTION: Illustrates the change from 'output.disableFilenameHash' to 'output.filenameHash' in Rsbuild 0.4 configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/community/releases/v0-4.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n// Before\nexport default {\n  output: {\n    disableFilenameHash: true,\n  },\n};\n\n// After\nexport default {\n  output: {\n    filenameHash: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Injecting Custom Tags in Rsbuild\nDESCRIPTION: Demonstrates how to inject custom tags into the HTML using the html.tags configuration in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/html-template.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  html: {\n    tags: [\n      { tag: 'script', attrs: { src: 'https://cdn.example.com/my-script.js' } },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Scoped Rsbuild Package Update\nDESCRIPTION: Command to upgrade only packages under the @rsbuild scope using Taze CLI tool.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/upgrade-rsbuild.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nnpx taze --include /@rsbuild/ -w\n```\n\n----------------------------------------\n\nTITLE: Importing Rsbuild in CommonJS Format\nDESCRIPTION: Shows how to require the createRsbuild function using CommonJS syntax, which is supported as an alternative to ES Modules.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/start/index.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nconst { createRsbuild } = require('@rsbuild/core');\n```\n\n----------------------------------------\n\nTITLE: Handling Production Server Start Hook\nDESCRIPTION: Example of using onBeforeStartProdServer hook to execute logic before production server starts.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/dev/hooks.mdx#2025-04-21_snippet_28\n\nLANGUAGE: typescript\nCODE:\n```\nconst myPlugin = () => ({\n  setup(api) {\n    api.onBeforeStartProdServer(() => {\n      console.log('before start!');\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Prepending Plugins\nDESCRIPTION: Example of adding plugins to the beginning of Rspack's plugin list.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/tools/rspack.mdx#2025-04-21_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: (config, { prependPlugins }) => {\n      // 添加单个插件\n      prependPlugins(new PluginA());\n\n      // 以数组形式添加多个插件\n      prependPlugins([new PluginA(), new PluginB()]);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: External Directory Output Configuration\nDESCRIPTION: Example showing how to configure output to an external directory, where cleanup won't occur by default.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/clean-dist-path.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    distPath: {\n      root: '../../some-dir',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Handling Environment Variables\nDESCRIPTION: Load and inject Vue CLI-style environment variables into Rsbuild configuration\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/vue-cli.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig, loadEnv } from '@rsbuild/core';\n\nconst { publicVars } = loadEnv({ prefixes: ['VUE_APP_'] });\n\nexport default defineConfig({\n  source: {\n    define: publicVars,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Accessing TSConfig Path in JavaScript\nDESCRIPTION: Example showing how to access the TypeScript configuration file path in a plugin.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/environment-api.mdx#2025-04-21_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\napi.modifyRspackConfig((config, { environment }) => {\n  console.log(environment.tsconfigPath);\n  return config;\n});\n```\n\n----------------------------------------\n\nTITLE: Retrieving Current Rsbuild Configuration\nDESCRIPTION: Retrieves the current Rsbuild configuration, which can change during different execution stages, such as after applying configuration modifications.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/shared/getRsbuildConfig.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\ngetRsbuildConfig('current');\n```\n\n----------------------------------------\n\nTITLE: Function-based Rspack Configuration\nDESCRIPTION: Shows how to modify Rspack config using a function approach for more control.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/tools/rspack.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: (config) => {\n      config.resolve ||= {};\n      config.resolve.alias ||= {};\n      config.resolve.alias['@util'] = 'src/util';\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using Port Placeholder in dev.assetPrefix (JavaScript)\nDESCRIPTION: Example of using the <port> placeholder in dev.assetPrefix to handle dynamic port assignment.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/dev/asset-prefix.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  dev: {\n    assetPrefix: 'http://localhost:<port>/',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Advanced InlineStyles Configuration\nDESCRIPTION: Example of using the full configuration object with enable and test options.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/inline-styles.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    inlineStyles: {\n      enable: 'auto',\n      test: /[\\\\/]main\\.\\w+\\.css$/,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling Script Inlining in Rsbuild Configuration\nDESCRIPTION: JavaScript configuration to enable script inlining in Rsbuild. This will inline all JavaScript files into the HTML file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/inline-scripts.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    inlineScripts: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: CSS Modules Auto Configuration Example\nDESCRIPTION: Example showing how to configure auto CSS Modules activation using a custom function\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/css-modules.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    cssModules: {\n      auto: (resource) => {\n        return resource.includes('.module.') || resource.includes('shared/');\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Advanced cleanDistPath Configuration in JavaScript\nDESCRIPTION: Example of using the object syntax for cleanDistPath to explicitly enable cleaning.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/clean-dist-path.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    // 等价于 `cleanDistPath: true`\n    cleanDistPath: {\n      enable: true,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Updating Package.json Scripts for Rsbuild\nDESCRIPTION: Updates the npm scripts in package.json from CRA commands to Rsbuild CLI commands.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/cra.mdx#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"start\": \"rsbuild dev\",\n    \"build\": \"rsbuild build\",\n    \"preview\": \"rsbuild preview\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Default HTML Template with Root Element\nDESCRIPTION: The default HTML template structure in Rsbuild that includes a div with id 'root' for component mounting.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/mount-id.mdx#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<body>\n  <div id=\"root\"></div>\n</body>\n```\n\n----------------------------------------\n\nTITLE: Configuring Build Output to Disk in TypeScript\nDESCRIPTION: Basic configuration to enable writing build output files to disk during development mode instead of keeping them in memory.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/dev/write-to-disk.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    writeToDisk: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using React plugin in Rsbuild\nDESCRIPTION: Register and use the @rsbuild/plugin-react plugin in Rsbuild configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/migration/webpack.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\nimport { pluginReact } from '@rsbuild/plugin-react'; // [!code highlight]\n\nexport default defineConfig({\n  plugins: [pluginReact()], // [!code highlight]\n});\n```\n\n----------------------------------------\n\nTITLE: Conditional cleanDistPath Configuration in JavaScript\nDESCRIPTION: Example of conditionally setting cleanDistPath based on the NODE_ENV, cleaning only in production mode.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/clean-dist-path.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    cleanDistPath: process.env.NODE_ENV === 'production',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Object Configuration for HTML Plugin\nDESCRIPTION: Example showing how to configure the HTML plugin using an object type configuration to set scriptLoading behavior.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/tools/html-plugin.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    htmlPlugin: {\n      scriptLoading: 'blocking',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Supported Console Types Definition\nDESCRIPTION: Type definition showing all supported console method types that can be removed.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/remove-console.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\ntype ConsoleType = 'log' | 'info' | 'warn' | 'error' | 'table' | 'group';\n```\n\n----------------------------------------\n\nTITLE: Using static assets in excluded files\nDESCRIPTION: Since page-b/index.ts is excluded, the url will be imported as a static asset.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-svgr.mdx#2025-04-21_snippet_22\n\nLANGUAGE: typescript\nCODE:\n```\nimport url from './logo.svg';\n\nconsole.log(url); // => Resource url\n```\n\n----------------------------------------\n\nTITLE: Replacing Vue Plugin from Builder to Rsbuild\nDESCRIPTION: Update Vue plugin import and configuration in Rsbuild config file\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/modern-builder.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { builderPluginVue } from '@modern-js/builder-plugin-vue'; // [!code --]\nimport { pluginVue } from '@rsbuild/plugin-vue'; // [!code ++]\n\nexport default defineConfig({\n  builderPlugins: [builderPluginVue()], // [!code --]\n  plugins: [pluginVue()], // [!code ++]\n});\n```\n\n----------------------------------------\n\nTITLE: Generated CSS Module TypeScript Declaration\nDESCRIPTION: This is an example of the automatically generated TypeScript declaration file for a CSS Module.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/community/releases/v0-7.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\ninterface CssExports {\n  'page-header': string;\n  pageHeader: string;\n}\ndeclare const cssExports: CssExports;\nexport default cssExports;\n```\n\n----------------------------------------\n\nTITLE: Demonstrating Antd Import Transformation in JavaScript\nDESCRIPTION: Shows how the import statement for Antd's Button component is transformed based on the configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/transform-import.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Button } from 'antd';\n```\n\nLANGUAGE: javascript\nCODE:\n```\nimport Button from 'antd/es/button';\nimport 'antd/es/button/style';\n```\n\n----------------------------------------\n\nTITLE: Configuring Rspack Plugins in Rsbuild\nDESCRIPTION: Example of how to register Rspack or webpack plugins separately from Rsbuild plugins.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/plugins.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  // Rsbuild Plugins\n  plugins: [pluginStylus()],\n  tools: {\n    rspack: {\n      // Rspack or webpack Plugins\n      plugins: [new SomeWebpackPlugin()],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Demonstrating Lodash Import Transformation in JavaScript\nDESCRIPTION: Shows how the import statement for Lodash's get function is transformed based on the configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/transform-import.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nimport { get } from 'lodash';\n```\n\nLANGUAGE: javascript\nCODE:\n```\nimport get from 'lodash/get';\n```\n\n----------------------------------------\n\nTITLE: Configuring transformImport in Rsbuild\nDESCRIPTION: Use the source.transformImport option to replace babel-plugin-import functionality in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/migration/webpack.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  source: {\n    transformImport: [\n      { libraryName: 'some-library', libraryDirectory: 'es', style: true },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Customizing Less Loader Options - Function Configuration\nDESCRIPTION: Configuring Less loader options using a function that receives and modifies default configuration\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/list/plugin-less.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\npluginLess({\n  lessLoaderOptions(config) {\n    config.lessOptions = {\n      javascriptEnabled: false,\n    };\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Lightning CSS and CSS Minimizer in Rsbuild\nDESCRIPTION: Example of disabling Lightning CSS loader and configuring CSS minimizer plugin in Rsbuild configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/styling/css-usage.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginCssMinimizer } from '@rsbuild/plugin-css-minimizer';\n\nexport default {\n  plugins: [pluginCssMinimizer()],\n  tools: {\n    lightningcssLoader: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Modifying Default Meta Tags using Function\nDESCRIPTION: Example of using a function to modify the default meta configuration by adding a description tag.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/html/meta.mdx#2025-04-21_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    meta({ value }) {\n      value.description = 'this is my page';\n      return value;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using import.meta.env.BASE_URL in JavaScript\nDESCRIPTION: Demonstrates how to use import.meta.env.BASE_URL to construct URLs for static assets in client-side code.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/env-vars.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nconst image = new Image();\n// Equivalent to \"/foo/favicon.ico\"\nimage.src = `${import.meta.env.BASE_URL}/favicon.ico`;\n```\n\n----------------------------------------\n\nTITLE: Customizing JavaScript Filename in Rsbuild Configuration\nDESCRIPTION: Example of modifying the JavaScript filename in the Rsbuild configuration to use a custom naming pattern.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/filename.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    filename: {\n      js: '[name]_script.js',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Transforming SVGs in included files\nDESCRIPTION: The logo will be transformed to a React Component, because the importer is included.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-svgr.mdx#2025-04-21_snippet_21\n\nLANGUAGE: typescript\nCODE:\n```\nimport Logo from './logo.svg';\n\nconsole.log(Logo); // => React component\n```\n\n----------------------------------------\n\nTITLE: TSConfig Paths Configuration Example\nDESCRIPTION: Example of configuring path aliases in tsconfig.json using the paths compiler option.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/resolve/alias-strategy.mdx#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"compilerOptions\": {\n    \"paths\": {\n      \"@common/*\": [\"./src/common-1/*\"]\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring JS File Inlining in Rsbuild\nDESCRIPTION: Shows how to enable inlining of JS files into HTML files using the output.inlineScripts configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/optimization/inline-assets.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    inlineScripts: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring WebAssembly Output Directory\nDESCRIPTION: Configuration example for customizing the output directory of .wasm files in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/wasm-assets.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    distPath: {\n      wasm: 'resource/wasm',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Legacy Decorators in Rsbuild\nDESCRIPTION: Example configuration for using legacy decorators in Rsbuild, equivalent to TypeScript's experimentalDecorators setting.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/source/decorators.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  source: {\n    decorators: {\n      version: 'legacy',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Async Rspack Configuration\nDESCRIPTION: Example of using async function to dynamically import and configure Rspack plugins.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/tools/rspack.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: async (config) => {\n      const { default: ESLintPlugin } = await import('eslint-webpack-plugin');\n      config.plugins?.push(new ESLintPlugin());\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: CSS Modules Mode Configuration Example\nDESCRIPTION: Example of configuring CSS Modules mode based on file path\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/css-modules.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    cssModules: {\n      mode: (resourcePath) => {\n        if (/\\.module\\.css$/.test(resourcePath)) {\n          return 'local';\n        }\n        return 'global';\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Server Base Path in TypeScript\nDESCRIPTION: Shows how to set the server's base path using the server.base configuration in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/env-vars.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    base: '/foo',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Adding Rspack Extensions\nDESCRIPTION: Demonstrates how to merge additional file extensions with default Rspack configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/tools/rspack.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: {\n      resolve: {\n        // 与内置的 resolve.extensions 合并\n        extensions: ['.foo'],\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: JavaScript Module Configuration\nDESCRIPTION: Example of using defineConfig in a JavaScript module file (.mjs) to configure resolve.alias using a callback function.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/configuration/rsbuild.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\n\nexport default defineConfig({\n  resolve: {\n    alias: (opts) => {\n      opts['@common'] = './src/common';\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Setting Meta Tags in Rsbuild\nDESCRIPTION: Explains how to set custom meta tags using the html.meta configuration in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/html-template.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  html: {\n    meta: {\n      description: 'a description of the page',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Browser Selection Commands\nDESCRIPTION: Commands for specifying different browsers using environment variables.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/server/open.mdx#2025-04-21_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\n# Chrome\nBROWSER=chrome npx rsbuild dev\n\n# Edge\nBROWSER=edge npx rsbuild dev\n\n# Edge\nBROWSER=firefox npx rsbuild dev\n```\n\n----------------------------------------\n\nTITLE: Configuring CSS Extraction in Rsbuild 0.2\nDESCRIPTION: 'output.disableCssExtract' has been renamed to 'output.injectStyles' for clarity.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-2.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    disableCssExtract: true,\n  },\n};\n```\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    injectStyles: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling Manifest Generation in Rsbuild Configuration (TypeScript)\nDESCRIPTION: Basic example of enabling manifest file generation in Rsbuild by setting output.manifest to true in the configuration file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/manifest.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    manifest: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom Mount ID in Rsbuild\nDESCRIPTION: Example of how to modify the default mount ID from 'root' to 'app' in the Rsbuild configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/mount-id.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    mountId: 'app',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling Filename Hash Configuration\nDESCRIPTION: Configuration example showing how to disable hash values in output filenames.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/filename-hash.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    filenameHash: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring the exclude option for Sass files\nDESCRIPTION: This shows how to use the `exclude` option to prevent certain `.scss` files from being processed by `sass-loader`.  The value is a regular expression that matches the filenames to exclude. In this example, files located in `some-folder/foo.scss` will be excluded.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/list/plugin-sass.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\npluginSass({\n  exclude: /some-folder[\\\\/]foo\\.scss/,\n});\n\n```\n\n----------------------------------------\n\nTITLE: Type Definition for Server Open Configuration\nDESCRIPTION: TypeScript type definition showing the allowed formats for the server.open configuration option.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/open.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype Open =\n  | boolean\n  | string\n  | string[]\n  | {\n      target?: string | string[];\n      before?: () => Promise<void> | void;\n    };\n```\n\n----------------------------------------\n\nTITLE: Disabling Hot Module Replacement in Rsbuild Configuration\nDESCRIPTION: This code snippet demonstrates how to disable Hot Module Replacement by setting the dev.hmr option to false in the Rsbuild configuration. When disabled, Rsbuild automatically falls back to using live reload instead.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/hmr.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  dev: {\n    hmr: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Custom HTML Template in Rsbuild\nDESCRIPTION: Demonstrates how to set a custom HTML template file using the html.template configuration in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/html-template.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  html: {\n    template: './static/index.html',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Displaying Default Flat HTML Output Structure in Bash\nDESCRIPTION: Shows the default 'flat' directory structure for HTML output files in the dist folder.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/html/output-structure.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n/dist\n └── [name].html\n```\n\n----------------------------------------\n\nTITLE: Implementing Nested Plugins in Rsbuild\nDESCRIPTION: Demonstration of how to use nested plugins in Rsbuild, allowing for complex plugin combinations.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/plugins.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nfunction myPlugin() {\n  return [fooPlugin(), barPlugin()];\n}\n\nexport default {\n  plugins: [myPlugin()],\n};\n```\n\n----------------------------------------\n\nTITLE: Setting up pnpm with corepack\nDESCRIPTION: Commands to enable pnpm package manager using corepack for dependency management in the project.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/CONTRIBUTING.md#2025-04-21_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\nnpm i corepack@latest -g\ncorepack enable\n```\n\n----------------------------------------\n\nTITLE: Configuring PostCSS for Tailwind CSS v4\nDESCRIPTION: PostCSS configuration file to register Tailwind CSS plugin in a Rsbuild project using ES module syntax\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/styling/tailwindcss.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  plugins: {\n    '@tailwindcss/postcss': {},\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Creating Dev Server with JavaScript API\nDESCRIPTION: Shows how to create a development server instance using Rsbuild's JavaScript API\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/javascript-api/dev-server-api.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst server = await rsbuild.createDevServer();\n\nconsole.log('the server is ', server);\n```\n\n----------------------------------------\n\nTITLE: HTML Template with Custom Mount ID\nDESCRIPTION: The resulting HTML template after changing the mount ID to 'app', showing the modified element ID.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/mount-id.mdx#2025-04-21_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<body>\n  <div id=\"app\"></div>\n</body>\n```\n\n----------------------------------------\n\nTITLE: TypeScript Type Declarations for Data Files\nDESCRIPTION: Type declarations for YAML and TOML files in TypeScript projects.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/json-files.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\n/// <reference types=\"@rsbuild/core/types\" />\n```\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare module '*.yaml' {\n  const content: Record<string, any>;\n  export default content;\n}\ndeclare module '*.yml' {\n  const content: Record<string, any>;\n  export default content;\n}\ndeclare module '*.toml' {\n  const content: Record<string, any>;\n  export default content;\n}\n```\n\n----------------------------------------\n\nTITLE: Merging Configurations\nDESCRIPTION: Shows how to merge multiple Rspack configurations using mergeConfig utility.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/tools/rspack.mdx#2025-04-21_snippet_17\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: (config, { mergeConfig }) => {\n      return mergeConfig(config, {\n        devtool: 'eval',\n      });\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling Public Directory Static Asset Service\nDESCRIPTION: Example of completely disabling the static asset service by setting server.publicDir to false.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/server/public-dir.mdx#2025-04-21_snippet_8\n\nLANGUAGE: ts\nCODE:\n```\nexport default {\n  server: {\n    publicDir: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Dynamic Alias Configuration\nDESCRIPTION: Example of dynamic alias configuration based on environment variables in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/resolve/alias-strategy.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  resolve: {\n    alias: {\n      '@common':\n        process.env.NODE_ENV === 'production'\n          ? './src/common-prod'\n          : './src/common-dev',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Forcing Image Inlining in CSS\nDESCRIPTION: Shows how to force inlining of an image resource in CSS using the 'inline' URL parameter.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/optimization/inline-assets.mdx#2025-04-21_snippet_3\n\nLANGUAGE: css\nCODE:\n```\n.foo {\n  background-image: url('./icon.png?inline');\n}\n```\n\n----------------------------------------\n\nTITLE: Disabling Image Inlining in CSS\nDESCRIPTION: Demonstrates how to disable inlining of an image resource in CSS using the 'url' URL parameter.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/optimization/inline-assets.mdx#2025-04-21_snippet_5\n\nLANGUAGE: css\nCODE:\n```\n.foo {\n  background-image: url('./icon.png?url');\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Entry-Only Lazy Compilation\nDESCRIPTION: Configuration to enable lazy compilation only for entry modules in multi-page applications.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/lazy-compilation.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    lazyCompilation: {\n      entries: true,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Running All Unit Tests\nDESCRIPTION: Command to run all unit tests in the project to ensure code changes haven't introduced regressions.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/CONTRIBUTING.md#2025-04-21_snippet_10\n\nLANGUAGE: sh\nCODE:\n```\npnpm run ut\n```\n\n----------------------------------------\n\nTITLE: HTML Output for Meta Description\nDESCRIPTION: The resulting HTML output when setting a description meta tag using the string value approach.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/html/meta.mdx#2025-04-21_snippet_3\n\nLANGUAGE: html\nCODE:\n```\n<meta name=\"description\" content=\"a description of the page\" />\n```\n\n----------------------------------------\n\nTITLE: CSS Modules Local Identity Configuration\nDESCRIPTION: Example of configuring the local identity name format for CSS Modules\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/css-modules.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    cssModules: {\n      localIdentName: '[hash:base64:4]',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: HTML Output for Meta Charset\nDESCRIPTION: The resulting HTML output when setting a charset meta tag using the object value approach.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/html/meta.mdx#2025-04-21_snippet_6\n\nLANGUAGE: html\nCODE:\n```\n<meta charset=\"UTF-8\" />\n```\n\n----------------------------------------\n\nTITLE: Antd Transform Import Configuration\nDESCRIPTION: Configuration for antd v3/v4 import transformation.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-4.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  source: {\n    transformImport: [\n      {\n        libraryName: 'antd',\n        libraryDirectory: 'es',\n        style: 'css',\n      },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Rsbuild Polyfill Output\nDESCRIPTION: Configure Rsbuild to automatically inject polyfills based on browserslist configuration\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/cra.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    polyfill: 'usage',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Adding Rspack Plugins\nDESCRIPTION: Shows how to add custom Rspack plugins to the configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/tools/rspack.mdx#2025-04-21_snippet_10\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: (config, { rspack }) => {\n      config.plugins?.push(new rspack.BannerPlugin());\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling HTML Plugin\nDESCRIPTION: Shows how to disable the built-in HTML plugin functionality to prevent HTML artifact generation.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/tools/html-plugin.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    htmlPlugin: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Port Placeholder Configuration\nDESCRIPTION: Example of using port placeholder in server.open configuration to handle dynamic port assignment.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/server/open.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    open: 'http://localhost:<port>/home',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Development Mode Configuration\nDESCRIPTION: Example of configuring Rspack specifically for development mode.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/tools/rspack.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: (config, { isDev }) => {\n      if (isDev) {\n        config.devtool = 'eval-cheap-source-map';\n      }\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Default HTML Template in Rsbuild\nDESCRIPTION: Shows the default HTML template used by Rsbuild when no custom template is specified.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/html-template.mdx#2025-04-21_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<!doctype html>\n<html>\n  <head></head>\n  <body>\n    <div id=\"<%= mountId %>\"></div>\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Opening Default Page Configuration\nDESCRIPTION: Example of opening the default project page using server.open configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/server/open.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    open: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Building a Specific Package with nx\nDESCRIPTION: Command to build a specific package in the monorepo using nx build tool, targeting a specific package.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/CONTRIBUTING.md#2025-04-21_snippet_8\n\nLANGUAGE: sh\nCODE:\n```\nnpx nx build @rsbuild/core\n```\n\n----------------------------------------\n\nTITLE: Example - Custom Compiler\nDESCRIPTION: Example showing how to use a custom compiler with build.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nimport { rspack } from '@rsbuild/core';\n\nconst compiler = rspack({\n  // ...\n});\nawait rsbuild.build({\n  compiler,\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Async Modules Lazy Compilation\nDESCRIPTION: Configuration to enable lazy compilation for dynamically imported modules.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/lazy-compilation.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    lazyCompilation: {\n      imports: true,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Default Prefetch Options in JavaScript\nDESCRIPTION: Default configuration object for prefetch functionality, setting type to async-chunks.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/performance/prefetch.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultOptions = {\n  type: 'async-chunks',\n};\n```\n\n----------------------------------------\n\nTITLE: Referencing Rsbuild Core Types in TypeScript\nDESCRIPTION: Demonstrates how to reference preset types from @rsbuild/core in a TypeScript environment file.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/basic/typescript.mdx#2025-04-21_snippet_1\n\nLANGUAGE: ts\nCODE:\n```\n/// <reference types=\"@rsbuild/core/types\" />\n```\n\n----------------------------------------\n\nTITLE: Enabling Relay Support with SWC (JavaScript)\nDESCRIPTION: This snippet enables Relay support in Rspack by configuring the @swc/plugin-relay plugin in the SWC settings.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/configuration/swc.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    swc: {\n      jsc: {\n        experimental: {\n          plugins: [['@swc/plugin-relay', {}]],\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: CSS Modules Named Export Configuration\nDESCRIPTION: Example of enabling named exports for CSS Modules classes\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/css-modules.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    cssModules: {\n      namedExport: true,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling Lightning CSS Loader in JavaScript\nDESCRIPTION: An example of how to disable the built-in Lightning CSS loader in Rsbuild by setting tools.lightningcssLoader to false.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/lightningcss-loader.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    lightningcssLoader: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using Port Placeholder\nDESCRIPTION: Configuration using the <port> placeholder to handle dynamic port assignment.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/open.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    open: 'http://localhost:<port>/home',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: HTML Plugin Configuration\nDESCRIPTION: Example of accessing and using the HTML Rspack plugin.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/tools/rspack.mdx#2025-04-21_snippet_11\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: (config, { HtmlPlugin }) => {\n      console.log(HtmlPlugin);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Opening Specific URL Configuration\nDESCRIPTION: Example of opening a specific URL using server.open configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/server/open.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    open: 'http://localhost:3000',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting TSConfig Path in Rsbuild Config\nDESCRIPTION: Configuration for specifying the path to jsconfig.json in Rsbuild configuration\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/alias.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  source: {\n    tsconfigPath: './jsconfig.json',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Inject Function Type Definition\nDESCRIPTION: TypeScript type definition for the inject function configuration option.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/html/inject.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\ntype InjectFunction = ({ value: ScriptInject; entryName: string }) => string | void;\n```\n\n----------------------------------------\n\nTITLE: Registering Less Plugin in Rsbuild Configuration\nDESCRIPTION: Basic configuration to enable Less plugin in Rsbuild project using TypeScript configuration file\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/list/plugin-less.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginLess } from '@rsbuild/plugin-less';\n\nexport default {\n  plugins: [pluginLess()],\n};\n```\n\n----------------------------------------\n\nTITLE: Removing Plugins\nDESCRIPTION: Demonstrates how to remove plugins from Rspack configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/tools/rspack.mdx#2025-04-21_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: (config, { removePlugin }) => {\n      removePlugin('BundleAnalyzerPlugin');\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling Progress Bar in Rsbuild Configuration\nDESCRIPTION: Example of enabling the progress bar in Rsbuild configuration using JavaScript.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/progress-bar.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  dev: {\n    progressBar: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Retrieving Original Rsbuild Configuration\nDESCRIPTION: Demonstrates retrieving the original user-defined Rsbuild configuration using the 'original' type parameter.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/shared/getRsbuildConfig.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\ngetRsbuildConfig('original');\n```\n\n----------------------------------------\n\nTITLE: Removing Default Meta Tags\nDESCRIPTION: Example of removing default meta tags by setting their value to false.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/html/meta.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  html: {\n    meta: {\n      viewport: false,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling Basic Lazy Compilation\nDESCRIPTION: Simple configuration to enable lazy compilation in Rsbuild development mode.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/dev/lazy-compilation.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    lazyCompilation: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Type Definition - Action Context\nDESCRIPTION: Type definition for the action context property.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\ntype Action = 'dev' | 'build' | 'preview' | undefined;\n```\n\n----------------------------------------\n\nTITLE: Enabling File Watching for Public Directory\nDESCRIPTION: Example of enabling the watch option to monitor files in the public directory during development and reload the page when files change.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/server/public-dir.mdx#2025-04-21_snippet_6\n\nLANGUAGE: ts\nCODE:\n```\nexport default {\n  server: {\n    publicDir: {\n      watch: true,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Default Less Loader Options (JavaScript)\nDESCRIPTION: Defines the default configuration options for the less-loader. These options include settings for JavaScript enablement, module paths, Less implementation, and source map generation. The `rsbuildConfig` variable is assumed to be available in the scope.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-less.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultOptions = {\n  lessOptions: {\n    javascriptEnabled: true,\n    paths: [path.join(rootPath, 'node_modules')],\n  },\n  implementation: require.resolve('less'),\n  sourceMap: rsbuildConfig.output.sourceMap.css,\n};\n```\n\n----------------------------------------\n\nTITLE: Type Definition - Version Context\nDESCRIPTION: Type definition for the Rsbuild version context property.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype Version = string;\n```\n\n----------------------------------------\n\nTITLE: Enabling CSS Inlining Configuration\nDESCRIPTION: JavaScript configuration to enable CSS inlining by setting output.inlineStyles to true.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/inline-styles.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    inlineStyles: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Opening Multiple Pages\nDESCRIPTION: Configuration to open multiple pages when server starts.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/open.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    open: ['/', '/about'],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disable URL Printing Configuration\nDESCRIPTION: Configuration to disable URL printing entirely.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/server/print-urls.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  server: {\n    printUrls: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Default HTML Plugin Configuration in JavaScript\nDESCRIPTION: The default configuration options for the HTML plugin in Rsbuild. It includes settings for meta tags, title, injection, favicon, template, filename, template parameters, and chunks.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/tools/html-plugin.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultOptions = {\n  meta, // Corresponds to `html.meta` config\n  title, // Corresponds to `html.title` config\n  inject, // Corresponds to `html.inject` config\n  favicon, // Corresponds to `html.favicon` config\n  template, // Corresponds to `html.template` config\n  filename, // Generated based on `output.distPath` and `entryName`\n  templateParameters, // Corresponds to `html.templateParameters` config\n  chunks: [entryName],\n};\n```\n\n----------------------------------------\n\nTITLE: Type Definition - Bundler Type\nDESCRIPTION: Type definition for the bundler type context property.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\ntype bundlerType = 'rspack' | 'webpack';\n```\n\n----------------------------------------\n\nTITLE: Example HTML output with dev.assetPrefix set to a complete URL\nDESCRIPTION: Shows the resulting script tag in HTML when dev.assetPrefix is set to an external domain URL.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/asset-prefix.mdx#2025-04-21_snippet_7\n\nLANGUAGE: html\nCODE:\n```\n<script defer src=\"https://example.com/assets/static/js/index.js\"></script>\n```\n\n----------------------------------------\n\nTITLE: Type Definition - Dist Path Context\nDESCRIPTION: Type definition for the distribution path context property.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/api/javascript-api/instance.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\ntype DistPath = string;\n```\n\n----------------------------------------\n\nTITLE: Importing SVG as Default Export\nDESCRIPTION: This shows how to import the SVG, when the plugin is configured for default exports. The logo can now be imported directly.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-svgr.mdx#2025-04-21_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nimport Logo from './logo.svg';\n\nconsole.log(Logo); // => React Component\n```\n\n----------------------------------------\n\nTITLE: Custom Rspack Target Configuration\nDESCRIPTION: Example of configuring custom Rspack targets using tools.rspack configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/target.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: {\n      target: 'electron-main',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Output Configuration Before Update\nDESCRIPTION: Example of the old disableFilenameHash configuration syntax.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-4.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    disableFilenameHash: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Express Server with Rsbuild\nDESCRIPTION: Demonstrates how to create a custom development server using Express that leverages Rsbuild's middleware mode to maintain page preview, routing, and hot module update functionality.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-5.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport express from 'express';\nimport { createRsbuild } from '@rsbuild/core';\n\nasync function startCustomServer() {\n  const app = express();\n  const rsbuild = await createRsbuild({\n    rsbuildConfig: {\n      server: {\n        middlewareMode: true,\n      },\n    },\n  });\n  const { port, middlewares } = await rsbuild.createDevServer();\n\n  app.use(middlewares);\n  app.listen(port);\n}\n```\n\n----------------------------------------\n\nTITLE: Getting WebAssembly Module URL\nDESCRIPTION: Example of obtaining the URL path for a .wasm module using the URL constructor.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/basic/wasm-assets.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst wasmURL = new URL('./add.wasm', import.meta.url);\n\nconsole.log(wasmURL).pathname; // \"/static/wasm/[hash].module.wasm\"\n```\n\n----------------------------------------\n\nTITLE: Creating a New Git Branch for Development\nDESCRIPTION: Command to create and checkout a new git branch for developing features or fixes before submitting a pull request.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/CONTRIBUTING.md#2025-04-21_snippet_7\n\nLANGUAGE: sh\nCODE:\n```\ngit checkout -b MY_BRANCH_NAME\n```\n\n----------------------------------------\n\nTITLE: Creating Test Fixtures with Template Files in JavaScript\nDESCRIPTION: Demonstrates how to create test fixtures from template files, using string replacement to customize the fixtures for specific test cases.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/e2e/cases/server/watch-files/assets/example.txt#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n// `fixtureTemplate` is the file which contains placeholders for interpolation\nimport fixtureTemplate from './template.js';\n\n// Prepare template content\nconst fixtureContent = fixtureTemplate\n  .replace('{{ placeholder }}', 'value');\n\n// Create temp directory and write fixture file into it\n```\n\n----------------------------------------\n\nTITLE: Loading and injecting REACT_APP_ environment variables\nDESCRIPTION: Configuration that loads environment variables with REACT_APP_ prefix (used by CRA) and injects them into client code using Rsbuild's source.define configuration.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/guide/migration/cra.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig, loadEnv } from '@rsbuild/core';\n\nconst { publicVars } = loadEnv({ prefixes: ['REACT_APP_'] });\n\nexport default defineConfig({\n  source: {\n    define: publicVars,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Migrating from dev.startUrl to server.open\nDESCRIPTION: Example showing how to update from the deprecated dev.startUrl option to the new server.open option.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/rsbuild-0-x.mdx#2025-04-21_snippet_11\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  // [!code --]\n  dev: {\n    startUrl: true, // [!code --]\n  }, // [!code --]\n  // [!code ++]\n  server: {\n    open: true, // [!code ++]\n  }, // [!code ++]\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Rspack Dashboard in JavaScript\nDESCRIPTION: This snippet shows how to configure Rsbuild to enable the Rspack Dashboard in development mode. It sets the Rspack Dashboard plugin options and enables it for a JavaScript-based project.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/e2e/cases/server/watch-files/assets/example2.txt#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { defineConfig } from '@rsbuild/core';\n\nexport default defineConfig({\n  // Enables the Rspack Dashboard in development mode\n  dev: {\n    // Set to true to open the Rspack Dashboard by default\n    startUrl: true,\n  },\n  tools: {\n    rspack: {\n      plugins: [\n        // All plugins are already set by Rsbuild\n      ],\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using HTML Minifier Plugin in Rsbuild v1\nDESCRIPTION: Example showing how to add HTML minification using the standalone rsbuild-plugin-html-minifier-terser plugin.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/rsbuild-0-x.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pluginHtmlMinifierTerser } from 'rsbuild-plugin-html-minifier-terser';\n\nexport default {\n  plugins: [pluginHtmlMinifierTerser()],\n};\n```\n\n----------------------------------------\n\nTITLE: Replacing npm Dependencies with Rsbuild\nDESCRIPTION: Remove Vue CLI dependencies and install Rsbuild-specific packages for Vue project migration\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/migration/vue-cli.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm remove @vue/cli-service @vue/cli-plugin-babel @vue/cli-plugin-eslint core-js\n```\n\nLANGUAGE: bash\nCODE:\n```\nnpm add @rsbuild/core @rsbuild/plugin-vue -D\n```\n\n----------------------------------------\n\nTITLE: Exporting REM Adaptation Configuration for Rsbuild\nDESCRIPTION: This snippet exports a function that returns a PostCSS plugin for REM adaptation. It takes options including rootValue, propList, and excludeFiles. The function uses the postcss-pxtorem package to convert pixel values to REM units.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/guide/advanced/rem.mdx#2025-04-21_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nconst pxtorem = require('postcss-pxtorem');\n\n/** @type {import('@rsbuild/core').RsbuildPlugin} */\nmodule.exports = () => ({\n  name: 'rsbuild-rem-adaptation',\n\n  setup(api) {\n    api.modifyRsbuildConfig((config) => {\n      const rootValue =\n        config.output?.remConfig?.rootValue ||\n        config.html?.remConfig?.rootValue ||\n        16;\n\n      const propList =\n        config.output?.remConfig?.propList ||\n        config.html?.remConfig?.propList ||\n        ['*'];\n\n      const exclude =\n        config.output?.remConfig?.exclude ||\n        config.html?.remConfig?.exclude ||\n        [];\n\n      config.tools = config.tools || {};\n      config.tools.postcss = config.tools.postcss || {};\n      config.tools.postcss.plugins = config.tools.postcss.plugins || [];\n      config.tools.postcss.plugins.push(\n        pxtorem({\n          rootValue,\n          propList,\n          exclude,\n        }),\n      );\n\n      return config;\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: CSS Modules Export Globals Configuration\nDESCRIPTION: Example showing how to enable global class names export in CSS Modules\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/css-modules.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    cssModules: {\n      exportGlobals: true,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: CSS Modules Global Styling Example\nDESCRIPTION: Example of using global class names in CSS Modules\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/css-modules.mdx#2025-04-21_snippet_4\n\nLANGUAGE: css\nCODE:\n```\n:global(.blue) {\n  color: blue;\n}\n\n.red {\n  color: red;\n}\n```\n\n----------------------------------------\n\nTITLE: Default Split Chunks Options\nDESCRIPTION: This TypeScript snippet shows the default options for `splitChunks`. Both `vue` and `router` are set to `true`, indicating that they will be split into separate chunks by default.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/plugins/list/plugin-vue.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nconst defaultOptions = {\n  vue: true,\n  router: true,\n};\n```\n\n----------------------------------------\n\nTITLE: Server Environment Check\nDESCRIPTION: Example of configuring Rspack for server-side builds.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/tools/rspack.mdx#2025-04-21_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    rspack: (config, { isServer }) => {\n      if (isServer) {\n        // ...\n      }\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Starting Dev Server\nDESCRIPTION: This snippet shows how to start a local development server using the rsbuild.startDevServer method. The startDevServer method is called on the Rsbuild instance, which then initiates the development server. This is useful for local development and testing.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/api/start/index.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nawait rsbuild.startDevServer();\n```\n\n----------------------------------------\n\nTITLE: Directory Structure After Inlining\nDESCRIPTION: Example of the file structure after CSS inlining is enabled.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/zh/config/output/inline-styles.mdx#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\ndist/html/main/index.html\ndist/static/js/main.js\n```\n\n----------------------------------------\n\nTITLE: Defining WatchFiles TypeScript Type for Rsbuild\nDESCRIPTION: TypeScript type definition for the watchFiles configuration option in Rsbuild. It defines the structure for specifying which files to watch and how to respond to changes.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/dev/watch-files.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype WatchFiles = {\n  paths: string | string[];\n  type?: 'reload-page' | 'reload-server';\n  // watch options for chokidar\n  options?: ChokidarOptions;\n};\n\ntype WatchFilesConfig = WatchFiles | WatchFiles[];\n```\n\n----------------------------------------\n\nTITLE: Importing SVG as Static Asset\nDESCRIPTION: This demonstrates how to import an SVG file as a static asset using JavaScript. When imported without the `?react` suffix, the SVG is treated as a regular static asset and its URL is logged to the console.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/plugins/list/plugin-svgr.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nimport logoURL from './static/logo.svg';\n\nconsole.log(logoURL); // => \"/static/logo.6c12aba3.png\"\n```\n\n----------------------------------------\n\nTITLE: Configuring Error Overlay in Rsbuild\nDESCRIPTION: Configuration example showing how to disable the default error overlay in Rsbuild 0.6 development environment.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/community/releases/v0-6.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  dev: {\n    client: {\n      overlay: false,\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring 'none' Legal Comments in Rsbuild\nDESCRIPTION: This configuration removes all legal comments from the output. It's important to ensure you have the right to remove these comments before using this option, as it may violate some software licenses.\nSOURCE: https://github.com/web-infra-dev/rsbuild/blob/main/website/docs/en/config/output/legal-comments.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    legalComments: 'none',\n  },\n};\n```"
  }
]
[
  {
    "owner": "liveblocks",
    "repo": "liveblocks",
    "content": "TITLE: Configuring Redux Store with Liveblocks Enhancer (Storage)\nDESCRIPTION: This snippet extends the Redux store configuration to include Liveblocks storage synchronization for the `todos` array. The `storageMapping: { todos: true }` option tells Liveblocks to persist the `todos` array in the Redux state to Liveblocks storage. This allows the to-do list items to persist even after all users have disconnected.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-react-redux-and-liveblocks.mdx#2025-04-11_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\nimport { liveblocksEnhancer } from \"@liveblocks/redux\";\nimport { configureStore, createSlice } from \"@reduxjs/toolkit\";\n\nconst client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n\nconst initialState = {\n  todos: [],\n  draft: \"\",\n  isTyping: false,\n};\n\nconst slice = createSlice({\n  name: \"state\",\n  initialState,\n  reducers: {\n    setDraft: (state, action) => {\n      state.isTyping = action.payload === \"\" ? false : true;\n      state.draft = action.payload;\n    },\n    addTodo: (state) => {\n      state.isTyping = false;\n      state.todos.push({ text: state.draft });\n      state.draft = \"\";\n    },\n    deleteTodo: (state, action) => {\n      state.todos.splice(action.payload, 1);\n    },\n  },\n});\n\nexport const { setDraft, addTodo, deleteTodo } = slice.actions;\n\nexport function makeStore() {\n  return configureStore({\n    reducer: slice.reducer,\n    enhancers: [\n      liveblocksEnhancer({\n        client,\n        storageMapping: { todos: true },\n        presenceMapping: { isTyping: true },\n      }),\n    ],\n  });\n}\n\nconst store = makeStore();\n\nexport default store;\n\n```\n\n----------------------------------------\n\nTITLE: Implementing a Collaborative Monaco Editor with Yjs and Liveblocks\nDESCRIPTION: React component that integrates Monaco editor with Yjs and Liveblocks to create a collaborative code editor with real-time synchronization between multiple users.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-monaco-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport * as Y from \"yjs\";\nimport { LiveblocksYjsProvider } from \"@liveblocks/yjs\";\nimport { TypedLiveblocksProvider, useRoom } from \"@/liveblocks.config\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport styles from \"./CollaborativeEditor.module.css\";\nimport { Editor } from \"@monaco-editor/react\";\nimport { editor } from \"monaco-editor\";\nimport { MonacoBinding } from \"y-monaco\";\nimport { Awareness } from \"y-protocols/awareness\";\n\n// Collaborative code editor with undo/redo, live cursors, and live avatars\nexport function CollaborativeEditor() {\n  const room = useRoom();\n  const [provider, setProvider] = useState<TypedLiveblocksProvider>();\n  const [editorRef, setEditorRef] = useState<editor.IStandaloneCodeEditor>();\n\n  // Set up Liveblocks Yjs provider and attach Monaco editor\n  useEffect(() => {\n    let yProvider: TypedLiveblocksProvider;\n    let yDoc: Y.Doc;\n    let binding: MonacoBinding;\n\n    if (editorRef) {\n      yDoc = new Y.Doc();\n      const yText = yDoc.getText(\"monaco\");\n      yProvider = new LiveblocksYjsProvider(room, yDoc);\n      setProvider(yProvider);\n\n      // Attach Yjs to Monaco\n      binding = new MonacoBinding(\n        yText,\n        editorRef.getModel() as editor.ITextModel,\n        new Set([editorRef]),\n        yProvider.awareness as Awareness\n      );\n    }\n\n    return () => {\n      yDoc?.destroy();\n      yProvider?.destroy();\n      binding?.destroy();\n    };\n  }, [editorRef, room]);\n\n  const handleOnMount = useCallback((e: editor.IStandaloneCodeEditor) => {\n    setEditorRef(e);\n  }, []);\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.editorContainer}>\n        <Editor\n          onMount={handleOnMount}\n          height=\"100%\"\n          width=\"100hw\"\n          theme=\"vs-light\"\n          defaultLanguage=\"typescript\"\n          defaultValue=\"\"\n          options={{\n            tabSize: 2,\n            padding: { top: 20 },\n          }}\n        />\n      </div>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Collaborative Lexical Text Editor with Liveblocks\nDESCRIPTION: Implementation of a collaborative Lexical text editor using LiveblocksPlugin and FloatingToolbar from @liveblocks/react-lexical. The editor includes basic rich text functionality with collaborative features.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-lexical.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { LexicalComposer } from \"@lexical/react/LexicalComposer\";\nimport { RichTextPlugin } from \"@lexical/react/LexicalRichTextPlugin\";\nimport { ContentEditable } from \"@lexical/react/LexicalContentEditable\";\nimport { LexicalErrorBoundary } from \"@lexical/react/LexicalErrorBoundary\";\nimport {\n  liveblocksConfig,\n  LiveblocksPlugin,\n  FloatingToolbar,\n} from \"@liveblocks/react-lexical\";\nimport { Threads } from \"./Threads\";\n\nexport function Editor() {\n  // Wrap your Lexical config with `liveblocksConfig`\n  const initialConfig = liveblocksConfig({\n    namespace: \"Demo\",\n    onError: (error: unknown) => {\n      console.error(error);\n      throw error;\n    },\n  });\n\n  return (\n    <LexicalComposer initialConfig={initialConfig}>\n      <div className=\"editor\">\n        <RichTextPlugin\n          contentEditable={<ContentEditable />}\n          placeholder={<div className=\"placeholder\">Start typing here…</div>}\n          ErrorBoundary={LexicalErrorBoundary}\n        />\n        <LiveblocksPlugin>\n          <Threads />\n          <FloatingToolbar />\n        </LiveblocksPlugin>\n      </div>\n    </LexicalComposer>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing a Collaborative Lexical Editor with Yjs and Liveblocks\nDESCRIPTION: Creates a collaborative text editor using Lexical with Yjs and Liveblocks integration. Sets up the editor configuration, initial state, and collaboration plugin.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-lexical-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { LiveblocksYjsProvider } from \"@liveblocks/yjs\";\nimport * as Y from \"yjs\";\nimport { useRoom } from \"@/liveblocks.config\";\nimport styles from \"./Editor.module.css\";\nimport {\n  $createParagraphNode,\n  $createTextNode,\n  $getRoot,\n  LexicalEditor,\n} from \"lexical\";\nimport { LexicalComposer } from \"@lexical/react/LexicalComposer\";\nimport { RichTextPlugin } from \"@lexical/react/LexicalRichTextPlugin\";\nimport { ContentEditable } from \"@lexical/react/LexicalContentEditable\";\nimport LexicalErrorBoundary from \"@lexical/react/LexicalErrorBoundary\";\nimport { CollaborationPlugin } from \"@lexical/react/LexicalCollaborationPlugin\";\nimport { Provider } from \"@lexical/yjs\";\n\n// Set up editor config\nconst initialConfig = {\n  // NOTE: This is critical for collaboration plugin to set editor state to null. It\n  // would indicate that the editor should not try to set any default state\n  // (not even empty one), and let collaboration plugin do it instead\n  editorState: null,\n  namespace: \"Demo\",\n  nodes: [],\n  onError: (error: unknown) => {\n    throw error;\n  },\n};\n\n// Define initial editor state\nfunction initialEditorState(editor: LexicalEditor): void {\n  const root = $getRoot();\n  const paragraph = $createParagraphNode();\n  const text = $createTextNode();\n  paragraph.append(text);\n  root.append(paragraph);\n}\n\n// Collaborative text editor with simple rich text\nexport default function Editor() {\n  // Get Liveblocks room\n  const room = useRoom();\n\n  return (\n    <div className={styles.container}>\n      <LexicalComposer initialConfig={initialConfig}>\n        <div className={styles.editorContainer}>\n          <RichTextPlugin\n            contentEditable={<ContentEditable className={styles.editor} />}\n            placeholder={\n              <p className={styles.placeholder}>Start typing here…</p>\n            }\n            ErrorBoundary={LexicalErrorBoundary}\n          />\n          <CollaborationPlugin\n            id=\"yjs-plugin\"\n            providerFactory={(id, yjsDocMap) => {\n              // Set up Liveblocks Yjs provider\n              const doc = new Y.Doc();\n              yjsDocMap.set(id, doc);\n              const provider = new LiveblocksYjsProvider(room, doc) as Provider;\n              return provider;\n            }}\n            initialEditorState={initialEditorState}\n            shouldBootstrap={true}\n          />\n        </div>\n      </LexicalComposer>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Up LiveblocksProvider in React\nDESCRIPTION: Demonstrates how to set up the LiveblocksProvider component in a React application. This component is responsible for establishing communication with the Liveblocks backend using a public API key.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/connecting/guide.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n<LiveblocksProvider publicApiKey=\"pk_s9bs7fl...\">\n```\n\n----------------------------------------\n\nTITLE: Setting Up Collaborative BlockNote Editor\nDESCRIPTION: React component that creates a collaborative BlockNote editor using Liveblocks integration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-blocknote.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { useCreateBlockNoteWithLiveblocks } from \"@liveblocks/react-blocknote\";\nimport { BlockNoteView } from \"@blocknote/mantine\";\nimport { Threads } from \"./Threads\";\n\nexport function Editor() {\n  const editor = useCreateBlockNoteWithLiveblocks({});\n\n  return (\n    <div>\n      <BlockNoteView editor={editor} className=\"editor\" />\n      <Threads editor={editor} />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Comments with Liveblocks in React\nDESCRIPTION: React component that uses the useThreads hook to retrieve comment threads and renders them using the Thread component. It also includes the Composer component to allow users to create new threads.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-comments.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { useThreads } from \"@liveblocks/react/suspense\";\nimport { Composer, Thread } from \"@liveblocks/react-ui\";\n\nexport function Room() {\n  const { threads } = useThreads();\n\n  return (\n    <div>\n      {threads.map((thread) => (\n        <Thread key={thread.id} thread={thread} />\n      ))}\n      <Composer />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing resolveMentionSuggestions with User Filtering in LiveblocksProvider\nDESCRIPTION: This code shows a real-world implementation of resolveMentionSuggestions that fetches all users and filters them based on the search text. It handles empty search strings and demonstrates proper user ID extraction from the filtered results.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-add-users-to-liveblocks-text-editor.mdx#2025-04-11_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\n<LiveblocksProvider\n  resolveUsers={async ({ userIds }) => {\n    // ...\n  }}\n  resolveMentionSuggestions={async ({ text, roomId }) => {\n    // Fetch all users from your back end\n    let users = await __fetchAllUsers__();\n\n    // If there's a query, filter for the relevant users\n    if (text) {\n      // Filter any way you'd like, e.g. checking if the name matches\n      users = users.filter((user) => user.name.includes(text));\n    }\n\n    // Return the filtered `userIds`\n    return users.map((user) => user.id);\n  }}\n\n  // ...\n/>;\n```\n\n----------------------------------------\n\nTITLE: Creating a Liveblocks Room Component in Next.js\nDESCRIPTION: Sets up a Liveblocks client with LiveblocksProvider, joins a room with RoomProvider, and uses ClientSideSuspense for loading state. This component is typically placed in a Room.tsx file.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { ReactNode } from \"react\";\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n  ClientSideSuspense,\n} from \"@liveblocks/react/suspense\";\n\nexport function Room({ children }: { children: ReactNode }) {\n  return (\n    <LiveblocksProvider publicApiKey={\"{{PUBLIC_KEY}}\"}>\n      <RoomProvider id=\"my-room\">\n        <ClientSideSuspense fallback={<div>Loading…</div>}>\n          {children}\n        </ClientSideSuspense>\n      </RoomProvider>\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Liveblocks Provider Component in Next.js\nDESCRIPTION: Implementation of a NotificationsProvider component that wraps the application with LiveblocksProvider. This client component connects to Liveblocks using a public API key to enable notifications between users in the same project.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-notifications.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { ReactNode } from \"react\";\nimport { LiveblocksProvider } from \"@liveblocks/react\";\n\nexport function NotificationsProvider({ children }: { children: ReactNode }) {\n  return (\n    <LiveblocksProvider publicApiKey={\"{{PUBLIC_KEY}}\"}>      \n      {children}\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Setting up Liveblocks Client and Room Provider in React\nDESCRIPTION: React component setup using LiveblocksProvider to configure the client and RoomProvider to join a specific room for collaboration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n} from \"@liveblocks/react/suspense\";\nimport { Room } from \"./Room\";\n\nexport default function App() {\n  return (\n    <LiveblocksProvider publicApiKey={\"{{PUBLIC_KEY}}\"}>\n      <RoomProvider id=\"my-room\">\n        {/* ... */}\n      </RoomProvider>\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Liveblocks Storage in a ToDoList Component with TypeScript\nDESCRIPTION: This snippet demonstrates how to utilize the `useStorage` hook to access the shared todos list from the Liveblocks storage within a functional component. The todos are rendered in the component, allowing for user interaction.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-react-and-liveblocks.mdx#2025-04-11_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n  ClientSideSuspense,\n  useOthers,\n  useUpdateMyPresence,\n  useStorage,\n} from \"@liveblocks/react/suspense\";\nimport { LiveList } from \"@liveblocks/client\";\nimport { useState } from \"react\";\n\n/* WhoIsHere */\n/* SomeoneIsTyping */\n\nfunction TodoList() {\n  const [draft, setDraft] = useState(\"\");\n  const updateMyPresence = useUpdateMyPresence();\n  const todos = useStorage((root) => root.todos);\n\n  return (\n    <div className=\"container\">\n      <WhoIsHere />\n      <input\n        {/* ... */}\n        onKeyDown={(e) => {\n          if (e.key === \"Enter\") {\n            updateMyPresence({ isTyping: false });\n            setDraft(\"\");\n          }\n        }}\n      />\n      <SomeoneIsTyping />\n      {todos.map((todo, index) => {\n        return (\n          <div key={index} className=\"todo_container\">\n            <div className=\"todo\">{todo.text}</div>\n            <button\n              className=\"delete_button\"\n            >\n              ✕\n            </button>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\n/* Page */\n```\n\n----------------------------------------\n\nTITLE: Setting Up Liveblocks Client and Room in React\nDESCRIPTION: React component that sets up the Liveblocks client with LiveblocksProvider and joins a room with RoomProvider. This establishes the foundation for collaborative features.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-comments.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n} from \"@liveblocks/react/suspense\";\nimport { Room } from \"./Room\";\n\nexport default function App() {\n  return (\n    <LiveblocksProvider publicApiKey={\"{{PUBLIC_KEY}}\"}>      <RoomProvider id=\"my-room\">\n        {/* ... */}\n      </RoomProvider>\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Configuration\nDESCRIPTION: Command to initialize the liveblocks.config.ts file, which can be used later for defining types in the application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework react\n```\n\n----------------------------------------\n\nTITLE: Composer Component with Custom Metadata\nDESCRIPTION: Example demonstrating how to create a new thread with custom metadata using the Composer component.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Composer } from \"@liveblocks/react-ui\";\n\n// Creates a new thread with custom metadata\nfunction Component() {\n  return (\n    <Composer\n      metadata={{\n        // Custom metadata here, e.g. colors, coordinates\n        color: \"purple\",\n        x: 80,\n        y: 120,\n      }}\n    />\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Packages for React\nDESCRIPTION: Installs the necessary Liveblocks packages for a React project using npm. This step is required to use Liveblocks functionality in a React application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/connecting/guide.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/react\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Packages\nDESCRIPTION: Command to install the required Liveblocks packages for a Next.js project. Ensures all packages use the same version.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/react\n```\n\n----------------------------------------\n\nTITLE: Implementing Threads and Composer for BlockNote\nDESCRIPTION: React component that adds commenting functionality to the BlockNote editor, including thread composer and display for desktop and mobile.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-blocknote.mdx#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useThreads } from \"@liveblocks/react/suspense\";\nimport {\n  AnchoredThreads,\n  FloatingComposer,\n  FloatingThreads,\n} from \"@liveblocks/react-blocknote\";\nimport { BlockNoteEditor } from \"@blocknote/core\";\n\nexport function Threads({ editor }: { editor: BlockNoteEditor | null }) {\n  const { threads } = useThreads({ query: { resolved: false } });\n\n  if (!editor) {\n    return null;\n  }\n\n  return (\n    <>\n      <div className=\"anchored-threads\">\n        <AnchoredThreads editor={editor} threads={threads} />\n      </div>\n      <FloatingThreads\n        editor={editor}\n        threads={threads}\n        className=\"floating-threads\"\n      />\n      <FloatingComposer editor={editor} className=\"floating-composer\" />\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Authentication Endpoint with Express and Liveblocks\nDESCRIPTION: Set up an Express server with a Liveblocks authentication endpoint. This code handles user authentication, sets up session permissions, and authorizes access to rooms based on user metadata.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/express.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst express = require(\"express\");\nimport { Liveblocks } from \"@liveblocks/node\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nconst app = express();\napp.use(express.json());\n\napp.post(\"/api/liveblocks-auth\", (req, res) => {\n  // Get the current user from your database\n  const user = __getUserFromDB__(req);\n\n  // Start an auth session inside your endpoint\n  const session = liveblocks.prepareSession(\n    user.id,\n    { userInfo: user.metadata },  // Optional\n  );\n\n  // Use a naming pattern to allow access to rooms with wildcards\n  // Giving the user read access on their org, and write access on their group\n  session.allow(`${user.organization}:*`, session.READ_ACCESS);\n  session.allow(`${user.organization}:${user.group}:*`, session.FULL_ACCESS);\n\n  // Authorize the user and return the result\n  const { status, body } = await session.authorize();\n  return res.status(status).end(body);\n});\n```\n\n----------------------------------------\n\nTITLE: Creating a Liveblocks Room Component in Next.js\nDESCRIPTION: A React component that creates a Liveblocks room context using LiveblocksProvider and RoomProvider. This component handles authentication and room connection, enabling collaboration for child components.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-tiptap-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { ReactNode } from \"react\";\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n  ClientSideSuspense,\n} from \"@liveblocks/react/suspense\";\n\nexport function Room({ children }: { children: ReactNode }) {\n  return (\n    <LiveblocksProvider authEndpoint=\"/api/liveblocks-auth\">\n      <RoomProvider id=\"my-room\">\n        <ClientSideSuspense fallback={<div>Loading…</div>}>\n          {children}\n        </ClientSideSuspense>\n      </RoomProvider>\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Opening AiToolbar with askAi Command\nDESCRIPTION: Demonstrates how to open the AiToolbar using the askAi command added by Liveblocks to the Tiptap editor.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_40\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Editor } from \"@tiptap/react\";\n\nfunction Toolbar({ editor }: { editor: Editor | null }) {\n  if (!editor) {\n    return null;\n  }\n\n  return (\n    <button\n      onClick={() => {\n        // +++\n        editor.chain().focus().askAi().run();\n        // +++\n      }}\n    >\n      ✨ Ask AI\n    </button>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Using ClientSideSuspense for Server-Side Rendering with Liveblocks React\nDESCRIPTION: This snippet demonstrates how to use ClientSideSuspense from @liveblocks/react for server-side rendering scenarios. It replaces the standard Suspense component to ensure proper loading behavior when Liveblocks storage is not available on the server.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-storage-with-react.mdx#2025-04-11_snippet_11\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClientSideSuspense } from \"@liveblocks/react/suspense\";\n\n// ...\n\nfunction Index() {\n  return (\n    <RoomProvider\n      id=\"my-room-id\"\n      initialPresence={/* ... */}\n      initialStorage={/* ... */}\n    >\n      <ClientSideSuspense fallback={<div>Loading...</div>}>\n        {() => <App />}\n      </ClientSideSuspense>\n    </RoomProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Integrating LiveblocksPlugin with LexicalComposer\nDESCRIPTION: Basic example showing how to add the LiveblocksPlugin to a LexicalComposer. The plugin is a core component that enables collaboration features in a Lexical editor.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n<LexicalComposer initialConfig={initialConfig}>\n  <LiveblocksPlugin />\n</LexicalComposer>\n```\n\n----------------------------------------\n\nTITLE: Using getSyncStatus in @liveblocks/client\nDESCRIPTION: Demonstrates how to use the new getSyncStatus() method to check synchronization status of pending local changes.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG.md#2025-04-11_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nclient.getSyncStatus()\n```\n\n----------------------------------------\n\nTITLE: Implementing a Collaborative Tiptap Editor with Yjs and Liveblocks\nDESCRIPTION: A React component that creates a collaborative rich text editor using Tiptap, Yjs, and Liveblocks. The component sets up a Yjs document, connects it to Liveblocks for collaboration, and configures Tiptap with collaboration extensions.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-tiptap-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { useEditor, EditorContent } from \"@tiptap/react\";\nimport StarterKit from \"@tiptap/starter-kit\";\nimport Collaboration from \"@tiptap/extension-collaboration\";\nimport CollaborationCursor from \"@tiptap/extension-collaboration-cursor\";\nimport * as Y from \"yjs\";\nimport { LiveblocksYjsProvider } from \"@liveblocks/yjs\";\nimport { useRoom } from \"@/liveblocks.config\";\nimport { useEffect, useState } from \"react\";\nimport styles from \"./CollaborativeEditor.module.css\";\n\n// Collaborative text editor with simple rich text, live cursors, and live avatars\nexport function CollaborativeEditor() {\n  const room = useRoom();\n  const [doc, setDoc] = useState<Y.Doc>();\n  const [provider, setProvider] = useState<any>();\n\n  // Set up Liveblocks Yjs provider\n  useEffect(() => {\n    const yDoc = new Y.Doc();\n    const yProvider = new LiveblocksYjsProvider(room, yDoc);\n    setDoc(yDoc);\n    setProvider(yProvider);\n\n    return () => {\n      yDoc?.destroy();\n      yProvider?.destroy();\n    };\n  }, [room]);\n\n  if (!doc || !provider) {\n    return null;\n  }\n\n  return <TiptapEditor doc={doc} provider={provider} />;\n}\n\ntype EditorProps = {\n  doc: Y.Doc;\n  provider: any;\n};\n\nfunction TiptapEditor({ doc, provider }: EditorProps) {\n  // Set up editor with plugins\n  const editor = useEditor({\n    editorProps: {\n      attributes: {\n        // Add styles to editor element\n        class: styles.editor,\n      },\n    },\n    extensions: [\n      StarterKit.configure({\n        // The Collaboration extension comes with its own history handling\n        history: false,\n      }),\n      // Register the document with Tiptap\n      Collaboration.configure({\n        document: doc,\n      }),\n      // Attach provider and user info\n      CollaborationCursor.configure({\n        provider: provider,\n      }),\n    ],\n  });\n\n  return (\n    <div className={styles.container}>\n      <EditorContent editor={editor} className={styles.editorContainer} />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks and Lexical Dependencies\nDESCRIPTION: Command to install all required packages for integrating Liveblocks with Lexical in a React application. All Liveblocks packages should use the same version.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-lexical.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/react @liveblocks/react-ui @liveblocks/react-lexical lexical @lexical/react\n```\n\n----------------------------------------\n\nTITLE: Using Notification Settings Hook - Liveblocks React\nDESCRIPTION: This snippet demonstrates how to utilize the `useNotificationSettings` hook from the Liveblocks React package to manage user notification settings. It shows how to retrieve, display, and update notification preferences asynchronously. The hook returns a state object that includes the current loading status, possible errors, and the settings themselves.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-redux/CHANGELOG.md#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useNotificationSettings } from \"@liveblocks/react\";\\n\\nconst [{ isLoading, error, settings }, updateSettings] =\\n  useNotificationSettings();\\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\\nconsole.log(settings);\\n\\nconst onSave = () => {\\n  updateSettings({\\n    slack: {\\n      textMention: true,\\n    },\\n  });\\n};\n```\n\n----------------------------------------\n\nTITLE: Defining Basic Todo List Schema in TypeScript\nDESCRIPTION: Example schema definition for a todo list application using Liveblocks schema syntax. Defines a Storage type with a LiveList of Todo objects.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/schema-validation.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype Storage {\n  todos: LiveList<LiveObject<Todo>>\n}\n\ntype Todo {\n  text: string\n  checked?: boolean\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Collaborative CodeMirror Editor\nDESCRIPTION: Complete implementation of a collaborative code editor component using CodeMirror, Yjs, and Liveblocks integration with React hooks for real-time collaboration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-codemirror-react.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport * as Y from \"yjs\";\nimport { yCollab } from \"y-codemirror.next\";\nimport { EditorView, basicSetup } from \"codemirror\";\nimport { EditorState } from \"@codemirror/state\";\nimport { javascript } from \"@codemirror/lang-javascript\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { getYjsProviderForRoom } from \"@liveblocks/yjs\";\nimport { useRoom } from \"@/liveblocks.config\";\nimport styles from \"./Editor.module.css\";\n\nexport default function Editor() {\n  const room = useRoom();\n  const yProvider = getYjsProviderForRoom(room);\n  const [element, setElement] = useState<HTMLElement>();\n\n  const ref = useCallback((node: HTMLElement | null) => {\n    if (!node) return;\n\n    setElement(node);\n  }, []);\n\n  // Set up Liveblocks Yjs provider and attach CodeMirror editor\n  useEffect(() => {\n    let view: EditorView;\n\n    if (!element || !room) {\n      return;\n    }\n\n    // Get document\n    const yDoc = yProvider.getYDoc();\n    const yText = yDoc.getText(\"codemirror\");\n    const undoManager = new Y.UndoManager(yText);\n\n    // Set up CodeMirror and extensions\n    const state = EditorState.create({\n      doc: yText.toString(),\n      extensions: [\n        basicSetup,\n        javascript(),\n        yCollab(yText, yProvider.awareness, { undoManager }),\n      ],\n    });\n\n    // Attach CodeMirror to element\n    view = new EditorView({\n      state,\n      parent: element,\n    });\n\n    return () => {\n      view?.destroy();\n    };\n  }, [element, room]);\n\n  return <div ref={ref} className={styles.editor} />;\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Live Cursors in React with Slate and Liveblocks\nDESCRIPTION: A React component that renders remote cursors and selections using the @slate-yjs/react hooks, with custom styling and positioning\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-slate-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  CursorOverlayData,\n  useRemoteCursorOverlayPositions,\n} from \"@slate-yjs/react\";\nimport React, { CSSProperties, ReactNode, useRef } from \"react\";\nimport { Cursor } from \"./types\";\nimport styles from \"./Cursors.module.css\";\n\nexport function Cursors({ children }: { children: ReactNode }) {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [cursors] = useRemoteCursorOverlayPositions<Cursor>({\n    containerRef,\n  });\n\n  return (\n    <div className={styles.cursors} ref={containerRef}>\n      {children}\n      {cursors.map((cursor) => (\n        <Selection key={cursor.clientId} {...cursor} />\n      ))}\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Enabling Dark Mode with System Preference in Liveblocks React UI\nDESCRIPTION: This code demonstrates how to import the CSS file that enables dark mode based on the system's color scheme preference using 'prefers-color-scheme'.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/notifications/styling-and-customization.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport \"@liveblocks/react-ui/styles/dark/media-query.css\";\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom State Hook with Liveblocks Broadcasting in TypeScript\nDESCRIPTION: Creates a custom React hook that extends useState functionality with Liveblocks real-time broadcasting. The hook manages state locally while broadcasting changes to other connected users and listening for their updates. It uses useBroadcastEvent for sending updates and useEventListener for receiving them.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/adding-liveblocks-to-existing-usestate-hooks.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useState } from \"react\";\nimport { useBroadcastEvent, useEventListener } from \"./liveblocks.config\";\n\nfunction useCustomState() {\n  const [state, setState] = useState();\n  const broadcast = useBroadcastEvent();\n\n  // Update useState and broadcast an event\n  const setStateAndBroadcast = (newValue) => {\n    setState(newValue);\n    broadcast({ type: \"STATE_UPDATE\", data: newValue });\n  };\n\n  // Listen for the broadcast event\n  useEventListener(({ event }) => {\n    if (event.type === \"STATE_UPDATE\") {\n      setState(event.data);\n    }\n  });\n\n  return [state, setStateAndBroadcast];\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Collaborative Lexical Text Editor\nDESCRIPTION: Sets up a Lexical text editor with Liveblocks integration for real-time collaboration, including rich text capabilities and a floating toolbar.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-lexical.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { LexicalComposer } from \"@lexical/react/LexicalComposer\";\nimport { RichTextPlugin } from \"@lexical/react/LexicalRichTextPlugin\";\nimport { ContentEditable } from \"@lexical/react/LexicalContentEditable\";\nimport { LexicalErrorBoundary } from \"@lexical/react/LexicalErrorBoundary\";\nimport {\n  liveblocksConfig,\n  LiveblocksPlugin,\n  FloatingToolbar,\n} from \"@liveblocks/react-lexical\";\nimport { Threads } from \"./Threads\";\n\nexport function Editor() {\n  // Wrap your Lexical config with `liveblocksConfig`\n  const initialConfig = liveblocksConfig({\n    namespace: \"Demo\",\n    onError: (error: unknown) => {\n      console.error(error);\n      throw error;\n    },\n  });\n\n  return (\n    <LexicalComposer initialConfig={initialConfig}>\n      <div className=\"editor\">\n        <RichTextPlugin\n          contentEditable={<ContentEditable />}\n          placeholder={<div className=\"placeholder\">Start typing here…</div>}\n          ErrorBoundary={LexicalErrorBoundary}\n        />\n        <LiveblocksPlugin>\n          <Threads />\n          <FloatingToolbar />\n        </LiveblocksPlugin>\n      </div>\n    </LexicalComposer>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Complete Editor Setup with Toolbar and Collaboration Components\nDESCRIPTION: Comprehensive example showing a full Lexical editor setup with Toolbar, FloatingComposer, and FloatingThreads. This demonstrates how to set up a rich text editor with formatting options and commenting functionality.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport { LexicalComposer } from \"@lexical/react/LexicalComposer\";\nimport { RichTextPlugin } from \"@lexical/react/LexicalRichTextPlugin\";\nimport { ContentEditable } from \"@lexical/react/LexicalContentEditable\";\nimport { LexicalErrorBoundary } from \"@lexical/react/LexicalErrorBoundary\";\nimport { useThreads } from \"@liveblocks/react/suspense\";\nimport {\n  liveblocksConfig,\n  LiveblocksPlugin,\n  FloatingComposer,\n  // +++\n  Toolbar,\n  //+++\n} from \"@liveblocks/react-lexical\";\n\nconst initialConfig = liveblocksConfig({\n  namespace: \"MyEditor\",\n  theme: {},\n  nodes: [],\n  onError: (err) => console.error(err),\n});\n\nfunction Editor() {\n  const { threads } = useThreads();\n\n  return (\n    <LexicalComposer initialConfig={initialConfig}>\n      <LiveblocksPlugin>\n        // +++\n        <Toolbar />\n        // +++\n        <FloatingComposer style={{ width: \"350px\" }} />\n        <FloatingThreads threads={threads} style={{ width: \"350px\" }} />\n      </LiveblocksPlugin>\n      <RichTextPlugin\n        contentEditable={<ContentEditable />}\n        placeholder={<div>Enter some text...</div>}\n        ErrorBoundary={LexicalErrorBoundary}\n      />\n    </LexicalComposer>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Importing Liveblocks Default Styles\nDESCRIPTION: Import statement for the default CSS styles that come with Liveblocks React UI components. This ensures that the components display correctly with their intended styling.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-comments.mdx#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport \"@liveblocks/react-ui/styles.css\";\n```\n\n----------------------------------------\n\nTITLE: Creating a Liveblocks Room in Next.js App Router\nDESCRIPTION: Setting up a Liveblocks room with LiveblocksProvider, RoomProvider, and ClientSideSuspense to enable real-time collaboration. This creates the foundation for the commenting system.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-comments.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { ReactNode } from \"react\";\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n  ClientSideSuspense,\n} from \"@liveblocks/react/suspense\";\n\nexport function Room({ children }: { children: ReactNode }) {\n  return (\n    <LiveblocksProvider publicApiKey={\"{{PUBLIC_KEY}}\"}>\n      <RoomProvider id=\"my-room\">\n        <ClientSideSuspense fallback={<div>Loading…</div>}>\n          {children}\n        </ClientSideSuspense>\n      </RoomProvider>\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Modifying Liveblocks Storage Using useMutation in TypeScript\nDESCRIPTION: This snippet implements the use of `useMutation` hook to provide functionality for adding and deleting todos within the Liveblocks storage. It defines handlers for updating the todos list on storage changes triggered by user interactions.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-react-and-liveblocks.mdx#2025-04-11_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n  ClientSideSuspense,\n  useOthers,\n  useUpdateMyPresence,\n  useStorage,\n  useMutation,\n} from \"@liveblocks/react/suspense\";\nimport { LiveList } from \"@liveblocks/client\";\nimport { useState } from \"react\";\n\n/* WhoIsHere */\n/* SomeoneIsTyping */\n\nexport default function TodoList() {\n  const [draft, setDraft] = useState(\"\");\n  const updateMyPresence = useUpdateMyPresence();\n  const todos = useStorage((root) => root.todos);\n\n  const addTodo = useMutation(({ storage }, text) => {\n    storage.get(\"todos\").push({ text })\n  }, []);\n\n  const deleteTodo = useMutation(({ storage }, index) => {\n    storage.get(\"todos\").delete(index);\n  }, []);\n\n  return (\n    <div className=\"container\">\n      <WhoIsHere />\n      <input\n        {/* ... */}\n\n        onKeyDown={(e) => {\n          if (e.key === \"Enter\") {\n            updateMyPresence({ isTyping: false });\n            addTodo(draft);\n            setDraft(\"\");\n          }\n        }}\n      />\n      <SomeoneIsTyping />\n      {todos.map((todo, index) => {\n        return (\n          <div key={index} className=\"todo_container\">\n            <div className=\"todo\">{todo.text}</div>\n\n            <button\n              className=\"delete_button\"\n              onClick={() => deleteTodo(index)}\n            >\n              ✕\n            </button>\n\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\n/* Page */\n```\n\n----------------------------------------\n\nTITLE: Implementing Collaborative Quill Editor in Svelte\nDESCRIPTION: Svelte component that sets up a collaborative Quill text editor using Liveblocks, Yjs, and Quill. It includes client initialization, room creation, Yjs document setup, and Quill editor configuration with cursor support.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-quill-svelte.mdx#2025-04-11_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<script>\nimport { onMount, onDestroy } from \"svelte\";\nimport { createClient } from \"@liveblocks/client\";\nimport { getYjsProviderForRoom } from \"@liveblocks/yjs\";\nimport * as Y from \"yjs\";\nimport Quill from \"quill\";\nimport { QuillBinding } from \"y-quill\";\nimport QuillCursors from \"quill-cursors\";\n\nlet element;\n\n// Set up Liveblocks client\nconst client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n\nonMount(() => {\n  // Enter a multiplayer room\n  const { room, leave } = client.enterRoom(\"my-room\");\n\n  // Set up Yjs document, shared text, and Liveblocks Yjs provider\n  const yProvider = getYjsProviderForRoom(room);\n  const yDoc = yProvider.getYDoc();\n  const yText = yDoc.getText(\"quill\");\n\n  // Attach cursors plugin\n  Quill.register(\"modules/cursors\", QuillCursors);\n\n  // Set up Quill editor and modules\n  const quill = new Quill(element, {\n    placeholder: \"Start collaborating…\",\n    theme: \"snow\",\n    modules: {\n      cursors: true,\n      toolbar: [\n        [{ header: [1, 2, false] }],\n        [\"bold\", \"italic\", \"underline\"],\n        [\"code-block\"],\n      ],\n      history: {\n        // Local undo shouldn't undo changes made by other users\n        userOnly: true,\n      },\n    },\n  });\n\n  // Attach Yjs to Quill\n  const binding = new QuillBinding(yText, quill, yProvider.awareness);\n\n  return () => {\n    binding.destroy();\n    leave();\n  };\n});\n</script>\n\n<div bind:this={element}></div>\n```\n\n----------------------------------------\n\nTITLE: Creating a Live Avatars Component using Liveblocks and TypeScript\nDESCRIPTION: This snippet demonstrates how to create a live avatars component in a Tiptap editor using the Liveblocks 'useOthers' and 'useSelf' hooks. It shows how to map over the current online users and display their avatars with tooltip information.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-tiptap-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_12\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useOthers, useSelf } from \"@/liveblocks.config\";\nimport styles from \"./Avatars.module.css\";\n\nexport function Avatars() {\n  const users = useOthers();\n  const currentUser = useSelf();\n\n  return (\n    <div className={styles.avatars}>\n      {users.map(({ connectionId, info }) => {\n        return (\n          <Avatar key={connectionId} picture={info.picture} name={info.name} />\n        );\n      })}\n\n      {currentUser && (\n        <div className=\"relative ml-8 first:ml-0\">\n          <Avatar\n            picture={currentUser.info.picture}\n            name={currentUser.info.name}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport function Avatar({ picture, name }: { picture: string; name: string }) {\n  return (\n    <div className={styles.avatar} data-tooltip={name}>\n      <img\n        src={picture}\n        className={styles.avatar_picture}\n        data-tooltip={name}\n      />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Live Cursors with Liveblocks in TSX\nDESCRIPTION: This snippet sets up a collaborative code editor using Liveblocks and Yjs, enabling live cursors. It fetches user information through Liveblocks and integrates it into a CodeMirror setup, initializing a Yjs document and provider for live collaboration. React hooks are used for DOM manipulation and effect management. The code requires liveblocks-react, yjs, and codemirror extensions as dependencies.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-codemirror-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useRoom, useSelf } from \"@/liveblocks.config\";\n// ...\n\n// Collaborative code editor with undo/redo, live cursors, and live avatars\nexport function CollaborativeEditor() {\n  const room = useRoom();\n  const [element, setElement] = useState<HTMLElement>();\n  const [yUndoManager, setYUndoManager] = useState<Y.UndoManager>();\n\n  // Get user info from Liveblocks authentication endpoint\n  const userInfo = useSelf((me) => me.info);\n\n  const ref = useCallback((node: HTMLElement | null) => {\n    if (!node) return;\n    setElement(node);\n  }, []);\n\n  // Set up Liveblocks Yjs provider and attach CodeMirror editor\n  useEffect(() => {\n    let provider: TypedLiveblocksProvider;\n    let ydoc: Y.Doc;\n    let view: EditorView;\n\n    if (!element || !room || !userInfo) {\n      return;\n    }\n\n    // Create Yjs provider and document\n    ydoc = new Y.Doc();\n    provider = new LiveblocksYjsProvider(room as any, ydoc);\n    const ytext = ydoc.getText(\"codemirror\");\n    const undoManager = new Y.UndoManager(ytext);\n    setYUndoManager(undoManager);\n\n    // Attach user info to Yjs\n    provider.awareness.setLocalStateField(\"user\", {\n      name: userInfo.name,\n      color: userInfo.color,\n      colorLight: userInfo.color + \"80\", // 6-digit hex code at 50% opacity\n    });\n\n    // Set up CodeMirror and extensions\n    const state = EditorState.create({\n      doc: ytext.toString(),\n      extensions: [\n        basicSetup,\n        javascript(),\n        yCollab(ytext, provider.awareness, { undoManager }),\n      ],\n    });\n\n    // Attach CodeMirror to element\n    view = new EditorView({\n      state,\n      parent: element,\n    });\n\n    return () => {\n      ydoc?.destroy();\n      provider?.destroy();\n      view?.destroy();\n    };\n  }, [element, room, userInfo]);\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.editorContainer} ref={ref}></div>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Collaborative Monaco Editor with Yjs\nDESCRIPTION: Set up a collaborative Monaco code editor using Yjs and Liveblocks. This component integrates Monaco with Yjs for real-time collaboration features.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-monaco-react.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport * as Y from \"yjs\";\nimport { getYjsProviderForRoom } from \"@liveblocks/yjs\";\nimport { useRoom } from \"@/liveblocks.config\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { Editor } from \"@monaco-editor/react\";\nimport { editor } from \"monaco-editor\";\nimport { MonacoBinding } from \"y-monaco\";\nimport { Awareness } from \"y-protocols/awareness\";\n\n// Collaborative text editor with simple rich text, live cursors, and live avatars\nexport function CollaborativeEditor() {\n  const [editorRef, setEditorRef] = useState<editor.IStandaloneCodeEditor>();\n  const room = useRoom();\n  const yProvider = getYjsProviderForRoom(room);\n\n  // Set up Liveblocks Yjs provider and attach Monaco editor\n  useEffect(() => {\n    let binding: MonacoBinding;\n\n    if (editorRef) {\n      const yDoc = yProvider.getYDoc();\n      const yText = yDoc.getText(\"monaco\");\n\n      // Attach Yjs to Monaco\n      binding = new MonacoBinding(\n        yText,\n        editorRef.getModel() as editor.ITextModel,\n        new Set([editorRef]),\n        yProvider.awareness as Awareness\n      );\n    }\n\n    return () => {\n      binding?.destroy();\n    };\n  }, [editorRef, room]);\n\n  const handleOnMount = useCallback((e: editor.IStandaloneCodeEditor) => {\n    setEditorRef(e);\n  }, []);\n\n  return (\n    <Editor\n      onMount={handleOnMount}\n      height=\"100vh\"\n      width=\"100hw\"\n      theme=\"vs-light\"\n      defaultLanguage=\"typescript\"\n      defaultValue=\"\"\n      options={{\n        tabSize: 2,\n      }}\n    />\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Individual Room Access in Next.js Authentication Endpoint\nDESCRIPTION: This example shows how to implement a Next.js authentication endpoint that grants access to individual rooms based on the room ID provided in the request. It includes handling for user verification and room-specific permissions.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-grant-access-to-individual-rooms-with-access-tokens.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"sk_prod_xxxxxxxxxxxxxxxxxxxxxxxx\",\n});\n\nexport async function POST(request: Request) {\n  // Get the current user from your database\n  const user = __getUserFromDB__(request);\n\n  // Start an auth session inside your endpoint\n  const session = liveblocks.prepareSession(\n    user.id,\n    { userInfo: user.metadata } // Optional\n  );\n\n  const { room } = request.body;\n\n  if (room && __shouldUserHaveAccess__(user, room)) {\n    session.allow(room, session.FULL_ACCESS);\n  }\n\n  // Authorize the user and return the result\n  const { status, body } = await session.authorize();\n  return new Response(body, { status });\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing a collaborative CodeMirror editor with Yjs and Liveblocks\nDESCRIPTION: Implementation of a collaborative code editor using CodeMirror, Yjs, and Liveblocks. Sets up the editor with JavaScript syntax highlighting and real-time collaboration features.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-codemirror-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport * as Y from \"yjs\";\nimport { yCollab } from \"y-codemirror.next\";\nimport { EditorView, basicSetup } from \"codemirror\";\nimport { EditorState } from \"@codemirror/state\";\nimport { javascript } from \"@codemirror/lang-javascript\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { LiveblocksYjsProvider } from \"@liveblocks/yjs\";\nimport { TypedLiveblocksProvider, useRoom } from \"@/liveblocks.config\";\nimport styles from \"./CollaborativeEditor.module.css\";\n\n// Collaborative code editor with undo/redo, live cursors, and live avatars\nexport function CollaborativeEditor() {\n  const room = useRoom();\n  const [element, setElement] = useState<HTMLElement>();\n  const [yUndoManager, setYUndoManager] = useState<Y.UndoManager>();\n\n  const ref = useCallback((node: HTMLElement | null) => {\n    if (!node) return;\n    setElement(node);\n  }, []);\n\n  // Set up Liveblocks Yjs provider and attach CodeMirror editor\n  useEffect(() => {\n    let provider: TypedLiveblocksProvider;\n    let ydoc: Y.Doc;\n    let view: EditorView;\n\n    if (!element || !room || !userInfo) {\n      return;\n    }\n\n    // Create Yjs provider and document\n    ydoc = new Y.Doc();\n    provider = new LiveblocksYjsProvider(room as any, ydoc);\n    const ytext = ydoc.getText(\"codemirror\");\n    const undoManager = new Y.UndoManager(ytext);\n    setYUndoManager(undoManager);\n\n    // Set up CodeMirror and extensions\n    const state = EditorState.create({\n      doc: ytext.toString(),\n      extensions: [\n        basicSetup,\n        javascript(),\n        yCollab(ytext, provider.awareness, { undoManager }),\n      ],\n    });\n\n    // Attach CodeMirror to element\n    view = new EditorView({\n      state,\n      parent: element,\n    });\n\n    return () => {\n      ydoc?.destroy();\n      provider?.destroy();\n      view?.destroy();\n    };\n  }, [element, room, userInfo]);\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.editorContainer} ref={ref}></div>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Defining TypeScript Types for Liveblocks Presence\nDESCRIPTION: TypeScript type definition for the user presence feature, which tracks whether a user is currently typing in the collaborative to-do list.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-react-and-liveblocks.mdx#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\ndeclare global {\n  interface Liveblocks {\n    // +++\n    Presence: { isTyping: boolean };\n    // +++\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Subscribing to Storage Status in TypeScript\nDESCRIPTION: Example showing how to subscribe to storage status changes in a Liveblocks room. The code demonstrates handling different storage states including not-loaded, loading, synchronizing, and synchronized.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG.md#2025-04-11_snippet_22\n\nLANGUAGE: typescript\nCODE:\n```\nroom.subscribe(\"storage-status\", (status) => {\n  switch (status) {\n    case \"not-loaded\":\n      break;\n    case \"loading\":\n      break;\n    case \"synchronizing\":\n      break;\n    case \"synchronized\":\n      break;\n    default:\n      break;\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Complete Lexical Editor Setup with LiveblocksPlugin\nDESCRIPTION: Comprehensive setup for a collaborative Lexical editor, showing how to import and use the necessary components including LiveblocksPlugin and RichTextPlugin. It demonstrates the proper nesting of components.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { LexicalComposer } from \"@lexical/react/LexicalComposer\";\nimport { RichTextPlugin } from \"@lexical/react/LexicalRichTextPlugin\";\nimport { ContentEditable } from \"@lexical/react/LexicalContentEditable\";\nimport { LexicalErrorBoundary } from \"@lexical/react/LexicalErrorBoundary\";\n// +++\nimport { liveblocksConfig, LiveblocksPlugin } from \"@liveblocks/react-lexical\";\n// +++\n\nconst initialConfig = liveblocksConfig({\n  namespace: \"MyEditor\",\n  theme: {},\n  nodes: [],\n  onError: (err) => console.error(err),\n});\n\nfunction Editor() {\n  return (\n    <LexicalComposer initialConfig={initialConfig}>\n      // +++\n      <LiveblocksPlugin>\n        <FloatingThreads />\n        <FloatingComposer />\n        <AnchoredThreads />\n      </LiveblocksPlugin>\n      // +++\n      <RichTextPlugin\n        contentEditable={<ContentEditable />}\n        placeholder={<div>Enter some text...</div>}\n        ErrorBoundary={LexicalErrorBoundary}\n      />\n    </LexicalComposer>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Complete Next.js Auth Implementation\nDESCRIPTION: Full implementation of Liveblocks authentication endpoint in Next.js, including user verification and access control.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/1.2.mdx#2025-04-11_snippet_4\n\nLANGUAGE: ts\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\n\n// Create a client\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nexport async function POST(request: Request) {\n  const user = __getUserFromDB__(request);\n\n  // Start an auth session inside your endpoint\n  const session = liveblocks.prepareSession(\n    user.id,\n    { userInfo: user.metadata } // Optional\n  );\n\n  // Give the user access to the room\n  const { room } = await request.json();\n  if (room && __shouldUserHaveAccess__(user, room)) {\n    // e.g. session.allow(\"my-room\", [\"room:write\"])\n    session.allow(room, session.FULL_ACCESS);\n  }\n\n  // Authorize the user and return the result\n  const { status, body } = await session.authorize();\n  return new Response(body, { status });\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Storage with Nested Data Structures\nDESCRIPTION: Example of initializing storage with nested data structures, including a LiveList of pets within a scientist LiveObject. This demonstrates how to create more complex hierarchical data structures in Liveblocks storage.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-storage-with-react.mdx#2025-04-11_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\ninitialStorage={{\n  scientist: new LiveObject({\n    pets: new LiveList([\"🐶\", \"🐱\", \"🐷\"]),\n    firstName: \"Marie\",\n    lastName: \"Curie\",\n  })\n}}\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Configuration File\nDESCRIPTION: Command to create the liveblocks.config.ts file, which can be used to define types for the application later.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-comments.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework react\n```\n\n----------------------------------------\n\nTITLE: Modifying Liveblocks Storage in Node.js with TypeScript\nDESCRIPTION: Creates a Liveblocks client instance and demonstrates how to mutate storage by pushing an item to a list. Requires @liveblocks/node package and a secret key for authentication.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-modify-liveblocks-storage-from-the-server.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// Creating a node client (centrally)\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nexport async function POST() {\n  console.log(\"Updating storage\");\n\n  // Mutate storage\n  +++\n  await liveblocks.mutateStorage(\n    \"my-room\",\n\n    ({ root }) => {\n      root.get(\"list\").push(\"item3\");\n    }\n  );\n  +++\n\n  console.log(\"Storage update complete!\");\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Storage with useStorage Hook\nDESCRIPTION: Uses the useStorage hook to access the scientist object from storage. This creates a reactive connection to the storage value, automatically updating the component when changes occur.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-storage-with-react.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useStorage } from \"@liveblocks/react\";\n\nfunction App() {\n  const scientist = useStorage((root) => root.scientist);\n\n  if (scientist == null) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <>\n      <input value={scientist.firstName} />\n      <input value={scientist.lastName} />\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing a Collaborative Quill Editor with Yjs and Liveblocks\nDESCRIPTION: Creates a collaborative text editor component using Quill, Yjs, and Liveblocks integration. Sets up the Yjs document, binds it to Quill, and enables real-time collaboration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-quill-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport Quill from \"quill\";\nimport ReactQuill from \"react-quill\";\nimport { QuillBinding } from \"y-quill\";\nimport * as Y from \"yjs\";\nimport { LiveblocksYjsProvider } from \"@liveblocks/yjs\";\nimport { useRoom } from \"@/liveblocks.config\";\nimport { useEffect, useRef, useState } from \"react\";\nimport styles from \"./Editor.module.css\";\n\n// Collaborative text editor with simple rich text, live cursors, and live avatars\nexport function CollaborativeEditor() {\n  const room = useRoom();\n  const [text, setText] = useState<Y.Text>();\n  const [provider, setProvider] = useState<any>();\n\n  // Set up Liveblocks Yjs provider\n  useEffect(() => {\n    const yDoc = new Y.Doc();\n    const yText = yDoc.getText(\"quill\");\n    const yProvider = new LiveblocksYjsProvider(room, yDoc);\n    setText(yText);\n    setProvider(yProvider);\n\n    return () => {\n      yDoc?.destroy();\n      yProvider?.destroy();\n    };\n  }, [room]);\n\n  if (!text || !provider) {\n    return null;\n  }\n\n  return <QuillEditor yText={text} provider={provider} />;\n}\n\ntype EditorProps = {\n  yText: Y.Text;\n  provider: any;\n};\n\nfunction QuillEditor({ yText, provider }: EditorProps) {\n  const reactQuillRef = useRef<ReactQuill>(null);\n\n  // Set up Yjs and Quill\n  useEffect(() => {\n    let quill: ReturnType<ReactQuill[\"getEditor\"]>;\n    let binding: QuillBinding;\n\n    if (!reactQuillRef.current) {\n      return;\n    }\n\n    quill = reactQuillRef.current.getEditor();\n    binding = new QuillBinding(yText, quill, provider.awareness);\n    return () => {\n      binding?.destroy?.();\n    };\n  }, [yText, provider]);\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.editorContainer}>\n        <ReactQuill\n          className={styles.editor}\n          placeholder=\"Start typing here…\"\n          ref={reactQuillRef}\n          theme=\"snow\"\n          modules={{\n            toolbar: false,\n            history: {\n              // Local undo shouldn't undo changes from remote users\n              userOnly: true,\n            },\n          }}\n        />\n      </div>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Multi-user Cursor Tracking\nDESCRIPTION: Demonstrates full implementation of multi-user cursor tracking with presence updates and cursor rendering for all connected users.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-presence-with-react.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  useOthers,\n  useUpdateMyPresence,\n  RoomProvider,\n} from \"@liveblocks/react/suspense\";\n\nfunction App() {\n  const others = useOthers();\n  const updateMyPresence = useUpdateMyPresence();\n\n  return (\n    <div\n      style={{ width: \"100vw\", height: \"100vh\" }}\n      onPointerMove={(e) =>\n        updateMyPresence({ cursor: { x: e.clientX, y: e.clientY } })\n      }\n      onPointerLeave={() => updateMyPresence({ cursor: null })}\n    >\n      {others.map(({ connectionId, presence }) =>\n        presence.cursor ? (\n          <Cursor\n            key={connectionId}\n            x={presence.cursor.x}\n            y={presence.cursor.y}\n          />\n        ) : null\n      )}\n    </div>\n  );\n}\n\nfunction Cursor({ x, y }) {\n  return (\n    <img\n      style={{\n        position: \"absolute\",\n        transform: `translate(${x}px, ${y}px)`,\n      }}\n      src=\"/assets/cursor.svg\"\n    />\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Live Avatars with Liveblocks Hooks\nDESCRIPTION: This TypeScript code defines an `Avatars` component that displays live avatars of connected users using the `useOthers` and `useSelf` hooks from Liveblocks.  The `Avatar` sub-component is responsible for rendering individual avatars.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-monaco-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_15\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useOthers, useSelf } from \"@/liveblocks.config\";\nimport styles from \"./Avatars.module.css\";\n\nexport function Avatars() {\n  const users = useOthers();\n  const currentUser = useSelf();\n\n  return (\n    <div className={styles.avatars}>\n      {users.map(({ connectionId, info }) => {\n        return (\n          <Avatar key={connectionId} picture={info.picture} name={info.name} />\n        );\n      })}\n\n      {currentUser && (\n        <div className=\"relative ml-8 first:ml-0\">\n          <Avatar\n            picture={currentUser.info.picture}\n            name={currentUser.info.name}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport function Avatar({ picture, name }: { picture: string; name: string }) {\n  return (\n    <div className={styles.avatar} data-tooltip={name}>\n      <img\n        src={picture}\n        className={styles.avatar_picture}\n        data-tooltip={name}\n      />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing resolveUsers with API Integration in LiveblocksProvider\nDESCRIPTION: This snippet shows a real-world example of implementing the resolveUsers function that fetches user data from a backend API. It demonstrates how to handle the userIds parameter and return properly formatted user information.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-add-users-to-liveblocks-text-editor.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n<LiveblocksProvider\n  resolveUsers={async ({ userIds }) => {\n    // Get users from your back end\n    const users = await __fetchUsers__(userIds);\n\n    // Return a list of users\n    return users;\n  }}\n\n  // ...\n/>;\n```\n\n----------------------------------------\n\nTITLE: Setting Up Liveblocks Client and Room Provider in React\nDESCRIPTION: React component that sets up the Liveblocks client with LiveblocksProvider and connects to a specific room with RoomProvider, which are necessary for collaboration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-tiptap.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n} from \"@liveblocks/react/suspense\";\nimport { Editor } from \"./Editor\";\n\nexport default function App() {\n  return (\n    <LiveblocksProvider publicApiKey={\"{{PUBLIC_KEY}}\"}>      <RoomProvider id=\"my-room\">\n        {/* ... */}\n      </RoomProvider>\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Liveblocks Authentication - App Router\nDESCRIPTION: Authentication endpoint setup for Liveblocks using Next.js App Router, handling user sessions and room access.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-slate-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\nimport { NextRequest } from \"next/server\";\n\nconst API_KEY = \"{{SECRET_KEY}}\";\n\nconst liveblocks = new Liveblocks({\n  secret: API_KEY!,\n});\n\nexport async function POST(request: NextRequest) {\n  const user = {\n    id: \"charlielayne@example.com\",\n    info: {\n      name: \"Charlie Layne\",\n      color: \"#D583F0\",\n      picture: \"https://liveblocks.io/avatars/avatar-1.png\",\n    },\n  };\n\n  const session = liveblocks.prepareSession(user.id, {\n    userInfo: user.info,\n  });\n\n  const { room } = await request.json();\n  session.allow(room, session.FULL_ACCESS);\n\n  const { body, status } = await session.authorize();\n  return new Response(body, { status });\n}\n```\n\n----------------------------------------\n\nTITLE: Setting up Liveblocks Client in TypeScript\nDESCRIPTION: Code snippet to create a Liveblocks client using the createClient function. The client is responsible for communicating with the backend.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/vuejs.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Multiple TipTap Editors with Liveblocks\nDESCRIPTION: Demonstrates a complete example of implementing multiple TipTap editors on one page using Liveblocks, each with a unique field identifier.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_47\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useLiveblocksExtension } from \"@liveblocks/react-tiptap\";\nimport { useEditor, EditorContent } from \"@tiptap/react\";\n\nfunction TextEditors() {\n  return (\n    <div>\n      // +++\n      <TextEditor field=\"one\" />\n      <TextEditor field=\"two\" />\n      // +++\n    </div>\n  );\n}\n\nfunction TextEditor({ field }: { field: string }) {\n  // +++\n  const liveblocks = useLiveblocksExtension({ field });\n  // +++\n\n  const editor = useEditor({\n    extensions: [\n      liveblocks,\n      // ...\n    ],\n  });\n\n  return (\n    <div>\n      <EditorContent editor={editor} />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Up Liveblocks Authentication Endpoint with Next.js Pages Router\nDESCRIPTION: Creates an authentication endpoint using Next.js Pages API routes to authenticate users with Liveblocks. This alternative implementation supports older Next.js projects using the Pages Router.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-tiptap-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\nimport type { NextApiRequest, NextApiResponse } from \"next\";\n\nconst API_KEY = \"{{SECRET_KEY}}\";\n\nconst liveblocks = new Liveblocks({\n  secret: API_KEY!,\n});\n\nexport default async function handler(\n  request: NextApiRequest,\n  response: NextApiResponse\n) {\n  // Get the current user's info from your database\n  const user = {\n    id: \"charlielayne@example.com\",\n    info: {\n      name: \"Charlie Layne\",\n      color: \"#D583F0\",\n      picture: \"https://liveblocks.io/avatars/avatar-1.png\",\n    },\n  };\n\n  // Create a session for the current user\n  // userInfo is made available in Liveblocks presence hooks, e.g. useOthers\n  const session = liveblocks.prepareSession(user.id, {\n    userInfo: user.info,\n  });\n\n  // Give the user access to the room\n  const { room } = request.body;\n  session.allow(room, session.FULL_ACCESS);\n\n  // Authorize the user and return the result\n  const { status, body } = await session.authorize();\n  response.status(status).send(body);\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Up Liveblocks Authentication Endpoint with Next.js App Router\nDESCRIPTION: Creates an authentication endpoint that authorizes users and provides access to Liveblocks rooms using the App Router format. It sets up user identity and permissions.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-lexical-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\nimport { NextRequest } from \"next/server\";\n\nconst API_KEY = \"{{SECRET_KEY}}\";\n\nconst liveblocks = new Liveblocks({\n  secret: API_KEY!,\n});\n\nexport async function POST(request: NextRequest) {\n  // Get the current user's info from your database\n  const user = {\n    id: \"charlielayne@example.com\",\n    info: {\n      name: \"Charlie Layne\",\n      color: \"#D583F0\",\n      picture: \"https://liveblocks.io/avatars/avatar-1.png\",\n    },\n  };\n\n  // Create a session for the current user\n  // userInfo is made available in Liveblocks presence hooks, e.g. useOthers\n  const session = liveblocks.prepareSession(user.id, {\n    userInfo: user.info,\n  });\n\n  // Give the user access to the room\n  const { room } = await request.json();\n  session.allow(room, session.FULL_ACCESS);\n\n  // Authorize the user and return the result\n  const { body, status } = await session.authorize();\n  return new Response(body, { status });\n}\n```\n\n----------------------------------------\n\nTITLE: Complete Component with Storage Access and Mutations\nDESCRIPTION: Full React component that combines useStorage to display scientist data and useMutation to update it. This showcases a complete implementation pattern for creating interactive UI elements connected to Liveblocks storage.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-storage-with-react.mdx#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useStorage, useMutation } from \"@liveblocks/react\";\n\nfunction YourComponent() {\n  const scientist = useStorage((root) => root.scientist);\n\n  if (scientist == null) {\n    return <div>Loading...</div>;\n  }\n\n  const updateName = useMutation(({ storage }, nameType, newName) => {\n    const mutableScientist = storage.get(\"scientist\");\n    mutableScientist.set(nameType, newName);\n  }, []);\n\n  return (\n    <>\n      <input\n        value={scientist.firstName}\n        onChange={(e) => updateName(\"firstName\", e.target.value)}\n      />\n      <input\n        value={scientist.lastName}\n        onChange={(e) => updateName(\"lastName\", e.target.value)}\n      />\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring User Metadata in Access Tokens for Liveblocks Text Editor in TypeScript\nDESCRIPTION: This code demonstrates how to prepare a user session with metadata including name, color, and avatar URL that will be used by the Text Editor. It uses the liveblocks.prepareSession method with an email as the user ID.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-add-users-to-liveblocks-text-editor.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst session = liveblocks.prepareSession(\"marc@example.com\", {\n  userInfo: {\n    name: \"Marc\",\n    color: \"#00ff00\",\n    avatar: \"https://example.com/marc.png\",\n\n    // Your custom metadata\n    // ...\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Setting Up Collaborative Tiptap Text Editor in Svelte\nDESCRIPTION: This Svelte component sets up a collaborative Tiptap text editor using Liveblocks and Yjs. It initializes the Liveblocks client, enters a multiplayer room, sets up the Yjs document and provider, and configures the Tiptap editor with collaboration extensions.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-tiptap-svelte.mdx#2025-04-11_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<script>\nimport { onMount, onDestroy } from \"svelte\";\nimport { createClient } from \"@liveblocks/client\";\nimport { getYjsProviderForRoom } from \"@liveblocks/yjs\";\nimport * as Y from \"yjs\";\nimport { Editor } from \"@tiptap/core\";\nimport StarterKit from \"@tiptap/starter-kit\";\nimport Collaboration from \"@tiptap/extension-collaboration\";\nimport CollaborationCursor from \"@tiptap/extension-collaboration-cursor\";\n\nlet element;\n\n// Set up Liveblocks client\nconst client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n\nonMount(() => {\n  // Enter a multiplayer room\n  const { room, leave } = client.enterRoom(\"my-room\");\n\n  // Set up Yjs document and Liveblocks Yjs provider\n  const yProvider = getYjsProviderForRoom(room);\n  const yDoc = yProvider.getYDoc();\n\n  // Set up the Tiptap editor\n  editor = new Editor({\n    element,\n    extensions: [\n      StarterKit.configure({\n        // The Collaboration extension comes with its own history handling\n        history: false,\n      }),\n      // Register the Yjs document with Tiptap\n      Collaboration.configure({\n        document: yDoc,\n      }),\n      CollaborationCursor.configure({\n        provider: yProvider,\n      }),\n    ],\n    onTransaction: () => {\n      // Force re-render so `editor.isActive` works as expected\n      editor = editor\n    },\n  });\n\n  return () => {\n    editor.destroy();\n    leave();\n  };\n});\n</script>\n\n<div bind:this={element}></div>\n```\n\n----------------------------------------\n\nTITLE: Broadcasting Toast Event in React onClick Handler\nDESCRIPTION: This code shows how to broadcast a toast event when a button is clicked. It uses the broadcast function to send an event matching the RoomEvent type to other users in the room.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/broadcasting-events/guide.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nreturn (\n  <button\n    onClick={() =>\n      // Broadcast toast event\n      broadcast({ type: \"TOAST\", message: \"Event received!\" })\n    }\n  >\n    Broadcast event\n  </button>\n);\n```\n\n----------------------------------------\n\nTITLE: Using the New Room Entry API in Liveblocks Client (TypeScript)\nDESCRIPTION: Demonstrates the new recommended API for entering and leaving rooms in Liveblocks. The new approach returns both the room object and a function to leave the room, enabling multiple connections to the same room.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node/CHANGELOG.md#2025-04-11_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\n// New API we'll be recommending instead\nconst { room, leave } = client.enterRoom(\"my-room\", options);\nleave();\n```\n\n----------------------------------------\n\nTITLE: Setting Up Liveblocks Authentication Endpoint with App Router\nDESCRIPTION: Implementation of a Liveblocks authentication endpoint using Next.js App Router. Creates a user session and authorizes access to a Liveblocks room.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-monaco-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_1\n\nLANGUAGE: ts\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\nimport { NextRequest } from \"next/server\";\n\nconst API_KEY = \"{{SECRET_KEY}}\";\n\nconst liveblocks = new Liveblocks({\n  secret: API_KEY!,\n});\n\nexport async function POST(request: NextRequest) {\n  // Get the current user's info from your database\n  const user = {\n    id: \"charlielayne@example.com\",\n    info: {\n      name: \"Charlie Layne\",\n      color: \"#D583F0\",\n      picture: \"https://liveblocks.io/avatars/avatar-1.png\",\n    },\n  };\n\n  // Create a session for the current user\n  // userInfo is made available in Liveblocks presence hooks, e.g. useOthers\n  const session = liveblocks.prepareSession(user.id, {\n    userInfo: user.info,\n  });\n\n  // Give the user access to the room\n  const { room } = await request.json();\n  session.allow(room, session.FULL_ACCESS);\n\n  // Authorize the user and return the result\n  const { body, status } = await session.authorize();\n  return new Response(body, { status });\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Dependencies with NPM\nDESCRIPTION: Command to install required packages for the collaborative text editor including Slate, Yjs, and Liveblocks dependencies.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-slate-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/react @liveblocks/yjs @liveblocks/node yjs slate slate-react @slate-yjs/core @slate-yjs/react\n```\n\n----------------------------------------\n\nTITLE: Implementing Vercel Postgres Database Updates with Liveblocks Data\nDESCRIPTION: Complete implementation of a webhook handler that retrieves Liveblocks Storage data and updates a Vercel Postgres database. Includes table creation, data insertion with upsert logic, and error handling.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-storage-document-data-to-a-vercel-postgres-database.mdx#2025-04-11_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\nimport { sql } from \"@vercel/postgres\";\n\n// Add your signing key from a project's webhooks dashboard\nconst WEBHOOK_SECRET = \"YOUR_SIGNING_SECRET\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\n// Add your secret key from a project's API keys dashboard\nconst API_SECRET = \"{{SECRET_KEY}}\";\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Verify if this is a real webhook request\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  // When Storage document data has been updated\n  if (event.type === \"storageUpdated\") {\n    const { roomId } = event.data;\n\n    // Get Storage data from Liveblocks REST API\n    const url = `https://api.liveblocks.io/v2/rooms/${roomId}/storage`;\n    const response = await fetch(url, {\n      headers: { Authorization: `Bearer ${API_SECRET}` },\n    });\n\n    if (!response.ok) {\n      return new Response(\"Problem accessing Liveblocks REST APIs\", {\n        status: 500,\n      });\n    }\n\n    // Your JSON Storage document data as a string\n    const storageData = await response.text();\n\n    // Update database\n    try {\n      await sql`\n        CREATE TABLE IF NOT EXISTS documents (\n          roomId VARCHAR(255) PRIMARY KEY,\n          storageData TEXT NOT NULL\n        );\n      `;\n      await sql`\n        INSERT INTO documents (roomId, storageData)\n        VALUES (${roomId}, ${storageData})\n        ON CONFLICT (roomId)\n        DO UPDATE SET\n          storageData = EXCLUDED.storageData\n      `;\n    } catch (err) {\n      return new Response(\"Problem inserting data into database\", {\n        status: 500,\n      });\n    }\n  }\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Realtime Input Component in React TSX\nDESCRIPTION: This snippet demonstrates how to create a realtime input component using the useStorage hook for displaying the current value and useMutation for updating it in Liveblocks storage.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/modifying-storage-data/guide.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nreturn (\n  <input\n    type=\"text\"\n    value={person.name}\n    onChange={(e) => updateName(e.target.value)}\n  />\n);\n```\n\n----------------------------------------\n\nTITLE: User Authentication and Access Control\nDESCRIPTION: Demonstrates user authentication and setting up user-specific access permissions.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token.mdx#2025-04-11_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nexport async function POST(request: Request) {\n  const { status, body } = await liveblocks.identifyUser({\n    userId: \"ellen@acme.inc\"\n  });\n\n  return new Response(body, { status });\n}\n```\n\n----------------------------------------\n\nTITLE: Setting up collaborative BlockNote editor with Liveblocks in React\nDESCRIPTION: This snippet demonstrates how to create a collaborative BlockNote editor using useCreateBlockNoteWithLiveblocks and render it with BlockNoteView.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-blocknote.mdx#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useCreateBlockNoteWithLiveblocks } from \"@liveblocks/react-blocknote\";\nimport { BlockNoteView } from \"@blocknote/mantine\";\n\nfunction TextEditor() {\n  const editor = useCreateBlockNoteWithLiveblocks({});\n\n  return (\n    <div>\n      <BlockNoteView editor={editor} />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Complete Typing Indicator Implementation\nDESCRIPTION: Final JavaScript implementation with typing status detection and display logic, using Liveblocks presence system to track and show typing indicators for multiple users.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-javascript-and-liveblocks.mdx#2025-04-11_snippet_10\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\n\nconst client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n\nfunction run() {\n  const { room, leave } = client.enterRoom(\"javascript-todo-app\", {\n    initialPresence: { isTyping: false },\n  });\n\n  const whoIsHere = document.getElementById(\"who_is_here\");\n  const todoInput = document.getElementById(\"todo_input\");\n  const someoneIsTyping = document.getElementById(\"someone_is_typing\");\n\n  room.subscribe(\"others\", (others) => {\n    whoIsHere.innerHTML = `There are ${others.count} other users online`;\n\n    someoneIsTyping.innerHTML = others\n      .toArray()\n      .some((user) => user.presence?.isTyping)\n      ? \"Someone is typing...\"\n      : \"\";\n  });\n\n  todoInput.addEventListener(\"keydown\", (e) => {\n    // Clear the input when the user presses \"Enter\".\n    // We'll add todo later on\n    if (e.key === \"Enter\") {\n      room.updatePresence({ isTyping: false });\n      todoInput.value = \"\";\n    } else {\n      room.updatePresence({ isTyping: true });\n    }\n  });\n\n  todoInput.addEventListener(\"blur\", () => {\n    room.updatePresence({ isTyping: false });\n  });\n}\n\nrun();\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Client with Notification Settings\nDESCRIPTION: Demonstrates how to use the Liveblocks client to get and update user notification settings using the new notification management methods.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node/CHANGELOG.md#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createClient } from '@liveblocks/client'\nconst client = createClient({ ... })\n\nconst settings = await client.getNotificationSettings();\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst updatedSettings = await client.updateNotificationSettings({\n  email: {\n    thread: false,\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Basic Access Token Authentication in TypeScript\nDESCRIPTION: Demonstrates how to create a session and grant room access permissions using Liveblocks prepareSession. Shows granting full access to a specific room and read access to multiple rooms using wildcards.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst session = liveblocks.prepareSession(\"olivier@example.com\");\n\n// Giving write access to one room, then read access to multiple rooms with a wildcard\nsession.allow(\"Vu78Rt:design:9Hdu73\", session.FULL_ACCESS);\nsession.allow(\"Vu78Rt:product:*\", session.READ_ACCESS);\n\nconst { body, status } = await session.authorize();\n\n// '{ token: \"j6Fga7...\" }'\nconsole.log(body);\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Store with Zustand\nDESCRIPTION: Setup of Zustand store with Liveblocks client configuration and TypeScript types. Initializes the connection to Liveblocks using a public API key.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-react-zustand-and-liveblocks.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport create from \"zustand\";\nimport { createClient } from \"@liveblocks/client\";\nimport { liveblocks } from \"@liveblocks/zustand\";\nimport type { WithLiveblocks } from \"@liveblocks/zustand\";\n\ntype State = {\n  // Your Zustand state type will be defined here\n};\n\nconst client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n\nconst useStore = create<WithLiveblocks<State>>()(\n  liveblocks(\n    (set) => ({\n      // Your state and actions will go here\n    }),\n    { client }\n  )\n);\n\nexport default useStore;\n```\n\n----------------------------------------\n\nTITLE: Configuring Zustand Store with Liveblocks Storage\nDESCRIPTION: Example showing how to set up a Zustand store with Liveblocks storage mapping. The code demonstrates configuring initial state, actions, and storage mapping for firstName, lastName and discoveries properties that will be synchronized across clients.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-storage-with-zustand.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst useStore = create<WithLiveblocks<State>>()(\n  liveblocks(\n    (set) => ({\n      firstName: \"Marie\",\n      lastName: \"Curie\",\n      discoveries: [\"Polonium\", \"Radium\"],\n\n      setFirstName: (firstName) => set({ firstName }),\n      setLastName: (lastName) => set({ lastName }),\n      addDiscovery: (discovery) =>\n        set((state) => ({\n          discoveries: state.discoveries.concat([discovery]),\n        })),\n    }),\n    {\n      client,\n      storageMapping: {\n        firstName: true,\n        lastName: true,\n        discoveries: true,\n      },\n    }\n  )\n);\n```\n\n----------------------------------------\n\nTITLE: Setting up Liveblocks client and room provider in React\nDESCRIPTION: React component that configures the Liveblocks client and joins a virtual room for collaboration using LiveblocksProvider and RoomProvider components.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-blocknote.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n} from \"@liveblocks/react/suspense\";\nimport { Editor } from \"./Editor\";\n\nexport default function App() {\n  return (\n    <LiveblocksProvider publicApiKey={\"{{PUBLIC_KEY}}\"}>      \n      <RoomProvider id=\"my-room\">\n        {/* ... */}\n      </RoomProvider>\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Storage with LiveObject in React\nDESCRIPTION: This code demonstrates how to initialize storage with a LiveObject for a person in the RoomProvider component. It's typically added to the App.tsx file.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/authenticating-with-nextjs/secret-key/guide.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n<RoomProvider\n  id={roomId}\n  initialStorage={{\n    person: new LiveObject({ name: \"Marie\", age: 30 }),\n  }}\n>\n```\n\n----------------------------------------\n\nTITLE: Setting up Liveblocks client and room in React\nDESCRIPTION: Configure the Liveblocks client using LiveblocksProvider and RoomProvider components in a React application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-slate-react.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n} from \"@liveblocks/react/suspense\";\nimport { Editor } from \"./Editor\";\n\nexport default function App() {\n  return (\n    <LiveblocksProvider publicApiKey={\"{{PUBLIC_KEY}}\">\n      <RoomProvider id=\"my-room\">\n        {/* ... */}\n      </RoomProvider>\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Inserting Yjs JSON Data into a Vercel Postgres Database with TypeScript\nDESCRIPTION: This code snippet demonstrates the table creation and data insertion logic for storing Yjs document data in a Vercel Postgres database. It ensures that a table for documents is created and handles potential conflicts when inserting data.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-yjs-document-data-to-a-vercel-postgres-database.mdx#2025-04-11_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\nimport { sql } from \"@vercel/postgres\";\n\n// Add your signing key from a project's webhooks dashboard\nconst WEBHOOK_SECRET = \"YOUR_SIGNING_SECRET\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\n// Add your secret key from a project's API keys dashboard\nconst API_SECRET = \"{{SECRET_KEY}}\";\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Verify if this is a real webhook request\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  // When Yjs document data has been updated\n  if (event.type === \"ydocUpdated\") {\n    const { roomId } = event.data;\n\n    // Get Yjs data from Liveblocks REST API\n    const url = `https://api.liveblocks.io/v2/rooms/${roomId}/ydoc`;\n    const response = await fetch(url, {\n      headers: { Authorization: `Bearer ${API_SECRET}` },\n    });\n\n    if (!response.ok) {\n      return new Response(\"Problem accessing Liveblocks REST APIs\", {\n        status: 500,\n      });\n    }\n\n    // Your JSON Yjs document data as a string\n    const yDocData = await response.text();\n\n    // Update database\n    try {\n      await sql`\n        CREATE TABLE IF NOT EXISTS documents (\n          roomId VARCHAR(255) PRIMARY KEY,\n          yDocData TEXT NOT NULL\n        );\n      `;\n      await sql`\n        INSERT INTO documents (roomId, yDocData)\n        VALUES (${roomId}, ${yDocData})\n        ON CONFLICT (roomId)\n        DO UPDATE SET\n          yDocData = EXCLUDED.yDocData\n      `;\n    } catch (err) {\n      return new Response(\"Problem inserting data into database\", {\n        status: 500,\n      });\n    }\n  }\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Custom Types for Liveblocks in TypeScript\nDESCRIPTION: Demonstrates how to define custom types for Liveblocks using global interface augmentation in TypeScript. This replaces the previous pattern of using createRoomContext with type parameters.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.0.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare global {\n  // These custom types are all optional, just define the ones you want/need\n  interface Liveblocks {\n    Presence: MyPresence;\n    Storage: MyStorage;\n    UserMeta: MyUserMeta;\n    RoomEvent: MyRoomEvent;\n    ThreadMetadata: MyThreadMetadata;\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Collaborative Tiptap Editor with Liveblocks\nDESCRIPTION: React component that creates a collaborative text editor using Tiptap and Liveblocks. Utilizes useLiveblocksExtension to synchronize editor state between users and includes a floating toolbar.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-tiptap.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { useLiveblocksExtension, FloatingToolbar } from \"@liveblocks/react-tiptap\";\nimport { useEditor, EditorContent } from \"@tiptap/react\";\nimport StarterKit from \"@tiptap/starter-kit\";\nimport { Threads } from \"./Threads\";\n\nexport function Editor() {\n  const liveblocks = useLiveblocksExtension();\n\n  const editor = useEditor({\n    extensions: [\n      liveblocks,\n      StarterKit.configure({\n        // The Liveblocks extension comes with its own history handling\n        history: false,\n      }),\n    ],\n  });\n\n  return (\n    <div>\n      <EditorContent editor={editor} className=\"editor\" />\n      <Threads editor={editor} />\n      <FloatingToolbar editor={editor} />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Getting Tiptap document state with withProsemirrorDocument in TypeScript\nDESCRIPTION: This code demonstrates how to retrieve the text content of a Tiptap document using withProsemirrorDocument and api.getText() from @liveblocks/node-prosemirror. It initializes a Liveblocks client with a secret key and fetches the document content from a specified room.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/getting-tiptap-state-on-the-server.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\nimport { withProsemirrorDocument } from \"@liveblocks/node-prosemirror\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\n// +++\nconst textContent = await withProsemirrorDocument(\n  { roomId: \"your-room-id\", client: liveblocks },\n  async (api) => {\n    return api.getText();\n  }\n);\n// +++\n\n// \"My content\"\nconsole.log(textContent);\n```\n\n----------------------------------------\n\nTITLE: Connecting Redux Store to Liveblocks in TypeScript\nDESCRIPTION: Code snippet demonstrating how to create a Liveblocks client and use the liveblocksEnhancer in the Redux store setup. This adds a new 'liveblocks' state to the store for interacting with Presence and Storage APIs.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/redux.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n\"use client\";\n\nimport { createClient } from \"@liveblocks/client\";\nimport { liveblocksEnhancer } from \"@liveblocks/redux\";\nimport { configureStore, createSlice } from \"@reduxjs/toolkit\";\n\nconst client = createClient({\n  publicApiKey: \"pk_prod_xxxxxxxxxxxxxxxxxxxxxxxx\",\n});\n\nconst initialState = {};\n\nconst slice = createSlice({\n  name: \"state\",\n  initialState,\n  reducers: {\n    /* logic will be added here */\n  },\n});\n\nfunction makeStore() {\n  return configureStore({\n    reducer: slice.reducer,\n    enhancers: [\n      liveblocksEnhancer({\n        client,\n      }),\n    ],\n  });\n}\n\nconst store = makeStore();\n\nexport default store;\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Packages with npm\nDESCRIPTION: Command to install the required Liveblocks packages for implementing comments functionality in a React application. All packages should use the same version.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-comments.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/react @liveblocks/react-ui\n```\n\n----------------------------------------\n\nTITLE: Verifying Webhook Requests with @liveblocks/node\nDESCRIPTION: This code demonstrates how to use the WebhookHandler from @liveblocks/node to verify the authenticity of incoming webhook requests by checking the request headers and body against a signing secret.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-storage-document-data-to-a-vercel-postgres-database.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\n\n// Add your signing key from a project's webhooks dashboard\nconst WEBHOOK_SECRET = \"YOUR_SIGNING_SECRET\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Verify if this is a real webhook request\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  // Update database\n  // ...\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Packages for React\nDESCRIPTION: Command to install the required Liveblocks packages for React applications. Both packages should use the same version.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/react\n```\n\n----------------------------------------\n\nTITLE: Configuring Collaborative Tiptap Editor\nDESCRIPTION: JavaScript code to set up Liveblocks client, Yjs provider, and configure Tiptap editor with collaboration features\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-tiptap-javascript.mdx#2025-04-11_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\nimport { getYjsProviderForRoom } from \"@liveblocks/yjs\";\nimport * as Y from \"yjs\";\nimport { Editor } from \"@tiptap/core\";\nimport StarterKit from \"@tiptap/starter-kit\";\nimport Collaboration from \"@tiptap/extension-collaboration\";\nimport CollaborationCursor from \"@tiptap/extension-collaboration-cursor\";\n\n// Set up Liveblocks client\nconst client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n\n// Enter a multiplayer room\nconst { room, leave } = client.enterRoom(\"my-room\");\n\n// Set up Yjs document and Liveblocks Yjs provider\nconst yProvider = getYjsProviderForRoom(room);\nconst yDoc = yProvider.getYDoc();\n\n// Set up the Tiptap editor\nconst element = document.querySelector(\"editor\");\nconst editor = new Editor({\n  element,\n  extensions: [\n    StarterKit.configure({\n      // The Collaboration extension comes with its own history handling\n      history: false,\n    }),\n    // Register the Yjs document with Tiptap\n    Collaboration.configure({\n      document: yDoc,\n    }),\n    CollaborationCursor.configure({\n      provider: yProvider,\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Granting Access to All Product Rooms with Access Token in TypeScript\nDESCRIPTION: This snippet demonstrates how to grant full access to all rooms with the 'product' prefix using a wildcard in the access token. It illustrates the broad permission setting capability of access tokens.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n// Access to every `product` room\nsession.allow(\"Vu78Rt:product:*\", session.FULL_ACCESS);\n```\n\n----------------------------------------\n\nTITLE: Implementing collaborative BlockNote text editor component\nDESCRIPTION: Editor component that uses useCreateBlockNoteWithLiveblocks to create a collaborative BlockNote editor instance and renders it with BlockNoteView and Threads components.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-blocknote.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { useCreateBlockNoteWithLiveblocks } from \"@liveblocks/react-blocknote\";\nimport { BlockNoteView } from \"@blocknote/mantine\";\nimport { Threads } from \"./Threads\";\n\nexport function Editor() {\n  const editor = useCreateBlockNoteWithLiveblocks({});\n\n  return (\n    <div>\n      <BlockNoteView editor={editor} className=\"editor\" />\n      <Threads editor={editor} />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Verifying Liveblocks Webhook Request Authenticity\nDESCRIPTION: Implementation of webhook request verification using the @liveblocks/node package. This code validates that incoming requests are legitimate webhook calls from Liveblocks by checking the signature using the webhook secret.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-yjs-document-data-to-a-vercel-postgres-database.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\n\n// Add your signing key from a project's webhooks dashboard\nconst WEBHOOK_SECRET = \"YOUR_SIGNING_SECRET\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Verify if this is a real webhook request\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  // Update database\n  // ...\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Styling the Collaborative Text Editor with CSS\nDESCRIPTION: CSS styles for the collaborative text editor component. Defines styling for the editor container, editor content, and text formatting to create a clean, professional appearance for the text editor.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-tiptap-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_6\n\nLANGUAGE: css\nCODE:\n```\n.container {\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  border-radius: 12px;\n  background: #fff;\n  width: 100%;\n  height: 100%;\n  color: #111827;\n}\n\n.editorHeader {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.editor {\n  border-radius: inherit;\n  flex-grow: 1;\n  width: 100%;\n  height: 100%;\n  padding: 1rem;\n}\n\n.editor:focus {\n  outline: none;\n}\n\n.editorContainer {\n  position: relative;\n  height: 100%;\n}\n\n.placeholder {\n  pointer-events: none;\n  position: absolute;\n  inset: 0;\n  opacity: 0.3;\n  padding: 0 1em;\n}\n\n.editor p {\n  margin: 1em 0;\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Redux Store with Liveblocks Storage\nDESCRIPTION: Demonstrates setting up a Redux store with Liveblocks enhancer and storage mapping configuration. Shows how to create a slice with initial state and reducers that will be synchronized across clients.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-storage-with-redux.mdx#2025-04-11_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n/* ...client setup... */\n\nconst initialState = {\n  firstName: \"Marie\",\n  lastName: \"Curie\",\n  discoveries: [\"Polonium\", \"Radium\"],\n};\n\nconst slice = createSlice({\n  name: \"state\",\n  initialState,\n  reducers: {\n    setFirstName: (state, action) => {\n      state.firstName = action.payload;\n    },\n    setLastName: (state, action) => {\n      state.lastName = action.payload;\n    },\n    addDiscovery: (state, action) => {\n      state.discoveries.push(action.payload);\n    },\n  },\n});\n\nexport const { setScientist } = slice.actions;\n\nfunction makeStore() {\n  return configureStore({\n    reducer: slice.reducer,\n    enhancers: [\n      enhancer({\n        client,\n        storageMapping: { firstName: true, lastName: true, discoveries: true },\n      }),\n    ],\n  });\n}\n\nconst store = makeStore();\n```\n\n----------------------------------------\n\nTITLE: Using useSyncStatus Hook in React\nDESCRIPTION: Demonstrates how to use the useSyncStatus hook to display a 'Saving...' spinner in a React application while Liveblocks is synchronizing local changes.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react-ui/CHANGELOG.md#2025-04-11_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nuseSyncStatus({ smooth: true })\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Configuration File\nDESCRIPTION: Create the liveblocks.config.ts file for defining types and configuration for the Liveblocks application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-monaco-react.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework react\n```\n\n----------------------------------------\n\nTITLE: Handling Webhooks and Sending Emails with Resend in TypeScript\nDESCRIPTION: This TypeScript snippet sets up a webhook handler using Liveblocks to listen for 'commentCreated' events, verifies the authenticity of the webhook request, and retrieves comment data along with participant information. It transforms the comment body to HTML format, identifies the relevant users, and sends an email notification to those users using the Resend service. Dependencies include the '@liveblocks/node' and 'resend' packages. Key inputs are webhook request headers and body, and the outputs are successful email dispatch logs or error messages. An API key and webhook secret are prerequisites for running this code.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-send-email-notifications-when-comments-are-created.mdx#2025-04-11_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Liveblocks, WebhookHandler, stringifyCommentBody } from \"@liveblocks/node\";\nimport { Resend } from \"resend\";\n\n// Create Resend client (add your API key)\nconst resend = new Resend(\"re_123456789\");\n\n// Add your webhook secret key from a project's webhooks dashboard\nconst WEBHOOK_SECRET = \"YOUR_WEBHOOK_SECRET_KEY\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\n// Add your secret key from a project's API keys dashboard\nconst API_SECRET = \"{{SECRET_KEY}}\";\nconst liveblocks = new Liveblocks({ secret: API_SECRET });\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Verify if this is a real webhook request\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  // When a comment has been created\n  if (event.type === \"commentCreated\") {\n    const { roomId, threadId, commentId } = event.data;\n\n    try {\n      // Get comment data and participants\n      const [comment, { participantIds }] = await Promise.all([\n        liveblocks.getComment({ roomId, threadId, commentId }),\n        liveblocks.getThreadParticipants({ roomId, threadId }),\n      ]);\n\n      // HTML comment body\n      const htmlComment = stringifyCommentBody(comment.body, {\n        format: \"html\",\n\n        async resolveUsers({ userIds }) {\n          // Get the correct users from your database\n          const users = await __getUsers__(userIds);\n\n          return users.map((user) => ({\n            name: user.name,\n          }));\n        },\n      });\n\n      // Get participating users from your database\n      const users = await __getUsers__(participantIds);\n\n      // Send email to the users' email addresses\n      try {\n        const data = await resend.emails.send({\n          from: \"My company <hello@my-company.com>\",\n          to: [users.map((user) => user.email)],\n          subject: \"New comment\",\n          html: htmlComment,\n        });\n      } catch (err) {\n        console.error(err);\n      }\n    } catch (err) {\n      console.log(err);\n      return new Response(\"Could not fetch comment data\", { status: 500 });\n    }\n  }\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Notification Settings with useNotificationSettings Hook\nDESCRIPTION: Demonstrates how to fetch and display notification settings using the useNotificationSettings hook from Liveblocks React.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-notification-settings-panel.mdx#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useNotificationSettings } from \"@liveblocks/react\";\n\nfunction NotificationSettings() {\n  const [{ isLoading, error, settings }, updateSettings] =\n    useNotificationSettings();\n\n  if (isLoading || error) {\n    return null;\n  }\n\n  console.log(settings);\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Webhook Verification in TypeScript\nDESCRIPTION: Implementation of webhook request verification using @liveblocks/node package. Includes error handling and webhook secret configuration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-test-webhooks-on-localhost.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\n\n// Add your webhook secret key from a project's webhooks dashboard\nconst WEBHOOK_SECRET = \"YOUR_WEBHOOK_SECRET\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Verify if this is a real webhook request\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  // Use webhook event\n  // ...\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Liveblocks Room Component with React Suspense\nDESCRIPTION: Creates a Room component in Next.js that sets up LiveblocksProvider and RoomProvider with client-side suspense for wrapping collaborative components.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-quill-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { ReactNode } from \"react\";\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n  ClientSideSuspense,\n} from \"@liveblocks/react/suspense\";\n\nexport function Room({ children }: { children: ReactNode }) {\n  return (\n    <LiveblocksProvider authEndpoint=\"/api/liveblocks-auth\">\n      <RoomProvider id=\"my-room\">\n        <ClientSideSuspense fallback={<div>Loading…</div>}>\n          {children}\n        </ClientSideSuspense>\n      </RoomProvider>\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Styling the Toolbar Component with CSS Modules\nDESCRIPTION: This CSS module provides styles for the toolbar and its buttons. It includes styles for layout, appearance, hover effects, focus states, and active states. The styles ensure the toolbar is visually appealing and provides good user feedback.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-monaco-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_13\n\nLANGUAGE: css\nCODE:\n```\n.toolbar {\n  display: flex;\n  padding: 1em;\n  gap: 6px;\n}\n\n.button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  border-radius: 6px;\n  height: 32px;\n  width: 32px;\n  background: #fff;\n  color: #1f2937;\n  border: none;\n  box-shadow:\n    rgba(0, 0, 0, 0.12) 0 4px 8px 0,\n    rgba(0, 0, 0, 0.02) 0 0 0 1px;\n}\n\n.button:hover {\n  color: #111827;\n  box-shadow:\n    rgba(0, 0, 0, 0.16) 0 5px 8px 0,\n    rgba(0, 0, 0, 0.04) 0 0 0 1px;\n}\n\n.button:focus-visible {\n  outline-offset: 2px;\n}\n\n.button:active {\n  box-shadow:\n    rgba(0, 0, 0, 0.16) 0 2px 3px 0,\n    rgba(0, 0, 0, 0.04) 0 0 0 1px;\n}\n```\n\n----------------------------------------\n\nTITLE: Importing Stylesheets in React-Lexical\nDESCRIPTION: Shows how to import default styles for React Lexical and required React UI styles.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_44\n\nLANGUAGE: tsx\nCODE:\n```\nimport \"@liveblocks/react-ui/styles.css\";\nimport \"@liveblocks/react-lexical/styles.css\";\n```\n\n----------------------------------------\n\nTITLE: Creating a Custom Composer with Thread Creation in React\nDESCRIPTION: This example shows how to create a custom Composer that creates a new thread on submit. It uses the useCreateThread hook and demonstrates custom components for Mention, MentionSuggestions, and Link.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_13\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  Composer,\n  CommentBodyLinkProps,\n  CommentBodyMentionProps,\n  ComposerEditorMentionSuggestionsProps,\n  ComposerSubmitComment,\n} from \"@liveblocks/react-ui/primitives\";\nimport { useCreateThread, useUser } from \"@liveblocks/react/suspense\";\nimport { FormEvent } from \"react\";\n\n// Render a custom composer that creates a thread on submit\nfunction MyComposer() {\n  // +++\n  const createThread = useCreateThread();\n  // +++\n\n  function handleComposerSubmit(\n    { body, attachments }: ComposerSubmitComment,\n    event: FormEvent<HTMLFormElement>\n  ) {\n    event.preventdefault();\n\n    // Create a new thread\n    // +++\n    const thread = createThread({\n      body,\n      attachments,\n      metadata: {},\n    });\n    //+++\n  }\n\n  return (\n    // +++\n    <Composer.Form onComposerSubmit={handleComposerSubmit}>\n      <Composer.Editor\n        components={{\n          Mention,\n          MentionSuggestions,\n          Link,\n        }}\n      />\n      <Composer.Submit>Create thread</Composer.Submit>\n    </Composer.Form>\n    // +++\n  );\n}\n\n// Render a mention in the composer's editor, e.g. \"@Emil Joyce\"\nfunction Mention({ userId }: CommentBodyMentionProps) {\n  return <Comment.Mention>@{userId}</Comment.Mention>;\n}\n\n// Render a list of mention suggestions, used after typing \"@\" in the editor\nfunction MentionSuggestions({\n  userIds,\n  selectedUserId,\n}: ComposerEditorMentionSuggestionsProps) {\n  return (\n    <Composer.Suggestions>\n      <Composer.SuggestionsList>\n        {userIds.map((userId) => (\n          <MentionSuggestion key={userId} userId={userId} />\n        ))}\n      </Composer.SuggestionsList>\n    </Composer.Suggestions>\n  );\n}\n\n// Render a single mention suggestion from a `userId`\nfunction MentionSuggestion({ userId }: { userId: string }) {\n  const { user } = useUser(userId);\n\n  return (\n    <Composer.SuggestionsListItem value={user.id}>\n      <img src={user.avatar} alt={user.name} />\n      {user.name}\n    </Composer.SuggestionsListItem>\n  );\n}\n\n// Render a link in the composer's editor, e.g. \"https://liveblocks.io\"\nfunction Link({ href, children }: CommentBodyLinkProps) {\n  return <Comment.Link href={href}>{children}</Comment.Link>;\n}\n```\n\n----------------------------------------\n\nTITLE: Using LiveblocksProvider in React Applications\nDESCRIPTION: Demonstrates the new LiveblocksProvider component that replaces the need for createClient, simplifying the setup of Liveblocks in React applications.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-emails/CHANGELOG.md#2025-04-11_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\n<LiveblocksProvider /* options */>\n  <App />\n</LiveblocksProvider>\n```\n\n----------------------------------------\n\nTITLE: Using Liveblocks data from Zustand store in React component\nDESCRIPTION: React component demonstrating how to access and use Liveblocks data from the Zustand store. This example shows how to display the number of other users currently in the room.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/zustand.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport useStore from \"./store\";\n\nexport function Room() {\n  const others = useStore((state) => state.liveblocks.others);\n  const userCount = others.length;\n  return <div>There are {userCount} other user(s) online</div>;\n}\n```\n\n----------------------------------------\n\nTITLE: Structuring TipTap Editor with Offline Support\nDESCRIPTION: Demonstrates how to structure a TipTap editor with offline support, separating thread loading into a separate component to avoid loading screens and ensure instant loading.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_49\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { ClientSideSuspense, useThreads } from \"@liveblocks/react/suspense\";\nimport {\n  useLiveblocksExtension,\n  AnchoredThreads,\n  FloatingComposer,\n} from \"@liveblocks/react-tiptap\";\nimport { Editor, EditorContent, useEditor } from \"@tiptap/react\";\n\nexport function TiptapEditor() {\n  const liveblocks = useLiveblocksExtension({\n    offlineSupport_experimental: true,\n  });\n\n  const editor = useEditor({\n    extensions: [\n      liveblocks,\n      // ...\n    ],\n    immediatelyRender: false,\n  });\n\n  return (\n    <>\n      <EditorContent editor={editor} />\n      <FloatingComposer editor={editor} style={{ width: 350 }} />\n      // +++\n      <ClientSideSuspense fallback={null}>\n        <Threads editor={editor} />\n      </ClientSideSuspense>\n      // +++\n    </>\n  );\n}\n\n// +++\nfunction Threads({ editor }: { editor: Editor }) {\n  const { threads } = useThreads();\n\n  return <AnchoredThreads editor={editor} threads={threads} />;\n}\n// +++\n```\n\n----------------------------------------\n\nTITLE: Implementing Undo/Redo Buttons with Liveblocks (TSX)\nDESCRIPTION: This snippet demonstrates how to integrate Liveblocks' undo/redo functionality into a React component using buttons. It retrieves the `undo` and `redo` functions from the Liveblocks room's history and binds them to button click events.  These functions revert or reapply modifications made to the room’s storage.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-online-whiteboard-with-react-zustand-and-liveblocks.mdx#2025-04-11_snippet_13\n\nLANGUAGE: tsx\nCODE:\n```\n\"import { useEffect } from \\\"react\\\";\\nimport useStore from \\\"./store\\\";\\n\\nimport \\\"./App.css\\\";\\n\\nexport default function App() {\\n  const shapes = useStore((state) => state.shapes);\\n  const insertRectangle = useStore((state) => state.insertRectangle);\\n  const others = useStore((state) => state.liveblocks.others);\\n  const selectedShape = useStore((state) => state.selectedShape);\\n  const deleteShape = useStore((state) => state.deleteShape);\\n  const onCanvasPointerMove = useStore((state) => state.onCanvasPointerMove);\\n  const onCanvasPointerUp = useStore((state) => state.onCanvasPointerUp);\\n  const undo = useStore((state) => state.liveblocks.room?.history.undo);\\n  const redo = useStore((state) => state.liveblocks.room?.history.redo);\\n\\n  /* ... */\\n\\n  return (\\n    <>\\n      <div\\n        className=\\\"canvas\\\"\\n        onPointerMove={onCanvasPointerMove}\\n        onPointerUp={onCanvasPointerUp}\\n      >\\n        {/* ... */}\\n      </div>\\n      <div className=\\\"toolbar\\\">\\n        <button onClick={insertRectangle}>Rectangle</button>\\n        <button onClick={deleteShape} disabled={selectedShape === null}>\\n          Delete\\n        </button>\\n        <button onClick={undo}>Undo</button>\\n        <button onClick={redo}>Redo</button>\\n      </div>\\n    </>\\n  );\\n}\\n\\n/* Rectangle */\\n\"\n```\n\n----------------------------------------\n\nTITLE: Implementing Liveblocks Room Component\nDESCRIPTION: React component setup for creating a Liveblocks room with provider configuration and client-side suspense handling.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-tiptap.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { ReactNode } from \"react\";\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n  ClientSideSuspense,\n} from \"@liveblocks/react/suspense\";\n\nexport function Room({ children }: { children: ReactNode }) {\n  return (\n    <LiveblocksProvider publicApiKey={\"{{PUBLIC_KEY}}\"}>\n      <RoomProvider id=\"my-room\">\n        <ClientSideSuspense fallback={<div>Loading…</div>}>\n          {children}\n        </ClientSideSuspense>\n      </RoomProvider>\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Complete Webhook Handler Implementation with Email Notifications\nDESCRIPTION: Full example showing webhook verification, event handling, and email sending using Resend for Liveblocks notifications.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/email-notifications.mdx#2025-04-11_snippet_4\n\nLANGUAGE: ts\nCODE:\n```\nimport {\n  Liveblocks,\n  WebhookHandler,\n  isThreadNotificationEvent,\n} from \"@liveblocks/node\";\nimport { prepareThreadNotificationEmailAsReact } from \"@liveblocks/emails\";\nimport { Resend } from \"resend\";\n\n// Create Resend client (add your API key)\nconst resend = new Resend(\"re_123456789\");\n\n// Add your webhook secret key from a project's webhooks dashboard\nconst WEBHOOK_SECRET = \"YOUR_WEBHOOK_SECRET_KEY\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\n// Add your secret key from a project's API keys dashboard\nconst API_SECRET = \"sk_prod_xxxxxxxxxxxxxxxxxxxxxxxx\";\nconst liveblocks = new Liveblocks({ secret: API_SECRET });\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Verify if this is a real webhook request\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  // When an inbox notification has been created\n  if (isThreadNotificationEvent(event)) {\n    // Check if user has access to room\n    if (!__hasRoomAccess__(event.userId, event.roomId)) {\n      return new Response(null, { status: 200 });\n    }\n\n    // The user to send the email to\n    const emailAddress = __getEmailAddressFromDB__(event.userId);\n\n    let emailData;\n\n    try {\n      emailData = await prepareThreadNotificationEmailAsReact(\n        liveblocks,\n        event,\n        {\n          resolveUsers: async ({ userIds }) => {\n            const usersData = await __getUsersFromDB__(userIds);\n\n            return usersData.map((userData) => ({\n              name: userData.name, // \"Steven\"\n              avatar: userData.avatar.src, // \"https://example.com/steven.jpg\"\n            }));\n          },\n          resolveRoomInfo: async ({ roomId }) => {\n            const roomData = await __getRoomFromDB__(roomId);\n\n            return {\n              name: roomData.name, // \"Untitled document\"\n              url: roomData.url, //`https://example.com/my-room-id`\n            };\n          },\n          components: {\n            Paragraph: ({ children }) => (\n              <p style={{ margin: \"12px 0\" }}>{children}</p>\n            ),\n\n            // `user` is the optional data returned from `resolveUsers`\n            Mention: ({ element, user }) => (\n              <span style={{ color: \"red\" }}>@{user?.name ?? element.id}</span>\n            ),\n\n            // If the link is rich-text render it, otherwise use the URL\n            Link: ({ element, href }) => (\n              <a href={href} style={{ textDecoration: \"underline\" }}>\n                {element?.text ?? href}\n              </a>\n            ),\n          },\n        }\n      );\n    } catch (err) {\n      console.log(err);\n      return new Response(\"Could not fetch thread notification data\", {\n        status: 500,\n      });\n    }\n\n    // All comments have already been read\n    if (!emailData) {\n      return new Response(null, { status: 200 });\n    }\n\n    let email;\n    switch (emailData.type) {\n      case \"unreadMention\": {\n        email = (\n          <div>\n            <div>\n              @{emailData.comment.author.id} at {emailData.comment.createdAt}\n            </div>\n            <div>{emailData.comment.reactBody}</div>\n          </div>\n        );\n        break;\n      }\n\n      case \"unreadReplies\": {\n        email = (\n          <div>\n            {emailData.comments.map((comment) => (\n              <div key={comment.id}>\n                <div>\n                  @{comment.author.id} at {comment.createdAt}\n                </div>\n                <div>{comment.reactBody}</div>\n              </div>\n            ))}\n          </div>\n        );\n        break;\n      }\n    }\n\n    // Send email to the user's email address\n    try {\n      const data = await resend.emails.send({\n        from: \"My company <hello@my-company.com>\",\n        to: emailAddress,\n        subject: \"New comment\",\n        react: email,\n      });\n    } catch (err) {\n      console.error(err);\n    }\n  }\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks React package\nDESCRIPTION: This command installs both the core Liveblocks client and the React-specific bindings.  It's a prerequisite for using the React hooks and providers to connect to the Liveblocks platform.  Run this in your project's root directory.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react/README.md#2025-04-11_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/react\n```\n\n----------------------------------------\n\nTITLE: Setting Up Basic User Presence Detection in React\nDESCRIPTION: Demonstrates how to implement basic user presence detection using the useOthers hook from Liveblocks React.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-presence-with-react.mdx#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { RoomProvider, useOthers } from \"@liveblocks/react/suspense\";\n\nfunction App() {\n  const others = useOthers();\n\n  return <div>There are {others.length} other users with you in the room.</div>;\n}\n\nfunction Index() {\n  return (\n    <RoomProvider id=\"my-room-id\">\n      <App />\n    </RoomProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Storage Mutation Function\nDESCRIPTION: Defines a mutation function using useMutation hook to update a scientist's name in storage. This creates a reusable function that can modify the storage state while automatically handling synchronization.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-storage-with-react.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\n// Define mutation\nconst updateName = useMutation(({ storage }, nameType, newName) => {\n  const mutableScientist = storage.get(\"scientist\");\n  mutableScientist.set(nameType, newName);\n}, []);\n```\n\n----------------------------------------\n\nTITLE: Identifying Users with Liveblocks ID Token\nDESCRIPTION: Creates a JSON Web Token (JWT) to verify user identity when connecting to a Liveblocks room using the identifyUser method.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst { body, status } = await liveblocks.identifyUser({\n  userId: \"olivier@example.com\",\n});\n\n// '{ token: \"eyJga7...\" }'\nconsole.log(body);\n```\n\n----------------------------------------\n\nTITLE: Creating a Basic Next.js Webhook Endpoint for Liveblocks\nDESCRIPTION: This code creates a basic Next.js route handler to receive webhook events from Liveblocks. It extracts the request body and headers which will be used for webhook verification and database updates.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-storage-document-data-to-a-vercel-postgres-database.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Handle webhooks and database\n  // ...\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Displaying Presence using useMyPresence Hook in React\nDESCRIPTION: This snippet demonstrates how to use the useMyPresence hook in a React component (Room.tsx) to access and display the current user's presence. It imports the hook and renders the cursor value as a JSON string.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/presence/guide.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useMyPresence } from \"@liveblocks/react/suspense\";\n\nexport function Room() {\n  const [myPresence, updateMyPresence] = useMyPresence();\n\n  return <div>Cursor: {JSON.stringify(myPresence.cursor)}</div>;\n}\n```\n\n----------------------------------------\n\nTITLE: Complete FloatingComposer Setup with RichTextPlugin\nDESCRIPTION: Comprehensive example of setting up FloatingComposer with RichTextPlugin and necessary configuration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_22\n\nLANGUAGE: tsx\nCODE:\n```\nimport { LexicalComposer } from \"@lexical/react/LexicalComposer\";\nimport { RichTextPlugin } from \"@lexical/react/LexicalRichTextPlugin\";\nimport { ContentEditable } from \"@lexical/react/LexicalContentEditable\";\nimport { LexicalErrorBoundary } from \"@lexical/react/LexicalErrorBoundary\";\nimport {\n  liveblocksConfig,\n  LiveblocksPlugin,\n  FloatingComposer,\n} from \"@liveblocks/react-lexical\";\n\nconst initialConfig = liveblocksConfig({\n  namespace: \"MyEditor\",\n  theme: {},\n  nodes: [],\n  onError: (err) => console.error(err),\n});\n\nfunction Editor() {\n  return (\n    <LexicalComposer initialConfig={initialConfig}>\n      <LiveblocksPlugin>\n        <FloatingComposer style={{ width: \"350px\" }} />\n      </LiveblocksPlugin>\n      <RichTextPlugin\n        contentEditable={<ContentEditable />}\n        placeholder={<div>Enter some text...</div>}\n        ErrorBoundary={LexicalErrorBoundary}\n      />\n    </LexicalComposer>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks middleware with Zustand in JavaScript\nDESCRIPTION: This snippet demonstrates how to set up the liveblocks middleware with Zustand. It shows the basic structure of creating a store with the liveblocks middleware, including the client, presenceMapping, and storageMapping options.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-zustand.mdx#2025-04-11_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport create from \"zustand\";\nimport { liveblocks } from \"@liveblocks/zustand\";\n\nconst useStore = create(\n  liveblocks(\n    (set) => ({\n      /* state and actions */\n    }),\n    {\n      client,\n      presenceMapping: {},\n      storageMapping: {},\n    }\n  )\n);\n```\n\n----------------------------------------\n\nTITLE: Creating LiveblocksYjsProvider instance\nDESCRIPTION: This snippet shows how to create a LiveblocksYjsProvider instance manually. It demonstrates creating a Liveblocks client, entering a room, creating a Y.Doc, and then initializing the LiveblocksYjsProvider with options.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-yjs.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport * as Y from \"yjs\";\nimport { createClient } from \"@liveblocks/client\";\nimport { LiveblocksYjsProvider } from \"@liveblocks/yjs\";\n\nconst client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n\nconst { room, leave } = client.enterRoom(\"your-room-id\");\n\n// Create Yjs document and provider\nconst yDoc = new Y.Doc();\nconst yProvider = new LiveblocksYjsProvider(room, yDoc, {\n  // Options\n  // ...\n});\n```\n\n----------------------------------------\n\nTITLE: Handling YDocUpdated Webhook Event for Database Synchronization\nDESCRIPTION: Complete implementation of a webhook handler that verifies the request and processes the YDocUpdated event. This code extracts the roomId from the event data, which can then be used to fetch the latest Yjs document data and update the database.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-yjs-document-data-to-a-vercel-postgres-database.mdx#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\n\n// Add your signing key from a project's webhooks dashboard\nconst WEBHOOK_SECRET = \"YOUR_SIGNING_SECRET\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Verify if this is a real webhook request\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  // When Yjs document data has been updated\n  if (event.type === \"ydocUpdated\") {\n    const { roomId } = event.data;\n\n    // Update database\n    // ...\n  }\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Subscribing to Storage Status Changes - TypeScript\nDESCRIPTION: This snippet shows how to subscribe to storage status changes using room.subscribe('storage-status', callback). The callback receives the current status, which can be 'not-loaded', 'loading', 'synchronizing', or 'synchronized'. This allows the application to react to changes in the storage status.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_30\n\nLANGUAGE: typescript\nCODE:\n```\nroom.subscribe('storage-status', (status) => { switch (status) { case 'not-loaded': break; case 'loading': break; case 'synchronizing': break; case 'synchronized': break; default: break; } });\n```\n\n----------------------------------------\n\nTITLE: Adding Live Cursors to the Collaborative Text Editor\nDESCRIPTION: Enhances the collaborative editor by adding live cursors, using user information from the Liveblocks authentication endpoint to display cursor colors and usernames.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-lexical-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useSelf } from \"../liveblocks.config\";\n// ...\n\nexport default function Editor() {\n  // Get Liveblocks room, and user info from Liveblocks authentication endpoint\n  const room = useRoom();\n  const userInfo = useSelf((me) => me.info);\n\n  return (\n    <div className={styles.container}>\n      <LexicalComposer initialConfig={initialConfig}>\n        <div className={styles.editorContainer}>\n          <RichTextPlugin\n            contentEditable={<ContentEditable className={styles.editor} />}\n            placeholder={\n              <p className={styles.placeholder}>Start typing here…</p>\n            }\n            ErrorBoundary={LexicalErrorBoundary}\n          />\n          <CollaborationPlugin\n            id=\"yjs-plugin\"\n            cursorColor={userInfo.color}\n            username={userInfo.name}\n            providerFactory={(id, yjsDocMap) => {\n              // Set up Liveblocks Yjs provider\n              const doc = new Y.Doc();\n              yjsDocMap.set(id, doc);\n              const provider = new LiveblocksYjsProvider(room, doc) as Provider;\n              return provider;\n            }}\n            initialEditorState={initialEditorState}\n            shouldBootstrap={true}\n          />\n        </div>\n      </LexicalComposer>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Proper Default Value Implementation with Yjs and Tiptap\nDESCRIPTION: Correct implementation of setting default content in Tiptap when using Yjs, waiting for connection and checking for empty content before setting the default value.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/setting-an-initial-or-default-value-in-tiptap.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Editor({ doc, provider }: EditorProps) {\n  const editor = useEditor({\n    // Options\n    // ...\n  });\n\n  // Set default state\n  useEffect(() => {\n    function setDefault() {\n      if (!editor) {\n        return;\n      }\n\n      if (editor.getText() === \"\") {\n        editor.commands.setContent(`\n          <h1>Default content</h1>\n          <p>\n            My <strong>paragraph</strong>\n          </p>\n        `);\n      }\n    }\n\n    setDefault();\n    provider.on(\"sync\", setDefault);\n    return () => provider.off(\"sync\", setDefault);\n  }, [provider, editor]);\n\n  return <EditorContent editor={editor} />;\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Other Users\nDESCRIPTION: Getting list of other users present in the Liveblocks room using Redux selector.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-redux.mdx#2025-04-11_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nconst others = useSelector((state) => state.liveblocks.others);\n```\n\n----------------------------------------\n\nTITLE: Using useComposer Hook\nDESCRIPTION: Example of using the useComposer hook to create a custom submit button with empty state handling.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/primitives.mdx#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Composer, useComposer } from \"@liveblocks/react-ui/primitives\";\n\nfunction MyComposer() {\n  return (\n    <Composer.Form onComposerSubmit={/* handle submit */}>\n      <Composer.Editor components={/* Your custom component parts */} />\n      <MyComposerButton />\n    </Composer.Form>\n  );\n}\n\n// Button that submits the form, and is disabled when the input is empty\nfunction MyComposerButton() {\n  const { isEmpty, submit } = useComposer();\n\n  return (\n    <button onClick={submit} disabled={isEmpty}>\n      Create thread\n    </button>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Integrating Live Cursors into Monaco Editor Component\nDESCRIPTION: This TypeScript code snippet shows how to integrate the `Cursors` component into the main `CollaborativeEditor` component that uses Monaco Editor. It conditionally renders the `Cursors` component when the `provider` is available. It also includes a placeholder for an editor container.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-monaco-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_11\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Cursors } from \"@/components/Cursors\";\n// ...\n\nexport function CollaborativeEditor() {\n  // ...\n\n  return (\n    <div className={styles.container}>\n      {provider ? <Cursors yProvider={provider} /> : null}\n      <div className={styles.editorContainer}>\n        <Editor\n          onMount={handleOnMount}\n          height=\"100%\"\n          width=\"100hw\"\n          theme=\"vs-light\"\n          defaultLanguage=\"typescript\"\n          defaultValue=\"\"\n          options={{\n            tabSize: 2,\n            padding: { top: 20 },\n          }}\n        />\n      </div>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Liveblocks Storage Data via REST API\nDESCRIPTION: Implements a webhook handler to retrieve current room's Storage document data using Liveblocks REST API. The code verifies webhook requests and fetches storage data using the project's secret key.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-storage-document-data-to-a-vercel-postgres-database.mdx#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\n\n// Add your signing key from a project's webhooks dashboard\nconst WEBHOOK_SECRET = \"YOUR_SIGNING_SECRET\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\n// Add your secret key from a project's API keys dashboard\nconst API_SECRET = \"{{SECRET_KEY}}\";\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Verify if this is a real webhook request\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  // When Storage document data has been updated\n  if (event.type === \"storageUpdated\") {\n    const { roomId } = event.data;\n\n    // Get Storage data from Liveblocks REST API\n    const url = `https://api.liveblocks.io/v2/rooms/${roomId}/storage`;\n    const response = await fetch(url, {\n      headers: { Authorization: `Bearer ${API_SECRET}` },\n    });\n\n    if (!response.ok) {\n      return new Response(\"Problem accessing Liveblocks REST APIs\", {\n        status: 500,\n      });\n    }\n\n    // Your JSON Storage document data as a string\n    const storageData = await response.text();\n\n    // Update database\n    // ...\n  }\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing collaborative Slate text editor with Yjs\nDESCRIPTION: Set up a collaborative text editor using Slate and Yjs integration with Liveblocks in a React component.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-slate-react.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { getYjsProviderForRoom } from \"@liveblocks/yjs\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { createEditor, Editor, Transforms } from \"slate\";\nimport { Editable, Slate, withReact } from \"slate-react\";\nimport { withYjs, YjsEditor } from \"@slate-yjs/core\";\nimport * as Y from \"yjs\";\nimport { useRoom } from \"../liveblocks.config\";\nimport styles from \"./CollaborativeEditor.module.css\";\n\nexport function CollaborativeEditor() {\n  const room = useRoom();\n  const [connected, setConnected] = useState(false);\n\n  // Set up Yjs\n  const yProvider = getYjsProviderForRoom(room);\n  const yDoc = yProvider.getYDoc();\n  const sharedType = yDoc.get(\"slate\", Y.XmlText) as Y.XmlText;\n\n  useEffect(() => {\n    yProvider.on(\"sync\", setConnected);\n\n    return () => {\n      yProvider?.off(\"sync\", setConnected);\n    };\n  }, [room]);\n\n  if (!connected || !sharedType) {\n    return <div>Loading…</div>;\n  }\n\n  return <SlateEditor sharedType={sharedType} />;\n}\n\nconst emptyNode = {\n  children: [{ text: \"\" }],\n};\n\nfunction SlateEditor({ sharedType }: { sharedType: Y.XmlText }) {\n  const editor = useMemo(() => {\n    const e = withReact(withYjs(createEditor(), sharedType));\n\n    // Ensure editor always has at least 1 valid child\n    const { normalizeNode } = e;\n    e.normalizeNode = (entry) => {\n      const [node] = entry;\n\n      if (!Editor.isEditor(node) || node.children.length > 0) {\n        return normalizeNode(entry);\n      }\n\n      Transforms.insertNodes(editor, emptyNode, { at: [0] });\n    };\n\n    return e;\n  }, []);\n\n  useEffect(() => {\n    YjsEditor.connect(editor);\n    return () => YjsEditor.disconnect(editor);\n  }, [editor]);\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.editorContainer}>\n        <Slate editor={editor} initialValue={[emptyNode]}>\n          <Editable className={styles.editor} placeholder=\"Start typing here…\" />\n        </Slate>\n      </div>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Using useInboxNotifications with Pagination\nDESCRIPTION: This code snippet demonstrates how to use the `useInboxNotifications` hook with pagination support introduced in Liveblocks 2.9. It shows how to fetch more notifications incrementally, check if all data has been fetched, and handle loading and error states.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react/CHANGELOG.md#2025-04-11_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nconst {\\n  inboxNotifications,\\n  isLoading,\\n  error,\\n\\n  // ✨ New in Liveblocks 2.9\\n  fetchMore,\\n  isFetchingMore,\\n  hasFetchedAll,\\n  fetchMoreError,\\n} = useInboxNotifications();\n```\n\n----------------------------------------\n\nTITLE: Creating Room with User Permissions via REST API\nDESCRIPTION: Demonstrates how to create a room and set user permissions using the Liveblocks REST API.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/1.2.mdx#2025-04-11_snippet_8\n\nLANGUAGE: ts\nCODE:\n```\nfetch(\"https://api.liveblocks.io/v2/rooms\", {\n  method: \"POST\",\n  body: JSON.stringify({\n    id: \"my-room-name\",\n    defaultAccesses: [],\n    usersAccesses: {\n      \"olivier@example.com\": [\"room:write\"]\n    }\n  }),\n});\n```\n\n----------------------------------------\n\nTITLE: Setting up Yjs with JavaScript using getYjsProviderForRoom\nDESCRIPTION: This snippet shows how to set up Yjs in a JavaScript application using the getYjsProviderForRoom function. It demonstrates creating a Liveblocks client, entering a room, and then creating a Yjs provider and document.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-yjs.mdx#2025-04-11_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\nimport { getYjsProviderForRoom } from \"@liveblocks/yjs\";\n\nconst client = createClient({\n  // Options\n  // ...\n});\n\nconst { room, leave } = client.enterRoom(\"my-room-id\", {\n  // Options\n  // ...\n});\n\nconst yProvider = getYjsProviderForRoom(room);\nconst yDoc = yProvider.getYDoc();\n```\n\n----------------------------------------\n\nTITLE: Connecting to a Liveblocks Room with Initial Presence\nDESCRIPTION: JavaScript code that connects to a specific Liveblocks room with an initial presence state. The code uses client.enterRoom() to join a room named 'javascript-todo-app' and initializes the user's presence with an isTyping flag set to false.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-javascript-and-liveblocks.mdx#2025-04-11_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\n\nconst client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n\nfunction run() {\n  const { room, leave } = client.enterRoom(\"javascript-todo-app\", {\n    initialPresence: { isTyping: false },\n  });\n}\n\nrun();\n```\n\n----------------------------------------\n\nTITLE: Implementing Notification Components with Liveblocks Hooks\nDESCRIPTION: React component utilizing Liveblocks hooks and components to fetch and render notifications for a collaborative application. Uses useInboxNotifications hook with InboxNotification and InboxNotificationList components.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-notifications.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { useInboxNotifications } from \"@liveblocks/react/suspense\";\nimport {\n  InboxNotification,\n  InboxNotificationList,\n} from \"@liveblocks/react-ui\";\n\nexport function CollaborativeApp() {\n  const { inboxNotifications } = useInboxNotifications();\n\n  return (\n    <InboxNotificationList>\n      {inboxNotifications.map((inboxNotification) => (\n        <InboxNotification\n          key={inboxNotification.id}\n          inboxNotification={inboxNotification}\n        />\n      ))}\n    </InboxNotificationList>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Joining a Liveblocks Room with Loading State\nDESCRIPTION: Enhanced React component that adds ClientSideSuspense to handle loading states when joining a Liveblocks room, providing better user experience during initialization.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-comments.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n  ClientSideSuspense,\n} from \"@liveblocks/react/suspense\";\nimport { Room } from \"./Room\";\n\nexport default function App() {\n  return (\n    <LiveblocksProvider publicApiKey={\"{{PUBLIC_KEY}}\"}>      <RoomProvider id=\"my-room\">\n        <ClientSideSuspense fallback={<div>Loading…</div>}>\n          <Room />\n        </ClientSideSuspense>\n      </RoomProvider>\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering AnchoredThreads with Suspense\nDESCRIPTION: Illustrates how to render AnchoredThreads alongside an editor using the useThreads hook. Components are conditionally displayed, hiding resolved threads automatically.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_33\n\nLANGUAGE: typescript\nCODE:\n```\n// +++\nimport { useThreads } from \"@liveblocks/react/suspense\";\n// +++\nimport {\n  useLiveblocksExtension,\n  FloatingComposer,\n  // +++\n  AnchoredThreads,\n  // +++\n} from \"@liveblocks/react-tiptap\";\nimport { useEditor, EditorContent } from \"@tiptap/react\";\n\nfunction TextEditor() {\n  const liveblocks = useLiveblocksExtension();\n\n  const editor = useEditor({\n    extensions: [\n      liveblocks,\n      // ...\n    ],\n  });\n\n  // +++\n  const { threads } = useThreads();\n  // +++\n\n  return (\n    <div>\n      <EditorContent editor={editor} />\n      <FloatingComposer editor={editor} style={{ width: \"350px\" }} />\n      // +++\n      <AnchoredThreads\n        editor={editor}\n        threads={threads}\n        style={{ width: \"350px\" }}\n      />\n      // +++\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Room Permissions with Liveblocks Node SDK\nDESCRIPTION: This TypeScript code demonstrates how to create a room with specific permission accesses for different users and groups using the Liveblocks Node SDK.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/remix.mdx#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nconst room = await liveblocks.createRoom(\"my-room-id\", {\n  defaultAccesses: [\"room:read\", \"room:presence:write\"],\n  groupsAccesses: {\n    \"my-group-id\": [\"room:write\"],\n  },\n  usersAccesses: {\n    \"my-user-id\": [\"room:write\"],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Complete Next.js Endpoint for Liveblocks Authentication\nDESCRIPTION: Provides a full working example of ID token authentication in a Next.js API route, including user identification and token generation.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/1.2.mdx#2025-04-11_snippet_9\n\nLANGUAGE: ts\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\n\n// Create a client\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nexport async function POST(request: Request) {\n  const user = __getUserFromDB__(request);\n\n  // Identify the user and return the result\n  const { status, body } = await liveblocks.identifyUser({\n    userId: user.id,\n    groupIds, // Optional\n  });\n\n  return new Response(body, { status });\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing LiveblocksProvider in App Component\nDESCRIPTION: Shows the implementation of LiveblocksProvider in the main App component. It wraps the CollaborativeApplication component, ensuring all Liveblocks functionality is available throughout the application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/connecting/guide.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nreturn (\n  <LiveblocksProvider publicApiKey={publicApiKey}>\n    <CollaborativeApplication />\n  </LiveblocksProvider>\n);\n```\n\n----------------------------------------\n\nTITLE: Implementing Collaborative Slate Editor\nDESCRIPTION: Core implementation of the collaborative text editor using Slate with Yjs integration for real-time collaboration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-slate-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { LiveblocksYjsProvider } from \"@liveblocks/yjs\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { createEditor, Editor, Transforms } from \"slate\";\nimport { Editable, Slate, withReact } from \"slate-react\";\nimport { withYjs, YjsEditor } from \"@slate-yjs/core\";\nimport * as Y from \"yjs\";\nimport { LiveblocksProviderType, useRoom } from \"../liveblocks.config\";\nimport styles from \"./Editor.module.css\";\n\nexport default function CollaborativeEditor() {\n  const room = useRoom();\n  const [connected, setConnected] = useState(false);\n  const [sharedType, setSharedType] = useState<Y.XmlText>();\n  const [provider, setProvider] = useState<LiveblocksProviderType>();\n\n  useEffect(() => {\n    const yDoc = new Y.Doc();\n    const yProvider = new LiveblocksYjsProvider(room, yDoc);\n    const sharedDoc = yDoc.get(\"slate\", Y.XmlText) as Y.XmlText;\n    yProvider.on(\"sync\", setConnected);\n\n    setSharedType(sharedDoc);\n    setProvider(yProvider);\n\n    return () => {\n      yDoc?.destroy();\n      yProvider?.off(\"sync\", setConnected);\n      yProvider?.destroy();\n    };\n  }, [room]);\n\n  if (!connected || !sharedType || !provider) {\n    return <div>Loading…</div>;\n  }\n\n  return <SlateEditor sharedType={sharedType} />;\n}\n\nconst emptyNode = {\n  children: [{ text: \"\" }],\n};\n\nfunction SlateEditor({ sharedType }: { sharedType: Y.XmlText }) {\n  const editor = useMemo(() => {\n    const e = withReact(withYjs(createEditor(), sharedType));\n\n    const { normalizeNode } = e;\n    e.normalizeNode = (entry) => {\n      const [node] = entry;\n\n      if (!Editor.isEditor(node) || node.children.length > 0) {\n        return normalizeNode(entry);\n      }\n\n      Transforms.insertNodes(editor, emptyNode, { at: [0] });\n    };\n\n    return e;\n  }, [sharedType]);\n\n  useEffect(() => {\n    YjsEditor.connect(editor);\n    return () => YjsEditor.disconnect(editor);\n  }, [editor]);\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.editorContainer}>\n        <Slate editor={editor} initialValue={[emptyNode]}>\n          <Editable\n            className={styles.editor}\n            placeholder=\"Start typing here…\"\n          />\n        </Slate>\n      </div>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Delete Functionality to To-Dos\nDESCRIPTION: This snippet adds a delete button to each to-do item and implements the functionality to remove a todo from the list using LiveList.delete().\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-javascript-and-liveblocks.mdx#2025-04-11_snippet_14\n\nLANGUAGE: jsx\nCODE:\n```\nimport { createClient, LiveList } from \"@liveblocks/client\";\n\nconst client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n\nasync function run() {\n  const { room, leave } = client.enterRoom(\"javascript-todo-app\", {\n    initialPresence: { isTyping: false },\n    initialStorage: { todos: new LiveList() },\n  });\n\n  const whoIsHere = document.getElementById(\"who_is_here\");\n  const todoInput = document.getElementById(\"todo_input\");\n  const someoneIsTyping = document.getElementById(\"someone_is_typing\");\n  const todosContainer = document.getElementById(\"todos_container\");\n\n  const { root } = await room.getStorage();\n\n  let todos = root.get(\"todos\");\n\n  room.subscribe(\"others\", (others) => {\n    /* ... */\n  });\n\n  todoInput.addEventListener(\"keydown\", (e) => {\n    /* ... */\n  });\n\n  todoInput.addEventListener(\"blur\", () => {\n    /* ... */\n  });\n\n  function renderTodos() {\n    todosContainer.innerHTML = \"\";\n\n    for (let i = 0; i < todos.length; i++) {\n      const todo = todos.get(i);\n\n      const todoContainer = document.createElement(\"div\");\n      todoContainer.classList.add(\"todo_container\");\n\n      const todoText = document.createElement(\"div\");\n      todoText.classList.add(\"todo\");\n      todoText.innerHTML = todo.text;\n      todoContainer.appendChild(todoText);\n\n      const deleteButton = document.createElement(\"button\");\n      deleteButton.classList.add(\"delete_button\");\n      deleteButton.innerHTML = \"✕\";\n      deleteButton.addEventListener(\"click\", () => {\n        todos.delete(i);\n      });\n      todoContainer.appendChild(deleteButton);\n\n      todosContainer.appendChild(todoContainer);\n    }\n  }\n\n  room.subscribe(todos, () => {\n    renderTodos();\n  });\n\n  renderTodos();\n}\n\nrun();\n```\n\n----------------------------------------\n\nTITLE: CSS Styling for To-Do List Application\nDESCRIPTION: CSS styles for the to-do list application that define the layout and appearance of all UI elements. The styles include formatting for the container, input fields, to-do items, delete buttons, and user presence indicators.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-javascript-and-liveblocks.mdx#2025-04-11_snippet_6\n\nLANGUAGE: css\nCODE:\n```\nbody {\n  background-color: rgb(243, 243, 243);\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", \"Roboto\", \"Oxygen\",\n    \"Ubuntu\", \"Cantarell\", \"Fira Sans\", \"Droid Sans\", \"Helvetica Neue\",\n    sans-serif;\n  -webkit-font-smoothing: antialiased;\n}\n\n.container {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  margin-left: auto;\n  margin-right: auto;\n  margin-top: 3rem;\n  max-width: 28rem;\n}\n\ninput {\n  box-sizing: border-box;\n  padding: 0.5rem 0.875rem;\n  margin: 0.5rem 0;\n  width: 100%;\n  background-color: white;\n  box-shadow:\n    0 0 #000,\n    0 0 #000,\n    0 0 #000,\n    0 0 #000,\n    0 1px 2px 0 rgba(0, 0, 0, 0.05);\n  border-radius: 0.5rem;\n  color: black;\n  border: 0 solid;\n  font-size: 16px;\n}\n\ninput:hover {\n  box-shadow:\n    0 0 #000,\n    0 0 #000,\n    0 0 #000,\n    0 0 #000,\n    0 1px 3px 0 rgba(0, 0, 0, 0.1),\n    0 1px 2px 0 rgba(0, 0, 0, 0.06);\n}\n\ninput:focus {\n  outline: none;\n}\n\n.todo_container {\n  display: flex;\n  padding: 0.5rem 0.875rem;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.todo {\n  flex-grow: 1;\n}\n\n.delete_button {\n  padding: 0;\n  margin: 0;\n  font-size: 16px;\n  border: 0 solid;\n  appearance: button;\n  background-color: transparent;\n}\n\n.delete_button:focus {\n  outline: none;\n}\n\n.who_is_here {\n  align-self: flex-end;\n  font-size: 11px;\n  color: #aaa;\n}\n\n.someone_is_typing {\n  position: absolute;\n  font-size: 11px;\n  color: #aaa;\n}\n```\n\n----------------------------------------\n\nTITLE: Setting up collaborative CodeMirror editor with Liveblocks and Yjs\nDESCRIPTION: This JavaScript code sets up a collaborative CodeMirror editor using Liveblocks, Yjs, and CodeMirror. It initializes the Liveblocks client, creates a Yjs document, and configures CodeMirror with the necessary extensions for real-time collaboration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-codemirror-javascript.mdx#2025-04-11_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\nimport { getYjsProviderForRoom } from \"@liveblocks/yjs\";\nimport * as Y from \"yjs\";\nimport { yCollab } from \"y-codemirror.next\";\nimport { EditorView, basicSetup } from \"codemirror\";\nimport { EditorState } from \"@codemirror/state\";\nimport { javascript } from \"@codemirror/lang-javascript\";\n\n// Set up Liveblocks client\nconst client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n\n// Enter a multiplayer room\nconst { room, leave } = client.enterRoom(\"my-room\");\n\n// Set up Yjs document, shared text, and Liveblocks Yjs provider\nconst yProvider = getYjsProviderForRoom(room);\nconst yDoc = yProvider.getYDoc()\nconst yText = yDoc.getText(\"codemirror\");\n\n// Set up CodeMirror and extensions\nconst state = EditorState.create({\n  doc: yText.toString(),\n  extensions: [\n    basicSetup,\n    javascript(),\n    yCollab(ytext, yProvider.awareness, { undoManager }),\n  ],\n});\n\n// Attach CodeMirror to element\nconst parent = document.querySelector(\"#editor\");\nview = new EditorView({\n  state,\n  parent,\n});\n```\n\n----------------------------------------\n\nTITLE: Accessing Other Users' Cursor Positions\nDESCRIPTION: This snippet demonstrates how to access and map through other users' cursor positions from the Redux state. It extracts the cursor data from each user's presence object, noting that presence can be undefined.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-presence-with-redux.mdx#2025-04-11_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\nimport { useSelector } from \"react-redux\";\n\nfunction OthersCursors() {\n  const others = useSelector((state) => state.liveblocks.others);\n\n  const othersCursors = others.map((user) => user.presence?.cursor);\n\n  // Render cursors with custom SVGs based on x and y\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Extension with Tiptap Editor\nDESCRIPTION: Shows how to set up a basic collaborative Tiptap editor by adding the Liveblocks extension to the editor configuration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useLiveblocksExtension } from \"@liveblocks/react-tiptap\";\nimport { useEditor, EditorContent } from \"@tiptap/react\";\n\nfunction TextEditor() {\n  const liveblocks = useLiveblocksExtension();\n\n  const editor = useEditor({\n    extensions: [\n      liveblocks,\n      // ...\n    ],\n  });\n\n  return (\n    <div>\n      <EditorContent editor={editor} />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Setting up Authentication Endpoint in Next.js App Directory\nDESCRIPTION: Create an authentication endpoint in Next.js' /app directory. This code sets up user identification and access control for Liveblocks rooms.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/nextjs.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nexport async function POST(request: Request) {\n  // Get the current user from your database\n  const user = __getUserFromDB__(request);\n\n  // Identify the user and return the result\n  const { status, body } = await liveblocks.identifyUser(\n    {\n      userId: user.id,\n      groupIds, // Optional\n    },\n    { userInfo: user.metadata },\n  );\n\n  return new Response(body, { status });\n}\n```\n\n----------------------------------------\n\nTITLE: Subscribing to Room Updates\nDESCRIPTION: Example showing how to subscribe to the 'others' event to track other users in the room and update the UI accordingly.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/javascript.mdx#2025-04-11_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nimport { room } from \"./room.js\"\n\nconst div = document.querySelector(\"div\");\n\nroom.subscribe(\"others\", (others) => {\n  div.innerText = `There are ${others.length} other user(s) online`;\n});\n```\n\n----------------------------------------\n\nTITLE: Defining UserMeta Type for Liveblocks Configuration\nDESCRIPTION: This code modifies the UserMeta interface in liveblocks.config.ts to include type definitions for user metadata. This provides type hints in the editor for user ID and information like name and avatar.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-add-users-to-liveblocks-notifications.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare global {\n  interface Liveblocks {\n    UserMeta: {\n      id: string;\n\n      info: {\n        name: string;\n        avatar: string;\n\n        // Your custom metadata\n        // ...\n      };\n    };\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: API Authentication with JWT Token\nDESCRIPTION: Example of how to authenticate with the Liveblocks API using a JWT token in the authorization header.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/rest-api-endpoints-v1.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ncurl https://liveblocks.net/api/v1/* \\\n  -H \"Authorization: Bearer YOUR_JWT_TOKEN\"\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Configuration\nDESCRIPTION: Command to initialize the liveblocks.config.ts file using the create-liveblocks-app utility.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/javascript.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework javascript\n```\n\n----------------------------------------\n\nTITLE: Using useBroadcastEvent Hook in React Component\nDESCRIPTION: This snippet demonstrates how to use the useBroadcastEvent hook in a React component. It imports the hook from the config file and sets it up for use in the component.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/broadcasting-events/guide.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n// Broadcast event hook\nconst broadcast = useBroadcastEvent();\n```\n\n----------------------------------------\n\nTITLE: Zustand Store with Liveblocks Storage - TypeScript\nDESCRIPTION: This code extends the Zustand store to include an array of to-do items and functions to add and delete them. It utilizes the `storageMapping` option to sync the `todos` state with Liveblocks Storage, ensuring persistent data. The middleware is configured to sync both `isTyping` using Presence and `todos` using Storage.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-react-zustand-and-liveblocks.mdx#2025-04-11_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\n/* ... */\n\ntype State = {\n  draft: string;\n  isTyping: boolean;\n  todos: { text: string }[];\n  setDraft: (draft: string) => void;\n  addTodo: () => void;\n  deleteTodo: (index: number) => void;\n};\n\n/* ... */\n\nconst useStore = create<WithLiveblocks<State>>()(\n  liveblocks(\n    (set) => ({\n      draft: \"\",\n      isTyping: false;\n      todos: [],\n      setDraft: (draft) => set({ draft, isTyping: draft !== \"\" }),\n      addTodo: () =>\n        set((state) => ({\n          todos: state.todos.concat({ text: state.draft }),\n          draft: \"\",\n        })),\n      deleteTodo: (index) =>\n        set((state) => ({\n          todos: state.todos.filter((_, i) => index !== i),\n        })),\n    }),\n    {\n      client,\n      presenceMapping: { isTyping: true },\n      storageMapping: { todos: true },\n    }\n  )\n);\n\nexport default useStore;\n```\n\n----------------------------------------\n\nTITLE: Integrating the collaborative editor into a Next.js page\nDESCRIPTION: Implementation of a Next.js page that wraps the CollaborativeEditor component with the Room component to enable real-time collaboration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-codemirror-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Room } from \"./Room\";\nimport CollaborativeEditor from \"@/components/Editor\";\n\nexport default function Page() {\n  return (\n    <Room>\n      <CollaborativeEditor />\n    </Room>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Liveblocks Storage for Shape Persistence\nDESCRIPTION: Enhanced Zustand store configuration with shape type definition and storage mapping to persist shape data with Liveblocks, enabling data synchronization across clients.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-online-whiteboard-with-react-zustand-and-liveblocks.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport create from \"zustand\";\nimport { createClient } from \"@liveblocks/client\";\nimport { liveblocks } from \"@liveblocks/zustand\";\nimport type { WithLiveblocks } from \"@liveblocks/zustand\";\n\nexport type Shape = {\n  x: number;\n  y: number;\n  fill: string;\n};\n\ntype State = {\n  shapes: Record<string, Shape>;\n};\n\nconst client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n\nconst useStore = create<WithLiveblocks<State>>()(\n  liveblocks(\n    (set) => ({\n      shapes: {},\n    }),\n    {\n      client,\n      storageMapping: { shapes: true },\n    }\n  )\n);\n\nexport default useStore;\n```\n\n----------------------------------------\n\nTITLE: Retrieving Y.Doc from Liveblocks Server\nDESCRIPTION: Shows how to fetch Yjs document data from Liveblocks and create a Y.Doc instance. Uses getYjsDocumentAsBinaryUpdate to retrieve the document state and applies it to a new Y.Doc.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-your-ydoc-on-the-server.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport * as Y from \"yjs\";\nimport { Liveblocks } from \"@liveblocks/node\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nexport async function POST() {\n  // Get your Yjs data as a binary update\n  const update = await liveblocks.getYjsDocumentAsBinaryUpdate(\"my-room-name\");\n\n  // Create a Yjs document\n  const yDoc = new Y.Doc();\n\n  // Apply the binary update to `yDoc`\n  Y.applyUpdate(yDoc, new Uint8Array(update));\n\n  // `yDoc` can now be used as you like\n  // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Node API Methods\nDESCRIPTION: Server-side methods for triggering notifications and filtering rooms/threads with query language support.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_21\n\nLANGUAGE: typescript\nCODE:\n```\ntriggerInboxNotification\ngetRooms({ query: { roomId, metadata } })\ngetThreads()\n```\n\n----------------------------------------\n\nTITLE: Version Preview with Liveblocks in Lexical Editor TypeScript\nDESCRIPTION: Implements `HistoryVersionPreview` to preview and restore specific versions of the Lexical editor content within the `LiveblocksPlugin` context. It supports callbacks for version restoration and displays content in read-only mode.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_35\n\nLANGUAGE: tsx\nCODE:\n```\nimport { HistoryVersionPreview } from \"@liveblocks/react-lexical\";\\n\\nfunction VersionPreview({ selectedVersion, onVersionRestore }) {\\n  return (\\n    <HistoryVersionPreview\\n      version={selectedVersion}\\n      onVersionRestore={onVersionRestore}\\n    />\\n  );\\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Live Cursors using Tiptap Editor in TypeScript\nDESCRIPTION: This snippet sets up a Tiptap editor with live cursors using Liveblocks' useSelf hook to retrieve the current user's information for cursor display. It requires 'useSelf' from 'liveblocks-react' and involves configuring the CollaborationCursor extension with the provider and user information.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-tiptap-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useSelf } from \"../liveblocks.config.ts\";\n// ...\n\nfunction TiptapEditor({ doc, provider }: EditorProps) {\n  // Get user info from Liveblocks authentication endpoint\n  const userInfo = useSelf((me) => me.info);\n\n  // Set up editor with plugins, and place user info into Yjs awareness and cursors\n  const editor = useEditor({\n    // ...\n    extensions: [\n      // ...\n\n      // Attach provider and user info\n      CollaborationCursor.configure({\n        provider: provider,\n        user: userInfo,\n      }),\n    ],\n  });\n\n  return (\n    <div className={styles.container}>\n      <EditorContent editor={editor} className={styles.editorContainer} />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Main App Component with Liveblocks Room Connection\nDESCRIPTION: Creates the main App component that handles room connection and renders the whiteboard canvas with shapes.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-online-whiteboard-with-react-redux-and-liveblocks.mdx#2025-04-11_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nimport { useEffect } from \"react\";\nimport \"./App.css\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { actions } from \"@liveblocks/redux\";\n\nconst roomId = \"redux-whiteboard\";\n\nexport default function App() {\n  const shapes = useSelector((state) => state.shapes);\n  const isLoading = useSelector((state) => state.liveblocks.isStorageLoading);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(actions.enterRoom(roomId));\n\n    return () => {\n      dispatch(actions.leaveRoom());\n    };\n  }, [dispatch]);\n\n  if (isLoading) {\n    return <div className=\"loading\">Loading</div>;\n  }\n\n  return (\n    <div className=\"canvas\">\n      {Object.entries(shapes).map(([shapeId, shape]) => {\n        return <Rectangle key={shapeId} shape={shape} />;\n      })}\n    </div>\n  );\n}\n\nconst Rectangle = ({ shape }) => {\n  return (\n    <div\n      className=\"rectangle\"\n      style={{\n        transform: `translate(${shape.x}px, ${shape.y}px)`,\n        backgroundColor: shape.fill ? shape.fill : \"#CCC\",\n      }}\n    ></div>\n  );\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Toolbar.BlockSelector in React with Liveblocks\nDESCRIPTION: Explains how to use and customize the Toolbar.BlockSelector component from @liveblocks/react-lexical. It allows selecting different block types and can be customized with custom items and styles.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_12\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Toolbar } from \"@liveblocks/react-lexical\";\n\n<Toolbar>\n  <Toolbar.BlockSelector />\n</Toolbar>;\n```\n\nLANGUAGE: tsx\nCODE:\n```\nimport { isBlockNodeActive, Toolbar } from \"@liveblocks/react-lexical\";\nimport { $setBlocksType } from \"@lexical/selection\";\nimport { $isCodeNode } from \"@lexical/code\";\nimport { $getSelection } from \"lexical\";\n\n<Toolbar>\n  <Toolbar.BlockSelector\n    items={(defaultItems) => [\n      ...defaultItems,\n      {\n        name: \"Code block\",\n        icon: <div>❮ ❯</div>, // Optional\n        isActive: (editor) => isBlockNodeActive(editor, $isCodeNode),\n        setActive: (editor) =>\n          $setBlocksType($getSelection(), () => $createCodeNode()),\n      },\n    ]}\n  />\n</Toolbar>;\n```\n\nLANGUAGE: tsx\nCODE:\n```\nimport { isBlockNodeActive, Toolbar } from \"@liveblocks/react-lexical\";\nimport { $setBlocksType } from \"@lexical/selection\";\nimport { $isCodeNode } from \"@lexical/code\";\nimport { $getSelection } from \"lexical\";\n\n<Toolbar>\n  <Toolbar.BlockSelector\n    items={(defaultItems) => [\n      ...defaultItems,\n      {\n        name: \"Code block\",\n        // +++\n        label: <div className=\"font-mono\">Code</div>, // Optional, overwrites `icon` + `name`\n        // +++\n        isActive: (editor) => isBlockNodeActive(editor, $isCodeNode),\n        setActive: (editor) =>\n          $setBlocksType($getSelection(), () => $createCodeNode()),\n      },\n    ]}\n  />\n</Toolbar>;\n```\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Toolbar } from \"@liveblocks/react-lexical\";\n\n<Toolbar.BlockSelector\n  items={(defaultItems) =>\n    defaultItems.map((item) => {\n      let label;\n\n      if (item.name === \"Text\") {\n        label = <span>Regular text</span>;\n      }\n\n      if (item.name === \"Heading 1\") {\n        label = (\n          <span style={{ fontSize: 18, fontWeight: \"bold\" }}>Heading 1</span>\n        );\n      }\n\n      if (item.name === \"Heading 2\") {\n        label = (\n          <span style={{ fontSize: 16, fontWeight: \"bold\" }}>Heading 2</span>\n        );\n      }\n\n      if (item.name === \"Heading 3\") {\n        label = (\n          <span style={{ fontSize: 15, fontWeight: \"bold\" }}>Heading 3</span>\n        );\n      }\n\n      if (item.name === \"Blockquote\") {\n        label = (\n          <span style={{ borderLeft: \"3px solid gray\", paddingLeft: 8 }}>\n            Blockquote\n          </span>\n        );\n      }\n\n      return {\n        ...item,\n        label,\n        icon: null, // Hide all icons\n      };\n    })\n  }\n/>;\n```\n\n----------------------------------------\n\nTITLE: Checking User Room Access\nDESCRIPTION: Shows how to verify a user's assigned permission types for a specific room.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token.mdx#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nconst room = await liveblocks.getRoom(\"a32wQXid4A9\");\n\n// { \"ellen@acme.inc\": [\"room:write\"] }\nconsole.log(room.data.usersAccesses);\n```\n\n----------------------------------------\n\nTITLE: Handling YDoc Updates with Liveblocks Webhook\nDESCRIPTION: This code snippet demonstrates how to handle the `ydocUpdated` event from Liveblocks webhooks. It verifies the webhook request, retrieves the Yjs document data from the Liveblocks REST API, and prepares for database update.  It requires the `@liveblocks/node` package and environment variable `SECRET_KEY`.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-yjs-document-data-to-a-supabase-postgres-database.mdx#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\n\n// Add your signing key from a project's webhooks dashboard\nconst WEBHOOK_SECRET = \"YOUR_SIGNING_SECRET\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\n// Add your secret key from a project's API keys dashboard\nconst API_SECRET = \"{{SECRET_KEY}}\";\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Verify if this is a real webhook request\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  // When Yjs document data has been updated\n  if (event.type === \"ydocUpdated\") {\n    const { roomId } = event.data;\n\n    // Get Yjs data from Liveblocks REST API\n    const url = `https://api.liveblocks.io/v2/rooms/${roomId}/ydoc`;\n    const response = await fetch(url, {\n      headers: { Authorization: `Bearer ${API_SECRET}` },\n    });\n\n    if (!response.ok) {\n      return new Response(\"Problem accessing Liveblocks REST APIs\", {\n        status: 500,\n      });\n    }\n\n    // Your JSON Yjs document data as a string\n    const yDocData = await response.text();\n\n    // Update database\n    // ...\n  }\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Client\nDESCRIPTION: JavaScript code that creates a Liveblocks client instance with a public API key. This is the basic setup required to connect to Liveblocks services and enable real-time collaboration features.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-javascript-and-liveblocks.mdx#2025-04-11_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\n\nconst client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n```\n\n----------------------------------------\n\nTITLE: Displaying Threads with Liveblocks in TypeScript\nDESCRIPTION: Renders a list of threads next to a text editor using the `AnchoredThreads` and `LiveblocksPlugin` in a Lexical editor context. The code highlights how the anchoring works with multiple thread highlights and suggests using the `LiveblocksPlugin` for rendering threads.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_28\n\nLANGUAGE: tsx\nCODE:\n```\n<LexicalComposer initialConfig={initialConfig}>\\n  <LiveblocksPlugin>\\n    <AnchoredThreads threads={threads} />\\n  </LiveblocksPlugin>\\n</LexicalComposer>\n```\n\n----------------------------------------\n\nTITLE: Fetching Inbox Notifications with useInboxNotifications Hook in React\nDESCRIPTION: Demonstrates how to use the useInboxNotifications hook to retrieve and render inbox notifications for the current user. This example uses the default InboxNotification component to display each notification.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/notifications/hooks.mdx#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useInboxNotifications } from \"../liveblocks.config\";\n\nfunction Component() {\n  const { inboxNotifications } = useInboxNotifications();\n\n  // [{ kind: \"$myCustomNotification\", id: \"in_sf8s6sh...\", ... }, ...]\n  console.log(inboxNotifications);\n\n  return (\n    <>\n      {inboxNotifications.map((inboxNotification) => (\n        <InboxNotification\n          key={inboxNotification.id}\n          inboxNotification={inboxNotification}\n        />\n      ))}\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Using useMutation Hook for Storage Modification in React\nDESCRIPTION: This snippet shows how to use the useMutation hook to create a function that modifies the Liveblocks storage. It updates the name property of the person object.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/modifying-storage-data/guide.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst updateName = useMutation(({ storage }) => {\n  const person = storage.get(\"person\");\n  person.set(\"name\", \"Albert\");\n}, []);\n```\n\n----------------------------------------\n\nTITLE: Using Yjs APIs to access Tiptap state in TypeScript\nDESCRIPTION: This code demonstrates an alternative approach using Yjs to retrieve Tiptap document state on the server. It fetches the Yjs document as a binary update, creates a Y.Doc, applies the update, and then converts the Yjs document to ProseMirror JSON format using y-prosemirror.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/getting-tiptap-state-on-the-server.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport * as Y from \"yjs\";\nimport { Liveblocks } from \"@liveblocks/node\";\nimport { yDocToProsemirrorJSON } from \"y-prosemirror\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nexport async function POST() {\n  // Get your Yjs data as a binary update\n  const update = await liveblocks.getYjsDocumentAsBinaryUpdate(\"my-room-name\");\n\n  // Create a Yjs document\n  const yDoc = new Y.Doc();\n\n  // Apply the binary update to `yDoc`\n  Y.applyUpdate(yDoc, new Uint8Array(update));\n\n  // Get Tiptap state from the Yjs property it uses, \"default\"\n  const tiptapState = yDocToProsemirrorJSON(yDoc, \"default\");\n\n  // { type: \"doc\", content: [{ type: \"paragraph\", content: [...] }] }\n  console.log(tiptapState);\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing User Presence with SolidJS\nDESCRIPTION: Complete example of implementing real-time user presence tracking in a SolidJS component using Liveblocks room subscription.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/solidjs.mdx#2025-04-11_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createSignal, onCleanup, onMount } from \"solid-js\";\nimport { room } from \"./room.js\";\n\nexport function Room() {\n  const [other, setOthers] = createSignal(room.getOthers());\n\n  onMount(() => {\n    const unsubscribeOthers = room.subscribe(\"others\", (updatedOthers) => {\n      setOthers(updatedOthers);\n    });\n\n    onCleanup(() => {\n      unsubscribeOthers();\n    });\n  })\n\n  return (\n    <div>There are {others.length} other user(s) online</div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Integrating the Collaborative Editor into a Next.js Page\nDESCRIPTION: A Next.js page component that integrates the collaborative editor within a Liveblocks Room. This page serves as the entry point for users to access the collaborative text editing experience.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-tiptap-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Room } from \"./Room\";\nimport CollaborativeEditor from \"@/components/Editor\";\n\nexport default function Page() {\n  return (\n    <Room>\n      <CollaborativeEditor />\n    </Room>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Example Request Body for Initialize Room Storage\nDESCRIPTION: Sample request body for initializing room storage, demonstrating how to structure LiveObject, LiveList, and LiveMap data types.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/rest-api-endpoints-v1.mdx#2025-04-11_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"liveblocksType\": \"LiveObject\",\n  \"data\": {\n    \"aLiveObject\": {\n      \"liveblocksType\": \"LiveObject\",\n      \"data\": {\n        \"a\": 1\n      }\n    },\n    \"aLiveList\": {\n      \"liveblocksType\": \"LiveList\",\n      \"data\": [\"a\", \"b\"]\n    },\n    \"aLiveMap\": {\n      \"liveblocksType\": \"LiveMap\",\n      \"data\": {\n        \"a\": 1,\n        \"b\": 2\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing resolveUsers in LiveblocksProvider\nDESCRIPTION: Shows how to implement the resolveUsers function in LiveblocksProvider to fetch and display user information (names and avatars) in Comments. This function receives user IDs that have interacted with Comments and returns user data.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-add-users-to-liveblocks-comments.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n<LiveblocksProvider\n  resolveUsers={async ({ userIds }) => {\n    // [\"marc@example.com\", ...]\n    console.log(userIds);\n\n    // Return a list of users\n    return [\n      {\n        name: \"Marc\",\n        avatar: \"https://example.com/marc.png\",\n\n        // Your custom metadata\n        // ...\n      },\n      // ...\n    ];\n  }}\n\n  // ...\n/>;\n```\n\n----------------------------------------\n\nTITLE: Configuring Liveblocks Client with Firebase Authentication\nDESCRIPTION: Setting up the Liveblocks client on the front end to use the Firebase callable function for authentication instead of a public API key.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/firebase.mdx#2025-04-11_snippet_2\n\nLANGUAGE: js\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\nimport firebase from \"firebase\";\nimport \"firebase/functions\";\n\nfirebase.initializeApp({\n  /* Firebase config */\n});\n\nconst auth = firebase.functions().httpsCallable(\"liveblocks-auth\");\n\n// Create a Liveblocks client\nconst client = createClient({\n  authEndpoint: async (room) => (await auth({ room })).data,\n});\n```\n\n----------------------------------------\n\nTITLE: Creating Lexical Editor Config with liveblocksConfig\nDESCRIPTION: Example showing how to use the liveblocksConfig function to create a configuration object for the Lexical editor. This function adds the necessary nodes and theme to make Liveblocks collaboration work correctly.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { liveblocksConfig } from \"@liveblocks/react-lexical\";\n\nconst initialConfig = liveblocksConfig({\n  namespace: \"MyEditor\",\n  theme: {},\n  nodes: [],\n  onError: (err) => console.error(err),\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Redux Store with Liveblocks Enhancer\nDESCRIPTION: Sets up the Redux store with Liveblocks integration by creating a client with the public API key and applying the Liveblocks enhancer to the store configuration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-react-redux-and-liveblocks.mdx#2025-04-11_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\nimport { liveblocksEnhancer } from \"@liveblocks/redux\";\nimport { configureStore, createSlice } from \"@reduxjs/toolkit\";\n\nconst client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n\nconst initialState = {};\n\nconst slice = createSlice({\n  name: \"state\",\n  initialState,\n  reducers: {\n    /* logic will be added here */\n  },\n});\n\nexport function makeStore() {\n  return configureStore({\n    reducer: slice.reducer,\n    enhancers: [\n      liveblocksEnhancer({\n        client,\n      }),\n    ],\n  });\n}\n\nconst store = makeStore();\n\nexport default store;\n```\n\n----------------------------------------\n\nTITLE: Implementing Collaborative Monaco Editor in Svelte\nDESCRIPTION: Set up a Svelte component that integrates Liveblocks, Yjs, and Monaco editor for real-time collaborative code editing. This includes initializing the Liveblocks client, setting up the Yjs document and provider, creating the Monaco editor instance, and binding it with Yjs.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-monaco-svelte.mdx#2025-04-11_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<script>\nimport { onMount, onDestroy } from \"svelte\";\nimport { createClient } from \"@liveblocks/client\";\nimport { getYjsProviderForRoom } from \"@liveblocks/yjs\";\nimport * as Y from \"yjs\";\nimport * as monaco from \"monaco-editor\";\nimport { MonacoBinding } from \"y-monaco\";\n\nlet element;\nconst roomId = \"my-room\";\n\n// Set up Liveblocks client\nconst client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n\nonMount(() => {\n  // Enter a multiplayer room\n  const { room, leave } = client.enterRoom(roomId);\n\n  // Set up Yjs document, shared text, and Liveblocks Yjs provider\n  const yProvider = getYjsProviderForRoom(room);\n  const yDoc = yProvider.getYDoc();\n  const yText = yDoc.getText(\"monaco\");\n\n  // Set up the Monaco editor\n  const editor = monaco.editor.create(element, {\n    value: \"\",\n    language: \"javascript\"\n  })\n\n  // Attach Yjs to Monaco\n  const binding = new MonacoBinding(\n    yText,\n    editorRef.getModel(),\n    new Set([editor]),\n    yProvider.awareness\n  );\n\n  return () => {\n    binding.destroy();\n    editor.dispose();\n    leave();\n  };\n});\n\n</script>\n\n<div bind:this={element}></div>\n```\n\n----------------------------------------\n\nTITLE: Creating a Liveblocks Room Component with React Suspense\nDESCRIPTION: Sets up a Room component that provides Liveblocks context to its children, handling authentication and room connection with suspense for loading states.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-lexical-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { ReactNode } from \"react\";\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n  ClientSideSuspense,\n} from \"@liveblocks/react/suspense\";\n\nexport function Room({ children }: { children: ReactNode }) {\n  return (\n    <LiveblocksProvider authEndpoint=\"/api/liveblocks-auth\">\n      <RoomProvider id=\"my-room\">\n        <ClientSideSuspense fallback={<div>Loading…</div>}>\n          {children}\n        </ClientSideSuspense>\n      </RoomProvider>\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Migrating from Direct Storage Hooks to useStorage\nDESCRIPTION: Shows how to replace useList, useObject and useMap hooks with useStorage hook for reading data from Liveblocks storage.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/0.18.mdx#2025-04-11_snippet_10\n\nLANGUAGE: tsx\nCODE:\n```\n// ❌\nconst obj = useObject(\"a\");\nconst list = useObject(\"b\");\nconst map = useMap(\"c\");\n```\n\nLANGUAGE: tsx\nCODE:\n```\n// ✅\nconst obj = useStorage((root) => root.a);\nconst list = useStorage((root) => root.b);\nconst map = useStorage((root) => root.c);\n```\n\n----------------------------------------\n\nTITLE: Using Shallow Equality for Complex Selectors\nDESCRIPTION: Demonstrates using the shallow equality function from @liveblocks/react to optimize performance when creating derived data in selectors. This prevents unnecessary re-renders when working with computed values that create new objects.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-storage-with-react.mdx#2025-04-11_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nimport { shallow } from \"@liveblocks/react\";\n\n// ✅ Rerenders only when root.scientist.pets shallowly changes\nconst pets = useStorage(\n  (root) => root.scientist.pets.map((pet) => pet + pet),\n  shallow\n);\n```\n\n----------------------------------------\n\nTITLE: Configuring LiveblocksProvider with Auth Endpoint\nDESCRIPTION: This code shows how to set up the LiveblocksProvider component with an authentication endpoint instead of using a public API key.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/remix.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n<LiveblocksProvider authEndpoint=\"/api/liveblocks-auth\">\n```\n\n----------------------------------------\n\nTITLE: Defining Types for LiveList of People in TypeScript\nDESCRIPTION: Sets up the Person type and global Liveblocks interface to use a LiveList of Person objects for collaborative editing.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/nesting-data-types/guide.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// Person type\ntype Person = LiveObject<{\n  name: string;\n  age: number;\n}>;\n\n// Global types\ndeclare global {\n  interface Liveblocks {\n    Storage: {\n      people: LiveList<Person>;\n    };\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Comment Thread Display in React\nDESCRIPTION: Renders a complete comment thread with custom mention and link components. Uses thread data from useThreads hook.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_18\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  Comment,\n  CommentBodyLinkProps,\n  CommentBodyMentionProps,\n} from \"@liveblocks/react-ui/primitives\";\nimport { ThreadData } from \"@liveblocks/client\";\n\n// Render custom comments in a thread. Pass a thread from `useThreads`.\nfunction MyComments({ thread }: { thread: ThreadData }) {\n  return (\n    <>\n      {thread.comments.map((comment) => (\n        <div key={comment.id}>\n          <Comment.Body\n            body={comment.body}\n            components={{\n              Mention,\n              Link,\n            }}\n          />\n        </div>\n      ))}\n    </>\n  );\n}\n\n// Render a mention in the comment, e.g. \"@Emil Joyce\"\nfunction Mention({ userId }: CommentBodyMentionProps) {\n  return <Comment.Mention>@{userId}</Comment.Mention>;\n}\n\n// Render a link in the comment, e.g. \"https://liveblocks.io\"\nfunction Link({ href, children }: CommentBodyLinkProps) {\n  return <Comment.Link href={href}>{children}</Comment.Link>;\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Thread Overlay with Conditional Rendering\nDESCRIPTION: Demonstrates a ThreadOverlay component that conditionally renders FloatingThreads and AnchoredThreads based on screen size using Tailwind CSS classes. The component uses the useThreads hook from Liveblocks to filter out resolved threads.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_29\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useThreads } from \"@liveblocks/react/suspense\";\nimport { AnchoredThreads, FloatingThreads } from \"@liveblocks/react-tiptap\";\nimport { Editor } from \"@tiptap/react\";\n\nfunction ThreadOverlay({ editor }: { editor: Editor | null }) {\n  const { threads } = useThreads({ query: { resolved: false } });\n\n  return (\n    <>\n      <FloatingThreads\n        editor={editor}\n        threads={threads}\n        className=\"w-[350px] block md:hidden\"\n      />\n      <AnchoredThreads\n        editor={editor}\n        threads={threads}\n        className=\"w-[350px] hidden sm:block\"\n      />\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Room ID with Liveblocks Node SDK\nDESCRIPTION: Demonstrates how to use the Liveblocks Node.js SDK to update a room's ID. The code initializes a Liveblocks instance with a secret key and uses the updateRoomId method to change a room's identifier.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-rename-room-ids-and-successfully-migrate-users.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nconst room = await liveblocks.updateRoomId({\n  roomId: \"my-room-id\",\n  newRoomId: \"new-room-id\",\n});\n\n// { type: \"room\", id: \"new-room-id\", ... }\nconsole.log(room);\n```\n\n----------------------------------------\n\nTITLE: Configuring Redux Store with Liveblocks Enhancer (Presence)\nDESCRIPTION: This snippet demonstrates how to configure a Redux store using the Liveblocks enhancer to synchronize the `isTyping` state with Liveblocks presence.  The `presenceMapping` option automatically syncs the `isTyping` part of the Redux state to Liveblocks presence, allowing other users to see when someone is typing.  It imports necessary modules from `@liveblocks/client`, `@liveblocks/redux`, and `@reduxjs/toolkit`.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-react-redux-and-liveblocks.mdx#2025-04-11_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\nimport { liveblocksEnhancer } from \"@liveblocks/redux\";\nimport { configureStore, createSlice } from \"@reduxjs/toolkit\";\n\nconst client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n\nconst initialState = {\n  draft: \"\",\n  isTyping: false,\n};\n\nconst slice = createSlice({\n  name: \"state\",\n  initialState,\n  reducers: {\n    setDraft: (state, action) => {\n      state.isTyping = action.payload === \"\" ? false : true;\n      state.draft = action.payload;\n    },\n  },\n});\n\nexport const { setDraft } = slice.actions;\n\nexport function makeStore() {\n  return configureStore({\n    reducer: slice.reducer,\n    enhancers: [\n      liveblocksEnhancer({\n        client,\n        presenceMapping: { isTyping: true },\n      }),\n    ],\n  });\n}\n\nconst store = makeStore();\n\nexport default store;\n\n```\n\n----------------------------------------\n\nTITLE: Implementing a Toolbar in Tiptap Editor using TypeScript\nDESCRIPTION: This TypeScript snippet defines a Toolbar component for Tiptap, adding basic rich-text formatting functionality such as bold, italic, and strikethrough. It requires '@tiptap/react' and integrates into the Tiptap editor setup.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-tiptap-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_10\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Editor } from \"@tiptap/react\";\nimport styles from \"./Toolbar.module.css\";\n\ntype Props = {\n  editor: Editor | null;\n};\n\nexport function Toolbar({ editor }: Props) {\n  if (!editor) {\n    return null;\n  }\n\n  return (\n    <div className={styles.toolbar}>\n      <button\n        className={styles.button}\n        onClick={() => editor.chain().focus().toggleBold().run()}\n        disabled={!editor.can().chain().focus().toggleBold().run()}\n        data-active={editor.isActive(\"bold\") ? \"is-active\" : undefined}\n        aria-label=\"bold\"\n      >\n        B\n      </button>\n      <button\n        className={styles.button}\n        onClick={() => editor.chain().focus().toggleItalic().run()}\n        disabled={!editor.can().chain().focus().toggleItalic().run()}\n        data-active={editor.isActive(\"italic\") ? \"is-active\" : undefined}\n        aria-label=\"italic\"\n      >\n        i\n      </button>\n      <button\n        className={styles.button}\n        onClick={() => editor.chain().focus().toggleStrike().run()}\n        disabled={!editor.can().chain().focus().toggleStrike().run()}\n        data-active={editor.isActive(\"strike\") ? \"is-active\" : undefined}\n        aria-label=\"strikethrough\"\n      >\n        S\n      </button>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Liveblocks Threads in a Next.js Component\nDESCRIPTION: Using Liveblocks hooks and UI components to display threads and add a composer for creating new comments. The useThreads hook fetches all threads in the room while Thread and Composer components render the UI.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-comments.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { useThreads } from \"@liveblocks/react/suspense\";\nimport { Composer, Thread } from \"@liveblocks/react-ui\";\n\nexport function CollaborativeApp() {\n  const { threads } = useThreads();\n\n  return (\n    <div>\n      {threads.map((thread) => (\n        <Thread key={thread.id} thread={thread} />\n      ))}\n      <Composer />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Integrating Live Avatars into Quill Editor Component\nDESCRIPTION: This snippet demonstrates how to incorporate the Avatars component into the main Quill editor component. It adds the Avatars next to the Toolbar in the editor header, completing the collaborative features of the text editor.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-quill-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_15\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Avatars } from \"./Avatars\";\n// ...\n\nfunction QuillEditor({ yText, provider }: EditorProps) {\n  // ...\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.editorHeader}>\n        <Toolbar getQuill={getQuill} />\n        <Avatars />\n      </div>\n      <div className={styles.editorContainer}>{/* ... */}</div>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Live Avatars with Liveblocks Hooks in React\nDESCRIPTION: This component uses Liveblocks hooks (useOthers and useSelf) to display avatars for all connected users, including the current user. It demonstrates how to integrate Liveblocks presence features into the editor.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-quill-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_13\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useOthers, useSelf } from \"@/liveblocks.config\";\nimport styles from \"./Avatars.module.css\";\n\nexport function Avatars() {\n  const users = useOthers();\n  const currentUser = useSelf();\n\n  return (\n    <div className={styles.avatars}>\n      {users.map(({ connectionId, info }) => {\n        return (\n          <Avatar key={connectionId} picture={info.picture} name={info.name} />\n        );\n      })}\n\n      {currentUser && (\n        <div className=\"relative ml-8 first:ml-0\">\n          <Avatar\n            picture={currentUser.info.picture}\n            name={currentUser.info.name}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport function Avatar({ picture, name }: { picture: string; name: string }) {\n  return (\n    <div className={styles.avatar} data-tooltip={name}>\n      <img\n        src={picture}\n        className={styles.avatar_picture}\n        data-tooltip={name}\n      />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Integrating Canvas Pointer Events in React (TSX)\nDESCRIPTION: This snippet shows how to integrate the `onCanvasPointerMove` and `onCanvasPointerUp` functions from the Zustand store into the React component's canvas element.  These event handlers are attached to the `onPointerMove` and `onPointerUp` events of the canvas, enabling the drag-and-drop functionality. It also shows how to access store values like `shapes` and `selectedShape`.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-online-whiteboard-with-react-zustand-and-liveblocks.mdx#2025-04-11_snippet_12\n\nLANGUAGE: tsx\nCODE:\n```\n\"import { useEffect } from \\\"react\\\";\\nimport useStore from \\\"./store\\\";\\n\\nimport \\\"./App.css\\\";\\n\\nexport default function App() {\\n  const shapes = useStore((state) => state.shapes);\\n  const insertRectangle = useStore((state) => state.insertRectangle);\\n  const others = useStore((state) => state.liveblocks.others);\\n  const selectedShape = useStore((state) => state.selectedShape);\\n  const deleteShape = useStore((state) => state.deleteShape);\\n  const onCanvasPointerMove = useStore((state) => state.onCanvasPointerMove);\\n  const onCanvasPointerUp = useStore((state) => state.onCanvasPointerUp);\\n\\n  /* ... */\\n\\n  return (\\n    <>\\n      <div\\n        className=\\\"canvas\\\"\\n        onPointerMove={onCanvasPointerMove}\\n        onPointerUp={onCanvasPointerUp}\\n      >\\n        {/* ... */}\\n      </div>\\n      <div className=\\\"toolbar\\\">{/* ... */}</div>\\n    </>\\n  );\\n}\\n\\n/* Rectangle */\\n\"\n```\n\n----------------------------------------\n\nTITLE: Connecting Zustand store to Liveblocks\nDESCRIPTION: TypeScript code to create a Liveblocks client and integrate it with a Zustand store using middleware. This adds a 'liveblocks' state to the store for interacting with Presence and Storage APIs.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/zustand.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n\"use client\";\n\nimport create from \"zustand\";\nimport { createClient } from \"@liveblocks/client\";\nimport { liveblocks } from \"@liveblocks/zustand\";\nimport type { WithLiveblocks } from \"@liveblocks/zustand\";\n\ntype State = {\n  // Your Zustand state type will be defined here\n};\n\nconst client = createClient({\n  publicApiKey: \"pk_prod_xxxxxxxxxxxxxxxxxxxxxxxx\",\n});\n\nconst useStore = create<WithLiveblocks<State>>()(\n  liveblocks(\n    (set) => ({\n      // Your state and actions will go here\n    }),\n    { client }\n  )\n);\n\nexport default useStore;\n```\n\n----------------------------------------\n\nTITLE: Creating Firebase Callable Function for Liveblocks Authentication\nDESCRIPTION: A Firebase callable function that implements security logic for Liveblocks. It creates an authentication session, defines room access permissions using naming patterns and wildcards, and returns an access token.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/firebase.mdx#2025-04-11_snippet_1\n\nLANGUAGE: js\nCODE:\n```\nconst functions = require(\"firebase-functions\");\nconst { Liveblocks } = require(\"@liveblocks/node\");\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nexports.auth = functions.https.onCall(async (data, context) => {\n  // Get the current user from your database\n  const user = __getUserFromDB__(data);\n\n  // Start an auth session inside your endpoint\n  const session = liveblocks.prepareSession(\n    user.id,\n    { userInfo: user.metadata },  // Optional\n  );\n\n  // Use a naming pattern to allow access to rooms with wildcards\n  // Giving the user read access on their org, and write access on their group\n  session.allow(`${user.organization}:*`, session.READ_ACCESS);\n  session.allow(`${user.organization}:${user.group}:*`, session.FULL_ACCESS);\n\n  // Authorize the user and return the result\n  const { status, body } = await session.authorize();\n  return JSON.parse(body);\n});\n```\n\n----------------------------------------\n\nTITLE: Updating Type Annotations in @liveblocks/client\nDESCRIPTION: This snippet demonstrates the improved way to annotate types when using @liveblocks/client directly. It shows how to define Presence and Storage types and use them with the client.enter method, reducing redundant type annotations.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/0.17.mdx#2025-04-11_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\nimport { Author } from \"./types\";\n\nconst client = createClient({\n  /* client options */\n});\n\ntype Presence = {\n  cursor: { x: number; y: number } | null;\n};\n\ntype Storage = {\n  author: LiveObject<Author>;\n};\n\n// ❌ In 0.16, you had to annotate each method separately\nconst room = client.enter(\"myRoom\");\nconst { root } = await room.getStorage<Storage>();\nconst author = root.get<Author>(\"author\");\nconst me = room.getPresence<Presence>();\nconst others = room.getOthers<Presence>();\n\n// ✅ In 0.17, you can simply annotate it once, at the \"top\"\nconst room = client.enter<Presence, Storage>(\"myRoom\");\nconst { root } = await room.getStorage();\nconst author = root.get(\"author\");\nconst me = room.getPresence();\nconst others = room.getOthers();\n```\n\n----------------------------------------\n\nTITLE: Creating a Toolbar Component with Undo/Redo Functionality\nDESCRIPTION: This TypeScript code defines a `Toolbar` component with undo and redo buttons for the Monaco Editor. It utilizes the `editor.trigger` method to execute the undo and redo commands. It receives the Monaco editor instance as a prop.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-monaco-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_12\n\nLANGUAGE: tsx\nCODE:\n```\nimport styles from \"./Toolbar.module.css\";\nimport { editor } from \"monaco-editor\";\n\ntype Props = {\n  editor: editor.IStandaloneCodeEditor;\n};\n\nexport function Toolbar({ editor }: Props) {\n  return (\n    <div className={styles.toolbar}>\n      <button\n        className={styles.button}\n        onClick={() => editor.trigger(\"\", \"undo\", null)}\n      >\n        Undo\n      </button>\n      <button\n        className={styles.button}\n        onClick={() => editor.trigger(\"\", \"redo\", null)}\n      >\n        Redo\n      </button>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Global Liveblocks Types in TypeScript (v2.0.0)\nDESCRIPTION: Example showing the improved DX in v2.0.0 that allows defining Liveblocks types globally rather than passing them to createRoomContext. This pattern ensures types are shared across all Liveblocks APIs.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-client/CHANGELOG.md#2025-04-11_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\n// ❌ Before\nexport const {\n  suspense: {\n    RoomProvider,\n    useRoom,\n    // etc\n  },\n} = createRoomContext<Presence, Storage>(client);\n\n// ✅ After\ndeclare global {\n  interface Liveblocks {\n    Presence: Presence;\n    Storage: Storage;\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Custom RoomInfo Type in Liveblocks\nDESCRIPTION: This code snippet shows how to define a custom RoomInfo type for use with Liveblocks' resolveRoomsInfo callback and useRoomInfo hook.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.0.mdx#2025-04-11_snippet_21\n\nLANGUAGE: tsx\nCODE:\n```\ndeclare global {\n  interface Liveblocks {\n    RoomInfo: {\n      /* your custom type definition here */\n    };\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Presence Mapping in Redux Store\nDESCRIPTION: This code sets up a Redux store with Liveblocks enhancer configuration, defining presence mapping for cursor position. It creates a slice with a setCursor reducer to update the cursor state which will be shared with other users.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-presence-with-redux.mdx#2025-04-11_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n/* ... imports and client setup ... */\n\nconst initialState = {\n  cursor: { x: 0, y: 0 },\n};\n\nconst slice = createSlice({\n  name: \"state\",\n  initialState,\n  reducers: {\n    setCursor: (state, action) => {\n      state.cursor = action.payload;\n    },\n  },\n});\n\nexport const { setCursor } = slice.actions;\n\nfunction makeStore() {\n  return configureStore({\n    reducer: slice.reducer,\n    enhancers: [\n      enhancer({\n        client,\n        presenceMapping: { cursor: true },\n      }),\n    ],\n  });\n}\n\nconst store = makeStore();\n\nexport default store;\n```\n\n----------------------------------------\n\nTITLE: Configuring Multiple Authentication Providers in NextJS with NextAuth\nDESCRIPTION: This code demonstrates how to add multiple authentication providers to the NextJS Starter Kit using NextAuth. It shows the configuration for GitHub and Auth0 providers in the auth.config.ts file, including the necessary environment variables for each provider.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/tools/nextjs-starter-kit.mdx#2025-04-11_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nimport GithubProvider from \"next-auth/providers/github\";\nimport Auth0Provider from \"next-auth/providers/auth0\";\n\nexport const authOptions = {\n  // ...\n  providers: {\n    GithubProvider({\n      clientId: process.env.GITHUB_CLIENT_ID as string,\n      clientSecret: process.env.GITHUB_CLIENT_SECRET as string,\n    }),\n    Auth0Provider({\n      clientId: process.env.AUTH0_CLIENT_ID as string,\n      clientSecret: process.env.AUTH0_CLIENT_SECRET as string,\n      issuer: process.env.AUTH0_ISSUER_BASE_URL as string,\n    }),\n  }\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing Collaborative CodeMirror Editor in Vue.js\nDESCRIPTION: Vue component implementation that sets up a collaborative CodeMirror editor with Liveblocks integration. Includes initialization of Yjs document, CodeMirror configuration, and real-time collaboration setup.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-codemirror-vuejs.mdx#2025-04-11_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<script setup>\nimport { ref, onMounted, onUnmounted } from \"vue\";\nimport { createClient } from \"@liveblocks/client\";\nimport { getYjsProviderForRoom } from \"@liveblocks/yjs\";\nimport * as Y from \"yjs\";\nimport { yCollab } from \"y-codemirror.next\";\nimport { EditorView, basicSetup } from \"codemirror\";\nimport { EditorState } from \"@codemirror/state\";\nimport { javascript } from \"@codemirror/lang-javascript\";\n\nconst parent = ref(null);\nconst leave = ref(null);\nconst view = ref(null);\n\n// Set up Liveblocks client\nconst client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n\n// Enter a multiplayer room\nconst info = client.enterRoom(\"my-room\");\nconst room = info.room;\nleave.value = info.leave;\n\n// Set up Yjs document, shared text, and Liveblocks Yjs provider\nconst yProvider = getYjsProviderForRoom(room);\nconst yDoc = yProvider.getYDoc();\nconst yText = yDoc.getText(\"codemirror\");\n\nonMounted(() => {\n  // Set up CodeMirror and extensions\n  const state = EditorState.create({\n    doc: yText.toString(),\n    extensions: [\n      basicSetup,\n      javascript(),\n      yCollab(ytext, yProvider.awareness, { undoManager }),\n    ],\n  });\n\n  // Attach CodeMirror to element\n  view.current = new EditorView({\n    state,\n    parent: parent.value,\n  });\n});\n\nonUnmounted(() => {\n  view?.destroy();\n  leave.value?.();\n});\n</script>\n\n<template>\n  <div ref=\"parent\" />\n</template>\n```\n\n----------------------------------------\n\nTITLE: Structured Layout with Server and Client Components\nDESCRIPTION: Demonstrates how to combine server-rendered layout with client-side Liveblocks components in a structured application layout.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-with-nextjs-app-directory.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ReactNode } from \"react\";\nimport { Room } from \"./Room\";\nimport { LiveCanvas } from \"./LiveCanvas\";\n\nexport default function Page({ children }: { children: ReactNode }) {\n  return (\n    // Room.tsx is a client component that contains RoomProvider\n    <Room>\n      {/* This layout is server rendered */}\n      <header style={{ height: \"150px\" }}>My drawing app</header>\n      <main style={{ width: \"100%\" }}>\n        {/* LiveCanvas is a client component using Liveblocks features */}\n        <LiveCanvas />\n      </main>\n    </Room>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Collaborative Text Editor in Vue.js\nDESCRIPTION: Vue component implementing a collaborative text editor using Tiptap with Liveblocks and Yjs integration. Includes room setup, Yjs document configuration, and editor initialization.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-tiptap-vuejs.mdx#2025-04-11_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<script setup>\nimport { onUnmounted } from \"vue\";\nimport { createClient } from \"@liveblocks/client\";\nimport { getYjsProviderForRoom } from \"@liveblocks/yjs\";\nimport * as Y from \"yjs\";\nimport { useEditor, EditorContent } from \"@tiptap/vue-3\";\nimport StarterKit from \"@tiptap/starter-kit\";\nimport Collaboration from \"@tiptap/extension-collaboration\";\nimport CollaborationCursor from \"@tiptap/extension-collaboration-cursor\";\n\nconst leave = ref(null);\n\n// Set up Liveblocks client\nconst client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n\n// Enter a multiplayer room\nconst info = client.enterRoom(\"my-room\");\nconst room = info.room;\nleave.value = info.leave;\n\n// Set up Yjs document and Liveblocks Yjs provider\nconst yProvider = getYjsProviderForRoom(room);\nconst yDoc = yProvider.getYDoc();\n\n// Set up the Tiptap editor\nconst editor = useEditor({\n  element,\n  extensions: [\n    StarterKit.configure({\n      // The Collaboration extension comes with its own history handling\n      history: false,\n    }),\n    // Register the Yjs document with Tiptap\n    Collaboration.configure({\n      document: yDoc,\n    }),\n    CollaborationCursor.configure({\n      provider: yProvider,\n    }),\n  ],\n});\n\nonUnmounted(() => {\n  leave?.();\n});\n</script>\n\n<template>\n  <editor-content :editor=\"editor\" />\n</template>\n```\n\n----------------------------------------\n\nTITLE: Implementing useThreads with pagination in React\nDESCRIPTION: Updated example of using useThreads hook with pagination in a React component. This implementation includes handling for fetching more threads, loading states, and errors.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.9.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useThreads } from \"@liveblocks/react/suspense\";\n\nfunction Threads() {\n  const {\n    threads,\n    fetchMore,\n    isFetchingMore,\n    hasFetchedAll,\n    fetchMoreError,\n  } = useThreads();\n\n  const loadMore = fetchMoreError ? (\n    <>\n      <p>Error loading more threads: {fetchMoreError.message}</p>\n      <button onClick={fetchMore} disabled={isFetchingMore}>\n        Retry\n      </button>\n    </>\n  ) : (\n    <button onClick={fetchMore} disabled={isFetchingMore}>\n      Load more\n    </button>\n  );\n\n  return (\n    <div>\n      {threads.map((thread) => (\n        <Thread key={thread.id} thread={thread} />\n      ))}\n      {hasFetchedAll ? <div>🎉 You're all caught up!</div> : loadMore}\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Integrating Liveblocks Room into Next.js Page\nDESCRIPTION: Including the previously created Room component in a Next.js page.tsx file to wrap the collaborative application components.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-comments.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Room } from \"./Room\";\nimport { CollaborativeApp } from \"./CollaborativeApp\";\n\nexport default function Page() {\n  return (\n    <Room>\n      <CollaborativeApp />\n    </Room>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Preparing Text Mention Notification Email as React Component\nDESCRIPTION: This code snippet demonstrates how to prepare a text mention notification email using a React component approach. It leverages the Liveblocks library to create a custom email structure, incorporating user information and room details. The code includes asynchronous functions to resolve user and room information from a database.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-send-email-notifications-for-unread-text-editor-mentions.mdx#2025-04-11_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\n// ...\n\nemailData = await prepareTextMentionNotificationEmailAsReact(\n  liveblocks,\n  event,\n  {\n    resolveUsers: async ({ userIds }) => {\n      const usersData = await __getUsersFromDB__(userIds);\n\n      return usersData.map((userData) => ({\n        name: userData.name, // \"Chris\"\n        avatar: userData.avatar.src, // \"https://example.com/chris.jpg\"\n      }));\n    },\n    resolveRoomInfo: async ({ roomId }) => {\n      const roomData = await __getRoomFromDB__(roomId);\n\n      return {\n        name: roomData.name, // \"Untitled document\"\n        url: roomData.url, //`https://example.com/my-room-id`\n      };\n    },\n    // +++\n    components: {\n      Container: ({ children }) => (\n        <main style={{ margin: \"12px 0\" }}>{children}</main>\n      ),\n\n      // `user` is the optional data returned from `resolveUsers`\n      Mention: ({ element, user }) => (\n        <span style={{ color: \"red\" }}>@{user?.name ?? element.id}</span>\n      ),\n\n      Text: ({ children }) => (\n        <p style={{ fontSize: \"16px\", fontStyle: \"italic\" }}>{children}</p>\n      ),\n    },\n    // +++\n  }\n);\n\n// ...\n```\n\n----------------------------------------\n\nTITLE: Subscribing to Storage Status in TypeScript\nDESCRIPTION: Demonstrates how to subscribe to storage status changes in a Liveblocks room. The status can be 'not-loaded', 'loading', 'synchronizing', or 'synchronized' indicating the synchronization state between the client and Liveblocks servers.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-redux/CHANGELOG.md#2025-04-11_snippet_18\n\nLANGUAGE: typescript\nCODE:\n```\nroom.subscribe(\"storage-status\", (status) => {\n  switch (status) {\n    case \"not-loaded\":\n      break;\n    case \"loading\":\n      break;\n    case \"synchronizing\":\n      break;\n    case \"synchronized\":\n      break;\n    default:\n      break;\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Granting Access to a Specific Design Room with Access Token in TypeScript\nDESCRIPTION: This snippet demonstrates how to grant access to a specific 'design' room using its exact ID. While this works, it's noted as not scalable for managing multiple individual room permissions.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token.mdx#2025-04-11_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\n// Access to just this `design` room, but not scalable\nsession.allow(\"Vu78Rt:design:9Hdu73\", session.FULL_ACCESS);\n```\n\n----------------------------------------\n\nTITLE: React Component with Liveblocks Room Connection\nDESCRIPTION: Main React component implementing room connection lifecycle with Liveblocks, including user presence tracking and display.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-react-zustand-and-liveblocks.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport React, { useEffect } from \"react\";\nimport useStore from \"./store\";\n\nimport \"./App.css\";\n\nfunction WhoIsHere() {\n  const othersUsersCount = useStore((state) => state.liveblocks.others.length);\n\n  return (\n    <div className=\"who_is_here\">\n      There are {othersUsersCount} other users online\n    </div>\n  );\n}\n\nexport default function App() {\n  const {\n    liveblocks: { enterRoom, leaveRoom },\n  } = useStore();\n\n  useEffect(() => {\n    enterRoom(\"zustand-todo-app\");\n    return () => {\n      leaveRoom(\"zustand-todo-app\");\n    };\n  }, [enterRoom, leaveRoom]);\n\n  return (\n    <div className=\"container\">\n      <WhoIsHere />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Using enterRoom method from Liveblocks state in JavaScript\nDESCRIPTION: This code shows how to use the enterRoom method provided by the Liveblocks state. It demonstrates entering a room and starting to sync it with the Zustand state.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-zustand.mdx#2025-04-11_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nconst {\n  liveblocks: { enterRoom },\n} = useStore();\n\nenterRoom(\"roomId\");\n```\n\n----------------------------------------\n\nTITLE: Configuring SvelteKit Authentication Endpoint\nDESCRIPTION: Server-side implementation of the authentication endpoint that handles user permissions and room access using Liveblocks. Sets up session authorization with custom access patterns for different permission levels.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/sveltekit.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { type RequestEvent } from \"@sveltejs/kit\";\nimport { Liveblocks } from \"@liveblocks/node\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nexport async function POST({ request }: RequestEvent) {\n  // Get the current user from your database\n  const user = __getUserFromDB__(request);\n\n  // Start an auth session inside your endpoint\n  const session = liveblocks.prepareSession(\n    user.id,\n    { userInfo: user.metadata },  // Optional\n  );\n\n  // Use a naming pattern to allow access to rooms with wildcards\n  // Giving the user read access on their org, and write access on their group\n  session.allow(`${user.organization}:*`, session.READ_ACCESS);\n  session.allow(`${user.organization}:${user.group}:*`, session.FULL_ACCESS);\n\n  // Authorize the user and return the result\n  const { status, body } = await session.authorize();\n  return new Response(body, { status });\n}\n```\n\n----------------------------------------\n\nTITLE: Setting up Authentication Endpoint in Remix\nDESCRIPTION: This TypeScript code creates an authentication endpoint in Remix using the Liveblocks Node SDK. It identifies the user and returns authentication tokens for accessing Liveblocks rooms.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/remix.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { ActionFunction } from \"@remix-run/node\";\nimport { Liveblocks } from \"@liveblocks/node\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nexport const action: ActionFunction = async ({ request }) => {\n  // Get the current user from your database\n  const user = __getUserFromDB__(request);\n\n  // Identify the user and return the result\n  const { status, body } = await liveblocks.identifyUser(\n    {\n      userId: user.id,\n      groupIds, // Optional\n    },\n    { userInfo: user.metadata },\n  );\n\n  return new Response(body, { status });\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Collaborative Quill Editor in Vue.js\nDESCRIPTION: This Vue.js component sets up a collaborative Quill text editor using Liveblocks and Yjs. It includes client initialization, room creation, Yjs document setup, and Quill editor configuration with real-time collaboration features.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-quill-vuejs.mdx#2025-04-11_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<script setup>\nimport { ref, onMounted, onUnmounted } from \"vue\";\nimport { createClient } from \"@liveblocks/client\";\nimport { getYjsProviderForRoom } from \"@liveblocks/yjs\";\nimport * as Y from \"yjs\";\nimport Quill from \"quill\";\nimport { QuillBinding } from \"y-quill\";\nimport QuillCursors from \"quill-cursors\";\n\nconst element = ref(null);\nconst binding = ref(null);\nconst leave = ref(null);\n\n// Set up Liveblocks client\nconst client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n\n// Enter a multiplayer room\nconst info = client.enterRoom(\"my-room\");\nconst room = info.room;\nleave.value = info.leave;\n\n// Set up Yjs document, shared text, and Liveblocks Yjs provider\nconst yText = yDoc.getText(\"quill\");\nconst yProvider = getYjsProviderForRoom(room);\nconst yDoc = yProvider.getYDoc();\n\n// Attach cursors plugin\nQuill.register(\"modules/cursors\", QuillCursors);\n\nonMounted(() => {\n  // Set up Quill editor and modules\n  const quill = new Quill(element.value, {\n    placeholder: \"Start collaborating…\",\n    theme: \"snow\",\n    modules: {\n      cursors: true,\n      toolbar: [\n        [{ header: [1, 2, false] }],\n        [\"bold\", \"italic\", \"underline\"],\n        [\"code-block\"],\n      ],\n      history: {\n        // Local undo shouldn't undo changes made by other users\n        userOnly: true,\n      },\n    },\n  });\n\n  // Attach Yjs to Quill\n  binding.value = new QuillBinding(yText, quill, yProvider.awareness);\n});\n\nonUnmounted(() => {\n  binding?.destroy?.();\n  leave?.();\n});\n</script>\n\n<template>\n  <div ref=\"element\" />\n</template>\n```\n\n----------------------------------------\n\nTITLE: Complete Realtime Data Revalidation Implementation\nDESCRIPTION: Full implementation combining SWR data fetching, event broadcasting, and listening with user interface components.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/revalidate-api-data-with-swr.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useBroadcastevent, useEventListener } from \"../liveblocks.config\";\n\nfunction Component() {\n  // Data updates on every button click\n  const { data, mutate } = useSWR(\"/api/user\", fetcher);\n\n  // Listen for custom event\n  useEventListener(({ event }) => {\n    if (event.type === \"REVALIDATE\") {\n      mutate();\n    }\n  });\n\n  // Create broadcast hook\n  const broadcast = useBroadcastEvent();\n\n  function addUser() {\n    // Code to add a new user to your list\n    // ...\n\n    // Broadcast the custom event\n    broadcast({ type: \"REVALIDATE\" });\n  }\n\n  return (\n    <div>\n      {users.map((user) => /* ... */)}:\n      <button onClick={addUser}>Add new user</button>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Joining Liveblocks room with loading state\nDESCRIPTION: Join a Liveblocks room and add a loading state using ClientSideSuspense component.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-slate-react.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n  ClientSideSuspense,\n} from \"@liveblocks/react/suspense\";\nimport { CollaborativeEditor } from \"./CollaborativeEditor\";\n\nexport default function App() {\n  return (\n    <LiveblocksProvider publicApiKey={\"{{PUBLIC_KEY}}\">\n      <RoomProvider id=\"my-room\">\n        <ClientSideSuspense fallback={<div>Loading…</div>}>\n          <CollaborativeEditor />\n        </ClientSideSuspense>\n      </RoomProvider>\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Resolving User Data in Liveblocks Configuration\nDESCRIPTION: Demonstrates how to implement the resolveUsers function in the liveblocks.config.ts file to provide user data for the useUser hook.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/hooks.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nasync function resolveUsers({ userIds }) {\n  // [\"olivier@example.com\"]\n  console.log(userIds);\n\n  return [\n    {\n      name: \"Olivier\",\n      avatar: \"https://example.com/olivier.png\",\n      color: \"red\",\n    },\n  ];\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Storage in a Page Component with TypeScript\nDESCRIPTION: This snippet initializes the Liveblocks provider and Room provider in a Next.js page component, setting the initial storage for todos using a new LiveList instance. It ensures that the to-do list is accessible in the collaborative environment.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-react-and-liveblocks.mdx#2025-04-11_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nimport { LiveList } from \"@liveblocks/client\";\n\n/* WhoIsHere */\n/* SomeoneIsTyping */\n\nexport default function Page() {\n  return (\n    <LiveblocksProvider publicApiKey={\"{{SECRET_KEY}}\"}>\n      <RoomProvider\n        id=\"my-room\"\n        initialPresence={{ isTyping: false }}\n        // +++\n        initialStorage={{ todos: new LiveList() }}\n        // +++\n      >\n        <ClientSideSuspense fallback={<div>Loading…</div>}>\n          <ToDoList />\n        </ClientSideSuspense>\n      </RoomProvider>\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Extending the Default Toolbar with Custom Content\nDESCRIPTION: Example showing how to extend the default Toolbar by adding custom content before and after the default buttons. This allows for keeping the default functionality while adding custom buttons.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Toolbar } from \"@liveblocks/react-lexical\";\nimport { Icon } from \"@liveblocks/react-ui\";\n\n<Toolbar\n  // +++\n  before={<>I'm at the start</>}\n  after={\n    <Toolbar.Button\n      name=\"Help\"\n      icon={<Icon.QuestionMark />}\n      shortcut=\"CMD-H\"\n      onClick={() => console.log(\"help\")}\n    />\n  }\n  // +++\n/>;\n```\n\n----------------------------------------\n\nTITLE: Implementing Threads and Composer for Collaborative Comments\nDESCRIPTION: Component for displaying and creating threaded comments in a Lexical editor using Liveblocks. It uses FloatingComposer for creating threads and both AnchoredThreads and FloatingThreads for displaying them on desktop and mobile respectively.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-lexical.mdx#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { useThreads } from \"@liveblocks/react/suspense\";\nimport {\n  AnchoredThreads,\n  FloatingComposer,\n  FloatingThreads,\n} from \"@liveblocks/react-lexical\";\n\nexport function Threads() {\n  const { threads } = useThreads();\n\n  return (\n    <>\n      <div className=\"anchored-threads\">\n        <AnchoredThreads threads={threads} />\n      </div>\n      <FloatingThreads className=\"floating-threads\" threads={threads} />\n      <FloatingComposer className=\"floating-composer\" />\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Storage with RoomProvider\nDESCRIPTION: Sets up the RoomProvider component with initialStorage property to create the initial storage structure with a scientist LiveObject. This establishes the default state that will be synchronized across users.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-storage-with-react.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { LiveObject } from \"@liveblocks/client\";\nimport { RoomProvider } from \"@liveblocks/react/suspense\";\n\n/* App */\n\nfunction Index() {\n  return (\n    <RoomProvider\n      id=\"my-room-id\"\n      initialPresence={/* ... */}\n      // +++\n      initialStorage={{\n        scientist: new LiveObject({\n          firstName: \"Marie\",\n          lastName: \"Curie\",\n        }),\n        // +++\n      }}\n    >\n      <App />\n    </RoomProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Storage for To-Do List\nDESCRIPTION: This snippet demonstrates how to initialize Liveblocks storage with a LiveList for todos. It also shows how to add new todos to the list when the user presses Enter.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-javascript-and-liveblocks.mdx#2025-04-11_snippet_11\n\nLANGUAGE: jsx\nCODE:\n```\nimport { createClient, LiveList } from \"@liveblocks/client\";\n\nconst client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n\nasync function run() {\n  const { room, leave } = client.enterRoom(\"javascript-todo-app\", {\n    initialPresence: { isTyping: false },\n    initialStorage: { todos: new LiveList() },\n  });\n\n  const whoIsHere = document.getElementById(\"who_is_here\");\n  const todoInput = document.getElementById(\"todo_input\");\n  const someoneIsTyping = document.getElementById(\"someone_is_typing\");\n\n  const { root } = await room.getStorage();\n\n  let todos = root.get(\"todos\");\n\n  room.subscribe(\"others\", (others) => {\n    /* ... */\n  });\n\n  todoInput.addEventListener(\"keydown\", (e) => {\n    if (e.key === \"Enter\") {\n      room.updatePresence({ isTyping: false });\n      todos.push({ text: todoInput.value });\n      todoInput.value = \"\";\n    } else {\n      room.updatePresence({ isTyping: true });\n    }\n  });\n\n  todoInput.addEventListener(\"blur\", () => {\n    room.updatePresence({ isTyping: false });\n  });\n}\n\nrun();\n```\n\n----------------------------------------\n\nTITLE: Using doc.update to Modify a Lexical Document\nDESCRIPTION: Shows how to use doc.update, which is similar to Lexical's editor.update function. It allows modifications to the document that will be persisted and appear in realtime to connected users.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-node-lexical.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nawait withLexicalDocument(\n  { roomId: \"my-room-id\", client: liveblocks },\n  async (doc) => {\n    // +++\n    await doc.update(() => {\n      // Make your modifications\n      // ...\n    });\n    // +++\n  }\n);\n```\n\n----------------------------------------\n\nTITLE: Optimizing Storage Performance with Selectors\nDESCRIPTION: Examples of efficient and inefficient selectors for useStorage, showing how to optimize performance by ensuring stable selector results. This illustrates best practices for using selectors to minimize unnecessary re-renders.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-storage-with-react.mdx#2025-04-11_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\n// ✅ Rerenders only when root.scientist.firstName changes\nconst firstName = useStorage((root) => root.scientist.firstName);\n\n// ✅ Rerenders only when root.scientist changes\nconst scientist = useStorage((root) => root.scientist);\n\n// ❌ Rerenders on every change because `map` returns a new array every time\nconst pets = useStorage((root) => root.scientist.pets.map((pet) => pet + pet));\n```\n\n----------------------------------------\n\nTITLE: Adding ClientSideSuspense for Loading States in Liveblocks Room\nDESCRIPTION: Enhanced React component that adds ClientSideSuspense to handle loading states while connecting to a Liveblocks room.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n  ClientSideSuspense,\n} from \"@liveblocks/react/suspense\";\nimport { Room } from \"./Room\";\n\nexport default function App() {\n  return (\n    <LiveblocksProvider publicApiKey={\"{{PUBLIC_KEY}}\"}>\n      <RoomProvider id=\"my-room\">\n        <ClientSideSuspense fallback={<div>Loading…</div>}>\n          <Room />\n        </ClientSideSuspense>\n      </RoomProvider>\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Live Avatars Component with Liveblocks Hooks in React\nDESCRIPTION: This code snippet defines an Avatars component using Liveblocks hooks (useOthers and useSelf) to display avatars for all connected users. It also includes an Avatar subcomponent for rendering individual user avatars.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-slate-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_12\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useOthers, useSelf } from \"@/liveblocks.config\";\nimport styles from \"./Avatars.module.css\";\n\nexport function Avatars() {\n  const users = useOthers();\n  const currentUser = useSelf();\n\n  return (\n    <div className={styles.avatars}>\n      {users.map(({ connectionId, info }) => {\n        return (\n          <Avatar key={connectionId} picture={info.picture} name={info.name} />\n        );\n      })}\n\n      {currentUser && (\n        <div className=\"relative ml-8 first:ml-0\">\n          <Avatar\n            picture={currentUser.info.picture}\n            name={currentUser.info.name}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport function Avatar({ picture, name }: { picture: string; name: string }) {\n  return (\n    <div className={styles.avatar} data-tooltip={name}>\n      <img\n        src={picture}\n        className={styles.avatar_picture}\n        data-tooltip={name}\n      />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Reauthenticating Room with TypeScript\nDESCRIPTION: Demonstrates how to reconnect and reauthenticate a Liveblocks room using the room.reconnect() method, which preserves client state including undo/redo history.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/reauthenticate-without-reloading-the-page-or-losing-state.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst { room, leave } = client.enterRoom(\"my-room\", {\n  // ...\n});\n\nroom.reconnect();\n```\n\n----------------------------------------\n\nTITLE: To-Do List App Component - TypeScript React\nDESCRIPTION: This React component displays the to-do list and allows users to add and delete items. It fetches the `todos`, `addTodo`, and `deleteTodo` functions from the Zustand store. The component also handles entering and leaving the Liveblocks room, and displays a loading indicator while the storage is being loaded.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-react-zustand-and-liveblocks.mdx#2025-04-11_snippet_7\n\nLANGUAGE: typescript react\nCODE:\n```\nimport React, { useEffect } from \"react\";\nimport useStore from \"./store\";\n\nimport \"./App.css\";\n\n/* WhoIsHere */\n/* SomeoneIsTyping */\n\nexport default function App() {\n  const {\n    draft,\n    setDraft,\n    todos,\n    addTodo,\n    deleteTodo,\n    liveblocks: { enterRoom, leaveRoom, isStorageLoading },\n  } = useStore();\n\n  useEffect(() => {\n    enterRoom(\"zustand-todo-app\");\n    return () => {\n      leaveRoom(\"zustand-todo-app\");\n    };\n  }, [enterRoom, leaveRoom]);\n\n  if (isStorageLoading) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <div className=\"container\">\n      <WhoIsHere />\n      <input\n        className=\"input\"\n        type=\"text\"\n        placeholder=\"What needs to be done?\"\n        value={draft}\n        onChange={(e) => setDraft(e.target.value)}\n        onKeyDown={(e) => {\n          if (e.key === \"Enter\") {\n            addTodo();\n          }\n        }}\n      ></input>\n      <SomeoneIsTyping />\n      {todos.map((todo, index) => {\n        return (\n          <div className=\"todo_container\" key={index}>\n            <div className=\"todo\">{todo.text}</div>\n            <button\n              className=\"delete_button\"\n              onClick={() => {\n                deleteTodo(index);\n              }}\n            >\n              ✕\n            </button>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Using pagination with useInboxNotifications in React\nDESCRIPTION: Demonstrates how to use the new pagination support in the useInboxNotifications hook, including new properties for fetching more data.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-core/CHANGELOG.md#2025-04-11_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nconst {\n  inboxNotifications,\n  isLoading,\n  error,\n\n  // ✨ New in Liveblocks 2.9\n  fetchMore,\n  isFetchingMore,\n  hasFetchedAll,\n  fetchMoreError,\n} = useInboxNotifications();\n```\n\n----------------------------------------\n\nTITLE: Using useSyncStatus hook in React\nDESCRIPTION: Shows how to use the new useSyncStatus hook to check if Liveblocks is synchronizing local changes to the server, useful for displaying a 'Saving...' spinner.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG.md#2025-04-11_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nuseSyncStatus({ smooth: true })\n```\n\n----------------------------------------\n\nTITLE: Configuring Storage Mapping\nDESCRIPTION: Setting up storage mapping to sync Redux state with Liveblocks room storage.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-redux.mdx#2025-04-11_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nimport { liveblocksEnhancer } from \"@liveblocks/redux\";\n\nconst initialState = {\n  scientist: { name: \"\" },\n};\n\nconst slice = createSlice({\n  name: \"state\",\n  initialState,\n  reducers: {\n    /* reducers */\n  },\n});\n\nconst store = configureStore({\n  reducer: slice.reducer,\n  enhancers: [\n    liveblocksEnhancer({\n      client,\n      storageMapping: { scientist: true },\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Using useStorage Hook to Access LiveObject Data in React\nDESCRIPTION: This snippet shows how to use the useStorage hook to access and display the person object from storage in a React component. It's typically added to the Room.tsx file.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/authenticating-with-nextjs/secret-key/guide.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useStorage } from \"./liveblocks.config\";\n\nexport function Room() {\n  const person = useStorage((root) => root.person);\n\n  return <div>Person: {JSON.stringify(person)}</div>;\n}\n```\n\n----------------------------------------\n\nTITLE: Modifying ProseMirror Document State with Transactions\nDESCRIPTION: Demonstrates how to modify ProseMirror document state using api.update with transactions for making changes like inserting text.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/getting-prosemirror-state-on-the-server.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\nimport { withProsemirrorDocument } from \"@liveblocks/node-prosemirror\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nawait withProsemirrorDocument(\n  { roomId: \"your-room-id\", client: liveblocks, field: \"prosemirror\" },\n  async (api) => {\n    await api.update((_, tr) => {\n      // Transaction example\n      return tr.insertText(\"Hello world\");\n    });\n  }\n);\n```\n\n----------------------------------------\n\nTITLE: Setting Up Express Authentication Endpoint for Liveblocks\nDESCRIPTION: Creates an Express endpoint that identifies users and generates authentication tokens. This endpoint verifies user access and returns the appropriate token for accessing Liveblocks rooms.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/express.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst express = require(\"express\");\nimport { Liveblocks } from \"@liveblocks/node\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nconst app = express();\napp.use(express.json());\n\napp.post(\"/api/liveblocks-auth\", (req, res) => {\n  // Get the current user from your database\n  const user = __getUserFromDB__(req);\n\n  // Identify the user and return the result\n  const { status, body } = await liveblocks.identifyUser(\n    {\n      userId: user.id,\n      groupIds, // Optional\n    },\n    { userInfo: user.metadata },\n  );\n\n  return res.status(status).end(body);\n});\n```\n\n----------------------------------------\n\nTITLE: Initializing ProseMirror Document Editing with Liveblocks in TypeScript\nDESCRIPTION: Sets up the main entry point to modify a ProseMirror document on the server using withProsemirrorDocument. This function takes a room ID and Liveblocks Node client, returning a callback to work with ProseMirror documents.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-node-prosemirror.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\nimport { withProsemirrorDocument } from \"@liveblocks/node-prosemirror\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nawait withProsemirrorDocument(\n  { roomId: \"your-room-id\", client: liveblocks },\n  (api) => {\n    // Modify your document with the api\n    // ...\n  }\n);\n```\n\n----------------------------------------\n\nTITLE: Implementing FloatingThreads in a React Editor Component\nDESCRIPTION: This example shows a more complete implementation of FloatingThreads in a React component. It includes necessary imports, configuration, and usage of useThreads hook to retrieve thread data.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_25\n\nLANGUAGE: tsx\nCODE:\n```\nimport { LexicalComposer } from \"@lexical/react/LexicalComposer\";\nimport { RichTextPlugin } from \"@lexical/react/LexicalRichTextPlugin\";\nimport { ContentEditable } from \"@lexical/react/LexicalContentEditable\";\nimport { LexicalErrorBoundary } from \"@lexical/react/LexicalErrorBoundary\";\nimport { useThreads } from \"@liveblocks/react/suspense\";\nimport {\n  liveblocksConfig,\n  LiveblocksPlugin,\n  FloatingComposer,\n  FloatingThreads,\n} from \"@liveblocks/react-lexical\";\n\nconst initialConfig = liveblocksConfig({\n  namespace: \"MyEditor\",\n  theme: {},\n  nodes: [],\n  onError: (err) => console.error(err),\n});\n\nfunction Editor() {\n  const { threads } = useThreads();\n\n  return (\n    <LexicalComposer initialConfig={initialConfig}>\n      <LiveblocksPlugin>\n        <FloatingComposer />\n        <FloatingThreads threads={threads} style={{ width: \"350px\" }} />\n      </LiveblocksPlugin>\n      <RichTextPlugin\n        contentEditable={<ContentEditable />}\n        placeholder={<div>Enter some text...</div>}\n        ErrorBoundary={LexicalErrorBoundary}\n      />\n    </LexicalComposer>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering a Basic Composer in React\nDESCRIPTION: This snippet demonstrates how to render a basic Composer component with various subcomponents such as AttachmentsDropArea, Editor, AttachFiles, and Submit.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_12\n\nLANGUAGE: tsx\nCODE:\n```\n<Composer.Form>\n  <Composer.AttachmentsDropArea />\n  <Composer.Editor\n    components={{\n      Mention: () => <Composer.Mention />,\n      MentionSuggestions: () => (\n        <Composer.Suggestions>\n          <Composer.SuggestionsList>\n            <Composer.SuggestionsListItem />\n          </Composer.SuggestionsList>\n        </Composer.Suggestions>\n      ),\n      Link: () => <Composer.Link />,\n    }}\n  />\n  <Composer.AttachFiles />\n  <Composer.Submit />\n</Composer.Form>\n```\n\n----------------------------------------\n\nTITLE: Integrating Zustand with Liveblocks Middleware\nDESCRIPTION: Implementation example showing how to use the Liveblocks middleware with Zustand, specifying presence and storage mappings to synchronize the todo list and typing status between clients.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-client/CHANGELOG.md#2025-04-11_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\nimport create from \"zustand\";\nimport { createClient } from \"@liveblocks/client\";\nimport { middleware } from \"@liveblocks/zustand\";\n\nconst client = createClient({ /*...*/ });\n\ntype State = {\n  draft: string;\n  isTyping: boolean;\n  todos: Todo[];\n  setDraft: (draft: string) => void;\n  addTodo: () => void;\n  deleteTodo: (index: number) => void;\n};\n\ncreate(\n  middleware<State>(/* ... */, {\n    client,\n    presenceMapping: { isTyping: true },\n    storageMapping: { todos: true }\n  })\n);\n```\n\n----------------------------------------\n\nTITLE: Using Liveblocks Methods in Vue.js\nDESCRIPTION: Vue.js component setup demonstrating how to use Liveblocks subscriptions, specifically the 'others' subscription which provides information about other connected users.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/vuejs.mdx#2025-04-11_snippet_4\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\n  import { onUnmounted, ref } from \"vue\";\n  import { room } from \"./room.js\";\n\n  const others = ref(room.getOthers());\n\n  const unsubscribeOthers = room.subscribe(\"others\", (updatedOthers) => {\n    others.current = updatedOthers;\n  });\n\n  onUnmounted(() => {\n    unsubscribeOthers();\n  });\n</script>\n\n<template>\n  <div>There are {{ others.length }} other user(s) online</div>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Using Liveblocks Notifications Components in React\nDESCRIPTION: Implementation of the MyApp component that uses the useInboxNotifications hook to fetch notifications and renders them using the InboxNotification and InboxNotificationList components from Liveblocks UI library.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-notifications.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { useInboxNotifications } from \"@liveblocks/react/suspense\";\nimport {\n  InboxNotification,\n  InboxNotificationList,\n} from \"@liveblocks/react-ui\";\n\nexport function CollaborativeApp() {\n  const { inboxNotifications } = useInboxNotifications();\n\n  return (\n    <InboxNotificationList>\n      {inboxNotifications.map((inboxNotification) => (\n        <InboxNotification\n          key={inboxNotification.id}\n          inboxNotification={inboxNotification}\n        />\n      ))}\n    </InboxNotificationList>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Applying and Syncing Y.Doc Changes\nDESCRIPTION: Demonstrates how to modify a Y.Doc instance and sync changes back to Liveblocks for all connected users. Includes fetching the document, making changes, and sending updates back to the server.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-your-ydoc-on-the-server.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport * as Y from \"yjs\";\nimport { Liveblocks } from \"@liveblocks/node\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nexport async function POST() {\n  // Get your Yjs data as a binary update\n  const update = await liveblocks.getYjsDocumentAsBinaryUpdate(\"my-room-name\");\n\n  // Create a Yjs document\n  const yDoc = new Y.Doc();\n\n  // Apply the binary update to `yDoc`\n  Y.applyUpdate(yDoc, new Uint8Array(update));\n\n  // An example of a `yDoc` modification\n  const yText = yDoc.getText(\"text\");\n  yText.insert(0, \"Hello world\");\n\n  // Encode the document state as an update\n  const yUpdate = Y.encodeStateAsUpdate(yDoc);\n\n  // Send the update to Liveblocks\n  await liveblocks.sendYjsBinaryUpdate(roomId, yUpdate);\n}\n```\n\n----------------------------------------\n\nTITLE: Updated Import Pattern for Liveblocks React Hooks\nDESCRIPTION: Comparison of the old and new way to import hooks from Liveblocks React. The new approach allows direct imports from the package instead of from a configuration file.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-lexical/CHANGELOG.md#2025-04-11_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\n// ❌ Before: get hooks exported from your Liveblocks config\nimport { RoomProvider, useRoom, ... } from \"./liveblocks.config\";\n\n// ✅ After: import hooks directly\nimport { RoomProvider, useRoom, ... } from \"@liveblocks/react\";\nimport { RoomProvider, useRoom, ... } from \"@liveblocks/react/suspense\";\n```\n\n----------------------------------------\n\nTITLE: Setting up Collaborative Quill Text Editor with Liveblocks and Yjs\nDESCRIPTION: Configures a collaborative Quill text editor using Liveblocks and Yjs. It sets up the Liveblocks client, enters a multiplayer room, initializes Yjs document and provider, and configures the Quill editor with cursor tracking and toolbar options.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-quill-javascript.mdx#2025-04-11_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\nimport { getYjsProviderForRoom } from \"@liveblocks/yjs\";\nimport * as Y from \"yjs\";\nimport Quill from \"quill\";\nimport { QuillBinding } from \"y-quill\";\nimport QuillCursors from \"quill-cursors\";\n\n// Set up Liveblocks client\nconst client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n\n// Enter a multiplayer room\nconst { room, leave } = client.enterRoom(\"my-room\");\n\n// Set up Yjs document, shared text, and Liveblocks Yjs provider\nconst yProvider = getYjsProviderForRoom(room);\nconst yDoc = yProvider.getYDoc();\nconst yText = yDoc.getText(\"quill\");\n\n// Attach cursors plugin\nQuill.register(\"modules/cursors\", QuillCursors);\n\n// Set up Quill editor and modules\nconst parent = document.querySelector(\"#editor\");\nconst quill = new Quill(parent, {\n  placeholder: \"Start collaborating…\",\n  theme: \"snow\",\n  modules: {\n    cursors: true,\n    toolbar: [\n      [{ header: [1, 2, false] }],\n      [\"bold\", \"italic\", \"underline\"],\n      [\"code-block\"],\n    ],\n    history: {\n      // Local undo shouldn't undo changes made by other users\n      userOnly: true,\n    },\n  },\n});\n\n// Attach Yjs to Quill\nconst binding = new QuillBinding(yText, quill, provider.awareness);\n```\n\n----------------------------------------\n\nTITLE: Integrating Toolbar into Lexical Editor Component\nDESCRIPTION: This snippet shows how to import and integrate the Toolbar component into the main Editor component, placing it in the editor header.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-lexical-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_10\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Toolbar } from \"./Toolbar\";\n// ...\n\nexport default function Editor() {\n  // ...\n\n  return (\n    <div className={styles.container}>\n      <LexicalComposer initialConfig={initialConfig}>\n        <div className={styles.editorHeader}>\n          <Toolbar />\n        </div>\n        <div className={styles.editorContainer}>{/* ... */}</div>\n      </LexicalComposer>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Loading State with useIsEditorReady in TipTap\nDESCRIPTION: Demonstrates a complete example of using the useIsEditorReady hook to display a loading indicator while the editor content is being loaded.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_53\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useLiveblocksExtension } from \"@liveblocks/react-tiptap\";\n// +++\nimport { useIsEditorReady, useEditor, EditorContent } from \"@tiptap/react\";\n// +++\n\nfunction TextEditor() {\n  const liveblocks = useLiveblocksExtension();\n  // +++\n  const ready = useIsEditorReady();\n  // +++\n\n  const editor = useEditor({\n    extensions: [\n      liveblocks,\n      // ...\n    ],\n  });\n\n  return (\n    <div>\n      // +++\n      {!ready ? <div>Loading...</div> : <EditorContent editor={editor} />}\n      // +++\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing User Presence with useOthers Hook\nDESCRIPTION: Code that displays the number of other users currently in the room using the useOthers hook from Liveblocks, providing a real-time indicator of collaborators.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-react-and-liveblocks.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n  ClientSideSuspense,\n  useOthers,\n} from \"@liveblocks/react/suspense\";\n\nfunction WhoIsHere() {\n  const userCount = useOthers((others) => others.length);\n\n  return (\n    <div className=\"who_is_here\">There are {userCount} other users online</div>\n  );\n}\n\nfunction TodoList() {\n  return (\n    <div className=\"container\">\n      <WhoIsHere />\n    </div>\n  );\n}\n\n/* Page */\n```\n\n----------------------------------------\n\nTITLE: Customizing InboxNotification Rendering for Different Notification Types in React\nDESCRIPTION: This code snippet shows how to customize the rendering of InboxNotification components based on different notification kinds, specifically handling a custom $fileUploaded notification type.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/notifications/default-components.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { InboxNotification } from \"@liveblocks/react-ui\";\nimport { useInboxNotifications } from \"../liveblocks.config\";\n\nfunction Component() {\n  const { inboxNotifications } = useInboxNotifications();\n\n  return (\n    <>\n      {inboxNotifications.map((inboxNotification) => (\n        <InboxNotification\n          key={inboxNotification.id}\n          inboxNotification={inboxNotification}\n          kinds={{\n            $fileUploaded: (props) => (\n              <InboxNotification.Custom {...props} title=\"New file\" aside=\"📁\">\n                A new file has been uploaded\n              </InboxNotification.Custom>\n            ),\n          }}\n        />\n      ))}\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Room Permissions with Liveblocks Node SDK\nDESCRIPTION: Create rooms with specific access levels for different users and groups. This example demonstrates setting default read-only access while giving write permissions to specific users and groups.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/sveltekit.mdx#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nconst room = await liveblocks.createRoom(\"my-room-id\", {\n  defaultAccesses: [\"room:read\", \"room:presence:write\"],\n  groupsAccesses: {\n    \"my-group-id\": [\"room:write\"],\n  },\n  usersAccesses: {\n    \"my-user-id\": [\"room:write\"],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring storageMapping in Liveblocks middleware with Zustand\nDESCRIPTION: This snippet illustrates how to use the storageMapping option in the liveblocks middleware. It demonstrates synchronizing a part of the Zustand state (scientist object in this case) with Liveblocks room storage.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-zustand.mdx#2025-04-11_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nconst useStore = create(\n  liveblocks(\n    (set) => ({\n      scientist: { name: \"\" },\n    }),\n    {\n      client,\n      storageMapping: { scientist: true },\n    }\n  )\n);\n```\n\n----------------------------------------\n\nTITLE: Adding Live Cursors to Quill Editor\nDESCRIPTION: Enhances the Quill editor with live cursors by registering the QuillCursors module and connecting it with Liveblocks user information to display personalized cursors.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-quill-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useSelf } from \"../liveblocks.config.ts\";\n// ...\n\nQuill.register(\"modules/cursors\", QuillCursors);\n\n// ...\n\nfunction QuillEditor({ yText, provider }: EditorProps) {\n  // Add user info to cursors from Liveblocks authentication endpoint\n  const userInfo = useSelf((me) => me.info);\n  useEffect(() => {\n    const { name, color } = userInfo;\n    provider.awareness.setLocalStateField(\"user\", {\n      name,\n      color,\n    });\n  }, [userInfo]);\n\n  // ...\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.editorContainer}>\n        <ReactQuill\n          className={styles.editor}\n          placeholder=\"Start typing here…\"\n          ref={reactQuillRef}\n          theme=\"snow\"\n          modules={{\n            cursors: true,\n            toolbar: false,\n            history: {\n              // Local undo shouldn't undo changes from remote users\n              userOnly: true,\n            },\n          }}\n        />\n      </div>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Using authEndpoint as a Callback with Custom Headers\nDESCRIPTION: Advanced LiveblocksProvider setup using a callback function to pass custom headers and data to the authentication endpoint.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/remix.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n<LiveblocksProvider\n  authEndpoint={async (room) => {\n    // Passing custom headers and body to your endpoint\n    const headers = {\n      // Custom headers\n      // ...\n\n      \"Content-Type\": \"application/json\",\n    };\n\n    const body = JSON.stringify({\n      // Custom body\n      // ...\n\n      room,\n    });\n\n    const response = await fetch(\"/api/liveblocks-auth\", {\n      method: \"POST\",\n      headers,\n      body,\n    });\n\n    return await response.json();\n  }}\n/>\n```\n\n----------------------------------------\n\nTITLE: Using getYjsProviderForRoom function\nDESCRIPTION: This snippet demonstrates the usage of the getYjsProviderForRoom function to create a LiveblocksYjsProvider for a room. It shows how to pass options and retrieve the Y.Doc from the provider.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-yjs.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { getYjsProviderForRoom } from \"@liveblocks/yjs\";\n\nconst yProvider = getYjsProviderForRoom(room, {\n  // Options\n  // ...\n});\n\nconst yDoc = yProvider.getYDoc();\n```\n\n----------------------------------------\n\nTITLE: Creating Liveblocks Room Component in Next.js\nDESCRIPTION: React component that sets up a Liveblocks room with LiveblocksProvider, RoomProvider, and ClientSideSuspense for Next.js app router.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-blocknote.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { ReactNode } from \"react\";\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n  ClientSideSuspense,\n} from \"@liveblocks/react/suspense\";\n\nexport function Room({ children }: { children: ReactNode }) {\n  return (\n    <LiveblocksProvider publicApiKey={\"{{PUBLIC_KEY}}\"}>\n      <RoomProvider id=\"my-room\">\n        <ClientSideSuspense fallback={<div>Loading…</div>}>\n          {children}\n        </ClientSideSuspense>\n      </RoomProvider>\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Client Package\nDESCRIPTION: Command to install the @liveblocks/client package using npm. It's noted that all packages should use the same version.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/vuejs.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client\n```\n\n----------------------------------------\n\nTITLE: Creating a Liveblocks Room component in Next.js\nDESCRIPTION: Implementation of a Room component that sets up the LiveblocksProvider and RoomProvider to connect to a Liveblocks room. Uses the client-side suspense API for loading states.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-codemirror-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { ReactNode } from \"react\";\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n  ClientSideSuspense,\n} from \"@liveblocks/react/suspense\";\n\nexport function Room({ children }: { children: ReactNode }) {\n  return (\n    <LiveblocksProvider authEndpoint=\"/api/liveblocks-auth\">\n      <RoomProvider id=\"my-room\">\n        <ClientSideSuspense fallback={<div>Loading…</div>}>\n          {children}\n        </ClientSideSuspense>\n      </RoomProvider>\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Editor Configuration with Live Cursors and User Info\nDESCRIPTION: Configuring a Slate editor with Yjs, live cursors, and integrating user information from Liveblocks\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-slate-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\nimport { withCursors, withYjs, YjsEditor } from \"@slate-yjs/core\";\nimport { useSelf } from \"../liveblocks.config\";\nimport { Cursors } from \"./Cursors\";\n\nexport default function SlateEditor() {\n  const userInfo = useSelf((self) => self.info);\n\n  const editor = useMemo(() => {\n    const e = withReact(\n      withCursors(\n        withYjs(createEditor(), sharedType),\n        provider.awareness as any,\n        {\n          data: userInfo,\n        }\n      )\n    );\n\n    return e;\n  }, [sharedType, provider.awareness, userInfo]);\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.editorContainer}>\n        <Slate editor={editor} initialValue={[emptyNode]}>\n          <Cursors>\n            <Editable\n              className={styles.editor}\n              placeholder=\"Start typing here…\"\n            />\n          </Cursors>\n        </Slate>\n      </div>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks and Tiptap Dependencies\nDESCRIPTION: Command to install all necessary packages for Liveblocks and Tiptap integration. Ensures all Liveblocks packages use the same version.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-tiptap.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/react @liveblocks/react-ui @liveblocks/react-tiptap @tiptap/react @tiptap/starter-kit\n```\n\n----------------------------------------\n\nTITLE: Synchronizing Yjs Data to Supabase Database\nDESCRIPTION: This code snippet demonstrates how to synchronize Yjs data to a Supabase Postgres database after receiving a `ydocUpdated` webhook event from Liveblocks.  It uses the Supabase client to insert the `roomId` and `yDocData` into the `documents` table.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-yjs-document-data-to-a-supabase-postgres-database.mdx#2025-04-11_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\nimport { createClient } from \"@supabase/supabase-js\";\n\n// Add your signing key from a project's webhooks dashboard\nconst WEBHOOK_SECRET = \"YOUR_SIGNING_SECRET\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\n// Add your secret key from a project's API keys dashboard\nconst API_SECRET = \"{{SECRET_KEY}}\";\n\n// Create a Supabase client\nconst supabase = createClient(\n  \"YOUR_SUPABASE_PROJECT_URL\",\n  \"YOUR_SUPABASE_PUBLIC_ANON_KEY\"\n);\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Verify if this is a real webhook request\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  // When Yjs document data has been updated\n  if (event.type === \"ydocUpdated\") {\n    const { roomId } = event.data;\n\n    // Get Yjs data from Liveblocks REST API\n    const url = `https://api.liveblocks.io/v2/rooms/${roomId}/ydoc`;\n    const response = await fetch(url, {\n      headers: { Authorization: `Bearer ${API_SECRET}` },\n    });\n\n    if (!response.ok) {\n      return new Response(\"Problem accessing Liveblocks REST APIs\", {\n        status: 500,\n      });\n    }\n\n    // Your JSON Yjs document data as a string\n    const yDocData = await response.text();\n\n    // Update database\n    const { data, error } = await supabase\n      .from(\"documents\")\n      .insert({ roomid: roomId, ydocdata: yDocData })\n      .select();\n\n    if (error) {\n      return new Response(\"Problem inserting data into database\", {\n        status: 500,\n      });\n    }\n  }\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Custom Thread Component with Comment Primitives\nDESCRIPTION: Demonstrates how to create a fully custom Thread component using Liveblocks Comment primitives. This example renders each comment's body individually.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_36\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Comment } from \"@liveblocks/react-ui/primitives\";\n\n<AnchoredThreads\n  editor={editor}\n  threads={threads}\n  style={{ width: \"350px\" }}\n  className=\"my-anchored-thread\"\n  components={{\n    Thread: (props) => (\n      // +++\n      <div>\n        {props.thread.comments.map((comment) => (\n          <Comment.Body\n            key={comment.id}\n            body={comment.body}\n            components={/* ... */}\n          />\n        ))}\n      </div>\n      // +++\n    ),\n  }}\n/>;\n```\n\n----------------------------------------\n\nTITLE: Adding Undo/Redo Functionality in React Component\nDESCRIPTION: This snippet adds undo and redo buttons to the toolbar, utilizing Liveblocks' history functions for multiplayer undo/redo functionality.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-online-whiteboard-with-react-redux-and-liveblocks.mdx#2025-04-11_snippet_11\n\nLANGUAGE: jsx\nCODE:\n```\nimport { useEffect } from \"react\";\nimport \"./App.css\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { actions } from \"@liveblocks/redux\";\n\nimport {\n  insertRectangle,\n  onShapePointerDown,\n  deleteShape,\n  onCanvasPointerUp,\n  onCanvasPointerMove,\n  client,\n} from \"./store\";\n\nconst roomId = \"redux-whiteboard\";\n\nexport default function App() {\n  const shapes = useSelector((state) => state.shapes);\n  const isLoading = useSelector((state) => state.liveblocks.isStorageLoading);\n  const selectedShape = useSelector((state) => state.selectedShape);\n  const others = useSelector((state) => state.liveblocks.others);\n\n  const dispatch = useDispatch();\n\n  /* ... */\n\n  return (\n    <>\n      <div\n        className=\"canvas\"\n        onPointerMove={(e) => {\n          /* ... */\n        }}\n        onPointerUp={() => {\n          /* ... */\n        }}\n      >\n        {/* ... */}\n      </div>\n      <div className=\"toolbar\">\n        <button onClick={() => dispatch(insertRectangle())}>Rectangle</button>\n        <button\n          onClick={() => dispatch(deleteShape())}\n          disabled={selectedShape == null}\n        >\n          Delete\n        </button>\n        <button onClick={() => client.getRoom(roomId).history.undo()}>\n          Undo\n        </button>\n        <button onClick={() => client.getRoom(roomId).history.redo()}>\n          Redo\n        </button>\n      </div>\n    </>\n  );\n}\n\n/* Rectangle */\n```\n\n----------------------------------------\n\nTITLE: Displaying Online Users with Liveblocks Presence\nDESCRIPTION: JavaScript code that subscribes to presence updates for other users in the room. This uses room.subscribe(\"others\") to track how many other users are currently online and updates the UI to display this count.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-javascript-and-liveblocks.mdx#2025-04-11_snippet_5\n\nLANGUAGE: jsx\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\n\nconst client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n\nfunction run() {\n  const { room, leave } = client.enterRoom(\"javascript-todo-app\", {\n    initialPresence: { isTyping: false },\n  });\n\n  const whoIsHere = document.getElementById(\"who_is_here\");\n\n  room.subscribe(\"others\", (others) => {\n    whoIsHere.innerHTML = `There are ${others.count} other users online`;\n  });\n}\n\nrun();\n```\n\n----------------------------------------\n\nTITLE: Setting Up Liveblocks Client with Room Provider in React\nDESCRIPTION: React component setup for Liveblocks client with LiveblocksProvider and RoomProvider to establish connection to a collaborative room.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-lexical.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n} from \"@liveblocks/react/suspense\";\nimport { Editor } from \"./Editor\";\n\nexport default function App() {\n  return (\n    <LiveblocksProvider publicApiKey={\"{{PUBLIC_KEY}}\"}>      <RoomProvider id=\"my-room\">\n        {/* ... */}\n      </RoomProvider>\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Integrating Live Avatars into Lexical Editor Component\nDESCRIPTION: This code snippet shows how to import and add the Avatars component to the Editor, displaying it alongside the Toolbar in the editor header.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-lexical-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_15\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Avatars } from \"./Avatars\";\n// ...\n\nexport default function Editor() {\n  // ...\n\n  return (\n    <div className={styles.container}>\n      <LexicalComposer initialConfig={initialConfig}>\n        <div className={styles.editorHeader}>\n          <Toolbar />\n          <Avatars />\n        </div>\n        <div className={styles.editorContainer}>{/* ... */}</div>\n      </LexicalComposer>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Joining Liveblocks Room with ClientSideSuspense\nDESCRIPTION: Enhanced React component that adds ClientSideSuspense to handle loading states while connecting to a Liveblocks room, creating a better user experience.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-tiptap.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n  ClientSideSuspense,\n} from \"@liveblocks/react/suspense\";\nimport { Editor } from \"./Editor\";\n\nexport default function App() {\n  return (\n    <LiveblocksProvider publicApiKey={\"{{PUBLIC_KEY}}\"}>      <RoomProvider id=\"my-room\">\n        <ClientSideSuspense fallback={<div>Loading…</div>}>\n          <Editor />\n        </ClientSideSuspense>\n      </RoomProvider>\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing useLiveblocksExtension for Collaborative Editing in TipTap\nDESCRIPTION: Shows how to integrate the useLiveblocksExtension hook to add collaborative editing capabilities to a TipTap editor. The extension must be included in the editor's extensions array.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_43\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useLiveblocksExtension } from \"@liveblocks/react-tiptap\";\nimport { useEditor, EditorContent } from \"@tiptap/react\";\n\nfunction TextEditor() {\n  // +++\n  const liveblocks = useLiveblocksExtension();\n  // +++\n\n  const editor = useEditor({\n    extensions: [\n      // +++\n      liveblocks,\n      // +++\n      // ...\n    ],\n  });\n\n  return (\n    <div>\n      <EditorContent editor={editor} />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Composer Component for Thread Replies\nDESCRIPTION: Example showing how to use the Composer component to add replies to an existing thread.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Composer } from \"@liveblocks/react-ui\";\n\n// Adds a new comment to a thread\nfunction Component({ threadId }) {\n  return <Composer threadId={threadId} />;\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Live Cursors with Liveblocks and Yjs in React\nDESCRIPTION: This TypeScript code snippet demonstrates how to add live cursors to a code editor using Liveblocks and Yjs. It fetches user information using the `useSelf` hook, attaches it to the Yjs awareness, and dynamically inserts CSS styles to display user names above their cursors. The component takes a `yProvider` prop of type `TypedLiveblocksProvider`.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-monaco-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useEffect, useMemo, useState } from \"react\";\nimport {\n  AwarenessList,\n  TypedLiveblocksProvider,\n  UserAwareness,\n  useSelf,\n} from \"@/liveblocks.config\";\n\ntype Props = {\n  yProvider: TypedLiveblocksProvider;\n};\n\nexport function Cursors({ yProvider }: Props) {\n  // Get user info from Liveblocks authentication endpoint\n  const userInfo = useSelf((me) => me.info);\n\n  const [awarenessUsers, setAwarenessUsers] = useState<AwarenessList>([]);\n\n  useEffect(() => {\n    // Add user info to Yjs awareness\n    const localUser: UserAwareness[\"user\"] = userInfo;\n    yProvider.awareness.setLocalStateField(\"user\", localUser);\n\n    // On changes, update `awarenessUsers`\n    function setUsers() {\n      setAwarenessUsers([...yProvider.awareness.getStates()] as AwarenessList);\n    }\n    yProvider.awareness.on(\"change\", setUsers);\n    setUsers();\n\n    return () => {\n      yProvider.awareness.off(\"change\", setUsers);\n    };\n  }, [yProvider]);\n\n  // Insert awareness info into cursors with styles\n  const styleSheet = useMemo(() => {\n    let cursorStyles = \"\";\n\n    for (const [clientId, client] of awarenessUsers) {\n      if (client?.user) {\n        cursorStyles += `\n          .yRemoteSelection-${clientId},\n          .yRemoteSelectionHead-${clientId}  {\n            --user-color: ${client.user.color};\n          }\n\n          .yRemoteSelectionHead-${clientId}::after {\n            content: \\\"${client.user.name}\\\";\n          }\n        `;\n      }\n    }\n\n    return { __html: cursorStyles };\n  }, [awarenessUsers]);\n\n  return <style dangerouslySetInnerHTML={styleSheet} />;\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Required Packages for Collaborative Code Editor\nDESCRIPTION: Command to install Monaco editor, Yjs, and Liveblocks packages needed for building a collaborative code editor.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-monaco-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/react @liveblocks/yjs yjs @monaco-editor/react y-monaco y-protocols\n```\n\n----------------------------------------\n\nTITLE: Rendering Collaborative Threads and Comment Composer\nDESCRIPTION: React component that adds commenting functionality to the Tiptap editor using Liveblocks. Implements both anchored threads for desktop and floating threads for mobile views.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-tiptap.mdx#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useThreads } from \"@liveblocks/react/suspense\";\nimport {\n  AnchoredThreads,\n  FloatingComposer,\n  FloatingThreads,\n} from \"@liveblocks/react-tiptap\";\nimport { Editor } from \"@tiptap/react\";\n\nexport function Threads({ editor }: { editor: Editor | null }) {\n  const { threads } = useThreads({ query: { resolved: false } });\n\n  return (\n    <>\n      <div className=\"anchored-threads\">\n        <AnchoredThreads editor={editor} threads={threads} />\n      </div>\n      <FloatingThreads\n        editor={editor}\n        threads={threads}\n        className=\"floating-threads\"\n      />\n      <FloatingComposer editor={editor} className=\"floating-composer\" />\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Listening for Events with useEventListener in React\nDESCRIPTION: This snippet demonstrates how to use the useEventListener hook to listen for incoming events. It checks if the received event is a toast notification and calls a function to display the toast if it is.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/broadcasting-events/guide.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n// Listen for incoming events\nuseEventListener(({ event }) => {\n  if (event.type === \"TOAST\") {\n    toast(event.message);\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Creating a Text Formatting Toolbar in React with Lexical\nDESCRIPTION: This snippet defines a Toolbar component that provides buttons for basic text formatting (bold, italic, underline) using Lexical's formatting commands.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-lexical-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useLexicalComposerContext } from \"@lexical/react/LexicalComposerContext\";\nimport { FORMAT_TEXT_COMMAND } from \"lexical\";\nimport styles from \"./Toolbar.module.css\";\n\nexport function Toolbar() {\n  const [editor] = useLexicalComposerContext();\n\n  return (\n    <div className={styles.toolbar}>\n      <button\n        className={styles.buttonBold}\n        onClick={() => {\n          editor.dispatchCommand(FORMAT_TEXT_COMMAND, \"bold\");\n        }}\n        aria-label=\"Format bold\"\n      >\n        B\n      </button>\n      <button\n        className={styles.buttonItalic}\n        onClick={() => {\n          editor.dispatchCommand(FORMAT_TEXT_COMMAND, \"italic\");\n        }}\n        aria-label=\"Format italic\"\n      >\n        i\n      </button>\n      <button\n        className={styles.buttonUnderline}\n        onClick={() => {\n          editor.dispatchCommand(FORMAT_TEXT_COMMAND, \"underline\");\n        }}\n        aria-label=\"Format underline\"\n      >\n        u\n      </button>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving ProseMirror Document State with Liveblocks\nDESCRIPTION: Shows how to get the text content of a ProseMirror document using withProsemirrorDocument and api.getText from @liveblocks/node-prosemirror.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/getting-prosemirror-state-on-the-server.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\nimport { withProsemirrorDocument } from \"@liveblocks/node-prosemirror\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nconst textContent = await withProsemirrorDocument(\n  { roomId: \"your-room-id\", client: liveblocks, field: \"prosemirror\" },\n  async (api) => {\n    return api.getText();\n  }\n);\n\n// \"My content\"\nconsole.log(textContent);\n```\n\n----------------------------------------\n\nTITLE: Implementing resolveMentionSuggestions for User Mentions\nDESCRIPTION: Shows how to implement resolveMentionSuggestions in LiveblocksProvider to enable user mention suggestions in the comment composer. This function receives search text and returns matching user IDs.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-add-users-to-liveblocks-comments.mdx#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\n<LiveblocksProvider\n  resolveUsers={async ({ userIds }) => {\n    // ...\n  }}\n  resolveMentionSuggestions={async ({ text, roomId }) => {\n    // The text the user is searching for, e.g. \"mar\"\n    console.log(text);\n\n    // Return a list of user IDs that match the query\n    return [\"marc@example.com\", \"marissa@example.com\"];\n  }}\n\n  // ...\n/>;\n```\n\n----------------------------------------\n\nTITLE: Configuring Zustand Store with Liveblocks Presence Mapping\nDESCRIPTION: This snippet shows how to set up a Zustand store with Liveblocks integration, including presence mapping for cursor position. The presenceMapping configuration specifies which part of the state is shared with other users in real-time.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-presence-with-zustand.mdx#2025-04-11_snippet_1\n\nLANGUAGE: ts\nCODE:\n```\nimport create from \"zustand\";\nimport { createClient } from \"@liveblocks/client\";\nimport { liveblocks } from \"@liveblocks/zustand\";\nimport type { WithLiveblocks } from \"@liveblocks/zustand\";\n\ntype Cursor = { x: number; y: number };\n\ntype State = {\n  cursor: Cursor;\n  setCursor: (cursor: Cursor) => void;\n};\n\nconst client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n\nconst useStore = create<WithLiveblocks<State>>()(\n  liveblocks(\n    (set) => ({\n      cursor: { x: 0, y: 0 },\n      setCursor: (cursor) => set({ cursor }),\n    }),\n    {\n      client,\n      presenceMapping: {\n        cursor: true,\n      },\n    }\n  )\n);\n\nexport default useStore;\n```\n\n----------------------------------------\n\nTITLE: Debugging RoomInfo Type Issues in TypeScript\nDESCRIPTION: This snippet shows a technique for debugging complex RoomInfo type issues by attempting to assign the custom type to the BaseRoomInfo type, which will reveal specific type incompatibilities.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/errors/RoomInfo.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { BaseRoomInfo } from \"@liveblocks/client\";\n\ndeclare global {\n  interface Liveblocks {\n    RoomInfo: MyRoomInfo;\n  }\n}\n\n// Quick debugging snippet to find root cause\nconst xxx: BaseRoomInfo = {} as MyRoomInfo;\n//    ^?\n//    The error will appear here\n```\n\n----------------------------------------\n\nTITLE: Comparing Old and New Client APIs for Entering/Leaving Rooms in Liveblocks\nDESCRIPTION: Shows the transition from deprecated room management APIs to the new recommended pattern introduced in v1.5.0. The new API returns both the room object and a leave function, supporting multiple connections to the same room from different parts of an application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-client/CHANGELOG.md#2025-04-11_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\n// Old APIs we'll no longer be recommending (but that will remain working)\nconst room = client.enter(\"my-room\", options);\nclient.getRoom(\"my-room\");\nclient.leave(\"my-room\");\n```\n\nLANGUAGE: typescript\nCODE:\n```\n// New API we'll be recommending instead\nconst { room, leave } = client.enterRoom(\"my-room\", options);\nleave();\n```\n\n----------------------------------------\n\nTITLE: Configuring Collaborative Monaco Editor\nDESCRIPTION: JavaScript implementation for setting up a collaborative Monaco editor with Liveblocks and Yjs integration, including client initialization, room creation, and Monaco-Yjs binding.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-monaco-javascript.mdx#2025-04-11_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\nimport { getYjsProviderForRoom } from \"@liveblocks/yjs\";\nimport * as Y from \"yjs\";\nimport * as monaco from \"monaco-editor\";\nimport { MonacoBinding } from \"y-monaco\";\n\n// Set up Liveblocks client\nconst client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n\n// Enter a multiplayer room\nconst { room, leave } = client.enterRoom(\"my-room\");\n\n// Set up Yjs document, shared text, and Liveblocks Yjs provider\nconst yProvider = getYjsProviderForRoom(room);\nconst yDoc = yProvider.getYDoc();\nconst yText = yDoc.getText(\"monaco\");\n\n// Set up the Monaco editor\nconst parent = document.querySelector(\"#editor\");\nconst editor = monaco.editor.create(parent, {\n  value: \"\",\n  language: \"javascript\"\n})\n\n// Attach Yjs to Monaco\nconst monacoBinding = new MonacoBinding(\n  yText,\n  editorRef.getModel(),\n  new Set([editor]),\n  yProvider.awareness\n);\n```\n\n----------------------------------------\n\nTITLE: Using useThreads Hook with Pagination Support\nDESCRIPTION: This code snippet illustrates using the `useThreads` hook with pagination support, enabling applications to load thread data incrementally for better performance and user experience.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-client/CHANGELOG.md#2025-04-11_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nconst {\n    threads,\n    isLoading,\n    error,\n\n    // ✨ New in Liveblocks 2.9\n    fetchMore,\n    isFetchingMore,\n    hasFetchedAll,\n    fetchMoreError,\n  } = useThreads({ query });\n```\n\n----------------------------------------\n\nTITLE: Mapping through Inbox Notifications\nDESCRIPTION: Illustrates how to map through notifications fetched with `useInboxNotifications` and display each using the `InboxNotification` component. This is useful for displaying all notifications related to a room.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_30\n\nLANGUAGE: tsx\nCODE:\n```\nimport { InboxNotification } from \"@liveblocks/react-ui\";\nimport { useInboxNotifications } from \"@liveblocks/react/suspense\";\n\nfunction Component() {\n  const { inboxNotifications } = useInboxNotifications();\n\n  return (\n    <>\n      {inboxNotifications.map((inboxNotification) => (\n        <InboxNotification\n          key={inboxNotification.id}\n          inboxNotification={inboxNotification}\n        />\n      ))}\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Fetching User Information with useUser Hook in React\nDESCRIPTION: Illustrates how to use the useUser hook to fetch a user's information from their ID. This is useful for building custom components and retrieving user details like name, avatar, and custom data.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/notifications/hooks.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useUser } from \"../liveblocks.config\";\n\nfunction Component() {\n  const { user } = useUser(\"olivier@example.com\");\n\n  // { name: \"Olivier\", avatar: \"https://...\", color: \"red\" }\n  console.log(user);\n\n  return <img src={user.avatar} alt={user.name} />;\n}\n```\n\n----------------------------------------\n\nTITLE: Hooks Usage in @liveblocks/react Package\nDESCRIPTION: Example usage of various hooks including useInboxNotificationThread and useThreads for notification and thread management.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_19\n\nLANGUAGE: typescript\nCODE:\n```\nuseInboxNotificationThread\nuseThreads({ startsWith: metadata })\n```\n\n----------------------------------------\n\nTITLE: Setting Up Liveblocks Provider and Room in React\nDESCRIPTION: Implementation of the main page component that sets up Liveblocks providers and room configuration, allowing users to join the same collaborative space.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-react-and-liveblocks.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { ReactNode } from \"react\";\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n  ClientSideSuspense,\n} from \"@liveblocks/react/suspense\";\n\nexport default function Page() {\n  return (\n    <LiveblocksProvider publicApiKey={\"{{SECRET_KEY}}\"}>\n      <RoomProvider id=\"my-room\">\n        <ClientSideSuspense fallback={<div>Loading…</div>}>\n          <ToDoList />\n        </ClientSideSuspense>\n      </RoomProvider>\n    </LiveblocksProvider>\n  );\n}\n\nfunction TodoList() {\n  return (\n    <div>\n      {/* We're starting to implement the to-do list in the next section */}\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Up Liveblocks Room with Next.js\nDESCRIPTION: Creates a Room component that sets up the Liveblocks provider, room connection, and handles loading state with ClientSideSuspense.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-lexical.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { ReactNode } from \"react\";\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n  ClientSideSuspense,\n} from \"@liveblocks/react/suspense\";\n\nexport function Room({ children }: { children: ReactNode }) {\n  return (\n    <LiveblocksProvider publicApiKey={\"{{PUBLIC_KEY}}\"}>\n      <RoomProvider id=\"my-room\">\n        <ClientSideSuspense fallback={<div>Loading…</div>}>\n          {children}\n        </ClientSideSuspense>\n      </RoomProvider>\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Zustand Middleware with TypeScript\nDESCRIPTION: Demonstrates how to integrate Liveblocks with Zustand using TypeScript. This example shows how to define the state type and use it with the Liveblocks middleware, including presence and storage mapping.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_34\n\nLANGUAGE: typescript\nCODE:\n```\nimport create from \"zustand\";\nimport { createClient } from \"@liveblocks/client\";\nimport { middleware } from \"@liveblocks/zustand\";\n\nconst client = createClient({ /*...*/ });\n\ntype State = {\n  draft: string;\n  isTyping: boolean;\n  todos: Todo[];\n  setDraft: (draft: string) => void;\n  addTodo: () => void;\n  deleteTodo: (index: number) => void;\n};\n\ncreate(\n  middleware<State>(/* ... */, {\n    client,\n    presenceMapping: { isTyping: true },\n    storageMapping: { todos: true }\n  })\n);\n```\n\n----------------------------------------\n\nTITLE: Implementing Document Version History with Liveblocks React Components\nDESCRIPTION: Example implementation of a document history interface using Liveblocks components. Shows how to use useHistoryVersions hook with HistoryVersionSummaryList and HistoryVersionPreview components to display and manage document versions.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/text-editor/tiptap.mdx#2025-04-11_snippet_11\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  useHistoryVersions,\n  HistoryVersionSummaryList,\n} from \"@liveblocks/react\";\nimport { HistoryVersionPreview } from \"@liveblocks/react-tiptap\";\n\nfunction DocumentHistory() {\n  const [selectedVersionId, setSelectedVersionId] = useState<string>();\n  const { versions, isLoading } = useHistoryVersions();\n  const selectedVersion = useMemo(\n    () => versions?.find((version) => version.id === selectedVersionId),\n    [selectedVersionId, versions]\n  );\n\n  if (isLoading) {\n    return <div>Loading version history...</div>;\n  }\n\n  return (\n    <>\n      <div>\n        {selectedVersion ? (\n          <HistoryVersionPreview\n            version={selectedVersion}\n            className=\"w-full h-full\"\n            onVersionRestore={onVersionRestore}\n          />\n        ) : (\n          <div>No version selected</div>\n        )}\n      </div>\n\n      <div>\n        <HistoryVersionSummaryList>\n          {versions?.map((version) => (\n            <HistoryVersionSummary\n              onClick={() => {\n                setSelectedVersionId(version.id);\n              }}\n              key={version.id}\n              version={version}\n              selected={version.id === selectedVersionId}\n            />\n          ))}        \n        </HistoryVersionSummaryList>\n      </div>\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Sending Notification Emails Using Resend in React\nDESCRIPTION: This snippet illustrates how to implement a webhook handler in a React application that sends notification emails using the Resend service. It verifies incoming requests, constructs email data based on events, and sends emails to users after processing notification data from the Liveblocks API.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-send-email-notifications-for-unread-text-editor-mentions.mdx#2025-04-11_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  Liveblocks,\n  WebhookHandler,\n  isTextMentionNotificationEvent,\n} from \"@liveblocks/node\";\nimport { prepareTextMentionNotificationEmailAsReact } from \"@liveblocks/emails\";\n// +++\nimport { Resend } from \"resend\";\n// +++\n\n// +++\n// Create Resend client (add your API key)\nconst resend = new Resend(\"re_123456789\");\n// +++\n\n// Add your webhook secret key from a project's webhooks dashboard\nconst WEBHOOK_SECRET = \"YOUR_WEBHOOK_SECRET_KEY\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\n// Add your secret key from a project's API keys dashboard\nconst API_SECRET = \"{{SECRET_KEY}}\";\nconst liveblocks = new Liveblocks({ secret: API_SECRET });\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Verify if this is a real webhook request\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  // When an inbox notification has been created on the email channel\n  if (isTextMentionNotificationEvent(event) && event.data.channel === \"email\") {\n    // Check if user has access to room\n    if (!__hasRoomAccess__(event.userId, event.roomId)) {\n      return new Response(null, { status: 200 });\n    }\n\n    // The user to send the email to\n    const emailAddress = __getEmailAddressFromDB__(event.userId);\n\n    let emailData;\n\n    try {\n      emailData = await prepareTextMentionNotificationEmailAsReact(\n        liveblocks,\n        event,\n        {\n          resolveUsers: async ({ userIds }) => {\n            const usersData = await __getUsersFromDB__(userIds);\n\n            return usersData.map((userData) => ({\n              name: userData.name, // \"Chris\"\n              avatar: userData.avatar.src, // \"https://example.com/chris.jpg\"\n            }));\n          },\n          resolveRoomInfo: async ({ roomId }) => {\n            const roomData = await __getRoomFromDB__(roomId);\n\n            return {\n              name: roomData.name, // \"Untitled document\"\n              url: roomData.url, //`https://example.com/my-room-id`\n            };\n          },\n          components: {\n            Container: ({ children }) => (\n              <main style={{ margin: \"12px 0\" }}>{children}</main>\n            ),\n\n            // `user` is the optional data returned from `resolveUsers`\n            Mention: ({ element, user }) => (\n              <span style={{ color: \"red\" }}>@{user?.name ?? element.id}</span>\n            ),\n          },\n        }\n      );\n    } catch (err) {\n      console.log(err);\n      return new Response(\"Could not fetch text mention notification data\", {\n        status: 500,\n      });\n    }\n\n    // The text mention has already been read\n    if (!emailData) {\n      return new Response(null, { status: 200 });\n    }\n\n    const email = (\n      <div>\n        <div>\n          @{emailData.mention.author.id} at {emailData.mention.createdAt}\n        </div>\n        <div>{emailData.mention.reactContent}</div>\n      </div>\n    );\n\n    // +++\n    // Send email to the user's email address\n    try {\n      const data = await resend.emails.send({\n        from: \"My company <hello@my-company.com>\",\n        to: emailAddress,\n        subject: \"New text mention\",\n        react: email,\n      });\n    } catch (err) {\n      console.error(err);\n    }\n    // +++\n  }\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Integrating FloatingThreads with LexicalComposer in React\nDESCRIPTION: This snippet demonstrates how to use the FloatingThreads component within a LexicalComposer setup. It shows the basic structure for integrating Liveblocks components with a Lexical editor.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_24\n\nLANGUAGE: tsx\nCODE:\n```\n<LexicalComposer initialConfig={initialConfig}>\n  <LiveblocksPlugin>\n    <FloatingThreads threads={threads} />\n  </LiveblocksPlugin>\n</LexicalComposer>\n```\n\n----------------------------------------\n\nTITLE: Demonstrating New Recommended Room API Methods in Liveblocks Client\nDESCRIPTION: Shows the new recommended API for entering and leaving rooms using enterRoom() which returns both the room object and a leave function, enabling multiple connections to the same room.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-prosemirror/CHANGELOG.md#2025-04-11_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\n// New API we'll be recommending instead\nconst { room, leave } = client.enterRoom(\"my-room\", options);\nleave();\n```\n\n----------------------------------------\n\nTITLE: Using useThreads with Pagination\nDESCRIPTION: This snippet shows how to use the `useThreads` hook with pagination support, introduced in Liveblocks 2.9. It demonstrates accessing pagination-related properties such as `fetchMore`, `isFetchingMore`, `hasFetchedAll`, and `fetchMoreError`.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-zustand/CHANGELOG.md#2025-04-11_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\n\"const {\\n  threads,\\n  isLoading,\\n  error,\\n\\n  // ✨ New in Liveblocks 2.9\\n  fetchMore,\\n  isFetchingMore,\\n  hasFetchedAll,\\n  fetchMoreError,\\n} = useThreads({ query });\"\n```\n\n----------------------------------------\n\nTITLE: Creating Room with User Permissions\nDESCRIPTION: Creates a private room with specific user access permissions using the createRoom method.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst room = await liveblocks.createRoom(\"a32wQXid4A9\", {\n  // This is a private room\n  defaultAccesses: [],\n\n  // But Olivier can enter\n  usersAccesses: {\n    \"olivier@example.com\": [\"room:read\"],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring useLiveblocksExtension with Options\nDESCRIPTION: Demonstrates how to apply configuration options to the useLiveblocksExtension hook, such as setting initial content and specifying a field identifier.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_44\n\nLANGUAGE: tsx\nCODE:\n```\nconst liveblocks = useLiveblocksExtension({\n  // +++\n  initialContent: \"Hello world\",\n  field: \"editor-one\",\n  // +++\n\n  // Other options\n  // ...\n});\n```\n\n----------------------------------------\n\nTITLE: Importing Liveblocks Components in React\nDESCRIPTION: Shows the new way to import Liveblocks components directly from @liveblocks/react or @liveblocks/react/suspense, instead of from a local config file.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.0.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { RoomProvider, useRoom, useThreads } from \"@liveblocks/react/suspense\";\n// or\nimport { RoomProvider, useRoom, useThreads } from \"@liveblocks/react\";\n```\n\n----------------------------------------\n\nTITLE: Implementing Collaborative Quill Editor\nDESCRIPTION: Complete implementation of a collaborative text editor using Quill, Yjs, and Liveblocks, including cursor synchronization and real-time editing capabilities.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-quill-react.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport Quill from \"quill\";\nimport ReactQuill from \"react-quill\";\nimport QuillCursors from \"quill-cursors\";\nimport { QuillBinding } from \"y-quill\";\nimport * as Y from \"yjs\";\nimport { getYjsProviderForRoom } from \"@liveblocks/yjs\";\nimport { useRoom } from \"@/liveblocks.config\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\n\nQuill.register(\"modules/cursors\", QuillCursors);\n\n// Collaborative text editor with simple rich text, live cursors, and live avatars\nexport function CollaborativeEditor() {\n  const room = useRoom();\n  const yProvider = getYjsProviderForRoom(room);\n  const yDoc = yProvider.getYDoc();\n  const yText = yDoc.getText(\"quill\");\n\n  return <QuillEditor yText={yText} provider={provider} />;\n}\n\ntype EditorProps = {\n  yText: Y.Text;\n  provider: any;\n};\n\nfunction QuillEditor({ yText, provider }: EditorProps) {\n  const reactQuillRef = useRef<ReactQuill>(null);\n\n  // Set up Yjs and Quill\n  useEffect(() => {\n    let quill;\n    let binding: QuillBinding;\n\n    if (!reactQuillRef.current) {\n      return;\n    }\n\n    quill = reactQuillRef.current.getEditor();\n    binding = new QuillBinding(yText, quill, provider.awareness);\n    return () => {\n      binding?.destroy?.();\n    };\n  }, [yText, provider]);\n\n  return (\n    <ReactQuill\n      placeholder=\"Start typing here…\"\n      ref={reactQuillRef}\n      theme=\"snow\"\n      modules={{\n        cursors: true,\n        history: {\n          // Local undo shouldn't undo changes from remote users\n          userOnly: true,\n        },\n      }}\n    />\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Modifying Tiptap document state with transactions in TypeScript\nDESCRIPTION: This code shows how to modify a Tiptap document by using transactions through the api.update() method from @liveblocks/node-prosemirror. The example demonstrates inserting text into the document using a ProseMirror transaction.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/getting-tiptap-state-on-the-server.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\nimport { withProsemirrorDocument } from \"@liveblocks/node-prosemirror\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nawait withProsemirrorDocument(\n  { roomId: \"your-room-id\", client: liveblocks },\n  // +++\n  async (api) => {\n    await api.update((_, tr) => {\n      // Transaction example\n      return tr.insertText(\"Hello world\");\n    });\n  }\n  // +++\n);\n```\n\n----------------------------------------\n\nTITLE: Initializing Slate Editor with Yjs\nDESCRIPTION: Shows how to initialize a Slate editor document with Yjs integration. Uses slateNodesToInsertDelta for converting Slate document format to Yjs updates.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/modifying-yjs-document-data-with-the-rest-api.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport * as Y from \"yjs\";\nimport { Liveblocks } from \"@liveblocks/node\";\nimport { slateNodesToInsertDelta } from \"@slate-yjs/core\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\nconst roomId = \"my-room-name\";\n\nexport async function POST() {\n  // Create a Yjs document\n  const yDoc = new Y.Doc();\n\n  // The Slate document we're creating\n  const slateDoc = {\n    type: \"paragraph\",\n    children: [{ text: \"Hello world\" }],\n  };\n\n  // Create your data structures and make your update\n  const insertDelta = slateNodesToInsertDelta(slateDoc);\n  (yDoc.get(\"content\", Y.XmlText) as Y.XmlText).applyDelta(insertDelta);\n\n  // Encode the document state as an update\n  const yUpdate = Y.encodeStateAsUpdate(yDoc);\n\n  // Create the new room\n  const room = await liveblocks.createRoom(roomId, {\n    defaultAccesses: [\"room:write\"],\n  });\n\n  // Initialize the Yjs document with the update\n  await liveblocks.sendYjsBinaryUpdate(roomId, yUpdate);\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Liveblocks client in JavaScript\nDESCRIPTION: This code snippet shows how to create and configure a Liveblocks client using the createClient method from @liveblocks/client. It demonstrates setting up authentication and passing the client to the liveblocks middleware.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-zustand.mdx#2025-04-11_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\nimport { liveblocks } from \"@liveblocks/zustand\";\n\nconst client = createClient({\n  authEndpoint: \"/api/liveblocks-auth\",\n});\n\nliveblocks(/* Zustand config */, { client })\n```\n\n----------------------------------------\n\nTITLE: Adding Toolbar to Lexical Editor\nDESCRIPTION: Implementation of the static toolbar component in the Lexical editor setup.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/text-editor/lexical.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n<LexicalComposer initialConfig={initialConfig}>\n  <LiveblocksPlugin>\n    <Toolbar />\n  </LiveblocksPlugin>\n</LexicalComposer>\n```\n\n----------------------------------------\n\nTITLE: Complete Next.js Route Handler Implementation\nDESCRIPTION: Full implementation example showing webhook handling and email preparation in a Next.js route handler.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-emails.mdx#2025-04-11_snippet_16\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  isTextMentionNotificationEvent,\n  WebhookHandler,\n} from \"@liveblocks/node\";\nimport { Liveblocks } from \"@liveblocks/node\";\nimport { prepareTextMentionNotificationEmailAsHtml } from \"@liveblocks/emails\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nconst webhookHandler = new WebhookHandler(\n  process.env.LIVEBLOCKS_WEBHOOK_SECRET_KEY as string\n);\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  if (isTextMentionNotificationEvent(event)) {\n    const emailData = await prepareTextMentionNotificationEmailAsHtml(\n      liveblocks,\n      event\n    );\n\n    const email = `\n    <div>\n      <div>\n        @${emailData.mention.author.id} at ${emailData.mention.createdAt}\n      </div>\n      <div>${emailData.mention.htmlContent}</div>\n    </div>\n    `;\n  }\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Zustand Store with Liveblocks Presence - TypeScript\nDESCRIPTION: This code snippet defines a Zustand store integrated with Liveblocks for real-time collaboration. It utilizes the `liveblocks` middleware to automatically sync the `isTyping` state to Liveblocks Presence. The store includes state for the draft input and a boolean to indicate if the user is typing.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-react-zustand-and-liveblocks.mdx#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport create from \"zustand\";\nimport { createClient } from \"@liveblocks/client\";\nimport { liveblocks } from \"@liveblocks/zustand\";\nimport type { WithLiveblocks } from \"@liveblocks/zustand\";\n\ntype State = {\n  draft: string;\n  isTyping: boolean;\n  setDraft: (draft: string) => void;\n};\n\nconst client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n\nconst useStore = create<WithLiveblocks<State>>()(\n  liveblocks(\n    (set) => ({\n      draft: \"\",\n      isTyping: false,\n      setDraft: (draft) => set({ draft, isTyping: draft !== \"\" }),\n    }),\n    {\n      client,\n      presenceMapping: { isTyping: true },\n    }\n  )\n);\n\nexport default useStore;\n```\n\n----------------------------------------\n\nTITLE: Creating Liveblocks configuration file in TypeScript\nDESCRIPTION: Example of creating a liveblocks.config.ts file to set up the Liveblocks client, provider, and hooks with proper type definitions for Presence, Storage, UserMeta, and RoomEvent.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/0.17.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\nimport { createRoomContext } from \"@liveblocks/react\";\n\nconst client = createClient({\n  /* client options */\n});\n\n// Presence represents the properties that will exist on every User in the Room\n// and that will automatically be kept in sync. Accessible through the\n// `user.presence` property. Must be JSON-serializable.\ntype Presence = {\n  // cursor: { x: number, y: number } | null,\n  // ...\n};\n\n// Optionally, Storage represents the shared document that persists in the\n// Room, even after all Users leave. Fields under Storage typically are\n// LiveList, LiveMap, LiveObject instances, for which updates are\n// automatically persisted and synced to all connected clients.\ntype Storage = {\n  // author: LiveObject<{ firstName: string, lastName: string }>,\n  // ...\n};\n\n// Optionally, UserMeta represents static/readonly metadata on each User, as\n// provided by your own custom auth backend (if used). Useful for data that\n// will not change during a session, like a User's name or avatar.\n// type UserMeta = {\n//   id?: string,  // Accessible through `user.id`\n//   info?: Json,  // Accessible through `user.info`\n// };\n\n// Optionally, the type of custom events broadcasted and listened for in this\n// room. Must be JSON-serializable.\n// type RoomEvent = {};\n\nexport const {\n  RoomProvider,\n  useMyPresence,\n  useObject,\n  /* ...all the other hooks you're using... */\n} = createRoomContext<Presence, Storage /* UserMeta, RoomEvent */>(client);\n```\n\n----------------------------------------\n\nTITLE: Filtering Threads by Absence of Metadata in useThreads Hook\nDESCRIPTION: Shows how to use the new filtering capability in the useThreads hook to filter threads that do not have a specific metadata attribute set.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node/CHANGELOG.md#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nuseThreads({\n  query: {\n    // Filter any \"pinned\" threads that don't have a color set\n    metadata: {\n      pinned: true,\n      color: null, // ✨\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Getting User Notification Settings with Liveblocks Client\nDESCRIPTION: This snippet demonstrates how to use the Liveblocks client to retrieve user notification settings. The `getNotificationSettings` method fetches the current settings, which indicate which notification channels (e.g., email, Slack) are enabled for different notification types (e.g., thread, textMention). The example shows the asynchronous nature of the call and the structure of the returned settings object.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-prosemirror/CHANGELOG.md#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { createClient } from '@liveblocks/client'\nconst client = createClient({ ... })\n\nconst settings = await client.getNotificationSettings();\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n```\n\n----------------------------------------\n\nTITLE: Enable preventUnsavedChanges in Liveblocks React\nDESCRIPTION: This snippet demonstrates how to enable the `preventUnsavedChanges` option in a React application using the `<LiveblocksProvider>` component. Enabling this option prevents browser tabs from being closed while local changes are not yet synchronized with the Liveblocks server.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react/CHANGELOG.md#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n\"<LiveblocksProvider preventUnsavedChanges />\"\n```\n\n----------------------------------------\n\nTITLE: Guaranteed Referential Equality with useStorage Hook\nDESCRIPTION: This snippet demonstrates how the useStorage hook provides guaranteed referential equality for unchanged data, allowing for proper dependency tracking in React effects.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/0.18.mdx#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Component() {\n  const scientist = useStorage((root) => root.scientist);\n\n  useEffect(() => {\n    // Effect triggered every time scientist (or their pets list) changes! :)\n    // But not more often than that!\n  }, [scientist]);\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Toolbar.Toggle in React with Liveblocks\nDESCRIPTION: Shows how to use the Toolbar.Toggle component from @liveblocks/react-lexical for toggle buttons. It can be used with text editor commands or custom state management, and supports icons, tooltips, and keyboard shortcuts.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_11\n\nLANGUAGE: tsx\nCODE:\n```\nimport { FORMAT_TEXT_COMMAND } from \"lexical\";\nimport { isTextFormatActive, Toolbar } from \"@liveblocks/react-lexical\";\n\n<Toolbar>\n  <Toolbar.Toggle\n    name=\"Highlight\"\n    active={isTextFormatActive(editor, \"bold\")}\n    onClick={() => editor.dispatchCommand(FORMAT_TEXT_COMMAND, \"bold\")}\n  />\n</Toolbar>;\n```\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Toolbar } from \"@liveblocks/react-lexical\";\nimport { useState } from \"react\";\n\nfunction CustomToggle() {\n  const [active, setActive] = useState(false);\n\n  return (\n    <Toolbar.Toggle\n      name=\"Toggle options\"\n      active={active}\n      onClick={() => setActive(!active)}\n    />\n  );\n}\n```\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Toolbar } from \"@liveblocks/react-lexical\";\nimport { Icon } from \"@liveblocks/react-ui\";\n\n// Button says \"Highlight\"\n<Toolbar.Toggle\n  name=\"Highlight\"\n  active={/* ... */}\n  onClick={/* ... */}\n/>\n\n// Tooltip says \"Highlight [⌘+H]\"\n<Toolbar.Toggle\n  name=\"Highlight\"\n  shortcut=\"CMD+H\"\n  active={/* ... */}\n  onClick={/* ... */}\n/>\n\n// Custom icon, replaces the name in the button\n<Toolbar.Toggle\n  name=\"Highlight\"\n  icon={<div>🖊</div>}\n  active={/* ... */}\n  onClick={/* ... */}\n/>\n\n// Using a Liveblocks icon, replaces the name in the button\n<Toolbar.Toggle\n  name=\"Highlight\"\n  icon={<Icon.QuestionMark />}\n  active={/* ... */}\n  onClick={/* ... */}\n/>\n\n// Passing children visually replaces the `name` and `icon`\n<Toolbar.Toggle\n  name=\"Highlight\"\n  active={/* ... */}\n  onClick={/* ... */}\n>\n  🖊️Highlight\n</Toolbar.Toggle>\n\n// Props are passed to the inner `button`\n<Toolbar.Toggle\n  name=\"Highlight\"\n  active={/* ... */}\n  onClick={/* ... */}\n  style={{ marginLeft: 10 }}\n  className=\"custom-toggle\"\n  onMouseOver={() => console.log(\"Hovered\")}\n/>\n```\n\n----------------------------------------\n\nTITLE: Adding TypedLiveblocksProvider to Liveblocks Config\nDESCRIPTION: Typescript type definition for the LiveblocksYjsProvider to enable proper type checking when working with Yjs and Liveblocks.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-monaco-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { LiveblocksYjsProvider } from \"@liveblocks/yjs\";\n\n// ...\n\nexport type TypedLiveblocksProvider = LiveblocksYjsProvider<\n  Presence,\n  Storage,\n  UserMeta,\n  RoomEvent\n>;\n```\n\n----------------------------------------\n\nTITLE: Implementing Version History with Liveblocks Lexical in React\nDESCRIPTION: Example implementation of a document history component using Liveblocks hooks and components. Shows how to fetch version history, display a list of versions, and preview selected versions. Uses useHistoryVersions hook and HistoryVersionPreview component for version management.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/text-editor/lexical.mdx#2025-04-11_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  useHistoryVersions,\n  HistoryVersionSummaryList,\n} from \"@liveblocks/react\";\nimport { HistoryVersionPreview } from \"@liveblocks/react-lexical\";\n\nfunction DocumentHistory() {\n  const [selectedVersionId, setSelectedVersionId] = useState<string>();\n  const { versions, isLoading } = useHistoryVersions();\n  const selectedVersion = useMemo(\n    () => versions?.find((version) => version.id === selectedVersionId),\n    [selectedVersionId, versions]\n  );\n\n  if (isLoading) {\n    return <div>Loading version history...</div>;\n  }\n\n  return (\n    <>\n      <div>\n        {selectedVersion ? (\n          <HistoryVersionPreview\n            version={selectedVersion}\n            className=\"w-full h-full\"\n            onVersionRestore={onVersionRestore}\n          />\n        ) : (\n          <div>No version selected</div>\n        )}\n      </div>\n\n      <div>\n        <HistoryVersionSummaryList>\n          {versions?.map((version) => (\n            <HistoryVersionSummary\n              onClick={() => {\n                setSelectedVersionId(version.id);\n              }}\n              key={version.id}\n              version={version}\n              selected={version.id === selectedVersionId}\n            />\n          ))}        \n        </HistoryVersionSummaryList>\n      </div>\n    </>\n  );\n```\n\n----------------------------------------\n\nTITLE: Using prepareThreadNotificationEmailAsReact in TypeScript React\nDESCRIPTION: This snippet demonstrates how to use the prepareThreadNotificationEmailAsReact function to generate email content from a thread notification event. It shows how to handle different types of notifications (unread mentions and unread replies) and create corresponding React components.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-emails.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { prepareThreadNotificationEmailAsReact } from \"@liveblocks/emails\";\nimport { isThreadNotificationEvent } from \"@liveblocks/node\";\n\n// Get `liveblocks` and `event` (see \"Setup\" section)\n// ...\n\nif (isThreadNotificationEvent(event)) {\n  // +++\n  const emailData = await prepareThreadNotificationEmailAsReact(\n    liveblocks,\n    event\n  );\n  // +++\n  let email;\n\n  switch (emailData.type) {\n    case \"unreadMention\": {\n      email = (\n        <div>\n          <div>\n            @{emailData.comment.author.id} at {emailData.comment.createdAt}\n          </div>\n          <div>{emailData.comment.body}</div>\n        </div>\n      );\n      break;\n    }\n\n    case \"unreadReplies\": {\n      email = (\n        <div>\n          {emailData.comments.map((comment) => (\n            <div key={comment.id}>\n              <div>\n                @{comment.author.id} at {comment.createdAt}\n              </div>\n              <div>{comment.body}</div>\n            </div>\n          ))}\n        </div>\n      );\n      break;\n    }\n  }\n}\n\n// Send your email\n// ...\n```\n\n----------------------------------------\n\nTITLE: Creating Basic Webhook Endpoint in TypeScript\nDESCRIPTION: Basic implementation of a webhook endpoint that retrieves headers and body from the incoming request. Sets up the foundation for handling Liveblocks webhook events.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-test-webhooks-on-localhost.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Handle webhooks\n  // ...\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Using useThreads with Pagination\nDESCRIPTION: This snippet demonstrates the use of the `useThreads` hook with pagination.  It shows how to retrieve threads, loading state, and potential errors, along with the pagination-related properties like `fetchMore`, `isFetchingMore`, `hasFetchedAll`, and `fetchMoreError`.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react/CHANGELOG.md#2025-04-11_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nconst {\\n  threads,\\n  isLoading,\\n  error,\\n\\n  // ✨ New in Liveblocks 2.9\\n  fetchMore,\\n  isFetchingMore,\\n  hasFetchedAll,\\n  fetchMoreError,\\n} = useThreads({ query });\n```\n\n----------------------------------------\n\nTITLE: Setting up Liveblocks Client with AuthEndpoint\nDESCRIPTION: Configures the LiveblocksProvider component with an authEndpoint instead of a publicApiKey for secure authentication.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/nextjs.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n<LiveblocksProvider authEndpoint=\"/api/liveblocks-auth\">\n```\n\n----------------------------------------\n\nTITLE: Updating User Presence in Real-time\nDESCRIPTION: Shows how to update user presence in real-time using the useUpdateMyPresence hook for cursor movement tracking.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-presence-with-react.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useUpdateMyPresence } from \"@liveblocks/react/suspense\";\n\nfunction App() {\n  const updateMyPresence = useUpdateMyPresence();\n\n  return (\n    <div\n      style={{ width: \"100vw\", height: \"100vh\" }}\n      onPointerMove={(e) =>\n        updateMyPresence({ cursor: { x: e.clientX, y: e.clientY } })\n      }\n      onPointerLeave={() => updateMyPresence({ cursor: null })}\n    />\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Joining a Liveblocks room in React component\nDESCRIPTION: React component using Zustand store to join and leave a Liveblocks room. This is essential for creating a realtime collaborative experience where multiple users connect to the same virtual space.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/zustand.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport React, { useEffect } from \"react\";\nimport useStore from \"./store\";\nimport \"./App.css\";\n\nconst App = () => {\n  const {\n    liveblocks: { enterRoom, leaveRoom },\n  } = useStore();\n\n  useEffect(() => {\n    enterRoom(\"room-id\");\n    return () => {\n      leaveRoom(\"room-id\");\n    };\n  }, [enterRoom, leaveRoom]);\n\n  return <Room />;\n};\n\nexport default App;\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Client with Zustand Store\nDESCRIPTION: Setting up the Zustand store with Liveblocks middleware, defining the state types, and creating a client connection using the public API key.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-online-whiteboard-with-react-zustand-and-liveblocks.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport create from \"zustand\";\nimport { createClient } from \"@liveblocks/client\";\nimport { liveblocks } from \"@liveblocks/zustand\";\nimport type { WithLiveblocks } from \"@liveblocks/zustand\";\n\ntype State = {\n  // Your Zustand state type will be defined here\n};\n\nconst client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n\nconst useStore = create<WithLiveblocks<State>>()(\n  liveblocks(\n    (set) => ({\n      // Your state and actions will go here\n    }),\n    { client }\n  )\n);\n\nexport default useStore;\n```\n\n----------------------------------------\n\nTITLE: Using useNotificationSettings Hook in React\nDESCRIPTION: Shows how to implement the useNotificationSettings hook in React components to manage notification settings. Includes loading states and error handling.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-core/CHANGELOG.md#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useNotificationSettings } from \"@liveblocks/react\";\n\nconst [{ isLoading, error, settings }, updateSettings] = useNotificationSettings();\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst onSave = () => {\n  updateSettings({\n    slack: {\n      textMention: true,\n    },\n  });\n};\n```\n\n----------------------------------------\n\nTITLE: Subscribing to Errors in Liveblocks Client\nDESCRIPTION: This snippet shows how to subscribe to error events on a Liveblocks room instance. It emphasizes that the error listener might now receive errors related to Comments & Notifications, in addition to the existing room connection errors, expanding the scope of error handling.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react/CHANGELOG.md#2025-04-11_snippet_3\n\nLANGUAGE: ts\nCODE:\n```\n// 👌 Same as before, but might now also receive errors related to Comments & Notifications\nroom.subscribe(\"error\", (err) => { ... });\n```\n\n----------------------------------------\n\nTITLE: Using Liveblocks Provider to Prevent Unsaved Changes in React\nDESCRIPTION: This code snippet demonstrates how to opt-in to prevent browser tabs from closing while local changes are unsynchronized by utilizing the `preventUnsavedChanges` option in React's `LiveblocksProvider` component.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-client/CHANGELOG.md#2025-04-11_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\n<LiveblocksProvider preventUnsavedChanges />\n```\n\n----------------------------------------\n\nTITLE: Advanced Custom Toolbar with Formatting Controls\nDESCRIPTION: Demonstrates creating an advanced custom toolbar with history controls and text formatting buttons.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_20\n\nLANGUAGE: tsx\nCODE:\n```\nimport { FORMAT_TEXT_COMMAND } from \"lexical\";\nimport { useLexicalComposerContext } from \"@lexical/react/LexicalComposerContext\";\nimport { isTextFormatActive, FloatingToolbar } from \"@liveblocks/react-lexical\";\nimport { Icon } from \"@liveblocks/react-ui\";\n\nfunction CustomToolbar() {\n  const [editor] = useLexicalComposerContext();\n\n  return (\n    <FloatingToolbar>\n      <Toolbar.SectionHistory />\n      <Toolbar.Separator />\n      <Toolbar.Button\n        name=\"Help\"\n        icon={<Icon.QuestionMark />}\n        shortcut=\"CMD-H\"\n        onClick={() => console.log(\"help\")}\n      />\n      <Toolbar.Toggle\n        name=\"Bold\"\n        icon={<strong>B️</strong>}\n        active={isTextFormatActive(editor, \"bold\")}\n        onClick={() => editor.dispatchCommand(FORMAT_TEXT_COMMAND, \"bold\")}\n      />\n    </FloatingToolbar>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Using RoomProvider with React 17 or Lower\nDESCRIPTION: Shows how to properly set up the RoomProvider component when using React 17 or lower to avoid the 'zombie-child' problem. This snippet demonstrates importing and passing the unstable_batchedUpdates function to the RoomProvider.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_33\n\nLANGUAGE: tsx\nCODE:\n```\n// ⚠️  Only if you're using React 17 or lower\nimport { unstable_batchedUpdates } from \"react-dom\";  // 👈\n\n<RoomProvider\n  id=\"my-room\"\n  initialPresence={...}\n  initialStorage={...}\n  unstable_batchedUpdates={unstable_batchedUpdates}  // 👈\n>\n  <App />\n</RoomProvider>\n```\n\n----------------------------------------\n\nTITLE: Implementing Shape Selection with Liveblocks Presence\nDESCRIPTION: Adds multi-user selection functionality using Liveblocks presence feature, including visual indicators for local and remote selections.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-online-whiteboard-with-react-redux-and-liveblocks.mdx#2025-04-11_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nconst initialState = {\n  shapes: {},\n  selectedShape: null,\n};\n\nconst slice = createSlice({\n  name: \"state\",\n  initialState,\n  reducers: {\n    insertRectangle: (state) => {\n      /* ... */\n    },\n    onShapePointerDown: (state, action) => {\n      state.selectedShape = action.payload;\n    },\n  },\n});\n\nexport const { insertRectangle, onShapePointerDown } = slice.actions;\n\nexport function makeStore() {\n  return configureStore({\n    reducer: slice.reducer,\n    enhancers: [\n      liveblocksEnhancer({\n        client,\n        storageMapping: { shapes: true },\n        presenceMapping: { selectedShape: true },\n      }),\n    ],\n  });\n}\n\nconst store = makeStore();\n\nexport default store;\n```\n\n----------------------------------------\n\nTITLE: Using Liveblocks useOthers Hook in React Component\nDESCRIPTION: React component that demonstrates using the useOthers hook to display the number of other users currently connected to the Liveblocks room.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { useOthers } from \"./liveblocks.config\";\n\nexport function Room() {\n  const others = useOthers();\n  const userCount = others.length;\n\n  return <div>There are {userCount} other user(s) online</div>;\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Version History\nDESCRIPTION: Complete implementation of version history feature including version list and preview components.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/text-editor/blocknote.mdx#2025-04-11_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  useHistoryVersions,\n  HistoryVersionSummaryList,\n} from \"@liveblocks/react\";\nimport { HistoryVersionPreview } from \"@liveblocks/react-blocknote\";\n\nfunction DocumentHistory() {\n  const [selectedVersionId, setSelectedVersionId] = useState<string>();\n  const { versions, isLoading } = useHistoryVersions();\n  const selectedVersion = useMemo(\n    () => versions?.find((version) => version.id === selectedVersionId),\n    [selectedVersionId, versions]\n  );\n\n  if (isLoading) {\n    return <div>Loading version history...</div>;\n  }\n\n  return (\n    <>\n      <div>\n        {selectedVersion ? (\n          <HistoryVersionPreview\n            version={selectedVersion}\n            className=\"w-full h-full\"\n            onVersionRestore={onVersionRestore}\n          />\n        ) : (\n          <div>No version selected</div>\n        )}\n      </div>\n\n      <div>\n        <HistoryVersionSummaryList>\n          {versions?.map((version) => (\n            <HistoryVersionSummary\n              onClick={() => {\n                setSelectedVersionId(version.id);\n              }}\n              key={version.id}\n              version={version}\n              selected={version.id === selectedVersionId}\n            />\n          ))}\n        </HistoryVersionSummaryList>\n      </div>\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Creating and Using Liveblocks Client in TypeScript\nDESCRIPTION: Demonstrates how to create a Liveblocks client and use it to get and update user notification settings in a TypeScript application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG.md#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { createClient } from '@liveblocks/client'\nconst client = createClient({ ... })\n\nconst settings = await client.getNotificationSettings();\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst updatedSettings = await client.updateNotificationSettings({\n  email: {\n    thread: false,\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Using New Liveblocks Room API\nDESCRIPTION: Demonstrates the new recommended API for entering and leaving rooms in Liveblocks, replacing the older enter/leave methods with enterRoom that returns both room and leave function.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_22\n\nLANGUAGE: typescript\nCODE:\n```\n// Old APIs we'll no longer be recommending (but that will remain working)\nconst room = client.enter(\"my-room\", options);\nclient.getRoom(\"my-room\");\nclient.leave(\"my-room\");\n```\n\nLANGUAGE: typescript\nCODE:\n```\n// New API we'll be recommending instead\nconst { room, leave } = client.enterRoom(\"my-room\", options);\nleave();\n```\n\n----------------------------------------\n\nTITLE: Listening for Subdocument Changes\nDESCRIPTION: Example of how to listen for changes in subdocuments using Y.Doc.on('subdocs') event.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-yjs-subdocuments.mdx#2025-04-11_snippet_3\n\nLANGUAGE: ts\nCODE:\n```\nyDoc.on(\"subdocs\", ({ added, removed, loaded }) => {\n  // Subdocument change\n  // ...\n});\n```\n\n----------------------------------------\n\nTITLE: Using useErrorListener with Liveblocks React\nDESCRIPTION: This code shows how to use the `useErrorListener` hook in `@liveblocks/react` to listen for errors. Previously it only notified about errors in a RoomProvider context, but now it requires a LiveblocksProvider and will notify about errors for any room. This example illustrates how to set up a listener to show a toast notification or notify Sentry/Datadog when an error occurs.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-emails/CHANGELOG.md#2025-04-11_snippet_4\n\nLANGUAGE: ts\nCODE:\n```\n// ❌ Before: required a RoomProvider and would only notify about errors for that room\n// ✅ Now: requires a LiveblocksProvider and will notify about errors for any room\nuseErrorListener((err: LiveblocksError) => {\n  /* show toast, or notify Sentry, Datadog, etc */\n});\n```\n\n----------------------------------------\n\nTITLE: Using useOthers Hook to Get Online User Count in TSX\nDESCRIPTION: This code snippet shows how to use the useOthers hook to retrieve a list of other users currently online in the Liveblocks room and then get the count of online users.  It initializes the `others` variable with the return value of `useOthers()`, which is an array of users, then extracts the length of array to derive the `userCount`.  This is typically used within a React component to display the number of connected users.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/others/guide.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n// Add useOthers\nconst others = useOthers();\nconst userCount = others.length;\n```\n\n----------------------------------------\n\nTITLE: Inserting Rectangles in Zustand Store with Liveblocks - TypeScript\nDESCRIPTION: This snippet defines a Zustand store for managing rectangle shapes. It includes a function to insert a rectangle at random positions with a random color, integrating with Liveblocks to handle client context and state synchronization.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-online-whiteboard-with-react-zustand-and-liveblocks.mdx#2025-04-11_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport create from \"zustand\";\nimport { createClient } from \"@liveblocks/client\";\nimport { liveblocks } from \"@liveblocks/zustand\";\nimport type { WithLiveblocks } from \"@liveblocks/zustand\";\n\nexport type Shape = {\n  x: number;\n  y: number;\n  fill: string;\n};\n\ntype State = {\n  shapes: Record<string, Shape>;\n  insertRectangle: () => void;\n};\n\nconst client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n\nconst COLORS = [\"#DC2626\", \"#D97706\", \"#059669\", \"#7C3AED\", \"#DB2777\"];\n\nfunction getRandomInt(max: number) {\n  return Math.floor(Math.random() * max);\n}\n\nfunction getRandomColor() {\n  return COLORS[getRandomInt(COLORS.length)];\n}\n\nconst useStore = create<WithLiveblocks<State>>()(\n  liveblocks(\n    (set, get) => ({\n      shapes: {},\n      insertRectangle: () => {\n        const { shapes } = get();\n\n        const shapeId = Date.now().toString();\n        const shape = {\n          x: getRandomInt(300),\n          y: getRandomInt(300),\n          fill: getRandomColor(),\n        };\n\n        set({\n          shapes: { ...shapes, [shapeId]: shape },\n        });\n      },\n    }),\n    {\n      client,\n      storageMapping: { shapes: true },\n    }\n  )\n);\n\nexport default useStore;\n```\n\n----------------------------------------\n\nTITLE: Enabling Experimental Offline Support in Liveblocks TipTap\nDESCRIPTION: Shows how to enable experimental offline support, which saves documents locally and allows instant loading without requiring a connection to Liveblocks servers.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_48\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useLiveblocksExtension } from \"@liveblocks/react-tiptap\";\n\nfunction TextEditor() {\n  const liveblocks = useLiveblocksExtension({\n    offlineSupport_experimental: true,\n  });\n\n  // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Demonstrating Async Resource Fetching Pattern\nDESCRIPTION: Shows the recommended pattern for fetching async resources with error handling and type safety.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/tools/nextjs-starter-kit.mdx#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nconst { data, error } = await getDocument({\n  /* ... */\n});\n\n// An error has occured\nif (error) {\n  // { code: 400, message: \"Document not found\", suggestion: \"Please check the URL is...\" }\n  console.log(error);\n  return;\n}\n\n// Success, but result is empty\nif (!data) {\n  return;\n}\n\n// Success\n// { name: \"my-document\", id: \"hIas7GuihgHF8Fhv8Sskg\",  ... }\nconsole.log(data);\n```\n\n----------------------------------------\n\nTITLE: Implementing Collaborative CodeMirror Editor in Svelte\nDESCRIPTION: Complete implementation of a collaborative code editor component using Liveblocks, CodeMirror, and Yjs in a Svelte component. Includes room setup, Yjs document configuration, and CodeMirror initialization.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-codemirror-svelte.mdx#2025-04-11_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<script>\nimport { onMount, onDestroy } from \"svelte\";\nimport { createClient } from \"@liveblocks/client\";\nimport { getYjsProviderForRoom } from \"@liveblocks/yjs\";\nimport * as Y from \"yjs\";\nimport { yCollab } from \"y-codemirror.next\";\nimport { EditorView, basicSetup } from \"codemirror\";\nimport { EditorState } from \"@codemirror/state\";\nimport { javascript } from \"@codemirror/lang-javascript\";\n\nlet parent;\n\n// Set up Liveblocks client\nconst client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n\nonMount(() => {\n  // Enter a multiplayer room\n  const { room, leave } = client.enterRoom(\"my-room\");\n\n  // Set up Yjs document, shared text, undo manager, and Liveblocks Yjs provider\n  const yProvider = getYjsProviderForRoom(room);\n  const yDoc = yProvider.getYDoc();\n  const yText = yDoc.getText(\"codemirror\");\n  const undoManager = new Y.UndoManager(yText);\n\n  // Set up CodeMirror and extensions\n  const state = EditorState.create({\n    doc: yText.toString(),\n    extensions: [\n      basicSetup,\n      javascript(),\n      yCollab(yText, yProvider.awareness, { undoManager }),\n    ],\n  });\n\n  // Attach CodeMirror to element\n  const view = new EditorView({\n    state,\n    parent,\n  });\n\n  return () => {\n    view.destroy();\n    leave();\n  };\n});\n</script>\n\n<div bind:this={parent}></div>\n```\n\n----------------------------------------\n\nTITLE: Implementing Threads Component for Comments\nDESCRIPTION: Creates a component that renders comments/threads in the editor using Liveblocks threading functionality with both anchored and floating thread layouts.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-lexical.mdx#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { useThreads } from \"@liveblocks/react/suspense\";\nimport {\n  AnchoredThreads,\n  FloatingComposer,\n  FloatingThreads,\n} from \"@liveblocks/react-lexical\";\n\nexport function Threads() {\n  const { threads } = useThreads();\n\n  return (\n    <>\n      <div className=\"anchored-threads\">\n        <AnchoredThreads threads={threads} />\n      </div>\n      <FloatingThreads className=\"floating-threads\" threads={threads} />\n      <FloatingComposer className=\"floating-composer\" />\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Collaborative Whiteboard with Create Liveblocks App\nDESCRIPTION: Command to create a new Liveblocks collaborative whiteboard project with automatic API key setup. This creates a local instance of the whiteboard example and helps configure the necessary API credentials.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-whiteboard/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-whiteboard --api-key\n```\n\n----------------------------------------\n\nTITLE: Setting up Yjs with React using getYjsProviderForRoom\nDESCRIPTION: This snippet demonstrates how to set up Yjs in a React application using the getYjsProviderForRoom function. It shows how to use the useRoom hook to get the room object and then create a Yjs provider and document.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-yjs.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useRoom } from \"@liveblocks/react\";\nimport { getYjsProviderForRoom } from \"@liveblocks/yjs\";\n\nfunction App() {\n  const room = useRoom();\n  const yProvider = getYjsProviderForRoom(room);\n  const yDoc = yProvider.getYDoc();\n\n  // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Subscribing to Storage Status in Liveblocks\nDESCRIPTION: Example of using the room.subscribe method to listen for storage status changes in Liveblocks. The callback function handles different storage states: not-loaded, loading, synchronizing, and synchronized.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-core/CHANGELOG.md#2025-04-11_snippet_22\n\nLANGUAGE: typescript\nCODE:\n```\nroom.subscribe(\"storage-status\", (status) => {\n  switch (status) {\n    case \"not-loaded\":\n      break;\n    case \"loading\":\n      break;\n    case \"synchronizing\":\n      break;\n    case \"synchronized\":\n      break;\n    default:\n      break;\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Supabase Data Synchronization\nDESCRIPTION: Complete implementation combining webhook handling, Liveblocks REST API calls, and Supabase database updates. Includes error handling and data insertion logic.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-storage-document-data-to-a-supabase-postgres-database.mdx#2025-04-11_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\nimport { createClient } from \"@supabase/supabase-js\";\n\n// Add your signing key from a project's webhooks dashboard\nconst WEBHOOK_SECRET = \"YOUR_SIGNING_SECRET\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\n// Add your secret key from a project's API keys dashboard\nconst API_SECRET = \"{{SECRET_KEY}}\";\n\n// Create a Supabase client\nconst supabase = createClient(\n  \"YOUR_SUPABASE_PROJECT_URL\",\n  \"YOUR_SUPABASE_PUBLIC_ANON_KEY\"\n);\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Verify if this is a real webhook request\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  // When Storage document data has been updated\n  if (event.type === \"storageUpdated\") {\n    const { roomId } = event.data;\n\n    // Get Storage data from Liveblocks REST API\n    const url = `https://api.liveblocks.io/v2/rooms/${roomId}/storage`;\n    const response = await fetch(url, {\n      headers: { Authorization: `Bearer ${API_SECRET}` },\n    });\n\n    if (!response.ok) {\n      return new Response(\"Problem accessing Liveblocks REST APIs\", {\n        status: 500,\n      });\n    }\n\n    // Your JSON Storage document data as a string\n    const storageData = await response.text();\n\n    // Update database\n    const { data, error } = await supabase\n      .from(\"documents\")\n      .insert({ roomid: roomId, storagedata: storageData })\n      .select();\n\n    if (error) {\n      return new Response(\"Problem inserting data into database\", {\n        status: 500,\n      });\n    }\n  }\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Using HistoryVersionSummary Component in React\nDESCRIPTION: This code shows how to implement the HistoryVersionSummary component to display a version summary. It includes handling click events and managing the selected state of versions.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_37\n\nLANGUAGE: tsx\nCODE:\n```\n<HistoryVersionSummary\n  onClick={() => {\n    setSelectedVersionId(version.id);\n  }}\n  version={version}\n  selected={version.id === selectedVersionId}\n/>\n```\n\n----------------------------------------\n\nTITLE: Updating Cursor Position with Liveblocks Presence in React\nDESCRIPTION: This React component demonstrates how to enter and leave a Liveblocks room, and update cursor position in the Zustand store. The cursor position updates are shared with other users in real-time through the presenceMapping configuration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-presence-with-zustand.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport React, { useEffect } from \"react\";\nimport useStore from \"./store\";\n\nimport \"./App.css\";\n\nconst App = () => {\n  const {\n    liveblocks: { enterRoom, leaveRoom },\n  } = useStore();\n\n  useEffect(() => {\n    enterRoom(\"room-id\");\n    return () => {\n      leaveRoom(\"room-id\");\n    };\n  }, [enterRoom, leaveRoom]);\n\n  const setCursor = useStore((state) => state.setCursor);\n  return (\n    <div\n      style={{ width: \"100vw\", height: \"100vh\" }}\n      onPointerMove={(e) => setCursor({ x: e.clientX, y: e.clientY })}\n    />\n  );\n};\n\nexport default App;\n```\n\n----------------------------------------\n\nTITLE: Implementing Room Component with RoomProvider\nDESCRIPTION: Creates a client-side Room component that sets up RoomProvider with initial storage using LiveObject. Handles room-specific Liveblocks functionality.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-with-nextjs-app-directory.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { ReactNode } from \"react\";\nimport { RoomProvider } from \"../liveblocks.config\";\nimport { LiveObject } from \"@liveblocks/client\";\n\nexport default function Room({ children }: { children: ReactNode }) {\n  return (\n    <RoomProvider\n      id=\"my-room-name\"\n      initialStorage={{\n        // ✅ This is a client component, so everything works!\n        session: new LiveObject(),\n      }}\n    >\n      {children}\n    </RoomProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Liveblocks Storage Data with Webhook Handler\nDESCRIPTION: Implementation of a webhook handler to fetch Storage document data from Liveblocks using REST API. Uses WebhookHandler for request verification and includes error handling.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-storage-document-data-to-a-supabase-postgres-database.mdx#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\n\n// Add your signing key from a project's webhooks dashboard\nconst WEBHOOK_SECRET = \"YOUR_SIGNING_SECRET\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\n// Add your secret key from a project's API keys dashboard\nconst API_SECRET = \"{{SECRET_KEY}}\";\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Verify if this is a real webhook request\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  // When Storage document data has been updated\n  if (event.type === \"storageUpdated\") {\n    const { roomId } = event.data;\n\n    // Get Storage data from Liveblocks REST API\n    const url = `https://api.liveblocks.io/v2/rooms/${roomId}/storage`;\n    const response = await fetch(url, {\n      headers: { Authorization: `Bearer ${API_SECRET}` },\n    });\n\n    if (!response.ok) {\n      return new Response(\"Problem accessing Liveblocks REST APIs\", {\n        status: 500,\n      });\n    }\n\n    // Your JSON Storage document data as a string\n    const storageData = await response.text();\n\n    // Update database\n    // ...\n  }\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Presence Updates to History (TypeScript)\nDESCRIPTION: This snippet demonstrates how to add presence updates, specifically user selections, to the Liveblocks room's history.  By using `room.updatePresence` with the `addToHistory: true` option, changes to the `selectedShape` presence are included in the undo/redo history.  This allows users to undo and redo selection changes along with shape modifications.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-online-whiteboard-with-react-zustand-and-liveblocks.mdx#2025-04-11_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\n\"/* ... */\\n\\nconst useStore = create<WithLiveblocks<State>>>(\\n  liveblocks(\\n    (set, get) => ({\n      isDragging: false,\n      shapes: {},\n      selectedShape: null,\n\n      insertRectangle: () => {\n        const { shapes, liveblocks } = get();\n\n        const shapeId = Date.now().toString();\n        const shape = {\n          x: getRandomInt(300),\n          y: getRandomInt(300),\n          fill: getRandomColor(),\n        };\n\n        liveblocks.room?.updatePresence(\n          { selectedShape: shapeId },\n          { addToHistory: true }\n        );\n        set({\n          shapes: { ...shapes, [shapeId]: shape },\n        });\n      },\n      onShapePointerDown: (shapeId) => {\n        const room = get().liveblocks.room;\n        room?.history.pause();\n        room?.updatePresence(\n          { selectedShape: shapeId },\n          { addToHistory: true }\n        );\n        set({ isDragging: true });\n      },\n      deleteShape: () => {\n        const { shapes, selectedShape, liveblocks } = get();\n        if (!selectedShape) {\n          /* Nothing todo */\n          return;\n        }\n        const { [selectedShape]: shapeToDelete, ...newShapes } = shapes;\n        liveblocks.room?.updatePresence(\n          { selectedShape: null },\n          { addToHistory: true }\n        );\n        set({ shapes: newShapes });\n      },\n      onCanvasPointerUp: () => {\n        /* ... */\\n      },\n      onCanvasPointerMove: (e) => {\n        /* ... */\\n      },\n    }),\n    {\n      client,\n      storageMapping: { shapes: true },\n      presenceMapping: { selectedShape: true },\n    }\n  )\n);\\n\\nexport default useStore;\\n\"\n```\n\n----------------------------------------\n\nTITLE: Liveblocks Package List\nDESCRIPTION: List of available Liveblocks npm packages and SDKs for different frameworks and use cases\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/concepts/how-liveblocks-works.mdx#2025-04-11_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n- [`@liveblocks/client`](https://liveblocks.io/docs/api-reference/liveblocks-client)\n- [`@liveblocks/react`](https://liveblocks.io/docs/api-reference/liveblocks-react)\n- [`@liveblocks/react-ui`](https://liveblocks.io/docs/api-reference/liveblocks-react-ui)\n- [`@liveblocks/react-tiptap`](https://liveblocks.io/docs/api-reference/liveblocks-react-tiptap)\n- [`@liveblocks/react-lexical`](https://liveblocks.io/docs/api-reference/liveblocks-react-lexical)\n- [`@liveblocks/node-lexical`](https://liveblocks.io/docs/api-reference/liveblocks-node-lexical)\n- [`@liveblocks/redux`](https://liveblocks.io/docs/api-reference/liveblocks-redux)\n- [`@liveblocks/zustand`](https://liveblocks.io/docs/api-reference/liveblocks-zustand)\n- [`@liveblocks/yjs`](https://liveblocks.io/docs/api-reference/liveblocks-yjs)\n- [`@liveblocks/node`](https://liveblocks.io/docs/api-reference/liveblocks-node)\n- [`@liveblocks/emails`](https://liveblocks.io/docs/api-reference/liveblocks-emails)\n```\n\n----------------------------------------\n\nTITLE: Using LiveblocksProvider with preventUnsavedChanges Option\nDESCRIPTION: Example showing how to enable the preventUnsavedChanges option in the LiveblocksProvider component to prevent browser tabs from being closed while local changes are not yet synchronized.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/create-liveblocks-app/CHANGELOG.md#2025-04-11_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\n<LiveblocksProvider preventUnsavedChanges />\n```\n\n----------------------------------------\n\nTITLE: Configuring presenceMapping in Liveblocks middleware with Zustand\nDESCRIPTION: This example demonstrates how to use the presenceMapping option in the liveblocks middleware. It shows how to synchronize a part of the Zustand state (cursor in this case) with Liveblocks Room presence.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-zustand.mdx#2025-04-11_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst useStore = create(\n  liveblocks(\n    (set) => ({\n      cursor: { x: 0, y: 0 },\n    }),\n    {\n      client,\n      presenceMapping: { cursor: true },\n    }\n  )\n);\n```\n\n----------------------------------------\n\nTITLE: Configuring Liveblocks Authentication Endpoint in Nuxt.js\nDESCRIPTION: This code creates an authentication endpoint that determines user permissions for accessing Liveblocks rooms. It uses a naming pattern with wildcards to grant different levels of access based on user organization and group.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/nuxtjs.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nexport default defineEventHandler(async (event) => {\n// Get the current user from your database\n  const user = __getUserFromDB__(event);\n\n  // Start an auth session inside your endpoint\n  const session = liveblocks.prepareSession(\n    user.id,\n    { userInfo: user.metadata },  // Optional\n  );\n\n  // Use a naming pattern to allow access to rooms with wildcards\n  // Giving the user read access on their org, and write access on their group\n  session.allow(`${user.organization}:*`, session.READ_ACCESS);\n  session.allow(`${user.organization}:${user.group}:*`, session.FULL_ACCESS);\n\n  // Authorize the user and return the result\n  const { status, body } = await session.authorize();\n  return body;\n})\n```\n\n----------------------------------------\n\nTITLE: Server-side Document Modifications\nDESCRIPTION: Example of server-side document content manipulation using withProsemirrorDocument\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/text-editor/tiptap.mdx#2025-04-11_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nawait withProsemirrorDocument(\n  { roomId: \"your-room-id\", client: liveblocks },\n  async (api) => {\n    // get editor content\n    const text = api.getText();\n\n    await api.update((doc, tr) => {\n      // Make real-time updates\n      // ...\n    });\n  }\n);\n```\n\n----------------------------------------\n\nTITLE: Using LiveblocksProvider Instead of createClient\nDESCRIPTION: Shows the new way to provide Liveblocks context to an application using LiveblocksProvider component, replacing the previous createClient function. This change aligns with React's component-based approach.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG.md#2025-04-11_snippet_13\n\nLANGUAGE: jsx\nCODE:\n```\n<LiveblocksProvider /* options */>\n  <App />\n</LiveblocksProvider>\n```\n\n----------------------------------------\n\nTITLE: Implementing Shape Movement in React Component\nDESCRIPTION: This React component snippet implements the UI for moving shapes. It dispatches actions to update the Redux store when the canvas is interacted with.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-online-whiteboard-with-react-redux-and-liveblocks.mdx#2025-04-11_snippet_10\n\nLANGUAGE: jsx\nCODE:\n```\nimport { useEffect } from \"react\";\nimport \"./App.css\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { actions } from \"@liveblocks/redux\";\n\nimport {\n  insertRectangle,\n  onShapePointerDown,\n  deleteShape,\n  onCanvasPointerUp,\n  onCanvasPointerMove,\n} from \"./store\";\n\nconst roomId = \"redux-whiteboard\";\n\nexport default function App() {\n  const shapes = useSelector((state) => state.shapes);\n  const isLoading = useSelector((state) => state.liveblocks.isStorageLoading);\n  const selectedShape = useSelector((state) => state.selectedShape);\n  const others = useSelector((state) => state.liveblocks.others);\n\n  const dispatch = useDispatch();\n\n  /* ... */\n\n  return (\n    <>\n      <div\n        className=\"canvas\"\n        onPointerMove={(e) => {\n          e.preventDefault();\n          dispatch(onCanvasPointerMove({ x: e.clientX, y: e.clientY }));\n        }}\n        onPointerUp={() => {\n          dispatch(onCanvasPointerUp());\n        }}\n      >\n        {/* ... */}\n      </div>\n      <div className=\"toolbar\">{/* ... */}</div>\n    </>\n  );\n}\n\n/* ... */\n```\n\n----------------------------------------\n\nTITLE: Importing Dark Mode Styles for Liveblocks React UI\nDESCRIPTION: These snippets demonstrate how to import dark mode styles for Liveblocks React UI components. It shows two options: using system theme with media query and using class names or data attributes.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_42\n\nLANGUAGE: tsx\nCODE:\n```\n// Dark mode using the system theme with `prefers-color-scheme`\nimport \"@liveblocks/react-ui/styles/dark/media-query.css\";\n```\n\nLANGUAGE: tsx\nCODE:\n```\n// Dark mode using `className=\"dark\"`, `data-theme=\"dark\"`, or `data-dark=\"true\"`\nimport \"@liveblocks/react-ui/styles/dark/attributes.css\";\n```\n\n----------------------------------------\n\nTITLE: Configuring Authentication Endpoint in Next.js\nDESCRIPTION: Sets up an authentication endpoint in Next.js to handle user permissions for Liveblocks rooms. It uses a naming pattern with wildcards to grant access to rooms based on organization and group.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/nextjs.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nexport async function POST(request: Request) {\n  // Get the current user from your database\n  const user = __getUserFromDB__(request);\n\n  // Start an auth session inside your endpoint\n  const session = liveblocks.prepareSession(\n    user.id,\n    { userInfo: user.metadata } // Optional\n  );\n\n  // Use a naming pattern to allow access to rooms with wildcards\n  // Giving the user read access on their org, and write access on their group\n  session.allow(`${user.organization}:*`, session.READ_ACCESS);\n  session.allow(`${user.organization}:${user.group}:*`, session.FULL_ACCESS);\n\n  // Authorize the user and return the result\n  const { status, body } = await session.authorize();\n  return new Response(body, { status });\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Up Liveblocks Client with Authentication Endpoint\nDESCRIPTION: This code creates a Liveblocks client that uses the authentication endpoint for authorization. It replaces the public API key approach with a more secure server-based authentication.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/nuxtjs.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\n\nconst client = createClient({\n  authEndpoint: \"/api/liveblocks-auth\",\n});\n```\n\n----------------------------------------\n\nTITLE: Using authEndpoint as a Callback with Custom Headers\nDESCRIPTION: Advanced configuration for LiveblocksProvider that uses a callback function to add custom headers and body data to the authentication request.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/remix.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n<LiveblocksProvider\n  authEndpoint={async (room) => {\n    // Passing custom headers and body to your endpoint\n    const headers = {\n      // Custom headers\n      // ...\n\n      \"Content-Type\": \"application/json\",\n    };\n\n    const body = JSON.stringify({\n      // Custom body\n      // ...\n\n      room,\n    });\n\n    const response = await fetch(\"/api/liveblocks-auth\", {\n      method: \"POST\",\n      headers,\n      body,\n    });\n\n    return await response.json();\n  }}\n/>\n```\n\n----------------------------------------\n\nTITLE: Accessing Pause/Resume History Functions in Liveblocks\nDESCRIPTION: Demonstrates how to access pause and resume functions for controlling which states are recorded in the undo/redo history. Useful for skipping intermediate states during continuous operations like dragging.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-multiplayer-undo-redo-with-redux.mdx#2025-04-11_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst { pause, resume } = client.getRoom(\"room-id\").history;\n```\n\n----------------------------------------\n\nTITLE: Customizing Liveblocks Components with CSS Variables\nDESCRIPTION: Shows how to globally style all default Comments components by setting CSS variables within the .lb-root class. These variables control aspects like accent color, spacing, and border radius.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_43\n\nLANGUAGE: css\nCODE:\n```\n/* Styles all default Comments components */\n.lb-root {\n  --lb-accent: purple;\n  --lb-spacing: 1em;\n  --lb-radius: 0;\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Liveblocks Hook Imports\nDESCRIPTION: This code snippet demonstrates the change in importing Liveblocks hooks directly from the package instead of a local config file.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.0.mdx#2025-04-11_snippet_12\n\nLANGUAGE: tsx\nCODE:\n```\n// ❌ Before\nimport { RoomProvider, useRoom, ... } from \"./liveblocks.config.ts\";\n```\n\nLANGUAGE: tsx\nCODE:\n```\n// ✅ After\nimport { RoomProvider, useRoom, ... } from \"@liveblocks/react/suspense\";  // Option 1\nimport { RoomProvider, useRoom, ... } from \"@liveblocks/react\";           // Option 2\n```\n\n----------------------------------------\n\nTITLE: Implementing User Identification for Liveblocks Auth\nDESCRIPTION: Creates a POST endpoint to identify users and return authentication tokens. It uses the Liveblocks client to check permissions based on userId and optional groupIds.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/1.2.mdx#2025-04-11_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"sk_prod_xxxxxxxxxxxxxxxxxxxxxxxx\",\n});\n\nexport async function POST(request) {\n  const user = { id: \"olivier@example.com\", info: { name: \"Olivier\" }};\n\n  const { status, body } = await liveblocks.identifyUser({\n    userId: user.id,\n    groupIds, // Optional\n  });\n\n  return new Response(body, { status });\n}\n```\n\n----------------------------------------\n\nTITLE: Multiple Editor Configuration\nDESCRIPTION: Setup for using multiple Tiptap editors with unique field identifiers\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/text-editor/tiptap.mdx#2025-04-11_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useLiveblocksExtension } from \"@liveblocks/react-tiptap\";\n\nfunction TextEditor() {\n  const liveblocks = useLiveblocksExtension({\n    field: \"editor-one\",\n  });\n\n  // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Customizing FloatingThreads Component in React\nDESCRIPTION: This example shows how to customize the FloatingThreads component by applying custom styling and overriding the Thread component. It demonstrates both simple class additions and more complex component overrides.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_27\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Thread } from \"@liveblocks/react-ui\";\n\n<FloatingThreads\n  threads={threads}\n  className=\"my-floating-thread\"\n  components={{\n    Thread: (props) => (\n      <Thread {...props} className=\"border shadow\" style={{ width: \"300px\" }} />\n    ),\n  }}\n/>;\n```\n\n----------------------------------------\n\nTITLE: Using Query Language with Liveblocks REST API\nDESCRIPTION: Shows how to build a query string for the Liveblocks REST API to filter threads. Demonstrates constructing a query that filters for threads with specific metadata values and encoding it for use in a URL parameter.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-filter-threads-using-query-language.mdx#2025-04-11_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nmetadata['status']:'open' AND metadata['priority']:3\n```\n\n----------------------------------------\n\nTITLE: Installing and Running Next.js Tiptap AI Example\nDESCRIPTION: Commands for setting up and running the collaborative text editor project locally. Includes installing dependencies, setting up environment variables, and starting the development server.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-tiptap-ai/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install\nnpm run dev\n```\n\n----------------------------------------\n\nTITLE: Installing Required Packages for Tiptap and Liveblocks Integration\nDESCRIPTION: Command to install Tiptap, Yjs, and Liveblocks packages required for building a collaborative text editor. Includes all necessary dependencies for collaboration features and cursor tracking.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-tiptap-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/react @liveblocks/yjs yjs @tiptap/extension-collaboration @tiptap/extension-collaboration-cursor @tiptap/pm @tiptap/react @tiptap/starter-kit\n```\n\n----------------------------------------\n\nTITLE: Entering Room with Initial Storage Data\nDESCRIPTION: Demonstrates how to enter a Liveblocks room with initial storage data that will be synchronized across all connected clients.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-storage-with-redux.mdx#2025-04-11_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nenterRoom(\"room-id\", {\n  firstName: \"Lise\",\n  lastName: \"Meitner\",\n  discoveries: [\"Nuclear fission\", \"Protactinium\"],\n});\n```\n\n----------------------------------------\n\nTITLE: Custom Auth Error Response in @liveblocks/client\nDESCRIPTION: Example of returning a custom error response in auth callback to stop retrying connection\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-emails/CHANGELOG.md#2025-04-11_snippet_20\n\nLANGUAGE: typescript\nCODE:\n```\nreturn { error: \"forbidden\", reason: \"Custom error reason\" }\n```\n\n----------------------------------------\n\nTITLE: Subscribing to Connection Status Changes - TypeScript\nDESCRIPTION: This snippet illustrates how to subscribe to connection status changes using room.subscribe('status'). This allows the client to respond to changes in connection state.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_26\n\nLANGUAGE: typescript\nCODE:\n```\nroom.subscribe('status');\n```\n\n----------------------------------------\n\nTITLE: Creating Authentication Endpoint in SvelteKit\nDESCRIPTION: Set up a server endpoint in SvelteKit that identifies users and provides authentication tokens for Liveblocks. This endpoint validates user access to specific rooms based on your security logic.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/sveltekit.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { type RequestEvent } from \"@sveltejs/kit\";\nimport { Liveblocks } from \"@liveblocks/node\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nexport async function POST({ request }: RequestEvent) {\n  // Get the current user from your database\n  const user = __getUserFromDB__(request);\n\n  // Identify the user and return the result\n  const { status, body } = await liveblocks.identifyUser(\n    {\n      userId: user.id,\n      groupIds, // Optional\n    },\n    { userInfo: user.metadata },\n  );\n\n  return new Response(body, { status });\n}\n```\n\n----------------------------------------\n\nTITLE: Complete Liveblocks Webhook Handler Implementation\nDESCRIPTION: A full example of a webhook request handler, including initialization, verification, and event type checking.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/webhooks.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\n\n// Will fail if not properly initialized with a secret\nconst webhookHandler = new WebhookHandler(\"whsec_...\");\n\nexport default function webhookRequestHandler(req, res) {\n  try {\n    const event = webhookHandler.verifyRequest({\n      headers: req.headers,\n      rawBody: req.body,\n    });\n\n    // Use the event, for example...\n    if (event.type === \"storageUpdated\") {\n      // { roomId: \"my-room-name\", projectId: \"8sfhs5s...\", ... }\n      console.log(event.data);\n    }\n  } catch (error) {\n    console.error(error);\n    return res.status(400).end();\n  }\n\n  res.status(200).end();\n}\n```\n\n----------------------------------------\n\nTITLE: Using Multiple Editors on One Page with Field Property\nDESCRIPTION: Shows how to configure multiple editors on a single page by assigning unique field values to each editor instance, acting as identifiers.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_46\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useLiveblocksExtension } from \"@liveblocks/react-tiptap\";\n\nfunction TextEditor() {\n  const liveblocks = useLiveblocksExtension({\n    // +++\n    field: \"editor-one\",\n    // +++\n  });\n\n  // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Setting up Liveblocks Client\nDESCRIPTION: Creates a Liveblocks client instance with a public API key for communicating with the backend.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/javascript.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n```\n\n----------------------------------------\n\nTITLE: Modifying Zustand Store for Selected Shape - TypeScript\nDESCRIPTION: This snippet updates the Zustand store to include a 'selectedShape' property, enabling tracking of the currently selected rectangle shape for users. Functions to manage both shape insertion and selection are included.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-online-whiteboard-with-react-zustand-and-liveblocks.mdx#2025-04-11_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\n/* ... */\ntype State = {\n  shapes: Record<string, Shape>;\n  selectedShape: string | null;\n  insertRectangle: () => void;\n  onShapePointerDown: (shapeId: string | null) => void;\n};\n\n/* ... */\n\nconst useStore = create<WithLiveblocks<State>>()(\n  liveblocks(\n    (set, get) => ({\n      shapes: {},\n      selectedShape: null,\n      insertRectangle: () => {\n        const { shapes } = get();\n\n        const shapeId = Date.now().toString();\n        const shape = {\n          x: getRandomInt(300),\n          y: getRandomInt(300),\n          fill: getRandomColor(),\n        };\n\n        set({\n          shapes: { ...shapes, [shapeId]: shape },\n          selectedShape: shapeId,\n        });\n      },\n      onShapePointerDown: (shapeId) => {\n        set({ selectedShape: shapeId });\n      },\n    }),\n    {\n      client,\n      storageMapping: { shapes: true },\n      presenceMapping: { selectedShape: true },\n    }\n  )\n);\n\nexport default useStore;\n```\n\n----------------------------------------\n\nTITLE: Adding FloatingThreads to display comment threads in BlockNote\nDESCRIPTION: This example shows how to implement FloatingThreads to display floating comment threads below text highlights in the BlockNote editor.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-blocknote.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useThreads } from \"@liveblocks/react/suspense\";\nimport {\n  FloatingComposer,\n  FloatingThreads,\n  useCreateBlockNoteWithLiveblocks,\n} from \"@liveblocks/react-blocknote\";\nimport { BlockNoteView } from \"@blocknote/mantine\";\n\nfunction TextEditor() {\n  const editor = useCreateBlockNoteWithLiveblocks({});\n\n  const { threads } = useThreads();\n\n  return (\n    <div>\n      <BlockNoteView editor={editor} />\n      <FloatingComposer editor={editor} style={{ width: \"350px\" }} />\n      <FloatingThreads\n        editor={editor}\n        threads={threads}\n        style={{ width: \"350px\" }}\n      />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Threads using useThreads Hook in React\nDESCRIPTION: This snippet demonstrates how to use the useThreads hook to render a list of Thread components for each thread in the current room. It imports the necessary components and hooks, and maps through the threads to render them.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/default-components.mdx#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Thread } from \"@liveblocks/react-ui\";\nimport { useThreads } from \"../liveblocks.config\";\n\nfunction Component() {\n  const { threads } = useThreads();\n\n  return (\n    <>\n      {threads.map((thread) => (\n        <Thread key={thread.id} thread={thread} />\n      ))}\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Using Optional useRoom Hook Configuration\nDESCRIPTION: Example showing how to use the allowOutsideRoom option with useRoom hook to handle cases outside of a room context.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nuseRoom({ allowOutsideRoom: true })\n```\n\n----------------------------------------\n\nTITLE: Defining Presence Type in TypeScript for Liveblocks\nDESCRIPTION: This snippet shows how to define a Presence type in the liveblocks.config.ts file. It includes a cursor property that can be either coordinates or null for off-screen cursors.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/presence/guide.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// Presence type\nPresence: {\n  cursor: { x: number; y: number } | null;\n};\n```\n\n----------------------------------------\n\nTITLE: Handling Room Capacity Errors in React with Liveblocks\nDESCRIPTION: Example showing how to use useErrorListener hook from @liveblocks/react to handle room capacity errors. Demonstrates error code 4005 which indicates a full room, along with other potential error scenarios.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/what-happens-when-a-user-joins-a-room-at-maximum-capacity.mdx#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useErrorListener } from \"../liveblocks.config\";\n\nfunction App() {\n  // Listen for errors\n  useErrorListener((error) => {\n    switch (error.code) {\n      case -1:\n        // Authentication error\n        break;\n\n      case 4001:\n        // Could not connect because you don't have access to this room\n        break;\n\n      case 4005:\n        // Could not connect because room was full\n        break;\n\n      default:\n        // Unexpected error\n        break;\n    }\n  });\n\n  // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring LiveblocksProvider with Auth Endpoint\nDESCRIPTION: Sets up the LiveblocksProvider component on the client side to use the authentication endpoint instead of public API keys.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/remix.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n<LiveblocksProvider authEndpoint=\"/api/liveblocks-auth\">\n```\n\n----------------------------------------\n\nTITLE: Demonstrating Deprecated Room API Methods in Liveblocks Client\nDESCRIPTION: Shows the old API methods for entering and leaving rooms that are now deprecated but still supported, including enter(), getRoom(), and leave() methods on the client object.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-prosemirror/CHANGELOG.md#2025-04-11_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\n// Old APIs we'll no longer be recommending (but that will remain working)\nconst room = client.enter(\"my-room\", options);\nclient.getRoom(\"my-room\");\nclient.leave(\"my-room\");\n```\n\n----------------------------------------\n\nTITLE: Comparing Old and New Room API Patterns in Liveblocks Client\nDESCRIPTION: Shows the transition from the deprecated room management API to the new recommended pattern that supports entering/leaving the same room multiple times. The new API returns both the room object and a leave function for better resource management.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-zustand/CHANGELOG.md#2025-04-11_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\n// Old APIs we'll no longer be recommending (but that will remain working)\nconst room = client.enter(\"my-room\", options);\nclient.getRoom(\"my-room\");\nclient.leave(\"my-room\");\n```\n\nLANGUAGE: typescript\nCODE:\n```\n// New API we'll be recommending instead\nconst { room, leave } = client.enterRoom(\"my-room\", options);\nleave();\n```\n\n----------------------------------------\n\nTITLE: Implementing Mention Suggestions in Liveblocks Config\nDESCRIPTION: Shows how to implement the resolveMentionSuggestions function to handle user mention queries and return matching user IDs.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/users-and-mentions.mdx#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nconst client = createClient({\n  // ...\n  async resolveUsers({ userIds }) {\n    // ...\n  },\n  async resolveMentionSuggestions({ text, roomId }) {\n    // \"mar\"\n    console.log(text);\n\n    // Return an array of user IDs for the query \"mar\"\n    let userIds;\n\n    if (text) {\n      // If there's a query, get user IDs from your back end that match\n      userIds = await __queryUserIds__(text);\n    } else {\n      // If there's no query, get all of the room's user IDs\n      userIds = await __getAllUserIds__();\n    }\n\n    // [\"marc@example.com\", \"marissa@example.com\"]\n    console.log(userIds);\n    return userIds;\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Creating React Email Templates\nDESCRIPTION: Shows how to create React-based email templates for different notification types. Handles both unread mentions and unread replies with distinct layouts.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-send-email-notifications-of-unread-comments.mdx#2025-04-11_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nlet email;\nswitch (emailData.type) {\n  case \"unreadMention\": {\n    email = (\n      <div>\n        <div>\n          @{emailData.comment.author.id} at {emailData.comment.createdAt}\n        </div>\n        <div>{emailData.comment.reactBody}</div>\n      </div>\n    );\n    break;\n  }\n\n  case \"unreadReplies\": {\n    email = (\n      <div>\n        {emailData.comments.map((comment) => (\n          <div key={comment.id}>\n            <div>\n              @{comment.author.id} at {comment.createdAt}\n            </div>\n            <div>{comment.reactBody}</div>\n          </div>\n        ))}\n      </div>\n    );\n    break;\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Server-side Document Manipulation\nDESCRIPTION: Implementation of server-side document access and modification using withLexicalDocument.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/text-editor/lexical.mdx#2025-04-11_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nawait withLexicalDocument(\n  { roomId: \"my-room-id\", client: liveblocks },\n  async (doc) => {\n    // Get editor content\n    const textContent = doc.getTextContent();\n\n    await doc.update(async () => {\n      // Make real-time updates\n      // ...\n    });\n  }\n);\n```\n\n----------------------------------------\n\nTITLE: Initializing Webhook Handler and Comment Data Retrieval in TypeScript\nDESCRIPTION: Sets up a webhook handler to verify requests and retrieve comment data using the Liveblocks client. Includes webhook secret validation and error handling.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-send-email-notifications-when-comments-are-created.mdx#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Liveblocks, WebhookHandler } from \"@liveblocks/node\";\n\nconst WEBHOOK_SECRET = \"YOUR_WEBHOOK_SECRET_KEY\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\nconst API_SECRET = \"{{SECRET_KEY}}\";\nconst liveblocks = new Liveblocks({ secret: API_SECRET });\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  if (event.type === \"commentCreated\") {\n    const { roomId, threadId, commentId } = event.data;\n\n    try {\n      const [comment, { participantIds }] = await Promise.all([\n        liveblocks.getComment({ roomId, threadId, commentId }),\n        liveblocks.getThreadParticipants({ roomId, threadId }),\n      ]);\n    } catch (err) {\n      console.log(err);\n      return new Response(\"Could not fetch comment data\", { status: 500 });\n    }\n  }\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Room Permissions in Liveblocks\nDESCRIPTION: Creates a room with specific access permissions using the Liveblocks Node SDK. This example defines default read access, with write permissions granted to specific groups and users.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/express.mdx#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nconst room = await liveblocks.createRoom(\"my-room-id\", {\n  defaultAccesses: [\"room:read\", \"room:presence:write\"],\n  groupsAccesses: {\n    \"my-group-id\": [\"room:write\"],\n  },\n  usersAccesses: {\n    \"my-user-id\": [\"room:write\"],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Customizing AI Component Names in Liveblocks TipTap\nDESCRIPTION: Shows how to customize the name used in AI components through the useLiveblocksExtension hook's ai.name option, affecting the terminology used throughout AI features.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_50\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useLiveblocksExtension } from \"@liveblocks/react-tiptap\";\nimport { useEditor } from \"@tiptap/react\";\n\nfunction TextEditor() {\n  const liveblocks = useLiveblocksExtension({\n    ai: {\n      // +++\n      // \"Ask Liveblocks anything…\", \"Liveblocks is thinking…\", etc\n      name: \"Liveblocks\",\n      // +++\n    },\n  });\n\n  const editor = useEditor({\n    extensions: [\n      liveblocks,\n      // ...\n    ],\n  });\n\n  // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Integrating Zustand with Liveblocks Middleware in TypeScript\nDESCRIPTION: Example showing how to integrate the Liveblocks middleware with Zustand for real-time collaboration. The middleware maps state properties to presence and storage, enabling synchronization between clients.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-lexical/CHANGELOG.md#2025-04-11_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\nimport create from \"zustand\";\nimport { createClient } from \"@liveblocks/client\";\nimport { middleware } from \"@liveblocks/zustand\";\n\nconst client = createClient({ /*...*/ });\n\ntype State = {\n  draft: string;\n  isTyping: boolean;\n  todos: Todo[];\n  setDraft: (draft: string) => void;\n  addTodo: () => void;\n  deleteTodo: (index: number) => void;\n};\n\ncreate(\n  middleware<State>(/* ... */, {\n    client,\n    presenceMapping: { isTyping: true },\n    storageMapping: { todos: true }\n  })\n);\n```\n\n----------------------------------------\n\nTITLE: Exporting Suspense Hooks in Liveblocks Configuration\nDESCRIPTION: Shows how to export Suspense versions of Liveblocks hooks from the configuration file for use in components.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/notifications/hooks.mdx#2025-04-11_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\n// ...\n\nexport const {\n  suspense: {\n    // Export from here to use Suspense hooks\n    useInboxNotifications,\n    useUser,\n  },\n} = createLiveblocksContext(client, {});\n```\n\n----------------------------------------\n\nTITLE: Configuring Liveblocks Client with Firebase Authentication\nDESCRIPTION: Sets up the Liveblocks client in the frontend using Firebase for authentication. This code initializes Firebase and creates a Liveblocks client that uses a Firebase callable function for authentication.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/firebase.mdx#2025-04-11_snippet_2\n\nLANGUAGE: js\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\nimport firebase from \"firebase\";\nimport \"firebase/functions\";\n\nfirebase.initializeApp({\n  /* Firebase config */\n});\n\nconst auth = firebase.functions().httpsCallable(\"liveblocks-auth\");\n\n// Create a Liveblocks client\nconst client = createClient({\n  authEndpoint: async (room) => (await auth({ room })).data,\n});\n```\n\n----------------------------------------\n\nTITLE: Handling Room Capacity Errors in JavaScript with Liveblocks Client\nDESCRIPTION: Example demonstrating how to use room.subscribe(\"error\") from @liveblocks/client to handle room capacity errors. Shows handling of error code 4005 for full rooms and other error scenarios.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/what-happens-when-a-user-joins-a-room-at-maximum-capacity.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n// No error is thrown when the room is full\nconst { room, leave } = client.enterRoom(\"my-room\", {\n  /* ... */\n});\n\n// Listen for errors\nconst unsubscribe = room.subscribe(\"error\", (error) => {\n  switch (error.code) {\n    case -1:\n      // Authentication error\n      break;\n\n    case 4001:\n      // Could not connect because you don't have access to this room\n      break;\n\n    case 4005:\n      // Could not connect because room was full\n      break;\n\n    default:\n      // Unexpected error\n      break;\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Adding Liveblocks Room to Next.js Page\nDESCRIPTION: Demonstrates how to import and use the Room component in a Next.js page file, wrapping the collaborative app components.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Room } from \"./Room\";\nimport { CollaborativeApp } from \"./CollaborativeApp\";\n\nexport default function Page() {\n  return (\n    <Room>\n      <CollaborativeApp />\n    </Room>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Comment Threads Component\nDESCRIPTION: Component implementation for displaying comment threads using AnchoredThreads and FloatingThreads components.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/text-editor/blocknote.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nexport function Threads({ editor }) {\n  const { threads } = useThreads();\n\n  return (\n    <>\n      <AnchoredThreads editor={editor} threads={threads} />\n      <FloatingThreads editor={editor} threads={threads} />\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Using shouldInitiallyConnect option with client.enter\nDESCRIPTION: Example of using the new shouldInitiallyConnect option when calling client.enter to control initial connection to Liveblocks servers.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/0.19.mdx#2025-04-11_snippet_10\n\nLANGUAGE: tsx\nCODE:\n```\nclient.enter(\"room\", {\n  initialPresence: {},\n  shouldInitiallyConnect: false, // 👈 for SSR using the @liveblocks/client package\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Webhook Handler with Email Notifications in Next.js\nDESCRIPTION: Example of setting up a Next.js route handler for webhooks that processes thread notifications and prepares email content using @liveblocks/emails. Shows integration with webhook verification and handling different types of notifications.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-emails.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { isThreadNotificationEvent, WebhookHandler } from \"@liveblocks/node\";\nimport { Liveblocks } from \"@liveblocks/node\";\nimport { prepareThreadNotificationEmailAsReact } from \"@liveblocks/emails\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nconst webhookHandler = new WebhookHandler(\n  process.env.LIVEBLOCKS_WEBHOOK_SECRET_KEY as string\n);\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  if (isThreadNotificationEvent(event)) {\n    const emailData = await prepareThreadNotificationEmailAsReact(\n      liveblocks,\n      event\n    );\n\n    if (emailData.type === \"unreadMention\") {\n      const email = (\n        <div>\n          <div>\n            @{emailData.comment.author.id} at {emailData.comment.createdAt}\n          </div>\n          <div>{emailData.comment.body}</div>\n        </div>\n      );\n\n      // Send unread mention email\n      // ...\n    }\n  }\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Up Liveblocks Client with LiveblocksProvider\nDESCRIPTION: React component that sets up the Liveblocks client using LiveblocksProvider to enable real-time collaboration in virtual rooms.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-notifications.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { LiveblocksProvider } from \"@liveblocks/react/suspense\";\nimport { Room } from \"./Room\";\n\nexport default function App() {\n  return (\n    <LiveblocksProvider publicApiKey={\"{{PUBLIC_KEY}}\"}>      <Room />\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Using Toolbar.SectionCollaboration in React-Tiptap\nDESCRIPTION: Shows how to use the Toolbar.SectionCollaboration component to add an 'add comment' button to the toolbar for collaborative editing features.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_18\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Toolbar } from \"@liveblocks/react-tiptap\";\n\n<Toolbar editor={editor}>\n  // +++\n  <Toolbar.SectionCollaboration />\n  // +++\n</Toolbar>;\n```\n\n----------------------------------------\n\nTITLE: Using TPresence Generic with Zustand Middleware in TypeScript\nDESCRIPTION: Example of using the TPresence generic argument with Liveblocks Zustand middleware to type the presence data of others in the room. This shows how to access another user's presence typing status in a component.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/liveblocks-codemod/CHANGELOG.md#2025-04-11_snippet_18\n\nLANGUAGE: typescript\nCODE:\n```\ntype Presence = {\n  isTyping: true;\n}\n\nconst useStore = create(\n  middleware<State, Presence>(/* ... */, {\n    client,\n    presenceMapping: { isTyping: true },\n    storageMapping: { todos: true }\n  })\n);\n\n// In your component\nuseStore(state => state.liveblocks.others[0].presence?.isTyping)\n```\n\n----------------------------------------\n\nTITLE: Rendering an Inbox Notification in React UI\nDESCRIPTION: This snippet demonstrates how to render a single inbox notification in a Liveblocks Live project using the React UI framework. The `InboxNotification` component is provided with the `inboxNotification` prop for rendering notifications.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_29\n\nLANGUAGE: tsx\nCODE:\n```\n<InboxNotification inboxNotification={inboxNotification} />\n```\n\n----------------------------------------\n\nTITLE: Defining User Metadata Types in Liveblocks Config\nDESCRIPTION: Defines the types for user metadata in the Liveblocks configuration file, including custom fields like name, avatar, and colors.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/nextjs.mdx#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare global\n  interface Liveblocks {\n    UserMeta: {\n      id: string;\n\n      // Example, use any JSON-compatible data in your metadata\n      info: {\n        name: string;\n        avatar: string;\n        colors: string[];\n      }\n    }\n\n    // Other type definitions\n    // ...\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Zustand Store Implementation with Liveblocks Middleware\nDESCRIPTION: Integration of Liveblocks middleware with a Zustand store, showing how to configure real-time collaboration for a to-do list application with presence and storage mapping.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-core/CHANGELOG.md#2025-04-11_snippet_24\n\nLANGUAGE: typescript\nCODE:\n```\nimport create from \"zustand\";\nimport { createClient } from \"@liveblocks/client\";\nimport { middleware } from \"@liveblocks/zustand\";\n\nconst client = createClient({ /*...*/ });\n\ntype State = {\n  draft: string;\n  isTyping: boolean;\n  todos: Todo[];\n  setDraft: (draft: string) => void;\n  addTodo: () => void;\n  deleteTodo: (index: number) => void;\n};\n\ncreate(\n  middleware<State>(/* ... */, {\n    client,\n    presenceMapping: { isTyping: true },\n    storageMapping: { todos: true }\n  })\n);\n```\n\n----------------------------------------\n\nTITLE: Complete Editor Setup with liveblocksConfig\nDESCRIPTION: Comprehensive example showing how to create and use a liveblocksConfig configuration object with LexicalComposer. This setup illustrates the proper initialization of a collaborative Lexical editor.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { LexicalComposer } from \"@lexical/react/LexicalComposer\";\nimport { RichTextPlugin } from \"@lexical/react/LexicalRichTextPlugin\";\nimport { ContentEditable } from \"@lexical/react/LexicalContentEditable\";\nimport { LexicalErrorBoundary } from \"@lexical/react/LexicalErrorBoundary\";\nimport { liveblocksConfig, LiveblocksPlugin } from \"@liveblocks/react-lexical\";\n\nconst initialConfig = liveblocksConfig({\n  namespace: \"MyEditor\",\n  theme: {},\n  nodes: [],\n  onError: (err) => console.error(err),\n});\n\nfunction Editor() {\n  return (\n    <LexicalComposer initialConfig={initialConfig}>\n      <LiveblocksPlugin>\n        <FloatingThreads />\n        <FloatingComposer />\n        <AnchoredThreads />\n      </LiveblocksPlugin>\n      <RichTextPlugin\n        contentEditable={<ContentEditable />}\n        placeholder={<div>Enter some text...</div>}\n        ErrorBoundary={LexicalErrorBoundary}\n      />\n    </LexicalComposer>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Liveblocks Client with Prevent Unsaved Changes Option\nDESCRIPTION: This snippet shows how to create a Liveblocks client instance with the `preventUnsavedChanges` option enabled, which is necessary for applications that require synchronization state handling.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-client/CHANGELOG.md#2025-04-11_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\ncreateClient({ preventUnsavedChanges: true })\n```\n\n----------------------------------------\n\nTITLE: Enabling Unsaved Changes Prevention in JavaScript\nDESCRIPTION: Shows how to enable the prevention of unsaved changes when closing browser tabs in a JavaScript application using createClient.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react-ui/CHANGELOG.md#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\ncreateClient({ preventUnsavedChanges: true })\n```\n\n----------------------------------------\n\nTITLE: Integrating Zustand Store with Liveblocks Middleware\nDESCRIPTION: Example showing how to integrate Liveblocks middleware with a Zustand store, moving the State type parameter to the middleware level and configuring presence and storage mappings.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-zustand/CHANGELOG.md#2025-04-11_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\nimport create from \"zustand\";\nimport { createClient } from \"@liveblocks/client\";\nimport { middleware } from \"@liveblocks/zustand\";\n\nconst client = createClient({ /*...*/ });\n\ntype State = {\n  draft: string;\n  isTyping: boolean;\n  todos: Todo[];\n  setDraft: (draft: string) => void;\n  addTodo: () => void;\n  deleteTodo: (index: number) => void;\n};\n\ncreate(\n  middleware<State>(/* ... */, {\n    client,\n    presenceMapping: { isTyping: true },\n    storageMapping: { todos: true }\n  })\n);\n```\n\n----------------------------------------\n\nTITLE: Implementing the Provider in Next.js Layout\nDESCRIPTION: Integration of the NotificationsProvider in the Next.js layout.tsx file to wrap the application components. This ensures all child components have access to Liveblocks functionality.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-notifications.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { NotificationsProvider } from \"./NotificationsProvider\";\nimport { MyApp } from \"./MyApp\";\n\nexport default function Layout({ children }) {\n  return (\n    <NotificationsProvider>\n      <MyApp />\n    </NotificationsProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Comment Body Components in React\nDESCRIPTION: Shows implementation of custom Mention and Link components within Comment.Body. Includes examples of component props and usage.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_19\n\nLANGUAGE: tsx\nCODE:\n```\n<Comment.Body\n  components={{\n    Mention: ({ userId }) => <Comment.Mention>@{userId}</Comment.Mention>,\n  }}\n/>\n```\n\nLANGUAGE: tsx\nCODE:\n```\n<Comment.Body\n  components={{\n    Link: ({ href, children }) => (\n      <Comment.Link href={href}>{children}</Comment.Link>\n    ),\n  }}\n/>\n```\n\n----------------------------------------\n\nTITLE: Fetching Threads with useThreads Hook in React\nDESCRIPTION: Demonstrates how to use the useThreads hook to retrieve a list of threads in the current room and render them using the Thread component.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/hooks.mdx#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useThreads } from \"../liveblocks.config\";\n\nfunction Component() {\n  const { threads } = useThreads();\n\n  // [{ type: \"thread\", id: \"th_sf8s6sh...\", ... }, ...]\n  console.log(threads);\n\n  return (\n    <>\n      {threads.map((thread) => (\n        <Thread key={thread.id} thread={thread} />\n      ))}\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Get and Update Notification Settings with Liveblocks Client\nDESCRIPTION: Demonstrates how to use the Liveblocks client to retrieve and update user notification settings. Shows methods for getting current settings and updating them with new configurations.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-core/CHANGELOG.md#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { createClient } from '@liveblocks/client'\nconst client = createClient({ ... })\n\nconst settings = await client.getNotificationSettings();\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst updatedSettings = await client.updateNotificationSettings({\n  email: {\n    thread: false,\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Using useInboxNotifications with Pagination\nDESCRIPTION: This snippet shows how to use the `useInboxNotifications` hook with pagination support, introduced in Liveblocks 2.9. It demonstrates accessing pagination-related properties such as `fetchMore`, `isFetchingMore`, `hasFetchedAll`, and `fetchMoreError`.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-zustand/CHANGELOG.md#2025-04-11_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\n\"const {\\n  inboxNotifications,\\n  isLoading,\\n  error,\\n\\n  // ✨ New in Liveblocks 2.9\\n  fetchMore,\\n  isFetchingMore,\\n  hasFetchedAll,\\n  fetchMoreError,\\n} = useInboxNotifications();\"\n```\n\n----------------------------------------\n\nTITLE: Adding Undo/Redo Toolbar with Yjs in TSX\nDESCRIPTION: This TypeScript snippet creates a toolbar component with undo and redo buttons using a Yjs UndoManager to manage actions. It requires the yjs library and a CSS module for styling. The component is responsible for rendering the toolbar and handling the click events for managing editor states.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-codemirror-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_11\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as Y from \"yjs\";\nimport styles from \"./Toolbar.module.css\";\n\ntype Props = {\n  yUndoManager: Y.UndoManager;\n};\n\nexport function Toolbar({ yUndoManager }: Props) {\n  return (\n    <div className={styles.toolbar}>\n      <button className={styles.button} onClick={() => yUndoManager.undo()}>\n        Undo\n      </button>\n      <button className={styles.button} onClick={() => yUndoManager.redo()}>\n        Redo\n      </button>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Liveblocks Room Component in Next.js\nDESCRIPTION: React component that sets up a Liveblocks room with authentication and provides a container for collaborative features. Uses ClientSideSuspense for loading states.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-monaco-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { ReactNode } from \"react\";\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n  ClientSideSuspense,\n} from \"@liveblocks/react/suspense\";\n\nexport function Room({ children }: { children: ReactNode }) {\n  return (\n    <LiveblocksProvider authEndpoint=\"/api/liveblocks-auth\">\n      <RoomProvider id=\"my-room\">\n        <ClientSideSuspense fallback={<div>Loading…</div>}>\n          {children}\n        </ClientSideSuspense>\n      </RoomProvider>\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Multiple Cursors for Other Users in React\nDESCRIPTION: This snippet shows how to render cursors for other online users by mapping through the 'others' array, filtering out null cursors, and rendering Cursor components with their positions.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/live-cursors/guide.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nreturn (\n  <div\n    style={{ width: \"100vw\", height: \"100vh\" }}\n    onPointerMove={handlePointerMove}\n    onPointerLeave={handlePointerLeave}\n  >\n    Cursor: {JSON.stringify(myPresence.cursor)}\n    {others\n      .filter((other) => other.presence.cursor !== null)\n      .map(({ connectionId, presence }) => (\n        <Cursor\n          key={connectionId}\n          x={presence.cursor.x}\n          y={presence.cursor.y}\n        />\n      ))}\n  </div>\n);\n```\n\n----------------------------------------\n\nTITLE: Creating Live Avatars Component with Liveblocks Hooks\nDESCRIPTION: This React component uses Liveblocks hooks (useOthers and useSelf) to display avatars for all online users, including the current user, in the collaborative editor.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-lexical-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_13\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useOthers, useSelf } from \"@/liveblocks.config\";\nimport styles from \"./Avatars.module.css\";\n\nexport function Avatars() {\n  const users = useOthers();\n  const currentUser = useSelf();\n\n  return (\n    <div className={styles.avatars}>\n      {users.map(({ connectionId, info }) => {\n        return (\n          <Avatar key={connectionId} picture={info.picture} name={info.name} />\n        );\n      })}\n\n      {currentUser && (\n        <div className=\"relative ml-8 first:ml-0\">\n          <Avatar\n            picture={currentUser.info.picture}\n            name={currentUser.info.name}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport function Avatar({ picture, name }: { picture: string; name: string }) {\n  return (\n    <div className={styles.avatar} data-tooltip={name}>\n      <img\n        src={picture}\n        className={styles.avatar_picture}\n        data-tooltip={name}\n      />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing and Modifying Liveblocks Storage in TypeScript\nDESCRIPTION: This snippet demonstrates how to access a LiveObject from storage and modify its properties using the get and set methods.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/modifying-storage-data/guide.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst person = storage.get(\"person\");\nperson.set(\"name\", \"Albert\");\n```\n\n----------------------------------------\n\nTITLE: TypeScript Thread Metadata Configuration\nDESCRIPTION: Configuration for typing custom thread metadata in TypeScript using global declarations.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_4\n\nLANGUAGE: ts\nCODE:\n```\ndeclare global {\n  interface Liveblocks {\n    // Set your custom metadata types\n    // +++\n    ThreadMetadata: {\n      // Example types, e.g. colors, coordinates\n      color: string;\n      x: number;\n      y: number;\n    };\n    // +++\n\n    // Other types\n    // ...\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Entering Liveblocks Room\nDESCRIPTION: Dispatching action to enter a Liveblocks room and start syncing with Redux state.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-redux.mdx#2025-04-11_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nimport { actions } from \"@liveblocks/redux\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nconst dispatch = useDispatch();\n\ndispatch(actions.enterRoom(\"roomId\"));\n```\n\n----------------------------------------\n\nTITLE: Setting up Collaborative Tiptap Editor\nDESCRIPTION: Implementation of a collaborative text editor using Tiptap with Liveblocks integration, including floating toolbar and threading support.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-tiptap.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { useLiveblocksExtension, FloatingToolbar } from \"@liveblocks/react-tiptap\";\nimport { useEditor, EditorContent } from \"@tiptap/react\";\nimport StarterKit from \"@tiptap/starter-kit\";\nimport { Threads } from \"./Threads\";\n\nexport function Editor() {\n  const liveblocks = useLiveblocksExtension();\n\n  const editor = useEditor({\n    extensions: [\n      liveblocks,\n      StarterKit.configure({\n        // The Liveblocks extension comes with its own history handling\n        history: false,\n      }),\n    ],\n    immediatelyRender: false,\n  });\n\n  return (\n    <div>\n      <EditorContent editor={editor} className=\"editor\" />\n      <Threads editor={editor} />\n      <FloatingToolbar editor={editor} />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Next.js API Endpoint for Liveblocks Notifications\nDESCRIPTION: A basic Next.js route handler that receives webhook events from Liveblocks. This endpoint will process notification events and handle the logic for sending email notifications for unread comments.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-send-email-notifications-of-unread-comments.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Handle webhooks and notifications\n  // ...\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Threads with useCreateThread Hook in React\nDESCRIPTION: Demonstrates how to use the useCreateThread hook in conjunction with primitives to create a custom composer that creates a new thread on submit.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/hooks.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  Composer,\n  ComposerSubmitComment,\n} from \"@liveblocks/react-ui/primitives\";\nimport { useCreateThread } from \"../liveblocks.config.ts\";\nimport { FormEvent } from \"react\";\n\n// A custom composer that creates a thread on submit\nfunction MyComposer() {\n  const createThread = useCreateThread();\n\n  function handleComposerSubmit(\n    { body }: ComposerSubmitComment,\n    event: FormEvent<HTMLFormElement>\n  ) {\n    event.preventdefault();\n\n    const thread = createThread({\n      body,\n      metadata: {},\n    });\n  }\n\n  return (\n    <Composer.Form onComposerSubmit={handleComposerSubmit}>\n      <Composer.Editor />\n      <Composer.Submit>Create thread</Composer.Submit>\n    </Composer.Form>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Displaying Online Users with Liveblocks Presence\nDESCRIPTION: Enhances the React component to display the number of other online users by accessing the Liveblocks state through Redux.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-react-redux-and-liveblocks.mdx#2025-04-11_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nimport React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { actions } from \"@liveblocks/redux\";\n\nimport \"./App.css\";\n\nfunction WhoIsHere() {\n  const othersUsersCount = useSelector(\n    (state) => state.liveblocks.others.length\n  );\n\n  return (\n    <div className=\"who_is_here\">\n      There are {othersUsersCount} other users online\n    </div>\n  );\n}\n\nexport default function App() {\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(actions.enterRoom(\"redux-demo-room\"));\n\n    return () => {\n      dispatch(actions.leaveRoom(\"redux-demo-room\"));\n    };\n  }, [dispatch]);\n\n  return (\n    <div className=\"container\">\n      <WhoIsHere />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Using Liveblocks Data from Redux Store in React\nDESCRIPTION: React component showing how to access and use Liveblocks data from the Redux store. This example displays the number of other users online in the room.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/redux.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { useSelector } from \"react-redux\";\n\nexport function Room() {\n  const others = useSelector((state) => state.liveblocks.others);\n  const userCount = others.length;\n  return <div>There are {userCount} other user(s) online</div>;\n}\n```\n\n----------------------------------------\n\nTITLE: Using Pagination with useThreads Hook\nDESCRIPTION: This code snippet demonstrates how to use the new pagination support in the useThreads hook, introduced in Liveblocks 2.9. It includes new properties for fetching more threads and checking the fetching status.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-prosemirror/CHANGELOG.md#2025-04-11_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nconst {\n  threads,\n  isLoading,\n  error,\n\n  // ✨ New in Liveblocks 2.9\n  fetchMore,\n  isFetchingMore,\n  hasFetchedAll,\n  fetchMoreError,\n} = useThreads({ query });\n```\n\n----------------------------------------\n\nTITLE: RoomCreatedEvent Schema and Example in TypeScript\nDESCRIPTION: This snippet defines the TypeScript schema for the RoomCreatedEvent and provides an example of the event object. This event is triggered when a new room is created.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/webhooks.mdx#2025-04-11_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\n// Schema\ntype RoomCreatedEvent = {\n  type: \"roomCreated\";\n  data: {\n    projectId: string;\n    roomId: string;\n    createdAt: string;\n  };\n};\n\n// Example\nconst roomCreatedEvent = {\n  type: \"roomCreated\",\n  data: {\n    projectId: \"my-project-id\",\n    roomId: \"my-room-id\",\n    createdAt: \"2021-10-06T01:45:56.558Z\",\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Subscribing to Storage Status Changes with TypeScript\nDESCRIPTION: Shows how to subscribe to storage status changes using the room.subscribe method. The callback function handles different status states: not-loaded, loading, synchronizing, and synchronized.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-lexical/CHANGELOG.md#2025-04-11_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\nroom.subscribe(\"storage-status\", (status) => {\n  switch (status) {\n    case \"not-loaded\":\n      break;\n    case \"loading\":\n      break;\n    case \"synchronizing\":\n      break;\n    case \"synchronized\":\n      break;\n    default:\n      break;\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Checking Thread Notification Events\nDESCRIPTION: Shows how to verify thread notification events and check user permissions. Includes logic for validating email channel notifications and user access rights.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-send-email-notifications-of-unread-comments.mdx#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler, isThreadNotificationEvent } from \"@liveblocks/node\";\n\nconst WEBHOOK_SECRET = \"YOUR_WEBHOOK_SECRET_KEY\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  if (isThreadNotificationEvent(event) && event.data.channel === \"email\") {\n    if (!__hasRoomAccess__(event.userId, event.roomId)) {\n      return new Response(null, { status: 200 });\n    }\n\n    const emailAddress = __getEmailAddressFromDB__(event.userId);\n  }\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Defining UserMeta Type in Liveblocks Configuration\nDESCRIPTION: This code snippet adds TypeScript type definitions for user metadata by extending the global Liveblocks interface. It specifies the structure of user metadata including id, name, color, and avatar URL.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-add-users-to-liveblocks-text-editor.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare global {\n  interface Liveblocks {\n    UserMeta: {\n      id: string;\n\n      info: {\n        name: string;\n        color: string;\n        avatar: string;\n\n        // Your custom metadata\n        // ...\n      };\n    };\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Handling Storage Update Events\nDESCRIPTION: Extended webhook handler implementation that checks for storageUpdated event type and extracts the roomId for database updates.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-storage-document-data-to-a-supabase-postgres-database.mdx#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\n\n// Add your signing key from a project's webhooks dashboard\nconst WEBHOOK_SECRET = \"YOUR_SIGNING_SECRET\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Verify if this is a real webhook request\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  // When Storage document data has been updated\n  if (event.type === \"storageUpdated\") {\n    const { roomId } = event.data;\n\n    // Update database\n    // ...\n  }\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Checking Text Format Status in React-Lexical\nDESCRIPTION: Demonstrates how to check if a text format is active in the current selection using isTextFormatActive utility.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_40\n\nLANGUAGE: tsx\nCODE:\n```\nimport { isTextFormatActive } from \"@liveblocks/react-lexical\";\n\n// \"true\" | \"false\"\nconst isActive = isTextFormatActive(editor, \"bold\");\n```\n\n----------------------------------------\n\nTITLE: Using useNotificationSettings Hook in React\nDESCRIPTION: Example showing how to use the useNotificationSettings hook to get and update user notification settings in a React component. The hook returns both the current settings and a function to update them.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n// A suspense version of this hook is available\nimport { useNotificationSettings } from \"@liveblocks/react\";\n\nconst [{ isLoading, error, settings }, updateSettings] =\n  useNotificationSettings();\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst onSave = () => {\n  updateSettings({\n    slack: {\n      textMention: true,\n    },\n  });\n};\n```\n\n----------------------------------------\n\nTITLE: Connecting to Liveblocks Room in React Component\nDESCRIPTION: Creates a React component that connects to a Liveblocks room when mounted and leaves the room when unmounted using Redux actions.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-react-redux-and-liveblocks.mdx#2025-04-11_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nimport React, { useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { actions } from \"@liveblocks/redux\";\n\nimport \"./App.css\";\n\nexport default function App() {\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(actions.enterRoom(\"redux-demo-room\"));\n\n    return () => {\n      dispatch(actions.leaveRoom(\"redux-demo-room\"));\n    };\n  }, [dispatch]);\n\n  return <div className=\"container\">To-do list app</div>;\n}\n```\n\n----------------------------------------\n\nTITLE: Using LiveblocksProvider Instead of createClient (v2.0.0)\nDESCRIPTION: Example showing the transition from using createClient to using the new LiveblocksProvider component introduced in v2.0.0 for configuring the Liveblocks client.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-client/CHANGELOG.md#2025-04-11_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\n// ❌ Before\nconst client = createClient(/* options */);\n\n// ✅ After\n<LiveblocksProvider /* options */>\n  <App />\n</LiveblocksProvider>\n```\n\n----------------------------------------\n\nTITLE: Enabling Dark Mode for Liveblocks React UI\nDESCRIPTION: These snippets demonstrate two different methods to enable dark mode for Liveblocks React UI components. The first uses the system theme, while the second uses CSS classes or data attributes.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/styling-and-customization.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n// Dark mode using the system theme with `prefers-color-scheme`\nimport \"@liveblocks/react-ui/styles/dark/media-query.css\";\n```\n\nLANGUAGE: typescript\nCODE:\n```\n// Dark mode using `className=\"dark\"`, `data-theme=\"dark\"`, or `data-dark=\"true\"`\nimport \"@liveblocks/react-ui/styles/dark/attributes.css\";\n```\n\n----------------------------------------\n\nTITLE: Initializing Authentication Session\nDESCRIPTION: Sets up a Liveblocks authentication session with user ID and optional user info.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/1.2.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nconst session = liveblocks.prepareSession(\n  user.id,\n  { userInfo: user.info } // Optional\n);\n```\n\n----------------------------------------\n\nTITLE: Implementing User Resolution in Liveblocks Config\nDESCRIPTION: Shows how to implement the resolveUsers function in the Liveblocks configuration to fetch and return user information based on user IDs.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/users-and-mentions.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst client = createClient({\n  // ...\n  async resolveUsers({ userIds }) {\n    // [\"marc@example.com\", ...]\n    console.log(userIds);\n\n    // Get users from your back end\n    const users = await __fetchUsers__(userIds);\n\n    // [{ name: \"Marc\", avatar: \"https://example.com/marc.png\" }, ...]\n    console.log(users);\n\n    // Return a list of users\n    return users;\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using Liveblocks Hooks in Next.js Component\nDESCRIPTION: Example of using the useOthers hook from Liveblocks to display the number of other users connected to the room in a React component.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { useOthers } from \"@liveblocks/react/suspense\";\n\nexport function CollaborativeApp() {\n  const others = useOthers();\n  const userCount = others.length;\n  return <div>There are {userCount} other user(s) online</div>;\n}\n```\n\n----------------------------------------\n\nTITLE: Using useInboxNotifications Hook with Pagination\nDESCRIPTION: Demonstrates how to use the useInboxNotifications hook with new pagination support in @liveblocks/react.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node/CHANGELOG.md#2025-04-11_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nconst {\n  inboxNotifications,\n  isLoading,\n  error,\n\n  // ✨ New in Liveblocks 2.9\n  fetchMore,\n  isFetchingMore,\n  hasFetchedAll,\n  fetchMoreError,\n} = useInboxNotifications();\n```\n\n----------------------------------------\n\nTITLE: Standard Zustand Store Configuration\nDESCRIPTION: Example of a standard Zustand store setup before integration with Liveblocks, showing a basic to-do list store with state type definition.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node/CHANGELOG.md#2025-04-11_snippet_18\n\nLANGUAGE: typescript\nCODE:\n```\nimport create from \"zustand\";\n\ntype State = {\n  draft: string;\n  isTyping: boolean;\n  todos: Todo[];\n  setDraft: (draft: string) => void;\n  addTodo: () => void;\n  deleteTodo: (index: number) => void;\n};\n\ncreate<State>(/* ... */);\n```\n\n----------------------------------------\n\nTITLE: Customizing AnchoredThreads in Lexical Editor TypeScript\nDESCRIPTION: Enables customization of threads within `AnchoredThreads` using custom components and CSS properties. It allows setting a custom width, applying classes, and modifying thread display settings.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_32\n\nLANGUAGE: tsx\nCODE:\n```\n<AnchoredThreads\\n  threads={threads}\\n  style={{ width: \"350px\" }}\\n  className=\"my-anchored-thread\"\\n  components={{\\n    Thread: (props) => (\\n      <Thread\\n        {...props}\\n        className=\"border shadow\"\\n        style={{ background: \"white\" }}\\n      />\\n    ),\\n  }}\\n/>\n```\n\n----------------------------------------\n\nTITLE: Rendering To-Dos and Subscribing to Changes\nDESCRIPTION: This snippet shows how to render the to-do items and subscribe to changes in the Liveblocks storage. It creates a function to render todos and subscribes to updates in the todo list.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-javascript-and-liveblocks.mdx#2025-04-11_snippet_13\n\nLANGUAGE: jsx\nCODE:\n```\nimport { createClient, LiveList } from \"@liveblocks/client\";\n\nconst client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n\nasync function run() {\n  const { room, leave } = client.enterRoom(\"javascript-todo-app\", {\n    initialPresence: { isTyping: false },\n    initialStorage: { todos: new LiveList() },\n  });\n\n  const whoIsHere = document.getElementById(\"who_is_here\");\n  const todoInput = document.getElementById(\"todo_input\");\n  const someoneIsTyping = document.getElementById(\"someone_is_typing\");\n  const todosContainer = document.getElementById(\"todos_container\");\n\n  const { root } = await room.getStorage();\n\n  let todos = root.get(\"todos\");\n\n  room.subscribe(\"others\", (others) => {\n    /* ... */\n  });\n\n  todoInput.addEventListener(\"keydown\", (e) => {\n    /* ... */\n  });\n\n  todoInput.addEventListener(\"blur\", () => {\n    /* ... */\n  });\n\n  function renderTodos() {\n    todosContainer.innerHTML = \"\";\n\n    for (let i = 0; i < todos.length; i++) {\n      const todo = todos.get(i);\n\n      const todoContainer = document.createElement(\"div\");\n      todoContainer.classList.add(\"todo_container\");\n\n      const todoText = document.createElement(\"div\");\n      todoText.classList.add(\"todo\");\n      todoText.innerHTML = todo.text;\n      todoContainer.appendChild(todoText);\n\n      todosContainer.appendChild(todoContainer);\n    }\n  }\n\n  room.subscribe(todos, () => {\n    renderTodos();\n  });\n\n  renderTodos();\n}\n\nrun();\n```\n\n----------------------------------------\n\nTITLE: Defining Presence Types in TypeScript\nDESCRIPTION: Shows how to define TypeScript types for user presence data in Liveblocks configuration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-presence-with-react.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare global {\n  interface Liveblocks {\n    Presence: {\n      cursor: { x: number; y: number } | null;\n    };\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Reconnecting the Room - TypeScript\nDESCRIPTION: This snippet illustrates how to close the current room connection and attempt to reconnect using room.reconnect(). This is useful for handling connection interruptions and maintaining a stable user experience.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_31\n\nLANGUAGE: typescript\nCODE:\n```\nroom.reconnect();\n```\n\n----------------------------------------\n\nTITLE: Using Typed Presence with Liveblocks Zustand Middleware\nDESCRIPTION: Example demonstrating how to type the presence data in Liveblocks Zustand middleware to enable type-checking for other users' presence information. This enhances type safety when accessing presence properties.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-lexical/CHANGELOG.md#2025-04-11_snippet_17\n\nLANGUAGE: typescript\nCODE:\n```\ntype Presence = {\n  isTyping: true;\n}\n\nconst useStore = create(\n  middleware<State, Presence>(/* ... */, {\n    client,\n    presenceMapping: { isTyping: true },\n    storageMapping: { todos: true }\n  })\n);\n\n// In your component\nuseStore(state => state.liveblocks.others[0].presence?.isTyping)\n```\n\n----------------------------------------\n\nTITLE: Basic FloatingToolbar Implementation in React-Lexical\nDESCRIPTION: Demonstrates the basic setup of a floating toolbar within the LexicalComposer context.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_15\n\nLANGUAGE: tsx\nCODE:\n```\n<LexicalComposer initialConfig={initialConfig}>\n  <LiveblocksPlugin>\n    <FloatingToolbar />\n  </LiveblocksPlugin>\n</LexicalComposer>\n```\n\n----------------------------------------\n\nTITLE: Integrating FloatingToolbar with Other Components in React-Tiptap\nDESCRIPTION: Shows how to integrate the FloatingToolbar component with other Liveblocks components like FloatingComposer and FloatingThreads for a complete collaborative editing experience.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_20\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  useLiveblocksExtension,\n  // +++\n  FloatingToolbar,\n  // +++\n  FloatingComposer,\n  FloatingThreads,\n} from \"@liveblocks/react-tiptap\";\nimport { useEditor, EditorContent } from \"@tiptap/react\";\n\nfunction TextEditor() {\n  const liveblocks = useLiveblocksExtension();\n\n  const editor = useEditor({\n    extensions: [\n      liveblocks,\n      // ...\n    ],\n  });\n\n  return (\n    <div>\n      <EditorContent editor={editor} />\n      // +++\n      <FloatingToolbar editor={editor} />\n      // +++\n      <FloatingComposer editor={editor} style={{ width: \"350px\" }} />\n      <FloatingThreads editor={editor} style={{ width: \"350px\" }} />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Listening for Revalidation Events\nDESCRIPTION: Implementation of event listener to handle revalidation events and trigger SWR mutation.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/revalidate-api-data-with-swr.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nconst { data: users, mutate } = useSWR(\"/api/users\", fetcher);\n\nuseEventListener(({ event }) => {\n  if (event.type === \"REVALIDATE\") {\n    mutate();\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Displaying Liveblocks Storage Data in React Component\nDESCRIPTION: This snippet shows how to use the useStorage hook to access and display storage data in a React component. It imports the necessary hook and renders the person object as a JSON string.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/storage/guide.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useStorage } from \"@liveblocks/react/suspense\";\n\nexport function Room() {\n  const person = useStorage((root) => root.person);\n\n  return <div>Person: {JSON.stringify(person)}</div>;\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks, Yjs, and Monaco Dependencies\nDESCRIPTION: Install the necessary packages for setting up a collaborative Monaco editor with Liveblocks and Yjs in a Svelte project.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-monaco-svelte.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/yjs yjs monaco-editor y-monaco\n```\n\n----------------------------------------\n\nTITLE: Configuring Liveblocks Redux Enhancer\nDESCRIPTION: Basic setup of Redux store with Liveblocks enhancer for enabling realtime collaboration features.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-redux.mdx#2025-04-11_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { liveblocksEnhancer } from \"@liveblocks/redux\";\nimport { configureStore } from \"@reduxjs/toolkit\";\n\nconst store = configureStore({\n  reducer: /* reducer */,\n  enhancers: [\n    liveblocksEnhancer({\n      client,\n      storageMapping: {},\n      presenceMapping: {},\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Integrating the Toolbar into the Monaco Editor Component\nDESCRIPTION: This TypeScript code snippet demonstrates how to integrate the `Toolbar` component into the main `CollaborativeEditor` component. It conditionally renders the `Toolbar` component, passing the `editorRef` to it.  It includes the Toolbar component in the editorHeader section.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-monaco-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_14\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Toolbar } from \"@/components/Toolbar\";\n// ...\n\nexport function CollaborativeEditor() {\n  // ...\n\n  return (\n    <div className={styles.container}>\n      {provider ? <Cursors yProvider={provider} /> : null}\n      <div className={styles.editorHeader}>\n        <div>{editorRef ? <Toolbar editor={editorRef} /> : null}</div>\n      </div>\n      <div className={styles.editorContainer}>\n        <Editor\n          onMount={handleOnMount}\n          height=\"100%\"\n          width=\"100hw\"\n          theme=\"vs-light\"\n          defaultLanguage=\"typescript\"\n          defaultValue=\"\"\n          options={{\n            tabSize: 2,\n            padding: { top: 20 },\n          }}\n        />\n      </div>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Passing Custom Headers to AuthEndpoint\nDESCRIPTION: Demonstrates how to use authEndpoint as a callback to pass custom headers and data to the authentication endpoint.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/nextjs.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n<LiveblocksProvider\n  authEndpoint={async (room) => {\n    // Passing custom headers and body to your endpoint\n    const headers = {\n      // Custom headers\n      // ...\n\n      \"Content-Type\": \"application/json\",\n    };\n\n    const body = JSON.stringify({\n      // Custom body\n      // ...\n\n      room,\n    });\n\n    const response = await fetch(\"/api/liveblocks-auth\", {\n      method: \"POST\",\n      headers,\n      body,\n    });\n\n    return await response.json();\n  }}\n/>\n```\n\n----------------------------------------\n\nTITLE: Using Suspense with Liveblocks Hooks in React\nDESCRIPTION: Demonstrates how to use React Suspense with Liveblocks hooks, including error handling and loading states using ErrorBoundary and ClientSideSuspense components.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/notifications/hooks.mdx#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClientSideSuspense } from \"@liveblocks/react\";\nimport { ErrorBoundary } from \"react-error-boundary\";\n\n// Handle errors and loading state in the component above\nfunction Component() {\n  return (\n    <ErrorBoundary fallback={<div>Error</div>}>\n      <ClientSideSuspense fallback={<div>Loading...</div>}>\n        <MyNotifications />\n      </ClientSideSuspense>\n    </ErrorBoundary>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Using Suspense with Liveblocks Hooks in React\nDESCRIPTION: Shows how to use React Suspense with Liveblocks hooks, including error handling and loading states using ErrorBoundary and ClientSideSuspense components.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/hooks.mdx#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClientSideSuspense } from \"@liveblocks/react\";\nimport { ErrorBoundary } from \"react-error-boundary\";\n\n// Handle errors and loading state in the component above\nfunction Component() {\n  return (\n    <ErrorBoundary fallback={<div>Error</div>}>\n      <ClientSideSuspense fallback={<div>Loading...</div>}>\n        <MyThreads />\n      </ClientSideSuspense>\n    </ErrorBoundary>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Default Values with Yjs - Correct Approach\nDESCRIPTION: Shows the correct way to set default content in a BlockNote editor with Yjs by waiting for the connection to be ready and checking if the document is empty before setting the initial content.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/setting-an-initial-or-default-value-in-blocknote.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Editor({ doc, provider }: EditorProps) {\n  const editor = useEditor({\n    // Options\n    // ...\n  });\n\n  // +++\n  // Set default state\n  useEffect(() => {\n    function setDefault() {\n      if (!editor) {\n        return;\n      }\n\n      if (editor.document.length === 1) {\n        editor.insertBlocks(\n          [{ type: \"paragraph\", content: \"Hello world\" }],\n          editor.document[0]\n        );\n      }\n    }\n\n    if (provider.isReady) {\n      setDefault();\n    }\n\n    provider.on(\"sync\", setDefault);\n    return () => provider.off(\"sync\", setDefault);\n  }, [provider, editor]);\n  // +++\n\n  return <BlockNoteView editor={editor} />;\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing HistoryVersionSummaryList in React\nDESCRIPTION: This snippet demonstrates how to use the HistoryVersionSummaryList component to display a list of version summaries. It maps through an array of versions and renders HistoryVersionSummary components for each.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_38\n\nLANGUAGE: tsx\nCODE:\n```\n<HistoryVersionSummaryList>\n  {versions?.map((version) => (\n    <HistoryVersionSummary\n      onClick={() => {\n        setSelectedVersionId(version.id);\n      }}\n      key={version.id}\n      version={version}\n      selected={version.id === selectedVersionId}\n    />\n  ))}\n</HistoryVersionSummaryList>\n```\n\n----------------------------------------\n\nTITLE: Using getSyncStatus Method in Liveblocks Client API\nDESCRIPTION: Example showing the new API method client.getSyncStatus() introduced in version 2.12.0 to track synchronization status of pending local changes.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/create-liveblocks-app/CHANGELOG.md#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nclient.getSyncStatus()\n```\n\n----------------------------------------\n\nTITLE: Using LiveblocksProvider Instead of createClient\nDESCRIPTION: Shows the transition from using createClient to using the new LiveblocksProvider component, which simplifies the client setup process in version 2.0.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react-ui/CHANGELOG.md#2025-04-11_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\n// ❌ Before\nconst client = createClient(/* options */);\n\n// ✅ After\n<LiveblocksProvider /* options */>\n  <App />\n</LiveblocksProvider>\n```\n\n----------------------------------------\n\nTITLE: Displaying Unread Notifications Count with useUnreadInboxNotificationsCount Hook in React\nDESCRIPTION: Shows how to use the useUnreadInboxNotificationsCount hook to create a badge displaying the count of unread notifications for the current user.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/notifications/hooks.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useUnreadInboxNotificationsCount } from \"../liveblocks.config\";\n\nfunction Component() {\n  const { count } = useUnreadInboxNotificationsCount();\n\n  // 3\n  console.log(count);\n\n  return <div>You have {count} unread notifications</div>;\n}\n```\n\n----------------------------------------\n\nTITLE: Webhook Request Verification Implementation\nDESCRIPTION: Implementation of webhook request verification using @liveblocks/node package, including secret key setup and request validation.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-send-email-notifications-when-comments-are-created.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\n\n// Add your webhook secret key from a project's webhooks dashboard\nconst WEBHOOK_SECRET = \"YOUR_WEBHOOK_SECRET_KEY\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Verify if this is a real webhook request\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  // Send notifications\n  // ...\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Shapes in React Canvas Component\nDESCRIPTION: Enhanced App component to render rectangle shapes on the canvas. It maps through the shapes from the store and renders a Rectangle component for each shape, with loading state handling.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-online-whiteboard-with-react-zustand-and-liveblocks.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useEffect } from \"react\";\nimport useStore from \"./store\";\nimport type { Shape } from \"./store\";\n\nimport \"./App.css\";\n\nexport default function App() {\n  const shapes = useStore((state) => state.shapes);\n  const enterRoom = useStore((state) => state.liveblocks.enterRoom);\n  const leaveRoom = useStore((state) => state.liveblocks.leaveRoom);\n  const isLoading = useStore((state) => state.liveblocks.isStorageLoading);\n\n  useEffect(() => {\n    enterRoom(\"zustand-whiteboard\");\n    return () => {\n      leaveRoom(\"zustand-whiteboard\");\n    };\n  }, [enterRoom, leaveRoom]);\n\n  if (isLoading) {\n    return <div className=\"loading\">Loading...</div>;\n  }\n\n  return (\n    <div className=\"canvas\">\n      {Object.entries(shapes).map(([shapeId, shape]) => {\n        return <Rectangle key={shapeId} shape={shape} />;\n      })}\n    </div>\n  );\n}\n\nconst Rectangle = ({ shape }: { shape: Shape }) => {\n  return (\n    <div\n      className=\"rectangle\"\n      style={{\n        transform: `translate(${shape.x}px, ${shape.y}px)`,\n        backgroundColor: shape.fill ? shape.fill : \"#CCC\",\n      }}\n    ></div>\n  );\n};\n```\n\n----------------------------------------\n\nTITLE: Defining Storage Types with LiveObject in TypeScript\nDESCRIPTION: Defines a TypeScript interface for Liveblocks Storage containing a LiveObject called 'scientist' with firstName and lastName properties. This sets up the type structure for the storage that will be synchronized across clients.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-storage-with-react.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { LiveObject } from \"@liveblocks/client\";\n\ndeclare global {\n  interface Liveblocks {\n    Storage: { scientist: LiveObject<{ firstName: string; lastName: string }> };\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Full Webhook Handler Implementation in TypeScript\nDESCRIPTION: A comprehensive example of handling a Liveblocks webhook for notifications. This code verifies the webhook request, processes the notification event, retrieves the inbox notification, and sends an email to the user.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/notifications/email-notifications.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n  Liveblocks,\n  WebhookHandler,\n  stringifyCommentBody,\n} from \"@liveblocks/node\";\n\n// Add your webhook secret key from a project's webhooks dashboard\nconst WEBHOOK_SECRET = \"YOUR_WEBHOOK_SECRET\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\n// Add your secret key from a project's API keys dashboard\nconst API_SECRET = \"{{SECRET_KEY}}\";\nconst liveblocks = new Liveblocks({ secret: API_SECRET });\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Verify if this is a real webhook request\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  // When a notification webhook event has triggered\n  if (event.type === \"notification\") {\n    const { inboxNotificationId, userId } = event.data;\n\n    // Get the inbox notification, which details when the user last read the thread\n    const inboxNotification = await liveblocks.getInboxNotification({\n      inboxNotificationId,\n      userId,\n    });\n\n    // Send email to the user that received the inbox notification\n    const emailAddress = __getUserEmail__(userId);\n    __sendEmail__({\n      from: \"hello@my-company.com\",\n      to: emailAddress,\n      title: \"New comment\",\n      html: `\n        <h1>New notification</h1>\n        <a href=\"...\">Learn more</a>\n      `,\n    });\n  }\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Use Notification Settings - Liveblocks React\nDESCRIPTION: This snippet shows how to manage user notification settings using React hooks provided by Liveblocks. It requires '@liveblocks/react'. The 'useNotificationSettings' hook manages both retrieval and updating operations, and 'useUpdateNotificationSettings' is used for direct updates like an unsubscribe action.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-zustand/CHANGELOG.md#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n// A suspense version of this hook is available\nimport { useNotificationSettings } from \"@liveblocks/react\";\n\nconst [{ isLoading, error, settings }, updateSettings] =\n  useNotificationSettings();\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst onSave = () => {\n  updateSettings({\n    slack: {\n      textMention: true,\n    },\n  });\n};\n```\n\nLANGUAGE: tsx\nCODE:\n```\n// A suspense version of this hook is available\nimport { useUpdateNotificationSettings } from \"@liveblocks/react\";\n\nconst updateSettings = useUpdateNotificationSettings();\n\nconst onUnsubscribe = () => {\n  updateSettings({\n    slack: {\n      thread: false,\n    },\n  });\n};\n```\n\n----------------------------------------\n\nTITLE: Connecting to Liveblocks Room in React Component\nDESCRIPTION: React component that connects to a Liveblocks room on mount and leaves the room on unmount, using the Zustand store's enter and leave room methods.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-online-whiteboard-with-react-zustand-and-liveblocks.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useEffect } from \"react\";\nimport useStore from \"./store\";\n\nimport \"./App.css\";\n\nexport default function App() {\n  const enterRoom = useStore((state) => state.liveblocks.enterRoom);\n  const leaveRoom = useStore((state) => state.liveblocks.leaveRoom);\n\n  useEffect(() => {\n    enterRoom(\"zustand-whiteboard\");\n    return () => {\n      leaveRoom(\"zustand-whiteboard\");\n    };\n  }, [enterRoom, leaveRoom]);\n\n  return <div className=\"container\">Whiteboard app</div>;\n}\n```\n\n----------------------------------------\n\nTITLE: Complete Webhook Handler with Notification Sending\nDESCRIPTION: Full implementation of the webhook handler including comment formatting and notification sending to participants.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-send-email-notifications-when-comments-are-created.mdx#2025-04-11_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Liveblocks, WebhookHandler, stringifyCommentBody } from \"@liveblocks/node\";\n\nconst WEBHOOK_SECRET = \"YOUR_WEBHOOK_SECRET_KEY\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\nconst API_SECRET = \"{{SECRET_KEY}}\";\nconst liveblocks = new Liveblocks({ secret: API_SECRET });\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  if (event.type === \"commentCreated\") {\n    const { roomId, threadId, commentId } = event.data;\n\n    try {\n      const [comment, { participantIds }] = await Promise.all([\n        liveblocks.getComment({ roomId, threadId, commentId }),\n        liveblocks.getThreadParticipants({ roomId, threadId }),\n      ]);\n\n      const htmlComment = await stringifyCommentBody(comment.body, {\n        format: \"html\",\n        async resolveUsers({ userIds }) {\n          const users = await __getUsers__(userIds);\n          return users.map((user) => ({\n            name: user.name,\n          }));\n        },\n      });\n\n      const users = await __getUsers__(participantIds);\n\n      for (const user of users) {\n        // Send email to the user's email address\n      }\n    } catch (err) {\n      console.log(err);\n      return new Response(\"Could not fetch comment data\", { status: 500 });\n    }\n  }\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering InboxNotification Components with useInboxNotifications Hook in React\nDESCRIPTION: This snippet demonstrates how to use the useInboxNotifications hook to fetch and render InboxNotification components for each notification in a React component.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/notifications/default-components.mdx#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { InboxNotification } from \"@liveblocks/react-ui\";\nimport { useInboxNotifications } from \"../liveblocks.config\";\n\nfunction Component() {\n  const { inboxNotifications } = useInboxNotifications();\n\n  return (\n    <>\n      {inboxNotifications.map((inboxNotification) => (\n        <InboxNotification\n          key={inboxNotification.id}\n          inboxNotification={inboxNotification}\n        />\n      ))}\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Styling Live Avatars Component with CSS\nDESCRIPTION: The CSS snippet provides styling for the avatars component in the editor, setting dimensions and hover effects for avatar display along with tooltip handling.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-tiptap-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_13\n\nLANGUAGE: css\nCODE:\n```\n.avatars {\n  display: flex;\n  padding: 0 0.75rem;\n}\n\n.avatar {\n  display: flex;\n  place-content: center;\n  position: relative;\n  border: 4px solid #fff;\n  border-radius: 9999px;\n  width: 42px;\n  height: 42px;\n  background-color: #9ca3af;\n  margin-left: -0.75rem;\n}\n\n.avatar:before {\n  content: attr(data-tooltip);\n  position: absolute;\n  top: 100%;\n  opacity: 0;\n  transition: opacity 0.15s ease;\n  padding: 5px 10px;\n  color: white;\n  font-size: 0.75rem;\n  border-radius: 8px;\n  margin-top: 10px;\n  z-index: 1;\n  background: black;\n  white-space: nowrap;\n}\n\n.avatar:hover:before {\n  opacity: 1;\n}\n\n.avatar_picture {\n  width: 100%;\n  height: 100%;\n  border-radius: 9999px;\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Metadata to Threads Using Composer Component in React\nDESCRIPTION: Shows how to use the Composer component from @liveblocks/react-ui to create a new thread with custom metadata.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/metadata.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Composer } from \"@liveblocks/react-ui\";\n\n// Creates a new thread with custom metadata\nfunction Component() {\n  return (\n    <Composer\n      // +++\n      metadata={{\n        // Custom metadata here\n        priority: \"URGENT\",\n        pinned: false,\n        timestamp: 1703073188013,\n      }}\n      // +++\n    />\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Inbox Notification in TypeScript\nDESCRIPTION: Demonstrates how to use the Liveblocks API to retrieve an inbox notification based on the event data received from the webhook. This code fetches the notification details for further processing.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/notifications/email-notifications.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n// Data from the `notification` event\nconst { inboxNotificationId, userId } = event.data;\n\n// Get the inbox notification, which details when the user last read the thread\nconst inboxNotification = await liveblocks.getInboxNotification({\n  inboxNotificationId,\n  userId,\n});\n\n// { kind: \"$myCustomNotification\", readAt: Date<2024-07-13T14:32:50.697Z>, ... }\nconsole.log(inboxNotification);\n```\n\n----------------------------------------\n\nTITLE: Composer Component for Editing Comments\nDESCRIPTION: Example showing how to use the Composer component to edit existing comments.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Composer } from \"@liveblocks/react-ui\";\n\n// Edits an existing comment\nfunction Component({ threadId, commentId }) {\n  return <Composer threadId={threadId} commentId={commentId} />;\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring LiveblocksUIConfig Component in React\nDESCRIPTION: This snippet shows how to use the LiveblocksUIConfig component to set configuration options for all Liveblocks React UI components. It demonstrates overriding locale and user unknown string.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_40\n\nLANGUAGE: tsx\nCODE:\n```\n<LiveblocksUIConfig overrides={{ locale: \"fr\", USER_UNKNOWN: \"Anonyme\" }} />\n```\n\n----------------------------------------\n\nTITLE: Using Error Listener in Liveblocks React\nDESCRIPTION: Sets up an error listener to handle errors from Liveblocks, including room connection errors and errors from Comments & Notifications.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_10\n\nLANGUAGE: TypeScript\nCODE:\n```\nuseErrorListener((err: LiveblocksError) => {\n  /* show toast, or notify Sentry, Datadog, etc */\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Notifications List\nDESCRIPTION: Integration of inbox notifications list component for displaying user notifications.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/text-editor/lexical.mdx#2025-04-11_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nexport function CollaborativeApp() {\n  const { inboxNotifications } = useInboxNotifications();\n\n  return (\n    <InboxNotificationList>\n      {inboxNotifications.map((inboxNotification) => (\n        <InboxNotification\n          key={inboxNotification.id}\n          inboxNotification={inboxNotification}\n        />\n      ))}\n    </InboxNotificationList>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks, Yjs, and Slate dependencies\nDESCRIPTION: Install the necessary packages for Liveblocks, Yjs, and Slate integration in a React project.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-slate-react.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/react @liveblocks/yjs yjs slate slate-react @slate-yjs/core\n```\n\n----------------------------------------\n\nTITLE: Updating ProseMirror Document Content with Transaction API\nDESCRIPTION: Uses the api.update method to modify a ProseMirror document by providing the current document and a transaction. The changes are persisted and appear in real-time to connected users after the update promise resolves.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-node-prosemirror.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nawait withProsemirrorDocument(\n  {\n    client,\n    roomId: \"test-room\",\n  },\n  async (api) => {\n    // +++\n    await api.update((doc, tr) => {\n      return tr.insertText(\"Hello world\");\n    });\n    // +++\n  }\n);\n```\n\n----------------------------------------\n\nTITLE: Implementing Room Connection with Loading State\nDESCRIPTION: Enhanced React component setup including ClientSideSuspense for handling loading states during room connection.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-codemirror-react.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n  ClientSideSuspense,\n} from \"@liveblocks/react/suspense\";\nimport { Editor } from \"./Editor\";\n\nexport default function App() {\n  return (\n    <LiveblocksProvider publicApiKey={\"{{PUBLIC_KEY}}\"}>\n      <RoomProvider id=\"my-room\">\n        <ClientSideSuspense fallback={<div>Loading…</div>}>\n          <Editor />\n        </ClientSideSuspense>\n      </RoomProvider>\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Using SWR Hooks with Document Functions\nDESCRIPTION: Demonstrates how to use SWR hooks for automatic data updates in components.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/tools/nextjs-starter-kit.mdx#2025-04-11_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nimport { getDocumentUsers, useDocumentsFunctionSWR } from \"../../lib/client\";\n\nexport function ListUsers() {\n  // Get users attached to a document and update every 1000ms\n  const { data: users, error: usersError } = useDocumentsFunctionSWR(\n    [\n      getDocumentUsers,\n      {\n        documentId: \"my-document-id\",\n      },\n    ],\n    { refreshInterval: 1000 }\n  );\n\n  if (usersError) {\n    return <div>Error</div>;\n  }\n\n  if (!users) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <ul>\n      {users.map((user) => (\n        <li>user.name</li>\n      ))}\n    </ul>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Room Permissions with Liveblocks Node\nDESCRIPTION: Create a new room with specific access levels for public, groups, and users using the Liveblocks Node package.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/nextjs.mdx#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nconst room = await liveblocks.createRoom(\"my-room-id\", {\n  defaultAccesses: [\"room:read\", \"room:presence:write\"],\n  groupsAccesses: {\n    \"my-group-id\": [\"room:write\"],\n  },\n  usersAccesses: {\n    \"my-user-id\": [\"room:write\"],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks packages for Zustand integration\nDESCRIPTION: Command to install the necessary Liveblocks packages for integration with Zustand. It's important to use the same version for all Liveblocks packages.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/zustand.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/zustand\n```\n\n----------------------------------------\n\nTITLE: Enabling preventUnsavedChanges in JavaScript\nDESCRIPTION: Demonstrates how to enable the preventUnsavedChanges option when creating a Liveblocks client outside of React.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-core/CHANGELOG.md#2025-04-11_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\ncreateClient({ preventUnsavedChanges: true })\n```\n\n----------------------------------------\n\nTITLE: Marking All Notifications as Read with useMarkAllInboxNotificationsAsRead Hook in React\nDESCRIPTION: Demonstrates how to use the useMarkAllInboxNotificationsAsRead hook to create a button that marks all notifications as read for the current user.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/notifications/hooks.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nfunction NotificationReadButton() {\n  const markAllInboxNotificationsAsRead = useMarkAllInboxNotificationsAsRead();\n\n  return (\n    <button onClick={markAllInboxNotificationsAsRead}>Mark all as read</button>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Using withLexicalDocument with Liveblocks Node Client\nDESCRIPTION: Demonstrates how to use withLexicalDocument, the main entry point for modifying Lexical documents on the server. It takes a room ID and a Liveblocks Node client, then returns a callback to work with Lexical documents.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-node-lexical.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\nimport { withLexicalDocument } from \"@liveblocks/node-lexical\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nawait withLexicalDocument(\n  { roomId: \"your-room-id\", client: liveblocks },\n  async (doc) => {\n    // Modify your Lexical `doc`\n    // ...\n  }\n);\n```\n\n----------------------------------------\n\nTITLE: Integrating the Avatars Component into the Monaco Editor Component\nDESCRIPTION: This TypeScript code snippet demonstrates how to integrate the `Avatars` component into the `CollaborativeEditor` component. It renders the `Avatars` component within the `editorHeader` section.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-monaco-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_17\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Avatars } from \"@/components/Avatars\";\n// ...\n\nexport function CollaborativeEditor() {\n  // ...\n\n  return (\n    <div className={styles.container}>\n      {provider ? <Cursors yProvider={provider} /> : null}\n      <div className={styles.editorHeader}>\n        <div>{editorRef ? <Toolbar editor={editorRef} /> : null}</div>\n        <Avatars />\n      </div>\n      <div className={styles.editorContainer}>\n        <Editor\n          onMount={handleOnMount}\n          height=\"100%\"\n          width=\"100hw\"\n          theme=\"vs-light\"\n          defaultLanguage=\"typescript\"\n          defaultValue=\"\"\n          options={{\n            tabSize: 2,\n            padding: { top: 20 },\n          }}\n        />\n      </div>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Parameterized useMutation Hook in React TypeScript\nDESCRIPTION: This snippet creates a useMutation hook that takes a newName parameter, allowing for dynamic updates to the person's name in Liveblocks storage.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/modifying-storage-data/guide.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\n// Add mutation\nconst updateName = useMutation(({ storage }, newName: string) => {\n  const person = storage.get(\"person\");\n  person.set(\"name\", newName);\n}, []);\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom InboxNotification in React\nDESCRIPTION: This code snippet shows how to create a custom inbox notification using InboxNotification.Custom. It demonstrates handling custom notification kinds and rendering custom content based on activity data.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_35\n\nLANGUAGE: tsx\nCODE:\n```\n<InboxNotification\n  inboxNotification={inboxNotification}\n  kinds={{\n    $myCustomNotificationKind: (props) => {\n      const activityData = props.inboxNotification.activities[0].data;\n\n      return (\n        <InboxNotification.Custom\n          title={\n            <>\n              User <strong>{activityData.file}</strong>\n            </>\n          }\n          aside={<InboxNotification.Icon>❌</InboxNotification.Icon>}\n          {...props}\n        >\n          {activityData.errorDescription}\n        </InboxNotification.Custom>\n      );\n    },\n  }}\n/>\n```\n\n----------------------------------------\n\nTITLE: Setting Initial Content in Liveblocks TipTap Editor\nDESCRIPTION: Shows how to set initial content for the editor using the initialContent option. This content is only used if the editor has never been edited by any users.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_45\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useLiveblocksExtension } from \"@liveblocks/react-tiptap\";\n\nfunction TextEditor() {\n  const liveblocks = useLiveblocksExtension({\n    // +++\n    initialContent: \"<p>Hello world</p>\",\n    // +++\n  });\n\n  // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks, Yjs, and Tiptap Dependencies\nDESCRIPTION: This command installs the necessary packages for setting up a collaborative text editor with Liveblocks, Yjs, and Tiptap in a Svelte project.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-tiptap-svelte.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/yjs yjs @tiptap/core @tiptap/pm @tiptap/starter-kit @tiptap/extension-collaboration @tiptap/extension-collaboration-cursor y-prosemirror\n```\n\n----------------------------------------\n\nTITLE: Implementing Pause and Resume History in React Component\nDESCRIPTION: This snippet demonstrates how to pause and resume the Liveblocks history during shape movement to improve undo/redo behavior.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-online-whiteboard-with-react-redux-and-liveblocks.mdx#2025-04-11_snippet_12\n\nLANGUAGE: jsx\nCODE:\n```\nimport { useEffect } from \"react\";\nimport \"./App.css\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { actions } from \"@liveblocks/redux\";\n\nimport {\n  insertRectangle,\n  onShapePointerDown,\n  deleteShape,\n  onCanvasPointerUp,\n  onCanvasPointerMove,\n  client,\n} from \"./store\";\n\nconst roomId = \"redux-whiteboard\";\n\nexport default function App() {\n  const shapes = useSelector((state) => state.shapes);\n  const isLoading = useSelector((state) => state.liveblocks.isStorageLoading);\n  const selectedShape = useSelector((state) => state.selectedShape);\n  const others = useSelector((state) => state.liveblocks.others);\n\n  const dispatch = useDispatch();\n\n  /* ... */\n\n  return (\n    <>\n      <div\n        className=\"canvas\"\n        onPointerMove={(e) => {\n          /* ... */\n        }}\n        onPointerUp={() => {\n          dispatch(onCanvasPointerUp());\n          client.getRoom(roomId).history.resume();\n        }}\n      >\n        {/* ... */}\n      </div>\n      <div className=\"toolbar\">{/* ... */}</div>\n    </>\n  );\n}\n\nconst Rectangle = ({ shape, selectionColor, id }) => {\n  const dispatch = useDispatch();\n\n  return (\n    <div\n      className=\"rectangle\"\n      style={{\n        transform: `translate(${shape.x}px, ${shape.y}px)`,\n        backgroundColor: shape.fill ? shape.fill : \"#CCC\",\n        borderColor: selectionColor,\n      }}\n      onPointerDown={(e) => {\n        e.stopPropagation();\n        client.getRoom(roomId).history.pause();\n        dispatch(onShapePointerDown(id));\n      }}\n    ></div>\n  );\n};\n```\n\n----------------------------------------\n\nTITLE: Integrating the Collaborative Editor in Next.js Page\nDESCRIPTION: Next.js page component that imports and renders the Room component with the CollaborativeEditor inside it, creating a complete collaborative editing experience.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-monaco-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Room } from \"./Room\";\nimport CollaborativeEditor from \"@/components/Editor\";\n\nexport default function Page() {\n  return (\n    <Room>\n      <CollaborativeEditor />\n    </Room>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Reauthenticating Room in React Component\nDESCRIPTION: Shows how to implement room reauthentication in a React component using the useRoom hook from Liveblocks React package.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/reauthenticate-without-reloading-the-page-or-losing-state.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useRoom } from \"../liveblocks.config\";\n\nexport function App() {\n  const room = useRoom();\n\n  return <button onClick={room.reconnect}>Reauthenticate</button>;\n}\n```\n\n----------------------------------------\n\nTITLE: Using Pagination with useInboxNotifications in React\nDESCRIPTION: Demonstrates how to use the new pagination support added to the useInboxNotifications hook in @liveblocks/react v2.9.0. This allows for more efficient loading of inbox notifications.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_13\n\nLANGUAGE: tsx\nCODE:\n```\nconst {\n  inboxNotifications,\n  isLoading,\n  error,\n\n  // ✨ New in Liveblocks 2.9\n  fetchMore,\n  isFetchingMore,\n  hasFetchedAll,\n  fetchMoreError,\n} = useInboxNotifications();\n```\n\n----------------------------------------\n\nTITLE: Advanced Wildcard Permissions in TypeScript\nDESCRIPTION: Demonstrates advanced permission management using wildcards to grant access to multiple rooms within an organization hierarchy.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst session = liveblocks.prepareSession(\"olivier@example.com\");\n\n// Giving full access to one room\nsession.allow(\"Vu78Rt:design:9Hdu73\", session.FULL_ACCESS);\n\n// Give full access to every room with an ID beginning with \"Vu78Rt:product:\"\nsession.allow(\"Vu78Rt:product:*\", session.FULL_ACCESS);\n\n// Give read-only access to every room in the `Vu78Rt` organization\nsession.allow(\"Vu78Rt:*\", session.READ_ACCESS);\n\nconst { body, status } = await session.authorize();\n```\n\n----------------------------------------\n\nTITLE: Basic BlockNote Editor Integration with Liveblocks\nDESCRIPTION: Shows how to create a basic collaborative text editor using BlockNote with Liveblocks integration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-blocknote.mdx#2025-04-11_snippet_11\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useCreateBlockNoteWithLiveblocks } from \"@liveblocks/react-blocknote\";\nimport { BlockNoteView } from \"@blocknote/mantine\";\n\nfunction TextEditor() {\n  const editor = useCreateBlockNoteWithLiveblocks({});\n\n  return (\n    <div>\n      <BlockNoteView editor={editor} />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Setting up Authentication Endpoint in Next.js Pages Directory\nDESCRIPTION: Create an authentication endpoint using the older API routes format in Next.js' /pages directory.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/nextjs.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\nimport type { NextApiRequest, NextApiResponse } from \"next\";\n\nconst API_KEY = \"{{SECRET_KEY}}\";\n\nconst liveblocks = new Liveblocks({\n  secret: API_KEY!,\n});\n\nexport default async function handler(request: NextApiRequest, response: NextApiResponse) {\n  // Get the current user from your database\n  const user = __getUserFromDB__(request);\n\n  // Identify the user and return the result\n  const { status, body } = await liveblocks.identifyUser(\n    {\n      userId: user.id,\n      groupIds, // Optional\n    },\n    { userInfo: user.metadata },\n  );\n\n  // Authorize the user and return the result\n  const { status, body } = await session.authorize();\n  response.status(status).send(body);\n}\n```\n\n----------------------------------------\n\nTITLE: Automatic Subscription and Rerendering with useStorage Hook\nDESCRIPTION: This snippet demonstrates how the new useStorage hook automatically handles subscriptions and rerendering for nested data changes, simplifying component logic.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/0.18.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Component() {\n  const pets = useStorage((root) => root.scientist.pets);\n  // [\"🐶\", \"🐈\"]\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Toolbar Sections in React with Liveblocks\nDESCRIPTION: Demonstrates how to add various toolbar sections using components like Toolbar.Separator, Toolbar.SectionHistory, and Toolbar.SectionInline from the @liveblocks/react-lexical package.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_13\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Toolbar } from \"@liveblocks/react-lexical\";\n\n<Toolbar>\n  // +++\n  <Toolbar.SectionHistory />\n  // +++\n</Toolbar>;\n```\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Toolbar } from \"@liveblocks/react-lexical\";\n\n<Toolbar>\n  // +++\n  <Toolbar.SectionHistory />\n  // +++\n</Toolbar>;\n```\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Toolbar } from \"@liveblocks/react-lexical\";\n\n<Toolbar>\n  // +++\n  <Toolbar.SectionInline />\n  // +++\n</Toolbar>;\n```\n\n----------------------------------------\n\nTITLE: Webhook Handler Implementation\nDESCRIPTION: Example of implementing webhook event verification using the new WebhookHandler class.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/1.0.mdx#2025-04-11_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\n\nconst webhookHandler = new WebhookHandler(process.env.SECRET);\n\nconst event = webhookHandler.verifyRequest({\n  headers: req.headers,\n  rawBody: req.body,\n});\n```\n\n----------------------------------------\n\nTITLE: Multiple Subscriptions with useStorage Hook in React\nDESCRIPTION: This example shows how to derive a computed value from multiple storage values using the useStorage hook, which automatically handles rerendering when any of the dependencies change.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/0.18.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Component() {\n  const sum = useStorage((root) => root.a.x + root.b.x);\n}\n```\n\n----------------------------------------\n\nTITLE: Error Listening in Liveblocks Client\nDESCRIPTION: This snippet shows how to subscribe to error events in Liveblocks client, now potentially receiving errors related to Comments & Notifications in addition to previous room connection errors. This enhances debugging and operational oversight capabilities.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-core/CHANGELOG.md#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nroom.subscribe(\"error\", (err) => { ... });\n```\n\n----------------------------------------\n\nTITLE: Basic Next.js API Route Handler for Webhooks\nDESCRIPTION: Initial endpoint setup for handling webhook POST requests in Next.js, retrieving headers and body from the incoming request.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-send-email-notifications-when-comments-are-created.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Handle webhooks and notifications\n  // ...\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Suspending Thread Rendering in Lexical Editor with Liveblocks TypeScript\nDESCRIPTION: Illustrates how to suspend the rendering of thread components until threads are fully loaded using `ClientSideSuspense`. It prevents unnecessary renders which helps in optimizing page load.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_31\n\nLANGUAGE: tsx\nCODE:\n```\n<LexicalComposer initialConfig={initialConfig}>\\n  <LiveblocksPlugin>\\n    <FloatingComposer />\\n    <ClientSideSuspense fallback={null}>\\n      <ThreadOverlay />\\n    </ClientSideSuspense>\\n  </LiveblocksPlugin>\\n</LexicalComposer>\n```\n\n----------------------------------------\n\nTITLE: Implementing a comment button in BlockNote toolbar\nDESCRIPTION: This snippet demonstrates how to add a comment button to the BlockNote toolbar, allowing users to open the FloatingComposer and create new comments.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-blocknote.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { BlockNoteEditor } from \"@blocknote/core\";\n\nfunction Toolbar({ editor }: { editor: BlockNoteEditor | null }) {\n  if (!editor) {\n    return null;\n  }\n\n  return (\n    <button\n      onClick={() => {\n        (editor._tiptapEditor as any).chain().focus().addPendingComment().run();\n      }}\n      data-active={(editor._tiptapEditor as any).isActive(\n        \"liveblocksCommentMark\"\n      )}\n    >\n      💬 New comment\n    </button>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Integrating Liveblocks Middleware with Zustand in TypeScript\nDESCRIPTION: Example showing how to integrate Liveblocks middleware with a Zustand store, moving the State type parameter to the middleware level and configuring presence and storage mappings.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-yjs/CHANGELOG.md#2025-04-11_snippet_17\n\nLANGUAGE: typescript\nCODE:\n```\nimport create from \"zustand\";\nimport { createClient } from \"@liveblocks/client\";\nimport { middleware } from \"@liveblocks/zustand\";\n\nconst client = createClient({ /*...*/ });\n\ntype State = {\n  draft: string;\n  isTyping: boolean;\n  todos: Todo[];\n  setDraft: (draft: string) => void;\n  addTodo: () => void;\n  deleteTodo: (index: number) => void;\n};\n\ncreate(\n  middleware<State>(/* ... */, {\n    client,\n    presenceMapping: { isTyping: true },\n    storageMapping: { todos: true }\n  })\n);\n```\n\n----------------------------------------\n\nTITLE: Using useLostConnectionListener React Hook - TypeScript\nDESCRIPTION: This snippet demonstrates the use of the useLostConnectionListener() hook, which serves as the React hook version of room.subscribe('lost-connection'). It allows components to reactively respond to lost connection events.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_29\n\nLANGUAGE: typescript\nCODE:\n```\nuseLostConnectionListener();\n```\n\n----------------------------------------\n\nTITLE: Setting Global Overrides with LiveblocksUIConfig\nDESCRIPTION: Shows how to use LiveblocksUIConfig to set global overrides for components' strings and localization. This approach allows customizing text and locale settings for all components in the application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_47\n\nLANGUAGE: tsx\nCODE:\n```\nimport { LiveblocksUIConfig } from \"@liveblocks/react-ui\";\n\nexport function App() {\n  return (\n    <LiveblocksUIConfig\n      overrides={{ locale: \"fr\", USER_UNKNOWN: \"Anonyme\" /* ... */ }}\n    >\n      {/* ... */}\n    </LiveblocksUIConfig>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Storage Type with LiveObject in TypeScript\nDESCRIPTION: This snippet shows how to define a Storage type using LiveObject for a person with name and age properties. It's typically added to the liveblocks.config.ts file.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/authenticating-with-nextjs/secret-key/guide.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// Storage types\ntype Storage = {\n  person: LiveObject<{\n    name: string;\n    age: number;\n  }>;\n};\n```\n\n----------------------------------------\n\nTITLE: Updating Cursor Coordinates on Pointer Move in React\nDESCRIPTION: This function handles the pointer move event, calculates the cursor position, and updates the user's presence with the new coordinates.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/updating-presence/guide.mdx#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nfunction handlePointerMove(e) {\n  const cursor = { x: Math.floor(e.clientX), y: Math.floor(e.clientY) };\n  updateMyPresence({ cursor });\n}\n```\n\n----------------------------------------\n\nTITLE: Subscribing to Storage Status Changes in TypeScript\nDESCRIPTION: Example showing how to subscribe to storage status changes using the room.subscribe() method. The callback handles different storage states including not-loaded, loading, synchronizing and synchronized.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node/CHANGELOG.md#2025-04-11_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\nroom.subscribe(\"storage-status\", (status) => {\n  switch (status) {\n    case \"not-loaded\":\n      break;\n    case \"loading\":\n      break;\n    case \"synchronizing\":\n      break;\n    case \"synchronized\":\n      break;\n    default:\n      break;\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Importing Liveblocks React Hooks Directly\nDESCRIPTION: Demonstrates the new way to import Liveblocks React hooks directly from the package, instead of exporting them from a config file. This change simplifies imports and improves code organization.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG.md#2025-04-11_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nimport { RoomProvider, useRoom, ... } from \"@liveblocks/react\";\nimport { RoomProvider, useRoom, ... } from \"@liveblocks/react/suspense\";\n```\n\n----------------------------------------\n\nTITLE: Rendering InboxNotificationList Component in React\nDESCRIPTION: This snippet demonstrates how to use the InboxNotificationList component to display multiple InboxNotification components as a list. Each notification is wrapped in a 'li' element.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_36\n\nLANGUAGE: tsx\nCODE:\n```\n<InboxNotificationList>\n  <InboxNotification />\n  <InboxNotification />\n  <InboxNotification />\n</InboxNotificationList>\n```\n\n----------------------------------------\n\nTITLE: Targeting Liveblocks Components with Class Names\nDESCRIPTION: Demonstrates how to customize specific Liveblocks components by targeting their predefined class names. This approach allows for more granular styling of individual components.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_44\n\nLANGUAGE: css\nCODE:\n```\n.lb-thread {\n  /* Customise thread */\n}\n\n.lb-composer {\n  /* Customise composer */\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Liveblocks Rooms by Metadata Filter in TypeScript\nDESCRIPTION: This code snippet shows how to use the Liveblocks get rooms API to retrieve a list of rooms filtered by specific metadata. It filters for rooms with the 'roomType' set to 'whiteboard'.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/rooms/metadata.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst metadata = \"metadata.roomType=whiteboard\";\nconst url = `https://api.liveblocks.io/v2/rooms?${metadata}`;\nconst response = await fetch(url);\nconst rooms = await response.json();\n```\n\n----------------------------------------\n\nTITLE: Integrating Liveblocks Primitives with Custom Design System\nDESCRIPTION: This example demonstrates how to use the asChild property to merge Liveblocks primitive props with custom design system components, allowing seamless integration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/styling-and-customization.mdx#2025-04-11_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Composer } from \"@liveblocks/react-ui/primitives\";\nimport { Button } from \"@/my-design-system\";\n\nfunction Component() {\n  return (\n    <Composer.Submit asChild>\n      <Button variant=\"primary\">Reply</Button>\n    </Composer.Submit>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Managing User Notification Settings with @liveblocks/node\nDESCRIPTION: Demonstrates how to use the new methods exposed by the Node.js client to manage user notification settings, including getting, updating, and deleting settings.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-lexical/CHANGELOG.md#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\nconst liveblocks = new Liveblocks({ secret: \"sk_xxx\" });\n\nconst settings = await liveblocks.getNotificationSettings({ userId });\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst updatedSettings = await liveblocks.updateNotificationSettings({\n  userId,\n  data: {\n    teams: {\n      $fileUploaded: true,\n    },\n  },\n});\nawait liveblocks.deleteNotificationSettings({ userId });\n```\n\n----------------------------------------\n\nTITLE: Using Regular Liveblocks Hooks with Error and Loading Handling in React\nDESCRIPTION: Illustrates how to use regular (non-Suspense) versions of Liveblocks hooks, including handling of error and loading states within the same component.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/notifications/hooks.mdx#2025-04-11_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useInboxNotifications } from \"../liveblocks.config.ts\";\n\n// Handle errors and loading state in the same component\nfunction MyNotifications() {\n  const { inboxNotifications, error, isLoading } = useInboxNotifications();\n\n  if (error) {\n    return <div>Error</div>;\n  }\n\n  if (isLoading) {\n    return <div>Loading...</div>;\n  }\n\n  // Non-Suspense: `inboxNotifications` is only defined AFTER the `if` checks\n  // [{ type: \"$myCustomNotification\", id: \"in_sf8s6sh...\", ... }, ...]\n  console.log(inboxNotifications);\n}\n```\n\n----------------------------------------\n\nTITLE: Adding One-time Destroyed Event Listener\nDESCRIPTION: Shows how to add a one-time event listener for the destroy event.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-yjs.mdx#2025-04-11_snippet_18\n\nLANGUAGE: typescript\nCODE:\n```\nawareness.once(\"destroyed\", () => {\n  // Awareness has been cleaned up\n});\n```\n\n----------------------------------------\n\nTITLE: Verifying Liveblocks Webhook Requests in Next.js\nDESCRIPTION: Implementation of webhook request verification using the @liveblocks/node package. This code confirms that the incoming request is a legitimate webhook call from Liveblocks by checking the signature with the webhook secret key.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-yjs-document-data-to-a-planetscale-mysql-database.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\n\n// Add your signing key from a project's webhooks dashboard\nconst WEBHOOK_SECRET = \"YOUR_SIGNING_SECRET\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Verify if this is a real webhook request\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  // Update database\n  // ...\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Passing User Metadata in Authentication Endpoint\nDESCRIPTION: Shows how to pass user metadata to the prepareSession function in the authentication endpoint.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/nextjs.mdx#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\n// Get the current user from your database\nconst user = __getUserFromDB__(request);\n\n// Start an auth session inside your endpoint\nconst session = liveblocks.prepareSession(\n  user.id,\n  {\n    userInfo: {\n      name: user.name,\n      avatar: user.avatarUrl,\n      colors: user.colorArray,\n    }\n  }\n);\n```\n\n----------------------------------------\n\nTITLE: Defining User Metadata Types in Liveblocks Config\nDESCRIPTION: Define types for user metadata in the Liveblocks configuration file.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/nextjs.mdx#2025-04-11_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare global\n  interface Liveblocks {\n    UserMeta: {\n      id: string;\n\n      // Example, use any JSON-compatible data in your metadata\n      info: {\n        name: string;\n        avatar: string;\n        colors: string[];\n      }\n    }\n\n    // Other type definitions\n    // ...\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Using Pagination with useThreads and useUserThreads_experimental Hooks\nDESCRIPTION: Example showing how to use the pagination support added to the useThreads and useUserThreads_experimental hooks, including the new fetchMore, isFetchingMore, hasFetchedAll, and fetchMoreError properties.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/liveblocks-codemod/CHANGELOG.md#2025-04-11_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\nconst {\n  threads,\n  isLoading,\n  error,\n\n  // ✨ New in Liveblocks 2.9\n  fetchMore,\n  isFetchingMore,\n  hasFetchedAll,\n  fetchMoreError,\n} = useThreads({ query });\n```\n\n----------------------------------------\n\nTITLE: Extending Default Toolbar\nDESCRIPTION: Demonstrates how to extend the default toolbar by adding custom content before and after the default buttons.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Toolbar } from \"@liveblocks/react-tiptap\";\nimport { Icon } from \"@liveblocks/react-ui\";\n\n<Toolbar\n  editor={editor}\n  before={<>I'm at the start</>}\n  after={\n    <Toolbar.Button\n      name=\"Help\"\n      icon={<Icon.QuestionMark />}\n      shortcut=\"CMD-H\"\n      onClick={() => console.log(\"help\")}\n    />\n  }\n/>;\n```\n\n----------------------------------------\n\nTITLE: Accessing User Information in Liveblocks\nDESCRIPTION: Shows how to retrieve the current user's ID and information in a Liveblocks application using the room.getSelf() method or the useSelf() hook in React.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/express.mdx#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nconst self = room.getSelf(); // or useSelf() in React\nconsole.log(self.id);\nconsole.log(self.info);\n```\n\n----------------------------------------\n\nTITLE: Implementing Email Thread Notification Toggle\nDESCRIPTION: Shows how to create a checkbox interface for toggling email thread notifications using the updateSettings function.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-notification-settings-panel.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useNotificationSettings } from \"@liveblocks/react\";\n\nfunction NotificationSettings() {\n  const [{ isLoading, error, settings }, updateSettings] =\n    useNotificationSettings();\n\n  if (isLoading || error) {\n    return null;\n  }\n\n  return (\n    <>\n      {settings.email ? (\n        <>\n          <label>\n            Receive thread notifications by email\n            <input\n              type=\"checkbox\"\n              checked={settings.email.thread}\n              onChange={(e) =>\n                updateSettings({ email: { thread: e.target.checked } })\n              }\n            />\n          </label>\n        </>\n      ) : null}\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Typing Detection with Liveblocks\nDESCRIPTION: JavaScript implementation using Liveblocks client to track and update user typing status through presence system. Includes event listeners for keydown and blur events.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-javascript-and-liveblocks.mdx#2025-04-11_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\n\nconst client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n\nfunction run() {\n  const { room, leave } = client.enterRoom(\"javascript-todo-app\", {\n    initialPresence: { isTyping: false },\n  });\n\n  const whoIsHere = document.getElementById(\"who_is_here\");\n  const todoInput = document.getElementById(\"todo_input\");\n\n  room.subscribe(\"others\", (others) => {\n    whoIsHere.innerHTML = `There are ${others.count} other users online`;\n  });\n\n  todoInput.addEventListener(\"keydown\", (e) => {\n    // Clear the input when the user presses \"Enter\".\n    // We'll add todo later on\n    if (e.key === \"Enter\") {\n      room.updatePresence({ isTyping: false });\n      todoInput.value = \"\";\n    } else {\n      room.updatePresence({ isTyping: true });\n    }\n  });\n\n  todoInput.addEventListener(\"blur\", () => {\n    room.updatePresence({ isTyping: false });\n  });\n}\n\nrun();\n```\n\n----------------------------------------\n\nTITLE: Setting up Liveblocks Client in React\nDESCRIPTION: Configure the Liveblocks client using LiveblocksProvider and RoomProvider components in the main App component.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-monaco-react.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n} from \"@liveblocks/react/suspense\";\nimport { Editor } from \"./Editor\";\n\nexport default function App() {\n  return (\n    // +++\n    <LiveblocksProvider publicApiKey={\"{{PUBLIC_KEY}}\"}>      <RoomProvider id=\"my-room\">\n        {/* ... */}\n      </RoomProvider>\n    </LiveblocksProvider>\n    // +++\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Threads component for comments functionality\nDESCRIPTION: Implementation of the Threads component that adds commenting functionality to the editor using FloatingComposer, AnchoredThreads, and FloatingThreads components from @liveblocks/react-blocknote.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-blocknote.mdx#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useThreads } from \"@liveblocks/react/suspense\";\nimport {\n  AnchoredThreads,\n  FloatingComposer,\n  FloatingThreads,\n} from \"@liveblocks/react-blocknote\";\nimport { BlockNoteEditor } from \"@blocknote/core\";\n\nexport function Threads({ editor }: { editor: BlockNoteEditor | null }) {\n  const { threads } = useThreads({ query: { resolved: false } });\n\n  if (!editor) {\n    return null;\n  }\n\n  return (\n    <>\n      <div className=\"anchored-threads\">\n        <AnchoredThreads editor={editor} threads={threads} />\n      </div>\n      <FloatingThreads\n        editor={editor}\n        threads={threads}\n        className=\"floating-threads\"\n      />\n      <FloatingComposer editor={editor} className=\"floating-composer\" />\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: User Authentication with Group IDs\nDESCRIPTION: Demonstrates how to authenticate a user with associated group IDs for group-based permissions.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token.mdx#2025-04-11_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nexport async function POST(request: Request) {\n  const { status, body } = await liveblocks.identifyUser({\n    userId: \"marie@example.com\",\n    groupIds: [\"engineering\"]\n  });\n\n  return new Response(body, { status });\n}\n```\n\n----------------------------------------\n\nTITLE: Using Pagination with useThreads in React\nDESCRIPTION: Shows how to use the new pagination support added to the useThreads hook in @liveblocks/react v2.9.0. This enables more efficient loading of threads.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_14\n\nLANGUAGE: tsx\nCODE:\n```\nconst {\n  threads,\n  isLoading,\n  error,\n\n  // ✨ New in Liveblocks 2.9\n  fetchMore,\n  isFetchingMore,\n  hasFetchedAll,\n  fetchMoreError,\n} = useThreads({ query });\n```\n\n----------------------------------------\n\nTITLE: Importing BlockNote and Liveblocks Styles in Next.js\nDESCRIPTION: Next.js layout component that imports necessary CSS styles for BlockNote and Liveblocks UI components.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-blocknote.mdx#2025-04-11_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nimport \"@blocknote/core/fonts/inter.css\";\nimport \"@blocknote/mantine/style.css\";\nimport \"@liveblocks/react-ui/styles.css\";\nimport \"@liveblocks/react-ui/styles/dark/media-query.css\";\nimport \"@liveblocks/react-tiptap/styles.css\";\nimport \"./globals.css\";\n```\n\n----------------------------------------\n\nTITLE: Combining FloatingThreads and AnchoredThreads with Responsive Design\nDESCRIPTION: This snippet demonstrates how to use FloatingThreads and AnchoredThreads together for optimal mobile and desktop experiences. It uses Tailwind classes for responsive design and filters out resolved threads.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_26\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useThreads } from \"@liveblocks/react/suspense\";\nimport { AnchoredThreads, FloatingThreads } from \"@liveblocks/react-lexical\";\n\nfunction ThreadOverlay() {\n  const { threads } = useThreads({ query: { resolved: false } });\n\n  return (\n    <>\n      <FloatingThreads\n        threads={threads}\n        className=\"w-[350px] block md:hidden\"\n      />\n      <AnchoredThreads\n        threads={threads}\n        className=\"w-[350px] hidden sm:block\"\n      />\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Threading Component\nDESCRIPTION: Component for handling thread-based comments in the editor, including floating composer and thread display for both desktop and mobile views.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-tiptap.mdx#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useThreads } from \"@liveblocks/react/suspense\";\nimport {\n  AnchoredThreads,\n  FloatingComposer,\n  FloatingThreads,\n} from \"@liveblocks/react-tiptap\";\nimport { Editor } from \"@tiptap/react\";\n\nexport function Threads({ editor }: { editor: Editor | null }) {\n  const { threads } = useThreads({ query: { resolved: false } });\n\n  return (\n    <>\n      <div className=\"anchored-threads\">\n        <AnchoredThreads editor={editor} threads={threads} />\n      </div>\n      <FloatingThreads\n        editor={editor}\n        threads={threads}\n        className=\"floating-threads\"\n      />\n      <FloatingComposer editor={editor} className=\"floating-composer\" />\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Importing useOthers Hook from Liveblocks in TypeScript\nDESCRIPTION: This snippet demonstrates how to import the useOthers hook from the @liveblocks/react/suspense library within a TypeScript file. The hook is specifically the Suspense version, enabling its usage within components wrapped with ClientSideSuspense. This import is a prerequisite for using the hook to access data about other users in the Liveblocks room.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/others/guide.mdx#2025-04-11_snippet_0\n\nLANGUAGE: ts\nCODE:\n```\nimport { useOthers } from \"@liveblocks/react/suspense\";\n```\n\n----------------------------------------\n\nTITLE: Using getSyncStatus in JavaScript\nDESCRIPTION: Demonstrates how to use the new getSyncStatus() method to check synchronization status of pending local changes.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-redux/CHANGELOG.md#2025-04-11_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nclient.getSyncStatus()\n```\n\n----------------------------------------\n\nTITLE: Thread Overlay for Responsive Design with Liveblocks and TypeScript\nDESCRIPTION: Uses `AnchoredThreads` and `FloatingThreads` to implement responsive thread display, hiding one component on smaller screens for optimal user experience. A custom media query hook `useIsMobile` is utilized.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_30\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useSyncExternalStore } from \"react\";\\nimport { useThreads } from \"@liveblocks/react/suspense\";\\nimport { AnchoredThreads, FloatingThreads } from \"@liveblocks/react-lexical\";\\n\\nfunction ThreadOverlay() {\\n  const { threads } = useThreads({ query: { resolved: false } });\\n  const isMobile = useIsMobile();\\n  \\n  if (isMobile) {\\n    return <FloatingThreads threads={threads} style={{ width: \"350px\" }} />;\\n  }\\n\\n  return <AnchoredThreads threads={threads} style={{ width: \"350px\" }} />;\\n}\\n\\nexport function useIsMobile() {\\n  return useSyncExternalStore(subscribe, getSnapshot, getSnapshot);\\n}\\n\\nfunction subscribe(callback: () => void) {\\n  const query = window.matchMedia(\"(max-width: 1024px)\");\\n\\n  query.addEventListener(\"change\", callback);\\n  return () => query.removeEventListener(\"change\", callback);\\n}\\n\\nfunction getSnapshot() {\\n  const query = window.matchMedia(\"(max-width: 1024px)\");\\n  return query.matches;\\n}\n```\n\n----------------------------------------\n\nTITLE: Handling ydocUpdated Webhook Events\nDESCRIPTION: Extended webhook handler that filters for the 'ydocUpdated' event type and extracts the roomId from the event data, which can then be used to update the database.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-yjs-document-data-to-a-supabase-postgres-database.mdx#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\n\n// Add your signing key from a project's webhooks dashboard\nconst WEBHOOK_SECRET = \"YOUR_SIGNING_SECRET\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Verify if this is a real webhook request\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  // When Yjs document data has been updated\n  if (event.type === \"ydocUpdated\") {\n    const { roomId } = event.data;\n\n    // Update database\n    // ...\n  }\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: FloatingThreads Implementation with Thread Management\nDESCRIPTION: Shows how to implement FloatingThreads component with thread management using useThreads hook.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_28\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useThreads } from \"@liveblocks/react/suspense\";\nimport {\n  useLiveblocksExtension,\n  FloatingComposer,\n  FloatingThreads,\n} from \"@liveblocks/react-tiptap\";\nimport { useEditor, EditorContent } from \"@tiptap/react\";\n\nfunction TextEditor() {\n  const liveblocks = useLiveblocksExtension();\n\n  const editor = useEditor({\n    extensions: [\n      liveblocks,\n      // ...\n    ],\n  });\n\n  const { threads } = useThreads();\n\n  return (\n    <div>\n      <EditorContent editor={editor} />\n      <FloatingComposer editor={editor} style={{ width: \"350px\" }} />\n      <FloatingThreads\n        editor={editor}\n        threads={threads}\n        style={{ width: \"350px\" }}\n      />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a webhook endpoint in Next.js for Liveblocks notifications\nDESCRIPTION: A basic Next.js route handler for receiving webhook events from Liveblocks. This endpoint will process incoming notification events, particularly for text mentions.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-send-email-notifications-for-unread-text-editor-mentions.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Handle webhooks and notifications\n  // ...\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Custom Composer Submission Handler\nDESCRIPTION: Example demonstrating custom submission behavior with the Composer component using mutation hooks.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Composer } from \"@liveblocks/react-ui\";\nimport { useEditComment, useAddReaction } from \"@liveblocks/react/suspense\";\n\n// Custom submission behavior (edits a comment and adds a reaction)\nfunction Component({ threadId, commentId }) {\n  const editComment = useEditComment();\n  const addReaction = useAddReaction();\n\n  return (\n    <Composer\n      onComposerSubmit={({ body, attachments }, event) => {\n        event.preventDefault();\n\n        // Example mutations\n        editComment({ threadId, commentId, body, attachments });\n        addReaction({ threadId, commentId, emoji: \"✅\" });\n\n        // Other custom behavior\n        // ...\n      }}\n    />\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Lexical Editor Theme for Text Styles\nDESCRIPTION: This code snippet demonstrates how to configure the Lexical editor's theme to apply custom CSS classes for different text styles (bold, italic, underline) and paragraphs.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-lexical-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_11\n\nLANGUAGE: tsx\nCODE:\n```\nimport styles from \"./Editor.module.css\";\n// ...\n\n// Set up editor config and theme\nconst initialConfig = {\n  // NOTE: This is critical for collaboration plugin to set editor state to null. It\n  // would indicate that the editor should not try to set any default state\n  // (not even empty one), and let collaboration plugin do it instead\n  editorState: null,\n  namespace: \"Demo\",\n  nodes: [],\n  onError: (error: unknown) => {\n    throw error;\n  },\n  theme: {\n    text: {\n      bold: styles.textBold,\n      italic: styles.textItalic,\n      underline: styles.textUnderline,\n    },\n    paragraph: styles.paragraph,\n  },\n};\n\n// ...\n```\n\n----------------------------------------\n\nTITLE: Basic FloatingComposer Implementation\nDESCRIPTION: Shows the basic setup of FloatingComposer component for creating comment threads.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_21\n\nLANGUAGE: tsx\nCODE:\n```\n<LexicalComposer initialConfig={initialConfig}>\n  <LiveblocksPlugin>\n    <FloatingComposer />\n  </LiveblocksPlugin>\n</LexicalComposer>\n```\n\n----------------------------------------\n\nTITLE: Using useSyncStatus hook in React\nDESCRIPTION: Example of using the new useSyncStatus hook to check if Liveblocks is synchronizing local changes to the server, useful for displaying a 'Saving...' spinner.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-core/CHANGELOG.md#2025-04-11_snippet_10\n\nLANGUAGE: javascript\nCODE:\n```\nuseSyncStatus({ smooth: true })\n```\n\n----------------------------------------\n\nTITLE: Adding Toolbar Component\nDESCRIPTION: Basic implementation of the Toolbar component with editor prop\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/text-editor/tiptap.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n<Toolbar editor={editor} />\n```\n\n----------------------------------------\n\nTITLE: Setting User Metadata in ID Token Authentication\nDESCRIPTION: Demonstrates how to attach user metadata (name and avatar) when identifying a user with Liveblocks ID token authentication method.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-add-users-to-liveblocks-comments.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst { status, body } = await liveblocks.identifyUser(\n  {\n    userId: \"marc@example.com\",\n    groupIds: [], // Optional\n  },\n  {\n    userInfo: {\n      name: \"Marc\",\n      avatar: \"https://example.com/marc.png\",\n\n      // Your custom metadata\n      // ...\n    },\n  }\n);\n```\n\n----------------------------------------\n\nTITLE: Integrating Zustand with Liveblocks Middleware\nDESCRIPTION: Example showing how to enhance a Zustand store with Liveblocks middleware to add real-time collaboration features. The middleware maps state properties to Liveblocks presence and storage.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react/CHANGELOG.md#2025-04-11_snippet_17\n\nLANGUAGE: typescript\nCODE:\n```\nimport create from \"zustand\";\nimport { createClient } from \"@liveblocks/client\";\nimport { middleware } from \"@liveblocks/zustand\";\n\nconst client = createClient({ /*...*/ });\n\ntype State = {\n  draft: string;\n  isTyping: boolean;\n  todos: Todo[];\n  setDraft: (draft: string) => void;\n  addTodo: () => void;\n  deleteTodo: (index: number) => void;\n};\n\ncreate(\n  middleware<State>(/* ... */, {\n    client,\n    presenceMapping: { isTyping: true },\n    storageMapping: { todos: true }\n  })\n);\n```\n\n----------------------------------------\n\nTITLE: Defining Liveblocks Storage Structure in TypeScript\nDESCRIPTION: This snippet defines the structure of the Liveblocks storage using a LiveObject for a person with name and age properties.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/modifying-storage-data/guide.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nStorage: {\n  person: LiveObject<{\n    name: string;\n    age: number;\n  }>;\n}\n```\n\n----------------------------------------\n\nTITLE: Liveblocks Global Type Configuration in TypeScript\nDESCRIPTION: Global type declaration for Liveblocks Presence and Storage, enabling type sharing across frontend and backend APIs\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react/CHANGELOG.md#2025-04-11_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare global {\n  interface Liveblocks {\n    Presence: Presence;\n    Storage: Storage;\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Comment Creation Event Handler\nDESCRIPTION: Implementation of the comment creation event handler that extracts relevant data from the webhook event.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-send-email-notifications-when-comments-are-created.mdx#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\n\n// Add your webhook secret key from a project's webhooks dashboard\nconst WEBHOOK_SECRET = \"YOUR_WEBHOOK_SECRET_KEY\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Verify if this is a real webhook request\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  // When a comment has been created\n  if (event.type === \"commentCreated\") {\n    const { roomId, threadId, commentId } = event.data;\n\n    // Send notifications\n    // ...\n  }\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Comment List in React Thread Component\nDESCRIPTION: Example of mapping through thread comments to render multiple Comment components using the useThreads hook.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Comment } from \"@liveblocks/react-ui\";\nimport { ThreadData } from \"@liveblocks/client\";\n\n// Renders a list of comments attach to the specified `thread`\nfunction Component({ thread }: { thread: ThreadData }) {\n  return (\n    <>\n      {thread.comments.map((comment) => (\n        <Comment key={comment.id} comment={comment} />\n      ))}\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Nested Data in Liveblocks Storage with useStorage Hook\nDESCRIPTION: This example shows how to access nested data from Liveblocks storage using the new useStorage hook, which simplifies data retrieval compared to the previous version.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/0.18.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Component() {\n  const pets = useStorage((root) => root.scientist.pets);\n  // [\"🐶\", \"🐈\"]\n}\n```\n\n----------------------------------------\n\nTITLE: Using useIsEditorReady Hook in TipTap\nDESCRIPTION: Shows how to use the useIsEditorReady hook to check if the editor content has been loaded, which is useful for displaying loading indicators.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_52\n\nLANGUAGE: ts\nCODE:\n```\nimport { useIsEditorReady } from \"@liveblocks/react-tiptap\";\n\nconst status = useIsEditorReady();\n```\n\n----------------------------------------\n\nTITLE: Managing User Notification Settings with Node.js Client\nDESCRIPTION: Example showing how to use the Liveblocks Node.js client to manage user notification settings, including getting, updating, and deleting notification preferences for specific users.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\nconst liveblocks = new Liveblocks({ secret: \"sk_xxx\" });\n\nconst settings = await liveblocks.getNotificationSettings({ userId });\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst updatedSettings = await liveblocks.updateNotificationSettings({\n  userId,\n  data: {\n    teams: {\n      $fileUploaded: true,\n    },\n  },\n});\nawait liveblocks.deleteNotificationSettings({ userId });\n```\n\n----------------------------------------\n\nTITLE: Creating a Custom Toolbar with Child Elements\nDESCRIPTION: Simple example showing how to create a fully custom toolbar by passing elements as children. This approach allows for complete customization of the toolbar's content.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Toolbar } from \"@liveblocks/react-lexical\";\n\nfunction CustomToolbar() {\n  return (\n    <Toolbar>\n      Hello <strong>world</strong>\n    </Toolbar>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Literal Types Schema Example\nDESCRIPTION: Schema example showing how to use literal types to restrict value options.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/schema-validation/syntax.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\ntype Event {\n  statusCode: 200 | 400\n  info: string\n}\n\ntype Storage {\n  theme: \"light\" | \"dark\"\n  history: LiveList<Event>\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Comment Threads\nDESCRIPTION: Setup for rendering comment threads using AnchoredThreads and FloatingThreads components.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/text-editor/lexical.mdx#2025-04-11_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nexport function Threads({ editor }) {\n  const { threads } = useThreads();\n\n  return (\n    <>\n      <AnchoredThreads threads={threads} />\n      <FloatingThreads threads={threads} />\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Real-world Implementation of resolveUsers for API Integration\nDESCRIPTION: This snippet demonstrates a practical implementation of resolveUsers that fetches user data from a backend API. It shows how to retrieve users based on their IDs and return them in the format expected by Liveblocks Notifications.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-add-users-to-liveblocks-notifications.mdx#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\n<LiveblocksProvider\n  resolveUsers={async ({ userIds }) => {\n    // Get users from your back end\n    const users = await __fetchUsers__(userIds);\n\n    // Return a list of users\n    return users;\n  }}\n\n  // ...\n/>;\n```\n\n----------------------------------------\n\nTITLE: Styling the Whiteboard Canvas and Shapes with CSS\nDESCRIPTION: CSS styles for the whiteboard application, including the canvas, rectangle shapes, loading state, and toolbar with buttons for user interaction.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-online-whiteboard-with-react-zustand-and-liveblocks.mdx#2025-04-11_snippet_5\n\nLANGUAGE: css\nCODE:\n```\nbody {\n  background-color: #eeeeee;\n}\n\n.loading {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100vh;\n  width: 100vw;\n}\n\n.canvas {\n  background-color: #eeeeee;\n  touch-action: none;\n  width: 100vw;\n  height: 100vh;\n}\n\n.rectangle {\n  position: absolute;\n  /* transition: all 0.1s ease; */\n  stroke-width: 1;\n  border-style: solid;\n  border-width: 2px;\n  height: 100px;\n  width: 100px;\n}\n\n.toolbar {\n  position: fixed;\n  top: 12px;\n  left: 50%;\n  transform: translateX(-50%);\n  padding: 4px;\n  border-radius: 8px;\n  box-shadow:\n    0px 2px 4px rgba(0, 0, 0, 0.1),\n    0px 0px 0px 1px rgba(0, 0, 0, 0.05);\n  display: flex;\n  background-color: #ffffff;\n  user-select: none;\n}\n\n.toolbar button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 4px 8px;\n  border-radius: 4px;\n  background-color: #f8f8f8;\n  color: #181818;\n  border: none;\n  box-shadow:\n    0px 2px 4px rgba(0, 0, 0, 0.1),\n    0px 0px 0px 1px rgba(0, 0, 0, 0.05);\n  margin: 4px;\n  font-weight: 500;\n  font-size: 12px;\n}\n\n.toolbar button:hover,\n.toolbar button:focus {\n  background-color: #ffffff;\n}\n\n.toolbar button:active {\n  background-color: #eeeeee;\n}\n```\n\n----------------------------------------\n\nTITLE: Integrating a Toolbar into the Code Editor in TSX\nDESCRIPTION: This TypeScript snippet demonstrates how to integrate a toolbar component into the CollaborativeEditor component. It conditionally renders the toolbar if the undo manager is available, ensuring compliance with the modular structure of the codebase. This setup assumes the presence of a Toolbar module, a CSS module, and required Liveblocks hooks.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-codemirror-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_13\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Toolbar } from \"@/components/Toolbar\";\n// ...\n\nexport function CollaborativeEditor() {\n  // ...\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.editorHeader}>\n        <div>\n          {yUndoManager ? <Toolbar yUndoManager={yUndoManager} /> : null}\n        </div>\n      </div>\n      <div className={styles.editorContainer} ref={ref}></div>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Storage in React RoomProvider\nDESCRIPTION: This code demonstrates how to initialize the storage with a LiveObject when creating a RoomProvider component in a React application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/storage/guide.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n<RoomProvider\n  id={roomId}\n  initialStorage={{\n    person: new LiveObject({ name: \"Marie\", age: 30 }),\n  }}\n>\n```\n\n----------------------------------------\n\nTITLE: Using useIsEditorReady Hook in React\nDESCRIPTION: Demonstrates the usage of the new useIsEditorReady hook in React to show a skeleton UI before the editor has received the initial text from the server.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-emails/CHANGELOG.md#2025-04-11_snippet_11\n\nLANGUAGE: javascript\nCODE:\n```\nuseIsEditorReady()\n```\n\n----------------------------------------\n\nTITLE: Composer Attachments Handler Implementation\nDESCRIPTION: Implementation of attachments handling in a composer using useComposer hook.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_28\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Composer, useComposer } from \"@liveblocks/react-ui/primitives\";\nimport { useCreateThread } from \"@liveblocks/react/suspense\";\n\nfunction MyComposer() {\n  const createThread = useCreateThread();\n\n  return (\n    <Composer.Form\n      onComposerSubmit={({ body, attachments }) => {\n        const thread = createThread({\n          body,\n          attachments,\n          metadata: {},\n        });\n      }}\n    >\n      <Composer.Editor components={/* Your custom component parts */} />\n      // +++\n      <MyComposerAttachments />\n      // +++\n      <Composer.AttachFiles>Attach Files</Composer.AttachFiles>\n      <Composer.Submit>Submit</Composer.Submit>\n    </Composer.Form>\n  );\n}\n\nfunction MyComposerAttachments() {\n  // +++\n  const { attachments, removeAttachment } = useComposer();\n  // +++\n\n  return (\n    <div>\n      // +++\n      {attachments.map((attachment) => (\n        <div key={attachment.id}>\n          {attachment.name} ({attachment.status})\n          <button onClick={() => removeAttachment(attachment.id)}>\n            Remove\n          </button>\n        </div>\n      ))}\n      // +++\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing room object from Liveblocks state in JavaScript\nDESCRIPTION: This code snippet shows how to access the Room object currently synced to the Zustand state through the Liveblocks state.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-zustand.mdx#2025-04-11_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nconst {\n  liveblocks: { room },\n} = useStore();\n```\n\n----------------------------------------\n\nTITLE: Accessing User Metadata in React Component\nDESCRIPTION: Use the useSelf hook to access user metadata in a React component.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/nextjs.mdx#2025-04-11_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nexport { useSelf } from \"@liveblocks/react/suspense\";\n\nfunction Component() {\n  const { name, avatar, colors } = useSelf((me) => me.info);\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing AiToolbar in Tiptap Editor\nDESCRIPTION: Shows how to add the AiToolbar component to a Tiptap editor setup, including enabling AI functionality in the useLiveblocksExtension hook.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_39\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  useLiveblocksExtension,\n  // +++\n  AiToolbar,\n  // +++\n  FloatingToolbar,\n} from \"@liveblocks/react-tiptap\";\nimport { useEditor, EditorContent } from \"@tiptap/react\";\n\nfunction TextEditor() {\n  const liveblocks = useLiveblocksExtension({\n    // +++\n    ai: true,\n    // +++\n  });\n\n  const editor = useEditor({\n    extensions: [\n      liveblocks,\n      // ...\n    ],\n  });\n\n  return (\n    <div>\n      <EditorContent editor={editor} />\n      // +++\n      <AiToolbar editor={editor} />\n      // +++\n      <FloatingToolbar editor={editor} />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing User ID and Info with useSelf\nDESCRIPTION: Demonstrates how to access both the user ID and user information in a React component using the useSelf hook.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/remix.mdx#2025-04-11_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nconst self = useSelf();\nconsole.log(self.id);\nconsole.log(self.info);\n```\n\n----------------------------------------\n\nTITLE: Accessing User Metadata in React Component\nDESCRIPTION: Demonstrates how to access user metadata in a React component using the useSelf hook from Liveblocks.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/nextjs.mdx#2025-04-11_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nexport { useSelf } from \"@liveblocks/react/suspense\";\n\nfunction Component() {\n  const { name, avatar, colors } = useSelf((me) => me.info);\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Suspense with Liveblocks React in TypeScript\nDESCRIPTION: This snippet shows how to use Suspense with Liveblocks React. It demonstrates the setup of RoomProvider with initial storage and presence, and wraps the App component with Suspense for handling loading states.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-storage-with-react.mdx#2025-04-11_snippet_10\n\nLANGUAGE: tsx\nCODE:\n```\nimport { LiveObject } from \"@liveblocks/client\";\nimport { Suspense } from \"react\";\nimport { RoomProvider, useStorage } from \"@liveblocks/react/suspense\";\n\nfunction App() {\n  const scientist = useStorage((root) => root.scientist);\n\n  return (\n    <>\n      <input value={scientist.firstName} />\n      <input value={scientist.lastName} />\n    </>\n  );\n}\n\nfunction Index() {\n  return (\n    <RoomProvider\n      id=\"my-room-id\"\n      initialPresence={/* ... */}\n      initialStorage={{\n        scientist: new LiveObject({\n          firstName: \"Marie\",\n          lastName: \"Curie\",\n        }),\n      }}\n    >\n      <Suspense fallback={<div>Loading</div>}>\n        <App />\n      </Suspense>\n    </RoomProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Connecting to Liveblocks Room with RoomProvider in React TSX\nDESCRIPTION: This snippet shows how to wrap a React component with RoomProvider to connect to a Liveblocks room. It uses the roomId prop to specify the unique room name.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/joining-a-room/guide.mdx#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nreturn (\n  <LiveblocksProvider publicApiKey={publicApiKey}>\n    <RoomProvider id={roomId}>\n      <Room />\n    </RoomProvider>\n  </LiveblocksProvider>\n);\n```\n\n----------------------------------------\n\nTITLE: Subscribing to Storage Status Changes in TypeScript\nDESCRIPTION: Example showing how to subscribe to storage status changes using the Room.subscribe method. Demonstrates handling different storage states including not-loaded, loading, synchronizing, and synchronized.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-emails/CHANGELOG.md#2025-04-11_snippet_21\n\nLANGUAGE: typescript\nCODE:\n```\nroom.subscribe(\"storage-status\", (status) => {\n  switch (status) {\n    case \"not-loaded\":\n      break;\n    case \"loading\":\n      break;\n    case \"synchronizing\":\n      break;\n    case \"synchronized\":\n      break;\n    default:\n      break;\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Setting up Liveblocks Provider in React\nDESCRIPTION: React component setup showing LiveblocksProvider and RoomProvider configuration for establishing real-time collaboration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-codemirror-react.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n} from \"@liveblocks/react/suspense\";\nimport { Editor } from \"./Editor\";\n\nexport default function App() {\n  return (\n    <LiveblocksProvider publicApiKey={\"{{PUBLIC_KEY}}\"}>\n      <RoomProvider id=\"my-room\">\n        {/* ... */}\n      </RoomProvider>\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Styling Rich Text in Lexical Editor\nDESCRIPTION: This CSS module defines styles for rich text elements (bold, italic, underline) and paragraphs in the Lexical editor, corresponding to the theme configuration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-lexical-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_12\n\nLANGUAGE: css\nCODE:\n```\n/* ... */\n\n.textBold {\n  font-weight: bold;\n}\n\n.textItalic {\n  font-style: italic;\n}\n\n.textUnderline {\n  text-decoration: underline;\n}\n\n.paragraph {\n  margin: 0.2rem 0;\n}\n```\n\n----------------------------------------\n\nTITLE: Filtering Rooms with Liveblocks Query Language\nDESCRIPTION: Examples of how to use Liveblocks query language to filter rooms by room ID prefixes, metadata values, and combinations of filters using AND logic.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-filter-rooms-using-query-language.mdx#2025-04-11_snippet_0\n\nLANGUAGE: js\nCODE:\n```\n// Rooms with IDs that begin with \"liveblocks:\"\nroomId^'liveblocks:'\n\n// Rooms with { roomType: 'whiteboard' } string metadata\nmetadata['roomType']:'whiteboard'\n\n// Combine queries with AND\nroomId^'liveblocks:' AND metadata['roomType']:'whiteboard'\n\n// Use multiple metadata filters at once\nmetadata['roomType']:'whiteboard' AND metadata['creator']:'florent'\n```\n\n----------------------------------------\n\nTITLE: Customizing Thread Component in AnchoredThreads\nDESCRIPTION: Shows how to customize the Thread component within AnchoredThreads by passing a custom Thread property to the components prop. This example adds a border and shadow to each thread.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_35\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Thread } from \"@liveblocks/react-ui\";\n\n<AnchoredThreads\n  editor={editor}\n  threads={threads}\n  style={{ width: \"350px\" }}\n  className=\"my-anchored-thread\"\n  // +++\n  components={{\n    Thread: (props) => (\n      <Thread\n        {...props}\n        className=\"border shadow\"\n        style={{ background: \"white\" }}\n      />\n    ),\n  }}\n  // +++\n/>;\n```\n\n----------------------------------------\n\nTITLE: Adding Shape Deletion Functionality\nDESCRIPTION: Implements shape deletion feature with Redux actions and UI integration, including selection state management and button disable logic.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-online-whiteboard-with-react-redux-and-liveblocks.mdx#2025-04-11_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nconst slice = createSlice({\n  name: \"state\",\n  initialState,\n  reducers: {\n    insertRectangle: (state) => {\n      const shapeId = Date.now().toString();\n      const shape = {\n        x: getRandomInt(300),\n        y: getRandomInt(300),\n        fill: getRandomColor(),\n      };\n      state.shapes[shapeId] = shape;\n      state.selectedShape = shapeId;\n    },\n    onShapePointerDown: (state, action) => {\n      /* ... */\n    },\n    deleteShape: (state) => {\n      if (state.selectedShape) {\n        delete state.shapes[state.selectedShape];\n        state.selectedShape = null;\n      }\n    },\n  },\n});\n\nexport const { insertRectangle, onShapePointerDown, deleteShape } = slice.actions;\n```\n\n----------------------------------------\n\nTITLE: Fetching Liveblocks Storage Data using TypeScript\nDESCRIPTION: Shows how to retrieve Storage document data from Liveblocks using the REST API with webhook verification. Requires webhook signing key and API secret key from the project dashboard.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-storage-document-data-to-a-planetscale-mysql-database.mdx#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\n\n// Add your signing key from a project's webhooks dashboard\nconst WEBHOOK_SECRET = \"YOUR_SIGNING_SECRET\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\n// Add your secret key from a project's API keys dashboard\nconst API_SECRET = \"{{SECRET_KEY}}\";\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Verify if this is a real webhook request\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  // When Storage document data has been updated\n  if (event.type === \"storageUpdated\") {\n    const { roomId } = event.data;\n\n    // Get Storage data from Liveblocks REST API\n    const url = `https://api.liveblocks.io/v2/rooms/${roomId}/storage`;\n    const response = await fetch(url, {\n      headers: { Authorization: `Bearer ${API_SECRET}` },\n    });\n\n    if (!response.ok) {\n      return new Response(\"Problem accessing Liveblocks REST APIs\", {\n        status: 500,\n      });\n    }\n\n    // Your JSON Storage document data as a string\n    const storageData = await response.text();\n\n    // Update database\n    // ...\n  }\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Documents with Server Actions\nDESCRIPTION: Examples of creating documents using server actions in both API endpoints and client components.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/tools/nextjs-starter-kit.mdx#2025-04-11_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createDocument } from \"@/lib/actions\";\n\nexport async function POST() {\n  // Create a new document\n  const { data, error } = await createDocument({\n    name: \"My document\",\n    type: \"whiteboard\",\n    userId: \"charlie.layne@example.com\",\n  });\n\n  // ...\n}\n```\n\nLANGUAGE: tsx\nCODE:\n```\nimport { createDocument } from \"@/lib/actions\";\n\nexport function CreateDocumentButton() {\n  async function handleCreateDocument() {\n    // Create a new document\n    const { data, error } = await createDocument({\n      name: \"My document\",\n      type: \"whiteboard\",\n      userId: \"charlie.layne@example.com\",\n    });\n  }\n\n  return <button onClick={handleCreateDocument}>New document</button>;\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing History Pause/Resume with Zustand and Liveblocks\nDESCRIPTION: Example demonstrating how to access pause and resume functionality for history tracking in Liveblocks. This is useful for skipping intermediate states during operations like dragging.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-multiplayer-undo-redo-with-zustand.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport useStore from \"../store\";\n\nconst pause = useStore((state) => state.liveblocks.room?.history.pause);\nconst resume = useStore((state) => state.liveblocks.room?.history.resume);\n```\n\n----------------------------------------\n\nTITLE: Customizing Toolbar Components\nDESCRIPTION: Example of creating a custom toolbar with specific sections and components\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/text-editor/tiptap.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nfunction CustomToolbar({ editor }: { editor: Editor | null }) {\n  return (\n    <Toolbar editor={editor}>\n      // +++\n      <Toolbar.BlockSelector />\n      <Toolbar.SectionInline />\n      <Toolbar.Separator />\n      <Toolbar.SectionCollaboration />\n      // +++\n    </Toolbar>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Storage Root Type in TypeScript\nDESCRIPTION: Basic example of defining the required Storage root type in a Liveblocks schema.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/schema-validation/syntax.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype Storage {\n\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Notification Settings with React Hook\nDESCRIPTION: Demonstrates using the useUpdateNotificationSettings hook for standalone settings updates, such as an unsubscribe button implementation.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node/CHANGELOG.md#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useUpdateNotificationSettings } from \"@liveblocks/react\";\n\nconst updateSettings = useUpdateNotificationSettings();\n\nconst onUnsubscribe = () => {\n  updateSettings({\n    slack: {\n      thread: false,\n    },\n  });\n};\n```\n\n----------------------------------------\n\nTITLE: Using Toolbar.SectionHistory in React-Tiptap\nDESCRIPTION: Shows how to use the Toolbar.SectionHistory component to add undo and redo buttons to the toolbar.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_16\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Toolbar } from \"@liveblocks/react-tiptap\";\n\n<Toolbar editor={editor}>\n  // +++\n  <Toolbar.SectionHistory />\n  // +++\n</Toolbar>;\n```\n\n----------------------------------------\n\nTITLE: Using Pagination with useThreads in React\nDESCRIPTION: Example showing the pagination support in useThreads() hook introduced in version 2.9.0 to incrementally load thread data.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/create-liveblocks-app/CHANGELOG.md#2025-04-11_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nconst {\n  threads,\n  isLoading,\n  error,\n\n  // ✨ New in Liveblocks 2.9\n  fetchMore,\n  isFetchingMore,\n  hasFetchedAll,\n  fetchMoreError,\n} = useThreads({ query });\n```\n\n----------------------------------------\n\nTITLE: Using useIsEditorReady Hook in Lexical Editor TypeScript\nDESCRIPTION: Demonstrates the usage of the `useIsEditorReady` hook within a Lexical editor setup to display a loading state until the editor content is fully ready. Part of Liveblocks integrations for optimizing user experience.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_37\n\nLANGUAGE: tsx\nCODE:\n```\nimport { LexicalComposer } from \"@lexical/react/LexicalComposer\";\\nimport { RichTextPlugin } from \"@lexical/react/LexicalRichTextPlugin\";\\nimport { ContentEditable } from \"@lexical/react/LexicalContentEditable\";\\nimport { LexicalErrorBoundary } from \"@lexical/react/LexicalErrorBoundary\";\\nimport {\\n  liveblocksConfig,\\n  LiveblocksPlugin,\\n  useIsEditorReady,\\n} from \"@liveblocks/react-lexical\";\\n\\nconst initialConfig = liveblocksConfig({\\n  namespace: \"MyEditor\",\\n  theme: {},\\n  nodes: [],\\n  onError: (err) => console.error(err),\\n});\\n\\nfunction Editor() {\\n  const ready = useIsEditorReady();\\n\\n  return (\\n    <LexicalComposer initialConfig={initialConfig}>\\n      <LiveblocksPlugin>\\n        <FloatingThreads />\\n        <FloatingComposer />\\n        <AnchoredThreads />\\n      </LiveblocksPlugin>\\n      {!ready ? (\\n        <div>Loading...</div>\\n      ) : (\\n        <RichTextPlugin\\n          contentEditable={<ContentEditable />}\\n          placeholder={<div>Enter some text...</div>}\\n          ErrorBoundary={LexicalErrorBoundary}\\n        />\\n      )}\\n    </LexicalComposer>\\n  );\\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering AnchoredThreads Component in React\nDESCRIPTION: Example of using the AnchoredThreads component to display threads in a Tiptap editor. It demonstrates basic usage with styling and width settings.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_34\n\nLANGUAGE: tsx\nCODE:\n```\n<AnchoredThreads\n  editor={editor}\n  threads={threads}\n  style={{ width: \"350px\" }}\n  className=\"my-anchored-thread\"\n/>\n```\n\n----------------------------------------\n\nTITLE: Importing Liveblocks React Hooks Directly\nDESCRIPTION: Demonstrates the improved import pattern for Liveblocks hooks in version 2.0. Hooks can now be imported directly from the package rather than through a configuration file.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-core/CHANGELOG.md#2025-04-11_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\n// ❌ Before: get hooks exported from your Liveblocks config\nimport { RoomProvider, useRoom, ... } from \"./liveblocks.config\";\n\n// ✅ After: import hooks directly\nimport { RoomProvider, useRoom, ... } from \"@liveblocks/react\";\nimport { RoomProvider, useRoom, ... } from \"@liveblocks/react/suspense\";\n```\n\n----------------------------------------\n\nTITLE: Customizing AI Response Generation in Liveblocks TipTap\nDESCRIPTION: Demonstrates how to customize the AI response generation process by implementing a custom resolveContextualPrompt function that can use a custom API endpoint instead of the default Liveblocks service.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_51\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useLiveblocksExtension } from \"@liveblocks/react-tiptap\";\nimport { useEditor } from \"@tiptap/react\";\n\nfunction TextEditor() {\n  const liveblocks = useLiveblocksExtension({\n    ai: {\n      // +++\n      resolveContextualPrompt: async ({ prompt, context, signal }) => {\n        const response = await fetch(\"/api/contextual-prompt\", {\n          method: \"POST\",\n          body: JSON.stringify({ prompt, context }),\n          signal,\n        });\n\n        return response.json();\n      },\n      // +++\n    },\n  });\n\n  const editor = useEditor({\n    extensions: [\n      liveblocks,\n      // ...\n    ],\n  });\n\n  // ...\n}\n```\n\n----------------------------------------\n\nTITLE: TypeScript Interface Definition for Liveblocks LSON\nDESCRIPTION: Example showing how to properly type interfaces for use with Liveblocks' LSON constraint, including three different solutions for handling the TypeScript constraint error.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/troubleshooting.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\ntype Person = {\n  name: string;\n  age: number;\n};\n\nconst people = new LiveList<Person>();\n```\n\nLANGUAGE: typescript\nCODE:\n```\nimport { JsonObject } from \"@liveblocks/client\";\n\ninterface Person extends JsonObject {\n  name: string;\n  age: number;\n}\n\nconst people = new LiveList<Person>();\n```\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { LiveList, EnsureJson } from \"@liveblocks/client\";\nimport { Person } from \"some-external-package\";\n\nconst people = new LiveList<EnsureJson<Person>>();\n```\n\n----------------------------------------\n\nTITLE: Using LiveList.set in TypeScript\nDESCRIPTION: This snippet demonstrates the usage of the `LiveList.set` method to update an element at a specific index within a LiveList. It shows how to create a LiveList and modify its contents using the set method, along with the expected output when converted to an array. It is necessary to ensure all connected clients are using version 0.16.0 or higher for correct behavior.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_35\n\nLANGUAGE: typescript\nCODE:\n```\nconst list = new LiveList([\"🦁\", \"🦊\", \"🐵\"]);\nlist.set(0, \"🐺\");\nlist.toArray(); // equals [\"🐺\", \"🦊\", \"🐵\"]\n```\n\n----------------------------------------\n\nTITLE: Defining TextMentionNotificationEvent schema in TypeScript\nDESCRIPTION: Defines the schema for the TextMentionNotificationEvent, triggered 30 minutes after a user is mentioned in a text and has not seen the mention. Includes information about the channel, notification kind, project, room, user, mention ID, notification ID, and creation timestamp.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/webhooks.mdx#2025-04-11_snippet_30\n\nLANGUAGE: typescript\nCODE:\n```\ntype TextMentionNotificationEvent = {\n  type: \"notification\";\n  data: {\n    channel: \"email\";\n    kind: \"textMention\";\n    projectId: string;\n    roomId: string;\n    userId: string;\n    mentionId: string;\n    inboxNotificationId: string;\n    createdAt: string;\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Adding Comments Composer\nDESCRIPTION: Implementation of floating comments composer for text editor\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/text-editor/tiptap.mdx#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\n<FloatingComposer editor={editor} />\n```\n\n----------------------------------------\n\nTITLE: Deleting User Notification Settings with Liveblocks Node.js\nDESCRIPTION: This snippet deletes the notification settings for a specific user using the Liveblocks Node.js client. The 'deleteNotificationSettings' method requires the user ID to target the correct user's settings.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-prosemirror/CHANGELOG.md#2025-04-11_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nawait liveblocks.deleteNotificationSettings({ userId });\n```\n\n----------------------------------------\n\nTITLE: Updating Redux Store for Shape Movement in JavaScript\nDESCRIPTION: This snippet shows how to update the Redux store to enable moving rectangles. It includes actions for shape selection, dragging, and updating shape positions.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-online-whiteboard-with-react-redux-and-liveblocks.mdx#2025-04-11_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\nconst initialState = {\n  shapes: {},\n  selectedShape: null,\n  isDragging: false,\n};\n\nconst slice = createSlice({\n  name: \"state\",\n  initialState,\n  reducers: {\n    insertRectangle: (state) => {\n      /* ... */\n    },\n    onShapePointerDown: (state, action) => {\n      state.selectedShape = action.payload;\n      state.isDragging = true;\n    },\n    deleteShape: (state) => {\n      /* ... */\n    },\n    onCanvasPointerUp: (state) => {\n      state.isDragging = false;\n    },\n    onCanvasPointerMove: (state, action) => {\n      if (state.isDragging && state.selectedShape) {\n        state.shapes[state.selectedShape].x = action.payload.x - 50;\n        state.shapes[state.selectedShape].y = action.payload.y - 50;\n      }\n    },\n  },\n});\n\nexport const {\n  insertRectangle,\n  onShapePointerDown,\n  deleteShape,\n  onCanvasPointerUp,\n  onCanvasPointerMove,\n} = slice.actions;\n\nexport function makeStore() {\n  return configureStore({\n    reducer: slice.reducer,\n    enhancers: [\n      liveblocksEnhancer({\n        client,\n        presenceMapping: { selectedShape: true },\n        storageMapping: { shapes: true },\n      }),\n    ],\n  });\n}\n\nconst store = makeStore();\n\nexport default store;\n```\n\n----------------------------------------\n\nTITLE: Getting Other Users' Presence with useOthers Hook in React\nDESCRIPTION: This snippet demonstrates how to use the useOthers hook from Liveblocks to get information about other online users in a React component.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/live-cursors/guide.mdx#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n// Get list of other users\nconst others = useOthers();\n```\n\n----------------------------------------\n\nTITLE: Pausing and Resuming History in Zustand Store (TypeScript)\nDESCRIPTION: This snippet demonstrates how to pause and resume the Liveblocks history stack to prevent intermediary positions from being added to the undo/redo history during drag operations.  `history.pause` is called when a shape is first clicked (`onShapePointerDown`), and `history.resume` is called when the mouse button is released (`onCanvasPointerUp`). This ensures that only the start and end positions of the drag are recorded in the history.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-online-whiteboard-with-react-zustand-and-liveblocks.mdx#2025-04-11_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\n\"/* ... */\\n\\nconst useStore = create<WithLiveblocks<State>>>(\\n  liveblocks(\\n    (set, get) => ({\n      isDragging: false,\n      shapes: {},\n      selectedShape: null,\n\n      insertRectangle: () => {\\n        /* ... */\\n      },\\n      onShapePointerDown: (shapeId) => {\\n        get().liveblocks.room?.history.pause();\n        set({ selectedShape: shapeId, isDragging: true });\n      },\\n      deleteShape: () => {\\n        /* ... */\\n      },\\n      onCanvasPointerUp: () => {\\n        set({ isDragging: false });\n        get().liveblocks.room?.history.resume();\n      },\\n      onCanvasPointerMove: (e) => {\\n        /* ... */\\n      },\n    }),\n    {\n      client,\n      storageMapping: { shapes: true },\n      presenceMapping: { selectedShape: true },\n    }\n  )\n);\\n\\nexport default useStore;\\n\"\n```\n\n----------------------------------------\n\nTITLE: Styling Liveblocks Components with Class Names\nDESCRIPTION: This CSS snippet demonstrates how to use class names for deeper customization of Liveblocks components. It includes an example of styling a specific component state using data attributes.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/styling-and-customization.mdx#2025-04-11_snippet_3\n\nLANGUAGE: css\nCODE:\n```\n.lb-thread {\n  /* Customise thread */\n}\n\n.lb-avatar[data-loading] {\n  /* Customise avatar loading state */\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Custom Toolbar with Mixed Components\nDESCRIPTION: Demonstrates how to create a custom toolbar mixing default components with custom buttons and toggles.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Toolbar } from \"@liveblocks/react-tiptap\";\nimport { Icon } from \"@liveblocks/react-ui\";\nimport { Editor } from \"@tiptap/react\";\n\nfunction CustomToolbar({ editor }: { editor: Editor | null }) {\n  return (\n    <Toolbar editor={editor}>\n      <Toolbar.SectionHistory />\n      <Toolbar.Separator />\n      <Toolbar.Button\n        name=\"Help\"\n        icon={<Icon.QuestionMark />}\n        shortcut=\"CMD-H\"\n        onClick={() => console.log(\"help\")}\n      />\n      <Toolbar.Toggle\n        name=\"Highlight\"\n        icon={<div>🖊️</div>}\n        active={editor?.isActive(\"highlight\") ?? false}\n        onClick={() => editor?.chain().focus().toggleHighlight().run()}\n        disabled={!editor?.can().chain().focus().toggleHighlight().run()}\n      />\n    </Toolbar>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Using createRoomContext for better type annotations in React\nDESCRIPTION: Demonstrates how to use the new createRoomContext API to improve type synchronization between RoomProvider and hooks, reducing the need for explicit type annotations.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/0.17.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\nimport { createRoomContext } from \"@liveblocks/react\";\n\nconst client = createClient({\n  /* client options */\n});\n\ntype Presence = {\n  cursor: { x: number; y: number };\n};\n\n// This is just to illustrate the API - read on for tips on where to put this!\nconst { RoomProvider, useMyPresence } = createRoomContext<Presence>(client);\n\nfunction Root() {\n  return (\n    <RoomProvider\n      id=\"my-room-id\"\n      initialPresence={{ cursor: { x: 100, y: 100 } }}\n    >\n      <Component />\n    </RoomProvider>\n  );\n}\n\nfunction Component() {\n  const [myPresence] = useMyPresence();\n\n  // We can now be sure that cursor is a valid property without any generic typed param\n  const cursor = myPresence.cursor;\n\n  /* ... */\n}\n```\n\n----------------------------------------\n\nTITLE: Emoji Reactions Implementation\nDESCRIPTION: Implementation of emoji reactions functionality using Liveblocks hooks for adding and removing reactions.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_25\n\nLANGUAGE: tsx\nCODE:\n```\nimport { CommentData } from \"@liveblocks/react-ui\";\nimport {\n  useAddReaction,\n  useRemoveReaction,\n  useSelf,\n} from \"@liveblocks/react/suspense\";\n\nexport function MyEmojiReactions({ comment }: { comment: CommentData }) {\n  const userId = useSelf().id;\n  const addReaction = useAddReaction();\n  const removeReaction = useRemoveReaction();\n\n  return (\n    <>\n      {comment.reactions.map((reaction) => {\n        const hasPicked = reaction.users.some((user) => user.id === userId);\n        const reactionObject = {\n          threadId: comment.threadId,\n          commentId: comment.id,\n          emoji: reaction.emoji,\n        };\n\n        return (\n          <button\n            key={reaction.emoji}\n            onClick={() =>\n              hasPicked\n                ? removeReaction(reactionObject)\n                : addReaction(reactionObject)\n            }\n            data-picked={hasPicked || undefined /* Use for CSS styling */}\n          >\n            {reaction.emoji} {reaction.users.length}\n          </button>\n        );\n      })}\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Obtaining a JWT Token\nDESCRIPTION: Request to the authorization endpoint to obtain a JWT token using your secret key. The token will be valid for one hour.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/rest-api-endpoints-v1.mdx#2025-04-11_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\ncurl https://liveblocks.io/api/authorize \\\n  -H \"Authorization: Bearer YOUR_SECRET_KEY\"\n```\n\n----------------------------------------\n\nTITLE: Using useSyncStatus Hook in React\nDESCRIPTION: Shows how to use the new useSyncStatus hook to display a 'Saving...' spinner in a React application when Liveblocks is synchronizing local changes to the server.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-emails/CHANGELOG.md#2025-04-11_snippet_10\n\nLANGUAGE: jsx\nCODE:\n```\nuseSyncStatus({ smooth: true })\n```\n\n----------------------------------------\n\nTITLE: Implementing Undo/Redo Buttons with Zustand and Liveblocks\nDESCRIPTION: Example showing how to access and implement undo/redo functionality in a React component using Liveblocks room history with Zustand store. This can be used to create undo/redo buttons or bind to keyboard shortcuts.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-multiplayer-undo-redo-with-zustand.mdx#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport useStore from \"../store\";\n\nfunction YourComponent() {\n  const undo = useStore((state) => state.liveblocks.room?.history.undo);\n  const redo = useStore((state) => state.liveblocks.room?.history.redo);\n\n  return (\n    <>\n      <button onClick={undo}>Undo</button>\n      <button onClick={redo}>Redo</button>\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: User Info Configuration for Cursors\nDESCRIPTION: JSON configuration for user information including name and cursor color for real-time editing features.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/text-editor/blocknote.mdx#2025-04-11_snippet_1\n\nLANGUAGE: js\nCODE:\n```\nuserInfo: {\n  name: \"Marie\",\n  color: \"#00ff00\",\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Comments Threads\nDESCRIPTION: Setup for displaying comment threads with both floating and anchored components\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/text-editor/tiptap.mdx#2025-04-11_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nexport function Threads({ editor }) {\n  const { threads } = useThreads();\n\n  return (\n    <>\n      <AnchoredThreads editor={editor} threads={threads} />\n      <FloatingThreads editor={editor} threads={threads} />\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Advanced Client Configuration with Custom Headers\nDESCRIPTION: Extended client configuration showing how to pass custom headers and body data to the authentication endpoint\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/sveltekit.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\n\n// Passing custom headers and body to your endpoint\nconst client = createClient({\n  authEndpoint: async (room) => {\n    const headers = {\n      // Custom headers\n      // ...\n\n      \"Content-Type\": \"application/json\",\n    };\n\n    const body = JSON.stringify({\n      // Custom body\n      // ...\n\n      room,\n    });\n\n    const response = await fetch(\"/api/liveblocks-auth\", {\n      method: \"POST\",\n      headers,\n      body,\n    });\n\n    return await response.json();\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Zustand Store with Typed Presence\nDESCRIPTION: Example demonstrating how to type the presence of other users in a Zustand store using Liveblocks middleware.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-emails/CHANGELOG.md#2025-04-11_snippet_25\n\nLANGUAGE: typescript\nCODE:\n```\ntype Presence = {\n  isTyping: true;\n}\n\nconst useStore = create(\n  middleware<State, Presence>(/* ... */, {\n    client,\n    presenceMapping: { isTyping: true },\n    storageMapping: { todos: true }\n  })\n);\n\n// In your component\nuseStore(state => state.liveblocks.others[0].presence?.isTyping)\n```\n\n----------------------------------------\n\nTITLE: Setting Room Permissions with Liveblocks Node\nDESCRIPTION: Create a new room with specific access permissions using the Liveblocks Node package. This example sets default read-only access and grants write access to specific groups and users.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/nuxtjs.mdx#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nconst room = await liveblocks.createRoom(\"my-room-id\", {\n  defaultAccesses: [\"room:read\", \"room:presence:write\"],\n  groupsAccesses: {\n    \"my-group-id\": [\"room:write\"],\n  },\n  usersAccesses: {\n    \"my-user-id\": [\"room:write\"],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Adding ClientSideSuspense for Loading State in Liveblocks\nDESCRIPTION: Enhanced React component setup that includes ClientSideSuspense to handle loading states when connecting to a Liveblocks room.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-lexical.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n  ClientSideSuspense,\n} from \"@liveblocks/react/suspense\";\nimport { Editor } from \"./Editor\";\n\nexport default function App() {\n  return (\n    <LiveblocksProvider publicApiKey={\"{{PUBLIC_KEY}}\"}>      <RoomProvider id=\"my-room\">\n        <ClientSideSuspense fallback={<div>Loading…</div>}>\n          <Editor />\n        </ClientSideSuspense>\n      </RoomProvider>\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Custom Toolbar with Mixed Components\nDESCRIPTION: Advanced example showing how to create a custom toolbar with a mix of default sections and custom buttons. This demonstrates how to use the Lexical editor context to create interactive toolbar buttons.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\nimport { FORMAT_TEXT_COMMAND } from \"lexical\";\nimport { useLexicalComposerContext } from \"@lexical/react/LexicalComposerContext\";\nimport { isTextFormatActive, Toolbar } from \"@liveblocks/react-lexical\";\nimport { Icon } from \"@liveblocks/react-ui\";\n\nfunction CustomToolbar() {\n  const [editor] = useLexicalComposerContext();\n\n  return (\n    <Toolbar>\n      // +++\n      <Toolbar.SectionHistory />\n      <Toolbar.Separator />\n      <Toolbar.Button\n        name=\"Help\"\n        icon={<Icon.QuestionMark />}\n        shortcut=\"CMD-H\"\n        onClick={() => console.log(\"help\")}\n      />\n      <Toolbar.Toggle\n        name=\"Bold\"\n        icon={<strong>B️</strong>}\n        active={isTextFormatActive(editor, \"bold\")}\n        onClick={() => editor.dispatchCommand(FORMAT_TEXT_COMMAND, \"bold\")}\n      />\n      // +++\n    </Toolbar>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring BlockNote Editor with Options\nDESCRIPTION: Demonstrates how to configure BlockNote editor with both BlockNote and Liveblocks specific options.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-blocknote.mdx#2025-04-11_snippet_12\n\nLANGUAGE: tsx\nCODE:\n```\nconst editor = useCreateBlockNoteWithLiveblocks(\n  {\n    animations: false,\n    trailingBlock: false,\n\n    // Other BlockNote options\n    // ...\n  },\n  {\n    initialContent: \"<p>Hello world</p>\",\n    field: \"editor-one\",\n\n    // Other Liveblocks options\n    // ...\n  }\n);\n```\n\n----------------------------------------\n\nTITLE: Implementing Toolbar Section Collaboration Component in React-Lexical\nDESCRIPTION: Shows how to add a collaboration section containing an add comment button to the Toolbar component.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_14\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Toolbar } from \"@liveblocks/react-lexical\";\n\n<Toolbar>\n  <Toolbar.SectionCollaboration />\n</Toolbar>;\n```\n\n----------------------------------------\n\nTITLE: Modifying Thread Metadata Using Liveblocks Node.js Client\nDESCRIPTION: Shows how to use the @liveblocks/node package to modify thread metadata through the REST API in a Node.js environment.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/metadata.mdx#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\n\n// Create a Node.js client\nconst liveblocks = new Liveblocks({ secret: \"{{SECRET_KEY}}\" });\n\n// Edit a thread's `priority` metadata, passing the user ID that made the change\nawait liveblocks.editThreadMetadata({\n  roomId: \"my-room-id\",\n  threadId: \"th_d75sF3...\",\n\n  data: {\n    metadata: {\n      priority: \"IMPORTANT\",\n    },\n    userId: \"florent@example.com\",\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Rendering Comments from a Thread in React\nDESCRIPTION: This snippet demonstrates how to render a list of comments attached to a specific thread using the Comment component. It imports the necessary components and types, and maps through the comments of a thread to render each one.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/default-components.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Comment } from \"@liveblocks/react-ui\";\nimport { ThreadData } from \"@liveblocks/client\";\n\n// Renders a list of comments attached to the specified `thread`\nfunction MyComment({ thread }: { thread: ThreadData }) {\n  return (\n    <>\n      {thread.comments.map((comment) => (\n        <Comment key={comment.id} comment={comment} />\n      ))}\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Multiple BlockNote Editors Implementation\nDESCRIPTION: Demonstrates how to implement multiple BlockNote editors on a single page using unique field identifiers.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-blocknote.mdx#2025-04-11_snippet_14\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useCreateBlockNoteWithLiveblocks } from \"@liveblocks/react-blocknote\";\nimport { BlockNoteView } from \"@blocknote/mantine\";\n\nfunction TextEditors() {\n  return (\n    <div>\n      <TextEditor field=\"one\" />\n      <TextEditor field=\"two\" />\n    </div>\n  );\n}\n\nfunction TextEditor({ field }: { field: string }) {\n  const editor = useCreateBlockNoteWithLiveblocks(\n    {},\n    {\n      field,\n    }\n  );\n\n  return (\n    <div>\n      <BlockNoteView editor={editor} />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: ThreadCreatedEvent Schema and Example in TypeScript\nDESCRIPTION: This snippet defines the TypeScript schema for the ThreadCreatedEvent and provides an example of the event object. This event is triggered when a new thread is created.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/webhooks.mdx#2025-04-11_snippet_19\n\nLANGUAGE: typescript\nCODE:\n```\n// Schema\ntype ThreadCreatedEvent = {\n  type: \"threadCreated\";\n  data: {\n    projectId: string;\n    roomId: string;\n    threadId: string;\n    createdAt: string;\n    createdBy: string;\n  };\n};\n\n// Example\nconst threadCreatedEvent = {\n  type: \"threadCreated\",\n  data: {\n    projectId: \"my-project-id\",\n    roomId: \"my-room-id\",\n    threadId: \"my-thread-id\",\n    createdAt: \"2021-10-06T01:45:56.558Z\",\n    createdBy: \"my-user-id\",\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Basic Composer Component Usage\nDESCRIPTION: Simple example showing how to render the Composer component for creating new threads.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n<Composer />\n```\n\n----------------------------------------\n\nTITLE: Using the useSyncStatus Hook with Smooth Option in React\nDESCRIPTION: Example of using the useSyncStatus hook with the smooth option to display a saving indicator when Liveblocks is synchronizing changes to the server.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/create-liveblocks-app/CHANGELOG.md#2025-04-11_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nuseSyncStatus({ smooth: true })\n```\n\n----------------------------------------\n\nTITLE: Using Hook for Updating Notification Settings - TypeScript\nDESCRIPTION: This snippet illustrates the use of the useUpdateNotificationSettings hook for specifically updating user notification settings. It allows for seamless changes to notification channels without the overhead of fetching settings again, enhancing responsiveness and user interaction.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-yjs/CHANGELOG.md#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n// A suspense version of this hook is available\\nimport { useUpdateNotificationSettings } from \"@liveblocks/react\";\\n\\nconst updateSettings = useUpdateNotificationSettings();\\n\\nconst onUnsubscribe = () => {\\n  updateSettings({\\n    slack: {\\n      thread: false,\\n    },\\n  });\\n};\n```\n\n----------------------------------------\n\nTITLE: Using useStatus React Hook - TypeScript\nDESCRIPTION: This snippet shows how to implement the useStatus() hook provided by Liveblocks for React applications. It serves as the React hook version of room.getStatus(), providing the same connection status functionality in a React-friendly way.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_28\n\nLANGUAGE: typescript\nCODE:\n```\nconst status = useStatus();\n```\n\n----------------------------------------\n\nTITLE: Deleting Selected Rectangles in Zustand Store - TypeScript\nDESCRIPTION: This snippet introduces a 'deleteShape' function to the Zustand store, allowing users to remove the currently selected rectangle shape and reset the selected shape state. It includes necessary condition checks for safe deletion.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-online-whiteboard-with-react-zustand-and-liveblocks.mdx#2025-04-11_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\n/* ... */\ntype State = {\n  shapes: Record<string, Shape>;\n  selectedShape: string | null;\n  insertRectangle: () => void;\n  onShapePointerDown: (shapeId: string | null) => void;\n  deleteShape: () => void;\n};\n\n/* ... */\n\nconst useStore = create<WithLiveblocks<State>>()(\n  liveblocks(\n    (set, get) => ({\n      shapes: {},\n      selectedShape: null,\n      insertRectangle: () => {\n        /* ... */\n      },\n      onShapePointerDown: (shapeId) => {\n        /* ... */\n      },\n      deleteShape: () => {\n        const { shapes, selectedShape } = get();\n        if (!selectedShape) {\n          /* Nothing todo */\n          return;\n        }\n        const { [selectedShape]: shapeToDelete, ...newShapes } = shapes;\n        set({\n          shapes: newShapes,\n          selectedShape: null,\n        });\n      },\n    }),\n    {\n      client,\n      storageMapping: { shapes: true },\n      presenceMapping: { selectedShape: true },\n    }\n  )\n);\n\nexport default useStore;\n```\n\n----------------------------------------\n\nTITLE: Debugging Complex ThreadMetadata Type Issues in TypeScript\nDESCRIPTION: This code snippet shows a technique for debugging complex ThreadMetadata type issues. It involves assigning the custom type to the required base type, which will reveal specific type incompatibilities.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/errors/ThreadMetadata.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { BaseMetadata } from \"@liveblocks/client\";\n\ndeclare global {\n  interface Liveblocks {\n    ThreadMetadata: MyThreadMetadata;\n  }\n}\n\n// Quick debugging snippet to find root cause\nconst xxx: BaseMetadata = {} as MyThreadMetadata;\n//    ^?\n//    The error will appear here\n```\n\n----------------------------------------\n\nTITLE: Implementing Composer Mention Component in React\nDESCRIPTION: Displays user mentions within Composer.Editor component. Accepts an asChild boolean prop to replace the rendered element.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_14\n\nLANGUAGE: tsx\nCODE:\n```\n<Composer.Mention>@{userId}</Composer.Mention>\n```\n\n----------------------------------------\n\nTITLE: Subscribing to Lost Connection Events - TypeScript\nDESCRIPTION: This code snippet shows how to use the room.subscribe('lost-connection') to listen for events when the client is unable to reconnect automatically within a certain time frame, enabling the display of a notification to the user.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_27\n\nLANGUAGE: typescript\nCODE:\n```\nroom.subscribe('lost-connection');\n```\n\n----------------------------------------\n\nTITLE: Using useUpdateNotificationSettings Hook in React\nDESCRIPTION: Demonstrates the usage of useUpdateNotificationSettings hook for simpler notification settings updates, ideal for features like unsubscribe buttons.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-core/CHANGELOG.md#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useUpdateNotificationSettings } from \"@liveblocks/react\";\n\nconst updateSettings = useUpdateNotificationSettings();\n\nconst onUnsubscribe = () => {\n  updateSettings({\n    slack: {\n      thread: false,\n    },\n  });\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling Unsaved Changes Prevention in JavaScript\nDESCRIPTION: Demonstrates how to enable the preventUnsavedChanges option when creating a Liveblocks client to prevent browser tabs from being closed while local changes are not yet synchronized.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-lexical/CHANGELOG.md#2025-04-11_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\ncreateClient({ preventUnsavedChanges: true })\n```\n\n----------------------------------------\n\nTITLE: Converting ProseMirror Document to JSON\nDESCRIPTION: Uses api.toJSON to return a serialized JSON object representation of the ProseMirror document. This is useful for storing or transmitting the document in a serialized format.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-node-prosemirror.mdx#2025-04-11_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nconst docAsJSON = await withProsemirrorDocument(\n  { roomId: \"my-room-id\", client: liveblocks },\n  async (api) => {\n    // +++\n    return api.toJSON();\n    // +++\n  }\n);\n```\n\n----------------------------------------\n\nTITLE: Resolving User and Room Data in Thread Notifications\nDESCRIPTION: Configures resolver functions to transform user IDs and room IDs into detailed user and room information for email notifications\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-send-email-notifications-of-unread-comments.mdx#2025-04-11_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nemailData = await prepareThreadNotificationEmailAsReact(liveblocks, event, {\n  resolveUsers: async ({ userIds }) => {\n    const usersData = await __getUsersFromDB__(userIds);\n\n    return usersData.map((userData) => ({\n      name: userData.name,\n      avatar: userData.avatar.src,\n    }));\n  },\n  resolveRoomInfo: async ({ roomId }) => {\n    const roomData = await __getRoomFromDB__(roomId);\n\n    return {\n      name: roomData.name,\n      url: roomData.url,\n    };\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Check Editor Readiness with useIsEditorReady Hook\nDESCRIPTION: Utilizes the `useIsEditorReady` hook from Liveblocks to determine when the Lexical editor content has fully loaded. This is useful for managing loading states, like displaying skeleton loaders while content loads.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_36\n\nLANGUAGE: ts\nCODE:\n```\nimport { useIsEditorReady } from \"@liveblocks/react-lexical\";\\n\\nconst status = useIsEditorReady();\n```\n\n----------------------------------------\n\nTITLE: Configuring User Resolution in LiveblocksProvider\nDESCRIPTION: Setup for resolving users and mention suggestions in the Lexical editor using LiveblocksProvider component.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/text-editor/lexical.mdx#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { LiveblocksProvider } from \"@liveblocks/react/suspense\";\n\nfunction App() {\n  return (\n    <LiveblocksProvider\n      resolveUsers={async ({ userIds }) => {\n        // Return user info from their `userIds`\n        // ...\n      }}\n      resolveMentionSuggestions={async ({ text, roomId }) => {\n        // Return suggestions from the search `text`\n        // ...\n      }}\n    >\n      {/* children */}\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Liveblocks Client API Examples\nDESCRIPTION: Example usage of new room history API and handling of connection status codes in Liveblocks client.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG.md#2025-04-11_snippet_19\n\nLANGUAGE: typescript\nCODE:\n```\nroom.history.clear() // Clear history\nothers.length // Get others count (replaces others.count)\nothers // Get others array (replaces others.toArray())\n```\n\n----------------------------------------\n\nTITLE: Creating Custom Thread Composer\nDESCRIPTION: Demonstrates how to create a custom thread composer using the Composer primitive.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/primitives.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Composer } from \"@liveblocks/react-ui/primitives\";\nimport { useCreateThread } from \"../liveblocks.config.ts\";\n\n// Render a custom composer that creates a thread on submit\nfunction MyComposer() {\n  const createThread = useCreateThread();\n\n  return (\n    <Composer.Form\n      onComposerSubmit={({ body }, event) => {\n        event.preventdefault();\n        const thread = createThread({\n          body,\n          metadata: {},\n        });\n      }}\n    >\n      <Composer.Editor components={/* Your custom component parts */} />\n      <Composer.Submit>Create thread</Composer.Submit>\n    </Composer.Form>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Type Migration for Others in @liveblocks/client\nDESCRIPTION: Demonstration of type migration from deprecated Others<P, U> to readonly User<P, U>[]\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-emails/CHANGELOG.md#2025-04-11_snippet_19\n\nLANGUAGE: typescript\nCODE:\n```\n// Old\ntype OthersType = Others<Presence, UserMeta>\n\n// New\ntype OthersType = readonly User<Presence, UserMeta>[]\n```\n\n----------------------------------------\n\nTITLE: Implementing User Resolution Logic in LiveblocksProvider\nDESCRIPTION: This code demonstrates how to return user information from the resolveUsers function. It shows returning a list of users with name, avatar, and optional custom metadata in the required format.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-add-users-to-liveblocks-notifications.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n<LiveblocksProvider\n  resolveUsers={async ({ userIds }) => {\n    // [\"marc@example.com\", ...]\n    console.log(userIds);\n\n    // Return a list of users\n    return [\n      {\n        name: \"Marc\",\n        avatar: \"https://example.com/marc.png\",\n\n        // Your custom metadata\n        // ...\n      },\n      // ...\n    ];\n  }}\n\n  // ...\n/>;\n```\n\n----------------------------------------\n\nTITLE: Using InboxNotificationList to Render Notifications as an Ordered List in React\nDESCRIPTION: This example demonstrates how to use the InboxNotificationList component to wrap InboxNotification components and render them as an ordered HTML list in a React application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/notifications/default-components.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { InboxNotification, InboxNotificationList } from \"@liveblocks/react-ui\";\nimport { useInboxNotifications } from \"../liveblocks.config\";\n\nfunction Component() {\n  const { inboxNotifications } = useInboxNotifications();\n\n  return (\n    <InboxNotificationList>\n      {inboxNotifications.map((inboxNotification) => (\n        <InboxNotification\n          key={inboxNotification.id}\n          inboxNotification={inboxNotification}\n        />\n      ))}\n    </InboxNotificationList>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Recommended Usage of FloatingThreads and AnchoredThreads\nDESCRIPTION: Demonstrates the recommended approach for using both FloatingThreads and AnchoredThreads components together, with responsive design considerations.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-blocknote.mdx#2025-04-11_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useThreads } from \"@liveblocks/react/suspense\";\nimport { AnchoredThreads, FloatingThreads } from \"@liveblocks/react-blocknote\";\nimport { BlockNoteEditor } from \"@blocknote/core\";\n\nfunction ThreadOverlay({ editor }: { editor: BlockNoteEditor | null }) {\n  const { threads } = useThreads({ query: { resolved: false } });\n\n  return (\n    <>\n      <FloatingThreads\n        editor={editor}\n        threads={threads}\n        className=\"w-[350px] block md:hidden\"\n      />\n      <AnchoredThreads\n        editor={editor}\n        threads={threads}\n        className=\"w-[350px] hidden sm:block\"\n      />\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Handling Liveblocks Notification Webhook Event in TypeScript\nDESCRIPTION: Example of the webhook event object structure received when a user gets a new or updated inbox notification. Contains essential fields like notification channel, thread info, and user details.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/email-notifications.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst event = {\n  type: \"notification\",\n  data: {\n    channel: \"email\",\n    kind: \"thread\",\n    projectId: \"my-project-id\",\n    roomId: \"my-room-id\",\n    threadId: \"th_d75sF3...\",\n    inboxNotificationId: \"in_xt3p7ak...\",\n    userId: \"my-user-id\",\n    createdAt: \"2021-10-06T01:45:56.558Z\",\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Rendering Basic Comment Component in React\nDESCRIPTION: Simple example showing how to render a single Comment component with a comment prop.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\n<Comment comment={comment} />\n```\n\n----------------------------------------\n\nTITLE: Example ThreadMetadataUpdatedEvent payload in TypeScript\nDESCRIPTION: Provides an example payload for the ThreadMetadataUpdatedEvent, illustrating the structure and values of the event data. The example includes sample values for projectId, roomId, threadId, updatedAt, and updatedBy. This example helps to understand the expected format of the event.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/webhooks.mdx#2025-04-11_snippet_23\n\nLANGUAGE: typescript\nCODE:\n```\nconst threadMetadataUpdatedEvent = {\n  type: \"threadMetadataUpdated\",\n  data: {\n    projectId: \"my-project-id\",\n    roomId: \"my-room-id\",\n    threadId: \"my-thread-id\",\n    updatedAt: \"2021-10-06T01:45:56.558Z\",\n    updatedBy: \"my-user-id\",\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Styling Liveblocks Primitives with CSS Modules\nDESCRIPTION: This example demonstrates how to style Liveblocks primitives using CSS modules, showcasing compatibility with modular CSS approaches.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/styling-and-customization.mdx#2025-04-11_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Composer } from \"@liveblocks/react-ui\";\nimport styles from \"./Component.module.css\";\n\nfunction Component() {\n  return <Composer.Submit className={styles.submit}>Reply</Composer.Submit>;\n}\n```\n\n----------------------------------------\n\nTITLE: Defining ThreadNotificationEvent schema in TypeScript\nDESCRIPTION: Defines the schema for the ThreadNotificationEvent, triggered 30 minutes after a user is mentioned or replied to in a thread, or if they've subscribed to the thread and haven't seen it. Includes information about the channel, notification kind, project, room, user, thread, notification ID, and creation timestamp.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/webhooks.mdx#2025-04-11_snippet_28\n\nLANGUAGE: typescript\nCODE:\n```\ntype ThreadNotificationEvent = {\n  type: \"notification\";\n  data: {\n    channel: \"email\";\n    kind: \"thread\";\n    projectId: string;\n    roomId: string;\n    userId: string;\n    threadId: string;\n    inboxNotificationId: string;\n    createdAt: string;\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Default Room Permissions in TypeScript\nDESCRIPTION: Shows how to create a new room with private access permissions and update existing room permissions using the Liveblocks API.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst room = await liveblocks.createRoom(\"Vu78Rt:design:9Hdu73\", {\n  defaultAccesses: [],\n});\n```\n\nLANGUAGE: typescript\nCODE:\n```\nconst room = await liveblocks.updateRoom(\"Vu78Rt:design:9Hdu73\", {\n  defaultAccesses: [\"room:read\", \"room:presence:write\"],\n});\n```\n\n----------------------------------------\n\nTITLE: New Room Management APIs in TypeScript\nDESCRIPTION: Demonstrates the new recommended API for room management that returns both the room instance and a leave function. This approach supports entering/leaving the same room multiple times.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-yjs/CHANGELOG.md#2025-04-11_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\n// New API we'll be recommending instead\nconst { room, leave } = client.enterRoom(\"my-room\", options);\nleave();\n```\n\n----------------------------------------\n\nTITLE: Setting up Liveblocks authentication endpoint in Next.js Pages Router\nDESCRIPTION: Alternative implementation of the Liveblocks authentication endpoint using the older Pages Router in Next.js. Creates a user session and authorizes access to a specific room.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-codemirror-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\nimport type { NextApiRequest, NextApiResponse } from \"next\";\n\nconst API_KEY = \"{{SECRET_KEY}}\";\n\nconst liveblocks = new Liveblocks({\n  secret: API_KEY!,\n});\n\nexport default async function handler(\n  request: NextApiRequest,\n  response: NextApiResponse\n) {\n  // Get the current user's info from your database\n  const user = {\n    id: \"charlielayne@example.com\",\n    info: {\n      name: \"Charlie Layne\",\n      color: \"#D583F0\",\n      picture: \"https://liveblocks.io/avatars/avatar-1.png\",\n    },\n  };\n\n  // Create a session for the current user\n  // userInfo is made available in Liveblocks presence hooks, e.g. useOthers\n  const session = liveblocks.prepareSession(user.id, {\n    userInfo: user.info,\n  });\n\n  // Give the user access to the room\n  const { room } = request.body;\n  session.allow(room, session.FULL_ACCESS);\n\n  // Authorize the user and return the result\n  const { status, body } = await session.authorize();\n  response.status(status).send(body);\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Tiptap Editor with Yjs\nDESCRIPTION: Demonstrates how to initialize a Tiptap editor document with Yjs integration. Uses XmlElement and XmlFragment for Tiptap's specific document structure.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/modifying-yjs-document-data-with-the-rest-api.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport * as Y from \"yjs\";\nimport { Liveblocks } from \"@liveblocks/node\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\nconst roomId = \"my-room-name\";\n\nexport async function POST() {\n  // Create a Yjs document\n  const yDoc = new Y.Doc();\n\n  // The Tiptap Yjs state we're creating\n  const yXmlElement = new Y.XmlElement(\"paragraph\");\n  yXmlElement.insert(0, [new Y.XmlText(\"Hello world\")]);\n\n  // Create your data structures and make your update\n  const yXmlFragment = yDoc.getXmlFragment(\"default\");\n  yXmlFragment.insert(0, [yXmlElement]);\n\n  // Encode the document state as an update message\n  const yUpdate = Y.encodeStateAsUpdate(yDoc);\n\n  // Create the new room\n  const room = await liveblocks.createRoom(roomId, {\n    defaultAccesses: [\"room:write\"],\n  });\n\n  // Initialize the Yjs document with the update\n  await liveblocks.sendYjsBinaryUpdate(roomId, yUpdate);\n}\n```\n\n----------------------------------------\n\nTITLE: Customizing FloatingToolbar Position in React-Tiptap\nDESCRIPTION: Demonstrates how to customize the position of the FloatingToolbar relative to the current selection using the 'position' and 'offset' props.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_21\n\nLANGUAGE: tsx\nCODE:\n```\n<FloatingToolbar\n  editor={editor}\n  // +++\n  position=\"bottom\" // Position can be `top` or `bottom`\n  offset={12} // Distance in px from selection\n  // +++\n/>\n```\n\n----------------------------------------\n\nTITLE: Styling Live Avatars for Collaborative Editor\nDESCRIPTION: This CSS module provides styles for the Avatars component, including layout, hover effects, and tooltips to display user names.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-lexical-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_14\n\nLANGUAGE: css\nCODE:\n```\n.avatars {\n  display: flex;\n  padding: 0 0.75rem;\n}\n\n.avatar {\n  display: flex;\n  place-content: center;\n  position: relative;\n  border: 4px solid #fff;\n  border-radius: 9999px;\n  width: 42px;\n  height: 42px;\n  background-color: #9ca3af;\n  margin-left: -0.75rem;\n}\n\n.avatar:before {\n  content: attr(data-tooltip);\n  position: absolute;\n  top: 100%;\n  opacity: 0;\n  transition: opacity 0.15s ease;\n  padding: 5px 10px;\n  color: white;\n  font-size: 0.75rem;\n  border-radius: 8px;\n  margin-top: 10px;\n  z-index: 1;\n  background: black;\n  white-space: nowrap;\n}\n\n.avatar:hover:before {\n  opacity: 1;\n}\n\n.avatar_picture {\n  width: 100%;\n  height: 100%;\n  border-radius: 9999px;\n}\n```\n\n----------------------------------------\n\nTITLE: Authorize API Request Body Example\nDESCRIPTION: Example of the request body structure when calling the authorize endpoint directly with API.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/1.0.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n{\n  \"userId\": \"user123\",\n  \"groupIds\": [\n    \"g1\",\n    \"g2\"\n  ],\n  \"userInfo\": {\n    \"name\": \"bob\",\n    \"colors\": [\n      \"blue\",\n      \"red\"\n    ]\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Resolving User and Room Data\nDESCRIPTION: Shows how to implement resolver functions to transform user IDs and room IDs into meaningful display data for email notifications.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-send-email-notifications-for-unread-text-editor-mentions.mdx#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nemailData = await prepareTextMentionNotificationEmailAsReact(\n  liveblocks,\n  event,\n  {\n    resolveUsers: async ({ userIds }) => {\n      const usersData = await __getUsersFromDB__(userIds);\n\n      return usersData.map((userData) => ({\n        name: userData.name,\n        avatar: userData.avatar.src,\n      }));\n    },\n    resolveRoomInfo: async ({ roomId }) => {\n      const roomData = await __getRoomFromDB__(roomId);\n\n      return {\n        name: roomData.name,\n        url: roomData.url,\n      };\n    },\n  }\n);\n```\n\n----------------------------------------\n\nTITLE: Using Pagination with useInboxNotifications in React\nDESCRIPTION: Illustrates how to use the new pagination support with the useInboxNotifications hook in React, allowing for more efficient loading of inbox notifications.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-emails/CHANGELOG.md#2025-04-11_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nconst {\n  inboxNotifications,\n  isLoading,\n  error,\n  fetchMore,\n  isFetchingMore,\n  hasFetchedAll,\n  fetchMoreError,\n} = useInboxNotifications();\n```\n\n----------------------------------------\n\nTITLE: Using Editor Status Hook in React-Lexical\nDESCRIPTION: Demonstrates how to use the useEditorStatus hook to track the current editor synchronization state. Returns one of three possible states: not-loaded, loading, or synchronized.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_38\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useEditorStatus } from \"@liveblocks/react-lexical\";\n\nconst status = useEditorStatus();\n```\n\n----------------------------------------\n\nTITLE: Implementing Webhook Request Verification\nDESCRIPTION: Implementation of webhook request verification using @liveblocks/node package. Includes error handling and webhook secret configuration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-storage-document-data-to-a-supabase-postgres-database.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\n\n// Add your signing key from a project's webhooks dashboard\nconst WEBHOOK_SECRET = \"YOUR_SIGNING_SECRET\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Verify if this is a real webhook request\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  // Update database\n  // ...\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Zustand Store with Liveblocks Middleware\nDESCRIPTION: Demonstrates how to integrate Liveblocks middleware with a Zustand store, including presence and storage mapping configuration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG.md#2025-04-11_snippet_25\n\nLANGUAGE: typescript\nCODE:\n```\nimport create from \"zustand\";\nimport { createClient } from \"@liveblocks/client\";\nimport { middleware } from \"@liveblocks/zustand\";\n\nconst client = createClient({ /*...*/ });\n\ntype State = {\n  draft: string;\n  isTyping: boolean;\n  todos: Todo[];\n  setDraft: (draft: string) => void;\n  addTodo: () => void;\n  deleteTodo: (index: number) => void;\n};\n\ncreate(\n  middleware<State>(/* ... */, {\n    client,\n    presenceMapping: { isTyping: true },\n    storageMapping: { todos: true }\n  })\n);\n```\n\n----------------------------------------\n\nTITLE: Comparing Old and New Liveblocks Room APIs in TypeScript\nDESCRIPTION: Shows the transition from the deprecated room handling APIs to the new recommended approach. The new API allows entering/leaving the same room multiple times, supporting connections from different parts of an application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-lexical/CHANGELOG.md#2025-04-11_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\n// Old APIs we'll no longer be recommending (but that will remain working)\nconst room = client.enter(\"my-room\", options);\nclient.getRoom(\"my-room\");\nclient.leave(\"my-room\");\n```\n\nLANGUAGE: typescript\nCODE:\n```\n// New API we'll be recommending instead\nconst { room, leave } = client.enterRoom(\"my-room\", options);\nleave();\n```\n\n----------------------------------------\n\nTITLE: Zustand Store with Typed Presence\nDESCRIPTION: Shows how to add typing for others' presence using the TPresence generic argument in the Liveblocks middleware.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG.md#2025-04-11_snippet_26\n\nLANGUAGE: typescript\nCODE:\n```\ntype Presence = {\n  isTyping: true;\n}\n\nconst useStore = create(\n  middleware<State, Presence>(/* ... */, {\n    client,\n    presenceMapping: { isTyping: true },\n    storageMapping: { todos: true }\n  })\n);\n\n// In your component\nuseStore(state => state.liveblocks.others[0].presence?.isTyping)\n```\n\n----------------------------------------\n\nTITLE: Updated Authentication Callback in createClient\nDESCRIPTION: Example showing the modified createClient authentication callback where room parameter is now optional for supporting cross-room notifications.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/1.10.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst client = createClient({\n  authEndpoint: (room) => {\n    // The `room` argument will be `undefined` if you're using `useInboxNotifications`\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using useIsInsideRoom hook in React\nDESCRIPTION: Example of using the new useIsInsideRoom hook to render different components inside and outside of RoomProvider.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-core/CHANGELOG.md#2025-04-11_snippet_14\n\nLANGUAGE: javascript\nCODE:\n```\nuseIsInsideRoom()\n```\n\n----------------------------------------\n\nTITLE: Storage Status Subscription Handler in TypeScript\nDESCRIPTION: Example showing how to subscribe to storage status changes in a Liveblocks room. Handles different status states: not-loaded, loading, synchronizing, and synchronized.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react/CHANGELOG.md#2025-04-11_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\nroom.subscribe(\"storage-status\", (status) => {\n  switch (status) {\n    case \"not-loaded\":\n      break;\n    case \"loading\":\n      break;\n    case \"synchronizing\":\n      break;\n    case \"synchronized\":\n      break;\n    default:\n      break;\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Checking Read-Only Status in TypeScript\nDESCRIPTION: Demonstrates how to check the read-only status of users in a Liveblocks room using TypeScript. This snippet shows accessing the isReadOnly property for both the current user and other users in the room.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_32\n\nLANGUAGE: typescript\nCODE:\n```\nconst me = room.getSelf();\n\nme.isReadOnly; // boolean\n\nconst others = room.getOthers();\nfor (const other of others) {\n  other.isReadOnly; // boolean\n}\n```\n\n----------------------------------------\n\nTITLE: Using Advanced Authentication with Custom Headers\nDESCRIPTION: Use the authEndpoint as a callback to pass custom headers or data to your authentication endpoint, providing more flexibility in your authentication flow.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/sveltekit.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\n\n// Passing custom headers and body to your endpoint\nconst client = createClient({\n  authEndpoint: async (room) => {\n    const headers = {\n      // Custom headers\n      // ...\n\n      \"Content-Type\": \"application/json\",\n    };\n\n    const body = JSON.stringify({\n      // Custom body\n      // ...\n\n      room,\n    });\n\n    const response = await fetch(\"/api/liveblocks-auth\", {\n      method: \"POST\",\n      headers,\n      body,\n    });\n\n    return await response.json();\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Suspense-enabled Hooks in Liveblocks\nDESCRIPTION: This snippet demonstrates how to configure Suspense-enabled versions of Liveblocks hooks in the liveblocks.config.ts file.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/0.18.mdx#2025-04-11_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nexport const {\n  suspense: {\n    RoomProvider,\n    useStorage,\n    /* etc. */\n  },\n} = createRoomContext(client);\n```\n\n----------------------------------------\n\nTITLE: Attaching Schema to Room\nDESCRIPTION: API request to attach a specific schema version to a Liveblocks room.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/schema-validation.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nfetch(\"https://api.liveblocks.io/v2/rooms/{roomId}/schema\", {\n  method: \"POST\",\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n  body: JSON.stringify({\n    schema: \"todo-list@1\",\n  }),\n});\n```\n\n----------------------------------------\n\nTITLE: Synchronizing Yjs Document Data with PlanetScale MySQL Database\nDESCRIPTION: TypeScript implementation to insert or update Yjs document data in PlanetScale database using mysql2 library\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-yjs-document-data-to-a-planetscale-mysql-database.mdx#2025-04-11_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\nimport mysql from \"mysql2\";\n\n// Your PlanetScale database URL\nconst DATABASE_URL = \"YOUR_DATABASE_URL\";\n\n// ... (previous webhook verification code)\n\n// Update database\nconst connection = await mysql.createConnection(DATABASE_URL);\n\nconst sql = `\n  INSERT INTO documents (roomId, yDocData)\n  VALUES (?, ?)\n  ON DUPLICATE KEY UPDATE\n      yDocData = VALUES(yDocData);\n`;\n\ntry {\n  await connection.query(sql, [roomId, yDocData]);\n} catch (err) {\n  return new Response(\"Problem inserting data into database\", {\n    status: 500,\n  });\n}\n\nawait connection.end();\n```\n\n----------------------------------------\n\nTITLE: Using useUpdateNotificationSettings Hook in React\nDESCRIPTION: Example demonstrating the useUpdateNotificationSettings hook for updating user notification settings in React, useful for scenarios like an unsubscribe button where only updates are needed.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\n// A suspense version of this hook is available\nimport { useUpdateNotificationSettings } from \"@liveblocks/react\";\n\nconst updateSettings = useUpdateNotificationSettings();\n\nconst onUnsubscribe = () => {\n  updateSettings({\n    slack: {\n      thread: false,\n    },\n  });\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Z-index for Liveblocks Portaled Elements\nDESCRIPTION: Demonstrates how to control the z-index of floating elements like tooltips and dropdowns that are portaled to the end of the document. Shows targeting all portals or specific floating elements.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_46\n\nLANGUAGE: css\nCODE:\n```\n/* Target all floating elements */\n.lb-portal {\n  z-index: 5;\n}\n\n/* Target a specific floating element */\n.lb-tooltip {\n  z-index: 10;\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring User Metadata in ID Tokens for Liveblocks Text Editor in TypeScript\nDESCRIPTION: This code shows how to identify a user with the ID token authentication method, adding necessary metadata including name, color, and avatar URL for the Text Editor component.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-add-users-to-liveblocks-text-editor.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst { status, body } = await liveblocks.identifyUser(\n  {\n    userId: \"marc@example.com\",\n    groupIds: [], // Optional\n  },\n  {\n    userInfo: {\n      name: \"Marc\",\n      color: \"#00ff00\",\n      avatar: \"https://example.com/marc.png\",\n\n      // Your custom metadata\n      // ...\n    },\n  }\n);\n```\n\n----------------------------------------\n\nTITLE: Enabling Attachments in Liveblocks 2.8 with useCreateThread\nDESCRIPTION: Example of how to enable attachments when using useCreateThread hook in Liveblocks 2.8, showing the before and after code.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.8.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst createThread = useCreateThread();\n\n// ❌ Before - Liveblocks 2.7\ncreateThread({ body: {}, metadata: {} });\n\n// ✅ After - Liveblocks 2.8\ncreateThread({ body: {}, attachments: [], metadata: {} });\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Comments Example with Next.js\nDESCRIPTION: This command downloads the Liveblocks comments example for Next.js and prompts for an API key. It sets up the project locally with all necessary dependencies and configuration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-comments/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-comments --api-key\n```\n\n----------------------------------------\n\nTITLE: Editing Thread Metadata Using useEditThreadMetadata Hook in React\nDESCRIPTION: Demonstrates how to use the useEditThreadMetadata hook to create a button that sets the 'pinned' metadata property to true.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/metadata.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useEditThreadMetadata } from \"../liveblocks.config\";\n\n// Button that sets `pinned` metadata to `true`\nfunction Component() {\n  const editThreadMetadata = useEditThreadMetadata();\n\n  return (\n    <button\n      onClick={() =>\n        editThreadMetadata({\n          threadId: \"th_d75sF3...\",\n          metadata: { pinned: true },\n        })\n      }\n    >\n      Pin thread\n    </button>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Liveblocks Next.js Project with DevTools Support\nDESCRIPTION: This command initializes a new Liveblocks project using the Starter Kit, which is compatible with DevTools for inspection and debugging.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/tools/devtools.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --next\n```\n\n----------------------------------------\n\nTITLE: Rendering a Cursor Component with Coordinates in React\nDESCRIPTION: This snippet demonstrates how to render a Cursor component with specific x and y coordinates.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/live-cursors/guide.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n<Cursor x={141} y={252} />\n```\n\n----------------------------------------\n\nTITLE: Component Composition with Radix Slot\nDESCRIPTION: Example demonstrating component composition using the asChild prop pattern from Radix for customizing default elements.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_11\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Button } from \"@/my-design-system\";\n\n// Use the default <button> element\n<Composer.Submit disabled>Send</Composer.Submit>;\n\n// Use an existing custom <Button> component\n<Composer.Submit disabled asChild>\n  <Button variant=\"primary\">Send</Button>\n</Composer.Submit>;\n```\n\n----------------------------------------\n\nTITLE: Named Object Types Example\nDESCRIPTION: Example of defining and using named object types in a schema.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/schema-validation/syntax.mdx#2025-04-11_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\ntype Scientist {\n  name: string\n  age: number\n}\n\ntype Storage {\n  scientist: Scientist\n}\n```\n\n----------------------------------------\n\nTITLE: LiveObject Root Structure Example\nDESCRIPTION: Shows the underlying LiveObject data structure that Liveblocks creates based on the storage mapping configuration. Demonstrates how properties are stored in the room's storage root.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-storage-with-zustand.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst root = new LiveObject({\n  firstName: \"Marie\",\n  lastName: \"Curie\",\n  discoveries: new LiveList([\"Polonium\", \"Radium\"]),\n});\n```\n\n----------------------------------------\n\nTITLE: Basic useComposer Hook Usage\nDESCRIPTION: Example showing basic usage of the useComposer hook for accessing composer state and methods.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_26\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useComposer } from \"@liveblocks/react-ui/primitives\";\n\nconst { isEmpty, attachments, submit /* ... */ } = useComposer();\n```\n\n----------------------------------------\n\nTITLE: Customizing React Components for Thread Notification Emails in TypeScript/React\nDESCRIPTION: Shows how to customize React components used in email notifications. Includes examples of customizing Paragraph, Text, Mention, and Link components with specific styling and behavior modifications.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-emails.mdx#2025-04-11_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nconst emailData = await prepareThreadNotificationEmailAsReact(\n  liveblocks,\n  webhookEvent,\n  {\n    // +++\n    components: {\n      Paragraph: ({ children }) => <p>{children}</p>,\n\n      // `react-email` components are supported\n      Text: ({ children }) => (\n        <Text className=\"text-sm text-black m-0 mb-4\">{children}</Text>\n      ),\n\n      // `user` is the optional data returned from `resolveUsers`\n      Mention: ({ element, user }) => (\n        <span style={{ color: \"red\" }}>@{user?.name ?? element.id}</span>\n      ),\n\n      // If the link is rich-text render it, otherwise use the URL\n      Link: ({ element, href }) => <a href={href}>{element?.text ?? href}</a>,\n    },\n    // +++\n  }\n);\n\n// { type: \"unreadMention\", comment: { ... }, ... }\nconsole.log(emailData);\n\n// The components are now used in this React body\nconsole.log(emailData.comment.reactBody);\n```\n\n----------------------------------------\n\nTITLE: Defining ThreadMetadataUpdatedEvent schema in TypeScript\nDESCRIPTION: Defines the schema for the ThreadMetadataUpdatedEvent, triggered when a thread metadata is updated in Liveblocks. The event includes information about the project, room, thread, update timestamp, and the user who updated the metadata. This event is not throttled.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/webhooks.mdx#2025-04-11_snippet_22\n\nLANGUAGE: typescript\nCODE:\n```\ntype ThreadMetadataUpdatedEvent = {\n  type: \"threadMetadataUpdated\";\n  data: {\n    projectId: string;\n    roomId: string;\n    threadId: string;\n    updatedAt: string;\n    updatedBy: string;\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Using userId and userInfo in a React Component\nDESCRIPTION: Demonstrates how to access the user ID and information in a React application using the useSelf hook.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/remix.mdx#2025-04-11_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nconst self = useSelf();\nconsole.log(self.id);\nconsole.log(self.info);\n```\n\n----------------------------------------\n\nTITLE: Accessing User Data in Liveblocks\nDESCRIPTION: Shows how to access user information in a Liveblocks application. This code retrieves the current user from a room and logs their ID and associated info.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/firebase.mdx#2025-04-11_snippet_4\n\nLANGUAGE: ts\nCODE:\n```\nconst self = room.getSelf(); // or useSelf() in React\nconsole.log(self.id);\nconsole.log(self.info);\n```\n\n----------------------------------------\n\nTITLE: Displaying Typed Custom Notifications\nDESCRIPTION: Illustrates the rendering of a custom notification with typed data in a React component. Uses `InboxNotificationCustomKindProps` to define types for the notification data fetched in functions.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_33\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  InboxNotification,\n  InboxNotificationCustomKindProps,\n} from \"@liveblocks/react-ui\";\n\nfunction AlertNotification(props: InboxNotificationCustomKindProps<\"$alert\">) {\n  // `title` and `message` are correctly typed, as defined in your config\n  const { title, message } = props.inboxNotification.activities[0].data;\n\n  return (\n    <InboxNotification.Custom\n      {...props}\n      title={title}\n      aside={<InboxNotification.Icon>❗</InboxNotification.Icon>}\n    >\n      {message}\n    </InboxNotification.Custom>\n  );\n}\n\nfunction Notification({ inboxNotification }) {\n  return (\n    <InboxNotification\n      inboxNotification={inboxNotification}\n      kinds={{ $alert: AlertNotification }}\n    />\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Defining ThreadMarkedAsResolvedEvent schema in TypeScript\nDESCRIPTION: Defines the schema for the ThreadMarkedAsResolvedEvent, triggered when a thread is marked as resolved in Liveblocks. The event includes information about the project, room, thread, update timestamp, and the user who resolved the thread. This event is not throttled.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/webhooks.mdx#2025-04-11_snippet_24\n\nLANGUAGE: typescript\nCODE:\n```\ntype ThreadMarkedAsResolvedEvent = {\n  type: \"threadMarkedAsResolved\";\n  data: {\n    projectId: string;\n    roomId: string;\n    threadId: string;\n    updatedAt: string;\n    updatedBy: string;\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Using useThreads Hook\nDESCRIPTION: Demonstrates how to use the useThreads hook to display multiple threads.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/primitives.mdx#2025-04-11_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useThreads } from \"../liveblocks.config\";\n\nfunction MyThreads() {\n  const { threads } = useThreads();\n\n  return (\n    <>\n      {threads.map((thread) => (\n        <MyComments key={thread.id} comments={thread.comments} />\n      ))}\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Styling Default Toolbar.BlockSelector Items in React-Tiptap\nDESCRIPTION: Shows how to customize the styles of the default items in the Toolbar.BlockSelector dropdown to visually represent their effects on the document.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_14\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Toolbar } from \"@liveblocks/react-tiptap\";\n\n<Toolbar.BlockSelector\n  items={(defaultItems) =>\n    defaultItems.map((item) => {\n      let label;\n\n      if (item.name === \"Text\") {\n        label = <span>Regular text</span>;\n      }\n\n      if (item.name === \"Heading 1\") {\n        label = (\n          <span style={{ fontSize: 18, fontWeight: \"bold\" }}>Heading 1</span>\n        );\n      }\n\n      if (item.name === \"Heading 2\") {\n        label = (\n          <span style={{ fontSize: 16, fontWeight: \"bold\" }}>Heading 2</span>\n        );\n      }\n\n      if (item.name === \"Heading 3\") {\n        label = (\n          <span style={{ fontSize: 15, fontWeight: \"bold\" }}>Heading 3</span>\n        );\n      }\n\n      if (item.name === \"Blockquote\") {\n        label = (\n          <span style={{ borderLeft: \"3px solid gray\", paddingLeft: 8 }}>\n            Blockquote\n          </span>\n        );\n      }\n\n      return {\n        ...item,\n        label,\n        icon: null, // Hide all icons\n      };\n    })\n  }\n/>;\n```\n\n----------------------------------------\n\nTITLE: Styling the Toolbar with CSS\nDESCRIPTION: This CSS snippet contains styles for the toolbar component of the Tiptap editor. It defines layout and appearance for the toolbar and buttons, enhancing the UI/UX of the text editor.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-tiptap-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_11\n\nLANGUAGE: css\nCODE:\n```\n.toolbar {\n  display: flex;\n  padding: 1em;\n  gap: 6px;\n}\n\n.button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  border-radius: 6px;\n  height: 32px;\n  width: 32px;\n  background: #fff;\n  color: #1f2937;\n  border: none;\n  box-shadow:\n    rgba(0, 0, 0, 0.12) 0 4px 8px 0,\n    rgba(0, 0, 0, 0.02) 0 0 0 1px;\n}\n\n.button:hover {\n  color: #111827;\n  box-shadow:\n    rgba(0, 0, 0, 0.16) 0 5px 8px 0,\n    rgba(0, 0, 0, 0.04) 0 0 0 1px;\n}\n\n.button:focus-visible {\n  outline-offset: 2px;\n}\n\n.button:active {\n  box-shadow:\n    rgba(0, 0, 0, 0.16) 0 2px 3px 0,\n    rgba(0, 0, 0, 0.04) 0 0 0 1px;\n}\n\n.button[data-active] {\n  background: #fafafa;\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Basic Zustand Store Without Liveblocks Middleware in TypeScript\nDESCRIPTION: Example showing a basic Zustand store implementation without Liveblocks middleware. This is a typical setup for a to-do list application with state management for drafts, typing status, and todo operations.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-lexical/CHANGELOG.md#2025-04-11_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\nimport create from \"zustand\";\n\ntype State = {\n  draft: string;\n  isTyping: boolean;\n  todos: Todo[];\n  setDraft: (draft: string) => void;\n  addTodo: () => void;\n  deleteTodo: (index: number) => void;\n};\n\ncreate<State>(/* ... */);\n```\n\n----------------------------------------\n\nTITLE: Using Notification Settings Hook in React\nDESCRIPTION: Demonstrates usage of the useNotificationSettings hook in React components for managing notification preferences. Shows how to retrieve and update settings with loading and error states.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-emails/CHANGELOG.md#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useNotificationSettings } from \"@liveblocks/react\";\n\nconst [{ isLoading, error, settings }, updateSettings] = useNotificationSettings();\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst onSave = () => {\n  updateSettings({\n    slack: {\n      textMention: true,\n    },\n  });\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling Unsaved Changes Prevention in React\nDESCRIPTION: Shows how to enable the preventUnsavedChanges option in the LiveblocksProvider component to prevent browser tabs from being closed while local changes are not yet synchronized.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-lexical/CHANGELOG.md#2025-04-11_snippet_4\n\nLANGUAGE: jsx\nCODE:\n```\n<LiveblocksProvider preventUnsavedChanges />\n```\n\n----------------------------------------\n\nTITLE: Subscribing to Storage Status Changes in Liveblocks in TypeScript\nDESCRIPTION: This code shows how to subscribe to storage status changes in a Liveblocks room. The callback receives the current status which can be one of: not-loaded, loading, synchronizing, or synchronized. The function returns an unsubscribe function to clean up the listener.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-zustand/CHANGELOG.md#2025-04-11_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\nroom.subscribe(\"storage-status\", (status) => {\n  switch (status) {\n    case \"not-loaded\":\n      break;\n    case \"loading\":\n      break;\n    case \"synchronizing\":\n      break;\n    case \"synchronized\":\n      break;\n    default:\n      break;\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Using FloatingToolbar in React-Tiptap\nDESCRIPTION: Demonstrates how to use the FloatingToolbar component to display a floating toolbar near the current Tiptap selection for changing styles.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_19\n\nLANGUAGE: tsx\nCODE:\n```\n<FloatingToolbar editor={editor} />\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks and Lexical Packages\nDESCRIPTION: Command to install all required Liveblocks and Lexical packages for the collaborative text editor.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-lexical.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/react @liveblocks/react-ui @liveblocks/react-lexical lexical @lexical/react\n```\n\n----------------------------------------\n\nTITLE: Environment Variable Configuration for Testing\nDESCRIPTION: Example of setting up a static user ID for testing environments to avoid hitting MAU limits\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/plans.mdx#2025-04-11_snippet_0\n\nLANGUAGE: dotenv\nCODE:\n```\nTEST_USERID=\"machine\"\n```\n\n----------------------------------------\n\nTITLE: Updated Comments Resolver Implementation\nDESCRIPTION: New implementation of resolver functions moved to createClient in version 1.10.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/1.10.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nconst client = createClient({\n  authEndpoint: \"/api/auth/liveblocks-auth\",\n  async resolveUsers({ userIds }) {\n    // ...\n  },\n  async resolveMentionSuggestions({ text }) {\n    // ...\n  },\n});\n\nconst { RoomProvider } = createRoomContext();\n```\n\n----------------------------------------\n\nTITLE: Configuring preventUnsavedChanges in React LiveblocksProvider\nDESCRIPTION: Shows how to enable the preventUnsavedChanges option in the LiveblocksProvider component to prevent browser tabs from closing with unsaved changes.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG.md#2025-04-11_snippet_6\n\nLANGUAGE: jsx\nCODE:\n```\n<LiveblocksProvider preventUnsavedChanges />\n```\n\n----------------------------------------\n\nTITLE: Using LiveblocksProvider Instead of createClient\nDESCRIPTION: Shows the transition from using createClient to the new LiveblocksProvider component in v2.0, which simplifies client configuration and provides context.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/create-liveblocks-app/CHANGELOG.md#2025-04-11_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\n// ❌ Before\nconst client = createClient(/* options */);\n\n// ✅ After\n<LiveblocksProvider /* options */>\n  <App />\n</LiveblocksProvider>\n```\n\n----------------------------------------\n\nTITLE: Using useStorage for Nested Data Subscriptions\nDESCRIPTION: Demonstrates how to replace room.subscribe() with useStorage for subscribing to nested data changes.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/0.18.mdx#2025-04-11_snippet_13\n\nLANGUAGE: tsx\nCODE:\n```\n// ✅ Automatically rerenders if pets changes (but not more often)\nconst nested = useStorage((root) => root.scientist.pets);\n```\n\n----------------------------------------\n\nTITLE: Broadcasting Revalidation Events with Liveblocks\nDESCRIPTION: Example of using useBroadcastEvent to send a revalidation event to other clients.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/revalidate-api-data-with-swr.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst broadcast = useBroadcastEvent();\n\n// Sending a custom REVALIDATE event\nbroadcast({ type: \"REVALIDATE\" });\n```\n\n----------------------------------------\n\nTITLE: Configuring FloatingToolbar Position\nDESCRIPTION: Shows how to customize the position and offset of the floating toolbar relative to the text selection.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_17\n\nLANGUAGE: tsx\nCODE:\n```\n<FloatingToolbar\n  position=\"bottom\" // Position can be `top` or `bottom`\n  offset={12} // Distance in px from selection\n/>\n```\n\n----------------------------------------\n\nTITLE: Implementing useInboxNotifications with pagination in React\nDESCRIPTION: Updated example of using useInboxNotifications hook with pagination in a React component. This implementation includes handling for fetching more notifications, loading states, and errors.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.9.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useInboxNotifications } from \"@liveblocks/react/suspense\";\n\nfunction Notifications() {\n  const {\n    inboxNotifications,\n    fetchMore,\n    isFetchingMore,\n    hasFetchedAll,\n    fetchMoreError,\n  } = useInboxNotifications();\n\n  const loadMore = fetchMoreError ? (\n    <>\n      <p>Error loading more notifications: {fetchMoreError.message}</p>\n      <button onClick={fetchMore} disabled={isFetchingMore}>\n        Retry\n      </button>\n    </>\n  ) : (\n    <button onClick={fetchMore} disabled={isFetchingMore}>\n      Load more\n    </button>\n  );\n\n  return (\n    <div>\n      {inboxNotifications.map((notification) => (\n        <InboxNotification key={notification.id} inboxNotification={no†ification} />\n      ))}\n      {hasFetchedAll ? <div>🎉 You're all caught up!</div> : loadMore}\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Joining a Liveblocks Room in JavaScript\nDESCRIPTION: Code snippet demonstrating how to join a Liveblocks room using the client.enterRoom method. This is essential for creating a real-time collaborative experience.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/vuejs.mdx#2025-04-11_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nconst { room, leave } = client.enterRoom(\"my-room\");\n```\n\n----------------------------------------\n\nTITLE: Creating Liveblocks Client with preventUnsavedChanges Option\nDESCRIPTION: Example showing how to enable the preventUnsavedChanges option when creating a Liveblocks client to prevent browser tabs from being closed while local changes are not yet synchronized.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/create-liveblocks-app/CHANGELOG.md#2025-04-11_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\ncreateClient({ preventUnsavedChanges: true })\n```\n\n----------------------------------------\n\nTITLE: Implementing Toolbar Buttons with Various Options\nDESCRIPTION: Shows different ways to implement toolbar buttons with various configurations including shortcuts, icons, and custom styling.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Toolbar } from \"@liveblocks/react-tiptap\";\nimport { Icon } from \"@liveblocks/react-ui\";\n\n// Button says \"Question\"\n<Toolbar.Toggle name=\"Question\" onClick={/* ... */} />\n\n// Tooltip says \"Question [⌘+Q]\"\n<Toolbar.Button name=\"Question\" shortcut=\"CMD+Q\" onClick={/* ... */} />\n\n// Custom icon, replaces the name in the button\n<Toolbar.Button name=\"Question\" icon={<div>?</div>} onClick={/* ... */} />\n\n// Using a Liveblocks icon, replaces the name in the button\n<Toolbar.Button name=\"Question\" icon={<Icon.QuestionMark />} onClick={/* ... */} />\n\n// Passing children visually replaces the `name` and `icon`\n<Toolbar.Button name=\"Question\" onClick={/* ... */}>\n  ? Ask a question\n</Toolbar.Button>\n\n// Props are passed to the inner `button`\n<Toolbar.Button\n  name=\"Question\"\n  style={{ marginLeft: 10 }}\n  className=\"custom-button\"\n  onMouseOver={() => console.log(\"Hovered\")}\n/>\n```\n\n----------------------------------------\n\nTITLE: Retrieving Headless Lexical Editor with doc.getLexicalEditor\nDESCRIPTION: Shows how to use doc.getLexicalEditor to retrieve a headless Lexical editor from @lexical/headless package. This provides access to the underlying editor instance.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-node-lexical.mdx#2025-04-11_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nconst headlessEditor = await withLexicalDocument(\n  { roomId: \"my-room-id\", client: liveblocks },\n  // +++\n  async (doc) => {\n    return doc.getLexicalEditor();\n  }\n  // +++\n);\n```\n\n----------------------------------------\n\nTITLE: Accessing User Metadata with useSelf Hook\nDESCRIPTION: Shows how to access user metadata in a React component using the useSelf hook from Liveblocks.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/remix.mdx#2025-04-11_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nexport { useSelf } from \"../liveblocks.config.ts\";\n\nfunction Component() {\n  const { name, avatar, colors } = useSelf((me) => me.info);\n}\n```\n\n----------------------------------------\n\nTITLE: Room Management API Examples in TypeScript\nDESCRIPTION: Demonstrates the old and new APIs for entering and leaving rooms in Liveblocks. Shows the transition from separate enter/leave methods to a combined enterRoom approach that returns both room and leave function.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-core/CHANGELOG.md#2025-04-11_snippet_18\n\nLANGUAGE: typescript\nCODE:\n```\n// Old APIs we'll no longer be recommending (but that will remain working)\nconst room = client.enter(\"my-room\", options);\nclient.getRoom(\"my-room\");\nclient.leave(\"my-room\");\n```\n\nLANGUAGE: typescript\nCODE:\n```\n// New API we'll be recommending instead\nconst { room, leave } = client.enterRoom(\"my-room\", options);\nleave();\n```\n\n----------------------------------------\n\nTITLE: Using pagination with useInboxNotifications in React\nDESCRIPTION: Demonstrates how to use the new pagination support in the useInboxNotifications hook, including new properties for fetching more data and checking loading status.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG.md#2025-04-11_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\nconst {\n  inboxNotifications,\n  isLoading,\n  error,\n  fetchMore,\n  isFetchingMore,\n  hasFetchedAll,\n  fetchMoreError,\n} = useInboxNotifications();\n```\n\n----------------------------------------\n\nTITLE: Integrating Zustand with Liveblocks Middleware\nDESCRIPTION: Example showing how to integrate Liveblocks with a Zustand store using middleware, mapping specific state properties to Liveblocks presence and storage.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node/CHANGELOG.md#2025-04-11_snippet_19\n\nLANGUAGE: typescript\nCODE:\n```\nimport create from \"zustand\";\nimport { createClient } from \"@liveblocks/client\";\nimport { middleware } from \"@liveblocks/zustand\";\n\nconst client = createClient({ /*...*/ });\n\ntype State = {\n  draft: string;\n  isTyping: boolean;\n  todos: Todo[];\n  setDraft: (draft: string) => void;\n  addTodo: () => void;\n  deleteTodo: (index: number) => void;\n};\n\ncreate(\n  middleware<State>(/* ... */, {\n    client,\n    presenceMapping: { isTyping: true },\n    storageMapping: { todos: true }\n  })\n);\n```\n\n----------------------------------------\n\nTITLE: Type Definition for CommentBody Utilities in Node\nDESCRIPTION: Type definitions and utilities for handling comment body transformations, including mention handling and text formatting in the @liveblocks/node package.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG.md#2025-04-11_snippet_14\n\nLANGUAGE: TypeScript\nCODE:\n```\ngetMentionedIdsFromCommentBody(body) // Get list of mentioned IDs\nstringifyCommentBody(body, options) // Convert CommentBody to string/HTML/Markdown\n```\n\n----------------------------------------\n\nTITLE: Integrating Anchored Threads in Lexical Editor TypeScript\nDESCRIPTION: Demonstrates how to integrate `AnchoredThreads` with `LiveblocksPlugin` and `RichTextPlugin` in a Lexical editor, setting necessary configurations and managing threads without resolved ones. Key dependencies include `useThreads` and `LiveblocksConfig`.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_29\n\nLANGUAGE: tsx\nCODE:\n```\nimport { LexicalComposer } from \"@lexical/react/LexicalComposer\";\\nimport { RichTextPlugin } from \"@lexical/react/LexicalRichTextPlugin\";\\nimport { ContentEditable } from \"@lexical/react/LexicalContentEditable\";\\nimport { LexicalErrorBoundary } from \"@lexical/react/LexicalErrorBoundary\";\\nimport { useThreads } from \"@liveblocks/react/suspense\";\\nimport {\\n  liveblocksConfig,\\n  LiveblocksPlugin,\\n  FloatingComposer,\\n  AnchoredThreads,\\n} from \"@liveblocks/react-lexical\";\\n\\nconst initialConfig = liveblocksConfig({\\n  namespace: \"MyEditor\",\\n  theme: {},\\n  nodes: [],\\n  onError: (err) => console.error(err),\\n});\\n\\nfunction Editor() {\\n  const { threads } = useThreads();\\n\\n  return (\\n    <LexicalComposer initialConfig={initialConfig}>\\n      <LiveblocksPlugin>\\n        <FloatingComposer />\\n        <AnchoredThreads threads={threads} style={{ width: \"350px\" }} />\\n      </LiveblocksPlugin>\\n      <RichTextPlugin\\n        contentEditable={<ContentEditable />}\\n        placeholder={<div>Enter some text...</div>}\\n        ErrorBoundary={LexicalErrorBoundary}\\n      />\\n    </LexicalComposer>\\n  );\\n}\n```\n\n----------------------------------------\n\nTITLE: Customizing Liveblocks Components with CSS Variables\nDESCRIPTION: This CSS snippet demonstrates how to use CSS variables to quickly customize the appearance of all default Liveblocks components, including color, spacing, and border radius.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/notifications/styling-and-customization.mdx#2025-04-11_snippet_3\n\nLANGUAGE: css\nCODE:\n```\n/* Styles all default components */\n.lb-root {\n  --lb-accent: purple;\n  --lb-spacing: 1em;\n  --lb-radius: 0;\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Configuration\nDESCRIPTION: Command to create and initialize the Liveblocks configuration file for JavaScript framework integration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-monaco-javascript.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework javascript\n```\n\n----------------------------------------\n\nTITLE: Updating Yjs Document with REST API\nDESCRIPTION: Demonstrates how to create and send a Yjs document update using the Liveblocks REST API. Creates a simple text document and sends it as a binary update.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/modifying-yjs-document-data-with-the-rest-api.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport * as Y from \"yjs\";\nimport { Liveblocks } from \"@liveblocks/node\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\nconst roomId = \"my-room-name\";\n\nexport async function POST() {\n  // Create a Yjs document\n  const yDoc = new Y.Doc();\n\n  // Create your data structures and make your update\n  // Each editor is different, you probably need to change these two lines\n  const yText = yDoc.getText(\"text\");\n  yText.insert(0, \"Hello world\");\n\n  // Encode the document state as an update\n  const yUpdate = Y.encodeStateAsUpdate(yDoc);\n\n  // Insert the update\n  await liveblocks.sendYjsBinaryUpdate(roomId, yUpdate);\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Multiplayer 3D Builder Example with Liveblocks CLI\nDESCRIPTION: This command uses the Liveblocks CLI to create a new project based on the nextjs-3d-builder example. It automatically sets up the project and prompts for an API key.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-3d-builder/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-3d-builder --api-key\n```\n\n----------------------------------------\n\nTITLE: Setting Room Permissions in Liveblocks\nDESCRIPTION: Demonstrates how to create a room with specific access permissions using the Liveblocks Node SDK. This example sets default access levels and grants additional permissions to specific users and groups.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/firebase.mdx#2025-04-11_snippet_3\n\nLANGUAGE: ts\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nconst room = await liveblocks.createRoom(\"my-room-id\", {\n  defaultAccesses: [\"room:read\", \"room:presence:write\"],\n  groupsAccesses: {\n    \"my-group-id\": [\"room:write\"],\n  },\n  usersAccesses: {\n    \"my-user-id\": [\"room:write\"],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Creating a Custom Toolbar with Default Sections\nDESCRIPTION: Example showing how to create a custom toolbar using the default toolbar sections. This demonstrates how the default toolbar is constructed using modular components.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Toolbar } from \"@liveblocks/react-lexical\";\n\nfunction CustomToolbar() {\n  return (\n    <Toolbar>\n      // +++\n      <Toolbar.BlockSelector />\n      <Toolbar.SectionInline />\n      <Toolbar.Separator />\n      <Toolbar.SectionCollaboration />\n      // +++\n    </Toolbar>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Example ThreadDeletedEvent payload in TypeScript\nDESCRIPTION: Provides an example payload for the ThreadDeletedEvent, illustrating the structure and values of the event data. The example includes sample values for projectId, roomId, threadId, and deletedAt. This example helps to understand the expected format of the event.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/webhooks.mdx#2025-04-11_snippet_21\n\nLANGUAGE: typescript\nCODE:\n```\nconst threadDeletedEvent = {\n  type: \"threadDeleted\",\n  data: {\n    projectId: \"my-project-id\",\n    roomId: \"my-room-id\",\n    threadId: \"my-thread-id\",\n    deletedAt: \"2021-10-06T01:45:56.558Z\",\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using Toolbar.Toggle in React-Tiptap\nDESCRIPTION: Demonstrates how to use the Toolbar.Toggle component with the Tiptap highlight extension. The toggle button controls the highlight feature of the editor.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Toolbar } from \"@liveblocks/react-tiptap\";\n\n<Toolbar editor={editor}>\n  <Toolbar.Toggle\n    name=\"Highlight\"\n    active={editor?.isActive(\"highlight\") ?? false}\n    onClick={() => editor?.chain().focus().toggleHighlight().run()}\n  />\n</Toolbar>;\n```\n\n----------------------------------------\n\nTITLE: Extended Error Listener Implementation in React\nDESCRIPTION: Example showing the expanded error handling capabilities in useErrorListener hook, including new error types for thread creation and notification handling\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.16.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useErrorListener } from \"@liveblocks/react\";\n\nuseErrorListener((error) => {\n  switch (error.context.type) {\n    // +++\n    case \"CREATE_THREAD_ERROR\":\n      const { roomId, threadId, commentId, body, metadata } = error.context;\n      break;\n    // +++\n\n    // +++\n    case \"MARK_INBOX_NOTIFICATION_AS_READ_ERROR\":\n      const { inboxNotificationId, roomId } = error.context;\n      break;\n    // +++\n\n    // Many other new errors\n    // ...\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Setting up Authentication Endpoint in Nuxt.js\nDESCRIPTION: Create a server-side API endpoint for Liveblocks authentication in Nuxt.js. This code identifies the user and returns necessary authentication information.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/nuxtjs.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nexport default defineEventHandler(async (event) => {\n  // Get the current user from your database\n  const user = __getUserFromDB__(event);\n\n  // Identify the user and return the result\n  const { status, body } = await liveblocks.identifyUser(\n    {\n      userId: user.id,\n      groupIds, // Optional\n    },\n    { userInfo: user.metadata },\n  );\n  return body;\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing RoomProvider with Required ID in React\nDESCRIPTION: This code snippet demonstrates how to correctly use the RoomProvider component from @liveblocks/react by providing the required 'id' property. It shows the proper structure for wrapping a component with RoomProvider.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/errors/liveblocks-react/RoomProvider-id-property-is-required.mdx#2025-04-11_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { RoomProvider } from \"@liveblocks/react\";\n\nfunction Component() {\n  return (\n    <RoomProvider id=\"your-room-id\">\n      <YourComponent />\n    </RoomProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Room Provider with Presence\nDESCRIPTION: Demonstrates how to set up the RoomProvider with initial presence state for cursor tracking.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-presence-with-react.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { RoomProvider, useOthers } from \"@liveblocks/react/suspense\";\n\nfunction Index() {\n  return (\n    <RoomProvider id=\"my-room-id\" initialPresence={{ cursor: null }}>\n      <App />\n    </RoomProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Setting up Liveblocks authentication endpoint in Next.js App Router\nDESCRIPTION: Implementation of a Liveblocks authentication endpoint using the App Router in Next.js. Creates a user session and authorizes access to a specific room.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-codemirror-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\nimport { NextRequest } from \"next/server\";\n\nconst API_KEY = \"{{SECRET_KEY}}\";\n\nconst liveblocks = new Liveblocks({\n  secret: API_KEY!,\n});\n\nexport async function POST(request: NextRequest) {\n  // Get the current user's info from your database\n  const user = {\n    id: \"charlielayne@example.com\",\n    info: {\n      name: \"Charlie Layne\",\n      color: \"#D583F0\",\n      picture: \"https://liveblocks.io/avatars/avatar-1.png\",\n    },\n  };\n\n  // Create a session for the current user\n  // userInfo is made available in Liveblocks presence hooks, e.g. useOthers\n  const session = liveblocks.prepareSession(user.id, {\n    userInfo: user.info,\n  });\n\n  // Give the user access to the room\n  const { room } = await request.json();\n  session.allow(room, session.FULL_ACCESS);\n\n  // Authorize the user and return the result\n  const { body, status } = await session.authorize();\n  return new Response(body, { status });\n}\n```\n\n----------------------------------------\n\nTITLE: Passing User Metadata in Authentication Endpoint\nDESCRIPTION: Pass user metadata to the identifyUser function in the authentication endpoint.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/nextjs.mdx#2025-04-11_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\n// Get the current user from your database\nconst user = __getUserFromDB__(request);\n\n// Identify the user and return the result\nconst { status, body } = await liveblocks.identifyUser(\n  {\n    userId: user.id,\n    groupIds, // Optional\n  },\n  {\n    userInfo: {\n      name: user.name,\n      avatar: user.avatarUrl,\n      colors: user.colorArray,\n    }\n  },\n);\n```\n\n----------------------------------------\n\nTITLE: Integrating Live Avatars into the Code Editor in TSX\nDESCRIPTION: This TypeScript snippet shows how to integrate the Avatars component into the CollaborativeEditor interface, highlighting its use in displaying live user avatars. The snippet assumes that the Liveblocks setup, component import path, and relevant CSS modules are properly in place.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-codemirror-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_16\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Avatars } from \"@/components/Avatars\";\n// ...\n\nexport function CollaborativeEditor() {\n  // ...\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.editorHeader}>\n        <div>\n          {yUndoManager ? <Toolbar yUndoManager={yUndoManager} /> : null}\n        </div>\n        <Avatars />\n      </div>\n      <div className={styles.editorContainer} ref={ref}></div>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Styling the Collaborative Text Editor\nDESCRIPTION: CSS styles for the Lexical editor and Liveblocks components, including responsive designs for both desktop and mobile views.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-lexical.mdx#2025-04-11_snippet_6\n\nLANGUAGE: css\nCODE:\n```\n.editor {\n  position: relative;\n  display: flex;\n  width: 100%;\n  height: 100%;\n}\n\n[data-lexical-editor] {\n  padding: 2px 12px;\n  outline: none;\n}\n\n[data-lexical-editor] p {\n  margin: 0.8em 0;\n}\n\n/* For mobile */\n.floating-threads {\n  display: none;\n}\n\n/* For desktop */\n.anchored-threads {\n  display: block;\n  max-width: 300px;\n  width: 100%;\n  position: absolute;\n  right: 4px;\n}\n\n@media (max-width: 640px) {\n  .floating-threads {\n    display: block;\n  }\n\n  .anchored-threads {\n    display: none;\n  }\n}\n\n.placeholder {\n  position: absolute;\n  left: 12px;\n  top: 16px;\n  pointer-events: none;\n  opacity: 0.5;\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Dependencies with Create React App\nDESCRIPTION: Commands to create a new React TypeScript project and install required Liveblocks and Zustand dependencies.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-react-zustand-and-liveblocks.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-react-app zustand-todo-app --template typescript\nnpm install zustand @liveblocks/client @liveblocks/zustand\n```\n\n----------------------------------------\n\nTITLE: Leaving Liveblocks Room\nDESCRIPTION: Dispatching action to leave current Liveblocks room and stop Redux state sync.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-redux.mdx#2025-04-11_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nimport { actions } from \"@liveblocks/redux\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nconst dispatch = useDispatch();\n\ndispatch(actions.leaveRoom());\n```\n\n----------------------------------------\n\nTITLE: Configuring Liveblocks Client with Authentication Endpoint\nDESCRIPTION: Configure the Liveblocks client to use the authentication endpoint instead of a public API key. This enables secure user identification and permission validation.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/sveltekit.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\n\nconst client = createClient({\n  authEndpoint: \"/api/liveblocks-auth\",\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Basic Zustand Store Without Liveblocks Middleware\nDESCRIPTION: Example of a basic Zustand store implementation without Liveblocks middleware, showing a typical todo list application state structure.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-zustand/CHANGELOG.md#2025-04-11_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\nimport create from \"zustand\";\n\ntype State = {\n  draft: string;\n  isTyping: boolean;\n  todos: Todo[];\n  setDraft: (draft: string) => void;\n  addTodo: () => void;\n  deleteTodo: (index: number) => void;\n};\n\ncreate<State>(/* ... */);\n```\n\n----------------------------------------\n\nTITLE: Comment Body Formatting with stringifyCommentBody\nDESCRIPTION: Demonstrates how to format a comment's body into plain text and HTML using stringifyCommentBody, including user mention resolution.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-send-email-notifications-when-comments-are-created.mdx#2025-04-11_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { stringifyCommentBody } from \"@liveblocks/node\";\n\nconst htmlComment = await stringifyCommentBody(comment.body, {\n  format: \"html\",\n\n  async resolveUsers({ userIds }) {\n    console.log(userIds);\n\n    return [{ name: \"Emil Joyce\" }];\n  },\n});\n\nconsole.log(stringComment);\n```\n\n----------------------------------------\n\nTITLE: Joining a Liveblocks room in JavaScript\nDESCRIPTION: Code snippet showing how to join a Liveblocks room using the client.enterRoom method. This is necessary for creating a realtime collaborative experience.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/svelte.mdx#2025-04-11_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nconst { room, leave } = client.enterRoom(\"my-room\");\n```\n\n----------------------------------------\n\nTITLE: Installing Dependencies with npm\nDESCRIPTION: Commands to create a new React app and install required dependencies including Redux and Liveblocks packages.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-online-whiteboard-with-react-redux-and-liveblocks.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-react-app redux-whiteboard\n```\n\nLANGUAGE: bash\nCODE:\n```\nnpm install redux react-redux @reduxjs/toolkit @liveblocks/client @liveblocks/redux\n```\n\n----------------------------------------\n\nTITLE: Importing Hooks Directly in React Components\nDESCRIPTION: Demonstrates the improved hook import pattern in @liveblocks/react v2.0. Instead of importing from a configuration file, hooks can now be imported directly from the package.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/create-liveblocks-app/CHANGELOG.md#2025-04-11_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\n// ❌ Before: get hooks exported from your Liveblocks config\nimport { RoomProvider, useRoom, ... } from \"./liveblocks.config\";\n\n// ✅ After: import hooks directly\nimport { RoomProvider, useRoom, ... } from \"@liveblocks/react\";\nimport { RoomProvider, useRoom, ... } from \"@liveblocks/react/suspense\";\n```\n\n----------------------------------------\n\nTITLE: Using useSyncStatus Hook in React\nDESCRIPTION: Example of using the useSyncStatus hook to display a 'Saving...' spinner in a React application when Liveblocks is synchronizing local changes to the server.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-lexical/CHANGELOG.md#2025-04-11_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nuseSyncStatus({ smooth: true })\n```\n\n----------------------------------------\n\nTITLE: Configuring Liveblocks Client with Custom Auth Callback\nDESCRIPTION: Advanced configuration of the Liveblocks client using a custom auth callback to pass headers and body data to the auth endpoint.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/express.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\n\n// Passing custom headers and body to your endpoint\nconst client = createClient({\n  authEndpoint: async (room) => {\n    const headers = {\n      // Custom headers\n      // ...\n\n      \"Content-Type\": \"application/json\",\n    };\n\n    const body = JSON.stringify({\n      // Custom body\n      // ...\n\n      room,\n    });\n\n    const response = await fetch(\"/api/liveblocks-auth\", {\n      method: \"POST\",\n      headers,\n      body,\n    });\n\n    return await response.json();\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Setting up React-Redux Provider\nDESCRIPTION: Configures the React application with Redux Provider wrapper.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-online-whiteboard-with-react-redux-and-liveblocks.mdx#2025-04-11_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nimport { Provider } from \"react-redux\";\nimport store from \"./store\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n```\n\n----------------------------------------\n\nTITLE: Accessing Awareness through Room Presence\nDESCRIPTION: Demonstrates how to access awareness through room presence using the __yjs property.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-yjs.mdx#2025-04-11_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\n// Yjs awareness\nconst awareness = room.getPresence().__yjs;\n```\n\n----------------------------------------\n\nTITLE: User ID Resolution Example\nDESCRIPTION: Shows the expected format for user IDs input and corresponding user information output in shell format.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/users-and-mentions.mdx#2025-04-11_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\n# If this is `userIds`\n[\"marc@example.com\", \"pierre@example.com\"]\n\n# Return `users`\n[{ name: \"Marc\", avatar: \"https://example.com/marc.png\" }, { name: \"Pierre\", avatar: \"https://example.com/pierre.png\" }]\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks packages for Next.js\nDESCRIPTION: Command to install the required Liveblocks packages for implementing collaborative comments in Next.js applications. All packages should use the same version.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-comments.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/react @liveblocks/react-ui\n```\n\n----------------------------------------\n\nTITLE: Updating Authorization Implementation with Mandatory userId\nDESCRIPTION: Example of updated authorize implementation with mandatory userId field and optional groupIds and userInfo.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/1.0.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { authorize } from \"@liveblocks/node\";\n\n// Replace this key with your secret key provided at\n// https://liveblocks.io/dashboard/projects/{projectId}/apikeys\nconst secret = \"sk_prod_xxxxxxxxxxxxxxxxxxxxxxxx\";\n\nexport default async function auth(req, res) {\n  /**\n   * Implement your own security here.\n   *\n   * It's your responsibility to ensure that the caller of this endpoint\n   * is a valid user by validating the cookies or authentication headers\n   * and that it has access to the requested room.\n   */\n  const room = req.body.room;\n  const response = await authorize({\n    room,\n    secret,\n    // Corresponds to the UserMeta[id] type defined in liveblocks.config.ts\n    userId: \"123\", // Required\n    groupIds: [\"456\"], // Optional\n    userInfo: {\n      // Optional, corresponds to the UserMeta[info] type defined in liveblocks.config.ts\n      name: \"Ada Lovelace\",\n      color: \"red\",\n    },\n  });\n  return res.status(response.status).end(response.body);\n}\n```\n\n----------------------------------------\n\nTITLE: Granting Access to Organization Rooms with Wildcard Pattern in TypeScript\nDESCRIPTION: This snippet demonstrates how to grant full access to all rooms within an organization using a wildcard pattern with access tokens in Liveblocks.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-grant-access-to-individual-rooms-with-access-tokens.mdx#2025-04-11_snippet_0\n\nLANGUAGE: ts\nCODE:\n```\n// ✅ Grants access to every `acme` organization room\nsession.allow(`acme:*`, session.FULL_ACCESS);\n```\n\n----------------------------------------\n\nTITLE: Typing Others' Presence in Zustand Middleware\nDESCRIPTION: Example of how to add more specific typing for others' presence when using Liveblocks with Zustand. This demonstrates using the TPresence generic argument to properly type the presence state.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-prosemirror/CHANGELOG.md#2025-04-11_snippet_21\n\nLANGUAGE: typescript\nCODE:\n```\ntype Presence = {\n  isTyping: true;\n}\n\nconst useStore = create(\n  middleware<State, Presence>(/* ... */, {\n    client,\n    presenceMapping: { isTyping: true },\n    storageMapping: { todos: true }\n  })\n);\n\n// In your component\nuseStore(state => state.liveblocks.others[0].presence?.isTyping)\n```\n\n----------------------------------------\n\nTITLE: Converting Document to Markdown with doc.toMarkdown\nDESCRIPTION: Shows how to use doc.toMarkdown to convert a Lexical document to a markdown string. This leverages functionality from @lexical/markdown to provide markdown representation of the content.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-node-lexical.mdx#2025-04-11_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nconst markdown = await withLexicalDocument(\n  { roomId: \"my-room-id\", client: liveblocks },\n  // +++\n  async (doc) => {\n    return doc.toMarkdown();\n  }\n  // +++\n);\n```\n\n----------------------------------------\n\nTITLE: Typing Others' Presence with Liveblocks Zustand Middleware\nDESCRIPTION: Advanced example showing how to specify types for other users' presence data when using the Liveblocks middleware with Zustand, enabling type-safe access to their typing status.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-client/CHANGELOG.md#2025-04-11_snippet_17\n\nLANGUAGE: typescript\nCODE:\n```\ntype Presence = {\n  isTyping: true;\n}\n\nconst useStore = create(\n  middleware<State, Presence>(/* ... */, {\n    client,\n    presenceMapping: { isTyping: true },\n    storageMapping: { todos: true }\n  })\n);\n\n// In your component\nuseStore(state => state.liveblocks.others[0].presence?.isTyping)\n```\n\n----------------------------------------\n\nTITLE: Implementing Text Formatting Toolbar in React for Quill Editor\nDESCRIPTION: This snippet defines a Toolbar component that adds basic text formatting options (bold, italic, underline) to a Quill editor. It uses React hooks and Quill's API to apply formatting to selected text.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-quill-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_10\n\nLANGUAGE: tsx\nCODE:\n```\nimport styles from \"./Toolbar.module.css\";\nimport { QuillEditorType } from \"@/components/CollaborativeEditor\";\nimport { useCallback } from \"react\";\n\ntype Props = {\n  getQuill: () => QuillEditorType | null;\n};\n\ntype Formats = \"bold\" | \"italic\" | \"underline\";\n\nexport function Toolbar({ getQuill }: Props) {\n  const formatSelection = useCallback(\n    (format: Formats) => {\n      const quill = getQuill();\n      if (!quill) {\n        return;\n      }\n\n      const selection = quill.getSelection();\n      if (!selection) {\n        return;\n      }\n\n      const { index, length } = selection;\n      const hasFormat = quill.getFormat(index, length)[format];\n\n      quill.formatText(\n        index,\n        length,\n        {\n          [format]: !hasFormat,\n        },\n        \"user\"\n      );\n    },\n    [getQuill]\n  );\n\n  return (\n    <div className={styles.toolbar}>\n      <button\n        className={styles.button}\n        onClick={() => formatSelection(\"bold\")}\n        aria-label=\"bold\"\n      >\n        B\n      </button>\n      <button\n        onClick={() => formatSelection(\"italic\")}\n        className={styles.button}\n        aria-label=\"italic\"\n      >\n        I\n      </button>\n      <button\n        onClick={() => formatSelection(\"underline\")}\n        className={styles.button}\n        aria-label=\"underline\"\n      >\n        U\n      </button>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: CommentCreatedEvent Schema and Example in TypeScript\nDESCRIPTION: This snippet defines the TypeScript schema for the CommentCreatedEvent and provides an example of the event object. This event is triggered when a new comment is created.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/webhooks.mdx#2025-04-11_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\n// Schema\ntype CommentCreatedEvent = {\n  type: \"commentCreated\";\n  data: {\n    projectId: string;\n    roomId: string;\n    threadId: string;\n    commentId: string;\n    createdAt: string;\n    createdBy: string;\n  };\n};\n\n// Example\nconst commentCreatedEvent = {\n  type: \"commentCreated\",\n  data: {\n    projectId: \"my-project-id\",\n    roomId: \"my-room-id\",\n    threadId: \"my-thread-id\",\n    commentId: \"my-comment-id\",\n    createdAt: \"2021-10-06T01:45:56.558Z\",\n    createdBy: \"my-user-id\",\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using Query Language with REST API\nDESCRIPTION: Example of a query string for the Liveblocks REST API, showing how to encode the query and add it to the query parameter in the URL.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-filter-rooms-using-query-language.mdx#2025-04-11_snippet_1\n\nLANGUAGE: js\nCODE:\n```\nroomId^'liveblocks:' AND metadata['roomType']:'whiteboard'\n```\n\n----------------------------------------\n\nTITLE: Retrieving ProseMirror Editor State\nDESCRIPTION: Demonstrates how to get the current ProseMirror state using api.getEditorState. This provides access to the full editor state for advanced operations.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-node-prosemirror.mdx#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nconst editorState = await withProsemirrorDocument(\n  { roomId: \"my-room-id\", client: liveblocks },\n  async (api) => {\n    // +++\n    return api.getEditorState();\n    // +++\n  }\n);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Editor State with doc.getEditorState\nDESCRIPTION: Demonstrates how to use doc.getEditorState to retrieve Lexical's editorState object, which represents the current state of the document.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-node-lexical.mdx#2025-04-11_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nconst editorState = await withLexicalDocument(\n  { roomId: \"my-room-id\", client: liveblocks },\n  // +++\n  async (doc) => {\n    return doc.getEditorState();\n  }\n  // +++\n);\n```\n\n----------------------------------------\n\nTITLE: Adding Floating Composer to Tiptap Editor\nDESCRIPTION: Demonstrates how to add a FloatingComposer component to enable additional collaborative features in the editor.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  useLiveblocksExtension,\n  FloatingComposer,\n} from \"@liveblocks/react-tiptap\";\nimport { useEditor, EditorContent } from \"@tiptap/react\";\n\nfunction TextEditor() {\n  const liveblocks = useLiveblocksExtension();\n\n  const editor = useEditor({\n    extensions: [\n      liveblocks,\n      // ...\n    ],\n  });\n\n  return (\n    <div>\n      <EditorContent editor={editor} />\n      <FloatingComposer editor={editor} style={{ width: \"350px\" }} />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Customizing FloatingThreads with Thread Components\nDESCRIPTION: Shows how to customize the FloatingThreads component by overriding its default Thread component using the components prop. Demonstrates applying styles and using other react components like Comment primitives for further customization.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_32\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Thread } from \"@liveblocks/react-ui\";\n\n<FloatingThreads\n  editor={editor}\n  threads={threads}\n  className=\"my-floating-thread\"\n  // +++\n  components={{\n    Thread: (props) => (\n      <Thread {...props} className=\"border shadow\" style={{ width: \"300px\" }} />\n    ),\n  }}\n  // +++\n/>;\n\nimport { Comment } from \"@liveblocks/react-ui/primitives\";\n\n<FloatingThreads\n  editor={editor}\n  threads={threads}\n  className=\"my-floating-thread\"\n  components={{\n    Thread: (props) => (\n      // +++\n      <div>\n        {props.thread.comments.map((comment) => (\n          <Comment.Body\n            key={comment.id}\n            body={comment.body}\n            components={/* ... */}\n          />\n        ))}\n      </div>\n      // +++\n    ),\n  }}\n/>;\n\n```\n\n----------------------------------------\n\nTITLE: Creating a Basic Next.js API Endpoint for Webhook Handling\nDESCRIPTION: A simple Next.js route handler that retrieves headers and body from an incoming webhook request. This serves as the foundation for processing Liveblocks webhook events.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-yjs-document-data-to-a-vercel-postgres-database.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Handle webhooks and database\n  // ...\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: UserEnteredEvent Schema and Example in TypeScript\nDESCRIPTION: This snippet defines the TypeScript schema for the UserEnteredEvent and provides an example of the event object. This event is triggered when a user connects to a room.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/webhooks.mdx#2025-04-11_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\n// Schema\ntype UserEnteredEvent = {\n  type: \"userEntered\";\n  data: {\n    projectId: string;\n    roomId: string;\n    connectionId: number;\n    userId: string | null;\n    userInfo: Record<string, any> | null;\n    enteredAt: string;\n    numActiveUsers: number;\n  };\n};\n\n// Example\nconst userEnteredEvent = {\n  type: \"userEntered\",\n  data: {\n    projectId: \"my-project-id\",\n    roomId: \"my-room-id\",\n    connectionId: 4,\n    userId: \"a-user-id\",\n    userInfo: null,\n    enteredAt: \"2021-10-06T01:45:56.558Z\",\n    numActiveUsers: 8,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Managing User Notification Settings with @liveblocks/node\nDESCRIPTION: Demonstrates how to use new methods in the Node.js client to manage user notification settings. It shows how to get, update, and delete notification settings for a user.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node/CHANGELOG.md#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\nconst liveblocks = new Liveblocks({ secret: \"sk_xxx\" });\n\nconst settings = await liveblocks.getNotificationSettings({ userId });\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst updatedSettings = await liveblocks.updateNotificationSettings({\n  userId,\n  data: {\n    teams: {\n      $fileUploaded: true,\n    },\n  },\n});\nawait liveblocks.deleteNotificationSettings({ userId });\n```\n\n----------------------------------------\n\nTITLE: Setting Local State Field\nDESCRIPTION: Shows how to set a single property in the current user's awareness state.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-yjs.mdx#2025-04-11_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\n// Set a single property on the current user's awareness\nawareness.setLocalStateField(\"user\", { name: \"Jonathan\" });\n```\n\n----------------------------------------\n\nTITLE: Client Provider Configuration\nDESCRIPTION: Shows the transition from using createClient to the new LiveblocksProvider component for client configuration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_18\n\nLANGUAGE: typescript\nCODE:\n```\n// ❌ Before\nconst client = createClient(/* options */);\n\n// ✅ After\n<LiveblocksProvider /* options */>\n  <App />\n</LiveblocksProvider>;\n```\n\n----------------------------------------\n\nTITLE: Handling YDocUpdated Webhook Events for Database Synchronization\nDESCRIPTION: Complete implementation of a Next.js endpoint that verifies webhook requests and handles the ydocUpdated event type. When a Yjs document is updated, this code extracts the roomId from the event data for database synchronization.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-yjs-document-data-to-a-planetscale-mysql-database.mdx#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\n\n// Add your signing key from a project's webhooks dashboard\nconst WEBHOOK_SECRET = \"YOUR_SIGNING_SECRET\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Verify if this is a real webhook request\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  // When Yjs document data has been updated\n  if (event.type === \"ydocUpdated\") {\n    const { roomId } = event.data;\n\n    // Update database\n    // ...\n  }\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Defining RoomEvent Type for Toast Notifications in TypeScript\nDESCRIPTION: This snippet defines the RoomEvent type for toast notifications in the liveblocks.config.ts file. It specifies the structure of the event object that will be broadcast to other users in the room.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/broadcasting-events/guide.mdx#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n// Event types\nRoomEvent: {\n  type: \"TOAST\";\n  message: string;\n}\n```\n\n----------------------------------------\n\nTITLE: Styling Thread Components in Lexical Editor TypeScript\nDESCRIPTION: Illustrates how to wrap built-in thread components like `Comment` with custom styling and attributes. This showcases how to leverage Liveblocks primitives for building custom thread presentations.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_33\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Comment } from \"@liveblocks/react-ui/primitives\";\\n\\n<AnchoredThreads\\n  threads={threads}\\n  style={{ width: \"350px\" }}\\n  className=\"my-anchored-thread\"\\n  components={{\\n    Thread: (props) => (\\n      <div>\\n        {props.thread.comments.map((comment) => (\\n          <Comment.Body\\n            key={comment.id}\\n            body={comment.body}\\n            components={/* ... */}\\n          />\\n        ))}\\n      </div>\\n    ),\\n  }}\\n/>\n```\n\n----------------------------------------\n\nTITLE: Typing Indicator Component - TypeScript React\nDESCRIPTION: This React component, `SomeoneIsTyping`, displays a message when at least one other user in the Liveblocks room is currently typing. It uses the `useStore` hook to access the Liveblocks presence data and checks if any other user's `isTyping` property is set to true.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-react-zustand-and-liveblocks.mdx#2025-04-11_snippet_5\n\nLANGUAGE: typescript react\nCODE:\n```\nimport React, { useEffect } from \"react\";\nimport useStore from \"./store\";\n\nimport \"./App.css\";\n\n/* WhoIsHere */\n\nfunction SomeoneIsTyping() {\n  const others = useStore((state) => state.liveblocks.others);\n\n  const someoneIsTyping = others.some((user) => user.presence.isTyping);\n\n  return someoneIsTyping ? (\n    <div className=\"someone_is_typing\">Someone is typing</div>\n  ) : null;\n}\n\nexport default function App() {\n  const {\n    draft,\n    setDraft,\n    liveblocks: { enterRoom, leaveRoom },\n  } = useStore();\n\n  useEffect(() => {\n    enterRoom(\"zustand-todo-app\");\n    return () => {\n      leaveRoom(\"zustand-todo-app\");\n    };\n  }, [enterRoom, leaveRoom]);\n\n  return (\n    <div className=\"container\">\n      <WhoIsHere />\n      <input\n        className=\"input\"\n        type=\"text\"\n        placeholder=\"What needs to be done?\"\n        value={draft}\n        onChange={(e) => setDraft(e.target.value)}\n      ></input>\n      <SomeoneIsTyping />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Setting LiveList Elements with set Method in TypeScript\nDESCRIPTION: Example demonstrating the usage of the LiveList.set method introduced in v0.16.0, which allows setting one element at a specified index in a LiveList.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-yjs/CHANGELOG.md#2025-04-11_snippet_19\n\nLANGUAGE: typescript\nCODE:\n```\nconst list = new LiveList([\"🦁\", \"🦊\", \"🐵\"]);\nlist.set(0, \"🐺\");\nlist.toArray(); // equals [\"🐺\", \"🦊\", \"🐵\"]\n```\n\n----------------------------------------\n\nTITLE: Retrieving Text Content from ProseMirror Document with Liveblocks\nDESCRIPTION: Extracts the text content from a ProseMirror document by returning api.getText() inside the callback. This allows you to get the plain text representation of the document.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-node-prosemirror.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst textContent = await withProsemirrorDocument(\n  { roomId: \"my-room-id\", client: liveblocks },\n  (api) => api.getText()\n);\n\n// \"My content\"\nconsole.log(textContent);\n```\n\n----------------------------------------\n\nTITLE: Accessing others array from Liveblocks state in JavaScript\nDESCRIPTION: This example demonstrates how to access the 'others' array from the Liveblocks state, which contains information about other users in the room.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-zustand.mdx#2025-04-11_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nconst {\n  liveblocks: { others },\n} = useStore();\n```\n\n----------------------------------------\n\nTITLE: Implementing PlanetScale Database Synchronization\nDESCRIPTION: Complete implementation showing how to sync Liveblocks Storage data with PlanetScale database using webhook events and mysql2 driver.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-storage-document-data-to-a-planetscale-mysql-database.mdx#2025-04-11_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\nimport mysql from \"mysql2\";\n\n// Add your signing key from a project's webhooks dashboard\nconst WEBHOOK_SECRET = \"YOUR_SIGNING_SECRET\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\n// Add your secret key from a project's API keys dashboard\nconst API_SECRET = \"{{SECRET_KEY}}\";\n\n// Your PlanetScale database URL\nconst DATABASE_URL = \"YOUR_DATABASE_URL\";\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Verify if this is a real webhook request\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  // When Storage document data has been updated\n  if (event.type === \"storageUpdated\") {\n    const { roomId } = event.data;\n\n    // Get Storage data from Liveblocks REST API\n    const url = `https://api.liveblocks.io/v2/rooms/${roomId}/storage`;\n    const response = await fetch(url, {\n      headers: { Authorization: `Bearer ${API_SECRET}` },\n    });\n\n    if (!response.ok) {\n      return new Response(\"Problem accessing Liveblocks REST APIs\", {\n        status: 500,\n      });\n    }\n\n    // Your JSON Storage document data as a string\n    const storageData = await response.text();\n\n    // Update database\n    const connection = await mysql.createConnection(DATABASE_URL);\n\n    const sql = `\n      INSERT INTO documents (roomId, storageData)\n      VALUES (?, ?)\n      ON DUPLICATE KEY UPDATE\n          storageData = VALUES(storageData);\n    `;\n\n    try {\n      await connection.query(sql, [roomId, storageData]);\n    } catch (err) {\n      return new Response(\"Problem inserting data into database\", {\n        status: 500,\n      });\n    }\n\n    await connection.end();\n  }\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Getting and Updating User Notification Settings with @liveblocks/client\nDESCRIPTION: Demonstrates how to use the new methods in @liveblocks/client to get and update user notification settings. This snippet shows creating a client, fetching current settings, and updating them.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/liveblocks-codemod/CHANGELOG.md#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createClient } from '@liveblocks/client'\nconst client = createClient({ ... })\n\nconst settings = await client.getNotificationSettings();\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst updatedSettings = await client.updateNotificationSettings({\n  email: {\n    thread: false,\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Using useThreads with Pagination in React\nDESCRIPTION: Demonstrates how to use the updated useThreads hook with new pagination support for fetching more threads.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-redux/CHANGELOG.md#2025-04-11_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nconst {\n  threads,\n  isLoading,\n  error,\n  fetchMore,\n  isFetchingMore,\n  hasFetchedAll,\n  fetchMoreError,\n} = useThreads({ query });\n```\n\n----------------------------------------\n\nTITLE: Setting up Liveblocks Room Component\nDESCRIPTION: React component implementation for managing Liveblocks room connection and provider setup.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-slate-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\n\"use client\";\n\nimport { ReactNode } from \"react\";\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n  ClientSideSuspense,\n} from \"@liveblocks/react/suspense\";\n\nexport function Room({ children }: { children: ReactNode }) {\n  return (\n    <LiveblocksProvider authEndpoint=\"/api/liveblocks-auth\">\n      <RoomProvider id=\"my-room\">\n        <ClientSideSuspense fallback={<div>Loading…</div>}>\n          {children}\n        </ClientSideSuspense>\n      </RoomProvider>\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Converting Local Webhook URL to Public Endpoint\nDESCRIPTION: Example of how to replace your localhost URL with the localtunnel-generated domain to create a publicly accessible webhook endpoint for testing purposes.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-send-email-notifications-of-unread-comments.mdx#2025-04-11_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\n# Take your local URL\nhttp://localhost:3000/api/liveblocks-notifications\n\n# Replace localhost with the generated domain, then copy it\nhttps://my-localtunnel-url.loca.lt/api/liveblocks-notifications\n```\n\n----------------------------------------\n\nTITLE: Custom Thread Component with Comments and Composer\nDESCRIPTION: Implementation of a custom thread component combining Comment and Composer components with useThreads hook for managing thread data.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_10\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Comment, Composer } from \"@liveblocks/react-ui\";\nimport { ThreadData } from \"@liveblocks/client\";\nimport { useThreads } from \"@liveblocks/react/suspense\";\n\n// Renders a list of comments and a composer for adding new comments\nfunction CustomThread({ thread }: { thread: ThreadData }) {\n  return (\n    <>\n      {thread.comments.map((comment) => (\n        <Comment key={comment.id} comment={comment} />\n      ))}\n      <Composer threadId={thread.id} />\n    </>\n  );\n}\n\n// Renders a list of custom thread components\nfunction Component() {\n  const { threads } = useThreads();\n\n  return (\n    <>\n      {threads.map((thread) => (\n        <CustomThread key={thread.id} />\n      ))}\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Updating User Notification Settings with Liveblocks Node.js\nDESCRIPTION: This snippet updates the notification settings for a specified user by utilizing the 'updateNotificationSettings' method within the Liveblocks Node.js client. It takes a user ID and data object as parameters to specify the changes to be made.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-prosemirror/CHANGELOG.md#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nconst updatedSettings = await liveblocks.updateNotificationSettings({\n  userId,\n  data: {\n    teams: {\n      $fileUploaded: true,\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing New Room APIs in Liveblocks Client\nDESCRIPTION: Demonstrates the new recommended approach for entering and leaving rooms in Liveblocks. This API supports entering/leaving the same room multiple times, enabling connections to the same room from different parts of an application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-redux/CHANGELOG.md#2025-04-11_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\n// New API we'll be recommending instead\nconst { room, leave } = client.enterRoom(\"my-room\", options);\nleave();\n```\n\n----------------------------------------\n\nTITLE: Adding FloatingComposer to BlockNote editor with Liveblocks\nDESCRIPTION: This example shows how to add a FloatingComposer component to the BlockNote editor, enabling users to create comment threads.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-blocknote.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  useCreateBlockNoteWithLiveblocks,\n  FloatingComposer,\n} from \"@liveblocks/react-blocknote\";\nimport { BlockNoteView } from \"@blocknote/mantine\";\n\nfunction TextEditor() {\n  const editor = useCreateBlockNoteWithLiveblocks({});\n\n  return (\n    <div>\n      <BlockNoteView editor={editor} />\n      <FloatingComposer editor={editor} style={{ width: \"350px\" }} />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing WebSocket connection status in Liveblocks with JavaScript\nDESCRIPTION: This code demonstrates how to get the current WebSocket connection status of the room using the status property from the Liveblocks state.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-zustand.mdx#2025-04-11_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\nconst {\n  liveblocks: { status },\n} = useStore();\n```\n\n----------------------------------------\n\nTITLE: Component Customization Example\nDESCRIPTION: Demonstrates how to customize React components for text mention notification emails.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-emails.mdx#2025-04-11_snippet_14\n\nLANGUAGE: tsx\nCODE:\n```\nconst emailData = await prepareThreadNotificationEmailAsReact(\n  liveblocks,\n  webhookEvent,\n  {\n    components: {\n      Container: ({ children }) => <Section>{children}</Section>,\n\n      Text: ({ children }) => (\n        <Text className=\"text-sm text-black m-0 mb-4\">{children}</Text>\n      ),\n\n      Mention: ({ element, user }) => (\n        <span style={{ color: \"red\" }}>@{user?.name ?? element.id}</span>\n      ),\n    },\n  }\n);\n```\n\n----------------------------------------\n\nTITLE: Installing Dependencies for Liveblocks and Tiptap\nDESCRIPTION: Command to install required packages including Liveblocks client, Yjs, Tiptap editor and its extensions for Vue 3.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-tiptap-vuejs.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/yjs yjs @tiptap/vue-3 @tiptap/pm @tiptap/starter-kit @tiptap/extension-collaboration @tiptap/extension-collaboration-cursor y-prosemirror\n```\n\n----------------------------------------\n\nTITLE: Styling Live Cursors with CSS\nDESCRIPTION: This CSS code snippet provides the styles for displaying live cursors in the code editor. It defines styles for the selection background, the cursor caret, and the user's name displayed above the cursor. The `--user-color` variable is dynamically set based on the user's information.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-monaco-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_10\n\nLANGUAGE: css\nCODE:\n```\n/* Cursor selection background */\n.yRemoteSelection {\n  opacity: 0.5;\n  background-color: var(--user-color);\n  margin-right: -1px;\n}\n\n/* Cursor caret */\n.yRemoteSelectionHead {\n  position: absolute;\n  box-sizing: border-box;\n  height: 100%;\n  border-left: 2px solid var(--user-color);\n}\n\n/* Cursor name */\n.yRemoteSelectionHead::after {\n  position: absolute;\n  top: -1.4em;\n  left: -2px;\n  padding: 2px 6px;\n  background: var(--user-color);\n  color: #fff;\n  border: 0;\n  border-radius: 6px;\n  border-bottom-left-radius: 0;\n  line-height: normal;\n  white-space: nowrap;\n  font-size: 14px;\n  font-style: normal;\n  font-weight: 600;\n  pointer-events: none;\n  user-select: none;\n  z-index: 1000;\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Name Mutation for LiveList in React\nDESCRIPTION: Defines a mutation to update a person's name in a LiveList, using the list index to access the correct person object.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/nesting-data-types/guide.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n// Update name mutation\nconst updateName = useMutation(\n  ({ storage }, newName: string, index: number) => {\n    const person = storage.get(\"people\").get(index);\n    person.set(\"name\", newName);\n  },\n  []\n);\n```\n\n----------------------------------------\n\nTITLE: Configuring RoomProvider with Batched Updates in React\nDESCRIPTION: Implementation showing how to pass unstable_batchedUpdates to RoomProvider to prevent stale props issues in React 17 and lower versions.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/troubleshooting.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { unstable_batchedUpdates } from \"react-dom\";\n//                                      ^^^^^^^^^^^ ...or \"react-native\"!\n<RoomProvider\n  id=\"my-room\"\n  initialPresence={/* ... */}\n  initialStorage={/* ... */}\n  unstable_batchedUpdates={unstable_batchedUpdates}\n>\n  <App />\n</RoomProvider>;\n```\n\n----------------------------------------\n\nTITLE: Displaying and Updating To-do List (React)\nDESCRIPTION: This snippet presents the React component for displaying the list of to-dos and handling user interactions for adding and deleting items. It fetches the `todos` array and `draft` value from the Redux store using `useSelector`.  The input field allows users to type in new to-do items, and the Enter key triggers the `addTodo` action. Existing to-do items are displayed in a list, with a delete button for each item that dispatches the `deleteTodo` action.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-react-redux-and-liveblocks.mdx#2025-04-11_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\nimport React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { actions } from \"@liveblocks/redux\";\n\nimport { setDraft, addTodo, deleteTodo } from \"./store\";\n\nimport \"./App.css\";\n\n/* WhoIsHere */\n/* SomeoneIsTyping */\n\nexport default function App() {\n  const todos = useSelector((state) => state.todos);\n  const draft = useSelector((state) => state.draft);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(actions.enterRoom(\"redux-demo-room\"));\n\n    return () => {\n      dispatch(actions.leaveRoom(\"redux-demo-room\"));\n    };\n  }, [dispatch]);\n\n  return (\n    <div className=\"container\">\n      <WhoIsHere />\n      <input\n        className=\"input\"\n        type=\"text\"\n        placeholder=\"What needs to be done?\"\n        value={draft}\n        onChange={(e) => dispatch(setDraft(e.target.value))}\n        onKeyDown={(e) => {\n          if (e.key === \"Enter\") {\n            dispatch(addTodo());\n          }\n        }}\n      ></input>\n      <SomeoneIsTyping />\n      {todos.map((todo, index) => {\n        return (\n          <div className=\"todo_container\" key={index}>\n            <div className=\"todo\">{todo.text}</div>\n            <button\n              className=\"delete_button\"\n              onClick={() => dispatch(deleteTodo(index))}\n            >\n              ✕\n            </button>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\n```\n\n----------------------------------------\n\nTITLE: Configuring Multiple Editors\nDESCRIPTION: Implementation showing how to create multiple BlockNote editors on a single page using unique field values.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/text-editor/blocknote.mdx#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useCreateBlockNoteWithLiveblocks } from \"@liveblocks/react-blocknote\";\n\nfunction TextEditor() {\n  const editor = useCreateBlockNoteWithLiveblocks(\n    {},\n    {\n      field: \"editor-one\",\n    }\n  );\n\n  // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Example Response from Get Room Storage\nDESCRIPTION: Sample response when retrieving room storage data, showing the structure of LiveObject, LiveList, and LiveMap data types.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/rest-api-endpoints-v1.mdx#2025-04-11_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"liveblocksType\": \"LiveObject\",\n  \"data\": {\n    \"aLiveObject\": {\n      \"liveblocksType\": \"LiveObject\",\n      \"data\": {\n        \"a\": 1\n      }\n    },\n    \"aLiveList\": {\n      \"liveblocksType\": \"LiveList\",\n      \"data\": [\"a\", \"b\"]\n    },\n    \"aLiveMap\": {\n      \"liveblocksType\": \"LiveMap\",\n      \"data\": {\n        \"a\": 1,\n        \"b\": 2\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Delete Functionality to the App Component - TypeScript\nDESCRIPTION: This snippet modifies the main App component to include a button for deleting the selected rectangle. The button is conditionally disabled based on whether a shape is selected.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-online-whiteboard-with-react-zustand-and-liveblocks.mdx#2025-04-11_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useEffect } from \"react\";\nimport useStore from \"./store\";\n\nimport \"./App.css\";\n\nexport default function App() {\n  const shapes = useStore((state) => state.shapes);\n  const insertRectangle = useStore((state) => state.insertRectangle);\n  const others = useStore((state) => state.liveblocks.others);\n  const selectedShape = useStore((state) => state.selectedShape);\n  const deleteShape = useStore((state) => state.deleteShape);\n\n  /* ... */\n\n  return (\n    <>\n      <div className=\"canvas\">{/* ... */}</div>\n      <div className=\"toolbar\">\n        <button onClick={insertRectangle}>Rectangle</button>\n        <button onClick={deleteShape} disabled={selectedShape === null}>\n          Delete\n        </button>\n      </div>\n    </>\n  );\n}\n\n/* Rectangle */\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Live Cursors Example with Next.js\nDESCRIPTION: Command to create a new Liveblocks project with live cursors chat example. Automatically sets up the project and configures API keys through browser authentication.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-live-cursors-chat/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-live-cursors-chat --api-key\n```\n\n----------------------------------------\n\nTITLE: Using HistoryVersionPreview Component in React\nDESCRIPTION: Example of implementing the HistoryVersionPreview component to display a preview of a specific version of Tiptap editor content. It includes a restore functionality.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_38\n\nLANGUAGE: tsx\nCODE:\n```\nimport { HistoryVersionPreview } from \"@liveblocks/react-tiptap\";\n\nfunction VersionPreview({ selectedVersion, onVersionRestore }) {\n  return (\n    <HistoryVersionPreview\n      version={selectedVersion}\n      onVersionRestore={onVersionRestore}\n    />\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: CommentDeletedEvent Schema and Example in TypeScript\nDESCRIPTION: This snippet defines the TypeScript schema for the CommentDeletedEvent and provides an example of the event object. This event is triggered when a comment is deleted.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/webhooks.mdx#2025-04-11_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\n// Schema\ntype CommentDeletedEvent = {\n  type: \"commentDeleted\";\n  data: {\n    projectId: string;\n    roomId: string;\n    threadId: string;\n    commentId: string;\n    deletedAt: string;\n  };\n};\n\n// Example\nconst commentDeletedEvent = {\n  type: \"commentDeleted\",\n  data: {\n    projectId: \"my-project-id\",\n    roomId: \"my-room-id\",\n    threadId: \"my-thread-id\",\n    commentId: \"my-comment-id\",\n    deletedAt: \"2021-10-06T01:45:56.558Z\",\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Migrating from Local to Global Type Definitions in Liveblocks v2.0\nDESCRIPTION: Example showing the change from local type definitions in createRoomContext to global interface declarations in Liveblocks v2.0, improving developer experience by allowing types to be shared across all Liveblocks APIs.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/liveblocks-codemod/CHANGELOG.md#2025-04-11_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\n// ❌ Before\nexport const {\n  suspense: {\n    RoomProvider,\n    useRoom,\n    // etc\n  },\n} = createRoomContext<Presence, Storage>(client);\n\n// ✅ After\ndeclare global {\n  interface Liveblocks {\n    Presence: Presence;\n    Storage: Storage;\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Liveblocks Client and Managing Notification Settings\nDESCRIPTION: Example showing how to create a Liveblocks client and manage notification settings using the client API.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-client/CHANGELOG.md#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { createClient } from '@liveblocks/client'\nconst client = createClient({ ... })\n\nconst settings = await client.getNotificationSettings();\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst updatedSettings = await client.updateNotificationSettings({\n  email: {\n    thread: false,\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Adding To-Do Container in HTML\nDESCRIPTION: This HTML snippet adds a container for rendering the to-do items in the application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-javascript-and-liveblocks.mdx#2025-04-11_snippet_12\n\nLANGUAGE: html\nCODE:\n```\n<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\" />\n    <title>Liveblocks - Todo list</title>\n    <link rel=\"stylesheet\" href=\"index.css\" />\n  </head>\n  <body>\n    <div class=\"container\">\n      <div id=\"who_is_here\" class=\"who_is_here\"></div>\n      <input id=\"todo_input\" type=\"text\" placeholder=\"What needs to be done?\" />\n      <div id=\"someone_is_typing\" class=\"someone_is_typing\"></div>\n      <div id=\"todos_container\"></div>\n    </div>\n    <script src=\"app.js\"></script>\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Complete Notification Settings Panel Implementation\nDESCRIPTION: Comprehensive implementation of a notification settings panel supporting multiple channels (email and Slack) and various notification types.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-notification-settings-panel.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useNotificationSettings } from \"@liveblocks/react\";\n\nfunction NotificationSettings() {\n  const [{ isLoading, error, settings }, updateSettings] =\n    useNotificationSettings();\n\n  if (isLoading || error) {\n    return null;\n  }\n\n  return (\n    <>\n      {settings.email ? (\n        <>\n          <label>\n            Receive document invites notifications by email\n            <input\n              type=\"checkbox\"\n              checked={settings.email.$documentInvite}\n              onChange={(e) =>\n                updateSettings({ email: { $documentInvite: e.target.checked } })\n              }\n            />\n          </label>\n          <label>\n            Receive thread notifications by email\n            <input\n              type=\"checkbox\"\n              checked={settings.email.thread}\n              onChange={(e) =>\n                updateSettings({ email: { thread: e.target.checked } })\n              }\n            />\n          </label>\n          <label>\n            Receive text mentions notifications by email\n            <input\n              type=\"checkbox\"\n              checked={settings.email.textMention}\n              onChange={(e) =>\n                updateSettings({ email: { textMention: e.target.checked } })\n              }\n            />\n          </label>\n        </>\n      ) : null}\n\n      {settings.slack ? (\n        <>\n          <label>\n            Receive document invites notifications on Slack\n            <input\n              type=\"checkbox\"\n              checked={settings.slack.$documentInvite}\n              onChange={(e) =>\n                updateSettings({ slack: { $documentInvite: e.target.checked } })\n              }\n            />\n          </label>\n          <label>\n            Receive thread notifications on Slack\n            <input\n              type=\"checkbox\"\n              checked={settings.slack.thread}\n              onChange={(e) =>\n                updateSettings({ slack: { thread: e.target.checked } })\n              }\n            />\n          </label>\n          <label>\n            Receive text mentions notifications on Slack\n            <input\n              type=\"checkbox\"\n              checked={settings.slack.textMention}\n              onChange={(e) =>\n                updateSettings({ slack: { textMention: e.target.checked } })\n              }\n            />\n          </label>\n        </>\n      ) : null}\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Custom Notification Kinds Implementation\nDESCRIPTION: Demonstrates how to implement custom notification kinds alongside built-in notifications using the useNotificationSettings hook.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-notification-settings-panel.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useNotificationSettings } from \"@liveblocks/react\";\n\nfunction NotificationSettings() {\n  const [{ isLoading, error, settings }, updateSettings] =\n    useNotificationSettings();\n\n  if (isLoading || error) {\n    return null;\n  }\n\n  return (\n    <>\n      {settings.email ? (\n        <>\n          <label>\n            Receive document invites notifications by email\n            <input\n              type=\"checkbox\"\n              checked={settings.email.$documentInvite}\n              onChange={(e) =>\n                updateSettings({ email: { $documentInvite: e.target.checked } })\n              }\n            />\n          </label>\n          <label>\n            Receive thread notifications by email\n            <input\n              type=\"checkbox\"\n              checked={settings.email.thread}\n              onChange={(e) =>\n                updateSettings({ email: { thread: e.target.checked } })\n              }\n            />\n          </label>\n        </>\n      ) : null}\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing States Property\nDESCRIPTION: Demonstrates how to access the states Map directly through the states property.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-yjs.mdx#2025-04-11_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\n// A Map of each user's awareness state\nconst states: Map<number, unknown> = awareness.states;\n```\n\n----------------------------------------\n\nTITLE: Svix Source IP Addresses for Liveblocks Webhooks\nDESCRIPTION: This code block lists the IP addresses used by Svix for sending webhook events. These may need to be allowed through firewalls or NAT configurations.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/webhooks.mdx#2025-04-11_snippet_7\n\nLANGUAGE: plaintext\nCODE:\n```\n44.228.126.217\n50.112.21.217\n52.24.126.164\n54.148.139.208\n2600:1f24:64:8000::/52\n```\n\n----------------------------------------\n\nTITLE: Styling the Avatars Component with CSS Modules\nDESCRIPTION: This CSS module provides styles for the `Avatars` component, including the container and individual avatars.  It includes styles for layout, appearance, and tooltip behavior on hover.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-monaco-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_16\n\nLANGUAGE: css\nCODE:\n```\n.avatars {\n  display: flex;\n  padding: 0 0.75rem;\n}\n\n.avatar {\n  display: flex;\n  place-content: center;\n  position: relative;\n  border: 4px solid #fff;\n  border-radius: 9999px;\n  width: 42px;\n  height: 42px;\n  background-color: #9ca3af;\n  margin-left: -0.75rem;\n}\n\n.avatar:before {\n  content: attr(data-tooltip);\n  position: absolute;\n  top: 100%;\n  opacity: 0;\n  transition: opacity 0.15s ease;\n  padding: 5px 10px;\n  color: white;\n  font-size: 0.75rem;\n  border-radius: 8px;\n  margin-top: 10px;\n  z-index: 1;\n  background: black;\n  white-space: nowrap;\n}\n\n.avatar:hover:before {\n  opacity: 1;\n}\n\n.avatar_picture {\n  width: 100%;\n  height: 100%;\n  border-radius: 9999px;\n}\n```\n\n----------------------------------------\n\nTITLE: Integrating the Editor into a Next.js Page\nDESCRIPTION: Imports and renders the collaborative editor component within the Liveblocks Room wrapper in a Next.js page file.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-quill-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Room } from \"./Room\";\nimport CollaborativeEditor from \"@/components/Editor\";\n\nexport default function Page() {\n  return (\n    <Room>\n      <CollaborativeEditor />\n    </Room>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Local State\nDESCRIPTION: Demonstrates how to set the current user's awareness state with a JSON-compatible object.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-yjs.mdx#2025-04-11_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\n// Set the current user's awareness\nawareness.setLocalState({\n  user: {\n    name: \"Jonathan\",\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Running Codemod for Simplifying ClientSideSuspense Children\nDESCRIPTION: This command runs a codemod to simplify the children prop of ClientSideSuspense components.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.0.mdx#2025-04-11_snippet_18\n\nLANGUAGE: bash\nCODE:\n```\nnpx @liveblocks/codemod@latest simplify-client-side-suspense-children\n```\n\n----------------------------------------\n\nTITLE: Configuring preventUnsavedChanges in JavaScript\nDESCRIPTION: Demonstrates how to enable the preventUnsavedChanges option when creating a Liveblocks client in JavaScript.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-emails/CHANGELOG.md#2025-04-11_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\ncreateClient({ preventUnsavedChanges: true })\n```\n\n----------------------------------------\n\nTITLE: Setting Up Liveblocks Authentication Endpoint with Next.js App Router\nDESCRIPTION: Creates an authentication endpoint using Next.js App Router to authenticate users with Liveblocks. The endpoint generates a session for the user, grants them access to a specific room, and returns authorization details.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-tiptap-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\nimport { NextRequest } from \"next/server\";\n\nconst API_KEY = \"{{SECRET_KEY}}\";\n\nconst liveblocks = new Liveblocks({\n  secret: API_KEY!,\n});\n\nexport async function POST(request: NextRequest) {\n  // Get the current user's info from your database\n  const user = {\n    id: \"charlielayne@example.com\",\n    info: {\n      name: \"Charlie Layne\",\n      color: \"#D583F0\",\n      picture: \"https://liveblocks.io/avatars/avatar-1.png\",\n    },\n  };\n\n  // Create a session for the current user\n  // userInfo is made available in Liveblocks presence hooks, e.g. useOthers\n  const session = liveblocks.prepareSession(user.id, {\n    userInfo: user.info,\n  });\n\n  // Give the user access to the room\n  const { room } = await request.json();\n  session.allow(room, session.FULL_ACCESS);\n\n  // Authorize the user and return the result\n  const { body, status } = await session.authorize();\n  return new Response(body, { status });\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Component-Specific Overrides for Liveblocks Composer\nDESCRIPTION: Demonstrates setting component-specific overrides that take precedence over global settings. This example shows how to customize placeholder text and button labels for a Composer component used for replying to threads.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_48\n\nLANGUAGE: tsx\nCODE:\n```\n<Composer\n  overrides={{\n    COMPOSER_PLACEHOLDER: \"Reply to thread…\",\n    COMPOSER_SEND: \"Reply\",\n  }}\n/>\n```\n\n----------------------------------------\n\nTITLE: Configuring Liveblocks Client with Custom Headers and Body\nDESCRIPTION: This advanced configuration shows how to pass custom headers and body data to the authentication endpoint using a callback function instead of a simple string URL.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/nuxtjs.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\n\n// Passing custom headers and body to your endpoint\nconst client = createClient({\n  authEndpoint: async (room) => {\n    const headers = {\n      // Custom headers\n      // ...\n\n      \"Content-Type\": \"application/json\",\n    };\n\n    const body = JSON.stringify({\n      // Custom body\n      // ...\n\n      room,\n    });\n\n    const response = await fetch(\"/api/liveblocks-auth\", {\n      method: \"POST\",\n      headers,\n      body,\n    });\n\n    return await response.json();\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using LiveblocksProvider Instead of createClient in Liveblocks 2.0\nDESCRIPTION: Demonstrates the transition from using createClient to using the new LiveblocksProvider component, which is part of the architectural improvements in Liveblocks 2.0.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-yjs/CHANGELOG.md#2025-04-11_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\n// ❌ Before\nconst client = createClient(/* options */);\n\n// ✅ After\n<LiveblocksProvider /* options */>\n  <App />\n</LiveblocksProvider>\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks WebhookHandler\nDESCRIPTION: Sets up the WebhookHandler with a secret key for verifying webhook requests.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/webhooks.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\n\n// Insert your webhook secret key\nconst webhookHandler = new WebhookHandler(\"whsec_...\");\n```\n\n----------------------------------------\n\nTITLE: Accessing Client ID\nDESCRIPTION: Demonstrates how to get the unique client identifier for the current awareness instance.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-yjs.mdx#2025-04-11_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\n// A unique number representing the current user\nconst clientId: number = awareness.clientId;\n```\n\n----------------------------------------\n\nTITLE: Using Pagination with useInboxNotifications Hook\nDESCRIPTION: Shows how to use the new pagination support in the useInboxNotifications hook, including new properties for fetching more data and checking loading status.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react-ui/CHANGELOG.md#2025-04-11_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nconst {\n  inboxNotifications,\n  isLoading,\n  error,\n\n  // ✨ New in Liveblocks 2.9\n  fetchMore,\n  isFetchingMore,\n  hasFetchedAll,\n  fetchMoreError,\n} = useInboxNotifications();\n```\n\n----------------------------------------\n\nTITLE: Configuring Prevent Unsaved Changes - React\nDESCRIPTION: This snippet demonstrates how to enable the `preventUnsavedChanges` option in a React application using the `<LiveblocksProvider />` component. This prevents browser tabs from being closed while local changes are not yet synchronized with the Liveblocks server.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-zustand/CHANGELOG.md#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\n\"<LiveblocksProvider preventUnsavedChanges />\"\n```\n\n----------------------------------------\n\nTITLE: Thread Object Structure in TypeScript\nDESCRIPTION: Example showing the structure of a thread object in Liveblocks, including its basic properties like ID, room ID, creation time, resolution status, and arrays for comments and metadata.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/concepts.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n{\n  type: \"thread\",\n  id: \"th_sf8s6sh...\",\n  roomId: \"my-room-id\",\n  createdAt: Date <Fri Dec 15 2023 14:15:22 GMT+0000 (Greenwich Mean Time)>,\n  resolved: false,\n  comments: [\n    // A list of comments in the thread\n    // ...\n  ],\n  metadata: {\n    // Your custom thread metadata\n    // ...\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Handling Webhook NotificationEvent Types\nDESCRIPTION: Demonstrates how to handle different types of NotificationEvent in webhooks, specifically for accessing thread-specific properties.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.0.mdx#2025-04-11_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nif (event.data.kind === \"thread\") {\n  const threadId = event.data.threadId;\n}\n```\n\n----------------------------------------\n\nTITLE: Using React Hook for User Notification Settings - TypeScript\nDESCRIPTION: This snippet shows the implementation of the useNotificationSettings hook from the Liveblocks React library for fetching and updating user notification settings. It is designed to handle both the retrieval and modification of settings in a user-friendly manner, encapsulating the process within the React component lifecycle.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-yjs/CHANGELOG.md#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n// A suspense version of this hook is available\\nimport { useNotificationSettings } from \"@liveblocks/react\";\\n\\nconst [{ isLoading, error, settings }, updateSettings] =\\n  useNotificationSettings();\\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\\nconsole.log(settings);\\n\\nconst onSave = () => {\\n  updateSettings({\\n    slack: {\\n      textMention: true,\\n    },\\n  });\\n};\n```\n\n----------------------------------------\n\nTITLE: Using Toolbar.Button in React with Liveblocks\nDESCRIPTION: Demonstrates how to use the Toolbar.Button component from the @liveblocks/react-lexical package. The button can display a name, icon, or custom content, and supports tooltips and keyboard shortcuts.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_10\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Toolbar } from \"@liveblocks/react-lexical\";\n\n<Toolbar>\n  <Toolbar.Button name=\"Question\" onClick={(e) => console.log(\"Clicked\")} />\n</Toolbar>;\n```\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Toolbar } from \"@liveblocks/react-lexical\";\nimport { Icon } from \"@liveblocks/react-ui\";\n\n// Button says \"Question\"\n<Toolbar.Toggle name=\"Question\" onClick={/* ... */} />\n\n// Tooltip says \"Question [⌘+Q]\"\n<Toolbar.Button name=\"Question\" shortcut=\"CMD+Q\" onClick={/* ... */} />\n\n// Custom icon, replaces the name in the button\n<Toolbar.Button name=\"Question\" icon={<div>?</div>} onClick={/* ... */} />\n\n// Using a Liveblocks icon, replaces the name in the button\n<Toolbar.Button name=\"Question\" icon={<Icon.QuestionMark />} onClick={/* ... */} />\n\n// Passing children visually replaces the `name` and `icon`\n<Toolbar.Button name=\"Question\" onClick={/* ... */}>\n  ? Ask a question\n</Toolbar.Button>\n\n// Props are passed to the inner `button`\n<Toolbar.Button\n  name=\"Question\"\n  style={{ marginLeft: 10 }}\n  className=\"custom-button\"\n  onMouseOver={() => console.log(\"Hovered\")}\n/>\n```\n\n----------------------------------------\n\nTITLE: Resolving User and Room Data for Thread Notification Emails in React\nDESCRIPTION: This code demonstrates how to resolve user IDs and room information when preparing thread notification emails with Liveblocks. It fetches user data from a database and formats it for display in the email, including names and avatars. It also shows how to provide room information with custom URLs.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-emails.mdx#2025-04-11_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\nconst emailData = await prepareThreadNotificationEmailAsHtml(\n  liveblocks,\n  webhookEvent,\n  {\n    // +++\n    resolveUsers: async ({ userIds }) => {\n      const usersData = await __getUsersFromDB__(userIds);\n\n      return usersData.map((userData) => ({\n        name: userData.name, // \"Nimesh\"\n        avatar: userData.avatar.src, // \"https://...\"\n      }));\n    },\n    resolveRoomInfo({ roomId }) {\n      return {\n        name: roomId, // \"my-room-name\"\n        url: `https://example.com/${roomId}`,\n      };\n    },\n    // +++\n  }\n);\n\n// { type: \"unreadMention\", comment: { ... }, ... }\nconsole.log(emailData);\n\n// { name: \"Nimesh\", avatar: \"https://...\" }\nconsole.log(emailData.comment.author.info);\n\n// { name: \"my-room-name\", url: \"https://example.com/my-room-name\" }\nconsole.log(emailData.roomInfo);\n```\n\n----------------------------------------\n\nTITLE: Implementing Composer Suggestions List in React\nDESCRIPTION: Renders a list of user suggestions within Composer.Editor. Maps through userIds to display suggestion items.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_16\n\nLANGUAGE: tsx\nCODE:\n```\n<Composer.SuggestionsList>\n  {userIds.map((userId) => (\n    <Composer.SuggestionsListItem key={userId} value={userId}>\n      @{userId}\n    </Composer.SuggestionsListItem>\n  ))}\n</Composer.SuggestionsList>\n```\n\n----------------------------------------\n\nTITLE: Creating Liveblocks Room with Permissions\nDESCRIPTION: Demonstrates how to create a Liveblocks room with optional permission settings for ID tokens. The room is the container where comments will be stored.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-migrate-to-liveblocks-comments.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst roomId = \"my-room-id\";\n\nconst room = await liveblocks.createRoom(roomId, {\n  defaultAccesses: [\n    // \"room:write\"`\n  ],\n  // groupsAccesses: {\n  //   my-group: [\"room:write\"]\n  // }\n  // usersAccesses: {\n  //   my-user: [\"room:write\"]\n  // }\n});\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Canvas Comments Example\nDESCRIPTION: Command to create a new Liveblocks application with the canvas comments example template. This will download the example and help set up the API key through browser authentication.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-comments-canvas/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-comments-canvas --api-key\n```\n\n----------------------------------------\n\nTITLE: Creating Custom Block Selector Items in React-Lexical\nDESCRIPTION: Demonstrates how to create custom block selector items using isBlockNodeActive helper with Toolbar.BlockSelector component.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_43\n\nLANGUAGE: tsx\nCODE:\n```\n//+++\nimport { isBlockNodeActive, Toolbar } from \"@liveblocks/react-lexical\";\n// +++\nimport { $setBlocksType } from \"@lexical/selection\";\nimport { $isCodeNode } from \"@lexical/code\";\nimport { $getSelection } from \"lexical\";\n\n<Toolbar>\n  <Toolbar.BlockSelector\n    items={(defaultItems) => [\n      ...defaultItems,\n      {\n        name: \"Code block\",\n        icon: <div>❮ ❯</div>,\n        // +++\n        isActive: (editor) => isBlockNodeActive(editor, $isCodeNode),\n        // +++\n        setActive: (editor) =>\n          $setBlocksType($getSelection(), () => $createCodeNode()),\n      },\n    ]}\n  />\n</Toolbar>;\n```\n\n----------------------------------------\n\nTITLE: Clearing ProseMirror Document Content\nDESCRIPTION: Demonstrates how to clear the content of a ProseMirror document using api.clearContent. This removes all content from the document.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-node-prosemirror.mdx#2025-04-11_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nawait withProsemirrorDocument(\n  { roomId: \"my-room-id\", client: liveblocks },\n  async (api) => {\n    // +++\n    return api.clearContent();\n    // +++\n  }\n);\n```\n\n----------------------------------------\n\nTITLE: Accessing Thread Creation Date in Liveblocks 1.8\nDESCRIPTION: This code snippet demonstrates how to access the createdAt property of a thread in Liveblocks 1.8, where the date is returned as a string.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/1.9.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n// ❌ Before - Liveblocks 1.8\nconst { threads } = useThreads();\n\n// \"2023-12-15T14:15:22Z\"\nconsole.log(threads[0].createdAt);\n```\n\n----------------------------------------\n\nTITLE: Setting Metadata Type in Liveblocks Config File\nDESCRIPTION: Demonstrates how to set the metadata type in the Liveblocks config file for better type checking and autocompletion.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/metadata.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare global {\n  interface Liveblocks {\n    // +++\n    ThreadMetadata: {\n      priority: string;\n      pinned: boolean;\n      timestamp: number;\n    };\n    // +++\n\n    // ...\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Next.js for Slate-YJS\nDESCRIPTION: Next.js configuration to enable proper bundling of @slate-yjs/react package using transpilePackages option.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-slate-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nmodule.exports = {\n  transpilePackages: [\"@slate-yjs/react\"],\n\n  // ...\n};\n```\n\n----------------------------------------\n\nTITLE: Filtering Threads by Absence of Metadata in Liveblocks React\nDESCRIPTION: Demonstrates how to filter threads that do not have a specific metadata attribute set using the useThreads hook.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_11\n\nLANGUAGE: TypeScript\nCODE:\n```\nuseThreads({\n  query: {\n    // Filter any \"pinned\" threads that don't have a color set\n    metadata: {\n      pinned: true,\n      color: null,\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Converting ProseMirror Document to Markdown\nDESCRIPTION: Uses api.toMarkdown to convert a ProseMirror document to markdown format. This is useful for exporting documents to a portable text format.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-node-prosemirror.mdx#2025-04-11_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nconst markdown = await withProsemirrorDocument(\n  { roomId: \"my-room-id\", client: liveblocks },\n  async (api) => {\n    // +++\n    return api.toMarkdown();\n    // +++\n  }\n);\n```\n\n----------------------------------------\n\nTITLE: Creating Custom Toolbar Button\nDESCRIPTION: Implementation of a custom toolbar button with icon, name, shortcut, and click handler.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/text-editor/lexical.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nfunction CustomButton() {\n  return (\n    // +++\n    <Toolbar.Button\n      name=\"Help\"\n      icon={<Icon.QuestionMark />}\n      shortcut=\"CMD-H\"\n      onClick={() => console.log(\"help\")}\n    />\n    // +++\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: RoomDeletedEvent Schema and Example in TypeScript\nDESCRIPTION: This snippet defines the TypeScript schema for the RoomDeletedEvent and provides an example of the event object. This event is triggered when a room is deleted.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/webhooks.mdx#2025-04-11_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\n// Schema\ntype RoomDeletedEvent = {\n  type: \"roomDeleted\";\n  data: {\n    projectId: string;\n    roomId: string;\n    deletedAt: string;\n  };\n};\n\n// Example\nconst roomDeletedEvent = {\n  type: \"roomDeleted\",\n  data: {\n    projectId: \"my-project-id\",\n    roomId: \"my-room-id\",\n    deletedAt: \"2021-10-06T01:45:56.558Z\",\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Example TextMentionNotificationEvent payload in TypeScript\nDESCRIPTION: Provides an example payload for the TextMentionNotificationEvent, illustrating the structure and values of the event data. Includes sample values for all the properties defined in the schema, such as projectId, roomId, userId, mentionId, inboxNotificationId, and createdAt.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/webhooks.mdx#2025-04-11_snippet_31\n\nLANGUAGE: typescript\nCODE:\n```\nconst textMentionNotificationEvent = {\n  type: \"notification\",\n  data: {\n    channel: \"email\",\n    kind: \"textMention\",\n    projectId: \"my-project-id\",\n    roomId: \"my-room-id\",\n    userId: \"my-user-id\",\n    mentionId: \"my-mention-id\",\n    inboxNotificationId: \"my-inbox-notification-id\",\n    createdAt: \"2021-10-06T01:45:56.558Z\",\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Node Package\nDESCRIPTION: Command to install the @liveblocks/node package in your Firebase functions project, which is required for setting up authentication.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/firebase.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/node\n```\n\n----------------------------------------\n\nTITLE: Customizing Toolbar.BlockSelector Item Styles in React-Tiptap\nDESCRIPTION: Demonstrates how to customize the styles of individual items in the Toolbar.BlockSelector dropdown by using the 'label' property.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_13\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Toolbar } from \"@liveblocks/react-tiptap\";\n\n<Toolbar editor={editor}>\n  <Toolbar.BlockSelector\n    items={(defaultItems) => [\n      ...defaultItems,\n      {\n        name: \"Code block\",\n        // +++\n        label: <div className=\"font-mono\">Code</div>, // Optional, overwrites `icon` + `name`\n        // +++\n        isActive: (editor) => editor.isActive(\"codeBlock\"),\n        setActive: (editor) =>\n          editor.chain().focus().clearNodes().toggleCodeBlock().run(),\n      },\n    ]}\n  />\n</Toolbar>;\n```\n\n----------------------------------------\n\nTITLE: Full Next.js Route Handler for Thread Notification Emails\nDESCRIPTION: This snippet provides a complete example of a Next.js route handler that processes webhook events, verifies them, and uses prepareThreadNotificationEmailAsReact to generate email content for thread notifications. It demonstrates error handling and the full flow of processing a webhook event.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-emails.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { isThreadNotificationEvent, WebhookHandler } from \"@liveblocks/node\";\nimport { Liveblocks } from \"@liveblocks/node\";\n// +++\nimport { prepareThreadNotificationEmailAsReact } from \"@liveblocks/emails\";\n// +++\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nconst webhookHandler = new WebhookHandler(\n  process.env.LIVEBLOCKS_WEBHOOK_SECRET_KEY as string\n);\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Verify if this is a real webhook request\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  // +++\n  if (isThreadNotificationEvent(event)) {\n    const emailData = await prepareThreadNotificationEmailAsReact(\n      liveblocks,\n      event\n    );\n    let email;\n\n    switch (emailData.type) {\n      case \"unreadMention\": {\n        email = (\n          <div>\n            <div>\n              @{emailData.comment.author.id} at {emailData.comment.createdAt}\n            </div>\n            <div>{emailData.comment.body}</div>\n          </div>\n        );\n        break;\n      }\n\n      case \"unreadReplies\": {\n        email = (\n          <div>\n            {emailData.comments.map((comment) => (\n              <div key={comment.id}>\n                <div>\n                  @{comment.author.id} at {comment.createdAt}\n                </div>\n                <div>{comment.body}</div>\n              </div>\n            ))}\n          </div>\n        );\n        break;\n      }\n    }\n\n    // Send your email\n    // ...\n  }\n  // +++\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Next.js Page with Room\nDESCRIPTION: Next.js page setup showing how to integrate the Liveblocks Room component with an Editor component.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-tiptap.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Room } from \"./Room\";\nimport { Editor } from \"./Editor\";\n\nexport default function Page() {\n  return (\n    <Room>\n      <Editor/>\n    </Room>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Cursor Tracking in React Component\nDESCRIPTION: This code snippet shows how to set up a div element that spans the entire viewport and attaches the pointer move and leave event handlers for cursor tracking.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/updating-presence/guide.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nreturn (\n  <div\n    style={{ width: \"100vw\", height: \"100vh\" }}\n    onPointerMove={handlePointerMove}\n    onPointerLeave={handlePointerLeave}\n  >\n    Cursor: {JSON.stringify(myPresence.cursor)}\n  </div>\n);\n```\n\n----------------------------------------\n\nTITLE: Initializing LiveList Storage in React Component\nDESCRIPTION: Sets up the initial storage for a React component using Liveblocks, creating a LiveList of people with one initial person.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/nesting-data-types/guide.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\ninitialStorage={{\n  people: new LiveList([\n    new LiveObject({ name: \"Marie\", age: 30 })\n  ]),\n}}\n```\n\n----------------------------------------\n\nTITLE: Creating a Zustand store with Liveblocks in version 0.19\nDESCRIPTION: Updated pattern for creating a Zustand store with Liveblocks middleware in version 0.19, using the WithLiveblocks type wrapper.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/0.19.mdx#2025-04-11_snippet_8\n\nLANGUAGE: ts\nCODE:\n```\ncreate<WithLiveblocks<MyState, ...>>()(liveblocks(...))\n```\n\n----------------------------------------\n\nTITLE: Accessing Other Users in a Liveblocks Room with Zustand\nDESCRIPTION: This snippet demonstrates how to access the other users in a Liveblocks room using the Zustand store. The 'liveblocks.others' property provides an array of all other users connected to the room.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-presence-with-zustand.mdx#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport useStore from \"./store\";\n\nfunction YourComponent() {\n  useStore((state) => state.liveblocks.others);\n}\n```\n\n----------------------------------------\n\nTITLE: Defining ThreadMarkedAsUnresolvedEvent schema in TypeScript\nDESCRIPTION: Defines the schema for the ThreadMarkedAsUnresolvedEvent, triggered when a thread is marked as unresolved in Liveblocks. The event includes information about the project, room, thread, update timestamp, and the user who unresolved the thread. This event is not throttled.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/webhooks.mdx#2025-04-11_snippet_26\n\nLANGUAGE: typescript\nCODE:\n```\ntype ThreadMarkedAsUnresolvedEvent = {\n  type: \"threadMarkedAsUnresolved\";\n  data: {\n    projectId: string;\n    roomId: string;\n    threadId: string;\n    updatedAt: string;\n    updatedBy: string;\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Getting Yjs Document Reference\nDESCRIPTION: Shows how to access the Yjs document attached to the awareness instance.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-yjs.mdx#2025-04-11_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\n// The current Yjs document\nconst yDoc: Y.Doc = awareness.doc;\n```\n\n----------------------------------------\n\nTITLE: Updating Component Imports and Type Annotations in React\nDESCRIPTION: This snippet demonstrates how to update component imports and remove explicit type annotations when using Liveblocks hooks in React components. It shows the transition from v0.16 to v0.17 syntax.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/0.17.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useMyPresence, useOthers, useObject } from \"@liveblocks/react\";\nimport { Author } from \"./types\";\n\ntype MyPresence = {\n  cursor: { x: number; y: number } | null;\n};\n\nfunction Component() {\n  const author = useObject<Author>(\"author\");\n  const [{ cursor }] = useMyPresence<MyPresence>();\n  const others = useOthers<Presence>();\n}\n```\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useMyPresence, useOthers, useObject } from \"./liveblocks.config\";\n\nfunction Component() {\n  const author = useObject(\"author\");\n  const [{ cursor }] = useMyPresence();\n  const others = useOthers();\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Liveblocks Client in Frontend\nDESCRIPTION: Updates the frontend Liveblocks configuration to use the new authentication endpoint.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/1.2.mdx#2025-04-11_snippet_7\n\nLANGUAGE: ts\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\n\nconst client = createClient({\n  authEndpoint: \"/api/liveblocks-auth\",\n});\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Configuration File\nDESCRIPTION: Command to create a liveblocks.config.ts file that will be used for defining types for the application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-notifications.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework react\n```\n\n----------------------------------------\n\nTITLE: Getting Local State\nDESCRIPTION: Shows how to retrieve the current user's awareness state.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-yjs.mdx#2025-04-11_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\n// The current user's awareness\nconst localState: unknown = awareness.getLocalState();\n```\n\n----------------------------------------\n\nTITLE: Implementing Typing Indicator with useUpdateMyPresence\nDESCRIPTION: Code that updates and tracks the typing status of users using Liveblocks presence features. It handles user input events to update their typing status in real-time.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-react-and-liveblocks.mdx#2025-04-11_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n  ClientSideSuspense,\n  useOthers,\n  useUpdateMyPresence,\n} from \"@liveblocks/react/suspense\";\nimport { useState } from \"react\";\n\n/* WhoIsHere */\n\nfunction TodoList() {\n  const [draft, setDraft] = useState(\"\");\n  const updateMyPresence = useUpdateMyPresence();\n\n  return (\n    <div className=\"container\">\n      <WhoIsHere />\n      <input\n        type=\"text\"\n        placeholder=\"What needs to be done?\"\n        value={draft}\n        onChange={(e) => {\n          setDraft(e.target.value);\n          updateMyPresence({ isTyping: true });\n        }}\n        onKeyDown={(e) => {\n          if (e.key === \"Enter\") {\n            updateMyPresence({ isTyping: false });\n            setDraft(\"\");\n          }\n        }}\n        onBlur={() => updateMyPresence({ isTyping: false })}\n      />\n    </div>\n  );\n}\n\n/* Page */\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Config File\nDESCRIPTION: Command to initialize the Liveblocks configuration file for a React project, which will set up the Liveblocks client.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-lexical-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework react\n```\n\n----------------------------------------\n\nTITLE: Managing User Notification Settings with @liveblocks/node\nDESCRIPTION: Demonstrates how to use the new methods in the Node.js client to manage user notification settings. It shows how to get, update, and delete notification settings for a user.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/create-liveblocks-app/CHANGELOG.md#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\nconst liveblocks = new Liveblocks({ secret: \"sk_xxx\" });\n\nconst settings = await liveblocks.getNotificationSettings({ userId });\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst updatedSettings = await liveblocks.updateNotificationSettings({\n  userId,\n  data: {\n    teams: {\n      $fileUploaded: true,\n    },\n  },\n});\nawait liveblocks.deleteNotificationSettings({ userId });\n```\n\n----------------------------------------\n\nTITLE: Creating a New Thread with Composer Component in React\nDESCRIPTION: This example shows how to use the Composer component to create a new thread. It simply imports the Composer component and renders it, which by default will create a new thread when the form is submitted.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/default-components.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Composer } from \"@liveblocks/react-ui\";\n\n// Creates a new thread\nfunction Component() {\n  return <Composer />;\n}\n```\n\n----------------------------------------\n\nTITLE: Before/After Comparison of Client Creation in TypeScript\nDESCRIPTION: Example showing how client creation has changed in Liveblocks 2.0. Previously a client was created directly, now the LiveblocksProvider component is used.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-redux/CHANGELOG.md#2025-04-11_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\n// ❌ Before\nconst client = createClient(/* options */);\n\n// ✅ After\n<LiveblocksProvider /* options */>\n  <App />\n</LiveblocksProvider>\n```\n\n----------------------------------------\n\nTITLE: Setting up Liveblocks Authentication in Next.js Pages API\nDESCRIPTION: Creates an authentication endpoint for Liveblocks in Next.js Pages API format that prepares a session for the current user, gives them access to a room, and authorizes them.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-quill-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\nimport type { NextApiRequest, NextApiResponse } from \"next\";\n\nconst API_KEY = \"{{SECRET_KEY}}\";\n\nconst liveblocks = new Liveblocks({\n  secret: API_KEY!,\n});\n\nexport default async function handler(\n  request: NextApiRequest,\n  response: NextApiResponse\n) {\n  // Get the current user's info from your database\n  const user = {\n    id: \"charlielayne@example.com\",\n    info: {\n      name: \"Charlie Layne\",\n      color: \"#D583F0\",\n      picture: \"https://liveblocks.io/avatars/avatar-1.png\",\n    },\n  };\n\n  // Create a session for the current user\n  // userInfo is made available in Liveblocks presence hooks, e.g. useOthers\n  const session = liveblocks.prepareSession(user.id, {\n    userInfo: user.info,\n  });\n\n  // Give the user access to the room\n  const { room } = request.body;\n  session.allow(room, session.FULL_ACCESS);\n\n  // Authorize the user and return the result\n  const { status, body } = await session.authorize();\n  response.status(status).send(body);\n}\n```\n\n----------------------------------------\n\nTITLE: Renaming @liveblocks/react-comments to @liveblocks/react-ui\nDESCRIPTION: Shows how to update imports and component names after the package rename from @liveblocks/react-comments to @liveblocks/react-ui.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.0.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Thread } from \"@liveblocks/react-ui\";\n\n// Component rename\n<LiveblocksUIConfig />\n```\n\n----------------------------------------\n\nTITLE: Updating @liveblocks/node Client Methods\nDESCRIPTION: Shows how to update client methods from @liveblocks/node that no longer accept type parameters, using global type augmentation instead.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.0.mdx#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nawait liveblocks.createThread();\nawait liveblocks.editThreadMetadata();\nawait liveblocks.getThreads();\nawait liveblocks.getThread();\n\n// In liveblocks.config.ts\ndeclare global {\n  interface Liveblocks {\n    ThreadMetadata: MyThreadMetadata;\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Storage Type in Liveblocks Configuration\nDESCRIPTION: This snippet shows how to define the storage type in the liveblocks.config.ts file using a LiveObject with a specific structure for a 'person' object.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/storage/guide.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// Storage type\nStorage: {\n  person: LiveObject<{\n    name: string;\n    age: number;\n  }>;\n}\n```\n\n----------------------------------------\n\nTITLE: Complete Webhook Handler with Event Processing\nDESCRIPTION: Full implementation of a webhook handler including verification and processing of specific events (threadCreated). Demonstrates integration with Liveblocks API for thread retrieval.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-test-webhooks-on-localhost.mdx#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\nimport { Liveblocks } from \"@liveblocks/node\";\n\n// Add your webhook secret key from a project's webhooks dashboard\nconst WEBHOOK_SECRET = \"YOUR_WEBHOOK_SECRET\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\n// Add your secret key from a project's API keys dashboard\nconst API_SECRET = \"{{SECRET_KEY}}\";\nconst liveblocks = new Liveblocks({ secret: API_SECRET });\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Verify if this is a real webhook request\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  // When a new thread has been created\n  if (event.type === \"threadCreated\") {\n    const { roomId, threadId } = event.data;\n\n    // Fetch new thread\n    const thread = await liveblocks.getThread({ roomId, threadId });\n\n    // Use thread\n    // ...\n  }\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Using getSyncStatus in TypeScript\nDESCRIPTION: Example of using the new getSyncStatus() method from @liveblocks/client to check synchronization status.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node/CHANGELOG.md#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nclient.getSyncStatus()\n```\n\n----------------------------------------\n\nTITLE: Exporting Regular Hooks in Liveblocks Configuration\nDESCRIPTION: Demonstrates how to export regular (non-Suspense) versions of Liveblocks hooks from the configuration file for use in components.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/notifications/hooks.mdx#2025-04-11_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\n// ...\n\nexport const {\n  // Export from here to use regular hooks\n  useInboxNotifications,\n  useUser,\n} = createLiveblocksContext(client, {});\n```\n\n----------------------------------------\n\nTITLE: Installing Dependencies for Liveblocks and CodeMirror\nDESCRIPTION: Command to install necessary packages including Liveblocks client, React integration, Yjs, CodeMirror, and related dependencies.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-codemirror-react.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/react @liveblocks/yjs yjs codemirror @codemirror/lang-javascript y-codemirror.next\n```\n\n----------------------------------------\n\nTITLE: Using React Hooks for Notification Settings Management\nDESCRIPTION: Illustrates how to use React hooks from @liveblocks/react to retrieve and update user notification settings with support for different notification channels\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react-ui/CHANGELOG.md#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useNotificationSettings } from \"@liveblocks/react\";\n\nconst [{ isLoading, error, settings }, updateSettings] =\n  useNotificationSettings();\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst onSave = () => {\n  updateSettings({\n    slack: {\n      textMention: true,\n    },\n  });\n};\n```\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useUpdateNotificationSettings } from \"@liveblocks/react\";\n\nconst updateSettings = useUpdateNotificationSettings();\n\nconst onUnsubscribe = () => {\n  updateSettings({\n    slack: {\n      thread: false,\n    },\n  });\n};\n```\n\n----------------------------------------\n\nTITLE: Manually Constructing Liveblocks Webhook Signed Content\nDESCRIPTION: Shows how to manually construct the signed content for webhook verification using Node.js crypto module.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/webhooks.mdx#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nconst crypto = require(\"crypto\");\n\n// webhookId comes from the `webhook-id` header\n// webhookTimestamp comes from the `webhook-timestamp` header\n// body is the request body\nsignedContent = `${webhookId}.${webhookTimestamp}.${body}`;\n```\n\n----------------------------------------\n\nTITLE: Setting Initial Presence in React RoomProvider\nDESCRIPTION: This code sets the initial presence value in the App.tsx file using the RoomProvider component. It initializes the cursor to null, indicating no cursor is on-screen initially.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/presence/guide.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n<RoomProvider id={roomId} initialPresence={{ cursor: null }}>\n```\n\n----------------------------------------\n\nTITLE: Real-world Implementation of resolveMentionSuggestions with Filtering\nDESCRIPTION: A practical example showing how to implement resolveMentionSuggestions by fetching all users and filtering based on search text. This approach handles both empty searches and specific queries for user mentions.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-add-users-to-liveblocks-comments.mdx#2025-04-11_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\n<LiveblocksProvider\n  resolveUsers={async ({ userIds }) => {\n    // ...\n  }}\n  resolveMentionSuggestions={async ({ text, roomId }) => {\n    // Fetch all users from your back end\n    let users = await __fetchAllUsers__();\n\n    // If there's a query, filter for the relevant users\n    if (text) {\n      // Filter any way you'd like, e.g. checking if the name matches\n      users = users.filter((user) => user.name.includes(text));\n    }\n\n    // Return the filtered `userIds`\n    return users.map((user) => user.id);\n  }}\n\n  // ...\n/>;\n```\n\n----------------------------------------\n\nTITLE: Styling the collaborative text editor with CSS\nDESCRIPTION: CSS styling for the editor and thread components, including responsive design for both desktop and mobile views. Includes positioning, sizing, and visibility rules.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-blocknote.mdx#2025-04-11_snippet_6\n\nLANGUAGE: css\nCODE:\n```\nhtml {\n  font-family: Inter, sans-serif;\n  background: #f9f9f9;\n}\n\n@media (prefers-color-scheme: dark) {\n  html {\n    background: #0c0c0c;\n  }\n}\n\n.editor {\n  position: absolute;\n  inset: 0;\n  max-width: 1024px;\n  margin: 0 auto;\n  padding: 48px 0;\n}\n\n.bn-editor {\n  padding: 36px 52px;\n  min-height: 100%;\n}\n\n/* For mobile */\n.floating-threads {\n  display: none;\n}\n\n/* For desktop */\n.anchored-threads {\n  display: block;\n  max-width: 300px;\n  width: 100%;\n  position: absolute;\n  right: 12px;\n}\n\n@media (max-width: 640px) {\n  .floating-threads {\n    display: block;\n  }\n\n  .anchored-threads {\n    display: none;\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Managing User Notification Settings with @liveblocks/node\nDESCRIPTION: Demonstrates how to use new methods in the Node.js client to manage user notification settings, including getting, updating, and deleting settings.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-zustand/CHANGELOG.md#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\nconst liveblocks = new Liveblocks({ secret: \"sk_xxx\" });\n\nconst settings = await liveblocks.getNotificationSettings({ userId });\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst updatedSettings = await liveblocks.updateNotificationSettings({\n  userId,\n  data: {\n    teams: {\n      $fileUploaded: true,\n    },\n  },\n});\nawait liveblocks.deleteNotificationSettings({ userId });\n```\n\n----------------------------------------\n\nTITLE: User and Room Data Resolution Example\nDESCRIPTION: Example demonstrating how to resolve user and room information when preparing email content.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-emails.mdx#2025-04-11_snippet_18\n\nLANGUAGE: tsx\nCODE:\n```\nconst emailData = await prepareTextMentionNotificationEmailAsHtml(\n  liveblocks,\n  webhookEvent,\n  {\n    resolveUsers: async ({ userIds }) => {\n      const usersData = await __getUsersFromDB__(userIds);\n\n      return usersData.map((userData) => ({\n        name: userData.name,\n        avatar: userData.avatar.src,\n      }));\n    },\n    resolveRoomInfo({ roomId }) {\n      return {\n        name: roomId,\n        url: `https://example.com/${roomId}`,\n      };\n    },\n  }\n);\n```\n\n----------------------------------------\n\nTITLE: Attaching User Metadata in Authentication Endpoint\nDESCRIPTION: This code shows how to attach user metadata when identifying a user in the Liveblocks authentication endpoint.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/remix.mdx#2025-04-11_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\n// Get the current user from your database\nconst user = __getUserFromDB__(request);\n\n// Identify the user and return the result\nconst { status, body } = await liveblocks.identifyUser(\n  {\n    userId: user.id,\n    groupIds, // Optional\n  },\n  {\n    userInfo: {\n      name: user.name,\n      avatar: user.avatarUrl,\n      colors: user.colorArray,\n    }\n  },\n);\n```\n\n----------------------------------------\n\nTITLE: Getting Connection Status with room.getStatus() - TypeScript\nDESCRIPTION: This snippet demonstrates the use of the method room.getStatus() to retrieve the current status of the WebSocket connection. The statuses can be 'initial', 'connecting', 'connected', 'reconnecting', or 'disconnected'.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_25\n\nLANGUAGE: typescript\nCODE:\n```\nroom.getStatus();\n```\n\n----------------------------------------\n\nTITLE: Subscribing to Errors in Liveblocks Client\nDESCRIPTION: This code snippet shows how to subscribe to error events using the Liveblocks client.  It demonstrates that the error listener will now also receive errors related to Comments & Notifications in addition to the room connection errors it previously received. This can be helpful for monitoring and handling errors related to the Liveblocks platform.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-emails/CHANGELOG.md#2025-04-11_snippet_6\n\nLANGUAGE: ts\nCODE:\n```\n// 👌 Same as before, but might now also receive errors related to Comments & Notifications\nroom.subscribe(\"error\", (err) => { ... });\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks 0.17 packages\nDESCRIPTION: Command to install the latest versions of @liveblocks/client and @liveblocks/react packages.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/0.17.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client@0.17 @liveblocks/react@0.17\n```\n\n----------------------------------------\n\nTITLE: Customizing Email Templates with User Resolution and Component Styling\nDESCRIPTION: Shows how to customize email templates by resolving user data and adding styled React components for mentions and other elements.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/email-notifications.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nconst emailData = await prepareThreadNotificationEmailAsReact(\n  liveblocks,\n  event,\n  {\n    // +++\n    resolveUsers: async ({ userIds }) => {\n      const usersData = await __getUsersFromDB__(userIds);\n\n      return usersData.map((userData) => ({\n        name: userData.name,\n        avatar: userData.avatar.src,\n      }));\n    },\n    // +++\n    // ...\n    components: {\n      // `user` is the optional data returned from `resolveUsers`\n      // +++\n      Mention: ({ element, user }) => (\n        <span style={{ color: \"red\" }}>@{user.name}</span>\n      ),\n      // +++\n\n      // ...\n    },\n  }\n);\n```\n\n----------------------------------------\n\nTITLE: Using Client Methods for User Notification Settings in TypeScript\nDESCRIPTION: Example code demonstrating how to use the client methods to get and update user notification settings. This snippet shows how to create a client and interact with notification preferences.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createClient } from '@liveblocks/client'\nconst client = createClient({ ... })\n\nconst settings = await client.getNotificationSettings();\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst updatedSettings = await client.updateNotificationSettings({\n  email: {\n    thread: false,\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Resolving User and Room Data for Thread Notification Emails in TypeScript/React\nDESCRIPTION: Demonstrates how to resolve user data and room information when preparing thread notification emails. Uses async functions to fetch user details and transform them into the required format, while also providing room information with custom URLs.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-emails.mdx#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nconst emailData = await prepareThreadNotificationEmailAsReact(\n  liveblocks,\n  webhookEvent,\n  {\n    // +++\n    resolveUsers: async ({ userIds }) => {\n      const usersData = await __getUsersFromDB__(userIds);\n\n      return usersData.map((userData) => ({\n        name: userData.name, // \"Nimesh\"\n        avatar: userData.avatar.src, // \"https://...\"\n      }));\n    },\n    resolveRoomInfo({ roomId }) {\n      return {\n        name: roomId, // \"my-room-name\"\n        url: `https://example.com/${roomId}`,\n      };\n    },\n    // +++\n  }\n);\n\n// { type: \"unreadMention\", comment: { ... }, ... }\nconsole.log(emailData);\n\n// { name: \"Nimesh\", avatar: \"https://...\" }\nconsole.log(emailData.comment.author.info);\n\n// { name: \"my-room-name\", url: \"https://example.com/my-room-name\" }\nconsole.log(emailData.roomInfo);\n```\n\n----------------------------------------\n\nTITLE: Liveblocks Authorization Configuration\nDESCRIPTION: Implementation of the authorization endpoint that handles user identification differently in test environments versus production\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/plans.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default async function auth(req, res) {\n  const room = req.body.room;\n  const response = await authorize({\n    room,\n    secret,\n    userId:\n      process.env.NODE_ENV === \"test\" ? process.env.TEST_USERID : \"user123\",\n  });\n  return res.status(response.status).end(response.body);\n}\n```\n\n----------------------------------------\n\nTITLE: Custom Toolbar with Mixed Components\nDESCRIPTION: Example of combining default toolbar components with custom buttons using Toolbar.Button and Toolbar.Toggle components.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_25\n\nLANGUAGE: tsx\nCODE:\n```\nimport { FloatingToolbar, Toolbar } from \"@liveblocks/react-tiptap\";\nimport { Icon } from \"@liveblocks/react-ui\";\nimport { Editor } from \"@tiptap/react\";\n\nfunction CustomToolbar({ editor }: { editor: Editor | null }) {\n  return (\n    <FloatingToolbar editor={editor}>\n      <Toolbar.SectionHistory />\n      <Toolbar.Separator />\n      <Toolbar.Button\n        name=\"Help\"\n        icon={<Icon.QuestionMark />}\n        shortcut=\"CMD-H\"\n        onClick={() => console.log(\"help\")}\n      />\n      <Toolbar.Toggle\n        name=\"Highlight\"\n        icon={<div>🖊️</div>}\n        active={editor?.isActive(\"highlight\") ?? false}\n        onClick={() => editor?.chain().focus().toggleHighlight().run()}\n        disabled={!editor?.can().chain().focus().toggleHighlight().run()}\n      />\n    </FloatingToolbar>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Sending Email Notification in TypeScript\nDESCRIPTION: Example of sending an email notification to a user based on the inbox notification data. This snippet shows how to construct and send a basic email using a hypothetical email sending function.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/notifications/email-notifications.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst emailAddress = __getUserEmail__(userId);\n\n// Send email to the user that received the inbox notification\n__sendEmail__({\n  from: \"hello@my-company.com\",\n  to: emailAddress,\n  title: \"New notification\",\n  html: `\n    <h1>New notification</h1>\n    <a href=\"...\">Learn more</a>\n  `,\n});\n```\n\n----------------------------------------\n\nTITLE: Error Listener Usage in @liveblocks/react\nDESCRIPTION: Demonstrates the updated error listener API in @liveblocks/react, which now requires LiveblocksProvider and notifies about errors for any room.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-zustand/CHANGELOG.md#2025-04-11_snippet_4\n\nLANGUAGE: ts\nCODE:\n```\nuseErrorListener((err: LiveblocksError) => {\n  /* show toast, or notify Sentry, Datadog, etc */\n});\n```\n\n----------------------------------------\n\nTITLE: Passing AbortSignal to Node Client Methods\nDESCRIPTION: Example demonstrating how to pass an optional AbortSignal to Node client methods for cancellation control.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst abortController = new AbortController();\nclient.someMethod(params, { signal: abortController.signal });\n```\n\n----------------------------------------\n\nTITLE: Rendering Example Cards for Liveblocks Sync Datastore Implementations\nDESCRIPTION: This JSX code snippet displays a grid of example cards showcasing various implementations of Liveblocks Sync Datastore. It uses the ExampleCard component to render information about each example, including title, image, supported technologies, and links. The examples cover different collaborative features and frameworks.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/sync-datastore.mdx#2025-04-11_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n<ListGrid columns={2}>\n  <ExampleCard\n    example={{\n      title: \"Live Avatar Stack\",\n      slug: \"live-avatar-stack\",\n      image: \"/images/examples/thumbnails/live-avatar-stack.jpg\",\n    }}\n    technologies={[\"nextjs\", \"nuxtjs\", \"vuejs\", \"sveltekit\", \"solidjs\"]}\n    openInNewWindow\n  />\n  <ExampleCard\n    example={{\n      title: \"Live Cursors Chat\",\n      slug: \"live-cursors-chat\",\n      image: \"/images/examples/thumbnails/live-cursors-chat.jpg\",\n    }}\n    technologies={[\"nextjs\"]}\n    openInNewWindow\n  />\n  <ExampleCard\n    example={{\n      title: \"Collaborative Whiteboard\",\n      slug: \"collaborative-whiteboard-advanced\",\n      image:\n        \"/images/examples/thumbnails/collaborative-whiteboard-advanced.jpg\",\n      advanced: true,\n    }}\n    technologies={[\"nextjs\"]}\n    openInNewWindow\n  />\n  <ExampleCard\n    example={{\n      title: \"Collaborative Flowchart\",\n      slug: \"collaborative-flowchart/zustand-flowchart\",\n      image: \"/images/examples/thumbnails/collaborative-flowchart.jpg\",\n      advanced: true,\n    }}\n    technologies={[\"zustand\"]}\n    openInNewWindow\n  />\n</ListGrid>\n```\n\n----------------------------------------\n\nTITLE: Configuring Client Throttle for 60fps Animation\nDESCRIPTION: Example of setting up createClient with improved throttle option for smoother cursor animations up to 60fps.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/1.0.mdx#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\n\nconst client = createClient({\n  /* ... other options ... */\n  throttle: 16,\n});\n```\n\n----------------------------------------\n\nTITLE: Setting up Firebase Callable Function for Liveblocks Authentication\nDESCRIPTION: Creates a Firebase callable function for authentication that identifies users and returns tokens for Liveblocks. It demonstrates how to retrieve user data and pass it to Liveblocks for identification.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/firebase.mdx#2025-04-11_snippet_1\n\nLANGUAGE: js\nCODE:\n```\nconst functions = require(\"firebase-functions\");\nconst { Liveblocks } = require(\"@liveblocks/node\");\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nexports.auth = functions.https.onCall(async (data, context) => {\n  // Get the current user from your database\n  const user = __getUserFromDB__(data);\n\n  // Identify the user and return the result\n  const { status, body } = await liveblocks.identifyUser(\n    {\n      userId: user.id,\n      groupIds, // Optional\n    },\n    { userInfo: user.metadata },\n  );\n\n  return JSON.parse(body);\n});\n```\n\n----------------------------------------\n\nTITLE: Creating Custom Toolbar\nDESCRIPTION: Shows how to create a fully custom toolbar by passing elements as children.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Toolbar } from \"@liveblocks/react-lexical\";\nimport { Editor } from \"@tiptap/react\";\n\nfunction CustomToolbar({ editor }: { editor: Editor | null }) {\n  return (\n    <Toolbar editor={editor}>\n      Hello <strong>world</strong>\n    </Toolbar>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Redux Store with Liveblocks\nDESCRIPTION: Sets up the Redux store with Liveblocks integration, including client initialization and enhancer configuration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-online-whiteboard-with-react-redux-and-liveblocks.mdx#2025-04-11_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\nimport { liveblocksEnhancer } from \"@liveblocks/redux\";\nimport { configureStore, createSlice } from \"@reduxjs/toolkit\";\n\nexport const client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n\nconst initialState = {\n  shapes: {},\n};\n\nconst slice = createSlice({\n  name: \"state\",\n  initialState,\n  reducers: {\n    /* Reducer logic will go there */\n  },\n});\n\nexport function makeStore() {\n  return configureStore({\n    reducer: slice.reducer,\n    enhancers: [\n      liveblocksEnhancer({\n        client,\n        storageMapping: { shapes: true },\n      }),\n    ],\n  });\n}\n\nconst store = makeStore();\n\nexport default store;\n```\n\n----------------------------------------\n\nTITLE: Advanced Client Configuration with Custom Headers for Liveblocks\nDESCRIPTION: Creates a Liveblocks client with a callback-based authEndpoint, allowing for custom headers and request body to be sent to the authentication endpoint.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/express.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\n\n// Passing custom headers and body to your endpoint\nconst client = createClient({\n  authEndpoint: async (room) => {\n    const headers = {\n      // Custom headers\n      // ...\n\n      \"Content-Type\": \"application/json\",\n    };\n\n    const body = JSON.stringify({\n      // Custom body\n      // ...\n\n      room,\n    });\n\n    const response = await fetch(\"/api/liveblocks-auth\", {\n      method: \"POST\",\n      headers,\n      body,\n    });\n\n    return await response.json();\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Accessing Other Users' Cursor Positions with Liveblocks\nDESCRIPTION: This snippet shows how to access other users' cursor positions from the Liveblocks presence data. It uses the 'liveblocks.others' property from the Zustand store to map through connected users and extract their cursor positions.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-presence-with-zustand.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nfunction App() {\n  /* ... */\n\n  const others = useStore((state) => state.liveblocks.others);\n  const othersCursors = others.map((user) => user.presence.cursor);\n\n  // Render cursors with custom SVGs based on x and y\n}\n```\n\n----------------------------------------\n\nTITLE: Importing Hooks Directly from @liveblocks/react\nDESCRIPTION: Comparison between the old approach of importing hooks from a config file versus the new approach of importing them directly from the @liveblocks/react package.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-prosemirror/CHANGELOG.md#2025-04-11_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\n// ❌ Before: get hooks exported from your Liveblocks config\nimport { RoomProvider, useRoom, ... } from \"./liveblocks.config\";\n\n// ✅ After: import hooks directly\nimport { RoomProvider, useRoom, ... } from \"@liveblocks/react\";\nimport { RoomProvider, useRoom, ... } from \"@liveblocks/react/suspense\";\n```\n\n----------------------------------------\n\nTITLE: Updating User Cursor Position with Redux Actions\nDESCRIPTION: This code shows how to dispatch the setCursor action when the user moves their pointer, updating their cursor position in the Redux store which is then broadcast to all users in the room via Liveblocks.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-presence-with-redux.mdx#2025-04-11_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\nimport { useDispatch } from \"react-redux\";\nimport { setCursor } from \"./store.js\";\n\nfunction YourComponent() {\n  const dispatch = useDispatch();\n\n  return (\n    <div\n      style={{ width: \"100vw\", height: \"100vh\" }}\n      onPointerMove={(e) => dispatch(setCursor({ x: e.clientX, y: e.clientY }))}\n    />\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing ClientSideSuspense with Room Provider\nDESCRIPTION: Extended React component implementation adding ClientSideSuspense for loading state management in the collaborative environment.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-quill-react.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n  ClientSideSuspense,\n} from \"@liveblocks/react/suspense\";\nimport { Editor } from \"./Editor\";\n\nexport default function App() {\n  return (\n    <LiveblocksProvider publicApiKey={{\"PUBLIC_KEY\"}}>\n      <RoomProvider id=\"my-room\">\n        <ClientSideSuspense fallback={<div>Loading…</div>}>\n          <Editor />\n        </ClientSideSuspense>\n      </RoomProvider>\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Managing Notification Settings with Liveblocks Node.js SDK\nDESCRIPTION: This snippet demonstrates how to use the `@liveblocks/node` package to manage user notification settings. It initializes the Liveblocks client, retrieves user notification settings, updates settings, and deletes them using the `getNotificationSettings`, `updateNotificationSettings`, and `deleteNotificationSettings` methods, respectively.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react/CHANGELOG.md#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\nconst liveblocks = new Liveblocks({ secret: \"sk_xxx\" });\n\nconst settings = await liveblocks.getNotificationSettings({ userId });\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst updatedSettings = await liveblocks.updateNotificationSettings({\n  userId,\n  data: {\n    teams: {\n      $fileUploaded: true,\n    },\n  },\n});\nawait liveblocks.deleteNotificationSettings({ userId });\n```\n\n----------------------------------------\n\nTITLE: Emoji Picker Implementation\nDESCRIPTION: Implementation of an emoji picker using Frimousse with Liveblocks reaction functionality.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_24\n\nLANGUAGE: tsx\nCODE:\n```\nimport { EmojiPicker } from \"frimousse\";\nimport { useAddReaction } from \"@liveblocks/react/suspense\";\nimport { CommentData } from \"@liveblocks/react-ui\";\n\nexport function MyEmojiPicker({ comment }: { comment: CommentData }) {\n  const addReaction = useAddReaction();\n\n  return (\n    <EmojiPicker.Root\n      onEmojiSelect={({ emoji }) => {\n        addReaction({\n          threadId: comment.threadId,\n          commentId: comment.id,\n          emoji,\n        });\n      }}\n    >\n      <EmojiPicker.Search />\n      <EmojiPicker.Viewport>\n        <EmojiPicker.Loading>Loading…</EmojiPicker.Loading>\n        <EmojiPicker.Empty>No emoji found.</EmojiPicker.Empty>\n        <EmojiPicker.List />\n      </EmojiPicker.Viewport>\n    </EmojiPicker.Root>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Types Globally in Liveblocks Config\nDESCRIPTION: Shows how to define Liveblocks types globally in a configuration file, which allows types to be shared across all Liveblocks APIs. This is part of the DX improvements in version 2.0.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react-ui/CHANGELOG.md#2025-04-11_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\n// ❌ Before\nexport const {\n  suspense: {\n    RoomProvider,\n    useRoom,\n    // etc\n  },\n} = createRoomContext<Presence, Storage>(client);\n\n// ✅ After\ndeclare global {\n  interface Liveblocks {\n    Presence: Presence;\n    Storage: Storage;\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Union Types Example\nDESCRIPTION: Example demonstrating various union type combinations in a schema.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/schema-validation/syntax.mdx#2025-04-11_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\ntype Storage {\n  ids: (string | number)[]\n  selectedId: string | null\n  person: LiveObject<Person> | null\n  people: LiveList<LiveObject<Person>> | null\n}\n```\n\n----------------------------------------\n\nTITLE: Importing Hooks Directly in @liveblocks/react (v2.0.0)\nDESCRIPTION: Demonstration of the improved import pattern in v2.0.0 where hooks can be imported directly from @liveblocks/react packages instead of from a config file.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-client/CHANGELOG.md#2025-04-11_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\n// ❌ Before: get hooks exported from your Liveblocks config\nimport { RoomProvider, useRoom, ... } from \"./liveblocks.config\";\n\n// ✅ After: import hooks directly\nimport { RoomProvider, useRoom, ... } from \"@liveblocks/react\";\nimport { RoomProvider, useRoom, ... } from \"@liveblocks/react/suspense\";\n```\n\n----------------------------------------\n\nTITLE: Configuring atob Polyfill in Liveblocks Client\nDESCRIPTION: This code snippet demonstrates how to import the decode function from base-64 and pass it to the Liveblocks client as an atob polyfill. This allows the client to work in environments without native atob support.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/errors/liveblocks-client/atob-polyfill.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { decode } from \"base-64\";\n\nconst client = createClient({\n  /* ... your other client's options */\n  polyfills: {\n    atob: decode,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Setting Cursor to Null on Pointer Leave in React\nDESCRIPTION: This function handles the pointer leave event by setting the cursor value in the user's presence to null when the pointer leaves the tracked area.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/updating-presence/guide.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nfunction handlePointerLeave(e) {\n  updateMyPresence({ cursor: null });\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Email Templates with React Components in TypeScript\nDESCRIPTION: Demonstrates how to create email templates using React components for handling unread mentions and replies from Liveblocks thread notifications.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/email-notifications.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst emailData = await prepareThreadNotificationEmailAsReact(\n  liveblocks,\n  event\n);\n\nlet email;\nswitch (emailData.type) {\n  // The user has an unread mention\n  case \"unreadMention\": {\n    email = (\n      // +++\n      <div>\n        <div>\n          @{emailData.comment.author.id} at {emailData.comment.createdAt}\n        </div>\n        <div>{emailData.comment.reactBody}</div>\n      </div>\n      // +++\n    );\n    break;\n  }\n\n  // The user has multiple unread replies\n  case \"unreadReplies\": {\n    email = (\n      // +++\n      <div>\n        {emailData.comments.map((comment) => (\n          <div key={comment.id}>\n            <div>\n              @{comment.author.id} at {comment.createdAt}\n            </div>\n            <div>{comment.reactBody}</div>\n          </div>\n        ))}\n      </div>\n      // +++\n    );\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Using Regular Liveblocks Hooks in React\nDESCRIPTION: Illustrates how to use regular (non-Suspense) versions of Liveblocks hooks, including handling loading and error states within the component.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/hooks.mdx#2025-04-11_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useThreads } from \"../liveblocks.config.ts\";\n\n// Handle errors and loading state in the same component\nfunction MyThreads() {\n  const { threads, error, isLoading } = useThreads();\n\n  if (error) {\n    return <div>Error</div>;\n  }\n\n  if (isLoading) {\n    return <div>Loading...</div>;\n  }\n\n  // Non-Suspense: `threads` is only defined AFTER the `if` checks\n  // [{ type: \"thread\", id: \"th_sf8s6sh...\", ... }, ...]\n  console.log(threads);\n}\n```\n\n----------------------------------------\n\nTITLE: Creating and Storing Subdocuments\nDESCRIPTION: Demonstrates how to create and store Yjs subdocuments using Y.Map and LiveblocksYjsProvider with autoload disabled.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-yjs-subdocuments.mdx#2025-04-11_snippet_1\n\nLANGUAGE: ts\nCODE:\n```\n// Create subdocument\nconst subdoc = new Y.Doc();\nyDoc.getMap().set(\"my-document\", subdoc);\nsubdoc.getText(\"default\").insert(0, \"This is a subdocument\");\n\n// Make note of its `guid`, which is used for retrieving it later\nconst guid = subdoc.guid; // e.g. \"c4a755...\"\n```\n\n----------------------------------------\n\nTITLE: Deploying Liveblocks Overlay Comments Example to Vercel\nDESCRIPTION: This command downloads the Liveblocks overlay comments example and initiates the deployment process to Vercel. It also sets up the project for local development.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-comments-overlay/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-comments-overlay --vercel\n```\n\n----------------------------------------\n\nTITLE: Customizing Email Comment Components with React\nDESCRIPTION: Implements custom React components for paragraph, mention, and link rendering in email notifications with specific styling and behavior\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-send-email-notifications-of-unread-comments.mdx#2025-04-11_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\ncomponents: {\n  Paragraph: ({ children }) => <p style={{ margin: \"12px 0\" }}>{children}</p>,\n  Mention: ({ element, user }) => (\n    <span style={{ color: \"red\" }}>@{user?.name ?? element.id}</span>\n  ),\n  Link: ({ element, href }) => (\n    <a href={href} style={{ textDecoration: \"underline\" }}>\n      {element?.text ?? href}\n    </a>\n  ),\n}\n```\n\n----------------------------------------\n\nTITLE: Using Custom Lexical Nodes with withLexicalDocument\nDESCRIPTION: Demonstrates how to use custom Lexical nodes with withLexicalDocument. Custom nodes must be passed into the function similar to a front-end Lexical client to ensure proper document handling.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-node-lexical.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { CodeNode } from \"@lexical/code\";\n\nawait withLexicalDocument(\n  { roomId: \"my-room-id\", client: liveblocks, nodes: [CodeNode] },\n  async (doc) => {\n    // Modify your Lexical `doc`\n    // ...\n  }\n);\n```\n\n----------------------------------------\n\nTITLE: Enabling Unsaved Changes Protection in JavaScript\nDESCRIPTION: This code snippet demonstrates how to enable the prevention of browser tab closure when there are unsaved changes in a Liveblocks JavaScript application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-yjs/CHANGELOG.md#2025-04-11_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\ncreateClient({ preventUnsavedChanges: true })\n```\n\n----------------------------------------\n\nTITLE: Implementing Floating Comments Composer\nDESCRIPTION: Simple implementation of FloatingComposer component for adding comments functionality to the editor.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/text-editor/blocknote.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n<FloatingComposer editor={editor} />\n```\n\n----------------------------------------\n\nTITLE: Styling for Collaborative To-Do List\nDESCRIPTION: CSS styles for the to-do list application, including container layouts, input styling, and presence indicators.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-react-zustand-and-liveblocks.mdx#2025-04-11_snippet_3\n\nLANGUAGE: css\nCODE:\n```\nbody {\n  background-color: rgb(243, 243, 243);\n}\n\n.container {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  margin-left: auto;\n  margin-right: auto;\n  margin-top: 3rem;\n  max-width: 28rem;\n}\n\ninput {\n  box-sizing: border-box;\n  padding: 0.5rem 0.875rem;\n  margin: 0.5rem 0;\n  width: 100%;\n  background-color: white;\n  box-shadow:\n    0 0 #000,\n    0 0 #000,\n    0 0 #000,\n    0 0 #000,\n    0 1px 2px 0 rgba(0, 0, 0, 0.05);\n  border-radius: 0.5rem;\n  color: black;\n  border: 0 solid;\n  font-size: 16px;\n}\n\ninput:hover {\n  box-shadow:\n    0 0 #000,\n    0 0 #000,\n    0 0 #000,\n    0 0 #000,\n    0 1px 3px 0 rgba(0, 0, 0, 0.1),\n    0 1px 2px 0 rgba(0, 0, 0, 0.06);\n}\n\ninput:focus {\n  outline: none;\n}\n\n.todo_container {\n  display: flex;\n  padding: 0.5rem 0.875rem;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.todo {\n  flex-grow: 1;\n}\n\n.delete_button {\n  padding: 0;\n  margin: 0;\n  font-size: 16px;\n  border: 0 solid;\n  appearance: button;\n  background-color: transparent;\n}\n\n.delete_button:focus {\n  outline: none;\n}\n\n.who_is_here {\n  align-self: flex-end;\n  font-size: 11px;\n  color: #aaa;\n}\n\n.someone_is_typing {\n  position: absolute;\n  font-size: 11px;\n  color: #aaa;\n}\n```\n\n----------------------------------------\n\nTITLE: Managing Notification Settings with Liveblocks Node.js Client\nDESCRIPTION: Demonstrates how to use the new notification settings management methods in the Liveblocks Node.js client. Shows getting, updating, and deleting notification settings for a user.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG.md#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\nconst liveblocks = new Liveblocks({ secret: \"sk_xxx\" });\n\nconst settings = await liveblocks.getNotificationSettings({ userId });\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst updatedSettings = await liveblocks.updateNotificationSettings({\n  userId,\n  data: {\n    teams: {\n      $fileUploaded: true,\n    },\n  },\n});\nawait liveblocks.deleteNotificationSettings({ userId });\n```\n\n----------------------------------------\n\nTITLE: Installing Collaborative Text Editor Project\nDESCRIPTION: Command to create a new Liveblocks project with the TipTap text editor example. This automatically downloads the example and helps set up the API key through browser authentication.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-tiptap/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-tiptap --api-key\n```\n\n----------------------------------------\n\nTITLE: Updating InboxNotification Custom Component Props\nDESCRIPTION: This code snippet demonstrates the update to use more specific prop types for custom components in the InboxNotification component.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.0.mdx#2025-04-11_snippet_20\n\nLANGUAGE: tsx\nCODE:\n```\n// ❌ Before\nfunction MyThreadNotification(props: InboxNotificationThreadProps) {\n  return <InboxNotification.Thread {...props} />;\n}\n\n<InboxNotification kinds={{ thread: MyThreadNotification }} />;\n```\n\nLANGUAGE: tsx\nCODE:\n```\n// ✅ After\nfunction MyThreadNotification(props: InboxNotificationThreadKindProps) {\n  //                                                        ^^^^\n  return <InboxNotification.Thread {...props} />;\n}\n\n<InboxNotification kinds={{ thread: MyThreadNotification }} />;\n```\n\n----------------------------------------\n\nTITLE: Subscribing to Storage Status in Liveblocks Client\nDESCRIPTION: This code demonstrates how to subscribe to storage status changes using the Room.subscribe method with the 'storage-status' event. It allows tracking the synchronization state between client and server.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-prosemirror/CHANGELOG.md#2025-04-11_snippet_18\n\nLANGUAGE: typescript\nCODE:\n```\nroom.subscribe(\"storage-status\", (status) => {\n  switch (status) {\n    case \"not-loaded\":\n      break;\n    case \"loading\":\n      break;\n    case \"synchronizing\":\n      break;\n    case \"synchronized\":\n      break;\n    default:\n      break;\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Deploying Liveblocks Avatar Stack to Vercel\nDESCRIPTION: Command to create and deploy the Liveblocks avatar stack example to Vercel. This sets up the project and initiates the Vercel deployment process.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/solidjs-live-avatars/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example solidjs-live-avatars --vercel\n```\n\n----------------------------------------\n\nTITLE: Testing Liveblocks Webhooks Locally with localtunnel\nDESCRIPTION: This snippet demonstrates how to use localtunnel to generate a temporary URL for testing Liveblocks webhooks on a localhost server running on port 3000.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/webhooks.mdx#2025-04-11_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\nnpx localtunnel --port 3000\n```\n\n----------------------------------------\n\nTITLE: Styling the Editor\nDESCRIPTION: CSS styles for the Tiptap editor and thread components, including responsive design for mobile and desktop views.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-tiptap.mdx#2025-04-11_snippet_6\n\nLANGUAGE: css\nCODE:\n```\n.editor {\n  position: relative;\n  display: flex;\n  width: 100%;\n  height: 100%;\n}\n\n.tiptap {\n  padding: 2px 12px;\n  outline: none;\n  width: 100%;\n}\n\n/* For mobile */\n.floating-threads {\n  display: none;\n}\n\n/* For desktop */\n.anchored-threads {\n  display: block;\n  max-width: 300px;\n  width: 100%;\n  position: absolute;\n  right: 12px;\n}\n\n@media (max-width: 640px) {\n  .floating-threads {\n    display: block;\n  }\n\n  .anchored-threads {\n    display: none;\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Handling Room ID Changes in React Application\nDESCRIPTION: Shows how to implement error handling for room ID changes using the useErrorListener hook in a React application. This code handles the 4006 error code which indicates a room ID change and redirects users to the new room location.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-rename-room-ids-and-successfully-migrate-users.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useErrorListener } from \"../liveblocks.config\";\n\nfunction App() {\n  useErrorListener((error) => {\n    if (error.code === 4006) {\n      // Room ID has been changed, get the new ID and redirect\n      const newRoomId = error.message;\n      __redirect__(`https://example.com/document/${newRoomId}}`);\n    }\n  });\n}\n```\n\n----------------------------------------\n\nTITLE: Correct RoomInfo Type Definition in TypeScript\nDESCRIPTION: This snippet demonstrates the correct way to define the RoomInfo type, with the 'url' field properly typed as string.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/errors/RoomInfo.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare global {\n  interface Liveblocks {\n    RoomInfo: {\n      // Your custom fields go here...\n      name: string;\n      url: string; // ✅ Valid\n      geo: {\n        city: string;\n        country: string;\n      };\n    };\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Reactions with useAddReaction Hook in React\nDESCRIPTION: Illustrates how to use the useAddReaction hook to add emoji reactions to a specified comment in a Liveblocks application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/hooks.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { CommentData } from \"@liveblocks/client\";\nimport { useAddReaction } from \"../liveblocks.config.ts\";\n\n// A button that adds a \"⭐\" reaction to a comment\nfunction Component({ comment }: { CommentData }) {\n  const addReaction = useAddReaction();\n\n  function handleClick() {\n    addReaction({\n      threadId: comment.threadId,\n      commentId: comment.commentId,\n      emoji: \"⭐\",\n    });\n  }\n\n  return <button onClick={handleClick}>Star ⭐</button>;\n}\n```\n\n----------------------------------------\n\nTITLE: Integrating Liveblocks Middleware with Zustand (TypeScript)\nDESCRIPTION: Example showing how to integrate the Liveblocks middleware with a Zustand store, mapping state properties to presence and storage for real-time collaboration. The State type is now moved to the middleware level.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react-ui/CHANGELOG.md#2025-04-11_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\nimport create from \"zustand\";\nimport { createClient } from \"@liveblocks/client\";\nimport { middleware } from \"@liveblocks/zustand\";\n\nconst client = createClient({ /*...*/ });\n\ntype State = {\n  draft: string;\n  isTyping: boolean;\n  todos: Todo[];\n  setDraft: (draft: string) => void;\n  addTodo: () => void;\n  deleteTodo: (index: number) => void;\n};\n\ncreate(\n  middleware<State>(/* ... */, {\n    client,\n    presenceMapping: { isTyping: true },\n    storageMapping: { todos: true }\n  })\n);\n```\n\n----------------------------------------\n\nTITLE: Basic Thread Component Usage in React\nDESCRIPTION: Simple example showing how to render a single Thread component with a thread prop.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n<Thread thread={thread} />\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks and BlockNote packages\nDESCRIPTION: Command to install all required dependencies for Liveblocks and BlockNote integration. All Liveblocks packages should use the same version.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-blocknote.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/react @liveblocks/react-ui @liveblocks/react-blocknote @blocknote/core @blocknote/react @blocknote/mantine\n```\n\n----------------------------------------\n\nTITLE: Updating Subdocuments on Server\nDESCRIPTION: Demonstrates how to update subdocuments on the server and broadcast changes to all clients.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-yjs-subdocuments.mdx#2025-04-11_snippet_5\n\nLANGUAGE: ts\nCODE:\n```\n// Make changes to your `subdoc`, for example\nsubdoc.getText(\"my-text\").insert(0, \"Hello world\");\n\n// Convert `subdoc` into a binary update\nconst subdocChanges = Y.encodeStateAsUpdate(subdoc);\n\n// Send the changes to Liveblocks, and other clients\nliveblocks.sendYjsBinaryUpdate(\"my-room-id\", subdocChanges, {\n  // The `guid` of your subdocument, as noted earlier\n  guid: \"c4a755...\",\n});\n```\n\n----------------------------------------\n\nTITLE: Legacy Error Listener Behavior Preservation\nDESCRIPTION: Code example showing how to maintain pre-2.16 error listener behavior by filtering out new error types\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.16.mdx#2025-04-11_snippet_2\n\nLANGUAGE: ts\nCODE:\n```\nimport { useErrorListener, useRoom } from \"@liveblocks/react\";\n\nfunction App() {\n  // +++\n  const room = useRoom();\n  // +++\n\n  useErrorListener((error) => {\n    // +++\n    if (\n      error.context.roomId !== room.id &&\n      error.context.type !== \"ROOM_CONNECTION_ERROR\"\n    ) {\n      return;\n    }\n    // +++\n\n    // Your previous logic\n  });\n}\n```\n\n----------------------------------------\n\nTITLE: Extending Liveblocks configuration with TypedLiveblocksProvider\nDESCRIPTION: Addition to the liveblocks.config.ts file to export a TypedLiveblocksProvider type, which is used for type safety when working with the Yjs provider.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-codemirror-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { LiveblocksYjsProvider } from \"@liveblocks/yjs\";\n\n// ...\n\nexport type TypedLiveblocksProvider = LiveblocksYjsProvider<\n  Presence,\n  Storage,\n  UserMeta,\n  RoomEvent\n>;\n```\n\n----------------------------------------\n\nTITLE: Retrieving Other Users in Room with Redux\nDESCRIPTION: This snippet demonstrates how to get an array of other users connected to the room using useSelector hook to access the liveblocks.others property from the Redux state.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-presence-with-redux.mdx#2025-04-11_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { useSelector } from \"react-redux\";\n\nfunction App() {\n  const others = useSelector((state) => state.liveblocks.others);\n}\n```\n\n----------------------------------------\n\nTITLE: Integrating Toolbar into Quill Editor Component\nDESCRIPTION: This snippet shows how to integrate the Toolbar component into the main Quill editor component. It introduces a getQuill function to provide access to the Quill instance and renders the Toolbar in the editor header.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-quill-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_12\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Toolbar } from \"./Toolbar\";\n// ...\n\nfunction QuillEditor({ yText, provider }: EditorProps) {\n  // ...\n\n  // Function to get the current Quill editor\n  const getQuill = useCallback(() => {\n    if (!reactQuillRef.current) {\n      return null;\n    }\n\n    return reactQuillRef.current.getEditor();\n  }, []);\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.editorHeader}>\n        <Toolbar getQuill={getQuill} />\n      </div>\n      <div className={styles.editorContainer}>{/* ... */}</div>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Styling Email Elements for Thread Notification Emails in React\nDESCRIPTION: This example shows how to customize the appearance of different elements in comment body of thread notification emails. It demonstrates applying custom CSS properties to paragraph, mention, and link elements to enhance the visual presentation of the email content.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-emails.mdx#2025-04-11_snippet_10\n\nLANGUAGE: tsx\nCODE:\n```\nconst emailData = await prepareThreadNotificationEmailAsHtml(\n  liveblocks,\n  webhookEvent,\n  {\n    // +++\n    styles: {\n      paragraph: { margin: \"12px 0\" },\n\n      mention: {\n        fontWeight: \"bold\",\n        color: \"red\",\n      },\n\n      link: {\n        textDecoration: \"underline\",\n      },\n    },\n    // +++\n  }\n);\n\n// { type: \"unreadMention\", comment: { ... }, ... }\nconsole.log(emailData);\n\n// The elements in the comment body are now styled\nconsole.log(emailData.comment.body);\n```\n\n----------------------------------------\n\nTITLE: Implementing Loading Screen with ClientSideSuspense in React TSX\nDESCRIPTION: This snippet demonstrates how to use ClientSideSuspense to display a loading screen while the Liveblocks room is connecting. It wraps the Room component and provides a fallback loading message.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/joining-a-room/guide.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nreturn (\n  <LiveblocksProvider publicApiKey={publicApiKey}>\n    <RoomProvider id={roomId}>\n      <ClientSideSuspense fallback={<div>Loading…</div>}>\n        <Room />\n      </ClientSideSuspense>\n    </RoomProvider>\n  </LiveblocksProvider>\n);\n```\n\n----------------------------------------\n\nTITLE: Joining a Liveblocks Room\nDESCRIPTION: Connects to a Liveblocks room named 'my-room' and returns the room instance and leave function.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/javascript.mdx#2025-04-11_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nconst { room, leave } = client.enterRoom(\"my-room\");\n```\n\n----------------------------------------\n\nTITLE: Using LiveList.set Method in TypeScript\nDESCRIPTION: Example of using the LiveList.set method introduced in v0.16.0 to update a specific element at a given index in a LiveList. This replaces the lion emoji with a wolf emoji at index 0.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/liveblocks-codemod/CHANGELOG.md#2025-04-11_snippet_19\n\nLANGUAGE: typescript\nCODE:\n```\nconst list = new LiveList([\"🦁\", \"🦊\", \"🐵\"]);\nlist.set(0, \"🐺\");\nlist.toArray(); // equals [\"🐺\", \"🦊\", \"🐵\"]\n```\n\n----------------------------------------\n\nTITLE: Using Notification Settings Hook in React\nDESCRIPTION: Shows how to use the useNotificationSettings hook to get current notification settings and update them in a React component.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG.md#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n// A suspense version of this hook is available\nimport { useNotificationSettings } from \"@liveblocks/react\";\n\nconst [{ isLoading, error, settings }, updateSettings] =\n  useNotificationSettings();\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst onSave = () => {\n  updateSettings({\n    slack: {\n      textMention: true,\n    },\n  });\n};\n```\n\n----------------------------------------\n\nTITLE: Setting up Liveblocks Client\nDESCRIPTION: Creates a Liveblocks client instance with the public API key for backend communication.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/solidjs.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Configuration File\nDESCRIPTION: Create a liveblocks.config.ts file for defining types and configuring the Liveblocks client.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-monaco-svelte.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework javascript\n```\n\n----------------------------------------\n\nTITLE: Accessing Cursor Position from Other Users' Presence in React\nDESCRIPTION: This snippet shows how to access the cursor position of the first other user from their presence information.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/live-cursors/guide.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n// { cursor: null }\nothers[0].presence;\n```\n\n----------------------------------------\n\nTITLE: Using UserId and UserInfo in React Application\nDESCRIPTION: Shows how to access the user's ID and info in a React application using the useSelf hook from Liveblocks.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/nextjs.mdx#2025-04-11_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nconst self = useSelf();\nconsole.log(self.id);\nconsole.log(self.info);\n```\n\n----------------------------------------\n\nTITLE: Setting up Liveblocks Provider and Room\nDESCRIPTION: React component setup showing the LiveblocksProvider and RoomProvider configuration for establishing real-time collaboration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-quill-react.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n} from \"@liveblocks/react/suspense\";\nimport { Editor } from \"./Editor\";\n\nexport default function App() {\n  return (\n    <LiveblocksProvider publicApiKey={{\"PUBLIC_KEY\"}}>\n      <RoomProvider id=\"my-room\">\n        {/* ... */}\n      </RoomProvider>\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Enabling Unsaved Changes Protection in React\nDESCRIPTION: This code snippet shows how to enable the prevention of browser tab closure when there are unsaved changes in a Liveblocks React application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-yjs/CHANGELOG.md#2025-04-11_snippet_4\n\nLANGUAGE: jsx\nCODE:\n```\n<LiveblocksProvider preventUnsavedChanges />\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Node.js Client with Notification Settings\nDESCRIPTION: Demonstrates how to initialize the Liveblocks Node.js client and manage user notification settings using methods like getNotificationSettings, updateNotificationSettings, and deleteNotificationSettings\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-client/CHANGELOG.md#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\nconst liveblocks = new Liveblocks({ secret: \"sk_xxx\" });\n\nconst settings = await liveblocks.getNotificationSettings({ userId });\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst updatedSettings = await liveblocks.updateNotificationSettings({\n  userId,\n  data: {\n    teams: {\n      $fileUploaded: true,\n    },\n  },\n});\nawait liveblocks.deleteNotificationSettings({ userId });\n```\n\n----------------------------------------\n\nTITLE: Basic FloatingComposer Implementation\nDESCRIPTION: Shows the basic implementation of FloatingComposer component for creating comment threads.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_26\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  useLiveblocksExtension,\n  FloatingComposer,\n  FloatingThreads,\n} from \"@liveblocks/react-tiptap\";\nimport { useEditor, EditorContent } from \"@tiptap/react\";\n\nfunction TextEditor() {\n  const liveblocks = useLiveblocksExtension();\n\n  const editor = useEditor({\n    extensions: [\n      liveblocks,\n      // ...\n    ],\n  });\n\n  return (\n    <div>\n      <EditorContent editor={editor} />\n      <FloatingComposer editor={editor} style={{ width: \"350px\" }} />\n      <FloatingThreads editor={editor} style={{ width: \"350px\" }} />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Returning Text Content from a Lexical Document\nDESCRIPTION: Shows how to retrieve the text content from a Lexical document by returning doc.getTextContent inside the callback function. The result is a string containing the document's text content.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-node-lexical.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst textContent = await withLexicalDocument(\n  { roomId: \"my-room-id\", client: liveblocks },\n  // +++\n  async (doc) => {\n    return doc.getTextContent();\n  }\n  // +++\n);\n\n// \"My content\"\nconsole.log(TextContent);\n```\n\n----------------------------------------\n\nTITLE: Removing Destroyed Event Listener\nDESCRIPTION: Shows how to remove an event listener for the destroy event.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-yjs.mdx#2025-04-11_snippet_17\n\nLANGUAGE: typescript\nCODE:\n```\nconst handleDestroy = () => {};\nawareness.on(\"destroyed\", handleDestroy);\n\n// Clean up destroy event\nawareness.off(\"destroyed\", handleDestroy);\n```\n\n----------------------------------------\n\nTITLE: LiveObject Type Definition\nDESCRIPTION: Example showing how to use LiveObject wrapper for live object types.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/schema-validation/syntax.mdx#2025-04-11_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\ntype Scientist {\n  name: string\n  age: number\n}\n\ntype Storage {\n  scientist: LiveObject<Scientist>\n}\n```\n\n----------------------------------------\n\nTITLE: Granting Wildcard Access Permissions in Liveblocks\nDESCRIPTION: Example of how to grant permissions to multiple rooms using wildcards in a Liveblocks auth endpoint. This approach should be used when the request's room property is undefined, allowing access to resources like Notifications.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/errors/liveblocks-client/access-tokens-not-enough-permissions.mdx#2025-04-11_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nsession.allow(\"orga1*\", session.FULL_ACCESS);\n```\n\n----------------------------------------\n\nTITLE: Configuring Auth0 Authentication Environment Variables\nDESCRIPTION: Example of how to set up Auth0 Client ID, Client Secret, and Issuer Base URL in the .env.local file for authentication.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/tools/nextjs-starter-kit.mdx#2025-04-11_snippet_2\n\nLANGUAGE: dotenv\nCODE:\n```\nAUTH0_CLIENT_ID=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\nAUTH0_CLIENT_SECRET=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\nAUTH0_ISSUER_BASE_URL=https://XXXXXXXXXXXXXXXXXX.com\n```\n\n----------------------------------------\n\nTITLE: Defining CustomNotificationEvent schema in TypeScript\nDESCRIPTION: Defines the schema for the CustomNotificationEvent, triggered 30 minutes after a user is notified of a custom event and hasn't seen the notification. Includes information about the channel, notification kind (prefixed with '$'), project, room (nullable), user, notification ID, and creation timestamp.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/webhooks.mdx#2025-04-11_snippet_32\n\nLANGUAGE: typescript\nCODE:\n```\ntype CustomNotificationEvent = {\n  type: \"notification\";\n  data: {\n    channel: \"email\";\n    kind: \"$yourKind\"; // Can be any string starting with \"$\" as defined by the user\n    projectId: string;\n    roomId: string | null;\n    userId: string;\n    inboxNotificationId: string;\n    createdAt: string;\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Using getSyncStatus API in JavaScript\nDESCRIPTION: Example of using the new getSyncStatus() method to check synchronization status of pending local changes in Liveblocks.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-core/CHANGELOG.md#2025-04-11_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nclient.getSyncStatus()\n```\n\n----------------------------------------\n\nTITLE: Complete Next.js Route Handler Implementation\nDESCRIPTION: Full implementation example showing how to set up a Next.js route handler that processes Liveblocks webhook events and generates thread notification emails. Includes webhook verification and complete error handling.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-emails.mdx#2025-04-11_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nimport { isThreadNotificationEvent, WebhookHandler } from \"@liveblocks/node\";\nimport { Liveblocks } from \"@liveblocks/node\";\nimport { prepareThreadNotificationEmailAsHtml } from \"@liveblocks/emails\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nconst webhookHandler = new WebhookHandler(\n  process.env.LIVEBLOCKS_WEBHOOK_SECRET_KEY as string\n);\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  if (isThreadNotificationEvent(event)) {\n    const emailData = await prepareThreadNotificationEmailAsHtml(\n      liveblocks,\n      event\n    );\n    let email;\n\n    switch (emailData.type) {\n      case \"unreadMention\": {\n        email = `\n        <div>\n          <div>\n            @${emailData.comment.author.id} at ${emailData.comment.createdAt}\n          </div>\n          <div>${emailData.comment.body}</div>\n        </div>\n      `;\n        break;\n      }\n\n      case \"unreadReplies\": {\n        email = `\n        <div>\n          ${emailData.comments\n            .map(\n              (comment) => `\n                <div>\n                  <div>\n                    @${comment.author.id} at ${comment.createdAt}\n                  </div>\n                  <div>${comment.body}</div>\n                </div>\n              `\n            )\n            .join(\"\")}\n        </div>\n      `;\n        break;\n      }\n    }\n  }\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Todo List Example\nDESCRIPTION: Command to create a new Liveblocks todo list project using the create-liveblocks-app CLI tool. This installs the example without an API key or Vercel deployment setup.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/react-native-todo-list/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example react-native-todo-list --no-api-key --no-vercel\n```\n\n----------------------------------------\n\nTITLE: Basic Thread Notification Email Generation in TypeScript\nDESCRIPTION: Demonstrates the basic usage of prepareThreadNotificationEmailAsHtml to process webhook events and generate HTML email content for thread notifications. Handles both unread mentions and unread replies cases.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-emails.mdx#2025-04-11_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport { prepareThreadNotificationEmailAsHtml } from \"@liveblocks/emails\";\nimport { isThreadNotificationEvent } from \"@liveblocks/node\";\n\nif (isThreadNotificationEvent(event)) {\n  const emailData = await prepareThreadNotificationEmailAsHtml(\n    liveblocks,\n    event\n  );\n  let email;\n\n  switch (emailData.type) {\n    case \"unreadMention\": {\n      email = `\n        <div>\n          <div>\n            @${emailData.comment.author.id} at ${emailData.comment.createdAt}\n          </div>\n          <div>${emailData.comment.body}</div>\n        </div>\n      `;\n      break;\n    }\n\n    case \"unreadReplies\": {\n      email = `\n        <div>\n          ${emailData.comments\n            .map(\n              (comment) => `\n                <div>\n                  <div>\n                    @${comment.author.id} at ${comment.createdAt}\n                  </div>\n                  <div>${comment.body}</div>\n                </div>\n              `\n            )\n            .join(\"\")}\n        </div>\n      `;\n      break;\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Using useThreads Hook with Pagination\nDESCRIPTION: Shows how to use the useThreads hook with new pagination support in @liveblocks/react.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node/CHANGELOG.md#2025-04-11_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nconst {\n  threads,\n  isLoading,\n  error,\n\n  // ✨ New in Liveblocks 2.9\n  fetchMore,\n  isFetchingMore,\n  hasFetchedAll,\n  fetchMoreError,\n} = useThreads({ query });\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks with Create Command\nDESCRIPTION: Command to create a new Liveblocks project with the live cursors example. This will download the example and help set up API keys automatically through the browser.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-live-cursors-advanced/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-live-cursors-advanced --api-key\n```\n\n----------------------------------------\n\nTITLE: Setting User Metadata with ID Token Authentication in Liveblocks\nDESCRIPTION: This snippet shows how to add user metadata when using ID token authentication. It demonstrates adding name and avatar URL to be used in Notifications.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-add-users-to-liveblocks-notifications.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst { status, body } = await liveblocks.identifyUser(\n  {\n    userId: \"marc@example.com\",\n    groupIds: [], // Optional\n  },\n  {\n    userInfo: {\n      name: \"Marc\",\n      avatar: \"https://example.com/marc.png\",\n\n      // Your custom metadata\n      // ...\n    },\n  }\n);\n```\n\n----------------------------------------\n\nTITLE: User Info Configuration for Cursors\nDESCRIPTION: Configuration object for setting up user cursor information with name and color properties.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/text-editor/lexical.mdx#2025-04-11_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nuserInfo: {\n  name: \"Marie\",\n  color: \"#00ff00\",\n}\n```\n\n----------------------------------------\n\nTITLE: Integrating Room Component in Next.js Page\nDESCRIPTION: Imports the Room component and adds the Editor component inside it to create a collaborative editing experience.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-lexical.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Room } from \"./Room\";\nimport { Editor } from \"./Editor\";\n\nexport default function Page() {\n  return (\n    <Room>\n      <Editor/>\n    </Room>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving User Notification Settings with Liveblocks Client\nDESCRIPTION: Demonstrates how to use the Liveblocks client to fetch and update user notification settings. The getNotificationSettings method retrieves current settings, while updateNotificationSettings allows modifying them.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/create-liveblocks-app/CHANGELOG.md#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createClient } from '@liveblocks/client'\nconst client = createClient({ ... })\n\nconst settings = await client.getNotificationSettings();\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst updatedSettings = await client.updateNotificationSettings({\n  email: {\n    thread: false,\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Creating Liveblocks Client with Unsaved Changes Prevention\nDESCRIPTION: Demonstrates how to create a Liveblocks client with the preventUnsavedChanges option enabled outside of React.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node/CHANGELOG.md#2025-04-11_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\ncreateClient({ preventUnsavedChanges: true })\n```\n\n----------------------------------------\n\nTITLE: Basic SWR Data Fetching in React\nDESCRIPTION: Simple example of using SWR hook to fetch and display a list of users.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/revalidate-api-data-with-swr.mdx#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Component() {\n  const { data: users, mutate } = useSWR(\"/api/users\", fetcher);\n\n  return (\n     <div>\n       {users.map((user) => /* ... */)}:\n     </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: UserMeta Type Rules and Constraints in TypeScript\nDESCRIPTION: Demonstrates the valid and invalid patterns for defining UserMeta types, including id and info field requirements and JSON compatibility constraints.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/errors/UserMeta.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\ndeclare global {\n  interface Liveblocks {\n    UserMeta: {\n      id: string; // ✅ Valid\n      id?: string; // ✅ Valid\n      id?: number; // ❌ Invalid, not assignable to string | undefined\n\n      info: {\n        name: string; // ✅ Valid\n        name?: string; // ✅ Valid\n        name: number; // ❌ Invalid, not assignable to string | undefined\n\n        avatar: string; // ✅ Valid\n        avatar?: string; // ✅ Valid\n        avatar: number; // ❌ Invalid, not assignable to string | undefined\n\n        // Other field names are not special and are free-form\n        custom: string; // ✅ Valid\n        custom?: string; // ✅ Valid\n        custom: number; // ✅ Valid\n        custom: Json; // ✅ Valid, can take _any_ valid Json value\n\n        // However, they still need to be valid JSON\n        custom: unknown; // ❌ Invalid, not value JSON\n      };\n    };\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing useThreads without pagination in React\nDESCRIPTION: Example of using useThreads hook without pagination in a React component. This is the old implementation before version 2.9.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.9.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useThreads } from \"@liveblocks/react/suspense\";\n\nfunction Threads() {\n  const { threads } = useThreads();\n\n  return (\n    <div>\n      {threads.map((thread) => (\n        <Thread key={thread.id} thread={thread} />\n      ))}\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing User Notification Settings in React\nDESCRIPTION: Demonstrates how to create a user interface for managing notification settings using the useNotificationSettings hook from Liveblocks React. This example shows a checkbox for toggling email notifications for threads.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/notifications/email-notifications.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useNotificationSettings } from \"@liveblocks/react/suspense\";\n\nfunction NotificationSettings() {\n  const [{ settings }, updateSettings] = useNotificationSettings();\n\n  return (\n    <>\n      <label>\n        Receive thread notifications by email:\n        <input\n          type=\"checkbox\"\n          checked={settings.email?.thread}\n          onChange={(e) =>\n            updateSettings({ email: { thread: e.target.checked } })\n          }\n        />\n      </label>\n      {/* Other checkboxes */}\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: UserLeftEvent Schema and Example in TypeScript\nDESCRIPTION: This snippet defines the TypeScript schema for the UserLeftEvent and provides an example of the event object. This event is triggered when a user disconnects from a room.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/webhooks.mdx#2025-04-11_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\n// Schema\ntype UserLeftEvent = {\n  type: \"userLeft\";\n  data: {\n    projectId: string;\n    roomId: string;\n    connectionId: number;\n    userId: string | null;\n    userInfo: Record<string, any> | null;\n    leftAt: string;\n    numActiveUsers: number;\n  };\n};\n\n// Example\nconst userLeftEvent = {\n  type: \"userLeft\",\n  data: {\n    projectId: \"my-project-id\",\n    roomId: \"my-room-id\",\n    connectionId: 4,\n    userId: \"a-user-id\",\n    userInfo: {\n      name: \"John Doe\",\n    },\n    leftAt: \"2021-10-06T01:45:56.558Z\",\n    numActiveUsers: 7,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Joining a Liveblocks Room in React with Redux\nDESCRIPTION: React component demonstrating how to join and leave a Liveblocks room using Redux actions. This is essential for creating a realtime collaborative experience.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/redux.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { actions } from \"@liveblocks/redux\";\n\nexport default function App() {\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(actions.enterRoom(\"room-id\"));\n\n    return () => {\n      dispatch(actions.leaveRoom(\"room-id\"));\n    };\n  }, [dispatch]);\n\n  return <Room />;\n}\n```\n\n----------------------------------------\n\nTITLE: Custom Notification Handler Implementation\nDESCRIPTION: Shows how to handle specific notification kinds and channels in the webhook endpoint, with conditional logic for custom notifications.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/what-to-check-before-enabling-a-new-notification-kind.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\n\nconst WEBHOOK_SECRET = \"YOUR_WEBHOOK_SECRET_KEY\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  if (event.type !== \"notification\") {\n    return new Response(\"This is not a notification webhook\", { status: 400 });\n  }\n\n  if (\n    event.data.channel === \"email\" &&\n    event.data.kind === \"$myCustomNotification\"\n  ) {\n    // Send an email to your user for this custom notification\n    // ...\n\n    return new Response(null, { status: 200 });\n  }\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Resolving User Data in Liveblocks Configuration\nDESCRIPTION: Shows how to implement the resolveUsers function in the Liveblocks configuration file to provide user data for the useUser hook.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/notifications/hooks.mdx#2025-04-11_snippet_4\n\nLANGUAGE: ts\nCODE:\n```\nasync function resolveUsers({ userIds }) {\n  // [\"olivier@example.com\"]\n  console.log(userIds);\n\n  return [\n    {\n      name: \"Olivier\",\n      avatar: \"https://example.com/olivier.png\",\n      color: \"red\",\n    },\n  ];\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Rectangle Component with UI Integration\nDESCRIPTION: React component implementation for the whiteboard interface, including rectangle rendering and dispatch action for rectangle creation.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-online-whiteboard-with-react-redux-and-liveblocks.mdx#2025-04-11_snippet_6\n\nLANGUAGE: jsx\nCODE:\n```\nimport { useEffect } from \"react\";\nimport \"./App.css\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { actions } from \"@liveblocks/redux\";\n\nimport { insertRectangle } from \"./store\";\n\nconst roomId = \"redux-whiteboard\";\n\nexport default function App() {\n  const shapes = useSelector((state) => state.shapes);\n  const isLoading = useSelector((state) => state.liveblocks.isStorageLoading);\n  const dispatch = useDispatch();\n\n  /* ... */\n\n  return (\n    <>\n      <div className=\"canvas\">\n        {Object.entries(shapes).map(([shapeId, shape]) => {\n          return <Rectangle key={shapeId} shape={shape} />;\n        })}\n      </div>\n      <div className=\"toolbar\">\n        <button onClick={() => dispatch(insertRectangle())}>Rectangle</button>\n      </div>\n    </>\n  );\n}\n\n/* Rectangle */\n```\n\n----------------------------------------\n\nTITLE: Advanced Liveblocks Client Configuration with Custom Headers\nDESCRIPTION: Configure the Liveblocks client with custom headers and body data for the authentication endpoint.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/nuxtjs.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\n\n// Passing custom headers and body to your endpoint\nconst client = createClient({\n  authEndpoint: async (room) => {\n    const headers = {\n      // Custom headers\n      // ...\n\n      \"Content-Type\": \"application/json\",\n    };\n\n    const body = JSON.stringify({\n      // Custom body\n      // ...\n\n      room,\n    });\n\n    const response = await fetch(\"/api/liveblocks-auth\", {\n      method: \"POST\",\n      headers,\n      body,\n    });\n\n    return await response.json();\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using useNotificationSettings Hook from @liveblocks/react\nDESCRIPTION: Illustrates the usage of the new useNotificationSettings hook from @liveblocks/react. This hook allows getting current user notification settings and updating them simultaneously.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/liveblocks-codemod/CHANGELOG.md#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n// A suspense version of this hook is available\nimport { useNotificationSettings } from \"@liveblocks/react\";\n\nconst [{ isLoading, error, settings }, updateSettings] =\n  useNotificationSettings();\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst onSave = () => {\n  updateSettings({\n    slack: {\n      textMention: true,\n    },\n  });\n};\n```\n\n----------------------------------------\n\nTITLE: Comparing Old and New Room Entry APIs in Liveblocks Client\nDESCRIPTION: Shows the transition from deprecated room entry/exit methods to the new recommended API in Liveblocks. The new API supports entering/leaving the same room multiple times, enabling connections to the same room from different parts of an application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react-ui/CHANGELOG.md#2025-04-11_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\n// Old APIs we'll no longer be recommending (but that will remain working)\nconst room = client.enter(\"my-room\", options);\nclient.getRoom(\"my-room\");\nclient.leave(\"my-room\");\n```\n\nLANGUAGE: typescript\nCODE:\n```\n// New API we'll be recommending instead\nconst { room, leave } = client.enterRoom(\"my-room\", options);\nleave();\n```\n\n----------------------------------------\n\nTITLE: Using LiveList.set Method for Element Modification\nDESCRIPTION: Example demonstrating the LiveList.set method introduced in v0.16.0, which allows setting a specific element at a given index within a LiveList.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-zustand/CHANGELOG.md#2025-04-11_snippet_17\n\nLANGUAGE: typescript\nCODE:\n```\nconst list = new LiveList([\"🦁\", \"🦊\", \"🐵\"]);\nlist.set(0, \"🐺\");\nlist.toArray(); // equals [\"🐺\", \"🦊\", \"🐵\"]\n```\n\n----------------------------------------\n\nTITLE: Using useInboxNotifications Hook with Pagination Support\nDESCRIPTION: Demonstrates how to use the `useInboxNotifications` hook with added pagination functionality to manage notifications efficiently, providing the ability to fetch additional notifications as needed.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-client/CHANGELOG.md#2025-04-11_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nconst {\n    inboxNotifications,\n    isLoading,\n    error,\n\n    // ✨ New in Liveblocks 2.9\n    fetchMore,\n    isFetchingMore,\n    hasFetchedAll,\n    fetchMoreError,\n  } = useInboxNotifications();\n```\n\n----------------------------------------\n\nTITLE: Installing Supabase Library\nDESCRIPTION: This command installs the Supabase JavaScript client library using npm.  This library is required to interact with the Supabase database from a Node.js environment.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-yjs-document-data-to-a-supabase-postgres-database.mdx#2025-04-11_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\nnpm i @supabase/supabase-js\n```\n\n----------------------------------------\n\nTITLE: Configuring Throttle Rate for LiveblocksProvider in React\nDESCRIPTION: This snippet demonstrates how to set the throttle rate for the LiveblocksProvider component to improve cursor smoothness. The throttle is set to 16ms, equivalent to 60fps animation.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/live-cursors/guide.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n<LiveblocksProvider publicApiKey={publicApiKey} throttle={16}>\n```\n\n----------------------------------------\n\nTITLE: Setting up Liveblocks Authentication in Next.js App Router\nDESCRIPTION: Creates an authentication endpoint for Liveblocks in Next.js App Router that prepares a session for the current user, gives them access to a room, and authorizes them.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-quill-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\nimport { NextRequest } from \"next/server\";\n\nconst API_KEY = \"{{SECRET_KEY}}\";\n\nconst liveblocks = new Liveblocks({\n  secret: API_KEY!,\n});\n\nexport async function POST(request: NextRequest) {\n  // Get the current user's info from your database\n  const user = {\n    id: \"charlielayne@example.com\",\n    info: {\n      name: \"Charlie Layne\",\n      color: \"#D583F0\",\n      picture: \"https://liveblocks.io/avatars/avatar-1.png\",\n    },\n  };\n\n  // Create a session for the current user\n  // userInfo is made available in Liveblocks presence hooks, e.g. useOthers\n  const session = liveblocks.prepareSession(user.id, {\n    userInfo: user.info,\n  });\n\n  // Give the user access to the room\n  const { room } = await request.json();\n  session.allow(room, session.FULL_ACCESS);\n\n  // Authorize the user and return the result\n  const { body, status } = await session.authorize();\n  return new Response(body, { status });\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Zustand Store Without Liveblocks Middleware\nDESCRIPTION: Example of a basic Zustand store setup for a to-do list application without using Liveblocks middleware. This shows the standard pattern for defining a state type and creating a store.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-prosemirror/CHANGELOG.md#2025-04-11_snippet_19\n\nLANGUAGE: typescript\nCODE:\n```\nimport create from \"zustand\";\n\ntype State = {\n  draft: string;\n  isTyping: boolean;\n  todos: Todo[];\n  setDraft: (draft: string) => void;\n  addTodo: () => void;\n  deleteTodo: (index: number) => void;\n};\n\ncreate<State>(/* ... */);\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Configuration\nDESCRIPTION: Command to create initial Liveblocks configuration file for React framework.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-tiptap.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework react\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Node Package\nDESCRIPTION: Command to install the @liveblocks/node package which is required for server-side authentication.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/express.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/node\n```\n\n----------------------------------------\n\nTITLE: Filtering Threads by Absence of Metadata\nDESCRIPTION: This snippet demonstrates how to filter threads based on the absence of specific metadata using the `useThreads` hook in Liveblocks. It shows how to filter threads that do not have a 'color' attribute set in their metadata, specifically targeting pinned threads without a color.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react/CHANGELOG.md#2025-04-11_snippet_2\n\nLANGUAGE: ts\nCODE:\n```\nuseThreads({\n  query: {\n    // Filter any \"pinned\" threads that don't have a color set\n    metadata: {\n      pinned: true,\n      color: null, // ✨\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Global Type Declaration for Liveblocks in TypeScript\nDESCRIPTION: Example showing how to define global Liveblocks types in TypeScript for better type sharing across the application. This is part of the DX improvements in Liveblocks 2.0.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-lexical/CHANGELOG.md#2025-04-11_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare global {\n  interface Liveblocks {\n    Presence: Presence;\n    Storage: Storage;\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Typing Others' Presence in Zustand with Liveblocks\nDESCRIPTION: Example showing how to use generic type parameters with Liveblocks middleware to properly type the presence information of other users in a collaborative environment.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react/CHANGELOG.md#2025-04-11_snippet_18\n\nLANGUAGE: typescript\nCODE:\n```\ntype Presence = {\n  isTyping: true;\n}\n\nconst useStore = create(\n  middleware<State, Presence>(/* ... */, {\n    client,\n    presenceMapping: { isTyping: true },\n    storageMapping: { todos: true }\n  })\n);\n\n// In your component\nuseStore(state => state.liveblocks.others[0].presence?.isTyping)\n```\n\n----------------------------------------\n\nTITLE: Retrieving Text Content with doc.getTextContent\nDESCRIPTION: Shows how to use doc.getTextContent to retrieve the text content from the root node as a string. This method returns the pure text representation of the document.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-node-lexical.mdx#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nconst textContent = await withLexicalDocument(\n  { roomId: \"my-room-id\", client: liveblocks },\n  // +++\n  async (doc) => {\n    return doc.getTextContent();\n  }\n  // +++\n);\n```\n\n----------------------------------------\n\nTITLE: Serializing Document to JSON with doc.toJSON\nDESCRIPTION: Demonstrates how to use doc.toJson to get a serialized JSON representation of the document. This is useful for serialization and deserialization of Lexical documents.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-node-lexical.mdx#2025-04-11_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nconst docAsJSON = await withLexicalDocument(\n  { roomId: \"my-room-id\", client: liveblocks },\n  // +++\n  async (doc) => {\n    return doc.toJson();\n  }\n  // +++\n);\n```\n\n----------------------------------------\n\nTITLE: Error Management in Liveblocks React Hooks\nDESCRIPTION: This snippet showcases enhanced error management in Liveblocks by allowing the useErrorListener hook to capture errors from various components like Threads, Comments, and Notifications. The approach improves the error reporting capability across all rooms with the use of LiveblocksProvider.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-core/CHANGELOG.md#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nuseErrorListener((err: LiveblocksError) => {\n  /* show toast, or notify Sentry, Datadog, etc */\n});\n```\n\n----------------------------------------\n\nTITLE: Using Toolbar.SectionInline in React-Tiptap\nDESCRIPTION: Demonstrates how to use the Toolbar.SectionInline component to add inline formatting actions like bold, italic, and underline to the toolbar.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_17\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Toolbar } from \"@liveblocks/react-tiptap\";\n\n<Toolbar editor={editor}>\n  // +++\n  <Toolbar.SectionInline />\n  // +++\n</Toolbar>;\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Avatar Stack Example\nDESCRIPTION: Command to create a new Liveblocks avatar stack project locally without an API key or Vercel deployment. This downloads and installs all necessary example code and dependencies.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/solidjs-live-avatars/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example solidjs-live-avatars --no-api-key --no-vercel\n```\n\n----------------------------------------\n\nTITLE: Converting Local URL to Localtunnel URL\nDESCRIPTION: This example shows how to replace the localhost domain with the generated localtunnel domain to create a publicly accessible webhook endpoint URL for testing.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-storage-document-data-to-a-vercel-postgres-database.mdx#2025-04-11_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\n# Take your local URL\nhttp://localhost:3000/api/liveblocks-database-sync\n\n# Replace localhost with the generated domain, then copy it\nhttps://my-localtunnel-url.loca.lt/api/liveblocks-database-sync\n```\n\n----------------------------------------\n\nTITLE: Deploying Text Editor to Vercel\nDESCRIPTION: Command to create and deploy the collaborative text editor project to Vercel. This sets up both local development and Vercel deployment configurations.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-blocknote/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-blocknote --vercel\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Link Components in Comments\nDESCRIPTION: Example of customizing link components within comments using the components prop.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/primitives.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { CommentData } from \"@liveblocks/client\";\nimport { Comment, CommentBodyLinkProps } from \"@liveblocks/react-ui/primitives\";\n\n// Render a custom comment body\nfunction MyComment({ comment }: { comment: CommentData }) {\n  return (\n    <div>\n      <Comment.Body\n        body={comment.body}\n        // +++\n        components={{\n          Link,\n        }}\n        // +++\n      />\n    </div>\n  );\n}\n\n// +++\n// Render a purple link in the comment, e.g. \"https://liveblocks.io\"\nfunction Link({ href, children }: CommentBodyLinkProps) {\n  return (\n    <Comment.Link href={href} style={{ color: \"purple\", fontWeight: 700 }}>\n      {children}\n    </Comment.Link>\n  );\n}\n// +++\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks 2.15 Using NPX\nDESCRIPTION: Command to upgrade all Liveblocks packages to version 2.15 using the create-liveblocks-app package.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.15.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --upgrade\n```\n\n----------------------------------------\n\nTITLE: Switching from createClient to LiveblocksProvider in v2.0\nDESCRIPTION: Example showing the migration from using createClient function to the new LiveblocksProvider component in Liveblocks v2.0, which provides a more React-friendly way to configure Liveblocks.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/liveblocks-codemod/CHANGELOG.md#2025-04-11_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\n// ❌ Before\nconst client = createClient(/* options */);\n\n// ✅ After\n<LiveblocksProvider /* options */>\n  <App />\n</LiveblocksProvider>\n```\n\n----------------------------------------\n\nTITLE: Using pagination with useThreads in React\nDESCRIPTION: Shows how to use the new pagination support in the useThreads and useUserThreads_experimental hooks, including new properties for fetching more data.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-core/CHANGELOG.md#2025-04-11_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\nconst {\n  threads,\n  isLoading,\n  error,\n\n  // ✨ New in Liveblocks 2.9\n  fetchMore,\n  isFetchingMore,\n  hasFetchedAll,\n  fetchMoreError,\n} = useThreads({ query });\n```\n\n----------------------------------------\n\nTITLE: Example ThreadMarkedAsResolvedEvent payload in TypeScript\nDESCRIPTION: Provides an example payload for the ThreadMarkedAsResolvedEvent, illustrating the structure and values of the event data. The example includes sample values for projectId, roomId, threadId, updatedAt, and updatedBy. This example helps to understand the expected format of the event.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/webhooks.mdx#2025-04-11_snippet_25\n\nLANGUAGE: typescript\nCODE:\n```\nconst ThreadMarkedAsResolvedEvent = {\n  type: \"threadMarkedAsResolved\",\n  data: {\n    projectId: \"my-project-id\",\n    roomId: \"my-room-id\",\n    threadId: \"my-thread-id\",\n    updatedAt: \"2021-10-06T01:45:56.558Z\",\n    updatedBy: \"my-user-id\",\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting up Liveblocks client in TypeScript\nDESCRIPTION: Code snippet demonstrating how to create a Liveblocks client using the createClient function. The client is responsible for communicating with the backend.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/svelte.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n```\n\n----------------------------------------\n\nTITLE: Using Notification Settings Hook in React\nDESCRIPTION: Shows how to implement notification settings management using the useNotificationSettings React hook for getting and updating settings.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node/CHANGELOG.md#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useNotificationSettings } from \"@liveblocks/react\";\n\nconst [{ isLoading, error, settings }, updateSettings] = useNotificationSettings();\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst onSave = () => {\n  updateSettings({\n    slack: {\n      textMention: true,\n    },\n  });\n};\n```\n\n----------------------------------------\n\nTITLE: Creating Toggle Buttons with Text Format in React-Lexical\nDESCRIPTION: Shows how to create toggle buttons using isTextFormatActive helper with Toolbar.Toggle component.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_41\n\nLANGUAGE: tsx\nCODE:\n```\nimport { FORMAT_TEXT_COMMAND } from \"lexical\";\nimport { useLexicalComposerContext } from \"@lexical/react/LexicalComposerContext\";\n// +++\nimport { isTextFormatActive, Toolbar } from \"@liveblocks/react-lexical\";\n// +++\n\nfunction CustomToggleButton() {\n  const [editor] = useLexicalComposerContext();\n\n  return (\n    <Toolbar.Toggle\n      name=\"Bold\"\n      icon={<strong>B️</strong>}\n      // +++\n      active={isTextFormatActive(editor, \"bold\")}\n      // +++\n      onClick={() => editor.dispatchCommand(FORMAT_TEXT_COMMAND, \"bold\")}\n    />\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks configuration with create-liveblocks-app\nDESCRIPTION: Command to initialize the Liveblocks configuration file using the create-liveblocks-app CLI tool, setting up the framework as React.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-codemirror-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework react\n```\n\n----------------------------------------\n\nTITLE: Typing Others' Presence in Zustand with Liveblocks Middleware\nDESCRIPTION: Example showing how to type the 'others' presence when using Zustand with Liveblocks middleware. This demonstrates how to properly type the presence information of other users in the room.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-redux/CHANGELOG.md#2025-04-11_snippet_21\n\nLANGUAGE: typescript\nCODE:\n```\ntype Presence = {\n  isTyping: true;\n}\n\nconst useStore = create(\n  middleware<State, Presence>(/* ... */, {\n    client,\n    presenceMapping: { isTyping: true },\n    storageMapping: { todos: true }\n  })\n);\n\n// In your component\nuseStore(state => state.liveblocks.others[0].presence?.isTyping)\n```\n\n----------------------------------------\n\nTITLE: Default Composer Component Structure Changes in Liveblocks 2.8\nDESCRIPTION: Comparison of the default Composer component's HTML structure before and after Liveblocks 2.8 upgrade.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.8.mdx#2025-04-11_snippet_4\n\nLANGUAGE: html\nCODE:\n```\n<!-- ❌ Before - Liveblocks 2.7 -->\n<form class=\"lb-root lb-composer lb-composer-form\">\n  <!-- The editor and its controls -->\n</form>\n\n<!-- ✅ After - Liveblocks 2.8 -->\n<form class=\"lb-root lb-composer lb-composer-form\">\n  <div class=\"lb-composer-editor-container\">\n    <!-- The editor and its controls -->\n  </div>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Setting Up Liveblocks Authentication with Pages Router\nDESCRIPTION: Implementation of a Liveblocks authentication endpoint using Next.js Pages API routes. Creates a user session and authorizes access to a Liveblocks room.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-monaco-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_2\n\nLANGUAGE: ts\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\nimport type { NextApiRequest, NextApiResponse } from \"next\";\n\nconst API_KEY = \"{{SECRET_KEY}}\";\n\nconst liveblocks = new Liveblocks({\n  secret: API_KEY!,\n});\n\nexport default async function handler(\n  request: NextApiRequest,\n  response: NextApiResponse\n) {\n  // Get the current user's info from your database\n  const user = {\n    id: \"charlielayne@example.com\",\n    info: {\n      name: \"Charlie Layne\",\n      color: \"#D583F0\",\n      picture: \"https://liveblocks.io/avatars/avatar-1.png\",\n    },\n  };\n\n  // Create a session for the current user\n  // userInfo is made available in Liveblocks presence hooks, e.g. useOthers\n  const session = liveblocks.prepareSession(user.id, {\n    userInfo: user.info,\n  });\n\n  // Give the user access to the room\n  const { room } = request.body;\n  session.allow(room, session.FULL_ACCESS);\n\n  // Authorize the user and return the result\n  const { status, body } = await session.authorize();\n  response.status(status).send(body);\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring User Resolution in LiveblocksProvider\nDESCRIPTION: Setup for resolving users and mention suggestions in the Liveblocks provider component\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/text-editor/tiptap.mdx#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { LiveblocksProvider } from \"@liveblocks/react/suspense\";\n\nfunction App() {\n  return (\n    <LiveblocksProvider\n      resolveUsers={async ({ userIds }) => {\n        // Return user info from their `userIds`\n        // ...\n      }}\n      resolveMentionSuggestions={async ({ text, roomId }) => {\n        // Return suggestions from the search `text`\n        // ...\n      }}\n    >\n      {/* children */}\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Dependencies for Liveblocks and Quill\nDESCRIPTION: Command to install required npm packages including Liveblocks client libraries, Yjs, Quill, and related dependencies.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-quill-react.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/react @liveblocks/yjs yjs quill quill-cursors react-quill y-quill\n```\n\n----------------------------------------\n\nTITLE: Managing Notification Settings with React Hooks\nDESCRIPTION: Shows how to use the useNotificationSettings hook from @liveblocks/react to retrieve and update user notification settings in a React component. It also demonstrates error and loading state handling.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/create-liveblocks-app/CHANGELOG.md#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n// A suspense version of this hook is available\nimport { useNotificationSettings } from \"@liveblocks/react\";\n\nconst [{ isLoading, error, settings }, updateSettings] =\n  useNotificationSettings();\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst onSave = () => {\n  updateSettings({\n    slack: {\n      textMention: true,\n    },\n  });\n};\n```\n\n----------------------------------------\n\nTITLE: Type Definition Update - TypeScript\nDESCRIPTION: Changes to type definitions where Others<P, U> type is deprecated in favor of readonly User<P, U>[] and UserMeta[\"info\"] can no longer be a scalar value.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-prosemirror/CHANGELOG.md#2025-04-11_snippet_17\n\nLANGUAGE: typescript\nCODE:\n```\n// Deprecated\ntype OthersType = Others<P, U>\n\n// New usage\ntype OthersType = readonly User<P, U>[]\n```\n\n----------------------------------------\n\nTITLE: Configuring Liveblocks Provider with Auth Endpoint\nDESCRIPTION: Set up the Liveblocks Provider on the front end using the auth endpoint.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/nextjs.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n<LiveblocksProvider authEndpoint=\"/api/liveblocks-auth\">\n```\n\n----------------------------------------\n\nTITLE: Accessing Thread Creation Date in Liveblocks 1.9\nDESCRIPTION: This code snippet shows how to access the createdAt property of a thread in Liveblocks 1.9, where the date is now returned as a Date object.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/1.9.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n// ✅ After - Liveblocks 1.9\nconst { threads } = useThreads();\n\n// Date <Fri Dec 15 2023 14:15:22 GMT+0000 (Greenwich Mean Time)>\nconsole.log(threads[0].createdAt);\n```\n\n----------------------------------------\n\nTITLE: LocalTunnel URL Format Example\nDESCRIPTION: Example showing how to transform a localhost URL to a LocalTunnel URL for webhook testing.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-storage-document-data-to-a-supabase-postgres-database.mdx#2025-04-11_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\n# Take your local URL\nhttp://localhost:3000/api/liveblocks-database-sync\n\n# Replace localhost with the generated domain, then copy it\nhttps://my-localtunnel-url.loca.lt/api/liveblocks-database-sync\n```\n\n----------------------------------------\n\nTITLE: Setting Initial Presence State in RoomProvider\nDESCRIPTION: Updated RoomProvider configuration that sets the initial typing state to false for new users joining the collaborative session.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-react-and-liveblocks.mdx#2025-04-11_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\n/* WhoIsHere */\n/* SomeoneIsTyping */\n/* TodoList */\n\nexport default function Page() {\n  return (\n    <LiveblocksProvider publicApiKey={\"{{SECRET_KEY}}\"}>\n      // +++\n      <RoomProvider id=\"my-room\" initialPresence={{ isTyping: false }}>\n        // +++\n        <ClientSideSuspense fallback={<div>Loading…</div>}>\n          <ToDoList />\n        </ClientSideSuspense>\n      </RoomProvider>\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Defining a Basic Zustand Store Without Liveblocks Middleware in TypeScript\nDESCRIPTION: Example of how a Zustand store looks without Liveblocks middleware integration, defining a todo list state management structure with types for state and actions.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-yjs/CHANGELOG.md#2025-04-11_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\nimport create from \"zustand\";\n\ntype State = {\n  draft: string;\n  isTyping: boolean;\n  todos: Todo[];\n  setDraft: (draft: string) => void;\n  addTodo: () => void;\n  deleteTodo: (index: number) => void;\n};\n\ncreate<State>(/* ... */);\n```\n\n----------------------------------------\n\nTITLE: Using Generic Type Parameters with Liveblocks Zustand Middleware (TypeScript)\nDESCRIPTION: Advanced example showing how to type the presence data with a custom Presence type when using the Liveblocks middleware with Zustand, enabling proper typing of other users' presence data.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react-ui/CHANGELOG.md#2025-04-11_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\ntype Presence = {\n  isTyping: true;\n}\n\nconst useStore = create(\n  middleware<State, Presence>(/* ... */, {\n    client,\n    presenceMapping: { isTyping: true },\n    storageMapping: { todos: true }\n  })\n);\n\n// In your component\nuseStore(state => state.liveblocks.others[0].presence?.isTyping)\n```\n\n----------------------------------------\n\nTITLE: Debugging LSON Type Compatibility with TypeScript\nDESCRIPTION: A debugging technique that uses TypeScript's type checking to identify exactly why a custom type is not compatible with LsonObject.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/errors/Storage.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { LsonObject } from \"@liveblocks/client\";\n\ndeclare global {\n  interface Liveblocks {\n    Storage: MyStorage;\n  }\n}\n\n// Quick debugging snippet to find root cause\nconst xxx: LsonObject = {} as MyStorage;\n//    ^?\n//    The error will appear here\n```\n\n----------------------------------------\n\nTITLE: Rendering Community Links in JSX\nDESCRIPTION: This snippet uses a ListGrid with DocsCard components to display community links for Liveblocks, including social media and development platforms.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/index.mdx#2025-04-11_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\n<ListGrid columns={3}>\n  <DocsCard\n    title=\"X\"\n    href=\"https://x.com/liveblocks\"\n    description=\"Follow us on X for the latest news and updates.\"\n    visual={<DocsXIcon />}\n    openInNewWindow\n  />\n  <DocsCard\n    title=\"Discord\"\n    href=\"https://liveblocks.io/discord\"\n    description=\"Join hundreds of developers building with Liveblocks.\"\n    visual={<DocsDiscordIcon />}\n    openInNewWindow\n  />\n  <DocsCard\n    title=\"GitHub\"\n    href=\"https://github.com/liveblocks/liveblocks\"\n    description=\"Follow progress and contribute to the codebase.\"\n    visual={<DocsGithubIcon />}\n    openInNewWindow\n  />\n</ListGrid>\n```\n\n----------------------------------------\n\nTITLE: Installing Collaborative Text Editor Example with Liveblocks CLI\nDESCRIPTION: Command to create a new Liveblocks project with the collaborative text editor example and automatically configure the API key.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-yjs-quill/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-yjs-quill --api-key\n```\n\n----------------------------------------\n\nTITLE: Event Handling with User Property in TypeScript\nDESCRIPTION: Example showing new user property in broadcast event messages for @liveblocks/client package.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_23\n\nLANGUAGE: tsx\nCODE:\n```\nroom.subscribe(\"event\", ({ event, user }) => {\n  //                              ^^^^ New!\n});\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Packages\nDESCRIPTION: Command to install the required Liveblocks client and React packages that provide real-time collaboration capabilities.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-react-and-liveblocks.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/react\n```\n\n----------------------------------------\n\nTITLE: Basic Zustand Store Definition Without Liveblocks Middleware\nDESCRIPTION: Example of a standard Zustand store definition for a To-do list application without Liveblocks integration, showing the base state type definition with todos, draft text, and typing status.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-client/CHANGELOG.md#2025-04-11_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\nimport create from \"zustand\";\n\ntype State = {\n  draft: string;\n  isTyping: boolean;\n  todos: Todo[];\n  setDraft: (draft: string) => void;\n  addTodo: () => void;\n  deleteTodo: (index: number) => void;\n};\n\ncreate<State>(/* ... */);\n```\n\n----------------------------------------\n\nTITLE: Filtering Threads by Absence of Metadata in @liveblocks/react\nDESCRIPTION: Shows how to use the new filtering capability in useThreads hook to filter threads by the absence of certain metadata attributes.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/liveblocks-codemod/CHANGELOG.md#2025-04-11_snippet_4\n\nLANGUAGE: ts\nCODE:\n```\nuseThreads({\n  query: {\n    // Filter any \"pinned\" threads that don't have a color set\n    metadata: {\n      pinned: true,\n      color: null, // ✨\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Opening FloatingComposer Programmatically\nDESCRIPTION: Shows how to programmatically open the FloatingComposer using Lexical commands.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_23\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useLexicalComposerContext } from \"@lexical/react/LexicalComposerContext\";\nimport { OPEN_FLOATING_COMPOSER_COMMAND } from \"@liveblocks/react-lexical\";\n\nfunction Toolbar() {\n  const [editor] = useLexicalComposerContext();\n\n  return (\n    <button\n      onClick={() => {\n        editor.dispatchCommand(OPEN_FLOATING_COMPOSER_COMMAND, undefined);\n      }}\n    >\n      💬 New comment\n    </button>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Project with Liveblocks CLI\nDESCRIPTION: Command to create a new Liveblocks project with the advanced text editor example. This automatically downloads the example and helps set up the API key through browser authentication.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-yjs-blocknote-advanced/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-yjs-blocknote-advanced --api-key\n```\n\n----------------------------------------\n\nTITLE: Implementing Composer Suggestions Container in React\nDESCRIPTION: Contains suggestion elements within Composer.Editor component. Supports asChild property for element replacement.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_15\n\nLANGUAGE: tsx\nCODE:\n```\n<Composer.Suggestions>{/* ... */}<Composer.Suggestions>\n```\n\n----------------------------------------\n\nTITLE: Installing Collaborative Code Editor Project\nDESCRIPTION: Command to create a new Liveblocks project using the Monaco editor template. This automatically sets up the project and configures the API key through browser authentication.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-yjs-monaco/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-yjs-monaco --api-key\n```\n\n----------------------------------------\n\nTITLE: Using Liveblocks methods in Svelte\nDESCRIPTION: A Svelte component demonstrating how to use Liveblocks subscriptions, specifically the 'others' subscription to track other users in the room. It also shows proper cleanup using onDestroy.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/svelte.mdx#2025-04-11_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\n<script>\n  import { onDestroy } from \"svelte\";\n  import { room } from \"./room.js\";\n\n  let others = room.getOthers();\n\n  const unsubscribeOthers = room.subscribe(\"others\", (updatedOthers) => {\n    others = updatedOthers;\n  });\n\n  onDestroy(() => {\n    unsubscribeOthers();\n  });\n</script>\n\n<div>There are {others.length} other user(s) online</div>\n```\n\n----------------------------------------\n\nTITLE: Using Pagination with useThreads Hook\nDESCRIPTION: Shows how to use the pagination features introduced in Liveblocks 2.9 with the useThreads hook in React.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-lexical/CHANGELOG.md#2025-04-11_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nconst {\n  threads,\n  isLoading,\n  error,\n\n  // ✨ New in Liveblocks 2.9\n  fetchMore,\n  isFetchingMore,\n  hasFetchedAll,\n  fetchMoreError,\n} = useThreads({ query });\n```\n\n----------------------------------------\n\nTITLE: Deploying Collaborative Text Editor to Vercel\nDESCRIPTION: Command to create and deploy the collaborative text editor example to Vercel using the Liveblocks CLI.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-yjs-quill/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-yjs-quill --vercel\n```\n\n----------------------------------------\n\nTITLE: Deploying Collaborative Spreadsheet to Vercel\nDESCRIPTION: Command to create and deploy the collaborative spreadsheet project to Vercel. This will download the example and initiate the Vercel deployment process.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-spreadsheet-advanced/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-spreadsheet-advanced --vercel\n```\n\n----------------------------------------\n\nTITLE: Custom Composer Implementation\nDESCRIPTION: Implementation of a custom composer using useComposer hook with mention functionality.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_27\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Composer, useComposer } from \"@liveblocks/react-ui/primitives\";\nimport { useCreateThread } from \"@liveblocks/react/suspense\";\n\nfunction MyComposer() {\n  const createThread = useCreateThread();\n\n  return (\n    <Composer.Form\n      onComposerSubmit={({ body, attachments }) => {\n        const thread = createThread({\n          body,\n          attachments,\n          metadata: {},\n        });\n      }}\n    >\n      <Editor />\n    </Composer.Form>\n  );\n}\n\nfunction Editor() {\n  // +++\n  const { createMention } = useComposer();\n  // +++\n\n  return (\n    <>\n      <Composer.Editor components={/* Your custom component parts */} />\n      // +++\n      <button onClick={createMention}>Add mention</button>\n      // +++\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Importing styles in layout file for BlockNote and Liveblocks\nDESCRIPTION: Layout file that imports all necessary CSS files for BlockNote, Liveblocks UI components, and custom global styles to ensure proper styling of the collaborative editor.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-blocknote.mdx#2025-04-11_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nimport \"@blocknote/core/fonts/inter.css\";\nimport \"@blocknote/mantine/style.css\";\nimport \"@liveblocks/react-ui/styles.css\";\nimport \"@liveblocks/react-ui/styles/dark/media-query.css\";\nimport \"@liveblocks/react-tiptap/styles.css\";\nimport \"./globals.css\";\n```\n\n----------------------------------------\n\nTITLE: Using useUpdateNotificationSettings Hook from @liveblocks/react\nDESCRIPTION: Shows how to use the useUpdateNotificationSettings hook from @liveblocks/react for updating user notification settings, such as in an unsubscribe button scenario.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/liveblocks-codemod/CHANGELOG.md#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n// A suspense version of this hook is available\nimport { useUpdateNotificationSettings } from \"@liveblocks/react\";\n\nconst updateSettings = useUpdateNotificationSettings();\n\nconst onUnsubscribe = () => {\n  updateSettings({\n    slack: {\n      thread: false,\n    },\n  });\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling preventUnsavedChanges in React\nDESCRIPTION: Shows how to enable the preventUnsavedChanges option in React to prevent browser tabs from being closed while local changes are not yet synchronized.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-core/CHANGELOG.md#2025-04-11_snippet_8\n\nLANGUAGE: jsx\nCODE:\n```\n<LiveblocksProvider preventUnsavedChanges />\n```\n\n----------------------------------------\n\nTITLE: Installing Collaborative Text Editor Example with Liveblocks CLI\nDESCRIPTION: Command to set up the collaborative text editor example using the Liveblocks CLI. It downloads the example and automatically retrieves the API key from the user's Liveblocks account.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-lexical/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-lexical --api-key\n```\n\n----------------------------------------\n\nTITLE: Defining User Metadata Types in Liveblocks Config\nDESCRIPTION: TypeScript type definitions for user metadata in the Liveblocks configuration file. This defines the structure of user information that will be attached to users.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/remix.mdx#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare global\n  interface Liveblocks {\n    UserMeta: {\n      id: string;\n\n      // Example, use any JSON-compatible data in your metadata\n      info: {\n        name: string;\n        avatar: string;\n        colors: string[];\n      }\n    }\n\n    // Other type definitions\n    // ...\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Client Package via NPM\nDESCRIPTION: Command to install the @liveblocks/client package using npm package manager\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-client/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client\n```\n\n----------------------------------------\n\nTITLE: Creating React Email Components\nDESCRIPTION: Demonstrates how to create React-based email components using the email data from Liveblocks. Shows basic email template structure with author and content display.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-send-email-notifications-for-unread-text-editor-mentions.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nconst email = (\n  <div>\n    <div>\n      @{emailData.mention.author.id} at {emailData.mention.createdAt}\n    </div>\n    <div>{emailData.mention.reactContent}</div>\n  </div>\n);\n```\n\n----------------------------------------\n\nTITLE: Real-world Implementation of resolveUsers with API Call\nDESCRIPTION: A practical example showing how to implement resolveUsers by fetching user data from a backend API. This approach is recommended for real applications where user data is stored in a database.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-add-users-to-liveblocks-comments.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n<LiveblocksProvider\n  resolveUsers={async ({ userIds }) => {\n    // Get users from your back end\n    const users = await __fetchUsers__(userIds);\n\n    // Return a list of users\n    return users;\n  }}\n\n  // ...\n/>;\n```\n\n----------------------------------------\n\nTITLE: Liveblocks Context Creation API\nDESCRIPTION: API for creating LiveblocksContext and RoomContext with resolvers for users, mentions, and room information.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG.md#2025-04-11_snippet_15\n\nLANGUAGE: TypeScript\nCODE:\n```\ncreateLiveblocksContext({\n  resolveUsers,\n  resolveMentionSuggestions,\n  resolveRoomsInfo\n})\n```\n\n----------------------------------------\n\nTITLE: Styling Live Cursors with CSS\nDESCRIPTION: This CSS snippet provides styles for the live cursors in the editor including the caret and label. It sets up visual indicators for remote users editing the document.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-tiptap-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_9\n\nLANGUAGE: css\nCODE:\n```\n/* Give a remote user a caret */\n.collaboration-cursor__caret {\n  border-left: 1px solid #0d0d0d;\n  border-right: 1px solid #0d0d0d;\n  margin-left: -1px;\n  margin-right: -1px;\n  pointer-events: none;\n  position: relative;\n  word-break: normal;\n}\n\n/* Render the username above the caret */\n.collaboration-cursor__label {\n  font-style: normal;\n  font-weight: 600;\n  left: -1px;\n  line-height: normal;\n  position: absolute;\n  user-select: none;\n  white-space: nowrap;\n  font-size: 14px;\n  color: #fff;\n  top: -1.4em;\n  border-radius: 6px;\n  border-bottom-left-radius: 0;\n  padding: 2px 6px;\n  pointer-events: none;\n}\n```\n\n----------------------------------------\n\nTITLE: Typing Presence in Zustand Store with Liveblocks Middleware\nDESCRIPTION: Demonstrates how to type the 'others' presence when using Liveblocks middleware with Zustand, allowing for type-safe access to presence data.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/create-liveblocks-app/CHANGELOG.md#2025-04-11_snippet_17\n\nLANGUAGE: typescript\nCODE:\n```\ntype Presence = {\n  isTyping: true;\n}\n\nconst useStore = create(\n  middleware<State, Presence>(/* ... */, {\n    client,\n    presenceMapping: { isTyping: true },\n    storageMapping: { todos: true }\n  })\n);\n\n// In your component\nuseStore(state => state.liveblocks.others[0].presence?.isTyping)\n```\n\n----------------------------------------\n\nTITLE: Using AI Toolbar in @liveblocks/react-tiptap\nDESCRIPTION: Demonstrates how to use the new AI toolbar components and utilities in the text editor, available in private beta. This includes enabling AI features and using the AiToolbar component.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/liveblocks-codemod/CHANGELOG.md#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\n// Enable AI features\nuseLiveblocksExtension({ ai: true });\n\n// Use AI Toolbar component\n<AiToolbar>\n  <AiToolbar.Suggestion />\n  <AiToolbar.SuggestionsSeparator />\n</AiToolbar>\n\n// Use askAi command\neditor.commands.askAi(\"Explain this text\")\n```\n\n----------------------------------------\n\nTITLE: Adding Comments to Existing Thread\nDESCRIPTION: Demonstrates how to add additional comments to an existing thread, including user ID, creation timestamp, and comment body structure.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-migrate-to-liveblocks-comments.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst comment = await liveblocks.createComment({\n  roomId,\n  threadId: thread.id,\n\n  data: {\n    userId: \"pierre@example.com\",\n    createdAt: new Date(),\n    body: {\n      version: 1,\n      content: [\n      ],\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Packages for Redux Integration\nDESCRIPTION: Command to install the necessary Liveblocks packages for Redux integration. It's important to use the same version for all packages.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/redux.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/redux\n```\n\n----------------------------------------\n\nTITLE: Updating Client Access with useClient Hook\nDESCRIPTION: This code snippet shows how to update components that directly accessed the Liveblocks client to use the useClient hook instead.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.0.mdx#2025-04-11_snippet_15\n\nLANGUAGE: tsx\nCODE:\n```\n// ❌ Before\nimport { client } from \"./liveblocks.config\";\n\nfunction MyComponent() {\n  doSomethingWith(client);\n}\n```\n\nLANGUAGE: tsx\nCODE:\n```\n// ✅ After\nimport { useClient } from \"@liveblocks/react\"; // or\nimport { useClient } from \"@liveblocks/react/suspense\";\n\nfunction MyComponent() {\n  const client = useClient();\n  doSomethingWith(client);\n}\n```\n\n----------------------------------------\n\nTITLE: Comparing Old and New Room Entry APIs in TypeScript\nDESCRIPTION: Demonstrates the transition from deprecated room entry/exit APIs to the new recommended approach using enterRoom() which returns both room and leave function.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/liveblocks-codemod/CHANGELOG.md#2025-04-11_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\n// Old APIs we'll no longer be recommending (but that will remain working)\nconst room = client.enter(\"my-room\", options);\nclient.getRoom(\"my-room\");\nclient.leave(\"my-room\");\n```\n\nLANGUAGE: typescript\nCODE:\n```\n// New API we'll be recommending instead\nconst { room, leave } = client.enterRoom(\"my-room\", options);\nleave();\n```\n\n----------------------------------------\n\nTITLE: Initializing RoomProvider with LiveObject and LiveList in React\nDESCRIPTION: This snippet demonstrates how to initialize a RoomProvider with initial storage containing a LiveObject and a nested LiveList.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/0.18.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n<RoomProvider\n  id=\"my-room\"\n  initialPresence={/* ... */}\n  initialStorage={{\n    scientist: new LiveObject({\n      firstName: \"Ada\",\n      lastName: \"Lovelace\",\n      pets: new LiveList([\"🐶\", \"🐈\"]),\n    }),\n  }}\n>\n  <App />\n</RoomProvider>\n```\n\n----------------------------------------\n\nTITLE: Room Context Creation in Liveblocks (Before v2.0)\nDESCRIPTION: The legacy approach for creating a room context with typed presence and storage in Liveblocks before version 2.0.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-lexical/CHANGELOG.md#2025-04-11_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\n// ❌ Before\nexport const {\n  suspense: {\n    RoomProvider,\n    useRoom,\n    // etc\n  },\n} = createRoomContext<Presence, Storage>(client);\n```\n\n----------------------------------------\n\nTITLE: Adding resolveUsers Function to LiveblocksProvider in React\nDESCRIPTION: This code demonstrates how to implement the resolveUsers function in LiveblocksProvider to provide user information for the Text Editor. The function receives user IDs and returns user metadata including name, color, and avatar.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-add-users-to-liveblocks-text-editor.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n<LiveblocksProvider\n  resolveUsers={async ({ userIds }) => {\n    // [\"marc@example.com\", ...]\n    console.log(userIds);\n\n    // Return a list of users\n    return [\n      {\n        name: \"Marc\",\n        color: \"#00ff00\",\n        avatar: \"https://example.com/marc.png\",\n\n        // Your custom metadata\n        // ...\n      },\n      // ...\n    ];\n  }}\n\n  // ...\n/>;\n```\n\n----------------------------------------\n\nTITLE: Typing Presence Data in Zustand with Liveblocks\nDESCRIPTION: Example demonstrating how to type the presence data for other users with the TPresence generic argument when using Liveblocks with Zustand.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node/CHANGELOG.md#2025-04-11_snippet_20\n\nLANGUAGE: typescript\nCODE:\n```\ntype Presence = {\n  isTyping: true;\n}\n\nconst useStore = create(\n  middleware<State, Presence>(/* ... */, {\n    client,\n    presenceMapping: { isTyping: true },\n    storageMapping: { todos: true }\n  })\n);\n\n// In your component\nuseStore(state => state.liveblocks.others[0].presence?.isTyping)\n```\n\n----------------------------------------\n\nTITLE: Parent-Child Component State Synchronization Example\nDESCRIPTION: Example demonstrating potential state synchronization issues between parent and child components when using Liveblocks storage without proper batching.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/troubleshooting.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Parent() {\n  const shapes = useStorage((root) => root.shapes);\n  return shapes.map(({ id }) => <Child key={id} id={id} />);\n}\n\nfunction Child({ id }) {\n  const shape = useStorage((root) => root.shapes.get(id));\n  return <Shape x={shape.x} y={shape.y} />;\n}\n```\n\n----------------------------------------\n\nTITLE: Extending Default FloatingToolbar Implementation in React\nDESCRIPTION: Example showing how to extend the default FloatingToolbar by adding custom content before and after the default buttons using the before and after props.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_22\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Toolbar } from \"@liveblocks/react-tiptap\";\nimport { Icon } from \"@liveblocks/react-ui\";\n\n<FloatingToolbar\n  editor={editor}\n  before={<>I'm at the start</>}\n  after={\n    <Toolbar.Button\n      name=\"Help\"\n      icon={<Icon.QuestionMark />}\n      shortcut=\"CMD-H\"\n      onClick={() => console.log(\"help\")}\n    />\n  }\n/>;\n```\n\n----------------------------------------\n\nTITLE: Overriding Strings for Specific Liveblocks Components\nDESCRIPTION: This React component example demonstrates how to override strings for a specific component, in this case changing the placeholder text for the Composer component.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/styling-and-customization.mdx#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Composer } from \"@liveblocks/react-ui\";\n\nfunction Component() {\n  return (\n    <Composer\n      overrides={{\n        COMPOSER_PLACEHOLDER: \"Reply to thread…\",\n      }}\n    />\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Adding User Metadata during Authentication\nDESCRIPTION: Updates the authentication endpoint to include user metadata (name, avatar, and colors) when preparing the session.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/remix.mdx#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\n// Get the current user from your database\nconst user = __getUserFromDB__(request);\n\n// Start an auth session inside your endpoint\nconst session = liveblocks.prepareSession(\n  user.id,\n  {\n    userInfo: {\n      name: user.name,\n      avatar: user.avatarUrl,\n      colors: user.colorArray,\n    }\n  }\n);\n```\n\n----------------------------------------\n\nTITLE: Setting Large Message Strategy in LiveblocksProvider\nDESCRIPTION: Configures the large message handling strategy in the LiveblocksProvider component for React applications.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_9\n\nLANGUAGE: JSX\nCODE:\n```\n<LiveblocksProvider largeMessageStrategy=\"split\">\n  {/* ... */}\n</LiveblocksProvider>\n```\n\n----------------------------------------\n\nTITLE: Handling Notification Event in TypeScript\nDESCRIPTION: Example of a notification event object sent when a user receives a new or updated inbox notification. This snippet shows the structure of the event data received by the webhook endpoint.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/notifications/email-notifications.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst event = {\n  type: \"notification\",\n  data: {\n    channel: \"email\",\n    kind: \"$myCustomNotification\",\n    projectId: \"my-project-id\",\n    roomId: \"my-room-id\",\n    userId: \"my-user-id\",\n    inboxNotificationId: \"in_xt3p7ak...\",\n    createdAt: \"2021-10-06T01:45:56.558Z\",\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks, Yjs, and CodeMirror dependencies\nDESCRIPTION: This command installs the necessary npm packages for setting up a collaborative CodeMirror editor with Liveblocks and Yjs.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-codemirror-javascript.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/yjs yjs codemirror @codemirror/lang-javascript y-codemirror.next\n```\n\n----------------------------------------\n\nTITLE: Installing Live Cursors Example with create-liveblocks-app\nDESCRIPTION: Command to create a new Liveblocks project with live cursors functionality. This automatically downloads the example and helps set up the API key through browser authentication.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-live-cursors/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-live-cursors --api-key\n```\n\n----------------------------------------\n\nTITLE: Checking Thread Activity Status in React-Lexical\nDESCRIPTION: Shows how to use the useIsThreadActive hook to determine if a thread annotation is selected in the editor. Must be used within a LiveblocksPlugin context.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_39\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useIsThreadActive } from \"@liveblocks/react-lexical\";\n\nconst isActive = useIsThreadActive(thread.id);\n```\n\n----------------------------------------\n\nTITLE: Timestamp Component Integration with Thread Comments\nDESCRIPTION: Example demonstrating how to use Timestamp component within a thread comments interface to display creation times.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_21\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ThreadData, Timestamp } from \"@liveblocks/react-ui\";\n\nfunction MyComments({ thread }: { thread: ThreadData }) {\n  return (\n    <>\n      {thread.comments.map((comment) => (\n        <div key={comment.id}>\n          <Timestamp date={comment.createdAt} />\n          <Comment.Body body={comment.body} components={/* ... */} />\n        </div>\n      ))}\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Live Cursors Example Project\nDESCRIPTION: Command to create a new Liveblocks project with the Vue.js live cursors example. This will download the example code and help set up the API key automatically through the browser.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/vuejs-live-cursors/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example vuejs-live-cursors --api-key\n```\n\n----------------------------------------\n\nTITLE: Integrating Liveblocks Room in Next.js Page\nDESCRIPTION: Next.js page component that incorporates the Liveblocks Room and Editor components.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-blocknote.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Room } from \"./Room\";\nimport { Editor } from \"./Editor\";\n\nexport default function Page() {\n  return (\n    <Room>\n      <Editor/>\n    </Room>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Zustand Migration Code Examples\nDESCRIPTION: Code diff examples showing migration patterns from Zustand v3 to v4, including import changes and type modifications for Liveblocks integration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG.md#2025-04-11_snippet_23\n\nLANGUAGE: typescript\nCODE:\n```\ncreate<WithLiveblocks<MyState, ...>>()(liveblocks(...))\n```\n\n----------------------------------------\n\nTITLE: Including Images in Markdown\nDESCRIPTION: Demonstrates how to include images in Markdown using the custom Image component, specifying source, alt text, width, and height.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/README.md#2025-04-11_snippet_4\n\nLANGUAGE: markdown\nCODE:\n```\n<Image\n  src=\"/assets/devtools/spreadsheet-example.png\"\n  alt=\"Liveblocks DevTools panel\"\n  width={920}\n  height={542}\n/>\n```\n\n----------------------------------------\n\nTITLE: Enabling Unsaved Changes Prevention in JavaScript\nDESCRIPTION: This code snippet demonstrates how to enable the prevention of browser tabs from being closed while local changes are not yet synchronized when using Liveblocks in a JavaScript application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-prosemirror/CHANGELOG.md#2025-04-11_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\ncreateClient({ preventUnsavedChanges: true })\n```\n\n----------------------------------------\n\nTITLE: Running Liveblocks Avatar Example on Vercel\nDESCRIPTION: Command to install and deploy the Liveblocks live avatar example to Vercel. This downloads the example and opens a browser to complete the Vercel deployment process.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/vuejs-live-avatars/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example vuejs-live-avatars --vercel\n```\n\n----------------------------------------\n\nTITLE: Opening FloatingComposer with Custom Button\nDESCRIPTION: Demonstrates how to implement a custom button to open the FloatingComposer using the addPendingComment command.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_27\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Editor } from \"@tiptap/react\";\n\nfunction Toolbar({ editor }: { editor: Editor | null }) {\n  if (!editor) {\n    return null;\n  }\n\n  return (\n    <button\n      onClick={() => {\n        editor.chain().focus().addPendingComment().run();\n      }}\n      data-active={editor.isActive(\"liveblocksCommentMark\")}\n    >\n      💬 New comment\n    </button>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Displaying 'Someone Is Typing' Message (React)\nDESCRIPTION: This snippet creates a React component `SomeoneIsTyping` that displays a message when another user is typing. It uses the `useSelector` hook to access the Liveblocks presence state from the Redux store. The `someoneIsTyping` variable is set to `true` if any other user in the room has their `isTyping` presence property set to `true`.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-react-redux-and-liveblocks.mdx#2025-04-11_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nimport React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { actions } from \"@liveblocks/redux\";\n\nimport { setDraft } from \"./store\";\n\nimport \"./App.css\";\n\n/* WhoIsHere */\n\nfunction SomeoneIsTyping() {\n  const someoneIsTyping = useSelector((state) =>\n    state.liveblocks.others.some((user) => user.presence?.isTyping)\n  );\n\n  return someoneIsTyping ? (\n    <div className=\"someone_is_typing\">Someone is typing</div>\n  ) : null;\n}\n\nexport default function App() {\n  const draft = useSelector((state) => state.draft);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(actions.enterRoom(\"redux-demo-room\"));\n\n    return () => {\n      dispatch(actions.leaveRoom(\"redux-demo-room\"));\n    };\n  }, [dispatch]);\n\n  return (\n    <div className=\"container\">\n      <WhoIsHere />\n      <input\n        className=\"input\"\n        type=\"text\"\n        placeholder=\"What needs to be done?\"\n        value={draft}\n        onChange={(e) => dispatch(setDraft(e.target.value))}\n      ></input>\n      <SomeoneIsTyping />\n    </div>\n  );\n}\n\n```\n\n----------------------------------------\n\nTITLE: Importing Default Styles for Liveblocks UI Components\nDESCRIPTION: Code snippet showing how to import the default CSS styles for Liveblocks React UI components, which can be imported at the root of the application or directly into a CSS file.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-notifications.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport \"@liveblocks/react-ui/styles.css\";\n```\n\n----------------------------------------\n\nTITLE: Styling the Toolbar for Lexical Editor\nDESCRIPTION: This CSS module defines styles for the toolbar and its buttons, including hover and active states, to create a visually appealing and interactive toolbar for the text editor.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-lexical-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_9\n\nLANGUAGE: css\nCODE:\n```\n.toolbar {\n  display: flex;\n  padding: 1em;\n  gap: 6px;\n}\n\n.button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  border-radius: 6px;\n  height: 32px;\n  width: 32px;\n  background: #fff;\n  color: #1f2937;\n  border: none;\n  box-shadow:\n    rgba(0, 0, 0, 0.12) 0 4px 8px 0,\n    rgba(0, 0, 0, 0.02) 0 0 0 1px;\n}\n\n.button:hover {\n  color: #111827;\n  box-shadow:\n    rgba(0, 0, 0, 0.16) 0 5px 8px 0,\n    rgba(0, 0, 0, 0.04) 0 0 0 1px;\n}\n\n.button:focus-visible {\n  outline-offset: 2px;\n}\n\n.button:active {\n  box-shadow:\n    rgba(0, 0, 0, 0.16) 0 2px 3px 0,\n    rgba(0, 0, 0, 0.04) 0 0 0 1px;\n}\n```\n\n----------------------------------------\n\nTITLE: Overriding Strings in Liveblocks UI for Localization\nDESCRIPTION: This React component example shows how to use the LiveblocksUIConfig component to override strings globally, which is useful for localization. It changes the 'Anonymous' text to 'Anonyme' for French users.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/styling-and-customization.mdx#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { LiveblocksUIConfig } from \"@liveblocks/react-ui\";\n\nexport function App() {\n  return (\n    <LiveblocksUIConfig\n      overrides={{ locale: \"fr\", USER_UNKNOWN: \"Anonyme\" /* ... */ }}\n    >\n      {/* ... */}\n    </LiveblocksUIConfig>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Todo List Example with Next.js\nDESCRIPTION: Command to create a new Liveblocks to-do list project with automatic API key setup. Creates a local project with all necessary dependencies and configuration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-todo-list/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-todo-list --api-key\n```\n\n----------------------------------------\n\nTITLE: Creating a Liveblocks Room with Custom Metadata in TypeScript\nDESCRIPTION: This snippet demonstrates how to use the Liveblocks create room API to create a new room with custom metadata. It sets a 'roomType' property to 'whiteboard' in the metadata object.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/rooms/metadata.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfetch(\"https://api.liveblocks.io/v2/rooms\", {\n  method: \"POST\",\n  body: JSON.stringify({\n    id: \"my-room-name\",\n    defaultAccesses: [],\n    metadata: {\n      roomType: \"whiteboard\",\n    },\n  }),\n});\n```\n\n----------------------------------------\n\nTITLE: Verifying Webhook Requests with TypeScript\nDESCRIPTION: Demonstrates how to verify incoming webhook requests using the @liveblocks/node package. Sets up a WebhookHandler with a secret key and validates incoming requests.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-send-email-notifications-of-unread-comments.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\n\n// Add your webhook secret key from a project's webhooks dashboard\nconst WEBHOOK_SECRET = \"YOUR_WEBHOOK_SECRET_KEY\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Verify if this is a real webhook request\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  // Send notifications\n  // ...\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Getting User Notification Settings with Liveblocks Node.js\nDESCRIPTION: This snippet retrieves the notification settings for a given user using the Liveblocks Node.js client. It utilizes the 'getNotificationSettings' method, providing the user ID as a parameter. The expected output includes the user's email and Slack notification preferences.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-prosemirror/CHANGELOG.md#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\nconst liveblocks = new Liveblocks({ secret: \"sk_xxx\" });\n\nconst settings = await liveblocks.getNotificationSettings({ userId });\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n```\n\n----------------------------------------\n\nTITLE: Removing LiveblocksProvider in React Application Setup\nDESCRIPTION: This snippet shows how to remove the LiveblocksProvider from the React application setup, which is no longer needed in v0.17. It simplifies the root component structure by using only the RoomProvider.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/0.17.mdx#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\nimport { LiveblocksProvider, RoomProvider } from \"@liveblocks/react\";\n\nconst client = createClient({\n  /* ... */\n});\n\nReactDOM.render(\n  <LiveblocksProvider client={client}>\n    <RoomProvider id=\"my-room-id\">\n      <App />\n    </RoomProvider>\n  </LiveblocksProvider>,\n  document.getElementById(\"root\")\n);\n```\n\nLANGUAGE: tsx\nCODE:\n```\nimport { RoomProvider } from \"./liveblocks.config\";\n\nReactDOM.render(\n  <RoomProvider id=\"my-room-id\">\n    <App />\n  </RoomProvider>,\n  document.getElementById(\"root\")\n);\n```\n\n----------------------------------------\n\nTITLE: Basic Zustand Store Implementation\nDESCRIPTION: Shows the basic implementation of a Zustand store without Liveblocks middleware, defining a State type with todos functionality.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG.md#2025-04-11_snippet_24\n\nLANGUAGE: typescript\nCODE:\n```\nimport create from \"zustand\";\n\ntype State = {\n  draft: string;\n  isTyping: boolean;\n  todos: Todo[];\n  setDraft: (draft: string) => void;\n  addTodo: () => void;\n  deleteTodo: (index: number) => void;\n};\n\ncreate<State>(/* ... */);\n```\n\n----------------------------------------\n\nTITLE: Custom Toggle with useState in React-Tiptap\nDESCRIPTION: Shows how to create a custom toggle button using the Toolbar.Toggle component and React's useState hook. This allows for more flexible state management of the toggle.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Toolbar } from \"@liveblocks/react-tiptap\";\nimport { Editor } from \"@tiptap/react\";\nimport { useState } from \"react\";\n\nfunction CustomToggle({ editor }: { editor: Editor | null }) {\n  const [active, setActive] = useState(false);\n\n  return (\n    <Toolbar.Toggle\n      name=\"Toggle options\"\n      active={active}\n      onClick={() => setActive(!active)}\n    />\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Basic Webhook Endpoint in Next.js\nDESCRIPTION: A simple Next.js route handler that receives POST requests from Liveblocks webhooks, extracting the request body and headers for further processing.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-yjs-document-data-to-a-supabase-postgres-database.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Handle webhooks and database\n  // ...\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Required Dependencies\nDESCRIPTION: Command to install Liveblocks, Yjs, Tiptap and related packages for collaborative text editing\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-tiptap-javascript.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/yjs yjs @tiptap/core @tiptap/pm @tiptap/starter-kit @tiptap/extension-collaboration @tiptap/extension-collaboration-cursor y-prosemirror\n```\n\n----------------------------------------\n\nTITLE: Using useOther with a selector in React\nDESCRIPTION: Example of using the useOther hook with a required selector function argument in @liveblocks/react 0.19.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/0.19.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst other = useOther(id, (other) => other); // 👈 requires a selector\n```\n\n----------------------------------------\n\nTITLE: Executing remove-liveblocks-config-contexts codemod\nDESCRIPTION: This codemod replaces createRoomContext and createLiveblocksContext in liveblock.config files with global Liveblocks types and updates imports to @liveblocks/react.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/liveblocks-codemod/README.md#2025-04-11_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nnpx @liveblocks/codemod@latest remove-liveblocks-config-contexts\n```\n\n----------------------------------------\n\nTITLE: Using Pagination with useInboxNotifications Hook\nDESCRIPTION: This code snippet shows the updated structure of the useInboxNotifications hook, including new pagination-related properties introduced in Liveblocks 2.9.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-yjs/CHANGELOG.md#2025-04-11_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nconst {\n  inboxNotifications,\n  isLoading,\n  error,\n\n  // ✨ New in Liveblocks 2.9\n  fetchMore,\n  isFetchingMore,\n  hasFetchedAll,\n  fetchMoreError,\n} = useInboxNotifications();\n```\n\n----------------------------------------\n\nTITLE: Accessing User Metadata with useSelf Hook\nDESCRIPTION: Example showing how to access user metadata in a React component using the useSelf hook from Liveblocks React.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/remix.mdx#2025-04-11_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nexport { useSelf } from \"@liveblocks/react/suspense\";\n\nfunction Component() {\n  const { name, avatar, colors } = useSelf((me) => me.info);\n}\n```\n\n----------------------------------------\n\nTITLE: Declaring Liveblocks Types in TypeScript Configuration\nDESCRIPTION: Example of how to declare global Liveblocks types in TypeScript to share types across all Liveblocks APIs. This approach is part of the v2.0 improvements for developer experience.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/create-liveblocks-app/CHANGELOG.md#2025-04-11_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\n// ❌ Before\nexport const {\n  suspense: {\n    RoomProvider,\n    useRoom,\n    // etc\n  },\n} = createRoomContext<Presence, Storage>(client);\n\n// ✅ After\ndeclare global {\n  interface Liveblocks {\n    Presence: Presence;\n    Storage: Storage;\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Connection Status Enum Changes\nDESCRIPTION: Mapping of old connection status codes to new status values in the Liveblocks client.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-redux/CHANGELOG.md#2025-04-11_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\n// Old statuses:\nclosed\nauthenticating\nconnecting\nopen\nunavailable\nfailed\n\n// New statuses:\ninitial\nconnecting\nconnected\nreconnecting\ndisconnected\n```\n\n----------------------------------------\n\nTITLE: Setting ProseMirror Document Content and Returning JSON Representation\nDESCRIPTION: Demonstrates how to set a ProseMirror document's content using api.setContent and then retrieve the JSON representation. This allows for complete replacement of document content.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-node-prosemirror.mdx#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nconst exampleDoc = {\n  type: \"doc\",\n  content: [\n    {\n      type: \"paragraph\",\n      content: [\n        {\n          type: \"text\",\n          text: \"Example Text\",\n        },\n      ],\n    },\n  ],\n};\n\nconst json = await withProsemirrorDocument<string>(\n  {\n    client,\n    roomId: \"test-room\",\n  },\n  async (api) => {\n    // +++\n    await api.setContent(exampleDoc);\n    // +++\n    return JSON.stringify(api.toJSON());\n  }\n);\n```\n\n----------------------------------------\n\nTITLE: Customizing Comment Body with HTML Props\nDESCRIPTION: Shows how to add custom styling and event handlers to a Comment component using standard HTML props.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/primitives.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { CommentData } from \"@liveblocks/client\";\nimport { Comment } from \"@liveblocks/react-ui/primitives\";\n\n// Render a custom comment body\nfunction MyComment({ comment }: { comment: CommentData }) {\n  return (\n    <Comment.Body\n      body={comment.body}\n      className=\"text-gray-500\"\n      style={{ width: \"300px\" }}\n      onPointerEnter={() => {}}\n    />\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Configuration File\nDESCRIPTION: Command to create the liveblocks.config.ts file, which can be used later to define types for the application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/redux.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework react\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Dependencies\nDESCRIPTION: Command to install required packages including Liveblocks client, Yjs, Monaco editor, and related dependencies.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-monaco-vuejs.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/yjs yjs monaco-editor y-monaco\n```\n\n----------------------------------------\n\nTITLE: Installing Live Form Selection Example with Liveblocks CLI\nDESCRIPTION: Command to create a new Liveblocks project with the live form selection example template. This will download the example and help set up the API key automatically.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-live-form-selection/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-live-form-selection --api-key\n```\n\n----------------------------------------\n\nTITLE: Type Declaration for Custom Notifications\nDESCRIPTION: Shows how to type custom notification kinds using TypeScript declarations in the Liveblocks configuration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-notification-settings-panel.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare global {\n  interface Liveblocks {\n    ActivitiesData: {\n      $documentInvite: {\n        documentId: string;\n      };\n    };\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Importing Liveblocks Hooks in React (Pre and Post 2.0)\nDESCRIPTION: Comparison of hook import strategies before and after Liveblocks 2.0, showcasing improved direct imports\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react/CHANGELOG.md#2025-04-11_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\n// ❌ Before: get hooks exported from your Liveblocks config\nimport { RoomProvider, useRoom, ... } from \"./liveblocks.config\";\n\n// ✅ After: import hooks directly\nimport { RoomProvider, useRoom, ... } from \"@liveblocks/react\";\n```\n\n----------------------------------------\n\nTITLE: Integrating Zustand with Liveblocks Middleware\nDESCRIPTION: Example of how to integrate Liveblocks middleware with Zustand for a to-do list application. This shows how to map state properties to Liveblocks presence and storage features.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-prosemirror/CHANGELOG.md#2025-04-11_snippet_20\n\nLANGUAGE: typescript\nCODE:\n```\nimport create from \"zustand\";\nimport { createClient } from \"@liveblocks/client\";\nimport { middleware } from \"@liveblocks/zustand\";\n\nconst client = createClient({ /*...*/ });\n\ntype State = {\n  draft: string;\n  isTyping: boolean;\n  todos: Todo[];\n  setDraft: (draft: string) => void;\n  addTodo: () => void;\n  deleteTodo: (index: number) => void;\n};\n\ncreate(\n  middleware<State>(/* ... */, {\n    client,\n    presenceMapping: { isTyping: true },\n    storageMapping: { todos: true }\n  })\n);\n```\n\n----------------------------------------\n\nTITLE: Updated Hook and Context Imports in React\nDESCRIPTION: Shows the new pattern for importing Liveblocks hooks and contexts directly from packages\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-zustand/CHANGELOG.md#2025-04-11_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\n// Before\nimport { RoomProvider, useRoom, ... } from \"./liveblocks.config\";\n\n// After\nimport { RoomProvider, useRoom, ... } from \"@liveblocks/react\";\nimport { RoomProvider, useRoom, ... } from \"@liveblocks/react/suspense\";\n```\n\n----------------------------------------\n\nTITLE: Rendering Documentation Cards for Liveblocks Sync Datastore Technologies\nDESCRIPTION: This JSX code snippet renders a grid of documentation cards for Liveblocks Sync Datastore technologies (Yjs and Storage). It uses custom components like ListGrid and DocsCard to display information about each technology, including icons, titles, descriptions, and links.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/sync-datastore.mdx#2025-04-11_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\n<ListGrid columns={2}>\n  <DocsCard\n    type=\"technology\"\n    title=\"Yjs\"\n    href=\"/docs/platform/sync-datastore/liveblocks-yjs\"\n    description=\"Data store for text editors\"\n    visual={<DocsYjsIcon className=\"fill-product-icon-brand h-auto w-6\" />}\n  />\n  <DocsCard\n    type=\"technology\"\n    title=\"Storage\"\n    href=\"/docs/platform/sync-datastore/liveblocks-storage\"\n    description=\"Data store for creative tools\"\n    visual={<DocsStorageIcon className=\"fill-product-icon-brand h-auto w-6\" />}\n  />\n</ListGrid>\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Configuration\nDESCRIPTION: Command to create and initialize the liveblocks configuration file for setting up types and project configuration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-codemirror-svelte.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework javascript\n```\n\n----------------------------------------\n\nTITLE: Using Update Notification Settings Hook in React\nDESCRIPTION: Demonstrates how to use the useUpdateNotificationSettings hook to update user notification settings, such as for an unsubscribe button.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG.md#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n// A suspense version of this hook is available\nimport { useUpdateNotificationSettings } from \"@liveblocks/react\";\n\nconst updateSettings = useUpdateNotificationSettings();\n\nconst onUnsubscribe = () => {\n  updateSettings({\n    slack: {\n      thread: false,\n    },\n  });\n};\n```\n\n----------------------------------------\n\nTITLE: Using useSyncStatus Hook in React\nDESCRIPTION: Demonstrates how to use the new useSyncStatus hook to display a 'Saving...' spinner while synchronizing local changes to the server.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-redux/CHANGELOG.md#2025-04-11_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nuseSyncStatus({ smooth: true })\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Node Package\nDESCRIPTION: Install the @liveblocks/node package using npm.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/nextjs.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/node\n```\n\n----------------------------------------\n\nTITLE: Correct ActivitiesData Type Definition in TypeScript\nDESCRIPTION: Example showing proper implementation of ActivitiesData interface with correct value types and $ prefix for custom notification kinds.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/errors/ActivitiesData.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare global {\n  interface Liveblocks {\n    ActivitiesData: {\n      // Your custom notification kinds go here...\n      $error: {\n        code: number;\n        date: string;\n      };\n      $success: {\n        message: string;\n      };\n    };\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Composer Suggestions List Item in React\nDESCRIPTION: Displays individual suggestion items within SuggestionsList. Requires a value prop and supports asChild property.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_17\n\nLANGUAGE: tsx\nCODE:\n```\n<Composer.SuggestionsListItem key={userId} value={userId}>\n  @{userId}\n</Composer.SuggestionsListItem>\n```\n\n----------------------------------------\n\nTITLE: Manage User Notification Settings - Liveblocks Client\nDESCRIPTION: This snippet demonstrates how to use the Liveblocks Client to get and update user notification settings. This requires '@liveblocks/client'. The function 'createClient' initializes the client, and two async methods 'getNotificationSettings' and 'updateNotificationSettings' are used to fetch and modify notification preferences.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-zustand/CHANGELOG.md#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { createClient } from '@liveblocks/client'\nconst client = createClient({ ... })\n\nconst settings = await client.getNotificationSettings();\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst updatedSettings = await client.updateNotificationSettings({\n  email: {\n    thread: false,\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Checking storage loading state in Liveblocks with JavaScript\nDESCRIPTION: This snippet shows how to check if the room storage is currently loading using the isStorageLoading property from the Liveblocks state.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-zustand.mdx#2025-04-11_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nconst {\n  liveblocks: { isStorageLoading },\n} = useStore();\n```\n\n----------------------------------------\n\nTITLE: Implementing Timestamp Component\nDESCRIPTION: Shows how to use the Timestamp primitive to display friendly date formats in threads.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/primitives.mdx#2025-04-11_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Timestamp } from \"@liveblocks/react-ui\";\nimport { useThreads } from \"../liveblocks.config\";\n\n// Render threads with friendly datetime messages above\nfunction Component() {\n  const { threads } = useThreads();\n\n  return (\n    <>\n      {threads.map((thread) => (\n        <div key={thread.id}>\n          Thread posted at: <Timestamp date={thread.createdAt} />\n          {/* Render `thread` ... */}\n        </div>\n      ))}\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Configuration\nDESCRIPTION: Command to create the initial Liveblocks configuration file for a React project.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-blocknote.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework react\n```\n\n----------------------------------------\n\nTITLE: Installing Collaborative Code Editor Project\nDESCRIPTION: Command to create a new Liveblocks collaborative code editor project with automatic API key setup. This initializes a Next.js project with Yjs and CodeMirror integration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-yjs-codemirror/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-yjs-codemirror --api-key\n```\n\n----------------------------------------\n\nTITLE: Exporting Suspense Hooks in Liveblocks Configuration\nDESCRIPTION: Demonstrates how to export Suspense versions of Liveblocks hooks from the liveblocks.config.ts file.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/hooks.mdx#2025-04-11_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\n// ...\n\nexport const {\n  suspense: {\n    // Export from here to use Suspense hooks\n    useThreads,\n    useUser,\n  },\n} = createRoomContext(client, {});\n```\n\n----------------------------------------\n\nTITLE: Using Media Query Hook for Thread Overlay\nDESCRIPTION: A variant of the ThreadOverlay component that uses a custom React hook, useIsMobile, to determine screen size for conditionally rendering thread components. Introduces useSyncExternalStore for subscribing to media query changes.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_30\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useSyncExternalStore } from \"react\";\nimport { useThreads } from \"@liveblocks/react/suspense\";\nimport { AnchoredThreads, FloatingThreads } from \"@liveblocks/react-tiptap\";\nimport { Editor } from \"@tiptap/react\";\n\nfunction ThreadOverlay({ editor }: { editor: Editor | null }) {\n  const { threads } = useThreads({ query: { resolved: false } });\n  // +++\n  const isMobile = useIsMobile();\n  // +++\n\n  // +++\n  if (isMobile) {\n    return (\n      <FloatingThreads\n        editor={editor}\n        threads={threads}\n        style={{ width: \"350px\" }}\n      />\n    );\n  }\n  // +++\n\n  // +++\n  return (\n    <AnchoredThreads\n      editor={editor}\n      threads={threads}\n      style={{ width: \"350px\" }}\n    />\n  );\n  //+++\n}\n\nexport function useIsMobile() {\n  return useSyncExternalStore(subscribe, getSnapshot, getSnapshot);\n}\n\nfunction subscribe(callback: () => void) {\n  const query = window.matchMedia(\"(max-width: 1024px)\");\n\n  query.addEventListener(\"change\", callback);\n  return () => query.removeEventListener(\"change\", callback);\n}\n\nfunction getSnapshot() {\n  const query = window.matchMedia(\"(max-width: 1024px)\");\n  return query.matches;\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Content to a Lexical Document with doc.update\nDESCRIPTION: Demonstrates how to add content to a Lexical document using doc.update. This example creates a paragraph node with a text node containing \"Hello world\" and appends it to the document root.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-node-lexical.mdx#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { $getRoot } from \"lexical\";\nimport { $createParagraphNode, $createTextNode } from \"lexical/nodes\";\n\nawait withLexicalDocument(\n  { roomId: \"my-room-id\", client: liveblocks },\n  async (doc) => {\n    await doc.update(() => {\n      // Adding a paragraph node with contained text node\n      // +++\n      const root = $getRoot();\n      const paragraphNode = $createParagraphNode();\n      const textNode = $createTextNode(\"Hello world\");\n      paragraphNode.append(textNode);\n      root.append(paragraphNode);\n      // +++\n    });\n  }\n);\n```\n\n----------------------------------------\n\nTITLE: Subscribing to Storage Status Changes with TypeScript\nDESCRIPTION: Demonstrates how to subscribe to storage status changes in a Liveblocks room. The code shows handling different status states: not-loaded, loading, synchronizing, and synchronized.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-client/CHANGELOG.md#2025-04-11_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\nroom.subscribe(\"storage-status\", (status) => {\n  switch (status) {\n    case \"not-loaded\":\n      break;\n    case \"loading\":\n      break;\n    case \"synchronizing\":\n      break;\n    case \"synchronized\":\n      break;\n    default:\n      break;\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Setting Up Global Types in TypeScript for Liveblocks 2.0\nDESCRIPTION: Example of how to set up global type declarations for Liveblocks in version 2.0, replacing the previous pattern of passing generic types to createRoomContext. This allows types to be defined once and shared across all Liveblocks APIs.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-yjs/CHANGELOG.md#2025-04-11_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\n// ❌ Before\nexport const {\n  suspense: {\n    RoomProvider,\n    useRoom,\n    // etc\n  },\n} = createRoomContext<Presence, Storage>(client);\n\n// ✅ After\ndeclare global {\n  interface Liveblocks {\n    Presence: Presence;\n    Storage: Storage;\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Configuration File\nDESCRIPTION: This command initializes the liveblocks.config.ts file, which can be used later to define types for the application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-tiptap-svelte.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework javascript\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks, Yjs, and Monaco Dependencies\nDESCRIPTION: Install the necessary packages for Liveblocks, Yjs, and Monaco integration. All Liveblocks packages should use the same version.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-monaco-react.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/react @liveblocks/yjs yjs @monaco-editor/react y-monaco y-protocols\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Whiteboard Example with CLI\nDESCRIPTION: Command to create a new Liveblocks whiteboard project using the create-liveblocks-app CLI tool. This automatically downloads the example and helps set up the API key.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-whiteboard-advanced/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-whiteboard-advanced --api-key\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Configuration File\nDESCRIPTION: This command initializes the liveblocks.config.ts file, which can be used later to define types for the application. It uses the create-liveblocks-app package with specific options.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-quill-vuejs.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework javascript\n```\n\n----------------------------------------\n\nTITLE: Styling Liveblocks Components with Data Attributes\nDESCRIPTION: Shows how to target specific component variants or states using data attributes. This example demonstrates styling primary buttons and loading state avatars.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_45\n\nLANGUAGE: css\nCODE:\n```\n.lb-button[data-variant=\"primary\"] {\n  /* Customise primary buttons */\n}\n\n.lb-avatar[data-loading] {\n  /* Customise avatar loading state */\n}\n```\n\n----------------------------------------\n\nTITLE: Handling Storage Update Events and Extracting Room ID\nDESCRIPTION: This code shows how to check for the 'storageUpdated' event type from Liveblocks webhooks and extract the roomId from the event data, which is needed to fetch the updated Storage document data for database synchronization.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-storage-document-data-to-a-vercel-postgres-database.mdx#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\n\n// Add your signing key from a project's webhooks dashboard\nconst WEBHOOK_SECRET = \"YOUR_SIGNING_SECRET\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Verify if this is a real webhook request\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  // When Storage document data has been updated\n  if (event.type === \"storageUpdated\") {\n    const { roomId } = event.data;\n\n    // Update database\n    // ...\n  }\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Notifications List Component\nDESCRIPTION: Component implementation for displaying inbox notifications using InboxNotificationList and InboxNotification components.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/text-editor/blocknote.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nexport function CollaborativeApp() {\n  const { inboxNotifications } = useInboxNotifications();\n\n  return (\n    <InboxNotificationList>\n      {inboxNotifications.map((inboxNotification) => (\n        <InboxNotification\n          key={inboxNotification.id}\n          inboxNotification={inboxNotification}\n        />\n      ))}\n    </InboxNotificationList>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Liveblocks Client with Auth Endpoint\nDESCRIPTION: Set up the Liveblocks client on the front end, using the authEndpoint instead of a public API key.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/express.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\n\nconst client = createClient({\n  authEndpoint: \"/api/liveblocks-auth\",\n});\n```\n\n----------------------------------------\n\nTITLE: Creating a Zustand Store without Liveblocks Middleware (TypeScript)\nDESCRIPTION: Example of a Zustand store setup for a to-do list application without using the Liveblocks middleware. This shows the baseline implementation before integrating real-time collaborative features.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react-ui/CHANGELOG.md#2025-04-11_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\nimport create from \"zustand\";\n\ntype State = {\n  draft: string;\n  isTyping: boolean;\n  todos: Todo[];\n  setDraft: (draft: string) => void;\n  addTodo: () => void;\n  deleteTodo: (index: number) => void;\n};\n\ncreate<State>(/* ... */);\n```\n\n----------------------------------------\n\nTITLE: Styling Toolbar in CSS\nDESCRIPTION: This CSS snippet provides styles for the toolbar and its buttons in the code editor interface. It includes layout details, hover effects, and button sizes, ensuring consistency with other UI components. This should reside in a module CSS file specifically for the toolbar component.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-codemirror-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_12\n\nLANGUAGE: css\nCODE:\n```\n.toolbar {\n  display: flex;\n  padding: 1em;\n  gap: 6px;\n}\n\n.button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  border-radius: 6px;\n  height: 32px;\n  width: 32px;\n  background: #fff;\n  color: #1f2937;\n  border: none;\n  box-shadow:\n    rgba(0, 0, 0, 0.12) 0 4px 8px 0,\n    rgba(0, 0, 0, 0.02) 0 0 0 1px;\n}\n\n.button:hover {\n  color: #111827;\n  box-shadow:\n    rgba(0, 0, 0, 0.16) 0 5px 8px 0,\n    rgba(0, 0, 0, 0.04) 0 0 0 1px;\n}\n\n.button:focus-visible {\n  outline-offset: 2px;\n}\n```\n\n----------------------------------------\n\nTITLE: Joining Liveblocks Room\nDESCRIPTION: Code to enter a Liveblocks room and get room instance and leave function.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/solidjs.mdx#2025-04-11_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nconst { room, leave } = client.enterRoom(\"my-room\");\n```\n\n----------------------------------------\n\nTITLE: WebSocket Connection Status Types\nDESCRIPTION: New connection status types replacing old status codes in the WebSocket implementation.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-yjs/CHANGELOG.md#2025-04-11_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\n// Old statuses\ntype OldStatus = 'closed' | 'authenticating' | 'connecting' | 'open' | 'unavailable' | 'failed'\n\n// New statuses\ntype NewStatus = 'initial' | 'connecting' | 'connected' | 'reconnecting' | 'disconnected'\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Collaborative Whiteboard Example\nDESCRIPTION: Command to download and install the Liveblocks collaborative whiteboard example project without requiring an API key or Vercel deployment.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/zustand-whiteboard/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example zustand-whiteboard --no-api-key --no-vercel\n```\n\n----------------------------------------\n\nTITLE: Installing Dependencies for React Redux Todo App\nDESCRIPTION: Commands to create a new React application with create-react-app and install the necessary Redux and Liveblocks packages for building a collaborative to-do list.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-react-redux-and-liveblocks.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-react-app redux-todo-app\n```\n\nLANGUAGE: bash\nCODE:\n```\nnpm install redux react-redux @reduxjs/toolkit @liveblocks/client @liveblocks/redux\n```\n\n----------------------------------------\n\nTITLE: Setting Ready State in TypeScript for Liveblocks Tutorial\nDESCRIPTION: This code snippet sets the 'ready' variable to true, indicating that the user is ready to begin the Liveblocks tutorial. It's located in the start.ts file and is used to control the flow of the tutorial.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/welcome/guide.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport const ready = true;\n```\n\n----------------------------------------\n\nTITLE: Upgrading Liveblocks Packages to 2.2\nDESCRIPTION: Command to upgrade all Liveblocks packages to version 2.2 using the create-liveblocks-app utility\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.2.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --upgrade\n```\n\n----------------------------------------\n\nTITLE: Importing Hooks Directly in Liveblocks React 2.0\nDESCRIPTION: Shows the updated pattern for importing Liveblocks React hooks directly from the package instead of from a configuration file, which is part of the 2.0 API improvements.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-yjs/CHANGELOG.md#2025-04-11_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\n// ❌ Before: get hooks exported from your Liveblocks config\nimport { RoomProvider, useRoom, ... } from \"./liveblocks.config\";\n\n// ✅ After: import hooks directly\nimport { RoomProvider, useRoom, ... } from \"@liveblocks/react\";\nimport { RoomProvider, useRoom, ... } from \"@liveblocks/react/suspense\";\n```\n\n----------------------------------------\n\nTITLE: Migrating to LiveblocksProvider\nDESCRIPTION: Demonstrates the new approach to creating and providing Liveblocks client configuration\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-zustand/CHANGELOG.md#2025-04-11_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\n// Before\nconst client = createClient(/* options */);\n\n// After\n<LiveblocksProvider /* options */>\n  <App />\n</LiveblocksProvider>\n```\n\n----------------------------------------\n\nTITLE: Rendering Framework Selection Cards in JSX\nDESCRIPTION: This code snippet renders a grid of cards representing different frameworks for ID token authentication setup. Each card includes a title, link to framework-specific instructions, and a visual icon.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token.mdx#2025-04-11_snippet_6\n\nLANGUAGE: JSX\nCODE:\n```\n<ListGrid columns={3}>\n  <DocsCard\n    title=\"Next.js\"\n    href=\"/docs/authentication/id-token/nextjs\"\n    visual={<DocsNextjsIcon />}\n  />\n  <DocsCard\n    title=\"Remix\"\n    href=\"/docs/authentication/id-token/remix\"\n    visual={<DocsRemixIcon />}\n  />\n  <DocsCard\n    title=\"SvelteKit\"\n    href=\"/docs/authentication/id-token/sveltekit\"\n    visual={<DocsSvelteIcon />}\n  />\n  <DocsCard\n    title=\"Nuxt.js\"\n    href=\"/docs/authentication/id-token/nuxtjs\"\n    visual={<DocsNuxtjsIcon />}\n  />\n  <DocsCard\n    title=\"Express\"\n    href=\"/docs/authentication/id-token/express\"\n    visual={<DocsExpressIcon />}\n  />\n  <DocsCard\n    title=\"Firebase\"\n    href=\"/docs/authentication/id-token/firebase\"\n    visual={<DocsFirebaseIcon />}\n  />\n</ListGrid>\n```\n\n----------------------------------------\n\nTITLE: Comparing Old and New Room Entry APIs in Liveblocks Client (TypeScript)\nDESCRIPTION: Illustrates the deprecated room entry APIs and the new recommended approach for entering and leaving rooms in the Liveblocks client. The new API provides better support for connecting to the same room from different parts of an application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node/CHANGELOG.md#2025-04-11_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\n// Old APIs we'll no longer be recommending (but that will remain working)\nconst room = client.enter(\"my-room\", options);\nclient.getRoom(\"my-room\");\nclient.leave(\"my-room\");\n```\n\n----------------------------------------\n\nTITLE: Deploying Next.js Comments AI Example to Vercel\nDESCRIPTION: This command sets up the Next.js comments AI example and initiates the Vercel deployment process.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-comments-ai/README.md#2025-04-11_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-comments-ai --vercel\n```\n\n----------------------------------------\n\nTITLE: Installing @liveblocks/node Package\nDESCRIPTION: Command to install version 1.0.0 of the @liveblocks/node package using npm.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/1.0.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/node@1.0.0\n```\n\n----------------------------------------\n\nTITLE: JWT Token Response Format\nDESCRIPTION: Example response from the authorization endpoint, containing the JWT token to use in subsequent API requests.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/rest-api-endpoints-v1.mdx#2025-04-11_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{ \"token\": \"YOUR_JWT_TOKEN\" }\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Packages with npm\nDESCRIPTION: Command to install the required Liveblocks packages (@liveblocks/client, @liveblocks/react, and @liveblocks/react-ui) using npm. All packages should use the same version.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-notifications.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/react @liveblocks/react-ui\n```\n\n----------------------------------------\n\nTITLE: Initializing New Yjs Document with Room Creation\nDESCRIPTION: Shows how to create a new Liveblocks room and initialize it with a Yjs document. Includes room creation with access permissions and document initialization.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/modifying-yjs-document-data-with-the-rest-api.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport * as Y from \"yjs\";\nimport { Liveblocks } from \"@liveblocks/node\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\nconst roomId = \"my-room-name\";\n\nexport async function POST() {\n  // Create a Yjs document\n  const yDoc = new Y.Doc();\n\n  // Create your data structures and make your update\n  // Each editor is different, you probably need to change these two lines\n  const yText = yDoc.getText(\"text\");\n  yText.insert(0, \"Hello world\");\n\n  // Encode the document state as an update\n  const yUpdate = Y.encodeStateAsUpdate(yDoc);\n\n  // Create the new room\n  const room = await liveblocks.createRoom(roomId, {\n    defaultAccesses: [\"room:write\"],\n  });\n\n  // Initialize the Yjs document with the update\n  await liveblocks.sendYjsBinaryUpdate(roomId, yUpdate);\n}\n```\n\n----------------------------------------\n\nTITLE: Comment Object Structure in TypeScript\nDESCRIPTION: Detailed example of a thread object containing a comment, showing the complete structure including thread properties and a single comment with its properties such as ID, user ID, creation time, edit time, and body content.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/concepts.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n{\n  type: \"thread\",\n  id: \"th_sf8s6sh...\",\n  roomId: \"my-room-id\",\n  createdAt: Date <Fri Dec 15 2023 14:15:22 GMT+0000 (Greenwich Mean Time)>,\n  resolved: false,\n  comments: [\n    {\n      type: \"comment\",\n      threadId: \"th_sf8s6sh...\",\n      id: \"cm_agH76a...\",\n      roomId: \"my-room-id\",\n      userId: \"alicia@example.com\",\n      createdAt: Date <Fri Dec 15 2023 14:15:22 GMT+0000 (Greenwich Mean Time)>,\n      editedAt: Date <Fri Dec 15 2023 15:07:19 GMT+0000 (Greenwich Mean Time)>,\n      body: {\n        // The comment's text in `CommentBody` format\n        // ...\n      },\n    },\n\n    // Other comments in the thread\n    // ...\n  ],\n  metadata: {\n    // Your custom thread metadata\n    // ...\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks 2.16 Upgrade Command\nDESCRIPTION: Command to upgrade all Liveblocks packages to version 2.16 using create-liveblocks-app\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.16.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --upgrade\n```\n\n----------------------------------------\n\nTITLE: Creating Liveblocks Client in Node.js\nDESCRIPTION: Initializes a Liveblocks client in Node.js using a secret key for API interaction.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/1.2.mdx#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"sk_prod_xxxxxxxxxxxxxxxxxxxxxxxx\",\n});\n```\n\n----------------------------------------\n\nTITLE: Setting User Metadata in Access Tokens with Liveblocks\nDESCRIPTION: This code snippet demonstrates how to add user metadata (name and avatar URL) when preparing a session using access token authentication. This metadata is used to display user information in Notifications.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-add-users-to-liveblocks-notifications.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst session = liveblocks.prepareSession(\"marc@example.com\", {\n  userInfo: {\n    name: \"Marc\",\n    avatar: \"https://example.com/marc.png\",\n\n    // Your custom metadata\n    // ...\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Example CustomNotificationEvent payload in TypeScript\nDESCRIPTION: Provides an example payload for the CustomNotificationEvent, illustrating the structure and values of the event data. Includes sample values for all the properties defined in the schema, such as projectId, roomId, userId, inboxNotificationId, createdAt, and a custom notification kind '$fileUpload'.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/webhooks.mdx#2025-04-11_snippet_33\n\nLANGUAGE: typescript\nCODE:\n```\nconst customNotificationEvent = {\n  type: \"notification\",\n  data: {\n    channel: \"email\",\n    kind: \"$fileUpload\",\n    projectId: \"my-project-id\",\n    roomId: \"my-room-id\",\n    userId: \"my-user-id\",\n    inboxNotificationId: \"my-inbox-notification-id\",\n    createdAt: \"2021-10-06T01:45:56.558Z\",\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing AnchoredThreads Component in React\nDESCRIPTION: Shows how to use the AnchoredThreads component, including importing necessary dependencies, retrieving threads, and rendering the component.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-blocknote.mdx#2025-04-11_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\n<AnchoredThreads editor={editor} threads={threads} />\n```\n\nLANGUAGE: tsx\nCODE:\n```\n// +++\nimport { useThreads } from \"@liveblocks/react/suspense\";\n// +++\nimport {\n  FloatingComposer,\n  // +++\n  AnchoredThreads,\n  // +++\n  useCreateBlockNoteWithLiveblocks,\n} from \"@liveblocks/react-blocknote\";\nimport { BlockNoteView } from \"@blocknote/mantine\";\n\nfunction TextEditor() {\n  const editor = useCreateBlockNoteWithLiveblocks({});\n\n  // +++\n  const { threads } = useThreads();\n  // +++\n\n  return (\n    <div>\n      <BlockNoteView editor={editor} />\n      <FloatingComposer editor={editor} style={{ width: \"350px\" }} />\n      // +++\n      <AnchoredThreads\n        editor={editor}\n        threads={threads}\n        style={{ width: \"350px\" }}\n      />\n      // +++\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Zustand Store With Liveblocks Middleware in TypeScript\nDESCRIPTION: Enhanced version of the Zustand to-do list store using Liveblocks middleware. This example demonstrates how to integrate Liveblocks with Zustand by moving the State type to the middleware level and configuring presence and storage mappings.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/liveblocks-codemod/CHANGELOG.md#2025-04-11_snippet_17\n\nLANGUAGE: typescript\nCODE:\n```\nimport create from \"zustand\";\nimport { createClient } from \"@liveblocks/client\";\nimport { middleware } from \"@liveblocks/zustand\";\n\nconst client = createClient({ /*...*/ });\n\ntype State = {\n  draft: string;\n  isTyping: boolean;\n  todos: Todo[];\n  setDraft: (draft: string) => void;\n  addTodo: () => void;\n  deleteTodo: (index: number) => void;\n};\n\ncreate(\n  middleware<State>(/* ... */, {\n    client,\n    presenceMapping: { isTyping: true },\n    storageMapping: { todos: true }\n  })\n);\n```\n\n----------------------------------------\n\nTITLE: Updating Composer onComposerSubmit for Attachments in Liveblocks 2.8\nDESCRIPTION: Example of how to update the Composer component's onComposerSubmit prop to include attachments in Liveblocks 2.8.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.8.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nconst createThread = useCreateThread();\n\n// ❌ Before - Liveblocks 2.7\n<Composer\n  onComposerSubmit={({ body }, event) => {\n    event.preventDefault();\n    createThread({ body, metadata: {} });\n  }}\n/>\n\n// ✅ After - Liveblocks 2.8\n<Composer\n  onComposerSubmit={({ body, attachments }, event) => {\n    event.preventDefault();\n    createThread({ body, attachments, metadata: {} });\n  }}\n/>\n```\n\n----------------------------------------\n\nTITLE: Rendering Upgrade Options in JSX\nDESCRIPTION: This code snippet renders a grid of cards using the ListGrid and DocsCard components. Each card represents a different Liveblocks version upgrade option, displaying the version number and linking to the corresponding upgrade documentation.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading.mdx#2025-04-11_snippet_0\n\nLANGUAGE: JSX\nCODE:\n```\n<ListGrid>\n  <DocsCard\n    type=\"image\"\n    title=\"Upgrading to 2.16\"\n    href=\"/docs/platform/upgrading/2.16\"\n    visual={<DocsCardGradientText>2.16</DocsCardGradientText>}\n  />\n  <DocsCard\n    type=\"image\"\n    title=\"Upgrading to 2.15\"\n    href=\"/docs/platform/upgrading/2.15\"\n    visual={<DocsCardGradientText>2.15</DocsCardGradientText>}\n  />\n  <DocsCard\n    type=\"image\"\n    title=\"Upgrading to 2.9\"\n    href=\"/docs/platform/upgrading/2.9\"\n    visual={<DocsCardGradientText>2.9</DocsCardGradientText>}\n  />\n  <DocsCard\n    type=\"image\"\n    title=\"Upgrading to 2.8\"\n    href=\"/docs/platform/upgrading/2.8\"\n    visual={<DocsCardGradientText>2.8</DocsCardGradientText>}\n  />\n  <DocsCard\n    type=\"image\"\n    title=\"Upgrading to 2.2\"\n    href=\"/docs/platform/upgrading/2.2\"\n    visual={<DocsCardGradientText>2.2</DocsCardGradientText>}\n  />\n  <DocsCard\n    type=\"image\"\n    title=\"Upgrading to 2.0\"\n    href=\"/docs/platform/upgrading/2.0\"\n    visual={<DocsCardGradientText>2.0</DocsCardGradientText>}\n  />\n  <DocsCard\n    type=\"image\"\n    title=\"Upgrading to 1.10\"\n    href=\"/docs/platform/upgrading/1.10\"\n    visual={<DocsCardGradientText>1.10</DocsCardGradientText>}\n  />\n  <DocsCard\n    type=\"image\"\n    title=\"Upgrading to 1.9\"\n    href=\"/docs/platform/upgrading/1.9\"\n    visual={<DocsCardGradientText>1.9</DocsCardGradientText>}\n  />\n  <DocsCard\n    type=\"image\"\n    title=\"Upgrading to 1.5\"\n    href=\"/docs/platform/upgrading/1.5\"\n    visual={<DocsCardGradientText>1.5</DocsCardGradientText>}\n  />\n  <DocsCard\n    type=\"image\"\n    title=\"Upgrading to 1.2\"\n    href=\"/docs/platform/upgrading/1.2\"\n    visual={<DocsCardGradientText>1.2</DocsCardGradientText>}\n  />\n  <DocsCard\n    type=\"image\"\n    title=\"Upgrading to 1.0\"\n    href=\"/docs/platform/upgrading/1.0\"\n    visual={<DocsCardGradientText>1.0</DocsCardGradientText>}\n  />\n  <DocsCard\n    type=\"image\"\n    title=\"Upgrading to 0.19\"\n    href=\"/docs/platform/upgrading/0.19\"\n    visual={<DocsCardGradientText>0.19</DocsCardGradientText>}\n  />\n  <DocsCard\n    type=\"image\"\n    title=\"Upgrading to 0.18\"\n    href=\"/docs/platform/upgrading/0.18\"\n    visual={<DocsCardGradientText>0.18</DocsCardGradientText>}\n  />\n  <DocsCard\n    type=\"image\"\n    title=\"Upgrading to 0.17\"\n    href=\"/docs/platform/upgrading/0.17\"\n    visual={<DocsCardGradientText>0.17</DocsCardGradientText>}\n  />\n</ListGrid>\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks TipTap Email Example\nDESCRIPTION: Command to create a new Liveblocks project with TipTap email notifications example. Automatically downloads the example and helps set up the API key through browser authentication.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-tiptap-emails-resend/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-tiptap-emails-resend --api-key\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Configuration File\nDESCRIPTION: Command to create a liveblocks.config.ts file that can be used to define types for the application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-lexical.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework react\n```\n\n----------------------------------------\n\nTITLE: Basic Client Configuration for Liveblocks\nDESCRIPTION: Creates a Liveblocks client using the authentication endpoint instead of a public API key, ensuring secure access to rooms.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/express.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\n\nconst client = createClient({\n  authEndpoint: \"/api/liveblocks-auth\",\n});\n```\n\n----------------------------------------\n\nTITLE: Adding a User for Demo Authentication\nDESCRIPTION: Example of how to add a user to the data/users.ts file for demo authentication purposes.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/tools/nextjs-starter-kit.mdx#2025-04-11_snippet_3\n\nLANGUAGE: ts\nCODE:\n```\n{\n  id: \"yourname@example.com\",\n  name: \"Your Name\",\n  avatar: \"https://liveblocks.io/avatars/avatar-0.png\",\n  groupIds: [\"product\", \"engineering\", \"design\"],\n},\n```\n\n----------------------------------------\n\nTITLE: Styling Tiptap Editor with CSS\nDESCRIPTION: CSS styles for the Tiptap editor and thread components, including responsive design that adapts between desktop and mobile views.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-tiptap.mdx#2025-04-11_snippet_6\n\nLANGUAGE: css\nCODE:\n```\n.editor {\n  position: relative;\n  display: flex;\n  width: 100%;\n  height: 100%;\n}\n\n.tiptap {\n  padding: 2px 12px;\n  outline: none;\n  width: 100%;\n}\n\n/* For mobile */\n.floating-threads {\n  display: none;\n}\n\n/* For desktop */\n.anchored-threads {\n  display: block;\n  max-width: 300px;\n  width: 100%;\n  position: absolute;\n  right: 12px;\n}\n\n@media (max-width: 640px) {\n  .floating-threads {\n    display: block;\n  }\n\n  .anchored-threads {\n    display: none;\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Customizing AnchoredThreads Styling with CSS Variables\nDESCRIPTION: CSS example showing how to modify the gap between threads and the horizontal offset for selected threads using CSS variables.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_37\n\nLANGUAGE: css\nCODE:\n```\n.lb-tiptap-anchored-threads {\n  /* Minimum gap between threads */\n  --lb-tiptap-anchored-threads-gap: 8px;\n\n  /* How far the active thread is offset to the left */\n  --lb-tiptap-anchored-threads-active-thread-offset: 12px;\n}\n```\n\n----------------------------------------\n\nTITLE: Installing @liveblocks/client and @liveblocks/redux\nDESCRIPTION: This snippet shows the command to install the necessary packages for integrating Liveblocks functionalities into a Redux store using npm. It requires Node.js and npm to be set up beforehand.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-redux/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/redux\n```\n\n----------------------------------------\n\nTITLE: StorageUpdatedEvent Schema and Example in TypeScript\nDESCRIPTION: This snippet defines the TypeScript schema for the StorageUpdatedEvent and provides an example of the event object. This event is triggered when storage is updated, with a 5-second throttle.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/webhooks.mdx#2025-04-11_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\n// Schema\ntype StorageUpdatedEvent = {\n  type: \"storageUpdated\";\n  data: {\n    roomId: string;\n    projectId: string;\n    updatedAt: string;\n  };\n};\n\n// Example\nconst storageUpdatedEvent = {\n  type: \"storageUpdated\",\n  data: {\n    projectId: \"my-project-id\",\n    roomId: \"my-room-id\",\n    updatedAt: \"2021-10-06T01:45:56.558Z\", // 👈 time of the last write\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining Global Liveblocks Types in TypeScript\nDESCRIPTION: Example of how to define global Liveblocks types in TypeScript for improved developer experience. This allows specifying Presence and Storage types once and sharing them across all Liveblocks APIs.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG.md#2025-04-11_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare global {\n  interface Liveblocks {\n    Presence: Presence;\n    Storage: Storage;\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: New Room Entry API Example - TypeScript\nDESCRIPTION: Demonstrates the new recommended API for entering and leaving rooms in Liveblocks, which provides better support for multiple room connections.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG.md#2025-04-11_snippet_18\n\nLANGUAGE: typescript\nCODE:\n```\n// New API we'll be recommending instead\nconst { room, leave } = client.enterRoom(\"my-room\", options);\nleave();\n```\n\n----------------------------------------\n\nTITLE: Installing Project with Liveblocks CLI\nDESCRIPTION: Command to create a new Liveblocks project with notification settings example using the create-liveblocks-app CLI tool. This automatically sets up the project and configures the API key.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-notification-settings/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-notification-settings --api-key\n```\n\n----------------------------------------\n\nTITLE: Example ThreadNotificationEvent payload in TypeScript\nDESCRIPTION: Provides an example payload for the ThreadNotificationEvent, illustrating the structure and values of the event data. Includes sample values for all the properties defined in the schema, such as projectId, roomId, userId, threadId, inboxNotificationId, and createdAt.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/webhooks.mdx#2025-04-11_snippet_29\n\nLANGUAGE: typescript\nCODE:\n```\nconst threadNotificationEvent = {\n  type: \"notification\",\n  data: {\n    channel: \"email\",\n    kind: \"thread\",\n    projectId: \"my-project-id\",\n    roomId: \"my-room-id\",\n    userId: \"my-user-id\",\n    threadId: \"my-thread-id\",\n    inboxNotificationId: \"my-inbox-notification-id\",\n    createdAt: \"2021-10-06T01:45:56.558Z\",\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Up LocalTunnel for Testing Webhooks Locally\nDESCRIPTION: Command to use localtunnel for exposing a local development server to the internet, allowing webhook testing without deployment. This creates a temporary public URL for your localhost server.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-yjs-document-data-to-a-vercel-postgres-database.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx localtunnel --port 3000\n```\n\n----------------------------------------\n\nTITLE: Before/After Comparison of Importing Hooks in TypeScript\nDESCRIPTION: Example showing how importing hooks has changed in Liveblocks 2.0. Previously hooks were exported from a config file, now they can be imported directly from the package.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-redux/CHANGELOG.md#2025-04-11_snippet_11\n\nLANGUAGE: tsx\nCODE:\n```\n// ❌ Before: get hooks exported from your Liveblocks config\nimport { RoomProvider, useRoom, ... } from \"./liveblocks.config\";\n\n// ✅ After: import hooks directly\nimport { RoomProvider, useRoom, ... } from \"@liveblocks/react\";\nimport { RoomProvider, useRoom, ... } from \"@liveblocks/react/suspense\";\n```\n\n----------------------------------------\n\nTITLE: Using Icon Components from Liveblocks React UI\nDESCRIPTION: This code demonstrates how to import and use Icon components from the Liveblocks React UI library. It shows examples of using QuestionMark and Mention icons.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_39\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Icon } from \"@liveblocks/react-ui\";\n\n<Icon.QuestionMark />\n<Icon.Mention  />\n```\n\n----------------------------------------\n\nTITLE: Configuring preventUnsavedChanges in React\nDESCRIPTION: Shows how to enable the preventUnsavedChanges option in React to prevent browser tabs from closing while local changes are not yet synchronized.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-redux/CHANGELOG.md#2025-04-11_snippet_6\n\nLANGUAGE: jsx\nCODE:\n```\n<LiveblocksProvider preventUnsavedChanges />\n```\n\n----------------------------------------\n\nTITLE: Debugging TypeScript Type Compatibility\nDESCRIPTION: Code snippet demonstrating how to debug type compatibility issues by attempting to assign the custom type to BaseActivitiesData.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/errors/ActivitiesData.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { BaseActivitiesData } from \"@liveblocks/client\";\n\ndeclare global {\n  interface Liveblocks {\n    ActivitiesData: MyActivitiesData;\n  }\n}\n\n// Quick debugging snippet to find root cause\nconst xxx: BaseActivitiesData = {} as MyActivitiesData;\n//    ^?\n//    The error will appear here\n```\n\n----------------------------------------\n\nTITLE: Using Liveblocks Hooks Directly\nDESCRIPTION: This snippet shows the updated way to import Liveblocks hooks directly from the Liveblocks React package, enhancing developer experience by simplifying the imports.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node/CHANGELOG.md#2025-04-11_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\n\"import { RoomProvider, useRoom, ... } from \\\"@liveblocks/react\\\";\\nimport { RoomProvider, useRoom, ... } from \\\"@liveblocks/react/suspense\\\";\"\n```\n\n----------------------------------------\n\nTITLE: Configuring Global Liveblocks Types in TypeScript\nDESCRIPTION: Example showing the before and after approach to typing Liveblocks components. In version 2.0, types can be specified globally through interface declaration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-core/CHANGELOG.md#2025-04-11_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\n// ❌ Before\nexport const {\n  suspense: {\n    RoomProvider,\n    useRoom,\n    // etc\n  },\n} = createRoomContext<Presence, Storage>(client);\n\n// ✅ After\ndeclare global {\n  interface Liveblocks {\n    Presence: Presence;\n    Storage: Storage;\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering InboxNotification.Thread Component in React\nDESCRIPTION: This snippet demonstrates how to use the InboxNotification.Thread component to display a thread inbox notification. It shows the usage of the 'kinds' prop to customize the rendering of thread notifications.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_34\n\nLANGUAGE: tsx\nCODE:\n```\n<InboxNotification\n  inboxNotification={inboxNotification}\n  kinds={{\n    thread: (props) => (\n      <InboxNotification.Thread {...props} showRoomName={false} />\n    ),\n  }}\n/>\n```\n\n----------------------------------------\n\nTITLE: Problematic RoomProvider Implementation in Next.js Server Component\nDESCRIPTION: Example showing incorrect usage of LiveObject within a server component that causes the 'Only plain objects' warning. The issue occurs when creating Liveblocks data structures (LiveObject, LiveList, or LiveMap) directly in a server component.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/fixing-nextjs-server-component-errors.mdx#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ReactNode } from \"react\";\nimport { RoomProvider } from \"../liveblocks.config\";\nimport { LiveObject } from \"@liveblocks/client\";\n\nexport default function Layout({ children }: { children: ReactNode }) {\n  return (\n    <html lang=\"en\">\n      <body>\n        <RoomProvider\n          id=\"my-room-name\"\n          initialStorage={{\n            // ❌ This line causes the error\n            session: new LiveObject(),\n          }}\n        >\n          {children}\n        </RoomProvider>\n      </body>\n    </html>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering API Reference Cards in JSX\nDESCRIPTION: This snippet uses a ListGrid component to display multiple DocsCard components, each representing an API reference for different technologies supported by Liveblocks.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/index.mdx#2025-04-11_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n<ListGrid columns={2}>\n  <DocsCard\n    type=\"technology\"\n    title=\"JavaScript\"\n    href=\"/docs/api-reference/liveblocks-client\"\n    description=\"@liveblocks/client\"\n    visual={<DocsJavascriptIcon />}\n  />\n  <DocsCard\n    type=\"technology\"\n    title=\"React\"\n    href=\"/docs/api-reference/liveblocks-react\"\n    description=\"@liveblocks/react\"\n    visual={<DocsReactIcon />}\n  />\n  {/* Additional DocsCard components omitted for brevity */}\n</ListGrid>\n```\n\n----------------------------------------\n\nTITLE: Modifying Thread Positions with CSS\nDESCRIPTION: Shows how to use CSS variables to adjust thread spacing and position offsets within the Lexical editor. This enhances the visual alignment and spacing of floating threads.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_34\n\nLANGUAGE: css\nCODE:\n```\n.lb-lexical-anchored-threads {\\n  /* Minimum gap between threads */\\n  --lb-lexical-anchored-threads-gap: 8px;\\n\\n  /* How far the active thread is offset to the left */\\n  --lb-lexical-anchored-threads-active-thread-offset: 12px;\\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Default Toolbar Sections\nDESCRIPTION: Shows how to construct a toolbar using the default section components provided by Liveblocks.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_24\n\nLANGUAGE: tsx\nCODE:\n```\nimport { FloatingToolbar, Toolbar } from \"@liveblocks/react-tiptap\";\nimport { Editor } from \"@tiptap/react\";\n\nfunction CustomToolbar({ editor }: { editor: Editor | null }) {\n  return (\n    <FloatingToolbar editor={editor}>\n      <Toolbar.BlockSelector />\n      <Toolbar.SectionInline />\n      <Toolbar.Separator />\n      <Toolbar.SectionCollaboration />\n    </FloatingToolbar>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Collaborative To-do List Example\nDESCRIPTION: Command to set up the Liveblocks collaborative to-do list example locally. This downloads the example project and installs its dependencies without requiring API key or Vercel configuration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/zustand-todo-list/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example zustand-todo-list --no-api-key --no-vercel\n```\n\n----------------------------------------\n\nTITLE: Using useStorage for Computed Values\nDESCRIPTION: Shows how to use useStorage for computing values based on multiple storage fields instead of manual subscription.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/0.18.mdx#2025-04-11_snippet_14\n\nLANGUAGE: tsx\nCODE:\n```\n// ✅ Automatically rerenders if computed value changes\nconst sum = useStorage((root) => root.a + root.b);\n```\n\n----------------------------------------\n\nTITLE: Storage Status Subscription Implementation\nDESCRIPTION: Example of subscribing to storage status changes using the room.subscribe method.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/1.0.mdx#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nroom.subscribe(\"storage-status\", (status) => {\n  // Implement your logic here\n  switch (status) {\n    case \"not-loaded\":\n      break;\n    case \"loading\":\n      break;\n    case \"synchronizing\":\n      break;\n    case \"synchronized\":\n      break;\n    default:\n      break;\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks configuration file\nDESCRIPTION: This command initializes the liveblocks.config.ts file, which can be used later to define types for the application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-codemirror-javascript.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework javascript\n```\n\n----------------------------------------\n\nTITLE: Using useInboxNotifications with Pagination in React\nDESCRIPTION: Shows how to use the updated useInboxNotifications hook with new pagination support for fetching more notifications.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-redux/CHANGELOG.md#2025-04-11_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nconst {\n  inboxNotifications,\n  isLoading,\n  error,\n  fetchMore,\n  isFetchingMore,\n  hasFetchedAll,\n  fetchMoreError,\n} = useInboxNotifications();\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Configuration File\nDESCRIPTION: Command to create a liveblocks.config.ts file for defining types and configurations for the Liveblocks application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-quill-svelte.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework javascript\n```\n\n----------------------------------------\n\nTITLE: Zustand Migration Code Changes\nDESCRIPTION: Code diff showing migration changes required for Zustand v4 support, including import changes and type annotations.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/liveblocks-codemod/CHANGELOG.md#2025-04-11_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\n-import { middleware } from \"@liveblocks/zustand\";\n+import { liveblocks } from \"@liveblocks/zustand\";\n\n-import type { LiveblocksState } from \"@liveblocks/zustand\";\n+import type { WithLiveblocks } from \"@liveblocks/zustand\";\n```\n\n----------------------------------------\n\nTITLE: Data Resolution Implementation\nDESCRIPTION: Shows how to resolve user and room information when preparing text mention notification emails.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-emails.mdx#2025-04-11_snippet_13\n\nLANGUAGE: tsx\nCODE:\n```\nconst emailData = await prepareTextMentionNotificationEmailAsReact(\n  liveblocks,\n  webhookEvent,\n  {\n    resolveUsers: async ({ userIds }) => {\n      const usersData = await __getUsersFromDB__(userIds);\n\n      return usersData.map((userData) => ({\n        name: userData.name,\n        avatar: userData.avatar.src,\n      }));\n    },\n    resolveRoomInfo({ roomId }) {\n      return {\n        name: roomId,\n        url: `https://example.com/${roomId}`,\n      };\n    },\n  }\n);\n```\n\n----------------------------------------\n\nTITLE: Adding Toolbar to Lexical Editor\nDESCRIPTION: Example showing how to add the default Toolbar component to a collaborative Lexical editor. The Toolbar provides formatting options and can create comment threads when used with FloatingComposer.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n<LexicalComposer initialConfig={initialConfig}>\n  <LiveblocksPlugin>\n    // +++\n    <Toolbar />\n    // +++\n  </LiveblocksPlugin>\n</LexicalComposer>\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Client\nDESCRIPTION: Creating and configuring Liveblocks client with authentication endpoint for Redux integration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-redux.mdx#2025-04-11_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\nimport { liveblocksEnhancer } from \"@liveblocks/redux\";\n\nconst client = createClient({\n  authEndpoint: \"/api/liveblocks-auth\",\n});\n\nconst store = configureStore({\n  reducer: /* reducer */,\n  enhancers: [\n    liveblocksEnhancer({\n      client,\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Retrieving Text Content with Options from ProseMirror Document\nDESCRIPTION: Uses api.getText with optional configuration to extract text content from a ProseMirror document. This allows for customization of block separators and text serializers.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-node-prosemirror.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst textContent = await withProsemirrorDocument(\n  { roomId: \"my-room-id\", client: liveblocks },\n  async (api) => {\n    // +++\n    return api.getText({\n      // Options\n      // ...\n    });\n    // +++\n  }\n);\n```\n\n----------------------------------------\n\nTITLE: Fetching Subdocuments on Server\nDESCRIPTION: Shows how to fetch and apply Yjs subdocuments on the server side using Liveblocks API.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-yjs-subdocuments.mdx#2025-04-11_snippet_4\n\nLANGUAGE: ts\nCODE:\n```\n// Get your Yjs subdocument as a binary update\nconst update = liveblocks.getYjsDocumentAsBinaryUpdate(\"my-room-id\", {\n  // The `guid` of your subdocument, as noted earlier\n  guid: \"c4a755...\",\n});\n\n// Create a Yjs document for your subdoc and apply the update\nconst subdoc = new Y.Doc();\nY.applyUpdate(subdoc, new Uint8Array(update));\n```\n\n----------------------------------------\n\nTITLE: Updated Metadata Filtering with Null\nDESCRIPTION: Example demonstrating the new way to filter threads by absence of metadata using null instead of undefined\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.16.mdx#2025-04-11_snippet_3\n\nLANGUAGE: ts\nCODE:\n```\nconst threads = useThreads({\n  query: {\n    metadata: {\n      // ✅ Will now return \"important\" threads without a `color` field\n      color: null,\n      label: \"important\",\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: HTML Badge Links and Images\nDESCRIPTION: HTML markup for displaying project badges including live preview link, CodeSandbox integration, and technology stack indicators (React, Next.js, NextAuth.js).\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-nextauth-google-avatars/README.md#2025-04-11_snippet_1\n\nLANGUAGE: HTML\nCODE:\n```\n<p>\n  <a href=\"https://liveblocks.io/examples/live-avatar-stack/nextjs-live-avatars/preview\">\n    <img src=\"https://img.shields.io/badge/live%20preview-message?style=flat&logo=data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTE2Ljg0OSA0Ljc1SDBsNC44NDggNS4wNzV2Ny4wMDhsMTItMTIuMDgzWk03LjE1IDE5LjI1SDI0bC00Ljg0OS01LjA3NVY3LjE2N2wtMTIgMTIuMDgzWiIgZmlsbD0iI2ZmZiIvPjwvc3ZnPg==&color=333\" alt=\"Live Preview\" />\n  </a>\n  <a href=\"https://codesandbox.io/s/github/liveblocks/liveblocks/tree/main/examples/nextjs-live-avatars\">\n    <img src=\"https://img.shields.io/badge/open%20in%20codesandbox-message?style=flat&logo=codesandbox&color=333&logoColor=fff\" alt=\"Open in CodeSandbox\" />\n  </a>\n  <img src=\"https://img.shields.io/badge/react-message?style=flat&logo=react&color=0bd&logoColor=fff\" alt=\"React\" />\n  <img src=\"https://img.shields.io/badge/next.js-message?style=flat&logo=next.js&color=07f&logoColor=fff\" alt=\"Next.js\" />\n  <img src=\"https://img.shields.io/badge/nextauth.js-message?style=flat&color=1cc&logoColor=fff\" alt=\"NextAuth.js\" />\n</p>\n```\n\n----------------------------------------\n\nTITLE: Setting Up Suspense Boundary for Liveblocks in React\nDESCRIPTION: This code shows how to set up a Suspense boundary in a React application to handle loading states for Liveblocks data.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/0.18.mdx#2025-04-11_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Suspense } from \"react\";\n\nfunction Setup() {\n  return (\n    // Once\n    <Suspense fallback={<Loading />}>\n      <App />\n    </Suspense>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Deploying Liveblocks Comments Notification Example to Vercel\nDESCRIPTION: This command sets up the Liveblocks comments notification example project and initiates the deployment process to Vercel.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-comments-emails-sendgrid/README.md#2025-04-11_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-comments-emails-sendgrid --vercel\n```\n\n----------------------------------------\n\nTITLE: Basic Text Mention Email Preparation with React\nDESCRIPTION: Demonstrates how to use prepareTextMentionNotificationEmailAsReact to handle text mention notifications and create email content.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-emails.mdx#2025-04-11_snippet_11\n\nLANGUAGE: tsx\nCODE:\n```\nimport { prepareTextMentionNotificationEmailAsReact } from \"@liveblocks/emails\";\nimport { isTextMentionNotificationEvent } from \"@liveblocks/node\";\n\nif (isTextMentionNotificationEvent(event)) {\n  const emailData = await prepareTextMentionNotificationEmailAsReact(\n    liveblocks,\n    event\n  );\n\n  const email = (\n    <div>\n      <div>\n        @{emailData.mention.author.id} at {emailData.mention.createdAt}\n      </div>\n      <div>{emailData.mention.reactContent}</div>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Example Response from Get Room Users\nDESCRIPTION: Sample response when retrieving the list of users connected to a room, showing user properties including connection ID, custom user ID, and user info.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/rest-api-endpoints-v1.mdx#2025-04-11_snippet_6\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"data\": [\n    {\n      \"type\": \"user\",\n      \"connectionId\": 0,\n      \"id\": \"customUserId\",\n      \"info\": {}\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring GitHub Authentication Environment Variables\nDESCRIPTION: Example of how to set up GitHub Client Secret and Client ID in the .env.local file for authentication.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/tools/nextjs-starter-kit.mdx#2025-04-11_snippet_1\n\nLANGUAGE: dotenv\nCODE:\n```\nGITHUB_CLIENT_SECRET=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\nGITHUB_CLIENT_ID=XXXXXXXXXXXXXXXXXXXX\n```\n\n----------------------------------------\n\nTITLE: Converting Local URL to localtunnel URL for Webhook Testing\nDESCRIPTION: Example showing how to replace the localhost domain with a localtunnel-generated domain to create a publicly accessible webhook endpoint URL for testing.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-yjs-document-data-to-a-supabase-postgres-database.mdx#2025-04-11_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\n# Take your local URL\nhttp://localhost:3000/api/liveblocks-database-sync\n\n# Replace localhost with the generated domain, then copy it\nhttps://my-localtunnel-url.loca.lt/api/liveblocks-database-sync\n```\n\n----------------------------------------\n\nTITLE: Updating @liveblocks/yjs Import and Usage\nDESCRIPTION: Demonstrates the change from default export to named export in the @liveblocks/yjs package.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.0.mdx#2025-04-11_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { LiveblocksYjsProvider } from \"@liveblocks/yjs\";\nconst yDoc = new Y.Doc();\nconst yProvider = new LiveblocksYjsProvider(room, yDoc);\n```\n\n----------------------------------------\n\nTITLE: Subscribing to Storage Status Changes in Liveblocks Client\nDESCRIPTION: Demonstrates how to subscribe to storage status changes in a Liveblocks room. The status can be 'not-loaded', 'loading', 'synchronizing', or 'synchronized', allowing developers to track the synchronization state of storage with Liveblocks servers.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-yjs/CHANGELOG.md#2025-04-11_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\nroom.subscribe(\"storage-status\", (status) => {\n  switch (status) {\n    case \"not-loaded\":\n      break;\n    case \"loading\":\n      break;\n    case \"synchronizing\":\n      break;\n    case \"synchronized\":\n      break;\n    default:\n      break;\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Updating imports for @liveblocks/zustand 0.19\nDESCRIPTION: Updated import statements for @liveblocks/zustand 0.19, including the renamed liveblocks middleware and WithLiveblocks type.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/0.19.mdx#2025-04-11_snippet_7\n\nLANGUAGE: ts\nCODE:\n```\nimport { liveblocks } from \"@liveblocks/zustand\";\nimport type { WithLiveblocks } from \"@liveblocks/zustand\";\n```\n\n----------------------------------------\n\nTITLE: Deploying Live Avatar Stack Example to Vercel with Liveblocks CLI\nDESCRIPTION: Command to create and deploy the SvelteKit live avatars example to Vercel. This downloads the example and guides you through the Vercel deployment process.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/sveltekit-live-avatars/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example sveltekit-live-avatars --vercel\n```\n\n----------------------------------------\n\nTITLE: Running LocalTunnel for Webhook Testing\nDESCRIPTION: Command to expose local development server using LocalTunnel for webhook testing purposes.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-storage-document-data-to-a-planetscale-mysql-database.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx localtunnel --port 3000\n```\n\n----------------------------------------\n\nTITLE: Updated Comments Overrides Configuration\nDESCRIPTION: New implementation of Comments overrides configuration in version 1.10 with renamed properties and modified argument structure.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/1.10.mdx#2025-04-11_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\n<CommentsConfig\n  overrides={{\n    USER_SELF: \"you\",\n    USER_UNKNOWN: \"Anon\",\n    LIST_REMAINING_USERS: (others) => `${others} people`,\n    COMMENT_REACTION_LIST: (list, emoji, count) => (\n      <>\n        {list} reacted with {emoji}\n      </>\n    ),\n  }}\n/>\n```\n\n----------------------------------------\n\nTITLE: Importing Liveblocks Default Styles in Next.js\nDESCRIPTION: Importing the default CSS styles for Liveblocks UI components in the Next.js layout file. This applies the pre-designed styling to the notification components.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-notifications.mdx#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport \"@liveblocks/react-ui/styles.css\";\n```\n\n----------------------------------------\n\nTITLE: Configuring preventUnsavedChanges in React\nDESCRIPTION: Shows how to enable the preventUnsavedChanges option in React to prevent browser tabs from being closed while local changes are not yet synchronized.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-emails/CHANGELOG.md#2025-04-11_snippet_8\n\nLANGUAGE: jsx\nCODE:\n```\n<LiveblocksProvider preventUnsavedChanges />\n```\n\n----------------------------------------\n\nTITLE: Using useSyncStatus Hook in React\nDESCRIPTION: Example of using the new useSyncStatus hook from @liveblocks/react to display a 'Saving...' spinner in a React application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node/CHANGELOG.md#2025-04-11_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nuseSyncStatus({ smooth: true })\n```\n\n----------------------------------------\n\nTITLE: Updating Notification Settings with useUpdateNotificationSettings\nDESCRIPTION: Shows how to use the useUpdateNotificationSettings hook for simple notification setting updates.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-client/CHANGELOG.md#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useUpdateNotificationSettings } from \"@liveblocks/react\";\n\nconst updateSettings = useUpdateNotificationSettings();\n\nconst onUnsubscribe = () => {\n  updateSettings({\n    slack: {\n      thread: false,\n    },\n  });\n};\n```\n\n----------------------------------------\n\nTITLE: FileSize Component Integration with Attachments\nDESCRIPTION: Example showing how to use FileSize component to display attachment sizes in a comment interface.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_23\n\nLANGUAGE: tsx\nCODE:\n```\nimport { CommentData, FileSize } from \"@liveblocks/react-ui\";\n\nfunction MyComment({ comment }: { comment: CommentData }) {\n  return (\n    <div>\n      {/* ... */}\n\n      {comment.attachments.map((attachment) => (\n        <div key={attachment.id}>\n          {attachment.name}\n          // +++\n          <FileSize size={attachment.size} />\n          // +++\n        </div>\n      ))}\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Customizing Toolbar Components\nDESCRIPTION: Creating a custom toolbar by combining different toolbar sections and components.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/text-editor/lexical.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nfunction CustomToolbar() {\n  return (\n    <Toolbar>\n      // +++\n      <Toolbar.BlockSelector />\n      <Toolbar.SectionInline />\n      <Toolbar.Separator />\n      <Toolbar.SectionCollaboration />\n      // +++\n    </Toolbar>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Getting and Updating Notification Settings using useNotificationSettings Hook\nDESCRIPTION: This snippet shows how to use the `useNotificationSettings` hook from `@liveblocks/react` to both retrieve and update user notification settings in a React component.  The hook returns an array containing the current settings state (including loading and error states) and an `updateSettings` function to modify the settings.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-prosemirror/CHANGELOG.md#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n// A suspense version of this hook is available\nimport { useNotificationSettings } from \"@liveblocks/react\";\n\nconst [{ isLoading, error, settings }, updateSettings] = \n  useNotificationSettings();\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst onSave = () => {\n  updateSettings({\n    slack: {\n      textMention: true,\n    },\n  });\n};\n```\n\n----------------------------------------\n\nTITLE: Converting Local URL to Localtunnel URL for Webhook Configuration\nDESCRIPTION: Example showing how to replace the localhost domain with the generated localtunnel domain to create a publicly accessible webhook URL for testing.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-yjs-document-data-to-a-planetscale-mysql-database.mdx#2025-04-11_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\n# Take your local URL\nhttp://localhost:3000/api/liveblocks-database-sync\n\n# Replace localhost with the generated domain, then copy it\nhttps://my-localtunnel-url.loca.lt/api/liveblocks-database-sync\n```\n\n----------------------------------------\n\nTITLE: Accessing isReadOnly flag for users in Liveblocks\nDESCRIPTION: Example of accessing the new isReadOnly flag for the current user and other users in a Liveblocks room.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/0.19.mdx#2025-04-11_snippet_11\n\nLANGUAGE: ts\nCODE:\n```\nconst me = room.getSelf();\n\nme.isReadOnly; // boolean\n\nconst others = room.getOthers();\nfor (const other of others) {\n  other.isReadOnly; // boolean\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing User Information in Vue.js\nDESCRIPTION: Retrieve and log the authenticated user's ID and information in a Vue.js application using Liveblocks.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/nuxtjs.mdx#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nconst self = ref(room.getSelf());\nconsole.log(self.id);\nconsole.log(self.info);\n```\n\n----------------------------------------\n\nTITLE: Using Notification Settings Hook in React\nDESCRIPTION: Demonstrates how to use the useNotificationSettings hook to manage notification settings in a React component.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-client/CHANGELOG.md#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useNotificationSettings } from \"@liveblocks/react\";\n\nconst [{ isLoading, error, settings }, updateSettings] = useNotificationSettings();\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst onSave = () => {\n  updateSettings({\n    slack: {\n      textMention: true,\n    },\n  });\n};\n```\n\n----------------------------------------\n\nTITLE: Filtering Threads by Absence of Metadata in useThreads\nDESCRIPTION: Shows how to use the new feature in useThreads to filter threads by the absence of metadata. This example filters for 'pinned' threads that don't have a 'color' attribute set.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/create-liveblocks-app/CHANGELOG.md#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nuseThreads({\n  query: {\n    // Filter any \"pinned\" threads that don't have a color set\n    metadata: {\n      pinned: true,\n      color: null, // ✨\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Filtering Threads by Absence of Metadata in React\nDESCRIPTION: Shows how to use the updated useThreads hook to filter threads by the absence of metadata. This example filters for 'pinned' threads that don't have a color set.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-redux/CHANGELOG.md#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nuseThreads({\n  query: {\n    // Filter any \"pinned\" threads that don't have a color set\n    metadata: {\n      pinned: true,\n      color: null, // ✨\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Basic Zustand Store Definition without Liveblocks Middleware\nDESCRIPTION: Example showing how a standard Zustand store would be defined without Liveblocks integration, featuring a to-do list application state.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react/CHANGELOG.md#2025-04-11_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\nimport create from \"zustand\";\n\ntype State = {\n  draft: string;\n  isTyping: boolean;\n  todos: Todo[];\n  setDraft: (draft: string) => void;\n  addTodo: () => void;\n  deleteTodo: (index: number) => void;\n};\n\ncreate<State>(/* ... */);\n```\n\n----------------------------------------\n\nTITLE: Liveblocks API Base URL\nDESCRIPTION: The base URL endpoint for all Liveblocks REST API v2 requests. All API endpoints should be accessed through this base URL.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/rest-api.mdx#2025-04-11_snippet_0\n\nLANGUAGE: http\nCODE:\n```\nhttps://api.liveblocks.io/v2\n```\n\n----------------------------------------\n\nTITLE: Adding resolveMentionSuggestions to LiveblocksProvider for User Mentions\nDESCRIPTION: This code demonstrates how to implement the resolveMentionSuggestions function to enable user mention suggestions in the Text Editor. It receives search text and returns matching user IDs.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-add-users-to-liveblocks-text-editor.mdx#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\n<LiveblocksProvider\n  resolveUsers={async ({ userIds }) => {\n    // ...\n  }}\n  resolveMentionSuggestions={async ({ text, roomId }) => {\n    // The text the user is searching for, e.g. \"mar\"\n    console.log(text);\n\n    // Return a list of user IDs that match the query\n    return [\"marc@example.com\", \"marissa@example.com\"];\n  }}\n\n  // ...\n/>;\n```\n\n----------------------------------------\n\nTITLE: Getting Connection Status\nDESCRIPTION: Retrieving current WebSocket connection status of the Liveblocks room.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-redux.mdx#2025-04-11_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nconst {\n  liveblocks: { status },\n} = useStore();\n```\n\n----------------------------------------\n\nTITLE: Running Development Server\nDESCRIPTION: This command starts the development server for the Next.js application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-comments-emails-sendgrid/README.md#2025-04-11_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nnpm run dev\n```\n\n----------------------------------------\n\nTITLE: Rendering Basic Comment Body with Liveblocks Primitives\nDESCRIPTION: Demonstrates how to render a basic comment body using the Comment primitive component from Liveblocks.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/primitives.mdx#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { CommentData } from \"@liveblocks/client\";\nimport { Comment } from \"@liveblocks/react-ui/primitives\";\n\n// Render a custom comment body\nfunction MyComment({ comment }: { comment: CommentData }) {\n  return <Comment.Body body={comment.body} />;\n}\n```\n\n----------------------------------------\n\nTITLE: Deploying Comments Email System to Vercel\nDESCRIPTION: Command to create and deploy the comments email notification system to Vercel, including automatic setup and browser-based configuration\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-comments-emails-resend/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-comments-emails-resend --vercel\n```\n\n----------------------------------------\n\nTITLE: Managing User Notification Settings with @liveblocks/node\nDESCRIPTION: Demonstrates how to use new methods in the Node.js client to manage user notification settings. This includes getting, updating, and deleting notification settings for a user.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/liveblocks-codemod/CHANGELOG.md#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\nconst liveblocks = new Liveblocks({ secret: \"sk_xxx\" });\n\nconst settings = await liveblocks.getNotificationSettings({ userId });\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst updatedSettings = await liveblocks.updateNotificationSettings({\n  userId,\n  data: {\n    teams: {\n      $fileUploaded: true,\n    },\n  },\n});\nawait liveblocks.deleteNotificationSettings({ userId });\n```\n\n----------------------------------------\n\nTITLE: Using Toolbar.Separator in React-Tiptap\nDESCRIPTION: Demonstrates how to use the Toolbar.Separator component to add a visual separator between sections in the toolbar.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_15\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Toolbar } from \"@liveblocks/react-tiptap\";\n\n<Toolbar editor={editor}>\n  // +++\n  <Toolbar.SectionHistory />\n  // +++\n</Toolbar>;\n```\n\n----------------------------------------\n\nTITLE: Using getYjsProviderForRoom Factory Function with Yjs\nDESCRIPTION: Example demonstrating the recommended way to set up Yjs integration with Liveblocks using the getYjsProviderForRoom factory function, which automatically handles cleanup when the room changes.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport { getYjsProviderForRoom } from \"@liveblocks/yjs\";\n```\n\n----------------------------------------\n\nTITLE: Updating Notification Settings using useUpdateNotificationSettings Hook\nDESCRIPTION: This snippet demonstrates the usage of the `useUpdateNotificationSettings` hook from `@liveblocks/react` to update user notification settings. The hook returns a function, `updateSettings`, that can be called to modify the user's notification preferences. This example shows how to disable thread notifications on Slack.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-prosemirror/CHANGELOG.md#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n// A suspense version of this hook is available\nimport { useUpdateNotificationSettings } from \"@liveblocks/react\";\n\nconst updateSettings = useUpdateNotificationSettings();\n\nconst onUnsubscribe = () => {\n  updateSettings({\n    slack: {\n      thread: false,\n    },\n  });\n};\n```\n\n----------------------------------------\n\nTITLE: Simplifying ClientSideSuspense Component Usage\nDESCRIPTION: This code snippet shows the simplification of the ClientSideSuspense component usage by removing the function wrapper for children.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.0.mdx#2025-04-11_snippet_19\n\nLANGUAGE: tsx\nCODE:\n```\n// ❌ Before\n<ClientSideSuspense fallback={<Loading />}>\n  {() => <MyApp />}\n</ClientSideSuspense>\n```\n\nLANGUAGE: tsx\nCODE:\n```\n// ✅ After\n<ClientSideSuspense fallback={<Loading />}>\n  <MyApp />\n</ClientSideSuspense>\n```\n\n----------------------------------------\n\nTITLE: React Event Listener with User Property\nDESCRIPTION: Example showing updated event listener usage in React with new user property.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_24\n\nLANGUAGE: tsx\nCODE:\n```\nuseEventListener(({ event, user }) => {\n  //                       ^^^^ New!\n});\n```\n\n----------------------------------------\n\nTITLE: Installing Dependencies for Liveblocks and Monaco\nDESCRIPTION: Command to install the required npm packages including Liveblocks client, Yjs, Monaco editor, and related dependencies.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-monaco-javascript.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/yjs yjs monaco-editor y-monaco\n```\n\n----------------------------------------\n\nTITLE: Deploying Liveblocks Text Editor to Vercel\nDESCRIPTION: Command to create and deploy the Liveblocks text editor with email notifications to Vercel. Downloads the example and initiates the Vercel deployment process.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-lexical-emails-resend/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-lexical-emails-resend --vercel\n```\n\n----------------------------------------\n\nTITLE: Initializing Basic Webhook Endpoint in Next.js\nDESCRIPTION: Basic Next.js route handler setup for receiving webhook POST requests. Handles request body and headers for webhook processing.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-storage-document-data-to-a-planetscale-mysql-database.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Handle webhooks and database\n  // ...\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Installing the Liveblocks Live Cursors Example with npx\nDESCRIPTION: Command to download and set up the Solid.js live cursors example locally without an API key or Vercel deployment.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/solidjs-live-cursors/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example solidjs-live-cursors --no-api-key --no-vercel\n```\n\n----------------------------------------\n\nTITLE: Accessing User Information in Liveblocks Room\nDESCRIPTION: Demonstrate how to access user ID and info within a Liveblocks room using JavaScript.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/express.mdx#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nconst self = room.getSelf(); // or useSelf() in React\nconsole.log(self.id);\nconsole.log(self.info);\n```\n\n----------------------------------------\n\nTITLE: Importing React Tiptap and Liveblocks UI Stylesheets in TSX\nDESCRIPTION: This code snippet demonstrates how to import the required stylesheets for React Tiptap and Liveblocks UI. Both stylesheets are necessary as React Tiptap depends on styles from @liveblocks/react-ui.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_54\n\nLANGUAGE: tsx\nCODE:\n```\nimport \"@liveblocks/react-ui/styles.css\";\nimport \"@liveblocks/react-tiptap/styles.css\";\n```\n\n----------------------------------------\n\nTITLE: Checking Liveblocks Package Versions with NPM\nDESCRIPTION: Command to list all installed Liveblocks package versions in your project dependencies to identify version mismatches.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/errors/dupes.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm ls | grep @liveblocks\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Configuration File\nDESCRIPTION: Command to initialize the liveblocks.config.ts file using npx. This file can be used later to define types for the application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/vuejs.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework javascript\n```\n\n----------------------------------------\n\nTITLE: Disabling Attachments in Liveblocks 2.8 Components\nDESCRIPTION: Example of how to disable attachments in various Liveblocks 2.8 components by setting the showAttachments prop to false.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.8.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n// Disable attachments\n<Composer showAttachments={false} ... />\n<Comment showAttachments={false} ... />\n<Thread showAttachments={false} ... />\n<InboxNotification showAttachments={false} ... />\n```\n\n----------------------------------------\n\nTITLE: Using Notification Settings Hook in React\nDESCRIPTION: Demonstration of using the useNotificationSettings hook to manage notification preferences.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-lexical/CHANGELOG.md#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n// A suspense version of this hook is available\nimport { useNotificationSettings } from \"@liveblocks/react\";\n\nconst [{ isLoading, error, settings }, updateSettings] = useNotificationSettings();\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst onSave = () => {\n  updateSettings({\n    slack: {\n      textMention: true,\n    },\n  });\n};\n```\n\n----------------------------------------\n\nTITLE: Updating Liveblocks Configuration to Global Types\nDESCRIPTION: This code snippet shows the transformation from using createRoomContext to declaring global Liveblocks types.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.0.mdx#2025-04-11_snippet_11\n\nLANGUAGE: tsx\nCODE:\n```\n// ❌ Before\nexport const {\n  ...\n} = createRoomContext<MyPresence, MyStorage, MyUserMeta, MyRoomEvent, MyThreadMetadata>(client);\n```\n\nLANGUAGE: tsx\nCODE:\n```\n// ✅ After\ndeclare global {\n  interface Liveblocks {\n    Presence: MyPresence;\n    Storage: MyStorage;\n    UserMeta: MyUserMeta;\n    RoomEvent: MyRoomEvent;\n    ThreadMetadata: MyThreadMetadata;\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Example Cards in JSX\nDESCRIPTION: This snippet demonstrates the use of ExampleCard components within a ListGrid to showcase Liveblocks examples with associated technologies and images.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/index.mdx#2025-04-11_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\n<ListGrid columns={2}>\n  <ExampleCard\n    example={{\n      title: \"Live Cursors\",\n      slug: \"live-cursors\",\n      image: \"/images/examples/thumbnails/live-cursors.jpg\",\n    }}\n    technologies={[\"nextjs\", \"vuejs\", \"sveltekit\", \"solidjs\", \"javascript\"]}\n    openInNewWindow\n  />\n  <ExampleCard\n    example={{\n      title: \"Collaborative Whiteboard\",\n      slug: \"collaborative-whiteboard-advanced\",\n      image:\n        \"/images/examples/thumbnails/collaborative-whiteboard-advanced.jpg\",\n      advanced: true,\n    }}\n    technologies={[\"nextjs\"]}\n    openInNewWindow\n  />\n</ListGrid>\n```\n\n----------------------------------------\n\nTITLE: Setting LiveList Element in TypeScript\nDESCRIPTION: Example of using the new LiveList.set method to update a specific index in a LiveList, which was introduced in version 0.16.0.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/create-liveblocks-app/CHANGELOG.md#2025-04-11_snippet_18\n\nLANGUAGE: typescript\nCODE:\n```\nconst list = new LiveList([\"🦁\", \"🦊\", \"🐵\"]);\nlist.set(0, \"🐺\");\nlist.toArray(); // equals [\"🐺\", \"🦊\", \"🐵\"]\n```\n\n----------------------------------------\n\nTITLE: Setting Up LiveblocksProvider in React Layout\nDESCRIPTION: This code snippet demonstrates how to set up the LiveblocksProvider component in a React layout file.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.0.mdx#2025-04-11_snippet_14\n\nLANGUAGE: tsx\nCODE:\n```\n// ✅ After\n\"use client\";\n\nimport { LiveblocksProvider } from \"@liveblocks/react\";\n\nexport function Layout({ children }) {\n  return (\n    // Move options here, client will be created for you\n    <LiveblocksProvider\n      authEndpoint=\"/api/liveblocks-auth\"\n      throttle={16}\n      /* etc */\n    >\n      {children}\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Custom FloatingToolbar with Children\nDESCRIPTION: Demonstrates how to create a custom floating toolbar by passing elements as children for full customization.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_23\n\nLANGUAGE: tsx\nCODE:\n```\nimport { FloatingToolbar } from \"@liveblocks/react-tiptap\";\nimport { Editor } from \"@tiptap/react\";\n\nfunction CustomToolbar({ editor }: { editor: Editor | null }) {\n  return (\n    <FloatingToolbar editor={editor}>\n      Hello <strong>world</strong>\n    </FloatingToolbar>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Liveblocks Client\nDESCRIPTION: Updates the front-end configuration to use the new authentication endpoint.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/1.2.mdx#2025-04-11_snippet_3\n\nLANGUAGE: ts\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\n\nconst client = createClient({\n  authEndpoint: \"/api/liveblocks-auth\",\n});\n```\n\n----------------------------------------\n\nTITLE: Using Suspense-enabled Hooks in a React Component\nDESCRIPTION: This example shows how to use Suspense-enabled Liveblocks hooks in a React component, eliminating the need for null checks.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/0.18.mdx#2025-04-11_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Component() {\n  const camera = useStorage((root) => root.camera);\n  const items = useStorage((root) => root.items);\n  // No more null checking! :)\n}\n```\n\n----------------------------------------\n\nTITLE: Creating HTML element for CodeMirror editor\nDESCRIPTION: This HTML snippet creates a div element that will be used to attach the CodeMirror editor.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-codemirror-javascript.mdx#2025-04-11_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<div id=\"editor\"></div>\n```\n\n----------------------------------------\n\nTITLE: Adding Person Mutation for LiveList in React\nDESCRIPTION: Creates a mutation to add a new person to the LiveList, demonstrating how to create and push a new LiveObject.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/nesting-data-types/guide.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n// Add person mutation\nconst addPerson = useMutation(({ storage }) => {\n  const newPerson = new LiveObject({ name: \"Grace\", age: 45 });\n  storage.get(\"people\").push(newPerson);\n}, []);\n```\n\n----------------------------------------\n\nTITLE: Room History API in @liveblocks/client\nDESCRIPTION: New history API method for clearing room history state.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-core/CHANGELOG.md#2025-04-11_snippet_21\n\nLANGUAGE: javascript\nCODE:\n```\nroom.history.clear()\n```\n\n----------------------------------------\n\nTITLE: Deploying Liveblocks Avatar Stack to Vercel\nDESCRIPTION: Command to create and deploy the avatar stack example to Vercel. This will download the example and initiate the Vercel deployment process through the browser.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-live-avatars-advanced/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-live-avatars-advanced --vercel\n```\n\n----------------------------------------\n\nTITLE: Initializing Yjs Awareness\nDESCRIPTION: Shows how to initialize and access the awareness property from a LiveblocksYjsProvider instance.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-yjs.mdx#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nconst yDoc = new Y.Doc();\nconst yProvider = new LiveblocksYjsProvider(room, yDoc);\n\n// Yjs awareness\nconst awareness = yProvider.awareness;\n```\n\n----------------------------------------\n\nTITLE: Verifying Liveblocks Webhook Request\nDESCRIPTION: Demonstrates how to verify an incoming webhook request using the WebhookHandler.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/webhooks.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst event = webhookHandler.verifyRequest({\n  headers: req.headers,\n  rawBody: req.body,\n});\n```\n\n----------------------------------------\n\nTITLE: Complete Editor Setup with FloatingToolbar and Threads\nDESCRIPTION: Comprehensive example showing how to set up a rich text editor with floating toolbar, composer, and thread support.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_16\n\nLANGUAGE: tsx\nCODE:\n```\nimport { LexicalComposer } from \"@lexical/react/LexicalComposer\";\nimport { RichTextPlugin } from \"@lexical/react/LexicalRichTextPlugin\";\nimport { ContentEditable } from \"@lexical/react/LexicalContentEditable\";\nimport { LexicalErrorBoundary } from \"@lexical/react/LexicalErrorBoundary\";\nimport { useThreads } from \"@liveblocks/react/suspense\";\nimport {\n  liveblocksConfig,\n  LiveblocksPlugin,\n  FloatingComposer,\n  FloatingToolbar,\n} from \"@liveblocks/react-lexical\";\n\nconst initialConfig = liveblocksConfig({\n  namespace: \"MyEditor\",\n  theme: {},\n  nodes: [],\n  onError: (err) => console.error(err),\n});\n\nfunction Editor() {\n  const { threads } = useThreads();\n\n  return (\n    <LexicalComposer initialConfig={initialConfig}>\n      <LiveblocksPlugin>\n        <FloatingToolbar />\n        <FloatingComposer style={{ width: \"350px\" }} />\n        <FloatingThreads threads={threads} style={{ width: \"350px\" }} />\n      </LiveblocksPlugin>\n      <RichTextPlugin\n        contentEditable={<ContentEditable />}\n        placeholder={<div>Enter some text...</div>}\n        ErrorBoundary={LexicalErrorBoundary}\n      />\n    </LexicalComposer>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Importing Liveblocks and Custom Styles\nDESCRIPTION: Import statements for including Liveblocks UI styles, Lexical styles, and custom global styles in a React application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-lexical.mdx#2025-04-11_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nimport \"@liveblocks/react-ui/styles.css\";\nimport \"@liveblocks/react-lexical/styles.css\";\nimport \"./globals.css\";\n```\n\n----------------------------------------\n\nTITLE: Installing Project Dependencies\nDESCRIPTION: This command installs all the necessary dependencies for the project using npm.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-comments-emails-sendgrid/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpm install\n```\n\n----------------------------------------\n\nTITLE: Importing Hooks Directly in Liveblocks v2.0\nDESCRIPTION: Example demonstrating the improved import pattern in Liveblocks v2.0, where hooks can be imported directly from @liveblocks/react packages instead of being exported from a local config file.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/liveblocks-codemod/CHANGELOG.md#2025-04-11_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\n// ❌ Before: get hooks exported from your Liveblocks config\nimport { RoomProvider, useRoom, ... } from \"./liveblocks.config\";\n\n// ✅ After: import hooks directly\nimport { RoomProvider, useRoom, ... } from \"@liveblocks/react\";\nimport { RoomProvider, useRoom, ... } from \"@liveblocks/react/suspense\";\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Tldraw Example\nDESCRIPTION: Command to create a new Liveblocks project with the tldraw whiteboard example and automatically configure the API key.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-tldraw-whiteboard-storage/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-tldraw-whiteboard-storage --api-key\n```\n\n----------------------------------------\n\nTITLE: Configuring Liveblocks Client in Nuxt.js\nDESCRIPTION: Set up the Liveblocks client on the front-end, replacing the publicApiKey with the authEndpoint.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/nuxtjs.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\n\nconst client = createClient({\n  authEndpoint: \"/api/liveblocks-auth\",\n});\n```\n\n----------------------------------------\n\nTITLE: Scalar Types Example Schema\nDESCRIPTION: Example schema demonstrating the use of basic scalar types including string, number, boolean, and null.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/schema-validation/syntax.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ntype Storage {\n  name: string\n  age: number\n  hasSiblings: boolean\n  favoritePet: string | null\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring EmojibaseUrl in LiveblocksUIConfig\nDESCRIPTION: Code example showing how to configure the emojibaseUrl advanced option in LiveblocksUIConfig to customize where emoji data is fetched from.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nLiveblocksUIConfig: {\n  emojibaseUrl: \"https://custom-cdn.com/emojibase/\"\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Reactions to Comments\nDESCRIPTION: Shows how to add emoji reactions to comments, including the reaction emoji, user ID, and optional creation timestamp.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-migrate-to-liveblocks-comments.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst reaction = await liveblocks.addCommentReaction({\n  roomId,\n  threadId: thread.id,\n  commentId: comment.id,\n\n  data: {\n    emoji: \"✅\",\n    userId: \"guillaume@example.com\",\n    createdAt: new Date(),\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Getting All States\nDESCRIPTION: Shows how to retrieve all client states using getStates() method.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-yjs.mdx#2025-04-11_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\n// A Map of each user's awareness state\nconst states: Map<number, unknown> = awareness.getStates();\n```\n\n----------------------------------------\n\nTITLE: Global CSS Styles for Quill Editor Integration\nDESCRIPTION: Global CSS styles to fix Quill-specific behaviors, including cursor flags positioning, editor focus styling, and clipboard element visibility.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-quill-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_7\n\nLANGUAGE: css\nCODE:\n```\n/* Let cursor flags show on the first line */\ndiv.ql-container {\n  overflow: unset;\n}\n\n/* Remove editor focus */\ndiv.ql-editor:focus {\n  outline: none;\n}\n\n/* Hide non-visible clipboard element */\ndiv.ql-clipboard {\n  left: -100000px;\n  height: 1px;\n  overflow-y: hidden;\n  position: absolute;\n  top: 50%;\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Undo/Redo Functions in Liveblocks\nDESCRIPTION: Shows how to access the undo and redo functions from a Liveblocks room instance. These functions can be bound to keyboard shortcuts or UI buttons.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-multiplayer-undo-redo-with-redux.mdx#2025-04-11_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst { undo, redo } = client.getRoom(\"room-id\").history;\n```\n\n----------------------------------------\n\nTITLE: Creating Supabase Database Table Schema\nDESCRIPTION: SQL command to create a documents table in Supabase with roomId as primary key and storageData field for JSON storage.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-storage-document-data-to-a-supabase-postgres-database.mdx#2025-04-11_snippet_6\n\nLANGUAGE: sql\nCODE:\n```\nCREATE TABLE documents ( roomId VARCHAR(255) PRIMARY KEY, storageData TEXT NOT NULL );\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Yjs Provider\nDESCRIPTION: This snippet demonstrates how to install the Liveblocks Yjs provider using npm. It ensures that both the Liveblocks client and Yjs provider are included as dependencies for integrating collaborative features into an application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-yjs/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/yjs\n```\n\n----------------------------------------\n\nTITLE: LiveList Definition Example\nDESCRIPTION: Example of using LiveList for live array functionality.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/schema-validation/syntax.mdx#2025-04-11_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\ntype Storage {\n  animals: LiveList<string>\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Configuration\nDESCRIPTION: Command to create and initialize the liveblocks configuration file for type definitions.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-monaco-vuejs.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework javascript\n```\n\n----------------------------------------\n\nTITLE: Upgrading Liveblocks Packages Using NPX\nDESCRIPTION: Command to upgrade all Liveblocks packages to the latest version using npx create-liveblocks-app.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.8.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --upgrade\n```\n\n----------------------------------------\n\nTITLE: Creating Liveblocks Client with Notification Settings\nDESCRIPTION: Example showing how to use the client to get and update notification settings.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-lexical/CHANGELOG.md#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createClient } from '@liveblocks/client'\nconst client = createClient({ ... })\n\nconst settings = await client.getNotificationSettings();\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst updatedSettings = await client.updateNotificationSettings({\n  email: {\n    thread: false,\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Global Types in Liveblocks v2.0\nDESCRIPTION: Example showing how to configure global TypeScript types for Liveblocks v2.0, replacing the previous createRoomContext pattern with a global interface declaration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare global {\n  interface Liveblocks {\n    Presence: Presence;\n    Storage: Storage;\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Custom ActivitiesData Type in Liveblocks\nDESCRIPTION: This code snippet demonstrates how to define a custom ActivitiesData type to improve typing for custom notifications and their activities' data.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.0.mdx#2025-04-11_snippet_22\n\nLANGUAGE: tsx\nCODE:\n```\ndeclare global {\n  interface Liveblocks {\n    // Custom activities data for custom notification kinds\n    ActivitiesData: {\n      // Example, a custom $alert kind\n      $alert: {\n        title: string;\n        message: string;\n      };\n    };\n\n    // Other kinds\n    // ...\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Subscribing to Storage Status Changes in Typescript\nDESCRIPTION: Example demonstrating how to subscribe to storage status changes using the room.subscribe method with the 'storage-status' event. It handles different possible statuses through a switch statement.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/create-liveblocks-app/CHANGELOG.md#2025-04-11_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\nroom.subscribe(\"storage-status\", (status) => {\n  switch (status) {\n    case \"not-loaded\":\n      break;\n    case \"loading\":\n      break;\n    case \"synchronizing\":\n      break;\n    case \"synchronized\":\n      break;\n    default:\n      break;\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Client Configuration Polyfills\nDESCRIPTION: Example showing the change in how polyfills are configured in the Liveblocks client options.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-redux/CHANGELOG.md#2025-04-11_snippet_17\n\nLANGUAGE: typescript\nCODE:\n```\n// Old way\nclientOptions.fetchPolyfill\nclientOptions.WebSocketPolyfill\n\n// New way\nclientOptions.polyfills: { fetch, WebSocket }\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks and BlockNote Dependencies\nDESCRIPTION: Command to install necessary packages for Liveblocks and BlockNote integration in a Next.js project.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-blocknote.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/react @liveblocks/react-ui @liveblocks/react-blocknote @blocknote/core @blocknote/react @blocknote/mantine\n```\n\n----------------------------------------\n\nTITLE: Lifting state to room level in React components\nDESCRIPTION: Example of how to initialize storage at the RoomProvider level instead of in individual components to avoid ambiguity and improve predictability.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/0.17.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { LiveObject } from \"@liveblocks/client\";\n\nfunction Root() {\n  // Instead, initialize it at the RoomProvider level to remove all ambiguity\n  const initialStorage = {\n    author: new LiveObject({\n      firstName: \"Ada\",\n      lastName: \"Lovelace\",\n    }),\n  };\n\n  return (\n    <RoomProvider id=\"my-room-id\" initialStorage={initialStorage}>\n      <ComponentA />\n    </RoomProvider>\n  );\n}\n\nfunction ComponentA() {\n  const author = useObject(\"author\");\n\n  /* ... */\n}\n```\n\n----------------------------------------\n\nTITLE: Styling Live Avatars with CSS Modules\nDESCRIPTION: This CSS module provides styles for the Avatars component, including layout, hover effects, and tooltips. It uses flexbox for positioning and custom styling for avatar appearance.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-quill-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_14\n\nLANGUAGE: css\nCODE:\n```\n.avatars {\n  display: flex;\n  padding: 0 0.75rem;\n}\n\n.avatar {\n  display: flex;\n  place-content: center;\n  position: relative;\n  border: 4px solid #fff;\n  border-radius: 9999px;\n  width: 42px;\n  height: 42px;\n  background-color: #9ca3af;\n  margin-left: -0.75rem;\n}\n\n.avatar:before {\n  content: attr(data-tooltip);\n  position: absolute;\n  top: 100%;\n  opacity: 0;\n  transition: opacity 0.15s ease;\n  padding: 5px 10px;\n  color: white;\n  font-size: 0.75rem;\n  border-radius: 8px;\n  margin-top: 10px;\n  z-index: 1;\n  background: black;\n  white-space: nowrap;\n}\n\n.avatar:hover:before {\n  opacity: 1;\n}\n\n.avatar_picture {\n  width: 100%;\n  height: 100%;\n  border-radius: 9999px;\n}\n```\n\n----------------------------------------\n\nTITLE: Importing Default Styles for Liveblocks React UI\nDESCRIPTION: This snippet shows how to import the default styles for Liveblocks React UI components. It's the first step in styling the default components.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/styling-and-customization.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport \"@liveblocks/react-ui/styles.css\";\n```\n\n----------------------------------------\n\nTITLE: Styling collaborative text editor with CSS\nDESCRIPTION: CSS styles for the collaborative text editor to improve its appearance and layout.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-slate-react.mdx#2025-04-11_snippet_5\n\nLANGUAGE: css\nCODE:\n```\n.container {\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  border-radius: 12px;\n  background: #fff;\n  width: 100%;\n  height: 100%;\n  color: #111827;\n}\n\n.editor {\n  border-radius: inherit;\n  flex-grow: 1;\n  width: 100%;\n  height: 100%;\n}\n\n.editor:focus {\n  outline: none;\n}\n\n.editorContainer {\n  position: relative;\n  padding: 1em;\n  height: 100%;\n}\n\n.editor p {\n  margin: 1em 0;\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Typing Indicator Component with useOthers\nDESCRIPTION: Implementation of a component that shows when other users are typing, using the useOthers hook to monitor the typing status of all other users in the room.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-react-and-liveblocks.mdx#2025-04-11_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n  ClientSideSuspense,\n  useOthers,\n  useUpdateMyPresence,\n} from \"@liveblocks/react/suspense\";\nimport { useState } from \"react\";\n\n/* WhoIsHere */\n\nfunction SomeoneIsTyping() {\n  const someoneIsTyping = useOthers((others) =>\n    others.some((other) => other.presence.isTyping)\n  );\n\n  return (\n    <div className=\"someone_is_typing\">\n      {someoneIsTyping ? \"Someone is typing...\" : \"\"}\n    </div>\n  );\n}\n\nfunction TodoList() {\n  const [draft, setDraft] = useState(\"\");\n  const updateMyPresence = useUpdateMyPresence();\n\n  return (\n    <div className=\"container\">\n      <WhoIsHere />\n      <input {/* ... */ } />\n      <SomeoneIsTyping />\n    </div>\n  );\n}\n\n/* Page */\n```\n\n----------------------------------------\n\nTITLE: Updated Zustand Room Exit Implementation\nDESCRIPTION: Demonstrates the breaking change in the Zustand package where room ID is no longer required when leaving a room.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/1.5.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nconst {\n  liveblocks: { leaveRoom },\n} = useStore();\n\n// ❌ Before\nleaveRoom(\"my-room-name\");\n\n// ✅ After\nleaveRoom();\n```\n\n----------------------------------------\n\nTITLE: Next.js Route Handler Implementation\nDESCRIPTION: Complete Next.js route handler example showing webhook verification and text mention email preparation.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-emails.mdx#2025-04-11_snippet_12\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  isTextMentionNotificationEvent,\n  WebhookHandler,\n} from \"@liveblocks/node\";\nimport { Liveblocks } from \"@liveblocks/node\";\nimport { prepareTextMentionNotificationEmailAsReact } from \"@liveblocks/emails\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nconst webhookHandler = new WebhookHandler(\n  process.env.LIVEBLOCKS_WEBHOOK_SECRET_KEY as string\n);\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  if (isTextMentionNotificationEvent(event)) {\n    const emailData = await prepareTextMentionNotificationEmailAsReact(\n      liveblocks,\n      event\n    );\n\n    const email = (\n      <div>\n        <div>\n          @{emailData.mention.author.id} at {emailData.mention.createdAt}\n        </div>\n        <div>{emailData.mention.reactContent}</div>\n      </div>\n    );\n  }\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing FloatingThreads Component in React\nDESCRIPTION: Demonstrates how to use the FloatingThreads component with basic customization options, including applying custom classes and modifying the Thread component.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-blocknote.mdx#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\n<FloatingThreads\n  editor={editor}\n  threads={threads}\n  className=\"my-floating-thread\"\n/>\n```\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Thread } from \"@liveblocks/react-ui\";\n\n<FloatingThreads\n  editor={editor}\n  threads={threads}\n  className=\"my-floating-thread\"\n  // +++\n  components={{\n    Thread: (props) => (\n      <Thread {...props} className=\"border shadow\" style={{ width: \"300px\" }} />\n    ),\n  }}\n  // +++\n/>;\n```\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Comment } from \"@liveblocks/react-ui/primitives\";\n\n<FloatingThreads\n  editor={editor}\n  threads={threads}\n  className=\"my-floating-thread\"\n  components={{\n    Thread: (props) => (\n      // +++\n      <div>\n        {props.thread.comments.map((comment) => (\n          <Comment.Body\n            key={comment.id}\n            body={comment.body}\n            components={/* ... */}\n          />\n        ))}\n      </div>\n      // +++\n    ),\n  }}\n/>;\n```\n\n----------------------------------------\n\nTITLE: Importing Liveblocks and Custom Styles in Layout\nDESCRIPTION: React component that imports the required Liveblocks styles and custom CSS for the application layout.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-tiptap.mdx#2025-04-11_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nimport \"@liveblocks/react-ui/styles.css\";\nimport \"@liveblocks/react-tiptap/styles.css\";\nimport \"./globals.css\";\n```\n\n----------------------------------------\n\nTITLE: Installing Next.js Starter Kit with Liveblocks\nDESCRIPTION: Command to open the Next.js starter kit in CodeSandbox. This allows developers to quickly explore and start working with the project in an online development environment.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/starter-kits/nextjs-starter-kit/README.md#2025-04-11_snippet_0\n\nLANGUAGE: Markdown\nCODE:\n```\n[![Open in CodeSandbox](https://img.shields.io/badge/open%20in%20codesandbox-message?style=flat&logo=codesandbox&color=333&logoColor=fff)](https://codesandbox.io/s/github/liveblocks/liveblocks/tree/main/starter-kits/nextjs-starter-kit)\n```\n\n----------------------------------------\n\nTITLE: Fetching User Data with useUser Hook in React\nDESCRIPTION: Shows how to use the useUser hook to fetch a user's information from their ID, which is useful for building primitive components with user data.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/hooks.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useUser } from \"../liveblocks.config\";\n\nfunction Component() {\n  const { user } = useUser(\"olivier@example.com\");\n\n  // { name: \"Olivier\", avatar: \"https://...\", color: \"red\" }\n  console.log(user);\n\n  return <img src={user.avatar} alt={user.name} />;\n}\n```\n\n----------------------------------------\n\nTITLE: Deploying Collaborative Whiteboard to Vercel\nDESCRIPTION: Command to create and deploy the collaborative whiteboard project to Vercel. This sets up both the local development environment and initiates the Vercel deployment process.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-whiteboard/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-whiteboard --vercel\n```\n\n----------------------------------------\n\nTITLE: Importing Hooks in React Components\nDESCRIPTION: Demonstrates the new direct import pattern for Liveblocks hooks in React components, showing both the old and new approach.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_17\n\nLANGUAGE: typescript\nCODE:\n```\n// ❌ Before: get hooks exported from your Liveblocks config\nimport { RoomProvider, useRoom, ... } from \"./liveblocks.config\";\n\n// ✅ After: import hooks directly\nimport { RoomProvider, useRoom, ... } from \"@liveblocks/react\";\nimport { RoomProvider, useRoom, ... } from \"@liveblocks/react/suspense\";\n```\n\n----------------------------------------\n\nTITLE: Client Interface Type Example\nDESCRIPTION: Type definition showing the deprecated Others type should be replaced with readonly User array.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react/CHANGELOG.md#2025-04-11_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nOthers<P, U> → readonly User<P, U>[]\n```\n\n----------------------------------------\n\nTITLE: Using Custom Markdown Serializer with ProseMirror\nDESCRIPTION: Demonstrates how to use a custom markdown serializer when converting a ProseMirror document to markdown. This allows for customization of the markdown output by extending the default serializer.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-node-prosemirror.mdx#2025-04-11_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defaultMarkdownSerializer } from \"prosemirror-markdown\";\n\nconst mySerializer = new MarkdownSerializer({\n  marks: {\n    ...defaultMarkdownSerializer.marks,\n    em: {\n      open: \"*\",\n      close: \"*\",\n      mixable: true,\n      expelEnclosingWhitespace: true,\n    },\n  },\n});\n\nconst markdown = await withProsemirrorDocument(\n  { roomId: \"my-room-id\", client: liveblocks },\n  async (api) => {\n    // +++\n    return api.toMarkdown(mySerializer);\n    // +++\n  }\n);\n```\n\n----------------------------------------\n\nTITLE: Problematic Presence Type with Date Field in TypeScript\nDESCRIPTION: Example showing an invalid Presence type definition that includes a Date field, which is not a valid JSON value. The Date field is highlighted as the source of the error.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/errors/Presence.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare global {\n  interface Liveblocks {\n    Presence: {\n      // Your own fields go here...\n      cursor: { x: number; y: number } | null;\n      selection: string[];\n      lastActivity: Date; // ❌ The issue is here\n    };\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Liveblocks Thread with Initial Comment\nDESCRIPTION: Shows how to create a new thread with an initial comment in a Liveblocks room. Includes user ID and comment body structure.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-migrate-to-liveblocks-comments.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst thread = await liveblocks.createThread({\n  roomId,\n\n  data: {\n    comment: {\n      userId: \"florent@example.com\",\n\n      body: {\n        version: 1,\n        content: [\n        ],\n      },\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Basic Text Mention Email Preparation in TypeScript\nDESCRIPTION: Basic example showing how to use prepareTextMentionNotificationEmailAsHtml to process a text mention notification event and prepare email content.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-emails.mdx#2025-04-11_snippet_15\n\nLANGUAGE: tsx\nCODE:\n```\nimport { prepareTextMentionNotificationEmailAsHtml } from \"@liveblocks/emails\";\nimport { isTextMentionNotificationEvent } from \"@liveblocks/node\";\n\nif (isTextMentionNotificationEvent(event)) {\n  const emailData = await prepareTextMentionNotificationEmailAsHtml(\n    liveblocks,\n    event\n  );\n\n  const email = (\n    <div>\n      <div>\n        @{emailData.mention.author.id} at {emailData.mention.createdAt}\n      </div>\n      <div>{emailData.mention.htmlContent}</div>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Configuration File\nDESCRIPTION: Command to initialize the liveblocks.config.ts file using the create-liveblocks-app CLI tool. This file will be used later to define types for the application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-notifications.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework react\n```\n\n----------------------------------------\n\nTITLE: HTML Header with Light/Dark Mode Images\nDESCRIPTION: HTML markup for displaying the Liveblocks logo with light and dark mode variants using conditional rendering based on GitHub's theme modes.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-nextauth-google-avatars/README.md#2025-04-11_snippet_0\n\nLANGUAGE: HTML\nCODE:\n```\n<p align=\"center\">\n  <a href=\"https://liveblocks.io#gh-light-mode-only\">\n    <img src=\"https://raw.githubusercontent.com/liveblocks/liveblocks/main/.github/assets/header-light.svg\" alt=\"Liveblocks\" />\n  </a>\n  <a href=\"https://liveblocks.io#gh-dark-mode-only\">\n    <img src=\"https://raw.githubusercontent.com/liveblocks/liveblocks/main/.github/assets/header-dark.svg\" alt=\"Liveblocks\" />\n  </a>\n</p>\n```\n\n----------------------------------------\n\nTITLE: Declaring a Storage Type for Liveblocks in TypeScript\nDESCRIPTION: This snippet declares a global interface for the Liveblocks storage, defining a `todos` property as a LiveList that holds objects with a text property. This typing helps ensure that storage hooks can properly handle the todos data structure.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-react-and-liveblocks.mdx#2025-04-11_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nimport { LiveList } from \"@liveblocks/client\";\n\ndeclare global {\n  interface Liveblocks {\n    Presence: { isTyping: boolean };\n\n    // +++\n    Storage: {\n      todos: LiveList<{ text: string }>;\n    };\n    // +++\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Configuration File\nDESCRIPTION: Command to create the liveblocks.config.ts file which can be used to define types for the application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework react\n```\n\n----------------------------------------\n\nTITLE: Notification Components in @liveblocks/react-comments\nDESCRIPTION: Implementation of custom notification components with color tokens and kinds support.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_20\n\nLANGUAGE: typescript\nCODE:\n```\nInboxNotification.Custom\n--lb-destructive\n--lb-destructive-foreground\n--lb-destructive-contrast\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Configuration\nDESCRIPTION: Command to initialize the Liveblocks configuration file for React framework setup.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-quill-react.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework react\n```\n\n----------------------------------------\n\nTITLE: Importing liveblocksEnhancer from @liveblocks/redux\nDESCRIPTION: Updated import statement for the main export from @liveblocks/redux, which has been renamed to liveblocksEnhancer.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/0.19.mdx#2025-04-11_snippet_4\n\nLANGUAGE: ts\nCODE:\n```\nimport { liveblocksEnhancer } from \"@liveblocks/redux\";\n```\n\n----------------------------------------\n\nTITLE: Styling the Collaborative To-Do List Application\nDESCRIPTION: CSS styling for the to-do list application, including container layout, input fields, to-do items, and presence indicators for online users.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-react-redux-and-liveblocks.mdx#2025-04-11_snippet_5\n\nLANGUAGE: css\nCODE:\n```\nbody {\n  background-color: rgb(243, 243, 243);\n}\n\n.container {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  margin-left: auto;\n  margin-right: auto;\n  margin-top: 3rem;\n  max-width: 28rem;\n}\n\ninput {\n  box-sizing: border-box;\n  padding: 0.5rem 0.875rem;\n  margin: 0.5rem 0;\n  width: 100%;\n  background-color: white;\n  box-shadow:\n    0 0 #000,\n    0 0 #000,\n    0 0 #000,\n    0 0 #000,\n    0 1px 2px 0 rgba(0, 0, 0, 0.05);\n  border-radius: 0.5rem;\n  color: black;\n  border: 0 solid;\n  font-size: 16px;\n}\n\ninput:hover {\n  box-shadow:\n    0 0 #000,\n    0 0 #000,\n    0 0 #000,\n    0 0 #000,\n    0 1px 3px 0 rgba(0, 0, 0, 0.1),\n    0 1px 2px 0 rgba(0, 0, 0, 0.06);\n}\n\ninput:focus {\n  outline: none;\n}\n\n.todo_container {\n  display: flex;\n  padding: 0.5rem 0.875rem;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.todo {\n  flex-grow: 1;\n}\n\n.delete_button {\n  padding: 0;\n  margin: 0;\n  font-size: 16px;\n  border: 0 solid;\n  appearance: button;\n  background-color: transparent;\n}\n\n.delete_button:focus {\n  outline: none;\n}\n\n.who_is_here {\n  align-self: flex-end;\n  font-size: 11px;\n  color: #aaa;\n}\n\n.someone_is_typing {\n  position: absolute;\n  font-size: 11px;\n  color: #aaa;\n}\n```\n\n----------------------------------------\n\nTITLE: Calling a Storage Mutation\nDESCRIPTION: Example of calling the updateName mutation function with parameters to modify the scientist's first name. This demonstrates how to pass arguments to a mutation to update specific parts of the storage.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-storage-with-react.mdx#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nupdateName(\"firstName\", \"Albert\");\n```\n\n----------------------------------------\n\nTITLE: Connection Status Mapping\nDESCRIPTION: Table showing mapping between old and new connection status values in the Liveblocks client.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react/CHANGELOG.md#2025-04-11_snippet_13\n\nLANGUAGE: markdown\nCODE:\n```\n| ❌ Old statuses | ✅ New statuses |\n| --------------- | --------------- |\n| closed          | initial         |\n| authenticating  | connecting      |\n| connecting      | connecting      |\n| open            | connected       |\n| unavailable     | reconnecting    |\n| failed          | disconnected    |\n```\n\n----------------------------------------\n\nTITLE: Liveblocks Client Initialization (Pre and Post 2.0)\nDESCRIPTION: Comparison of client initialization methods, transitioning from manual client creation to using LiveblocksProvider\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react/CHANGELOG.md#2025-04-11_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\n// ❌ Before\nconst client = createClient(/* options */);\n\n// ✅ After\n<LiveblocksProvider /* options */>\n  <App />\n</LiveblocksProvider>\n```\n\n----------------------------------------\n\nTITLE: Anonymous Object Types Example\nDESCRIPTION: Example of using inline anonymous object types in a schema.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/schema-validation/syntax.mdx#2025-04-11_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\ntype Storage  {\n  scientist: { name: string, age: number }\n}\n```\n\n----------------------------------------\n\nTITLE: Generating Liveblocks Webhook Signature\nDESCRIPTION: Demonstrates the process of generating a webhook signature using HMAC-SHA256 in Node.js.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/webhooks.mdx#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\n// Your endpoint's secret key\nconst secret = \"whsec_MfKQ9r8GKYqrTwjUPD8ILPZIo2LaLaSw\";\n\n// Need to base64 decode the secret\nconst secretBytes = new Buffer(secret.split(\"_\")[1], \"base64\");\n// This is the signature you will compare against the signature header\nconst signature = crypto\n.createHmac(\"sha256\", secretBytes)\n.update(signedContent)\n.digest(\"base64\");\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks configuration file\nDESCRIPTION: Command to create the liveblocks.config.ts file, which can be used later to define types for the application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-blocknote.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework react\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks configuration file for React\nDESCRIPTION: Command to create a liveblocks.config.ts file using the Liveblocks CLI. This file can be used later to define types for the application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/zustand.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework react\n```\n\n----------------------------------------\n\nTITLE: Thread Filtering with Metadata in Liveblocks React\nDESCRIPTION: Demonstrates how to filter threads by metadata, including filtering threads by the absence of specific metadata attributes\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-client/CHANGELOG.md#2025-04-11_snippet_5\n\nLANGUAGE: ts\nCODE:\n```\nuseThreads({\n  query: {\n    // Filter any \"pinned\" threads that don't have a color set\n    metadata: {\n      pinned: true,\n      color: null, // ✨\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Importing Default Styles for Liveblocks React UI in TypeScript\nDESCRIPTION: This snippet shows how to import the default styles for Liveblocks React UI components. This is the first step in applying the default theme to notifications.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/notifications/styling-and-customization.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport \"@liveblocks/react-ui/styles.css\";\n```\n\n----------------------------------------\n\nTITLE: Filtering Threads by Absence of Metadata in @liveblocks/react\nDESCRIPTION: Shows how to use the new filtering capability in useThreads() or useUserThreads_experimental() to filter threads by the absence of metadata.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-zustand/CHANGELOG.md#2025-04-11_snippet_3\n\nLANGUAGE: ts\nCODE:\n```\nuseThreads({\n  query: {\n    // Filter any \"pinned\" threads that don't have a color set\n    metadata: {\n      pinned: true,\n      color: null, // ✨\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing basic undo/redo buttons with Liveblocks in React\nDESCRIPTION: This snippet shows how to implement basic undo and redo functionality using the useUndo and useRedo hooks from @liveblocks/react/suspense. These hooks return functions that allow users to undo and redo the last changes made to the app.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-multiplayer-undo-redo-with-react.mdx#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useUndo, useRedo } from \"@liveblocks/react/suspense\";\n\nfunction App() {\n  const undo = useUndo();\n  const redo = useRedo();\n\n  return (\n    <>\n      <button onClick={() => undo()}>Undo</button>\n      <button onClick={() => redo()}>Redo</button>\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Declaring Global Liveblocks Types in TypeScript\nDESCRIPTION: Demonstrates how to declare global Presence and Storage types for Liveblocks in TypeScript, improving developer experience by allowing types to be specified once and shared across all Liveblocks APIs.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-emails/CHANGELOG.md#2025-04-11_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare global {\n  interface Liveblocks {\n    Presence: Presence;\n    Storage: Storage;\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Importing Hooks Directly in Liveblocks React\nDESCRIPTION: Demonstrates the improved import syntax for hooks in @liveblocks/react that allows importing hooks directly rather than through a config file export, introduced in version 2.0.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react-ui/CHANGELOG.md#2025-04-11_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\n// ❌ Before: get hooks exported from your Liveblocks config\nimport { RoomProvider, useRoom, ... } from \"./liveblocks.config\";\n\n// ✅ After: import hooks directly\nimport { RoomProvider, useRoom, ... } from \"@liveblocks/react\";\nimport { RoomProvider, useRoom, ... } from \"@liveblocks/react/suspense\";\n```\n\n----------------------------------------\n\nTITLE: Configuring LiveblocksProvider in React\nDESCRIPTION: Shows how to enable the preventUnsavedChanges option when using LiveblocksProvider in React applications.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node/CHANGELOG.md#2025-04-11_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\n<LiveblocksProvider preventUnsavedChanges />\n```\n\n----------------------------------------\n\nTITLE: Before/After Comparison of Room Context Creation in TypeScript\nDESCRIPTION: Example showing how type definitions have changed in Liveblocks 2.0. Previously types were passed to createRoomContext, now they're defined globally via the Liveblocks interface.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-redux/CHANGELOG.md#2025-04-11_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\n// ❌ Before\nexport const {\n  suspense: {\n    RoomProvider,\n    useRoom,\n    // etc\n  },\n} = createRoomContext<Presence, Storage>(client);\n\n// ✅ After\ndeclare global {\n  interface Liveblocks {\n    Presence: Presence;\n    Storage: Storage;\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks 1.2 Packages\nDESCRIPTION: Command to upgrade Liveblocks packages to version 1.2 in a React application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/1.2.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client@latest @liveblocks/node@latest @liveblocks/react@latest\n```\n\n----------------------------------------\n\nTITLE: Deploying Collaborative Text Editor on Vercel with Liveblocks CLI\nDESCRIPTION: Command to deploy the collaborative text editor example on Vercel using the Liveblocks CLI. It downloads the example and guides the user through the Vercel deployment process.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-lexical/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-lexical --vercel\n```\n\n----------------------------------------\n\nTITLE: YDocUpdatedEvent Schema and Example in TypeScript\nDESCRIPTION: This snippet defines the TypeScript schema for the YDocUpdatedEvent and provides an example of the event object. This event is triggered when a Yjs document is updated, with a 5-second throttle.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/webhooks.mdx#2025-04-11_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\n// Schema\ntype YDocUpdatedEvent = {\n  type: \"ydocUpdated\";\n  data: {\n    projectId: string;\n    roomId: string;\n    updatedAt: string;\n  };\n};\n\n// Example\nconst ydocUpdatedEvent = {\n  type: \"ydocUpdated\",\n  data: {\n    projectId: \"my-project-id\",\n    roomId: \"my-room-id\",\n    updatedAt: \"2013-06-26T19:10:19Z\",\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Todo List Example\nDESCRIPTION: Command to download and install the Liveblocks todo list example project without an API key or Vercel setup.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/javascript-todo-list/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example javascript-todo-list --no-api-key --no-vercel\n```\n\n----------------------------------------\n\nTITLE: Importing Hooks Directly in React with Liveblocks\nDESCRIPTION: Shows the updated way to import Liveblocks hooks directly in React components, simplifying imports and improving code organization.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-emails/CHANGELOG.md#2025-04-11_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\nimport { RoomProvider, useRoom, ... } from \"@liveblocks/react\";\nimport { RoomProvider, useRoom, ... } from \"@liveblocks/react/suspense\";\n```\n\n----------------------------------------\n\nTITLE: Rendering Comments in a Thread\nDESCRIPTION: Shows how to render multiple comments within a thread using the Comment primitive.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/primitives.mdx#2025-04-11_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Comment } from \"@liveblocks/react-ui/primitives\";\nimport { CommentData } from \"@liveblocks/client\";\n\n// Render custom comments in a thread.\nfunction MyComments({ comments }: { comments: CommentData[] }) {\n  return (\n    <>\n      {comments.map((comment) => (\n        <div key={comment.id}>\n          <Comment.Body\n            body={comment.body}\n            components={/* Your custom component parts */}\n          />\n        </div>\n      ))}\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Inbox Notification Object Structure in TypeScript\nDESCRIPTION: Example structure of an inbox notification object for a custom notification in Liveblocks. Shows the standard fields including id, kind, subjectId, readAt, notifiedAt, and custom activityData.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/notifications/concepts.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n{\n  id: \"in_sfj29g...\",\n  kind: \"$myCustomNotification\",\n  subjectId: \"myCustomId_dxs9s0\",\n  readAt: Date <Fri Dec 16 2023 15:16:25 GMT+0000 (Greenwich Mean Time)>,\n  notifiedAt: Date <Fri Dec 15 2023 14:15:22 GMT+0000 (Greenwich Mean Time)>,\n  activityData: {\n    myCustomProperty: \"myCustomValue\",\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Legacy Room Entry/Exit API in Liveblocks\nDESCRIPTION: Demonstrates the old method of entering and leaving rooms in Liveblocks, which is still supported but no longer recommended.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/1.5.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n// ❌ We recommend you stop using this API\nconst room = client.enter(\"my-room\", options);\n\n// Then later, when unmounting\nclient.leave(\"my-room\");\n```\n\n----------------------------------------\n\nTITLE: Defining ThreadDeletedEvent schema in TypeScript\nDESCRIPTION: Defines the schema for the ThreadDeletedEvent, triggered when a thread is deleted in Liveblocks. The event includes information about the project, room, thread, and deletion timestamp. This event is not throttled.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/webhooks.mdx#2025-04-11_snippet_20\n\nLANGUAGE: typescript\nCODE:\n```\ntype ThreadDeletedEvent = {\n  type: \"threadDeleted\";\n  data: {\n    projectId: string;\n    roomId: string;\n    threadId: string;\n    deletedAt: string;\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Node Package\nDESCRIPTION: Command to install the @liveblocks/node package using npm package manager\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node/README.md#2025-04-11_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nnpm install @liveblocks/node\n```\n\n----------------------------------------\n\nTITLE: Mention Suggestions Format Example\nDESCRIPTION: Shows the expected format for mention suggestion queries and responses in shell format.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/users-and-mentions.mdx#2025-04-11_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\n# If \"@mar\" has been typed, this is `text`\n\"mar\"\n\n# Return matching `usersIds`\n[\"marc@example.com\", \"marissa@example.com\"]\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Configuration File\nDESCRIPTION: Creates a liveblocks.config.ts file using the Liveblocks CLI. This file can be used later to define types for the application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-quill-javascript.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework javascript\n```\n\n----------------------------------------\n\nTITLE: Deploying Live Form Selection to Vercel\nDESCRIPTION: Command to create and deploy the live form selection example to Vercel. This will download the example and initiate the Vercel deployment process.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-live-form-selection/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-live-form-selection --vercel\n```\n\n----------------------------------------\n\nTITLE: Authenticating Users with Liveblocks\nDESCRIPTION: Demonstrates how to set up user authentication using liveblocks.prepareSession with a user ID (email address) for Comments integration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/users-and-mentions.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst session = liveblocks.prepareSession(\"charlie.layne@example.com\", {\n  userInfo: {\n    // Custom user info to be used in Presence\n    // This is NOT used in Comments\n    // ...\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Styling the Collaborative To-Do List Application\nDESCRIPTION: CSS styles for the to-do list application, providing layout, spacing, and interactive elements styling for a clean and user-friendly interface.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-react-and-liveblocks.mdx#2025-04-11_snippet_4\n\nLANGUAGE: css\nCODE:\n```\nbody {\n  background-color: rgb(243, 243, 243);\n}\n\n.container {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  margin-left: auto;\n  margin-right: auto;\n  margin-top: 3rem;\n  max-width: 28rem;\n}\n\ninput {\n  box-sizing: border-box;\n  padding: 0.5rem 0.875rem;\n  margin: 0.5rem 0;\n  width: 100%;\n  background-color: white;\n  box-shadow:\n    0 0 #000,\n    0 0 #000,\n    0 0 #000,\n    0 0 #000,\n    0 1px 2px 0 rgba(0, 0, 0, 0.05);\n  border-radius: 0.5rem;\n  color: black;\n  border: 0 solid;\n  font-size: 16px;\n}\n\ninput:hover {\n  box-shadow:\n    0 0 #000,\n    0 0 #000,\n    0 0 #000,\n    0 0 #000,\n    0 1px 3px 0 rgba(0, 0, 0, 0.1),\n    0 1px 2px 0 rgba(0, 0, 0, 0.06);\n}\n\ninput:focus {\n  outline: none;\n}\n\n.todo_container {\n  display: flex;\n  padding: 0.5rem 0.875rem;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.todo {\n  flex-grow: 1;\n}\n\n.delete_button {\n  padding: 0;\n  margin: 0;\n  font-size: 16px;\n  border: 0 solid;\n  appearance: button;\n  background-color: transparent;\n}\n\n.delete_button:focus {\n  outline: none;\n}\n\n.who_is_here {\n  align-self: flex-end;\n  font-size: 11px;\n  color: #aaa;\n}\n\n.someone_is_typing {\n  position: absolute;\n  font-size: 11px;\n  color: #aaa;\n}\n```\n\n----------------------------------------\n\nTITLE: Using Error Listener in React with Liveblocks\nDESCRIPTION: This snippet illustrates how to use the `useErrorListener` hook in a React component to listen for errors from Liveblocks. It shows the change from requiring a `RoomProvider` to a `LiveblocksProvider` and the expanded scope of errors now including Comments & Notifications errors, alongside room connection errors. The error listener is used to handle errors by displaying a toast or notifying Sentry, Datadog, etc.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react/CHANGELOG.md#2025-04-11_snippet_1\n\nLANGUAGE: ts\nCODE:\n```\n// ❌ Before: required a RoomProvider and would only notify about errors for that room\n// ✅ Now: requires a LiveblocksProvider and will notify about errors for any room\nuseErrorListener((err: LiveblocksError) => {\n  /* show toast, or notify Sentry, Datadog, etc */\n});\n```\n\n----------------------------------------\n\nTITLE: Setting Up Liveblocks Authentication with Pages Router\nDESCRIPTION: Creates an authentication endpoint for Liveblocks using the older Next.js Pages API routes format. It handles user authorization and room access.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-lexical-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\nimport type { NextApiRequest, NextApiResponse } from \"next\";\n\nconst API_KEY = \"{{SECRET_KEY}}\";\n\nconst liveblocks = new Liveblocks({\n  secret: API_KEY!,\n});\n\nexport default async function handler(\n  request: NextApiRequest,\n  response: NextApiResponse\n) {\n  // Get the current user's info from your database\n  const user = {\n    id: \"charlielayne@example.com\",\n    info: {\n      name: \"Charlie Layne\",\n      color: \"#D583F0\",\n      picture: \"https://liveblocks.io/avatars/avatar-1.png\",\n    },\n  };\n\n  // Create a session for the current user\n  // userInfo is made available in Liveblocks presence hooks, e.g. useOthers\n  const session = liveblocks.prepareSession(user.id, {\n    userInfo: user.info,\n  });\n\n  // Give the user access to the room\n  const { room } = request.body;\n  session.allow(room, session.FULL_ACCESS);\n\n  // Authorize the user and return the result\n  const { status, body } = await session.authorize();\n  response.status(status).send(body);\n}\n```\n\n----------------------------------------\n\nTITLE: Custom Leaf Rendering for Text Styles\nDESCRIPTION: A Leaf component for rendering text with custom formatting like bold, italic, and underline\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-slate-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_11\n\nLANGUAGE: tsx\nCODE:\n```\nimport { PropsWithChildren } from \"react\";\nimport { CustomText } from \"@/src/types\";\n\ntype Props = PropsWithChildren<{\n  attributes: Record<string, string>;\n  leaf: CustomText;\n}>;\n\nexport function Leaf({ attributes, children, leaf }: Props) {\n  if (leaf.bold) {\n    children = <strong>{children}</strong>;\n  }\n\n  if (leaf.italic) {\n    children = <em>{children}</em>;\n  }\n\n  if (leaf.underline) {\n    children = <u>{children}</u>;\n  }\n\n  return <span {...attributes}>{children}</span>;\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Config\nDESCRIPTION: Command to initialize the Liveblocks configuration file for JavaScript framework\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-tiptap-javascript.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework javascript\n```\n\n----------------------------------------\n\nTITLE: Rendering Examples Grid with ExampleCard Components\nDESCRIPTION: Shows a grid of example implementations using ExampleCard components to showcase different notification features and use cases.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/notifications.mdx#2025-04-11_snippet_2\n\nLANGUAGE: JSX\nCODE:\n```\n<ListGrid columns={2}>\n  <ExampleCard\n    example={{\n      title: \"Comments notifications\",\n      slug: \"comments-notifications\",\n      image: \"/images/examples/thumbnails/comments-notifications.png\",\n    }}\n    technologies={[\"nextjs\"]}\n    openInNewWindow\n  />\n  <ExampleCard\n    example={{\n      title: \"Custom notifications\",\n      slug: \"notifications-custom\",\n      image: \"/images/examples/thumbnails/custom-notifications.png\",\n    }}\n    technologies={[\"nextjs\"]}\n    openInNewWindow\n  />\n  <ExampleCard\n    example={{\n      title: \"Comments emails\",\n      slug: \"comments-emails\",\n      image: \"/images/examples/thumbnails/comments-email.png\",\n    }}\n    technologies={[\"nextjs\"]}\n    openInNewWindow\n  />\n  <ExampleCard\n    example={{\n      title: \"Text editor emails\",\n      slug: \"collaborative-text-editor-emails\",\n      image: \"/images/examples/thumbnails/text-editor-email.png\",\n    }}\n    technologies={[\"nextjs\"]}\n    openInNewWindow\n  />\n</ListGrid>\n```\n\n----------------------------------------\n\nTITLE: Simplifying Type Parameters in Liveblocks Functions\nDESCRIPTION: This code snippet demonstrates the simplification of type parameters in Liveblocks-related functions after running the codemod.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.0.mdx#2025-04-11_snippet_17\n\nLANGUAGE: tsx\nCODE:\n```\nimport type { Room, User } from \"@liveblocks/client\";\nimport type { MyPresence, MyStorage } from \"./liveblocks.config\";\n\n// ❌ Before\nfunction isAdult(user: User<MyPresence, MyUserMeta>) {\n  //                        ^^^^^^^^^^^^^^^^^^^^^^\n  return user.info.age >= 18;\n  //               ^^^ Coming from MyUserMeta\n}\n\n// ❌ Before\nfunction doSomethingWithRoom(\n  room: Room<MyPresence, MyStorage, MyUserMeta, never>\n  //         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n) {\n  /* ... */\n}\n```\n\nLANGUAGE: tsx\nCODE:\n```\nimport type { Room, User } from \"@liveblocks/client\";\n\n// ✅ After\nfunction isAdult(user: User) {\n  return user.info.age >= 18;\n  //               ^^^ Still coming from configured UserMeta custom type\n}\n\n// ✅ After\nfunction doSomethingWithRoom(room: Room) {\n  /* ... */\n}\n```\n\n----------------------------------------\n\nTITLE: Enabling Dark Mode with Class or Data Attributes in Liveblocks React UI\nDESCRIPTION: This snippet shows how to import the CSS file that enables dark mode using class or data attributes, providing more control over when dark mode is applied.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/notifications/styling-and-customization.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport \"@liveblocks/react-ui/styles/dark/attributes.css\";\n```\n\n----------------------------------------\n\nTITLE: Using localtunnel for Webhook Testing\nDESCRIPTION: A bash command that uses localtunnel to expose a local development server running on port 3000 to the internet, allowing webhook testing during development.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-yjs-document-data-to-a-supabase-postgres-database.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx localtunnel --port 3000\n```\n\n----------------------------------------\n\nTITLE: Typing Others' Presence with Liveblocks Zustand Middleware\nDESCRIPTION: Advanced example showing how to type the 'others' presence state when using Liveblocks with Zustand, enabling proper TypeScript support for accessing presence data from other users.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-zustand/CHANGELOG.md#2025-04-11_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\ntype Presence = {\n  isTyping: true;\n}\n\nconst useStore = create(\n  middleware<State, Presence>(/* ... */, {\n    client,\n    presenceMapping: { isTyping: true },\n    storageMapping: { todos: true }\n  })\n);\n\n// In your component\nuseStore(state => state.liveblocks.others[0].presence?.isTyping)\n```\n\n----------------------------------------\n\nTITLE: Fixing Unknown Type in LiveList with Lson Type\nDESCRIPTION: Example showing how to fix a Storage type definition by replacing unknown with Lson type to ensure all values are valid LSON.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/errors/Storage.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { Lson } from \"@liveblocks/client\";\n\ndeclare global {\n  interface Liveblocks {\n    Storage: {\n      layers: LiveMap<string, LiveObject<Layer>>;\n      layerIds: LiveList<unknown>; // ❌ Unknowns could contain non-LSON\n      layerIds: LiveList<Lson>; // ✅ Prefer using Lson\n    };\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating PlanetScale MySQL Database Schema\nDESCRIPTION: SQL query to create the documents table in PlanetScale with roomId as primary key and storageData field for JSON storage.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-storage-document-data-to-a-planetscale-mysql-database.mdx#2025-04-11_snippet_6\n\nLANGUAGE: sql\nCODE:\n```\nCREATE TABLE documents (\n   roomId VARCHAR(255) PRIMARY KEY,\n   storageData TEXT NOT NULL\n);\n```\n\n----------------------------------------\n\nTITLE: Setting up Authentication Endpoint in Remix\nDESCRIPTION: Creates a Remix authentication endpoint that generates access tokens for users. Uses room naming patterns with wildcards to grant different access levels based on organization and group membership.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/remix.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { ActionFunction } from \"@remix-run/node\";\nimport { Liveblocks } from \"@liveblocks/node\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nexport const action: ActionFunction = async ({ request }) => {\n  // Get the current user from your database\n  const user = __getUserFromDB__(request);\n\n  // Start an auth session inside your endpoint\n  const session = liveblocks.prepareSession(\n    user.id,\n    { userInfo: user.metadata },  // Optional\n  );\n\n  // Use a naming pattern to allow access to rooms with wildcards\n  // Giving the user read access on their org, and write access on their group\n  session.allow(`${user.organization}:*`, session.READ_ACCESS);\n  session.allow(`${user.organization}:${user.group}:*`, session.FULL_ACCESS);\n\n  // Authorize the user and return the result\n  const { status, body } = await session.authorize();\n  return new Response(body, { status });\n}\n```\n\n----------------------------------------\n\nTITLE: Creating PlanetScale MySQL Database Schema for Yjs Documents\nDESCRIPTION: SQL statement to create a documents table with roomId as primary key and yDocData to store Yjs document data\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-yjs-document-data-to-a-planetscale-mysql-database.mdx#2025-04-11_snippet_6\n\nLANGUAGE: sql\nCODE:\n```\nCREATE TABLE documents (\n   roomId VARCHAR(255) PRIMARY KEY,\n   yDocData TEXT NOT NULL\n);\n```\n\n----------------------------------------\n\nTITLE: Deploying Liveblocks Live Cursors to Vercel\nDESCRIPTION: Command to create and deploy the live cursors example to Vercel. Downloads the example and initiates the Vercel deployment process.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-live-cursors-scroll/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-live-cursors-scroll --vercel\n```\n\n----------------------------------------\n\nTITLE: Example ThreadMarkedAsUnresolvedEvent payload in TypeScript\nDESCRIPTION: Provides an example payload for the ThreadMarkedAsUnresolvedEvent, illustrating the structure and values of the event data. The example includes sample values for projectId, roomId, threadId, updatedAt, and updatedBy. This example helps to understand the expected format of the event.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/webhooks.mdx#2025-04-11_snippet_27\n\nLANGUAGE: typescript\nCODE:\n```\nconst ThreadMarkedAsUnresolvedEvent = {\n  type: \"threadMarkedAsUnresolved\",\n  data: {\n    projectId: \"my-project-id\",\n    roomId: \"my-room-id\",\n    threadId: \"my-thread-id\",\n    updatedAt: \"2021-10-06T01:45:56.558Z\",\n    updatedBy: \"my-user-id\",\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Deploying Live Cursors Example to Vercel\nDESCRIPTION: Command to create and deploy a Liveblocks live cursors project to Vercel.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/javascript-live-cursors/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example javascript-live-cursors --vercel\n```\n\n----------------------------------------\n\nTITLE: Upgrading Liveblocks Packages in a React App\nDESCRIPTION: This snippet shows how to upgrade Liveblocks packages to the latest version in a React application using npm. It includes the client, react, react-comments, and node packages.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/1.9.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client@latest @liveblocks/react@latest @liveblocks/react-comments@latest @liveblocks/node@latest\n```\n\n----------------------------------------\n\nTITLE: Unread Mention Notification Format Example\nDESCRIPTION: Example of the JSON structure returned for unread mentions in thread notifications, demonstrating the format when a user is mentioned in a comment.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-emails.mdx#2025-04-11_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n{\n  type: \"unreadMention\",\n  roomId: \"my-room-id\",\n  comment: {/* Comment data */},\n}\n```\n\n----------------------------------------\n\nTITLE: Customizing AnchoredThreads Component in React\nDESCRIPTION: Demonstrates various ways to customize the AnchoredThreads component, including styling, modifying the Thread component, and using CSS variables for positioning.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-blocknote.mdx#2025-04-11_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\n<AnchoredThreads\n  editor={editor}\n  threads={threads}\n  style={{ width: \"350px\" }}\n  className=\"my-anchored-thread\"\n/>\n```\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Thread } from \"@liveblocks/react-ui\";\n\n<AnchoredThreads\n  editor={editor}\n  threads={threads}\n  style={{ width: \"350px\" }}\n  className=\"my-anchored-thread\"\n  // +++\n  components={{\n    Thread: (props) => (\n      <Thread\n        {...props}\n        className=\"border shadow\"\n        style={{ background: \"white\" }}\n      />\n    ),\n  }}\n  // +++\n/>;\n```\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Comment } from \"@liveblocks/react-ui/primitives\";\n\n<AnchoredThreads\n  editor={editor}\n  threads={threads}\n  style={{ width: \"350px\" }}\n  className=\"my-anchored-thread\"\n  components={{\n    Thread: (props) => (\n      // +++\n      <div>\n        {props.thread.comments.map((comment) => (\n          <Comment.Body\n            key={comment.id}\n            body={comment.body}\n            components={/* ... */}\n          />\n        ))}\n      </div>\n      // +++\n    ),\n  }}\n/>;\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Node Package\nDESCRIPTION: Command to install the @liveblocks/node package for webhook handling and verification.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/webhooks.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/node\n```\n\n----------------------------------------\n\nTITLE: LiveMap Definition Example\nDESCRIPTION: Example of using LiveMap for key-value pair storage.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/schema-validation/syntax.mdx#2025-04-11_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\ntype Shape {\n  x: number\n  y: number\n  fill: \"red\" | \"yellow\" | \"blue\"\n}\n\ntype Storage {\n  shapes: LiveMap<string, Shape>\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Liveblocks Global Types\nDESCRIPTION: This code snippet illustrates how to declare global types for 'Presence' and 'Storage' in TypeScript, allowing consistent type definitions across the Liveblocks application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node/CHANGELOG.md#2025-04-11_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\n\"declare global {\\n  interface Liveblocks {\\n    Presence: Presence;\\n    Storage: Storage;\\n  }\\n}\"\n```\n\n----------------------------------------\n\nTITLE: Installing MySQL2 Package\nDESCRIPTION: Bash command to install the mysql2 library for Node.js database connectivity\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-yjs-document-data-to-a-planetscale-mysql-database.mdx#2025-04-11_snippet_8\n\nLANGUAGE: bash\nCODE:\n```\nnpm i mysql2\n```\n\n----------------------------------------\n\nTITLE: Removing Batched Updates Configuration\nDESCRIPTION: Code diff showing the removal of unstable_batchedUpdates configuration from RoomProvider, which is no longer needed in React 18.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.15.mdx#2025-04-11_snippet_1\n\nLANGUAGE: diff\nCODE:\n```\n-import { unstable_batchedUpdates } from \"react-dom\";\n //                                      ^^^^^^^^^^^ ...or \"react-native\"!\n\n <RoomProvider\n   id=\"my-room\"\n   initialPresence={/* ... */}\n   initialStorage={/* ... */}\n-  unstable_batchedUpdates={unstable_batchedUpdates}\n >\n   <App />\n </RoomProvider>\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Config\nDESCRIPTION: Command to create and initialize the Liveblocks configuration file.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/solidjs.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework javascript\n```\n\n----------------------------------------\n\nTITLE: Deploying Liveblocks Comments Example on Vercel\nDESCRIPTION: This command downloads the Liveblocks comments example for Next.js and initiates the deployment process on Vercel. It sets up the project and opens the browser for Vercel deployment configuration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-comments/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-comments --vercel\n```\n\n----------------------------------------\n\nTITLE: Defining Valid Metadata Structure in TypeScript\nDESCRIPTION: Example of valid metadata structure for threads, including string, boolean, and number types. Also shows how to remove a property by setting it to null.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/metadata.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nmetadata: {\n  priority: \"URGENT\",\n  pinned: false,\n  timestamp: 1703073188013,\n}\n```\n\nLANGUAGE: typescript\nCODE:\n```\nmetadata: {\n  timestamp: null,\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Avatar Example with Vue.js\nDESCRIPTION: Command to install the Liveblocks live avatar example using npx. This sets up the project with the necessary dependencies and prompts for an API key from your Liveblocks account.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/vuejs-live-avatars/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example vuejs-live-avatars --api-key\n```\n\n----------------------------------------\n\nTITLE: Handling Liveblocks Webhook and Fetching Yjs Document Data with TypeScript\nDESCRIPTION: This snippet initializes the webhook handler and processes incoming webhook requests to fetch Yjs document data when the document is updated. It verifies the request and retrieves Yjs data from Liveblocks using Fetch API with appropriate error handling.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-yjs-document-data-to-a-vercel-postgres-database.mdx#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\n\n// Add your signing key from a project's webhooks dashboard\nconst WEBHOOK_SECRET = \"YOUR_SIGNING_SECRET\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\n// Add your secret key from a project's API keys dashboard\nconst API_SECRET = \"{{SECRET_KEY}}\";\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Verify if this is a real webhook request\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  // When Yjs document data has been updated\n  if (event.type === \"ydocUpdated\") {\n    const { roomId } = event.data;\n\n    // Get Yjs data from Liveblocks REST API\n    const url = `https://api.liveblocks.io/v2/rooms/${roomId}/ydoc`;\n    const response = await fetch(url, {\n      headers: { Authorization: `Bearer ${API_SECRET}` },\n    });\n\n    if (!response.ok) {\n      return new Response(\"Problem accessing Liveblocks REST APIs\", {\n        status: 500,\n      });\n    }\n\n    // Your JSON Yjs document data as a string\n    const yDocData = await response.text();\n\n    // Update database\n    // ...\n  }\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Invalid RoomEvent Type Example in TypeScript\nDESCRIPTION: Example of a problematic RoomEvent interface definition that includes an HTMLElement which is not a valid JSON value. This shows the common mistake of including non-serializable types in broadcastable events.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/errors/RoomEvent.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare global {\n  interface Liveblocks {\n    RoomEvent:\n      | { type: \"beep\" }\n      | { type: \"boop\"; target: HtmlElement }\n      //                        ^^^^^^^^^^^ ❌ The issue is here\n      | { type: \"buzz\"; volume: number };\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Getting User Notification Settings - Liveblocks Client\nDESCRIPTION: This code snippet demonstrates how to create a Liveblocks client and fetch the current user notification settings using the `getNotificationSettings` method. It leverages the ES module structure for modern JavaScript applications. The expected output is a settings object containing notification preferences for different channels.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-redux/CHANGELOG.md#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { createClient } from '@liveblocks/client'\\nconst client = createClient({ ... })\\n\\nconst settings = await client.getNotificationSettings();\\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\\nconsole.log(settings);\\n\\nconst updatedSettings = await client.updateNotificationSettings({\\n  email: {\\n    thread: false,\\n  }\\n});\n```\n\n----------------------------------------\n\nTITLE: Debugging Non-JSON Types in TypeScript\nDESCRIPTION: A debugging technique that helps identify which part of your custom type is not compatible with JSON. By attempting to assign your custom type to the Json type from Liveblocks, TypeScript will provide detailed error information about incompatible properties.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/errors/RoomEvent.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { Json } from \"@liveblocks/client\";\n\ndeclare global {\n  interface Liveblocks {\n    RoomEvent: MyRoomEvent;\n  }\n}\n\n// Quick debugging snippet to find root cause\nconst xxx: Json = {} as MyRoomEvent;\n//    ^?\n//    The error will appear here\n```\n\n----------------------------------------\n\nTITLE: Installing Quill, Yjs, and Liveblocks in Next.js\nDESCRIPTION: Command to install all necessary packages for creating a collaborative text editor with Quill, Yjs, and Liveblocks in a Next.js application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-quill-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/react @liveblocks/yjs yjs quill quill-cursors react-quill y-quill\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Node Package for Firebase\nDESCRIPTION: Command to install the @liveblocks/node package in a Firebase functions project, which is required for the authentication endpoint.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/firebase.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/node\n```\n\n----------------------------------------\n\nTITLE: Basic Webhook Notification Handler Implementation\nDESCRIPTION: Demonstrates the basic setup of a webhook handler for receiving notification events, including verification and type checking.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/what-to-check-before-enabling-a-new-notification-kind.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\n\nconst WEBHOOK_SECRET = \"YOUR_WEBHOOK_SECRET_KEY\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  if (event.type !== \"notification\") {\n    return new Response(\"This is not a notification webhook\", { status: 400 });\n  }\n\n  console.log(event);\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Styling Liveblocks Primitives with Regular React Props\nDESCRIPTION: This example shows how to style Liveblocks primitives using regular React props, such as className and style. This allows for easy integration with existing styling approaches.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/styling-and-customization.mdx#2025-04-11_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Composer } from \"@liveblocks/react-ui/primitives\";\n\nfunction Component() {\n  return (\n    <Composer.Submit className=\"btn-primary\" style={{ color: \"#ffffff\" }}>\n      Reply\n    </Composer.Submit>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Managing User Notifications in Liveblocks Node.js\nDESCRIPTION: This code snippet demonstrates how to manage user notification settings using the Liveblocks Node.js client. It initializes a Liveblocks instance with a secret key and provides methods to retrieve, update, and delete a user's notification settings. Key parameters include 'userId' for identifying user-specific settings. The snippet presupposes that Liveblocks is properly initialized with credentials.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-core/CHANGELOG.md#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\nconst liveblocks = new Liveblocks({ secret: \"sk_xxx\" });\n\nconst settings = await liveblocks.getNotificationSettings({ userId });\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst updatedSettings = await liveblocks.updateNotificationSettings({\n  userId,\n  data: {\n    teams: {\n      $fileUploaded: true,\n    },\n  },\n});\nawait liveblocks.deleteNotificationSettings({ userId });\n```\n\n----------------------------------------\n\nTITLE: Wildcard Permission Examples in JSX\nDESCRIPTION: Shows correct and incorrect usage of wildcards in room ID patterns for permission management.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token.mdx#2025-04-11_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\n// ❌ Wildcard must be at the end of the room ID\nsession.allow(\"Vu78Rt:*:product\", session.FULL_ACCESS);\n\n// ✅ Valid wildcard\nsession.allow(\"Vu78Rt:product:*\", session.FULL_ACCESS);\n```\n\n----------------------------------------\n\nTITLE: Using Toolbar.BlockSelector in React-Tiptap\nDESCRIPTION: Demonstrates how to use the Toolbar.BlockSelector component, which adds a dropdown selector for switching between different block types in the editor.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_11\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Toolbar } from \"@liveblocks/react-tiptap\";\n\n<Toolbar editor={editor}>\n  <Toolbar.BlockSelector />\n</Toolbar>;\n```\n\n----------------------------------------\n\nTITLE: Implementing Webhook Request Verification\nDESCRIPTION: Implementation of webhook request verification using @liveblocks/node package with WebhookHandler and verifyRequest function.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-storage-document-data-to-a-planetscale-mysql-database.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\n\n// Add your signing key from a project's webhooks dashboard\nconst WEBHOOK_SECRET = \"YOUR_SIGNING_SECRET\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Verify if this is a real webhook request\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  // Update database\n  // ...\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Supabase Postgres Table Schema\nDESCRIPTION: This SQL script creates a `documents` table in a Supabase Postgres database.  The table stores the `roomId` as the primary key and the stringified JSON Yjs data in the `yDocData` column.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-yjs-document-data-to-a-supabase-postgres-database.mdx#2025-04-11_snippet_6\n\nLANGUAGE: sql\nCODE:\n```\nCREATE TABLE documents ( roomId VARCHAR(255) PRIMARY KEY, yDocData TEXT NOT\n    NULL );\n```\n\n----------------------------------------\n\nTITLE: Updated Client API Usage - TypeScript\nDESCRIPTION: Example showing updated API usage where others.count is replaced with others.length and others.toArray() is deprecated in favor of using others directly as an array.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-prosemirror/CHANGELOG.md#2025-04-11_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\n// Old usage\nothers.count\nothers.toArray()\n\n// New usage\nothers.length\nothers // array directly\n```\n\n----------------------------------------\n\nTITLE: Deploying Text Editor to Vercel\nDESCRIPTION: Command to create and deploy the collaborative text editor project to Vercel. This downloads the example and initiates the Vercel deployment process.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-tiptap/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-tiptap --vercel\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Text Editor Example\nDESCRIPTION: Command to create a new Liveblocks project with the Tiptap comments example. This automatically downloads the example and helps set up the API key through browser authentication.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-comments-tiptap/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-comments-tiptap --api-key\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Project Configuration\nDESCRIPTION: Runs a command to initialize a Liveblocks project, creating a configuration file named liveblocks.config.ts. This file is used to define TypeScript types for the project.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/connecting/guide.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Comments Notification Example with Next.js and SendGrid\nDESCRIPTION: This command downloads and sets up the Liveblocks comments notification example project with Next.js and SendGrid integration. It also prompts for API key input.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-comments-emails-sendgrid/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-comments-emails-sendgrid --api-key\n```\n\n----------------------------------------\n\nTITLE: Using New History API in @liveblocks/client\nDESCRIPTION: Example of using the new room.history.clear() method to reset undo capability beyond current state.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-emails/CHANGELOG.md#2025-04-11_snippet_18\n\nLANGUAGE: typescript\nCODE:\n```\nroom.history.clear()\n```\n\n----------------------------------------\n\nTITLE: Liveblocks Connection Status Types\nDESCRIPTION: Status code mapping between old and new connection states in Liveblocks client.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG.md#2025-04-11_snippet_20\n\nLANGUAGE: typescript\nCODE:\n```\n// Old statuses | New statuses\nclosed          | initial\nauthenticating  | connecting\nconnecting      | connecting\nopen            | connected\nunavailable     | reconnecting\nfailed          | disconnected\n```\n\n----------------------------------------\n\nTITLE: Setting User Metadata in Access Token Authentication\nDESCRIPTION: Shows how to attach user metadata (name and avatar) when preparing a session using Liveblocks access token authentication. This metadata will be used to display user information in Comments.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-add-users-to-liveblocks-comments.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst session = liveblocks.prepareSession(\"marc@example.com\", {\n  userInfo: {\n    name: \"Marc\",\n    avatar: \"https://example.com/marc.png\",\n\n    // Your custom metadata\n    // ...\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks, Yjs, and Quill Dependencies\nDESCRIPTION: Installs the necessary npm packages for Liveblocks, Yjs, Quill, and related modules. Ensures all Liveblocks packages use the same version.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-quill-javascript.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/yjs yjs quill quill-cursors y-quill\n```\n\n----------------------------------------\n\nTITLE: Correct ThreadMetadata Type Definition in TypeScript\nDESCRIPTION: This snippet demonstrates the correct way to define ThreadMetadata types. It uses only simple key/value pairs with values assignable to string, number, boolean, or undefined.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/errors/ThreadMetadata.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare global {\n  interface Liveblocks {\n    ThreadMetadata: {\n      // Your custom fields go here...\n      pinned: boolean;\n      color?: string; // ✅\n      positionX: number; // ✅\n      positionY: number; // ✅\n      zIndex?: number;\n    };\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Exporting Regular Hooks in Liveblocks Configuration\nDESCRIPTION: Shows how to export regular (non-Suspense) versions of Liveblocks hooks from the liveblocks.config.ts file.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/hooks.mdx#2025-04-11_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\n// ...\n\nexport const {\n  // Export from here to use regular hooks\n  useThreads,\n  useUser,\n} = createRoomContext(client, {});\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks React UI Package\nDESCRIPTION: NPM installation command for Liveblocks React UI and related dependencies\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react-ui/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/react @liveblocks/react-ui\n```\n\n----------------------------------------\n\nTITLE: Deploying Liveblocks Todo List to Vercel\nDESCRIPTION: Command to create and deploy the Liveblocks to-do list example to Vercel. Sets up both local development environment and Vercel deployment configuration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-todo-list/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-todo-list --vercel\n```\n\n----------------------------------------\n\nTITLE: Configuring RoomProvider with shouldInitiallyConnect prop\nDESCRIPTION: Example of using the new shouldInitiallyConnect prop in RoomProvider to control initial connection to Liveblocks servers.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/0.19.mdx#2025-04-11_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\n<RoomProvider\n  id=\"room\"\n  initialPresence={{}}\n  shouldInitiallyConnect={false} // 👈 control initial connection to Liveblocks\n>\n  <App />\n</RoomProvider>\n```\n\n----------------------------------------\n\nTITLE: Arrays Definition Example\nDESCRIPTION: Example of defining and using arrays in a schema.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/schema-validation/syntax.mdx#2025-04-11_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\ntype Storage {\n  animals: string[]\n}\n```\n\n----------------------------------------\n\nTITLE: Emitting Destroyed Event\nDESCRIPTION: Demonstrates how to emit the destroy event manually.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-yjs.mdx#2025-04-11_snippet_19\n\nLANGUAGE: typescript\nCODE:\n```\n// Call each listener and pass `true` as an argument\nawareness.emit(\"destroy\", true);\n```\n\n----------------------------------------\n\nTITLE: Invalid ActivitiesData Type Definition in TypeScript\nDESCRIPTION: Example showing incorrect implementation of ActivitiesData interface with invalid Date type and missing $ prefix for custom notification kinds.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/errors/ActivitiesData.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare global {\n  interface Liveblocks {\n    ActivitiesData: {\n      // Your custom notification kinds go here...\n      $error: {\n        code: number;\n        date: Date; // ❌ Values must simple\n      };\n      // ❌ Custom notification kinds must start with $\n      success: {\n        message: string;\n      };\n    };\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Global Liveblocks Types in TypeScript\nDESCRIPTION: Demonstrates the new approach to defining global Liveblocks types, allowing type sharing across frontend and backend APIs\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-zustand/CHANGELOG.md#2025-04-11_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare global {\n  interface Liveblocks {\n    Presence: Presence;\n    Storage: Storage;\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Using Pagination with useInboxNotifications Hook\nDESCRIPTION: This code snippet shows how to use the new pagination support in the useInboxNotifications hook, introduced in Liveblocks 2.9. It includes new properties for fetching more notifications and checking the fetching status.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-prosemirror/CHANGELOG.md#2025-04-11_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nconst {\n  inboxNotifications,\n  isLoading,\n  error,\n\n  // ✨ New in Liveblocks 2.9\n  fetchMore,\n  isFetchingMore,\n  hasFetchedAll,\n  fetchMoreError,\n} = useInboxNotifications();\n```\n\n----------------------------------------\n\nTITLE: Deploying Collaborative Whiteboard to Vercel\nDESCRIPTION: Command to create and deploy the Liveblocks collaborative whiteboard project to Vercel\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/redux-whiteboard/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example redux-whiteboard --vercel\n```\n\n----------------------------------------\n\nTITLE: Installing @liveblocks/redux 0.19 with npm\nDESCRIPTION: Command to install @liveblocks/client and @liveblocks/redux version 0.19 using npm.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/0.19.mdx#2025-04-11_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client@0.19 @liveblocks/redux@0.19\n```\n\n----------------------------------------\n\nTITLE: Creating a Basic Next.js Webhook Endpoint for Liveblocks\nDESCRIPTION: A simple Next.js route handler that receives webhook POST requests from Liveblocks. This endpoint extracts the request body and headers, which will be used for webhook verification and processing.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-yjs-document-data-to-a-planetscale-mysql-database.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Handle webhooks and database\n  // ...\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Breaking Changes in TypeScript Types\nDESCRIPTION: Type system changes in @liveblocks/client and @liveblocks/react packages, including deprecation of Others<P, U> type in favor of readonly User<P, U>[].\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-yjs/CHANGELOG.md#2025-04-11_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\n// Old type\nOthers<P, U>\n\n// New type\nreadonly User<P, U>[]\n```\n\n----------------------------------------\n\nTITLE: Typed Presence with Zustand and Liveblocks Middleware\nDESCRIPTION: Example of using the TPresence generic argument to properly type the presence of other users in a Zustand store with Liveblocks middleware.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-core/CHANGELOG.md#2025-04-11_snippet_25\n\nLANGUAGE: typescript\nCODE:\n```\ntype Presence = {\n  isTyping: true;\n}\n\nconst useStore = create(\n  middleware<State, Presence>(/* ... */, {\n    client,\n    presenceMapping: { isTyping: true },\n    storageMapping: { todos: true }\n  })\n);\n\n// In your component\nuseStore(state => state.liveblocks.others[0].presence?.isTyping)\n```\n\n----------------------------------------\n\nTITLE: Executing room-info-to-room-data codemod\nDESCRIPTION: This codemod renames RoomInfo type from @liveblocks/node to RoomData.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/liveblocks-codemod/README.md#2025-04-11_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\nnpx @liveblocks/codemod@latest room-info-to-room-data\n```\n\n----------------------------------------\n\nTITLE: Implementing HistoryVersionPreview Component in React\nDESCRIPTION: Demonstrates how to use the HistoryVersionPreview component to display and restore a specific version of the BlockNote editor's content.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-blocknote.mdx#2025-04-11_snippet_10\n\nLANGUAGE: tsx\nCODE:\n```\nimport { HistoryVersionPreview } from \"@liveblocks/react-blocknote\";\n\nfunction VersionPreview({ selectedVersion, onVersionRestore }) {\n  return (\n    <HistoryVersionPreview\n      version={selectedVersion}\n      onVersionRestore={onVersionRestore}\n    />\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Using Json Type for Unknown Values in TypeScript\nDESCRIPTION: Example demonstrating how to fix a type error with an unknown field, which could potentially contain non-JSON values. It shows how to use the Json type from @liveblocks/client to ensure JSON compatibility.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/errors/Presence.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { Json } from \"@liveblocks/client\";\n\ndeclare global {\n  interface Liveblocks {\n    Presence: {\n      cursor: unknown; // ❌ Unknowns could contain non-JSON\n      cursor: Json; // ✅ Prefer using Json\n    };\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Demonstrating Thread Filtering Query Syntax in Liveblocks\nDESCRIPTION: Examples of various query language syntax options for filtering threads based on their metadata properties. Includes filtering by boolean, string, number values, string prefixes, null checks, and combining filters with AND logic.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-filter-threads-using-query-language.mdx#2025-04-11_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n// Resolved threads\nresolved:true\n\n// Threads with { status: 'open' } string metadata\nmetadata['status']:'open'\n\n// Threads with `{ org }` string metadata that starts with \"liveblocks:\"\nmetadata['org']^'liveblocks:'\n\n// Threads with { priority: 3 } number metadata\nmetadata['priority']:3\n\n// Threads with { pinned: false } boolean metadata\nmetadata['pinned']:false\n\n// Threads without a `color` property\nmetadata['color']:null\n\n// Combine queries with AND\nresolved:true AND metadata['priority']:3\n\n// A more complex combination\nmetadata['status']:'closed' AND metadata['org']^'liveblocks:'\n```\n\n----------------------------------------\n\nTITLE: Pausing and resuming history with useHistory hook\nDESCRIPTION: This snippet demonstrates how to pause and resume history tracking using the useHistory hook. This is useful for operations like dragging elements, where you want to track only the final position in the undo/redo history rather than every intermediate step.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-multiplayer-undo-redo-with-react.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useHistory } from \"@liveblocks/react/suspense\";\n\nfunction App() {\n  const { resume, pause } = useHistory();\n\n  return <Rectangle onDragStart={() => pause()} onDragEnd={() => resume()} />;\n}\n```\n\n----------------------------------------\n\nTITLE: Deploying Liveblocks Live Cursors to Vercel\nDESCRIPTION: Command to create and deploy the live cursors chat example to Vercel hosting platform. Sets up the project and initiates Vercel deployment process.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-live-cursors-chat/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-live-cursors-chat --vercel\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Overlay Comments Example with Next.js\nDESCRIPTION: This command downloads the Liveblocks overlay comments example for Next.js and prompts for an API key. It sets up the project locally with all necessary dependencies.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-comments-overlay/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-comments-overlay --api-key\n```\n\n----------------------------------------\n\nTITLE: Using Types for Custom Notification Kinds\nDESCRIPTION: Showcases how to define custom types for notifications to ensure proper data typing. In this example, it sets up a `$alert` notification kind in a Liveblocks configuration file using the `ActivitiesData` interface.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_32\n\nLANGUAGE: ts\nCODE:\n```\ndeclare global {\n  interface Liveblocks {\n    // Custom activities data for custom notification kinds\n    ActivitiesData: {\n      // Example, a custom $alert kind\n      $alert: {\n        title: string;\n        message: string;\n      };\n    };\n\n    // Other kinds\n    // ...\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Tldraw Whiteboard Example with Liveblocks\nDESCRIPTION: Command to create a new Liveblocks project using the tldraw whiteboard example template. This automatically sets up the project and configures the API key.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-tldraw-whiteboard-yjs/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-tldraw-whiteboard-yjs --api-key\n```\n\n----------------------------------------\n\nTITLE: Implementing Notifications List\nDESCRIPTION: Setup for displaying inbox notifications using InboxNotificationList component\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/text-editor/tiptap.mdx#2025-04-11_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nexport function CollaborativeApp() {\n  const { inboxNotifications } = useInboxNotifications();\n\n  return (\n    <InboxNotificationList>\n      {inboxNotifications.map((inboxNotification) => (\n        <InboxNotification\n          key={inboxNotification.id}\n          inboxNotification={inboxNotification}\n        />\n      ))}\n    </InboxNotificationList>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Monaco Editor Container\nDESCRIPTION: HTML markup for creating the container element where the Monaco editor will be mounted.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-monaco-javascript.mdx#2025-04-11_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<div id=\"editor\"></div>\n```\n\n----------------------------------------\n\nTITLE: Adding ClientSideSuspense to Liveblocks room setup\nDESCRIPTION: Enhanced implementation that adds ClientSideSuspense to handle loading states while the room connection is being established and components are loading.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-blocknote.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n  ClientSideSuspense,\n} from \"@liveblocks/react/suspense\";\nimport { Editor } from \"./Editor\";\n\nexport default function App() {\n  return (\n    <LiveblocksProvider publicApiKey={\"{{PUBLIC_KEY}}\"}>      \n      <RoomProvider id=\"my-room\">\n        <ClientSideSuspense fallback={<div>Loading…</div>}>\n          <Editor />\n        </ClientSideSuspense>\n      </RoomProvider>\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Installing CodeMirror, Yjs, and Liveblocks packages in Next.js\nDESCRIPTION: Command to install all necessary packages for building a collaborative code editor including CodeMirror, Yjs, and Liveblocks libraries.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-codemirror-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/react @liveblocks/node @liveblocks/yjs yjs codemirror @codemirror/lang-javascript y-codemirror.next\n```\n\n----------------------------------------\n\nTITLE: Incorrect RoomInfo Type Definition in TypeScript\nDESCRIPTION: This snippet shows an example of an invalid RoomInfo type definition where the 'url' field is incorrectly typed as URL instead of string.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/errors/RoomInfo.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare global {\n  interface Liveblocks {\n    RoomInfo: {\n      // Your custom fields go here...\n      name: string;\n      url: URL; // ❌ The issue is here\n      geo: {\n        city: string;\n        country: string;\n      };\n    };\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Comparing Old and New Room Entry APIs in Liveblocks Client\nDESCRIPTION: Demonstrates the transition from the deprecated room entry/exit API to the new recommended approach. The new API returns both the room object and a leave function, supporting multiple connections to the same room from different parts of an application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-emails/CHANGELOG.md#2025-04-11_snippet_17\n\nLANGUAGE: typescript\nCODE:\n```\n// Old APIs we'll no longer be recommending (but that will remain working)\nconst room = client.enter(\"my-room\", options);\nclient.getRoom(\"my-room\");\nclient.leave(\"my-room\");\n```\n\nLANGUAGE: typescript\nCODE:\n```\n// New API we'll be recommending instead\nconst { room, leave } = client.enterRoom(\"my-room\", options);\nleave();\n```\n\n----------------------------------------\n\nTITLE: Adding Destroyed Event Listener\nDESCRIPTION: Demonstrates how to add an event listener for the destroy event.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-yjs.mdx#2025-04-11_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\nawareness.on(\"destroyed\", () => {\n  // Awareness has been cleaned up\n});\n```\n\n----------------------------------------\n\nTITLE: Deploying Text Editor to Vercel\nDESCRIPTION: Command to create and deploy the collaborative text editor project to Vercel. This sets up both local development environment and Vercel deployment configuration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-yjs-slate/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-yjs-slate --vercel\n```\n\n----------------------------------------\n\nTITLE: Deploying Liveblocks Comments Primitives Example on Vercel\nDESCRIPTION: Command to set up the Liveblocks Comments Primitives example project and deploy it on Vercel. It downloads the example and initiates the Vercel deployment process.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-comments-primitives/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-comments-primitives --vercel\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks, Yjs, and Quill Dependencies\nDESCRIPTION: Command to install necessary packages for setting up a collaborative Quill text editor with Liveblocks and Yjs in a Svelte application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-quill-svelte.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/yjs yjs quill quill-cursors y-quill\n```\n\n----------------------------------------\n\nTITLE: Adding Search Keywords to Headings in Markdown\nDESCRIPTION: Illustrates how to attach custom search keywords to a heading using a custom syntax in Markdown.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/README.md#2025-04-11_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n### Heading [@keywords=[\"lorem\", \"ipsum\"]]\n```\n\n----------------------------------------\n\nTITLE: Using LiveblocksYjsProvider methods and events\nDESCRIPTION: This snippet demonstrates various methods and events of the LiveblocksYjsProvider class, including getting the Y.Doc, accessing awareness, destroying the provider, and handling sync events.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-yjs.mdx#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\n// Root Y.Doc for the room\nconst yDoc = yProvider.getYDoc();\n\n// Yjs awareness\nconst awareness = yProvider.awareness;\n\n// Clean up yProvider\nyProvider.destroy();\n\n// Listen for the sync event\nyProvider.on(\"sync\", (isSynced: boolean) => {\n  if (isSynced === true) {\n    // Yjs content is synchronized and ready\n  } else {\n    // Yjs content is not synchronized\n  }\n});\n\n// Check if Yjs content is synchronized with the server\nconst isSynced: boolean = yProvider.synced;\n```\n\n----------------------------------------\n\nTITLE: Initializing Zustand Store with Liveblocks Middleware in TypeScript\nDESCRIPTION: Example of how to set up a Zustand store using Liveblocks middleware, including type definitions for state and presence.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/create-liveblocks-app/CHANGELOG.md#2025-04-11_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\nimport create from \"zustand\";\nimport { createClient } from \"@liveblocks/client\";\nimport { middleware } from \"@liveblocks/zustand\";\n\nconst client = createClient({ /*...*/ });\n\ntype State = {\n  draft: string;\n  isTyping: boolean;\n  todos: Todo[];\n  setDraft: (draft: string) => void;\n  addTodo: () => void;\n  deleteTodo: (index: number) => void;\n};\n\ncreate(\n  middleware<State>(/* ... */, {\n    client,\n    presenceMapping: { isTyping: true },\n    storageMapping: { todos: true }\n  })\n);\n```\n\n----------------------------------------\n\nTITLE: Creating Basic Next.js Webhook Endpoint\nDESCRIPTION: Basic Next.js route handler implementation for receiving webhook POST requests. Extracts request headers and body for webhook processing.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-storage-document-data-to-a-supabase-postgres-database.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Handle webhooks and database\n  // ...\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Using localtunnel for Local Webhook Testing\nDESCRIPTION: This command sets up localtunnel to expose a local server running on port 3000 to the internet, allowing Liveblocks webhooks to reach your local development environment.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-storage-document-data-to-a-vercel-postgres-database.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx localtunnel --port 3000\n```\n\n----------------------------------------\n\nTITLE: Installing Latest Liveblocks Packages in React\nDESCRIPTION: Command to upgrade Liveblocks packages to version 1.10 in a React application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/1.10.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client@latest @liveblocks/react@latest @liveblocks/react-ui@latest @liveblocks/node@latest\n```\n\n----------------------------------------\n\nTITLE: Verifying Webhook Requests with @liveblocks/node\nDESCRIPTION: Implementation of webhook request verification using the WebhookHandler from @liveblocks/node package, which validates that requests are legitimate and come from Liveblocks.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-yjs-document-data-to-a-supabase-postgres-database.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\n\n// Add your signing key from a project's webhooks dashboard\nconst WEBHOOK_SECRET = \"YOUR_SIGNING_SECRET\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Verify if this is a real webhook request\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  // Update database\n  // ...\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Thread Notification Response Format Example\nDESCRIPTION: Example of the JSON structure returned for unread replies in thread notifications, showing the format of notification data returned by the API.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-emails.mdx#2025-04-11_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n{\n  type: \"unreadReplies\",\n  roomId: \"my-room-id\",\n  comments: [\n    {/* Comment data */},\n    // ...\n  ],\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Zustand Store Implementation without Liveblocks Middleware\nDESCRIPTION: A simple Zustand store setup without the Liveblocks middleware, illustrating the base implementation for a to-do list application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-core/CHANGELOG.md#2025-04-11_snippet_23\n\nLANGUAGE: typescript\nCODE:\n```\nimport create from \"zustand\";\n\ntype State = {\n  draft: string;\n  isTyping: boolean;\n  todos: Todo[];\n  setDraft: (draft: string) => void;\n  addTodo: () => void;\n  deleteTodo: (index: number) => void;\n};\n\ncreate<State>(/* ... */);\n```\n\n----------------------------------------\n\nTITLE: Deploying Project to Vercel\nDESCRIPTION: Command to deploy the project to Vercel and set up local development environment. This will download the example and initiate the Vercel deployment process.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-tiptap-advanced/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-tiptap-advanced --vercel\n```\n\n----------------------------------------\n\nTITLE: Debugging UserMeta Type Issues with BaseUserMeta in TypeScript\nDESCRIPTION: A debugging technique to find root causes of UserMeta type errors by attempting to assign the custom type to the BaseUserMeta type.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/errors/UserMeta.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { BaseUserMeta } from \"@liveblocks/client\";\n\ndeclare global {\n  interface Liveblocks {\n    UserMeta: MyUserMeta;\n  }\n}\n\n// Quick debugging snippet to find root cause\nconst xxx: BaseUserMeta = {} as MyUserMeta;\n//    ^?\n//    The error will appear here\n```\n\n----------------------------------------\n\nTITLE: Fetching Email Notification Data\nDESCRIPTION: Implements email notification data fetching using the @liveblocks/emails package. Sets up the Liveblocks client and prepares thread notification email content.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-send-email-notifications-of-unread-comments.mdx#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Liveblocks, WebhookHandler, isThreadNotificationEvent } from \"@liveblocks/node\";\nimport { prepareThreadNotificationEmailAsReact } from \"@liveblocks/emails\";\n\nconst WEBHOOK_SECRET = \"YOUR_WEBHOOK_SECRET_KEY\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\nconst API_SECRET = \"{{SECRET_KEY}}\";\nconst liveblocks = new Liveblocks({ secret: API_SECRET });\n\nexport async function POST(request: Request) {\n  // Previous verification code...\n\n  if (isThreadNotificationEvent(event) && event.data.channel === \"email\") {\n    let emailData;\n\n    try {\n      emailData = await prepareThreadNotificationEmailAsReact(\n        liveblocks,\n        event\n      );\n    } catch (err) {\n      console.log(err);\n      return new Response(\"Could not fetch thread notification data\", {\n        status: 500,\n      });\n    }\n\n    if (!emailData) {\n      return new Response(null, { status: 200 });\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Debugging Complex Type Issues with JsonObject in TypeScript\nDESCRIPTION: Technique for debugging more complex type issues by attempting to assign your custom Presence type to JsonObject, which will generate a more detailed error message pinpointing the exact incompatibility.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/errors/Presence.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { JsonObject } from \"@liveblocks/client\";\n\ndeclare global {\n  interface Liveblocks {\n    Presence: MyPresence;\n  }\n}\n\n// Quick debugging snippet to find root cause\nconst xxx: JsonObject = {} as MyPresence;\n//    ^?\n//    The error will appear here\n```\n\n----------------------------------------\n\nTITLE: Importing Liveblocks Default Styles in Next.js\nDESCRIPTION: Importing the default CSS styles for Liveblocks UI components in the Next.js root layout file.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-comments.mdx#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport \"@liveblocks/react-ui/styles.css\";\n```\n\n----------------------------------------\n\nTITLE: Extending FloatingToolbar with Custom Content\nDESCRIPTION: Demonstrates how to extend the default floating toolbar with custom content before and after the default buttons.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_18\n\nLANGUAGE: tsx\nCODE:\n```\nimport { FloatingToolbar } from \"@liveblocks/react-lexical\";\nimport { Icon } from \"@liveblocks/react-ui\";\n\n<FloatingToolbar\n  before={<>I'm at the start</>}\n  after={\n    <Toolbar.Button\n      name=\"Help\"\n      icon={<Icon.QuestionMark />}\n      shortcut=\"CMD-H\"\n      onClick={() => console.log(\"help\")}\n    />\n  }\n/>;\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Configuration\nDESCRIPTION: Command to create and initialize the liveblocks configuration file for React framework.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-codemirror-react.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework react\n```\n\n----------------------------------------\n\nTITLE: Installing Collaborative Text Editor Project\nDESCRIPTION: Command to create a new Liveblocks project with BlockNote integration. This command downloads the example project and helps set up the API key automatically through the browser.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-blocknote/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-blocknote --api-key\n```\n\n----------------------------------------\n\nTITLE: Updating Room Group Permissions\nDESCRIPTION: Shows how to modify group access permissions for a room using the updateRoom method.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst room = await liveblocks.updateRoom(\"a32wQXid4A9\", {\n  groupsAccesses: {\n    engineering: [\"room:read\", \"room:presence:write\"],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Deploying to Vercel with Liveblocks\nDESCRIPTION: Command to create and deploy the collaborative text editor project to Vercel. This sets up both local development environment and Vercel deployment.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-yjs-blocknote/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-yjs-blocknote --vercel\n```\n\n----------------------------------------\n\nTITLE: CommentReactionRemovedEvent Schema and Example in TypeScript\nDESCRIPTION: This snippet defines the TypeScript schema for the CommentReactionRemovedEvent and provides an example of the event object. This event is triggered when a reaction is removed from a comment.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/webhooks.mdx#2025-04-11_snippet_18\n\nLANGUAGE: typescript\nCODE:\n```\n// Schema\ntype CommentReactionRemovedEvent = {\n  type: \"commentReactionRemoved\";\n  data: {\n    projectId: string;\n    roomId: string;\n    threadId: string;\n    commentId: string;\n    emoji: string;\n    removedAt: string;\n    removedBy: string;\n  };\n};\n\n// Example\nconst commentReactionRemovedEvent = {\n  type: \"commentReactionRemoved\",\n  data: {\n    projectId: \"my-project-id\",\n    roomId: \"my-room-id\",\n    threadId: \"my-thread-id\",\n    commentId: \"my-comment-id\",\n    emoji: \"👍\",\n    removedAt: \"2021-10-06T01:45:56.558Z\",\n    removedBy: \"my-user-id\",\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Importing Editor Styles\nDESCRIPTION: Next.js layout configuration for importing required Liveblocks and custom CSS styles.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-tiptap.mdx#2025-04-11_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nimport \"@liveblocks/react-ui/styles.css\";\nimport \"@liveblocks/react-tiptap/styles.css\";\nimport \"./globals.css\";\n```\n\n----------------------------------------\n\nTITLE: Installing @liveblocks/zustand\nDESCRIPTION: This command installs the necessary packages for using @liveblocks/zustand. It installs both @liveblocks/client, the core Liveblocks client library, and @liveblocks/zustand, the middleware for Zustand integration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-zustand/README.md#2025-04-11_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/zustand\n```\n\n----------------------------------------\n\nTITLE: UserMeta Fields Limitation Example in TypeScript\nDESCRIPTION: Shows that only id and info fields are used in UserMeta, and any additional fields will be ignored by the Liveblocks system.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/errors/UserMeta.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\ndeclare global {\n  interface Liveblocks {\n    UserMeta: {\n      id: string;\n      info: { name: string };\n\n      // Only `id` or `info` make sense inside `UserMeta`\n      iWillBeIgnored: string;\n    };\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Checking Block Node Status in React-Lexical\nDESCRIPTION: Shows how to check if a block node is active in the current selection using isBlockNodeActive utility.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_42\n\nLANGUAGE: tsx\nCODE:\n```\nimport { isBlockNodeActive } from \"@liveblocks/react-lexical\";\nimport { $isTextNode } from \"lexical\";\n\n// Checking if text node is currently active\nconst isActive = isBlockNodeActive(editor, $isTextNode);\n```\n\n----------------------------------------\n\nTITLE: Email Content Styling Example\nDESCRIPTION: Example showing how to customize the styling of different elements in the email content.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-emails.mdx#2025-04-11_snippet_19\n\nLANGUAGE: tsx\nCODE:\n```\nconst emailData = await prepareTextMentionNotificationEmailAsHtml(\n  liveblocks,\n  webhookEvent,\n  {\n    styles: {\n      paragraph: { margin: \"12px 0\" },\n      mention: {\n        fontWeight: \"bold\",\n        color: \"red\",\n      },\n    },\n  }\n);\n```\n\n----------------------------------------\n\nTITLE: Installing @liveblocks/client Package\nDESCRIPTION: Command to install version 1.0.0 of the @liveblocks/client package using npm.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/1.0.mdx#2025-04-11_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client@1.0.0\n```\n\n----------------------------------------\n\nTITLE: Updating Notification Settings with React Hook\nDESCRIPTION: Illustrates the use of the useUpdateNotificationSettings hook from @liveblocks/react to update user notification settings in a React component, such as for an unsubscribe button.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/create-liveblocks-app/CHANGELOG.md#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n// A suspense version of this hook is available\nimport { useUpdateNotificationSettings } from \"@liveblocks/react\";\n\nconst updateSettings = useUpdateNotificationSettings();\n\nconst onUnsubscribe = () => {\n  updateSettings({\n    slack: {\n      thread: false,\n    },\n  });\n};\n```\n\n----------------------------------------\n\nTITLE: Accessing User Information in Svelte\nDESCRIPTION: Example of how to access user ID and information within a Svelte application using the Liveblocks room instance\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/sveltekit.mdx#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nconst self = room.getSelf();\nconsole.log(self.id);\nconsole.log(self.info.color);\n```\n\n----------------------------------------\n\nTITLE: Complete Migration Script\nDESCRIPTION: A full migration script that combines all operations to migrate documents, threads, comments, and reactions to Liveblocks Comments system.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-migrate-to-liveblocks-comments.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nasync function migrateDocument({ oldDocumentId, oldDocumentThreads }) {\n  console.log(`Migrating document: ${oldDocumentId}`);\n\n  const roomId = oldDocumentId;\n\n  const room = await liveblocks.createRoom(roomId, {\n    defaultAccesses: [\n    ],\n  });\n\n  for (const oldThread of oldDocumentThreads) {\n    const [firstComment, ...otherComments] = oldThread.comments;\n\n    const thread = await liveblocks.createThread({\n      roomId: room.id,\n\n      data: {\n        comment: {\n          userId: firstComment.userId,\n\n          body: {\n            version: 1,\n            content: __convertCommentToLiveblocksFormat__(firstComment.body),\n          },\n        },\n      },\n    });\n\n    for (const oldComment of otherComments) {\n      const comment = await liveblocks.createComment({\n        roomId: room.id,\n        threadId: thread.id,\n\n        data: {\n          userId: oldComment.userId,\n          createdAt: new Date(oldComment.timestamp),\n          body: {\n            version: 1,\n            content: __convertCommentToLiveblocksFormat__(oldComment.body),\n          },\n        },\n      });\n\n      for (const oldReaction of oldComment.reactions) {\n        await liveblocks.addCommentReaction({\n          roomId: room.id,\n          threadId: thread.id,\n          commentId: comment.id,\n\n          data: {\n            emoji: oldReaction.emoji,\n            userId: oldReaction.userId,\n            createdAt: new Date(oldReaction.timestamp),\n          },\n        });\n      }\n    }\n  }\n\n  console.log(`Document migrated: ${oldDocumentId}`);\n}\n```\n\n----------------------------------------\n\nTITLE: API Method Deprecation in @liveblocks/client\nDESCRIPTION: Example showing deprecated methods and their replacements in the client package.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-core/CHANGELOG.md#2025-04-11_snippet_20\n\nLANGUAGE: javascript\nCODE:\n```\nothers.count // Deprecated\nothers.length // Use this instead\n\nothers.toArray() // Deprecated\nothers // Use this instead (it's already an array)\n```\n\n----------------------------------------\n\nTITLE: Initializing Redux Store with Rectangle Creation\nDESCRIPTION: Sets up a Redux store with Liveblocks integration, including functions for creating rectangles with random positions and colors. Implements the insertRectangle reducer and configures Liveblocks enhancer.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-online-whiteboard-with-react-redux-and-liveblocks.mdx#2025-04-11_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\nimport { liveblocksEnhancer } from \"@liveblocks/redux\";\nimport { configureStore, createSlice } from \"@reduxjs/toolkit\";\n\nexport const client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n\nconst COLORS = [\"#DC2626\", \"#D97706\", \"#059669\", \"#7C3AED\", \"#DB2777\"];\n\nfunction getRandomInt(max) {\n  return Math.floor(Math.random() * max);\n}\n\nfunction getRandomColor() {\n  return COLORS[getRandomInt(COLORS.length)];\n}\n\nconst initialState = {\n  shapes: {},\n};\n\nconst slice = createSlice({\n  name: \"state\",\n  initialState,\n  reducers: {\n    insertRectangle: (state) => {\n      const shapeId = Date.now().toString();\n      const shape = {\n        x: getRandomInt(300),\n        y: getRandomInt(300),\n        fill: getRandomColor(),\n      };\n      state.shapes[shapeId] = shape;\n    },\n  },\n});\n\nexport const { insertRectangle } = slice.actions;\n\nexport function makeStore() {\n  return configureStore({\n    reducer: slice.reducer,\n    enhancers: [\n      liveblocksEnhancer({\n        client,\n        storageMapping: { shapes: true },\n      }),\n    ],\n  });\n}\n\nconst store = makeStore();\n\nexport default store;\n```\n\n----------------------------------------\n\nTITLE: Configuring Presence Mapping\nDESCRIPTION: Setting up presence mapping to sync Redux state with Liveblocks room presence data.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-redux.mdx#2025-04-11_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport { liveblocksEnhancer } from \"@liveblocks/redux\";\n\nconst initialState = {\n  cursor: { x: 0, y: 0 },\n};\n\nconst slice = createSlice({\n  name: \"state\",\n  initialState,\n  reducers: {\n    /* reducers */\n  },\n});\n\nconst store = configureStore({\n  reducer: slice.reducer,\n  enhancers: [\n    liveblocksEnhancer({\n      client,\n      presenceMapping: { cursor: true },\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Comments Notifications Example with Next.js\nDESCRIPTION: This command downloads the Liveblocks comments notifications example for Next.js and prompts for an API key. It sets up the project locally with all necessary dependencies.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-comments-notifications/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-comments-notifications --api-key\n```\n\n----------------------------------------\n\nTITLE: Setting Initial Content in BlockNote Editor - Incorrect Approach\nDESCRIPTION: Demonstrates the problematic approach of setting initialContent directly in useCreateBlockNote when using Yjs, which can lead to content duplication.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/setting-an-initial-or-default-value-in-blocknote.mdx#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Editor({ doc, provider }: EditorProps) {\n  const editor: BlockNoteEditor = useCreateBlockNote({\n    // +++\n    initialContent: [{ type: \"paragraph\", content: \"Hello world\" }],\n    // +++\n\n    // Other options\n    // ...\n  });\n\n  return <BlockNoteView editor={editor} />;\n}\n```\n\n----------------------------------------\n\nTITLE: Comparing Old and New Liveblocks Client Room APIs in TypeScript\nDESCRIPTION: This code shows the comparison between the deprecated room API methods and the new recommended approach for entering and leaving rooms in @liveblocks/client. The new API makes it possible to connect to the same room from different parts of an application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react/CHANGELOG.md#2025-04-11_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\n// Old APIs we'll no longer be recommending (but that will remain working)\nconst room = client.enter(\"my-room\", options);\nclient.getRoom(\"my-room\");\nclient.leave(\"my-room\");\n```\n\nLANGUAGE: typescript\nCODE:\n```\n// New API we'll be recommending instead\nconst { room, leave } = client.enterRoom(\"my-room\", options);\nleave();\n```\n\n----------------------------------------\n\nTITLE: Filtering Threads by Metadata Absence with Liveblocks\nDESCRIPTION: The code snippet illustrates how to filter threads in Liveblocks based on the absence of certain metadata attributes. The query allows selections, for example, of threads without a 'color' metadata attribute set, thus leveraging precise filtering for data organization.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-core/CHANGELOG.md#2025-04-11_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nuseThreads({\n  query: {\n    // Filter any \"pinned\" threads that don't have a color set\n    metadata: {\n      pinned: true,\n      color: null, // ✨\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Deploying Multiplayer 3D Builder to Vercel with Liveblocks CLI\nDESCRIPTION: This command uses the Liveblocks CLI to create a new project based on the nextjs-3d-builder example and deploy it to Vercel. It sets up the project locally and initiates the Vercel deployment process.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-3d-builder/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-3d-builder --vercel\n```\n\n----------------------------------------\n\nTITLE: Editor Ready State Management\nDESCRIPTION: Demonstrates how to handle editor loading states using useIsEditorReady hook.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-blocknote.mdx#2025-04-11_snippet_16\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useLiveblocksExtension } from \"@liveblocks/react-tiptap\";\nimport { useIsEditorReady, useEditor, EditorContent } from \"@tiptap/react\";\n\nfunction TextEditor() {\n  const liveblocks = useLiveblocksExtension();\n  const ready = useIsEditorReady();\n\n  const editor = useEditor({\n    extensions: [\n      liveblocks,\n      // ...\n    ],\n  });\n\n  return (\n    <div>\n      {!ready ? <div>Loading...</div> : <EditorContent editor={editor} />}\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Extending Document Type Definition\nDESCRIPTION: Instructions for extending the Document type with new properties.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/tools/nextjs-starter-kit.mdx#2025-04-11_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nexport type Document = {\n  // Your new property\n  randomNumber: number;\n  //...\n};\n```\n\nLANGUAGE: typescript\nCODE:\n```\n// Return our custom Document format\nconst document: Document = {\n  randomNumber: Math.random(),\n  // ...\n};\n```\n\n----------------------------------------\n\nTITLE: Deploying Liveblocks Example to Vercel\nDESCRIPTION: Command to create and deploy the Tiptap comments example to Vercel. Downloads the example and initiates the Vercel deployment process with browser-based authentication.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-comments-tiptap/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-comments-tiptap --vercel\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Configuration\nDESCRIPTION: Command to create and initialize the liveblocks configuration file for JavaScript framework integration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-codemirror-vuejs.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework javascript\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Video Comments Example\nDESCRIPTION: Command to create a new Liveblocks video comments project with automatic API key setup. This will download the example and open browser for API key configuration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-comments-video/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-comments-video --api-key\n```\n\n----------------------------------------\n\nTITLE: Importing Liveblocks and Custom Styles in Next.js Layout\nDESCRIPTION: Imports the required Liveblocks CSS styles and custom global styles in the Next.js layout file.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-lexical.mdx#2025-04-11_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nimport \"@liveblocks/react-ui/styles.css\";\nimport \"@liveblocks/react-lexical/styles.css\";\nimport \"./globals.css\";\n```\n\n----------------------------------------\n\nTITLE: Deploying Liveblocks Todo List to Vercel\nDESCRIPTION: Command to create and deploy the Liveblocks todo list example to Vercel. This downloads the example and initiates the Vercel deployment process.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/react-native-todo-list/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example react-native-todo-list --vercel\n```\n\n----------------------------------------\n\nTITLE: Using AiToolbar.SuggestionsSeparator in React TipTap\nDESCRIPTION: Demonstrates how to use the AiToolbar.SuggestionsSeparator component to visually separate groups of prompt suggestions in the AI toolbar.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_42\n\nLANGUAGE: tsx\nCODE:\n```\nimport { AiToolbar } from \"@liveblocks/react-tiptap\";\n\n<AiToolbar\n  editor={editor}\n  suggestions={\n    <>\n      <AiToolbar.Suggestion>Translate in French</AiToolbar.Suggestion>\n      <AiToolbar.Suggestion>Translate in English</AiToolbar.Suggestion>\n      // +++\n      <AiToolbar.SuggestionsSeparator />\n      // +++\n      <AiToolbar.Suggestion>Custom suggestion</AiToolbar.Suggestion>\n    </>\n  }\n/>;\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Config File with CLI\nDESCRIPTION: Command to initialize the Liveblocks configuration file for a React application using the Liveblocks CLI tool.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-quill-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework react\n```\n\n----------------------------------------\n\nTITLE: Basic Zustand Store Configuration Without Liveblocks Middleware\nDESCRIPTION: Example of a basic Zustand store configuration for a To-do list application without using Liveblocks middleware. This shows the standard way to define a Zustand store with state and actions.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-redux/CHANGELOG.md#2025-04-11_snippet_19\n\nLANGUAGE: typescript\nCODE:\n```\nimport create from \"zustand\";\n\ntype State = {\n  draft: string;\n  isTyping: boolean;\n  todos: Todo[];\n  setDraft: (draft: string) => void;\n  addTodo: () => void;\n  deleteTodo: (index: number) => void;\n};\n\ncreate<State>(/* ... */);\n```\n\n----------------------------------------\n\nTITLE: Installing @liveblocks/react 0.19 with npm\nDESCRIPTION: Command to install @liveblocks/client and @liveblocks/react version 0.19 using npm.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/0.19.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client@0.19 @liveblocks/react@0.19\n```\n\n----------------------------------------\n\nTITLE: Incorrect Initial Content Setting in Tiptap with Yjs\nDESCRIPTION: Example showing the problematic way of setting initial content that leads to duplication when using Tiptap with Yjs integration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/setting-an-initial-or-default-value-in-tiptap.mdx#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Editor({ doc, provider }: EditorProps) {\n  const editor = useEditor({\n    content: \"<p>This will duplicate on load</p>\",\n\n    // Options\n    // ...\n  });\n\n  return <EditorContent editor={editor} />;\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Offline Support\nDESCRIPTION: Configuration for enabling experimental offline support in BlockNote editor.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/text-editor/blocknote.mdx#2025-04-11_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useCreateBlockNoteWithLiveblocks } from \"@liveblocks/react-blocknote\";\n\nfunction TextEditor() {\n  const editor = useCreateBlockNoteWithLiveblocks(\n    {},\n    {\n      offlineSupport_experimental: true,\n    }\n  );\n\n  // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Invalid LSON Example with Date Type in Liveblocks Storage\nDESCRIPTION: Example showing an incorrect Storage type definition that includes a Date field, which is not a valid LSON value.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/errors/Storage.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare global {\n  interface Liveblocks {\n    Storage: {\n      layers: LiveMap<string, LiveObject<Layer>>;\n      layerIds: LiveList<string>;\n      createdAt: Date; // ❌ The issue is here\n    };\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Custom Notifications Example\nDESCRIPTION: Command to initialize a new Liveblocks project with custom notifications example. This will download the example and help set up the API key automatically through browser authentication.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-notifications-custom/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-notifications-custom --api-key\n```\n\n----------------------------------------\n\nTITLE: Rendering Documentation Grid Layout with ListGrid Component\nDESCRIPTION: Shows the implementation of a grid layout using ListGrid component to display documentation cards for different aspects of Liveblocks Notifications.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/notifications.mdx#2025-04-11_snippet_0\n\nLANGUAGE: JSX\nCODE:\n```\n<ListGrid columns={2}>\n  <DocsCard\n    type=\"technology\"\n    title=\"Concepts\"\n    href=\"/docs/ready-made-features/notifications/concepts\"\n    description=\"Learn about inbox notifications\"\n    visual={<DocsIdeaIcon className=\"fill-product-icon-brand h-auto w-6\" />}\n  />\n  <DocsCard\n    type=\"technology\"\n    title=\"Default components\"\n    href=\"/docs/ready-made-features/notifications/default-components\"\n    description=\"Ready-to-use customizable components\"\n    visual={\n      <DocsDefaultComponentsIcon className=\"fill-product-icon-brand h-auto w-6\" />\n    }\n  />\n  <DocsCard\n    type=\"technology\"\n    title=\"Hooks\"\n    href=\"/docs/ready-made-features/notifications/hooks\"\n    description=\"Retrieve notifications & set settings\"\n    visual={<DocsHooksIcon className=\"fill-product-icon-brand h-auto w-6\" />}\n  />\n  <DocsCard\n    type=\"technology\"\n    title=\"Styling and customization\"\n    href=\"/docs/ready-made-features/notifications/styling-and-customization\"\n    description=\"CSS variables, dark mode, localization\"\n    visual={<DocsStylingIcon className=\"fill-product-icon-brand h-auto w-6\" />}\n  />\n  <DocsCard\n    type=\"technology\"\n    title=\"Email notifications\"\n    href=\"/docs/ready-made-features/notifications/email-notifications\"\n    description=\"Send notifications with webhooks\"\n    visual={<DocsEmailIcon className=\"fill-product-icon-brand h-auto w-6\" />}\n  />\n</ListGrid>\n```\n\n----------------------------------------\n\nTITLE: Accessing User Information in Vue.js Component\nDESCRIPTION: This snippet demonstrates how to access the authenticated user's ID and information in a Vue.js component after setting up Liveblocks authentication.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/nuxtjs.mdx#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nconst self = ref(room.getSelf());\nconsole.log(self.id);\nconsole.log(self.info);\n```\n\n----------------------------------------\n\nTITLE: Webhook URL Format Example\nDESCRIPTION: Example showing how to format the webhook URL by replacing localhost with the LocalTunnel domain.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-send-email-notifications-when-comments-are-created.mdx#2025-04-11_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\n# Take your local URL\nhttp://localhost:3000/api/liveblocks-notifications\n\n# Replace localhost with the generated domain, then copy it\nhttps://my-localtunnel-url.loca.lt/api/liveblocks-notifications\n```\n\n----------------------------------------\n\nTITLE: Loading Subdocuments\nDESCRIPTION: Shows how to load subdocuments using the GUID on different clients.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-yjs-subdocuments.mdx#2025-04-11_snippet_2\n\nLANGUAGE: ts\nCODE:\n```\n// From another client, load the subdoc using the GUID from `subdoc.guid` or `doc.getSubdocGuids`\nyProvider.loadSubdoc(\"c4a755...\");\n\n// Alternatively, get a reference to a subdocument from `doc.getSubdocs()` and then load\n// subdoc.load();\n```\n\n----------------------------------------\n\nTITLE: Zustand Store Integration with Liveblocks Middleware\nDESCRIPTION: Example showing how to integrate Liveblocks middleware with a Zustand store, including client setup and state mapping configuration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-emails/CHANGELOG.md#2025-04-11_snippet_24\n\nLANGUAGE: typescript\nCODE:\n```\nimport create from \"zustand\";\nimport { createClient } from \"@liveblocks/client\";\nimport { middleware } from \"@liveblocks/zustand\";\n\nconst client = createClient({ /*...*/ });\n\ntype State = {\n  draft: string;\n  isTyping: boolean;\n  todos: Todo[];\n  setDraft: (draft: string) => void;\n  addTodo: () => void;\n  deleteTodo: (index: number) => void;\n};\n\ncreate(\n  middleware<State>(/* ... */, {\n    client,\n    presenceMapping: { isTyping: true },\n    storageMapping: { todos: true }\n  })\n);\n```\n\n----------------------------------------\n\nTITLE: Configuring Prevent Unsaved Changes - Client\nDESCRIPTION: This snippet demonstrates how to enable the `preventUnsavedChanges` option when creating a Liveblocks client.  This prevents browser tabs from being closed while local changes are not yet synchronized with the Liveblocks server.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-zustand/CHANGELOG.md#2025-04-11_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\n\"createClient({ preventUnsavedChanges: true })\"\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Config File\nDESCRIPTION: Command to create the liveblocks.config.ts file which can be used to define types for the application's data structures.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-tiptap.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework react\n```\n\n----------------------------------------\n\nTITLE: Running Localtunnel for Webhook Testing\nDESCRIPTION: Command to start localtunnel and expose localhost:3000 to the internet for webhook testing.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-test-webhooks-on-localhost.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx localtunnel --port 3000\n```\n\n----------------------------------------\n\nTITLE: Basic Page Component with Room Integration\nDESCRIPTION: Shows how to use the Room component in a page component to enable Liveblocks functionality.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-with-nextjs-app-directory.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Room } from \"./Room\";\n\nexport default function Page() {\n  return <Room>{/* Your Liveblocks app */}</Room>;\n}\n```\n\n----------------------------------------\n\nTITLE: Styling the Collaborative Editor with CSS\nDESCRIPTION: CSS styles for the collaborative editor component, defining the layout, dimensions, colors, and visual appearance of the editor container.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-monaco-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_7\n\nLANGUAGE: css\nCODE:\n```\n.container {\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  border-radius: 12px;\n  background: #fff;\n  width: 100%;\n  height: 100%;\n  color: #111827;\n  overflow: hidden;\n}\n\n.editorHeader {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.editorContainer {\n  position: relative;\n  flex-grow: 1;\n}\n```\n\n----------------------------------------\n\nTITLE: Using LiveblocksProvider Instead of createClient\nDESCRIPTION: Example showing the migration from using createClient to using the LiveblocksProvider component in Liveblocks 2.0.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-prosemirror/CHANGELOG.md#2025-04-11_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\n// ❌ Before\nconst client = createClient(/* options */);\n\n// ✅ After\n<LiveblocksProvider /* options */>\n  <App />\n</LiveblocksProvider>\n```\n\n----------------------------------------\n\nTITLE: Installing Live Cursors Example Using npx\nDESCRIPTION: Command to create a new Liveblocks live cursors project locally without API key and Vercel deployment.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/javascript-live-cursors/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example javascript-live-cursors --no-api-key --no-vercel\n```\n\n----------------------------------------\n\nTITLE: Defining Navigation Structure in JSON\nDESCRIPTION: Shows examples of defining navigation structure in JSON, including specifying paths, file locations, and hiding pages from navigation.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/README.md#2025-04-11_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"title\": \"React\",\n  \"path\": \"/get-started/react\"\n}\n```\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"title\": \"Overview\",\n  \"path\": \"/\",\n  \"file\": \"/index.mdx\"\n}\n```\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"title\": \"API v1 Endpoints\",\n  \"hidden\": true,\n  \"path\": \"/api-reference/rest-api-endpoints-v1\"\n}\n```\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"title\": \"System status\",\n  \"href\": \"https://liveblocks.statuspage.io/\"\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Configuration File\nDESCRIPTION: Command to create the initial Liveblocks configuration file for React.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-lexical.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework react\n```\n\n----------------------------------------\n\nTITLE: Identifying Liveblocks Package Versions using npm\nDESCRIPTION: This command lists all installed @liveblocks packages and their versions in your project. It helps identify if there are any version mismatches across different Liveblocks packages.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/errors/cross-linked.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm ls | grep @liveblocks\n```\n\n----------------------------------------\n\nTITLE: Design System Link Component Example\nDESCRIPTION: Shows implementation of a basic design system link component.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/primitives.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nfunction DesignSystemLink({ url, children }) {\n  return (\n    <a href={url} target=\"_blank\">\n      {children}\n    </a>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Running Codemod for Suspense Hooks in Liveblocks Config\nDESCRIPTION: This command runs a codemod to update the Liveblocks configuration for applications using Suspense hooks.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.0.mdx#2025-04-11_snippet_9\n\nLANGUAGE: bash\nCODE:\n```\nnpx @liveblocks/codemod@latest remove-liveblocks-config-contexts --suspense\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Comments Email Example\nDESCRIPTION: Command to create a new Liveblocks application with the comments email notification template and automatic API key setup\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-comments-emails-resend/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-comments-emails-resend --api-key\n```\n\n----------------------------------------\n\nTITLE: Creating Schema via Fetch API\nDESCRIPTION: HTTP request to create a new schema through the Liveblocks API. Demonstrates how to structure the request body with schema name and definition.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/schema-validation.mdx#2025-04-11_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nfetch(\"https://api.liveblocks.io/v2/schemas\", {\n  method: \"POST\",\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n  body: JSON.stringify({\n    name: \"todo-list\",\n    body: `\n      type Storage {\n        todos: LiveList<LiveObject<Todo>>\n      }\n\n      type Todo {\n        text: string\n        checked?: boolean\n      }\n    `,\n  }),\n});\n```\n\n----------------------------------------\n\nTITLE: Installing Connection Status Example with Liveblocks CLI\nDESCRIPTION: This command uses the Liveblocks CLI to create a new project with the connection status example and prompts for an API key.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-connection-status/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-connection-status --api-key\n```\n\n----------------------------------------\n\nTITLE: Downloading Advanced Collaborative Spreadsheet Example\nDESCRIPTION: This command downloads the Advanced Collaborative Spreadsheet example from Liveblocks, which can be used to test and explore DevTools functionality.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/tools/devtools.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-spreadsheet-advanced\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Packages for React Notifications\nDESCRIPTION: Command to install the required Liveblocks packages for implementing notifications in a React application. All packages should use the same version for compatibility.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-notifications.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/react @liveblocks/react-ui\n```\n\n----------------------------------------\n\nTITLE: Deploying Collaborative Editor to Vercel\nDESCRIPTION: Command to create and deploy the collaborative code editor project to Vercel. This sets up the project with Vercel deployment configuration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-yjs-monaco/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-yjs-monaco --vercel\n```\n\n----------------------------------------\n\nTITLE: Deploying Project to Vercel\nDESCRIPTION: Command to create and deploy the Liveblocks text editor project to Vercel. This downloads the example and initiates the Vercel deployment process.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-yjs-blocknote-advanced/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-yjs-blocknote-advanced --vercel\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks configuration with CLI\nDESCRIPTION: Command to initialize the Liveblocks configuration file which can be used to define types for the application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-comments.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework react\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Config Command\nDESCRIPTION: Command to initialize a Liveblocks configuration file using the CLI tool.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-monaco-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework react\n```\n\n----------------------------------------\n\nTITLE: Running Codemod for Classic Hooks in Liveblocks Config\nDESCRIPTION: This command runs a codemod to update the Liveblocks configuration for applications using classic hooks.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.0.mdx#2025-04-11_snippet_10\n\nLANGUAGE: bash\nCODE:\n```\nnpx @liveblocks/codemod@latest remove-liveblocks-config-contexts\n```\n\n----------------------------------------\n\nTITLE: Invalid UserMeta Type Example in TypeScript\nDESCRIPTION: An example showing an incorrect UserMeta type definition where a non-JSON value (Date object) is used, causing a type error.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/errors/UserMeta.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare global {\n  interface Liveblocks {\n    UserMeta: {\n      id: string;\n      info: {\n        name: string;\n        color: string;\n        picture: string;\n        lastLogin: Date; // ❌ The issue is here\n      };\n    };\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Default Toolbar Sections\nDESCRIPTION: Shows how to construct a toolbar using the default section components provided by Liveblocks.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Toolbar } from \"@liveblocks/react-tiptap\";\nimport { Editor } from \"@tiptap/react\";\n\nfunction CustomToolbar({ editor }: { editor: Editor | null }) {\n  return (\n    <Toolbar editor={editor}>\n      <Toolbar.BlockSelector />\n      <Toolbar.SectionInline />\n      <Toolbar.Separator />\n      <Toolbar.SectionCollaboration />\n    </Toolbar>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Large Message Strategy in Liveblocks Client\nDESCRIPTION: Sets the strategy for handling messages larger than 1MB in the Liveblocks client. Options include 'default', 'split', and 'experimental-fallback-to-http'.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_8\n\nLANGUAGE: JavaScript\nCODE:\n```\nnew LiveblocksClient({\n  largeMessageStrategy: \"split\"\n});\n```\n\n----------------------------------------\n\nTITLE: Enabling Unsaved Changes Prevention in React\nDESCRIPTION: Demonstrates how to enable the prevention of unsaved changes when closing browser tabs in a React application using LiveblocksProvider.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react-ui/CHANGELOG.md#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n<LiveblocksProvider preventUnsavedChanges />\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Text Editor with Email Notifications\nDESCRIPTION: Command to create a new Liveblocks project with email notifications functionality using a template. This command downloads the example and helps set up the API key automatically.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-lexical-emails-resend/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-lexical-emails-resend --api-key\n```\n\n----------------------------------------\n\nTITLE: Running Development Server\nDESCRIPTION: This command starts the development server for the Next.js application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-comments-ai/README.md#2025-04-11_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nnpm run dev\n```\n\n----------------------------------------\n\nTITLE: Running Ngrok for Webhook Testing\nDESCRIPTION: Command to start ngrok and expose localhost:3000 to the internet for webhook testing.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-test-webhooks-on-localhost.mdx#2025-04-11_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nngrok http 3000\n```\n\n----------------------------------------\n\nTITLE: Integrating Live Avatars into Slate-based Text Editor in React\nDESCRIPTION: This code snippet shows how to integrate the Avatars component into a Slate-based text editor. It includes the Avatars component in the editor's header alongside other UI elements.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-slate-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_14\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Avatars } from \"./Avatars\";\n// ...\n\nexport default function SlateEditor() {\n  // ...\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.editorContainer}>\n        <Slate editor={editor} initialValue={[emptyNode]}>\n          <Cursors>\n            <div className={styles.editorHeader}>\n              <Toolbar />\n              <Avatars />\n            </div>\n            <Editable\n              className={styles.editor}\n              placeholder=\"Start typing here…\"\n              renderLeaf={renderLeaf}\n            />\n          </Cursors>\n        </Slate>\n      </div>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Deploying Liveblocks Collaborative Whiteboard on Vercel\nDESCRIPTION: Command to download the collaborative whiteboard example and set it up for deployment on Vercel, which will open a browser to authorize and configure the deployment.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/zustand-whiteboard/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example zustand-whiteboard --vercel\n```\n\n----------------------------------------\n\nTITLE: Zustand Migration Code Examples\nDESCRIPTION: Code diff examples showing how to migrate from older versions to Zustand v4 support, including import changes and type modifications.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react/CHANGELOG.md#2025-04-11_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\ncreate<WithLiveblocks<MyState, ...>>()(liveblocks(...))\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Node Package\nDESCRIPTION: Command to install the @liveblocks/node package via npm\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/sveltekit.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/node\n```\n\n----------------------------------------\n\nTITLE: Installing Dependencies for Collaborative Text Editor\nDESCRIPTION: Command to install Lexical, Yjs, and Liveblocks packages needed for building a collaborative text editor.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-lexical-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install lexical @lexical/react @lexical/yjs @liveblocks/client @liveblocks/react @liveblocks/yjs yjs\n```\n\n----------------------------------------\n\nTITLE: Defining Global Liveblocks Types in TypeScript Configuration\nDESCRIPTION: Example of how to define Liveblocks types globally in a TypeScript configuration file. This approach allows types to be shared across all Liveblocks APIs.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-prosemirror/CHANGELOG.md#2025-04-11_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\n// ❌ Before\nexport const {\n  suspense: {\n    RoomProvider,\n    useRoom,\n    // etc\n  },\n} = createRoomContext<Presence, Storage>(client);\n\n// ✅ After\ndeclare global {\n  interface Liveblocks {\n    Presence: Presence;\n    Storage: Storage;\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Audio Comments Example with Liveblocks CLI\nDESCRIPTION: Command to set up the audio comments example project using the Liveblocks CLI. It downloads the example and prompts for API key setup.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-comments-audio/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-comments-audio --api-key\n```\n\n----------------------------------------\n\nTITLE: Implementing Default Toolbar with Comments\nDESCRIPTION: Shows how to implement the default toolbar with comments functionality using FloatingComposer and FloatingThreads components.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  useLiveblocksExtension,\n  Toolbar,\n  FloatingComposer,\n  FloatingThreads,\n} from \"@liveblocks/react-tiptap\";\nimport { useEditor, EditorContent } from \"@tiptap/react\";\n\nfunction TextEditor() {\n  const liveblocks = useLiveblocksExtension();\n\n  const editor = useEditor({\n    extensions: [\n      liveblocks,\n      // ...\n    ],\n  });\n\n  return (\n    <div>\n      <Toolbar editor={editor} />\n      <EditorContent editor={editor} />\n      <FloatingComposer editor={editor} style={{ width: \"350px\" }} />\n      <FloatingThreads editor={editor} style={{ width: \"350px\" }} />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Environment Variable Configuration\nDESCRIPTION: Example of environment variable setup in .env.local file for configuring the Liveblocks public key.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/react-comments/README.md#2025-04-11_snippet_2\n\nLANGUAGE: plaintext\nCODE:\n```\nVITE_LIVEBLOCKS_PUBLIC_KEY\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Multiplayer Form Example with Next.js\nDESCRIPTION: This command downloads the Liveblocks multiplayer form example for Next.js and prompts for an API key. It sets up the project with all necessary dependencies and configuration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-form/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-form --api-key\n```\n\n----------------------------------------\n\nTITLE: Legacy Comments Overrides Configuration\nDESCRIPTION: Previous implementation of Comments overrides configuration before version 1.10.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/1.10.mdx#2025-04-11_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\n<CommentsConfig\n  overrides={{\n    SELF: \"you\",\n    UNKNOWN_USER: \"Anon\",\n    COMMENT_REACTION_REMAINING: (others) => `${others} people`,\n    COMMENT_REACTION_TOOLTIP: (emoji, list) => (\n      <>\n        {list} reacted with {emoji}\n      </>\n    ),\n  }}\n/>\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Avatar Stack Example\nDESCRIPTION: Command to create a new Liveblocks project with the avatar stack example. This automatically downloads the example and helps set up the API key through browser authentication.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nuxtjs-live-avatars/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nuxtjs-live-avatars --api-key\n```\n\n----------------------------------------\n\nTITLE: Zustand Migration Example\nDESCRIPTION: Code diff showing migration changes required when upgrading from Zustand v3 to v4, including import changes and state type modifications.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node/CHANGELOG.md#2025-04-11_snippet_17\n\nLANGUAGE: typescript\nCODE:\n```\n-import { middleware } from \"@liveblocks/zustand\";\n+import { liveblocks } from \"@liveblocks/zustand\";\n```\n\nLANGUAGE: typescript\nCODE:\n```\n-import type { LiveblocksState } from \"@liveblocks/zustand\";\n+import type { WithLiveblocks } from \"@liveblocks/zustand\";\n```\n\n----------------------------------------\n\nTITLE: Migrating Mutations to useMutation Hook\nDESCRIPTION: Shows how to replace direct mutations using Live objects with the useMutation hook for better state management.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/0.18.mdx#2025-04-11_snippet_12\n\nLANGUAGE: tsx\nCODE:\n```\n// ❌\nconst obj = useObject(\"a\");\n\nreturn (\n  <input\n    value={obj.get(\"name\")}\n    //         ^^^ Live object used for reading\n    onClick={() => {\n      obj.set(\"name\", e.currentTarget.value);\n      //  ^^^ Live object used for mutating\n    }}\n  />\n);\n```\n\nLANGUAGE: tsx\nCODE:\n```\n// ✅\nconst name = useStorage((root) => root.a.name);\n\nconst setName = useMutation(({ storage }, newName) => {\n  storage.get(\"a\").set(\"name\", newName);\n  //               ^^^ Mutation goes here\n}, []);\n\nreturn (\n  <input\n    value={name}\n    //     ^^^^ Reading uses simple values\n    onClick={(e) => setName(e.currentTarget.value)}\n  />\n);\n```\n\n----------------------------------------\n\nTITLE: Installing Live Avatar Stack Example with Liveblocks CLI\nDESCRIPTION: Command to create a new Liveblocks project with the SvelteKit live avatars example. This automatically downloads the example and helps set up your API key from your Liveblocks account.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/sveltekit-live-avatars/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example sveltekit-live-avatars --api-key\n```\n\n----------------------------------------\n\nTITLE: Deploying Linear-like Issue Tracker to Vercel\nDESCRIPTION: Command to create and deploy the issue tracker project to Vercel. This sets up both local development environment and Vercel deployment configuration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-linear-like-issue-tracker/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-linear-like-issue-tracker --vercel\n```\n\n----------------------------------------\n\nTITLE: Executing react-comments-to-react-ui codemod\nDESCRIPTION: This codemod updates @liveblocks/react-comments to @liveblocks/react-ui and renames <CommentsConfig /> to <LiveblocksUIConfig />.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/liveblocks-codemod/README.md#2025-04-11_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\nnpx @liveblocks/codemod@latest react-comments-to-react-ui\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks configuration file\nDESCRIPTION: Command to initialize the liveblocks.config.ts file using npx. This file can be used later to define types for the application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/svelte.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework javascript\n```\n\n----------------------------------------\n\nTITLE: Defining Process Environment for Liveblocks Client\nDESCRIPTION: Solution for the 'process is not defined' error when loading @liveblocks/client directly via script tag. Sets up the process.env.NODE_ENV variable manually.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/troubleshooting.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nglobalThis.process = { env: { NODE_ENV: \"production\" } };\n```\n\n----------------------------------------\n\nTITLE: Executing remove-yjs-default-export codemod\nDESCRIPTION: This codemod replaces the default import of @liveblocks/yjs with a named LiveblocksYjsProvider import and updates its usage accordingly.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/liveblocks-codemod/README.md#2025-04-11_snippet_6\n\nLANGUAGE: shell\nCODE:\n```\nnpx @liveblocks/codemod@latest remove-yjs-default-export\n```\n\n----------------------------------------\n\nTITLE: Creating Custom FloatingToolbar Components\nDESCRIPTION: Shows how to create custom floating toolbar implementations with different combinations of components.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-lexical.mdx#2025-04-11_snippet_19\n\nLANGUAGE: tsx\nCODE:\n```\nimport { FloatingToolbar } from \"@liveblocks/react-lexical\";\n\nfunction CustomToolbar() {\n  return (\n    <FloatingToolbar>\n      Hello <strong>world</strong>\n    </FloatingToolbar>\n  );\n}\n```\n\nLANGUAGE: tsx\nCODE:\n```\nimport { FloatingToolbar } from \"@liveblocks/react-lexical\";\n\nfunction CustomToolbar() {\n  return (\n    <FloatingToolbar>\n      <Toolbar.BlockSelector />\n      <Toolbar.SectionInline />\n      <Toolbar.Separator />\n      <Toolbar.SectionCollaboration />\n    </FloatingToolbar>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Offline Support in BlockNote Editor\nDESCRIPTION: Shows how to enable experimental offline support in BlockNote editor with thread management.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-blocknote.mdx#2025-04-11_snippet_15\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport { ClientSideSuspense, useThreads } from \"@liveblocks/react/suspense\";\nimport {\n  useCreateBlockNoteWithLiveblocks,\n  AnchoredThreads,\n  FloatingComposer,\n} from \"@liveblocks/react-blocknote\";\nimport { BlockNoteView } from \"@blocknote/mantine\";\nimport { BlockNoteEditor } from \"@blocknote/core\";\n\nexport function TiptapEditor() {\n  const editor = useCreateBlockNoteWithLiveblocks(\n    {},\n    {\n      offlineSupport_experimental: true,\n    }\n  );\n\n  return (\n    <>\n      <BlockNoteView editor={editor} />\n      <FloatingComposer editor={editor} style={{ width: 350 }} />\n      <ClientSideSuspense fallback={null}>\n        <Threads editor={editor} />\n      </ClientSideSuspense>\n    </>\n  );\n}\n\nfunction Threads({ editor }: { editor: BlockNoteEditor }) {\n  const { threads } = useThreads();\n\n  return <AnchoredThreads editor={editor} threads={threads} />;\n}\n```\n\n----------------------------------------\n\nTITLE: Styling the Lexical Editor and Threads Components\nDESCRIPTION: CSS styles for the Lexical editor and Liveblocks threads. It includes responsive styles for both desktop and mobile views, with different thread display options based on screen size.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/react-lexical.mdx#2025-04-11_snippet_6\n\nLANGUAGE: css\nCODE:\n```\n.editor {\n  position: relative;\n  display: flex;\n  width: 100%;\n  height: 100%;\n}\n\n[data-lexical-editor] {\n  padding: 2px 12px;\n  outline: none;\n}\n\n[data-lexical-editor] p {\n  margin: 0.8em 0;\n}\n\n/* For mobile */\n.floating-threads {\n  display: none;\n}\n\n/* For desktop */\n.anchored-threads {\n  display: block;\n  max-width: 300px;\n  width: 100%;\n  position: absolute;\n  right: 4px;\n}\n\n@media (max-width: 640px) {\n  .floating-threads {\n    display: block;\n  }\n\n  .anchored-threads {\n    display: none;\n  }\n}\n\n.placeholder {\n  position: absolute;\n  left: 12px;\n  top: 16px;\n  pointer-events: none;\n  opacity: 0.5;\n}\n```\n\n----------------------------------------\n\nTITLE: Creating React App with TypeScript for Whiteboard Project\nDESCRIPTION: Commands to create a new React application with TypeScript template and install the required Liveblocks packages and Zustand for state management.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-online-whiteboard-with-react-zustand-and-liveblocks.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-react-app zustand-whiteboard --template typescript\n```\n\nLANGUAGE: bash\nCODE:\n```\nnpm install zustand @liveblocks/client @liveblocks/zustand\n```\n\n----------------------------------------\n\nTITLE: Deploying Text Editor to Vercel\nDESCRIPTION: Command to create and deploy the collaborative text editor project to Vercel. Downloads the example and initiates the Vercel deployment process.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-tiptap-novel/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-tiptap-novel --vercel\n```\n\n----------------------------------------\n\nTITLE: Configuring Liveblocks Client to Prevent Unsaved Changes\nDESCRIPTION: Examples showing how to enable the preventUnsavedChanges option in both React with LiveblocksProvider and in vanilla JavaScript with createClient to prevent browser tabs from being closed when local changes are not yet synchronized.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/liveblocks-codemod/CHANGELOG.md#2025-04-11_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\n<LiveblocksProvider preventUnsavedChanges />\n```\n\nLANGUAGE: typescript\nCODE:\n```\ncreateClient({ preventUnsavedChanges: true })\n```\n\n----------------------------------------\n\nTITLE: Displaying Examples Grid with ExampleCard in React\nDESCRIPTION: JSX code showing how to display example implementations of Comments features using ExampleCard components within a ListGrid.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments.mdx#2025-04-11_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n<ListGrid columns={2}>\n  <ExampleCard\n    example={{\n      title: \"Comments\",\n      slug: \"comments/nextjs-comments\",\n      image: \"/images/examples/thumbnails/comments.jpg\"\n    }}\n    technologies={[\"nextjs\", \"react\"]}\n    openInNewWindow\n  />\n  <!-- Additional ExampleCard components -->\n</ListGrid>\n```\n\n----------------------------------------\n\nTITLE: Updated HTML with Typing Indicator Display\nDESCRIPTION: Enhanced HTML structure including a new div element for displaying the typing status message.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-javascript-and-liveblocks.mdx#2025-04-11_snippet_9\n\nLANGUAGE: html\nCODE:\n```\n<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\" />\n    <title>Liveblocks - Todo list</title>\n    <link rel=\"stylesheet\" href=\"index.css\" />\n  </head>\n  <body>\n    <div class=\"container\">\n      <div id=\"who_is_here\" class=\"who_is_here\"></div>\n      <input id=\"todo_input\" type=\"text\" placeholder=\"What needs to be done?\" />\n      <div id=\"someone_is_typing\" class=\"someone_is_typing\"></div>\n    </div>\n    <script src=\"app.js\"></script>\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Handling Storage Updated Event\nDESCRIPTION: Extended webhook handler implementation that checks for storageUpdated event type and extracts roomId for database updates.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-storage-document-data-to-a-planetscale-mysql-database.mdx#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\n\n// Add your signing key from a project's webhooks dashboard\nconst WEBHOOK_SECRET = \"YOUR_SIGNING_SECRET\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Verify if this is a real webhook request\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  // When Storage document data has been updated\n  if (event.type === \"storageUpdated\") {\n    const { roomId } = event.data;\n\n    // Update database\n    // ...\n  }\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Optional Fields Schema Example\nDESCRIPTION: Example showing how to define optional fields using the ? operator.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/schema-validation/syntax.mdx#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\ntype Storage {\n  name: string\n  age?: number\n  height: number\n  hasSiblings: boolean\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks 0.18 via npm\nDESCRIPTION: This command installs the latest version (0.18) of the Liveblocks client and React packages using npm.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/0.18.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client@0.18 @liveblocks/react@0.18\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Dependencies\nDESCRIPTION: Command to install required packages including Liveblocks client, Yjs, CodeMirror, and related dependencies for setting up a collaborative code editor.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-codemirror-vuejs.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/yjs yjs codemirror @codemirror/lang-javascript y-codemirror.next\n```\n\n----------------------------------------\n\nTITLE: Practical example of undo functionality with text input and storage updates\nDESCRIPTION: This example demonstrates a practical use of the undo functionality with a form input that updates a scientist's name in Liveblocks storage. When useMutation executes a storage update, it's automatically tracked in the undo history.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-multiplayer-undo-redo-with-react.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useState } from \"react\";\nimport { useMutation, useUndo } from \"@liveblocks/react/suspense\";\n\nfunction YourComponent() {\n  const [text, setText] = useState(\"\");\n  const undo = useUndo();\n\n  const updateName = useMutation(({ storage }, newName) => {\n    storage.get(\"scientist\").set(\"firstName\", newName);\n  });\n\n  return (\n    <>\n      <input\n        type=\"text\"\n        value={text}\n        onChange={(e) => setText(e.target.value)}\n      />\n      <button onClick={() => updateName(text)}>Update Name</button>\n      <button onClick={() => undo()}></button>\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Next.js Comments AI Example with Liveblocks\nDESCRIPTION: This command downloads and sets up the Next.js comments AI example using create-liveblocks-app. It prompts for an API key and opens the browser for authentication.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-comments-ai/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-comments-ai --api-key\n```\n\n----------------------------------------\n\nTITLE: Using User Data in React Components\nDESCRIPTION: Demonstrates how to access user information in React components using the useUser hook.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/users-and-mentions.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nfunction Component() {\n  const { user } = useUser(\"marc@example.com\");\n\n  // { color: \"red\", name: \"Marc\", avatar: \"https://example.com/marc.png\" }\n  console.log(user);\n\n  // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks To-do List Example\nDESCRIPTION: Command to create a new Liveblocks to-do list project locally without an API key or Vercel deployment.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/redux-todo-list/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example redux-todo-list --no-api-key --no-vercel\n```\n\n----------------------------------------\n\nTITLE: Deploying Liveblocks Todo List on Vercel\nDESCRIPTION: Command to download the example and initiate Vercel deployment setup process.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/javascript-todo-list/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example javascript-todo-list --vercel\n```\n\n----------------------------------------\n\nTITLE: Installing the Collaborative Flowchart Example with Liveblocks CLI\nDESCRIPTION: Command to download and set up the collaborative flowchart example using the Liveblocks CLI tool, which automatically configures the project with your API key.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/zustand-flowchart/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example zustand-flowchart --api-key\n```\n\n----------------------------------------\n\nTITLE: Installing Collaborative Whiteboard Example\nDESCRIPTION: Command to create a new Liveblocks collaborative whiteboard project locally without API key and Vercel deployment\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/redux-whiteboard/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example redux-whiteboard --no-api-key --no-vercel\n```\n\n----------------------------------------\n\nTITLE: Updating User Notification Settings with Liveblocks Client\nDESCRIPTION: This snippet illustrates how to update user notification settings using the Liveblocks client. The `updateNotificationSettings` method allows modifying the settings for different notification channels and types.  The example demonstrates disabling the 'thread' notification type for the 'email' channel.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-prosemirror/CHANGELOG.md#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { createClient } from '@liveblocks/client'\nconst client = createClient({ ... })\n\nconst updatedSettings = await client.updateNotificationSettings({\n  email: {\n    thread: false,\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Rendering API Reference Grid with ListGrid Component\nDESCRIPTION: Displays API reference documentation cards for different Liveblocks packages and endpoints related to notifications functionality.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/notifications.mdx#2025-04-11_snippet_1\n\nLANGUAGE: JSX\nCODE:\n```\n<ListGrid columns={2}>\n  <DocsCard\n    type=\"technology\"\n    title=\"React\"\n    href=\"/docs/api-reference/liveblocks-react#Notifications\"\n    description=\"@liveblocks/react\"\n    visual={<DocsReactIcon />}\n  />\n  <DocsCard\n    type=\"technology\"\n    title=\"React UI\"\n    href=\"/docs/api-reference/liveblocks-react-ui#Notifications\"\n    description=\"@liveblocks/react-ui\"\n    visual={<DocsReactIcon />}\n  />\n  <DocsCard\n    type=\"technology\"\n    title=\"JavaScript\"\n    href=\"/docs/api-reference/liveblocks-client#Notifications\"\n    description=\"@liveblocks/client\"\n    visual={<DocsJavascriptIcon />}\n  />\n  <DocsCard\n    type=\"technology\"\n    title=\"REST API functions\"\n    href=\"/docs/api-reference/liveblocks-node#Notifications\"\n    description=\"@liveblocks/node\"\n    visual={<DocsApiIcon />}\n  />\n  <DocsCard\n    type=\"technology\"\n    title=\"REST API\"\n    href=\"/docs/api-reference/rest-api-endpoints#Notifications\"\n    description=\"HTTP endpoints\"\n    visual={<DocsApiIcon />}\n  />\n</ListGrid>\n```\n\n----------------------------------------\n\nTITLE: Deploying Liveblocks Live Cursors Example to Vercel\nDESCRIPTION: Command to download the example and initiate the Vercel deployment process for the Solid.js live cursors project.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/solidjs-live-cursors/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example solidjs-live-cursors --vercel\n```\n\n----------------------------------------\n\nTITLE: LocalTunnel URL Format Example\nDESCRIPTION: Example showing how to convert localhost URL to LocalTunnel URL for webhook testing.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-storage-document-data-to-a-planetscale-mysql-database.mdx#2025-04-11_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\n# Take your local URL\nhttp://localhost:3000/api/liveblocks-database-sync\n\n# Replace localhost with the generated domain, then copy it\nhttps://my-localtunnel-url.loca.lt/api/liveblocks-database-sync\n```\n\n----------------------------------------\n\nTITLE: Creating Editor HTML Element\nDESCRIPTION: HTML markup for creating the editor container element\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-tiptap-javascript.mdx#2025-04-11_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<div id=\"editor\"></div>\n```\n\n----------------------------------------\n\nTITLE: Creating Multiple Text Editors with Y.Map\nDESCRIPTION: Example showing how to create multiple text editors using Y.Map instead of subdocuments, which is the recommended approach for simpler cases.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-yjs-subdocuments.mdx#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n// Create Yjs document with an `editors` map\nconst yDoc = new Y.Doc();\nconst yMap = yDoc.getMap(\"editors\");\n\n// Create shared types and add to map\nconst editorOne = new Y.XMLFragment();\nconst editorTwo = new Y.XMLFragment();\nyMap.set(\"editor-1\", editorOne);\nyMap.set(\"editor-2\", editorTwo);\n\n// Pass `editorOne` and `editorTwo` to your text editors\n// ...\n```\n\n----------------------------------------\n\nTITLE: Generating NextAuth Secret\nDESCRIPTION: Command to generate a secret key required for NextAuth authentication configuration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-notification-settings/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx auth secret\n```\n\n----------------------------------------\n\nTITLE: Managing User Notification Settings with @liveblocks/node\nDESCRIPTION: Demonstrates how to use the new methods exposed by the @liveblocks/node client to manage user notification settings. These methods allow getting, updating, and deleting notification settings for a specific user.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-yjs/CHANGELOG.md#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\nconst liveblocks = new Liveblocks({ secret: \"sk_xxx\" });\n\nconst settings = await liveblocks.getNotificationSettings({ userId });\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst updatedSettings = await liveblocks.updateNotificationSettings({\n  userId,\n  data: {\n    teams: {\n      $fileUploaded: true,\n    },\n  },\n});\nawait liveblocks.deleteNotificationSettings({ userId });\n```\n\n----------------------------------------\n\nTITLE: Building Liveblocks Schema Language Architecture Diagram\nDESCRIPTION: This Mermaid diagram illustrates the architecture involved in building the Liveblocks schema language, detailing the flow between components such as the AST, parser, and various output files generated during the build process.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/schema-lang/README.md#2025-04-11_snippet_0\n\nLANGUAGE: mermaid\nCODE:\n```\n\"flowchart LR\n  subgraph npm run build\n    build:ast\n    build:parser\n  end\n\n  ast/ast.grammar --> build:ast[npm run build:ast] ==>|generates| ast/index.ts\n  parser/schema.pegjs --> build:parser[npm run build:parser] ==>|generates| parser/generated-parser.ts\n\n  parser/generated-parser.ts -.-> parser\n  ast/index.ts -.-> parser\n  ast/index.ts -.-> checker\n  ast/index.ts -.-> prettifier\n  ast/index.ts -.-> typescript-generator\n  ast/index.ts -.-> infer-schema\n\n  subgraph TODO\n    typescript-generator\n    infer-schema\n  end\"\n```\n\n----------------------------------------\n\nTITLE: Adding Selection Representation to Rectangle Components - TypeScript\nDESCRIPTION: This snippet updates the React App component to visually indicate which rectangle is selected by the current user versus other users. It uses conditional styling to change the border color of selected rectangles.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-online-whiteboard-with-react-zustand-and-liveblocks.mdx#2025-04-11_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useEffect } from \"react\";\nimport useStore from \"./store\";\n\nimport \"./App.css\";\n\nexport default function App() {\n  const shapes = useStore((state) => state.shapes);\n  const insertRectangle = useStore((state) => state.insertRectangle);\n  const others = useStore((state) => state.liveblocks.others);\n  const selectedShape = useStore((state) => state.selectedShape);\n\n  /* ... */\n\n  return (\n    <>\n      <div className=\"canvas\">\n        {Object.entries(shapes).map(([shapeId, shape]) => {\n          let selectionColor = \"transparent\";\n\n          if (selectedShape === shapeId) {\n            selectionColor = \"blue\";\n          } else if (\n            others.some((user) => user.presence?.selectedShape === shapeId)\n          ) {\n            selectionColor = \"green\";\n          }\n\n          return (\n            <Rectangle\n              key={shapeId}\n              id={shapeId}\n              shape={shape}\n              selectionColor={selectionColor}\n            />\n          );\n        })}\n      </div>\n      <div className=\"toolbar\">\n        <button onClick={insertRectangle}>Rectangle</button>\n      </div>\n    </>\n  );\n}\n\nconst Rectangle = (props: {\n  id: string;\n  shape: Shape;\n  selectionColor: string;\n}) => {\n  const { id, shape, selectionColor } = props;\n  const onShapePointerDown = useStore((state) => state.onShapePointerDown);\n\n  return (\n    <div\n      className=\"rectangle\"\n      style={{\n        transform: `translate(${shape.x}px, ${shape.y}px)`,\n        backgroundColor: shape.fill ? shape.fill : \"#CCC\",\n        borderColor: selectionColor,\n      }}\n      onPointerDown={(e) => {\n        e.stopPropagation();\n        onShapePointerDown(id);\n      }}\n    ></div>\n  );\n};\n```\n\n----------------------------------------\n\nTITLE: Deploying Live Cursors Example to Vercel\nDESCRIPTION: Command to deploy the live cursors example to Vercel. This downloads the example and guides you through the deployment process to Vercel.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/sveltekit-live-cursors/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example sveltekit-live-cursors --vercel\n```\n\n----------------------------------------\n\nTITLE: Customizing Notification Kinds in React UI\nDESCRIPTION: Demonstrates how to render notifications differently based on their kind, such as thread notifications or custom notifications in Liveblocks UI. The `kinds` prop is used to overwrite the default component rendering for specific notification types.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_31\n\nLANGUAGE: tsx\nCODE:\n```\n<InboxNotification\n  inboxNotification={inboxNotification}\n  kinds={{\n    thread: (props) => (\n      <InboxNotification.Thread {...props} showRoomName={false} />\n    ),\n    $myCustomNotification: (props) => (\n      <InboxNotification.Custom\n        {...props}\n        title=\"New notification\"\n        aside={<InboxNotification.Icon>❕</InboxNotification.Icon>}\n      >\n        My custom notification\n      </InboxNotification.Custom>\n    ),\n  }}\n/>\n```\n\n----------------------------------------\n\nTITLE: Basic FileSize Component Usage\nDESCRIPTION: Simple example showing how to use the FileSize component to display formatted file sizes.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_22\n\nLANGUAGE: tsx\nCODE:\n```\n<FileSize size={100000} />\n```\n\n----------------------------------------\n\nTITLE: Styling Live Cursors in CSS\nDESCRIPTION: This CSS snippet provides styles for live cursor names and visual adjustments for CodeMirror editor components. It includes styling for cursor overlays, editor dimensions, and additional gutter styling. These styles are intended to be included in a global CSS file used for the editor.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-codemirror-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_10\n\nLANGUAGE: css\nCODE:\n```\n/* Cursor name */\n.cm-editor .cm-ySelectionInfo {\n  position: absolute;\n  top: -1.6em;\n  left: -1px;\n  padding: 2px 6px;\n  opacity: 1;\n  color: #fff;\n  border: 0;\n  border-radius: 6px;\n  border-bottom-left-radius: 0;\n  line-height: normal;\n  white-space: nowrap;\n  font-size: 14px;\n  font-family: sans-serif;\n  font-style: normal;\n  font-weight: 600;\n  pointer-events: none;\n  user-select: none;\n  z-index: 1000;\n}\n\n.cm-editor .cm-ySelectionCaretDot {\n  display: none;\n}\n\n/* Other CodeMirror styles */\n.cm-editor {\n  height: 100%;\n  font-size: 14px;\n}\n\n.cm-editor.cm-focused {\n  outline: none;\n}\n\n.cm-editor .cm-scroller {\n  padding-top: 1rem;\n}\n\n.cm-editor .cm-gutters {\n  background: none;\n  border: 0;\n}\n\n.cm-editor .cm-lineNumbers .cm-gutterElement {\n  padding-left: 1rem;\n  padding-right: 0.5rem;\n}\n```\n\n----------------------------------------\n\nTITLE: Using LiveblocksProvider Instead of createClient\nDESCRIPTION: Shows the transition from using createClient function to the new LiveblocksProvider component for initializing Liveblocks in version 2.0.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-core/CHANGELOG.md#2025-04-11_snippet_17\n\nLANGUAGE: typescript\nCODE:\n```\n// ❌ Before\nconst client = createClient(/* options */);\n\n// ✅ After\n<LiveblocksProvider /* options */>\n  <App />\n</LiveblocksProvider>\n```\n\n----------------------------------------\n\nTITLE: CommentReactionAddedEvent Schema and Example in TypeScript\nDESCRIPTION: This snippet defines the TypeScript schema for the CommentReactionAddedEvent and provides an example of the event object. This event is triggered when a reaction is added to a comment.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/webhooks.mdx#2025-04-11_snippet_17\n\nLANGUAGE: typescript\nCODE:\n```\n// Schema\ntype CommentReactionAddedEvent = {\n  type: \"commentReactionAdded\";\n  data: {\n    projectId: string;\n    roomId: string;\n    threadId: string;\n    commentId: string;\n    emoji: string;\n    addedAt: string;\n    addedBy: string;\n  };\n};\n\n// Example\nconst commentReactionAddedEvent = {\n  type: \"commentReactionAdded\",\n  data: {\n    projectId: \"my-project-id\",\n    roomId: \"my-room-id\",\n    threadId: \"my-thread-id\",\n    commentId: \"my-comment-id\",\n    emoji: \"👍\",\n    addedAt: \"2021-10-06T01:45:56.558Z\",\n    addedBy: \"my-user-id\",\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting up Liveblocks Client Configuration\nDESCRIPTION: Client-side setup for Liveblocks authentication using the authEndpoint instead of publicApiKey\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/sveltekit.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createClient } from \"@liveblocks/client\";\n\nconst client = createClient({\n  authEndpoint: \"/api/liveblocks-auth\",\n});\n```\n\n----------------------------------------\n\nTITLE: TypeScript Interface Update in @liveblocks/react\nDESCRIPTION: Code example showing deprecated type changes where UserMeta[\"info\"] can no longer be a scalar value.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-core/CHANGELOG.md#2025-04-11_snippet_19\n\nLANGUAGE: typescript\nCODE:\n```\nOthers<P, U> // Deprecated\nreadonly User<P, U>[] // Use this instead\n```\n\n----------------------------------------\n\nTITLE: Installing Collaborative Spreadsheet with Liveblocks CLI\nDESCRIPTION: Command to create a new Liveblocks project with the advanced spreadsheet example. This will download the example and help set up the API key automatically.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-spreadsheet-advanced/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-spreadsheet-advanced --api-key\n```\n\n----------------------------------------\n\nTITLE: Deploying the Collaborative Flowchart on Vercel\nDESCRIPTION: Command to download the collaborative flowchart example and deploy it directly to Vercel using the Liveblocks CLI tool.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/zustand-flowchart/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example zustand-flowchart --vercel\n```\n\n----------------------------------------\n\nTITLE: Using localtunnel to expose local webhook endpoints\nDESCRIPTION: A command to use localtunnel for exposing a local development server on port 3000 to the internet, allowing Liveblocks webhooks to reach your local webhook endpoint for testing.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-send-email-notifications-for-unread-text-editor-mentions.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx localtunnel --port 3000\n```\n\n----------------------------------------\n\nTITLE: Deploying Notion-like AI Editor to Vercel\nDESCRIPTION: Command to create and deploy the Notion-like AI editor project to Vercel. Downloads the example and initiates the Vercel deployment process.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-notion-like-ai-editor/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-notion-like-ai-editor --vercel\n```\n\n----------------------------------------\n\nTITLE: Rendering Documentation Homepage Hero in JSX\nDESCRIPTION: This snippet renders a custom React component called DocsHomepageHero to display the main title, description, and action buttons for the documentation homepage.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/index.mdx#2025-04-11_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\n<DocsHomepageHero\n  title=\"Documentation\"\n  description=\"Liveblocks is the platform for adding collaborative editing, comments, and notifications into your application.\"\n  actions={[\n    {\n      title: \"Get started\",\n      href: \"/docs/get-started\",\n      appearance: \"primary\",\n    },\n    {\n      title: \"Browse examples\",\n      href: \"/examples\",\n    },\n  ]}\n/>\n```\n\n----------------------------------------\n\nTITLE: User Info Configuration for Cursors\nDESCRIPTION: Example of userInfo configuration for real-time cursor information\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/text-editor/tiptap.mdx#2025-04-11_snippet_1\n\nLANGUAGE: js\nCODE:\n```\nuserInfo: {\n  name: \"Marie\",\n  color: \"#00ff00\",\n}\n```\n\n----------------------------------------\n\nTITLE: Deploying Liveblocks Tldraw to Vercel\nDESCRIPTION: Command to create and deploy the tldraw whiteboard example to Vercel while setting up the local development environment.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-tldraw-whiteboard-storage/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-tldraw-whiteboard-storage --vercel\n```\n\n----------------------------------------\n\nTITLE: Return Value Example Structure\nDESCRIPTION: Example showing the structure of the return value from prepareTextMentionNotificationEmailAsHtml.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-emails.mdx#2025-04-11_snippet_17\n\nLANGUAGE: js\nCODE:\n```\n{\n  roomInfo: {\n    name: \"my room name\"\n    url: \"https://my-room-url.io\"\n  },\n  mention: {\n    id: \"in_oiujhdg...\",\n    roomId: \"my-room-id\",\n    createdAt: Date <Fri Dec 15 2023 14:15:22 GMT+0000 (Greenwich Mean Time)>,\n    userId: \"user_0\"\n    htmlContent: { /* ... */}\n    author: {\n      id: \"vincent@example.com\",\n      info: { /* Custom user info you have resolved */ }\n    }\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Using Pagination with useThreads in React\nDESCRIPTION: Shows how to implement pagination with the useThreads hook in React, enabling incremental loading of thread data as users interact with the app.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-emails/CHANGELOG.md#2025-04-11_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\nconst {\n  threads,\n  isLoading,\n  error,\n  fetchMore,\n  isFetchingMore,\n  hasFetchedAll,\n  fetchMoreError,\n} = useThreads({ query });\n```\n\n----------------------------------------\n\nTITLE: Styling the Collaborative Text Editor with CSS\nDESCRIPTION: CSS module that provides styling for the collaborative text editor, including container layout, editor appearance, and placeholder styling.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-lexical-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_7\n\nLANGUAGE: css\nCODE:\n```\n.container {\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  border-radius: 12px;\n  background: #fff;\n  width: 100%;\n  height: 100%;\n  color: #111827;\n}\n\n.editorHeader {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.editor {\n  border-radius: inherit;\n  flex-grow: 1;\n  width: 100%;\n  height: 100%;\n  padding: 1rem;\n}\n\n.editor:focus {\n  outline: none;\n}\n\n.editorContainer {\n  position: relative;\n  height: 100%;\n}\n\n.placeholder {\n  pointer-events: none;\n  position: absolute;\n  inset: 0;\n  opacity: 0.3;\n  padding: 0 1em;\n}\n```\n\n----------------------------------------\n\nTITLE: Deploying Text Editor to Vercel\nDESCRIPTION: Command to create and deploy the collaborative text editor project to Vercel\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-yjs-lexical/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-yjs-lexical --vercel\n```\n\n----------------------------------------\n\nTITLE: Creating HTML Element for Quill Editor\nDESCRIPTION: Adds a div element to the HTML file with an ID of 'editor'. This element will be used to initialize the Quill editor.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-quill-javascript.mdx#2025-04-11_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<div id=\"editor\"></div>\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Configuration\nDESCRIPTION: Command to create the initial Liveblocks configuration file for JavaScript framework setup.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-tiptap-vuejs.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework javascript\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Node Package\nDESCRIPTION: Command to install the @liveblocks/node package using npm.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/nextjs.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/node\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Node Package\nDESCRIPTION: Install the @liveblocks/node package using npm.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/nuxtjs.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/node\n```\n\n----------------------------------------\n\nTITLE: Deprecation Notice - Others Type Change\nDESCRIPTION: Example showing type deprecation from Others<P, U> to readonly User<P, U>[].\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-redux/CHANGELOG.md#2025-04-11_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\n// Old way\nOthers<P, U>\n\n// New way\nreadonly User<P, U>[]\n```\n\n----------------------------------------\n\nTITLE: Running Codemod for Removing Unneeded Type Parameters\nDESCRIPTION: This command runs a codemod to remove unnecessary type parameters from Liveblocks-related functions.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.0.mdx#2025-04-11_snippet_16\n\nLANGUAGE: bash\nCODE:\n```\nnpx @liveblocks/codemod@latest remove-unneeded-type-params\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Email Package\nDESCRIPTION: Command to install required Liveblocks packages for email functionality using npm.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-emails/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/node @liveblocks/emails\n```\n\n----------------------------------------\n\nTITLE: Customizing Liveblocks Components with CSS Variables\nDESCRIPTION: This CSS snippet shows how to use CSS variables to customize colors, spacing, and border radius for all default Liveblocks components. This is the recommended method for quick and easy styling.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/styling-and-customization.mdx#2025-04-11_snippet_2\n\nLANGUAGE: css\nCODE:\n```\n/* Styles all default components */\n.lb-root {\n  --lb-accent: purple;\n  --lb-spacing: 1em;\n  --lb-radius: 0;\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Up Localtunnel for Testing Webhooks Locally\nDESCRIPTION: Command to create a temporary public URL with localtunnel that exposes your localhost server for webhook testing. This allows Liveblocks to send webhook events to your local development environment.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-send-email-notifications-of-unread-comments.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx localtunnel --port 3000\n```\n\n----------------------------------------\n\nTITLE: Removing Liveblocks Client Creation\nDESCRIPTION: This code snippet shows the removal of the createClient call from the Liveblocks configuration file.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.0.mdx#2025-04-11_snippet_13\n\nLANGUAGE: tsx\nCODE:\n```\n// ❌ Before, you no longer have to use createClient()\nimport { createClient } from \"@liveblocks/client\";\n\nconst client = createClient({\n  authEndpoint: \"/api/liveblocks-auth\",\n  throttle: 16,\n  /* etc */\n);\n```\n\n----------------------------------------\n\nTITLE: Deploying Tldraw Whiteboard to Vercel\nDESCRIPTION: Command to create and deploy the tldraw whiteboard example to Vercel. This sets up both the local development environment and Vercel deployment configuration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-tldraw-whiteboard-yjs/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-tldraw-whiteboard-yjs --vercel\n```\n\n----------------------------------------\n\nTITLE: Executing simplify-client-side-suspense-children codemod\nDESCRIPTION: This codemod removes any function-style body from <ClientSideSuspense>'s children prop.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/liveblocks-codemod/README.md#2025-04-11_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\nnpx @liveblocks/codemod@latest simplify-client-side-suspense-children\n```\n\n----------------------------------------\n\nTITLE: Deprecated Room Entry API Example - TypeScript\nDESCRIPTION: Shows the old/deprecated API methods for entering and leaving rooms in Liveblocks that will remain functional but are no longer recommended.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG.md#2025-04-11_snippet_17\n\nLANGUAGE: typescript\nCODE:\n```\n// Old APIs we'll no longer be recommending (but that will remain working)\nconst room = client.enter(\"my-room\", options);\nclient.getRoom(\"my-room\");\nclient.leave(\"my-room\");\n```\n\n----------------------------------------\n\nTITLE: Accessing Meta Information\nDESCRIPTION: Shows how to access meta information for compatibility purposes.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-yjs.mdx#2025-04-11_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\nconst meta: Map<number, { click: number; lastUpdated: number }> =\n  awareness.meta;\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks, Yjs, and Quill Dependencies\nDESCRIPTION: This command installs the necessary packages for integrating Liveblocks, Yjs, and Quill into a project. It's important to use the same version for all Liveblocks packages.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-quill-vuejs.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/yjs yjs quill quill-cursors y-quill\n```\n\n----------------------------------------\n\nTITLE: Using Pagination with useThreads Hook\nDESCRIPTION: Demonstrates how to use the new pagination support in the useThreads hook, including properties for fetching more data and checking loading status.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react-ui/CHANGELOG.md#2025-04-11_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nconst {\n  threads,\n  isLoading,\n  error,\n\n  // ✨ New in Liveblocks 2.9\n  fetchMore,\n  isFetchingMore,\n  hasFetchedAll,\n  fetchMoreError,\n} = useThreads({ query });\n```\n\n----------------------------------------\n\nTITLE: Installing @liveblocks/zustand 0.19 with npm\nDESCRIPTION: Command to install @liveblocks/client and @liveblocks/zustand version 0.19 using npm.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/0.19.mdx#2025-04-11_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client@0.19 @liveblocks/zustand@0.19\n```\n\n----------------------------------------\n\nTITLE: Managing Notification Settings with Liveblocks Node.js Client\nDESCRIPTION: This code snippet demonstrates how to use the Liveblocks Node.js client to manage user notification settings. It includes examples of retrieving, updating, and deleting notification settings for a specific user. The `Liveblocks` class is initialized with a secret key, and methods like `getNotificationSettings`, `updateNotificationSettings`, and `deleteNotificationSettings` are used to interact with the settings.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-emails/CHANGELOG.md#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\nconst liveblocks = new Liveblocks({ secret: \"sk_xxx\" });\n\nconst settings = await liveblocks.getNotificationSettings({ userId });\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst updatedSettings = await liveblocks.updateNotificationSettings({\n  userId,\n  data: {\n    teams: {\n      $fileUploaded: true,\n    },\n  },\n});\nawait liveblocks.deleteNotificationSettings({ userId });\n```\n\n----------------------------------------\n\nTITLE: Installing Supabase Client Dependencies\nDESCRIPTION: Command to install the Supabase JavaScript client library via npm.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-storage-document-data-to-a-supabase-postgres-database.mdx#2025-04-11_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\nnpm i @supabase/supabase-js\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Node Package\nDESCRIPTION: Install the @liveblocks/node package using npm.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/express.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/node\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Dependencies\nDESCRIPTION: Command to install required packages including Liveblocks client, Yjs, CodeMirror, and related dependencies for implementing collaborative code editing.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-codemirror-svelte.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/yjs yjs codemirror @codemirror/lang-javascript y-codemirror.next\n```\n\n----------------------------------------\n\nTITLE: Styling Avatars in CSS\nDESCRIPTION: This CSS snippet provides styles for avatar display in a collaborative editor, ensuring avatars are visually distinct and informative. The styles manage layout, visibility, and hover effects, ensuring that avatar tooltips are shown on hover for better UX. The styles are intended to be part of a CSS module for the avatars component.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-codemirror-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_15\n\nLANGUAGE: css\nCODE:\n```\n.avatars {\n  display: flex;\n  padding: 0 0.75rem;\n}\n\n.avatar {\n  display: flex;\n  place-content: center;\n  position: relative;\n  border: 4px solid #fff;\n  border-radius: 9999px;\n  width: 42px;\n  height: 42px;\n  background-color: #9ca3af;\n  margin-left: -0.75rem;\n}\n\n.avatar:before {\n  content: attr(data-tooltip);\n  position: absolute;\n  top: 100%;\n  opacity: 0;\n  transition: opacity 0.15s ease;\n  padding: 5px 10px;\n  color: white;\n  font-size: 0.75rem;\n  border-radius: 8px;\n  margin-top: 10px;\n  z-index: 1;\n  background: black;\n  white-space: nowrap;\n}\n\n.avatar:hover:before {\n  opacity: 1;\n}\n\n.avatar_picture {\n  width: 100%;\n  height: 100%;\n  border-radius: 9999px;\n}\n```\n\n----------------------------------------\n\nTITLE: Deploying Liveblocks Whiteboard to Vercel\nDESCRIPTION: Command to create and deploy the whiteboard example to Vercel using the create-liveblocks-app CLI tool. This handles both project creation and Vercel deployment setup.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-whiteboard-advanced/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-whiteboard-advanced --vercel\n```\n\n----------------------------------------\n\nTITLE: Passing Custom Headers to Auth Endpoint\nDESCRIPTION: Use authEndpoint as a callback to pass custom headers or data to the authentication endpoint.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/nextjs.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n<LiveblocksProvider\n  authEndpoint={async (room) => {\n    // Passing custom headers and body to your endpoint\n    const headers = {\n      // Custom headers\n      // ...\n\n      \"Content-Type\": \"application/json\",\n    };\n\n    const body = JSON.stringify({\n      // Custom body\n      // ...\n\n      room,\n    });\n\n    const response = await fetch(\"/api/liveblocks-auth\", {\n      method: \"POST\",\n      headers,\n      body,\n    });\n\n    return await response.json();\n  }}\n/>\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Node Package for Nuxt.js\nDESCRIPTION: This command installs the @liveblocks/node package which is required for server-side authentication in Nuxt.js applications.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/nuxtjs.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/node\n```\n\n----------------------------------------\n\nTITLE: Configuring RoomProvider with unstable_batchedUpdates for React 17\nDESCRIPTION: Example of setting up RoomProvider with unstable_batchedUpdates prop for React 17 to prevent stale props/zombie child issues.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/0.19.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n// ⚠️ Only if you're using React 17 or lower\nimport { unstable_batchedUpdates } from \"react-dom\"; // 👈\n<RoomProvider\n  id=\"my-room\"\n  initialPresence={...}\n  initialStorage={...}\n  unstable_batchedUpdates={unstable_batchedUpdates}\n>\n  <App />\n</RoomProvider>\n```\n\n----------------------------------------\n\nTITLE: Creating Live Avatars with Liveblocks in TSX\nDESCRIPTION: This TypeScript snippet defines a component for rendering live avatars in a collaborative editor. It uses Liveblocks hooks to retrieve information about the current user and other connected users, displaying them as avatars. The component relies on style definitions from a CSS module to maintain consistent avatar appearance.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-codemirror-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_14\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useOthers, useSelf } from \"@/liveblocks.config\";\nimport styles from \"./Avatars.module.css\";\n\nexport function Avatars() {\n  const users = useOthers();\n  const currentUser = useSelf();\n\n  return (\n    <div className={styles.avatars}>\n      {users.map(({ connectionId, info }) => {\n        return (\n          <Avatar key={connectionId} picture={info.picture} name={info.name} />\n        );\n      })}\n\n      {currentUser && (\n        <div className=\"relative ml-8 first:ml-0\">\n          <Avatar\n            picture={currentUser.info.picture}\n            name={currentUser.info.name}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport function Avatar({ picture, name }: { picture: string; name: string }) {\n  return (\n    <div className={styles.avatar} data-tooltip={name}>\n      <img\n        src={picture}\n        className={styles.avatar_picture}\n        data-tooltip={name}\n      />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Dependencies for Manual Setup\nDESCRIPTION: This command installs all necessary dependencies for the project when setting up manually.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-comments-ai/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpm install\n```\n\n----------------------------------------\n\nTITLE: Room ID Update Method\nDESCRIPTION: Method signature for updating room IDs in the @liveblocks/node package.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG.md#2025-04-11_snippet_16\n\nLANGUAGE: TypeScript\nCODE:\n```\nupdateRoomId(roomId)\n```\n\n----------------------------------------\n\nTITLE: Configuring NPM Workspaces for Liveblocks Examples\nDESCRIPTION: Configuration example showing how to add a Liveblocks example to the NPM workspaces in the root package.json. This enables local development and testing against core Liveblocks packages.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/README.md#2025-04-11_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n{\n  \"workspaces\": [\n    \"shared/*\",\n    \"packages/*\",\n    \"e2e/next-sandbox\",\n    \"examples/whatever-example\",  // 👈\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Client Creation Pattern in Liveblocks\nDESCRIPTION: Comparison of the old client creation approach using createClient versus the new component-based approach using LiveblocksProvider in Liveblocks 2.0.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-lexical/CHANGELOG.md#2025-04-11_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\n// ❌ Before\nconst client = createClient(/* options */);\n\n// ✅ After\n<LiveblocksProvider /* options */>\n  <App />\n</LiveblocksProvider>\n```\n\n----------------------------------------\n\nTITLE: Integrating Zustand Store with Liveblocks Middleware\nDESCRIPTION: Example showing how to integrate a Zustand store with Liveblocks middleware. This demonstrates moving the State type parameter to the middleware level and configuring presence and storage mappings.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-redux/CHANGELOG.md#2025-04-11_snippet_20\n\nLANGUAGE: typescript\nCODE:\n```\nimport create from \"zustand\";\nimport { createClient } from \"@liveblocks/client\";\nimport { middleware } from \"@liveblocks/zustand\";\n\nconst client = createClient({ /*...*/ });\n\ntype State = {\n  draft: string;\n  isTyping: boolean;\n  todos: Todo[];\n  setDraft: (draft: string) => void;\n  addTodo: () => void;\n  deleteTodo: (index: number) => void;\n};\n\ncreate(\n  middleware<State>(/* ... */, {\n    client,\n    presenceMapping: { isTyping: true },\n    storageMapping: { todos: true }\n  })\n);\n```\n\n----------------------------------------\n\nTITLE: Calling enterRoom without explicit initial state in Redux\nDESCRIPTION: Updated usage of enterRoom function in Redux, removing the explicit initial state argument.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/0.19.mdx#2025-04-11_snippet_5\n\nLANGUAGE: ts\nCODE:\n```\nuseEffect(() => {\n  enterRoom(\"room-id\");\n});\n```\n\n----------------------------------------\n\nTITLE: CSS Styling for Live Cursors and Selections\nDESCRIPTION: CSS module defining positioning and visual styles for cursor markers, carets, and text selections in a collaborative editor\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-slate-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_8\n\nLANGUAGE: css\nCODE:\n```\n.cursors {\n  position: relative;\n}\n\n.caretMarker {\n  position: absolute;\n  width: 2px;\n}\n\n.caret {\n  position: absolute;\n  font-size: 14px;\n  color: #fff;\n  white-space: nowrap;\n  top: 0;\n  border-radius: 6px;\n  border-bottom-left-radius: 0;\n  padding: 2px 6px;\n  pointer-events: none;\n}\n\n.selection {\n  position: absolute;\n  pointer-events: none;\n  opacity: 0.2;\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Latest Liveblocks Packages with NPM\nDESCRIPTION: Command to upgrade Liveblocks packages to version 1.5 in a React application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/1.5.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client@latest @liveblocks/node@latest @liveblocks/react@latest\n```\n\n----------------------------------------\n\nTITLE: Deploying Liveblocks To-do List to Vercel\nDESCRIPTION: Command to create and deploy the Liveblocks to-do list example to Vercel, which will download the example and initiate the Vercel deployment process.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/redux-todo-list/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example redux-todo-list --vercel\n```\n\n----------------------------------------\n\nTITLE: Executing remove-unneeded-type-params codemod\nDESCRIPTION: This codemod removes no longer needed type params from Liveblocks types when using global types.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/liveblocks-codemod/README.md#2025-04-11_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nnpx @liveblocks/codemod@latest remove-unneeded-type-params\n```\n\n----------------------------------------\n\nTITLE: Styling the Whiteboard Canvas\nDESCRIPTION: CSS styles for the whiteboard canvas, loading state, and rectangle shapes.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-online-whiteboard-with-react-redux-and-liveblocks.mdx#2025-04-11_snippet_4\n\nLANGUAGE: css\nCODE:\n```\nbody {\n  background-color: #eeeeee;\n}\n\n.loading {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100vh;\n  width: 100vw;\n}\n\n.canvas {\n  background-color: #eeeeee;\n  touch-action: none;\n  width: 100vw;\n  height: 100vh;\n}\n\n.rectangle {\n  position: absolute;\n  stroke-width: 1;\n  border-style: solid;\n  border-width: 2px;\n  height: 100px;\n  width: 100px;\n}\n\n.toolbar {\n  position: fixed;\n  top: 12px;\n  left: 50%;\n  transform: translateX(-50%);\n  padding: 4px;\n  border-radius: 8px;\n  box-shadow:\n    0px 2px 4px rgba(0, 0, 0, 0.1),\n    0px 0px 0px 1px rgba(0, 0, 0, 0.05);\n  display: flex;\n  background-color: #ffffff;\n  user-select: none;\n}\n\n.toolbar button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 4px 8px;\n  border-radius: 4px;\n  background-color: #f8f8f8;\n  color: #181818;\n  border: none;\n  box-shadow:\n    0px 2px 4px rgba(0, 0, 0, 0.1),\n    0px 0px 0px 1px rgba(0, 0, 0, 0.05);\n  margin: 4px;\n  font-weight: 500;\n  font-size: 12px;\n}\n\n.toolbar button:hover,\n.toolbar button:focus {\n  background-color: #ffffff;\n}\n\n.toolbar button:active {\n  background-color: #eeeeee;\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Next.js Starter Kit\nDESCRIPTION: Command to install and set up the Liveblocks Next.js Starter Kit using npx create-liveblocks-app.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/tools/nextjs-starter-kit.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --next\n```\n\n----------------------------------------\n\nTITLE: Various Toolbar.Toggle Examples in React-Tiptap\nDESCRIPTION: Illustrates different ways to use the Toolbar.Toggle component, including custom icons, shortcuts, and passing props to the underlying button element.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_10\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Toolbar } from \"@liveblocks/react-tiptap\";\nimport { Icon } from \"@liveblocks/react-ui\";\n\n// Button says \"Highlight\"\n<Toolbar.Toggle\n  name=\"Highlight\"\n  active={/* ... */}\n  onClick={/* ... */}\n/>\n\n// Tooltip says \"Highlight [⌘+H]\"\n<Toolbar.Toggle\n  name=\"Highlight\"\n  shortcut=\"CMD+H\"\n  active={/* ... */}\n  onClick={/* ... */}\n/>\n\n// Custom icon, replaces the name in the button\n<Toolbar.Toggle\n  name=\"Highlight\"\n  icon={<div>🖊</div>}\n  active={/* ... */}\n  onClick={/* ... */}\n/>\n\n// Using a Liveblocks icon, replaces the name in the button\n<Toolbar.Toggle\n  name=\"Highlight\"\n  icon={<Icon.QuestionMark />}\n  active={/* ... */}\n  onClick={/* ... */}\n/>\n\n// Passing children visually replaces the `name` and `icon`\n<Toolbar.Toggle\n  name=\"Highlight\"\n  active={/* ... */}\n  onClick={/* ... */}\n>\n  🖊️Highlight\n</Toolbar.Toggle>\n\n// Props are passed to the inner `button`\n<Toolbar.Toggle\n  name=\"Highlight\"\n  active={/* ... */}\n  onClick={/* ... */}\n  style={{ marginLeft: 10 }}\n  className=\"custom-toggle\"\n  onMouseOver={() => console.log(\"Hovered\")}\n/>\n```\n\n----------------------------------------\n\nTITLE: Adding esbuild script to package.json\nDESCRIPTION: Configuration in package.json that defines a build script using esbuild to bundle the application code. The script takes app.js as the entry point and outputs the bundled code to static/app.js.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-javascript-and-liveblocks.mdx#2025-04-11_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n\"scripts\": {\n  \"build\": \"esbuild app.js --bundle --outfile=static/app.js\"\n},\n```\n\n----------------------------------------\n\nTITLE: Liveblocks API Base URL\nDESCRIPTION: The base URL for all Liveblocks API v1 endpoints.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/rest-api-endpoints-v1.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nhttps://liveblocks.net/api/v1/\n```\n\n----------------------------------------\n\nTITLE: Setting Up Localtunnel for Testing Webhooks Locally\nDESCRIPTION: Command to use localtunnel for exposing a local development server to the internet, allowing Liveblocks webhooks to reach your local endpoint during development and testing.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-yjs-document-data-to-a-planetscale-mysql-database.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx localtunnel --port 3000\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Node Package\nDESCRIPTION: Install the @liveblocks/node package via npm to enable server-side authentication functionality.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/sveltekit.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/node\n```\n\n----------------------------------------\n\nTITLE: Deploying Liveblocks Dashboard to Vercel\nDESCRIPTION: Command to download the dashboard example and initiate Vercel deployment setup. This will create a new project configured for Vercel deployment with automatic browser-based setup.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-dashboard/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-dashboard --vercel\n```\n\n----------------------------------------\n\nTITLE: Setting up HTML Structure for Todo List with Typing Indicator\nDESCRIPTION: HTML structure for a todo list application with elements for showing online users and typing status indicators.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-javascript-and-liveblocks.mdx#2025-04-11_snippet_7\n\nLANGUAGE: html\nCODE:\n```\n<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\" />\n    <title>Liveblocks - Todo list</title>\n    <link rel=\"stylesheet\" href=\"index.css\" />\n  </head>\n  <body>\n    <div class=\"container\">\n      <div id=\"who_is_here\" class=\"who_is_here\"></div>\n      <input id=\"todo_input\" type=\"text\" placeholder=\"What needs to be done?\" />\n    </div>\n    <script src=\"app.js\"></script>\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Installing Dependencies for Liveblocks Comments\nDESCRIPTION: Command to install all required dependencies for the Liveblocks comments project using npm package manager.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/react-comments/README.md#2025-04-11_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nnpm install\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Avatar Stack Example\nDESCRIPTION: Command to create a new Liveblocks project with the live avatars example. This command downloads the example code and helps set up the API key automatically through the browser.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-live-avatars/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-live-avatars --api-key\n```\n\n----------------------------------------\n\nTITLE: Using pagination with useThreads in React\nDESCRIPTION: Shows how to use the new pagination support in the useThreads and useUserThreads_experimental hooks, including properties for fetching more data and checking loading status.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG.md#2025-04-11_snippet_10\n\nLANGUAGE: javascript\nCODE:\n```\nconst {\n  threads,\n  isLoading,\n  error,\n  fetchMore,\n  isFetchingMore,\n  hasFetchedAll,\n  fetchMoreError,\n} = useThreads({ query });\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks and Tiptap Dependencies\nDESCRIPTION: Command to install required Liveblocks and Tiptap packages including client, react, UI components, and Tiptap starter kit.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-tiptap.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client @liveblocks/react @liveblocks/react-ui @liveblocks/react-tiptap @tiptap/react @tiptap/starter-kit\n```\n\n----------------------------------------\n\nTITLE: Deploying Liveblocks Multiplayer Form Example to Vercel\nDESCRIPTION: This command sets up the Liveblocks multiplayer form example for Next.js and initiates the deployment process to Vercel. It handles project setup and opens the browser for Vercel deployment configuration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-form/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-form --vercel\n```\n\n----------------------------------------\n\nTITLE: Demonstrating Deprecated Room APIs in Liveblocks Client\nDESCRIPTION: Shows the older, deprecated APIs for entering and leaving rooms in Liveblocks. While these APIs will continue to work, they are no longer recommended as of v1.5.0.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-redux/CHANGELOG.md#2025-04-11_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\n// Old APIs we'll no longer be recommending (but that will remain working)\nconst room = client.enter(\"my-room\", options);\nclient.getRoom(\"my-room\");\nclient.leave(\"my-room\");\n```\n\n----------------------------------------\n\nTITLE: Installing base-64 Package for atob Polyfill\nDESCRIPTION: This command installs the base-64 package from npm, which provides the necessary decode function to polyfill atob.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/errors/liveblocks-client/atob-polyfill.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install base-64\n```\n\n----------------------------------------\n\nTITLE: Basic Zustand Store Setup Without Liveblocks\nDESCRIPTION: Example of a basic Zustand store setup without Liveblocks middleware, showing state type definition and store creation.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-emails/CHANGELOG.md#2025-04-11_snippet_23\n\nLANGUAGE: typescript\nCODE:\n```\nimport create from \"zustand\";\n\ntype State = {\n  draft: string;\n  isTyping: boolean;\n  todos: Todo[];\n  setDraft: (draft: string) => void;\n  addTodo: () => void;\n  deleteTodo: (index: number) => void;\n};\n\ncreate<State>(/* ... */);\n```\n\n----------------------------------------\n\nTITLE: Legacy Comments Resolver Implementation\nDESCRIPTION: Previous implementation of resolver functions in createRoomContext before version 1.10.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/1.10.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nconst client = createClient({\n  authEndpoint: \"/api/liveblocks-auth\",\n});\n\nconst { RoomProvider } = createRoomContext({\n  async resolveUsers({ userIds, roomId }) {\n    // ...\n  },\n  async resolveMentionSuggestions({ text, roomId }) {\n    // ...\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Initializing the Liveblocks Client\nDESCRIPTION: This segment shows how to initialize the Liveblocks client and wrap the application in a LiveblocksProvider to manage room state and interactions effectively.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node/CHANGELOG.md#2025-04-11_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\n\"<LiveblocksProvider /* options */>\\n  <App />\\n</LiveblocksProvider>\"\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Webhook Handler with Yjs Document Retrieval\nDESCRIPTION: Sets up a webhook handler to verify and process Yjs document update events, retrieving document data from Liveblocks REST API\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-yjs-document-data-to-a-planetscale-mysql-database.mdx#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\n\n// Add your signing key from a project's webhooks dashboard\nconst WEBHOOK_SECRET = \"YOUR_SIGNING_SECRET\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\n// Add your secret key from a project's API keys dashboard\nconst API_SECRET = \"{{SECRET_KEY}}\";\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Verify if this is a real webhook request\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  // When Yjs document data has been updated\n  if (event.type === \"ydocUpdated\") {\n    const { roomId } = event.data;\n\n    // Get Yjs data from Liveblocks REST API\n    const url = `https://api.liveblocks.io/v2/rooms/${roomId}/ydoc`;\n    const response = await fetch(url, {\n      headers: { Authorization: `Bearer ${API_SECRET}` },\n    });\n\n    if (!response.ok) {\n      return new Response(\"Problem accessing Liveblocks REST APIs\", {\n        status: 500,\n      });\n    }\n\n    // Your JSON Yjs document data as a string\n    const yDocData = await response.text();\n\n    // Update database\n    // ...\n  }\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Environment Variables for Liveblocks Core Tests\nDESCRIPTION: Instructions for setting up environment variables required to run end-to-end tests locally for the liveblocks-core package.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-core/README.md#2025-04-11_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nLIVEBLOCKS_PUBLIC_KEY=\"pk_YOUR_PUBLIC_API_KEY\"\n```\n\n----------------------------------------\n\nTITLE: Styling Toolbar Buttons with CSS Modules\nDESCRIPTION: This CSS module defines styles for the toolbar and its buttons, including hover and active states. It uses flexbox for layout and custom styling for button appearance.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-quill-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_11\n\nLANGUAGE: css\nCODE:\n```\n.toolbar {\n  display: flex;\n  padding: 1em;\n  gap: 6px;\n}\n\n.button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  border-radius: 6px;\n  height: 32px;\n  width: 32px;\n  background: #fff;\n  color: #1f2937;\n  border: none;\n  box-shadow:\n    rgba(0, 0, 0, 0.12) 0 4px 8px 0,\n    rgba(0, 0, 0, 0.02) 0 0 0 1px;\n}\n\n.button:hover {\n  color: #111827;\n  box-shadow:\n    rgba(0, 0, 0, 0.16) 0 5px 8px 0,\n    rgba(0, 0, 0, 0.04) 0 0 0 1px;\n}\n\n.button:focus-visible {\n  outline-offset: 2px;\n}\n\n.button:active {\n  box-shadow:\n    rgba(0, 0, 0, 0.16) 0 2px 3px 0,\n    rgba(0, 0, 0, 0.04) 0 0 0 1px;\n}\n\n.button[data-active] {\n  background: #fafafa;\n}\n```\n\n----------------------------------------\n\nTITLE: Deploying Live Cursors to Vercel\nDESCRIPTION: Command to create and deploy the live cursors example to Vercel. This will download the example code and initiate the Vercel deployment process.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/vuejs-live-cursors/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example vuejs-live-cursors --vercel\n```\n\n----------------------------------------\n\nTITLE: Deprecating Old Room Management APIs in TypeScript\nDESCRIPTION: Shows the old room management APIs that are being deprecated but will remain functional. These include methods for entering, getting, and leaving rooms.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-yjs/CHANGELOG.md#2025-04-11_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\n// Old APIs we'll no longer be recommending (but that will remain working)\nconst room = client.enter(\"my-room\", options);\nclient.getRoom(\"my-room\");\nclient.leave(\"my-room\");\n```\n\n----------------------------------------\n\nTITLE: Setting Initial Presence in RoomProvider\nDESCRIPTION: This snippet demonstrates how to set the required initial presence value when connecting to a Liveblocks room using RoomProvider.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/0.18.mdx#2025-04-11_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\n<RoomProvider\n  id=\"my-room\"\n  initialPresence={{}}\n  //              ^^^^ No longer optional\n>\n  <App />\n</RoomProvider>\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Avatar Stack Example\nDESCRIPTION: Command to create a new Liveblocks project with the avatar stack example. This will download the example and help set up the API key through browser authentication.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-live-avatars-advanced/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-live-avatars-advanced --api-key\n```\n\n----------------------------------------\n\nTITLE: Filtering Threads by Absence of Metadata in @liveblocks/react\nDESCRIPTION: Shows how to use the new filtering capability in useThreads or useUserThreads_experimental to filter threads that do not have a specific metadata attribute set.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react-ui/CHANGELOG.md#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nuseThreads({\n  query: {\n    // Filter any \"pinned\" threads that don't have a color set\n    metadata: {\n      pinned: true,\n      color: null, // ✨\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Error Listener Configuration in Liveblocks React\nDESCRIPTION: Shows how to configure an error listener with the Liveblocks React library, which now supports more comprehensive error reporting across rooms and services\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-client/CHANGELOG.md#2025-04-11_snippet_4\n\nLANGUAGE: ts\nCODE:\n```\nuseErrorListener((err: LiveblocksError) => {\n  /* show toast, or notify Sentry, Datadog, etc */\n});\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Node Package\nDESCRIPTION: Command to install the @liveblocks/node package which is required for server-side authentication.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/remix.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/node\n```\n\n----------------------------------------\n\nTITLE: Configuring UserMeta Types in Liveblocks Config\nDESCRIPTION: Adds TypeScript type declarations for user metadata to provide type hints in the editor. This ensures type safety when working with user information in Liveblocks.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-add-users-to-liveblocks-comments.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare global {\n  interface Liveblocks {\n    UserMeta: {\n      id: string;\n\n      info: {\n        name: string;\n        avatar: string;\n\n        // Your custom metadata\n        // ...\n      };\n    };\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Image Component Usage in Analytics Dashboard\nDESCRIPTION: Examples of Image components used to display the analytics dashboard and timeframe selector in the documentation\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/analytics.mdx#2025-04-11_snippet_0\n\nLANGUAGE: markup\nCODE:\n```\n<Figure>\n  <Image\n    src=\"/assets/analytics/analytics.png\"\n    alt=\"Liveblocks analytics\"\n    width={768}\n    height={406}\n  />\n</Figure>\n```\n\nLANGUAGE: markup\nCODE:\n```\n<Figure>\n  <Image\n    src=\"/assets/analytics/analytics-timeframe.png\"\n    alt=\"Liveblocks analytics timeframe selector\"\n    width={768}\n    height={406}\n  />\n</Figure>\n```\n\n----------------------------------------\n\nTITLE: Running LocalTunnel for Webhook Testing\nDESCRIPTION: Command to create a temporary public URL for local webhook testing using LocalTunnel.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-storage-document-data-to-a-supabase-postgres-database.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx localtunnel --port 3000\n```\n\n----------------------------------------\n\nTITLE: Setting Up Redux Provider in React Application\nDESCRIPTION: Configures the React application with the Redux Provider to make the store available throughout the component tree.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-react-redux-and-liveblocks.mdx#2025-04-11_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nimport { Provider } from \"react-redux\";\nimport store from \"./store\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n```\n\n----------------------------------------\n\nTITLE: HTML Structure for To-Do List Application\nDESCRIPTION: HTML template for the to-do list application. This creates the basic structure with a container for displaying who is currently in the room and includes references to the CSS and JavaScript files.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-javascript-and-liveblocks.mdx#2025-04-11_snippet_4\n\nLANGUAGE: html\nCODE:\n```\n<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\" />\n    <title>Liveblocks - Todo list</title>\n    <link rel=\"stylesheet\" href=\"index.css\" />\n  </head>\n  <body>\n    <div class=\"container\">\n      <div id=\"who_is_here\" class=\"who_is_here\"></div>\n    </div>\n    <script src=\"app.js\"></script>\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Comments Primitives Example with Next.js\nDESCRIPTION: Command to set up the Liveblocks Comments Primitives example project locally. It downloads the example and prompts for API key retrieval from a Liveblocks account.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-comments-primitives/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-comments-primitives --api-key\n```\n\n----------------------------------------\n\nTITLE: Accessing Nested Data in Storage\nDESCRIPTION: Examples of accessing nested data structures from Liveblocks storage using useStorage selectors. This shows how to efficiently retrieve specific properties from complex storage objects.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-storage-with-react.mdx#2025-04-11_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\n// [\"🐶\", \"🐱\", \"🐷\"]\nconst pets = useStorage((root) => root.scientist.pets);\n\n// \"Marie\"\nconst firstName = useStorage((root) => root.scientist.firstName);\n\n// \"🐶\"\nconst firstPet = useStorage((root) => root.scientist.pets[0]);\n```\n\n----------------------------------------\n\nTITLE: Verifying Webhook Requests with TypeScript\nDESCRIPTION: Demonstrates how to verify incoming webhook requests using the WebhookHandler from @liveblocks/node package. Includes error handling and basic request processing.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-send-email-notifications-for-unread-text-editor-mentions.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebhookHandler } from \"@liveblocks/node\";\n\n// Add your webhook secret key from a project's webhooks dashboard\nconst WEBHOOK_SECRET = \"YOUR_WEBHOOK_SECRET_KEY\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  // Verify if this is a real webhook request\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  // Send notifications\n  // ...\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Zustand Store Without Liveblocks Middleware in TypeScript\nDESCRIPTION: A basic implementation of a Zustand store for a to-do list application without using Liveblocks middleware. This shows the store structure with a State type that includes draft, isTyping, todos, and related functions.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/liveblocks-codemod/CHANGELOG.md#2025-04-11_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\nimport create from \"zustand\";\n\ntype State = {\n  draft: string;\n  isTyping: boolean;\n  todos: Todo[];\n  setDraft: (draft: string) => void;\n  addTodo: () => void;\n  deleteTodo: (index: number) => void;\n};\n\ncreate<State>(/* ... */);\n```\n\n----------------------------------------\n\nTITLE: Styling the Collaborative Editor\nDESCRIPTION: CSS styles for the collaborative text editor component providing layout and visual formatting.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-slate-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_5\n\nLANGUAGE: css\nCODE:\n```\n.container {\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  border-radius: 12px;\n  background: #fff;\n  width: 100%;\n  height: 100%;\n  color: #111827;\n}\n\n.editorHeader {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.editor {\n  border-radius: inherit;\n  flex-grow: 1;\n  width: 100%;\n  height: 100%;\n  padding: 1rem;\n}\n\n.editor:focus {\n  outline: none;\n}\n\n.editorContainer {\n  position: relative;\n  height: 100%;\n}\n\n.placeholder {\n  pointer-events: none;\n  position: absolute;\n  inset: 0;\n  opacity: 0.3;\n  padding: 0 1em;\n}\n\n.editor p {\n  margin: 1em 0;\n}\n```\n\n----------------------------------------\n\nTITLE: Deploying Canvas Comments to Vercel\nDESCRIPTION: Command to create and deploy the canvas comments example to Vercel. This will download the example and initiate the Vercel deployment process.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-comments-canvas/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-comments-canvas --vercel\n```\n\n----------------------------------------\n\nTITLE: Liveblocks Auth Response Example\nDESCRIPTION: Example of returning an error response from a custom auth callback.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG.md#2025-04-11_snippet_21\n\nLANGUAGE: javascript\nCODE:\n```\n{ error: \"forbidden\", reason: \"...\" }\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks with npm\nDESCRIPTION: Command to install the @liveblocks/client package using npm. It's noted that all packages should use the same version.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/svelte.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client\n```\n\n----------------------------------------\n\nTITLE: Deploying Liveblocks Avatar Stack to Vercel\nDESCRIPTION: Command to create and deploy the live avatars example to Vercel. This sets up both local development environment and handles deployment configuration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-live-avatars/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-live-avatars --vercel\n```\n\n----------------------------------------\n\nTITLE: Deploying to Vercel with Liveblocks Setup\nDESCRIPTION: Command to create and deploy the project to Vercel using the Liveblocks CLI tool.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-tiptap-ai/README.md#2025-04-11_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-tiptap-ai --vercel\n```\n\n----------------------------------------\n\nTITLE: Configuring Environment Variables for Liveblocks Testing\nDESCRIPTION: Environment configuration required for running Liveblocks tests, including secret and public API keys and base URL settings.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/e2e/next-sandbox/README.md#2025-04-11_snippet_0\n\nLANGUAGE: dotenv\nCODE:\n```\nLIVEBLOCKS_SECRET_KEY=YOUR_SECRET_KEY\nNEXT_PUBLIC_LIVEBLOCKS_PUBLIC_KEY=YOUR_PUBLIC_KEY\nNEXT_PUBLIC_LIVEBLOCKS_BASE_URL=https://api.liveblocks.io/v7\n```\n\n----------------------------------------\n\nTITLE: Updated CSS Variables Usage\nDESCRIPTION: New approach to styling tooltips and elevations using CSS variables in version 1.10.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/1.10.mdx#2025-04-11_snippet_5\n\nLANGUAGE: css\nCODE:\n```\n/* ✅ After - Liveblocks 1.10 */\n.lb-tooltip {\n  --lb-foreground: white;\n}\n\n.lb-elevation {\n  --lb-background: red;\n}\n```\n\n----------------------------------------\n\nTITLE: Incorrect ThreadMetadata Type Definition in TypeScript\nDESCRIPTION: This snippet shows an example of an invalid ThreadMetadata type definition. It includes properties with null values and complex object types, which are not allowed in ThreadMetadata.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/errors/ThreadMetadata.mdx#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare global {\n  interface Liveblocks {\n    ThreadMetadata: {\n      // Your custom fields go here...\n      pinned: boolean;\n      color: string | null; // ❌ Values may not be null\n      position: { x: number; y: number }; // ❌ Values must be simple\n      zIndex?: number;\n    };\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Alternative Installation via Create Liveblocks App\nDESCRIPTION: Command to create a new project using the Liveblocks CLI tool, which automatically sets up the example with API key configuration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-tiptap-ai/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-tiptap-ai --api-key\n```\n\n----------------------------------------\n\nTITLE: Installing Collaborative Text Editor with Liveblocks CLI\nDESCRIPTION: Command to create a new Liveblocks project with the Tiptap text editor example and automatically configure the API key.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-yjs-tiptap/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-yjs-tiptap --api-key\n```\n\n----------------------------------------\n\nTITLE: Deploying Connection Status Example to Vercel\nDESCRIPTION: This command uses the Liveblocks CLI to create a new project with the connection status example and deploy it to Vercel.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-connection-status/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-connection-status --vercel\n```\n\n----------------------------------------\n\nTITLE: Updating Shape Positions in Zustand Store (TypeScript)\nDESCRIPTION: This snippet demonstrates how to update the x and y coordinates of a selected shape in the Zustand store using the `set` function. It retrieves the current state, checks if a shape is selected and being dragged, and then updates the shape's position based on the mouse event coordinates. This allows users to move rectangles on the whiteboard.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-online-whiteboard-with-react-zustand-and-liveblocks.mdx#2025-04-11_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\n\"/* ... */\\n\\ntype State = {\\n  shapes: Record<string, Shape>;\\n  selectedShape: string | null;\\n  isDragging: boolean;\\n  insertRectangle: () => void;\\n  onShapePointerDown: (shapeId: string | null) => void;\\n  deleteShape: () => void;\\n  onCanvasPointerUp: () => void;\\n  onCanvasPointerMove: (e: React.PointerEvent) => void;\\n};\\n\\n/* ... */\\n\\nconst useStore = create<WithLiveblocks<State>>>(\\n  liveblocks(\\n    (set, get) => ({\n      shapes: {},\n      selectedShape: null,\n      isDragging: false,\n\n      insertRectangle: () => {\\n        /* ... */\\n      },\\n      onShapePointerDown: (shapeId) => {\\n        set({ selectedShape: shapeId, isDragging: true });\\n      },\\n      deleteShape: () => {\\n        /* ... */\\n      },\\n      onCanvasPointerUp: () => {\\n        set({ isDragging: false });\\n      },\\n      onCanvasPointerMove: (e) => {\\n        e.preventDefault();\n\n        const { isDragging, shapes, selectedShape } = get();\n        if (!selectedShape) {\n          /* Nothing todo */\n          return;\n        }\n\n        const shape = shapes[selectedShape];\n\n        if (shape && isDragging) {\n          set({\n            shapes: {\n              ...shapes,\n              [selectedShape]: {\n                ...shape,\n                x: e.clientX - 50,\n                y: e.clientY - 50,\n              },\n            },\n          });\n        }\n      },\n    }),\n    {\n      client,\n      storageMapping: { shapes: true },\n      presenceMapping: { selectedShape: true },\n    }\n  )\n);\\n\\nexport default useStore;\\n\"\n```\n\n----------------------------------------\n\nTITLE: Updating LiveList Constructor in Storage\nDESCRIPTION: Shows the change in the LiveList constructor, which now requires an array argument even when creating an empty list.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.0.mdx#2025-04-11_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nconst mylist = new LiveList([]);\n```\n\n----------------------------------------\n\nTITLE: Customizing AiToolbar Suggestions\nDESCRIPTION: Example of customizing the suggestions displayed in the AiToolbar, including adding custom suggestions and modifying existing ones.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_41\n\nLANGUAGE: tsx\nCODE:\n```\n<AiToolbar\n  editor={editor}\n  // +++\n  suggestions={({ children }) => (\n    <>\n      {children}\n      // +++\n      <AiToolbar.SuggestionsSeparator />\n      <AiToolbar.SuggestionsLabel>Custom</AiToolbar.SuggestionsLabel>\n      <AiToolbar.Suggestion>Custom suggestion</AiToolbar.Suggestion>\n    </>\n  )}\n/>\n```\n\n----------------------------------------\n\nTITLE: Upgrading Liveblocks packages using npx\nDESCRIPTION: Command to upgrade Liveblocks packages to the latest version using npx create-liveblocks-app.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.9.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --upgrade\n```\n\n----------------------------------------\n\nTITLE: Executing live-list-constructor codemod\nDESCRIPTION: This codemod adds an array to empty LiveList constructors.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/liveblocks-codemod/README.md#2025-04-11_snippet_7\n\nLANGUAGE: shell\nCODE:\n```\nnpx @liveblocks/codemod@latest live-list-constructor\n```\n\n----------------------------------------\n\nTITLE: Installing Collaborative Text Editor Project\nDESCRIPTION: Command to create a new Liveblocks project with the BlockNote text editor example. This command downloads the example and helps set up the API key automatically through the browser.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-yjs-blocknote/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-yjs-blocknote --api-key\n```\n\n----------------------------------------\n\nTITLE: Extending User and Session Types\nDESCRIPTION: Examples of extending User and Session types with new properties.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/tools/nextjs-starter-kit.mdx#2025-04-11_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nexport type User = {\n  // Your new property\n  randomNumber: number;\n  // ...\n};\n```\n\nLANGUAGE: typescript\nCODE:\n```\nreturn { randomNumber: Math.random() /* ... */ };\n```\n\n----------------------------------------\n\nTITLE: Deploying Liveblocks to Vercel\nDESCRIPTION: Command to create and deploy the live cursors example to Vercel. This will download the example and initiate the Vercel deployment process.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-live-cursors-advanced/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-live-cursors-advanced --vercel\n```\n\n----------------------------------------\n\nTITLE: Integrating Editor into Next.js Page\nDESCRIPTION: Next.js page component implementation that integrates the collaborative editor within the Liveblocks Room context.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-slate-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Room } from \"@/app/Room\";\nimport CollaborativeEditor from \"@/components/Editor\";\n\nexport default function Page() {\n  return (\n    <Room>\n      <CollaborativeEditor />\n    </Room>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Renaming RoomInfo to RoomData in @liveblocks/node\nDESCRIPTION: Demonstrates the change in type naming from RoomInfo to RoomData in the @liveblocks/node package.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.0.mdx#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { RoomData } from \"@liveblocks/node\";\nconst rooms: RoomData[] = [];\n```\n\n----------------------------------------\n\nTITLE: Vanilla JavaScript Implementation with Astro Components\nDESCRIPTION: Shows how to implement Liveblocks functionality in a vanilla Astro component using client-side JavaScript. Includes room subscription and event handling for real-time updates.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-with-astro.mdx#2025-04-11_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<script>\n  import { room, myLiveObject } from \"../liveblocksSetup.js\";\n\n  const input = document.querySelector(\"#vanilla\");\n\n  room.subscribe(myLiveObject, (updatedLiveObject) => {\n    input.value = updatedLiveObject.get(\"text\");\n  });\n\n  room.addEventListener(\"input\", (e) => {\n    myLiveObject.set(\"text\", e.target.value);\n  });\n</script>\n\n<input id=\"vanilla\" type=\"text\" onClick=\"this.select()\" />\n```\n\n----------------------------------------\n\nTITLE: Deploying to Vercel\nDESCRIPTION: Command to create and deploy the Liveblocks TipTap email notifications example to Vercel. Downloads the example and initiates the Vercel deployment process.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-tiptap-emails-resend/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-tiptap-emails-resend --vercel\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Package\nDESCRIPTION: Command to install the Liveblocks client package using npm.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/solidjs.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client\n```\n\n----------------------------------------\n\nTITLE: Configuring preventUnsavedChanges in createClient\nDESCRIPTION: Demonstrates how to enable the preventUnsavedChanges option when creating a Liveblocks client outside of React.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG.md#2025-04-11_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\ncreateClient({ preventUnsavedChanges: true })\n```\n\n----------------------------------------\n\nTITLE: Deploying Liveblocks Comments Notifications Example on Vercel\nDESCRIPTION: This command downloads the Liveblocks comments notifications example and initiates the deployment process on Vercel. It sets up the project both locally and on the Vercel platform.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-comments-notifications/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-comments-notifications --vercel\n```\n\n----------------------------------------\n\nTITLE: Initializing Client Notification Settings in TypeScript\nDESCRIPTION: Example showing how to get and update notification settings using the Liveblocks client. Demonstrates basic client initialization and settings management.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-emails/CHANGELOG.md#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createClient } from '@liveblocks/client'\nconst client = createClient({ ... })\n\nconst settings = await client.getNotificationSettings();\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst updatedSettings = await client.updateNotificationSettings({\n  email: {\n    thread: false,\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Basic Timestamp Component Usage in React\nDESCRIPTION: Simple example showing how to use the Timestamp component to display a formatted date.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_20\n\nLANGUAGE: tsx\nCODE:\n```\n<Timestamp date={new Date()} />\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Dashboard Example with API Key\nDESCRIPTION: Command to download and set up the Liveblocks dashboard example project with automatic API key configuration. This will create a new project and open the browser for API key setup.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-dashboard/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-dashboard --api-key\n```\n\n----------------------------------------\n\nTITLE: Using useSyncStatus Hook in React for Synchronization Status Tracking\nDESCRIPTION: Shows how to use the useSyncStatus hook from @liveblocks/react to track whether Liveblocks is synchronizing local changes to the server. The smooth option makes it useful for displaying a saving indicator.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/liveblocks-codemod/CHANGELOG.md#2025-04-11_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nuseSyncStatus({ smooth: true })\n```\n\n----------------------------------------\n\nTITLE: New Room Entry/Exit API in Liveblocks 1.5\nDESCRIPTION: Shows the new recommended approach for entering and leaving rooms, which returns a leave function for better connection management.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/1.5.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n// ✅ Prefer this API instead\nconst { room, leave } = client.enterRoom(\"my-room\", options);\n\n// Then later, when unmounting\nleave();\n```\n\n----------------------------------------\n\nTITLE: Checking Storage Loading State\nDESCRIPTION: Checking if Liveblocks room storage is currently loading using Redux selector.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-redux.mdx#2025-04-11_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nconst connection = useSelector((state) => state.liveblocks.isStorageLoading);\n```\n\n----------------------------------------\n\nTITLE: Deploying to Vercel with Liveblocks CLI\nDESCRIPTION: Command to create and deploy the notification settings example to Vercel using the create-liveblocks-app CLI tool.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-notification-settings/README.md#2025-04-11_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-notification-settings --vercel\n```\n\n----------------------------------------\n\nTITLE: Installing Project Dependencies with Create Liveblocks App\nDESCRIPTION: Command to set up the project locally using the create-liveblocks-app CLI tool. This will download the example and help configure the API key automatically.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-tiptap-advanced/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-tiptap-advanced --api-key\n```\n\n----------------------------------------\n\nTITLE: Starting the Next.js Development Server\nDESCRIPTION: Command to start the Next.js development server after setting up the Starter Kit.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/tools/nextjs-starter-kit.mdx#2025-04-11_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nnpm run dev\n```\n\n----------------------------------------\n\nTITLE: Deploying Code Editor to Vercel\nDESCRIPTION: Command to create and deploy the collaborative code editor project to Vercel. This sets up the project with necessary configurations for Vercel deployment.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-yjs-codemirror/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-yjs-codemirror --vercel\n```\n\n----------------------------------------\n\nTITLE: Customizing Toolbar.BlockSelector Items in React-Tiptap\nDESCRIPTION: Shows how to customize the items in the Toolbar.BlockSelector dropdown by adding a new code block option to the default items.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_12\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Toolbar } from \"@liveblocks/react-tiptap\";\n\n<Toolbar editor={editor}>\n  <Toolbar.BlockSelector\n    items={(defaultItems) => [\n      ...defaultItems,\n      {\n        name: \"Code block\",\n        icon: <div>❮ ❯</div>, // Optional\n        isActive: (editor) => editor.isActive(\"codeBlock\"),\n        setActive: (editor) =>\n          editor.chain().focus().clearNodes().toggleCodeBlock().run(),\n      },\n    ]}\n  />\n</Toolbar>;\n```\n\n----------------------------------------\n\nTITLE: Creating Custom Toolbar Button\nDESCRIPTION: Implementation of a custom toolbar button with icon and click handler\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/text-editor/tiptap.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nfunction CustomButton() {\n  return (\n    // +++\n    <Toolbar.Button\n      name=\"Help\"\n      icon={<Icon.QuestionMark />}\n      shortcut=\"CMD-H\"\n      onClick={() => console.log(\"help\")}\n    />\n    // +++\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Collaborative Monaco Editor in Vue.js\nDESCRIPTION: Vue component implementation for a collaborative Monaco code editor using Liveblocks and Yjs. Includes setup for real-time collaboration, editor initialization, and cleanup.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-monaco-vuejs.mdx#2025-04-11_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<script setup>\nimport { ref, onMounted, onUnmounted } from \"vue\";\nimport { createClient } from \"@liveblocks/client\";\nimport { getYjsProviderForRoom } from \"@liveblocks/yjs\";\nimport * as Y from \"yjs\";\nimport * as monaco from \"monaco-editor\";\nimport { MonacoBinding } from \"y-monaco\";\n\nconst element = ref(null);\nconst editor = ref(null);\nconst binding = ref(null);\nconst leave = ref(null);\n\n// Set up Liveblocks client\nconst client = createClient({\n  publicApiKey: \"{{PUBLIC_KEY}}\",\n});\n\n// Enter a multiplayer room\nconst info = client.enterRoom(\"my-room\");\nconst room = info.room;\nleave.value = info.leave;\n\n// Set up Yjs document, shared text, and Liveblocks Yjs provider\nconst yProvider = getYjsProviderForRoom(room);\nconst yDoc = yProvider.getYDoc();\nconst yText = yDoc.getText(\"monaco\");\n\nonMounted(() => {\n  // Set up the Monaco editor\n  editor.value = monaco.editor.create(element.value, {\n    value: \"\",\n    language: \"javascript\"\n  })\n\n  // Attach Yjs to Monaco\n  binding.value = new MonacoBinding(\n    yText,\n    editorRef.getModel(),\n    new Set([editor]),\n    yProvider.awareness\n  );\n});\n\nonUnmounted(() => {\n  binding?.destroy();\n  editor?.dispose();\n  leave?.();\n});\n</script>\n\n<template>\n  <div ref=\"element\" />\n</template>\n```\n\n----------------------------------------\n\nTITLE: Installing Next.js Project with create-next-app\nDESCRIPTION: Command to create a new Next.js application with TypeScript support, which will be used as the foundation for the collaborative to-do list application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-react-and-liveblocks.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-next-app@latest next-todo-list --typescript\n```\n\n----------------------------------------\n\nTITLE: Installing Collaborative Text Editor Project\nDESCRIPTION: Command to create a new Liveblocks project using the nextjs-tiptap-novel example template. This automatically downloads the example and helps set up the API key through browser authentication.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-tiptap-novel/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-tiptap-novel --api-key\n```\n\n----------------------------------------\n\nTITLE: CommentEditedEvent Schema and Example in TypeScript\nDESCRIPTION: This snippet defines the TypeScript schema for the CommentEditedEvent and provides an example of the event object. This event is triggered when a comment is edited.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/webhooks.mdx#2025-04-11_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\n// Schema\ntype CommentEditedEvent = {\n  type: \"commentEdited\";\n  data: {\n    projectId: string;\n    roomId: string;\n    threadId: string;\n    commentId: string;\n    editedAt: string;\n  };\n};\n\n// Example\nconst commentEditedEvent = {\n  type: \"commentEdited\",\n  data: {\n    projectId: \"my-project-id\",\n    roomId: \"my-room-id\",\n    threadId: \"my-thread-id\",\n    commentId: \"my-comment-id\",\n    editedAt: \"2021-10-06T01:45:56.558Z\",\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using Pagination with useThreads Hook\nDESCRIPTION: This code snippet demonstrates the updated structure of the useThreads hook, including new pagination-related properties introduced in Liveblocks 2.9.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-yjs/CHANGELOG.md#2025-04-11_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nconst {\n  threads,\n  isLoading,\n  error,\n\n  // ✨ New in Liveblocks 2.9\n  fetchMore,\n  isFetchingMore,\n  hasFetchedAll,\n  fetchMoreError,\n} = useThreads({ query });\n```\n\n----------------------------------------\n\nTITLE: Deploying Audio Comments Example on Vercel\nDESCRIPTION: Command to deploy the audio comments example on Vercel using the Liveblocks CLI. It downloads the example and initiates the Vercel deployment process.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-comments-audio/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-comments-audio --vercel\n```\n\n----------------------------------------\n\nTITLE: Accessing User Information in Svelte Components\nDESCRIPTION: Retrieve authenticated user information within your Svelte application components. This example shows how to access the user ID and custom user information from the room context.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/sveltekit.mdx#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nconst self = room.getSelf();\nconsole.log(self.id);\nconsole.log(self.info.color);\n```\n\n----------------------------------------\n\nTITLE: Updating Notification Settings Hook - Liveblocks React\nDESCRIPTION: This snippet showcases the `useUpdateNotificationSettings` hook from the Liveblocks React package, intended for situations where only updates to notification settings are necessary. It demonstrates how to invoke this hook and call it to change settings based on user interactions, such as the action of unsubscribing from notifications.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-redux/CHANGELOG.md#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useUpdateNotificationSettings } from \"@liveblocks/react\";\\n\\nconst updateSettings = useUpdateNotificationSettings();\\n\\nconst onUnsubscribe = () => {\\n  updateSettings({\\n    slack: {\\n      thread: false,\\n    },\\n  });\\n};\n```\n\n----------------------------------------\n\nTITLE: Running Development Server\nDESCRIPTION: Command to start the development server for the Liveblocks comments project, which will be accessible at localhost:5173.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/react-comments/README.md#2025-04-11_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nnpm run dev\n```\n\n----------------------------------------\n\nTITLE: LocalTunnel Command for Webhook Testing\nDESCRIPTION: Command to expose local development server to the internet for webhook testing using LocalTunnel.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-send-email-notifications-when-comments-are-created.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx localtunnel --port 3000\n```\n\n----------------------------------------\n\nTITLE: Filtering Threads by Absence of Metadata in Liveblocks React\nDESCRIPTION: This snippet demonstrates how to filter threads by the absence of specific metadata using the `useThreads` hook in `@liveblocks/react`. It shows an example of filtering threads that are pinned but do not have a `color` attribute set in their metadata. The query object is used to specify the filtering criteria, with `null` indicating the absence of a value for the `color` attribute.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-emails/CHANGELOG.md#2025-04-11_snippet_5\n\nLANGUAGE: ts\nCODE:\n```\nuseThreads({\n  query: {\n    // Filter any \"pinned\" threads that don't have a color set\n    metadata: {\n      pinned: true,\n      color: null, // ✨\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Checking Event and Notification Permissions\nDESCRIPTION: Shows how to verify text mention notifications and check user permissions for email notifications. Includes channel verification and access control checks.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-send-email-notifications-for-unread-text-editor-mentions.mdx#2025-04-11_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n  WebhookHandler,\n  isTextMentionNotificationEvent,\n} from \"@liveblocks/node\";\n\nconst WEBHOOK_SECRET = \"YOUR_WEBHOOK_SECRET_KEY\";\nconst webhookHandler = new WebhookHandler(WEBHOOK_SECRET);\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n  const headers = request.headers;\n\n  let event;\n  try {\n    event = webhookHandler.verifyRequest({\n      headers: headers,\n      rawBody: JSON.stringify(body),\n    });\n  } catch (err) {\n    console.error(err);\n    return new Response(\"Could not verify webhook call\", { status: 400 });\n  }\n\n  if (isTextMentionNotificationEvent(event) && event.data.channel === \"email\") {\n    if (!__hasRoomAccess__(event.userId, event.roomId)) {\n      return new Response(null, { status: 200 });\n    }\n\n    const emailAddress = __getEmailAddressFromDB__(event.userId);\n  }\n\n  return new Response(null, { status: 200 });\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Liveblocks Client and Fetching Notification Settings - TypeScript\nDESCRIPTION: This snippet demonstrates how to create a Liveblocks client and fetch the current user notification settings. The expected output is an object containing the notification preferences for various channels, which includes thread notifications for email, Slack, etc. Proper usage allows for dynamic management of user notification settings.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-yjs/CHANGELOG.md#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createClient } from '@liveblocks/client'\\nconst client = createClient({ ... })\\n\\nconst settings = await client.getNotificationSettings();\\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\\nconsole.log(settings);\\n\\nconst updatedSettings = await client.updateNotificationSettings({\\n  email: {\\n    thread: false,\\n  }\\n});\n```\n\n----------------------------------------\n\nTITLE: Setting Up Project Notification Settings via CURL\nDESCRIPTION: CURL command to configure project notification settings for e2e tests through the API endpoint.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/e2e/next-sandbox/README.md#2025-04-11_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\ncurl -X POST \\\n  'https://<dev_worker_url>/dashboard/projects/<project_id>/notification-settings/setup' \\\n  -H 'Content-Type: application/json' \\\n  -H 'Authorization: <authorization_token>' \\\n  -d '{}'\n```\n\n----------------------------------------\n\nTITLE: Using Pagination with useInboxNotifications Hook\nDESCRIPTION: Demonstrates how to use the pagination features introduced in Liveblocks 2.9 with the useInboxNotifications hook in React.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-lexical/CHANGELOG.md#2025-04-11_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nconst {\n  inboxNotifications,\n  isLoading,\n  error,\n\n  // ✨ New in Liveblocks 2.9\n  fetchMore,\n  isFetchingMore,\n  hasFetchedAll,\n  fetchMoreError,\n} = useInboxNotifications();\n```\n\n----------------------------------------\n\nTITLE: Using useIsEditorReady hook in React\nDESCRIPTION: Shows how to use the new useIsEditorReady hook to display a skeleton UI before the editor has received the initial text from the server.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-core/CHANGELOG.md#2025-04-11_snippet_11\n\nLANGUAGE: javascript\nCODE:\n```\nuseIsEditorReady()\n```\n\n----------------------------------------\n\nTITLE: Displaying Image with Figure Component in React\nDESCRIPTION: React/JSX code snippet showing how to display an image within a Figure component, using the Image component with specified dimensions and alt text.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/account-management/create-an-account.mdx#2025-04-11_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\n<Figure>\n  <Image\n    src=\"/assets/account-management/sign-up.png\"\n    alt=\"Create a Liveblocks account\"\n    width={768}\n    height={406}\n  />\n</Figure>\n```\n\n----------------------------------------\n\nTITLE: Using LiveList.set Method with Liveblocks\nDESCRIPTION: Demonstration of the LiveList.set method introduced in v0.16.0, which allows setting a specific element at a given index in a LiveList.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-core/CHANGELOG.md#2025-04-11_snippet_26\n\nLANGUAGE: typescript\nCODE:\n```\nconst list = new LiveList([\"🦁\", \"🦊\", \"🐵\"]);\nlist.set(0, \"🐺\");\nlist.toArray(); // equals [\"🐺\", \"🦊\", \"🐵\"]\n```\n\n----------------------------------------\n\nTITLE: Optional Fields Updates Example\nDESCRIPTION: Examples of valid and invalid updates with optional fields.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/schema-validation/syntax.mdx#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\n// ✅\nroot.delete(\"age\");\n\n// ❌ Field 'name' is not optional\nroot.delete(\"name\");\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks and esbuild with npm\nDESCRIPTION: Command to install the required dependencies for the collaborative to-do list project. This installs the Liveblocks client for real-time collaboration features and esbuild for bundling the JavaScript application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-to-do-list-with-javascript-and-liveblocks.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client esbuild\n```\n\n----------------------------------------\n\nTITLE: Implementing a Basic Text Formatting Toolbar\nDESCRIPTION: A toolbar component for adding bold, italic, and underline text formatting to a Slate editor\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-slate-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_10\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Editor } from \"slate\";\nimport { useSlate } from \"slate-react\";\nimport styles from \"./Toolbar.module.css\";\nimport { CustomText } from \"./types\";\n\nexport function Toolbar() {\n  const editor = useSlate();\n\n  return (\n    <div className={styles.toolbar}>\n      <button\n        className={styles.button}\n        data-active={isMarkActive(editor, \"bold\") || undefined}\n        onClick={(event) => {\n          event.preventDefault();\n          toggleMark(editor, \"bold\");\n        }}\n      >\n        B\n      </button>\n      {/* Similar buttons for italic and underline */}\n    </div>\n  );\n}\n\nfunction toggleMark(editor: Editor, format: keyof CustomText) {\n  const isActive = isMarkActive(editor, format);\n\n  if (isActive) {\n    Editor.removeMark(editor, format);\n  } else {\n    Editor.addMark(editor, format, true);\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Updated Redux Room Exit Implementation\nDESCRIPTION: Shows the breaking change in the Redux package where room ID is no longer required when dispatching the leave room action.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/1.5.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nconst dispatch = useDispatch();\n\n// ❌ Before\ndispatch(actions.leaveRoom(\"my-room-name\"));\n\n// ✅ After\ndispatch(actions.leaveRoom());\n```\n\n----------------------------------------\n\nTITLE: Adding presence updates to history with addToHistory option\nDESCRIPTION: This example shows how to include presence updates in the undo/redo history by using the addToHistory option. By default, presence changes aren't tracked in history, but this option allows specific updates to be included when relevant to the user experience.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-multiplayer-undo-redo-with-react.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useUpdateMyPresence } from \"@liveblocks/react/suspense\";\n\nfunction App() {\n  const updateMyPresence = useUpdateMyPresence();\n\n  return (\n    <Rectangle\n      onClick={(rectangleId) =>\n        updateMyPresence({ selected: rectangleId }, { addToHistory: true })\n      }\n    />\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Detaching Schema from Room\nDESCRIPTION: API request to remove a schema from a Liveblocks room.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/schema-validation.mdx#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nfetch(\"https://api.liveblocks.io/v2/rooms/{roomId}/schema\", {\n  method: \"DELETE\",\n});\n```\n\n----------------------------------------\n\nTITLE: Combining FloatingThreads and AnchoredThreads for optimal display\nDESCRIPTION: This snippet demonstrates how to use both FloatingThreads and AnchoredThreads together, optimizing the display for mobile and desktop screens using Tailwind classes.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-blocknote.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useThreads } from \"@liveblocks/react/suspense\";\nimport { AnchoredThreads, FloatingThreads } from \"@liveblocks/react-blocknote\";\nimport { BlockNoteEditor } from \"@blocknote/core\";\n\nfunction ThreadOverlay({ editor }: { editor: BlockNoteEditor | null }) {\n  const { threads } = useThreads({ query: { resolved: false } });\n\n  return (\n    <>\n      <FloatingThreads\n        editor={editor}\n        threads={threads}\n        className=\"w-[350px] block md:hidden\"\n      />\n      <AnchoredThreads\n        editor={editor}\n        threads={threads}\n        className=\"w-[350px] hidden sm:block\"\n      />\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Managing User Notification Settings with @liveblocks/node\nDESCRIPTION: Demonstrates how to use the new methods exposed by the Node.js client to manage user notification settings. It shows how to get, update, and delete notification settings for a user.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react-ui/CHANGELOG.md#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\nconst liveblocks = new Liveblocks({ secret: \"sk_xxx\" });\n\nconst settings = await liveblocks.getNotificationSettings({ userId });\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst updatedSettings = await liveblocks.updateNotificationSettings({\n  userId,\n  data: {\n    teams: {\n      $fileUploaded: true,\n    },\n  },\n});\nawait liveblocks.deleteNotificationSettings({ userId });\n```\n\n----------------------------------------\n\nTITLE: Configuring Client-Only Components in Astro with Multiple Frameworks\nDESCRIPTION: Demonstrates how to use client:only directive with React, Svelte, and Vue components in an Astro application. This ensures components only run on the client side to avoid bundling issues.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-with-astro.mdx#2025-04-11_snippet_0\n\nLANGUAGE: astro\nCODE:\n```\n---\nimport SvelteInput from \"../components/SvelteInput.svelte\";\nimport ReactInput from \"../components/ReactInput.tsx\";\nimport VueInput from \"../components/VueInput.vue\";\n---\n\n<main>\n  <ReactInput client:only=\"react\" />\n  <SvelteInput client:only=\"svelte\" />\n  <VueInput client:only=\"vue\" />\n</main>\n```\n\n----------------------------------------\n\nTITLE: Markdown Changelog Entries\nDESCRIPTION: Weekly changelog entries documenting updates to Liveblocks packages, dashboard features, documentation, and website changes. Includes version releases, bug fixes, and new feature announcements.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_15\n\nLANGUAGE: markdown\nCODE:\n```\n## Dashboard\n\n- Room detail page enhancements:\n  - Renamed \"Document\" tab to \"Realtime APIs\" (Storage + Yjs) to reflect new\n    product offerings.\n  - Reordered tabs: Comments, Text Editor, Realtime APIs, Metadata, Permissions.\n  - Introduced a new Text Editor tab with enhanced features:\n    - Preview Lexical documents directly from the dashboard, including mentions,\n      comment annotations, and custom nodes.\n    - Access comment threads from text annotations and browse their comments and\n      metadata.\n  - Broadcast custom events to people connected in the room using a typed\n    editor.\n- New inline view for comment threads:\n  - Offers a more visual and intuitive way to browse comments.\n  - Added ability to sort threads by latest activity, most replies, or creation\n    date.\n  - Introduced an option to delete all threads in a room at once.\n```\n\n----------------------------------------\n\nTITLE: Implementing useInboxNotifications without pagination in React\nDESCRIPTION: Example of using useInboxNotifications hook without pagination in a React component. This is the old implementation before version 2.9.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.9.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useInboxNotifications } from \"@liveblocks/react/suspense\";\n\nfunction Notifications() {\n  const { inboxNotifications } = useInboxNotifications();\n\n  return (\n    <div>\n      {inboxNotifications.map((notification) => (\n        <InboxNotification key={notification.id} inboxNotification={no†ification} />\n      ))}\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing ListGrid Component with DocsCards in React\nDESCRIPTION: JSX implementation showing the documentation navigation structure using ListGrid and DocsCard components to display various commenting features and concepts.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments.mdx#2025-04-11_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\n<ListGrid columns={2}>\n  <DocsCard\n    type=\"technology\"\n    title=\"Concepts\"\n    href=\"/docs/ready-made-features/comments/concepts\"\n    description=\"Learn about threads and comments\"\n    visual={<DocsIdeaIcon className=\"fill-product-icon-brand h-auto w-6\" />}\n  />\n  <DocsCard\n    type=\"technology\"\n    title=\"Users and mentions\"\n    href=\"/docs/ready-made-features/comments/users-and-mentions\"\n    description=\"Add users to comments and mentions\"\n    visual={<DocsMentionIcon className=\"fill-product-icon-brand h-auto w-6\" />}\n  />\n  <!-- Additional DocsCard components -->\n</ListGrid>\n```\n\n----------------------------------------\n\nTITLE: Using New Node.js Client Methods for Notification Settings\nDESCRIPTION: Demonstrates how to use new methods exposed by the Liveblocks Node.js client to manage user notification settings. It shows getting, updating, and deleting notification settings for a user.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-redux/CHANGELOG.md#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\nconst liveblocks = new Liveblocks({ secret: \"sk_xxx\" });\n\nconst settings = await liveblocks.getNotificationSettings({ userId });\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst updatedSettings = await liveblocks.updateNotificationSettings({\n  userId,\n  data: {\n    teams: {\n      $fileUploaded: true,\n    },\n  },\n});\nawait liveblocks.deleteNotificationSettings({ userId });\n```\n\n----------------------------------------\n\nTITLE: Implementing Thread Overlay with Client-Side Suspense\nDESCRIPTION: Integrates ClientSideSuspense to defer rendering of the ThreadOverlay component until the threads have fully loaded. Useful for managing asynchronous rendering and improving load times.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-tiptap.mdx#2025-04-11_snippet_31\n\nLANGUAGE: typescript\nCODE:\n```\n<div>\n  <EditorContent editor={editor} />\n  <FloatingComposer editor={editor} style={{ width: \"350px\" }} />\n  // +++\n  <ClientSideSuspense fallback={null}>\n    <ThreadOverlay editor={editor} />\n  </ClientSideSuspense>\n  // +++\n</div>\n```\n\n----------------------------------------\n\nTITLE: Destroying Awareness Instance\nDESCRIPTION: Shows how to clean up and destroy an awareness instance.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-yjs.mdx#2025-04-11_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\n// Cleanup function\nawareness.destroy();\n```\n\n----------------------------------------\n\nTITLE: Creating Liveblocks Node Client\nDESCRIPTION: Creates a Node.js client instance for interacting with Liveblocks REST API using a secret key.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/1.2.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Liveblocks } from \"@liveblocks/node\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"sk_prod_xxxxxxxxxxxxxxxxxxxxxxxx\",\n});\n```\n\n----------------------------------------\n\nTITLE: Subscribing to Storage Status Changes in TypeScript with @liveblocks/client\nDESCRIPTION: Example showing how to subscribe to storage status changes using the room.subscribe method. The function takes a status parameter that can be 'not-loaded', 'loading', 'synchronizing', or 'synchronized'.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react-ui/CHANGELOG.md#2025-04-11_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\nroom.subscribe(\"storage-status\", (status) => {\n  switch (status) {\n    case \"not-loaded\":\n      break;\n    case \"loading\":\n      break;\n    case \"synchronizing\":\n      break;\n    case \"synchronized\":\n      break;\n    default:\n      break;\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Joining Liveblocks Room with ClientSideSuspense\nDESCRIPTION: Add collaborative components inside the Liveblocks room using ClientSideSuspense for handling loading states.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-monaco-react.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n\"use client\";\n\nimport {\n  LiveblocksProvider,\n  RoomProvider,\n  ClientSideSuspense,\n} from \"@liveblocks/react/suspense\";\nimport { CollaborativeEditor } from \"./CollaborativeEditor\";\n\nexport default function App() {\n  return (\n    <LiveblocksProvider publicApiKey={\"{{PUBLIC_KEY}}\"}>      <RoomProvider id=\"my-room\">\n        <ClientSideSuspense fallback={<div>Loading…</div>}>\n          <CollaborativeEditor />\n        </ClientSideSuspense>\n      </RoomProvider>\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Initial Content in BlockNote Editor\nDESCRIPTION: Shows how to set initial content for the BlockNote editor when it hasn't been edited before.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-blocknote.mdx#2025-04-11_snippet_13\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useCreateBlockNoteWithLiveblocks } from \"@liveblocks/react-blocknote\";\n\nfunction TextEditor() {\n  const editor = useCreateBlockNoteWithLiveblocks(\n    {},\n    {\n      initialContent: \"<p>Hello world</p>\",\n    }\n  );\n\n  // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks configuration file\nDESCRIPTION: Create a liveblocks.config.ts file for defining types in the application.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/yjs-slate-react.mdx#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework react\n```\n\n----------------------------------------\n\nTITLE: Using Pagination with useInboxNotifications Hook\nDESCRIPTION: Example showing how to use the pagination support added to the useInboxNotifications hook, including the new fetchMore, isFetchingMore, hasFetchedAll, and fetchMoreError properties introduced in Liveblocks 2.9.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/liveblocks-codemod/CHANGELOG.md#2025-04-11_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nconst {\n  inboxNotifications,\n  isLoading,\n  error,\n\n  // ✨ New in Liveblocks 2.9\n  fetchMore,\n  isFetchingMore,\n  hasFetchedAll,\n  fetchMoreError,\n} = useInboxNotifications();\n```\n\n----------------------------------------\n\nTITLE: Sending Email Notifications with Resend\nDESCRIPTION: Configures a webhook handler to process thread notification events and send personalized email notifications using the Resend API\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-send-email-notifications-of-unread-comments.mdx#2025-04-11_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\nconst resend = new Resend(\"re_123456789\");\n\n// Send email to the user's email address\ntry {\n  const data = await resend.emails.send({\n    from: \"My company <hello@my-company.com>\",\n    to: emailAddress,\n    subject: \"New comment\",\n    react: email,\n  });\n} catch (err) {\n  console.error(err);\n}\n```\n\n----------------------------------------\n\nTITLE: Deploying Liveblocks To-do List on Vercel\nDESCRIPTION: Command to download the example project and deploy it on Vercel. This opens the browser to complete Vercel deployment setup while also setting up the local development environment.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/zustand-todo-list/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example zustand-todo-list --vercel\n```\n\n----------------------------------------\n\nTITLE: Comparing Old and New Room Entry APIs in Liveblocks Client\nDESCRIPTION: Shows the old deprecated API for entering/leaving rooms alongside the new recommended API that supports multiple room connections and provides a cleaner leave function pattern.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/create-liveblocks-app/CHANGELOG.md#2025-04-11_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\n// Old APIs we'll no longer be recommending (but that will remain working)\nconst room = client.enter(\"my-room\", options);\nclient.getRoom(\"my-room\");\nclient.leave(\"my-room\");\n```\n\nLANGUAGE: typescript\nCODE:\n```\n// New API we'll be recommending instead\nconst { room, leave } = client.enterRoom(\"my-room\", options);\nleave();\n```\n\n----------------------------------------\n\nTITLE: Modifying Thread Floating Positions with CSS Variables\nDESCRIPTION: Shows how to use CSS variables to adjust the gap between threads and the horizontal offset for selected threads in the AnchoredThreads component.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-blocknote.mdx#2025-04-11_snippet_9\n\nLANGUAGE: css\nCODE:\n```\n.lb-tiptap-anchored-threads {\n  /* Minimum gap between threads */\n  --lb-tiptap-anchored-threads-gap: 8px;\n\n  /* How far the active thread is offset to the left */\n  --lb-tiptap-anchored-threads-active-thread-offset: 12px;\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring User Resolution and Mentions in LiveblocksProvider\nDESCRIPTION: Implementation of LiveblocksProvider with resolveUsers and resolveMentionSuggestions functions for handling user information and mention suggestions.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/text-editor/blocknote.mdx#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { LiveblocksProvider } from \"@liveblocks/react/suspense\";\n\nfunction App() {\n  return (\n    <LiveblocksProvider\n      resolveUsers={async ({ userIds }) => {\n        // Return user info from their `userIds`\n        // ...\n      }}\n      resolveMentionSuggestions={async ({ text, roomId }) => {\n        // Return suggestions from the search `text`\n        // ...\n      }}\n    >\n      {/* children */}\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Using Generic Type Parameters with Liveblocks Zustand Middleware for Presence\nDESCRIPTION: Advanced example demonstrating how to type the 'others' presence in a Zustand store with Liveblocks middleware by using the TPresence generic parameter.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-yjs/CHANGELOG.md#2025-04-11_snippet_18\n\nLANGUAGE: typescript\nCODE:\n```\ntype Presence = {\n  isTyping: true;\n}\n\nconst useStore = create(\n  middleware<State, Presence>(/* ... */, {\n    client,\n    presenceMapping: { isTyping: true },\n    storageMapping: { todos: true }\n  })\n);\n\n// In your component\nuseStore(state => state.liveblocks.others[0].presence?.isTyping)\n```\n\n----------------------------------------\n\nTITLE: Rendering LiveList of People in React Component\nDESCRIPTION: Demonstrates how to render a LiveList of people in a React component, including input fields for editing names and a button to add new people.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tutorial/react/getting-started/nesting-data-types/guide.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nreturn (\n  <div>\n    {people.map((person, index) => (\n      <input\n        key={index}\n        type=\"text\"\n        value={person.name}\n        onChange={(e) => updateName(e.target.value, index)}\n      />\n    ))}\n    <button onClick={addPerson}>Add</button>\n  </div>\n);\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Live Cursors with Next.js\nDESCRIPTION: Command to create a new Liveblocks project with live cursors example. Automatically downloads the example and helps set up the API key from liveblocks.io account.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-live-cursors-scroll/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-live-cursors-scroll --api-key\n```\n\n----------------------------------------\n\nTITLE: Styling BlockNote Editor and Threads\nDESCRIPTION: CSS styles for positioning and styling the BlockNote editor and threads, including responsive design for mobile and desktop.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/nextjs-blocknote.mdx#2025-04-11_snippet_6\n\nLANGUAGE: css\nCODE:\n```\nhtml {\n  font-family: Inter, sans-serif;\n  background: #f9f9f9;\n}\n\n@media (prefers-color-scheme: dark) {\n  html {\n    background: #0c0c0c;\n  }\n}\n\n.editor {\n  position: absolute;\n  inset: 0;\n  max-width: 1024px;\n  margin: 0 auto;\n  padding: 48px 0;\n}\n\n.bn-editor {\n  padding: 36px 52px;\n  min-height: 100%;\n}\n\n/* For mobile */\n.floating-threads {\n  display: none;\n}\n\n/* For desktop */\n.anchored-threads {\n  display: block;\n  max-width: 300px;\n  width: 100%;\n  position: absolute;\n  right: 12px;\n}\n\n@media (max-width: 640px) {\n  .floating-threads {\n    display: block;\n  }\n\n  .anchored-threads {\n    display: none;\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Adding resolveUsers Function to LiveblocksProvider\nDESCRIPTION: This snippet shows how to add the resolveUsers function to LiveblocksProvider. The function receives userIds that have interacted with Notifications and logs them to the console.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-add-users-to-liveblocks-notifications.mdx#2025-04-11_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n<LiveblocksProvider\n  resolveUsers={async ({ userIds }) => {\n    // [\"marc@example.com\", ...]\n    console.log(userIds);\n\n    // Return a list of users\n    // ...\n  }}\n\n  // ...\n/>;\n```\n\n----------------------------------------\n\nTITLE: Setting up Root Layout with Liveblocks Providers\nDESCRIPTION: Implements the root layout component that incorporates the Liveblocks Providers wrapper. Provides the basic HTML structure and includes the Providers component.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-with-nextjs-app-directory.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ReactNode } from \"react\";\nimport { Providers } from \"./Providers\";\n\nexport default function Layout({ children }: { children: ReactNode }) {\n  return (\n    <html lang=\"en\">\n      <body>\n        <Providers>{children}</Providers>\n      </body>\n    </html>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Enabling Unsaved Changes Prevention in React\nDESCRIPTION: This code snippet shows how to enable the prevention of browser tabs from being closed while local changes are not yet synchronized in a React application using Liveblocks.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-prosemirror/CHANGELOG.md#2025-04-11_snippet_7\n\nLANGUAGE: jsx\nCODE:\n```\n<LiveblocksProvider preventUnsavedChanges />\n```\n\n----------------------------------------\n\nTITLE: Enable preventUnsavedChanges in Liveblocks Client\nDESCRIPTION: This snippet shows how to enable the `preventUnsavedChanges` option when creating a Liveblocks client. This option prevents browser tabs from closing if there are unsaved changes.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react/CHANGELOG.md#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\n\"createClient({ preventUnsavedChanges: true })\"\n```\n\n----------------------------------------\n\nTITLE: Using leaveRoom method from Liveblocks state in JavaScript\nDESCRIPTION: This snippet demonstrates how to use the leaveRoom method provided by the Liveblocks state. It shows how to leave the current room and stop syncing it with the Zustand state.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-zustand.mdx#2025-04-11_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nconst {\n  liveblocks: { leaveRoom },\n} = useStore();\n\nleaveRoom();\n```\n\n----------------------------------------\n\nTITLE: Initializing LiveblocksProvider Component in Next.js\nDESCRIPTION: Creates a Providers component that wraps the application with LiveblocksProvider for Liveblocks functionality. Sets up authentication endpoint for Liveblocks.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-with-nextjs-app-directory.mdx#2025-04-11_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ReactNode } from \"react\";\nimport { LiveblocksProvider } from \"@liveblocks/react/suspense\";\n\nexport function Providers({ children }: { children: ReactNode }) {\n  return (\n    <LiveblocksProvider authEndpoint=\"/api/liveblocks-auth\">\n      {children}\n    </LiveblocksProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Liveblocks Client with Notification Settings\nDESCRIPTION: Demonstrates how to create a Liveblocks client and interact with user notification settings using client methods for retrieving and updating settings\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-react-ui/CHANGELOG.md#2025-04-11_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createClient } from '@liveblocks/client'\nconst client = createClient({ ... })\n\nconst settings = await client.getNotificationSettings();\n// { email: { thread: true, ... }, slack: { thread: false, ... }, ... }\nconsole.log(settings);\n\nconst updatedSettings = await client.updateNotificationSettings({\n  email: {\n    thread: false,\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Extension Settings in VS Code\nDESCRIPTION: Example of how to configure settings for the Liveblocks extension in VS Code's settings.json file. It shows two sample settings: one to enable/disable the extension and another to set a specific value.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/schema-lang/vscode-extension/README.md#2025-04-11_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n\"myExtension.enable\": Enable/disable this extension.\n\"myExtension.thing\": Set to `blah` to do something.\n```\n\n----------------------------------------\n\nTITLE: Initializing Liveblocks Config with CLI\nDESCRIPTION: Command to initialize the Liveblocks configuration file using the Liveblocks CLI. This creates a liveblocks.config.ts file with React framework settings.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-tiptap-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --init --framework react\n```\n\n----------------------------------------\n\nTITLE: Installing Live Cursors Example with Liveblocks CLI\nDESCRIPTION: Command to set up the live cursors example project locally using the Liveblocks CLI. This automatically downloads the example and guides you through setting up your API key.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/sveltekit-live-cursors/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example sveltekit-live-cursors --api-key\n```\n\n----------------------------------------\n\nTITLE: Editing Thread Metadata Using cURL for REST API\nDESCRIPTION: Demonstrates how to directly use the Liveblocks REST API to edit thread metadata using a cURL command.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/metadata.mdx#2025-04-11_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\ncurl -X POST https://api.liveblocks.io/v2/rooms/my-room-id/threads/th_d75sF3.../metadata \\\n  -H \"Authorization: Bearer YOUR_SECRET_KEY\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"metadata\": {\"priority\": \"IMPORTANT\"}, \"userId\": \"florent@example.com\"}'\n```\n\n----------------------------------------\n\nTITLE: Installing Collaborative Text Editor Example\nDESCRIPTION: Command to create a new Liveblocks collaborative text editor project with automatic API key setup\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-yjs-lexical/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-yjs-lexical --api-key\n```\n\n----------------------------------------\n\nTITLE: Styling Liveblocks Primitives with Tailwind CSS\nDESCRIPTION: This example shows how to style Liveblocks primitives using Tailwind CSS classes, demonstrating the flexibility of the primitives in working with popular CSS frameworks.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/styling-and-customization.mdx#2025-04-11_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Composer } from \"@liveblocks/react-ui/primitives\";\n\nfunction Component() {\n  return (\n    <Composer.Submit className=\"bg-black text-white\">Reply</Composer.Submit>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Node Package with npm\nDESCRIPTION: Command to install the @liveblocks/node package which is required for authentication implementation.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/id-token/remix.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/node\n```\n\n----------------------------------------\n\nTITLE: Defining LiveObject Storage Root Structure\nDESCRIPTION: Shows how Liveblocks creates the storage root structure using LiveObject and LiveList data types to handle synchronized state across clients.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-storage-with-redux.mdx#2025-04-11_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst root = new LiveObject({\n  firstName: \"Marie\",\n  lastName: \"Curie\",\n  discoveries: new LiveList([\"Polonium\", \"Radium\"]),\n});\n```\n\n----------------------------------------\n\nTITLE: Accessing User Info in Liveblocks Room\nDESCRIPTION: TypeScript example showing how to access user ID and information in a Liveblocks room using the getSelf() method or useSelf() hook in React.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/firebase.mdx#2025-04-11_snippet_3\n\nLANGUAGE: ts\nCODE:\n```\nconst self = room.getSelf(); // or useSelf() in React\nconsole.log(self.id);\nconsole.log(self.info);\n```\n\n----------------------------------------\n\nTITLE: Installing Linear-like Issue Tracker with Liveblocks CLI\nDESCRIPTION: Command to create a new Liveblocks project using the issue tracker template. This automatically sets up the project and configures the API key through browser authentication.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-linear-like-issue-tracker/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-linear-like-issue-tracker --api-key\n```\n\n----------------------------------------\n\nTITLE: Applying Apache License 2.0 Boilerplate Notice\nDESCRIPTION: Standard copyright and license notice template to be included in project files. The template contains placeholders for year and copyright owner information that should be replaced with actual project details.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-linear-like-issue-tracker/src/icons/LICENSE.md#2025-04-11_snippet_0\n\nLANGUAGE: text\nCODE:\n```\nCopyright [yyyy] [name of copyright owner]\n\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed\nunder the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\nCONDITIONS OF ANY KIND, either express or implied. See the License for the\nspecific language governing permissions and limitations under the License.\n```\n\n----------------------------------------\n\nTITLE: Incorrect Method for Granting Access to All Design Rooms with Access Token in TypeScript\nDESCRIPTION: This code snippet shows an incorrect approach to granting access to all 'design' rooms. It's marked as problematic because it would give too broad access when only one room access is needed.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token.mdx#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\n// ❌ Access to every `design` room\nsession.allow(\"Vu78Rt:design:*\", session.FULL_ACCESS);\n```\n\n----------------------------------------\n\nTITLE: Executing remove-liveblocks-config-contexts codemod with Suspense\nDESCRIPTION: This codemod updates all imports to @liveblocks/react/suspense when the --suspense flag is added, useful for projects exporting Suspense versions of hooks.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/liveblocks-codemod/README.md#2025-04-11_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nnpx @liveblocks/codemod@latest remove-liveblocks-config-contexts --suspense\n```\n\n----------------------------------------\n\nTITLE: Styling Specific Liveblocks Components with Class Names\nDESCRIPTION: This CSS example shows how to use class names for deeper customization of specific Liveblocks components, including targeting components with specific data attributes.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/notifications/styling-and-customization.mdx#2025-04-11_snippet_4\n\nLANGUAGE: css\nCODE:\n```\n.lb-notification {\n  /* Customise notification */\n}\n\n.lb-avatar[data-loading] {\n  /* Customise avatar loading state */\n}\n```\n\n----------------------------------------\n\nTITLE: Deploying Collaborative Text Editor to Vercel\nDESCRIPTION: Command to create and deploy the Liveblocks Tiptap text editor example to Vercel hosting platform.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-yjs-tiptap/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-yjs-tiptap --vercel\n```\n\n----------------------------------------\n\nTITLE: Defining User Metadata Types in Liveblocks Config\nDESCRIPTION: Extends the global Liveblocks interface to define types for user metadata, ensuring type safety when accessing user information.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/authentication/access-token/remix.mdx#2025-04-11_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare global\n  interface Liveblocks {\n    UserMeta: {\n      id: string;\n\n      // Example, use any JSON-compatible data in your metadata\n      info: {\n        name: string;\n        avatar: string;\n        colors: string[];\n      }\n    }\n\n    // Other type definitions\n    // ...\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Storage Updates Validation Examples\nDESCRIPTION: Examples of valid and invalid storage updates based on scalar type definitions.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/schema-validation/syntax.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n// ✅ Valid storage updates\nroot.set(\"name\", \"Marie Curie\");\nroot.set(\"age\", 66);\nroot.set(\"hasSiblings\", true);\nroot.set(\"favoritePet\", \"Cooper\");\nroot.set(\"favoritePet\", null);\n\n// ❌ Invalid storage updates\nroot.set(\"name\", true);\nroot.set(\"hasSiblings\", null);\nroot.set(\"favoritePet\", 0);\n```\n\n----------------------------------------\n\nTITLE: Importing Default Styles for Liveblocks React UI\nDESCRIPTION: This code shows how to import the default styles for Liveblocks React UI components. It demonstrates importing the styles at the root of the application or directly into a CSS file.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_41\n\nLANGUAGE: tsx\nCODE:\n```\nimport \"@liveblocks/react-ui/styles.css\";\n```\n\n----------------------------------------\n\nTITLE: Storage Status Subscription in TypeScript\nDESCRIPTION: Example of subscribing to storage status changes using room.subscribe() with TypeScript enum handling for different status states.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/liveblocks-codemod/CHANGELOG.md#2025-04-11_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\nroom.subscribe(\"storage-status\", (status) => {\n  switch (status) {\n    case \"not-loaded\":\n      break;\n    case \"loading\":\n      break;\n    case \"synchronizing\":\n      break;\n    case \"synchronized\":\n      break;\n    default:\n      break;\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Deploying Liveblocks Video Comments to Vercel\nDESCRIPTION: Command to create and deploy the video comments example to Vercel. This will download the example and initiate the Vercel deployment process.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-comments-video/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-comments-video --vercel\n```\n\n----------------------------------------\n\nTITLE: Mapping Multiple Threads in React Component\nDESCRIPTION: Example showing how to map through multiple threads using the useThreads hook and render Thread components.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/api-reference/liveblocks-react-ui.mdx#2025-04-11_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Thread } from \"@liveblocks/react-ui\";\nimport { useThreads } from \"@liveblocks/react/suspense\";\n\nfunction Component() {\n  const { threads } = useThreads();\n\n  return (\n    <>\n      {threads.map((thread) => (\n        <Thread key={thread.id} thread={thread} />\n      ))}\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Removing Manual Data Structure Conversion\nDESCRIPTION: Demonstrates how useStorage eliminates the need for manual conversion of Live structures to normal JavaScript data structures.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/0.18.mdx#2025-04-11_snippet_11\n\nLANGUAGE: tsx\nCODE:\n```\n// ❌\nobj.toObject();\nlist.toArray();\n```\n\nLANGUAGE: tsx\nCODE:\n```\n// ✅\nobj; // Already a normal JS object\nlist; // Already a normal JS array\n```\n\n----------------------------------------\n\nTITLE: Deploying Liveblocks Avatar Stack to Vercel\nDESCRIPTION: Command to create and deploy the avatar stack example to Vercel. Downloads the example and initiates the Vercel deployment process.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nuxtjs-live-avatars/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nuxtjs-live-avatars --vercel\n```\n\n----------------------------------------\n\nTITLE: Sending Email Notifications with Dynamic Content\nDESCRIPTION: Example of sending an email with dynamic content to users based on thread notifications.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/comments/email-notifications.mdx#2025-04-11_snippet_3\n\nLANGUAGE: ts\nCODE:\n```\nconst emailAddress = __getUserEmail__(userId);\n\n// Send email to the user that received the inbox notification\n__sendEmail__({\n  from: \"hello@my-company.com\",\n  to: emailAddress,\n  title: \"Unread comment\",\n  react: `\n    <h1>Unread comment</h1>\n    ${commentHtml}\n  `,\n});\n```\n\n----------------------------------------\n\nTITLE: Hiding Headings from Table of Contents in Markdown\nDESCRIPTION: Shows how to hide a heading from tables of content and search using a custom syntax in Markdown.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/README.md#2025-04-11_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n### Heading [@hidden]\n```\n\n----------------------------------------\n\nTITLE: Using getSyncStatus Method in JavaScript\nDESCRIPTION: Demonstrates how to use the new getSyncStatus() method to check the synchronization status of pending local changes in Liveblocks.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-emails/CHANGELOG.md#2025-04-11_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nclient.getSyncStatus()\n```\n\n----------------------------------------\n\nTITLE: Updated Todo Schema with Required Checked Field\nDESCRIPTION: Modified schema definition where the checked field is required instead of optional.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/schema-validation.mdx#2025-04-11_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\ntype Storage {\n  todos: LiveList<LiveObject<Todo>>\n}\n\ntype Todo {\n  text: string\n  checked: boolean\n}\n```\n\n----------------------------------------\n\nTITLE: Deploying Liveblocks Notifications to Vercel\nDESCRIPTION: Command to initialize and deploy the custom notifications example to Vercel. This will download the example and initiate the Vercel deployment process.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-notifications-custom/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-notifications-custom --vercel\n```\n\n----------------------------------------\n\nTITLE: Subscribing to Errors in Liveblocks Client\nDESCRIPTION: Sets up an error subscription to handle various types of errors from the Liveblocks room, including Comments & Notifications errors.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG_PUBLIC.md#2025-04-11_snippet_12\n\nLANGUAGE: JavaScript\nCODE:\n```\nroom.subscribe(\"error\", (err) => { ... });\n```\n\n----------------------------------------\n\nTITLE: Querying PlanetScale Database\nDESCRIPTION: SQL query to verify the synchronized data by selecting all records from the documents table.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-storage-document-data-to-a-planetscale-mysql-database.mdx#2025-04-11_snippet_9\n\nLANGUAGE: sql\nCODE:\n```\nSELECT * FROM documents;\n```\n\n----------------------------------------\n\nTITLE: Installing Liveblocks Client Package\nDESCRIPTION: Command to install the Liveblocks client package via npm. All packages should use the same version.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/get-started/javascript.mdx#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @liveblocks/client\n```\n\n----------------------------------------\n\nTITLE: Deleting Schema via API\nDESCRIPTION: Example of how to delete a schema using the Liveblocks REST API.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/schema-validation.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nfetch(\"https://api.liveblocks.io/v2/schemas/{id}\", {\n  method: \"DELETE\",\n});\n```\n\n----------------------------------------\n\nTITLE: Adding Floating Comments Composer\nDESCRIPTION: Integration of the floating comments composer component in the Lexical editor.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/text-editor/lexical.mdx#2025-04-11_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\n<LexicalComposer initialConfig={initialConfig}>\n  <LiveblocksPlugin>\n    <FloatingComposer />\n  </LiveblocksPlugin>\n</LexicalComposer>\n```\n\n----------------------------------------\n\nTITLE: Legacy CSS Variables Usage\nDESCRIPTION: Previous approach to styling tooltips and elevations using CSS variables before version 1.10.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/1.10.mdx#2025-04-11_snippet_4\n\nLANGUAGE: css\nCODE:\n```\n/* ❌ Before - Liveblocks 1.9 */\n:root {\n  --lb-tooltip-foreground: white;\n  --lb-elevation-background: red;\n}\n```\n\n----------------------------------------\n\nTITLE: Filtering Threads by Metadata in Liveblocks React\nDESCRIPTION: Shows how to filter threads by absence of metadata using useThreads hook in Liveblocks React. Demonstrates filtering pinned threads that don't have a color attribute set.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/CHANGELOG.md#2025-04-11_snippet_4\n\nLANGUAGE: ts\nCODE:\n```\nuseThreads({\n  query: {\n    // Filter any \"pinned\" threads that don't have a color set\n    metadata: {\n      pinned: true,\n      color: null, // ✨\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Installing MySQL Dependencies\nDESCRIPTION: Command to install the mysql2 package required for database connectivity.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-storage-document-data-to-a-planetscale-mysql-database.mdx#2025-04-11_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\nnpm i mysql2\n```\n\n----------------------------------------\n\nTITLE: Upgrading Liveblocks Dependencies with NPX\nDESCRIPTION: Command to upgrade all Liveblocks dependencies to their latest versions using npx create-liveblocks-app.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/platform/upgrading/2.0.mdx#2025-04-11_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --upgrade\n```\n\n----------------------------------------\n\nTITLE: Offline Support Configuration\nDESCRIPTION: Implementation of experimental offline support for Tiptap editor\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/pages/ready-made-features/text-editor/tiptap.mdx#2025-04-11_snippet_10\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useLiveblocksExtension } from \"@liveblocks/react-tiptap\";\n\nfunction TextEditor() {\n  const liveblocks = useLiveblocksExtension({\n    offlineSupport_experimental: true,\n  });\n\n  // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Custom Heading ID in Markdown\nDESCRIPTION: Demonstrates how to override the automatically generated heading ID using a custom syntax in Markdown.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/docs/README.md#2025-04-11_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n### Heading [#custom-id]\n```\n\n----------------------------------------\n\nTITLE: Styling Live Avatars Component with CSS\nDESCRIPTION: This CSS code provides styles for the Avatars and Avatar components, including layout, positioning, and hover effects for tooltips.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-slate-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_13\n\nLANGUAGE: css\nCODE:\n```\n.avatars {\n  display: flex;\n  padding: 0 0.75rem;\n}\n\n.avatar {\n  display: flex;\n  place-content: center;\n  position: relative;\n  border: 4px solid #fff;\n  border-radius: 9999px;\n  width: 42px;\n  height: 42px;\n  background-color: #9ca3af;\n  margin-left: -0.75rem;\n}\n\n.avatar:before {\n  content: attr(data-tooltip);\n  position: absolute;\n  top: 100%;\n  opacity: 0;\n  transition: opacity 0.15s ease;\n  padding: 5px 10px;\n  color: white;\n  font-size: 0.75rem;\n  border-radius: 8px;\n  margin-top: 10px;\n  z-index: 1;\n  background: black;\n  white-space: nowrap;\n}\n\n.avatar:hover:before {\n  opacity: 1;\n}\n\n.avatar_picture {\n  border-radius: 9999px;\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Notification Settings with React Hook\nDESCRIPTION: Example of using the useUpdateNotificationSettings hook for simple settings updates.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-node-lexical/CHANGELOG.md#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n// A suspense version of this hook is available\nimport { useUpdateNotificationSettings } from \"@liveblocks/react\";\n\nconst updateSettings = useUpdateNotificationSettings();\n\nconst onUnsubscribe = () => {\n  updateSettings({\n    slack: {\n      thread: false,\n    },\n  });\n};\n```\n\n----------------------------------------\n\nTITLE: Styling the collaborative code editor with CSS\nDESCRIPTION: CSS styles for the collaborative code editor, providing a clean layout with proper container dimensions, border radius, and overflow handling.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-code-editor-with-codemirror-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_7\n\nLANGUAGE: css\nCODE:\n```\n.container {\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  border-radius: 12px;\n  background: #fff;\n  width: 100%;\n  height: 100%;\n  color: #111827;\n  overflow: hidden;\n}\n\n.editorHeader {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.editorContainer {\n  position: relative;\n  flex-grow: 1;\n  overflow: auto;\n}\n```\n\n----------------------------------------\n\nTITLE: User Notification Settings Component\nDESCRIPTION: React component for managing user notification preferences using the useNotificationSettings hook.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/what-to-check-before-enabling-a-new-notification-kind.mdx#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useNotificationSettings } from \"@liveblocks/react\";\n\nfunction NotificationSettings() {\n  const [{ isLoading, error, settings }, updateSettings] =\n    useNotificationSettings();\n\n  if (isLoading || error) {\n    return null;\n  }\n\n  return (\n    <form>\n      <input\n        type=\"checkbox\"\n        checked={settings.email?.thread}\n        onChange={(e) =>\n          updateSettings({ email: { thread: e.target.checked } })\n        }\n        id=\"setting-email-thread\"\n      />\n      <label htmlFor=\"setting-email-thread\">\n        Receive thread notifications by email\n      </label>\n    </form>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Styling for the Collaborative Quill Editor\nDESCRIPTION: CSS module styles for the collaborative text editor component, providing proper layout, spacing, and appearance for the Quill editor.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-create-a-collaborative-text-editor-with-quill-yjs-nextjs-and-liveblocks.mdx#2025-04-11_snippet_6\n\nLANGUAGE: css\nCODE:\n```\n.container {\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  border-radius: 12px;\n  background: #fff;\n  width: 100%;\n  height: 100%;\n  color: #111827;\n}\n\n.editorHeader {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.editor {\n  border-radius: inherit;\n  flex-grow: 1;\n  width: 100%;\n  height: 100%;\n  padding: 1rem;\n  outline: none;\n}\n\n.editorContainer {\n  position: relative;\n  height: 100%;\n}\n\n.placeholder {\n  pointer-events: none;\n  position: absolute;\n  inset: 0;\n  opacity: 0.3;\n  padding: 0 1em;\n}\n\n.editor p {\n  margin: 1em 0;\n}\n```\n\n----------------------------------------\n\nTITLE: Converting Local URL to LocalTunnel URL for Webhook Testing\nDESCRIPTION: Example of how to replace your localhost domain with the generated localtunnel domain to create a publicly accessible webhook endpoint URL for testing purposes.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-synchronize-your-liveblocks-yjs-document-data-to-a-vercel-postgres-database.mdx#2025-04-11_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\n# Take your local URL\nhttp://localhost:3000/api/liveblocks-database-sync\n\n# Replace localhost with the generated domain, then copy it\nhttps://my-localtunnel-url.loca.lt/api/liveblocks-database-sync\n```\n\n----------------------------------------\n\nTITLE: Using addToHistory with useMutation and setMyPresence\nDESCRIPTION: This snippet demonstrates how to include presence updates in the undo/redo history when using useMutation and setMyPresence. The addToHistory option works within mutations the same way it does with direct presence updates.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/how-to-use-liveblocks-multiplayer-undo-redo-with-react.mdx#2025-04-11_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useMutation } from \"@liveblocks/react/suspense\";\n\nconst updateSelected = useMutation(({ setMyPresence }, rectangleId) => {\n  setMyPresence({ selected: rectangleId }, { addToHistory: true });\n});\n```\n\n----------------------------------------\n\nTITLE: Using Yjs APIs for ProseMirror State Management\nDESCRIPTION: Alternative approach using Yjs APIs to retrieve and manipulate ProseMirror document state through binary updates and Y.Doc operations.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/guides/pages/getting-prosemirror-state-on-the-server.mdx#2025-04-11_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport * as Y from \"yjs\";\nimport { Liveblocks } from \"@liveblocks/node\";\nimport { yDocToProsemirrorJSON } from \"y-prosemirror\";\n\nconst liveblocks = new Liveblocks({\n  secret: \"{{SECRET_KEY}}\",\n});\n\nexport async function POST() {\n  // Get your Yjs data as a binary update\n  const update = await liveblocks.getYjsDocumentAsBinaryUpdate(\"my-room-name\");\n\n  // Create a Yjs document\n  const yDoc = new Y.Doc();\n\n  // Apply the binary update to `yDoc`\n  Y.applyUpdate(yDoc, new Uint8Array(update));\n\n  // Get ProseMirror state from the default Yjs property it uses, \"prosemirror\"\n  const prosemirrorState = yDocToProsemirrorJSON(yDoc, \"prosemirror\");\n\n  // { type: \"doc\", content: [{ type: \"paragraph\", content: [...] }] }\n  console.log(prosemirrorState);\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Update Notification Settings Hook in React\nDESCRIPTION: Shows how to use the useUpdateNotificationSettings hook for simple notification preference updates. Useful for implementing unsubscribe functionality.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-emails/CHANGELOG.md#2025-04-11_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useUpdateNotificationSettings } from \"@liveblocks/react\";\n\nconst updateSettings = useUpdateNotificationSettings();\n\nconst onUnsubscribe = () => {\n  updateSettings({\n    slack: {\n      thread: false,\n    },\n  });\n};\n```\n\n----------------------------------------\n\nTITLE: Installing Collaborative Text Editor with Liveblocks CLI\nDESCRIPTION: Command to create a new Liveblocks project with the text editor example. This automatically sets up the project and configures the API key through a browser prompt.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-yjs-slate/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-yjs-slate --api-key\n```\n\n----------------------------------------\n\nTITLE: Using Pagination with useInboxNotifications in React\nDESCRIPTION: Example showing the pagination support in useInboxNotifications() hook introduced in version 2.9.0 to incrementally load notifications data.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/tools/create-liveblocks-app/CHANGELOG.md#2025-04-11_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nconst {\n  inboxNotifications,\n  isLoading,\n  error,\n\n  // ✨ New in Liveblocks 2.9\n  fetchMore,\n  isFetchingMore,\n  hasFetchedAll,\n  fetchMoreError,\n} = useInboxNotifications();\n```\n\n----------------------------------------\n\nTITLE: Installing Notion-like AI Editor Project with Liveblocks\nDESCRIPTION: Command to create a new Liveblocks project using the Notion-like AI editor template. This automatically downloads the example and helps set up API keys through browser authentication.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-notion-like-ai-editor/README.md#2025-04-11_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-notion-like-ai-editor --api-key\n```\n\n----------------------------------------\n\nTITLE: Zustand v4 Migration Example\nDESCRIPTION: Code diff showing the required changes when migrating from Zustand v3 to v4, including updated import statements and type annotations for Liveblocks integration.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/packages/liveblocks-emails/CHANGELOG.md#2025-04-11_snippet_22\n\nLANGUAGE: typescript\nCODE:\n```\n-import { middleware } from \"@liveblocks/zustand\";\n+import { liveblocks } from \"@liveblocks/zustand\";\n```\n\nLANGUAGE: typescript\nCODE:\n```\n-import type { LiveblocksState } from \"@liveblocks/zustand\";\n+import type { WithLiveblocks } from \"@liveblocks/zustand\";\n```\n\n----------------------------------------\n\nTITLE: Deploying Live Cursors Example to Vercel\nDESCRIPTION: Command to create and deploy the live cursors example to Vercel. This downloads the example and initiates the Vercel deployment process.\nSOURCE: https://github.com/liveblocks/liveblocks/blob/main/examples/nextjs-live-cursors/README.md#2025-04-11_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx create-liveblocks-app@latest --example nextjs-live-cursors --vercel\n```"
  }
]
[
  {
    "owner": "web-infra-dev",
    "repo": "modern.js",
    "content": "TITLE: Creating a Simple Contact List Component in React\nDESCRIPTION: This TSX code defines a React component that renders a list of contacts with avatars, names, and email addresses. It uses mock data and the DiceBear API for generating avatars.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c01-start.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst getAvatar = (users: Array<{ name: string; email: string }>) =>\n  users.map(user => ({\n    ...user,\n    avatar: `https://api.dicebear.com/7.x/pixel-art/svg?seed=${user.name}`,\n  }));\n\nconst mockData = getAvatar([\n  { name: 'Thomas', email: 'w.kccip@bllmfbgv.dm' },\n  { name: 'Chow', email: 'f.lfqljnlk@ywoefljhc.af' },\n  { name: 'Bradley', email: 'd.wfovsqyo@gpkcjwjgb.fr' },\n  { name: 'Davis', email: '\"t.kqkoj@utlkwnpwk.nu' },\n]);\n\nfunction App() {\n  return (\n    <ul>\n      {mockData.map(({ name, avatar, email }) => (\n        <li key={name}>\n          <img src={avatar} width={60} height={60} /> ---\n          <span>{name}</span> ---\n          <span>{email}</span>\n        </li>\n      ))}\n    </ul>\n  );\n}\n\nexport default App;\n```\n\n----------------------------------------\n\nTITLE: Using Tailwind CSS Utility Classes\nDESCRIPTION: Example React component using Tailwind CSS utility classes for styling\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/css/tailwindcss.mdx#2025-04-21_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nconst Hello = () => (\n  <div className=\"h-12 w-48\">\n    <p className=\"text-xl font-medium text-black\">hello world</p>\n  </div>\n);\n```\n\n----------------------------------------\n\nTITLE: Implementing Server-Side Rendering with createRequestHandler in Modern.js\nDESCRIPTION: This snippet demonstrates how to use createRequestHandler to customize the Server-Side Rendering entry in Modern.js. It defines a handleRequest function that renders the ServerRoot component to a string and returns a Response object.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/ssr/requestHandler.mdx#2025-04-21_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  renderString,\n  createRequestHandler,\n} from '@modern-js/runtime/ssr/server';\n\nconst handleRequest = async (request, ServerRoot, options) => {\n  const body = await renderString(request, <ServerRoot />, options);\n\n  return new Response(body, {\n    headers: {\n      'content-type': 'text/html; charset=utf-8',\n    },\n  });\n};\n\nexport default createRequestHandler(handleRequest);\n```\n\n----------------------------------------\n\nTITLE: Using useLoaderData Hook in a Modern.js Component\nDESCRIPTION: React component that consumes the loader data using the useLoaderData hook. The component renders a list of items based on the data fetched by the loader, enabling server-side rendering of the data-dependent UI.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c05-loader.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useLoaderData } from '@modern-js/runtime/router';\nimport type { LoaderData } from './page.data';\n\nfunction Index() {\n  const { data } = useLoaderData() as LoaderData;\n\n  return (\n    <div className=\"container lg mx-auto\">\n      <Helmet>\n        <title>All</title>\n      </Helmet>\n      <List\n        dataSource={data}\n        renderItem={info => <Item key={info.name} info={info} />}\n      />\n    </div>\n  );\n}\n\nexport default Index;\n```\n\n----------------------------------------\n\nTITLE: Complete Contact Model Implementation\nDESCRIPTION: Full implementation of the contacts model with TypeScript types\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c06-model.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { model } from '@modern-js/runtime/model';\n\ntype State = {\n  items: {\n    avatar: string;\n    name: string;\n    email: string;\n    archived?: boolean;\n  }[];\n  pending: boolean;\n  error: null | Error;\n};\n\nexport default model<State>('contacts').define({\n  state: {\n    items: [],\n    pending: false,\n    error: null,\n  },\n  computed: {\n    archived: ({ items }: State) => items.filter(item => item.archived),\n  },\n  actions: {\n    archive(draft, payload) {\n      const target = draft.items.find(item => item.email === payload)!;\n      if (target) {\n        target.archived = true;\n      }\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Writing a Vitest Unit Test for a React Component in TypeScript\nDESCRIPTION: This snippet demonstrates how to write a unit test for a React component using Vitest and React Testing Library. It renders the component within a Router context and checks for the presence of a specific heading.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/testing/vitest.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { expect, test } from 'vitest';\nimport { render, screen } from '@testing-library/react';\nimport { BrowserRouter as Router } from '@modern-js/runtime/router';\nimport Page from '../routes/page';\n\ntest('Page', () => {\n  render(\n    <Router>\n      <Page />\n    </Router>,\n  );\n  expect(screen.getByRole('heading', { level: 1, name: 'Home' })).toBeDefined();\n});\n```\n\n----------------------------------------\n\nTITLE: Extended BFF Configuration with Interceptors\nDESCRIPTION: Advanced configuration example showing how to configure both cross-project and current project BFF with custom interceptors and axios implementation\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/bff/cross-project.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { configure } from '${package_name}/runtime';\nimport { configure as innerConfigure } from '@modern-js/runtime/bff';\nimport axios from 'axios';\n\nconfigure({\n    setDomain() {\n        return 'https://your-bff-api.com';\n    },\n});\n\ninnerConfigure({\n  async request(...config: Parameters<typeof fetch>) {\n    const [url, params] = config;\n    const res = await axios({\n      url: url as string,\n      method: params?.method as Method,\n      data: params?.body,\n      headers: {\n        'x-header': 'innerConfigure',\n      },\n    });\n    return res.data;\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using createApp with Custom Plugins in TypeScript\nDESCRIPTION: Demonstrates how to use createApp to create a custom entry with custom plugins. It wraps a React component with createApp and applies a custom plugin.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/core/create-app.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createApp } from '@modern-js/runtime';\n\nfunction App() {\n  return <div>app</div>;\n}\n\nexport default createApp({\n  plugins: [customPlugin()],\n})(App);\n```\n\n----------------------------------------\n\nTITLE: Defining a Runtime Plugin in TypeScript\nDESCRIPTION: Demonstrates the structure of a typical Runtime Plugin in Modern.js. It includes the plugin name, setup function, and examples of using API hooks like onBeforeRender and wrapRoot.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/runtime-plugins/api.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { RuntimePluginFuture } from '@modern-js/runtime';\n\nconst myRuntimePlugin = (): RuntimePluginFuture => ({\n  name: 'my-runtime-plugin',\n  setup: (api) => {\n    // Use the api to register hooks\n    api.onBeforeRender((context) => {\n      console.log('Before rendering:', context);\n    });\n\n    api.wrapRoot((App) => {\n      return (props) => (\n        <MyContextProvider>\n          <App {...props} />\n        </MyContextProvider>\n      );\n    });\n  },\n});\n\nexport default myRuntimePlugin;\n```\n\n----------------------------------------\n\nTITLE: Creating a User Layout Component with Deferred Data Loading in React\nDESCRIPTION: This code snippet shows how to implement a user layout component that uses the deferred data loading pattern. It utilizes the Await component from Modern.js router to handle the asynchronous loading of user information.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/data/data-fetch.mdx#2025-04-21_snippet_10\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Await, defer, useLoaderData, Outlet } from '@modern-js/runtime/router';\n\nexport default function UserLayout() {\n  const { userInfo } = useLoaderData() as { userInfo: Promise<UserInfo> };\n  return (\n    <div>\n      <React.Suspense fallback={<p>Loading...</p>}>\n        <Await\n          resolve={userInfo}\n          children={userInfo => (\n            <div>\n              <span>{userInfo.name}</span>\n              <span>{userInfo.age}</span>\n              <Outlet />\n            </div>\n          )}\n        ></Await>\n      </React.Suspense>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Dynamic Route Parameter Access\nDESCRIPTION: Example of accessing dynamic route parameters using useParams hook in a blog component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/routes.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useParams } from '@modern-js/runtime/router';\n\nfunction Blog() {\n  const { id } = useParams();\n  return <div>current blog ID is: {id}</div>;\n}\nexport default Blog;\n```\n\n----------------------------------------\n\nTITLE: Main Page Component Implementation\nDESCRIPTION: Implementation of the main page component using the contact model and data loader\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c06-model.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Helmet } from '@modern-js/runtime/head';\nimport { useModel } from '@modern-js/runtime/model';\nimport { useLoaderData } from '@modern-js/runtime/router';\nimport { List } from 'antd';\nimport { name, internet } from 'faker';\nimport Item from '../components/Item';\nimport contacts from '../models/contacts';\nimport type { LoaderData } from './page.data';\n\nfunction Index() {\n  const { data } = useLoaderData() as LoaderData;\n  const [{ items }, { archive, setItems }] = useModel(contacts);\n  if (items.length === 0) {\n    setItems(data);\n  }\n\n  return (\n    <div className=\"container lg mx-auto\">\n      <Helmet>\n        <title>All</title>\n      </Helmet>\n      <List\n        dataSource={items}\n        renderItem={info => (\n          <Item\n            key={info.name}\n            info={info}\n            onArchive={() => {\n              archive(info.email);\n            }}\n          />\n        )}\n      />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Authentication Context and Utility Components\nDESCRIPTION: A comprehensive authentication module that provides React context for authentication state, a hook for accessing auth functions, and components for displaying auth status and protecting routes. It uses React Router's Navigate for redirections.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/examples/csr-auth.mdx#2025-04-21_snippet_3\n\nLANGUAGE: ts\nCODE:\n```\nimport React from 'react';\nimport { useNavigate, Navigate, useLocation } from '@modern-js/runtime/router';\nimport { fakeAuthProvider } from './fakeAuth';\n\ninterface AuthContextType {\n  user: any;\n  signin: (user: string, callback: VoidFunction) => void;\n  signout: (callback: VoidFunction) => void;\n}\n\nconst AuthContext = React.createContext<AuthContextType>(null!);\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [user, setUser] = React.useState<any>(null);\n\n  const signin = (newUser: string, callback: VoidFunction) =>\n    fakeAuthProvider.signin(() => {\n      setUser(newUser);\n      callback();\n    });\n\n  const signout = (callback: VoidFunction) =>\n    fakeAuthProvider.signout(() => {\n      setUser(null);\n      callback();\n    });\n\n  const value = { user, signin, signout };\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n}\n\nexport function useAuth() {\n  return React.useContext(AuthContext);\n}\n\nexport function AuthStatus() {\n  const auth = useAuth();\n  console.log('auth', auth);\n  const navigate = useNavigate();\n\n  if (!auth.user) {\n    return <p>You are not logged in.</p>;\n  }\n\n  return (\n    <p>\n      Welcome {auth.user}!{' '}\n      <button\n        type=\"button\"\n        onClick={() => {\n          auth.signout(() => navigate('/'));\n        }}\n      >\n        Sign out\n      </button>\n    </p>\n  );\n}\n\nexport function RequireAuth({ children }: { children: JSX.Element }) {\n  const auth = useAuth();\n  const location = useLocation();\n\n  if (!auth.user) {\n    // Redirect them to the /login page, but save the current location they were\n    // trying to go to when they were redirected. This allows us to send them\n    // along to that page after they login, which is a nicer user experience\n    // than dropping them off on the home page.\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\n  }\n\n  return children;\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Cache Configuration in Modern.js\nDESCRIPTION: Basic configuration for enabling SSR rendering cache with maxAge and staleWhileRevalidate options.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/render/ssr-cache.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { CacheOption } from '@modern-js/runtime/server;\n\nexport const cacheOption: CacheOption = {\n  maxAge: 500, // ms\n  staleWhileRevalidate: 1000, // ms\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Vitest for React Testing in TypeScript\nDESCRIPTION: This snippet shows how to configure Vitest for React testing in a Modern.js project. It sets up the test environment to use jsdom and includes the React plugin.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/testing/vitest.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from 'vitest/config'\nimport react from '@vitejs/plugin-react'\n \nexport default defineConfig({\n  plugins: [react()],\n  test: {\n    environment: 'jsdom',\n  },\n})\n```\n\n----------------------------------------\n\nTITLE: Babel Configuration for Jest\nDESCRIPTION: Babel configuration file that sets up presets for modern JavaScript, React, and TypeScript compilation in Jest tests.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/testing/jest.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nmodule.exports = {\n  presets: [\n    ['@babel/preset-env', { targets: { node: 'current' } }],\n    ['@babel/preset-react', { runtime: 'automatic' }],\n    '@babel/preset-typescript',\n  ],\n};\n```\n\n----------------------------------------\n\nTITLE: Creating a Modern.js Project in Bash\nDESCRIPTION: Commands to create a new Modern.js project using npx and @modern-js/create. It shows how to create a project in an existing directory or a new directory.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/get-started/quick-start.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nmkdir myapp && cd myapp\nnpx @modern-js/create@latest\n```\n\nLANGUAGE: bash\nCODE:\n```\nnpx @modern-js/create@latest myapp\n```\n\n----------------------------------------\n\nTITLE: Importing Image Assets in TypeScript React Component\nDESCRIPTION: Demonstrates how to import an image asset from a relative path and use it in a React component. This snippet shows the basic syntax for importing static assets in JavaScript/TypeScript files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/static-assets.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// Import the logo.png image in the static directory\nimport logo from './static/logo.png';\n\nexport default = () => <img src={logo} />;\n```\n\n----------------------------------------\n\nTITLE: Configuring Tailwind CSS in Modern.js Module (Current Usage)\nDESCRIPTION: Current recommended way to configure Tailwind CSS in modern.config.ts.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/best-practices/use-tailwindcss.mdx#2025-04-21_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  style: {\n    tailwindcss: tailwindConfig,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Creating a Styled Div Component with Static Color in JavaScript\nDESCRIPTION: This snippet demonstrates how to create a div component with a red font color using styled-components in Modern.js. It imports the styled API from @modern-js/runtime/styled and creates a RedDiv component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/css/css-in-js.mdx#2025-04-21_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport styled from '@modern-js/runtime/styled';\n\nconst RedDiv = styled.div`\n  color: red;\n`;\n```\n\n----------------------------------------\n\nTITLE: Creating a Layout Component with Outlet in Modern.js\nDESCRIPTION: Example of a layout component using React Router's Outlet component to represent where child routes will be rendered within the layout.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/routes.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Link, Outlet, useLoaderData } from '@modern-js/runtime/router';\n\nexport default () => {\n  return (\n    <>\n      <Outlet></Outlet>\n    </>\n  );\n};\n```\n\n----------------------------------------\n\nTITLE: Defining Data Loader in TypeScript\nDESCRIPTION: Example of exporting a Data Loader function in a .data.ts file to fetch user profile data.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/data/data-fetch.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport type ProfileData = {\n  /*  some types */\n};\n\nexport const loader = async (): Promise<ProfileData> => {\n  const res = await fetch('https://api/user/profile');\n  return await res.json();\n};\n```\n\n----------------------------------------\n\nTITLE: Creating and using styled components in React\nDESCRIPTION: This example demonstrates how to create styled components using the styled function, including a base Button component and a derived TomatoButton component. It also shows how to use these components in a React functional component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/utility/css-in-js.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport styled from '@modern-js/runtime/styled';\n\nconst Button = styled.button`\n  background: palevioletred;\n  border-radius: 3px;\n  border: none;\n  color: white;\n`;\n\nconst TomatoButton = styled(Button)`\n  background: tomato;\n`;\n\nfunction ButtonExample() {\n  return (\n    <>\n      <Button>I'm purple.</Button>\n      <br />\n      <TomatoButton>I'm red.</TomatoButton>\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Defining ChunkSplit Types in TypeScript for Modern.js\nDESCRIPTION: This TypeScript code defines the types for the ChunkSplit configuration in Modern.js. It includes various strategies such as split-by-module, split-by-experience, all-in-one, single-vendor, split-by-size, and custom. It also defines types for force splitting and base chunk split options.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/performance/chunk-split.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype ForceSplitting = RegExp[] | Record<string, RegExp>;\n\ninterface BaseChunkSplit {\n  strategy?:\n    | 'split-by-module'\n    | 'split-by-experience'\n    | 'all-in-one'\n    | 'single-vendor';\n  override?: SplitChunks;\n  forceSplitting?: ForceSplitting;\n}\n\ninterface SplitBySize {\n  strategy?: 'split-by-size';\n  minSize?: number;\n  maxSize?: number;\n  override?: SplitChunks;\n  forceSplitting?: ForceSplitting;\n}\n\ninterface SplitCustom {\n  strategy?: 'custom';\n  splitChunks?: SplitChunks;\n  forceSplitting?: ForceSplitting;\n}\n\nexport type ChunkSplit = BaseChunkSplit | SplitBySize | SplitCustom;\n```\n\n----------------------------------------\n\nTITLE: Basic Single Entry Project Structure\nDESCRIPTION: Shows the default file structure for a single entry Modern.js project including source files and configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/concept/entries.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n.\n├── src\n│   └── routes\n│       ├── index.css\n│       ├── layout.tsx\n│       └── page.tsx\n├── package.json\n├── modern.config.ts\n└── tsconfig.json\n```\n\n----------------------------------------\n\nTITLE: Processing Request Data in Action Function in Modern.js\nDESCRIPTION: This snippet demonstrates how to process request data within an action function. It shows retrieving JSON data from the request and updating a user profile.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/data/data-write.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { ActionFunctionArgs } from '@modern-js/runtime/router';\n\nexport const action = async ({ request }: ActionFunctionArgs) => {\n  const newUser = await request.json();\n  return updateUser(newUser);\n};\n```\n\n----------------------------------------\n\nTITLE: Using onAfterCreateCompiler Hook in Modern.js\nDESCRIPTION: This hook allows executing custom logic after the Webpack or Rspack compiler instance is created. It can be used to access or modify the compiler instance.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/cli-plugins/api.mdx#2025-04-21_snippet_22\n\nLANGUAGE: typescript\nCODE:\n```\napi.onAfterCreateCompiler(() => {\n    // Can get the compiler instance\n});\n```\n\n----------------------------------------\n\nTITLE: Data Loader Implementation for SSR\nDESCRIPTION: Example of implementing a basic data loader function for server-side data fetching.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/render/ssr.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport const loader = () => {\n  return {\n    message: 'Hello World',\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling SSR Configuration in Modern.js\nDESCRIPTION: Configuration snippet showing how to enable SSR in Modern.js by setting server.ssr to true in the config file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/render/ssr.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig({\n  server: {\n    ssr: true,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Example Implementation of useLoader in a React Component\nDESCRIPTION: Demonstrates how to use useLoader in a React component to fetch data asynchronously, including handling success/error callbacks and providing initial data.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/core/use-loader.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nfunction Container() {\n  const { data, error, loading } = useLoader(\n    async (context, params) => {\n      console.log(params) // nicole\n      return fetch(user);\n    },\n    {\n      onSuccess: data => {\n        console.log('I did success:(',  data);\n      },\n      onError: error => {\n        console.log('I met error:)',  error);\n      },\n      initialData: { name: 'nicole', gender: 'female' },\n      params: 'nicole'\n    }\n  );\n\n  return ...;\n}\n```\n\n----------------------------------------\n\nTITLE: Using Loader Data in React Component\nDESCRIPTION: React component example showing how to access and use data from the loader function using useLoaderData hook.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/render/ssr.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useLoaderData } from '@modern-js/runtime/router';\nexport default () => {\n  const data = useLoaderData();\n  return <div>{data.message}</div>;\n};\n```\n\n----------------------------------------\n\nTITLE: Using useNavigate Hook Example in Modern.js Router\nDESCRIPTION: Example of how to use the useNavigate hook in a React component. The example shows creating a button that navigates to the home route when clicked.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/router/router.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useNavigate } from '@modern-js/runtime/router';\n\nexport function HomeButton() {\n  let navigate = useNavigate();\n\n  function handleClick() {\n    navigate('/home');\n  }\n\n  return (\n    <button type=\"button\" onClick={handleClick}>\n      Go home\n    </button>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Executing Build with Rsdoctor Enabled\nDESCRIPTION: This command demonstrates how to run a build with Rsdoctor enabled by setting the RSDOCTOR environment variable to true before executing the build command.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/debug/rsdoctor.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nRSDOCTOR=true npm run build\n```\n\n----------------------------------------\n\nTITLE: Type Definition for Connect API in TypeScript\nDESCRIPTION: Type definitions for the Connect API showing the function signatures and parameter types for connecting models to components.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/model/connect.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype SelectStateToProps = (\n  ...modelStates: State[],\n  ownProps?: any,\n) => PlainObject;\ntype SelectActionsToProps = (\n  ...modelActions: Actions[],\n  ownProps?: any,\n) => PlainObject;\n\nfunction connect(models: Model, options?: ConnectOptions);\nfunction connect(\n  models: [...Model[], SelectStateToProps?, SelectActionsToProps?],\n  options?: ConnectOptions,\n);\n```\n\n----------------------------------------\n\nTITLE: Basic CSS Module Definition\nDESCRIPTION: Defines a basic CSS Module with an error style class for a button component\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/css/css-modules.mdx#2025-04-21_snippet_0\n\nLANGUAGE: css\nCODE:\n```\n/* button.module.css */\n.error {\n  background: red;\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Reusable Contacts Container Component in Modern.js\nDESCRIPTION: A reusable container component that encapsulates the common logic for displaying contacts, whether they are all contacts or archived contacts. It uses the contacts model and handles rendering and archiving.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/tutorials/first-app/c07-container.mdx#2025-04-21_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Helmet } from '@modern-js/runtime/head';\nimport { useModel } from '@modern-js/runtime/model';\nimport { List } from 'antd';\nimport Item from '../components/Item';\nimport contacts from '../models/contacts';\n\nfunction Contacts({\n  title,\n  source,\n}: {\n  title: string;\n  source: 'items' | 'archived';\n}) {\n  const [state, { archive }] = useModel(contacts);\n\n  return (\n    <div className=\"container lg mx-auto\">\n      <Helmet>\n        <title>{title}</title>\n      </Helmet>\n      <List\n        dataSource={state[source]}\n        renderItem={info => (\n          <Item\n            key={info.name}\n            info={info}\n            onArchive={() => {\n              archive(info.email);\n            }}\n          />\n        )}\n      />\n    </div>\n  );\n}\n\nexport default Contacts;\n```\n\n----------------------------------------\n\nTITLE: Defining Function-Type Derived State in TypeScript\nDESCRIPTION: This snippet shows how to define a function-type derived state 'visibleTodos'. It returns a function that takes a filter parameter and filters todo items accordingly.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/computed-state.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst todoModel = model('todo').define({\n  state: {\n    items: [],\n  },\n  computed: {\n    visibleTodos: state => filter => {\n      switch (filter) {\n        case 'ALL':\n          return state.items;\n        case 'COMPLETED':\n          return todos.filter(t => t.completed);\n        case 'ACTIVE':\n          return todos.filter(t => !t.completed);\n        default:\n          return [];\n      }\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: TypeScript Function Signature for useModel Hook\nDESCRIPTION: Type definition for the useModel hook showing two function overloads. The hook accepts models, stateSelector, and actionSelector as parameters and returns a tuple of state, actions, and subscribe function.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/model/use-model.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction useModel(\n  models: Models[],\n  stateSelector?: StateSelector,\n  actionSelector?: ActionSelector,\n): [state, actions, subscribe];\nfunction useModel(\n  ...models: Models[],\n  stateSelector?: (...args: State[]) => any,\n  actionSelector?: (...args: Actions[]) => any,\n): [state, actions, subscribe];\n```\n\n----------------------------------------\n\nTITLE: Data Loader Implementation\nDESCRIPTION: Implementation of data loader for contact information with TypeScript types\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c06-model.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nexport type LoaderData = {\n  code: number;\n  data: {\n    name: string;\n    avatar: string;\n    email: string;\n  }[];\n};\n\nexport const loader = async (): Promise<LoaderData> => {\n  const data = new Array(20).fill(0).map(() => {\n    const firstName = name.firstName();\n    return {\n      name: firstName,\n      avatar: `https://api.dicebear.com/7.x/pixel-art/svg?seed=${firstName}`,\n      email: internet.email(),\n      archived: false,\n    };\n  });\n\n  return {\n    code: 200,\n    data,\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Basic Usage Example of useModel Hook\nDESCRIPTION: Demonstrates basic usage of useModel hook with multiple models, showing how to access state and actions from different models in a React component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/model/use-model.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport todoModel from 'models/todo';\nimport filterModel from 'models/filter';\n\nfunction Test(props) {\n  const [state, actions] = useModel([todoModel, filterModel]);\n  actions.add(); // call todoModel add action\n  actions.setVisibleStatus(); // call filterModel filterModel action\n\n  state.items; // get todoModel state items\n  state.visibleStatus; // get filterModel state visibleStatus\n}\n```\n\n----------------------------------------\n\nTITLE: Route-Specific Cache Configuration\nDESCRIPTION: Configuration example showing different caching strategies for different routes using a mapping approach.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/render/ssr-cache.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { CacheOption } from '@modern-js/runtime/server;\n\nexport const cacheOption: CacheOption = {\n  '/home': {\n    maxAge: 50,\n    staleWhileRevalidate: 100,\n  },\n  '/about': {\n    maxAge: 1000 * 60 * 60 * 24, // one day\n    staleWhileRevalidate: 1000 * 60 * 60 * 24 * 2 // two days\n  },\n  '*': (req) => { // If no above route matches, this applies\n    const { url, headers, ... } = req;\n    const key = computedKey(url, headers, ...);\n\n    return {\n      maxAge: 500,\n      staleWhileRevalidate: 1000,\n      customKey: key,\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Consuming BFF APIs in React Components\nDESCRIPTION: Example of how to import and use a BFF API function from another project's package in a React component. The example shows fetching data on component mount.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/bff/cross-project.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useState, useEffect } from 'react';\nimport { get as hello } from '${package_name}/api/hello';\n\nexport default () => {\n  const [text, setText] = useState('');\n\n  useEffect(() => {\n    hello().then(setText);\n  }, []);\n  return <div>{text}</div>;\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Tailwind CSS with Config File\nDESCRIPTION: TypeScript configuration file for Tailwind CSS settings\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/css/tailwindcss.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { Config } from 'tailwindcss';\n\nexport default {\n  content: ['./src/**/*.{js,jsx,ts,tsx}'],\n} as Config;\n```\n\n----------------------------------------\n\nTITLE: Importing Helmet Component in Modern.js\nDESCRIPTION: Basic syntax for importing the Helmet component from Modern.js runtime and using it in a React component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/utility/head.mdx#2025-04-21_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Helmet } from '@modern-js/runtime/head';\n\nexport default () => <Helmet>...</Helmet>;\n```\n\n----------------------------------------\n\nTITLE: Creating Error Boundary Component in Modern.js\nDESCRIPTION: Shows how to create an ErrorBoundary component in Modern.js to handle and display route-specific errors using the useRouteError hook.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/routes.mdx#2025-04-21_snippet_10\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useRouteError } from '@modern-js/runtime/router';\n\nconst ErrorBoundary = () => {\n  const error = useRouteError();\n  return (\n    <div>\n      <h1>{error.status}</h1>\n      <h2>{error.message}</h2>\n    </div>\n  );\n};\nexport default ErrorBoundary;\n```\n\n----------------------------------------\n\nTITLE: Customizing Response in Data Loader\nDESCRIPTION: Shows how to customize the Response object returned by a Data Loader, including status and headers.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/data/data-fetch.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nconst loader = async (): Promise<ProfileData> => {\n  const data = { message: 'hello world' };\n  return new Response(JSON.stringify(data), {\n    status: 200,\n    headers: {\n      'Content-Type': 'application/json; utf-8',\n    },\n  });\n};\n```\n\n----------------------------------------\n\nTITLE: Using useLoaderData in React Component\nDESCRIPTION: Demonstrates how to use the useLoaderData hook to access data fetched by the Data Loader in a React component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/data/data-fetch.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useLoaderData } from '@modern-js/runtime/router';\nimport type { ProfileData } from './page.data.ts';\n\nexport default function UserPage() {\n  const profileData = useLoaderData() as ProfileData;\n  return <div>{profileData}</div>;\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Jest Settings in TypeScript\nDESCRIPTION: Basic Jest configuration file that sets up the test environment, coverage provider, and transformation settings for JavaScript, TypeScript, and React components.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/testing/jest.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { Config } from 'jest';\n\nconst config: Config = {\n  coverageProvider: 'babel',\n  setupFilesAfterEnv: ['<rootDir>/jest.setup.ts'],\n  testEnvironment: 'jsdom',\n  transform: {\n    '^.+\\\\.(js|jsx|ts|tsx)$': 'babel-jest',\n  },\n  transformIgnorePatterns: [],\n};\n\nexport default config;\n```\n\n----------------------------------------\n\nTITLE: Implementing Sync Hooks in Modern.js Plugins\nDESCRIPTION: This snippet illustrates the creation and usage of synchronous hooks in Modern.js plugins using createSyncHook. It shows how to define, register, and use sync hooks for modifying data like routes synchronously.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/plugin-system.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n// Define Hooks\nimport { createSyncHook } from '@modern-js/plugin-v2';\n\ntype RouteObject = {/** TODO **/};\nconst modifyRoutes = createSyncHook<(routes: RouteObject[]) => RouteObject[]>();\n\n// Register Hooks in the plugin\nconst myPlugin = () => ({\n  name: \"my-plugin\",\n  registryHooks: {\n    modifyRoutes,\n  },\n  setup: (api) => {\n    api.onPrepare(async () => {\n      const routes = {};\n      // Use registered Hooks in the plugin\n      const hooks = api.getHooks();\n      const routesResult = hooks.modifyRoutes.call(routes);\n    });\n  }\n});\n\n// Other plugins use Hooks\nconst myPlugin2 = () => ({\n  name: \"my-plugin\",\n  setup: (api) => {\n    api.modifyRoutes(async (routes) => {\n      // Modify routes\n      return routes;\n    });\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Handling File Changes in Development Mode in Modern.js Plugin\nDESCRIPTION: This example shows how to use the onFileChanged hook to add custom logic when watched files change during development. The hook provides information about the changed file, event type, and whether it's a framework internal file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/plugin/cli-plugins/api.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\napi.onFileChanged(({ filename, eventType }) => {\n  if (eventType === 'change' && filename.endsWith('.ts')) {\n    console.log('TypeScript 文件发生变化，可能需要重新编译...');\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Complete Example with createRoot and render in Modern.js\nDESCRIPTION: Demonstrates using render with createRoot, including an async operation before rendering. This pattern allows for initialization tasks before mounting the React application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/core/render.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { createRoot } from '@modern-js/runtime/react';\nimport { render } from '@modern-js/runtime/browser';\n\nconst ModernRoot = createRoot();\n\nasync function beforeRender() {\n   // todo\n}\n\nbeforeRender().then(() => {\n  render(<ModernRoot />);\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Modern.js with TypeScript\nDESCRIPTION: Example configuration file (modern.config.ts) for a Modern.js project. It demonstrates how to enable SSR and choose between Rspack and Webpack as the bundler.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/get-started/quick-start.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { appTools, defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig({\n  runtime: {\n    router: true,\n  },\n  server: {\n    ssr: true,\n  },\n  plugins: [appTools({\n      bundler: 'rspack', // Set to 'webpack' to enable webpack\n  }),],\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing wrapRoot Hook in TypeScript\nDESCRIPTION: Demonstrates how to use the wrapRoot hook to wrap the application's root component with custom providers or layout components. It's important to pass props to the original App component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/runtime-plugins/api.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\napi.wrapRoot((App) => {\n  const AppWrapper = (props) => {\n    return (\n      <MyGlobalProvider>\n        <Layout>\n          <App {...props} /> {/* Make sure to pass props */}\n        </Layout>\n      </MyGlobalProvider>\n    );\n  };\n  return AppWrapper;\n});\n```\n\n----------------------------------------\n\nTITLE: Creating a Data Loader Function in Modern.js\nDESCRIPTION: Implementation of a data loader function that generates mock user data using faker. The loader returns a promise with an array of user objects containing name, avatar, and email information.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c05-loader.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { name, internet } from 'faker';\n\nexport type LoaderData = {\n  code: number;\n  data: {\n    name: string;\n    avatar: string;\n    email: string;\n  }[];\n};\n\nexport const loader = async (): Promise<LoaderData> => {\n  const data = new Array(20).fill(0).map(() => {\n    const firstName = name.firstName();\n    return {\n      name: firstName,\n      avatar: `https://api.dicebear.com/7.x/pixel-art/svg?seed=${firstName}`,\n      email: internet.email(),\n    };\n  });\n\n  return {\n    code: 200,\n    data,\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Page Titles with titleByEntries in Modern.js\nDESCRIPTION: Example configuration showing how to set different HTML titles for multiple pages using titleByEntries. The configuration sets 'ByteDance' as default title and 'TikTok' specifically for the 'foo' entry. Note that this feature is deprecated in favor of using the function syntax of html.title.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/html/title-by-entries.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    title: 'ByteDance',\n    titleByEntries: {\n      foo: 'TikTok',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using a Todo Model in a React Component with TypeScript\nDESCRIPTION: This snippet shows how to use the previously defined todo model in a React component. It demonstrates calling the load effect and rendering the todo items based on the model's state.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/model/manage-effects.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nfunction Todo() {\n  const [state, actions] = useModel(todoModel);\n\n  useEffect(() => {\n    // 调用 effects 函数\n    actions.load();\n  }, []);\n\n  if (state.loading) {\n    return <div>loading....</div>;\n  }\n\n  return (\n    <div>\n      <div>\n        {state.items.map((item, index) => (\n          <div key={index}>{item}</div>\n        ))}\n      </div>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Data Loader for Layout Component in TypeScript\nDESCRIPTION: Defines a data loader function for the layout component that generates mock contact data. The loader returns a Promise with contact information including names, avatars, and emails generated using the faker library.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c07-container.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport type LoaderData = {\n  code: number;\n  data: {\n    name: string;\n    avatar: string;\n    email: string;\n  }[];\n};\n\nexport const loader = async (): Promise<LoaderData> => {\n  const data = new Array(20).fill(0).map(() => {\n    const firstName = name.firstName();\n    return {\n      name: firstName,\n      avatar: `https://api.dicebear.com/7.x/pixel-art/svg?seed=${firstName}`,\n      email: internet.email(),\n    };\n  });\n\n  return {\n    code: 200,\n    data,\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing Deferred Loading with Modern.js Router in TypeScript\nDESCRIPTION: This snippet demonstrates how to create a loader function that defers the loading of user information using the Modern.js router. It uses a Promise to simulate an asynchronous data fetch with a 1-second delay.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/data/data-fetch.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defer } from '@modern-js/runtime/router';\n\nexport const loader = () =>\n  defer({\n    userInfo: new Promise(resolve => {\n      setTimeout(() => {\n        resolve({\n          age: 1,\n          name: 'user layout',\n        });\n      }, 1000);\n    }),\n  });\n```\n\n----------------------------------------\n\nTITLE: Wrapping Root Component with Reduck Provider in React\nDESCRIPTION: This snippet demonstrates how to manually wrap the root component with the Reduck Provider when using Reduck independently. It ensures that the Reduck global store is injected into the application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/model/use-out-of-modernjs.mdx#2025-04-21_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n// 根组件\nconst Root = () => {\n  return (\n    <Provider>\n      {/* 应用入口组件 */}\n      <App />\n    </Provider>\n  );\n};\n```\n\n----------------------------------------\n\nTITLE: Using useFetcher Hook for Data Action in Modern.js React Component\nDESCRIPTION: This snippet shows how to use the useFetcher hook in a React component to trigger a Data Action. It includes loading user data and implementing an edit function.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/data/data-write.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n  useFetcher,\n  useLoaderData,\n  useParams,\n  Outlet\n} from '@modern-js/runtime/router';\n\nexport default () => {\n  const userInfo = useLoaderData();\n  const { submit } = useFetcher();\n  const editUser = () => {\n    const newUser = {\n      name: 'Modern.js'\n    }\n    return submit(newUser, {\n      method: 'post',\n      encType: 'application/json',\n    })\n  }\n  return (\n    <div>\n      <button onClick={editUser}>edit user</button>\n      <div className=\"user-profile\">\n        {userInfo}\n      </div>\n      <Outlet context={userInfo}></Outlet>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Route Parameters in Data Loader\nDESCRIPTION: Shows how to access dynamic route parameters in a Data Loader function using the LoaderFunctionArgs type.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/data/data-fetch.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { LoaderFunctionArgs } from '@modern-js/runtime/router';\n\n// When visiting /user/123, the function parameter is `{ params: { id: '123' } }`\nexport const loader = async ({ params }: LoaderFunctionArgs) => {\n  const { id } = params;\n  const res = await fetch(`https://api/user/${id}`);\n  return res.json();\n};\n```\n\n----------------------------------------\n\nTITLE: Registering Modern.js App Tools in TypeScript\nDESCRIPTION: Shows how to register the appTools plugin in the Modern.js configuration file. This is necessary as @modern-js/app-tools is implemented as a plugin in the Modern.js system.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/get-started/quick-start.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { appTools, defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig({\n  plugins: [appTools()],\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Route Redirection in Component\nDESCRIPTION: Example of redirecting to another route based on data conditions using the useNavigate hook within a component's useEffect.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/routes.mdx#2025-04-21_snippet_10\n\nLANGUAGE: ts\nCODE:\n```\nimport { useNavigate } from '@modern-js/runtime/router';\nimport { useEffect } from 'react';\n\nexport default () => {\n  const navigate = useNavigate();\n  useEffect(() => {\n    getUser().then(user => {\n      if (!user) {\n        navigate('/login');\n      }\n    });\n  });\n\n  return <div>Hello World</div>;\n};\n```\n\n----------------------------------------\n\nTITLE: Basic Usage Example of useModel with Multiple Models\nDESCRIPTION: Example showing how to use useModel with multiple models (todoModel and filterModel), accessing their combined state and actions without using selectors.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/model/use-model.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport todoModel from 'models/todo';\nimport filterModel from 'models/filter';\n\nfunction Test(props) {\n  const [state, actions] = useModel([todoModel, filterModel]);\n  actions.add(); // 调用 todoModel add action\n  actions.setVisibleStatus(); // 调用 filterModel filterModel action\n\n  state.items; // 获取 todoModel state items\n  state.visibleStatus; // 获取 filterModel state visibleStatus\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Modern.js for SSR and Routing\nDESCRIPTION: This TypeScript configuration file for Modern.js enables server-side rendering (SSR), routing, and state management for the application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c01-start.mdx#2025-04-21_snippet_3\n\nLANGUAGE: ts\nCODE:\n```\nimport { appTools, defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig({\n  runtime: {\n    router: true,\n    state: true,\n  },\n  server: {\n    ssr: true,\n  },\n  plugins: [appTools()],\n});\n```\n\n----------------------------------------\n\nTITLE: Setting Default SourceMap Configuration in TypeScript\nDESCRIPTION: Defines default source map settings where JavaScript source maps are enabled in development mode with 'cheap-module-source-map' and disabled in production. CSS source maps are disabled by default.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/source-map.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst defaultSourceMap = {\n  js: isDev ? 'cheap-module-source-map' : false,\n  css: false,\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing React Context API with TypeScript\nDESCRIPTION: Demonstrates how to create and use React Context API with TypeScript for state management across components, implementing a theme context provider.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/convention-routing-motivation.mdx#2025-04-21_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport React, { createContext, useState, useContext, ReactNode } from 'react';\n\ntype Theme = 'light' | 'dark';\n\ninterface ThemeContextType {\n  theme: Theme;\n  toggleTheme: () => void;\n}\n\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined);\n\ninterface ThemeProviderProps {\n  children: ReactNode;\n  initialTheme?: Theme;\n}\n\nexport const ThemeProvider: React.FC<ThemeProviderProps> = ({ \n  children, \n  initialTheme = 'light' \n}) => {\n  const [theme, setTheme] = useState<Theme>(initialTheme);\n\n  const toggleTheme = () => {\n    setTheme(prevTheme => prevTheme === 'light' ? 'dark' : 'light');\n  };\n\n  return (\n    <ThemeContext.Provider value={{ theme, toggleTheme }}>\n      {children}\n    </ThemeContext.Provider>\n  );\n};\n\nexport const useTheme = (): ThemeContextType => {\n  const context = useContext(ThemeContext);\n  if (context === undefined) {\n    throw new Error('useTheme must be used within a ThemeProvider');\n  }\n  return context;\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing Request Tracking Middleware in Modern.js\nDESCRIPTION: Example middleware for tracking request processing time. It measures the duration between request start and response finish by adding an event listener to the 'finish' event of the response object.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/web-server/middleware.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport const Middleware = () => async (ctx, next) => {\n  const start = Date.now();\n  ctx.source.res.once('finish', () => {\n    console.log(Date.now() - start);\n  });\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling Streaming Rendering in Modern.js Configuration\nDESCRIPTION: This snippet shows how to enable streaming rendering in Modern.js by configuring the SSR mode in the modern.config.ts file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/render/streaming-ssr.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig({\n  server: {\n    ssr: {\n      mode: 'stream',\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: CSS Modules Usage in React Component\nDESCRIPTION: Illustrates how to use CSS Modules in a React component within Modern.js Module. The example imports styles from a CSS Module file and applies them to a div element.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/best-practices/components.mdx#2025-04-21_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nimport style from './index.module.css';\n\nexport default () => {\n  return <div className={style.btn}>hello world</div>;\n};\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Behavior Before Bootstrap in Modern.js\nDESCRIPTION: This snippet demonstrates how to export a function in src/index.js to add custom behavior before bootstrapping the Modern.js application. It uses the bootstrap function from @modern-js/runtime.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/hooks/src/index_.mdx#2025-04-21_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport { bootstrap } from '@modern-js/runtime';\n\nexport default App => {\n  // do something before bootstrap...\n  bootstrap(App, 'root');\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing Todo Model with Side Effects in TypeScript\nDESCRIPTION: Demonstrates how to create a todo model with loading states and side effects for fetching data. Uses Promise-based effects with pending, fulfilled, and rejected action handlers.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/manage-effects.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst todoModel = model('todo').define({\n  state: {\n    items: [],\n    loading: false,\n    error: null,\n  },\n  actions: {\n    load: {\n      pending(state) {\n        state.loading = true;\n      },\n      fulfilled(state, items) {\n        state.items = items;\n        state.loading = false;\n      },\n      rejected(state, error) {\n        state.error = error;\n        state.loading = false;\n      },\n    },\n  },\n  effects: {\n    // Promise effects\n    async load() {\n      return new Promise(resolve => {\n        setTimeout(() => resolve(['Learn Modern.js']), 2000);\n      });\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Complete Example of Using render Function in TSX\nDESCRIPTION: This example demonstrates a complete usage of the render function, including importing createRoot, performing an async operation before rendering, and then rendering the ModernRoot component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/core/render.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { createRoot } from '@modern-js/runtime/react';\nimport { render } from '@modern-js/runtime/browser';\n\nconst ModernRoot = createRoot();\n\nasync function beforeRender() {\n   // todo\n}\n\nbeforeRender().then(() => {\n  render(<ModernRoot />);\n});\n```\n\n----------------------------------------\n\nTITLE: Defining Step and Counter Models in TypeScript\nDESCRIPTION: Demonstrates how to create two interconnected Models: stepModel for managing step frequency and counterModel for managing a counter value. The counterModel uses and subscribes to the stepModel's state.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/model-communicate.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { model } from '@modern-js/runtime/model';\n\nconst stepModel = model('step').define({\n  state: 1,\n});\n\nconst counterModel = model('count').define((context, { use, onMount }) => {\n  const [, , subscribeStep] = use(stepModel);\n\n  onMount(() => {\n    return subscribeStep(() => {\n      console.log(\n        `Subscribe in counterModel: stepModel change to ${use(stepModel)[0]}`,\n      );\n    });\n  });\n\n  return {\n    state: {\n      value: 1,\n    },\n    actions: {\n      add(state) {\n        const step = use(stepModel)[0];\n        state.value += step;\n      },\n    },\n  };\n});\n\nexport { stepModel, counterModel };\n```\n\n----------------------------------------\n\nTITLE: Configuring Local Dev Server Proxy in Modern.js\nDESCRIPTION: Demonstrates how to set up a local development proxy that forwards requests from '/go/api' to an external target URL. Uses the devServer configuration in Modern.js to enable proxy middleware with origin changing capability.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/debug/proxy.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig({\n  tools: {\n    devServer: {\n      proxy: {\n        '/go/api': {\n          target: 'http://www.example.com/',\n          changeOrigin: true,\n        },\n      },\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Accessing Request Context with Koa.js in Modern.js BFF\nDESCRIPTION: This snippet shows how to access the request context in a BFF function using Koa.js. It uses the useContext hook from '@modern-js/runtime/koa' to get the context object and log the accessed URL.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/bff/frameworks.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useContext } from '@modern-js/runtime/koa'\nexport const get = async () => {\n  const ctx = useContext();\n  console.info(`access url: ${req.url}`);\n  return 'Hello Modern.js'\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing a Data Injection Plugin in Modern.js\nDESCRIPTION: This snippet defines a runtime plugin that injects global data into the application context. It demonstrates how to use the onBeforeRender hook to add custom data that can be accessed by components.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/render/before-render.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { RuntimePluginFuture } from '@modern-js/runtime';\n\nconst dataInjectionPlugin = (): RuntimePluginFuture => ({\n  name: 'data-injection-plugin',\n  setup: api => {\n    api.onBeforeRender(context => {\n      // Inject data into the context\n      context.message = 'Hello World';\n    });\n  },\n});\n\nexport default dataInjectionPlugin;\n```\n\n----------------------------------------\n\nTITLE: Using useParams Hook Example in Modern.js Router\nDESCRIPTION: Example of how to use the useParams hook to access URL parameters in a React component. The example shows a BlogPost component that displays the slug parameter from the URL.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/router/router.mdx#2025-04-21_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Routes, Route, useParams } from '@modern-js/runtime/router';\n\nfunction BlogPost() {\n  const { slug } = useParams();\n  return <div>Now showing post {slug}</div>;\n}\n\nfunction App() {\n  return (\n    <Routes>\n      <Route path=\"/\" element={<div>home</div>} />\n      <Route path=\"/blog/:slug\" element={<BlogPost />} />\n    </Routes>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of Modern.js Bootstrap API\nDESCRIPTION: A simple example showing how to use the bootstrap function to mount a React application with React DOM.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/core/bootstrap.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport ReactDOM from 'react-dom/client';\nimport { bootstrap } from '@modern-js/runtime';\n\nbootstrap(App, 'root', undefined, ReactDOM);\n```\n\n----------------------------------------\n\nTITLE: Basic Page Component Implementation in TSX\nDESCRIPTION: Demonstrates the basic implementation of a page component in Modern.js routing system using TSX.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/routes.mdx#2025-04-21_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nexport default () => {\n  return <div>Hello world</div>\n};\n```\n\n----------------------------------------\n\nTITLE: Complete Example of Modern.js Bootstrap with CreateApp\nDESCRIPTION: A full example demonstrating how to use bootstrap with createApp for wrapping the application with custom plugins.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/core/bootstrap.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport ReactDOM from 'react-dom/client';\nimport { createApp, bootstrap } from '@modern-js/runtime';\n\nfunction App() {\n  return <div>Hello Modern.js</div>;\n}\n\nconst WrappedApp = createApp({\n  // customized plugin\n  plugins: [customPlugin()],\n})(App);\n\nbootstrap(WrappedApp, 'root', undefined, ReactDOM);\n```\n\n----------------------------------------\n\nTITLE: Basic Model State Definition\nDESCRIPTION: Simple state definition for a contact list model\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c06-model.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst state = {\n  items: [],\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing a Modern.js Module Plugin in TypeScript\nDESCRIPTION: Shows how to create a basic plugin for Modern.js Module. The plugin logs a message during setup and after the build process. It demonstrates the use of CliPlugin and ModuleTools types, and the plugin's structure with name and setup function.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/plugins/guide/getting-started.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { CliPlugin, ModuleTools } from '@modern-js/module-tools';\n\nexport const ExamplePlugin = (): CliPlugin<ModuleTools> => {\n  return {\n    name: 'example',\n    setup() {\n      console.info('this is example plugin');\n      return {\n        // use hooks\n        afterBuild() {\n          console.info('build over');\n        },\n      };\n    },\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Importing useLoader from Modern.js Runtime\nDESCRIPTION: Shows how to import the useLoader function from the Modern.js runtime package.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/core/use-loader.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useLoader } from '@modern-js/runtime';\n```\n\n----------------------------------------\n\nTITLE: Defining HTML Template Configuration in Modern.js\nDESCRIPTION: This code snippet demonstrates the usage of the 'html.template' configuration option in Modern.js. It specifies the type and default value for the option, which can be either a string path or a function.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/html/template.mdx#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n# html.template\n\n- **Type:** `string | Function`\n- **Default:**\n```\n\n----------------------------------------\n\nTITLE: Configuring Vitest for React Testing in TypeScript\nDESCRIPTION: This snippet shows how to set up a Vitest configuration file for testing React components. It includes the necessary plugins and specifies the JSDOM testing environment.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/testing/vitest.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from 'vitest/config'\nimport react from '@vitejs/plugin-react'\n \nexport default defineConfig({\n  plugins: [react()],\n  test: {\n    environment: 'jsdom',\n  },\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Complete Contacts Model in TypeScript\nDESCRIPTION: Full TypeScript implementation of the contacts model with type definitions, state, computed properties, and actions using Modern.js model API.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/tutorials/first-app/c06-model.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { model } from '@modern-js/runtime/model';\n\ntype State = {\n  items: {\n    avatar: string;\n    name: string;\n    email: string;\n    archived?: boolean;\n  }[];\n  pending: boolean;\n  error: null | Error;\n};\n\nexport default model<State>('contacts').define({\n  state: {\n    items: [],\n    pending: false,\n    error: null,\n  },\n  computed: {\n    archived: ({ items }: State) => items.filter(item => item.archived),\n  },\n  actions: {\n    archive(draft, payload) {\n      const target = draft.items.find(item => item.email === payload)!;\n      if (target) {\n        target.archived = true;\n      }\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Error Handling in Modern.js Streaming SSR\nDESCRIPTION: These snippets demonstrate error handling in Modern.js streaming SSR. It shows how to intentionally throw an error in the data loader and how to handle and display the error using the Await component's errorElement prop.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/render/streaming-ssr.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defer } from '@modern-js/runtime/router';\n\nexport default () => {\n  const data = new Promise((resolve, reject) => {\n    setTimeout(() => {\n      reject(new Error('error occurs'));\n    }, 200);\n  });\n\n  return defer({ data });\n};\n```\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Await, useAsyncError, useLoaderData } from '@modern-js/runtime/router';\nimport { Suspense } from 'react';\n\nexport default function Page() {\n  const data = useLoaderData();\n\n  return (\n    <div>\n      Error page\n      <Suspense fallback={<div>loading ...</div>}>\n        <Await resolve={data.data} errorElement={<ErrorElement />}>\n          {(data: any) => {\n            return <div>never displayed</div>;\n          }}\n        </Await>\n      </Suspense>\n    </div>\n  );\n}\n\nfunction ErrorElement() {\n  const error = useAsyncError() as Error;\n  return <p>Something went wrong! {error.message}</p>;\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Route Redirections in Modern.js Data Loader\nDESCRIPTION: Shows how to use a Data Loader file (page.data.ts) to perform route redirections based on user authentication in Modern.js.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/routes.mdx#2025-04-21_snippet_8\n\nLANGUAGE: ts\nCODE:\n```\nimport { redirect } from '@modern-js/runtime/router';\n\nexport const loader = () => {\n  const user = await getUser();\n  if (!user) {\n    return redirect('/login');\n  }\n  return null;\n};\n```\n\n----------------------------------------\n\nTITLE: Injecting Data using Response Locals in Modern.js Middleware\nDESCRIPTION: Example middleware demonstrating how to use response.locals to store variables that are accessible throughout the request lifecycle. This is useful for sharing data between middleware and the final request handler.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/web-server/middleware.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport const Middleware = () => async (ctx, next) => {\n  ctx.response.locals.id = 'Modern.js';\n  ctx.response.locals.rpc = createRpcInstance();\n};\n```\n\n----------------------------------------\n\nTITLE: Using useRuntimeContext Hook in React Components\nDESCRIPTION: Basic example of importing and using the useRuntimeContext hook within a function component to access runtime context.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/core/use-runtime-context.mdx#2025-04-21_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useRuntimeContext } from '@modern-js/runtime';\n\nexport function App() {\n  const runtimeContext = useRuntimeContext();\n  return <div>Hello World</div>\n}\n```\n\n----------------------------------------\n\nTITLE: Defining a Model with Object Type Parameters in React/TypeScript\nDESCRIPTION: Shows how to define a model structure using an object that includes state, computed properties, actions, and effects.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/model/model_.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst fooModel = model('foo').define({\n  state: 'foo',\n  computed: {\n    cFoo: state => `c${state}`,\n  },\n  actions: {\n    setState: (state, value) => {\n      return value;\n    },\n  },\n  effects: {\n    loadState: async () => {\n      // get state from remote\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Invoking a BFF Function in React Component\nDESCRIPTION: Demonstrates how to import and use a BFF function within a React component. The function is called on component mount and its result is displayed.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/bff/function.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useState, useEffect } from 'react';\nimport { get as hello } from '@api/hello';\n\nexport default () => {\n  const [text, setText] = useState('');\n\n  useEffect(() => {\n    hello().then(setText);\n  }, []);\n  return <div>{text}</div>;\n};\n```\n\n----------------------------------------\n\nTITLE: Initializing Tailwind CSS Base Styles\nDESCRIPTION: Basic Tailwind CSS imports required for initialization\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/css/tailwindcss.mdx#2025-04-21_snippet_2\n\nLANGUAGE: css\nCODE:\n```\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n```\n\n----------------------------------------\n\nTITLE: Using Outlet Component Example in Modern.js Router\nDESCRIPTION: Example of how to use the Outlet component to create nested routes in a React application. Shows a Dashboard component with child routes for messages and tasks.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/router/router.mdx#2025-04-21_snippet_12\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Dashboard() {\n  return (\n    <div>\n      <h1>Dashboard</h1>\n\n      {/* This element will render either <DashboardMessages> when the URL is\n          \"/messages\", <DashboardTasks> at \"/tasks\", or null if it is \"/\"\n      */}\n      <Outlet />\n    </div>\n  );\n}\n\nfunction App() {\n  return (\n    <Routes>\n      <Route path=\"/\" element={<Dashboard />}>\n        <Route path=\"messages\" element={<DashboardMessages />} />\n        <Route path=\"tasks\" element={<DashboardTasks />} />\n      </Route>\n    </Routes>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Effects for Side Operations in Reduck\nDESCRIPTION: Demonstrates how to implement effects for handling side operations like persisting state to localStorage.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/model/model_.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nconst fooModel = model('foo').define((context, { use }) => ({\n  state: 'foo',\n  effects: {\n    persist() {\n      const [state] = use(fooModel);\n      localStorage.setItem('state', state);\n    },\n  },\n}));\n```\n\n----------------------------------------\n\nTITLE: Implementing Login and API Access in React Component for Modern.js\nDESCRIPTION: This snippet shows how to implement a login process before accessing a protected API in a React component using Modern.js. It first calls a login API and then accesses the hello API if login is successful.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/bff/extend-server.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useState, useEffect } from 'react';\nimport { get as hello } from '@api/hello';\nimport { post as login } from '@api/login';\n\nexport default () => {\n  const [text, setText] = useState('');\n\n  useEffect(() => {\n    async function fetchAfterLogin() {\n      const { code } = await login();\n      if (code === 0) {\n        const { message } = await hello();\n        setText(message);\n      }\n    }\n    fetchAfterLogin();\n  }, []);\n\n  return <p>{text}</p>;\n};\n```\n\n----------------------------------------\n\nTITLE: Intra-Model Communication with Effects calling Actions\nDESCRIPTION: This example demonstrates communication within a Model, specifically how Effects functions can call the Model's own Actions. It shows retrieving the Model's Actions within each Effect function to avoid circular references during Model initialization.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/model/model-communicate.mdx#2025-04-21_snippet_3\n\nLANGUAGE: TypeScript\nCODE:\n```\nconst fooModel = model('foo').define((context, { use, onMount }) => ({\n  state: {\n    a: '',\n    b: '',\n  },\n  actions: {\n    setA(state, payload) {\n      state.a = payload;\n    },\n    setB(state, payload) {\n      state.a = payload;\n    },\n  },\n  effects: {\n    async loadA() {\n      // 通过 use 获取当前 Model 的 actions\n      const [, actions] = use(fooModel);\n      const res = await mockFetchA();\n      actions.setA(res);\n    },\n    async loadB() {\n      // 通过 use 获取当前 Model 的 actions\n      const [, actions] = use(fooModel);\n      const res = await mockFetchB();\n      actions.setB(res);\n    },\n  },\n}));\n```\n\n----------------------------------------\n\nTITLE: Using useLocalModel with React Components in Modern.js\nDESCRIPTION: Demonstrates how to use useLocalModel hook to create isolated local state instances from the same model. Each call to useLocalModel creates a separate instance of the model state, similar to React's useState hook.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/model/use-local-model.mdx#2025-04-21_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Container() {\n  const [state, actions] = useLocalModel(modelA);\n  const [state1, actions1] = useLocalModel(modelA);\n\n  // ...\n}\n```\n\n----------------------------------------\n\nTITLE: TypeScript Interface Definition for Modern.js dev.client Configuration\nDESCRIPTION: TypeScript type definition for the dev.client configuration in Modern.js. It defines properties for WebSocket connections including protocol, path, port, host, reconnection settings, and error overlay display options.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/dev/client.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype Client = {\n  // WebSocket 请求的协议名称\n  protocol?: 'ws' | 'wss';\n  // WebSocket 请求的路径\n  path?: string;\n  // WebSocket 请求的端口号\n  port?: string | number;\n  // WebSocket 请求的 host\n  host?: string;\n  // WebSocket 请求断开后的最大重连次数\n  reconnect?: number;\n  // 当出现编译错误时，是否在浏览器中显示 error overlay\n  overlay?: boolean;\n};\n```\n\n----------------------------------------\n\nTITLE: Sample React Component for Testing\nDESCRIPTION: Example React component with routing functionality that will be used for testing.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/testing/jest.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Link } from '@modern-js/runtime/router';\n\nconst Index = () => (\n  <div>\n    <h1>Home</h1>\n    <Link to=\"/about\">About</Link>\n  </div>\n);\n\nexport default Index;\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of renderStreaming in Modern.js for React SSR\nDESCRIPTION: Demonstrates how to use renderStreaming with createRequestHandler to implement streaming SSR in a Modern.js server entry file. It creates a readable stream and returns it as an HTTP response.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/ssr/renderStreaming.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n  renderStreaming,\n  createRequestHandler,\n} from '@modern-js/runtime/ssr/server';\n\nconst handleRequest = async (request, ServerRoot, options) => {\n  const stream = await renderStreaming(request, <ServerRoot />, options);\n\n  return new Response(stream, {\n    headers: {\n      'content-type': 'text/html; charset=utf-8',\n    },\n  });\n};\n\nexport default createRequestHandler(handleRequest);\n```\n\n----------------------------------------\n\nTITLE: Creating Custom Browser Entry Point in Modern.js\nDESCRIPTION: Demonstrates how to create a custom browser-side entry point that executes code before rendering the application. This allows for initialization logic to run before the app is displayed to the user.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/source/enable-custom-entry.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { createRoot } from '@modern-js/runtime/react';\nimport { render } from '@modern-js/runtime/browser';\n\nconst ModernRoot = createRoot();\n\nasync function beforeRender() {\n   // todo\n}\n\nbeforeRender().then(() => {\n  render(<ModernRoot />);\n});\n```\n\n----------------------------------------\n\nTITLE: Defining BFF Function with RequestOption Parameter\nDESCRIPTION: Shows how to define a BFF function that accepts a RequestOption parameter, which includes query and data fields for handling request data.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/bff/function.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { RequestOption } from '@modern-js/runtime/server';\n\nexport async function post({\n  query,\n  data,\n}: RequestOption<Record<string, string>, Record<string, string>>) {\n  // do something\n}\n```\n\n----------------------------------------\n\nTITLE: Layout Component Implementation with Outlet\nDESCRIPTION: Shows how to implement a layout component using Outlet from React Router for nested routing.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/routes.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Link, Outlet, useLoaderData } from '@modern-js/runtime/router';\n\nexport default () => {\n  return (\n    <>\n      <Outlet></Outlet>\n    </>\n  );\n};\n```\n\n----------------------------------------\n\nTITLE: Using Link Component Example in Modern.js Router\nDESCRIPTION: Example of how to use the Link component to create a navigation link to the About page in a React application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/router/router.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\n<Link to=\"/about\">About</Link>\n```\n\n----------------------------------------\n\nTITLE: Referencing Image Assets with Alias in CSS\nDESCRIPTION: Shows how to reference an image asset in a CSS file using an alias path. This allows for consistent asset referencing across both JavaScript/TypeScript and CSS files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/static-assets.mdx#2025-04-21_snippet_3\n\nLANGUAGE: css\nCODE:\n```\n.logo {\n  background-image: url('@/static/logo.png');\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Cache Implementation in TypeScript\nDESCRIPTION: Demonstrates the basic usage of the cache function to cache data fetching results.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/data/data-cache.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { cache } from '@modern-js/runtime/cache';\nimport { fetchUserData } from './api';\n\nconst getUser = cache(fetchUserData);\n\nconst loader = async () => {\n  const user = await getUser(user); // When the parameters of the function changes, the function will be re-executed\n  return {\n    user,\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Writing a Unit Test for a React Component with Vitest\nDESCRIPTION: This snippet demonstrates how to write a unit test for a React component using Vitest and React Testing Library. It checks if the component renders the expected heading.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/testing/vitest.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { expect, test } from 'vitest';\nimport { render, screen } from '@testing-library/react';\nimport { BrowserRouter as Router } from '@modern-js/runtime/router';\nimport Page from '../routes/page';\n\ntest('Page', () => {\n  render(\n    <Router>\n      <Page />\n    </Router>,\n  );\n  expect(screen.getByRole('heading', { level: 1, name: 'Home' })).toBeDefined();\n});\n```\n\n----------------------------------------\n\nTITLE: Basic Playwright Test Example in TypeScript\nDESCRIPTION: Default Playwright test file demonstrating basic test cases for checking page title and navigation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/testing/playwright.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { test, expect } from '@playwright/test';\n\ntest('has title', async ({ page }) => {\n  await page.goto('https://playwright.dev/');\n\n  // Expect a title \"to contain\" a substring.\n  await expect(page).toHaveTitle(/Playwright/);\n});\n\ntest('get started link', async ({ page }) => {\n  await page.goto('https://playwright.dev/');\n\n  // Click the get started link.\n  await page.getByRole('link', { name: 'Get started' }).click();\n\n  // Expects page to have a heading with the name of Installation.\n  await expect(\n    page.getByRole('heading', { name: 'Installation' }),\n  ).toBeVisible();\n});\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Behavior Before Rendering in Modern.js\nDESCRIPTION: This snippet demonstrates how to use entry.tsx to add custom behavior before rendering components in a Modern.js project. It uses createRoot from @modern-js/runtime/react and render from @modern-js/runtime/browser.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/hooks/src/entry.mdx#2025-04-21_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { createRoot } from '@modern-js/runtime/react';\nimport { render } from '@modern-js/runtime/browser';\n\nconst ModernRoot = createRoot();\n\nasync function beforeRender() {\n   // todo\n}\n\nbeforeRender().then(() => {\n  render(<ModernRoot />);\n});\n```\n\n----------------------------------------\n\nTITLE: Hook Function Type Definitions\nDESCRIPTION: TypeScript type definitions for Hook context and function signatures including response and request handlers\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/web-server/hook.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\ntype HookContext = {\n  response: {\n    set: (key: string, value: string) => void;\n    status: (code: number) => void;\n    getStatus: () => number;\n    cookies: {\n      set: (key: string, value: string, options?: any) => void;\n      clear: () => void;\n    };\n    raw: (\n      body: string,\n      { status, headers }: { status: number; headers: Record<string, any> },\n    ) => void;\n  };\n  request: {\n    host: string;\n    pathname: string;\n    query: Record<string, any>;\n    cookie: string;\n    cookies: {\n      get: (key: string) => string;\n    };\n    headers: IncomingHttpHeaders;\n  };\n};\n\nfunction Hook(context: HookContext, next: NextFunction): Promsie<void> | void;\n```\n\n----------------------------------------\n\nTITLE: Implementing a Fake Authentication Provider\nDESCRIPTION: A simple mock authentication service that simulates asynchronous login and logout operations. It maintains an isAuthenticated flag and provides signin and signout methods with callbacks.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/examples/csr-auth.mdx#2025-04-21_snippet_2\n\nLANGUAGE: ts\nCODE:\n```\n/**\n * This represents some generic auth provider API, like Firebase.\n */\nconst fakeAuthProvider = {\n  isAuthenticated: false,\n  signin(callback: VoidFunction) {\n    fakeAuthProvider.isAuthenticated = true;\n    setTimeout(callback, 100); // fake async\n  },\n  signout(callback: VoidFunction) {\n    fakeAuthProvider.isAuthenticated = false;\n    setTimeout(callback, 100);\n  },\n};\n\nexport { fakeAuthProvider };\n```\n\n----------------------------------------\n\nTITLE: Writing Cypress E2E Test\nDESCRIPTION: Cypress test case implementation for testing navigation between Home and About pages, including URL and content verification.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/testing/cypress.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\ndescribe('Navigation', () => {\n  it('should navigate to the about page', () => {\n    // Start from the index page\n    cy.visit('http://localhost:8080/')\n \n    // Find a link with an href attribute containing \"about\" and click it\n    cy.get('a[href*=\"about\"]').click()\n \n    // The new url should include \"/about\"\n    cy.url().should('include', '/about')\n \n    // The new page should contain an h1 with \"About\"\n    cy.get('h1').contains('About')\n  })\n})\n```\n\n----------------------------------------\n\nTITLE: Basic Document Template Example\nDESCRIPTION: Complete example of a Document.tsx template using Modern.js HTML components with context parameters\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/html.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport React, { useContext } from 'react';\nimport {\n  Html,\n  Root,\n  Head,\n  Body,\n  Comment,\n  DocumentContext,\n} from '@modern-js/runtime/document';\n\nexport default function Document(): React.ReactElement {\n  // the params provide by DocumentContext\n  const {\n    config: { output: htmlConfig },\n    entryName,\n    templateParams,\n  } = useContext(DocumentContext);\n\n  return (\n    <Html>\n      <Head>\n        <link href=\"https://modernjs.dev\" />\n        <Comment>{'<!-- Need a Comment -->'}</Comment>\n      </Head>\n      <Body>\n        <Root rootId=\"root\">\n          <h1 style={{ color: 'red' }}>Some Params: </h1>\n          <h2>entryName: {entryName}</h2>\n          <h2>title: {htmlConfig.title}</h2>\n          <h2>rootId: {templateParams.mountId}</h2>\n        </Root>\n        <h1>bottom</h1>\n      </Body>\n    </Html>\n  );\n```\n\n----------------------------------------\n\nTITLE: Error Handling in Data Loader\nDESCRIPTION: Demonstrates error handling in a Data Loader function by throwing a Response object when an error occurs.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/data/data-fetch.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport async function loader() {\n  const res = await fetch('https://api/user/profile');\n  if (!res.ok) {\n    throw res;\n  }\n  return res.json();\n}\n```\n\n----------------------------------------\n\nTITLE: Using a Reduck Model in a React Component with JSX\nDESCRIPTION: This snippet demonstrates how to use the 'countModel' in a React component named 'Counter'. It shows the usage of the useModel hook to access the model's state and actions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/quick-start.mdx#2025-04-21_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\nimport { useModel } from '@modern-js/runtime/model';\nimport countModel from './models/count';\n\nfunction Counter() {\n  const [state, actions] = useModel(countModel);\n\n  return (\n    <div>\n      <div>counter: {state.value}</div>\n      <button onClick={() => actions.add()}>add</button>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Modifying HTTP Status Code in Data Loader\nDESCRIPTION: Demonstrates how to modify the HTTP status code by throwing a custom Response in a Data Loader function.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/data/data-fetch.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nexport async function loader() {\n  const user = await fetchUser();\n  if(!user){\n    throw new Response('The user was not found', { status: 404 });\n  }\n  return user;\n}\n```\n\n----------------------------------------\n\nTITLE: React.lazy Component Loading\nDESCRIPTION: Shows how to implement code splitting using React.lazy() with Suspense for component loading. Demonstrates loading multiple components with a loading fallback.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/page-performance/code-split.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport React, { Suspense } from 'react';\n\nconst OtherComponent = React.lazy(() => import('./OtherComponent'));\nconst AnotherComponent = React.lazy(() => import('./AnotherComponent'));\n\nfunction MyComponent() {\n  return (\n    <div>\n      <Suspense fallback={<div>Loading...</div>}>\n        <section>\n          <OtherComponent />\n          <AnotherComponent />\n        </section>\n      </Suspense>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Combining Hooks for Advanced Usage in TypeScript\nDESCRIPTION: Shows an advanced example of combining onBeforeRender and wrapRoot hooks to fetch data and pass it to the entire application via Context.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/runtime-plugins/api.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\napi.onBeforeRender(async (context) => {\n  const data = await fetchData(context.req);\n  context.data = data;\n});\n\napi.wrapRoot((App) => {\n  return (props) => (\n    <DataContext.Provider value={props.data}>\n      <App {...props} />\n    </DataContext.Provider>\n  );\n});\n```\n\n----------------------------------------\n\nTITLE: Defining createApp Function Signature in TypeScript\nDESCRIPTION: This snippet shows the TypeScript interface and function signature for the createApp function. It defines the AppConfig interface which extends StoreConfig and includes options for devTools and autoActions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/model/create-app.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface AppConfig extends StoreConfig {\n  devTools?: boolean | DevToolsOptions;\n  autoActions?: boolean;\n}\n\nfunction createApp(config: AppConfig): object;\n```\n\n----------------------------------------\n\nTITLE: Basic React Component for SSG\nDESCRIPTION: Simple React component example showing basic SSG implementation in a page component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/render/ssg.mdx#2025-04-21_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\nexport default () => {\n  return <div>Index Page</div>;\n};\n```\n\n----------------------------------------\n\nTITLE: Basic Modern.js Runtime Configuration (TypeScript/React)\nDESCRIPTION: Example of a basic runtime configuration for Modern.js, including router and state management settings. This configuration is defined using the defineRuntimeConfig function from @modern-js/runtime.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/runtime/0-intro.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { defineRuntimeConfig } from '@modern-js/runtime';\n\nexport default defineRuntimeConfig({\n  router: {\n    // 路由配置\n  },\n  state: {\n    // 状态管理配置\n  },\n  // 其他运行时模块...\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Route Redirections in Modern.js Component\nDESCRIPTION: Demonstrates how to perform route redirections within a React component using the useNavigate hook in Modern.js.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/routes.mdx#2025-04-21_snippet_9\n\nLANGUAGE: ts\nCODE:\n```\nimport { useNavigate } from '@modern-js/runtime/router';\nimport { useEffect } from 'react';\n\nexport default () => {\n  const navigate = useNavigate();\n  useEffect(() => {\n    getUser().then(user => {\n      if (!user) {\n        navigate('/login');\n      }\n    });\n  });\n\n  return <div>Hello World</div>;\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Local Plugin in Modern.js\nDESCRIPTION: Example of using a local plugin in a Modern.js configuration file. The plugin is imported from a local path and added to the plugins array.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/plugins.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { myPlugin } from './config/plugin/myPlugin';\n\nexport default defineConfig({\n  plugins: [myPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Distinguishing Runtime Environment with useRuntimeContext\nDESCRIPTION: Example showing how to use useRuntimeContext to detect whether code is running in a browser or server environment and execute environment-specific logic.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/core/use-runtime-context.mdx#2025-04-21_snippet_2\n\nLANGUAGE: ts\nCODE:\n```\nfunction App() {\n  const { context } = useRuntimeContext();\n\n  if (context.isBrowser === true) {\n    // browser-side execution logic\n    console.log('browser render')\n  } else {\n    // The server-side executes logic, which can access the unique 'logger' attribute\n    context.logger.info('server render')\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Manual Action Dispatching in Effects\nDESCRIPTION: Shows how to manually dispatch actions within effects functions using utils.use to access model actions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/manage-effects.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst todoModel = model('todo').define((context, utils) => ({\n  state: {\n    items: [],\n    loading: false,\n    error: null,\n  },\n  actions: {\n    pending(state) {\n      state.loading = true;\n    },\n    fulfilled(state, items) {\n      state.items = items;\n      state.loading = false;\n    },\n  },\n  effects: {\n    async load() {\n      const [, actions] = utils.use(todoModel);\n      actions.pending();\n\n      return new Promise(resolve => {\n        setTimeout(() => {\n          const items = ['Learn Modern.js'];\n          actions.fulfilled(items);\n          resolve(items);\n        }, 2000);\n      });\n    },\n  },\n}));\n```\n\n----------------------------------------\n\nTITLE: TypeScript Configuration with defineConfig\nDESCRIPTION: Example of using defineConfig utility function in TypeScript format to configure Modern.js with type inference support.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/usage.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig({\n  source: {\n    alias: {\n      '@common': './src/common',\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Initializing a Modern.js Project with CLI\nDESCRIPTION: Creates a new Modern.js project named 'myapi' using the create command. This initializes the project structure and installs necessary dependencies.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/create-bff-api-app.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx @modern-js/create@latest myapi\n```\n\n----------------------------------------\n\nTITLE: Default CSS Loader Configuration in Modern.js\nDESCRIPTION: This snippet shows the default configuration for the CSS Loader in Modern.js. It sets up modules based on the cssModules output option and enables source maps if specified in the config.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/css-loader.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultOptions = {\n  modules: rsbuildConfig.output.cssModules,\n  sourceMap: rsbuildConfig.output.sourceMap.css,\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Tailwind CSS in Modern.js\nDESCRIPTION: This configuration file enables Tailwind CSS in a Modern.js project by adding the tailwindcssPlugin to the plugins array.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c03-css.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { appTools, defineConfig } from '@modern-js/app-tools';\nimport { tailwindcssPlugin } from '@modern-js/plugin-tailwindcss';\n\nexport default defineConfig({\n  runtime: {\n    router: true,\n    state: true,\n  },\n  server: {\n    ssr: true,\n  },\n  plugins: [appTools(), tailwindcssPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Using Dynamic Route Parameters in React Component\nDESCRIPTION: Demonstrates how to invoke a BFF function with dynamic route parameters from a React component. The function is called with specific level and id values.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/bff/function.mdx#2025-04-21_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useState, useEffect } from 'react';\nimport { get as getUser } from '@api/[level]/[id]';\n\nexport default () => {\n  const [name, setName] = useState('');\n\n  useEffect(() => {\n    getUser(6, 001).then(userData => setName(userData.name));\n  }, []);\n\n  return <div>{name}</div>;\n};\n```\n\n----------------------------------------\n\nTITLE: Custom Entry Rendering\nDESCRIPTION: Example of custom entry configuration using createRoot and render functions from Modern.js runtime.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/concept/entries.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRoot } from '@modern-js/runtime/react';\nimport { render } from '@modern-js/runtime/browser';\n\nconst ModernRoot = createRoot();\n\nrender(<ModernRoot />);\n```\n\n----------------------------------------\n\nTITLE: Jest Test Case for React Component\nDESCRIPTION: Example test case that demonstrates testing a React component with React Testing Library and Jest DOM assertions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/testing/jest.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport '@testing-library/jest-dom';\nimport { render, screen } from '@testing-library/react';\nimport { BrowserRouter as Router } from '@modern-js/runtime/router';\nimport Page from '../routes/page';\n\ndescribe('Page', () => {\n  it('renders a heading', () => {\n    render(\n      <Router>\n        <Page />\n      </Router>,\n    );\n\n    const heading = screen.getByRole('heading', { level: 1 });\n\n    expect(heading).toBeInTheDocument();\n  });\n});\n```\n\n----------------------------------------\n\nTITLE: Adding Interceptors to Request SDK in Modern.js (TSX)\nDESCRIPTION: This example demonstrates how to add interceptors to the request SDK in Modern.js. The interceptor function modifies the default request behavior to return parsed JSON data.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/bff/sdk.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nconfigure({\n  interceptor(request) {\n    return async (url, params) => {\n      const res = await request(url, params);\n      return res.json();\n    };\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Complete JavaScript Model Implementation\nDESCRIPTION: Full JavaScript implementation of the contacts model with state, computed properties, and actions combined together.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/tutorials/first-app/c06-model.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nconst state = {\n  items: [],\n  pending: false,\n  error: null,\n};\n\nconst computed = {\n  archived: ({ items }) => {\n    return items.filter(item => item.archived);\n  },\n};\n\nconst actions = {\n  archive(draft, payload) {\n    const target = draft.items.find(item => item.email === payload);\n    if (target) {\n      target.archived = true;\n    }\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: BFF Function with Dynamic Routes and RequestOption\nDESCRIPTION: Demonstrates a BFF function that combines dynamic route parameters with the RequestOption object for handling complex requests.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/bff/function.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nexport async function post(\n  sku: string,\n  id: string,\n  {\n    data,\n    query,\n  }: RequestOption<Record<string, string>, Record<string, string>>,\n) {\n  // do somethings\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Container Component for Contacts\nDESCRIPTION: Creates a reusable container component that encapsulates the common logic for displaying contacts. The component accepts title and source props to determine which data source to use and what title to display.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c07-container.mdx#2025-04-21_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Helmet } from '@modern-js/runtime/head';\nimport { useModel } from '@modern-js/runtime/model';\nimport { List } from 'antd';\nimport Item from '../components/Item';\nimport contacts from '../models/contacts';\n\nfunction Contacts({\n  title,\n  source,\n}: {\n  title: string;\n  source: 'items' | 'archived';\n}) {\n  const [state, { archive }] = useModel(contacts);\n\n  return (\n    <div className=\"container lg mx-auto\">\n      <Helmet>\n        <title>{title}</title>\n      </Helmet>\n      <List\n        dataSource={state[source]}\n        renderItem={info => (\n          <Item\n            key={info.name}\n            info={info}\n            onArchive={() => {\n              archive(info.email);\n            }}\n          />\n        )}\n      />\n    </div>\n  );\n}\n\nexport default Contacts;\n```\n\n----------------------------------------\n\nTITLE: Layout Component Example with Outlet in Modern.js Routing\nDESCRIPTION: Shows how to implement a layout component using the Outlet component from React Router to represent child components in the routing hierarchy.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/hooks/src/routes.mdx#2025-04-21_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Link, Outlet, useLoaderData } from '@modern-js/runtime/router';\n\nexport default () => {\n  return (\n    <>\n      <Outlet></Outlet>\n    </>\n  );\n};\n```\n\n----------------------------------------\n\nTITLE: Model Actions Implementation\nDESCRIPTION: Definition of archive action to modify contact state\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c06-model.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nconst actions = {\n  archive(draft, payload) {\n    const target = draft.items.find(item => item.email === payload);\n    if (target) {\n      target.archived = true;\n    }\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Cache Implementation with Revalidation\nDESCRIPTION: Example of using both maxAge and revalidate parameters for stale-while-revalidate functionality.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/data/data-cache.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { cache, CacheTime } from '@modern-js/runtime/cache';\n\nconst getDashboardStats = cache(\n  async () => {\n    return await fetchComplexStatistics();\n  },\n  {\n    maxAge: CacheTime.MINUTE * 2,\n    revalidate: CacheTime.MINUTE * 1,\n  }\n);\n```\n\n----------------------------------------\n\nTITLE: Defining Derived State Depending on Model's Own State in TypeScript\nDESCRIPTION: This snippet demonstrates how to define a derived state 'visibleTodos' that depends only on the current model's state. It filters todo items based on a 'filter' state.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/computed-state.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst todoModel = model('todo').define({\n  state: {\n    items: [],\n    filter: 'ALL', // ALL: show all；COMPLETED: show completed；ACTIVE: show active\n  },\n  computed: {\n    visibleTodos: state => {\n      switch (state.filter) {\n        case 'ALL':\n          return state.items;\n        case 'COMPLETED':\n          return todos.filter(t => t.completed);\n        case 'ACTIVE':\n          return todos.filter(t => !t.completed);\n        default:\n          return [];\n      }\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using Modern Dev Command Options\nDESCRIPTION: The modern dev command starts a local development server with various options including entry selection, config specification, and analysis capabilities.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/commands.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nUsage: modern dev [options]\n\nOptions:\n  -e --entry <entry>    compiler by entry\n  -c --config <config>  specify the configuration file, which can be a relative or absolute path\n  -h, --help            show command help\n  --analyze             analyze the bundle and view size of each module\n  --web-only            only start web service\n  --api-only            only start API service\n```\n\n----------------------------------------\n\nTITLE: Setting Up Route Layout with Authentication in Modern.js\nDESCRIPTION: A layout component that wraps all routes with the AuthProvider and includes navigation links to public and protected pages. It uses React Router's Link and Outlet components for navigation and rendering child routes.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/examples/csr-auth.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Link, Outlet } from '@modern-js/runtime/router';\nimport { AuthProvider, AuthStatus } from './Auth';\n\nexport default function Layout() {\n  return (\n    <AuthProvider>\n      <AuthStatus />\n\n      <ul>\n        <li>\n          <Link to=\"/\">Public Page</Link>\n        </li>\n        <li>\n          <Link to=\"/protected\">Protected Page</Link>\n        </li>\n      </ul>\n\n      <Outlet />\n    </AuthProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Plain Object Auto Actions in Reduck\nDESCRIPTION: Demonstrates how Reduck generates setter actions for plain object properties using camelCase naming convention (set${key}). The example shows usage of auto-generated setters for object properties.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/model/auto-actions.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nconst fooModel = model('foo').define({\n  state: {\n    a: 1,\n    b: { value: 1 },\n    c: 'c',\n  },\n});\n\nfunction App() {\n  const [state, actions] = useModel(fooModel);\n\n  useEffect(() => {\n    actions.setA(2);\n    actions.setB({ value: 2 });\n    actions.setC('d');\n  }, []);\n\n  return (\n    <div>\n      <div>State: {state}</div>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Defining a Todo Model with Side Effects in TypeScript\nDESCRIPTION: This snippet demonstrates how to define a Reduck model for a todo list, including state, actions, and an effect for loading todos. It uses a Promise-based effect and corresponding actions for handling different Promise states.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/model/manage-effects.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst todoModel = model('todo').define({\n  state: {\n    items: [],\n    loading: false,\n    error: null,\n  },\n  actions: {\n    load: {\n      pending(state) {\n        state.loading = true;\n      },\n      fulfilled(state, items) {\n        state.items = items;\n        state.loading = false;\n      },\n      rejected(state, error) {\n        state.error = error;\n        state.loading = false;\n      },\n    },\n  },\n  effects: {\n    // Promise 副作用\n    async load() {\n      return new Promise(resolve => {\n        setTimeout(() => resolve(['Learn Modern.js']), 2000);\n      });\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using createApp for Local State Management in React\nDESCRIPTION: This example demonstrates how to use createApp to create local Reduck applications with isolated states. It shows the creation of two providers and the use of local models within a React component structure.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/model/create-app.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst { Provider: LocalFooProvider, useModel: useLocalFooModel } = createApp();\nconst { Provider: LocalBarProvider, useModel: useLocalBarModel } = createApp();\n\nfunction Foo() {\n  const [fooState] = useLocalFooModel(fooModel);\n  const [barState] = useLocalBarModel(fooModel);\n\n  return (\n    <div>\n      <div>Foo: {fooState}</div>\n      <div>Bar: {barState}</div>\n    </div>\n  );\n}\n\nfunction Container() {\n  return (\n    <LocalFooProvider>\n      <LocalBarProvider>\n        <Foo />\n      </LocalBarProvider>\n    </LocalFooProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Asynchronous Data with Await in Modern.js\nDESCRIPTION: This snippet illustrates how to render asynchronous data using the Await component in Modern.js. It includes examples of using Suspense for loading states and handling the resolved data.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/render/streaming-ssr.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Await, useLoaderData } from '@modern-js/runtime/router';\nimport { Suspense } from 'react';\nimport type { Data } from './page.data';\n\nconst Page = () => {\n  const data = useLoaderData() as Data;\n\n  return (\n    <div>\n      User info:\n      <Suspense fallback={<div id=\"loading\">loading user data ...</div>}>\n        <Await resolve={data.data}>\n          {user => {\n            return (\n              <div id=\"data\">\n                name: {user.name}, age: {user.age}\n              </div>\n            );\n          }}\n        </Await>\n      </Suspense>\n    </div>\n  );\n};\n\nexport default Page;\n```\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useAsyncValue } from '@modern-js/runtime/router';\n\nconst UserInfo = () => {\n  const user = useAsyncValue();\n  return (\n    <div>\n      name: {user.name}, age: {user.age}\n    </div>\n  );\n};\n\nconst Page = () => {\n  const data = useLoaderData() as Data;\n  return (\n    <div>\n      User info:\n      <Suspense fallback={<div id=\"loading\">loading user data ...</div>}>\n        <Await resolve={data.data}>\n          <UserInfo />\n        </Await>\n      </Suspense>\n    </div>\n  );\n};\n\nexport default Page;\n```\n\n----------------------------------------\n\nTITLE: Intra-Model Communication in TypeScript\nDESCRIPTION: Demonstrates how to implement communication within a single Model, including effects calling actions and actions calling other actions. It also shows how to properly use the 'use' function to avoid infinite loops.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/model-communicate.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst fooModel = model('foo').define((context, { use, onMount }) => {\n  let actions;\n\n  onMount(() => {\n    // after fooModel mounted, get actions\n    [, actions] = use(fooModel);\n  });\n\n  return {\n    state: {\n      a: '',\n      b: '',\n    },\n    actions: {\n      setA(state, payload) {\n        state.a = payload;\n      },\n      setB(state, payload) {\n        state.a = payload;\n      },\n    },\n    effects: {\n      async loadA() {\n        const res = await mockFetchA();\n        actions.setA(res);\n      },\n      async loadB() {\n        const res = await mockFetchB();\n        actions.setB(res);\n      },\n    },\n  };\n});\n```\n\n----------------------------------------\n\nTITLE: Accessing Data from Parent Components\nDESCRIPTION: Shows how to use the useRouteLoaderData hook to access data from parent components' Data Loaders.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/data/data-fetch.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useRouteLoaderData } from '@modern-js/runtime/router';\n\nexport function UserLayout() {\n  // Get data returned by the `loader` in routes/user/layout.data.ts\n  const data = useRouteLoaderData('user/layout');\n  return (\n    <div>\n      <h1>{data.name}</h1>\n      <h2>{data.age}</h2>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring HTML Templates by Entry Points in Modern.js\nDESCRIPTION: Example showing how to configure different HTML templates for multiple entry points (pages) in a Modern.js application. This demonstrates setting a default template and overriding it for specific pages named 'foo' and 'bar'.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/html/template-by-entries.mdx#2025-04-21_snippet_0\n\nLANGUAGE: js\nCODE:\n```\nexport default {\n  html: {\n    template: './static/index.html',\n    templateByEntries: {\n      foo: './src/pages/foo/index.html',\n      bar: './src/pages/bar/index.html',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Advanced SSR Configuration in Modern.js\nDESCRIPTION: Detailed object-based configuration for SSR, including forceCSR, streaming mode, unsafe headers, and script loading options.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/server/ssr.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  server: {\n    ssr: {\n      forceCSR: true,\n      mode: 'stream',\n      unsafeHeaders: ['User-Agent'],\n      scriptLoading: 'async',\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Refactoring Main Page to Use Container Component\nDESCRIPTION: Refactors the main page component to use the new Contacts container component. The page now simply renders the container with appropriate props for displaying all contacts.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c07-container.mdx#2025-04-21_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nimport Contacts from '../containers/Contacts';\n\nfunction Index() {\n  return <Contacts title=\"All\" source=\"items\" />;\n}\n\nexport default Index;\n```\n\n----------------------------------------\n\nTITLE: Configuring enableAssetFallback in Modern.js\nDESCRIPTION: Configuration example showing how to enable asset fallback handling for unrecognized file types. When enabled, unknown files will be emitted to the dist directory instead of throwing an error.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/enable-asset-fallback.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    enableAssetFallback: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Array Actions in Reduck - TSX\nDESCRIPTION: Shows how Reduck generates array manipulation actions like push, pop, shift, unshift, filter, concat, and splice. Includes example usage of each array action in a React component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/model/auto-actions.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst fooModel = model('foo').define({\n  state: [1, 2, 3],\n});\n\nfunction App() {\n  const [state, actions] = useModel(fooModel);\n\n  useEffect(() => {\n    actions.push(4);\n    actions.pop();\n    actions.shift(0);\n    actions.unshift();\n    actions.filter(val => val <= 2);\n    actions.splice(0, 1, 1, 2);\n  }, []);\n\n  return (\n    <div>\n      <div>State: {state}</div>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring SSR Options by Entry in Modern.js\nDESCRIPTION: This snippet demonstrates how to use the 'ssrByEntries' option in the Modern.js configuration file to enable SSR globally but disable it for a specific entry named 'page-a'. It shows how to override the global SSR setting for individual entries.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/server/ssr-by-entries.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  server: {\n    ssr: true,\n    ssrByEntries: {\n      // page-a does not enable SSR\n      'page-a': false,\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Refactoring Archives Page to Use Container Component\nDESCRIPTION: Refactors the archives page component to use the new Contacts container component. The page now renders the container with appropriate props for displaying archived contacts.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c07-container.mdx#2025-04-21_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nimport Contacts from '../../containers/Contacts';\n\nfunction Index() {\n  return <Contacts title=\"Archives\" source=\"archived\" />;\n}\n\nexport default Index;\n```\n\n----------------------------------------\n\nTITLE: Writing E2E Test for Page Navigation in Playwright\nDESCRIPTION: Playwright test case to verify navigation between home and about pages in a Modern.js application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/testing/playwright.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { test, expect } from '@playwright/test'\n \ntest('should navigate to the about page', async ({ page }) => {\n  // Start from the index page (the baseURL is set via the webServer in the playwright.config.ts)\n  await page.goto('http://localhost:8080/')\n  // Find an element with the text 'About' and click on it\n  await page.click('text=About')\n  // The new URL should be \"/about\" (baseURL is used there)\n  await expect(page).toHaveURL('http://localhost:8080/about')\n  // The new page should contain an h1 with \"About\"\n  await expect(page.locator('h1')).toContainText('About')\n})\n```\n\n----------------------------------------\n\nTITLE: Basic renderString Usage in React SSR\nDESCRIPTION: Demonstrates basic usage of renderString function to handle server-side rendering in React applications. The function renders React components to strings and returns them as HTTP responses.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/ssr/renderString.mdx#2025-04-21_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  renderString,\n  createRequestHandler,\n} from '@modern-js/runtime/ssr/server';\n\nconst handleRequest = async (request, ServerRoot, options) => {\n  const body = await renderString(request, <ServerRoot />, options);\n\n  return new Response(body, {\n    headers: {\n      'content-type': 'text/html; charset=utf-8',\n    },\n  });\n};\n\nexport default createRequestHandler(handleRequest);\n```\n\n----------------------------------------\n\nTITLE: Accessing Query Parameters in Data Loader\nDESCRIPTION: Demonstrates how to access query parameters from the request object in a Data Loader function.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/data/data-fetch.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { LoaderFunctionArgs } from '@modern-js/runtime/router;\n\nexport const loader = async ({ request }: LoaderFunctionArgs) => {\n  const url = new URL(request.url);\n  const userId = url.searchParams.get('id');\n  return queryUser(userId);\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling Rspack as Storybook Build Tool\nDESCRIPTION: Configuration to switch Storybook from using Webpack to Rspack for faster build times, including necessary adjustments to the reactDocgen setting.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/basic/using-storybook.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nconst config = {\n  framework: {\n    name: '@modern-js/storybook',\n    options: {\n-      bundler: 'webpack'\n+      bundler: 'rspack'\n    },\n  },\n  typescript: {\n-    reactDocgen: 'react-docgen-typescript'\n+    reactDocgen: 'react-docgen'\n  }\n};\n\nexport default config;\n```\n\n----------------------------------------\n\nTITLE: Setting Server Port in Modern.js\nDESCRIPTION: This snippet demonstrates how to set a custom server port (3000) in Modern.js using the server.port configuration in modern.config.ts. This setting affects both development and production environments.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/server/port.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  server: {\n    port: 3000,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Modern.js Runtime for Micro-frontends\nDESCRIPTION: Runtime configuration file that defines micro-frontend child applications (Table and Dashboard) with their entry points. Sets up the master application configuration for micro-frontend architecture.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/enable-micro-frontend.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineRuntimeConfig } from '@modern-js/runtime';\n\nexport default defineRuntimeConfig({\n  masterApp: {\n    apps: [{\n      name: 'Table',\n      entry: 'http://localhost:8081',\n      // activeWhen: '/table'\n    }, {\n      name: 'Dashboard',\n      entry: 'http://localhost:8082'\n      // activeWhen: '/dashboard'\n    }]\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Importing and Using a Module Plugin in Configuration\nDESCRIPTION: This example shows how to import a custom plugin and add it to the Modern.js configuration file. The plugin is imported from a local file and added to the plugins array.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/guide/plugin-object.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { myPlugin } from '. /plugins/demo';\nexport default {\n  plugins: [myPlugin()],\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Modern.js Project Settings in JavaScript\nDESCRIPTION: This code snippet defines the configuration for a Modern.js project using the defineConfig function. It includes settings for the build process, development server, and output customization. The configuration object specifies options such as source maps, CSS modules, dev server port, and HTML template modifications.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/other-plugins.mdx#2025-04-21_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport { defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig({\n  output: {\n    disableSourceMap: true,\n    disableTsChecker: true,\n    disableMinimize: true,\n  },\n  source: {\n    disableTsChecker: true,\n  },\n  dev: {\n    port: 8080,\n  },\n  runtime: {\n    router: true,\n    state: true,\n  },\n  html: {\n    disableHtmlFolder: true,\n    templateParameters: {\n      modernjs: 'modern.js',\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Connect with State and Action Selectors\nDESCRIPTION: Shows how to use state and action selectors with Connect to transform and combine state and actions from multiple models.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/model/connect.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nfunction Test(props) {\n  props.incAll();\n  props.c;\n}\n\nconst stateSelector = (stateA, stateB) => ({\n  ...stateA,\n  ...stateB,\n  c: stateA.a + stateA.b,\n});\nconst actionsSelector = (actionsA, actionsB) => ({\n  ...actionsA,\n  ...actionsB,\n  incAll: () => {\n    actionsA.incA();\n    actionsB.incB();\n  },\n});\n\nexport default connect([modelA, modelB, stateSelector, actionsSelector])(Test);\n```\n\n----------------------------------------\n\nTITLE: Defining a Simple Count Model with Primitive Data Type in TypeScript\nDESCRIPTION: This snippet demonstrates how to create a simple count model using a primitive data type (number) as the state. It shows the concise syntax for model definition in Modern.js.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/auto-actions.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst countModel = model('count').define({ state: 1 });\n```\n\n----------------------------------------\n\nTITLE: Removing Webpack Plugins in Modern.js\nDESCRIPTION: This example demonstrates how to remove an internal webpack plugin using the removePlugin utility function. It shows removing the ForkTsCheckerWebpackPlugin.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/webpack.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    webpack: (config, { removePlugin }) => {\n      removePlugin('ForkTsCheckerWebpackPlugin');\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Modifying Server Routes in Modern.js\nDESCRIPTION: Shows how to modify server routing configuration by adding new API routes using the modifyServerRoutes hook.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/cli-plugins/api.mdx#2025-04-21_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\napi.modifyServerRoutes(routes => {\n  // Add a new API route\n  routes.concat({\n    urlPath: '/api',\n    isApi: true,\n    entryPath: '',\n    isSPA: false,\n    isSSR: false,\n  });\n  return routes;\n});\n```\n\n----------------------------------------\n\nTITLE: Defining SetupMiddlewares Type in TypeScript for Modern.js\nDESCRIPTION: This code snippet defines the types for SetupMiddlewaresServer and SetupMiddlewares. It includes methods for socket communication, environment management, and middleware configuration for the development server.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/dev/setup-middlewares.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype SetupMiddlewaresServer = {\n  sockWrite: (\n    type: string,\n    data?: string | boolean | Record<string, any>,\n  ) => void;\n  environments: {\n    [name: string]: {\n      /**\n       * Get stats info about current environment.\n       */\n      getStats: () => Promise<Stats>;\n      /**\n       * Load and execute stats bundle in server.\n       *\n       * @param entryName - relate to Rsbuild's `source.entry`\n       * @returns the return value of entry module.\n       */\n      loadBundle: <T = unknown>(entryName: string) => Promise<T>;\n\n      /**\n       * Get the compiled HTML template.\n       */\n      getTransformedHtml: (entryName: string) => Promise<string>;\n    };\n  };\n};\n\ntype SetupMiddlewares = Array<\n  (\n    middlewares: {\n      unshift: (...handlers: RequestHandler[]) => void;\n      push: (...handlers: RequestHandler[]) => void;\n    },\n    server: SetupMiddlewaresServer,\n  ) => void\n>;\n```\n\n----------------------------------------\n\nTITLE: Default Server Entry Implementation in Modern.js\nDESCRIPTION: Shows the default server-side entry point implementation that Modern.js generates when SSR is enabled. It handles request rendering using renderString and returns an HTML response.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/hooks/src/entry.server.mdx#2025-04-21_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  renderString,\n  createRequestHandler,\n} from '@modern-js/runtime/ssr/server';\n\nconst handleRequest = async (request, ServerRoot, options) => {\n  const body = await renderString(request, <ServerRoot />, options);\n\n  return new Response(body, {\n    headers: {\n      'content-type': 'text/html; charset=utf-8',\n    },\n  });\n};\n\nexport default createRequestHandler(handleRequest);\n```\n\n----------------------------------------\n\nTITLE: Loading File-based Routing Sub-app in Modern.js\nDESCRIPTION: React component to load a file-based routing sub-application using the useModuleApps hook from @modern-js/plugin-garfish/runtime.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/micro-frontend/c02-development.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport { useModuleApps } from '@modern-js/plugin-garfish/runtime';\n\nconst Index = () => {\n  const { Table } = useModuleApps();\n\n  return (\n    <div>\n      <Table />\n    </div>\n  );\n};\n\nexport default Index;\n```\n\n----------------------------------------\n\nTITLE: SSR Error Handling Example\nDESCRIPTION: Example showing how to handle SSR rendering errors and environment-specific code.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/render/ssr.mdx#2025-04-21_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Await, useLoaderData } from '@modern-js/runtime/router';\nimport { Suspense } from 'react';\n\nconst Page = () => {\n  const data = useLoaderData();\n  const isNode = typeof window === 'undefined';\n  const undefinedVars = data.unDefined;\n  const definedVars = data.defined;\n\n  return (\n    <div>\n      {isNode ? undefinedVars.msg : definedVars.msg}\n    </div>\n  );\n};\n\nexport default Page;\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Behavior Before Bootstrap in Modern.js\nDESCRIPTION: This snippet demonstrates how to add custom behavior before bootstrap by exporting a default function in src/index.js. The function receives the App component and calls the bootstrap function from @modern-js/runtime.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/hooks/src/index_.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport ReactDOM from 'react-dom/client';\nimport { bootstrap } from '@modern-js/runtime';\n\nexport default (App: React.ComponentType) => {\n  // do something before bootstrap...\n  bootstrap(App, 'root', undefined, ReactDOM);\n};\n```\n\n----------------------------------------\n\nTITLE: Using createStore and Store Methods in TypeScript/React\nDESCRIPTION: This example demonstrates how to create a store using createStore and use its methods, specifically the 'use' method to mount and fetch Model objects dynamically outside of React components.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/model/create-store.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst store = createStore();\n\nfunction load() {\n  const [, actions] = store.use(fooModel);\n\n  actions.load();\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Default HTML Meta Tags in JavaScript\nDESCRIPTION: Defines the default meta tag configuration object that sets various HTML meta properties including charset, viewport settings, renderer preferences, and mobile-specific settings. This configuration helps ensure proper rendering and behavior across different devices and browsers.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/html/meta.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultMeta = {\n  charset: { charset: 'utf-8' },\n  viewport: 'width=device-width, initial-scale=1.0, shrink-to-fit=no, viewport-fit=cover, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no',\n  'http-equiv': { 'http-equiv': 'x-ua-compatible', content: 'ie=edge' },\n  renderer: 'webkit',\n  layoutmode: 'standard',\n  imagemode: 'force',\n  'wap-font-scale': 'no',\n  'format-detection': 'telephone=no',\n};\n```\n\n----------------------------------------\n\nTITLE: Defining a Basic Modern.js Plugin Structure in TypeScript\nDESCRIPTION: This snippet demonstrates the structure of a typical Modern.js plugin, including its name, dependencies, setup function, and optional hooks. It shows how to import the Plugin type and define the plugin's core components.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/plugin-system.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { Plugin } from '@modern-js/plugin-v2';\n\nconst myPlugin: Plugin = {\n  name: 'my-awesome-plugin', // The unique identifier of the plugin (required)\n\n  // Plugin dependencies and execution order (optional)\n  pre: [],    // List of plugin names to execute before this plugin, defaults to an empty array\n  post: [],   // List of plugin names to execute after this plugin, defaults to an empty array\n  required: [],// List of required plugins; if a dependent plugin is not registered, an error will be thrown, defaults to an empty array\n  usePlugins: [], // List of plugin instances used internally, defaults to an empty array\n\n  // Register new Hooks (optional)\n  registryHook: {},\n\n  // The entry function of the plugin (required)\n  setup(api) {\n    // The core logic of the plugin, calling plugin APIs through the api object\n    api.modifyWebpackConfig(config => { /* ... */ });\n    api.onPrepare(() => { /* ... */ });\n    // ... Other API calls\n  },\n};\n\nexport default myPlugin;\n```\n\n----------------------------------------\n\nTITLE: Defining and Using an Array Model with Auto-generated Actions in TypeScript\nDESCRIPTION: This snippet illustrates how to define a model with an array state and use various auto-generated array manipulation actions in a React component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/auto-actions.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst countModel = model('count').define({ state: [] });\n\nfunction Counter() {\n  const [state, actions] = useModel(countModel);\n\n  useEffect(() => {\n    actions.push(1);\n    actions.pop();\n    actions.shift();\n    actions.unshift(1);\n    actions.concat([1]);\n    actions.splice(0, 1, 2);\n    actions.filter(value => value > 1);\n  }, []);\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom Entry Points in Modern.js\nDESCRIPTION: Demonstrates how to define a custom entry point in Modern.js by configuring the source.entries option in modern.config.ts. This example shows how to specify a named entry with a custom path and disable automatic mounting.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/concept/entries.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  source: {\n    entries: {\n      // Specify an entry named 'my-entry'\n      'my-entry': {\n        // Path to the entry module\n        entry: './src/my-page/index.tsx',\n        // Disable automatic generation of entry code by Modern.js\n        disableMount: true,\n      },\n    },\n    // Disable entry scanning behavior\n    disableDefaultEntries: true,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Defining a RESTful GET API in TypeScript\nDESCRIPTION: Shows how to create a GET API endpoint using Modern.js BFF functions. The function returns an object with name and description.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/bff/function.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport const get = async () => {\n  return {\n    name: 'Modern.js',\n    desc: 'A modern web engineering solution',\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Build Configuration for npm-library Preset\nDESCRIPTION: The build configuration array for the npm-library preset that generates CommonJS and ESM bundles along with TypeScript declaration files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-preset.mdx#2025-04-21_snippet_1\n\nLANGUAGE: js\nCODE:\n```\nexport const buildConfig = [\n  {\n    format: 'cjs',\n    target: 'es6',\n    buildType: 'bundle',\n    outDir: './dist/lib',\n    dts: false,\n  },\n  {\n    format: 'esm',\n    target: 'es6',\n    buildType: 'bundle',\n    outDir: './dist/es',\n    dts: false,\n  },\n  {\n    buildType: 'bundle',\n    outDir: './dist/types',\n    dts: {\n      only: true,\n    },\n  },\n];\n```\n\n----------------------------------------\n\nTITLE: Implementing shouldRevalidate Function for Route Data Reloading in TypeScript\nDESCRIPTION: This snippet demonstrates how to implement a shouldRevalidate function in a route component. This function controls when route data should be reloaded based on various navigation parameters.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/data/data-fetch.mdx#2025-04-21_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { ShouldRevalidateFunction } from '@modern-js/runtime/router';\nexport const shouldRevalidate: ShouldRevalidateFunction = ({\n  actionResult,\n  currentParams,\n  currentUrl,\n  defaultShouldRevalidate,\n  formAction,\n  formData,\n  formEncType,\n  formMethod,\n  nextParams,\n  nextUrl,\n}) => {\n  return true;\n};\n```\n\n----------------------------------------\n\nTITLE: TypeScript Definition for useNavigate Hook in Modern.js Router\nDESCRIPTION: Defines the useNavigate hook function signature and the NavigateFunction interface. This hook returns a function that allows programmatic navigation in a React application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/router/router.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare function useNavigate(): NavigateFunction;\n\ninterface NavigateFunction {\n  (\n    to: To,\n    options?: {\n      replace?: boolean;\n      state?: any;\n      relative?: RelativeRoutingType;\n    },\n  ): void;\n  (delta: number): void;\n}\n```\n\n----------------------------------------\n\nTITLE: Importing Components in Storybook Stories\nDESCRIPTION: Example of importing and using a Button component in a Storybook story file. This demonstrates how to create a basic story for a React component within Modern.js Module.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/using-storybook.mdx#2025-04-21_snippet_1\n\nLANGUAGE: ts\nCODE:\n```\nimport { Button } from '.';\n\nexport const YourStory = () => <Button />;\n\nexport default {\n  title: 'Your Stories',\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring SWC in Webpack Mode for Modern.js\nDESCRIPTION: This snippet illustrates how to configure SWC when using Webpack mode in Modern.js. It shows setting minification options for JavaScript using the tools.swc configuration object.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/swc.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig({\n  tools: {\n    swc: {\n      jsMinify: {\n        compress: {},\n        mangle: true,\n      },\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Installing Tailwind CSS via CLI\nDESCRIPTION: CLI command sequence to enable Tailwind CSS feature in Modern.js project\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/css/tailwindcss.mdx#2025-04-21_snippet_0\n\nLANGUAGE: text\nCODE:\n```\n? Please select the operation you want: Enable features\n? Please select the feature name: Enable Tailwind CSS\n```\n\n----------------------------------------\n\nTITLE: ServerContext Interface Definition\nDESCRIPTION: Interface definition for ServerContext that includes server-specific properties like request details, response manipulation methods, logger, and metrics.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/core/use-runtime-context.mdx#2025-04-21_snippet_4\n\nLANGUAGE: ts\nCODE:\n```\ninterface ServerContext {\n  isBrowser: false;\n  request: {\n    userAgent: string;\n    cookie: string;\n    cookieMap: Record<string, any>;\n    query: Record<string, any>;\n    url: string;\n    host: string;\n    headers?: IncomingHttpHeaders;\n  };\n  response: {\n    setHeader: (key: string, value: string) => void;\n    status: (code: number) => void;\n  }\n  logger: Logger;\n  metrics: Metrics;\n}\n```\n\n----------------------------------------\n\nTITLE: Advanced Proxy with Path Rewriting in Modern.js DevServer\nDESCRIPTION: Example of configuring a proxy with path rewriting. This configuration forwards requests from /api to http://localhost:3000 but removes the /api prefix from the path before forwarding.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/dev-server.mdx#2025-04-21_snippet_10\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    devServer: {\n      proxy: {\n        '/api': {\n          target: 'http://localhost:3000',\n          pathRewrite: { '^/api': '' },\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Contact Item Component Implementation\nDESCRIPTION: React component implementation for displaying contact items with archive functionality\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c06-model.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport Avatar from '../Avatar';\n\ntype InfoProps = {\n  avatar: string;\n  name: string;\n  email: string;\n  archived?: boolean;\n};\n\nconst Item = ({\n  info,\n  onArchive,\n}: {\n  info: InfoProps;\n  onArchive?: () => void;\n}) => {\n  const { avatar, name, email, archived } = info;\n  return (\n    <div className=\"flex p-4 items-center border-gray-200 border-b\">\n      <Avatar src={avatar} />\n      <div className=\"ml-4 custom-text-gray flex-1 flex justify-between\">\n        <div className=\"flex-1\">\n          <p>{name}</p>\n          <p>{email}</p>\n        </div>\n        <button\n          type=\"button\"\n          disabled={archived}\n          onClick={onArchive}\n          className={`text-white font-bold py-2 px-4 rounded-full ${\n            archived\n              ? 'bg-gray-400 cursor-default'\n              : 'bg-blue-500 hover:bg-blue-700'\n          }`}\n        >\n          {archived ? 'Archived' : 'Archive'}\n        </button>\n      </div>\n    </div>\n  );\n```\n\n----------------------------------------\n\nTITLE: Defining Route Object Interface in TypeScript\nDESCRIPTION: Declaration of the RouteObject interface, used for defining routes in React Router.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/router/router.mdx#2025-04-21_snippet_13\n\nLANGUAGE: TypeScript\nCODE:\n```\ninterface RouteObject {\n  path?: string;\n  index?: boolean;\n  children?: React.ReactNode;\n  caseSensitive?: boolean;\n  id?: string;\n  loader?: LoaderFunction;\n  action?: ActionFunction;\n  element?: React.ReactNode | null;\n  errorElement?: React.ReactNode | null;\n  handle?: RouteObject['handle'];\n  shouldRevalidate?: ShouldRevalidateFunction;\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Derived State Depending on Other Models in TypeScript\nDESCRIPTION: This example demonstrates how to define a derived state 'combinedValue' in 'barModel' that depends on the state of 'fooModel'. It combines values from both models.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/computed-state.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst fooModel = model('foo').define({\n  state: {\n    value: 'foo',\n  },\n});\n\nconst barModel = model('bar').define({\n  state: {\n    value: 'foo',\n  },\n  computed: {\n    combinedValue: [\n      fooModel,\n      (state, fooState) => state.value + fooState.value,\n    ],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Path Aliases in TypeScript\nDESCRIPTION: Example of setting up path aliases using the paths configuration in tsconfig.json. This method is recommended for TypeScript projects as it also handles type resolution.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/alias.mdx#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"compilerOptions\": {\n    \"paths\": {\n      \"@common/*\": [\"./src/common/*\"]\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Dynamic Component Loading with Loadable in TypeScript\nDESCRIPTION: Demonstrates basic usage of loadable to dynamically import a component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/utility/loadable.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport loadable from '@modern-js/runtime/loadable';\n\nconst OtherComponent = loadable(() => import('./OtherComponent'));\n```\n\n----------------------------------------\n\nTITLE: Simplifying Todo Model with handleEffect in TypeScript\nDESCRIPTION: This snippet demonstrates how to use the handleEffect utility to simplify the todo model definition. It reduces boilerplate by automatically generating actions for handling Promise states.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/model/manage-effects.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst todoModel = model('todo').define({\n  state: {\n    items: [],\n    loading: false,\n    error: null,\n  },\n  actions: {\n    load: handleEffect({ result: 'items' }),\n  },\n  effects: {\n    // Promise 副作用\n    async load() {\n      return new Promise(resolve => {\n        setTimeout(() => resolve(['Learn Modern.js']), 2000);\n      });\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: About Page Component in Modern.js\nDESCRIPTION: React component implementation for the about page with navigation link back to Home page.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/testing/playwright.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Link } from '@modern-js/runtime/router';\n\nconst Index = () => (\n  <div>\n    <h1>About</h1>\n    <Link to=\"/\">Home</Link>\n  </div>\n);\n\nexport default Index;\n```\n\n----------------------------------------\n\nTITLE: Cache Configuration with Request-based Logic\nDESCRIPTION: Advanced cache configuration using a function provider to customize caching behavior based on request parameters.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/render/ssr-cache.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { CacheOption, CacheOptionProvider } from '@modern-js/runtime/server;\n\nconst provider: CacheOptionProvider = (req) => {\n  const { url, headers, ... } = req;\n  if(url.includes('no-cache=1')) {\n    return false;\n  }\n\n  const key = computedKey(url, headers, ...);\n  return {\n    maxAge: 500, // ms\n    staleWhileRevalidate: 1000, // ms\n    customKey: key,\n  }\n}\n\nexport const cacheOption: CacheOption = provider;\n```\n\n----------------------------------------\n\nTITLE: CSS Modules Configuration\nDESCRIPTION: Configuration to enable CSS Modules for all CSS files in Modern.js\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/css/css-modules.mdx#2025-04-21_snippet_2\n\nLANGUAGE: ts\nCODE:\n```\nexport default {\n  output: {\n    disableCssModuleExtension: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Module Federation for Consumer Application\nDESCRIPTION: This configuration sets up the Module Federation for the consumer application, defining the module name, remote modules, and shared dependencies.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/module-federation/usage.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createModuleFederationConfig } from '@module-federation/modern-js';\n\nexport default createModuleFederationConfig({\n  name: 'host',\n  remotes: {\n    remote: 'remote@http://localhost:3051/static/mf-manifest.json',\n  },\n  shared: {\n    react: { singleton: true },\n    'react-dom': { singleton: true },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Creating a Basic Plugin in Modern.js Module\nDESCRIPTION: Implements a simple plugin that logs messages during initialization and after the build process. Shows the basic plugin structure with name, setup function, and lifecycle hooks.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/guide/getting-started.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { CliPlugin, ModuleTools } from '@modern-js/module-tools';\n\nexport const ExamplePlugin = (): CliPlugin<ModuleTools> => {\n  return {\n    name: 'example',\n    setup() {\n      console.info('this is example plugin');\n      return {\n        // use hooks\n        afterBuild() {\n          console.info('build over');\n        },\n      };\n    },\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Importing Image Assets with Alias in TypeScript React Component\nDESCRIPTION: Shows how to import an image asset using an alias path instead of a relative path. This is useful for maintaining consistent import paths across a project.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/static-assets.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport logo from '@/static/logo.png';\n\nexport default = () => <img src={logo} />;\n```\n\n----------------------------------------\n\nTITLE: Implementing App Component for Self-Controlled Routing Sub-App\nDESCRIPTION: React component that sets up routing for a self-controlled routing sub-application, using the basename from props for proper path resolution.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/micro-frontend/c02-development.mdx#2025-04-21_snippet_7\n\nLANGUAGE: js\nCODE:\n```\nimport { BrowserRouter, Route, Routes } from '@modern-js/runtime/router';\n\nexport default (props: { basename: string }) => {\n  const { basename } = props;\n\n  return (\n    <BrowserRouter basename={basename}>\n      <Routes>\n        <Route index element={<div>自控式路由子应用根路由</div>} />\n        <Route path={'path'} element={<div>自控式路由子应用子路由</div>} />\n      </Routes>\n    </BrowserRouter>\n  );\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Modern.js Runtime with Micro Applications\nDESCRIPTION: This runtime configuration file defines the micro applications that will be integrated using Garfish. It specifies two applications ('Table' and 'Dashboard') with their respective entry points, both running on different ports.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/components/enable-micro-frontend.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineRuntimeConfig } from '@modern-js/runtime';\n\nexport default defineRuntimeConfig({\n  masterApp: {\n    apps: [{\n      name: 'Table',\n      entry: 'http://localhost:8081',\n      // activeWhen: '/table'\n    }, {\n      name: 'Dashboard',\n      entry: 'http://localhost:8082'\n      // activeWhen: '/dashboard'\n    }]\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Manual Routes for SSG\nDESCRIPTION: Configuration for enabling SSG on specific routes in manual routing setup.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/render/ssg.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  output: {\n    ssg: {\n      routes: ['/', '/about'],\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using a Count Model with Auto-generated Actions in React\nDESCRIPTION: This example shows how to use the previously defined count model in a React component. It demonstrates the use of the useModel hook and the auto-generated setState action to modify the state.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/auto-actions.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Counter() {\n  const [state, actions] = useModel(countModel);\n\n  useEffect(() => {\n    // Add 1\n    actions.setState(state + 1);\n  }, []);\n}\n```\n\n----------------------------------------\n\nTITLE: Importing NoSSR Component from Modern.js Runtime\nDESCRIPTION: This code snippet demonstrates how to import the NoSSR utility component from Modern.js runtime, which is used to prevent specific content from being rendered on the server.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/render/ssr.mdx#2025-04-21_snippet_7\n\nLANGUAGE: ts\nCODE:\n```\nimport { NoSSR } from '@modern-js/runtime/ssr';\n```\n\n----------------------------------------\n\nTITLE: Configuring Webpack for Production in Modern.js\nDESCRIPTION: This snippet shows how to modify the webpack configuration specifically for production builds using the isProd utility parameter.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/webpack.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    webpack: (config, { isProd }) => {\n      if (isProd) {\n        config.devtool = 'source-map';\n      }\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Middleware After Dev Middleware in Modern.js\nDESCRIPTION: Example of adding custom middleware that executes after all development environment middlewares using the tools.devServer.after configuration. This middleware logs a message and calls next() to continue the request chain.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/dev-server.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    devServer: {\n      after: [\n        async (req, res, next) => {\n          console.log('after dev middleware');\n          next();\n        },\n      ],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing Basic Data Type Auto Actions in Reduck\nDESCRIPTION: Demonstrates how Reduck automatically generates setState action for primitive state types like number. The example shows a counter implementation using the auto-generated setState action.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/model/auto-actions.mdx#2025-04-21_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nconst fooModel = model('foo').define({\n  state: 1,\n});\n\nfunction App() {\n  const [state, actions] = useModel(fooModel);\n\n  return (\n    <div>\n      <div>State: {state}</div>\n      <button\n        type=\"button\"\n        onClick={() => {\n          // 调用自动生成的 setState Action\n          actions.setState(state + 1);\n        }}\n      >\n        add\n      </button>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Webpack Chain in Modern.js\nDESCRIPTION: Shows how to modify Webpack configuration using webpack-chain through the modifyWebpackChain API. Used for adding custom loaders and rules.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/cli-plugins/api.mdx#2025-04-21_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\napi.modifyWebpackChain((chain, utils) => {\n  // Add a custom Webpack loader\n  chain.module\n    .rule('my-loader')\n    .test(/\\.my-ext$/)\n    .use('my-loader')\n    .loader(require.resolve('./my-loader'));\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Middleware in Modern.js Web Server\nDESCRIPTION: Basic implementation of middleware in Modern.js. Shows how to export a single middleware function or an array of multiple middleware functions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/web-server/middleware.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Middleware } from '@modern-js/runtime/server';\n\nexport const middleware: Middleware = async (context, next) => {};\nexport const middleware: Middleware[] = [\n  async (context, next) => {},\n  async (context, next) => {},\n];\n```\n\n----------------------------------------\n\nTITLE: Configuring Remote App List in Modern.js Runtime\nDESCRIPTION: Demonstrates how to configure a custom remote app list using defineRuntimeConfig to dynamically fetch and register sub-applications.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/micro-frontend/c03-main-app.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineRuntimeConfig } from '@modern-js/runtime';\n\nexport default defineRuntimeConfig({\n  masterApp: {\n    manifest: {\n      getAppList: async () => {\n        // get from remote api\n        return [\n          {\n            name: 'Table',\n            entry: 'http://localhost:8081',\n            // activeWhen: '/table'\n          },\n          {\n            name: 'Dashboard',\n            entry: 'http://localhost:8082',\n            // activeWhen: '/dashboard'\n          },\n        ];\n      },\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Custom Server Entry Implementation in Modern.js\nDESCRIPTION: Demonstrates how to create a custom server-side entry point with additional functionality like pre-render operations and custom headers. Shows implementation in src/entry.server.tsx.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/hooks/src/entry.server.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { renderString, createRequestHandler } from '@modern-js/runtime/ssr/server';\nimport type { HandleRequest } from '@modern-js/runtime/ssr/server';\n\nconst handleRequest: HandleRequest = async (request, ServerRoot, options) => {\n  // do something before rendering\n  const body = await renderString(request, <ServerRoot />, options);\n\n  const newBody = body + '<div>Byte-Dance</div>';\n\n  return new Response(newBody, {\n    headers: {\n      'content-type': 'text/html; charset=UTF-8',\n      'x-custom-header': 'abc',\n    },\n  });\n};\n\nexport default createRequestHandler(handleRequest);\n```\n\n----------------------------------------\n\nTITLE: Advanced Usage of renderStreaming with Stream Transformation\nDESCRIPTION: Demonstrates an advanced use case of renderStreaming, including pre-render operations and stream transformation using TransformStream. It shows how to modify the stream before sending it as a response.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/ssr/renderStreaming.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n  renderStreaming,\n  createRequestHandler,\n} from '@modern-js/runtime/ssr/server';\n\nconst handleRequest = async (request, ServerRoot, options) => {\n  // do something before render\n  const stream = await renderStreaming(request, <ServerRoot />, options);\n\n  // docs: https://developer.mozilla.org/en-US/docs/Web/API/TransformStream\n  const transformStream = new TransformStream({\n    transform(chunk, controller) {\n      // do some transform\n    },\n  });\n\n  stream.pipeThrough(transformStream);\n\n  return new Response(transformStream.readable, {\n    headers: {\n      'content-type': 'text/html; charset=utf-8',\n    },\n  });\n};\n\nexport default createRequestHandler(handleRequest);\n```\n\n----------------------------------------\n\nTITLE: Defining a Runtime Plugin in TypeScript for Modern.js\nDESCRIPTION: This snippet demonstrates how to define a runtime plugin in Modern.js. It uses the RuntimePluginFuture type and implements the onBeforeRender hook to execute logic before rendering.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/render/before-render.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { RuntimePluginFuture } from '@modern-js/runtime';\n\nconst myRuntimePlugin = (): RuntimePluginFuture => ({\n  name: 'my-runtime-plugin',\n  setup: (api) => {\n    api.onBeforeRender((context) => {\n      // Logic to execute before rendering\n      console.log('Before rendering:', context);\n    });\n  },\n});\n\nexport default myRuntimePlugin;\n```\n\n----------------------------------------\n\nTITLE: Basic Model Definition in JavaScript with State and Actions\nDESCRIPTION: Shows how to create a basic Model named 'foo' with state and actions using the model API. The example includes a simple state value and a setValue action that modifies the state.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/define-model.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { model, useModel } from '@modern-js/runtime/model';\n\nconst fooModel = model('foo').define({\n  state: {\n    value: 'foo',\n  },\n  actions: {\n    setValue: (state, payload){\n      state.value = payload\n    }\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Derivative State Caching with Reselect\nDESCRIPTION: Demonstrates how to optimize computed properties using reselect for caching derived state calculations, preventing unnecessary recalculations during component re-renders.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/performance.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst barModel = model('bar').define({\n  state: {\n    value: 'bar',\n  },\n  computed: {\n    combineA: [\n      fooModel,\n      (state, fooState) => {\n        return state + fooState.a;\n      },\n    ],\n  },\n  actions: {\n    setValue(state, payload) {\n      state.value = payload;\n    },\n  },\n});\n\nfunction ComponentB() {\n  const [state, actions] = useModel(fooModel);\n  const [{ combineA }] = useModel(barModel);\n  // ...\n}\n```\n\nLANGUAGE: typescript\nCODE:\n```\nimport 'createSelector' from 'reselect';\n\n// create cache function\nconst selectCombineA = createSelector(\n  (state) => state.bar.value,\n  (state) => state.foo.a,\n  (barState, fooState) => {\n    return barState + fooState;\n  }\n);\n\nconst barModel = model(\"bar\").define({\n  state: {\n    value: \"bar\",\n  },\n  computed: {\n    combineA: [\n      fooModel,\n      (state, fooState) => {\n        return selectCombineA({\n          foo: fooState,\n          bar: state,\n        });\n      },\n    ],\n  },\n  actions: {\n    setValue(state, payload) {\n      state.value = payload;\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Creating a Custom HTML Template with JSX Components\nDESCRIPTION: Example of a custom Document.tsx file that uses Modern.js document components to define an HTML template with access to build-time parameters through DocumentContext.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/html.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport React, { useContext } from 'react';\nimport {\n  Html,\n  Root,\n  Head,\n  Body,\n  Comment,\n  DocumentContext,\n} from '@modern-js/runtime/document';\n\nexport default function Document(): React.ReactElement {\n  // DocumentContext 提供一些构建时的参数\n  const {\n    config: { output: htmlConfig },\n    entryName,\n    templateParams,\n  } = useContext(DocumentContext);\n\n  return (\n    <Html>\n      <Head>\n        <link href=\"https://modernjs.dev\" />\n        <Comment>{'<!-- Need a Comment -->'}</Comment>\n      </Head>\n      <Body>\n        <Root rootId=\"root\">\n          <h1 style={{ color: 'red' }}>以下为构建时传过来的参数：</h1>\n          <h2>entryName: {entryName}</h2>\n          <h2>title: {htmlConfig.title}</h2>\n          <h2>rootId: {templateParams.mountId}</h2>\n        </Root>\n        <h1>bottom</h1>\n      </Body>\n    </Html>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Registering Module Federation Plugin in Modern.js Config\nDESCRIPTION: This snippet shows how to register the Module Federation plugin in the Modern.js configuration file. It sets up the runtime router and configures the bundler to use Rspack.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/module-federation/usage.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { appTools, defineConfig } from '@modern-js/app-tools';\nimport { moduleFederationPlugin } from '@module-federation/modern-js';\n\nexport default defineConfig({\n  runtime: {\n    router: true,\n  },\n  plugins: [\n    appTools({\n      bundler: 'rspack',\n    }),\n    moduleFederationPlugin(),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring CLI Plugins in Modern.js\nDESCRIPTION: This snippet demonstrates how to configure custom CLI plugins in the Modern.js framework using the 'plugins' option in the configuration file. It shows how to import and use plugins from npm and local sources.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/plugins.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { myPlugin } from 'my-plugin';\n\nexport default defineConfig({\n  plugins: [myPlugin()],\n});\n```\n\nLANGUAGE: typescript\nCODE:\n```\nimport { myPlugin } from './config/plugin/myPlugin';\n\nexport default defineConfig({\n  plugins: [myPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Archived Contacts Page in Modern.js\nDESCRIPTION: The archived contacts page component that uses the contacts model to display and manage the list of archived contacts. It renders a list of archived contacts and handles unarchiving.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/tutorials/first-app/c07-container.mdx#2025-04-21_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Helmet } from '@modern-js/runtime/head';\nimport { useModel } from '@modern-js/runtime/model';\nimport { List } from 'antd';\nimport Item from '../../components/Item';\nimport contacts from '../../models/contacts';\n\nfunction Index() {\n  const [{ archived }, { archive }] = useModel(contacts);\n\n  return (\n    <div className=\"container lg mx-auto\">\n      <Helmet>\n        <title>Archives</title>\n      </Helmet>\n      <List\n        dataSource={archived}\n        renderItem={info => (\n          <Item\n            key={info.name}\n            info={info}\n            onArchive={() => {\n              archive(info.email);\n            }}\n          />\n        )}\n      />\n    </div>\n  );\n}\n\nexport default Index;\n```\n\n----------------------------------------\n\nTITLE: Module Federation Producer Configuration\nDESCRIPTION: Configuration for the producer application, specifying module name, shared dependencies, and exposed components.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/module-federation/usage.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createModuleFederationConfig } from '@module-federation/modern-js';\n\nexport default createModuleFederationConfig({\n  name: 'remote',\n  manifest: {\n    filePath: 'static',\n  },\n  filename: 'static/remoteEntry.js',\n  exposes: {\n    './Button': './src/components/Button.tsx',\n  },\n  shared: {\n    react: { singleton: true },\n    'react-dom': { singleton: true },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Defining the useStore Hook Signature in TypeScript\nDESCRIPTION: The function signature for the useStore hook, which returns a ReduckStore instance. This hook allows components to access the shared Reduck store within the component tree hierarchy.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/model/use-store.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction useStore(): ReduckStore;\n```\n\n----------------------------------------\n\nTITLE: Creating Layout with Navigation Links in Modern.js\nDESCRIPTION: React component defining the layout with navigation links for different routes in a micro frontend application using Modern.js.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/micro-frontend/c02-development.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Outlet, Link } from '@modern-js/runtime/router';\n\nconst Layout = () => (\n  <div>\n    <div>\n      <Link to={'/table'}>Load file-base routing sub-app</Link>\n    </div>\n    <div>\n      <Link to={'/dashboard'}>Load self-controlled routing sub-app</Link>\n    </div>\n    <div>\n      <Link to={'/'}>unmount sub-app</Link>\n    </div>\n    <Outlet />\n  </div>\n);\n\nexport default Layout;\n```\n\n----------------------------------------\n\nTITLE: Advanced SSG Route Configuration - TypeScript\nDESCRIPTION: Complex SSG configuration example with multiple routes, custom headers, and parameter replacement for dynamic routes.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/ssg.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  output: {\n    ssg: {\n      routes: [\n        '/',\n        '/about',\n        {\n          url: '/user/:id',\n          headers: {\n            cookies: 'name=modernjs',\n          },\n          params: [\n            {\n              id: 'modernjs',\n            },\n          ],\n        },\n      ],\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Layout Component with Data Loading in Modern.js\nDESCRIPTION: Shows how to implement a layout component that loads data and initializes a shared model. The component uses useLoaderData to retrieve contact information and populates the contacts model if it's empty.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c07-container.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { name, internet } from 'faker';\nimport {\n  Outlet,\n  useLoaderData,\n  useLocation,\n  useNavigate,\n} from '@modern-js/runtime/router';\nimport { useState } from 'react';\nimport { Radio, RadioChangeEvent } from 'antd';\nimport { useModel } from '@modern-js/runtime/model';\nimport contacts from '../models/contacts';\nimport 'tailwindcss/base.css';\nimport 'tailwindcss/components.css';\nimport 'tailwindcss/utilities.css';\nimport '../styles/utils.css';\nimport type { LoaderData } from './layout.data';\n\nexport default function Layout() {\n  const { data } = useLoaderData() as LoaderData;\n  const [{ items }, { setItems }] = useModel(contacts);\n  if (items.length === 0) {\n    setItems(data);\n  }\n\n  const navigate = useNavigate();\n  ...\n}\n```\n\n----------------------------------------\n\nTITLE: Using Remote Module in Consumer Application\nDESCRIPTION: This React component demonstrates how to use a remote module (Button) from the producer application in the consumer application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/module-federation/usage.mdx#2025-04-21_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport React, { useState, Suspense } from 'react';\nimport { Button } from 'remote/Button';\n\nconst Index = (): JSX.Element => {\n  return (\n    <div>\n      <Suspense fallback={<div>Loading...</div>}>\n        <Button />\n      </Suspense>\n    </div>\n  );\n};\n\nexport default Index;\n```\n\n----------------------------------------\n\nTITLE: Implementing Layout Component with Navigation\nDESCRIPTION: Layout component implementation with radio button navigation and routing logic using React Router hooks and Ant Design Radio component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c04-routes.mdx#2025-04-21_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useState } from 'react';\nimport { Radio, RadioChangeEvent } from 'antd';\nimport { Outlet, useLocation, useNavigate } from '@modern-js/runtime/router';\n\nexport default function Layout() {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [currentList, setList] = useState(location.pathname || '/');\n  const handleSetList = (e: RadioChangeEvent) => {\n    const { value } = e.target;\n    setList(value);\n    navigate(value);\n  };\n  return (\n    <div>\n      <div className=\"h-16 p-2 flex items-center justify-center\">\n        <Radio.Group onChange={handleSetList} value={currentList}>\n          <Radio value=\"/\">All</Radio>\n          <Radio value=\"/archives\">Archives</Radio>\n        </Radio.Group>\n      </div>\n      <Outlet />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Using Garfish.channel for Inter-Application Communication in Modern.js (TypeScript)\nDESCRIPTION: This snippet illustrates how to use Garfish.channel for event-based communication between applications. It shows a sub-application listening for a 'login' event and a main application emitting the event.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/micro-frontend/c04-communicate.mdx#2025-04-21_snippet_2\n\nLANGUAGE: ts\nCODE:\n```\n// sub app listen login event\nconst App = () => {\n  const handleLogin = userInfo => {\n    console.log(`${userInfo.name} has login`);\n  };\n\n  useEffect(() => {\n    window?.Garfish.channel.on('login', handleLogin);\n    return () => {\n      window?.Garfish.channel.removeListener('login', handleLogin);\n    };\n  });\n};\n\n// main app emit login event\napi.getLoginInfo.then(res => {\n  if (res.code === 0) {\n    window.Garfish.channel.emit('login', res.data);\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: React Component Using CSS Module\nDESCRIPTION: Demonstrates how to import and use CSS Module styles in a React component\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/css/css-modules.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n// Button.tsx\nimport React, { Component } from 'react';\n// import style file\nimport styles from './button.module.css';\n\nexport default () => {\n  return <button className={styles.error}>Error Button</button>;\n};\n```\n\n----------------------------------------\n\nTITLE: Dynamic Configuration Function\nDESCRIPTION: Example of exporting a function to dynamically compute configuration based on environment and command parameters.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/usage.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nimport { defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig(({ env, command }) => ({\n  source: {\n    alias: {\n      '@foo': env === 'development' ? './src/foo.dev.ts' : './src/foo.prod.ts',\n    },\n  },\n}));\n```\n\n----------------------------------------\n\nTITLE: Defining Express Server Instance for BFF in Modern.js\nDESCRIPTION: This snippet shows how to define a custom Express server instance in api/app.ts. It creates a simple logging middleware that logs all API access URLs before proceeding with the request.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/bff/extend-server.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport express from 'express';\n\nconst app = express();\napp.use(async (req, res, next) => {\n  console.info(`access url: ${req.url}`);\n  next();\n});\n\nexport default app;\n```\n\n----------------------------------------\n\nTITLE: Configuring Reduck Provider with Custom Options in React\nDESCRIPTION: This example shows how to configure Reduck features when using it independently. It uses the Provider component's 'config' prop to disable Redux DevTools, which is typically done through runtime.state in Modern.js.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/model/use-out-of-modernjs.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst Root = () => {\n  return (\n    {/* 关闭 Redux DevTools */}\n    <Provider config={{ devTools: false }}>\n      <App />\n    </Provider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Styled Button Component with Dynamic Color in JavaScript\nDESCRIPTION: This example shows how to create a button component with dynamic styling based on props using styled-components in Modern.js. The button's color changes based on the 'primary' prop.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/css/css-in-js.mdx#2025-04-21_snippet_1\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport styled from '@modern-js/runtime/styled';\n\nconst Button = styled.button`\n  color: ${props => (props.primary ? 'white' : 'red')};\n  font-size: 1em;\n`;\n```\n\n----------------------------------------\n\nTITLE: Creating a Custom 404 Page with Wildcard Routes\nDESCRIPTION: Example of creating a custom 404 Not Found page using wildcard routes to catch all unmatched routes in the application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/routes.mdx#2025-04-21_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Page404() {\n  return <div>404 Not Found</div>;\n}\nexport default Page404;\n```\n\n----------------------------------------\n\nTITLE: Using Route Component with JSX in Modern.js Router\nDESCRIPTION: Example of how to declare routes with JSX and createRoutesFromElements. Shows defining a route with element, path, loader, action, and errorElement props.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/router/router.mdx#2025-04-21_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\nconst router = createBrowserRouter(\n  createRoutesFromElements(\n    <Route\n      element={<Team />}\n      path=\"teams/:teamId\"\n      loader={async ({ params }) => {\n        return fetch(`/fake/api/teams/${params.teamId}.json`);\n      }}\n      action={async ({ request }) => {\n        return updateFakeTeam(await request.formData());\n      }}\n      errorElement={<ErrorBoundary />}\n    />,\n  ),\n);\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Webpack Rules in Modern.js\nDESCRIPTION: This example demonstrates how to add custom webpack rules using the addRules utility function. It shows adding both single and multiple rules.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/webpack.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    webpack: (config, { addRules }) => {\n      // add a single rule\n      addRules({\n        test: /\\.foo/,\n        loader: require.resolve('foo-loader'),\n      });\n\n      // Add multiple rules as an array\n      addRules([\n        {\n          test: /\\.foo/,\n          loader: require.resolve('foo-loader'),\n        },\n        {\n          test: /\\.bar/,\n          loader: require.resolve('bar-loader'),\n        },\n      ]);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Customizing Styled Components Configuration with Object in Modern.js\nDESCRIPTION: This example demonstrates how to customize the styled-components configuration by providing an object. It overrides the 'pure' setting while keeping other default values.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/styled-components.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    styledComponents: {\n      pure: false,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining HTML Script Loading Option in Modern.js\nDESCRIPTION: This code snippet defines the html.scriptLoading configuration option in Modern.js. It specifies the type as a string union of 'defer', 'blocking', or 'module', with a default value of 'defer'. This option is used to control how <script> tags are loaded in the HTML output.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/html/script-loading.mdx#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n- **Type:** `'defer' | 'blocking' | 'module'`\n- **Default:** `'defer'`\n```\n\n----------------------------------------\n\nTITLE: Using Model Outside React Components in TypeScript\nDESCRIPTION: Demonstrates how to use Model outside of React components by obtaining and using the store object.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/use-model.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nlet store; // Reference to `store` object outside of the component\nfunction setStore(s) {\n  store = s;\n}\nfunction getStore() {\n  return store;\n}\n\nfunction Counter() {\n  const [state] = useModel(countModel);\n  const store = useStore();\n  // Avoid unnecessary duplicate settings through `useMemo`\n  useMemo(() => {\n    setStore(store);\n  }, [store]);\n\n  return (\n    <div>\n      <div>counter: {state.value}</div>\n    </div>\n  );\n}\n\nsetInterval(() => {\n  const store = getStore();\n  const [, actions] = store.use(countModel);\n  actions.add();\n}, 1000);\n```\n\n----------------------------------------\n\nTITLE: Using Todo Model in React Component\nDESCRIPTION: Shows how to use the todo model within a React component, including handling loading states and rendering the todo list.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/manage-effects.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nfunction Todo() {\n  const [state, actions] = useModel(todoModel);\n\n  useEffect(() => {\n    // invoke effects function\n    actions.load();\n  }, []);\n\n  if (state.loading) {\n    return <div>loading....</div>;\n  }\n\n  return (\n    <div>\n      <div>\n        {state.items.map((item, index) => (\n          <div key={index}>{item}</div>\n        ))}\n      </div>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Exporting a Button Component in React\nDESCRIPTION: This code defines a simple React Button component that will be exported as a Module Federation module.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/module-federation/usage.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport React from 'react';\n\nexport const Button = () => {\n  return <button type=\"button\">Remote Button</button>;\n};\n```\n\n----------------------------------------\n\nTITLE: Using Prefetch Attribute in Modern.js Link Component\nDESCRIPTION: Demonstrates how to use the prefetch attribute in a Modern.js Link component to preload static resources and data for improved performance.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/routes.mdx#2025-04-21_snippet_11\n\nLANGUAGE: tsx\nCODE:\n```\n<Link prefetch=\"intent\" to=\"page\">\n```\n\n----------------------------------------\n\nTITLE: Data Injection Middleware Implementation\nDESCRIPTION: Shows how to implement middleware for injecting server data for DataLoader consumption, including type definitions and server setup.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/web-server/unstable_middleware.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport type Vars = {\n  message: string;\n};\n```\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n  UnstableMiddleware,\n  UnstableMiddlewareContext,\n} from '@modern-js/runtime/server';\nimport type { Vars } from '../shared/index';\n\nconst setPayload: UnstableMiddlewaree<Vars> = async (\n  c: UnstableMiddlewareContext<Vars>,\n  next,\n) => {\n  c.set('message', 'facker');\n\n  await next();\n};\n\nexport const unstableMiddleware: UnstableMiddleware<Vars>[] = [setPayload];\n```\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { Payload } from '../../shared/index';\nimport { LoaderFunctionArgs } from '@modern-js/runtime/router';\n\nexport const loader = async ({ context }: LoaderFunctionArgs<Vars>) => {\n  const message = context?.get('message');\n\n  // ...\n};\n```\n\n----------------------------------------\n\nTITLE: Initializing Modern.js Module Project with CLI\nDESCRIPTION: Use the @modern-js/create command to initialize an npm project for component development. This interactive CLI prompts for project type, name, language, and package manager.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/best-practices/components.mdx#2025-04-21_snippet_0\n\nLANGUAGE: text\nCODE:\n```\nnpx @modern-js/create@latest components-project\n\n? Please select the type of project you want to create: Npm Module\n? Please fill in the project name: components-demo\n? Please select the programming language: TS\n? Please select the package manager: pnpm\n```\n\n----------------------------------------\n\nTITLE: TypeScript Definition for Route Object in Modern.js Router\nDESCRIPTION: Defines the RouteObject interface that represents route information. A Route object couples URL segments to components, data loading, and data mutations.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/router/router.mdx#2025-04-21_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\ninterface RouteObject {\n  path?: string;\n  index?: boolean;\n  children?: React.ReactNode;\n  caseSensitive?: boolean;\n  id?: string;\n  loader?: LoaderFunction;\n  action?: ActionFunction;\n  element?: React.ReactNode | null;\n  errorElement?: React.ReactNode | null;\n  handle?: RouteObject['handle'];\n  shouldRevalidate?: ShouldRevalidateFunction;\n}\n```\n\n----------------------------------------\n\nTITLE: Enabling SSR for Development Debugging\nDESCRIPTION: Configuration to enable Server-Side Rendering during development for testing SSG functionality.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/render/ssg.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  server: {\n    ssr: process.env.NODE_ENV === 'development',\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Using Utility Types to Get Model Type Information\nDESCRIPTION: Example showing how to use the GetModelState and GetModelActions utility types to retrieve type information from Reduck models.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/typescript-best-practice.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport const foo = model<State2>('foo').define({\n  // skip some codes\n});\n\n// get the State type of foo\nlet fooActions: GetModelActions<typeof foo>;\n// get the Actions type of foo\nlet fooState: GetModelState<typeof foo>;\n```\n\n----------------------------------------\n\nTITLE: Implementing Derived State in Reduck Model with TypeScript\nDESCRIPTION: Shows how to define a computed property in a Reduck model that depends on its own state and another model's state. This setup can lead to unnecessary recalculations during re-renders.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/model/performance.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst barModel = model('bar').define({\n  state: {\n    value: 'bar',\n  },\n  computed: {\n    combineA: [\n      fooModel, // fooModel 定义同上\n      (state, fooState) => {\n        return state + fooState.a;\n      },\n    ],\n  },\n  actions: {\n    setValue(state, payload) {\n      state.value = payload;\n    },\n  },\n});\n\nfunction ComponentB() {\n  const [state, actions] = useModel(fooModel);\n  const [{ combineA }] = useModel(barModel);\n  // 省略\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing File Upload with Integrated BFF Calling in React\nDESCRIPTION: This React component demonstrates how to upload files using Modern.js's integrated BFF calling pattern. It imports the upload function directly from the API and calls it with the selected files. The component includes a file input and an upload button to trigger the process.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/bff-upload.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { upload } from '@api/upload';\nimport React from 'react';\n\nexport default (): JSX.Element => {\n  const [file, setFile] = React.useState<FileList | null>();\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setFile(e.target.files);\n  };\n\n  const handleUpload = () => {\n    if (!file) {\n      return;\n    }\n    upload({\n      files: {\n        images: file,\n      },\n    });\n  };\n\n  return (\n    <div>\n      <input multiple type=\"file\" onChange={handleChange} />\n      <button onClick={handleUpload}>upload</button>\n    </div>\n  );\n};\n```\n\n----------------------------------------\n\nTITLE: Defining and Using a Simple Object Model with Auto-generated Actions in TypeScript\nDESCRIPTION: This example shows how to define a model with a simple object state and use auto-generated setter actions for each property in a React component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/auto-actions.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst countModel = model('count').define({\n  state: {\n    a: 1,\n    b: [],\n    c: {},\n  },\n});\n\nfunction Counter() {\n  const [state, actions] = useModel(countModel);\n\n  useEffect(() => {\n    actions.setA(2);\n    actions.setB([1]);\n    actions.setC({ a: 1 });\n  }, []);\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Contact List with Ant Design in Modern.js\nDESCRIPTION: This snippet demonstrates how to implement a styled contact list using Ant Design's List component. The component renders each contact with their avatar, name, and email address using List.Item and List.Item.Meta components.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c02-component.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nfunction App() {\n  return (\n    <div>\n      <List\n        dataSource={mockData}\n        renderItem={({ name, email, avatar }) => (\n          <List.Item key={name}>\n            <List.Item.Meta\n              avatar={<img alt=\"avatar\" src={avatar} width={60} height={60} />}\n              title={name}\n              description={email}\n            />\n          </List.Item>\n        )}\n      />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Using Derived State in React Component with TypeScript\nDESCRIPTION: This snippet shows how to use the derived state 'visibleTodos' in a React component. It accesses the state through the useModel hook and renders the filtered todo items.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/computed-state.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nfunction Todo() {\n  const [state, actions] = useModel(todoModel);\n\n  return (\n    <div>\n      <div>\n        {state.visibleTodos.map(item => (\n          <div key={item.id}>{item.text}</div>\n        ))}\n      </div>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Basic Model in TypeScript\nDESCRIPTION: Demonstrates how to create a basic model with a unique identifier using the model function.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/model/model_.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nmodel('foo');\n```\n\n----------------------------------------\n\nTITLE: Manually Registering Plugins in Modern.js (TypeScript)\nDESCRIPTION: This snippet demonstrates how to manually register plugins in Modern.js using the plugins array in the configuration file. It shows registering the appTools and bffPlugin.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/auto-load-plugin.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { appTools, defineConfig } from '@modern-js/app-tools';\nimport { bffPlugin } from '@modern-js/plugin-bff';\n\nexport default defineConfig({\n  plugins: [appTools(), bffPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Babel with Object API\nDESCRIPTION: Example of using the Object type of tools.babel to modify Babel configuration by merging custom plugins with the default configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/babel.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    babel: {\n      plugins: [\n        [\n          'babel-plugin-import',\n          {\n            libraryName: 'xxx-components',\n            libraryDirectory: 'es',\n            style: true,\n          },\n        ],\n      ],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing Layout Component with Data Loading in Modern.js\nDESCRIPTION: The layout component that uses the loader data and initializes the contacts model. It also handles navigation and rendering of child routes.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/tutorials/first-app/c07-container.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { name, internet } from 'faker';\nimport {\n  Outlet,\n  useLoaderData,\n  useLocation,\n  useNavigate,\n} from '@modern-js/runtime/router';\nimport { useState } from 'react';\nimport { Radio, RadioChangeEvent } from 'antd';\nimport { useModel } from '@modern-js/runtime/model';\nimport contacts from '../models/contacts';\nimport 'tailwindcss/base.css';\nimport 'tailwindcss/components.css';\nimport 'tailwindcss/utilities.css';\nimport '../styles/utils.css';\nimport type { LoaderData } from './layout.data';\n\nexport default function Layout() {\n  const { data } = useLoaderData() as LoaderData;\n  const [{ items }, { setItems }] = useModel(contacts);\n  if (items.length === 0) {\n    setItems(data);\n  }\n\n  const navigate = useNavigate();\n  ...\n```\n\n----------------------------------------\n\nTITLE: 在微前端子应用中访问主应用的 Model\nDESCRIPTION: 演示了如何在微前端子应用中导入并使用主应用的 Model。子应用通过 useModel hook 引用主应用的 todoModel，如果该 Model 在主应用尚未挂载，会自动挂载到子应用上。\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/model/faq.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useModel } from '@modern-js/runtime/model';\nimport parentModel from '@MasterApp/models/todoModel';\n\nfunction SubModelApp() {\n  const [state, actions] = useModel(parentModel);\n\n  return <div>...</div>;\n}\n```\n\n----------------------------------------\n\nTITLE: Default Tailwind CSS Configuration in Modern.js\nDESCRIPTION: Shows the default Tailwind CSS configuration object that Modern.js uses, which defines content paths for scanning Tailwind classes in project files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/tailwindcss.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst tailwind = {\n  content: [\n    './src/**/*.{js,jsx,ts,tsx}',\n    './config/html/**/*.{html,ejs,hbs}',\n    './storybook/**/*',\n  ],\n};\n```\n\n----------------------------------------\n\nTITLE: Server-Specific Webpack Configuration\nDESCRIPTION: Example of applying webpack configurations specifically for Node.js server environment using isServer flag.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/webpack-chain.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    webpackChain: (chain, { isServer }) => {\n      if (isServer) {\n        // ...\n      }\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining a RESTful POST API in TypeScript\nDESCRIPTION: Demonstrates how to create a POST API endpoint using Modern.js BFF functions. The function returns an object with name and description.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/bff/function.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport const post = async () => {\n  return {\n    name: 'Modern.js',\n    desc: 'A modern web engineering solution',\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing an Item component with Tailwind CSS\nDESCRIPTION: This React component implements an Item using Tailwind CSS utility classes for styling. It displays an avatar, name, email, and an archive button.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c03-css.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nimport Avatar from '../Avatar';\n\ntype InfoProps = {\n  avatar: string;\n  name: string;\n  email: string;\n  archived?: boolean;\n};\n\nconst Item = ({ info }: { info: InfoProps }) => {\n  const { avatar, name, email, archived } = info;\n  return (\n    <div className=\"flex p-4 items-center border-gray-200 border-b\">\n      <Avatar src={avatar} />\n      <div className=\"ml-4 flex-1 flex justify-between\">\n        <div className=\"flex-1\">\n          <p>{name}</p>\n          <p>{email}</p>\n        </div>\n        <button\n          type=\"button\"\n          disabled={archived}\n          className={`bg-blue-500  text-white font-bold\n            py-2 px-4 rounded-full hover:bg-blue-700`}\n        >\n          Archive\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default Item;\n```\n\n----------------------------------------\n\nTITLE: Configuring Master App with Sub-Applications in Modern.js Runtime (TypeScript)\nDESCRIPTION: This snippet defines the runtime configuration for a Modern.js application. It sets up a master app with two sub-applications: 'Table' and 'Dashboard'. Each sub-app is defined with a name and an entry point URL. The activeWhen properties are commented out but could be used to specify when each app should be active.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/micro-runtime-config.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineRuntimeConfig } from '@modern-js/runtime';\n\nexport default defineRuntimeConfig({\n  masterApp: {\n    apps: [{\n      name: 'Table',\n      entry: 'http://localhost:8081',\n      // activeWhen: '/table'\n    }, {\n      name: 'Dashboard',\n      entry: 'http://localhost:8082'\n      // activeWhen: '/dashboard'\n    }]\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Advanced State and Actions Selection with Connect\nDESCRIPTION: Shows how to use state and action selectors with connect to customize the props passed to the component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/model/connect.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nfunction Test(props) {\n  props.incAll();\n  props.c;\n}\n\nconst stateSelector = (stateA, stateB) => ({\n  ...stateA,\n  ...stateB,\n  c: stateA.a + stateA.b,\n});\nconst actionsSelector = (actionsA, actionsB) => ({\n  ...actionsA,\n  ...actionsB,\n  incAll: () => {\n    actionsA.incA();\n    actionsB.incB();\n  },\n});\n\nexport default connect([modelA, modelB, stateSelector, actionsSelector])(Test);\n```\n\n----------------------------------------\n\nTITLE: Configuring Webpack in Modern.js\nDESCRIPTION: Example of how to configure Webpack using the tools.webpack option in modern.config.ts. The configuration can be set using either an Object or Function approach, where Object values are merged with defaults and Function values receive the default config as a parameter.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/low-level.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  tools: {\n    webpack: config => {},\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Demonstrating SSR/CSR Inconsistency in React\nDESCRIPTION: This code snippet shows how to create a rendering inconsistency between server-side and client-side React components, which leads to a warning in the browser console.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/render/ssr.mdx#2025-04-21_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\n{\n  typeof window !== 'undefined' ? <div>browser content</div> : null;\n}\n```\n\n----------------------------------------\n\nTITLE: SSR Fallback Middleware Implementation\nDESCRIPTION: Server middleware implementation for handling SSR fallback to CSR based on custom conditions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/server/ssr.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport const middleware = (ctx, next) => {\n  const { req, res } = ctx;\n  if (condition) {\n    req.headers['x-modern-ssr-fallback'] = '1';\n  }\n\n  next();\n};\n```\n\n----------------------------------------\n\nTITLE: Handling Dynamic Routes in BFF Functions\nDESCRIPTION: Shows how to define a BFF function that handles dynamic route parameters. The function receives 'level' and 'id' as parameters from the URL.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/bff/function.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default async (level: number, id: number) => {\n  const userData = await queryUser(level, uid);\n  return userData;\n};\n```\n\n----------------------------------------\n\nTITLE: Integrating Micro-Frontend with React Router DOM v6\nDESCRIPTION: Example of integrating micro-frontend sub-applications in a project using React Router DOM version 6, passing useLocation and basename for proper routing.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/micro-frontend/c02-development.mdx#2025-04-21_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useLocation, useHref } from 'react-router-dom';\nconst App = () => {\n  const basename = useHref('/table');\n  const { Table } = useModuleApps();\n  return <Table useLocation={useLocation} basename={basename} />;\n};\n```\n\n----------------------------------------\n\nTITLE: Accessing Injected Data in a React Component with Modern.js\nDESCRIPTION: This React component demonstrates how to access data injected by a runtime plugin using the useRuntimeContext hook provided by Modern.js. It retrieves and displays the injected message.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/render/before-render.mdx#2025-04-21_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useRuntimeContext } from '@modern-js/runtime';\n\nexport default function MyComponent() {\n  const context = useRuntimeContext();\n  const { message } = context;\n\n  return <div>{message}</div>;\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Data Loader in TypeScript for Modern.js Layout\nDESCRIPTION: Defines a data loader function that generates mock contact data using the faker library. This loader is used in the layout component to provide initial data for the application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/tutorials/first-app/c07-container.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport type LoaderData = {\n  code: number;\n  data: {\n    name: string;\n    avatar: string;\n    email: string;\n  }[];\n};\n\nexport const loader = async (): Promise<LoaderData> => {\n  const data = new Array(20).fill(0).map(() => {\n    const firstName = name.firstName();\n    return {\n      name: firstName,\n      avatar: `https://api.dicebear.com/7.x/pixel-art/svg?seed=${firstName}`,\n      email: internet.email(),\n    };\n  });\n\n  return {\n    code: 200,\n    data,\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Setting baseUrl in Modern.js Configuration\nDESCRIPTION: Demonstrates how to configure server.baseUrl in modern.config.ts to add route prefixes to all server routes. Shows both single and multiple baseUrl configurations.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/server/base-url.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  server: {\n    // 所有生成的路由前面都会自动加上前缀 `/base`\n    // 生成的服务端路由文件路径：dist/route.json\n    baseUrl: '/base'\n\n    // 多 baseUrl\n    baseUrl: ['/base-new', '/base-old']\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Browser Entry Point\nDESCRIPTION: Client-side entry point implementation using Modern.js runtime with React integration and async initialization support.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/enable-custom-entry.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { createRoot } from '@modern-js/runtime/react';\nimport { render } from '@modern-js/runtime/browser';\n\nconst ModernRoot = createRoot();\n\nasync function beforeRender() {\n   // todo\n}\n\nbeforeRender().then(() => {\n  render(<ModernRoot />);\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Advanced SSR Options in Modern.js\nDESCRIPTION: This code example shows how to configure advanced SSR options using the object syntax in Modern.js. It includes settings for force CSR, streaming mode, disabling prerender, unsafe headers, and script loading.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/server/ssr.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  server: {\n    ssr: {\n      forceCSR: true,\n      mode: 'stream',\n      disablePrerender: true,\n      unsafeHeaders: ['User-Agent'],\n      scriptLoading: 'async',\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: renderString Function Type Definition\nDESCRIPTION: TypeScript type definition for the renderString function, specifying its parameters and return type. Takes a Request object, React element, and render options to produce a string output.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/ssr/renderString.mdx#2025-04-21_snippet_1\n\nLANGUAGE: ts\nCODE:\n```\nexport type RenderString = (\n  request: Request,\n  serverRoot: React.ReactElement,\n  optinos: RenderOptions,\n) => Promise<string>;\n```\n\n----------------------------------------\n\nTITLE: Defining State Type for a Reduck Model in TypeScript\nDESCRIPTION: Example showing how to properly define and annotate the state type of a Reduck model, which enables proper type inference for computed properties and actions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/typescript-best-practice.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface State {\n  data: string;\n}\n\nexport const foo = model<State>('foo').define({\n  state: {\n    data: '',\n  },\n  computed: {\n    withSuffix: state => state.data + 'suffix',\n  },\n  actions: {\n    setData: (state, payload: string) => {\n      state.data = payload;\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of render in Modern.js\nDESCRIPTION: Shows the basic usage of the render function to render ModernRoot component in the browser.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/core/render.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { render } from '@modern-js/runtime/browser';\n\nrender(<ModernRoot />);\n```\n\n----------------------------------------\n\nTITLE: Client-Side Data Loader Implementation\nDESCRIPTION: Implementation of a client-side data loader with caching support for SSR fallback scenarios.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/render/ssr.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport cache from 'my-cache';\n\nexport async function loader({ params }) {\n  if (cache.has(params.id)) {\n    return cache.get(params.id);\n  }\n  const res = await fetch('URL_ADDRESS?id={params.id}');\n  return {\n    message: res.message,\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Using Reduck Provider in React Application Entry\nDESCRIPTION: This example demonstrates how to use the Reduck Provider component in a React application's entry file. It wraps the main App component, making the Reduck store available to all child components.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/model/Provider.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nReactDOM.render(\n  <Provider>\n    <App />\n  </Provider>,\n  document.getElementById('root'),\n);\n```\n\n----------------------------------------\n\nTITLE: Direct Webpack Configuration Modification in Modern.js\nDESCRIPTION: Example of directly modifying Webpack configuration object using modifyWebpackConfig API to disable source maps.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/cli-plugins/api.mdx#2025-04-21_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\napi.modifyWebpackConfig((config, utils) => {\n  // Disable source map\n  config.devtool = false;\n});\n```\n\n----------------------------------------\n\nTITLE: Disabling Styled Components Integration\nDESCRIPTION: Configuration example showing how to disable the styled-components integration completely to improve build performance.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/styled-components.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    styledComponents: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Cypress Test Output Example\nDESCRIPTION: Example of DevTools output when running Cypress tests in headless browser mode.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/testing/cypress.mdx#2025-04-21_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nDevTools listening on ws://127.0.0.1:55203/devtools/browser/xxxxx\n```\n\n----------------------------------------\n\nTITLE: Implementing wrapRoot Hook in TypeScript\nDESCRIPTION: Example of using the new wrapRoot API to replace the old hoc functionality, showing proper props handling and component wrapping.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/runtime-plugins/migration.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n{\n  setup: api => {\n    api.wrapRoot((App) => {\n      const AppWrapper = (props) => {\n        // Ensure props are passed to the original component\n        return <Provider value={xx}><App {...props}/></Provider>;\n      };\n      return AppWrapper;\n    });\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Using Prefetch Attribute in Modern.js Link Component\nDESCRIPTION: This code snippet demonstrates how to use the prefetch attribute on a Link component in Modern.js. The 'intent' value is recommended for most scenarios, automatically loading corresponding chunks and data when the mouse hovers over the link.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/routes.mdx#2025-04-21_snippet_12\n\nLANGUAGE: tsx\nCODE:\n```\n<Link prefetch=\"intent\" to=\"page\">\n```\n\n----------------------------------------\n\nTITLE: Defining a Model with Function Type Parameters in TypeScript\nDESCRIPTION: Demonstrates defining a model using a function approach that provides access to context and utilities.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/model/model_.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nconst fooModel = model('foo').define(() => {\n  return {\n    state: 'foo',\n    actions: {\n      setState: (state, value) => {\n        return value;\n      },\n    },\n  };\n});\n\nconst barModel = model('bar').define((_, { use }) => {\n  return {\n    state: 'bar',\n    effects: {\n      syncFoo() {\n        const [state, actions] = use(fooModel);\n        actions.setState(state);\n      },\n    },\n  };\n});\n```\n\n----------------------------------------\n\nTITLE: Defining Project Structure for Data Action in Modern.js\nDESCRIPTION: This snippet shows the recommended file structure for implementing Data Action in Modern.js, using conventional routing.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/data/data-write.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n.\n└── routes\n    └── user\n        ├── layout.tsx\n        └── layout.data.ts\n```\n\n----------------------------------------\n\nTITLE: Using Monitors in Data Loaders\nDESCRIPTION: Demonstrates how to use monitors in data loaders for timing and error logging during fetch operations.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/server-monitor/monitors.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { LoaderFunctionArgs } from '@modern-js/runtime/router';\nimport { getMonitors } from '@modern-js/runtime';\nconst loader = async ({ context }: LoaderFunctionArgs) => {\n    const monitors = getMonitors();\n    const start = Date.now();\n    try {\n        await fetch(...);\n        monitors.timing('loader_fetch_timing', Date.now() - start);\n    } catch(e) {\n        monitors.error(e);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Basic React Component for SSG\nDESCRIPTION: Simple React component defined in a page file that will be statically generated during the build process.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/render/ssg.mdx#2025-04-21_snippet_4\n\nLANGUAGE: jsx\nCODE:\n```\nexport default () => {\n  return <div>Index Page</div>;\n};\n```\n\n----------------------------------------\n\nTITLE: Defining Koa Server Instance for BFF in Modern.js\nDESCRIPTION: This snippet demonstrates how to define a custom Koa server instance in api/app.ts. It implements a simple logging middleware that records all API access URLs before proceeding with the request.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/bff/extend-server.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport koa from 'koa';\n\nconst app = new Koa();\napp.use(async (ctx, next) => {\n  console.info(`access url: ${ctx.url}`);\n  await next();\n});\n\nexport default app;\n```\n\n----------------------------------------\n\nTITLE: Implementing Page Component with Model Integration\nDESCRIPTION: TypeScript implementation of a page component that uses the contacts model to manage state and handle archiving of contacts via the useModel hook from Modern.js.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/tutorials/first-app/c06-model.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Helmet } from '@modern-js/runtime/head';\nimport { useModel } from '@modern-js/runtime/model';\nimport { useLoaderData } from '@modern-js/runtime/router';\nimport { List } from 'antd';\nimport { name, internet } from 'faker';\nimport Item from '../components/Item';\nimport contacts from '../models/contacts';\n\nfunction Index() {\n  const { data } = useLoaderData() as LoaderData;\n  const [{ items }, { archive, setItems }] = useModel(contacts);\n  if (items.length === 0) {\n    setItems(data);\n  }\n\n  return (\n    <div className=\"container lg mx-auto\">\n      <Helmet>\n        <title>All</title>\n      </Helmet>\n      <List\n        dataSource={items}\n        renderItem={info => (\n          <Item\n            key={info.name}\n            info={info}\n            onArchive={() => {\n              archive(info.email);\n            }}\n          />\n        )}\n      />\n    </div>\n  );\n}\n\nexport default Index;\n```\n\n----------------------------------------\n\nTITLE: Implementing React useState Hook with Functional Component\nDESCRIPTION: Demonstrates a React functional component using the useState hook to implement a counter with increment and decrement buttons.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/convention-routing-motivation.mdx#2025-04-21_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { useState } from 'react';\n\nfunction Counter() {\n  const [count, setCount] = useState(0);\n\n  return (\n    <div>\n      <p>Count: {count}</p>\n      <button onClick={() => setCount(count + 1)}>+</button>\n      <button onClick={() => setCount(count - 1)}>-</button>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Using useStaticModel for Analytics in React Components\nDESCRIPTION: Shows how to use useStaticModel to access user state for analytics purposes without causing unnecessary component re-renders. The example demonstrates using the state within useEffect.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/model/use-static-model.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nfunction App() {\n  const [state] = useStaticModel(userModel);\n\n  useEffect(() => {\n    // 统计 UV 数据\n    send('pageview', { user: state.user });\n  }, [state]);\n\n  return <div>Hello</div>;\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing BFF API from React Component in Modern.js\nDESCRIPTION: This code demonstrates how to access a BFF API from a React component in Modern.js. It uses the useEffect hook to fetch data from the API and display it in the component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/bff/extend-server.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useState, useEffect } from 'react';\nimport { get as hello } from '@api/hello';\n\nexport default () => {\n  const [text, setText] = useState('');\n\n  useEffect(() => {\n    async function fetchMyApi() {\n      const { message } = await hello();\n      setText(message);\n    }\n\n    fetchMyApi();\n  }, []);\n\n  return <p>{text}</p>;\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing Centralized Routing with useModuleApp in Modern.js\nDESCRIPTION: Shows how to implement centralized routing for micro-frontend sub-applications using the useModuleApp hook in a Modern.js main application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/core/use-module-apps.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useModuleApp } from '@modern-js/plugin-runtime';\n\nfunction App() {\n  const { MApp } = useModuleApps();\n\n  return (\n    <div>\n      <MApp />\n    </div>\n  );\n}\n\ndefineConfig(App, {\n  masterApp: {\n    apps: [\n      {\n        // name is case sensitive, what name provides is what useModuleApps returns\n        name: 'Dashboard',\n        activeWhen: '/dashboard',\n        entry: 'http://127.0.0.1:8081/',\n      },\n      {\n        name: 'TableList',\n        activeWhen: '/table',\n        entry: 'http://localhost:8082',\n      },\n    ],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Integrating Express Middleware in Modern.js DevServer\nDESCRIPTION: Example showing how to migrate Express middleware to Modern.js DevServer by initializing an Express app and passing it as middleware. This approach allows reusing Express middleware in the Modern.js development server.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/dev-server.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport expressMiddleware from 'my-express-middleware';\nimport express from 'express';\n\n// 初始化 Express app\nconst app = express();\napp.use(expressMiddleware);\n\nexport default {\n  tools: {\n    devServer: {\n      after: [app],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: TypeScript Definition for useLocation Hook in Modern.js Router\nDESCRIPTION: Defines the useLocation hook function signature and the Location interface. This hook returns the current location object with information about the URL path.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/router/router.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare function useLocation(): Location;\n\ninterface Location extends Path {\n  state: unknown;\n  key: Key;\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Module Federation for Producer Application\nDESCRIPTION: This configuration sets up the Module Federation for the producer application, defining the module name, manifest location, exposed components, and shared dependencies.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/module-federation/usage.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createModuleFederationConfig } from '@module-federation/modern-js';\n\nexport default createModuleFederationConfig({\n  name: 'remote',\n  manifest: {\n    filePath: 'static',\n  },\n  filename: 'static/remoteEntry.js',\n  exposes: {\n    './Button': './src/components/Button.tsx',\n  },\n  shared: {\n    react: { singleton: true },\n    'react-dom': { singleton: true },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Creating a Simple BFF Function in Modern.js\nDESCRIPTION: This snippet shows how to create a basic BFF function in Modern.js. It defines a simple async function that returns a greeting message.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/bff/extend-server.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default async () => {\n  return 'Hello Modern.js';\n};\n```\n\n----------------------------------------\n\nTITLE: Using Selector Function with useModel in TypeScript\nDESCRIPTION: Demonstrates how to use a selector function with useModel to filter the state returned to the component, ensuring it only re-renders when relevant state changes.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/model/performance.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst fooModel = model('foo').define({\n  state: {\n    a: '',\n    b: '',\n  },\n  actions: {\n    setA(state, payload) {\n      state.a = payload;\n    },\n    setB(state, payload) {\n      state.b = payload;\n    },\n  },\n});\n\nfunction ComponentA() {\n  // 通过传入 selector 函数，只返回 a 状态给组件\n  const [stateA] = useModel(fooModel, state => state.a);\n\n  return <div>{stateA}</div>;\n}\n```\n\n----------------------------------------\n\nTITLE: Usage Example of createStore in React with TypeScript\nDESCRIPTION: Demonstrates how to create a store using createStore and utilize it outside React components. The example shows creating a store instance and using the store.use method to access a model and its actions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/model/create-store.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst store = createStore();\n\nfunction load() {\n  const [, actions] = store.use(fooModel);\n\n  actions.load();\n}\n```\n\n----------------------------------------\n\nTITLE: Error Boundary Component for Data Loader Errors\nDESCRIPTION: Shows how to create an Error Boundary component to handle errors thrown by Data Loaders.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/data/data-fetch.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useRouteError } from '@modern-js/runtime/router';\nconst ErrorBoundary = () => {\n  const error = useRouteError() as Response;\n  return (\n    <div>\n      <h1>{error.status}</h1>\n      <h2>{error.statusText}</h2>\n    </div>\n  );\n};\n\nexport default ErrorBoundary;\n```\n\n----------------------------------------\n\nTITLE: Implementing Effects with Local Storage in TypeScript\nDESCRIPTION: Demonstrates how to define model effects that interact with browser APIs like localStorage.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/model/model_.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nconst fooModel = model('foo').define((context, { use }) => ({\n  state: 'foo',\n  effects: {\n    persist() {\n      const [state] = use(fooModel);\n      localStorage.setItem('state', state);\n    },\n  },\n}));\n```\n\n----------------------------------------\n\nTITLE: Splitting Reduck Model for Performance Optimization in TypeScript\nDESCRIPTION: Shows how to split a single model into two separate models to prevent unnecessary re-renders when unrelated state changes occur.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/model/performance.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst fooModel = model('foo').define({\n  state: {\n    a: '',\n  },\n  actions: {\n    setA(state, payload) {\n      state.a = payload;\n    },\n  },\n});\n\nconst barModel = model('bar').define({\n  state: {\n    b: '',\n  },\n  actions: {\n    setB(state, payload) {\n      state.b = payload;\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Behavior Before Rendering in Modern.js Entry File\nDESCRIPTION: This snippet demonstrates how to add custom behavior before rendering in a Modern.js project using src/entry.tsx. It uses createRoot from @modern-js/runtime/react and render from @modern-js/runtime/browser to implement an asynchronous beforeRender function.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/hooks/src/entry.mdx#2025-04-21_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { createRoot } from '@modern-js/runtime/react';\nimport { render } from '@modern-js/runtime/browser';\n\nconst ModernRoot = createRoot();\n\nasync function beforeRender() {\n   // todo\n}\n\nbeforeRender().then(() => {\n  render(<ModernRoot />);\n});\n```\n\n----------------------------------------\n\nTITLE: Using useLocalModel for Local State in TypeScript\nDESCRIPTION: Shows how to use useLocalModel to manage local component state with the benefits of the Model architecture.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/use-model.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useLocalModel } from '@modern-js/runtime/model';\n\nfunction LocalCounter() {\n  const [state, actions] = useLocalModel(countModel);\n\n  return (\n    <div>\n      <div>local counter: {state.value}</div>\n      <button onClick={() => actions.add()}>add</button>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Adding an Action to a Reduck Model in JavaScript\nDESCRIPTION: This snippet shows how to add an 'add' action to the 'count' model that increments the counter value by 1. It demonstrates the use of immer for direct state modification.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/quick-start.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport { model } from '@modern-js/runtime/model';\n\nconst countModel = model('count').define({\n  state: {\n    value: 1,\n  },\n  actions: {\n    add(state) {\n      state.value += 1;\n    },\n  },\n});\n\nexport default countModel;\n```\n\n----------------------------------------\n\nTITLE: Creating Communicating Models with step and counter in Modern.js\nDESCRIPTION: This code demonstrates inter-Model communication by creating two Models: stepModel for controlling the increment step size and counterModel which uses the step value from stepModel. It shows how to use the 'use' function to access other Models and subscribe to their state changes.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/model/model-communicate.mdx#2025-04-21_snippet_0\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport { model } from '@modern-js/runtime/model';\n\nconst stepModel = model('step').define({\n  state: 1,\n});\n\nconst counterModel = model('count').define((context, { use, onMount }) => {\n  const [, , subscribeStep] = use(stepModel);\n\n  onMount(() => {\n    return subscribeStep(() => {\n      console.log(\n        `Subscribe in counterModel: stepModel change to ${use(stepModel)[0]}`,\n      );\n    });\n  });\n\n  return {\n    state: {\n      value: 1,\n    },\n    actions: {\n      add(state) {\n        const step = use(stepModel)[0];\n        state.value += step;\n      },\n    },\n  };\n});\n\nexport { stepModel, counterModel };\n```\n\n----------------------------------------\n\nTITLE: Implementing beforeBuildPlatform Hook in TypeScript\nDESCRIPTION: Hook triggered before platform-specific build tasks execution. Receives array of registered platform tasks.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/plugin-api/plugin-hooks.md#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport const myPlugin = (): CliPlugin<ModuleTools> => ({\n  name: 'my-plugin',\n\n  setup() {\n    return {\n      beforeBuildPlatform(platforms: RegisterBuildPlatformResult[]): void {\n        console.info(`have ${platforms.length} platform tasks`);\n      },\n    };\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using Middleware with Express.js in Modern.js BFF\nDESCRIPTION: This snippet demonstrates how to use middleware in a BFF function with Express.js. It uses the hook function from '@modern-js/runtime/express' to add a middleware that modifies the request query parameter.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/bff/frameworks.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { hook } from '@modern-js/runtime/express';\n\nexport default hook(({ addMiddleware }) => {\n  addMiddleware((req, res, next) => {\n    req.query.id = 'koa';\n    next();\n  });\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring and Rendering Module Applications in Modern.js with React Router\nDESCRIPTION: This code snippet demonstrates how to set up a main application that can load and manage sub-applications using Modern.js, Garfish, and React Router. It shows two approaches: using the MApp component for automatic loading, and manually defining routes for more controlled loading of sub-applications.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/custom-router-micro-frontend.mdx#2025-04-21_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { useModuleApps } from '@modern-js/plugin-garfish/runtime';\n\nimport { RouterProvider, Route, createBrowserRouter, createRoutesFromElements, BrowserRouter, Link, Outlet } from '@modern-js/runtime/router';\n\nconst AppLayout = () => (\n  <>\n    <div><Link to={'/table'}>Loading conventional routed sub-applications</Link></div>\n    <div><Link to={'/dashboard'}>Loading Self-Controlled Routing Sub-Applications</Link></div>\n    <div><Link to={'/'}>Uninstall a sub-application</Link></div>\n    <Outlet />\n  </>\n)\n\nexport default () => {\n  const { apps, MApp, Table, Dashboard } = useModuleApps();\n\n  // If you are not using the MApp component, you need to use createBrowserRouter to create the route.\n  const router = createBrowserRouter(\n    createRoutesFromElements(\n      <Route path=\"/\" element={<AppLayout />}>\n        <Route key={'table'} path={'table/*'} element={<Table />} />\n        <Route key={'dashboard'} path={'dashboard/*'} element={<Dashboard />} />\n      </Route>\n    )\n  );\n\n  return (\n    // Approach 1: Use MApp to automatically load sub-applications based on the configured activeWhen parameter (this project is configured in modern.config.ts)\n    // <BrowserRouter>\n    //   <MApp />\n    // </BrowserRouter>\n\n    // Approach 2: Manually write Route components to load sub-applications, which is convenient for scenarios that require authentication and other pre-requisite operations\n    <>\n      <RouterProvider router={router} />\n    </>\n  );\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Up Custom Middlewares in Modern.js DevServer\nDESCRIPTION: Illustrates how to use the setupMiddlewares option to add custom middleware and utilize server APIs for special scenarios like triggering page reloads.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/dev-server.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    devServer: {\n      setupMiddlewares: [\n        (middlewares, server) => {\n          middlewares.unshift((req, res, next) => {\n            next();\n          });\n\n          middlewares.push((req, res, next) => {\n            next();\n          });\n        },\n      ],\n    },\n  },\n};\n```\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    devServer: {\n      setupMiddlewares: [\n        (middlewares, server) => {\n          // add custom watch & trigger page reload when change\n          watcher.on('change', changed => {\n            server.sockWrite('content-changed');\n          });\n        },\n      ],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Self-controlled Routing with useModuleApps in Modern.js\nDESCRIPTION: Example of using useModuleApps to manually control routing of micro-frontend child applications using React Router in a main application. The component retrieves child app components and sets up routing paths.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/core/use-module-apps.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nfunction App() {\n  const { apps, MApp, Table, Dashboard } = useModuleApps();\n\n  // 使用的不是 MApp 组件，需要使用 createBrowserRouter 来创建路由\n  const router = createBrowserRouter(\n    createRoutesFromElements(\n      <Route path=\"/\" element={<AppLayout />}>\n        <Route key={'table'} path={'table/*'} element={<Table />} />\n        <Route key={'dashboard'} path={'dashboard/*'} element={<Dashboard />} />\n      </Route>\n    )\n  );\n\n  return (\n    // 方法一：使用 MApp 自动根据配置的 activeWhen 参数加载子应用(本项目配置在 modern.config.ts 中)\n    // <BrowserRouter>\n    //   <MApp />\n    // </BrowserRouter>\n\n    // 方法二：手动写 Route 组件方式加载子应用，方便于需要鉴权等需要前置操作的场景\n    <>\n      <RouterProvider router={router} />\n    </>\n  );\n}\n\ndefineConfig(App, {\n  masterApp: {\n    apps: [\n      {\n        // name 区分大小写，name 提供的是什么 useModuleApps 返回的就是什么\n        name: 'Table',\n        entry: 'http://127.0.0.1:8081/',\n      },\n      {\n        name: 'Dashboard',\n        entry: 'http://localhost:8082',\n      },\n    ],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Preventing Default SSG Behavior\nDESCRIPTION: Configuration to disable SSG for specific routes while keeping it enabled for others.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/render/ssg.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  output: {\n    ssg: {\n      preventDefault: ['/user'],\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Self-controlled Routing in Modern.js Sub-app\nDESCRIPTION: React component implementing self-controlled routing for a sub-application in a Modern.js micro frontend project, using BrowserRouter with a dynamic basename.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/micro-frontend/c02-development.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nimport { BrowserRouter, Route, Routes } from '@modern-js/runtime/router';\n\nexport default (props: { basename: string }) => {\n  const { basename } = props;\n\n  return (\n    <BrowserRouter basename={basename}>\n      <Routes>\n        <Route index element={<div>Self-controlled route root</div>} />\n        <Route path={'path'} element={<div>Self-controlled sub route</div>} />\n      </Routes>\n    </BrowserRouter>\n  );\n};\n```\n\n----------------------------------------\n\nTITLE: Function Signature of createApp in TypeScript\nDESCRIPTION: Defines the TypeScript function signature for createApp, including its input options and return type.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/core/create-app.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { Plugin } from '@modern-js/runtime';\n\nfunction createApp(options: { plugins: Plugin[] }): React.ComponentType<any>;\n```\n\n----------------------------------------\n\nTITLE: Using Helmet Component to Manage Page Head Elements\nDESCRIPTION: Complete example showing how to use the Helmet component to set the page title and viewport meta tag within a Modern.js React application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/utility/head.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Helmet } from '@modern-js/runtime/head';\n\nfunction IndexPage() {\n  return (\n    <div>\n      <Helmet>\n        <title>My page title</title>\n        <meta name=\"viewport\" content=\"initial-scale=1.0, width=device-width\" />\n      </Helmet>\n      <p>Hello Modern.js!</p>\n    </div>\n  );\n}\n\nexport default IndexPage;\n```\n\n----------------------------------------\n\nTITLE: Type Definitions for createRequestHandler in Modern.js\nDESCRIPTION: This snippet provides the TypeScript type definitions for the createRequestHandler function and related types. It includes HandleRequest, RequestHandler, and CreateRequestHandler types, specifying the expected parameters and return types for each.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/ssr/requestHandler.mdx#2025-04-21_snippet_1\n\nLANGUAGE: ts\nCODE:\n```\nexport type HandleRequest = (\n  request: Request,\n  ServerRoot: React.ComponentType,\n  options: HandleRequestOptions,\n) => Promise<Response>;\n\nexport type RequestHandler = (\n  request: Request,\n  options: RequestHandlerOptions,\n) => Promise<Response>;\n\nexport type CreateRequestHandler = (\n  handleRequest: HandleRequest,\n) => Promise<RequestHandler>;\n```\n\n----------------------------------------\n\nTITLE: Advanced Configuration for Multiple BFF SDKs\nDESCRIPTION: Extended configuration example showing how to simultaneously configure both cross-project and current-project BFF SDKs with different settings, including custom request implementation using axios.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/bff/cross-project.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { configure } from '${package_name}/runtime';\nimport { configure as innerConfigure } from '@modern-js/runtime/bff';\nimport axios from 'axios';\n\nconfigure({\n    setDomain() {\n        return 'https://your-bff-api.com';\n    },\n});\n\ninnerConfigure({\n  async request(...config: Parameters<typeof fetch>) {\n    const [url, params] = config;\n    const res = await axios({\n      url: url as string,\n      method: params?.method as Method,\n      data: params?.body,\n      headers: {\n        'x-header': 'innerConfigure',\n      },\n    });\n    return res.data;\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Customizing Styled Components Configuration with Function in Modern.js\nDESCRIPTION: This snippet shows how to use a function to customize the styled-components configuration. It receives the default config as an argument and allows for dynamic modifications.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/styled-components.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    styledComponents(config) {\n      // 修改 pure 配置\n      config.pure = false;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring cleanDistPath in Modern.js\nDESCRIPTION: This snippet demonstrates how to disable the automatic cleaning of the dist directory in Modern.js by setting the cleanDistPath option to false in the output configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/clean-dist-path.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    cleanDistPath: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring PluginSWC with Custom Import in TypeScript\nDESCRIPTION: Shows how to configure PluginSWC with a custom import path using a template string. This allows for dynamic import path generation based on the imported member name.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/official/cli-plugins/plugin-swc.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nPluginSWC({\n  extensions: {\n    pluginImport: [\n      {\n        libraryName: 'foo',\n        customName: 'foo/es/{{ member }}',\n      },\n    ],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring After Middleware in Modern.js DevServer\nDESCRIPTION: Demonstrates how to add custom middleware to be executed after internal middleware in the Modern.js DevServer. It also shows how to adapt Express middleware for use with Modern.js.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/dev-server.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    devServer: {\n      after: [\n        async (req, res, next) => {\n          console.log('after dev middleware');\n          next();\n        },\n      ],\n    },\n  },\n};\n```\n\nLANGUAGE: javascript\nCODE:\n```\nimport expressMiddleware from 'my-express-middleware';\nimport express from 'express';\n\n// init Express app\nconst app = express();\napp.use(expressMiddleware);\n\nexport default {\n  tools: {\n    devServer: {\n      after: [app],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: TypeScript Declaration for Modern.js Runtime Plugins\nDESCRIPTION: A TypeScript declaration needed when using the @modern-js/runtime/plugins module in TypeScript projects.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/core/bootstrap.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare module '@modern-js/runtime/plugins';\n```\n\n----------------------------------------\n\nTITLE: Function Signature and Configuration Options for handleEffect\nDESCRIPTION: Defines the TypeScript interface for handleEffect API, including the EffectActions return type and Configuration options that determine how state is structured and updated.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/model/handle-effect.mdx#2025-04-21_snippet_1\n\nLANGUAGE: ts\nCODE:\n```\ninterface EffectActions {\n  pending: Action;\n  fulfilled: Action;\n  rejected: Action;\n}\n\ninterface Config {\n  ns?: string;\n  result?: string | false;\n  error?: string | false;\n  pending?: string | false;\n  combineMode?: 'merge' | 'replace';\n  omitResultNamespace?: boolean;\n}\n\nfunction handleEffect(config: Config): EffectActions;\n```\n\n----------------------------------------\n\nTITLE: Implementing a Data Loader in Modern.js\nDESCRIPTION: This code creates a Data Loader function in Modern.js, using Faker to generate mock data for server-side rendering and efficient data fetching.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/tutorials/first-app/c05-loader.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { name, internet } from 'faker';\n\nexport type LoaderData = {\n  code: number;\n  data: {\n    name: string;\n    avatar: string;\n    email: string;\n  }[];\n};\n\nexport const loader = async (): Promise<LoaderData> => {\n  const data = new Array(20).fill(0).map(() => {\n    const firstName = name.firstName();\n    return {\n      name: firstName,\n      avatar: `https://api.dicebear.com/7.x/pixel-art/svg?seed=${firstName}`,\n      email: internet.email(),\n    };\n  });\n\n  return {\n    code: 200,\n    data,\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Using Model in Main Page Component\nDESCRIPTION: Demonstrates how to use the contacts model in the main page component. The component displays all contacts and provides an archive functionality using the model's state and actions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c07-container.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Helmet } from '@modern-js/runtime/head';\nimport { useModel } from '@modern-js/runtime/model';\nimport { List } from 'antd';\nimport Item from '../components/Item';\nimport contacts from '../models/contacts';\n\nfunction Index() {\n  const [{ items }, { archive }] = useModel(contacts);\n\n  return (\n    <div className=\"container lg mx-auto\">\n      <Helmet>\n        <title>All</title>\n      </Helmet>\n      <List\n        dataSource={items}\n        renderItem={info => (\n          <Item\n            key={info.name}\n            info={info}\n            onArchive={() => {\n              archive(info.email);\n            }}\n          />\n        )}\n      />\n    </div>\n  );\n}\n\nexport default Index;\n```\n\n----------------------------------------\n\nTITLE: Source PreEntry Configuration Example\nDESCRIPTION: Configuration example showing the type definition and default value for source.preEntry, which allows adding scripts to execute before page entry points.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/pre-entry.mdx#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n- **Type:** `string | string[]`\n- **Default:** `[]`\n```\n\n----------------------------------------\n\nTITLE: Creating a Basic BFF Function in Modern.js\nDESCRIPTION: A simple BFF function defined in api/lambda/hello.ts that returns 'Hello Modern.js'. This function will be protected by the authentication middleware defined in _app.ts.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/bff/extend-server.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default async () => {\n  return 'Hello Modern.js';\n};\n```\n\n----------------------------------------\n\nTITLE: Props Reception in Child Application\nDESCRIPTION: Example showing how a child application receives and handles props passed from the parent application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/micro-frontend/c04-communicate.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nfunction App(props) {\n  console.log(props);\n  return ...\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Middleware in Modern.js\nDESCRIPTION: Shows how to export a middleware function or an array of middleware functions to extend the built-in Web Server in Modern.js. The middleware can be used to process incoming requests and modify responses.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/web-server/middleware.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Middleware } from '@modern-js/runtime/server';\n\nexport const middleware: Middleware = async (context, next) => {};\nexport const middleware: Middleware[] = [\n  async (context, next) => {},\n  async (context, next) => {},\n];\n```\n\n----------------------------------------\n\nTITLE: HTTP POST Side Effect Example\nDESCRIPTION: Shows how to implement a side effect that sends data to a server without modifying state.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/manage-effects.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nconst fooModel = model('foo').define({\n  state: {\n    value: 'foo',\n  },\n  effects: {\n    async sendData(data) {\n      const res = await fetch('url', {\n        method: 'POST',\n        body: data,\n      });\n      return res.json();\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using useModuleApps Hook in Modern.js App Component\nDESCRIPTION: Demonstrates how to use the useModuleApps hook to render micro-frontend sub-applications in a Modern.js app component. It includes configuration for master app and sub-apps.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/core/use-module-apps.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nfunction App() {\n  const { Home, Contact } = useModuleApps();\n\n  return (\n    <div>\n      Master APP\n      <Route exact path=\"/home\">\n        <Home />\n      </Route>\n      <Route exact path=\"/home\">\n        <Contact />\n      </Route>\n    </div>\n  );\n}\n\ndefineConfig(App, {\n  masterApp: {\n    apps: [\n      {\n        // name is case-sensitive, what name provides is what useModuleApps returns\n        name: 'Home',\n        entry: 'http://127.0.0.1:8081/',\n      },\n      {\n        name: 'Contact',\n        entry: 'http://localhost:8082',\n      },\n    ],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Modern.js App with Garfish Plugin\nDESCRIPTION: Main configuration file that sets up the Modern.js application with router enabled and Garfish plugin integration. Uses the appTools and garfishPlugin for setup.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/enable-micro-frontend.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { appTools, defineConfig } from '@modern-js/app-tools';\nimport { garfishPlugin } from '@modern-js/plugin-garfish';\n\nexport default defineConfig({\n  runtime: {\n    router: true,\n  },\n  plugins: [appTools(), garfishPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: TypeScript Definition for useParams Hook in Modern.js Router\nDESCRIPTION: Defines the useParams hook function signature. This hook returns an object of key/value pairs of dynamic parameters from the current URL that were matched by the Route path.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/router/router.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare function useParams<K extends string = string>(): Readonly<Params<K>>;\n```\n\n----------------------------------------\n\nTITLE: Running All Unit Tests\nDESCRIPTION: Command to run all unit tests in the project. This should be done before submitting a pull request to ensure no regressions or bugs have been introduced.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/community/contributing-guide.mdx#2025-04-21_snippet_12\n\nLANGUAGE: sh\nCODE:\n```\npnpm run test\n```\n\n----------------------------------------\n\nTITLE: Using getHooks in TypeScript\nDESCRIPTION: Demonstrates how to get and call hook functions manually using the api.getHooks method. This example shows calling the onBeforeRender hook.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/runtime-plugins/api.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst hooks = api.getHooks();\nawait hooks.onBeforeRender.call(myContext);\n```\n\n----------------------------------------\n\nTITLE: Using resolveComponent with loadable for Named Exports\nDESCRIPTION: Advanced usage of loadable with the resolveComponent option to handle named exports and dynamic component selection based on props.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/utility/loadable.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nconst LoadableApple = loadable(() => import('./components'), {\n  resolveComponent: components => components.Apple,\n});\nconst LoadableOrange = loadable(() => import('./components'), {\n  resolveComponent: components => components.Orange,\n});\nconst LoadableFruit = loadable(() => import('./components'), {\n  resolveComponent: (components, props) => components[props.fruit],\n});\n```\n\n----------------------------------------\n\nTITLE: Modifying Rspack Configuration in Modern.js\nDESCRIPTION: Demonstrates how to modify Rspack bundler configuration using the modifyRspackConfig API hook. Allows customizing build settings like minification options.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/cli-plugins/api.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\napi.modifyRspackConfig((config, utils) => {\n  config.builtins.minify = {\n    enable: true,\n    implementation: utils.rspack.SwcJsMinimizerRspackPlugin,\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Processing Request Data in Action Function\nDESCRIPTION: Shows how to extract and process data from the request object in a Data Action function, which can be used to update user information on the server.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/data/data-write.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { ActionFunctionArgs } from '@modern-js/runtime/router';\n\nexport const action = async ({ request }: ActionFunctionArgs) => {\n  const newUser = await request.json();\n  return updateUser(newUser);\n};\n```\n\n----------------------------------------\n\nTITLE: Setting CDN Prefix for Assets\nDESCRIPTION: Demonstrates how to configure a CDN prefix for static assets by setting the publicPath property, which adds the specified URL prefix to all asset references.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  buildConfig: {\n    asset: {\n      publicPath: 'https://xxx/',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing Login Flow in Frontend Component\nDESCRIPTION: This updated React component implements a login flow by first calling the login API before accessing the protected hello endpoint. It demonstrates the complete authentication flow with the middleware.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/bff/extend-server.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useState, useEffect } from 'react';\nimport { get as hello } from '@api/hello';\nimport { post as login } from '@api/login';\n\nexport default () => {\n  const [text, setText] = useState('');\n\n  useEffect(() => {\n    async function fetchAfterLogin() {\n      const { code } = await login();\n      if (code === 0) {\n        const { message } = await hello();\n        setText(message);\n      }\n    }\n    fetchAfterLogin();\n  }, []);\n\n  return <p>{text}</p>;\n};\n```\n\n----------------------------------------\n\nTITLE: Using useStaticModel for Static State in TypeScript\nDESCRIPTION: Demonstrates the usage of useStaticModel to access the latest state without causing re-renders, suitable for certain UI scenarios.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/use-model.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useStaticModel } from '@modern-js/runtime/model';\n\nfunction Search() {\n  // should not be destructured\n  const [state] = useStaticModel(searchModel);\n\n  return (\n    <div>\n      <button\n        onClick={async () => {\n          const result = await mockSearch(state.input);\n          console.log(result);\n        }}\n      >\n        Search\n      </button>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Connect Usage Example\nDESCRIPTION: Demonstrates basic usage of the Connect API with two models, showing how to connect multiple models and access their state and actions in a component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/model/connect.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst modelA = model('modelA').define({\n  state: {\n    a: 1,\n  },\n  actions: {\n    incA(state) {\n      return {\n        ...state,\n        a: state.a + 1,\n      };\n    },\n  },\n});\n\nconst modelB = model('modelB').define({\n  state: {\n    b: 10,\n  },\n  actions: {\n    incB(state) {\n      return {\n        ...state,\n        b: state.b + 1,\n      };\n    },\n  },\n});\n\nfunction Test(props) {\n  props.incA(); // call modelA's action\n  props.incB(); // call modelB's action\n\n  props.a; // get modelA's state: a\n  props.b; // get modelB's state: b\n}\n\nexport default connect([modelA, modelB])(Test);\n```\n\n----------------------------------------\n\nTITLE: Implementing Time Display with NoSSR in Modern.js\nDESCRIPTION: Shows how to use NoSSR to handle time display functionality that would otherwise cause hydration mismatches between server and client rendering due to different timestamps.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/ssr/no-ssr.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { NoSSR } from '@modern-js/runtime/ssr';\n\nfunction Time() {\n  return (\n    <NoSSR>\n      <div>Time: {Date.now()}</div>\n    </NoSSR>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Modern.js for Production Environment\nDESCRIPTION: This configuration sets up the server port, output asset prefix, and Module Federation plugin for both local and production environments.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/module-federation/usage.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport { appTools, defineConfig } from '@modern-js/app-tools';\nimport { moduleFederationPlugin } from '@module-federation/modern-js';\n\nconst isLocal = process.env.IS_LOCAL === 'true';\n\nexport default defineConfig({\n  server: {\n    port: 3051,\n  },\n  runtime: {\n    router: true,\n  },\n  output: {\n    assetPrefix: isLocal ? 'http://127.0.0.1:3051' : '/',\n  },\n  plugins: [\n    appTools({\n      bundler: 'rspack',\n    }),\n    moduleFederationPlugin(),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Using useParams Hook in React Router Setup\nDESCRIPTION: Example of using the useParams hook in a React component with React Router to access route parameters.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/router/router.mdx#2025-04-21_snippet_5\n\nLANGUAGE: TSX\nCODE:\n```\nimport { Switch, Route, useParams } from '@modern-js/runtime/router';\n\nfunction BlogPost() {\n  const { slug } = useParams();\n  return <div>Now showing post {slug}</div>;\n}\n\nfunction App() {\n  return (\n    <Routes>\n      <Route path=\"/\" element={<div>home</div>} />\n      <Route path=\"/blog/:slug\" element={<BlogPost />} />\n    </Routes>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a BFF Upload Handler in TypeScript\nDESCRIPTION: This code defines a server-side POST function in the BFF layer that handles file uploads. It receives form data containing files and returns a response object. The formData parameter is an Object where keys correspond to field names used during upload.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/bff-upload.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport const post = async ({ formData }: {formData: Record<string, any>}) => {\n  console.info('formData:', formData);\n  // do somethings\n  return {\n    data: {\n      code: 0,\n    },\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Optimized Intra-Model Communication using onMount\nDESCRIPTION: This code demonstrates an optimized approach for intra-Model communication by using the onMount hook to retrieve the Model's own Actions after mounting is complete, avoiding the need to call use() in each Effect function.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/model/model-communicate.mdx#2025-04-21_snippet_4\n\nLANGUAGE: TypeScript\nCODE:\n```\nconst fooModel = model('foo').define((context, { use, onMount }) => {\n  let actions;\n\n  onMount(() => {\n    // fooModel 挂载完成后，通过 use 获取当前 Model 的 actions\n    [, actions] = use(fooModel);\n  });\n\n  return {\n    state: {\n      a: '',\n      b: '',\n    },\n    actions: {\n      setA(state, payload) {\n        state.a = payload;\n      },\n      setB(state, payload) {\n        state.a = payload;\n      },\n    },\n    effects: {\n      async loadA() {\n        const res = await mockFetchA();\n        actions.setA(res);\n      },\n      async loadB() {\n        const res = await mockFetchB();\n        actions.setB(res);\n      },\n    },\n  };\n});\n```\n\n----------------------------------------\n\nTITLE: React Router Configuration Example\nDESCRIPTION: Shows how to configure client-side routes using React Router in a Modern.js application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/concept/entries.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { BrowserRouter, Route, Routes } from '@modern-js/runtime/router';\n\nexport default () => {\n  return (\n    <BrowserRouter>\n      <Routes>\n        <Route index element={<div>index</div>} />\n        <Route path=\"about\" element={<div>about</div>} />\n      </Routes>\n    </BrowserRouter>\n  );\n};\n```\n\n----------------------------------------\n\nTITLE: Running Bundle Analysis Build\nDESCRIPTION: Command to analyze bundle sizes by enabling the BUNDLE_ANALYZE environment variable during build.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/page-performance/optimize-bundle.mdx#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nBUNDLE_ANALYZE=true pnpm build\n```\n\n----------------------------------------\n\nTITLE: Creating a Model with Cross-Model Dependencies in TypeScript\nDESCRIPTION: Shows how to create models with computed properties that depend on other models' states.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/model/model_.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst fooModel = model('foo').define({\n  state: 'foo',\n});\n\nconst barModel = model('bar').define({\n  state: 'bar',\n  computed: {\n    combineFoo: [fooModel, (state, fooState) => state + fooState],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring External Dependencies in Modern.js Module\nDESCRIPTION: Example of configuring external dependencies that will not be bundled into the final output using the 'externals' option.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_17\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    // do not bundle React\n    externals: ['react'],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Setting webpack devtool based on production environment\nDESCRIPTION: Example showing how to configure webpack's sourcemap generation based on whether the build is for production using the isProd parameter.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/webpack-chain.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    webpackChain: (chain, { isProd }) => {\n      if (isProd) {\n        chain.devtool('source-map');\n      }\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using Monitors in Server Middleware\nDESCRIPTION: Example of using Monitors in a server middleware to track request timing. It demonstrates how to get the Monitors instance from the context object.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/server-monitor/monitors.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { UnstableMiddleware } from '@modern-js/runtime/server';\n\nconst time: UnstableMiddleware = async (c, next) => {\n  const start = Date.now();\n  await next();\n  const end = Date.now();\n  const monitors = c.get('monitors');\n  monitors.info(`${end - start}`);\n};\n\nexport const unstableMiddleware: UnstableMiddleware[] = [time];\n```\n\n----------------------------------------\n\nTITLE: Configuring Modern.js for Micro Frontend Sub-app\nDESCRIPTION: Configuration file for a Modern.js micro frontend sub-application, setting up development port, runtime options, and plugins.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/micro-frontend/c02-development.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nimport { appTools, defineConfig } from '@modern-js/app-tools';\nimport { garfishPlugin } from '@modern-js/plugin-garfish';\n\nexport default defineConfig({\n  dev: {\n    port: 8081,\n  },\n  runtime: {\n    router: true,\n  },\n  deploy: {\n    microFrontend: true,\n  },\n  plugins: [appTools(), garfishPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of useRuntimeContext Hook in Modern.js\nDESCRIPTION: Example showing how to import and use the useRuntimeContext hook in a React function component to access runtime context.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/core/use-runtime-context.mdx#2025-04-21_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useRuntimeContext } from '@modern-js/runtime';\n\nexport function App() {\n  const runtimeContext = useRuntimeContext();\n  return <div>Hello World</div>\n}\n```\n\n----------------------------------------\n\nTITLE: TypeScript Definition for useRouteError Hook in Modern.js Router\nDESCRIPTION: Defines the useRouteError hook function signature. This hook returns the nearest ancestor Route error for error handling in React Router applications.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/router/router.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport declare function useRouteError(): unknown;\n```\n\n----------------------------------------\n\nTITLE: Default Server-Side Entry Implementation in Modern.js\nDESCRIPTION: This snippet shows the default server-side entry configuration in Modern.js when SSR is enabled. It uses the renderString function to generate HTML and creates a response with appropriate headers.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/hooks/src/entry.server.mdx#2025-04-21_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  renderString,\n  createRequestHandler,\n} from '@modern-js/runtime/ssr/server';\n\nconst handleRequest = async (request, ServerRoot, options) => {\n  const body = await renderString(request, <ServerRoot />, options);\n\n  return new Response(body, {\n    headers: {\n      'content-type': 'text/html; charset=utf-8',\n    },\n  });\n};\n\nexport default createRequestHandler(handleRequest);\n```\n\n----------------------------------------\n\nTITLE: Implementing Counter Component with Model Communication in TSX\nDESCRIPTION: Shows how to use the stepModel and counterModel in a React component. The component allows incrementing both the step value and the counter value, demonstrating inter-model communication.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/model-communicate.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useModel } from '@modern-js/runtime/model';\nimport { counterModel, stepModel } from './models/count';\n\nfunction Counter() {\n  const [state, actions] = useModel(counterModel);\n  const [step, stepActions] = useModel(stepModel);\n\n  return (\n    <div>\n      <div>step: {step}</div>\n      <button onClick={() => stepActions.setState(step + 1)}>add step</button>\n      <div>counter: {state.value}</div>\n      <button onClick={() => actions.add()}>add counter</button>\n    </div>\n  );\n}\n\nexport default function App() {\n  return <Counter />;\n}\n```\n\n----------------------------------------\n\nTITLE: Importing TOML Files in Modern.js\nDESCRIPTION: Demonstrates how to import and use TOML files in JavaScript code. TOML content is automatically converted to JSON format.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/static-assets/json-files.mdx#2025-04-21_snippet_3\n\nLANGUAGE: toml\nCODE:\n```\nhello = \"world\"\n\n[foo]\nbar = \"baz\"\n```\n\nLANGUAGE: javascript\nCODE:\n```\nimport example from './example.toml';\n\nconsole.log(example.hello); // 'world';\nconsole.log(example.foo); // { bar: 'baz' };\n```\n\n----------------------------------------\n\nTITLE: Defining useNavigate Hook in TypeScript\nDESCRIPTION: Declaration of the useNavigate hook, which returns a function for performing navigation operations.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/router/router.mdx#2025-04-21_snippet_0\n\nLANGUAGE: TypeScript\nCODE:\n```\ndeclare function useNavigate(): NavigateFunction;\n\ninterface NavigateFunction {\n  (\n    to: To,\n    options?: {\n      replace?: boolean;\n      state?: any;\n      relative?: RelativeRoutingType;\n    },\n  ): void;\n  (delta: number): void;\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Webpack-Specific Test Cases in TypeScript\nDESCRIPTION: Example of how to add test cases for Webpack-specific capabilities that will only run in the Webpack environment and be skipped in Rspack.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/tests/e2e/builder/README.md#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { webpackOnlyTest } from '@scripts/helper';\n// will passed in webpack, and skipped in rspack\nwebpackOnlyTest('test 1 + 1', () => {\n    expect(1 + 1).toBe(2);\n})\n```\n\n----------------------------------------\n\nTITLE: Modifying Preset-react Options\nDESCRIPTION: Example of using the modifyPresetReactOptions utility function to customize @babel/preset-react configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/babel.mdx#2025-04-21_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    babel(config, { modifyPresetReactOptions }) {\n      modifyPresetReactOptions({\n        pragma: 'React.createElement',\n      });\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Function Signature of defineConfig\nDESCRIPTION: Defines the type signature of the defineConfig function, showing it accepts a Component and a configuration object as parameters.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/app/define-config.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nfunction defineConfig(Component, config): any;\n```\n\n----------------------------------------\n\nTITLE: Using Glob Patterns for Copying in Modern.js Module (TypeScript)\nDESCRIPTION: This example demonstrates how to use glob patterns to copy multiple files to a directory or a single file in Modern.js Module.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/copy.md#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: [\n    {\n      outDir: 'dist',\n      copy: {\n        patterns: [\n          /**\n           * copy glob to dir\n           */\n          {\n            from: './*.html',\n            to: './temp-5',\n          },\n        ],\n        options: {\n          enableCopySync: true,\n        },\n      },\n    },\n    {\n      copy: {\n        patterns: [\n          /**\n           * copy glob to file\n           */\n          {\n            from: './*.html',\n            to: './temp-6/index.html',\n          },\n        ],\n        options: {\n          enableCopySync: true,\n        },\n      },\n    },\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Loading Self-controlled Routing Sub-app in Modern.js\nDESCRIPTION: React component to load a self-controlled routing sub-application using the useModuleApps hook from @modern-js/plugin-garfish/runtime.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/micro-frontend/c02-development.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport { useModuleApps } from '@modern-js/plugin-garfish/runtime';\n\nconst Index = () => {\n  const { Dashboard } = useModuleApps();\n\n  return (\n    <div>\n      <Dashboard />\n    </div>\n  );\n};\n\nexport default Index;\n```\n\n----------------------------------------\n\nTITLE: Proxy Type Definitions in TypeScript\nDESCRIPTION: TypeScript type definitions for the proxy configuration, including ProxyDetail interface and ProxyOptions types.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/dev-server.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { Options as HttpProxyOptions } from 'http-proxy-middleware';\n\ntype Filter = string | string[] | ((pathname: string, req: Request) => boolean);\n\ntype ProxyDetail = HttpProxyOptions & {\n  bypass?: (\n    req: IncomingMessage,\n    res: ServerResponse,\n    proxyOptions: ProxyOptions,\n  ) => string | undefined | null | false;\n  context?: Filter;\n};\n\ntype ProxyOptions =\n  | Record<string, string>\n  | Record<string, ProxyDetail>\n  | ProxyDetail[]\n  | ProxyDetail;\n```\n\n----------------------------------------\n\nTITLE: Basic AssetsRetry Configuration in JavaScript\nDESCRIPTION: Example showing how to enable assets retry functionality with minimal configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/assets-retry.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    assetsRetry: {},\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of loadable for Component Loading\nDESCRIPTION: Example of basic usage of loadable to dynamically import a component, enabling code-splitting.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/utility/loadable.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport loadable from '@modern-js/runtime/loadable';\n\nconst OtherComponent = loadable(() => import('./OtherComponent'));\n```\n\n----------------------------------------\n\nTITLE: Using Selectors with useModel in TypeScript\nDESCRIPTION: Shows how to use state and action selectors with useModel to filter or rename state and actions from multiple models.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/use-model.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst fooModel = model('foo').define({\n  state: {\n    value: 1,\n  },\n  actions: {\n    add(state) {\n      state += 1;\n    },\n  },\n});\n\nconst barModel = model('bar').define({\n  state: {\n    value: 'bar',\n  },\n  actions: {\n    set(state, payload) {\n      state.value = payload;\n    },\n  },\n});\n\nconst [state, actions] = useModel(\n  [fooModel, barModel],\n  (fooState, barState) => ({\n    fooValue: fooState.value,\n    barValue: barState.value,\n  }), // stateSelector\n  (fooActions, barActions) => ({ add: fooActions.add }), // actionsSelector\n);\n```\n\n----------------------------------------\n\nTITLE: Integrating Redux-Logger Middleware with Reduck Provider in TypeScript\nDESCRIPTION: This code snippet demonstrates how to use the redux-logger middleware with Reduck's Provider component. The middleware is passed as a configuration option to the Provider, which wraps the main App component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/model/redux-integration.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nReactDOM.render(\n  <Provider config={{ middlewares: [logger] }}>\n    // 通过 Provider 的 config 参数设置 中间件\n    <App />\n  </Provider>,\n  document.getElementById('root'),\n);\n```\n\n----------------------------------------\n\nTITLE: Calling BFF API from Frontend Component in Modern.js\nDESCRIPTION: This React component demonstrates how to call a BFF function using Modern.js's unified API approach. It uses useEffect to fetch data when the component mounts.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/bff/extend-server.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useState, useEffect } from 'react';\nimport { get as hello } from '@api/hello';\n\nexport default () => {\n  const [text, setText] = useState('');\n\n  useEffect(() => {\n    async function fetchMyApi() {\n      const { message } = await hello();\n      setText(message);\n    }\n\n    fetchMyApi();\n  }, []);\n\n  return <p>{text}</p>;\n};\n```\n\n----------------------------------------\n\nTITLE: Loadable Component Implementation\nDESCRIPTION: Demonstrates using the Modern.js Loadable API for component code splitting. Shows a simple implementation that works with SSR without additional configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/page-performance/code-split.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport loadable from '@modern-js/runtime/loadable';\n\nconst OtherComponent = loadable(() => import('./OtherComponent'));\n\nfunction MyComponent() {\n  return <OtherComponent />;\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Modern.js Project Settings in JavaScript\nDESCRIPTION: This code snippet exports a configuration object for a Modern.js project. It specifies the project name, defines monorepo settings, and configures various build and development options.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/components/upgrade-faq.mdx#2025-04-21_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nmodule.exports = {\n  \"name\": \"modern-js\",\n  \"monorepo\": {\n    \"preset\": \"modern-js-monorepo\"\n  },\n  \"plugins\": [\n    \"./scripts/generate-readme.js\",\n    \"./scripts/generate-changeset-config.js\"\n  ],\n  \"packageOptions\": {\n    \"packageFields\": {\n      \"eslintIgnore\": [\n        \"node_modules\",\n        \"dist\",\n        \"coverage\",\n        \"templates\",\n        \"!.eslintrc.js\"\n      ]\n    }\n  },\n  \"buildConfig\": {\n    \"buildType\": \"bundle\",\n    \"format\": [\n      \"cjs\",\n      \"esm\"\n    ],\n    \"sourceMap\": false,\n    \"target\": \"es2019\",\n    \"minify\": true,\n    \"bundleOptions\": {\n      \"externals\": [\n        // common dependencies\n        \"webpack\",\n        \"babel\",\n        \"postcss\",\n        \"@babel/preset-react\",\n        \"@babel/preset-typescript\",\n        // \"core-js\",\n        // \"@babel/runtime\",\n        \"@svgr/webpack\",\n        \"@types/jest\",\n        // \"@types/node\",\n        \"@types/react\",\n        \"@types/react-dom\",\n        // \"autoprefixer\",\n        \"bfj\",\n        \"case-sensitive-paths-webpack-plugin\",\n        \"chalk\",\n        \"commander\",\n        \"cross-spawn\",\n        \"dotenv\",\n        \"esbuild\",\n        \"fs-extra\",\n        \"html-entities\",\n        \"htmlparser2\",\n        // \"jest-worker\",\n        \"mime-types\",\n        \"ora\",\n        \"postcss-flexbugs-fixes\",\n        \"postcss-normalize\",\n        \"postcss-preset-env\",\n        \"react-dev-utils\",\n        \"resolve\",\n        \"terser-webpack-plugin\"\n      ]\n    }\n  },\n  \"tools\": {\n    \"jest\": {\n      \"testTimeout\": 30000\n    }\n  }\n};\n```\n\n----------------------------------------\n\nTITLE: Middleware Function Type Definition in Modern.js\nDESCRIPTION: TypeScript type definitions for the Middleware function and MiddlewareContext object. Describes the structure of the context parameter that middleware functions receive.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/web-server/middleware.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\ntype Middleware = (\n  context: MiddlewareContext,\n  next: NextFunction,\n) => Promise<void> | void;\n\ntype MiddlewareContext = {\n  response: {\n    set: (key: string, value: string) => void;\n    status: (code: number) => void;\n    getStatus: () => number;\n    cookies: {\n      set: (key: string, value: string, options?: any) => void;\n      clear: () => void;\n    };\n    raw: (\n      body: string,\n      { status, headers }: { status: number; headers: Record<string, any> },\n    ) => void;\n    locals: Record<string, any>;\n  };\n  request: {\n    url: string;\n    host: string;\n    pathname: string;\n    query: Record<string, any>;\n    cookie: string;\n    cookies: {\n      get: (key: string) => string;\n    };\n    headers: IncomingHttpHeaders;\n  };\n  source: {\n    req: IncomingMessage;\n    res: ServerResponse;\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Bootstrap function signature in Modern.js\nDESCRIPTION: Defines the TypeScript type signature for the bootstrap function. It specifies the function parameters including the React component, mounting element, root, and ReactDOM object.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/core/bootstrap.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ntype BootStrap<T = unknown> = (\n  App: React.ComponentType,\n  id: string | HTMLElement | RuntimeContext,\n  root?: any,\n  ReactDOM?: {\n    render?: Renderer;\n    hydrate?: Renderer;\n    createRoot?: typeof createRoot;\n    hydrateRoot?: typeof hydrateRoot;\n  },\n) => Promise<T>;\n```\n\n----------------------------------------\n\nTITLE: Configuring Tailwind CSS with Function Type in Modern.js\nDESCRIPTION: Demonstrates how to modify Tailwind CSS configuration using a function approach, where the default config is passed as the first parameter and can be directly modified.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/tailwindcss.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    tailwindcss(config) {\n      config.content.push('./some-folder/**/*.{js,ts}');\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Customizing Load Animation for Micro-frontend Components in Modern.js\nDESCRIPTION: Demonstrates how to add custom loading animations and error handling for micro-frontend components using the useModuleApps hook in Modern.js.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/core/use-module-apps.mdx#2025-04-21_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nfunction App() {\n  const {\n    Components: { Home },\n  } = useModuleApps();\n\n  return (\n    <div>\n      Master APP\n      <Route exact path=\"/home\">\n        <Home\n          loadable={{\n            loading: ({ pastDelay, error }: any) => {\n              if (error) {\n                console.error(error);\n                return <div>error: {error?.message}</div>;\n              } else if (pastDelay) {\n                return <div>loading</div>;\n              } else {\n                return null;\n              }\n            },\n          }}\n        />\n      </Route>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Favicons by Entries in Modern.js\nDESCRIPTION: This code snippet demonstrates how to set different favicons for different pages using the 'faviconByEntries' option in Modern.js. It shows setting a default favicon and a specific favicon for the 'foo' entry.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/html/favicon-by-entries.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    favicon: './src/assets/default.png',\n    faviconByEntries: {\n      foo: './src/assets/foo.png',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Registering SSG Plugin in Modern.js Config\nDESCRIPTION: Configuration to enable SSG by importing and registering the SSG plugin in the Modern.js configuration file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/render/ssg.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { ssgPlugin } from '@modern-js/plugin-ssg';\n\nexport default defineConfig({\n  output: {\n    ssg: true,\n  },\n  plugins: [..., ssgPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Package.json Configuration\nDESCRIPTION: Example of configuring Modern.js through the modernConfig field in package.json.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/usage.mdx#2025-04-21_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"modernConfig\": {\n    \"source\": {\n      \"alias\": {\n        \"@common\": \"./src/common\"\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Modern.js with Garfish Plugin\nDESCRIPTION: This is the main configuration file for a Modern.js application that enables routing and sets up Garfish plugin for micro-frontend architecture. It uses appTools and garfishPlugin to configure the application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/components/enable-micro-frontend.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { appTools, defineConfig } from '@modern-js/app-tools';\nimport { garfishPlugin } from '@modern-js/plugin-garfish';\n\nexport default defineConfig({\n  runtime: {\n    router: true,\n  },\n  plugins: [appTools(), garfishPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Default PostCSS Options in Modern.js\nDESCRIPTION: Default PostCSS configuration object showing enabled plugins including postcss-nesting, postcss-media-minmax, postcss-flexbugs-fixes, autoprefixer, and legacy browser compatibility plugins. The configuration includes source map generation based on development mode.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/postcss.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultOptions = {\n  postcssOptions: {\n    plugins: [\n      // The following plugins are enabled by default\n      require('postcss-nesting'),\n      require('postcss-media-minmax'),\n      require('postcss-flexbugs-fixes'),\n      require('autoprefixer')({\n        flexbox: 'no-2009',\n      }),\n      // The following plugins are only enabled when compatible with legacy browsers\n      require('postcss-custom-properties'),\n      require('postcss-initial'),\n      require('postcss-page-break'),\n      require('postcss-font-variant'),\n    ],\n    sourceMap: isDev,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Creating Computed Properties with Dependencies in Reduck\nDESCRIPTION: Shows how to define computed properties that depend on other models' states using an array syntax.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/model/model_.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst fooModel = model('foo').define({\n  state: 'foo',\n});\n\nconst barModel = model('bar').define({\n  state: 'bar',\n  computed: {\n    combineFoo: [fooModel, (state, fooState) => state + fooState],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Model Duplication in TypeScript\nDESCRIPTION: Shows how to create a duplicate Model instance from an existing Model, useful when multiple modules share the same state management logic but require different data sources.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/define-model.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst barModel = fooModel('bar');\n```\n\n----------------------------------------\n\nTITLE: Using useRouteError Hook Example in Modern.js Router\nDESCRIPTION: Example of how to use the useRouteError hook to create an error boundary component. The component displays the status and message of the error from the router.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/router/router.mdx#2025-04-21_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useRouteError } from '@modern-js/runtime/router';\nconst ErrorBoundary = () => {\n  const error = useRouteError();\n  return (\n    <div>\n      <h1>{error.status}</h1>\n      <h2>{error.message}</h2>\n    </div>\n  );\n};\nexport default ErrorBoundary;\n```\n\n----------------------------------------\n\nTITLE: Function Signature of renderStreaming in Modern.js\nDESCRIPTION: Defines the TypeScript type signature for the renderStreaming function, specifying its parameters and return type. It takes a Request object, a React element, and render options, returning a Promise of ReadableStream.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/ssr/renderStreaming.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport type RenderStreaming = (\n  request: Request,\n  serverRoot: React.ReactElement,\n  optinos: RenderOptions,\n) => Promise<ReadableStream>;\n```\n\n----------------------------------------\n\nTITLE: Enabling AssetsRetry in Modern.js Configuration\nDESCRIPTION: This JavaScript snippet shows how to enable the assetsRetry feature in the Modern.js configuration file. It demonstrates setting an empty object to use default settings.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/output/assets-retry.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    assetsRetry: {},\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Customizing Request SDK with Axios in Modern.js (TSX)\nDESCRIPTION: This example demonstrates how to use Axios to customize the request function in Modern.js. It shows type handling and parameter mapping between fetch and Axios APIs.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/bff/sdk.mdx#2025-04-21_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { configure } from '@modern-js/runtime/bff';\nimport type { Method, AxiosRequestHeaders as Headers } from 'axios';\n\nconfigure({\n  async request(...config: Parameters<typeof fetch>) {\n    const [url, params] = config;\n    const res = await axios({\n      url: url as string,  // Here we need to use `as` because fetch and axios types are somewhat incompatible\n      method: params?.method as Method,\n      data: params?.body,\n      headers: params?.headers as Headers,\n    });\n    return res.data;\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Dynamic Import in TypeScript\nDESCRIPTION: Demonstrates how to use dynamic import() to split code into separate bundles. The example shows importing a math module dynamically.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/page-performance/code-split.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport('./math').then(math => {\n  console.log(math.add(16, 26));\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring External Dependencies in Modern.js\nDESCRIPTION: Example configuration using defineConfig to customize how Modern.js Module handles third-party dependencies. Shows how to disable autoExternal and explicitly specify which packages should remain external.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/external-dependency.mdx#2025-04-21_snippet_4\n\nLANGUAGE: ts\nCODE:\n```\nepxort default defineConfig({\n  buildConfig: {\n    autoExternal: false,\n    externals: ['pkg-1', /pkg-2/],\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Authentication Middleware in Express.js for Modern.js BFF\nDESCRIPTION: This snippet demonstrates how to write middleware in the api/_app.ts file to add permission checks to the BFF Server using Express.js. It checks for a session ID in cookies and requires login for all routes except /api/login.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/bff/extend-server.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { hook } from '@modern-js/runtime/server';\nimport { Request, Response, NextFunction } from 'express';\n\nexport default hook(({ addMiddleware }) => {\n  addMiddleware(async (req: Request, res: Response, next: NextFunction) => {\n    if (req.url !== '/api/login') {\n      const sid = req?.cookies?.sid;\n      if (!sid) {\n        res.status(400);\n        res.json({ code: -1, message: 'need login' });\n      } else {\n        next();\n      }\n    } else {\n      next();\n    }\n  });\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring HTTP Proxy Middleware in Storybook\nDESCRIPTION: JavaScript implementation of API proxying in Storybook using http-proxy-middleware. This allows Storybook to proxy API requests to a different server, useful for development environments.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/faq/storybook.mdx#2025-04-21_snippet_4\n\nLANGUAGE: js\nCODE:\n```\n/* eslint-disable filenames/match-exported */\nconst { createProxyMiddleware } = require(\"http-proxy-middleware\");\n\nmodule.exports = function expressMiddleware (router) {\n  router.use('/api', createProxyMiddleware({\n    target: \"http://localhost:8000\",\n    changeOrigin: true\n  }))\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Default TypeScript Checker Options in JavaScript\nDESCRIPTION: This snippet shows the default configuration for the TypeScript checker in Modern.js. It sets memory limits, configures TypeScript paths, excludes certain files, and customizes logging behavior.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/ts-checker.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultOptions = {\n  typescript: {\n    // avoid OOM issue\n    memoryLimit: 8192,\n    // use tsconfig of user project\n    configFile: tsconfigPath,\n    // use typescript of user project\n    typescriptPath: require.resolve('typescript'),\n  },\n  issue: {\n    exclude: [\n      { file: '**/*.(spec|test).ts' },\n      { file: '**/node_modules/**/*' },\n    ],\n  },\n  logger: {\n    log() {\n      // do nothing\n      // we only want to display error messages\n    },\n    error(message: string) {\n      console.error(message.replace(/ERROR/g, 'Type Error'));\n    },\n  },\n},\n```\n\n----------------------------------------\n\nTITLE: Configuring Cypress with TypeScript\nDESCRIPTION: Basic Cypress configuration file setup using TypeScript with E2E testing enabled.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/testing/cypress.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from 'cypress'\n \nexport default defineConfig({\n  e2e: {\n    setupNodeEvents(on, config) {},\n  },\n})\n```\n\n----------------------------------------\n\nTITLE: Using Monitors in Data Loader Functions\nDESCRIPTION: Example of how to use Monitors in a Data Loader function to track timing of fetch operations and log errors. It utilizes getMonitors from the Modern.js runtime.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/server-monitor/monitors.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { LoaderFunctionArgs } from '@modern-js/runtime/router';\nimport { getMonitors } from '@modern-js/runtime';\nconst loader = async ({ context }: LoaderFunctionArgs) => {\n    const monitors = getMonitors();\n    const start = Date.now();\n    try {\n        await fetch(...);\n        monitors.timing('loader_fetch_timing', Date.now() - start);\n    } catch(e) {\n        monitors.error(e);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: TypeScript Function Signature for useLoader\nDESCRIPTION: Defines the TypeScript types for the useLoader function, including the loader function parameters, configuration options, and return value structure.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/core/use-loader.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ntype LoaderFn = (context: runtimeContext) => Promise<unknow>;\ntype Options = {\n  onSuccess: (data: Record<string, any>) => void;\n  onError: (error: Error) => void;\n  initialData: Record<string, any>;\n  skip: boolean;\n  params: Record<string, any>;\n  static: boolean;\n};\ntype ReturnData = {\n  data: Record<string, any>;\n  loading: boolean;\n  error: Error;\n  reload: (params?: Record<string, any>) => Promise<any> | undefined;\n  reloading: boolean;\n};\n\nfunction useLoader(loaderFn: LoaderFn, options: Options): ReturnData;\n```\n\n----------------------------------------\n\nTITLE: Importing YAML Files in Modern.js\nDESCRIPTION: Shows how to import and use YAML files in JavaScript code. YAML content is automatically converted to JSON format.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/static-assets/json-files.mdx#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\n---\nhello: world\nfoo:\n  bar: baz\n```\n\nLANGUAGE: javascript\nCODE:\n```\nimport example from './example.yaml';\n\nconsole.log(example.hello); // 'world';\nconsole.log(example.foo); // { bar: 'baz' };\n```\n\n----------------------------------------\n\nTITLE: Configuring DevServer Options in Modern.js\nDESCRIPTION: Demonstrates various DevServer configuration options including disabling gzip compression, setting custom headers, enabling historyApiFallback, and configuring HTTPS.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/dev-server.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    devServer: {\n      compress: false,\n    },\n  },\n};\n```\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    devServer: {\n      headers: {\n        'X-Custom-Foo': 'bar',\n      },\n    },\n  },\n};\n```\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    devServer: {\n      historyApiFallback: true,\n    },\n  },\n};\n```\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    devServer: {\n      https: {\n        key: fs.readFileSync('certificates/private.pem'),\n        cert: fs.readFileSync('certificates/public.pem'),\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring API Proxy with Path Rewriting in Modern.js\nDESCRIPTION: Sets up a proxy configuration to redirect requests from '/api' to 'https://cnodejs.org' with path rewriting for the topics endpoint. Uses changeOrigin to handle cross-origin requests and includes path rewriting from '/api/topics' to '/api/v1/topics'.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/bff-proxy-path-rewrite.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { defineConfig } from '@modern-js/app-tools/server';\nexport default defineConfig({\n  bff: {\n    proxy: {\n      '/api': {\n        target: 'https://cnodejs.org',\n        pathRewrite: { '/api/topics': '/api/v1/topics' },\n        changeOrigin: true,\n      },\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Modifying Preset-env Options with Object Target\nDESCRIPTION: Example of using the modifyPresetEnvOptions utility function to customize @babel/preset-env configuration with object-based browser targets.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/babel.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    babel(config, { modifyPresetEnvOptions }) {\n      modifyPresetEnvOptions({\n        targets: {\n          chrome: \"58\",\n          ie: \"11\"\n        }\n      });\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuration Merging Example in JSON\nDESCRIPTION: Shows how configurations from modern.config.js and defineConfig are merged together to form the final application configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/app/define-config.mdx#2025-04-21_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  // From `modern.config.js`\n  ...runtime.router\n  // From `defineConfig`\n  ...config.router\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Custom Temporary Directory in Modern.js Configuration\nDESCRIPTION: Demonstrates how to configure a custom temporary directory path for Modern.js build outputs using the output.tempDir option. The example shows setting the temp directory inside node_modules to avoid conflicts in multi-config projects.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/temp-dir.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    tempDir: path.join('node_modules', '.temp-dir'),\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Importing SVG as React Component using Named Import\nDESCRIPTION: This snippet illustrates how to import an SVG file as a React component using the named import ReactComponent.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/static-assets/svg-assets.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ReactComponent as Logo } from './static/logo.svg';\n\nexport default () => <Logo />;\n```\n\n----------------------------------------\n\nTITLE: Default HTML Plugin Configuration in JavaScript\nDESCRIPTION: Default configuration object for HTML plugin showing various options including meta tags, title, injection settings, favicon, template customization, and minification parameters.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/html-plugin.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultOptions = {\n  meta, // 对应 `html.meta` 配置\n  title, // 对应 `html.title` 配置\n  inject, // 对应 `html.inject` 配置\n  favicon, // 对应 `html.favicon` 配置\n  template, // 对应 `html.template` 配置\n  filename, // 基于 `output.distPath` 和 `entryName` 生成\n  templateParameters, // 对应 `html.templateParameters` 配置\n  chunks: [entryName],\n  minify: { // // generated based on `output.disableMinimize` and `output.minify`\n    removeComments: false,\n    useShortDoctype: true,\n    keepClosingSlash: true,\n    collapseWhitespace: true,\n    removeRedundantAttributes: true,\n    removeScriptTypeAttributes: true,\n    removeStyleLinkTypeAttributes: true,\n    removeEmptyAttributes: true,\n    minifyJS, // generated based on `output.charset`, `output.legalComments` and `performance.removeConsole`\n    minifyCSS: true,\n    minifyURLs: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using Link Component for Navigation\nDESCRIPTION: Example of using the Link component to create a navigation link in a React application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/router/router.mdx#2025-04-21_snippet_9\n\nLANGUAGE: TypeScript\nCODE:\n```\n<Link to=\"/about\">About</Link>\n```\n\n----------------------------------------\n\nTITLE: Setting Source Alias with Object Syntax\nDESCRIPTION: Example of configuring path aliases using the source.alias object syntax in Modern.js configuration. Relative paths are automatically resolved to absolute paths.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/alias.mdx#2025-04-21_snippet_1\n\nLANGUAGE: js\nCODE:\n```\nexport default {\n  source: {\n    alias: {\n      '@common': './src/common',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Advanced Usage with TransformStream for Manipulating SSR Output\nDESCRIPTION: Shows an advanced implementation that uses TransformStream to manipulate the output of renderStreaming. This pattern allows for content transformation before sending the final response to the client.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/ssr/renderStreaming.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  renderStreaming,\n  createRequestHandler,\n} from '@modern-js/runtime/ssr/server';\n\nconst handleRequest = async (request, ServerRoot, options) => {\n  // do something before render\n  const stream = await renderStreaming(request, <ServerRoot />, options);\n\n  // docs: https://developer.mozilla.org/en-US/docs/Web/API/TransformStream\n  const transformStream = new TransformStream({\n    transform(chunk, controller) {\n      // do some transform\n    },\n  });\n\n  stream.pipeThrough(transformStream);\n\n  return new Response(transformStream.readable, {\n    headers: {\n      'content-type': 'text/html; charset=utf-8',\n    },\n  });\n};\n\nexport default createRequestHandler(handleRequest);\n```\n\n----------------------------------------\n\nTITLE: Configuring Bundleless Build with Specific Input Directory in Modern.js\nDESCRIPTION: Configuration example showing how to set up a bundleless build that only processes files in the src/runtime directory while maintaining the source directory as src.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/in-depth-about-build.md#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { defineConfig } from '@modern-js/module-tools';\n\nexport default defineConfig({\n  buildConfig: {\n    input: ['src/runtime'],\n    sourceDir: 'src',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Generating Application Entry in Modern.js\nDESCRIPTION: Shows how Modern.js automatically generates the real entry file from App.[tj]sx. The code demonstrates setting up the global context and rendering the root component using @modern-js/runtime.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/hooks/src/app.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n// runtime-global-context\nimport { setGlobalContext } from '@modern-js/runtime/context';\nimport App from '@_modern_js_src/App';\n\nsetGlobalContext({\n  App,\n});\n\n// index.tsx\nimport './runtime-global-context';\nimport { createRoot } from '@modern-js/runtime/react';\nimport { render } from '@modern-js/runtime/browser';\n\nconst ModernRoot = createRoot();\n\nrender(<ModernRoot />, 'root');\n```\n\n----------------------------------------\n\nTITLE: Using State Selection for Optimized Component Rendering\nDESCRIPTION: Shows how to use selector functions with useModel to filter state and prevent unnecessary re-renders by returning only required state values to components.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/performance.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst fooModel = model('foo').define({\n  state: {\n    a: '',\n    b: '',\n  },\n  actions: {\n    setA(state, payload) {\n      state.a = payload;\n    },\n    setB(state, payload) {\n      state.b = payload;\n    },\n  },\n});\n\nfunction ComponentA() {\n  // By passing in the selector function\n  // only the a state is returned to the component\n  const [stateA] = useModel(fooModel, state => state.a);\n\n  return <div>{stateA}</div>;\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Entry-Specific HTML Tags in Modern.js\nDESCRIPTION: Example configuration showing how to inject different script tags for specific entries using tagsByEntries. The foo entry gets b.js while other entries get a.js.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/html/tags-by-entries.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    tags: [{ tag: 'script', attrs: { src: 'a.js' } }],\n    tagsByEntries: {\n      foo: [{ tag: 'script', attrs: { src: 'b.js' } }],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring disableCssModuleExtension in Modern.js\nDESCRIPTION: Example configuration to enable CSS Modules processing for all CSS files in the source directory. This setting affects how .css, .sass, .scss, and .less files are processed, treating them all as CSS Modules regardless of their file naming convention.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/disable-css-module-extension.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    disableCssModuleExtension: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: MicroFrontend Interface Definition in TypeScript\nDESCRIPTION: TypeScript interface defining the structure of microFrontend configuration options including enableHtmlEntry, externalBasicLibrary, and moduleApp properties.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/deploy/microFrontend.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface MicroFrontend {\n  enableHtmlEntry?: boolean;\n  externalBasicLibrary?: boolean;\n  moduleApp?: string;\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring ESBuild in Modern.js Application\nDESCRIPTION: Example configuration for setting up ESBuild compilation behavior in a Modern.js application. This shows how to configure loader and minimize options with target browsers specified as Chrome 61.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/esbuild.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig({\n  tools: {\n    esbuild: {\n      loader: {\n        target: 'chrome61',\n      },\n      minimize: {\n        target: 'chrome61',\n      },\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Props Communication in Parent Application\nDESCRIPTION: Example showing how to pass props from a parent application to a child application component using Modern.js.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/micro-frontend/c04-communicate.mdx#2025-04-21_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nfunction App() {\n  const { MApp } = useModuleApps();\n\n  return (\n    <div>\n      <MApp count={100} />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing a Protected Page in Modern.js\nDESCRIPTION: A route component for a protected page that requires authentication. It wraps its content in the RequireAuth component to ensure only authenticated users can access it.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/examples/csr-auth.mdx#2025-04-21_snippet_4\n\nLANGUAGE: ts\nCODE:\n```\nimport { RequireAuth } from '../Auth';\n\nexport default function ProtectedPage() {\n  return (\n    <div className=\"container-box\">\n      <RequireAuth>\n        <h3>Protected</h3>\n      </RequireAuth>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Using getRuntimeConfig in TypeScript\nDESCRIPTION: Shows how to retrieve runtime configuration using the api.getRuntimeConfig method. This method returns a copy of the user's configuration defined in the modern.runtime.ts file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/runtime-plugins/api.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst config = api.getRuntimeConfig();\nconsole.log(config.myCustomSetting);\n```\n\n----------------------------------------\n\nTITLE: Adding Logic Before Dev Server Start in Modern.js Plugin\nDESCRIPTION: This snippet shows how to use the onBeforeDev hook to execute custom logic before the development server starts. It can be used for tasks like checking port availability.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/plugin/cli-plugins/api.mdx#2025-04-21_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\napi.onBeforeDev(async () => {\n  // 检查端口是否被占用\n  await checkPortAvailability(3000);\n});\n```\n\n----------------------------------------\n\nTITLE: Wrapping React Application with Reduck Provider Component\nDESCRIPTION: Example of how to manually wrap the entry component of a React application with the Reduck Provider component when using Reduck separately from Modern.js.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/use-out-of-modernjs.mdx#2025-04-21_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n// Root Component\nconst Root = () => {\n  return (\n    <Provider>\n      {/* Entry App */}\n      <App />\n    </Provider>\n  );\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing Sub-App Component Routing in Modern.js\nDESCRIPTION: Shows how to implement custom routing for micro frontend sub-applications using React Router and useModuleApps hook.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/micro-frontend/c03-main-app.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport { useModuleApps } from '@modern-js/plugin-garfish/runtime';\n\nimport {\n  RouterProvider,\n  Route,\n  createBrowserRouter,\n  createRoutesFromElements,\n  BrowserRouter,\n  Link,\n  Outlet,\n} from '@modern-js/runtime/router';\n\nconst AppLayout = () => (\n  <>\n    <div>\n      <Link to={'/table'}>load file-based sub-app</Link>\n    </div>\n    <div>\n      <Link to={'/dashboard'}>load self-controlled sub-app</Link>\n    </div>\n    <div>\n      <Link to={'/'}>unmount sub-app</Link>\n    </div>\n    <Outlet />\n  </>\n);\n\nexport default () => {\n  const { apps, MApp } = useModuleApps();\n\n  const router = createBrowserRouter(\n    createRoutesFromElements(\n      <Route path=\"/\" element={<AppLayout />}>\n        {apps.map(app => {\n          const { Component } = app;\n          return (\n            <Route\n              key={app.name}\n              path={`${app.name.toLowerCase()}/*`}\n              element={\n                <Component\n                  loadable={{\n                    loading: ({ pastDelay, error }: any) => {\n                      if (error) {\n                        return <div>error: {error?.message}</div>;\n                      } else if (pastDelay) {\n                        return <div>loading</div>;\n                      } else {\n                        return null;\n                      }\n                    },\n                  }}\n                />\n              }\n            />\n          );\n        })}\n      </Route>,\n    ),\n  );\n\n  return (\n    <>\n      <RouterProvider router={router} />\n    </>\n  );\n};\n```\n\n----------------------------------------\n\nTITLE: PreRender Component Function Signature and Types\nDESCRIPTION: The complete type definition of the PreRender component, showing its props interface including interval, staleLimit, level, include, and matches properties.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/ssr/pre-render.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\ntype Props {\n  interval: number;\n  staleLimit: number;\n  level: number;\n  include: { header?: string[], query?: string[] };\n  matches: { header?: Record<string, any>, query?: Record<string, any> }\n}\n\nfunction PreRender(props: Props): React.Component\n```\n\n----------------------------------------\n\nTITLE: ClientContext Interface Definition\nDESCRIPTION: Interface definition for ClientContext used in browser environments, containing request information but lacking server-specific features like response manipulation, logger, and metrics.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/core/use-runtime-context.mdx#2025-04-21_snippet_5\n\nLANGUAGE: ts\nCODE:\n```\ninterface ClientContext {\n  isBrowser: true;\n  request: {\n    userAgent: string;\n    cookie: string;\n    cookieMap: Record<string, any>;\n    query: Record<string, any>;\n    url: string;\n    host: string;\n    headers?: IncomingHttpHeaders;\n  };\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Monitors Module Types in TypeScript\nDESCRIPTION: Type definitions for the Monitors module, including event types (log, timing, counter) and the Monitors interface with methods for registering monitors and dispatching monitoring events.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/server-monitor/monitors.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport type LogLevel = 'error' | 'warn' | 'info' | 'debug' | 'trace';\nexport interface LogEvent {\n  type: 'log';\n  payload: {\n    level: LogLevel;\n    message: string;\n    args?: any[];\n  };\n}\n\nexport interface TimingEvent {\n  type: 'timing';\n  payload: {\n    name: string;\n    dur: number;\n    desc?: string;\n    args?: any[];\n  };\n}\n\nexport interface CounterEvent {\n  type: 'counter';\n  payload: {\n    name: string;\n    args?: any[];\n  };\n}\n\nexport type MonitorEvent = LogEvent | TimingEvent | CounterEvent;\n\nexport type CoreMonitor = (event: MonitorEvent) => void;\n\nexport interface Monitors {\n  // 注册 Monitor\n  push(monitor: CoreMonitor): void;\n\n  // 日志事件\n  error(message: string, ...args: any[]): void;\n  warn(message: string, ...args: any[]): void;\n  debug(message: string, ...args: any[]): void;\n  info(message: string, ...args: any[]): void;\n  trace(message: string,...args: any[]): void;\n\n  // 指标事件\n  timing(name: string, dur: number, ...args: any[]): void;\n  counter(name: string, ...args: any[]): void\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing onBeforeRender Hook in TypeScript\nDESCRIPTION: Shows how to use the onBeforeRender hook to perform data prefetching before the application renders. This hook executes for both server-side and client-side rendering.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/runtime-plugins/api.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\napi.onBeforeRender(async (context) => {\n  const data = await fetchData(context.req);\n  context.data = data; // Add the data to the context\n});\n```\n\n----------------------------------------\n\nTITLE: Creating Pathless File Segments in Modern.js\nDESCRIPTION: Demonstrates how to create complex routes without deeply nested directories using the '.' notation in Modern.js file structure.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/routes.mdx#2025-04-21_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\n└── routes\n    ├── user.profile.[id].edit\n    │      └── page.tsx\n    ├── layout.tsx\n    └── page.tsx\n```\n\n----------------------------------------\n\nTITLE: Using Route Component for Router Configuration\nDESCRIPTION: Example of using the Route component with createRoutesFromElements to configure a router with JSX syntax.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/router/router.mdx#2025-04-21_snippet_15\n\nLANGUAGE: TypeScript\nCODE:\n```\nconst router = createBrowserRouter(\n  createRoutesFromElements(\n    <Route\n      element={<Team />}\n      path=\"teams/:teamId\"\n      loader={async ({ params }) => {\n        return fetch(`/fake/api/teams/${params.teamId}.json`);\n      }}\n      action={async ({ request }) => {\n        return updateFakeTeam(await request.formData());\n      }}\n      errorElement={<ErrorBoundary />}\n    />,\n  ),\n);\n```\n\n----------------------------------------\n\nTITLE: Using defineConfig with React Component\nDESCRIPTION: Demonstrates how to use defineConfig to apply runtime configuration to a React component. In this example, it configures the router to disable HTML5 history support.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/app/define-config.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nfunction App () {\n  ...\n}\n\ndefineConfig(App, {\n  router: {\n    supportHtml5History: false\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Using NoSSR Component for Client-Only Rendering in React\nDESCRIPTION: This snippet shows how to use the NoSSR component to wrap elements that should only be rendered on the client-side, ensuring consistency between SSR and CSR rendering.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/render/ssr.mdx#2025-04-21_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\n<NoSSR>\n  <div>browser content</div>\n</NoSSR>\n```\n\n----------------------------------------\n\nTITLE: HandleEffect Function Signature Definition\nDESCRIPTION: Defines the complete type interface for the handleEffect function, including EffectActions interface and configuration options.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/model/handle-effect.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ninterface EffectActions {\n  pending: Action;\n  fulfilled: Action;\n  rejected: Action;\n}\n\ninterface Config {\n  ns?: string;\n  result?: string | false;\n  error?: string | false;\n  pending?: string | false;\n  combineMode?: 'merge' | 'replace';\n  omitResultNamespace?: boolean;\n}\n\nfunction handleEffect(config: Config): EffectActions;\n```\n\n----------------------------------------\n\nTITLE: Configuring DTS Generation in Modern.js Module\nDESCRIPTION: Examples of configuring various aspects of DTS (TypeScript Declaration File) generation, including error handling, output path, and generation options.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_15\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    dts: {\n      abortOnError: false,\n    },\n  },\n});\n```\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    dts: {\n      distPath: './types',\n    },\n  },\n});\n```\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    dts: {\n      enableTscBuild: true,\n    },\n  },\n});\n```\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    dts: {\n      only: true,\n    },\n  },\n});\n```\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    dts: {\n      tsconfigPath: './other-tsconfig.json',\n    },\n  },\n});\n```\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    dts: {\n      respectExternal: false,\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using Environment Variables in HTML Template\nDESCRIPTION: Demonstrates how to use environment variables directly in custom HTML templates.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/env-vars.mdx#2025-04-21_snippet_5\n\nLANGUAGE: html\nCODE:\n```\n<meta name=\"test\" content=\"<process.env.NODE_ENV>\" />\n```\n\n----------------------------------------\n\nTITLE: Setting Custom Response Headers in Modern.js DevServer\nDESCRIPTION: Example of setting custom HTTP response headers for all requests handled by the development server. This configuration adds a custom X-Custom-Foo header with the value 'bar'.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/dev-server.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    devServer: {\n      headers: {\n        'X-Custom-Foo': 'bar',\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining createStore Function Signature in TypeScript\nDESCRIPTION: This snippet defines the TypeScript interface for the createStore function, including the StoreConfig interface for configuration options and the ReduckStore interface for the returned store object.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/model/create-store.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface StoreConfig {\n  initialState?: Record<string, any>;\n  middlewares?: Middleware[];\n  models?: Model[];\n  plugins?: Plugin[];\n  enhancers?: StoreEnhancer[];\n}\n\ninterface ReduckStore extends ReduxStore {\n  use: typeof useModel;\n  unmount: (model: Model) => void;\n}\n\nfunction createStore(config?: StoreConfig): ReduckStore;\n```\n\n----------------------------------------\n\nTITLE: BFF Domain Configuration\nDESCRIPTION: Configuration for custom BFF service domain using the runtime configure function\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/bff/cross-project.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { configure } from '${package_name}/runtime';\n\nconfigure({\n  setDomain() {\n    return 'https://your-bff-api.com';\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using Route Object Example with createBrowserRouter in Modern.js Router\nDESCRIPTION: Example of how to use Route as a plain object, passing it to the createBrowserRouter function to define routes programmatically with loaders and actions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/router/router.mdx#2025-04-21_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\nconst router = createBrowserRouter([\n  {\n    // it renders this element\n    element: <Team />,\n\n    // when the URL matches this segment\n    path: 'teams/:teamId',\n\n    // with this data loaded before rendering\n    loader: async ({ request, params }) => {\n      return fetch(`/fake/api/teams/${params.teamId}.json`, {\n        signal: request.signal,\n      });\n    },\n\n    // performing this mutation when data is submitted to it\n    action: async ({ request }) => {\n      return updateFakeTeam(await request.formData());\n    },\n\n    // and renders this element in case something went wrong\n    errorElement: <ErrorBoundary />,\n  },\n]);\n```\n\n----------------------------------------\n\nTITLE: Server-side Data and Tool Injection Middleware Example\nDESCRIPTION: Example middleware that injects data and tools into the response.locals object, making them available to subsequent middleware and server-side rendering processes.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/web-server/middleware.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport const Middleware = () => async (ctx, next) => {\n  ctx.response.locals.id = 'Modern.js';\n  ctx.response.locals.rpc = createRpcInstance();\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring CLI Plugin in Modern.js\nDESCRIPTION: Example of how to configure CLI plugins in Modern.js using the plugins field in modern.config.ts file. The example shows how to add the BFF plugin alongside the standard app tools.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/plugin/introduction.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// an example for bff\nimport { appTools, defineConfig } from '@modern-js/app-tools';\nimport { bffPlugin } from '@modern-js/plugin-bff';\n\nexport default defineConfig({\n  plugins: [appTools(), bffPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Defining AppIcon Types in TypeScript\nDESCRIPTION: This snippet defines TypeScript types for app icon configuration. It includes types for individual icon items and the overall app icon configuration structure.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/html/app-icon.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype AppIconItem = {\n  src: string;\n  size: number;\n  target?: 'apple-touch-icon' | 'web-app-manifest';\n};\n\ntype AppIcon = string | {\n  name?: string;\n  icons: AppIconItem[];\n  filename?: string;\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Automatic Inlining Thresholds in Modern.js\nDESCRIPTION: This snippet demonstrates how to modify the automatic inlining thresholds for different resource types using the output.dataUriLimit configuration in Modern.js.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/page-performance/inline-assets.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    dataUriLimit: {\n      image: 5000,\n      media: 0,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Adding Webpack Rules\nDESCRIPTION: Example showing how to add webpack rules using the addRules utility function.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/webpack.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    webpack: (config, { addRules }) => {\n      // Adding a single rule\n      addRules({\n        test: /\\.foo/,\n        loader: require.resolve('foo-loader'),\n      });\n\n      // Adding multiple rules\n      addRules([\n        {\n          test: /\\.foo/,\n          loader: require.resolve('foo-loader'),\n        },\n        {\n          test: /\\.bar/,\n          loader: require.resolve('bar-loader'),\n        },\n      ]);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Namespaced State Interface Example\nDESCRIPTION: Shows the state interface structure when using the namespace (ns) configuration option.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/model/handle-effect.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\ninterface State {\n  data: {\n    pending: boolean;\n    result: any;\n    error: string;\n  };\n}\n```\n\n----------------------------------------\n\nTITLE: Defining BundlerChain Function Type in TypeScript\nDESCRIPTION: Type definition for the bundlerChain function that allows modification of webpack and Rspack configurations. The function takes a chain object and utils as parameters and returns void or a Promise<void>.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/bundler-chain.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype BundlerChainFn = (\n  chain: RspackChain | webpackChain,\n  utils: ModifyBundlerChainUtils,\n) => Promise<void> | void;\n```\n\n----------------------------------------\n\nTITLE: Directly Referencing Upload Assets in HTML Files\nDESCRIPTION: Example of referencing resources from the upload/ directory directly in HTML files using script tags. This approach can be used in custom HTML or any HTML file under the config/public/ directory.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/hooks/config/upload.mdx#2025-04-21_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<script src=\"/upload/index.js\"></script>\n```\n\n----------------------------------------\n\nTITLE: Migrating Hook Invocation Pattern in TypeScript\nDESCRIPTION: Shows the transition from returning hooks object to using the api object for direct hook calls in Modern.js plugins.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/runtime-plugins/migration.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n// Old Syntax (return hooks)\n{\n  setup: () => ({\n    beforeRender({ req, res }) { /*...*/ }\n  })\n}\n\n// New Syntax (api.xxx)\n{\n  setup: api => {\n    api.onBeforeRender(({ req, res }) => { /*...*/ })\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: TypeScript Definition for Outlet Component in Modern.js Router\nDESCRIPTION: Defines the Outlet component and its props interface. The Outlet component is used in parent route elements to render their child route elements, enabling nested UI.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/router/router.mdx#2025-04-21_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\ninterface OutletProps {\n  context?: unknown;\n}\ndeclare function Outlet(props: OutletProps): React.ReactElement | null;\n```\n\n----------------------------------------\n\nTITLE: Configuring Response Headers for Routes in Modern.js\nDESCRIPTION: This snippet demonstrates how to set custom response headers for specific routes in a Modern.js application. It sets the 'x-modern-test' header for the 'page-a' entry routes.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/server/routes.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  server: {\n    routes: {\n      'page-a': {\n        route: ['/a', '/b'],\n        resHeaders: {\n          'x-modern-test': '1',\n        },\n      },\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Module Federation Remote Address in TypeScript\nDESCRIPTION: Demonstrates how to configure the module federation settings in a consumer application to point to a deployed remote module. Shows setup of remote module URL, shared dependencies, and singleton patterns for React.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/module-federation/deploy.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createModuleFederationConfig } from '@module-federation/modern-js';\n\nexport default createModuleFederationConfig({\n  name: 'host',\n  remotes: {\n    remote: 'remote@http://my-remote-module/mf-manifest.json',\n  },\n  shared: {\n    react: { singleton: true },\n    'react-dom': { singleton: true },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring HTTPS in Modern.js DevServer\nDESCRIPTION: Example showing how to manually configure HTTPS in the development server by providing certificate and private key files. This enables secure connections to the dev server.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/dev-server.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    devServer: {\n      https: {\n        key: fs.readFileSync('certificates/private.pem'),\n        cert: fs.readFileSync('certificates/public.pem'),\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Redirect Implementation Example\nDESCRIPTION: Example showing how to implement page redirection using AfterMatch hook\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/web-server/hook.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { AfterMatch } from '@modern-js/runtime/server';\n\nexport const afterMatch: AfterMatch = async (ctx, next) => {\n  ctx.router.redirect('https://website.com/login', 302);\n};\n```\n\n----------------------------------------\n\nTITLE: Creating Directory Structure for Archives Route\nDESCRIPTION: Commands to create the necessary directory structure and files for the archives route implementation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c04-routes.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nmkdir -p src/routes/archives\ntouch src/routes/archives/page.tsx\n```\n\nLANGUAGE: powershell\nCODE:\n```\nmkdir -p src/routes/archives\nni src/routes/archives/page.tsx\n```\n\n----------------------------------------\n\nTITLE: Configuring Meta Tags with metaByEntries in Modern.js\nDESCRIPTION: Example configuration showing how to set different meta descriptions for different pages using metaByEntries. The configuration overrides default meta tags for specific entry pages.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/html/meta-by-entries.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    meta: {\n      description: 'ByteDance',\n    },\n    metaByEntries: {\n      foo: {\n        description: 'TikTok',\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Multiple Custom Entries in Modern.js\nDESCRIPTION: This code snippet shows how to configure multiple custom entries in the Modern.js configuration file. It's useful when the project structure doesn't follow Modern.js conventions and you need to manually specify entry points.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/source/entries.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  source: {\n    entries: {\n      home: './src/entry/home.tsx',\n      chat: './src/entry/chat.tsx',\n    },\n    // 禁用默认入口扫描\n    disableDefaultEntries: true,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Micro-frontend Navigation with Modern.js and Garfish\nDESCRIPTION: This code implements a main application component that manages micro-frontend sub-applications using Modern.js and Garfish plugin. It demonstrates both manual routing with RouterProvider and automatic routing with MApp, providing navigation links to load different sub-applications.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/components/custom-router-micro-frontend.mdx#2025-04-21_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { useModuleApps } from '@modern-js/plugin-garfish/runtime';\n\nimport { RouterProvider, Route, createBrowserRouter, createRoutesFromElements, BrowserRouter, Link, Outlet } from '@modern-js/runtime/router';\n\nconst AppLayout = () => (\n  <>\n    <div><Link to={'/table'}>加载约定式路由子应用</Link></div>\n    <div><Link to={'/dashboard'}>加载自控式路由子应用</Link></div>\n    <div><Link to={'/'}>卸载子应用</Link></div>\n    <Outlet />\n  </>\n)\n\nexport default () => {\n  const { apps, MApp, Table, Dashboard } = useModuleApps();\n\n  // 使用的不是 MApp 组件，需要使用 createBrowserRouter 来创建路由\n  const router = createBrowserRouter(\n    createRoutesFromElements(\n      <Route path=\"/\" element={<AppLayout />}>\n        <Route key={'table'} path={'table/*'} element={<Table />} />\n        <Route key={'dashboard'} path={'dashboard/*'} element={<Dashboard />} />\n      </Route>\n    )\n  );\n\n  return (\n    // 方法一：使用 MApp 自动根据配置的 activeWhen 参数加载子应用(本项目配置在 modern.config.ts 中)\n    // <BrowserRouter>\n    //   <MApp />\n    // </BrowserRouter>\n\n    // 方法二：手动写 Route 组件方式加载子应用，方便于需要鉴权等需要前置操作的场景\n    <>\n      <RouterProvider router={router} />\n    </>\n  );\n};\n```\n\n----------------------------------------\n\nTITLE: Function Signature of useModel in TypeScript\nDESCRIPTION: The TypeScript function signatures for the useModel hook, showing two different ways to pass models to the hook along with optional selector functions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/model/use-model.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction useModel(\n  models: Models[],\n  stateSelector?: StateSelector,\n  actionSelector?: ActionSelector,\n): [state, actions, subscribe];\nfunction useModel(\n  ...models: Models[],\n  stateSelector?: (...args: State[]) => any,\n  actionSelector?: (...args: Actions[]) => any,\n): [state, actions, subscribe];\n```\n\n----------------------------------------\n\nTITLE: Loading Self-Controlled Route Sub-Application in Master App\nDESCRIPTION: React component that uses the useModuleApps hook to load a Dashboard sub-application in the master application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/micro-frontend/c02-development.mdx#2025-04-21_snippet_2\n\nLANGUAGE: js\nCODE:\n```\nimport { useModuleApps } from '@modern-js/plugin-garfish/runtime';\n\nconst Index = () => {\n  const { Dashboard } = useModuleApps();\n\n  return (\n    <div>\n      <Dashboard />\n    </div>\n  );\n};\n\nexport default Index;\n```\n\n----------------------------------------\n\nTITLE: Configuring HTML Templates per Entry in Modern.js\nDESCRIPTION: This snippet demonstrates how to use the 'html.templateByEntries' configuration in Modern.js to set specific HTML templates for different entry points. It also shows the usage of a global template file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/html/template-by-entries.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    template: './static/index.html',\n    templateByEntries: {\n      foo: './src/pages/foo/index.html',\n      bar: './src/pages/bar/index.html',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling SSR in Modern.js Configuration\nDESCRIPTION: This snippet demonstrates how to enable Server-Side Rendering (SSR) in a Modern.js project using the boolean syntax in the configuration file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/server/ssr.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  server: {\n    ssr: true,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Fetching Asynchronous Data with defer in Modern.js\nDESCRIPTION: This code demonstrates how to use the defer function to handle asynchronous data fetching in a Modern.js data loader. It shows both single and multiple data fetching scenarios.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/render/streaming-ssr.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defer, type LoaderFunctionArgs } from '@modern-js/runtime/router';\n\ninterface User {\n  name: string;\n  age: number;\n}\n\nexport interface Data {\n  data: User;\n}\n\nexport const loader = ({ params }: LoaderFunctionArgs) => {\n  const userId = params.id;\n\n  const user = new Promise<User>(resolve => {\n    setTimeout(() => {\n      resolve({\n        name: `user-${userId}`,\n        age: 18,\n      });\n    }, 200);\n  });\n\n  return defer({ data: user });\n};\n```\n\nLANGUAGE: typescript\nCODE:\n```\nexport const loader = ({ params }: LoaderFunctionArgs) => {\n  const userId = params.id;\n\n  const user = new Promise<User>(resolve => {\n    setTimeout(() => {\n      resolve({\n        name: `user-${userId}`,\n        age: 18,\n      });\n    }, 2000);\n  });\n\n  const otherData = new Promise<string>(resolve => {\n    setTimeout(() => {\n      resolve('some sync data');\n    }, 200);\n  });\n\n  return defer({\n    data: user,\n    other: await otherData,\n  });\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling State Runtime Configuration in Modern.js\nDESCRIPTION: Configuration to enable the state runtime API in Modern.js by adding the runtime.state setting to the modern.config.ts file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/tutorials/first-app/c06-model.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig({\n  runtime: {\n    state: true,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using useStaticModel Hook - Practical Application\nDESCRIPTION: Shows a practical example of using useStaticModel for accessing user state in analytics tracking without causing unnecessary component re-renders.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/model/use-static-model.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nfunction App() {\n  const [state] = useStaticModel(userModel);\n\n  useEffect(() => {\n    // Statistical UV Data\n    send('pageview', { user: state.user });\n  }, [state]);\n\n  return <div>Hello</div>;\n}\n```\n\n----------------------------------------\n\nTITLE: Enabling Build Analysis with Metafile in Modern.js Module\nDESCRIPTION: Generates build metadata in JSON format for analysis. This option is only available in bundle mode and produces metafile-[xxx].json files in the output directory.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_33\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    buildType: 'bundle',\n    metafile: true,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Micro-Frontend Apps in Modern.js Runtime\nDESCRIPTION: Defines a runtime configuration for Modern.js that sets up a micro-frontend architecture. The configuration registers two sub-applications (Table and Dashboard) with their respective entry points, allowing them to be loaded as part of a master application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/components/micro-runtime-config.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineRuntimeConfig } from '@modern-js/runtime';\n\nexport default defineRuntimeConfig({\n  masterApp: {\n    apps: [{\n      name: 'Table',\n      entry: 'http://localhost:8081',\n      // activeWhen: '/table'\n    }, {\n      name: 'Dashboard',\n      entry: 'http://localhost:8082'\n      // activeWhen: '/dashboard'\n    }]\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using Model with Primitive Data Type in Modern.js\nDESCRIPTION: Demonstrating how to use the automatically generated setState action for a count model with a primitive state. The example shows incrementing the count value by 1.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/model/auto-actions.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Counter() {\n  const [state, actions] = useModel(countModel);\n\n  useEffect(() => {\n    // 增加 1\n    actions.setState(state + 1);\n  }, []);\n}\n```\n\n----------------------------------------\n\nTITLE: Optimizing Model Structure by Splitting Models in TypeScript\nDESCRIPTION: Demonstrates how to improve component rendering performance by splitting a single model into multiple focused models. This prevents unnecessary re-renders when unrelated state changes occur.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/performance.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst fooModel = model('foo').define({\n  state: {\n    a: '',\n    b: '',\n  },\n  actions: {\n    setA(state, payload) {\n      state.a = payload;\n    },\n    setB(state, payload) {\n      state.b = payload;\n    },\n  },\n});\n\nfunction ComponentA() {\n  const [state] = useModel(fooModel);\n\n  return <div>{state.a}</div>;\n}\n```\n\nLANGUAGE: typescript\nCODE:\n```\nconst fooModel = model('foo').define({\n  state: {\n    a: '',\n  },\n  actions: {\n    setA(state, payload) {\n      state.a = payload;\n    },\n  },\n});\n\nconst barModel = model('bar').define({\n  state: {\n    b: '',\n  },\n  actions: {\n    setB(state, payload) {\n      state.b = payload;\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Integrating Micro-Frontend with React Router DOM v5\nDESCRIPTION: Example of integrating micro-frontend sub-applications in a project using React Router DOM version 5, passing useLocation and basename for proper routing.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/micro-frontend/c02-development.mdx#2025-04-21_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useLocation, useHistory } from 'react-router-dom';\nconst App = () => {\n  const history = useHistory();\n  const basename = history.createHref({ pathname: '/table' });\n  const { Table } = useModuleApps();\n  return <Table useLocation={useLocation} basename={basename} />;\n};\n```\n\n----------------------------------------\n\nTITLE: Registering Custom Monitor Middleware\nDESCRIPTION: Example of registering a custom monitor in server middleware. Shows how to implement a monitor that handles different event types.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/server-monitor/monitors.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { CoreMonitors } from '@modern-js/types';\nconst injectMonitorMiddleware = (c) => {\n    const monitors = c.get('monitors');\n    const myMonitor = (event: MonitorEvent) => {\n        if (event.type === 'log') {\n          // some code\n        } else {\n          // some other code\n        }\n    }\n    monitors.push(myMonitor);\n    return next();\n}\n\nexport const middlewares = [injectMonitorMiddleware]\n```\n\n----------------------------------------\n\nTITLE: Sample Source Code Using External Dependency\nDESCRIPTION: Example source code that imports and uses React, which will be treated as an external dependency in the UMD build.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/build-umd.mdx#2025-04-21_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport React from 'react';\nconsole.info(React);\n```\n\n----------------------------------------\n\nTITLE: Defining PrefetchOption Type in TypeScript\nDESCRIPTION: This code snippet defines the TypeScript types and interfaces for the prefetch configuration option. It includes IncludeType, Filter, and PrefetchOption interfaces.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/performance/prefetch.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype IncludeType = 'async-chunks' | 'initial' | 'all-assets' | 'all-chunks';\n\ntype Filter = Array<string | RegExp> | ((filename: string) => boolean);\n\ninterface PrefetchOption {\n  type?: IncludeType;\n  include?: Filter;\n  exclude?: Filter;\n}\n```\n\n----------------------------------------\n\nTITLE: Multi-Entry Modern.js Runtime Configuration (TypeScript/React)\nDESCRIPTION: Example of a multi-entry runtime configuration for Modern.js. This setup uses the defineRuntimeConfig function to return specific configurations based on the entry name, allowing different settings for various entry points in the application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/runtime/0-intro.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { defineRuntimeConfig } from '@modern-js/runtime';\n\nexport default defineRuntimeConfig(entryName => {\n  if (entryName === 'main') {\n    return {\n      router: {\n        // \"main\" 入口的路由配置\n      },\n      state: {\n        // \"main\" 入口的状态管理配置\n      },\n    };\n  }\n\n  // 其他入口的配置\n  return {\n    masterApp: {\n      // 微前端配置示例\n    },\n  };\n});\n```\n\n----------------------------------------\n\nTITLE: Initializing Model with Plain Object Type in Modern.js\nDESCRIPTION: Creating a model with a plain object state. Modern.js automatically generates setter actions for each property in the object (setA, setB, setC).\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/model/auto-actions.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst countModel = model('count').define({\n  state: {\n    a: 1,\n    b: [],\n    c: {},\n  },\n});\n\nfunction Counter() {\n  const [state, actions] = useModel(countModel);\n\n  useEffect(() => {\n    actions.setA(2);\n    actions.setB([1]);\n    actions.setC({ a: 1 });\n  }, []);\n}\n```\n\n----------------------------------------\n\nTITLE: Function-based Model Definition with Context and Utils\nDESCRIPTION: Demonstrates how to define a Model using a function approach that provides access to context and utility functions. This pattern enables more complex features and model communication.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/define-model.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport { model, useModel } from '@modern-js/runtime/model';\n\nconst fooModel = model('foo').define((context, utils) => {\n  return {\n    state: {\n      value: 'foo',\n    },\n    actions: {\n      setValue: (state, payload){\n        state.value = payload\n      }\n    }\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Using nvm to Switch Node.js Versions for Modern.js\nDESCRIPTION: Demonstrates how to use nvm (Node Version Manager) to install, switch, and set default Node.js versions for use with Modern.js projects.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/troubleshooting/dependencies.mdx#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n# 安装 Node.js v14\nnvm install 14\n\n# 切换到 Node 14\nnvm use 14\n\n# 将 Node 14 设置为默认版本\nnvm default 14\n```\n\n----------------------------------------\n\nTITLE: Configuring Webpack Resolve Alias in Modern.js (Function Type)\nDESCRIPTION: This snippet shows how to modify the webpack configuration using the function type of tools.webpack. It adds a resolve alias for '@util' by directly modifying the config object.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/webpack.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    webpack: config => {\n      config.resolve.alias['@util'] = 'src/util';\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Basic StartUrl Configuration Examples in Modern.js\nDESCRIPTION: Demonstrates different ways to configure the dev.startUrl option in Modern.js, including boolean, single URL, and multiple URL configurations.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/dev/start-url.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  dev: {\n    // Open the project's default preview page, equivalent to `http://localhost:<port>`\n    startUrl: true,\n    // Open the specified page\n    startUrl: 'http://localhost:8080',\n    // Open multiple pages\n    startUrl: ['http://localhost:8080', 'http://localhost:8080/about'],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Injecting HTML Content in AfterRender Hook\nDESCRIPTION: This example shows how to use the AfterRender hook to inject HTML content into the page. It demonstrates the usage of the template.prependBody method to add a footer to the page.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/web-server/hook.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { AfterRender } from '@modern-js/runtime/server';\n\nexport const afterRender: AfterRenderHook = (context, next) => {\n  ctx.template.prependBody('<div>Footer</div>');\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Sub-Application with Self-Controlled Routing\nDESCRIPTION: Modern.js configuration for a sub-application with self-controlled routing, enabling micro-frontend mode and setting up the Garfish plugin.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/micro-frontend/c02-development.mdx#2025-04-21_snippet_6\n\nLANGUAGE: js\nCODE:\n```\nimport { appTools, defineConfig } from '@modern-js/app-tools';\nimport { garfishPlugin } from '@modern-js/plugin-garfish';\n\nexport default defineConfig({\n  dev: {\n    port: 8082,\n  },\n  runtime: {\n    router: true,\n  },\n  deploy: {\n    microFrontend: true,\n  },\n  plugins: [appTools(), garfishPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Custom Transform Hook for Babel Transformation in Modern.js Module\nDESCRIPTION: Example showing how to implement a transform hook that applies Babel transformations to module code during the build process.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/in-depth-about-build.md#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\ncompiler.hooks.transform.tapPromise('6to5', async args => {\n  const result = babelTransform(args.code, { presets: ['@babel/preset-env'] });\n  return {\n    code: result.code,\n    map: result.map,\n  };\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Modern.js Project Settings in JavaScript\nDESCRIPTION: This code snippet exports a configuration object for a Modern.js project. It sets up development server options, build settings, and other project-specific configurations.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/output-asset-prefix-extend.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig({\n  dev: {\n    port: 8080,\n  },\n  runtime: {\n    router: true,\n  },\n  tools: {\n    sass: {\n      implementation: require('sass'),\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Advanced Selector Usage with useModel Hook\nDESCRIPTION: Shows how to use state and action selectors with useModel to transform state and actions before they are returned to the component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/model/use-model.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nfunction Test(props) {\n  const [state, actions] = useModel(\n    [todoModel, filterModel],\n    (todoState, filterState) => ({\n      items: todoState.items,\n      visibleStatus: `${props.prefix}-${filterState.visibleStatus}`,\n    }),\n    (todoActions, filterActions) => ({\n      ...todoActions,\n      ...filterActions,\n    }),\n  );\n  actions.add(); // call todoModel add action\n  actions.setVisibleStatus(); // call filterModel filterModel action\n\n  state.items; // get todoModel state items\n  state.visibleStatus; // get filterModel state visibleStatus\n}\n```\n\n----------------------------------------\n\nTITLE: Modern.js Micro Frontend Configuration Example\nDESCRIPTION: Example configuration showing how to set up micro frontend features in Modern.js using defineConfig with deploy.microFrontend options.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/deploy/microFrontend.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  deploy: {\n    microFrontend: {\n      enableHtmlEntry: true,\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Custom Loading Animation for Micro-frontend Apps in Modern.js\nDESCRIPTION: Example of implementing custom loading animations for micro-frontend child applications using the loadable property. This code demonstrates error handling and loading states for child applications.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/core/use-module-apps.mdx#2025-04-21_snippet_3\n\nLANGUAGE: js\nCODE:\n```\nimport { useModuleApps } from '@modern-js/plugin-garfish/runtime';\n\nimport { RouterProvider, Route, createBrowserRouter, createRoutesFromElements, BrowserRouter, Link, Outlet } from '@modern-js/runtime/router';\n\nconst AppLayout = () => (\n  <>\n    <div><Link to={'/table'}>加载约定式路由子应用</Link></div>\n    <div><Link to={'/dashboard'}>加载自控式路由子应用</Link></div>\n    <div><Link to={'/'}>卸载子应用</Link></div>\n    <Outlet />\n  </>\n)\n\nexport default () => {\n  const { apps } = useModuleApps();\n\n  // 使用的不是 MApp 组件，需要使用 createBrowserRouter 来创建路由\n  const router = createBrowserRouter(\n    createRoutesFromElements(\n      <Route path=\"/\" element={<AppLayout />}>\n        {apps.map(app => {\n          const { Component } = app;\n          // 模糊匹配，path 需要写成类似 abc/* 的模式\n          return (\n            <Route\n              key={app.name}\n              path={`${app.name.toLowerCase()}/*`}\n              element={\n              <Component\n                loadable={{\n                  loading: ({ pastDelay, error }: any) => {\n                    if (error) {\n                      return <div>error: {error?.message}</div>;\n                    } else if (pastDelay) {\n                      return <div>loading</div>;\n                    } else {\n                      return null;\n                    }\n                  },\n                }}\n              />\n              }\n            />\n          )\n        })}\n      </Route>\n    )\n  );\n\n  return (\n    <>\n      <RouterProvider router={router} />\n    </>\n  );\n};\n```\n\n----------------------------------------\n\nTITLE: Using HtmlWebpackPlugin\nDESCRIPTION: Example demonstrating how to access the HtmlWebpackPlugin instance.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/webpack.mdx#2025-04-21_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    webpack: (chain, { HtmlWebpackPlugin }) => {\n      console.log(HtmlWebpackPlugin);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining Model Structure with Object Parameter in Reduck\nDESCRIPTION: Shows how to define a model's structure using an object that includes state, computed properties, actions, and effects.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/model/model_.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst fooModel = model('foo').define({\n  state: 'foo',\n  computed: {\n    cFoo: state => `c${state}`,\n  },\n  actions: {\n    setState: (state, value) => {\n      return value;\n    },\n  },\n  effects: {\n    loadState: async () => {\n      // 从服务端获取 state\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Generating CSS Modules TypeScript Declaration Files\nDESCRIPTION: Demonstrates how to configure Modern.js Module to generate TypeScript declaration files for CSS Modules using the postcss-modules-dts plugin.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/faq/build.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@modern-js/module-tools';\n\nexport default defineConfig(async () => {\n  const { dts } = await import('@guanghechen/postcss-modules-dts');\n  return {\n    buildConfig: {\n      style: {\n        modules: { ...dts },\n      },\n    },\n    // 你的自定义配置\n  };\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Copyright Banners for Output Files\nDESCRIPTION: Shows how to add copyright or license information to the top of JS and CSS output files using the banner configuration option.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\n\nconst copyRight = `/*\n © Copyright 2020 example.com or one of its affiliates.\n * Some Sample Copyright Text Line\n * Some Sample Copyright Text Line\n*/`;\n\nexport default defineConfig({\n  plugins: [moduleTools()],\n  buildConfig: {\n    banner: {\n      js: copyRight,\n      css: copyRight,\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: localStorage Side Effect Example\nDESCRIPTION: Demonstrates a side effect that reads state and stores it in localStorage without modifying the model state.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/manage-effects.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nconst fooModel = model('foo').define((context, utils) => ({\n  state: {\n    value: 'foo',\n  },\n  effects: {\n    setLocalStorage(key) {\n      const [state] = utils.use(fooModel);\n      localStorage.set(key, state.value);\n      return 'success';\n    },\n  },\n}));\n```\n\n----------------------------------------\n\nTITLE: Configuring BaseUrl in Modern.js Config\nDESCRIPTION: Demonstrates how to set single or multiple base URL prefixes for server-side routes in the Modern.js configuration file. The baseUrl option can accept either a single string or an array of strings to support multiple prefixes.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/server/base-url.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  server: {\n    // All generated routes will automatically have the prefix `/base`\n    // Generated server-side route file path: dist/route.json\n    baseUrl: '/base'\n\n    // Multiple baseUrl\n    baseUrl: ['/base-new', '/base-old']\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Customizing Request SDK with Custom Fetch in Modern.js (TSX)\nDESCRIPTION: This snippet shows how to customize the request SDK in Modern.js using a custom fetch function. It demonstrates environment-specific fetch implementations and data manipulation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/bff/sdk.mdx#2025-04-21_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport nodeFetch from 'node-fetch';\n\nconst customFetch = (input: RequestInfo | URL, init: RequestInit) => {\n  const curFetch = process.env.MODERN_TARGET !== 'node' ? fetch : nodeFetch as unknown as typeof fetch;\n  return curFetch(input, init).then(async res => {\n    const data = await res.json();\n    data.hello = 'hello custom sdk';\n    return data;\n  });\n};\n\nconfigure({\n  request: customFetch,\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring SSR in Modern.js\nDESCRIPTION: Configuration example showing how to enable streaming SSR in both producer and consumer applications using Modern.js config file. Sets up server-side rendering with stream mode enabled.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/module-federation/ssr.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { appTools, defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig({\n  server: {\n    ssr: {\n      mode: 'stream',\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of PreRender Component in React\nDESCRIPTION: Simple example showing how to import and use the PreRender component in a React application with a basic interval configuration of 5 seconds.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/ssr/pre-render.mdx#2025-04-21_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { PreRender } from '@modern-js/runtime/ssr';\n\nexport default () => (\n  <>\n    <PreRender interval={5} />\n  </>\n);\n```\n\n----------------------------------------\n\nTITLE: Configuring Advanced Entry Options in Modern.js\nDESCRIPTION: This snippet demonstrates how to use the object type for entry configuration in Modern.js. It shows how to specify the entry file path, disable automatic entry code generation, and set a custom bootstrap file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/source/entries.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig({\n  source: {\n    entries: {\n      'my-entry': {\n        // 入口文件路径\n        entry: './src/my-page/index.tsx',\n        disableMount: true,\n      },\n    },\n    // 禁用默认入口扫描\n    disableDefaultEntries: true,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Server Middleware in Modern.js\nDESCRIPTION: This code snippet demonstrates how to create a custom server middleware function in a Modern.js project. The middleware logs the request method and URL, then passes control to the next middleware in the chain.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/tests/integration/server-hook/middleware/README.md#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport const middleware = () => {\n  return async (req, res, next) => {\n    console.log('req.method:', req.method);\n    console.log('req.url:', req.url);\n    await next();\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Accessing Other Model's Actions in TypeScript\nDESCRIPTION: Illustrates how to access and use actions from another Model within the define callback function of a Model. This approach simplifies code by avoiding repeated Model retrieval.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/model-communicate.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst barModel = model('bar').define({\n  // ..\n});\n\nconst fooModel = model('foo').define((context, utils) => {\n  // get barModel actions\n  const [, actions] = utils.use(barModel);\n  return {\n    // ...\n    effects: {\n      async loadA() {\n        // ...\n        // invoke barModel action\n        barModel.actionA();\n      },\n      async loadB() {\n        // ...\n        // invoke barModel action\n        barModel.actionB();\n      },\n    },\n  };\n});\n```\n\n----------------------------------------\n\nTITLE: Defining PreloadOption Type in TypeScript\nDESCRIPTION: This code snippet defines the TypeScript types for the preload configuration option. It includes IncludeType, Filter, and PreloadOption interfaces, which specify the structure and allowed values for the preload configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/performance/preload.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype IncludeType = 'async-chunks' | 'initial' | 'all-assets' | 'all-chunks';\n\ntype Filter = Array<string | RegExp> | ((filename: string) => boolean);\n\ninterface PreloadOption {\n  type?: IncludeType;\n  include?: Filter;\n  exclude?: Filter;\n}\n```\n\n----------------------------------------\n\nTITLE: Defining InlineScripts Type in TypeScript\nDESCRIPTION: This code snippet defines the TypeScript types for the 'inlineScripts' configuration option. It includes a test function type and a union type for various configuration possibilities.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/inline-scripts.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype InlineScriptsTest =\n  | RegExp\n  | ((params: { size: number; name: string }) => boolean);\n\ntype InlineScripts =\n  | boolean\n  | InlineScriptsTest\n  | {\n      enable?: boolean | 'auto';\n      test: InlineScriptsTest;\n    };\n```\n\n----------------------------------------\n\nTITLE: Demonstrating Asset Import Results Based on File Size\nDESCRIPTION: Illustrates how Modern.js handles asset imports differently based on file size. Large files (>10KB) are returned as URLs, while smaller files are inlined as Base64 strings.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/static-assets.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nimport largeImage from './static/largeImage.png';\nimport smallImage from './static/smallImage.png';\n\nconsole.log(largeImage); // \"/static/largeImage.6c12aba3.png\"\nconsole.log(smallImage); // \"data:image/png;base64,iVBORw0KGgo...\"\n```\n\n----------------------------------------\n\nTITLE: Using Custom Global Variables\nDESCRIPTION: Shows how to use the defined global variables in application code.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/global-vars.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nif (ENABLE_VCONSOLE) {\n  // do something\n}\n\nconsole.log(APP_CONTEXT);\n```\n\n----------------------------------------\n\nTITLE: Configuring Copy Patterns in Modern.js Module (TypeScript)\nDESCRIPTION: This snippet demonstrates how to use the copy.patterns configuration to specify files to be copied using both specific paths and glob patterns.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/copy.md#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    copy: {\n      patterns: [\n        { from: './index.html', to: '' },\n        { from: './*.html', to: '' },\n      ],\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Defining AssetsRetry Types in TypeScript\nDESCRIPTION: Type definitions for the assets retry configuration options, including hook context and main options interface with properties for customizing retry behavior.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/assets-retry.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport type AssetsRetryHookContext = {\n  times: number;\n  domain: string;\n  url: string;\n  tagName: string;\n};\n\nexport type AssetsRetryOptions = {\n  type?: string[];\n  domain?: string[];\n  max?: number;\n  test?: string | ((url: string) => boolean);\n  crossOrigin?: boolean | 'anonymous' | 'use-credentials';\n  inlineScript?: boolean;\n  onRetry?: (options: AssetsRetryHookContext) => void;\n  onSuccess?: (options: AssetsRetryHookContext) => void;\n  onFail?: (options: AssetsRetryHookContext) => void;\n};\n```\n\n----------------------------------------\n\nTITLE: Modifying Default TransformImport Configuration in JavaScript\nDESCRIPTION: Example of using a function to modify the default transformImport configuration, in this case filtering out the antd library from the imports.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/transform-import.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  source: {\n    transformImport: (imports) => {\n      return imports.filter(data => data.libraryName !== 'antd');\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: HTML Injection Example\nDESCRIPTION: Example showing how to inject HTML content using AfterRender hook\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/web-server/hook.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { AfterRender } from '@modern-js/runtime/server';\n\nexport const afterRender: AfterRenderHook = (context, next) => {\n  ctx.template.prependBody('<div>Footer</div>');\n};\n```\n\n----------------------------------------\n\nTITLE: Defining tools.rspack Configuration in Modern.js\nDESCRIPTION: This code snippet shows the type definition and default value for the tools.rspack configuration option in Modern.js. It can be of type Rspack.Configuration, a Function, or undefined, with a default value of undefined.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/rspack.mdx#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n- **Type:** `Rspack.Configuration | Function | undefined`\n- **Default:** `undefined`\n```\n\n----------------------------------------\n\nTITLE: Using onBeforeExit Hook in Modern.js\nDESCRIPTION: This hook executes before the Modern.js process exits, such as when a user presses Ctrl+C. It's ideal for cleanup operations like closing database connections or removing temporary files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/cli-plugins/api.mdx#2025-04-21_snippet_25\n\nLANGUAGE: typescript\nCODE:\n```\napi.onBeforeExit(async () => {\n  // Perform some cleanup operations, such as closing database connections, deleting temporary files, etc.\n  await cleanupMyResources();\n});\n```\n\n----------------------------------------\n\nTITLE: Consuming Remote Application-Level Modules with Bridge\nDESCRIPTION: Implements a wildcard route in the consumer application to load the remote application module using Bridge. Includes error handling and loading state components.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/module-federation/application.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { createRemoteComponent } from '@module-federation/bridge-react';\nimport { loadRemote } from '@module-federation/modern-js/runtime';\n\nconst ErrorBoundary = (info?: { error: { message: string } }) => {\n  return (\n    <div>\n      <h2>This is ErrorBoundary Component, Something went wrong:</h2>\n      <pre style={{ color: 'red' }}>{info?.error.message}</pre>\n    </div>\n  );\n};\nconst Loading = <div>loading...</div>;\nconst RemoteApp = createRemoteComponent({\n  loader: () => loadRemote('remote/app'),\n  fallback: ErrorBoundary,\n  loading: Loading,\n});\n\nexport default RemoteApp;\n```\n\n----------------------------------------\n\nTITLE: 预先挂载共享 Model 到主应用\nDESCRIPTION: 展示了如何在主应用中预先挂载需要共享的 Model，以避免意外降级挂载。通过在主应用入口组件上设置 models 属性，将需要共享的 Model 列表指定为预加载模型。\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/model/faq.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n// App 是主应用的入口组件，sharedModel1、sharedModel2 是需要共享的 Model。\nApp.models = [sharedModel1, sharedModel2];\n```\n\n----------------------------------------\n\nTITLE: Using createApp to Create Local Stores in React\nDESCRIPTION: This example demonstrates how to use createApp to create local stores and isolate state between different Reduck applications. It shows the creation of two local providers and their usage in React components.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/model/create-app.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst { Provider: LocalFooProvider, useModel: useLocalFooModel } = createApp();\nconst { Provider: LocalBarProvider, useModel: useLocalBarModel } = createApp();\n\nfunction Foo() {\n  const [fooState] = useLocalFooModel(fooModel);\n  const [barState] = useLocalBarModel(fooModel);\n\n  return (\n    <div>\n      <div>Foo: {fooState}</div>\n      <div>Bar: {barState}</div>\n    </div>\n  );\n}\n\nfunction Container() {\n  return (\n    <LocalFooProvider>\n      <LocalBarProvider>\n        <Foo />\n      </LocalBarProvider>\n    </LocalFooProvider>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Correct React Component Declarations for HMR in Modern.js\nDESCRIPTION: Proper way to declare React components to ensure HMR works correctly and maintains component state.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/troubleshooting/hmr.mdx#2025-04-21_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\n// good\nexport default function MyComponent() {\n  return <div>Hello World</div>;\n}\n\n// good\nconst MyComponent = () => <div>Hello World</div>;\n\nexport default MyComponent;\n```\n\n----------------------------------------\n\nTITLE: Using HtmlWebpackPlugin\nDESCRIPTION: Example showing how to access and use the HtmlWebpackPlugin instance in the configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/webpack-chain.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    webpackChain: (chain, { HtmlWebpackPlugin }) => {\n      console.log(HtmlWebpackPlugin);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using Multiple Models with useModel in TypeScript\nDESCRIPTION: Demonstrates how to use multiple models with useModel hook, merging state and actions from different models.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/use-model.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst fooModel = model('foo').define({\n  state: {\n    value: 1,\n  },\n  actions: {\n    add(state) {\n      state += 1;\n    },\n  },\n});\n\nconst barModel = model('bar').define({\n  state: {\n    title: 'bar',\n  },\n  actions: {\n    set(state, payload) {\n      state.title = payload;\n    },\n  },\n});\n\nconst [state, actions] = useModel([fooModel, barModel]);\n// Or\nconst [state, actions] = useModel(fooModel, barModel);\n```\n\n----------------------------------------\n\nTITLE: Handling Optional Dynamic Route Parameters in Modern.js\nDESCRIPTION: Example of a component that handles optional route parameters, typically used for create/edit scenarios where the same component serves both purposes.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/routes.mdx#2025-04-21_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useParams } from '@modern-js/runtime/router';\n\nfunction Blog() {\n  const { id } = useParams();\n  if (id) {\n    return <div>current blog ID is: {id}</div>;\n  }\n\n  return <div>create new blog</div>;\n}\nexport default Blog;\n```\n\n----------------------------------------\n\nTITLE: OmitResultNamespace Example\nDESCRIPTION: Demonstrates how using omitResultNamespace:true flattens object properties directly onto the model state rather than nesting them under a result field.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/model/handle-effect.mdx#2025-04-21_snippet_5\n\nLANGUAGE: ts\nCODE:\n```\n// 一个异步请求得到的数据为一个对象：{user: 'xx', email: 'xx'}，\n// 配置 handleEffect({ omitResultNamespace: true })\n// 则得到的 State 结构如下：\n{\n  user: 'xx',\n  email: 'xx',\n  pending: false,\n  error: null,\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Data Type Actions in Reduck - TSX\nDESCRIPTION: Demonstrates how Reduck automatically generates setState action for basic data types like string, number, boolean, and null. Shows usage in a React component with useModel hook.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/model/auto-actions.mdx#2025-04-21_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nconst fooModel = model('foo').define({\n  state: 1,\n});\n\nfunction App() {\n  const [state, actions] = useModel(fooModel);\n\n  return (\n    <div>\n      <div>State: {state}</div>\n      <button\n        type=\"button\"\n        onClick={() => {\n          // call auto generate setState Action\n          actions.setState(state + 1);\n        }}\n      >\n        add\n      </button>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Universal Routing in Modern.js with React Router\nDESCRIPTION: This code creates a universal router component that uses StaticRouter for server-side rendering and BrowserRouter for client-side rendering. It accesses the runtime context to determine the current pathname and defines basic application routes for index and about pages.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/components/self-route-example.mdx#2025-04-21_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { BrowserRouter, Route, Routes } from '@modern-js/runtime/router';\nimport { StaticRouter } from '@modern-js/runtime/router/server';\nimport React from 'react';\nimport { useRuntimeContext } from '@modern-js/runtime';\n\nconst Router = typeof window === 'undefined' ? StaticRouter : BrowserRouter;\n\nexport default () => {\n  const { context } = useRuntimeContext();\n  const pathname = context?.request?.pathname;\n  return (\n    <Router location={pathname}>\n      <Routes>\n        <Route index element={<div>index</div>} />\n        <Route path=\"about\" element={<div>about</div>} />\n      </Routes>\n    </Router>\n  );\n};\n```\n\n----------------------------------------\n\nTITLE: Defining SourceMap Type Configuration in TypeScript\nDESCRIPTION: Defines the type structure for source map configuration, allowing boolean or object with separate JS and CSS options. JS option accepts Rspack Configuration devtool values while CSS accepts boolean.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/source-map.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype SourceMap =\n  | boolean\n  | {\n      js?: Rspack.Configuration['devtool'];\n      css?: boolean;\n    };\n```\n\n----------------------------------------\n\nTITLE: React Component with Reference Error Example in TSX\nDESCRIPTION: A React component example that demonstrates error logging by intentionally using an undefined variable 'a'. This will trigger the LoggerMonitor to output an error message.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/internal-logger.mdx#2025-04-21_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport './index.css';\n\nconst Index = () => <div className=\"container-box\">{a}</div>;\n\nexport default Index;\n```\n\n----------------------------------------\n\nTITLE: Basic Monorepo Structure Example in TypeScript\nDESCRIPTION: Shows the basic structure of a monorepo containing an app and a lib package, illustrating the relationship between projects that would benefit from source build mode.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/source-build.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nmonorepo\n├── app\n└── lib\n    └── src\n        └── index.ts\n```\n\n----------------------------------------\n\nTITLE: Complete example of using bootstrap in Modern.js\nDESCRIPTION: Provides a full example of using the bootstrap function in a Modern.js application. It includes creating an app with custom plugins, wrapping it with createApp, and then bootstrapping the application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/core/bootstrap.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport ReactDOM from 'react-dom/client';\nimport { createApp, bootstrap } from '@modern-js/runtime';\n\nfunction App() {\n  return <div>Hello Modern.js</div>;\n}\n\nconst WrappedApp = createApp({\n  // 传入自定义插件\n  plugins: [customPlugin()],\n})(App);\n\nbootstrap(WrappedApp, 'root', undefined, ReactDOM);\n```\n\n----------------------------------------\n\nTITLE: Time Component with NoSSR Implementation\nDESCRIPTION: Example showing how to use NoSSR to prevent hydration errors when rendering time-based components. This prevents the mismatch between server and client render times.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/ssr/no-ssr.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { NoSSR } from '@modern-js/runtime/ssr';\n\nfunction Time() {\n  return (\n    <NoSSR>\n      <div>Time: {Date.now()}</div>\n    </NoSSR>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Dynamic UMD Module Name in Modern.js Module (TypeScript)\nDESCRIPTION: Uses a function to dynamically set the UMD module name based on the output path. This allows for different module names for different output files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_46\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  buildConfig: {\n    format: 'umd',\n    umdModuleName: path => {\n      if (path.includes('index')) {\n        return 'myLib';\n      } else {\n        return 'myLib2';\n      }\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Custom Entry Configuration with Multiple Paths\nDESCRIPTION: Example showing how to configure multiple entry points when the directory structure doesn't follow Modern.js conventions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/entries.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  source: {\n    entries: {\n      home: './src/entry/home.tsx',\n      chat: './src/entry/chat.tsx',\n    },\n    disableDefaultEntries: true,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing a Layout Component with Outlet in Modern.js\nDESCRIPTION: This TypeScript React snippet demonstrates how to create a layout component using the Outlet component from React Router 6. It shows the basic structure of a layout file in the routes directory.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/hooks/src/routes.mdx#2025-04-21_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Link, Outlet, useLoaderData } from '@modern-js/runtime/router';\n\nexport default () => {\n  return (\n    <>\n      <Outlet></Outlet>\n    </>\n  );\n};\n```\n\n----------------------------------------\n\nTITLE: Basic Runtime Configuration Setup\nDESCRIPTION: Basic implementation of Modern.js runtime configuration including router and state management setup\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/runtime/0-intro.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { defineRuntimeConfig } from '@modern-js/runtime';\n\nexport default defineRuntimeConfig({\n  router: {\n    // Router configuration\n  },\n  state: {\n    // State management configuration\n  },\n  // Other runtime modules...\n});\n```\n\n----------------------------------------\n\nTITLE: Environment Detection Using useRuntimeContext in Modern.js\nDESCRIPTION: Example demonstrating how to use useRuntimeContext to differentiate between browser and server environments and execute environment-specific code.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/core/use-runtime-context.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nfunction App() {\n  const { context } = useRuntimeContext();\n\n  if (context.isBrowser === true) {\n    // 浏览器端执行逻辑\n    console.log('browser render')\n  } else {\n    // 服务器端执行逻辑 logger 功能需开启\n    context.logger.info('server render')\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Custom Express.js Server Instance for Modern.js BFF\nDESCRIPTION: This code demonstrates how to define a custom Express.js server instance for the BFF in Modern.js. It creates an Express app and adds a simple logging middleware.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/bff/extend-server.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport express from 'express';\n\nconst app = express();\napp.use(async (req, res, next) => {\n  console.info(`access url: ${req.url}`);\n  next();\n});\n\nexport default app;\n```\n\n----------------------------------------\n\nTITLE: Configuring Function Type moduleScopes in Modern.js\nDESCRIPTION: Shows how to use a function to modify the moduleScopes configuration, allowing for more dynamic control over import paths in Modern.js.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/module-scopes.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  source: {\n    moduleScopes: scopes => {\n      scopes.push('./shared');\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Adding Logic After Compiler Creation in Modern.js Plugin\nDESCRIPTION: This snippet demonstrates how to use the onAfterCreateCompiler hook to execute custom logic after the Webpack or Rspack compiler instance is created. This corresponds to the onAfterCreateCompiler hook in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/plugin/cli-plugins/api.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\napi.onAfterCreateCompiler(() => {\n    // 可以获取 compiler 实例\n});\n```\n\n----------------------------------------\n\nTITLE: Defining useRouteError Hook in TypeScript\nDESCRIPTION: Declaration of the useRouteError hook, which returns the error information for the nearest route rendering error.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/router/router.mdx#2025-04-21_snippet_6\n\nLANGUAGE: TypeScript\nCODE:\n```\nexport declare function useRouteError(): unknown;\n```\n\n----------------------------------------\n\nTITLE: Setting HTML Template Parameters by Entry in Modern.js Configuration\nDESCRIPTION: This snippet demonstrates how to use the 'templateParametersByEntries' option in a Modern.js configuration file to set different template parameters for different pages. It shows how to set parameters for 'foo' and 'bar' entries.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/html/template-parameters-by-entries.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    templateParametersByEntries: {\n      foo: {\n        type: 'a',\n      },\n      bar: {\n        type: 'b',\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Terser with Object Type in Modern.js\nDESCRIPTION: An example of configuring Terser using an object type in Modern.js. This configuration excludes files matching the '/excludes/' pattern from minification.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/terser.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    terser: {\n      exclude: /\\/excludes/,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling SVGR Transformation in Modern.js Configuration\nDESCRIPTION: This code snippet demonstrates how to configure Modern.js to disable SVGR transformation for SVG files. By setting 'disableSvgr' to true in the output configuration, all SVG files will be treated as assets rather than being converted to React components.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/disable-svgr.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    disableSvgr: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Main Entry Name in Modern.js\nDESCRIPTION: Example showing how to modify the default main entry name from 'main' to 'index' in a Modern.js configuration file. This change affects the output HTML path structure in the dist directory.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/mainEntryName.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  source: {\n    mainEntryName: 'index',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: TypeScript Function Signature for renderStreaming\nDESCRIPTION: Defines the TypeScript type signature for the renderStreaming function. It accepts a Request object, a React element, and rendering options, and returns a Promise that resolves to a ReadableStream.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/ssr/renderStreaming.mdx#2025-04-21_snippet_1\n\nLANGUAGE: ts\nCODE:\n```\nexport type RenderStreaming = (\n  request: Request,\n  serverRoot: React.ReactElement,\n  optinos: RenderOptions,\n) => Promise<ReadableStream>;\n```\n\n----------------------------------------\n\nTITLE: Using Models Within Other Models in Reduck\nDESCRIPTION: Demonstrates how to define models that can interact with each other using context and utils parameters in the define function.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/model/model_.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nconst fooModel = model('foo').define(() => {\n  return {\n    state: 'foo',\n    actions: {\n      setState: (state, value) => {\n        return value;\n      },\n    },\n  };\n});\n\nconst barModel = model('bar').define((_, { use }) => {\n  return {\n    state: 'bar',\n    effects: {\n      syncFoo() {\n        const [state, actions] = use(fooModel);\n        actions.setState(state);\n      },\n    },\n  };\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Route Redirection in Data Loader\nDESCRIPTION: Example of redirecting to another route based on data conditions using the redirect API within a Data Loader file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/routes.mdx#2025-04-21_snippet_9\n\nLANGUAGE: ts\nCODE:\n```\nimport { redirect } from '@modern-js/runtime/router';\n\nexport const loader = () => {\n  const user = await getUser();\n  if (!user) {\n    return redirect('/login');\n  }\n  return null;\n};\n```\n\n----------------------------------------\n\nTITLE: CSS Module Class Name Configuration\nDESCRIPTION: Configuration for customizing CSS Module class name generation\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/css/css-modules.mdx#2025-04-21_snippet_4\n\nLANGUAGE: ts\nCODE:\n```\nexport default {\n  output: {\n    cssModuleLocalIdentName: '[hash:base64:4]',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing Provider in React Application\nDESCRIPTION: Example showing how to wrap a React application with the Provider component at the root level to enable Reduck store access throughout the component tree\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/model/Provider.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nReactDOM.render(\n  <Provider>\n    <App />\n  </Provider>,\n  document.getElementById('root'),\n);\n```\n\n----------------------------------------\n\nTITLE: Defining Effects without State Modification in TypeScript\nDESCRIPTION: This snippet demonstrates defining effects that don't modify the state. It includes examples of storing state in localStorage and sending data to a server without updating the model's state.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/model/manage-effects.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nconst fooModel = model('foo').define((context, utils) => ({\n  state: {\n    value: 'foo',\n  },\n  effects: {\n    setLocalStorage(key) {\n      const [state] = utils.use(fooModel);\n      localStorage.set(key, state.value);\n      return 'success';\n    },\n  },\n}));\n\nconst fooModel = model('foo').define({\n  state: {\n    value: 'foo',\n  },\n  effects: {\n    async sendData(data) {\n      const res = await fetch('url', {\n        method: 'POST',\n        body: data,\n      });\n      return res.json();\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Middleware for Request Timing\nDESCRIPTION: Example of implementing an unstable middleware to measure request processing time\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/web-server.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n  UnstableMiddleware,\n  UnstableMiddlewareContext,\n} from '@Modern.js/runtime/server';\n\nconst time: UnstableMiddleware = async (c: UnstableMiddlewareContext, next) => {\n  const start = Date.now();\n\n  await next();\n\n  const end = Date.now();\n\n  console.log(`dur=${end - start}`);\n};\n\nexport const unstableMiddleware: UnstableMiddleware[] = [time];\n```\n\n----------------------------------------\n\nTITLE: Defining InlineStyles Type Configuration in TypeScript\nDESCRIPTION: TypeScript type definition for the inlineStyles configuration option. It can accept a boolean, a test function that receives file size and name parameters, or an object with enable and test properties.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/inline-styles.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype InlineStylesTest =\n  | RegExp\n  | ((params: { size: number; name: string }) => boolean);\n\ntype InlineStyles =\n  | boolean\n  | InlineStylesTest\n  | {\n      enable?: boolean | 'auto';\n      test: InlineStylesTest;\n    };\n```\n\n----------------------------------------\n\nTITLE: Defining disableCssExtract Configuration Option in Modern.js\nDESCRIPTION: Specifies the type and default value of the 'disableCssExtract' option in Modern.js. This boolean option determines whether CSS extraction is disabled, defaulting to false. When set to true, CSS is inlined into JS files instead of being extracted to separate files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/disable-css-extract.mdx#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n- **Type:** `boolean`\n- **Default:** `false`\n```\n\n----------------------------------------\n\nTITLE: Forcing Resource Inlining in CSS\nDESCRIPTION: This snippet demonstrates how to force inlining of an image resource in a CSS file using the 'inline' URL parameter.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/page-performance/inline-assets.mdx#2025-04-21_snippet_2\n\nLANGUAGE: css\nCODE:\n```\n.foo {\n  background-image: url('./icon.png?inline');\n}\n```\n\n----------------------------------------\n\nTITLE: Advanced useModel with Custom Selectors\nDESCRIPTION: Example demonstrating how to use useModel with custom state and action selectors to transform the state and customize which actions are available to the component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/model/use-model.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nfunction Test(props) {\n  const [state, actions] = useModel(\n    [todoModel, filterModel],\n    (todoState, filterState) => ({\n      items: todoState.items,\n      visibleStatus: `${props.prefix}-${filterState.visibleStatus}`,\n    }),\n    (todoActions, filterActions) => ({\n      ...todoActions,\n      ...filterActions,\n    }),\n  );\n  actions.add(); // 调用 todoModel add action\n  actions.setVisibleStatus(); // 调用 filterModel filterModel action\n\n  state.items; // 获取 todoModel state items\n  state.visibleStatus; // 获取 filterModel state visibleStatus\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Sub-Application with Conventional Routing\nDESCRIPTION: Modern.js configuration for a sub-application with conventional routing, enabling micro-frontend mode and setting up the Garfish plugin.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/micro-frontend/c02-development.mdx#2025-04-21_snippet_4\n\nLANGUAGE: js\nCODE:\n```\nimport { appTools, defineConfig } from '@modern-js/app-tools';\nimport { garfishPlugin } from '@modern-js/plugin-garfish';\n\nexport default defineConfig({\n  dev: {\n    port: 8081,\n  },\n  runtime: {\n    router: true,\n  },\n  deploy: {\n    microFrontend: true,\n  },\n  plugins: [appTools(), garfishPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Custom Rem Configuration in Modern.js\nDESCRIPTION: This example demonstrates how to customize the rem conversion settings by providing an object to output.convertToRem. The configuration specifies a custom root font size, excludes certain page entries from conversion, and limits conversion to only font-size properties.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/output/convert-to-rem.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    convertToRem: {\n      rootFontSize: 30,\n      excludeEntries: ['404', 'page2'],\n      pxtorem: {\n        propList: ['font-size'],\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Server Response Time Tracking Middleware Example\nDESCRIPTION: Example middleware that measures and logs server response time. It records the start time when the middleware runs and logs the elapsed time when the response finishes.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/web-server/middleware.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport const Middleware = () => async (ctx, next) => {\n  const start = Date.now();\n  ctx.source.res.once('finish', () => {\n    console.log(Date.now() - start);\n  });\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom Entry in Modern.js\nDESCRIPTION: Configuration setup to enable custom entry points in Modern.js application using the source.enableCustomEntry option.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/enable-custom-entry.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  source: {\n    enableCustomEntry: true,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Centralized Routing Implementation in Main App\nDESCRIPTION: Example of implementing centralized routing in the main application using the MApp component from Modern.js.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/micro-frontend/c03-main-app.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useModuleApp } from '@modern-js/plugin-garfish/runtime';\n\nfunction App() {\n  const { MApp } = useModuleApps();\n\n  return (\n    <div>\n      <MApp />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Controlling Webpack Entry in Modern.js without @modern-js/runtime\nDESCRIPTION: This snippet shows how to take full control of the webpack entry in a Modern.js project when @modern-js/runtime is not installed. It demonstrates using React and ReactDOM directly, similar to create-react-app and other scaffolds.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/hooks/src/entry.mdx#2025-04-21_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\nimport React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\n\nReactDOM.createRoot(document.getElementById('root')!).render(<App />);\n```\n\n----------------------------------------\n\nTITLE: Copying Files to Build Output Directory\nDESCRIPTION: Demonstrates how to copy specified files or directories to the build output directory using the copy configuration option.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_11\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  buildConfig: {\n    copy: [{ from: '. /src/assets', to: '' }],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Build Mode Entry Configuration\nDESCRIPTION: Example of a build mode entry file that directly uses React DOM rendering without Modern.js runtime features.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/concept/entries.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n```\n\n----------------------------------------\n\nTITLE: Custom Rem Conversion Configuration in Modern.js\nDESCRIPTION: This example demonstrates how to customize the rem conversion settings in Modern.js. It sets a custom root font size, excludes specific entries, and limits the pxtorem conversion to only font-size properties.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/convert-to-rem.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    convertToRem: {\n      rootFontSize: 30,\n      excludeEntries: ['404', 'page2'],\n      pxtorem: {\n        propList: ['font-size'],\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using Outlet Component for Nested Routing\nDESCRIPTION: Example of using the Outlet component in a parent route component to render child routes.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/router/router.mdx#2025-04-21_snippet_12\n\nLANGUAGE: TSX\nCODE:\n```\nfunction Dashboard() {\n  return (\n    <div>\n      <h1>Dashboard</h1>\n\n      {/* This element will render either <DashboardMessages> when the URL is\n          \"/messages\", <DashboardTasks> at \"/tasks\", or null if it is \"/\"\n      */}\n      <Outlet />\n    </div>\n  );\n}\n\nfunction App() {\n  return (\n    <Routes>\n      <Route path=\"/\" element={<Dashboard />}>\n        <Route path=\"messages\" element={<DashboardMessages />} />\n        <Route path=\"tasks\" element={<DashboardTasks />} />\n      </Route>\n    </Routes>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing React Higher-Order Component Pattern\nDESCRIPTION: Shows how to create a higher-order component (HOC) that wraps a component with additional functionality, specifically adding a loading state to any component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/convention-routing-motivation.mdx#2025-04-21_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\nfunction withLoading(Component) {\n  return function WithLoadingComponent({ isLoading, ...props }) {\n    if (isLoading) {\n      return <div>Loading...</div>;\n    }\n    return <Component {...props} />;\n  };\n}\n\nconst ListWithLoading = withLoading(List);\n\nfunction App() {\n  return <ListWithLoading isLoading={props.loading} items={props.items} />;\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Navigation in Master App Layout\nDESCRIPTION: React component defining the layout with routing links to navigate between sub-applications in the master application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/micro-frontend/c02-development.mdx#2025-04-21_snippet_3\n\nLANGUAGE: js\nCODE:\n```\nimport { Outlet, Link } from '@modern-js/runtime/router';\n\nconst Layout = () => (\n  <div>\n    <div>\n      <Link to={'/table'}>加载约定式路由子应用</Link>\n    </div>\n    <div>\n      <Link to={'/dashboard'}>加载自控式路由子应用</Link>\n    </div>\n    <div>\n      <Link to={'/'}>卸载子应用</Link>\n    </div>\n    <Outlet />\n  </div>\n);\n\nexport default Layout;\n```\n\n----------------------------------------\n\nTITLE: Configuring Global Variables in Modern.js (TypeScript)\nDESCRIPTION: Shows how to configure global variables in the Modern.js configuration file to use custom environment variables in code.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/env-vars.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  source: {\n    globalVars: {\n      'process.env.VERSION': process.env.VERSION,\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Accessing Request Context with Express.js in Modern.js BFF\nDESCRIPTION: This snippet demonstrates how to access the request context in a BFF function using Express.js. It uses the useContext hook from '@modern-js/runtime/express' to get the request object and log the accessed URL.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/bff/frameworks.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useContext } from '@modern-js/runtime/express'\nexport const get = async () => {\n  const { req } = useContext();\n  console.info(`access url: ${req.url}`);\n  return 'Hello Modern.js'\n};\n```\n\n----------------------------------------\n\nTITLE: Lodash Import Transformation Example\nDESCRIPTION: Example showing how the Lodash import transformation works, converting default imports to specific module imports.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/plugin/official/cli-plugins/plugin-swc.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n// Input\nimport { get, throttle } from 'lodash';\n\n// Output\nimport get from 'lodash/get';\nimport throttle from 'lodash/throttle';\n```\n\n----------------------------------------\n\nTITLE: Enabling HTTPS with Auto Certificate Generation\nDESCRIPTION: Configuration example showing how to enable HTTPS using automatic certificate generation with devcert.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/dev/https.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    https: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling TypeScript Checker in Development Environment\nDESCRIPTION: This example demonstrates how to conditionally disable the TypeScript type checker only in the development environment. It uses the NODE_ENV environment variable to determine the current environment.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/disable-ts-checker.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    disableTsChecker: process.env.NODE_ENV === 'development',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Generating TypeScript Declaration Files for CSS Modules in Modern.js\nDESCRIPTION: Configuration that adds support for generating TypeScript declaration files for CSS Modules using the postcss-modules-dts package. This enables type checking for CSS module imports in TypeScript files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/faq/build.mdx#2025-04-21_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@modern-js/module-tools';\n\nexport default defineConfig(async () => {\n  const { dts } = await import('@guanghechen/postcss-modules-dts');\n  return {\n    buildConfig: {\n      style: {\n        modules: { ...dts },\n      },\n    },\n    // custom config\n  };\n});\n```\n\n----------------------------------------\n\nTITLE: Setting Webpack DevTool Based on Environment in Modern.js\nDESCRIPTION: This example demonstrates how to set the webpack devtool configuration based on the current environment (development or production) using the env utility parameter.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/webpack.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    webpack: (config, { env }) => {\n      if (env === 'development') {\n        config.devtool = 'cheap-module-eval-source-map';\n      }\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring SSR Passthrough Headers in Modern.js (TSX)\nDESCRIPTION: This code snippet shows how to configure additional request headers to be passed through from SSR page requests to BFF services using the 'configure' function in Modern.js.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/bff/sdk.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconfigure({\n  allowedHeaders: ['x-uid']\n})\n```\n\n----------------------------------------\n\nTITLE: Basic Koa Server Implementation\nDESCRIPTION: Initial example of a basic Koa server setup without static file handling.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/deploy.mdx#2025-04-21_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\nimport Koa from 'koa';\n\nconst app = new Koa();\napp.use(async (ctx, next) => {\n  ctx.body = 'Hello Modern.js';\n});\napp.listen(3000);\n```\n\n----------------------------------------\n\nTITLE: Manually Calling Actions in Effects with TypeScript\nDESCRIPTION: This snippet shows how to manually call actions within an effect function. It demonstrates accessing the model's actions using utils.use and calling them directly in the effect.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/model/manage-effects.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst todoModel = model('todo').define((context, utils) => ({\n  state: {\n    items: [],\n    loading: false,\n    error: null,\n  },\n  actions: {\n    pending(state) {\n      state.loading = true;\n    },\n    fulfilled(state, items) {\n      state.items = items;\n      state.loading = false;\n    },\n  },\n  effects: {\n    async load() {\n      // 通过 utils.use 获取当前 Model 对象的 actions\n      const [, actions] = utils.use(todoModel);\n      // 手动调用 action\n      actions.pending();\n\n      return new Promise(resolve => {\n        setTimeout(() => {\n          const items = ['Learn Modern.js'];\n          // 手动调用 action\n          actions.fulfilled(items);\n          resolve(items);\n        }, 2000);\n      });\n    },\n  },\n}));\n```\n\n----------------------------------------\n\nTITLE: Accessing Request Information with useContext in Koa Framework\nDESCRIPTION: Demonstrates how to use the useContext function within a BFF GET function to access request information, specifically retrieving the user-agent header from the request object.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/bff/use-context.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useContext } from '@modern-js/runtime/koa';\n\nexport async function get() {\n  const ctx = useContext();\n  return ctx.req.headers['user-agent'];\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Polyfill Plugin with Build-Specific Hooks\nDESCRIPTION: Advanced configuration showing how to selectively apply the polyfill plugin only for bundle builds using hooks. This allows for different polyfill configurations based on build type.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/official-list/plugin-polyfill.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\nimport { getPolyfillHook } from '@modern-js/plugin-module-polyfill';\n\nconst polyfillHook = getPolyfillHook();\n\nexport default defineConfig({\n  plugins: [moduleTools()],\n  buildConfig: [\n    {\n      buildType: 'bundle',\n      hooks: [polyfillHook],\n    },\n    {\n      buildType: 'bundleless',\n    },\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Defining NavLink Component in TypeScript\nDESCRIPTION: Declaration of the NavLink component, a special version of Link that can be styled when it matches the current URL.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/router/router.mdx#2025-04-21_snippet_10\n\nLANGUAGE: TypeScript\nCODE:\n```\ndeclare function NavLink(props: NavLinkProps): React.ReactElement;\n\ninterface NavLinkProps\n  extends Omit<LinkProps, 'className' | 'style' | 'children'> {\n  caseSensitive?: boolean;\n  children?:\n    | React.ReactNode\n    | ((props: { isActive: boolean }) => React.ReactNode);\n  className?: string | ((props: { isActive: boolean }) => string | undefined);\n  end?: boolean;\n  style?:\n    | React.CSSProperties\n    | ((props: { isActive: boolean }) => React.CSSProperties);\n}\n```\n\n----------------------------------------\n\nTITLE: Defining TagsConfig Type in TypeScript for Modern.js HTML Tag Configuration\nDESCRIPTION: This code snippet defines the TypeScript type for the html.tags configuration option in Modern.js. It allows for a single HtmlTag, an HtmlTagHandler function, or an array of either of these types.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/html/tags.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype TagsConfig = HtmlTag | HtmlTagHandler | Array<HtmlTag | HtmlTagHandler>;\n```\n\n----------------------------------------\n\nTITLE: ServerContext Type Definition in Modern.js\nDESCRIPTION: Definition of ServerContext interface that provides server-side specific properties and methods, including response manipulation, logging, and metrics.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/core/use-runtime-context.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\ninterface ServerContext {\n  isBrowser: false;\n  request: {\n    userAgent: string;\n    cookie: string;\n    cookieMap: Record<string, any>;\n    query: Record<string, any>;\n    url: string;\n    host: string;\n    headers?: IncomingHttpHeaders;\n  };\n  response: {\n    setHeader: (key: string, value: string) => void;\n    status: (code: number) => void;\n  };\n  logger: Logger;\n  metrics: Metrics;\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Multiple Route Paths in Modern.js\nDESCRIPTION: Shows how to set up multiple access routes for a single entry point using an array of paths.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/server/routes.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  server: {\n    routes: {\n      'page-a': [`/a`, '/b'],\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Setting Custom Dev Server Port in Modern.js\nDESCRIPTION: Example configuration to set a custom port (3000) for the Modern.js development server. By default, the server uses port 8080 and will automatically increment if the port is occupied.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/dev/port.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    port: 3000,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Adding Prepare Phase Logic in Modern.js Plugin\nDESCRIPTION: This snippet shows how to use the onPrepare hook to execute custom initialization logic after Modern.js completes configuration validation. The function can be asynchronous for operations like environment checks or dependency downloads.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/plugin/cli-plugins/api.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\napi.onPrepare(async () => {\n  // 执行一些初始化操作，例如检查环境、下载依赖等\n  await prepareMyCustomEnvironment();\n});\n```\n\n----------------------------------------\n\nTITLE: Production-Specific Webpack Configuration\nDESCRIPTION: Demonstrates how to apply production-specific webpack settings using the isProd flag.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/webpack-chain.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    webpackChain: (chain, { isProd }) => {\n      if (isProd) {\n        chain.devtool('source-map');\n      }\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Adding Webpack Plugins in Modern.js\nDESCRIPTION: This snippet shows how to add webpack plugins using the prependPlugins and appendPlugins utility functions. It demonstrates adding both single and multiple plugins.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/webpack.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    webpack: (config, { prependPlugins, appendPlugins, webpack }) => {\n      // add a single plugin\n      prependPlugins(\n        new webpack.BannerPlugin({\n          banner: 'hello world!',\n        }),\n      );\n\n      // Add multiple plugins\n      prependPlugins([new PluginA(), new PluginB()]);\n\n      // add a single plugin\n      appendPlugins([\n        new webpack.BannerPlugin({\n          banner: 'hello world!',\n        }),\n      ]);\n\n      // Add multiple plugins\n      appendPlugins([new PluginA(), new PluginB()]);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Importing useContext from Modern.js Runtime\nDESCRIPTION: Demonstrates how to import the useContext function from the Modern.js runtime with the appropriate namespace based on the framework extension plugin.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/bff/use-context.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useContext } from '@modern-js/runtime/{namespace}';\n```\n\n----------------------------------------\n\nTITLE: Defining Reduck Provider Interface in TypeScript\nDESCRIPTION: This snippet defines the TypeScript interface for the Provider component props. It includes optional properties for the store and configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/model/Provider.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface ProviderProps {\n  store?: ReduckStore;\n  config?: AppConfig;\n}\n```\n\n----------------------------------------\n\nTITLE: Modifying @babel/preset-react Options in Modern.js (JavaScript)\nDESCRIPTION: Demonstrates how to modify @babel/preset-react options using the modifyPresetReactOptions utility function. This example sets the pragma option.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/babel.mdx#2025-04-21_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    babel(config, { modifyPresetReactOptions }) {\n      modifyPresetReactOptions({\n        pragma: 'React.createElement',\n      });\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining output.copy Configuration in TypeScript\nDESCRIPTION: This snippet shows the type definition for the output.copy configuration option in Rsbuild. It can be set to either Rspack.CopyRspackPluginOptions or Rspack.CopyRspackPluginOptions['patterns']. The default value is undefined.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/copy.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n- **Type:**`Rspack.CopyRspackPluginOptions | Rspack.CopyRspackPluginOptions['patterns']`\n- **Default:** `undefined`\n```\n\n----------------------------------------\n\nTITLE: Configuring App Dependencies in package.json\nDESCRIPTION: Shows how to configure dependencies in the app's package.json file, referencing the lib project.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/source-build.mdx#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"name\": \"app\",\n  \"dependencies\": {\n    \"lib\": \"workspace:*\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Function-based Tailwind CSS Configuration\nDESCRIPTION: Demonstrates how to modify Tailwind CSS configuration using a function approach, which allows direct modification of the config object.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/tailwindcss.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    tailwindcss(config) {\n      config.content.push('./some-folder/**/*.{js,ts}');\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Modern.js for Producer Application\nDESCRIPTION: This configuration sets up the development server port and registers the Module Federation plugin for the producer application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/module-federation/usage.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { appTools, defineConfig } from '@modern-js/app-tools';\nimport { moduleFederationPlugin } from '@module-federation/modern-js';\n\nexport default defineConfig({\n  dev: {\n    port: 3051,\n  },\n  runtime: {\n    router: true,\n  },\n  plugins: [\n    appTools({\n      bundler: 'rspack',\n    }),\n    moduleFederationPlugin(),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Complete Koa Server with Static File Handling\nDESCRIPTION: Extended Koa server implementation that handles static files and HTML content from the Modern.js output directory.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/deploy.mdx#2025-04-21_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\nconst Koa = require('koa');\nconst fs = require('fs');\nconst path = require('path');\nconst mime = require('mime-types');\n\nconst app = new Koa();\napp.use(async (ctx, next) => {\n  if (ctx.path.startsWith('/static')) {\n    ctx.type = mime.lookup(ctx.path);\n    ctx.body = fs.createReadStream(path.resolve(__dirname, `.output${ctx.path}`));\n  } else if (ctx.path === '/') {\n    ctx.type = 'html';\n    ctx.body = fs.createReadStream(path.resolve(__dirname, '.output/html/main/index.html'));\n  }\n});\napp.listen(3000);\n```\n\n----------------------------------------\n\nTITLE: Configuring Build Hooks in Modern.js\nDESCRIPTION: Demonstrates how to use hooks to intervene in the build process by modifying the compiler instance and executing custom logic at different stages.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_20\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    buildType: 'bundle',\n    hooks: [\n      {\n        name: 'renderChunk',\n        apply: compiler => {\n          // any logic for compiler\n          compiler.hooks.renderChunk.tapPromise(\n            { name: 'renderChunk' },\n            async chunk => {\n              return chunk;\n            },\n          );\n        },\n      },\n    ],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring disableEntryDirs in Modern.js TypeScript Configuration\nDESCRIPTION: This snippet demonstrates how to use the source.disableEntryDirs option in a Modern.js configuration file to prevent specific directories from being recognized as application entry points. In this example, the './src/one' directory is excluded.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/disable-entry-dirs.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  source: {\n    disableEntryDirs: ['./src/one'],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: AppContext Interface Definition\nDESCRIPTION: Type definition for the application context interface returned by useAppContext.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/plugins/guide/setup-function.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst useAppContext: () => IAppContext;\n\ninterface IAppContext {\n  appDirectory: string;\n  configFile: string | false;\n  packageName: string;\n  nodeModulesDirectory: string;\n  internalDirectory: string;\n  plugins: {\n    cli?: any;\n    server?: any;\n  }[];\n}\n```\n\n----------------------------------------\n\nTITLE: TypeScript Definition for Link Component in Modern.js Router\nDESCRIPTION: Defines the Link component and its props interface. The Link component allows users to navigate to another page by clicking or tapping on it.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/router/router.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare function Link(props: LinkProps): React.ReactElement;\n\ninterface LinkProps\n  extends Omit<React.AnchorHTMLAttributes<HTMLAnchorElement>, 'href'> {\n  replace?: boolean;\n  state?: any;\n  to: To;\n  reloadDocument?: boolean;\n}\n\ntype To = string | Partial<Path>;\n```\n\n----------------------------------------\n\nTITLE: Configuring Basic Server Routes in Modern.js\nDESCRIPTION: Demonstrates how to customize route paths for application entries including support for dynamic routing parameters.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/server/routes.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  server: {\n    routes: {\n      // Default route is /entryName1, customized to /p/test1\n      entryName1: '/p/test1'\n      // Supports dynamic server-side routing configuration\n      entryName2: '/detail/:id'\n    }\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Using bootstrap function in Modern.js\nDESCRIPTION: Demonstrates how to use the bootstrap function to launch and mount a Modern.js application. It imports necessary dependencies and calls the bootstrap function with required parameters.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/core/bootstrap.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport ReactDOM from 'react-dom/client';\nimport { bootstrap } from '@modern-js/runtime';\n\nbootstrap(App, 'root', undefined, ReactDOM);\n```\n\n----------------------------------------\n\nTITLE: Customizing UMD Module Name\nDESCRIPTION: Configuration to specify a custom global variable name for the UMD module when accessed in a browser environment.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/build-umd.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    format: 'umd',\n    umdModuleName: 'myLib',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Server Entry Point\nDESCRIPTION: Server-side entry point implementation with custom request handling, HTML rendering, and response modification capabilities.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/enable-custom-entry.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { renderString, createRequestHandler } from '@modern-js/runtime/ssr/server';\nimport type { HandleRequest } from '@modern-js/runtime/ssr/server';\n\nconst handleRequest: HandleRequest = async (request, ServerRoot, options) => {\n  // do something before rendering\n  const body = await renderString(request, <ServerRoot />, options);\n\n  const newBody = body + '<div>Byte-Dance</div>';\n\n  return new Response(newBody, {\n    headers: {\n      'content-type': 'text/html; charset=UTF-8',\n      'x-custom-header': 'abc',\n    },\n  });\n};\n\nexport default createRequestHandler(handleRequest);\n```\n\n----------------------------------------\n\nTITLE: Random Data Generation with Mock.js\nDESCRIPTION: Shows how to use Mock.js library to generate random mock data for API responses.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/debug/mock.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst Mock = require('mockjs');\n\nmodule.exports = {\n  '/api/getInfo': Mock.mock({\n    'data|1-10': [{ name: '@cname' }],\n  }) /* => {data: [{name: \"Jack\"}, {name: \"Jim\"},  {name: \"Mary\"}} */,\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Browser Targets in @babel/preset-env for Modern.js (JavaScript)\nDESCRIPTION: Shows how to set specific browser targets for @babel/preset-env using the modifyPresetEnvOptions utility function.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/babel.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    babel(config, { modifyPresetEnvOptions }) {\n      modifyPresetEnvOptions({\n        targets: {\n          chrome: \"58\",\n          ie: \"11\"\n        }\n      });\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Creating a Basic Page Component in Modern.js\nDESCRIPTION: Example of a basic page component in Modern.js routing system. This represents the content that will be displayed at the specified route.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/routes.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nexport default () => {\n  return <div>Hello world</div>\n};\n```\n\n----------------------------------------\n\nTITLE: Multi-Entry SSG Configuration - JavaScript\nDESCRIPTION: Configuration example showing how to enable SSG for specific entries with different settings for conventional and manual routing entries.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/ssg.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  output: {\n    ssg: {\n      entryA: true,\n      entryB: false,\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Accessing Props in Sub-Application in Modern.js (TSX)\nDESCRIPTION: This snippet shows how a sub-application can access props passed from the main application. The 'App' function logs the received props, which will include the 'count' value.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/micro-frontend/c04-communicate.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nfunction App(props) {\n  console.log(props);\n  return ...\n}\n```\n\n----------------------------------------\n\nTITLE: Merging Webpack Configs in Modern.js\nDESCRIPTION: This snippet shows how to merge multiple webpack configurations using the mergeConfig utility function, which is similar to webpack-merge.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/webpack.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    webpack: (config, { mergeConfig }) => {\n      return mergeConfig(config, {\n        devtool: 'eval',\n      });\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Modifying HTML Template Partials in Modern.js\nDESCRIPTION: Demonstrates how to modify HTML template partials to add custom meta tags using the modifyHtmlPartials API hook.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/cli-plugins/api.mdx#2025-04-21_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\napi.modifyHtmlPartials(({ entrypoint, partials }) => {\n  // Add a meta tag to the <head> section of all pages\n  if (partials.head && partials.head.append) {\n      partials.head.append(`<meta name=\"my-custom-meta\" content=\"value\">`);\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: RuntimeContext Type Definition\nDESCRIPTION: Type definition for the RuntimeContext object returned by useRuntimeContext, containing the context property that provides access to request context.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/core/use-runtime-context.mdx#2025-04-21_snippet_1\n\nLANGUAGE: ts\nCODE:\n```\ntype RuntimeContext = {\n  context: RequestContext;\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling SSG with Boolean Configuration in Modern.js\nDESCRIPTION: A basic example of enabling SSG for all entry points in a Modern.js application by setting output.ssg to true.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/output/ssg.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  output: {\n    ssg: true,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Dynamic WebAssembly Import in JavaScript\nDESCRIPTION: Demonstrates dynamic importing of a WebAssembly module using async/await pattern.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/static-assets/wasm-assets.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport('./add.wasm').then(({ add }) => {\n  console.log('---- Async Wasm Module');\n  console.log(add); // [native code]\n  console.log(add(1, 2)); // 3\n});\n```\n\n----------------------------------------\n\nTITLE: Using Middleware with Koa.js in Modern.js BFF\nDESCRIPTION: This snippet shows how to use middleware in a BFF function with Koa.js. It uses the hook function from '@modern-js/runtime/koa' to add an async middleware that modifies the request query parameter.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/bff/frameworks.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { hook } from '@modern-js/runtime/koa';\n\nexport default hook(({ addMiddleware }) => {\n  addMiddleware(async (ctx, next) => {\n    ctx.req.query.id = 'koa';\n    await next();\n  });\n});\n```\n\n----------------------------------------\n\nTITLE: Getting Hook Functions in Modern.js Plugin\nDESCRIPTION: Shows how to retrieve and manually trigger registered hook functions using getHooks API.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/cli-plugins/api.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nconst hooks = api.getHooks();\n// Manually trigger the onPrepare hook\nhooks.onPrepare.call();\n```\n\n----------------------------------------\n\nTITLE: Middleware Function Signature in Modern.js\nDESCRIPTION: Defines the TypeScript type definitions for the Middleware function, MiddlewareContext, and associated interfaces. These types show the structure of the context object and the available methods for manipulating requests and responses.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/web-server/middleware.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\ntype Middleware = (\n  context: MiddlewareContext,\n  next: NextFunction,\n) => Promise<void> | void;\n\ntype MiddlewareContext = {\n  response: {\n    set: (key: string, value: string) => void;\n    status: (code: number) => void;\n    getStatus: () => number;\n    cookies: {\n      set: (key: string, value: string, options?: any) => void;\n      clear: () => void;\n    };\n    raw: (\n      body: string,\n      { status, headers }: { status: number; headers: Record<string, any> },\n    ) => void;\n    locals: Record<string, any>;\n  };\n  request: {\n    host: string;\n    pathname: string;\n    query: Record<string, any>;\n    cookie: string;\n    cookies: {\n      get: (key: string) => string;\n    };\n    headers: IncomingHttpHeaders;\n  };\n  source: {\n    req: IncomingMessage;\n    res: ServerResponse;\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Dynamic Routes with Parameters\nDESCRIPTION: Configuration for SSG with dynamic route parameters, allowing generation of static pages with specific parameter values.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/render/ssg.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  output: {\n    ssg: {\n      routes: [\n        {\n          url: '/user/:id',\n          params: [{\n            id: 'modernjs',\n          }],\n        },\n      ],\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Enabling HTTPS with Automatic Certificate Generation\nDESCRIPTION: Configuration example showing how to enable HTTPS in Modern.js using automatic certificate generation via devcert. This requires installing the devcert package separately.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/dev/https.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    https: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Importing and Using PreRender Component in React\nDESCRIPTION: This snippet shows how to import the PreRender component from @modern-js/runtime/ssr and use it in a React component with a basic interval setting.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/ssr/pre-render.mdx#2025-04-21_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { PreRender } from '@modern-js/runtime/ssr';\n\nexport default () => (\n  <>\n    <PreRender interval={5} />\n  </>\n);\n```\n\n----------------------------------------\n\nTITLE: Exporting Lodash Library in TypeScript\nDESCRIPTION: Shows an example of importing and exporting the Lodash library that can cause issues with babel-plugin-lodash, potentially resulting in undefined exports.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/faq/build.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport * as Lodash from 'lodash';\n\nexport const libs = {\n  _: Lodash,\n};\n```\n\n----------------------------------------\n\nTITLE: Defining DisableSourceMap Type in TypeScript\nDESCRIPTION: Defines the type for the 'disableSourceMap' configuration option. It can be a boolean or an object with optional 'js' and 'css' boolean properties.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/disable-source-map.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype DisableSourceMap =\n  | boolean\n  | {\n      js?: boolean;\n      css?: boolean;\n    };\n```\n\n----------------------------------------\n\nTITLE: Basic Hook Implementation in TypeScript\nDESCRIPTION: Demonstrates basic implementation of AfterMatch and AfterRender hooks in Modern.js\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/web-server/hook.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { AfterMatchHook, AfterRenderHook } from '@modern-js/runtime/server';\n\nexport const afterMatch: AfterMatchHook = (context, next) => {};\nexport const afterRender: AfterRenderHook = (context, next) => {};\n```\n\n----------------------------------------\n\nTITLE: Function-based Styled Components Configuration\nDESCRIPTION: Example of using a function to modify the styled-components configuration, which receives the default config as a parameter.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/styled-components.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    styledComponents(config) {\n      config.pure = false;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Less with Object Syntax in Modern.js\nDESCRIPTION: Example of using Object syntax to configure less-loader options in Modern.js. This demonstrates how to override the default javascriptEnabled setting.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/less.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    less: {\n      lessOptions: {\n        javascriptEnabled: false,\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Component File with Named Exports for loadable\nDESCRIPTION: Example component file with named exports that will be used with the resolveComponent option in loadable.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/utility/loadable.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport const Apple = () => 'Apple!';\nexport const Orange = () => 'Orange!';\n```\n\n----------------------------------------\n\nTITLE: Entry Merge Configuration Example\nDESCRIPTION: Example demonstrating how custom entries are merged with default entries when disableDefaultEntries is not set to true.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/entries.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig({\n  source: {\n    entries: {\n      index: './src/home/index.ts',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Caching Derived State with Reselect in Reduck Model\nDESCRIPTION: Demonstrates how to use the reselect library to cache computed properties in a Reduck model, optimizing performance by preventing unnecessary recalculations when irrelevant state changes occur.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/model/performance.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport 'createSelector' from 'reselect';\n\n// 创建缓存函数\nconst selectCombineA = createSelector(\n  (state) => state.bar.value,\n  (state) => state.foo.a,\n  (barState, fooState) => {\n    return barState + fooState;\n  }\n);\n\nconst barModel = model(\"bar\").define({\n  state: {\n    value: \"bar\",\n  },\n  computed: {\n    combineA: [\n      fooModel,\n      (state, fooState) => {\n        return selectCombineA({\n          foo: fooState,\n          bar: state,\n        });\n      },\n    ],\n  },\n  actions: {\n    setValue(state, payload) {\n      state.value = payload;\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Webpack Devtool Based on Environment\nDESCRIPTION: Example showing how to configure webpack devtool settings differently for development environment using the env parameter.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/webpack-chain.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    webpackChain: (chain, { env }) => {\n      if (env === 'development') {\n        chain.devtool('cheap-module-eval-source-map');\n      }\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Running Modern.js Server with Custom Port\nDESCRIPTION: Command to run the Modern.js server with a custom port specified using the PORT environment variable.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/deploy.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nPORT=3000 node .output/index\n```\n\n----------------------------------------\n\nTITLE: Using NODE_ENV in JavaScript Code\nDESCRIPTION: Shows how to use the NODE_ENV environment variable in JavaScript code for conditional execution.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/env-vars.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nif (process.env.NODE_ENV === 'development') {\n  // do something\n}\n```\n\n----------------------------------------\n\nTITLE: Cache Storage Configuration\nDESCRIPTION: Example of configuring cache storage limits using the configureCache function.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/data/data-cache.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { configureCache, CacheSize } from '@modern-js/runtime/cache';\n\nconfigureCache({\n  maxSize: CacheSize.MB * 10, // 10MB\n});\n```\n\n----------------------------------------\n\nTITLE: Defining Default Browser Targets in TypeScript for Modern.js\nDESCRIPTION: This code snippet defines the default browser targets for different build targets in Modern.js. It uses a TypeScript Record to map build targets to arrays of browser support strings.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/override-browserslist.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst defaultBrowserListMap: Record<RsbuildTarget, string[]> = {\n  web: ['> 0.01%', 'not dead', 'not op_mini all'],\n  node: ['node >= 14'],\n  'web-worker': ['> 0.01%', 'not dead', 'not op_mini all'],\n};\n```\n\n----------------------------------------\n\nTITLE: Overrides Type Definition\nDESCRIPTION: Type definition for the overrides option in SWC plugin configuration, which allows specifying custom configurations for specific modules.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/official/cli-plugins/plugin-swc.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\ninterface Overrides extends SwcOptions {\n  test: RegExp;\n  include: RegExp[];\n  exclude: RegExp[];\n}\n```\n\n----------------------------------------\n\nTITLE: Basic PreRender Implementation Example\nDESCRIPTION: Complete example of a React functional component using PreRender with a 10-second interval for caching page content.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/ssr/pre-render.mdx#2025-04-21_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { PreRender } from '@modern-js/runtime/ssr';\n\nexport default function App() {\n  return (\n    <>\n      <PreRender interval={10} />\n      <div>Hello Modern</div>\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Babel Plugin in Modern.js Configuration (JavaScript)\nDESCRIPTION: Demonstrates how to add a Babel plugin using the tools.babel function configuration. This example adds the babel-plugin-import plugin for a specific component library.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/babel.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    babel(config) {\n      // Add a Babel plugin\n      // note: the plugin have been added to the default config to support antd load on demand\n      config.plugins.push([\n        'babel-plugin-import',\n        {\n          libraryName: 'xxx-components',\n          libraryDirectory: 'es',\n          style: true,\n        },\n      ]);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Consumer Remote Component Implementation\nDESCRIPTION: React component implementation in the consumer application that uses the remote Button component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/module-federation/usage.mdx#2025-04-21_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport React, { useState, Suspense } from 'react';\nimport { Button } from 'remote/Button';\n\nconst Index = (): JSX.Element => {\n  return (\n    <div>\n      <Suspense fallback={<div>Loading...</div>}>\n        <Button />\n      </Suspense>\n    </div>\n  );\n};\n\nexport default Index;\n```\n\n----------------------------------------\n\nTITLE: Using addExcludes Utility for Less Configuration\nDESCRIPTION: Example of using the addExcludes utility function to prevent less-loader from processing files in node_modules directory.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/less.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    less(config, { addExcludes }) {\n      addExcludes(/node_modules/);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Basic Module Scopes for src Directory in Modern.js\nDESCRIPTION: Sets up moduleScopes to only allow imports from the './src' directory. This restricts all source files to only reference code from the specified directory, preventing imports from elsewhere.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/source/module-scopes.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  source: {\n    moduleScopes: ['./src'],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Initializing Model with Primitive Data Type in Modern.js\nDESCRIPTION: Creating a simple count model with a primitive number state. Modern.js automatically generates the setState action for primitive types.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/model/auto-actions.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst countModel = model('count').define({ state: 1 });\n```\n\n----------------------------------------\n\nTITLE: Configuring Less Options for Compatibility\nDESCRIPTION: Shows how to configure Less options to resolve compatibility issues between Less v3 and v4, particularly for the 'math' setting.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/faq/build.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nmodule.exports = {\n  buildPreset({ extendPreset }) {\n    return extendPreset('your-build-preset', {\n      style: {\n        less: {\n          lessOptions: {\n            math: 'always',\n          },\n        },\n      },\n    });\n  },\n};\n```\n\nLANGUAGE: javascript\nCODE:\n```\nmodule.exports = {\n  buildConfig: {\n    style: {\n      less: {\n        lessOptions: {\n          math: 'always',\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Modern.js with Module Federation Plugin\nDESCRIPTION: Basic configuration setup for Modern.js application with Module Federation plugin registration and router enabled.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/module-federation/usage.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { appTools, defineConfig } from '@modern-js/app-tools';\nimport { moduleFederationPlugin } from '@module-federation/modern-js';\n\nexport default defineConfig({\n  runtime: {\n    router: true,\n  },\n  plugins: [\n    appTools({\n      bundler: 'rspack',\n    }),\n    moduleFederationPlugin(),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Using Function-Type Derived State in React Component with TypeScript\nDESCRIPTION: This example demonstrates how to use a function-type derived state 'visibleTodos' in a React component. It passes the filter as a prop and calls the derived state function to get filtered todos.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/computed-state.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nfunction Todo(props) {\n  // use props pass filter\n  const { filter } = props;\n  const [state, actions] = useModel(todoModel);\n\n  // get final todos\n  const todos = state.visibleTodos(filter);\n\n  return (\n    <div>\n      <div>\n        {todos.map(item => (\n          <div key={item.id}>{item.text}</div>\n        ))}\n      </div>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Specifying ECMAScript Version with buildPreset\nDESCRIPTION: Example of configuring a specific ECMAScript version (es2017) with the npm-library preset in the Modern.js configuration file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-preset.mdx#2025-04-21_snippet_8\n\nLANGUAGE: js\nCODE:\n```\nimport { defineConfig } from '@modern-js/module-tools';\n\nexport default defineConfig({\n  buildPreset: 'npm-library-es2017',\n});\n```\n\n----------------------------------------\n\nTITLE: Initializing and Using Reduck Model in TypeScript\nDESCRIPTION: Demonstrates the initial setup of a Reduck model with two state properties and corresponding actions. Shows how a component uses the entire model state, which can lead to unnecessary re-renders.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/model/performance.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst fooModel = model('foo').define({\n  state: {\n    a: '',\n    b: '',\n  },\n  actions: {\n    setA(state, payload) {\n      state.a = payload;\n    },\n    setB(state, payload) {\n      state.b = payload;\n    },\n  },\n});\n\nfunction ComponentA() {\n  const [state] = useModel(fooModel);\n\n  return <div>{state.a}</div>;\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing UnstableMiddleware for request timing in Modern.js\nDESCRIPTION: Example of creating a middleware that measures and logs the duration of request processing. This demonstrates how to use the UnstableMiddleware API for custom server logic.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/web-server.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n  UnstableMiddleware,\n  UnstableMiddlewareContext,\n} from '@modern-js/runtime/server';\n\nconst time: UnstableMiddleware = async (c: UnstableMiddlewareContext, next) => {\n  const start = Date.now();\n\n  await next();\n\n  const end = Date.now();\n\n  console.log(`dur=${end - start}`);\n};\n\nexport const unstableMiddleware: UnstableMiddleware[] = [time];\n```\n\n----------------------------------------\n\nTITLE: Implementing Array Auto Actions in Reduck\nDESCRIPTION: Shows how Reduck generates array manipulation actions like push, pop, shift, unshift, filter, concat, and splice for array state types. The example demonstrates usage of these auto-generated array actions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/model/auto-actions.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst fooModel = model('foo').define({\n  state: [1, 2, 3],\n});\n\nfunction App() {\n  const [state, actions] = useModel(fooModel);\n\n  useEffect(() => {\n    actions.push(4);\n    actions.pop();\n    actions.shift(0);\n    actions.unshift();\n    actions.filter(val => val <= 2);\n    actions.splice(0, 1, 1, 2);\n  }, []);\n\n  return (\n    <div>\n      <div>State: {state}</div>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a styled Avatar component\nDESCRIPTION: This snippet demonstrates how to create a styled Avatar component using styled-components. It applies custom CSS styles to an img element.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c03-css.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst Avatar = styled.img`\n  width: 50px;\n  height: 50px;\n  border: 4px solid #0ef;\n  border-radius: 50%;\n`;\n```\n\n----------------------------------------\n\nTITLE: Environment-based Configuration\nDESCRIPTION: Example of conditional configuration based on NODE_ENV environment variable.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/usage.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  server: {\n    ssr: process.env.NODE_ENV === 'development',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring PluginSWC with Kebab Case Transformation in TypeScript\nDESCRIPTION: Demonstrates how to use a built-in kebab case transformation in the custom import path template. This allows for automatic conversion of member names to kebab case in import paths.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/official/cli-plugins/plugin-swc.mdx#2025-04-21_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nPluginSWC({\n  extensions: {\n    pluginImport: [\n      {\n        libraryName: 'foo',\n        customName: 'foo/es/{{ kebabCase member }}',\n      },\n    ],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Enabling Cross-Project Calling in Modern.js BFF Configuration\nDESCRIPTION: Configuration for enabling cross-project API calling in an existing Modern.js BFF project by adding the crossProject flag to the bff settings in modern.config.ts.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/bff/cross-project.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  bff: {\n    crossProject: true,\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Using MODERN_TARGET in React Component (TypeScript)\nDESCRIPTION: Demonstrates how to use the MODERN_TARGET environment variable to conditionally execute code based on the browser environment.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/env-vars.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction App() {\n  if (process.env.MODERN_TARGET === 'browser') {\n    console.log(window.innerHeight);\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring WebSocket Client for HMR in Modern.js\nDESCRIPTION: Example of how to configure the WebSocket client address for HMR in Modern.js using the tools.devServer.client option.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/troubleshooting/hmr.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\ntools.devServer.client\n```\n\n----------------------------------------\n\nTITLE: Registering Rsdoctor Rspack Plugin in Modern.js Configuration\nDESCRIPTION: This snippet demonstrates how to register the Rsdoctor Rspack plugin in the Modern.js configuration file. It conditionally adds the plugin based on an environment variable to avoid increasing build time unnecessarily.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/debug/rsdoctor.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { RsdoctorRspackPlugin } from '@rsdoctor/rspack-plugin';\n\nexport default {\n  // ...\n  tools: {\n    rspack(config, { appendPlugins }) {\n      // Only register the plugin when RSDOCTOR is true, as the plugin will increase build time.\n      if (process.env.RSDOCTOR) {\n        appendPlugins(\n          new RsdoctorRspackPlugin({\n            // Plugin options\n          }),\n        );\n      }\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining Initial State Configuration Type in Markdown\nDESCRIPTION: Specifies the type and default value for the initialState configuration option. It is used to set the initial state of the global store, typically for SSR to initialize data during hydration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/runtime/state.mdx#2025-04-21_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n- **Type:** `Object`\n- **Default:** `{}`\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom Headers for SSG Rendering\nDESCRIPTION: Configuration that adds custom HTTP headers during the SSG rendering process, allowing for global headers and route-specific headers.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/render/ssg.mdx#2025-04-21_snippet_8\n\nLANGUAGE: js\nCODE:\n```\nexport default defineConfig({\n  output: {\n    ssg: {\n      headers: {\n        \"x-tt-env\": \"ppe_modernjs\"\n      },\n      routes: [\n        '/',\n        {\n          url: '/about',\n          headers: {\n            \"from\": \"modern-website\"\n          },\n        },\n      ],\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring beforeStartUrl Callback in Modern.js\nDESCRIPTION: Demonstrates how to configure a callback function that executes before the startUrl is opened in Modern.js development environment. The callback can be asynchronous and must be used in conjunction with dev.startUrl configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/dev/before-start-url.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  dev: {\n    startUrl: true,\n    beforeStartUrl: async () => {\n      await doSomeThing();\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Default CSS Module Class Name Format in TypeScript\nDESCRIPTION: This snippet demonstrates the default configuration for CSS Module class name formatting in Modern.js. It uses different formats for production and development builds, incorporating local names, file paths, and hashed values.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/css-module-local-ident-name.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// isProd indicates that the production build\nconst localIdentName = isProd\n  ? '[local]-[hash:base64:6]'\n  : '[path][name]__[local]-[hash:base64:6]';\n```\n\n----------------------------------------\n\nTITLE: Using getNormalizedConfig in Modern.js Plugin\nDESCRIPTION: Shows how to access the final normalized configuration after processing by Modern.js and plugins.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/cli-plugins/api.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\napi.modifyResolvedConfig(resolvedConfig => {\n  // ... Modify the configuration ...\n  return resolvedConfig;\n});\n\napi.onBeforeBuild(() => {\n  const finalConfig = api.getNormalizedConfig();\n  console.log('Final build configuration:', finalConfig);\n});\n```\n\n----------------------------------------\n\nTITLE: Defining createApp Function Signature in TypeScript\nDESCRIPTION: This snippet shows the TypeScript interface and function signature for the createApp function. It defines the AppConfig interface extending StoreConfig and the createApp function that takes AppConfig as a parameter.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/model/create-app.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface AppConfig extends StoreConfig {\n  devTools?: boolean | DevToolsOptions;\n  autoActions?: boolean;\n}\n\nfunction createApp(config: AppConfig): object;\n```\n\n----------------------------------------\n\nTITLE: Visualizing Modern.js Runtime Lifecycle Flow with Mermaid\nDESCRIPTION: A flowchart diagram showing the complete lifecycle of Modern.js runtime, including configuration loading, plugin initialization, hook registration, and render preparation stages. The flow progresses from runtime initialization through various stages including configuration loading, plugin setup, hook registration, and render preparation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/runtime-plugins/life-cycle.mdx#2025-04-21_snippet_0\n\nLANGUAGE: mermaid\nCODE:\n```\nflowchart TD\n    init{{\"Runtime Initialization\"}}\n    load_config(Load User Configuration File)\n    runtime_plugin(Load Runtime Plugins<br><sub>Plugins registered in the configuration file<br>Runtime plugins registered by CLI<br>Plugins used within plugins</sub>)\n    registry_hooks(Register Hooks Functions<br><sub>Execute the plugin setup function, register hooks defined in the plugin, and the logic in the plugin setup will also be executed here</sub>)\n\n    wrapRoot(wrapRoot<br><sub>The logic returned in wrapRoot will be executed when the component is rendered</sub>)\n    onBeforeRender(onBeforeRender)\n\n    init --> load_config\n    load_config --> runtime_plugin\n    runtime_plugin --> registry_hooks\n    registry_hooks --> wrapRoot\n    wrapRoot --> onBeforeRender\n\n    style init fill:#FDE68A,font-size:10px;\n    style load_config stroke-dasharray:5 5,fill:#86EFAC,font-size:10px;\n    style runtime_plugin stroke-dasharray:5 5,fill:#86EFAC,font-size:10px;\n    style registry_hooks stroke-dasharray:5 5,fill:#9CA3AF,font-size:10px;\n    style wrapRoot font-size:10px;\n    style onBeforeRender font-size:10px;\n```\n\n----------------------------------------\n\nTITLE: Configuring Module Banner Plugin in Modern.js\nDESCRIPTION: This code snippet demonstrates how to configure the banner plugin in a Modern.js module project. It adds comment banners to JavaScript and CSS files using the modulePluginBanner plugin with custom banner text.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/module/plugin-module-banner/README.md#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\nimport { modulePluginBanner } from '@modern-js/plugin-module-banner';\n\nexport default defineConfig({\n  plugins: [\n    moduleTools(),\n    modulePluginBanner({\n      banner: {\n        js: '//comment',\n        css: '/*comment*/',\n      },\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Custom Styled Components Configuration Object\nDESCRIPTION: Example of customizing styled-components configuration by overriding specific properties using an object.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/styled-components.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    styledComponents: {\n      pure: false,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Creating a Login Page with Redirection\nDESCRIPTION: A login page component that authenticates users and redirects them to their originally requested page. It uses form submission for username input and the authentication context for signin functionality.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/examples/csr-auth.mdx#2025-04-21_snippet_5\n\nLANGUAGE: ts\nCODE:\n```\nimport { useLocation, useNavigate } from '@modern-js/runtime/router';\nimport { useAuth } from '../Auth';\n\nexport default function Login() {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const auth = useAuth();\n\n  const from = location.state?.from?.pathname || '/';\n\n  function handleSubmit(event: React.FormEvent<HTMLFormElement>) {\n    event.preventDefault();\n\n    const formData = new FormData(event.currentTarget);\n    const username = formData.get('username') as string;\n\n    auth.signin(username, () => {\n      // Send them back to the page they tried to visit when they were\n      // redirected to the login page. Use { replace: true } so we don't create\n      // another entry in the history stack for the login page.  This means that\n      // when they get to the protected page and click the back button, they\n      // won't end up back on the login page, which is also really nice for the\n      // user experience.\n      navigate(from, { replace: true });\n    });\n  }\n\n  return (\n    <div>\n      <p>You must log in to view the page at {from}</p>\n\n      <form onSubmit={handleSubmit}>\n        <label>\n          Username: <input name=\"username\" type=\"text\" />\n        </label>{' '}\n        <button type=\"submit\">Login</button>\n      </form>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Removing Babel Plugins in Modern.js Configuration (JavaScript)\nDESCRIPTION: Demonstrates how to remove Babel plugins using the removePlugins utility function. This example removes the babel-plugin-import plugin.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/babel.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    babel(config, { removePlugins }) {\n      removePlugins('babel-plugin-import');\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Adding Babel Presets in Modern.js Configuration (JavaScript)\nDESCRIPTION: Shows how to add Babel presets using the addPresets utility function. This example adds the @babel/preset-env preset.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/babel.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    babel(config, { addPresets }) {\n      addPresets(['@babel/preset-env']);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Function-based ts-loader Configuration in Modern.js\nDESCRIPTION: An example of using a function to modify the ts-loader configuration. This approach allows for more dynamic configuration changes based on the default options.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/ts-loader.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    tsLoader: opts => {\n      opts.allowTsInNodeModules = false;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Path Aliases with source.alias Function in Modern.js\nDESCRIPTION: This snippet shows the function-based approach to configure path aliases in Modern.js, allowing for more dynamic configuration. It modifies the internal alias object to add a mapping for `@common`.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/alias.mdx#2025-04-21_snippet_2\n\nLANGUAGE: js\nCODE:\n```\nexport default {\n  source: {\n    alias: alias => {\n      alias['@common'] = './src/common';\n      return alias;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Production Environment Configuration\nDESCRIPTION: Configuration for production environment with asset prefix settings for remote module access.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/module-federation/usage.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport { appTools, defineConfig } from '@modern-js/app-tools';\nimport { moduleFederationPlugin } from '@module-federation/modern-js';\n\nconst isLocal = process.env.IS_LOCAL === 'true';\n\nexport default defineConfig({\n  server: {\n    port: 3051,\n  },\n  runtime: {\n    router: true,\n  },\n  output: {\n    assetPrefix: isLocal ? 'http://127.0.0.1:3051' : '/',\n  },\n  plugins: [\n    appTools({\n      bundler: 'rspack',\n    }),\n    moduleFederationPlugin(),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring resolveExtensionPrefix for Multiple Targets in Modern.js\nDESCRIPTION: Sets different extension prefixes for multiple build targets (web and node) simultaneously. This allows for target-specific file resolution.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/resolve-extension-prefix.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    source: {\n      resolveExtensionPrefix: {\n        web: '.web',\n        node: '.node',\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: UnstableMiddleware Type Definition\nDESCRIPTION: Defines the type structure for UnstableMiddleware, including generic type support for variable records.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/web-server/unstable_middleware.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ntype UnstableMiddleware<\n  V extends Record<string, unknown> = Record<string, unknown>,\n> = (\n  c: UnstableMiddlewareContext<V>,\n  next: UnstableNext,\n) => Promise<void | Response>;\n```\n\n----------------------------------------\n\nTITLE: Implementing Data Action Function in Modern.js\nDESCRIPTION: This code demonstrates how to export a Data Action function in a .data.ts file. The function receives a request object and processes new user data.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/data/data-write.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { ActionFunction } from '@modern-js/runtime/router;\n\nexport const action: ActionFunction = ({ request }) => {\n  const newUser = await request.json();\n  const name = newUser.name;\n  return updateUserProfile(name);\n}\n```\n\n----------------------------------------\n\nTITLE: Incorrect Import Usage in Route and Loader Files\nDESCRIPTION: This snippet illustrates incorrect import practices between route components and loader files in Modern.js. It demonstrates how to avoid circular dependencies and maintain proper separation of concerns.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/data/data-fetch.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n// Not allowed\n// routes/layout.tsx\nimport { useLoaderData } from '@modern-js/runtime/router';\nimport { ProfileData } from './page.data.ts'; // should use \"import type\" instead\n\nexport const fetch = wrapFetch(fetch);\n\nexport default function UserPage() {\n  const profileData = useLoaderData() as ProfileData;\n  return <div>{profileData}</div>;\n}\n\n// routes/layout.data.ts\nimport { fetch } from './layout.tsx'; // should not be imported from the routing component\nexport type ProfileData = {\n  /*  some types */\n};\n\nexport const loader = async (): Promise<ProfileData> => {\n  const res = await fetch('https://api/user/profile');\n  return await res.json();\n};\n```\n\n----------------------------------------\n\nTITLE: Using addPlugins Utility in Modern.js Babel Configuration (JavaScript)\nDESCRIPTION: Demonstrates the use of the addPlugins utility function to add Babel plugins. This example adds the babel-plugin-import plugin for a specific component library.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/babel.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    babel(config, { addPlugins }) {\n      addPlugins([\n        [\n          'babel-plugin-import',\n          {\n            libraryName: 'xxx-components',\n            libraryDirectory: 'es',\n            style: true,\n          },\n        ],\n      ]);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining Type for source.alias in TypeScript\nDESCRIPTION: This snippet defines the type for the source.alias configuration option. It can be a record of string keys with string, false, or array values, or a function.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/alias.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype Alias = Record<string, string | false | (string | false)[]> | Function;\n```\n\n----------------------------------------\n\nTITLE: Enabling BFF Framework Mode in Modern.js\nDESCRIPTION: CLI commands to enable the BFF (Backend For Frontend) feature in framework mode, allowing the project to serve as a backend API layer.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/create-bff-api-app.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n? Please select the operation you want to perform Enable optional features\n? Please select the feature to enable Enable \"BFF\"\n? Please select BFF type Framework mode\n```\n\n----------------------------------------\n\nTITLE: CSS Modules TypeScript Declarations\nDESCRIPTION: Type declarations for CSS Modules in TypeScript\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/css/css-modules.mdx#2025-04-21_snippet_5\n\nLANGUAGE: ts\nCODE:\n```\ndeclare module '*.module.css' {\n  const classes: { readonly [key: string]: string };\n  export default classes;\n}\n\ndeclare module '*.module.scss' {\n  const classes: { readonly [key: string]: string };\n  export default classes;\n}\n\ndeclare module '*.module.sass' {\n  const classes: { readonly [key: string]: string };\n  export default classes;\n}\n\ndeclare module '*.module.less' {\n  const classes: { readonly [key: string]: string };\n  export default classes;\n}\n\ndeclare module '*.module.styl' {\n  const classes: { readonly [key: string]: string };\n  export default classes;\n}\n```\n\n----------------------------------------\n\nTITLE: Function Signature of createRoot in Modern.js\nDESCRIPTION: Defines the TypeScript function signature for createRoot, which takes an optional React component and returns a React component type. The UserApp parameter defaults to the component exported from App.tsx.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/core/create-root.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport function createRoot(UserApp?: React.ComponentType | null): React.ComponentType<any>;\n```\n\n----------------------------------------\n\nTITLE: Configuring Plugins with Custom Options in Modern.js\nDESCRIPTION: This example shows how to pass custom configuration options to a plugin when using it in the Modern.js framework. The plugin function accepts an object with configuration parameters.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/plugins.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { myPlugin } from 'my-plugin';\n\nexport default defineConfig({\n  plugins: [\n    myPlugin({\n      foo: 1,\n      bar: 2,\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Importing and Using render Function in TypeScript\nDESCRIPTION: This snippet demonstrates how to import and use the render function from Modern.js runtime to render a ModernRoot component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/core/render.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { render } from '@modern-js/runtime/browser';\n\nrender(<ModernRoot />);\n```\n\n----------------------------------------\n\nTITLE: Configuring Target Environment in Modern.js Module (TypeScript)\nDESCRIPTION: Sets the target environment for generated JavaScript code to 'es5' syntax. This enables Modern.js Module to transform newer JavaScript syntax into older versions compatible with specified environments.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_41\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    target: 'es5',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Babel with Object Type in Modern.js (JavaScript)\nDESCRIPTION: Shows how to configure Babel using the object type for tools.babel. This example adds the babel-plugin-import plugin directly in the configuration object.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/babel.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    babel: {\n      plugins: [\n        [\n          'babel-plugin-import',\n          {\n            libraryName: 'xxx-components',\n            libraryDirectory: 'es',\n            style: true,\n          },\n        ],\n      ],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining CheckSyntax Type in TypeScript\nDESCRIPTION: Defines the type for the checkSyntax option, which can be a boolean or an object with specific properties for targeting and excluding files, and setting ECMAScript version.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/security/check-syntax.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype CheckSyntax =\n  | boolean\n  | {\n      targets?: string[];\n      exclude?: RegExp | RegExp[];\n      ecmaVersion?: EcmaVersion;\n    };\n```\n\n----------------------------------------\n\nTITLE: Implementing Monitor Middleware\nDESCRIPTION: Example of implementing timing middleware that uses monitors to log request duration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/server-monitor/monitors.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { UnstableMiddleware } from '@modern-js/runtime/server';\n\nconst time: UnstableMiddleware = async (c, next) => {\n  const start = Date.now();\n  await next();\n  const end = Date.now();\n  const monitors = c.get('monitors');\n  monitors.info(`${end - start}`);\n};\n\nexport const unstableMiddleware: UnstableMiddleware[] = [time];\n```\n\n----------------------------------------\n\nTITLE: Configuring Request SDK in Modern.js (TSX)\nDESCRIPTION: This snippet demonstrates how to use the 'configure' function to set up the request SDK in a Modern.js application. It should be called before any BFF requests are made to ensure proper configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/bff/sdk.mdx#2025-04-21_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { configure } from '@modern-js/runtime/bff';\n\nconfigure({\n  // ...\n})\n\nconst Index = () => <div>Hello world</div>\nexport default Index;\n```\n\n----------------------------------------\n\nTITLE: Defining AppInfo Interface for Child Applications in TypeScript\nDESCRIPTION: This TypeScript interface defines the structure for configuring child applications in a micro-frontend setup. It includes properties for the app name, entry point, and activation condition.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/runtime/master-app.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface AppInfo {\n  name: string;\n  entry: string;\n  activeWhen?: string | ()=> boolean;\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Server-Timing Metrics with Performance API in TypeScript\nDESCRIPTION: This code snippet demonstrates how to access server-timing metrics injected by Modern.js into HTML responses. It uses the Performance API to retrieve navigation entries and log the server timing information.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/server-monitor/metrics.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst navigation = performance.getEntriesByType('navigation')[0];\nconst serverTiming = navigation.serverTiming;\nconsole.log(serverTiming);\n```\n\n----------------------------------------\n\nTITLE: Configuring TypeScript Compiler Options in Modern.js Module (TypeScript)\nDESCRIPTION: Specifies a custom path for the TypeScript configuration file. This allows for using different TypeScript configurations for building the project.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_43\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    tsconfig: 'tsconfig.build.json',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Less Options as Function in Modern.js\nDESCRIPTION: Example of configuring Less options as a function, allowing direct modification of the default configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/less.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    less(config) {\n      // Modify the config of lessOptions\n      config.lessOptions = {\n        javascriptEnabled: false,\n      };\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Demonstrating Lodash Import Transformation in TypeScript\nDESCRIPTION: Example showing how transformLodash converts standard Lodash imports to modular path-specific imports, reducing bundle size by including only the used modules.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/performance/transform-lodash.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport _ from 'lodash';\nimport { add } from 'lodash/fp';\n\nconst addOne = add(1);\n_.map([1, 2, 3], addOne);\n```\n\n----------------------------------------\n\nTITLE: Global Replacement Example (TypeScript)\nDESCRIPTION: Shows how the global replacement works in practice, converting a defined constant to its value.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/env-vars.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nconst foo = TWO;\n\n// ⬇️ Turn into being...\nconst foo = 1 + 1;\n```\n\n----------------------------------------\n\nTITLE: Passing Props from Main to Sub-Application in Modern.js (TSX)\nDESCRIPTION: This snippet demonstrates how to pass props from the main application to a sub-application in Modern.js. The main application renders a sub-application component 'MApp' with a 'count' prop.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/micro-frontend/c04-communicate.mdx#2025-04-21_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nfunction App() {\n  const { MApp } = useModuleApps();\n\n  return (\n    <div>\n      <MApp count={100} />\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Customizing Config Directory in Modern.js Configuration\nDESCRIPTION: This snippet demonstrates how to use the defineConfig function from @modern-js/app-tools to set a custom configDir in the source options. It changes the default config directory from './config' to './resources'.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/config-dir.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig({\n  source: {\n    configDir: './resources',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Taking Over Webpack Entry in Modern.js\nDESCRIPTION: This code snippet shows how to completely take over the webpack entry point in a Modern.js application. It directly renders the React application without using Modern.js's bootstrap function.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/hooks/src/index_.mdx#2025-04-21_snippet_1\n\nLANGUAGE: JSX\nCODE:\n```\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n```\n\n----------------------------------------\n\nTITLE: Configuring resolveMainFields for Multiple Build Targets\nDESCRIPTION: Advanced configuration example showing how to set different 'resolveMainFields' for web and node build targets in Modern.js. This allows for more precise control over module resolution based on the build output type.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/source/resolve-main-fields.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    source: {\n      resolveMainFields: {\n        web: ['main', 'browser', 'exports'],\n        node: ['main', 'node', 'exports'],\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Netlify Deployment for Full Stack Project\nDESCRIPTION: TOML configuration for netlify.toml to set up deployment settings for a full stack Modern.js project on Netlify, including functions configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/deploy.mdx#2025-04-21_snippet_6\n\nLANGUAGE: toml\nCODE:\n```\n[build]\n  publish = \"dist\"\n  command = \"modern deploy\"\n\n[functions]\n  directory = \".netlify/functions\"\n  node_bundler = \"none\"\n  included_files = [\".netlify/functions/**\"]\n```\n\n----------------------------------------\n\nTITLE: Customizing Entry Routes in Modern.js Config\nDESCRIPTION: This snippet demonstrates how to customize the server-side routes for different entries in a Modern.js application. It shows setting a single custom route and a dynamic route for two different entries.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/server/routes.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  server: {\n    routes: {\n      // 默认路由为 /entryName1，自定义后为 /p/test1\n      entryName1: '/p/test1'\n      // 支持动态服务端路由配置\n      entryName2: '/detail/:id'\n    }\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Lazy Compilation for Dynamic Imports\nDESCRIPTION: Configuration example showing how to enable lazy compilation for dynamic imports while keeping entries eager loaded.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/experiments/lazy-compilation.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  experiments: {\n    lazyCompilation: {\n      imports: true,\n      entries: false,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Debug Tool Plugin in Modern.js\nDESCRIPTION: Shows how to integrate a custom debugging tool plugin into the Modern.js Module configuration file using the defineConfig method.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/in-depth-about-dev-command.md#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport doNothingPlugin from './plugins/do-nothing';\n\nexport default defineConfig({\n  plugins: [\n    //...\n    doNothingPlugin()\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Defining CSSExtractOptions Type in TypeScript\nDESCRIPTION: Defines the type for CSS extraction options, including plugin and loader options for Rspack.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/css-extract.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype CSSExtractOptions = {\n  pluginOptions?: Rspack.CssExtractRspackPluginOptions;\n  loaderOptions?: Rspack.CssExtractRspackLoaderOptions;\n};\n```\n\n----------------------------------------\n\nTITLE: Creating Basic Modern.js CLI Plugin Structure\nDESCRIPTION: Demonstrates the basic structure of a Modern.js CLI plugin, showing how to define the plugin name and setup function with hook registration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/cli-plugins/api.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { CliPluginFuture, AppTools } from '@modern-js/app-tools';\n\nconst myCliPlugin = (): CliPluginFuture<AppTools<'shared'>> => ({\n  name: '@my-org/my-plugin', // Plugin name, ensure uniqueness\n  setup: (api) => {\n    // Use the API here to register hooks, add commands, etc.\n    api.onBeforeBuild(() => {\n      console.log('Build is about to start...');\n    });\n  },\n});\n\nexport default myCliPlugin;\n```\n\n----------------------------------------\n\nTITLE: Defining enableInlineStyles Type in TypeScript\nDESCRIPTION: Defines the type for the enableInlineStyles configuration option. It can be a boolean, RegExp, or a function that takes an object with size and name properties and returns a boolean.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/enable-inline-styles.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype EnableInlineStyles =\n  | boolean\n  | RegExp\n  | ((params: { size: number; name: string }) => boolean);\n```\n\n----------------------------------------\n\nTITLE: TypeScript Include Configuration for tsconfig.json\nDESCRIPTION: JSON configuration to add to tsconfig.json to fix the defineConfig function type error by specifying which files should be included in TypeScript compilation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/faq/build.mdx#2025-04-21_snippet_10\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"include\": [\"src\"]\n}\n```\n\n----------------------------------------\n\nTITLE: Debugging webpack cache issues\nDESCRIPTION: Configuration to enable detailed webpack cache logging for troubleshooting cache invalidation issues.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/troubleshooting/builder.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    webpack(config) {\n      config.infrastructureLogging = {\n        ...config.infrastructureLogging,\n        debug: /webpack\\.cache/,\n      };\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Netlify Deployment for Pure Front-end Project\nDESCRIPTION: TOML configuration for netlify.toml to set up deployment settings for a pure front-end Modern.js project on Netlify.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/deploy.mdx#2025-04-21_snippet_5\n\nLANGUAGE: toml\nCODE:\n```\n[build]\n  publish = \"dist\"\n  command = \"modern deploy\"\n```\n\n----------------------------------------\n\nTITLE: Initializing Model with Array Type in Modern.js\nDESCRIPTION: Creating a model with an array state. Modern.js automatically generates array manipulation actions like push, pop, shift, unshift, etc.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/model/auto-actions.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst countModel = model('count').define({ state: [] });\n\nfunction Counter() {\n  const [state, actions] = useModel(countModel);\n\n  useEffect(() => {\n    actions.push(1);\n    actions.pop();\n    actions.shift();\n    actions.unshift(1);\n    actions.concat([1]);\n    actions.splice(0, 1, 2);\n    actions.filter(value => value > 1);\n  }, []);\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Webpack Plugins to Start\nDESCRIPTION: Example showing how to prepend webpack plugins using the prependPlugins utility function.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/webpack.mdx#2025-04-21_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    webpack: (config, { prependPlugins, webpack }) => {\n      // Adding a single plugin\n      prependPlugins(\n        new webpack.BannerPlugin({\n          banner: 'hello world!',\n        }),\n      );\n\n      // Adding multiple plugins\n      prependPlugins([new PluginA(), new PluginB()]);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Modifying Preset-env Options with String Target\nDESCRIPTION: Example of using the modifyPresetEnvOptions utility function to customize @babel/preset-env configuration with string-based browser targets.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/babel.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    babel(config, { modifyPresetEnvOptions }) {\n      modifyPresetEnvOptions({\n        targets: \"last 2 versions\",\n      });\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Default Sass Configuration Options\nDESCRIPTION: Default configuration object for sass-loader showing source map settings based on development environment.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/sass.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultOptions = {\n  // CSS Source Map enabled by default in development environment\n  sourceMap: isDev,\n};\n```\n\n----------------------------------------\n\nTITLE: Default Rem Conversion Configuration in Modern.js\nDESCRIPTION: This code block illustrates the default configuration for rem conversion when output.convertToRem is set to true. It includes settings for runtime enablement, font sizes, screen width, and pxtorem options.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/convert-to-rem.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n{\n  enableRuntime: true,\n  rootFontSize: 50,\n  screenWidth: 375,\n  rootFontSize: 50,\n  maxRootFontSize: 64,\n  widthQueryKey: '',\n  excludeEntries: [],\n  supportLandscape: false,\n  useRootFontSizeBeyondMax: false,\n  pxtorem: {\n    rootValue: 50,\n    unitPrecision: 5,\n    propList: ['*'],\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Archives Page Component\nDESCRIPTION: React component implementation for the archives page, including user list rendering and avatar generation logic using Ant Design List component and React Helmet for SEO.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c04-routes.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { List } from 'antd';\nimport { Helmet } from '@modern-js/runtime/head';\nimport Item from '../../components/Item';\n\nconst getAvatar = (users: Array<{ name: string; email: string }>) =>\n  users.map(user => ({\n    ...user,\n    avatar: `https://api.dicebear.com/7.x/pixel-art/svg?seed=${user.name}`,\n  }));\n\nconst getMockArchivedData = () =>\n  getAvatar([\n    { name: 'Thomas', email: 'w.kccip@bllmfbgv.dm' },\n    { name: 'Chow', email: 'f.lfqljnlk@ywoefljhc.af' },\n  ]);\nfunction Index() {\n  return (\n    <div className=\"container lg mx-auto\">\n      <Helmet>\n        <title>Archives</title>\n      </Helmet>\n      <List\n        dataSource={getMockArchivedData()}\n        renderItem={info => <Item key={info.name} info={info} />}\n      />\n    </div>\n  );\n}\n\nexport default Index;\n```\n\n----------------------------------------\n\nTITLE: Implementing a TypeScript React Component with Props Interface\nDESCRIPTION: Shows how to create a TypeScript React component with defined prop interfaces for type safety, implementing a user profile card component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/convention-routing-motivation.mdx#2025-04-21_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport React from 'react';\n\ninterface User {\n  id: number;\n  name: string;\n  email: string;\n  avatar?: string;\n}\n\ninterface ProfileCardProps {\n  user: User;\n  isEditable?: boolean;\n  onEdit?: (user: User) => void;\n}\n\nconst ProfileCard: React.FC<ProfileCardProps> = ({ \n  user, \n  isEditable = false,\n  onEdit \n}) => {\n  return (\n    <div className=\"profile-card\">\n      {user.avatar && <img src={user.avatar} alt={user.name} />}\n      <h2>{user.name}</h2>\n      <p>{user.email}</p>\n      {isEditable && (\n        <button onClick={() => onEdit && onEdit(user)}>\n          Edit Profile\n        </button>\n      )}\n    </div>\n  );\n};\n\nexport default ProfileCard;\n```\n\n----------------------------------------\n\nTITLE: Registering State Plugin in Modern.js Config\nDESCRIPTION: TypeScript configuration to register the state plugin in the Modern.js application configuration file\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/reduck-notify.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@modern-js/app-tools';\nimport { statePlugin } from '@modern-js/plugin-state';\n\nexport default defineConfig({\n  ...,\n  plugins: [\n    ...,\n    statePlugin(),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Initializing Modern.js Project with CLI Options\nDESCRIPTION: Command line instruction to create a new Modern.js application using npx. Shows interactive prompts for selecting TypeScript as the programming language and pnpm as the package manager.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/init-rspack-app.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ npx @modern-js/create@latest myapp\n? Please select the programming language: TS\n? Please select the package manager: pnpm\n```\n\n----------------------------------------\n\nTITLE: Basic Mock API Configuration\nDESCRIPTION: Demonstrates how to configure basic mock APIs using different HTTP methods and response types.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/debug/mock.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  /* The attribute is the concrete method and request url, and the value is object or array as the result of the request */\n  'GET /api/getInfo': { data: [1, 2, 3, 4] },\n\n  /* the default method is GET */\n  '/api/getExample': { id: 1 },\n\n  /* You can use custom functions to dynamically return data, req and res are both Node.js HTTP objects. */\n  'POST /api/addInfo': (req, res, next) => {\n    res.setHeader('Access-Control-Allow-Origin', '*');\n    res.end('200');\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Custom Entry Point Implementation\nDESCRIPTION: Example of implementing a custom entry point with render and async initialization logic.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/concept/entries.mdx#2025-04-21_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { createRoot } from '@modern-js/runtime/react';\nimport { render } from '@modern-js/runtime/browser';\n\nconst ModernRoot = createRoot();\n\nrender(<ModernRoot />);\n```\n\nLANGUAGE: tsx\nCODE:\n```\nimport { createRoot } from '@modern-js/runtime/react';\nimport { render } from '@modern-js/runtime/browser';\n\nconst ModernRoot = createRoot();\n\nasync function beforeRender() {\n   // some async request\n}\n\nbeforeRender().then(() => {\n  render(<ModernRoot />);\n});\n```\n\n----------------------------------------\n\nTITLE: Console Output for SSR Error in Modern.js\nDESCRIPTION: The console output produced by Modern.js LoggerMonitor when encountering a reference error during server-side rendering. It shows the error type, message, and stack trace with file location information.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/components/internal-logger.mdx#2025-04-21_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\n> Local:    http://localhost:8080/\n> press h + enter to show shortcuts\n\nerror   SSR Error - App Prerender, error = ReferenceError: a is not defined\n    at Index (/somepath/page.tsx:3:1)\n```\n\n----------------------------------------\n\nTITLE: Potential Memory Leak in SSR with redux-observable\nDESCRIPTION: This code example demonstrates a potential memory leak scenario in SSR when using redux-observable. The epicMiddleware instance is created outside the component and grows with each render, leading to performance issues.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/render/ssr.mdx#2025-04-21_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\n/* Code is just an example and not executable */\nimport { createEpicMiddleware, combineEpics } from 'redux-observable';\n\nconst epicMiddleware = createEpicMiddleware();\nconst rootEpic = combineEpics();\n\nexport default function Test() {\n  epicMiddleware.run(rootEpic);\n  return <div>Hello Modern.js</div>;\n}\n```\n\n----------------------------------------\n\nTITLE: Function-based Sass Configuration\nDESCRIPTION: Example of configuring sass-loader using a function approach, showing how to modify the additionalData property.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/sass.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    sass(config) {\n      // Modify sourceMap config\n      config.additionalData = async (content, loaderContext) => {\n        // ...\n      };\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: 使用 load Hook 从内存文件系统加载内容\nDESCRIPTION: 这个示例展示了如何使用 Modern.js Module 的 load Hook 从内存文件系统中读取文件内容。这个 Hook 在 esbuild 的 onLoad 回调中触发,用于获取模块内容。\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/advance/in-depth-about-build.md#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\ncompiler.hooks.load.tapPromise('load content from memfs', async args => {\n  const contents = memfs.readFileSync(args.path);\n  return {\n    contents: contents,\n    loader: 'js',\n  };\n});\n```\n\n----------------------------------------\n\nTITLE: Basic SSR Configuration in Modern.js\nDESCRIPTION: Simple boolean configuration to enable SSR in Modern.js applications.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/server/ssr.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  server: {\n    ssr: true,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Connect with Ref Forwarding\nDESCRIPTION: Demonstrates how to use Connect with ref forwarding to access the underlying component's DOM node.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/model/connect.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useRef, forwardRef } from 'react';\n\nfunction Test(props, ref) {\n  const { a, b } = props;\n\n  return (\n    <div ref={ref}>\n      <span>{a}</span>\n      <span>{b}</span>\n    </div>\n  );\n}\n\nconst TestWrapper = connect([modelA, modelB], { forwardRef: true })(\n  forwardRef(Test),\n);\n\nfunction App() {\n  const testRef = useRef();\n\n  return <TestWrapper ref={testRef} />;\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Build Configuration with Array\nDESCRIPTION: Example of extending buildPreset with additional IIFE format output configuration using array syntax\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/modify-output-product.md#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\n\nexport default defineConfig({\n  plugins: [moduleTools()],\n  buildPreset: 'npm-library',\n  buildConfig: [\n    {\n      format: 'iife',\n      target: 'es2020',\n      outDir: '. /dist/global'\n    }\n  ]\n});\n```\n\n----------------------------------------\n\nTITLE: Object-based Sass Configuration\nDESCRIPTION: Example of configuring sass-loader using an object that will be shallow-merged with the default configuration. Note that sassOptions will be deep-merged.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/sass.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    sass: {\n      sourceMap: true,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom Public Routes in Modern.js\nDESCRIPTION: This snippet demonstrates how to use the server.publicRoutes option in the Modern.js configuration file to set custom routes for public resources. It shows how to map file paths to custom routes, including setting a long route and a route without a suffix.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/server/public-routes.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  server: {\n    publicRoutes: {\n      // Set a long route\n      'index.json': '/user-config/card-info/extra/help.json',\n\n      // Set a route without a suffix\n      'robot.txt': '/app/authentication',\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Installing Modern.js and Creating Master Application\nDESCRIPTION: Shell commands for creating a new directory for the master application and initializing it with Modern.js.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/micro-frontend/c02-development.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nmkdir masterApp && cd masterApp\nnpx @modern-js/create@latest\n```\n\n----------------------------------------\n\nTITLE: Exporting Application-Level Modules in Modern.js with Bridge\nDESCRIPTION: Creates an export entry point that passes the root component to Bridge API for application-level Module Federation. Uses Modern.js runtime APIs to register micro frontend dependencies and set up rendering.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/module-federation/application.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport '@modern-js/runtime/registry/main'; // This line must be included, it will import micro frontend runtime dependencies by default\nimport { render } from '@modern-js/runtime/browser';\nimport { createRoot } from '@modern-js/runtime/react';\nimport { createBridgeComponent } from '@module-federation/bridge-react';\n\nconst ModernRoot = createRoot();\nexport const provider = createBridgeComponent({\n  rootComponent: ModernRoot,\n  render: (Component, dom) => render(Component, dom),\n});\n\nexport default provider;\n```\n\n----------------------------------------\n\nTITLE: Implementing Redirect in AfterMatch Hook\nDESCRIPTION: This example shows how to use the AfterMatch hook to redirect a page to an external login page. It demonstrates the usage of the router.redirect method.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/web-server/hook.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { AfterMatch } from '@modern-js/runtime/server';\n\nexport const afterMatch: AfterMatch = async (ctx, next) => {\n  ctx.router.redirect('https://website.com/login', 302);\n};\n```\n\n----------------------------------------\n\nTITLE: Function Signature for hook API in Modern.js\nDESCRIPTION: Defines the TypeScript type for HookOptions and the function signature for the hook API. It specifies the addMiddleware option for adding BFF middleware.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/bff/hook.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ntype HookOptions = {\n  addMiddleware: string | function;\n};\n\nfunction hook(options: HookOptions): void;\n```\n\n----------------------------------------\n\nTITLE: Configuring Less Options as Object in Modern.js\nDESCRIPTION: Example of configuring Less options as an object, demonstrating how to disable JavaScript in Less.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/less.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    less: {\n      lessOptions: {\n        javascriptEnabled: false,\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Visualizing Modern.js CLI Life Cycle with Mermaid Flowchart\nDESCRIPTION: This Mermaid flowchart illustrates the complete life cycle of Modern.js CLI, including initialization, plugin loading, hook registration, and various command executions. It shows the flow from CLI initialization to environment setup, configuration loading, plugin registration, and the execution of different commands like dev, build, and custom commands.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/cli-plugins/life-cycle.mdx#2025-04-21_snippet_0\n\nLANGUAGE: mermaid\nCODE:\n```\nflowchart TD\n    init{{\"CLI Init\"}}\n    env(Initialize Environment Variables)\n    load_config(Load User Configuration File)\n    cli_plugin(Load CLI Plugin)\n    registry_hooks(Register Hooks Function<br><sub>Execute plugin setup function, register hooks defined in the plugin, and the logic in the plugin setup will also be executed here</sub>)\n\n    app_tools{{\"app-tools\"}}\n\n    config(config)\n    onPrepare(onPrepare)\n    addCommand(addCommand)\n    addWatchFiles(addWatchFiles)\n    onFileChanged(onFileChanged)\n    onBeforeExit(onBeforeExit<br><sub>Triggered by SIGINT, SIGTERM, unhandledRejection, uncaughtException events</sub>)\n\n    onBeforeDev(onBeforeDev)\n    onBeforeRestart(onBeforeRestart<br><sub>Triggered when modified files require a service restart</sub>)\n    onBeforeBuild(onBeforeBuild<br><sub>Triggered in standalone BFF projects</sub>)\n    onAfterBuild(onAfterBuild<br><sub>Triggered in standalone BFF projects</sub>)\n    modifyServerRoutes(modifyServerRoutes)\n    modifyHtmlPartials(modifyHtmlPartials)\n\n    onPrepare_fork(onPrepare)\n    addCommand_fork(addCommand)\n    onFileChanged_fork(onFileChanged)\n\n    registry_rsbuild_hooks(Register rsbuild Hooks<br><sub>This only registers the rsbuild hooks; the specific execution timing is determined by the rsbuild plugin mechanism</sub>)\n\n    modifyBundlerChain(modifyBundlerChain)\n    modifyRsbuildConfig(modifyRsbuildConfig)\n    modifyRspackConfig(modifyRspackConfig)\n    modifyWebpackChain(modifyWebpackChain)\n    modifyWebpackConfig(modifyWebpackConfig)\n\n    onBeforeBuild_rsbuild(onBeforeBuild)\n    onAfterBuild_rsbuild(onAfterBuild)\n    onDevCompileDone(onDevCompileDone)\n    onBeforeCreateCompiler(onBeforeCreateCompiler)\n    onAfterCreateCompiler(onAfterCreateCompiler)\n    onAfterDev(onAfterDev<br><sub>Corresponds to the onAfterStartDevServer Hook of rsbuild</sub>)\n\n    dev[/dev/]\n    build[/build/]\n    extra_command[/.../]\n\n    dev_fork[/dev/]\n    build_fork[/build/]\n    serve[/serve/]\n    deploy[/deploy/]\n    inspect[/inspect/]\n    upgrade[/upgrade/]\n\n    onPrepare_fork --> modifyServerRoutes\n    modifyServerRoutes --> modifyHtmlPartials\n    modifyHtmlPartials --> registry_rsbuild_hooks\n    registry_rsbuild_hooks --> modifyBundlerChain\n    modifyBundlerChain --> modifyRsbuildConfig\n    modifyRsbuildConfig --> modifyRspackConfig\n    modifyRspackConfig --> modifyWebpackChain\n    modifyWebpackChain --> modifyWebpackConfig\n    registry_rsbuild_hooks --> onBeforeBuild_rsbuild\n    onBeforeBuild_rsbuild --> onAfterBuild_rsbuild\n    onAfterBuild_rsbuild --> onDevCompileDone\n    onDevCompileDone --> onBeforeCreateCompiler\n    onBeforeCreateCompiler --> onAfterCreateCompiler\n    onAfterCreateCompiler --> onAfterDev\n\n    dev_fork --> onBeforeDev\n    onBeforeDev --> onFileChanged_fork\n    onFileChanged_fork --> onBeforeRestart\n\n    build_fork --> onBeforeBuild\n    onBeforeBuild --> onAfterBuild\n\n    app_tools --- spacer5[ ] --- spacer6[ ] --- spacer7[ ] --- spacer8[ ] --- spacer9[ ] --> onPrepare_fork\n    onPrepare_fork --> addCommand_fork\n    addCommand_fork --> dev_fork\n    addCommand_fork --> build_fork\n    addCommand_fork --> serve\n    addCommand_fork --> deploy\n    addCommand_fork --> inspect\n    addCommand_fork --> upgrade\n\n    init --> env\n    env --> load_config\n    load_config --> cli_plugin\n    cli_plugin --> registry_hooks\n\n    registry_hooks --> config\n    config --> onPrepare\n    onPrepare --> addCommand\n\n    addCommand --> dev\n    addCommand --> build\n    addCommand --> extra_command\n\n    dev --> addWatchFiles\n    addWatchFiles --> onFileChanged\n\n    onFileChanged --> onBeforeExit\n    build --- spacer[ ] --- spacer2[ ] --> onBeforeExit\n    extra_command --- spacer3[ ] --- spacer4[ ] --> onBeforeExit\n\n    style init fill:#FDE68A;\n    style app_tools fill:#FDE68A;\n    style env stroke-dasharray:5 5,fill:#86EFAC;\n    style registry_rsbuild_hooks stroke-dasharray:5 5,fill:#9CA3AF;\n    style load_config stroke-dasharray:5 5,fill:#86EFAC;\n    style cli_plugin stroke-dasharray:5 5,fill:#86EFAC;\n    style registry_hooks stroke-dasharray:5 5,fill:#9CA3AF;\n\n    style dev fill:#7DD3FC;\n    style build fill:#7DD3FC;\n    style extra_command fill:#7DD3FC;\n    style dev_fork fill:#7DD3FC;\n    style build_fork fill:#7DD3FC;\n    style serve fill:#7DD3FC;\n    style upgrade fill:#7DD3FC;\n    style deploy fill:#7DD3FC;\n    style inspect fill:#7DD3FC;\n\n    style spacer fill:none,stroke:none,height:0px;\n    style spacer2 fill:none,stroke:none,height:0px;\n    style spacer3 fill:none,stroke:none,height:0px;\n    style spacer4 fill:none,stroke:none,height:0px;\n    style spacer5 fill:none,stroke:none,height:0px;\n    style spacer6 fill:none,stroke:none,height:0px;\n    style spacer7 fill:none,stroke:none,height:0px;\n    style spacer8 fill:none,stroke:none,height:0px;\n    style spacer9 fill:none,stroke:none,height:0px;\n```\n\n----------------------------------------\n\nTITLE: SSR Bundle Output Example (JavaScript)\nDESCRIPTION: Shows how the SSR bundle is optimized by removing code that only runs in the browser environment.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/env-vars.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n// SSR bundles\nfunction App() {\n  if (false) {\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Build Configuration for npm-component-with-umd Preset\nDESCRIPTION: The build configuration array for the npm-component-with-umd preset that combines bundleless outputs with a UMD bundle.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-preset.mdx#2025-04-21_snippet_7\n\nLANGUAGE: js\nCODE:\n```\nexport const buildConfig = [\n  {\n    format: 'cjs',\n    target: 'es6',\n    buildType: 'bundleless',\n    outDir: './dist/lib',\n    dts: false,\n  },\n  {\n    format: 'esm',\n    target: 'es6',\n    buildType: 'bundleless',\n    outDir: './dist/es',\n    dts: false,\n  },\n  {\n    format: 'umd',\n    target: 'es6',\n    platform: 'browser',\n    buildType: 'bundle',\n    outDir: './dist/umd',\n    dts: false,\n  },\n  {\n    buildType: 'bundleless',\n    outDir: './dist/types',\n    dts: {\n      only: true,\n    },\n  },\n];\n```\n\n----------------------------------------\n\nTITLE: Configuring Asset Output Names\nDESCRIPTION: Shows how to configure static resource output filenames by either using a string pattern or a function. This affects how asset files are named in the build output.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    asset: {\n      // no hash\n      name: [name].[ext],\n      // any logic\n      // name: (assetPath) => 'any.png',\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Local Plugins in Modern.js Module (JavaScript)\nDESCRIPTION: This example shows how to import and use a local plugin in a Modern.js Module configuration file. The plugin is imported using a relative path from the local code repository.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/plugins.md#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport { myPlugin } from './plugins/myPlugin';\n\nexport default defineConfig({\n  plugins: [myPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Simple Cache Implementation Without Options\nDESCRIPTION: Example of using cache function without configuration options, useful for SSR projects.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/data/data-cache.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { cache } from '@modern-js/runtime/cache';\nimport { fetchUserData } from './api';\n\nconst getUser = cache(fetchUserData);\n\nconst loader = async () => {\n  const user = await getUser();\n  return {\n    user,\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Pug with Function Type\nDESCRIPTION: Using a function to modify Pug configuration. The function receives the default configuration as a parameter and can modify it directly or return a new configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/pug.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    pug(config) {\n      config.doctype = 'xml';\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring disableCssModuleExtension in Modern.js\nDESCRIPTION: Example of enabling the disableCssModuleExtension option in Modern.js configuration. When enabled, all CSS files in the source directory will be treated as CSS Modules regardless of their file extension.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/output/disable-css-module-extension.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    disableCssModuleExtension: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Bundleless Build to Skip Less/SCSS Processing\nDESCRIPTION: Shows how to configure a bundleless build in Modern.js Module to skip processing of Less/SCSS files and instead copy them to the output directory.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/faq/build.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  buildType: 'bundleless',\n  buildConfig: {\n    input: ['src', '!src/**/*.less'],\n    redirect: {\n      style: false,\n    },\n    copy: {\n      patterns: [\n        {\n          from: './**/*.less',\n          to: './',\n        },\n      ],\n      options: {\n        enableCopySync: true,\n      },\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Default Configuration for Styled Components in Modern.js\nDESCRIPTION: This snippet shows the default configuration object for styled-components in Modern.js. It includes settings for displayName, SSR support, pure mode for production, and template literal transpilation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/styled-components.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n{\n  displayName: true,\n  // 在 SSR 构建中 isSSR 为 true\n  ssr: isSSR,\n  // 在生产环境构建时启用 `pure` 来优化包体积\n  pure: isProd,\n  transpileTemplateLiterals: true,\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing SSR-aware Data Injection in Modern.js\nDESCRIPTION: This runtime plugin demonstrates how to inject data differently for server-side rendering (SSR) and client-side rendering. It uses environment variables to determine the rendering context and sets data accordingly.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/render/before-render.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { RuntimePluginFuture } from '@modern-js/runtime';\n\nconst dataInjectionPlugin = (): RuntimePluginFuture => ({\n  name: 'data-injection-plugin',\n  setup: api => {\n    api.onBeforeRender(context => {\n      if (process.env.MODERN_TARGET === 'node') {\n        // Set data during server-side rendering\n        context.message = 'Hello World By Server';\n      } else {\n        // Check data during client-side rendering\n        if (!context.message) {\n          // If server data is not available, set client data\n          context.message = 'Hello World By Client';\n        }\n      }\n    });\n  },\n});\n\nexport default dataInjectionPlugin;\n```\n\n----------------------------------------\n\nTITLE: Configuring Route Manifest Injection in Modern.js (TypeScript)\nDESCRIPTION: This snippet demonstrates how to configure the disableInlineRouteManifests option in Modern.js. When set to true, it causes routing information to be injected into a separate JS file instead of inline in the HTML. This can be useful for optimizing the initial HTML payload size.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/enable-inline-route-manifests.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    disableInlineRouteManifests: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring enableAsyncEntry in Modern.js\nDESCRIPTION: Example configuration to enable async entry points for Module Federation in Modern.js. This sets the source.enableAsyncEntry option to true in the configuration file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/source/enable-async-entry.mdx#2025-04-21_snippet_0\n\nLANGUAGE: ts\nCODE:\n```\nexport default defineConfig({\n  source: {\n    enableAsyncEntry: true,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Adding Copyright Information to JavaScript Files with Banner Plugin\nDESCRIPTION: This example demonstrates how to add copyright text at the top of JavaScript files using the Banner Plugin. It shows a more practical use case with a multi-line copyright notice formatted as a block comment.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/official-list/plugin-banner.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { modulePluginBanner } from '@modern-js/plugin-module-banner';\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\n\nconst copyRight = `/*\n © Copyright 2020 example.com or one of its affiliates.\n * Some Sample Copyright Text Line\n * Some Sample Copyright Text Line\n * Some Sample Copyright Text Line\n * Some Sample Copyright Text Line\n * Some Sample Copyright Text Line\n * Some Sample Copyright Text Line\n*/`;\n\nexport default defineConfig({\n  plugins: [\n    moduleTools(),\n    modulePluginBanner({\n      banner: {\n        js: copyRight,\n      },\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: PreRender Component Function Signature and Props Interface\nDESCRIPTION: This snippet defines the TypeScript interface for the PreRender component's props and its function signature. It includes all available configuration options such as interval, staleLimit, level, include, and matches.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/ssr/pre-render.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\ntype Props {\n  interval: number;\n  staleLimit: number;\n  level: number;\n  include: { header?: string[], query?: string[] };\n  matches: { header?: Record<string, any>, query?: Record<string, any> }\n}\n\nfunction PreRender(props: Props): React.Component\n```\n\n----------------------------------------\n\nTITLE: Configuring Babel Plugin with Hooks for Selective File Processing\nDESCRIPTION: This code snippet shows how to use hooks to selectively apply the Babel plugin to specific files during the build process. It demonstrates configuring the plugin for file 'a.ts' while excluding it for 'b.ts'.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/plugins/official-list/plugin-babel.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\nimport { getBabelHook } from '@modern-js/plugin-module-babel';\n\nconst babelHook = getBabelHook({\n  // babel options\n});\n\nexport default defineConfig({\n  plugins: [moduleTools()],\n  buildConfig: [\n    {\n      hooks: [babelHook],\n      input: ['src/a.ts'],\n    },\n    {\n      input: ['src/b.ts'],\n    },\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Monorepo Structure Example in TypeScript\nDESCRIPTION: Illustrates a simple monorepo structure with an app and a lib directory.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/source-build.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nmonorepo\n├── app\n└── lib\n    └── src\n        └── index.ts\n```\n\n----------------------------------------\n\nTITLE: Registering Vue Plugin in Modern.js Module Configuration (TypeScript)\nDESCRIPTION: This code snippet demonstrates how to register the Vue plugin in a Modern.js Module project configuration. It sets up the build configuration for bundling Vue components.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/plugins/official-list/plugin-vue.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\nimport { modulePluginVue } from '@modern-js/plugin-module-vue';\n\nexport default defineConfig({\n  plugins: [moduleTools(), modulePluginVue()],\n  buildConfig: {\n    buildType: 'bundle',\n    format: 'esm',\n    input: ['src/index.vue'],\n    dts: false,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Setting Default Configuration for WebSocket HMR Client in JavaScript\nDESCRIPTION: This snippet defines the default configuration object for the WebSocket HMR client. It sets default values for path, port, host, protocol, reconnection attempts, and error overlay display.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/dev/client.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultConfig = {\n  path: '/webpack-hmr',\n  port: '<port>',\n  // By default it is set to \"location.hostname\"\n  host: '',\n  // By default it is set to \"location.protocol === 'https:' ? 'wss' : 'ws'\"\"\n  protocol: undefined,\n  reconnect: 100,\n  overlay: false,\n};\n```\n\n----------------------------------------\n\nTITLE: Loading Conventional Route Sub-Application in Master App\nDESCRIPTION: React component that uses the useModuleApps hook to load a Table sub-application in the master application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/micro-frontend/c02-development.mdx#2025-04-21_snippet_1\n\nLANGUAGE: js\nCODE:\n```\nimport { useModuleApps } from '@modern-js/plugin-garfish/runtime';\n\nconst Index = () => {\n  const { Table } = useModuleApps();\n\n  return (\n    <div>\n      <Table />\n    </div>\n  );\n};\n\nexport default Index;\n```\n\n----------------------------------------\n\nTITLE: Path Rewriting Proxy Configuration in JavaScript\nDESCRIPTION: Advanced proxy configuration that demonstrates path rewriting to strip the /api prefix when forwarding requests.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/dev-server.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    devServer: {\n      proxy: {\n        '/api': {\n          target: 'http://localhost:3000',\n          pathRewrite: { '^/api': '' },\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing Rewrite in AfterMatch Hook\nDESCRIPTION: This example demonstrates how to use the AfterMatch hook to rewrite a page to a different route within the same site. It shows how to use the router.rewrite method for UA-based routing.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/web-server/hook.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { AfterMatch } from '@modern-js/runtime/server';\n\nexport const afterMatch: AfterMatch = async (ctx, next) => {\n  ctx.router.rewrite('mobile');\n};\n```\n\n----------------------------------------\n\nTITLE: Running Modern.js Commands for Server Operations\nDESCRIPTION: Command examples for building, serving, and deploying Modern.js applications in different environments. These commands manage the web server's lifecycle from development to production.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/concept/server.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nmodern build\nmodern serve\nmodern deploy\n```\n\n----------------------------------------\n\nTITLE: Setting JSX Format in tsconfig.json\nDESCRIPTION: Configuration example showing how to set the JSX syntax in tsconfig.json to ensure proper transformation with Esbuild.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/official/rsbuild-plugins/plugin-esbuild.mdx#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"compilerOptions\": {\n    \"jsx\": \"react-jsx\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Storybook with Modern.js CLI\nDESCRIPTION: Command line interaction to enable Storybook V7 features in a Modern.js project.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/debug/using-storybook.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ npx modern new\n? Please select the operation you want: Enable features\n? Please select the feature name: Enable「Storybook」V7\n```\n\n----------------------------------------\n\nTITLE: Configuring SSG Per Entry Point in Modern.js\nDESCRIPTION: Example of configuring SSG differently for multiple entry points, enabling it for 'entryA' (conventional routing) and disabling it for 'entryB' (self-controlled routing).\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/output/ssg.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  output: {\n    ssg: {\n      entryA: true,\n      entryB: false,\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Sass Exclude Files Configuration\nDESCRIPTION: Example of using the addExcludes utility function to prevent sass-loader from compiling certain files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/sass.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    sass(config, { addExcludes }) {\n      addExcludes(/node_modules/);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Importing GlobalProxyConfig Component in JSX\nDESCRIPTION: This snippet imports a component called GlobalProxyConfig from the @site-docs/components directory, which is used to display proxy configuration documentation for Modern.js.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/dev/proxy.mdx#2025-04-21_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport GlobalProxyConfig from \"@site-docs/components/global-proxy-config\"\n```\n\n----------------------------------------\n\nTITLE: Basic Router Type Definition\nDESCRIPTION: Defines the basic router configuration type as boolean or object with a default value of false.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/runtime/router.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nrouter: boolean | Object = false\n```\n\n----------------------------------------\n\nTITLE: Custom 404 Page Implementation\nDESCRIPTION: Implementation of a custom 404 page component for unmatched routes.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/routes.mdx#2025-04-21_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Page404() {\n  return <div>404 Not Found</div>;\n}\nexport default Page404;\n```\n\n----------------------------------------\n\nTITLE: Configuring Path Redirection in Bundleless Mode\nDESCRIPTION: Shows how to configure path redirection options in bundleless build mode to control how import paths are rewritten.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_32\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  buildConfig: {\n    redirect: {\n      alias: false, // Turn off modifying alias paths\n      style: false, // Turn off modifying the path to the style file\n      asset: false, // Turn off modifying the path to the asset\n      autoExtension: false, // Turn off modifying the suffix to the js file\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling Web Request Handling in Modern.js BFF Configuration\nDESCRIPTION: This code snippet demonstrates how to configure Modern.js to allow BFF to handle web page requests. When set to true, page requests will pass through BFF, and the default page rendering logic will run as the last middleware in the BFF service.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/bff/enable-handle-web.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  bff: {\n    enableHandleWeb: true,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Defining Child Application Interface in TypeScript\nDESCRIPTION: TypeScript interface definition for configuring child applications in a micro-frontend architecture. Specifies the structure for defining module name, entry point, and activation conditions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/runtime/master-app.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface AppInfo {\n  name: string;\n  entry: string;\n  activeWhen?: string | ()=> boolean;\n}\n```\n\n----------------------------------------\n\nTITLE: Default Filename Configuration\nDESCRIPTION: Default filename patterns for development and production environments. Production mode includes content hashing for cache busting, while development mode uses simpler naming patterns. Node.js targets have special handling for JS files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/filename.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n// Development mode\nconst devDefaultFilename = {\n  html: '[name].html',\n  js: '[name].js',\n  css: '[name].css',\n  svg: '[name].[contenthash:8].svg',\n  font: '[name].[contenthash:8][ext]',\n  image: '[name].[contenthash:8][ext]',\n  media: '[name].[contenthash:8][ext]',\n  assets: '[name].[contenthash:8][ext]',\n};\n\n// Production mode\nconst prodDefaultFilename = {\n  html: '[name].html',\n  js: output.target === 'node' ? '[name].js' : '[name].[contenthash:8].js',\n  css: '[name].[contenthash:8].css',\n  svg: '[name].[contenthash:8].svg',\n  font: '[name].[contenthash:8][ext]',\n  image: '[name].[contenthash:8][ext]',\n  media: '[name].[contenthash:8][ext]',\n  assets: '[name].[contenthash:8][ext]',\n};\n```\n\n----------------------------------------\n\nTITLE: Default TypeScript Checker Configuration in Modern.js\nDESCRIPTION: Default configuration object for the TypeScript checker in Modern.js. It sets memory limits, uses project-specific tsconfig and TypeScript, excludes test files and node_modules, and customizes error logging.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/ts-checker.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultOptions = {\n  typescript: {\n    // avoid OOM issue\n    memoryLimit: 8192,\n    // use tsconfig of user project\n    configFile: tsconfigPath,\n    // use typescript of user project\n    typescriptPath: require.resolve('typescript'),\n  },\n  issue: {\n    exclude: [\n      { file: '**/*.(spec|test).ts' },\n      { file: '**/node_modules/**/*' },\n    ],\n  },\n  logger: {\n    log() {\n      // do nothing\n      // we only want to display error messages\n    },\n    error(message: string) {\n      console.error(message.replace(/ERROR/g, 'Type Error'));\n    },\n  },\n},\n```\n\n----------------------------------------\n\nTITLE: Basic NoSSR Component Usage in Modern.js\nDESCRIPTION: Demonstrates the basic implementation of the NoSSR component by importing it from the Modern.js runtime/ssr package.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/ssr/no-ssr.mdx#2025-04-21_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { NoSSR } from '@modern-js/runtime/ssr';\n\nexport default () => <NoSSR>...</NoSSR>;\n```\n\n----------------------------------------\n\nTITLE: Importing and Using npm Rsbuild Plugin in Modern.js\nDESCRIPTION: Example of how to import a Rsbuild plugin from an npm package and register it in the Modern.js configuration. This demonstrates the basic pattern for using third-party Rsbuild plugins.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/builder-plugins.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { myRsbuildPlugin } from 'my-rsbuild-plugin';\n\nexport default defineConfig({\n  builderPlugins: [myRsbuildPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Creating Remote Button Component\nDESCRIPTION: Example of a React button component that will be exposed through Module Federation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/module-federation/usage.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport React from 'react';\n\nexport const Button = () => {\n  return <button type=\"button\">Remote Button</button>;\n};\n```\n\n----------------------------------------\n\nTITLE: Advanced Loadable Usage with ResolveComponent in TypeScript\nDESCRIPTION: Demonstrates using the resolveComponent option to load specific named exports or dynamically choose components based on props.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/utility/loadable.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nconst LoadableApple = loadable(() => import('./components'), {\n  resolveComponent: components => components.Apple,\n});\nconst LoadableOrange = loadable(() => import('./components'), {\n  resolveComponent: components => components.Orange,\n});\nconst LoadableFruit = loadable(() => import('./components'), {\n  resolveComponent: (components, props) => components[props.fruit],\n});\n```\n\n----------------------------------------\n\nTITLE: Customizing buildPreset Using the preset Parameter\nDESCRIPTION: Example of using a function with the preset parameter to customize the NPM_LIBRARY preset configuration by adding define values.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-preset.mdx#2025-04-21_snippet_9\n\nLANGUAGE: js\nCODE:\n```\nimport { defineConfig } from '@modern-js/module-tools';\n\nexport default defineConfig({\n  buildPreset({ preset }) {\n    const { NPM_LIBRARY } = preset;\n    return NPM_LIBRARY.map(config => {\n      config.define = {\n        VERSION: '1.0.1',\n      };\n      return config;\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Defining HTML Favicon Configuration in Modern.js\nDESCRIPTION: Configuration options for setting the favicon icon path in Modern.js applications. The favicon can be specified as a URL, absolute path, or relative path from the project root. During build, the favicon is copied to the dist directory and a link tag is added to the HTML.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/html/favicon.mdx#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n---\ntitle: favicon\nconfigName: html.favicon\n---\n\n# html.favicon\n\n- **Type:** `string ｜ Function`\n- **Default:** `undefined`\n\nSet the favicon icon path for all pages, can be set as:\n\n- a URL.\n- an absolute path to the file.\n- a relative path relative to the project root directory.\n\nAfter config this option, the favicon will be automatically copied to the dist directory during the compilation, and the corresponding `link` tag will be added to the HTML.\n\nimport RsbuildConig from '@site-docs-en/components/rsbuild-config-tooltip';\n\n<RsbuildConig />\n```\n\n----------------------------------------\n\nTITLE: Configuring Tailwind CSS with Object Type in Modern.js\nDESCRIPTION: Shows how to extend Tailwind CSS configuration using an object that gets shallow-merged with the default configuration, in this example adding Tailwind plugins.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/tailwindcss.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    tailwindcss: {\n      plugins: [\n        require('@tailwindcss/forms'),\n        require('@tailwindcss/aspect-ratio'),\n        require('@tailwindcss/typography'),\n      ],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Accessing webpack instance in webpackChain\nDESCRIPTION: Example showing how to access the webpack instance within the webpackChain function to use webpack plugins directly, such as ProgressPlugin.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/webpack-chain.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    webpackChain: (chain, { webpack }) => {\n      chain.plugin('my-progress').use(webpack.ProgressPlugin);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Custom RenderChunk Hook for Minification in Modern.js Module\nDESCRIPTION: Example demonstrating how to implement a renderChunk hook that minifies JavaScript chunks in the final output during the build process.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/in-depth-about-build.md#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\ncompiler.hooks.renderChunk.tapPromise('minify', async chunk => {\n  if (chunk.type === 'chunk') {\n    const code = chunk.contents.toString();\n    const result = await minify.call(compiler, code);\n    return {\n      ...chunk,\n      contents: result.code,\n      map: result.map,\n    };\n  }\n  return chunk;\n});\n```\n\n----------------------------------------\n\nTITLE: Basic Plugin Setup with API Usage\nDESCRIPTION: Demonstrates how to create a plugin and use the API object to access configuration and context information.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/plugins/guide/setup-function.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport const myPlugin = (): CliPlugin<ModuleTools> => ({\n  name: 'my-plugin',\n\n  setup(api) {\n    // 获取应用原始配置\n    const config = api.useConfigContext();\n    // 获取应用运行上下文\n    const appContext = api.useAppContext();\n    // 获取解析之后的最终配置\n    const resolvedConfig = api.useResolvedConfigContext();\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: WebAssembly Type Declaration in TypeScript\nDESCRIPTION: Example of adding TypeScript type declarations for WebAssembly module exports.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/static-assets/wasm-assets.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport const add = (num1: number, num2: number) => number;\n```\n\n----------------------------------------\n\nTITLE: 获取服务器性能计时数据 (Server-Timing) 使用 Performance API\nDESCRIPTION: 展示如何使用浏览器的 Performance API 获取服务器在处理请求过程中的性能计时数据。代码首先获取导航类型的性能条目，然后从中提取 serverTiming 信息并打印到控制台。\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/server-monitor/metrics.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst navigation = performance.getEntriesByType('navigation')[0];\nconst serverTiming = navigation.serverTiming;\nconsole.log(serverTiming);\n```\n\n----------------------------------------\n\nTITLE: Implementing beforeBuildTask Hook in TypeScript\nDESCRIPTION: Hook triggered before each build subtask execution. Uses AsyncWaterfall pattern with build configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/plugin-api/plugin-hooks.md#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport const myPlugin = (): CliPlugin<ModuleTools> => ({\n  name: 'my-plugin',\n\n  setup() {\n    return {\n      beforeBuildTask(config: BaseBuildConfig): BaseBuildConfig {\n        return config;\n      },\n    };\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Exports with Source Field in Package.json\nDESCRIPTION: Demonstrates how to configure the exports field with source entries in package.json for packages using the exports field for multiple entry points.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/source-build.mdx#2025-04-21_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"name\": \"lib\",\n  \"exports\": {\n    \".\": {\n      \"source\": \"./src/index.ts\",\n      \"default\": \"./dist/index.js\"\n    },\n    \"./features\": {\n      \"source\": \"./src/features/index.ts\",\n      \"default\": \"./dist/features/index.js\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring SWC Plugin in Modern.js Config File\nDESCRIPTION: This snippet demonstrates how to register the SWC plugin in the 'modern.config.ts' file to enable SWC compilation and compression in a Modern.js project.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/enableSwc.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { appTools, defineConfig } from '@modern-js/app-tools';\nimport { swcPlugin } from '@modern-js/plugin-swc';\n\nexport default defineConfig({\n  plugins: [appTools(), swcPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Creating Component Documentation with MDX\nDESCRIPTION: Example of writing component documentation using MDX format with component preview\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/use-module-doc.mdx#2025-04-21_snippet_1\n\nLANGUAGE: mdx\nCODE:\n```\n# Button\n\n## Basic Usage\n\nButtons come in four sizes: small, medium, large\n\n```tsx\nimport React from 'react';\nimport { Button } from 'demo';\n\nexport default () => {\n  return <Button size=\"large\">Click Me</Button>;\n};\n```\n```\n\n----------------------------------------\n\nTITLE: Configuring Object-based Proxy Rules in Modern.js\nDESCRIPTION: Demonstrates how to set up proxy rules using an object configuration where keys are patterns and values are targets\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/components/global-proxy-config.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  dev: {\n    proxy: {\n      'https://www.baidu.com': 'https://google.com.hk',\n      //可以通过 file 协议直接返回静态文件。\n      'https://example.com/api': 'file://./data.json',\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Setting Default Decorator Configuration in JavaScript\nDESCRIPTION: This snippet sets the default configuration for decorators. It defines the 'defaultDecorators' object with the 'version' property set to 'legacy'.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/source/decorators.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultDecorators = {\n  version: 'legacy';\n};\n```\n\n----------------------------------------\n\nTITLE: Custom Result Field Name Example\nDESCRIPTION: Demonstrates how to rename the 'result' field to a custom name (e.g., 'items') using the result parameter in the configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/model/handle-effect.mdx#2025-04-21_snippet_3\n\nLANGUAGE: ts\nCODE:\n```\ninterface State {\n  items: any; // 默认的 result -> items\n  pending: boolean;\n  error: string;\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Jest for Integration Tests in Modern.js\nDESCRIPTION: Sets up Jest configuration for Modern.js integration tests, including testMatch patterns, transformIgnorePatterns, and test environment variables. It handles path mapping for test files and configures the test runner for Modern.js application testing.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/components/faq-build-product.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n/** @type {import('jest').Config} */\nmodule.exports = {\n  testEnvironment: 'jsdom',\n  rootDir: process.cwd(),\n  testMatch: [\n    '<rootDir>/dist/jest-e2e/**/*.test.js',\n    '<rootDir>/compiled/jest-e2e/**/*.test.js',\n  ],\n  transform: {},\n  transformIgnorePatterns: ['/node_modules/', '/dist/', '/compiled/'],\n  moduleNameMapper: {\n    '\\\\.(css|less|sass|scss|styl)$': require.resolve('identity-obj-proxy'),\n  },\n  setupFiles: [require.resolve('./env')],\n};\n```\n\n----------------------------------------\n\nTITLE: Pre-mounting Shared Models in Main Application (TypeScript)\nDESCRIPTION: This code snippet shows how to pre-mount models that need to be shared in the main application. It assigns an array of shared models to the App.models property to avoid accidental downgrades.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/faq.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n// App is the entry component of the main application, and sharedModel1 and sharedModel2 are the models that need to be shared.\nApp.models = [sharedModel1, sharedModel2];\n```\n\n----------------------------------------\n\nTITLE: Registering Babel Plugin in Modern.js Module Tools Configuration\nDESCRIPTION: This snippet demonstrates how to register the Babel plugin in the Modern.js module tools configuration. It imports necessary functions and plugins, then defines the configuration using defineConfig.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/official-list/plugin-babel.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\nimport { modulePluginBabel } from '@modern-js/plugin-module-babel';\n\nexport default defineConfig({\n  plugins: [moduleTools(), modulePluginBabel()],\n});\n```\n\n----------------------------------------\n\nTITLE: Using useRouteError Hook in Error Boundary Component\nDESCRIPTION: Example of using the useRouteError hook in an ErrorBoundary component to display route error information.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/router/router.mdx#2025-04-21_snippet_7\n\nLANGUAGE: TSX\nCODE:\n```\nimport { useRouteError } from '@modern-js/runtime/router';\nconst ErrorBoundary = () => {\n  const error = useRouteError();\n  return (\n    <div>\n      <h1>{error.status}</h1>\n      <h2>{error.message}</h2>\n    </div>\n  );\n};\nexport default ErrorBoundary;\n```\n\n----------------------------------------\n\nTITLE: Configuring Dev Server Host in Modern.js\nDESCRIPTION: Configuration example showing how to set the development server to listen only on localhost instead of all network interfaces. This restricts access to only local connections.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/dev/host.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    host: 'localhost',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Package.json Dependencies for Modern.js Plugins (JSON)\nDESCRIPTION: This JSON snippet shows an example of how Modern.js plugins are listed as dependencies in the package.json file. The auto-loading feature uses this information to determine which plugins to load.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/auto-load-plugin.mdx#2025-04-21_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n\"dependencies\": {\n  \"@modern-js/plugin-tailwindcss\": \"x.x.x\"\n  ...\n},\n\"devDependencies\": {\n  \"@modern-js/app-tools\": \"x.x.x\"\n  ...\n}\n```\n\n----------------------------------------\n\nTITLE: Registering Vue Plugin in Modern.js Module Configuration\nDESCRIPTION: Configuration example showing how to register the Vue plugin in a Modern.js Module project. It sets up the module tools, registers the Vue plugin, and configures the build options for bundling Vue components.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/official-list/plugin-vue.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\nimport { modulePluginVue } from '@modern-js/plugin-module-vue';\n\nexport default defineConfig({\n  plugins: [moduleTools(), modulePluginVue()],\n  buildConfig: {\n    buildType: 'bundle',\n    format: 'esm',\n    input: ['src/index.vue'],\n    dts: false,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Enabling CSS File Inlining in Modern.js\nDESCRIPTION: This configuration enables inlining of CSS files into HTML files in Modern.js using the output.enableInlineStyles option.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/page-performance/inline-assets.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    enableInlineStyles: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using Head Component in a Modern.js Page\nDESCRIPTION: This example demonstrates how to use the Helmet component in a Modern.js page to add a title and meta tag to the <head> section. It shows the component being used within a functional component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/utility/head.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Helmet } from '@modern-js/runtime/head';\n\nfunction IndexPage() {\n  return (\n    <div>\n      <Helmet>\n        <title>My page title</title>\n        <meta name=\"viewport\" content=\"initial-scale=1.0, width=device-width\" />\n      </Helmet>\n      <p>Hello Modern.js!</p>\n    </div>\n  );\n}\n\nexport default IndexPage;\n```\n\n----------------------------------------\n\nTITLE: Customizing TypeScript Checker in Modern.js\nDESCRIPTION: Example of customizing the TypeScript checker configuration in Modern.js. This snippet demonstrates how to exclude files from a specific folder using a regular expression.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/ts-checker.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    tsChecker: {\n      issue: {\n        exclude: [({ file = '' }) => /[\\\\/]some-folder[\\\\/]/.test(file)],\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Incorrect CSS Filename Hashing Configuration Causing HMR Issues\nDESCRIPTION: An example of incorrect configuration where content hashing is applied in all environments, including development, which breaks HMR for CSS files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/troubleshooting/hmr.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    filename: {\n      css: '[name].[contenthash:8].css',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Babel Plugin in Modern.js Module\nDESCRIPTION: Configuration example showing how to set up the Babel plugin in Modern.js Module. Demonstrates setting internal preset options for babel-plugin-import and @babel/preset-react, along with babel transform options.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/module/plugin-module-babel/README.md#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\nimport { modulePluginBabel } from '@modern-js/plugin-module-babel';\nexport default defineConfig({\n  plugins: [\n    moduleTools(),\n    modulePluginBabel({\n      internalPresetOptions: {\n        // babel-plugin-import options\n        import: {},\n        // @babel/preset-react options\n        react: {},\n      },\n      // refer: https://babeljs.io/docs/en/options\n      babelTransformOptions: {},\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Defining dev.assetPrefix Configuration in Modern.js\nDESCRIPTION: This code snippet shows the type definition and default value for the dev.assetPrefix configuration option. It can be set to a boolean, string, or 'auto', with a default value of '/'.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/dev/asset-prefix.mdx#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n- **Type:** `boolean | string | 'auto'`\n- **Default:** `'/'`\n```\n\n----------------------------------------\n\nTITLE: Enabling SWC Compile via CLI in Modern.js\nDESCRIPTION: This snippet shows the CLI command and prompts to enable SWC compilation in a Modern.js project using the 'pnpm run new' command.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/enableSwc.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n? Please select the operation you want: Enable features\n? Please select the feature name: Enable SWC Compile\n```\n\n----------------------------------------\n\nTITLE: Interactive CLI Options for Modern.js Project Creation\nDESCRIPTION: Shows the interactive command-line interface options for creating a Modern.js project. The example selects TypeScript as the development language and pnpm as the package manager.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/components/init-app.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n? 请选择开发语言 TS\n? 请选择包管理工具 pnpm\n```\n\n----------------------------------------\n\nTITLE: Importing and Using Local Rsbuild Plugin in Modern.js\nDESCRIPTION: Example showing how to import a Rsbuild plugin from a local file path in your project and register it in the Modern.js configuration. This is useful for custom plugins that aren't published to npm.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/builder-plugins.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { myRsbuildPlugin } from './plugin/myRsbuildPlugin';\n\nexport default defineConfig({\n  builderPlugins: [myRsbuildPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Function-based TSLoader Configuration in TypeScript\nDESCRIPTION: An example of using a function to modify the ts-loader configuration in a Modern.js project. This approach allows for more dynamic configuration changes.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/ts-loader.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    tsLoader: opts => {\n      opts.allowTsInNodeModules = false;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Modern.js Project Settings via CLI\nDESCRIPTION: This bash snippet shows the interactive CLI prompts for setting up a Modern.js project. It asks the user to select the development language (TypeScript) and the package manager (pnpm).\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/components/default-mwa-generate.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n? 请选择开发语言：TS\n? 请选择包管理工具：pnpm\n```\n\n----------------------------------------\n\nTITLE: Configuring Build Scripts for Monorepo Deployment on Vercel\nDESCRIPTION: JSON configuration for package.json to set up build scripts for deploying a monorepo project on Vercel using pnpm.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/deploy.mdx#2025-04-21_snippet_10\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"build:packages\": \"pnpm --filter 'app^...' run build\",\n    \"deploy\": \"pnpm run build:packages && modern deploy\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: HTML5 History Support Configuration\nDESCRIPTION: Defines the supportHtml5History configuration type as boolean with a default value of true. Determines whether to use BrowserRouter or HashRouter.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/runtime/router.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nsupportHtml5History: boolean = true\n```\n\n----------------------------------------\n\nTITLE: Accessing other Model's Actions in Modern.js\nDESCRIPTION: This example shows how to access another Model's Actions by retrieving them during the define callback phase. It's more efficient when only needing to call another Model's Actions since they are functions and don't have value expiration issues.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/model/model-communicate.mdx#2025-04-21_snippet_2\n\nLANGUAGE: TypeScript\nCODE:\n```\nconst barModel = model('bar').define({\n  // 省略\n});\n\nconst fooModel = model('foo').define((context, utils) => {\n  // 获取 barModel 的 actions\n  const [, actions] = utils.use(barModel);\n  return {\n    // 省略 state、actions\n    effects: {\n      async loadA() {\n        // 省略副作用逻辑\n        // 调用 barModel 的 action\n        barModel.actionA();\n      },\n      async loadB() {\n        // 省略副作用逻辑\n        // 调用 barModel 的 action\n        barModel.actionB();\n      },\n    },\n  };\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Bundleless Mode Input Files in Modern.js Module\nDESCRIPTION: Specifies entry files and directories for the bundleless build mode. This configuration processes both a directory and a specific file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_28\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    buildType: 'bundleless',\n    input: ['src/a', 'src/index.ts'],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Disabling Esbuild Minification\nDESCRIPTION: Example showing how to disable Esbuild minification and continue using Terser for code minification.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/official/rsbuild-plugins/plugin-esbuild.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nbuilderPluginEsbuild({\n  minimize: false,\n});\n```\n\n----------------------------------------\n\nTITLE: Default Configuration for source.include in Modern.js\nDESCRIPTION: This snippet shows the default configuration for source.include in Modern.js. It includes an array of regular expressions and strings that match specific node_modules directories and files to be included in the compilation process.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/include.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst defaultInclude = [\n  [\n    /node_modules\\/react-router/,\n    /node_modules\\/react-router-dom/,\n    /node_modules\\/@remix-run\\/router/,\n    '/node_modules/.modern-js',\n  ],\n];\n```\n\n----------------------------------------\n\nTITLE: Manually Registering Plugins in Modern.js\nDESCRIPTION: Example of manually registering plugins in Modern.js by importing and adding them to the plugins array in the configuration file. This is the recommended approach as it provides more control and transparency.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/auto-load-plugin.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { appTools, defineConfig } from '@modern-js/app-tools';\nimport { bffPlugin } from '@modern-js/plugin-bff';\n\nexport default defineConfig({\n  plugins: [appTools(), bffPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Setting Up Before Middleware in Modern.js DevServer\nDESCRIPTION: Shows how to configure custom middleware to be executed before all other internal middleware in the Modern.js DevServer.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/dev-server.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    devServer: {\n      before: [\n        async (req, res, next) => {\n          console.log('before dev middleware');\n          next();\n        },\n      ],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Multiple Routes for an Entry in Modern.js\nDESCRIPTION: This code snippet shows how to set multiple routes for a single entry named 'page-a' in a Modern.js application. It allows the entry to be accessed via both '/a' and '/b' routes.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/server/routes.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  server: {\n    routes: {\n      'page-a': [`/a`, '/b'],\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Displaying Project Directory Structure with Document.tsx Files\nDESCRIPTION: Shows a sample directory structure with Document.tsx files both at the root and entry-specific levels to demonstrate template hierarchy and override behavior.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/html.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n.\n└── src\n    ├── Document.tsx\n    ├── entry-a\n    │   ├── Document.tsx\n    │   └── routes\n    ├── entry-b\n    │    └── routes\n    └── modern-app-env.d.ts\n```\n\n----------------------------------------\n\nTITLE: Build Mode Entry Point Example\nDESCRIPTION: Example of a build mode entry point with direct DOM rendering.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/concept/entries.mdx#2025-04-21_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n```\n\n----------------------------------------\n\nTITLE: Moving Script Tags to Body with Scripts Component\nDESCRIPTION: Example showing how to use the Scripts component to place script tags at the end of the body element instead of in the head.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/html.mdx#2025-04-21_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport React, { useContext } from 'react';\nimport { Html, Root, Head, Body, Scripts } from '@modern-js/runtime/document';\n\nexport default function Document(): React.ReactElement {\n  return (\n    <Html>\n      <Head></Head>\n      <Body>\n        <Root rootId=\"root\"></Root>\n        <Scripts />\n      </Body>\n    </Html>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Importing with Alias in TypeScript\nDESCRIPTION: Demonstrates how to import a module using an alias in TypeScript. This snippet shows that aliases used in source code will be converted in the generated type files by Modern.js Module.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/in-depth-about-build.md#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport utils from '@common/utils';\n```\n\n----------------------------------------\n\nTITLE: Referencing Image Assets in CSS\nDESCRIPTION: Demonstrates how to reference an image asset in a CSS file using a relative path. This is commonly used for setting background images or other CSS properties that require asset URLs.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/static-assets.mdx#2025-04-21_snippet_2\n\nLANGUAGE: css\nCODE:\n```\n.logo {\n  background-image: url('../static/logo.png');\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Middleware Before Dev Middleware in Modern.js\nDESCRIPTION: Example of adding custom middleware that executes before all development environment middlewares using the tools.devServer.before configuration. This middleware logs a message and calls next() to continue the request chain.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/dev-server.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    devServer: {\n      before: [\n        async (req, res, next) => {\n          console.log('before dev middleware');\n          next();\n        },\n      ],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing Data Action in a Layout Data File\nDESCRIPTION: Demonstrates how to define an action function in a route data file that processes user data from a request and updates a user profile on the server.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/data/data-write.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { ActionFunction } from '@modern-js/runtime/router';\n\nexport const action: ActionFunction = ({ request }) => {\n  const newUser = await request.json();\n  const name = newUser.name;\n  return updateUserProfile(name);\n}\n```\n\n----------------------------------------\n\nTITLE: Simplified Configuration for Full Lazy Compilation\nDESCRIPTION: Simplified configuration syntax to enable lazy compilation for both entry and async modules using a boolean value instead of an object.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/experiments/lazy-compilation.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  experiments: {\n    lazyCompilation: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Multiple Context Proxy Configuration in JavaScript\nDESCRIPTION: Configuration example showing how to proxy multiple paths to the same target using the context array.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/dev-server.mdx#2025-04-21_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    devServer: {\n      proxy: [\n        {\n          context: ['/auth', '/api'],\n          target: 'http://localhost:3000',\n        },\n      ],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Different Ports for Development and Production\nDESCRIPTION: This example shows how to set different port numbers for development and production environments using both dev.port and server.port. In this case, the development environment will use port 3001, while the production environment will use port 3002.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/server/port.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  dev: {\n    port: 3001,\n  },\n  server: {\n    port: 3002,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Advanced PreRender Configuration with Channel Rewriting\nDESCRIPTION: This example demonstrates how to use the PreRender component with advanced configuration, including rewriting rules for the channel parameter to separate test channels from production channels in caching.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/ssr/pre-render.mdx#2025-04-21_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\n/* 将 query 中 channel 值为 test_ 开头的重写为 testChannel，否则重写为 otherChannel */\n<PreRender interval={10} level={2} includes={{\n  query: [\"channel\"],\n  header: [\"language\"]\n}} matches={{\n  query: {\n    channel: {\n      \"testChannel\", \"^test_\",\n      \"otherChannel\", \".*\"\n    }\n  }\n}} />\n```\n\n----------------------------------------\n\nTITLE: Enabling Convention-based Routing for Custom Entry in Modern.js\nDESCRIPTION: This code snippet shows how to enable convention-based routing for a custom entry in Modern.js. It demonstrates setting the entry to a directory path to activate convention-based routing for that entry.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/source/entries.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig({\n  source: {\n    entries: {\n      // 启用约定式路由\n      entry_spa: {\n        // 约定式路由的入口路径必须设置为目录\n        entry: './src/about',\n      },\n    },\n    // 禁用默认入口扫描\n    disableDefaultEntries: true,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Defining PreconnectOption Interface in TypeScript\nDESCRIPTION: This code snippet defines the PreconnectOption interface, which is used to specify the structure of preconnect options. It includes the 'href' property for the URL to preconnect to, and an optional 'crossorigin' boolean flag.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/performance/preconnect.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface PreconnectOption {\n  href: string;\n  crossorigin?: boolean;\n}\n```\n\n----------------------------------------\n\nTITLE: Disabling Source Maps in Production\nDESCRIPTION: Configuration to disable source maps in production environment to improve build performance using the disableSourceMap option.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/build-performance.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    disableSourceMap: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Installing Custom Web Server via CLI\nDESCRIPTION: Command line instructions for enabling the Custom Web Server feature using the Modern.js CLI\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/web-server.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n? Select operation: Create project element\n? Select element type: Create \"Custom Web Server\" source directory\n```\n\n----------------------------------------\n\nTITLE: Adding Webpack Plugins\nDESCRIPTION: Example showing how to add webpack plugins using the webpack instance parameter.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/webpack.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    webpack: (config, { webpack }) => {\n      config.plugins.push(new webpack.ProgressPlugin());\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling Asset Manifest in Modern.js Configuration\nDESCRIPTION: This code snippet demonstrates how to enable asset manifest generation in a Modern.js project configuration. It sets the 'enableAssetManifest' option to true in the output settings.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/enable-asset-manifest.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    enableAssetManifest: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Manual File Upload Implementation Using Fetch API in React\nDESCRIPTION: This React component shows how to manually implement file uploads using the browser's Fetch API. It constructs a FormData object, appends the selected files to it, and submits a POST request to the server endpoint. The component uses a form with a file input and a submit button.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/bff-upload.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport React from 'react';\n\nexport default (): JSX.Element => {\n  const [file, setFile] = React.useState<FileList | null>();\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setFile(e.target.files);\n  };\n\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    const formData = new FormData();\n    if (file) {\n      for (let i = 0; i < file.length; i++) {\n        formData.append('images', file[i]);\n      }\n      await fetch('/api/upload', {\n        method: 'POST',\n        body: formData,\n      });\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <input multiple type=\"file\" onChange={handleChange} />\n      <button type=\"submit\">upload</button>\n    </form>\n  );\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Vercel Deployment for Monorepo Project\nDESCRIPTION: JSON configuration for vercel.json to set up deployment settings for a monorepo Modern.js project on Vercel.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/deploy.mdx#2025-04-21_snippet_11\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"buildCommand\": \"npm run deploy\",\n  \"outputDirectory\": \".vercel/output\"\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Object-based Proxy Rules\nDESCRIPTION: Demonstrates how to configure proxy rules using an object where keys are matching patterns and values are target URLs.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/global-proxy-config.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  dev: {\n    proxy: {\n      'https://www.baidu.com': 'https://google.com.hk',\n      // Static files can be returned directly via the file protocol\n      'https://example.com/api': 'file://./data.json',\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Registering Server Plugin in Modern.js Config\nDESCRIPTION: Configuration code to register the server plugin in Modern.js application\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/web-server.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { serverPlugin } from '@modern-js/plugin-server';\n\nexport default defineConfig({\n  plugins: [..., serverPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom Chunk Splitting\nDESCRIPTION: Example configuration for custom chunk splitting strategy, specifically splitting axios library into a separate chunk.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/page-performance/optimize-bundle.mdx#2025-04-21_snippet_8\n\nLANGUAGE: js\nCODE:\n```\nexport default {\n  performance: {\n    chunkSplit: {\n      strategy: 'split-by-experience',\n      forceSplitting: {\n        axios: /node_modules\\/axios/,\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Rsbuild Plugin with Custom Options\nDESCRIPTION: Example showing how to pass custom configuration options to a Rsbuild plugin through the plugin function parameters.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/builder-plugins.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport myRsbuildPlugin from 'my-rsbuild-plugin';\n\nexport default defineConfig({\n  builderPlugins: [\n    myRsbuildPlugin({\n      foo: 1,\n      bar: 2,\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Migrating Hook Invocation Pattern in TypeScript\nDESCRIPTION: Demonstrates the transition from returning hooks object to using direct api calls. The new approach provides a more intuitive and maintainable way to interact with the plugin system.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/cli-plugins/migration.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n// Old Syntax (return hooks)\n{\n  setup: () => ({\n    commands({ program }) { /*...*/ }\n  })\n}\n\n// New Syntax (api.xxx)\n{\n  setup: api => {\n    api.addCommand(({ program }) => { /*...*/ })\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Source Alias with Function Syntax\nDESCRIPTION: Example of configuring path aliases using a function that modifies the built-in alias object in Modern.js configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/alias.mdx#2025-04-21_snippet_2\n\nLANGUAGE: js\nCODE:\n```\nexport default {\n  source: {\n    alias: alias => {\n      alias['@common'] = './src/common';\n      return alias;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring External React Dependencies in Modern.js\nDESCRIPTION: Demonstrates how to configure external React dependencies, which can cause HMR issues if not handled correctly in development mode.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/troubleshooting/hmr.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    externals: {\n      react: 'React',\n      'react-dom': 'ReactDOM',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Generating Storybook Configuration Files for Modern.js\nDESCRIPTION: Function that generates Storybook configuration files including main.js, preview.js, and manager.js. It configures the appropriate Storybook settings based on the project's configuration, including story locations, framework settings, and addon configurations.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/components/entry-mode.mdx#2025-04-21_snippet_0\n\nLANGUAGE: TypeScript\nCODE:\n```\nexport async function generateFiles() {\n  return [\n    {\n      file: '.storybook/main.js',\n      content: `const { webpackFinal } = require('${PLUGIN_PATH}');\n\nmodule.exports = {\n  stories: ['../stories/**/*.stories.mdx', '../stories/**/*.stories.@(js|jsx|ts|tsx)'],\n  addons: [\n    '@storybook/addon-links',\n    '@storybook/addon-essentials',\n    '@storybook/addon-interactions'\n  ],\n  framework: '@storybook/react',\n  core: {\n    builder: '@storybook/builder-webpack5'\n  },\n  webpackFinal,\n};\n`,\n    },\n    {\n      file: '.storybook/preview.js',\n      content: `export const parameters = {\n  actions: { argTypesRegex: '^on[A-Z].*' },\n  controls: {\n    matchers: {\n      color: /(background|color)$/i,\n      date: /Date$/,\n    },\n  },\n};\n`,\n    },\n    {\n      file: '.storybook/manager.js',\n      content: `import { addons } from '@storybook/addons';\nimport { create } from '@storybook/theming/create';\n\naddons.setConfig({\n  theme: create({\n    base: 'light',\n    brandTitle: 'Modern.js Storybook',\n    brandUrl: 'https://modernjs.dev',\n  }),\n});\n`,\n    },\n  ];\n}\n```\n\n----------------------------------------\n\nTITLE: Defining output.assetPrefix Configuration in Modern.js\nDESCRIPTION: Specifies the type and default value for the output.assetPrefix configuration option. It can be set to a string or 'auto', with a default value of '/'.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/asset-prefix.mdx#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n- **Type:** `string | 'auto'`\n- **Default:** `'/'`\n```\n\n----------------------------------------\n\nTITLE: Configuring Modern.js Runtime State\nDESCRIPTION: Configuration setup to enable the Model API in Modern.js application\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c06-model.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig({\n  runtime: {\n    state: true,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Setting Output Format in Modern.js Module\nDESCRIPTION: Examples of setting different output formats (ESM, CJS, IIFE, UMD) for JavaScript files using the 'format' option.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_18\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    format: 'esm',\n  },\n});\n```\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    format: 'cjs',\n  },\n});\n```\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    format: 'iife',\n  },\n});\n```\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    format: 'umd',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Disabling gzip Compression in Modern.js DevServer\nDESCRIPTION: Example showing how to disable gzip compression for static resources in the development server by setting the compress option to false. By default, compression is enabled.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/dev-server.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    devServer: {\n      compress: false,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Pre-Build Hook in Modern.js\nDESCRIPTION: Shows how to execute logic before build process starts using onBeforeBuild hook.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/cli-plugins/api.mdx#2025-04-21_snippet_18\n\nLANGUAGE: typescript\nCODE:\n```\napi.onBeforeBuild(()=>{\n    // Perform some environment checks before building\n})\n```\n\n----------------------------------------\n\nTITLE: Enabling pnpm with Corepack\nDESCRIPTION: Command to enable pnpm package manager using Node.js corepack feature. This is only available on Node.js versions 14.19.0 or higher.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/community/contributing-guide.mdx#2025-04-21_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\n# Enable pnpm with corepack, only available on Node.js >= `v14.19.0`\ncorepack enable\n```\n\n----------------------------------------\n\nTITLE: Defining State Configuration Type in Markdown\nDESCRIPTION: Specifies the type and default value for the state configuration option in Modern.js. It enables the use of Model for state management when set to true or an object.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/runtime/state.mdx#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n- **Type:** `boolean | object`\n- **Default:** `false`\n```\n\n----------------------------------------\n\nTITLE: Computed Properties Definition\nDESCRIPTION: Implementation of computed properties to filter archived contacts\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c06-model.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst computed = {\n  archived: ({ items }) => {\n    return items.filter(item => item.archived);\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Babel Plugin with Hooks in Modern.js Module Tools\nDESCRIPTION: This example shows how to configure the Babel plugin using hooks in Modern.js module tools. It demonstrates selective application of Babel to specific files during bundling.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/official-list/plugin-babel.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\nimport { getBabelHook } from '@modern-js/plugin-module-babel';\n\nconst babelHook = getBabelHook({\n  // babel options\n});\n\nexport default defineConfig({\n  plugins: [moduleTools()],\n  buildConfig: [\n    {\n      hooks: [babelHook],\n      input: ['src/a.ts'],\n    },\n    {\n      input: ['src/b.ts'],\n    },\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Incorrect Loader Return Value in TypeScript\nDESCRIPTION: This snippet demonstrates an incorrect usage of a loader function in Modern.js. The loader returns a non-serializable function, which is not allowed in SSR environments.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/data/data-fetch.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// This won't work!\nexport default () => {\n  return {\n    user: {},\n    method: () => {},\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Creating About Page Component\nDESCRIPTION: React component implementation for the about page with navigation link back to Home page using Modern.js router.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/testing/cypress.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Link } from '@modern-js/runtime/router';\n\nconst Index = () => (\n  <div>\n    <h1>About</h1>\n    <Link to=\"/\">Home</Link>\n  </div>\n);\n\nexport default Index;\n```\n\n----------------------------------------\n\nTITLE: Using Environment Detection in Webpack Config\nDESCRIPTION: Example showing how to use the env parameter to apply different configurations based on the environment.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/webpack.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    webpack: (config, { env }) => {\n      if (env === 'development') {\n        config.devtool = 'cheap-module-eval-source-map';\n      }\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Adding Type Declarations for Static Assets in TypeScript\nDESCRIPTION: Shows how to add type declarations for static assets in a TypeScript project to resolve type errors when importing assets. This example adds a declaration for PNG files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/static-assets.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare module '*.png' {\n  const content: string;\n  export default content;\n}\n```\n\n----------------------------------------\n\nTITLE: Function Signature of loadable in Modern.js\nDESCRIPTION: The complete type definition for the loadable function, showing its parameters and return type, along with the available configuration options.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/utility/loadable.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ntype Options = {\n  resolveComponent?: (\n    module: Module,\n    props: Props,\n  ) => React.ComponentType<Props>,\n  fallback?: JSX.Element;\n  ssr?: boolean;\n}\n\nfunction loadable(loadFn: Function, options?: Options) => LoadableComponent\n```\n\n----------------------------------------\n\nTITLE: Adding Custom CLI Commands in Modern.js\nDESCRIPTION: Demonstrates how to add custom CLI commands using the addCommand API hook with commander integration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/cli-plugins/api.mdx#2025-04-21_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\napi.addCommand(({ program }) => {\n  program\n    .command('my-command')\n    .description('My custom command')\n    .action(async () => {\n      // Execute command logic\n      console.log('Executing custom command...');\n    });\n});\n```\n\n----------------------------------------\n\nTITLE: Generated HTML from JSX Components\nDESCRIPTION: The HTML output generated from the Document.tsx example, showing how the JSX components are rendered into static HTML with template variables and proper document structure.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/html.mdx#2025-04-21_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"utf-8\" />\n    <meta\n      name=\"viewport\"\n      content=\"width=device-width, initial-scale=1.0, shrink-to-fit=no, viewport-fit=cover, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no\"\n    />\n    <meta http-equiv=\"x-ua-compatible\" content=\"ie=edge\" />\n    <meta name=\"renderer\" content=\"webkit\" />\n    <meta name=\"layoutmode\" content=\"standard\" />\n    <meta name=\"imagemode\" content=\"force\" />\n    <meta name=\"wap-font-scale\" content=\"no\" />\n    <meta name=\"format-detection\" content=\"telephone=no\" />\n    <link rel=\"icon\" href=\"/a.icon\" />\n    <script defer src=\"/static/js/builder-runtime.js\"></script>\n    <script defer src=\"/static/js/lib-react.js\"></script>\n    <script defer src=\"/static/js/lib-polyfill.js\"></script>\n    <script defer src=\"/static/js/lib-router.js\"></script>\n    <script defer src=\"/static/js/sub.js\"></script>\n    <link href=\"https://modernjs.dev\" />\n    <!-- Need a Comment -->\n  </head>\n\n  <body>\n    <div id=\"root\">\n      <!--<?- html ?>-->\n      <h1 style=\"color:red\">以下为构建时传过来的参数：</h1>\n      <h2>entryName: sub</h2>\n      <h2>title:</h2>\n      <h2>rootId: root</h2>\n    </div>\n    <h1>bottom</h1>\n    <!--<?- chunksMap.js ?>-->\n    <!--<?- SSRDataScript ?>-->\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Development Compilation Complete Hook in Modern.js\nDESCRIPTION: Shows how to execute logic after development server compilation using onDevCompileDone hook.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/cli-plugins/api.mdx#2025-04-21_snippet_20\n\nLANGUAGE: typescript\nCODE:\n```\napi.onDevCompileDone(() => {\n    // Open the browser after the initial compilation is complete\n});\n```\n\n----------------------------------------\n\nTITLE: Installing devcert for Automatic HTTPS Certificate Generation\nDESCRIPTION: Commands to install the devcert package as a development dependency using npm, yarn, or pnpm. This is required for automatic HTTPS certificate generation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/dev/https.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n# npm\nnpm install devcert@1.2.2 -D\n\n# yarn\nyarn add devcert@1.2.2 -D\n\n# pnpm\npnpm add devcert@1.2.2 -D\n```\n\n----------------------------------------\n\nTITLE: Configuring Esbuild in Modern.js\nDESCRIPTION: Example of how to configure Esbuild options in a Modern.js project using the tools.esbuild configuration. It sets loader and minimize options targeting Chrome 61.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/plugin/official/rsbuild-plugins/plugin-esbuild.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  tools: {\n    esbuild: {\n      loader: {\n        target: 'chrome61',\n      },\n      minimize: {\n        target: 'chrome61',\n      },\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Customizing transformImport Default Configuration with Function in Modern.js\nDESCRIPTION: Example of using a function to customize the transformImport configuration, specifically filtering out the Ant Design configuration when using externals.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/source/transform-import.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  source: {\n    transformImport: (imports) => {\n      return imports.filter(data => data.libraryName !== 'antd');\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining BuildCacheConfig Type in TypeScript\nDESCRIPTION: This snippet defines the TypeScript type for the buildCache configuration. It includes options for cache directory, cache digest, and build dependencies.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/performance/build-cache.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype BuildCacheConfig =\n  | {\n      /**\n       * 用于设置缓存文件的输出目录\n       */\n      cacheDirectory?: string;\n      /**\n       * 根据 cacheDigest 内容设置不同的缓存名称\n       */\n      cacheDigest?: Array<string | undefined>;\n      /**\n       * 一个包含构建依赖的文件数组。\n       * Rspack / webpack 将使用其中每个文件的哈希值来判断持久化缓存是否失效。\n       */\n      buildDependencies?: string[];\n    }\n  | boolean;\n```\n\n----------------------------------------\n\nTITLE: Dynamic Global Variables Configuration\nDESCRIPTION: Example of using a function to dynamically set global variables based on build target.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/global-vars.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  source: {\n    globalVars(obj, { target }) {\n      obj['MY_TARGET'] = target === 'node' ? 'server' : 'client';\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Webpack Using Object Syntax\nDESCRIPTION: Example of configuring webpack resolve.alias using object syntax, which gets deep merged with the built-in webpack configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/webpack.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    webpack: {\n      resolve: {\n        alias: {\n          '@util': 'src/util',\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Plugin with Options in Modern.js\nDESCRIPTION: Example of using a plugin with custom configuration options in a Modern.js configuration file. The options are passed as an object to the plugin function.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/plugins.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { myPlugin } from 'my-plugin';\n\nexport default defineConfig({\n  plugins: [\n    myPlugin({\n      foo: 1,\n      bar: 2,\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Target-Specific Webpack Configuration\nDESCRIPTION: Shows how to apply different webpack configurations based on the target environment (web, node, modern-web, or web-worker).\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/webpack-chain.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    webpackChain: (chain, { target }) => {\n      if (target === 'node') {\n        // ...\n      }\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling Features with Modern New Command\nDESCRIPTION: Interactive example of using the modern new command to enable optional features like Tailwind CSS, BFF, SSG, or Micro Frontend in a project.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/commands.mdx#2025-04-21_snippet_8\n\nLANGUAGE: text\nCODE:\n```\n$ npx modern new\n? Please select the operation you want: Enable Features\n? Please select the feature name: (Use arrow keys)\n❯ Enable Tailwind CSS\n  Enable BFF\n  Enable SSG\n  Enable Micro Frontend\n```\n\n----------------------------------------\n\nTITLE: Enabling BFF Feature via CLI\nDESCRIPTION: Command line prompts for enabling BFF functionality in framework mode using the Modern.js CLI.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/enable-bff.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n? Please select the operation you want to perform Enable optional features\n? Please select the feature to enable Enable \"BFF\"\n? Please select BFF type Framework mode\n```\n\n----------------------------------------\n\nTITLE: Proxy Multiple Paths to Same Target in Modern.js DevServer\nDESCRIPTION: Example of proxying multiple path patterns to the same target server. This configuration forwards both /auth and /api requests to http://localhost:3000 using the context option.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/dev-server.mdx#2025-04-21_snippet_12\n\nLANGUAGE: javascript\nCODE:\n```\n// 代理多个路径到同一个目标\nexport default {\n  tools: {\n    devServer: {\n      proxy: [\n        {\n          context: ['/auth', '/api'],\n          target: 'http://localhost:3000',\n        },\n      ],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Adding tsbuildinfo to .gitignore\nDESCRIPTION: Shows how to add TypeScript build info files to .gitignore to prevent them from being tracked by version control.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/source-build.mdx#2025-04-21_snippet_7\n\nLANGUAGE: text\nCODE:\n```\n*.tsbuildinfo\n```\n\n----------------------------------------\n\nTITLE: Displaying Project Directory Structure (Bash)\nDESCRIPTION: This snippet illustrates the directory structure of a project using the custom entry directory. It shows the 'src/pages' folder containing two subfolders 'a' and 'b', each with an 'App.tsx' file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/entries-dir.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n.\n└── src\n    └── pages\n        ├── a\n        │   └── App.tsx\n        └── b\n            └── App.tsx\n```\n\n----------------------------------------\n\nTITLE: Default AssetsRetry Options in TypeScript\nDESCRIPTION: Default configuration values for the assets retry functionality including retry types, max attempts, and event handlers.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/assets-retry.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport const defaultAssetsRetryOptions: AssetsRetryOptions = {\n  type: ['script', 'link', 'img'],\n  domain: [],\n  max: 3,\n  test: '',\n  crossOrigin: false,\n  onRetry: () => {},\n  onSuccess: () => {},\n  onFail: () => {},\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling Styled Components in Modern.js\nDESCRIPTION: This configuration example shows how to disable the styled-components feature in Modern.js by setting tools.styledComponents to false, which can improve compilation performance.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/styled-components.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    styledComponents: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Storybook WebpackChain in Modern.js Module\nDESCRIPTION: Example of how to use the webpackChain option to configure Storybook in a Modern.js Module project, providing a more programmatic approach to webpack configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/dev.md#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    storybook: {\n      webpackChain(chain) {\n        return chain;\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Running Modern.js Application in CI Environment\nDESCRIPTION: Commands to build and serve a Modern.js application in a CI environment where all dependencies are already installed.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/concept/server.mdx#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n`modern build`\n`modern serve`\n```\n\n----------------------------------------\n\nTITLE: Configuring Exports with Source Field in package.json\nDESCRIPTION: Illustrates how to configure the exports field with source information for multiple entry points in a sub-project.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/source-build.mdx#2025-04-21_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"name\": \"lib\",\n  \"exports\": {\n    \".\": {\n      \"source\": \"./src/index.ts\",\n      \"default\": \"./dist/index.js\"\n    },\n    \"./features\": {\n      \"source\": \"./src/features/index.ts\",\n      \"default\": \"./dist/features/index.js\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Action Function with Dynamic Route Parameters in Modern.js\nDESCRIPTION: This code shows how to implement an action function that handles dynamic route parameters. It demonstrates accessing the 'id' parameter from the URL.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/data/data-write.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { ActionFunctionArgs } from '@modern-js/runtime/router;\n\n// When visiting /user/123, the function parameter is `{ params: { id: '123' } }`\nexport const action = async ({ params }: ActionFunctionArgs) => {\n  const { id } = params;\n  const res = await fetch(`https://api/user/${id}`);\n  return res.json();\n};\n```\n\n----------------------------------------\n\nTITLE: Default Configuration for Arco Design in JavaScript\nDESCRIPTION: Default transformImport configuration for Arco Design library, automatically applied by Modern.js when the library is installed. It includes settings for both the main library and the icon package.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/transform-import.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultArcoConfig = [\n  {\n    libraryName: '@arco-design/web-react',\n    libraryDirectory: isServer ? 'lib' : 'es',\n    camelToDashComponentName: false,\n    style: true,\n  },\n  {\n    libraryName: '@arco-design/web-react/icon',\n    libraryDirectory: isServer ? 'react-icon-cjs' : 'react-icon',\n    camelToDashComponentName: false,\n  },\n];\n```\n\n----------------------------------------\n\nTITLE: Excluding Files from Bundleless Mode in Modern.js Module\nDESCRIPTION: Filters specific files from bundleless mode processing using the exclamation mark pattern. This example builds all files in src directory except for spec.ts test files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_29\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    buildType: 'bundleless',\n    input: ['src', '!src/*.spec.ts'],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using onBeforePrintInstructions Hook in Modern.js\nDESCRIPTION: This hook allows modifying the console instructions before they are printed. It receives the current instructions string and should return the modified version.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/cli-plugins/api.mdx#2025-04-21_snippet_26\n\nLANGUAGE: typescript\nCODE:\n```\napi.onBeforePrintInstructions(({ instructions }) => {\n  // do something\n  return { instructions }\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Path Aliases with source.alias Object in Modern.js\nDESCRIPTION: This snippet demonstrates configuring path aliases using the object syntax of `source.alias` in Modern.js config. It maps the `@common` alias to the `./src/common` directory.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/alias.mdx#2025-04-21_snippet_1\n\nLANGUAGE: js\nCODE:\n```\nexport default {\n  source: {\n    alias: {\n      '@common': './src/common',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Removing Babel Presets in Modern.js Configuration (JavaScript)\nDESCRIPTION: Shows how to remove Babel presets using the removePresets utility function. This example removes the @babel/preset-env preset.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/babel.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    babel(config, { removePresets }) {\n      removePresets('@babel/preset-env');\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining Custom Koa.js Server Instance for Modern.js BFF\nDESCRIPTION: This snippet shows how to define a custom Koa.js server instance for the BFF in Modern.js. It creates a Koa app and adds a simple logging middleware.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/bff/extend-server.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport koa from 'koa';\n\nconst app = new Koa();\napp.use(async (ctx, next) => {\n  console.info(`access url: ${ctx.url}`);\n  await next();\n});\n\nexport default app;\n```\n\n----------------------------------------\n\nTITLE: Enabling Automatic File Extension Management\nDESCRIPTION: Configures automatic handling of file extensions based on module format and type, ensuring proper Node.js resolution.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_9\n\nLANGUAGE: TypeScript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    autoExtension: true,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Defining performance.removeConsole configuration in TypeScript\nDESCRIPTION: This snippet defines the type and default value for the performance.removeConsole configuration option. It can be set to a boolean or an array of ConsoleType values to specify which console methods to remove in production builds.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/performance/remove-console.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n- **Type:** `boolean | ConsoleType[]`\n- **Default:** `false`\n```\n\n----------------------------------------\n\nTITLE: Setting Global resolveMainFields in Modern.js Config\nDESCRIPTION: Example of setting resolveMainFields globally in a Modern.js configuration file. It specifies the order of package.json fields to use when resolving npm module imports.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/resolve-main-fields.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  source: {\n    resolveMainFields: ['main', 'browser', 'exports'],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Installing Playwright in Modern.js Project\nDESCRIPTION: Commands to install Playwright dependencies in a Modern.js project using different package managers.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/testing/playwright.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm init playwright\nyarn create playwright\npnpm create playwright\n```\n\n----------------------------------------\n\nTITLE: Direct WebAssembly Import in JavaScript\nDESCRIPTION: Shows how to directly import a WebAssembly module and use its exported functions in JavaScript code.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/static-assets/wasm-assets.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { add } from './add.wasm';\n\nconsole.log(add); // [native code]\nconsole.log(add(1, 2)); // 3\n```\n\n----------------------------------------\n\nTITLE: Registering a Plugin in Modern.js Module Configuration\nDESCRIPTION: Shows how to register a custom plugin in the Modern.js Module configuration file using the plugins API.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/guide/getting-started.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { examplePlugin } from '. /plugins/example';\nexport default defineConfig({\n  plugins: [examplePlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Delayed Response Implementation\nDESCRIPTION: Example of implementing delayed API responses using setTimeout in mock configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/debug/mock.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  'api/getInfo': (req, res) => {\n    setTimeout(() => {\n      res.end('delay 2000ms');\n    }, 2000);\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Correct usage of babel-plugin-import\nDESCRIPTION: Example of correct configuration for multiple babel-plugin-imports with unique identifiers to prevent compilation hangs.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/troubleshooting/builder.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\n// correct example\nexport default {\n  tools: {\n    babel(config, { addPlugins }) {\n      addPlugins([\n        [\n          'babel-plugin-import',\n          { libraryName: 'antd', libraryDirectory: 'es' },\n          'antd',\n        ],\n        [\n          'babel-plugin-import',\n          { libraryName: 'antd-mobile', libraryDirectory: 'es' },\n          'antd-mobile',\n        ],\n      ]);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Internal Plugin List in Modern.js\nDESCRIPTION: Example of the internal plugin list maintained by Modern.js for automatic registration. This list contains official plugins that can be automatically registered when autoLoadPlugins is enabled.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/auto-load-plugin.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst InternalPlugins = ['@modern-js/app-tools', '@modern-js/plugin-tailwindcss', ...];\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom Modern.js Config Path\nDESCRIPTION: Example showing how to specify a custom path for Modern.js configuration in Storybook setup.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/debug/using-storybook.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst config = {\n  framework: {\n    name: '@modern-js/storybook',\n    options: {\n      configPath: 'modern.storybook.config.ts',\n    },\n  },\n};\n\nexport default config;\n```\n\n----------------------------------------\n\nTITLE: Defining Immer Configuration Type in Markdown\nDESCRIPTION: Specifies the type and default value for the immer configuration option. It enables updating the state with mutable operations when set to true.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/runtime/state.mdx#2025-04-21_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\n- **Type:** `boolean`\n- **Default:** `true`\n```\n\n----------------------------------------\n\nTITLE: Wildcard Route Parameters Access\nDESCRIPTION: Shows how to access wildcard route parameters in a catch-all route component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/routes.mdx#2025-04-21_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useParams } from '@modern-js/runtime/router';\n\nfunction Blog() {\n  const params = useParams();\n  console.log(params)\n\n  return <div>current blog URL is {params[\"*\"]}</div>;\n}\nexport default Blog;\n```\n\n----------------------------------------\n\nTITLE: Configuring Browser Targets for Polyfill Plugin\nDESCRIPTION: Example of configuring the polyfill plugin with specific browser targets. This configuration uses browser query syntax to target browsers with more than 0.25% market share that are still maintained.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/plugins/official-list/plugin-polyfill.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\nimport { modulePluginPolyfill } from '@modern-js/plugin-module-polyfill';\n\nexport default defineConfig({\n  plugins: [\n    moduleTools(),\n    modulePluginPolyfill({\n      targets: '> 0.25%, not dead',\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Default TSLoader Configuration in JSON\nDESCRIPTION: The default configuration object for ts-loader in Modern.js projects. It sets the compiler options and enables transpileOnly and allowTsInNodeModules.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/ts-loader.mdx#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"compilerOptions\": {\n    \"target\": \"es5\",\n    \"module\": \"ESNext\"\n  },\n  \"transpileOnly\": true,\n  \"allowTsInNodeModules\": true\n}\n```\n\n----------------------------------------\n\nTITLE: Using TypeScript Type Definitions with Module Plugins\nDESCRIPTION: This snippet demonstrates how to use TypeScript types to get proper type checking and intellisense when creating a Modern.js Module plugin with an 'afterBuild' hook.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/guide/plugin-object.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { CliPlugin, ModuleTools } from '@modern-js/module-tools';\n\nconst myPlugin: CliPlugin<ModuleTools> = {\n  name: 'my-plugin',\n\n  setup() {\n    const foo = '1';\n\n    return {\n      // this is hook\n      afterBuild: () => {\n        //...\n      },\n    };\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Modifying Bundler Chain Configuration\nDESCRIPTION: Demonstrates how to modify Webpack or Rspack configuration using the modifyBundlerChain API.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/cli-plugins/api.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\napi.modifyBundlerChain((chain, utils) => {\n  if (utils.env === 'development') {\n    chain.devtool('eval');\n  }\n  chain.plugin('bundle-analyze').use(BundleAnalyzerPlugin);\n});\n```\n\n----------------------------------------\n\nTITLE: Merging Custom and Default Entries in Modern.js\nDESCRIPTION: This snippet illustrates how custom entries are merged with default entries in Modern.js when disableDefaultEntries is not set to true. It shows an example of overriding a default entry with a custom one based on matching file paths.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/source/entries.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig({\n  source: {\n    entries: {\n      index: './src/home/index.ts',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Adding Type Declarations for SVG Imports in TypeScript\nDESCRIPTION: This TypeScript code provides type declarations for SVG imports, including both default and named imports, as well as the ?react suffix import.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/static-assets/svg-assets.mdx#2025-04-21_snippet_4\n\nLANGUAGE: ts\nCODE:\n```\ndeclare module '*.svg' {\n  export const ReactComponent: React.FunctionComponent<\n    React.SVGProps<SVGSVGElement>\n  >;\n\n  const content: string;\n  export default content;\n}\n\ndeclare module '*.svg?react' {\n  const ReactComponent: React.FunctionComponent<React.SVGProps<SVGSVGElement>>;\n  export default ReactComponent;\n}\n```\n\n----------------------------------------\n\nTITLE: Using Web Worker Detection in Webpack Config\nDESCRIPTION: Example showing how to use the isWebWorker parameter to detect web worker environment.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/webpack.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    webpack: (config, { isWebWorker }) => {\n      if (isWebWorker) {\n        // ...\n      }\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Customizing CSS Minification with Function Type in Modern.js\nDESCRIPTION: An example of how to customize the CSS minification configuration using a function type, allowing for more complex modifications of the default options.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/minify-css.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n   tools: {\n    minifyCss: options => {\n      options.minimizerOptions = {\n        preset: require.resolve('cssnano-preset-simple'),\n      },\n    }\n  }\n};\n```\n\n----------------------------------------\n\nTITLE: Defining Basic Documentation File Structure in Bash\nDESCRIPTION: Shows the basic file structure layout for documentation using file system routing\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/use-module-doc.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ndocs\n├── foo\n│ └── bar.md\n│ └── index.md\n└── foo.md\n└── index.md\n```\n\n----------------------------------------\n\nTITLE: Setting Global Git Email\nDESCRIPTION: Command to set your email address in the global Git configuration, which is used for commit identification.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/community/contributing-guide.mdx#2025-04-21_snippet_5\n\nLANGUAGE: sh\nCODE:\n```\ngit config --global user.email \"SOME_EMAIL@example.com\"\n```\n\n----------------------------------------\n\nTITLE: Adding Custom CLI Commands in Modern.js Plugin\nDESCRIPTION: This example demonstrates how to use the addCommand API to create custom CLI commands for a Modern.js application. The hook provides access to the commander program object for defining new commands.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/plugin/cli-plugins/api.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\napi.addCommand(({ program }) => {\n  program\n    .command('my-command')\n    .description('我的自定义命令')\n    .action(async () => {\n      // 执行命令逻辑\n      console.log('执行自定义命令...');\n    });\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring CSS Minification with Object Syntax in Modern.js\nDESCRIPTION: An example of configuring CSS minification using an Object, which merges with the default configuration using Object.assign. This example changes the cssnano preset.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/minify-css.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    minifyCss: {\n      minimizerOptions: {\n        preset: require.resolve('cssnano-preset-simple'),\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Importing useContext from Modern.js Runtime\nDESCRIPTION: Shows how to import the useContext function from the appropriate namespace in the Modern.js runtime based on the framework extension plugin being used.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/bff/use-context.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useContext } from '@modern-js/runtime/{namespace}';\n```\n\n----------------------------------------\n\nTITLE: CSS No-Inlining Example\nDESCRIPTION: Demonstration of preventing asset inlining in CSS files using the url query parameter\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/page-performance/inline-assets.mdx#2025-04-21_snippet_4\n\nLANGUAGE: css\nCODE:\n```\n.foo {\n  background-image: url('. /icon.png?url');\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Dynamic Route Parameters in Action Function\nDESCRIPTION: Illustrates how to access dynamic route parameters in a Data Action function, useful for operations on specific resources identified by URL parameters.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/data/data-write.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { ActionFunctionArgs } from '@modern-js/runtime/router';\n\n// 访问 /user/123 时，函数的参数为 `{ params: { id: '123' } }`\nexport const action = async ({ params }: ActionFunctionArgs) => {\n  const { id } = params;\n  const res = await fetch(`https://api/user/${id}`);\n  return res.json();\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling Composite in lib's tsconfig.json\nDESCRIPTION: Demonstrates how to enable the composite option in the lib project's tsconfig.json for project references.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/source-build.mdx#2025-04-21_snippet_6\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"compilerOptions\": {\n    \"composite\": true\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom Public Routes in Modern.js with TypeScript\nDESCRIPTION: This snippet demonstrates how to customize server-side routes for files in the config/public/ directory using the server.publicRoutes configuration option. It shows two examples: mapping a JSON file to a longer path and setting a route without a file extension.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/server/public-routes.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  server: {\n    publicRoutes: {\n      // 设置一个长路由\n      'index.json': '/user-config/card-info/extra/help.json',\n\n      // 设置一个不带后缀的路由\n      'robot.txt': '/app/authentication',\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Cache Configuration with Pattern Matching Rules\nDESCRIPTION: Complex example demonstrating how to use the matches property to rewrite cache identifiers based on regular expression patterns, separating test and production caching.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/ssr/pre-render.mdx#2025-04-21_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\n/* rewrite the channel value starting with test_ in the query as \"testChannel\", otherwise rewrite it as \"otherChannel\" */\n<PreRender interval={10} level={2} includes={{\n  query: [\"channel\"],\n  header: [\"language\"]\n}} matches={{\n  query: {\n    channel: {\n      \"testChannel\", \"^test_\",\n      \"otherChannel\", \".*\"\n    }\n  }\n}} />\n```\n\n----------------------------------------\n\nTITLE: Enabling HTTPS with Manual Certificate Configuration\nDESCRIPTION: Configuration example showing how to enable HTTPS in Modern.js by manually providing certificate and private key files. This approach gives more control over the certificates used.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/dev/https.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport fs from 'fs';\n\nexport default {\n  dev: {\n    https: {\n      key: fs.readFileSync('certificates/private.pem'),\n      cert: fs.readFileSync('certificates/public.pem'),\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring npm Plugins in Modern.js Module (JavaScript)\nDESCRIPTION: This snippet demonstrates how to import and use a plugin from npm in a Modern.js Module configuration file. It requires installing the plugin package and importing it in the config file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/plugins.md#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { myPlugin } from 'my-plugin';\n\nexport default defineConfig({\n  plugins: [myPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Default CSS Modules Configuration\nDESCRIPTION: Default configuration values for CSS Modules settings. Sets auto to true, namedExport to false, exportGlobals to false, and exportLocalsConvention to camelCase.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/css-modules.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst defaultCssModules = {\n  auto: true,\n  namedExport: false,\n  exportGlobals: false,\n  exportLocalsConvention: 'camelCase',\n};\n```\n\n----------------------------------------\n\nTITLE: Using 'modern serve' Command in Bash\nDESCRIPTION: Demonstrates the usage and options for the 'modern serve' command in Modern.js projects. It shows the command syntax and available options including specifying a config file, showing help, and running API-only service.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/serve-command.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nUsage: modern serve [options]\n\nOptions:\n  -c --config <config>  specify the configuration file, which can be a relative or absolute path\n  -h, --help            show command help\n  --api-only            only run API service\n```\n\n----------------------------------------\n\nTITLE: Configuring package.json for npm-component Preset\nDESCRIPTION: The package.json configuration for component libraries using the npm-component preset, which uses bundleless output for better tree shaking.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-preset.mdx#2025-04-21_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"main\": \"./dist/lib/index.js\", // bundleless type\n    \"module\": \"./dist/es/index.js\", // bundleless type\n    \"types\": \"./dist/types/index.d.ts\"\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Async Entry in Modern.js\nDESCRIPTION: TypeScript configuration to enable asynchronous entry points in Modern.js for Module Federation support.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/enable-async-entry.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  source: {\n    enableAsyncEntry: true,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Setting externals in Modern.js Module Bundle Mode\nDESCRIPTION: Excludes specified dependencies from being bundled in the final output. This is useful for dependencies that should be provided by the consuming application instead.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_21\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    // 避免打包 React\n    externals: ['react'],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using onAfterDev Hook in Modern.js\nDESCRIPTION: This hook runs after the development server has started successfully. It can be used for reporting development-related information or performing post-start operations.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/cli-plugins/api.mdx#2025-04-21_snippet_24\n\nLANGUAGE: typescript\nCODE:\n```\napi.onAfterDev(()=>{\n    // Report dev related information\n})\n```\n\n----------------------------------------\n\nTITLE: Disabling Build Failure on Type Errors\nDESCRIPTION: Configures the build to continue despite TypeScript errors, which can be useful for progressive type adoption.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_14\n\nLANGUAGE: JavaScript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    dts: {\n      abortOnError: false,\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Esbuild in Modern.js Framework\nDESCRIPTION: Example configuration for the Esbuild plugin in Modern.js framework, showing how to set targets for both loader and minimize options.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/official/rsbuild-plugins/plugin-esbuild.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  tools: {\n    esbuild: {\n      loader: {\n        target: 'chrome61',\n      },\n      minimize: {\n        target: 'chrome61',\n      },\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Modifying @babel/preset-env Options in Modern.js (JavaScript)\nDESCRIPTION: Demonstrates how to modify @babel/preset-env options using the modifyPresetEnvOptions utility function. This example sets the targets option.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/babel.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    babel(config, { modifyPresetEnvOptions }) {\n      modifyPresetEnvOptions({\n        targets: \"last 2 versions\",\n      });\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining Custom Entries in Modern.js Configuration\nDESCRIPTION: This snippet demonstrates how to configure custom page entries using the source.entries option in the Modern.js configuration file. It shows how to specify a new entry with a custom name and path, and how to disable default entry scanning.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/source/entries.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig({\n  source: {\n    entries: {\n      // 指定一个名称为 'my-entry' 的新入口\n      'my-entry': './src/home/test/index.ts',\n    },\n    // 禁用默认入口扫描\n    disableDefaultEntries: true,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Defining Output Filename Types in TypeScript\nDESCRIPTION: TypeScript type definition for the filename configuration object that specifies patterns for different asset types including HTML, JS, CSS, SVG, fonts, images, and other media files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/filename.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype FilenameConfig = {\n  html?: string;\n  js?:\n    | string\n    | ((pathData: Rspack.PathData, assetInfo: Rspack.JsAssetInfo) => string);\n  css?: string;\n  svg?: string;\n  font?: string;\n  image?: string;\n  media?: string;\n  assets?: string;\n};\n```\n\n----------------------------------------\n\nTITLE: Default Configuration for webpack-bundle-analyzer in Modern.js\nDESCRIPTION: This snippet shows the default configuration object used when enabling the webpack-bundle-analyzer plugin in Modern.js. It sets the analyzer mode to static, disables automatic opening, and specifies a filename pattern for the report.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/performance/bundle-analyze.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultConfig = {\n  analyzerMode: 'static',\n  openAnalyzer: false,\n  // Distinguish by target names, such as `web`, `node`, etc.\n  reportFilename: `report-${target}.html`,\n};\n```\n\n----------------------------------------\n\nTITLE: Installing and Registering Proxy Plugin in Modern.js\nDESCRIPTION: Shows how to register the @modern-js/plugin-proxy plugin in the Modern.js configuration file\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/components/global-proxy-config.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { appTools, defineConfig } from '@modern-js/app-tools';\nimport { proxyPlugin } from '@modern-js/plugin-proxy';\n\nexport default defineConfig({\n  plugins: [appTools(), proxyPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Project Header HTML with Logo\nDESCRIPTION: HTML markup for displaying the Modern.js logo and project title centrally aligned on the page, including the framework's tagline.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/generator/generators/entry-generator/README.md#2025-04-21_snippet_0\n\nLANGUAGE: HTML\nCODE:\n```\n<p align=\"center\">\n  <a href=\"https://modernjs.dev\" target=\"blank\"><img src=\"https://lf3-static.bytednsdoc.com/obj/eden-cn/ylaelkeh7nuhfnuhf/modernjs-cover.png\" width=\"300\" alt=\"Modern.js Logo\" /></a>\n</p>\n\n<h1 align=\"center\">Modern.js</h1>\n\n<p align=\"center\">\n  A Progressive React Framework for modern web development.\n</p>\n```\n\n----------------------------------------\n\nTITLE: Enabling Syntax Checking in Modern.js Configuration\nDESCRIPTION: Shows how to enable syntax checking by setting the checkSyntax option to true in the Modern.js configuration file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/security/check-syntax.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  security: {\n    checkSyntax: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining Effects Configuration Type in Markdown\nDESCRIPTION: Specifies the type and default value for the effects configuration option. It enables the side effect management feature when set to true.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/runtime/state.mdx#2025-04-21_snippet_4\n\nLANGUAGE: markdown\nCODE:\n```\n- **Type:** `boolean`\n- **Default:** `true`\n```\n\n----------------------------------------\n\nTITLE: Function Signature for createStore API in TypeScript\nDESCRIPTION: Defines the TypeScript interface for the createStore function, including the StoreConfig interface that specifies configuration options and the ReduckStore interface that extends Redux Store with additional Reduck methods.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/model/create-store.mdx#2025-04-21_snippet_0\n\nLANGUAGE: ts\nCODE:\n```\ninterface StoreConfig {\n  initialState?: Record<string, any>;\n  middlewares?: Middleware[];\n  models?: Model[];\n  plugins?: Plugin[];\n  enhancers?: StoreEnhancer[];\n}\n\ninterface ReduckStore extends ReduxStore {\n  use: typeof useModel;\n  unmount: (model: Model) => void;\n}\n\nfunction createStore(config: StoreConfig): ReduckStore;\n```\n\n----------------------------------------\n\nTITLE: Conventional Routing Entry Configuration\nDESCRIPTION: Configuration example for enabling conventional routing with a custom entry by setting the entry to a directory path.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/entries.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig({\n  source: {\n    entries: {\n      // enable conventional routing\n      entry_spa: {\n        // The entry path of conventional routing must be set to a directory\n        entry: './src/about',\n      },\n    },\n    // Disable default entry scanning\n    disableDefaultEntries: true,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Asynchronous Setup in TypeScript\nDESCRIPTION: Shows how to create an asynchronous setup function in a Modern.js Module plugin to perform asynchronous operations during initialization.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/guide/setup-function.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport const myPlugin = (): CliPlugin<ModuleTools> => ({\n  name: 'my-plugin',\n\n  async setup(api) {\n    await doSomething();\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Type Definition for RuntimeContext in Modern.js\nDESCRIPTION: Type definition for the RuntimeContext object returned by useRuntimeContext showing the context property that provides access to request context.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/core/use-runtime-context.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ntype RuntimeContext = {\n  context: RequestContext;\n};\n```\n\n----------------------------------------\n\nTITLE: Flattening Output Directory Structure in Modern.js\nDESCRIPTION: Illustrates how to flatten the output directory structure by setting directory paths to empty strings and disabling HTML folders.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/output-files.mdx#2025-04-21_snippet_3\n\nLANGUAGE: ts\nCODE:\n```\nexport default {\n  output: {\n    distPath: {\n      js: '',\n      css: '',\n      html: '',\n    },\n  },\n  html: {\n    disableHtmlFolder: true,\n  }\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Webpack Resolve Alias in Modern.js (Object Type)\nDESCRIPTION: This snippet demonstrates how to add a resolve.alias configuration to webpack using the object type of tools.webpack. It sets up an alias for the '@util' path.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/webpack.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    webpack: {\n      resolve: {\n        alias: {\n          '@util': 'src/util',\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using Tailwind CSS Utility Classes in React Component\nDESCRIPTION: Example of using Tailwind CSS utility classes in a React component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/best-practices/use-tailwindcss.mdx#2025-04-21_snippet_4\n\nLANGUAGE: jsx\nCODE:\n```\nconst Hello = () => (\n  <div className=\"h-12 w-48\">\n    <p className=\"text-xl font-medium text-black\">hello world</p>\n  </div>\n);\n```\n\n----------------------------------------\n\nTITLE: Transforming SVG to React Component with ?react Suffix\nDESCRIPTION: This code shows how to import an SVG file and transform it into a React component using the ?react suffix in the import path.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/static-assets/svg-assets.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport Logo from './logo.svg?react';\n\nexport default () => <Logo />;\n```\n\n----------------------------------------\n\nTITLE: Configuring External Dependencies for UMD Build\nDESCRIPTION: Configuration to specify external dependencies for a UMD build, preventing React from being bundled into the artifact.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/build-umd.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    format: 'umd',\n    autoExternal: false,\n    externals: ['react'],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: 配置 Polyfill 插件 - Modern.js TypeScript 配置\nDESCRIPTION: 在 modern.config.ts 中注册 Polyfill 插件，启用基于 UA 的 Polyfill 功能。\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/components/ua-polyfill.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { polyfillPlugin } from '@modern-js/plugin-polyfill';\n\nexport default defineConfig({\n  plugins: [..., polyfillPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Esbuild Minimize Options\nDESCRIPTION: Example of how to configure Esbuild minimize options, specifically setting the target environment to Chrome 61 for code minification.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/plugin/official/rsbuild-plugins/plugin-esbuild.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nbuilderPluginEsbuild({\n  minimize: {\n    target: 'chrome61',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Debug Tool Plugin in TypeScript\nDESCRIPTION: Demonstrates how to create a basic debugging tool plugin for Modern.js Module that performs no action. Shows the plugin structure with name definition, menu items, and subcommands implementation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/in-depth-about-dev-command.md#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport const myPlugin = (): CliPlugin<ModuleTools> => ({\n  name: 'do-nothing',\n  setup() {\n    return {\n      registerDev() {\n        return {\n          // Debugging tool name\n          name: 'do-nothing',\n          // Menu display content\n          menuItem: {\n            name: 'DoNothing',\n            value: 'do-nothing',\n          },\n          // The defined dev subcommand\n          subCommands: ['donothing', 'dn'],\n          async action() {\n            // dev logic\n            console.info('Run build --watch, and do nothing.');\n          },\n        };\n      },\n    };\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Installing Dependencies with pnpm\nDESCRIPTION: Command to install all project dependencies using pnpm package manager, which will also create symlinks between packages in the monorepo and build all packages.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/community/contributing-guide.mdx#2025-04-21_snippet_3\n\nLANGUAGE: sh\nCODE:\n```\npnpm install\n```\n\n----------------------------------------\n\nTITLE: Adding Files to Watch in Development Mode in Modern.js Plugin\nDESCRIPTION: This snippet shows how to use the addWatchFiles API to include additional files in the development mode file watching system. In this example, it monitors the .env file in the project root directory.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/plugin/cli-plugins/api.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\napi.addWatchFiles(() => {\n  // 监听项目根目录下的 .env 文件\n  return [path.resolve(api.getAppContext().appDirectory, '.env')];\n});\n```\n\n----------------------------------------\n\nTITLE: Setting Different Ports for Development and Production in Modern.js\nDESCRIPTION: This snippet shows how to configure different port numbers for development and production environments in Modern.js. The dev.port (3001) will be used in development, while server.port (3002) will be used in production.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/server/port.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  dev: {\n    port: 3001,\n  },\n  server: {\n    port: 3002,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using useNavigate Hook in React Component\nDESCRIPTION: Example of using the useNavigate hook in a React component to handle navigation on button click.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/router/router.mdx#2025-04-21_snippet_1\n\nLANGUAGE: TSX\nCODE:\n```\nimport { useNavigate } from '@modern-js/runtime/router';\n\nexport function HomeButton() {\n  let navigate = useNavigate();\n\n  function handleClick() {\n    navigate('/home');\n  }\n\n  return (\n    <button type=\"button\" onClick={handleClick}>\n      Go home\n    </button>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Defining TransformImport Type in TypeScript\nDESCRIPTION: TypeScript type definition for the transformImport configuration option, specifying the structure and possible values it can take.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/transform-import.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype TransformImport =\n  | false\n  | Array<{\n      libraryName: string;\n      libraryDirectory?: string;\n      style?: string | boolean;\n      styleLibraryDirectory?: string;\n      camelToDashComponentName?: boolean;\n      transformToDefaultImport?: boolean;\n      customName?: string;\n      customStyleName?: string;\n    }>\n  | Function;\n```\n\n----------------------------------------\n\nTITLE: Creating Runtime Configuration File\nDESCRIPTION: Command to create the modern.runtime.ts file in the src directory\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/runtime/0-intro.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ntouch src/modern.runtime.ts\n```\n\n----------------------------------------\n\nTITLE: Forced Asset Inlining with React Component\nDESCRIPTION: Example of forcing an image asset to be inlined using the inline query parameter in a React component\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/page-performance/inline-assets.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport React from 'react';\nimport img from '. /foo.png?inline';\n\nexport default function Foo() {\n  return <img src={img} />;\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Project References in app's tsconfig.json\nDESCRIPTION: Shows how to set up project references in the app's tsconfig.json file to point to the lib sub-project.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/source-build.mdx#2025-04-21_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"references\": [\n    {\n      \"path\": \"../lib\"\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Development Server Output with BaseUrl\nDESCRIPTION: Shows the development server output displaying how the configured base URL prefix is applied to both local and network access URLs when running the application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/server/base-url.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n  > Local:    http://localhost:8080/base/\n  > Network:  http://192.168.0.1:8080/base/\n```\n\n----------------------------------------\n\nTITLE: Object-based Entry Configuration\nDESCRIPTION: Example of using object configuration to specify entry points with additional options like disableMount.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/entries.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig({\n  source: {\n    entries: {\n      'my-entry': {\n        // entry file path\n        entry: './src/my-page/index.tsx',\n        disableMount: true,\n      },\n    },\n    // Disable default entry scanning\n    disableDefaultEntries: true,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Data URI Limits in Modern.js\nDESCRIPTION: Configuration example showing how to modify inlining thresholds for different asset types using output.dataUriLimit\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/page-performance/inline-assets.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    dataUriLimit: {\n      image: 5000,\n      media: 0,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Checking for Modern.js App Framework Dependencies\nDESCRIPTION: Function that checks if the project uses Modern.js App Framework by examining the package.json for specific dependencies. It helps determine the configuration approach needed.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/components/faq-storybook.mdx#2025-04-21_snippet_3\n\nLANGUAGE: TypeScript\nCODE:\n```\nexport const isUsingAppFramework = () => {\n  try {\n    const packageJsonPath = require.resolve('@modern-js/app/package.json', {\n      paths: [process.cwd()],\n    });\n    // eslint-disable-next-line import/no-dynamic-require\n    const packageJson = require(packageJsonPath);\n    const deps = {\n      ...packageJson.dependencies,\n      ...packageJson.devDependencies,\n    };\n    return Boolean(deps['@modern-js/app-tools']);\n  } catch (e) {\n    return false;\n  }\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling Pug Template Engine with Boolean Value in Modern.js\nDESCRIPTION: Sets tools.pug to true to enable the Pug template engine in Modern.js. After enabling, you can use index.pug as a template file in html.template.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/pug.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    pug: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling Type Declaration Generation in Modern.js Module\nDESCRIPTION: Configuration example demonstrating how to turn off type declaration file generation which can improve build speed.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/in-depth-about-build.md#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport { defineConfig } from '@modern-js/module-tools';\n\nexport default defineConfig({\n  buildConfig: {\n    dts: false,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Registering State Plugin in Modern.js Configuration\nDESCRIPTION: TypeScript configuration that registers the state plugin in the Modern.js application configuration file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/components/reduck-notify.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@modern-js/app-tools';\nimport { statePlugin } from '@modern-js/plugin-state';\n\nexport default defineConfig({\n  ...,\n  plugins: [\n    ...,\n    statePlugin(),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring package.json for npm-component-with-umd Preset\nDESCRIPTION: The package.json configuration for component libraries using the npm-component-with-umd preset, which adds UMD bundle support to bundleless outputs.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-preset.mdx#2025-04-21_snippet_6\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"main\": \"./dist/lib/index.js\", // bundleless type\n    \"module\": \"./dist/es/index.js\", // bundleless type\n    \"types\": \"./dist/types/index.d.ts\",\n    \"unpkg\": \"./dist/umd/index.js\"\n}\n```\n\n----------------------------------------\n\nTITLE: Using HtmlWebpackPlugin in webpackChain\nDESCRIPTION: Example demonstrating how to access the HtmlWebpackPlugin instance within the webpackChain function for HTML-related configurations.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/webpack-chain.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    webpackChain: (chain, { HtmlWebpackPlugin }) => {\n      console.log(HtmlWebpackPlugin);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Runtime Plugins in Modern.js\nDESCRIPTION: Example of how to configure runtime plugins in Modern.js using the 'plugins' field in src/modern.runtime.ts. This snippet demonstrates adding the router plugin to the runtime configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/introduction.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineRuntimeConfig } from '@modern-js/runtime';\nimport { routerPlugin } from '@modern-js/runtime/router';\n\nexport default defineRuntimeConfig({\n  plugins: [routerPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring File Copy During Build\nDESCRIPTION: Sets up copying of static assets from source to destination directory during the build process.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_10\n\nLANGUAGE: JavaScript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    copy: {\n      patterns: [{ from: './src/assets', to: '' }],\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: 配置打包类型文件和自定义 tsconfig\nDESCRIPTION: 这个示例展示了如何在 Modern.js Module 中配置打包类型文件并使用自定义的 tsconfig 文件。通过设置 dts 的相关选项,可以指定 tsconfig 路径和输出目录。\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/advance/in-depth-about-build.md#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nimport { defineConfig } from '@modern-js/module-tools';\n\nexport default defineConfig({\n  buildConfig: {\n    buildType: 'bundle',\n    dts: {\n      tsconfigPath: './other-tsconfig.json',\n      distPath: './types',\n    },\n    outDir: './dist',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Polyfill Usage\nDESCRIPTION: Configuration to enable on-demand polyfill injection based on actual usage.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/page-performance/optimize-bundle.mdx#2025-04-21_snippet_6\n\nLANGUAGE: js\nCODE:\n```\nexport default {\n  output: {\n    polyfill: 'usage',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring CLI Plugins in Modern.js\nDESCRIPTION: Example of how to configure CLI plugins in Modern.js using the 'plugins' field in modern.config.ts. This snippet specifically shows how to add the BFF plugin alongside the standard app tools.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/introduction.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// an example for bff\nimport { appTools, defineConfig } from '@modern-js/app-tools';\nimport { bffPlugin } from '@modern-js/plugin-bff';\n\nexport default defineConfig({\n  plugins: [appTools(), bffPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Default Configuration for Ant Design in JavaScript\nDESCRIPTION: Default transformImport configuration for Ant Design library version 4.x and below, automatically applied by Modern.js when the library is installed.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/transform-import.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultAntdConfig = {\n  libraryName: 'antd',\n  libraryDirectory: isServer ? 'lib' : 'es',\n  style: true,\n};\n```\n\n----------------------------------------\n\nTITLE: Default Lightning CSS Loader Configuration in Modern.js\nDESCRIPTION: Shows the default configuration applied when Lightning CSS loader is enabled. It uses the current browserslist configuration for targets and enables minification in production mode when output.injectStyles is true.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/lightningcss-loader.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultOptions = {\n  // use current browserslist config\n  targets: browserslist,\n  // minify is enabled when output.injectStyles is true and in production mode\n  minify: config.mode === 'production' && config.output.injectStyles,\n};\n```\n\n----------------------------------------\n\nTITLE: Default Lightning CSS Loader Configuration\nDESCRIPTION: Shows the default configuration options for Lightning CSS loader, including browserslist targets and minification settings based on production mode and injectStyles option.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/lightningcss-loader.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultOptions = {\n  // use current browserslist config\n  targets: browserslist,\n  // minify is enabled when output.injectStyles is true and in production mode\n  minify: config.mode === 'production' && config.output.injectStyles,\n};\n```\n\n----------------------------------------\n\nTITLE: Running Vitest Tests in Command Line\nDESCRIPTION: This snippet shows the output of running Vitest tests in the command line. It displays the test results, including the number of passed tests and execution time.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/testing/vitest.mdx#2025-04-21_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\n✓ src/__tests__/page.test.tsx (1)\n  ✓ Page\n\nTest Files  1 passed (1)\n    Tests  1 passed (1)\n  Start at  15:37:12\n  Duration  999ms (transform 119ms, setup 0ms, collect 365ms, tests 33ms, environment 421ms, prepare 44ms)\n\n\nPASS  Waiting for file changes...\n```\n\n----------------------------------------\n\nTITLE: Type Definition for HTML Inject Configuration\nDESCRIPTION: Type definition showing the possible values for the html.inject configuration option. It can be set to 'head', 'body', a boolean value, or a custom function. The default value is 'head'.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/html/inject.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n'head' | 'body' | boolean | Function\n```\n\n----------------------------------------\n\nTITLE: Setting Target Environment for Esbuild Loader\nDESCRIPTION: Code snippet showing how to configure the target environment for Esbuild transformation using the loader option.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/official/rsbuild-plugins/plugin-esbuild.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nbuilderPluginEsbuild({\n  loader: {\n    target: 'chrome61',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Importing styled from Modern.js runtime\nDESCRIPTION: This snippet shows how to import the styled function from the Modern.js runtime, which is used to create styled components.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/utility/css-in-js.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport styled from '@modern-js/runtime/styled';\n```\n\n----------------------------------------\n\nTITLE: Example Error Log from Syntax Checking\nDESCRIPTION: Demonstrates the format of error logs produced when incompatible syntax is detected, including source file, output location, error reason, and relevant code snippet.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/security/check-syntax.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nerror   [Syntax Checker] Find some syntax errors after production build:\n\n  Error 1\n  source:  /node_modules/foo/index.js:1:0\n  output:  /dist/static/js/main.3f7a4d7e.js:2:39400\n  reason:  Unexpected token (1:178)\n  code:\n     9 |\n    10 | var b = 2;\n    11 |\n  > 12 | console.log(() => {\n    13 |   return a + b;\n    14 | });\n    15 |\n```\n\n----------------------------------------\n\nTITLE: Configuring Rsbuild Plugins with Custom Options in Modern.js\nDESCRIPTION: Example demonstrating how to pass custom configuration options to a Rsbuild plugin when registering it in Modern.js. The configuration options are passed as an object to the plugin function.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/builder-plugins.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { myRsbuildPlugin } from 'my-rsbuild-plugin';\n\nexport default defineConfig({\n  builderPlugins: [\n    myRsbuildPlugin({\n      foo: 1,\n      bar: 2,\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Importing createRoot from Modern.js Runtime\nDESCRIPTION: Shows how to import the createRoot function from the Modern.js Runtime React module.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/core/create-root.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRoot } from '@modern-js/runtime/react';\n```\n\n----------------------------------------\n\nTITLE: Default AssetsRetry Options in TypeScript\nDESCRIPTION: This TypeScript code defines the default options for the assetsRetry feature, including the types of assets to retry, maximum retry attempts, and callback functions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/output/assets-retry.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport const defaultAssetsRetryOptions: AssetsRetryOptions = {\n  type: ['script', 'link', 'img'],\n  domain: [],\n  max: 3,\n  test: '',\n  crossOrigin: false,\n  onRetry: () => {},\n  onSuccess: () => {},\n  onFail: () => {},\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling Custom Entry in Modern.js Configuration\nDESCRIPTION: Configures the Modern.js project to use custom entry points by setting the source.enableCustomEntry option to true in the configuration file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/source/enable-custom-entry.mdx#2025-04-21_snippet_0\n\nLANGUAGE: ts\nCODE:\n```\nexport default defineConfig({\n  source: {\n    enableCustomEntry: true,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Example Error Log from Syntax Checking\nDESCRIPTION: Example error log output from the syntax checker showing incompatible syntax, including source location, output location, reason, and code snippet.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/security/check-syntax.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nerror   [Syntax Checker] Find some syntax errors after production build:\n\n  Error 1\n  source:  /node_modules/foo/index.js:1:0\n  output:  /dist/static/js/main.3f7a4d7e.js:2:39400\n  reason:  Unexpected token (1:178)\n  code:\n     9 |\n    10 | var b = 2;\n    11 |\n  > 12 | console.log(() => {\n    13 |   return a + b;\n    14 | });\n    15 |\n```\n\n----------------------------------------\n\nTITLE: Build Configuration for npm-component Preset\nDESCRIPTION: The build configuration array for the npm-component preset that generates bundleless CommonJS and ESM outputs to optimize for tree shaking.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-preset.mdx#2025-04-21_snippet_5\n\nLANGUAGE: js\nCODE:\n```\nexport const buildConfig = [\n  {\n    format: 'cjs',\n    target: 'es6',\n    buildType: 'bundleless',\n    outDir: './dist/lib',\n    dts: false,\n  },\n  {\n    format: 'esm',\n    target: 'es6',\n    buildType: 'bundleless',\n    outDir: './dist/es',\n    dts: false,\n  },\n  {\n    buildType: 'bundleless',\n    outDir: './dist/types',\n    dts: {\n      only: true,\n    },\n  },\n];\n```\n\n----------------------------------------\n\nTITLE: Using Modern Serve Command in Bash\nDESCRIPTION: CLI command usage for 'modern serve' with available options. The command starts Modern.js projects in production environment and can be used to preview built artifacts locally. Note that you need to run the 'build' command first to generate the artifacts.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/components/serve-command.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nUsage: modern serve [options]\n\nOptions:\n  -c --config <config>  指定配置文件路径，可以为相对路径或绝对路径\n  -h, --help            显示命令帮助\n  --api-only            仅启动 API 接口服务\n```\n\n----------------------------------------\n\nTITLE: Configuring Tailwind CSS via Modern.js Config\nDESCRIPTION: Alternative way to configure Tailwind CSS using Modern.js configuration\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/css/tailwindcss.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    tailwindcss: {\n      content: ['./src/**/*.{js,jsx,ts,tsx}'],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Creating Home Page Component\nDESCRIPTION: React component implementation for the home page with navigation link to About page using Modern.js router.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/testing/cypress.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Link } from '@modern-js/runtime/router';\n\nconst Index = () => (\n  <div>\n    <h1>Home</h1>\n    <Link to=\"/about\">About</Link>\n  </div>\n);\n\nexport default Index;\n```\n\n----------------------------------------\n\nTITLE: Defining resolveMainFields Type in TypeScript\nDESCRIPTION: TypeScript type definition for the resolveMainFields configuration option. It can be an array of strings or string arrays, or an object mapping build targets to such arrays.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/resolve-main-fields.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype Fields = (string | string[])[];\n\ntype ResolveMainFields = Fields | Record<BuilderTarget, Fields>;\n```\n\n----------------------------------------\n\nTITLE: Default Sass Configuration in Modern.js\nDESCRIPTION: The default configuration object for sass-loader in Modern.js, which enables source maps in development environment by default.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/sass.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultOptions = {\n  // 默认在开发环境下启用 CSS 的 Source Map\n  sourceMap: isDev,\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling Esbuild Transformation\nDESCRIPTION: Example showing how to disable Esbuild transformation and continue using Babel for code transformation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/official/rsbuild-plugins/plugin-esbuild.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nbuilderPluginEsbuild({\n  loader: false,\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Tailwind CSS in Modern.js Module\nDESCRIPTION: Example of configuring Tailwind CSS using a tailwind.config.ts file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/best-practices/use-tailwindcss.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { Config } from 'tailwindcss';\n\nexport default {\n  content: ['./src/**/*.{js,jsx,ts,tsx}'],\n} as Config;\n```\n\n----------------------------------------\n\nTITLE: Enabling Optional Features or Adding New Entry in Modern.js App\nDESCRIPTION: This command allows the user to enable optional features or add a new entry to the Modern.js application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/devtools/client/README.md#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\npnpm new\n```\n\n----------------------------------------\n\nTITLE: Default Tailwind CSS Configuration in Modern.js\nDESCRIPTION: Shows the default configuration for Tailwind CSS content paths in Modern.js applications. Defines which files Tailwind CSS should scan for utility classes.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/tailwindcss.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst tailwind = {\n  content: [\n    './src/**/*.{js,jsx,ts,tsx}',\n    './config/html/**/*.{html,ejs,hbs}',\n    './storybook/**/*',\n  ],\n};\n```\n\n----------------------------------------\n\nTITLE: Defining Provider Interface in TypeScript\nDESCRIPTION: TypeScript interface definition for the Provider component props, including store and config parameters\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/model/Provider.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface ProviderProps {\n  store?: ReduckStore;\n  config?: AppConfig;\n}\n```\n\n----------------------------------------\n\nTITLE: Defining SRI Options Type in TypeScript\nDESCRIPTION: Defines the type for SRI configuration options, including hash function names, enabling mode, and hash loading strategy. This type is used to configure the security.sri setting in Modern.js projects.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/security/sri.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype SriOptions = {\n  hashFuncNames?: [string, ...string[]];\n  enabled?: 'auto' | true | false;\n  hashLoading?: 'eager' | 'lazy'; // only support webpack\n};\n```\n\n----------------------------------------\n\nTITLE: Importing Global Proxy Config Component in Markdown\nDESCRIPTION: This code snippet imports a React component named GlobalProxyConfig from a specific path, which is likely used to render detailed proxy configuration information in the documentation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/dev/proxy.mdx#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\nimport GlobalProxyConfig from \"@site-docs-en/components/global-proxy-config\"\n```\n\n----------------------------------------\n\nTITLE: Adding Logic Before Process Exit in Modern.js Plugin\nDESCRIPTION: This snippet shows how to use the onBeforeExit hook to execute cleanup logic before the Modern.js process exits (e.g., when a user presses Ctrl+C). It can be used for tasks like closing database connections or deleting temporary files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/plugin/cli-plugins/api.mdx#2025-04-21_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\napi.onBeforeExit(async () => {\n  // 执行一些清理操作，例如关闭数据库连接、删除临时文件等\n  await cleanupMyResources();\n});\n```\n\n----------------------------------------\n\nTITLE: 配置 bundleless 构建的输入目录\nDESCRIPTION: 这个示例展示了如何在 Modern.js Module 中配置 bundleless 构建模式下的输入目录。通过设置 input 和 sourceDir,可以指定只对 src/runtime 目录的文件进行转换。\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/advance/in-depth-about-build.md#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { defineConfig } from '@modern-js/module-tools';\n\nexport default defineConfig({\n  buildConfig: {\n    input: ['src/runtime'],\n    sourceDir: 'src',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring History API Fallback in Modern.js DevServer\nDESCRIPTION: Example of enabling history API fallback to serve index.html for 404 responses, which is useful for single-page applications. This setting redirects 404s to the application's entry point.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/dev-server.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    devServer: {\n      historyApiFallback: true,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Async Entry Bootstrap Code\nDESCRIPTION: Example of the generated bootstrap.js file that implements the async entry point using dynamic import.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/enable-async-entry.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport('./index.jsx');\n```\n\n----------------------------------------\n\nTITLE: Configuring Response Headers in Modern.js\nDESCRIPTION: Demonstrates how to set custom response headers for specific routes using the resHeaders configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/server/routes.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  server: {\n    routes: {\n      'page-a': {\n        route: ['/a', '/b'],\n        resHeaders: {\n          'x-modern-test': '1',\n        },\n      },\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: 创建基本 React 组件\nDESCRIPTION: 在 src/index.tsx 文件中创建一个简单的 React 组件，作为组件项目的入口点。\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/best-practices/components.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nexport default () => {\n  return <div>hello world</div>;\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Sass Options in Modern.js Module\nDESCRIPTION: This example demonstrates how to configure Sass options in Modern.js Module, including adding additional data to the beginning of Sass files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_37\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  buildConfig: {\n    style: {\n      sass: {\n        additionalData: `$base-color: #c6538c;\n          $border-dark: rgba($base-color, 0.88);`,\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling Source Build Mode in Modern.js Configuration\nDESCRIPTION: Shows how to enable the source build mode by setting the experiments.sourceBuild option to true in the Modern.js configuration file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/source-build.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  experiments: {\n    sourceBuild: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring PostCSS Default Options in Modern.js\nDESCRIPTION: Default configuration for PostCSS in Modern.js projects. It includes several pre-enabled plugins like postcss-nesting, postcss-media-minmax, postcss-flexbugs-fixes, and autoprefixer. Additional plugins for browser compatibility are also included. Source maps are enabled by default in development environments.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/postcss.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultOptions = {\n  postcssOptions: {\n    plugins: [\n      // 以下插件默认启用\n      require('postcss-nesting'),\n      require('postcss-media-minmax'),\n      require('postcss-flexbugs-fixes'),\n      require('autoprefixer')({\n        flexbox: 'no-2009',\n      }),\n      // 以下插件仅在需要兼容低版本浏览器时启用\n      require('postcss-custom-properties'),\n      require('postcss-initial'),\n      require('postcss-page-break'),\n      require('postcss-font-variant'),\n    ],\n    // 默认在开发环境下启用 CSS 的 Source Map\n    sourceMap: isDev,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: SSG Route Configuration Type Definitions in Modern.js\nDESCRIPTION: TypeScript type definitions for SSG configuration options, including route options with URL, parameters, and headers.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/output/ssg.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\ntype SSGRouteOptions =\n  | string\n  | {\n      url: string;\n      params?: Record<string, any>[];\n      headers?: Record<string, any>;\n    };\n\ntype SSGOptions = {\n  preventDefault?: string[];\n  headers?: Record<string, any>;\n  routes?: SSGRouteOptions[];\n};\n```\n\n----------------------------------------\n\nTITLE: Using Function-Based Alias Configuration\nDESCRIPTION: Demonstrates how to modify existing aliases by using a function that receives the preset alias object and modifies it by adding a new mapping.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_1\n\nLANGUAGE: JavaScript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    alias: alias => {\n      alias['@common'] = './src/common';\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Enabling Lazy Compilation for Both Entry and Async Modules\nDESCRIPTION: Configuration to enable lazy compilation for both entry modules and asynchronously imported modules, which delays compilation until the corresponding page is accessed.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/experiments/lazy-compilation.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  experiments: {\n    lazyCompilation: {\n      imports: true,\n      entries: true,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Extracting Module Path from TypeScript Import Declaration\nDESCRIPTION: Function that extracts the module path from an import declaration string. It parses import statements to retrieve the module path for generating proper imports.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/components/faq-storybook.mdx#2025-04-21_snippet_2\n\nLANGUAGE: TypeScript\nCODE:\n```\nexport function getModulePath(importStr: string) {\n  const matchResult = importStr.match(/['\"](.*?)['\"]/);\n  if (matchResult) {\n    return matchResult[1];\n  }\n  return '';\n}\n```\n\n----------------------------------------\n\nTITLE: Custom Sass Version Configuration\nDESCRIPTION: Example of using a specific Sass version instead of the built-in Dart Sass v1 by installing the desired version and setting it through the implementation option.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/sass.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    sass: {\n      implementation: require('sass'),\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Default Configuration for CSS Minification in Modern.js\nDESCRIPTION: The default configuration for CSS minification in Modern.js, using css-minimizer-webpack-plugin with cssnano preset.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/minify-css.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultOptions = {\n  minimizerOptions: {\n    preset: [\n      'default',\n      {\n        mergeLonghand: false,\n      },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom File Loaders in Modern.js Module\nDESCRIPTION: Changes how input files are interpreted by specifying custom loaders. This experimental feature allows treating .js files as JSX content.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_32\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    loader: {\n      '.js': 'jsx',\n    }\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Displaying Modified HTML Output Structure in Modern.js\nDESCRIPTION: Shows the resulting directory structure of HTML files in the 'dist' directory after enabling 'disableHtmlFolder'.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/html/disable-html-folder.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n/dist\n└── html\n    └── main.html\n```\n\n----------------------------------------\n\nTITLE: Defining Template Parameters Type Interface in TypeScript for HTML Templates in Modern.js\nDESCRIPTION: This TypeScript interface defines the default parameters available in HTML templates. It includes properties such as mountId, entryName, assetPrefix, as well as Rspack-related objects like compilation and configuration, and HTML plugin generated tags and files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/html/template-parameters.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype DefaultParameters = {\n  mountId: string; // 对应 html.mountId 配置\n  entryName: string; // 入口名称\n  assetPrefix: string; // 对应 dev.assetPrefix 和 output.assetPrefix 配置\n  compilation: Compilation; // Rspack 的 compilation 对象\n  rspackConfig: Rspack.Configuration; // Rspack 的配置对象\n  // html-rspack-plugin 生成的参数\n  htmlPlugin: {\n    tags: {\n      headTags: HtmlTagObject[];\n      bodyTags: HtmlTagObject[];\n    };\n    files: {\n      publicPath: string;\n      js: Array<string>;\n      css: Array<string>;\n      favicon?: string;\n    };\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Defining Auto Actions Configuration Type in Markdown\nDESCRIPTION: Specifies the type and default value for the autoActions configuration option. It enables the auto-generated actions feature when set to true.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/runtime/state.mdx#2025-04-21_snippet_5\n\nLANGUAGE: markdown\nCODE:\n```\n- **Type:** `boolean`\n- **Default:** `true`\n```\n\n----------------------------------------\n\nTITLE: Directory Structure for Icon Configuration\nDESCRIPTION: Shows the expected file structure for placing the icon file in the config directory of a Modern.js project.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/hooks/config/icon.mdx#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\n./config\n└── icon.png\n```\n\n----------------------------------------\n\nTITLE: Configuring Build Scripts for Monorepo Deployment with Rush\nDESCRIPTION: JSON configuration for package.json to set up build scripts for deploying a monorepo project using Rush.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/deploy.mdx#2025-04-21_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"build:packages\": \"rush rebuild --to-except app\",\n    \"deploy\": \"rushx build:packages && modern deploy\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Locking React Type Definitions to Resolve Type Errors in Modern.js\nDESCRIPTION: JSON configuration example showing how to lock @types/react and @types/react-dom to a specific version (v17) to resolve ReactNode type conflicts in Modern.js projects.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/troubleshooting/dependencies.mdx#2025-04-21_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"@types/react\": \"^17\",\n  \"@types/react-dom\": \"^17\"\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring PostCSS in Modern.js Module\nDESCRIPTION: This snippet shows how to configure PostCSS options in Modern.js Module, including adding custom plugins to the PostCSS processing pipeline.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_38\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    style: {\n      postcss: {\n        plugins: [yourPostCSSPlugin],\n      },\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Creating Project Directory Structure for Modern.js Module Plugin\nDESCRIPTION: Demonstrates the recommended directory structure for a Modern.js Module project with a plugin. It shows the location of the plugin file, source directory, and configuration file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/plugins/guide/getting-started.mdx#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n./\n├── plugins\n│ └── example.ts\n├── src/\n└── modern.config.ts\n```\n\n----------------------------------------\n\nTITLE: Setting Server Port in Modern.js Configuration\nDESCRIPTION: This snippet demonstrates how to set the server port to 3000 in the Modern.js configuration file. It uses the defineConfig function to export the configuration object with the server.port property.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/server/port.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  server: {\n    port: 3000,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Request Headers for SSG\nDESCRIPTION: Configuration for setting custom request headers during SSG rendering for specific routes and entries.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/render/ssg.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  output: {\n    ssg: {\n      headers: {\n        \"x-tt-env\": \"ppe_modernjs\"\n      },\n      routes: [\n        '/',\n        {\n          url: '/about',\n          headers: {\n            \"from\": \"modern-website\"\n          },\n        },\n      ],\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Dynamic Routing Example with routes/ Directory in Modern.js\nDESCRIPTION: Shows how to create dynamic routes using directory names with square brackets, which get converted to URL parameters.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/hooks/src/routes.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n└── routes\n    ├── [id]\n    │   └── page.tsx\n    ├── blog\n    │   └── page.tsx\n    └── page.tsx\n```\n\n----------------------------------------\n\nTITLE: Implementing Model Actions for Contact Archiving\nDESCRIPTION: JavaScript action function that updates a contact's archived status in the state using Immer for immutable state management.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/tutorials/first-app/c06-model.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nconst actions = {\n  archive(draft, payload) {\n    const target = draft.items.find(item => item.email === payload);\n    if (target) {\n      target.archived = true;\n    }\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining useParams Hook in TypeScript\nDESCRIPTION: Declaration of the useParams hook, which returns an object of key/value pairs of route parameters.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/router/router.mdx#2025-04-21_snippet_4\n\nLANGUAGE: TypeScript\nCODE:\n```\ndeclare function useParams<K extends string = string>(): Readonly<Params<K>>;\n```\n\n----------------------------------------\n\nTITLE: Implementing registerBuildPlatform Hook in TypeScript\nDESCRIPTION: Hook for registering platform-specific build tasks. Returns platform identifier and build function.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/plugin-api/plugin-hooks.md#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport const myPlugin = (): CliPlugin<ModuleTools> => ({\n  name: 'my-plugin',\n\n  setup() {\n    return {\n      registerBuildPlatform(): RegisterBuildPlatformResult {\n        // ...\n        return {\n          platform: 'doc',\n          build() {\n            // logic\n          },\n        }, };\n      },\n    };\n  },\n});\n```\n\nLANGUAGE: typescript\nCODE:\n```\nexport interface RegisterBuildPlatformResult {\n  platform: string | string[];\n  build: (\n    currentPlatform: string,\n    context: { isTsProject: boolean },\n  ) => void | Promise<void>;\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Environment-specific Browserslist\nDESCRIPTION: Package.json configuration for setting different browser targets in development and production environments to optimize build performance.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/build-performance.mdx#2025-04-21_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"browserslist\": {\n    \"production\": [\">0.2%\", \"not dead\", \"not op_mini all\"],\n    \"development\": [\n      \"last 1 chrome version\",\n      \"last 1 firefox version\",\n      \"last 1 safari version\"\n    ]\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Triggering Hooks with api.useHookRunners in TypeScript\nDESCRIPTION: Demonstrates how to use the useHookRunners method to obtain hook executors and trigger specific hooks in a Modern.js Module plugin.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/guide/setup-function.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { CliPlugin } from '@modern-js/core';\n\nexport const myPlugin = (): CliPlugin => ({\n  name: 'my-plugin',\n\n  async setup(api) {\n    const hookRunners = api.useHookRunners();\n    // trigger the afterBuild Hook\n    await hookRunners.afterBuild();\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Webpack Using Function Syntax\nDESCRIPTION: Example of configuring webpack using function syntax, allowing direct modification of the webpack config object.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/webpack.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    webpack: config => {\n      config.resolve.alias['@util'] = 'src/util';\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring In-Memory File Storage for Development in Modern.js\nDESCRIPTION: Shows how to configure Modern.js to keep generated files in memory during development instead of writing them to disk, using the 'dev.writeToDisk' setting.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/output-files.mdx#2025-04-21_snippet_4\n\nLANGUAGE: ts\nCODE:\n```\nexport default {\n  dev: {\n    writeToDisk: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Renaming Output Files in Bundle Mode with Modern.js Module\nDESCRIPTION: Uses the object syntax for input configuration to rename output files in bundle mode. The key represents the output filename while the value is the source file path.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_30\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    format: 'esm',\n    input: {\n      'index.esm': './src/index.ts',\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Browserslist for Modern.js in YAML\nDESCRIPTION: This code snippet shows the default .browserslistrc configuration for a new Modern.js project. It specifies the minimum versions of supported browsers, targeting ES6 compatibility.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/compatibility.mdx#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nchrome >= 51\nedge >= 15\nfirefox >= 54\nsafari >= 10\nios_saf >= 10\n```\n\n----------------------------------------\n\nTITLE: Configuring Node Polyfill Plugin with Exclude Option\nDESCRIPTION: This example shows how to configure the Node Polyfill plugin to exclude specific polyfills. In this case, the 'console' polyfill is excluded from being injected.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/plugins/official-list/plugin-node-polyfill.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\nimport { modulePluginNodePolyfill } from '@modern-js/plugin-module-node-polyfill';\n\nexport default defineConfig({\n  plugins: [\n    moduleTools(),\n    modulePluginNodePolyfill({\n      exclude: ['console'],\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Initializing Tailwind CSS in Modern.js Module\nDESCRIPTION: Commands to run in the project root directory to enable Tailwind CSS feature.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/best-practices/use-tailwindcss.mdx#2025-04-21_snippet_0\n\nLANGUAGE: text\nCODE:\n```\n? Please select the operation you want: Enable features\n? Please select the feature name: Enable Tailwind CSS\n```\n\n----------------------------------------\n\nTITLE: Style Loader Configuration Example\nDESCRIPTION: Shows the type definition and default value for the style-loader configuration object.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/style-loader.mdx#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n- **Type:** `Object | Function`\n- **Default:** `{}`\n```\n\n----------------------------------------\n\nTITLE: Configuring Modern.js Module with TypeScript\nDESCRIPTION: Example of a Modern.js Module configuration file using TypeScript. It imports necessary tools, defines plugins, and sets the build preset for an npm library.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/before-getting-started.md#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\n\nexport default defineConfig({\n  plugins: [moduleTools()],\n  buildPreset: 'npm-library',\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Esbuild Loader Options\nDESCRIPTION: Example of how to configure Esbuild loader options, specifically setting the target environment to Chrome 61.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/plugin/official/rsbuild-plugins/plugin-esbuild.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nbuilderPluginEsbuild({\n  loader: {\n    target: 'chrome61',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Enabling JS File Inlining in Modern.js\nDESCRIPTION: This configuration enables inlining of JavaScript files into HTML files in Modern.js using the output.enableInlineScripts option.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/page-performance/inline-assets.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    enableInlineScripts: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: PlainObject Actions in Reduck - TSX\nDESCRIPTION: Demonstrates how Reduck generates setter actions for plain objects based on property names. Each property gets a corresponding setX action in camelCase format.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/model/auto-actions.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nconst fooModel = model('foo').define({\n  state: {\n    a: 1,\n    b: { value: 1 },\n    c: 'c',\n  },\n});\n\nfunction App() {\n  const [state, actions] = useModel(fooModel);\n\n  useEffect(() => {\n    actions.setA(2);\n    actions.setB({ value: 2 });\n    actions.setC('d');\n  }, []);\n\n  return (\n    <div>\n      <div>State: {state}</div>\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Specifying Output Directory in Modern.js\nDESCRIPTION: Shows how to configure the output directory for the build process.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_30\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    outDir: './dist/esm',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Code Minification in Modern.js\nDESCRIPTION: Demonstrates how to configure code minification using Terser with custom options like dropping console statements.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_29\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  buildConfig: {\n    minify: {\n      compress: {\n        drop_console: true,\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Importing SVG as React Component\nDESCRIPTION: Shows how to import and use SVG files as React components when the SVGR feature is enabled in the configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\n// true\nimport Logo from './logo.svg';\n\nexport default () => <Logo />;\n```\n\n----------------------------------------\n\nTITLE: Invalid Import Example Outside Module Scope\nDESCRIPTION: Demonstrates an import statement that would trigger an error when moduleScopes is configured to only allow imports from './src'. This import attempts to access a module outside the allowed scope.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/source/module-scopes.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport a from '../utils/a';\n```\n\n----------------------------------------\n\nTITLE: Configuring resolveExtensionPrefix in Modern.js\nDESCRIPTION: Sets a prefix for file extensions during resolution. This affects how Modern.js resolves files when multiple files share the same name but have different extensions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/resolve-extension-prefix.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  source: {\n    resolveExtensionPrefix: '.web',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Registering Tailwind Plugin in Modern.js Config\nDESCRIPTION: Configuration to register the Tailwind CSS plugin in Modern.js project setup\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/css/tailwindcss.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { tailwindcssPlugin } from '@modern-js/plugin-tailwindcss';\n\nexport default defineConfig({\n  plugins: [..., tailwindcssPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Registering the server plugin in Modern.js configuration\nDESCRIPTION: Code snippet showing how to register the @modern-js/plugin-server plugin in the Modern.js configuration file to enable custom Web Server functionality.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/web-server.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { serverPlugin } from '@modern-js/plugin-server';\n\nexport default defineConfig({\n  plugins: [..., serverPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Tailwind CSS Using Modern.js Config\nDESCRIPTION: Alternative way to configure Tailwind CSS using the style.tailwindcss option in modern.config.ts.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/best-practices/use-tailwindcss.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    tailwindcss: {\n      content: ['./src/**/*.{js,jsx,ts,tsx}'],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Source Field in Package.json for Source Build\nDESCRIPTION: Shows how to configure the source field in a library's package.json to enable source build mode, pointing to the source file path.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/source-build.mdx#2025-04-21_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"name\": \"lib\",\n  \"main\": \"./dist/index.js\",\n  \"source\": \"./src/index.ts\"\n}\n```\n\n----------------------------------------\n\nTITLE: Internal Plugin List in Modern.js (JavaScript)\nDESCRIPTION: This snippet illustrates the internal list of official plugins maintained by Modern.js. These plugins are candidates for auto-loading when autoLoadPlugins is enabled.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/auto-load-plugin.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst InternalPlugins = ['@modern-js/app-tools', '@modern-js/plugin-tailwindcss', ...];\n```\n\n----------------------------------------\n\nTITLE: Rewrite Implementation Example\nDESCRIPTION: Example showing how to implement page rewriting based on user agent using AfterMatch hook\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/web-server/hook.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { AfterMatch } from '@modern-js/runtime/server';\n\nexport const afterMatch: AfterMatch = async (ctx, next) => {\n  ctx.router.rewrite('mobile');\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Babel sourceType for CommonJS modules\nDESCRIPTION: Configuration to set Babel's sourceType to 'unambiguous' to fix 'exports is not defined' errors when CommonJS modules are compiled by Babel.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/troubleshooting/builder.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    babel(config) {\n      config.sourceType = 'unambiguous';\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Input with File Filtering in Bundleless Mode\nDESCRIPTION: Shows how to use file filtering in bundleless mode to exclude specific files from the build process.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_24\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    buildType: 'bundleless',\n    input: ['src', '!src/*.spec.ts'],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring NPM Rsbuild Plugin in Modern.js\nDESCRIPTION: Example showing how to import and configure a Rsbuild plugin from an NPM package in a Modern.js application's configuration file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/builder-plugins.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport myRsbuildPlugin from 'my-rsbuild-plugin';\n\nexport default defineConfig({\n  builderPlugins: [myRsbuildPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of PreRender in a React Component\nDESCRIPTION: This example demonstrates how to use the PreRender component in a React application with a simple interval setting of 10 seconds.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/ssr/pre-render.mdx#2025-04-21_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { PreRender } from '@modern-js/runtime/ssr';\n\nexport default function App() {\n  return (\n    <>\n      <PreRender interval={10} />\n      <div>Hello Modern</div>\n    </>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Public Page Component in Modern.js\nDESCRIPTION: A basic React component representing a public page that doesn't require authentication. It includes a Helmet component for setting the page's favicon.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/examples/csr-auth.mdx#2025-04-21_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Helmet } from '@modern-js/runtime/head';\nimport './index.css';\n\nconst PublicPage = (): JSX.Element => (\n  <div className=\"container-box\">\n    <Helmet>\n      <link\n        rel=\"icon\"\n        type=\"image/x-icon\"\n        href=\"https://lf3-static.bytednsdoc.com/obj/eden-cn/uhbfnupenuhf/favicon.ico\"\n      />\n    </Helmet>\n    <h3>Public</h3>\n  </div>\n);\n\nexport default PublicPage;\n\n```\n\n----------------------------------------\n\nTITLE: Configuring Node Polyfill in Modern.js\nDESCRIPTION: Example configuration to enable Node.js polyfill injection in a Modern.js project. Setting disableNodePolyfill to false will include Node.js polyfills in the bundle, which may increase bundle size but enables Node.js module compatibility.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/disable-node-polyfill.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  output: {\n    disableNodePolyfill: false,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Enabling Auto-Loading of Plugins in Modern.js (TypeScript)\nDESCRIPTION: This code snippet shows how to enable automatic plugin registration in Modern.js by setting the autoLoadPlugins configuration option to true in the configuration file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/auto-load-plugin.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig({\n  autoLoadPlugins: true,\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Import Plugin with Custom Options (TypeScript)\nDESCRIPTION: This example shows how to configure the import plugin with custom options, including library name and style settings. It demonstrates the structure of the pluginImport configuration array.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/official-list/plugin-import.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { modulePluginImport } from '@modern-js/plugin-module-import';\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\n\nexport default defineConfig({\n  plugins: [\n    moduleTools(),\n    modulePluginImport({\n      pluginImport: [\n        // babel-plugin-import`s options config\n        {\n          libraryName: 'foo',\n          style: true,\n        },\n      ],\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Generated Meta Tag for Default Pages\nDESCRIPTION: The resulting HTML meta tag output for all other pages that don't have specific entry configurations.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/html/meta-by-entries.mdx#2025-04-21_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<meta name=\"description\" content=\"ByteDance\" />\n```\n\n----------------------------------------\n\nTITLE: Default Autoprefixer Configuration in Modern.js\nDESCRIPTION: The default configuration for Autoprefixer in Modern.js projects. It sets the flexbox option and uses the project's browserslist config.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/autoprefixer.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n{\n  flexbox: 'no-2009',\n  // Depends on the browserslist config in the project\n  // and the `output.overrideBrowserslist` (higher priority) config\n  overrideBrowserslist: browserslist,\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing resolveModuleUserConfig Hook in TypeScript\nDESCRIPTION: Config hook to modify user configuration in Modern.js module-tools plugin system. Uses AsyncWaterfall pattern.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/plugin-api/plugin-hooks.md#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport const myPlugin = (): CliPlugin<ModuleTools> => ({\n  name: 'my-plugin',\n\n  setup() {\n    return {\n      resolveModuleUserConfig(config: ModuleUserConfig): ModuleUserConfig {},\n    };\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Directory Structure for Modern.js Module Project with Plugin\nDESCRIPTION: Shows the file structure of a Modern.js Module project with a plugin directory, highlighting where to place the plugin file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/guide/getting-started.mdx#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n. /project .\n├── plugins\n│ └── example.ts\n├── src/\n└── modern.config.ts\n```\n\n----------------------------------------\n\nTITLE: Declaring Global Variables for TypeScript\nDESCRIPTION: Creates type declarations for custom global variables added during the build process.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_12\n\nLANGUAGE: TypeScript\nCODE:\n```\ndeclare const YOUR_ADD_GLOBAL_VAR;\n```\n\n----------------------------------------\n\nTITLE: Storybook Proxy Configuration\nDESCRIPTION: Complete proxy middleware configuration using http-proxy-middleware to route API requests.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/faq/storybook.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\n/* eslint-disable filenames/match-exported */\nconst { createProxyMiddleware } = require(\"http-proxy-middleware\");\n\nmodule.exports = function expressMiddleware (router) {\n  router.use('/api', createProxyMiddleware({\n    target: \"http://localhost:8000\",\n    changeOrigin: true\n  }))\n}\n```\n\n----------------------------------------\n\nTITLE: Default Built-in Aliases\nDESCRIPTION: The default path aliases that come pre-configured in Modern.js framework.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/alias.mdx#2025-04-21_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"@\": \"./src\",\n  \"@shared\": \"./shared\"\n}\n```\n\n----------------------------------------\n\nTITLE: Full Control of Webpack Entry in Modern.js\nDESCRIPTION: This example shows how to use entry.jsx as the main webpack entry point in a Modern.js project when @modern-js/runtime is not installed. It demonstrates a setup similar to create-react-app.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/hooks/src/entry.mdx#2025-04-21_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\nimport React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\n\nReactDOM.createRoot(document.getElementById('root')!).render(<App />);\n```\n\n----------------------------------------\n\nTITLE: GlobalVars vs Define Configuration Comparison\nDESCRIPTION: Demonstrates the difference between globalVars and define configuration options.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/global-vars.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  source: {\n    globalVars: {\n      'process.env.BUILD_VERSION': '0.0.1',\n      'import.meta.foo': { bar: 42 },\n      'import.meta.baz': false,\n    },\n    define: {\n      'process.env.BUILD_VERSION': JSON.stringify('0.0.1'),\n      'import.meta': {\n        foo: JSON.stringify({ bar: 42 }),\n        baz: JSON.stringify(false),\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling SSG for Specific Routes\nDESCRIPTION: Configuration that prevents specific routes from using SSG by setting the preventDefault option, allowing for selective static generation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/render/ssg.mdx#2025-04-21_snippet_5\n\nLANGUAGE: js\nCODE:\n```\nexport default defineConfig({\n  output: {\n    ssg: {\n      preventDefault: ['/user'],\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Modifying Rsbuild Configuration\nDESCRIPTION: Shows how to modify Rsbuild configuration using the modifyRsbuildConfig API.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/cli-plugins/api.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\napi.modifyRsbuildConfig((config, utils) => {\n  // Add a custom Rsbuild plugin\n  config.plugins.push(myCustomRsbuildPlugin());\n});\n```\n\n----------------------------------------\n\nTITLE: Proxy Configuration with Bypass Function in Modern.js DevServer\nDESCRIPTION: Example of using a bypass function with proxy configuration to conditionally skip proxying for certain requests. This configuration skips proxy for browser HTML requests and returns index.html instead.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/dev-server.mdx#2025-04-21_snippet_11\n\nLANGUAGE: javascript\nCODE:\n```\n// 自定义 bypass 方法\nexport default {\n  tools: {\n    devServer: {\n      proxy: {\n        '/api': {\n          target: 'http://localhost:3000',\n          bypass: function (req, res, proxyOptions) {\n            if (req.headers.accept.indexOf('html') !== -1) {\n              console.log('Skipping proxy for browser request.');\n              return '/index.html';\n            }\n          },\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Input as Object for Custom Output Names\nDESCRIPTION: Demonstrates how to use an object configuration for input to modify output file names in bundle mode.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_25\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    format: 'esm',\n    input: {\n      'index.esm': './src/index.ts',\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Defining Polyfill Configuration Type\nDESCRIPTION: Configuration type definition for output.polyfill showing the available options: 'entry', 'usage', 'ua', or 'off'. The default value is 'entry'.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/polyfill.mdx#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n- **Type:** `'entry' | 'usage' | 'ua' | 'off'`\n- **Default:** `'entry'`\n```\n\n----------------------------------------\n\nTITLE: Object-based Tailwind CSS Configuration with Plugins\nDESCRIPTION: Shows how to configure Tailwind CSS using an object approach, including how to add additional plugins like forms, aspect-ratio, and typography.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/tailwindcss.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    tailwindcss: {\n      plugins: [\n        require('@tailwindcss/forms'),\n        require('@tailwindcss/aspect-ratio'),\n        require('@tailwindcss/typography'),\n      ],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Custom Output Directory in Modern.js Module\nDESCRIPTION: Specifies a custom directory for build output files instead of the default ./dist location. This example outputs to an ESM-specific subdirectory.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_35\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    outDir: './dist/esm',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Importing Extended Asset Type (PDF) in JavaScript\nDESCRIPTION: Shows how to import a PDF file after extending the asset types in the configuration. This demonstrates the usage of custom asset types in code.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/static-assets.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nimport myFile from './static/myFile.pdf';\n\nconsole.log(myFile); // \"/static/myFile.6c12aba3.pdf\"\n```\n\n----------------------------------------\n\nTITLE: Vue JSX Plugin Options Type Definition (TypeScript)\nDESCRIPTION: This code snippet defines the type for Vue JSX plugin options. It includes various configuration options for customizing the behavior of the @vue/babel-plugin-jsx plugin.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/plugins/official-list/plugin-vue.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ntype VueJSXPluginOptions = {\n  /** transform `on: { click: xx }` to `onClick: xxx` */\n  transformOn?: boolean;\n  /** enable optimization or not. */\n  optimize?: boolean;\n  /** merge static and dynamic class / style attributes / onXXX handlers */\n  mergeProps?: boolean;\n  /** configuring custom elements */\n  isCustomElement?: (tag: string) => boolean;\n  /** enable object slots syntax */\n  enableObjectSlots?: boolean;\n  /** Replace the function used when compiling JSX expressions */\n  pragma?: string;\n};\n```\n\n----------------------------------------\n\nTITLE: Overriding Aliases with a New Object\nDESCRIPTION: Demonstrates returning a completely new object from the alias function to override the pre-defined aliases instead of modifying the existing object.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  buildConfig: {\n    alias: alias => {\n      return {\n        '@common': '. /src/common',\n      };\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Build Preparation Hook in Modern.js\nDESCRIPTION: Shows usage of onPrepare hook for executing initialization operations before build process starts.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/cli-plugins/api.mdx#2025-04-21_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\napi.onPrepare(async () => {\n  // Perform some initialization operations, such as checking the environment, downloading dependencies, etc.\n  await prepareMyCustomEnvironment();\n});\n```\n\n----------------------------------------\n\nTITLE: Adding Babel Presets with addPresets Helper\nDESCRIPTION: Example of using the addPresets utility function to add Babel presets to the configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/babel.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    babel(config, { addPresets }) {\n      addPresets(['@babel/preset-env']);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: 创建自定义 Utility Class\nDESCRIPTION: 在独立的 CSS 文件中创建自定义的 utility class,用于在组件中复用样式。\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/tutorials/first-app/c03-css.mdx#2025-04-21_snippet_7\n\nLANGUAGE: css\nCODE:\n```\n:root {\n  --custom-text-color: rgb(113, 128, 150);\n}\n\n.custom-text-gray {\n  color: var(--custom-text-color);\n}\n```\n\n----------------------------------------\n\nTITLE: Content of Asynchronous Boundary File\nDESCRIPTION: Shows the content of the bootstrap.js file that acts as the asynchronous boundary, which dynamically imports the actual entry point.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/source/enable-async-entry.mdx#2025-04-21_snippet_2\n\nLANGUAGE: js\nCODE:\n```\nimport('./index.jsx');\n```\n\n----------------------------------------\n\nTITLE: GetAppList Type Definition\nDESCRIPTION: Type definition for the getAppList function that returns a Promise resolving to an array of AppInfo objects, used for fetching remote application list data.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/micro-master-manifest-config.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ntype GetAppList = () => Promise<Array<AppInfo>>;\n```\n\n----------------------------------------\n\nTITLE: Configuring CSS Minification with Function Syntax in Modern.js\nDESCRIPTION: An example of configuring CSS minification using a Function, which receives the default configuration as its first argument. It can directly modify the config object or return a new one.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/minify-css.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n   tools: {\n    minifyCss: options => {\n      options.minimizerOptions = {\n        preset: require.resolve('cssnano-preset-simple'),\n      },\n    }\n  }\n};\n```\n\n----------------------------------------\n\nTITLE: CSS Module Definition\nDESCRIPTION: Shows the content of a CSS Module file, defining a style for a button class that will be locally scoped when imported.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/best-practices/components.mdx#2025-04-21_snippet_7\n\nLANGUAGE: css\nCODE:\n```\n.btn {\n  color: blue;\n}\n```\n\n----------------------------------------\n\nTITLE: Using PreRender with Query and Header Parameters\nDESCRIPTION: This example shows how to include specific query and header parameters in the cache calculation using the PreRender component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/ssr/pre-render.mdx#2025-04-21_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n/* 使用 query 中的 channel 和 header 中的 language 计算缓存标识 */\n<PreRender\n  interval={10}\n  level={2}\n  includes={{\n    query: ['channel'],\n    header: ['language'],\n  }}\n/>\n```\n\n----------------------------------------\n\nTITLE: Example of Modified Extensions Array in Modern.js\nDESCRIPTION: Demonstrates how the extensions array is modified after applying the resolveExtensionPrefix configuration. The prefix is added to each extension in the array.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/resolve-extension-prefix.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n// before\nconst extensions = ['.js', '.ts', ...];\n\n// after\nconst extensions = ['.web.js', '.js', '.web.ts' , '.ts', ...];\n```\n\n----------------------------------------\n\nTITLE: String-based Entry Configuration\nDESCRIPTION: Example of configuring entries using string paths to specify entry module locations.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/entries.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig({\n  source: {\n    entries: {\n      // Specify a new entry named 'my-entry'\n      'my-entry': './src/home/test/index.ts',\n    },\n    disableDefaultEntries: true,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Significant Feature Addition for Generator Download\nDESCRIPTION: Added optimization for generator download functionality in version 3.7.0\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/generator/generator-utils/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n### Minor Changes\n\n- d6986c5: feat: optimize generator download\n\n  feat: 优化生成器下载\n```\n\n----------------------------------------\n\nTITLE: Default UMD Output with File-Based Global Name\nDESCRIPTION: Default UMD output that uses the source file name (index) as the global variable name when accessed in a browser environment.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/build-umd.mdx#2025-04-21_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\n(function (global, factory) {\n  if (typeof module === 'object' && typeof module.exports === 'object')\n    factory(exports);\n  else if (typeof define === 'function' && define.amd)\n    define(['exports'], factory);\n  else if (\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self)\n  )\n    factory((global.index = {}));\n})(this, function (exports) {\n  //...\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Asset Naming Pattern\nDESCRIPTION: Sets the naming pattern for static assets without hash to simplify debugging or for specific deployment requirements.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_3\n\nLANGUAGE: JavaScript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    asset: {\n      // no hash\n      name: [name].[ext],\n      // any logic\n      // name: (assetPath) => 'any.png',\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Basic Example of routes/ Directory Structure in Modern.js\nDESCRIPTION: Demonstrates a simple routes directory structure that generates two routes: '/' and '/user'.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/hooks/src/routes.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n.\n└── routes\n    ├── page.tsx\n    └── user\n        └── page.tsx\n```\n\n----------------------------------------\n\nTITLE: Configuring Bundleless Mode to Skip Less/Scss Processing in Modern.js\nDESCRIPTION: Configuration to skip pre-processing of less files in bundleless mode by excluding them from the input, disabling style redirection, and setting up copy patterns to preserve the original less files in the output directory.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/faq/build.mdx#2025-04-21_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    buildType: 'bundleless',\n    input: ['src', '!src/**/*.less'],\n    redirect: {\n      style: false,\n    },\n    copy: {\n      patterns: [\n        {\n          from: './**/*.less',\n          to: './',\n        },\n      ],\n      options: {\n        enableCopySync: true,\n      },\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: UnstableNext Type Definition\nDESCRIPTION: Defines the type for the next middleware function in the chain.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/web-server/unstable_middleware.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\ntype UnstableNext = () => Promise<void>;\n```\n\n----------------------------------------\n\nTITLE: Configuring Webpack Build Options for Production in Modern.js\nDESCRIPTION: This snippet demonstrates how to configure Webpack build options for the production environment in a Modern.js project. It customizes the output path and filename for optimized production builds.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/components/publish-emo.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    webpack: (config, { env }) => {\n      if (env === 'production') {\n        config.output = {\n          ...config.output,\n          path: './build',\n          filename: '[name].[contenthash].js',\n        };\n      }\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Registering Polyfill Plugin Using Hooks for Specific Build Types\nDESCRIPTION: Advanced example showing how to selectively apply the polyfill plugin to specific build configurations using hooks. This allows applying polyfills only for bundle builds while excluding them from bundleless builds.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/plugins/official-list/plugin-polyfill.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\nimport { getPolyfillHook } from '@modern-js/plugin-module-polyfill';\n\nconst polyfillHook = getPolyfillHook();\n\nexport default defineConfig({\n  plugins: [moduleTools()],\n  buildConfig: [\n    {\n      buildType: 'bundle',\n      hooks: [polyfillHook],\n    },\n    {\n      buildType: 'bundleless',\n    },\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Creating a Simple React Page Component in TypeScript\nDESCRIPTION: This code snippet shows a basic React component for a home page in a Modern.js project. It includes a heading and a link to an 'About' page using the Link component from Modern.js runtime router.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/testing/vitest.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Link } from '@modern-js/runtime/router';\n\nconst Index = () => (\n  <div>\n    <h1>Home</h1>\n    <Link to=\"/about\">About</Link>\n  </div>\n);\n\nexport default Index;\n```\n\n----------------------------------------\n\nTITLE: Defining DocusaurusConfig Interface for Document Configuration\nDESCRIPTION: Type definition for the Docusaurus configuration object, specifying various options for document generation and processing in the Modern.js ecosystem.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/components/faq-storybook.mdx#2025-04-21_snippet_1\n\nLANGUAGE: TypeScript\nCODE:\n```\nexport interface DocusaurusConfig {\n  /**\n   * baseUrl for Docusaurus\n   */\n  baseUrl?: string;\n  /**\n   * The i18n config for multi-language.\n   */\n  i18n?: any;\n  /**\n   * Navbar items, like link, docsVersionDropdown, localeDropdown.\n   */\n  navItems?: any[];\n  /**\n   * Docs repository, used for edit url.\n   */\n  docsRepo?: string;\n  /**\n   * Docs repository branch, used for edit url.\n   */\n  docsBranch?: string;\n  /**\n   * The i18n dir for multi-language.\n   * The default value is i18n.\n   */\n  i18nDir?: string;\n  /**\n   * Docs directory.\n   * The default value is docs.\n   */\n  docsDir?: string;\n  /**\n   * Api directory.\n   * The default value is api.\n   */\n  apiDir?: string;\n  /**\n   * The default version.\n   * If not provided, the latest version will be used.\n   */\n  defaultVersion?: string;\n  /**\n   * The latest version.\n   * If not provided, the latest version will be determined by version names.\n   */\n  lastVersion?: string;\n  /**\n   * All docs versions.\n   */\n  versions?: string[];\n  /**\n   * Add extra sidebars.\n   */\n  extraSidebars?: Record<string, any>;\n  /**\n   * Tha apiParseTsConfig for API Extractor.\n   */\n  apiParseTsConfig?: any;\n  /**\n   * The apiParseOptions for API Extractor.\n   */\n  apiParseOptions?: any;\n  /**\n   * The extra options for docusaurus.config.js.\n   */\n  extraConfig?: Record<string, any>;\n  /**\n   * The plugin function for docusaurus.config.js.\n   */\n  plugins?: any[] | ((...args: any[]) => any);\n  /**\n   * Turn this on to attempt to restore the sidebar state on page refresh.\n   */\n  rememberLastSidebarState?: boolean;\n  /**\n   * Custom docusaurus theme.\n   * Example: path.join(cwd, 'docusaurus/theme').\n   */\n  customThemeDir?: string;\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom BFF Prefix in Modern.js\nDESCRIPTION: Demonstrates how to modify the default BFF API route prefix from /api to a custom value using the Modern.js configuration file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/bff/prefix.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  bff: {\n    prefix: '/api-demo',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using useContext to Access Request Headers in Koa Framework\nDESCRIPTION: Example showing how to use useContext in a BFF function to access request information like the User-Agent header when using the Koa framework extension.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/bff/use-context.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useContext } from '@modern-js/runtime/koa';\n\nexport async function get() {\n  const ctx = useContext();\n  return ctx.req.headers['user-agent'];\n}\n```\n\n----------------------------------------\n\nTITLE: Directory Structure for Favicon Configuration\nDESCRIPTION: Shows the expected file structure for placing favicon files in a Modern.js project.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/hooks/config/favicon.mdx#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\n./config\n└── favicon.ico\n```\n\n----------------------------------------\n\nTITLE: Configuring Autoprefixer Using Object Type in Modern.js\nDESCRIPTION: An example of how to configure Autoprefixer using an object type in Modern.js. This configuration is merged with the default config using Object.assign.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/autoprefixer.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    autoprefixer: {\n      flexbox: 'no-2009',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing Item Component with Archive Button\nDESCRIPTION: Item component implementation with an Archive button UI that displays different styles based on the archived status and triggers an onArchive callback when clicked.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/tutorials/first-app/c06-model.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport Avatar from '../Avatar';\n\ntype InfoProps = {\n  avatar: string;\n  name: string;\n  email: string;\n  archived?: boolean;\n};\n\nconst Item = ({\n  info,\n  onArchive,\n}: {\n  info: InfoProps;\n  onArchive?: () => void;\n}) => {\n  const { avatar, name, email, archived } = info;\n  return (\n    <div className=\"flex p-4 items-center border-gray-200 border-b\">\n      <Avatar src={avatar} />\n      <div className=\"ml-4 custom-text-gray flex-1 flex justify-between\">\n        <div className=\"flex-1\">\n          <p>{name}</p>\n          <p>{email}</p>\n        </div>\n        <button\n          type=\"button\"\n          disabled={archived}\n          onClick={onArchive}\n          className={`text-white font-bold py-2 px-4 rounded-full ${\n            archived\n              ? 'bg-gray-400 cursor-default'\n              : 'bg-blue-500 hover:bg-blue-700'\n          }`}\n        >\n          {archived ? 'Archived' : 'Archive'}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default Item;\n```\n\n----------------------------------------\n\nTITLE: State Interface Without Result Field\nDESCRIPTION: Shows the state interface structure when the result field is disabled.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/model/handle-effect.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\ninterface State {\n  pending: boolean;\n  error: string;\n}\n```\n\n----------------------------------------\n\nTITLE: CSS Modules Type Definition\nDESCRIPTION: TypeScript type definition for the CSS Modules configuration object. Defines options for auto-enabling CSS Modules, export conventions, global exports, identifier naming, and module modes.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/css-modules.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype CssModules = {\n  auto?:\n    | boolean\n    | RegExp\n    | ((resourcePath: string, resourceQuery: string, resourceFragment: string,) => boolean);\n  exportLocalsConvention?:\n    | 'asIs'\n    | 'camelCase'\n    | 'camelCaseOnly'\n    | 'dashes'\n    | 'dashesOnly';\n  exportGlobals?: boolean;\n  localIdentName?: string;\n  mode?:\n    | 'local'\n    | 'global'\n    | 'pure'\n    | 'icss'\n    | ((resourcePath: string) => 'local' | 'global' | 'pure' | 'icss');\n  namedExport?: boolean;\n};\n```\n\n----------------------------------------\n\nTITLE: 在 List.Item.Meta 中使用 Avatar 组件\nDESCRIPTION: 在 Ant Design 的 List.Item.Meta 组件中使用自定义的 Avatar 组件来显示头像。\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/tutorials/first-app/c03-css.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n<List.Item.Meta\n  avatar={<Avatar src={avatar} />}\n  title={name}\n  description={email}\n/>\n```\n\n----------------------------------------\n\nTITLE: Exporting Node API in JavaScript\nDESCRIPTION: Fixes the nodeApi type export in @modern-js/core by using 'nodeApi' instead of 'node-api' as the export name.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/cli/core/CHANGELOG.md#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nnodeApi\n```\n\n----------------------------------------\n\nTITLE: Default Define Configuration in TypeScript\nDESCRIPTION: Shows the default configuration for source.define which sets process.env.MODERN_TARGET to 'browser'. This configuration is used to replace variables at compile time for different build environments.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/define.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst defaultDefine = {\n  'process.env.MODERN_TARGET': '\"browser\"',\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Bundler for Storybook in Modern.js\nDESCRIPTION: Example of specifying the bundler in the Storybook configuration, showing how to set Rspack as the underlying bundler in the framework options.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/using-storybook.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nconst config = {\n  framework: {\n    name: '@modern-js/storybook',\n    options: {\n      bundler: 'rspack',\n    },\n  },\n};\n\nexport default config;\n```\n\n----------------------------------------\n\nTITLE: Custom Environment Variables in .env File (Bash)\nDESCRIPTION: Example of defining custom environment variables in a .env file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/env-vars.mdx#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nREACT_APP_FOO=123\nBAR=456\n```\n\n----------------------------------------\n\nTITLE: Referencing Upload Assets in React Components using Environment Variables\nDESCRIPTION: Example of using environment variables to reference static assets from the upload/ directory in React components. The ASSET_PREFIX environment variable is used to create a flexible path to the assets.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/hooks/config/upload.mdx#2025-04-21_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nexport default () => {\n  return (\n    <img src={`${process.env.ASSET_PREFIX}/upload/banner.png`}></img>\n  );\n};\n```\n\n----------------------------------------\n\nTITLE: Registering Import Plugin in Modern.js Module Configuration (TypeScript)\nDESCRIPTION: This snippet demonstrates how to register the import plugin in a Modern.js Module configuration file. It imports necessary modules and defines the configuration with plugin options.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/official-list/plugin-import.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\nimport { modulePluginImport } from '@modern-js/plugin-module-import';\n\nexport default defineConfig({\n  plugins: [\n    moduleTools(),\n    modulePluginImport({\n      pluginImport: [\n        {\n          libraryName: 'antd',\n          style: true,\n        },\n      ],\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring esbuild in Modern.js Project\nDESCRIPTION: This code snippet demonstrates how to configure esbuild compilation behavior in a Modern.js project using the 'tools.esbuild' option. It sets the target for both loader and minimize to 'chrome61'.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/esbuild.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig({\n  tools: {\n    esbuild: {\n      loader: {\n        target: 'chrome61',\n      },\n      minimize: {\n        target: 'chrome61',\n      },\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Local Rsbuild Plugin in Modern.js\nDESCRIPTION: Example demonstrating how to import and use a locally defined Rsbuild plugin using relative path imports in Modern.js configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/builder-plugins.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport myRsbuildPlugin from './plugin/myRsbuildPlugin';\n\nexport default defineConfig({\n  builderPlugins: [myRsbuildPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Development Menu Hooks in Modern.js Module Tools Plugin\nDESCRIPTION: Demonstrates how to implement beforeDevMenu and afterDevMenu hooks in a Modern.js Module Tools plugin. These hooks allow customizing the development menu and responding to user selections.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/plugin-api/plugin-hooks.md#2025-04-21_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nexport const myPlugin = (): CliPlugin<ModuleTools> => ({\n  name: 'my-plugin',\n\n  setup() {\n    return {\n      beforeDevMenu(questions) {\n        questions[0].message += '!';\n        return questions; // required\n      },\n      afterDevMenu(options: Options) {\n        console.info(`choise ${options.result.choiceDevTool} dev tools`);\n      },\n    };\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Enabling CSS Injection in Modern.js Module\nDESCRIPTION: This example demonstrates how to enable CSS injection in Modern.js Module, which inserts CSS styles into JavaScript code in bundle mode.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_39\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    style: {\n      inject: true,\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Executing Command with Options using pnpm v7 in Bash\nDESCRIPTION: This bash command demonstrates how to run a command defined in package.json with additional options using pnpm v7.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/troubleshooting/cli.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\npnpm run command --options\n```\n\n----------------------------------------\n\nTITLE: ResolvedConfig Interface Definition\nDESCRIPTION: Type definition for the normalized configuration interface returned by useResolvedConfigContext.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/plugins/guide/setup-function.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst useResolvedConfigContext: () => NormalizedConfig;\n\ninterface NormalizedConfig {\n  buildConfig: PartialBuildConfig;\n  buildPreset: BuildPreset;\n  dev: Dev;\n  plugins: PluginConfig;\n  runtime: RuntimeConfig;\n  runtimeByEntries?: RuntimeByEntriesConfig;\n  _raw: UserConfig;\n}\n```\n\n----------------------------------------\n\nTITLE: Default Terser Configuration in Modern.js\nDESCRIPTION: The default configuration for Terser in Modern.js projects. It sets the 'safari10' option to true for mangling.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/terser.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultTerserOptions = {\n  terserOptions: {\n    mangle: {\n      safari10: true,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing Greet Function with JSDoc\nDESCRIPTION: Example of a TypeScript function with JSDoc documentation comments\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/use-module-doc.mdx#2025-04-21_snippet_5\n\nLANGUAGE: ts\nCODE:\n```\n/**\n * Greet function that returns a greeting message.\n * @param {string} name - The name of the person to greet.\n * @param {string} [greeting='Hello'] - The greeting to use.\n * @returns {string} The greeting message.\n */\nfunction greet(name: string, greeting = 'Hello') {\n  return `${greeting}, ${name}! `;\n}\n```\n\n----------------------------------------\n\nTITLE: Enabling Source Build in Modern.js Configuration (TypeScript)\nDESCRIPTION: This snippet demonstrates how to enable the sourceBuild experiment in a Modern.js project configuration. When enabled, Modern.js will read and compile the source files specified in the 'source' field of subproject package.json files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/experiments/source-build.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  experiments: {\n    sourceBuild: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: 导入 styled-components 在 Modern.js 中\nDESCRIPTION: 从 Modern.js 运行时导入 styled-components 以在应用中使用。\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/tutorials/first-app/c03-css.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport styled from '@modern-js/runtime/styled';\n```\n\n----------------------------------------\n\nTITLE: Customizing TypeScript Checker Configuration in TypeScript\nDESCRIPTION: This example demonstrates how to customize the TypeScript checker configuration in Modern.js. It shows how to exclude files from type checking using a regular expression.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/ts-checker.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    tsChecker: {\n      issue: {\n        exclude: [({ file = '' }) => /[\\\\/]some-folder[\\\\/]/.test(file)],\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Invalid Global Variables Usage Example\nDESCRIPTION: Shows an example of invalid usage with destructuring assignment.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/global-vars.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nconst { NODE_ENV } = process.env;\nconsole.log(NODE_ENV);\n// ❌ Won't get a string.\n```\n\n----------------------------------------\n\nTITLE: Using Server API to Trigger Page Refresh in Modern.js DevServer\nDESCRIPTION: Example of using the server API to send messages to the HMR client. This shows how to use a custom file watcher and trigger page refreshes when files change by sending a 'content-changed' message.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/dev-server.mdx#2025-04-21_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    devServer: {\n      setupMiddlewares: [\n        (middlewares, server) => {\n          // 添加自定义 watcher 并在文件更新时触发页面刷新\n          watcher.on('change', changed => {\n            server.sockWrite('content-changed');\n          });\n        },\n      ],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Web Worker Specific Webpack Configuration\nDESCRIPTION: Shows how to configure webpack specifically for web worker builds using isWebWorker flag.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/webpack-chain.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    webpackChain: (chain, { isWebWorker }) => {\n      if (isWebWorker) {\n        // ...\n      }\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: 初始化 Modern.js Module 组件项目\nDESCRIPTION: 使用 @modern-js/create 命令初始化一个 npm 组件项目。选择工程类型、项目名称、开发语言和包管理工具。\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/best-practices/components.mdx#2025-04-21_snippet_0\n\nLANGUAGE: text\nCODE:\n```\nnpx @modern-js/create@latest components-project\n\n? 请选择你想创建的工程类型：Npm 模块\n? 请填写项目名称：components-demo\n? 请选择开发语言：TS\n? 请选择包管理工具：pnpm\n```\n\n----------------------------------------\n\nTITLE: Configuring moduleScopes Array in Modern.js\nDESCRIPTION: Example of setting moduleScopes to restrict imports to the 'src' directory in Modern.js configuration. This configuration only allows importing code from the specified paths.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/module-scopes.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  source: {\n    moduleScopes: ['./src'],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining output.disableCssExtract Option in Modern.js Configuration\nDESCRIPTION: This snippet shows the type and default value of the output.disableCssExtract option. It is a boolean option defaulting to false, which determines whether CSS extraction is disabled and CSS is inlined into JS files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/output/disable-css-extract.mdx#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n- **类型：** `boolean`\n- **默认值：** `false`\n```\n\n----------------------------------------\n\nTITLE: Function-based Sass Configuration\nDESCRIPTION: Example of configuring sass-loader using a function where the default configuration is passed as the first parameter and can be modified directly. The function can also return a value as the final result.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/sass.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    sass(config) {\n      // 修改 sourceMap 配置\n      config.additionalData = async (content, loaderContext) => {\n        // ...\n      };\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Creating a Configurable Modern.js Module Plugin\nDESCRIPTION: This snippet shows how to create a plugin as a function that accepts configuration options. The function returns a plugin object, allowing for customizable plugin behavior through the provided options.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/guide/plugin-object.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { CliPlugin, ModuleTools } from '@modern-js/module-tools';\n\ntype MyPluginOptions = {\n  foo: string;\n};\n\nconst myPlugin = (options: MyPluginOptions): CliPlugin<ModuleTools> => ({\n  name: 'my-plugin',\n\n  setup() {\n    console.log(options.foo);\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: HTTP Server URL Example\nDESCRIPTION: Example showing default HTTP development server URLs for local and network access.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/dev/https.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n  > Local: http://localhost:8080/\n  > Network: http://192.168.0.1:8080/\n```\n\n----------------------------------------\n\nTITLE: Configuring Image Compression Plugin\nDESCRIPTION: Configuration to enable image compression using the @rsbuild/plugin-image-compress plugin.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/page-performance/optimize-bundle.mdx#2025-04-21_snippet_7\n\nLANGUAGE: ts\nCODE:\n```\nimport { pluginImageCompress } from '@rsbuild/plugin-image-compress';\n\nexport default {\n  builderPlugins: [pluginImageCompress()],\n};\n```\n\n----------------------------------------\n\nTITLE: Manual HTTPS Certificate Configuration\nDESCRIPTION: Example showing how to manually configure HTTPS certificates by providing custom certificate and private key files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/dev/https.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport fs from 'fs';\n\nexport default {\n  dev: {\n    https: {\n      key: fs.readFileSync('certificates/private.pem'),\n      cert: fs.readFileSync('certificates/public.pem'),\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Default Rem Configuration Settings in Modern.js\nDESCRIPTION: This snippet shows the default configuration values used when rem conversion is enabled. It includes settings for root font size, screen width, and various other parameters that control how px values are converted to rem.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/output/convert-to-rem.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n{\n  enableRuntime: true,\n  rootFontSize: 50,\n  screenWidth: 375,\n  rootFontSize: 50,\n  maxRootFontSize: 64,\n  widthQueryKey: '',\n  excludeEntries: [],\n  supportLandscape: false,\n  useRootFontSizeBeyondMax: false,\n  pxtorem: {\n    rootValue: 50,\n    unitPrecision: 5,\n    propList: ['*'],\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Enabling Source Build in Modern.js\nDESCRIPTION: Basic configuration to enable source code building functionality in Modern.js. When enabled, it compiles source code files specified in the package.json's source field.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/experiments/source-build.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  experiments: {\n    sourceBuild: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring UMD Format in Modern.js\nDESCRIPTION: Basic configuration to set the build format to UMD in Modern.js using the buildConfig.format option.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/build-umd.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    format: 'umd',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Hook Function Signature and Types Definition\nDESCRIPTION: Defines the TypeScript interface for the hook function, including the HookOptions type which contains the addMiddleware property for adding BFF middleware.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/bff/hook.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ntype HookOptions = {\n  addMiddleware: string | function;\n};\n\nfunction hook(options: HookOptions): void;\n```\n\n----------------------------------------\n\nTITLE: Adding Vitest Test Command to package.json\nDESCRIPTION: This snippet demonstrates how to add a 'test' script to package.json that runs Vitest. This allows developers to easily execute tests using npm run test or yarn test.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/testing/vitest.mdx#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"test\": \"vitest\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Global Variables in Modern.js Module Config\nDESCRIPTION: Example of using the 'define' option to inject global variables into the code. It demonstrates how to define a VERSION variable using package.json and how to replace environment variables.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_12\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    define: {\n      VERSION: require('./package.json').version || '0.0.0',\n    },\n  },\n});\n```\n\nLANGUAGE: javascript\nCODE:\n```\nimport { defineConfig } from '@modern-js/module-tools';\nexport default defineConfig({\n  buildConfig: {\n    define: {\n      'process.env.VERSION': process.env.VERSION || '0.0.0',\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Adding Koa Middleware to BFF in Modern.js\nDESCRIPTION: Demonstrates how to use the hook API to add a Koa middleware to a BFF function in Modern.js. The middleware modifies the request query before passing control to the next middleware.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/bff/hook.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { hook } from '@modern-js/runtime/koa';\n\nexport default hook(({ addMiddleware }) => {\n  addMiddleware(async (ctx, next) => {\n    ctx.req.query.id = 'koa';\n    await next();\n  });\n});\n```\n\n----------------------------------------\n\nTITLE: Defining DataUriLimitConfig Type in TypeScript\nDESCRIPTION: Defines the type for the dataUriLimit configuration option, allowing either a number or an object with specific asset type limits.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/data-uri-limit.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype DataUriLimitConfig =\n  | number\n  | {\n      svg?: number;\n      font?: number;\n      image?: number;\n      media?: number;\n    };\n```\n\n----------------------------------------\n\nTITLE: Configuring Tencent Cloudbase Deployment for Modern.js in YAML\nDESCRIPTION: This YAML configuration specifies the deployment settings for a Modern.js application on Tencent Cloudbase. It includes the environment ID, region, and build commands. The configuration also sets up the entry file and defines the ignoreFiles for deployment.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/components/reduck-migration.mdx#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nenvId: {{env.ENV_ID}}\nregion: {{env.REGION}}\n\nframework:\n  name: modernjs\n  plugins:\n    - plugin:\n        use: '@cloudbase/framework-plugin-website'\n\nfunctions:\n  - name: modernjs\n    handler: index.main\n    runtime: Nodejs12.16\n    memorySize: 128\n    timeout: 5\n    envVariables: {}\n\nplugins:\n  - plugin:\n      use: '@cloudbase/framework-plugin-website'\n      inputs:\n        buildCommand: npm run build\n        outputPath: dist\n        cloudPath: /\n        ignore:\n          - .git\n          - .github\n          - node_modules\n          - cloudbaserc.js\n\n\nserver:\n  use: '@cloudbase/framework-plugin-website'\n  inputs:\n    buildCommand: npm run build\n    outputPath: dist\n    cloudPath: /\n    ignore:\n      - .git\n      - .github\n      - node_modules\n      - cloudbaserc.js\n```\n\n----------------------------------------\n\nTITLE: Default Distribution Path Configuration in JavaScript\nDESCRIPTION: Default configuration object that defines the standard output paths for different file types. Sets 'dist' as the root directory and organizes other assets under the 'static' directory with appropriate subdirectories.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/dist-path.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultDistPath = {\n  root: 'dist',\n  css: 'static/css',\n  svg: 'static/svg',\n  font: 'static/font',\n  html: 'html',\n  wasm: 'static/wasm',\n  image: 'static/image',\n  media: 'static/media',\n  js: 'static/js',\n  assets: 'static/assets',\n};\n```\n\n----------------------------------------\n\nTITLE: Defining Hook Types in TypeScript\nDESCRIPTION: Defines the structure of build lifecycle hooks that allow custom logic to be injected at specific stages of the build process.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_19\n\nLANGUAGE: typescript\nCODE:\n```\ntype HookList = {\n  name: string;\n  apply: (compiler: ICompiler) => void;\n  applyAfterBuiltIn?: boolean;\n}\n```\n\n----------------------------------------\n\nTITLE: Adding SSR by Route IDs Support in JavaScript\nDESCRIPTION: New feature to support server-side rendering by specific route IDs.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/core/CHANGELOG.md#2025-04-21_snippet_3\n\nLANGUAGE: JavaScript\nCODE:\n```\nsupport server.ssrByRouteIds\n```\n\n----------------------------------------\n\nTITLE: 在 Modern.js 配置中启用 Tailwind CSS 插件\nDESCRIPTION: 在 Modern.js 的配置文件中注册 Tailwind CSS 插件,以启用 Tailwind CSS 支持。\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/tutorials/first-app/c03-css.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { appTools, defineConfig } from '@modern-js/app-tools';\nimport { tailwindcssPlugin } from '@modern-js/plugin-tailwindcss';\n\nexport default defineConfig({\n  runtime: {\n    router: true,\n    state: true,\n  },\n  server: {\n    ssr: true,\n  },\n  plugins: [appTools(), tailwindcssPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Custom CSS Modules Pattern Configuration\nDESCRIPTION: Configuration to enable CSS Modules for specific files based on custom patterns\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/css/css-modules.mdx#2025-04-21_snippet_3\n\nLANGUAGE: ts\nCODE:\n```\nexport default {\n  output: {\n    cssModules: {\n      auto: resource => {\n        return resource.includes('.module.') || resource.includes('shared/');\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using getAppContext API in Modern.js Plugin\nDESCRIPTION: Shows how to retrieve and use application context information within a plugin using the getAppContext API.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/cli-plugins/api.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\napi.onPrepare(() => {\n  const appContext = api.getAppContext();\n  console.log(`The current project is running in ${appContext.isProd ? 'production' : 'development'} mode`);\n  console.log(`Bundler: ${appContext.bundlerType}`);\n});\n```\n\n----------------------------------------\n\nTITLE: Executing Filtered Command with pnpm v7 in Bash\nDESCRIPTION: This snippet demonstrates how to use the --filter parameter with pnpm v7 to execute a prepare command for specific packages.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/troubleshooting/cli.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\npnpm run --filter \"./packages/**\" prepare\n```\n\n----------------------------------------\n\nTITLE: Supporting TypeScript in Testing Configuration\nDESCRIPTION: Fix to provide better TypeScript support in the testing plugin, configuring ts-node and avoiding unnecessary registration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/runtime/plugin-testing/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n- 358ed24: fix: support configuration ts-node and avoid to register ts-node unnecessarily\n  fix: 支持配置 ts-node，避免对 ts-node 不必要的注册\n```\n\n----------------------------------------\n\nTITLE: Configuring Multiple moduleScopes in Modern.js\nDESCRIPTION: Example of configuring multiple directories in moduleScopes to allow imports from both 'src' and 'utils' directories in Modern.js.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/module-scopes.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  source: {\n    moduleScopes: ['./src', './utils'],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Redis Cache Container Implementation\nDESCRIPTION: Example implementation of a custom cache container using Redis for persistent caching across Serverless containers.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/render/ssr-cache.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport Redis from 'ioredis';\nimport type { Container, CacheOption } from '@modern-js/runtime/server;\n\nclass RedisContainer implements Container {\n  redis = new Redis();\n\n  async get(key: string) {\n    return this.redis.get(key);\n  }\n\n  async set(key: string, value: string): Promise<this> {\n    this.redis.set(key, value);\n    return this;\n  }\n\n  async has(key: string): Promise<boolean> {\n    return this.redis.exists(key) > 0;\n  }\n\n  async delete(key: string): Promise<boolean> {\n    return this.redis.del(key) > 0;\n  }\n}\n\nconst container = new RedisContainer();\n\nexport const customContainer: Container = container;\n\nexport const cacheOption: CacheOption = {\n  maxAge: 500, // ms\n  staleWhileRevalidate: 1000, // ms\n};\n```\n\n----------------------------------------\n\nTITLE: Using api.useResolvedConfigContext in TypeScript\nDESCRIPTION: Illustrates the TypeScript interface for the useResolvedConfigContext method, which retrieves the final parsed configuration in a Modern.js Module plugin.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/guide/setup-function.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst useResolvedConfigContext: () => NormalizedConfig;\n\ninterface NormalizedConfig {\n  buildConfig: PartialBuildConfig;\n  buildPreset: BuildPreset;\n  dev: Dev;\n  plugins: PluginConfig;\n  runtime: RuntimeConfig;\n  runtimeByEntries?: RuntimeByEntriesConfig;\n  _raw: UserConfig;\n}\n```\n\n----------------------------------------\n\nTITLE: Disabling TypeScript Checker in Modern.js Configuration\nDESCRIPTION: This snippet shows how to disable the TypeScript type checker in Modern.js using the output.disableTsChecker option. It's a boolean flag that, when set to true, disables the TypeScript type checker during compilation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/disable-ts-checker.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    disableTsChecker: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Correctly Configuring CSS Filename Hashing for Development and Production\nDESCRIPTION: The correct approach to configure CSS filenames with content hashing only in production environment to ensure HMR works properly in development.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/troubleshooting/hmr.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    filename: {\n      css:\n        process.env.NODE_ENV === 'production'\n          ? '[name].[contenthash:8].css'\n          : '[name].css',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Default Styled Components Configuration in Modern.js\nDESCRIPTION: Default configuration object for styled-components showing basic settings for displayName, SSR support, pure mode, and template literal transpilation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/styled-components.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n{\n  displayName: true,\n  // `isSSR` is true in SSR build\n  ssr: isSSR,\n  // `pure` is enabled in production to reduce bundle size\n  pure: isProd,\n  transpileTemplateLiterals: true,\n}\n```\n\n----------------------------------------\n\nTITLE: Registering Import Plugin in Modern.js Module\nDESCRIPTION: Demonstrates how to register and configure the import plugin in Modern.js Module configuration with basic antd library import settings.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/plugins/official-list/plugin-import.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\nimport { modulePluginImport } from '@modern-js/plugin-module-import';\n\nexport default defineConfig({\n  plugins: [\n    moduleTools(),\n    modulePluginImport({\n      pluginImport: [\n        {\n          libraryName: 'antd',\n          style: true,\n        },\n      ],\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Multiple Module Scopes in Modern.js\nDESCRIPTION: Extends moduleScopes to allow imports from both './src' and './utils' directories. This configuration prevents the previously shown error by adding the utils directory to allowed scopes.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/source/module-scopes.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  source: {\n    moduleScopes: ['./src', './utils'],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: PostCSS Example with Nesting\nDESCRIPTION: Demonstrates PostCSS usage with nesting syntax, which is supported out-of-the-box in Modern.js Module. The example shows nested selectors and the @nest rule.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/best-practices/components.mdx#2025-04-21_snippet_3\n\nLANGUAGE: less\nCODE:\n```\na,\nb {\n  color: red;\n\n  /* \"&\" comes first */\n  & c,\n  & d {\n    color: white;\n  }\n\n  /* \"&\" comes later, requiring \"@nest\" */\n  @nest e & {\n    color: yellow;\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Importing hook from Modern.js runtime\nDESCRIPTION: Shows how to import the hook function from the appropriate Modern.js runtime namespace based on the framework extension plugin being used.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/bff/hook.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { hook } from '@modern-js/runtime/{namespace}';\n```\n\n----------------------------------------\n\nTITLE: Defining Link Component in TypeScript\nDESCRIPTION: Declaration of the Link component, used for navigation in React Router applications.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/router/router.mdx#2025-04-21_snippet_8\n\nLANGUAGE: TypeScript\nCODE:\n```\ndeclare function Link(props: LinkProps): React.ReactElement;\n\ninterface LinkProps\n  extends Omit<React.AnchorHTMLAttributes<HTMLAnchorElement>, 'href'> {\n  replace?: boolean;\n  state?: any;\n  to: To;\n  reloadDocument?: boolean;\n}\n\ntype To = string | Partial<Path>;\n```\n\n----------------------------------------\n\nTITLE: Cache Implementation with MaxAge Parameter\nDESCRIPTION: Example showing how to use maxAge parameter to control cache expiration time.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/data/data-cache.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { cache, CacheTime } from '@modern-js/runtime/cache';\n\nconst getDashboardStats = cache(\n  async () => {\n    return await fetchComplexStatistics();\n  },\n  {\n    maxAge: CacheTime.MINUTE * 2,  // Calling this function within 2 minutes will return cached data\n  }\n);\n```\n\n----------------------------------------\n\nTITLE: Displaying Directory Structure for Routes with Data Files\nDESCRIPTION: Shows the convention-based file structure for routes with layout components and their corresponding data files in Modern.js.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/data/data-write.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n.\n└── routes\n    └── user\n        ├── layout.tsx\n        └── layout.data.ts\n```\n\n----------------------------------------\n\nTITLE: Injected Polyfill Script in HTML Output\nDESCRIPTION: This JavaScript code snippet represents the script tag that is injected into the HTML output when the UA-based polyfill feature is enabled. It loads the polyfill script from a specific endpoint.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/ua-polyfill.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n<script src=\"/__polyfill__\" crossorigin></script>\n```\n\n----------------------------------------\n\nTITLE: Adding Custom esbuild Plugin to Modern.js Configuration in TypeScript\nDESCRIPTION: This code snippet demonstrates how to add a custom esbuild plugin to a Modern.js project configuration. The custom plugin must be placed at the beginning of the plugins array to ensure it has higher priority than the built-in Modern.js Module plugin.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/components/register-esbuild-plugin.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { myEsbuildPlugin } from './myEsbuildPlugin';\n\nexport default defineConfig({\n  buildConfig: {\n    esbuildOptions: options => {\n      options.plugins = [myEsbuildPlugin, ...options.plugins];\n      return options;\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Legacy Design System Configuration\nDESCRIPTION: Demonstrates the previous approach of separating theme configuration using source.designSystem (deprecated method).\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/tailwindcss.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst { theme, ...rest } = tailwindConfig;\n\nexport default {\n  tools: {\n    tailwindcss: rest,\n  },\n  source: {\n    designSystem: theme,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Handling Storybook Error: Cannot find module 'react-dom/package.json'\nDESCRIPTION: Shows the error message when debugging Storybook and the missing react-dom dependency. This error occurs during Storybook initialization and can be resolved by installing react-dom as a dev dependency.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/faq/storybook.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nERR! Error: Cannot find module 'react-dom/package.json'\n```\n\n----------------------------------------\n\nTITLE: Setting Eval Source Map in Development\nDESCRIPTION: Configuration to use the faster 'eval' source map format in development environment using bundlerChain.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/build-performance.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    bundlerChain(chain, { env }) {\n      if (env === 'development') {\n        chain.devtool('eval');\n      }\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling Basic Rem Conversion in Modern.js\nDESCRIPTION: This snippet demonstrates how to enable the rem conversion feature by setting output.convertToRem to true. This uses default configuration values for the conversion process.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/output/convert-to-rem.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    convertToRem: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling TypeScript Type Checking in Modern.js\nDESCRIPTION: This example shows how to completely disable TypeScript type checking during the build process by setting the output.disableTsChecker option to true.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/output/disable-ts-checker.mdx#2025-04-21_snippet_0\n\nLANGUAGE: js\nCODE:\n```\nexport default {\n  output: {\n    disableTsChecker: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Micro-Frontend Deployment in Modern.js\nDESCRIPTION: Example of using the deploy.microFrontend configuration in a Modern.js project. This snippet demonstrates how to enable HTML entry for a micro-frontend child application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/deploy/microFrontend.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  deploy: {\n    microFrontend: {\n      enableHtmlEntry: true,\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using @apply Directive with Sass and Important Flag\nDESCRIPTION: Example of using the @apply directive with Sass, including the correct way to use !important.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/best-practices/use-tailwindcss.mdx#2025-04-21_snippet_8\n\nLANGUAGE: sass\nCODE:\n```\n.alert {\n  @apply bg-red-500 #{!important};\n}\n```\n\n----------------------------------------\n\nTITLE: Disabling transformImport Default Behavior in Modern.js\nDESCRIPTION: Example of how to disable the transformImport feature by setting it to false in the Modern.js configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/source/transform-import.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  source: {\n    transformImport: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling Full Lazy Compilation\nDESCRIPTION: Configuration example demonstrating how to enable lazy compilation for both entries and dynamic imports.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/experiments/lazy-compilation.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  experiments: {\n    lazyCompilation: {\n      imports: true,\n      entries: true,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Importing SVG as URL in JavaScript\nDESCRIPTION: Demonstrates how to import an SVG file when svgDefaultExport is set to 'url', which returns the asset URL.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/svg-default-export.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport logo from './logo.svg';\n\nconsole.log(logo); // => asset url\n```\n\n----------------------------------------\n\nTITLE: Using modern build command in Modern.js Module\nDESCRIPTION: The modern build command is used to build module artifacts. It supports watch mode, platform-specific builds, and TypeScript configuration options.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/command-preview.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nUsage: modern build [options]\n\nBuild module command\n\nOptions:\n  -w, --watch Enable watch mode to listen for changes on the fs and automatically rebuild\n  --tsconfig [tsconfig] Specify the path to the tsconfig.json file (default:\n                         \". /tsconfig.json\")\n  --platform [platform] Build artifacts for all or specified platforms\n  --no-dts disables DTS type file generation and type checking\n  --no-clear disables automatic clearing of output directories\n  -c, --config <config>  Specify the path to the config file (default: \"modern.config.j(t)s\")\n  -h, --help Show information about the current command\n```\n\n----------------------------------------\n\nTITLE: Configuring Array-type Module Scopes with Multiple Directories\nDESCRIPTION: Demonstrates using an array to specify multiple allowed import directories. This configuration allows imports from './src', './shared', and './utils' directories.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/source/module-scopes.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  source: {\n    moduleScopes: ['./src', './shared', './utils'],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Customizing CSS Minification with Object Type in Modern.js\nDESCRIPTION: An example of how to customize the CSS minification configuration using an object type, specifically modifying the cssnano preset.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/minify-css.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    minifyCss: {\n      minimizerOptions: {\n        preset: require.resolve('cssnano-preset-simple'),\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring JSX Compilation Method in Modern.js\nDESCRIPTION: Shows how to set the JSX compilation method to support React 16 by using the 'transform' option.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_26\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    jsx: 'transform',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Custom Sass Version Configuration\nDESCRIPTION: Example showing how to use a specific Sass version by setting the implementation option.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/sass.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    sass: {\n      implementation: require('sass'),\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: SSG TypeScript Interface Definition\nDESCRIPTION: TypeScript type definitions for SSG configuration options including route options and parameters.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/ssg.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\ntype SSGRouteOptions =\n  | string\n  | {\n      url: string;\n      params?: Record<string, any>[];\n      headers?: Record<string, any>;\n    };\n\ntype SSGOptions = {\n  preventDefault?: string[];\n  headers?: Record<string, any>;\n  routes?: SSGRouteOptions[];\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Global Replacement in Modern.js (TypeScript)\nDESCRIPTION: Demonstrates how to use the source.define option to replace expressions in code with specific values.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/env-vars.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  source: {\n    define: {\n      TWO: '1 + 1',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Basic Proxy Configuration in Modern.js DevServer\nDESCRIPTION: Example of setting up a basic API proxy in the development server. This configuration forwards all requests starting with /api to http://localhost:3000, preserving the path.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/dev-server.mdx#2025-04-21_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    devServer: {\n      proxy: {\n        '/api': 'http://localhost:3000',\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Less Example with Variables and Functions\nDESCRIPTION: Shows Less usage in Modern.js Module, featuring variables, the boolean function, and conditional statements to define styles.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/best-practices/components.mdx#2025-04-21_snippet_4\n\nLANGUAGE: less\nCODE:\n```\n@bg: black;\n@bg-light: boolean(luma(@bg) > 50%);\n\ndiv {\n  background: @bg;\n  color: if(@bg-light, black, white);\n}\n```\n\n----------------------------------------\n\nTITLE: Generated TypeScript Declaration for CSS Module in Modern.js\nDESCRIPTION: This snippet shows an example of a generated TypeScript declaration file for a CSS module, including the interface for CSS exports and default export.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/enable-css-module-tsdeclaration.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ninterface CssExports {\n  title: string;\n}\nexport const cssExports: CssExports;\nexport default cssExports;\n```\n\n----------------------------------------\n\nTITLE: Importing SVG as React Component in JavaScript\nDESCRIPTION: Shows how to import an SVG file as a React component when svgDefaultExport is set to 'component'.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/svg-default-export.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport Logo from './logo.svg';\n\nconsole.log(Logo); // => React Component\n```\n\n----------------------------------------\n\nTITLE: Terminal Output for Plugin Execution\nDESCRIPTION: Shows the terminal output when running the build command with the example plugin, displaying the log messages from the plugin's initialization and afterBuild hook.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/guide/getting-started.mdx#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nThis is example plugin\nBuild succeed: 510.684ms\nbuild over\n```\n\n----------------------------------------\n\nTITLE: TypeScript Configuration for Remote Types\nDESCRIPTION: TSConfig setup to enable type hints for remote modules in the consumer application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/module-federation/usage.mdx#2025-04-21_snippet_6\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"compilerOptions\": {\n    \"paths\": {\n      \"*\": [\"./@mf-types/*\"]\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuration Property Definition for Moment.js Locale Removal\nDESCRIPTION: Defines the configuration property for controlling moment.js locale removal, including type and default value. This helps reduce bundle size by removing unused locale data.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/performance/remove-moment-locale.mdx#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n- **Type:** `boolean`\n- **Default:** `false`\n```\n\n----------------------------------------\n\nTITLE: Multi-Entry Runtime Configuration\nDESCRIPTION: Implementation of runtime configuration for multi-entry applications with conditional configuration based on entry name\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/runtime/0-intro.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { defineRuntimeConfig } from '@modern-js/runtime';\n\nexport default defineRuntimeConfig((entryName) => {\n  if (entryName === 'main') {\n    return {\n      router: {\n        // Router configuration for \"main\" entry\n      },\n      state: {\n        // State management configuration for \"main\" entry\n      },\n    };\n  }\n\n  // Configuration for other entries\n  return {\n    masterApp: {\n      // Micro-frontend configuration example\n    },\n  };\n});\n```\n\n----------------------------------------\n\nTITLE: Demonstrating Lodash Import Transformation in TypeScript\nDESCRIPTION: This example shows how Modern.js transforms Lodash imports from a single import to modular imports, reducing the overall bundle size by only including used functions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/performance/transform-lodash.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport _ from 'lodash';\nimport { add } from 'lodash/fp';\n\nconst addOne = add(1);\n_.map([1, 2, 3], addOne);\n```\n\nLANGUAGE: typescript\nCODE:\n```\nimport _add from 'lodash/fp/add';\nimport _map from 'lodash/map';\n\nconst addOne = _add(1);\n_map([1, 2, 3], addOne);\n```\n\n----------------------------------------\n\nTITLE: Defining Development Menu Question Format in Modern.js Module Tools\nDESCRIPTION: Shows the default structure of the inquirer question used in the beforeDevMenu hook. This defines how the development tool selection menu will be presented to users.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/plugin-api/plugin-hooks.md#2025-04-21_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nconst question = [\n  {\n    name: 'choiceDevTool',\n    message: 'Select dev tool',\n    type: 'list',\n    // Registered dev messages\n    choices,\n  },\n];\n```\n\n----------------------------------------\n\nTITLE: Configuring package.json for npm-library Preset\nDESCRIPTION: The package.json configuration for libraries using the npm-library preset, which defines main (CommonJS), module (ESM), and types entry points for the package.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-preset.mdx#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"main\": \"./dist/lib/index.js\",\n  \"module\": \"./dist/es/index.js\",\n  \"types\": \"./dist/types/index.d.ts\"\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring CSS Module TypeScript Declaration in Modern.js\nDESCRIPTION: This snippet demonstrates how to enable the generation of TypeScript declaration files for CSS modules in a Modern.js project configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/enable-css-module-tsdeclaration.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    enableCssModuleTSDeclaration: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Merging Runtime Chunk into Page Files in Modern.js\nDESCRIPTION: Configuration to merge the runtime chunk code into page JS files instead of generating a separate runtime chunk file. This uses the bundlerChain tool to modify the optimization settings.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/output/disable-inline-runtime-chunk.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    bundlerChain(chain) {\n      chain.optimization.runtimeChunk(false);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using useStaticModel Hook - Basic Example\nDESCRIPTION: Demonstrates the correct and incorrect ways to use useStaticModel hook when accessing model state. Shows how to properly handle state deconstruction to ensure latest state availability.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/model/use-static-model.mdx#2025-04-21_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nfunction App() {\n  // ❌ Do not deconstruct state, but can deconstruct actions.\n  const [{ username }, { logout }] = useStaticModel(userModel);\n\n  // ✅ True Usage.\n  const [state, { logout }] = useStaticModel(userModel);\n\n  useEffect(() => {\n    state.username;\n  }, []);\n}\n```\n\n----------------------------------------\n\nTITLE: Defining HTML Output Structure Configuration in Modern.js\nDESCRIPTION: This snippet shows the type definition and default value for the html.outputStructure configuration option in Modern.js. It allows setting the directory structure of HTML output files to either 'flat' or 'nested'.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/html/output-structure.mdx#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n- **Type:** `'flat' | 'nested'`\n- **Default:** `'nested'`\n```\n\n----------------------------------------\n\nTITLE: Defining the BundlerChainFn Type in TypeScript\nDESCRIPTION: Type definition for the bundlerChain function that accepts a chain object (either RspackChain or webpackChain) and a utils object containing helper properties like env, isProd, and CHAIN_ID.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/bundler-chain.mdx#2025-04-21_snippet_0\n\nLANGUAGE: ts\nCODE:\n```\ntype BundlerChainFn = (\n  chain: RspackChain | webpackChain,\n  utils: ModifyBundlerChainUtils,\n) => Promise<void> | void;\n```\n\n----------------------------------------\n\nTITLE: Configuring Side Effects in Modern.js Module\nDESCRIPTION: This example demonstrates how to configure side effects for modules in Modern.js Module. It uses regular expressions to specify which files should be treated as having side effects.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_35\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    sideEffects: [/\\.css$/],\n    // or\n    // sideEffects: (filePath, isExternal) => /\\.css$/.test(filePath),\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using Function-type Module Scopes to Extend Default Configuration\nDESCRIPTION: Shows how to use a function to modify moduleScopes without overriding default values. This approach adds './shared' to the existing scopes array rather than replacing it.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/source/module-scopes.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  source: {\n    moduleScopes: scopes => {\n      scopes.push('./shared');\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Displaying Default HTML Output Structure in Modern.js\nDESCRIPTION: Shows the default directory structure of HTML files in the 'dist' directory when 'disableHtmlFolder' is not enabled.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/html/disable-html-folder.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n/dist\n└── html\n    └── main\n        └── index.html\n```\n\n----------------------------------------\n\nTITLE: Node Polyfill Plugin Configuration Type Definition\nDESCRIPTION: Type definition for the Node Polyfill plugin configuration options, showing the available configuration properties that can be used.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/official-list/plugin-node-polyfill.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ntype NodePolyfillOptions = {\n  exclude?: string[];\n  overrides?: Record<NodePolyfillKey, string>;\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring package.json for Development with pnpm\nDESCRIPTION: Configuration for package.json to handle type definitions properly during development with pnpm. This allows developers to get real-time type information from source files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/using-storybook.mdx#2025-04-21_snippet_3\n\nLANGUAGE: ts\nCODE:\n```\n{\n    \"name\": \"foo\",\n    \"main\": \"./dist/index.js\",\n    \"types\": \"./src/index.ts\",\n    \"publishConfig\": {\n      \"types\": \"./dist/index.d.ts\",\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: RequestContext Type Definition in Modern.js\nDESCRIPTION: Type definition for RequestContext union type, which can be either ServerContext or ClientContext depending on the execution environment.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/core/use-runtime-context.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\ntype RequestContext = ServerContext | ClientContext;\n```\n\n----------------------------------------\n\nTITLE: State Interface Definition in TypeScript\nDESCRIPTION: Defines the basic state interface structure returned by handleEffect actions, including result, pending status, and error message fields.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/model/handle-effect.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface State {\n  result: any; // result of fulfilled state\n  pending: boolean; // request is pending\n  error: string; // request error message\n}\n```\n\n----------------------------------------\n\nTITLE: Copying Files to Output Directory in Modern.js Module (TypeScript)\nDESCRIPTION: This example shows how to copy a file to the default output directory (dist) using the copy.patterns configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/copy.md#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    copy: {\n      patterns: [{ from: './index.html' }],\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Enabling TypeScript Project References Build Mode\nDESCRIPTION: Configures the build to use TypeScript's build mode with project references for better incremental builds.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_16\n\nLANGUAGE: JavaScript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    dts: {\n      enableTscBuild: true,\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: TypeScript Declaration for SVG Imports\nDESCRIPTION: Demonstrates how to create and include TypeScript declarations for SVG imports, defining SVGs as React components with appropriate type information.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare module '*.svg' {\n  const src: React.FunctionComponent<React.SVGProps<SVGSVGElement>>;\n  export default src;\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Autoprefixer Using Function Type in Modern.js\nDESCRIPTION: An example of how to configure Autoprefixer using a function type in Modern.js. The function receives the default config as a parameter, which can be modified directly or returned as the final result.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/autoprefixer.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    autoprefixer(config) {\n      // modify flexbox config\n      config.flexbox = 'no-2009';\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Documentation Entries Types in TypeScript\nDESCRIPTION: Type definitions for the entries configuration that allows specifying module names and paths for automatically generated documentation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/use-module-doc.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\ntype Entries = Record<string, string>;\ntype ToolEntries = {\n  documentation: Entries;\n  'react-docgen-typescript': Entries;\n};\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of renderStreaming with createRequestHandler in React\nDESCRIPTION: Demonstrates the basic usage of renderStreaming function to create a streaming SSR response. It creates a readable stream from a React component and returns it as an HTTP response with appropriate headers.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/ssr/renderStreaming.mdx#2025-04-21_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  renderStreaming,\n  createRequestHandler,\n} from '@modern-js/runtime/ssr/server';\n\nconst handleRequest = async (request, ServerRoot, options) => {\n  const stream = await renderStreaming(request, <ServerRoot />, options);\n\n  return new Response(stream, {\n    headers: {\n      'content-type': 'text/html; charset=utf-8',\n    },\n  });\n};\n\nexport default createRequestHandler(handleRequest);\n```\n\n----------------------------------------\n\nTITLE: Adding Type Declarations for URL Parameters in TypeScript\nDESCRIPTION: This snippet shows how to add type declarations for URL parameters used in resource inlining to resolve TypeScript module resolution issues.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/page-performance/inline-assets.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare module '*?inline' {\n  const content: string;\n  export default content;\n}\n\ndeclare module '*?inline' {\n  const content: string;\n  export default content;\n}\n\ndeclare module '*?__inline' {\n  const content: string;\n  export default content;\n}\n\ndeclare module '*?inline=false' {\n  const content: string;\n  export default content;\n}\n```\n\n----------------------------------------\n\nTITLE: Build Configuration for npm-library-with-umd Preset\nDESCRIPTION: The build configuration array for the npm-library-with-umd preset that includes a UMD bundle generation in addition to CommonJS and ESM bundles.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-preset.mdx#2025-04-21_snippet_3\n\nLANGUAGE: js\nCODE:\n```\nexport const buildConfig = [\n  {\n    format: 'cjs',\n    target: 'es6',\n    buildType: 'bundle',\n    outDir: './dist/lib',\n    dts: false,\n  },\n  {\n    format: 'esm',\n    target: 'es6',\n    buildType: 'bundle',\n    outDir: './dist/es',\n    dts: false,\n  },\n  {\n    format: 'umd',\n    target: 'es6',\n    platform: 'browser',\n    buildType: 'bundle',\n    outDir: './dist/umd',\n    dts: false,\n  },\n  {\n    buildType: 'bundle',\n    outDir: './dist/types',\n    dts: {\n      only: true,\n    },\n  },\n];\n```\n\n----------------------------------------\n\nTITLE: Configuring AppIcon with String Path in JavaScript\nDESCRIPTION: A simplified way to configure application icons by directly providing the path to the icon image as a string. This is a shorthand syntax for the object-based configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/html/app-icon.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    appIcon: './src/assets/icon.png',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Changing Less Version in Modern.js\nDESCRIPTION: How to use a specific Less version instead of the default one bundled with Modern.js by setting the implementation option.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/less.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    less: {\n      implementation: require('less'),\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Async Custom Entry Rendering\nDESCRIPTION: Shows how to handle asynchronous tasks before rendering in a custom entry configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/concept/entries.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createRoot } from '@modern-js/runtime/react';\nimport { render } from '@modern-js/runtime/browser';\n\nconst ModernRoot = createRoot();\n\nasync function beforeRender() {\n  // some async request\n}\n\nbeforeRender().then(() => {\n  render(<ModernRoot />);\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring disableDefaultEntries in Modern.js\nDESCRIPTION: Demonstrates how to disable the default entry point identification behavior in Modern.js configuration. This requires subsequent manual entry point configuration using source.entries.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/disable-default-entries.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  source: {\n    disableDefaultEntries: true,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using Inline Snapshots in Jest with modern.js\nDESCRIPTION: This code demonstrates how to use toMatchInlineSnapshot matcher in Jest to create inline snapshots. It shows various ways to use this matcher including with property matchers and custom names.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/components/convention-routing-motivation.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n// With property matchers and inline snapshots\nexpect(foo).toMatchInlineSnapshot(\n  {\n    createdAt: expect.any(Date),\n    id: expect.any(Number),\n  },\n  `Snapshot name`,\n);\n```\n\n----------------------------------------\n\nTITLE: Console Error Output from LoggerMonitor\nDESCRIPTION: The console output showing the error message generated by LoggerMonitor when encountering the reference error in the React component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/internal-logger.mdx#2025-04-21_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\n> Local:    http://localhost:8080/\n> press h + enter to show shortcuts\n\nerror   SSR Error - App Prerender, error = ReferenceError: a is not defined\n    at Index (/somepath/page.tsx:3:1)\n```\n\n----------------------------------------\n\nTITLE: Disabling transformLodash in Modern.js Configuration\nDESCRIPTION: Example configuration showing how to disable the transformLodash optimization in Modern.js when the default transformation produces unexpected results.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/performance/transform-lodash.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  performance: {\n    transformLodash: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Async Configuration Function\nDESCRIPTION: Example of asynchronous configuration function that performs async operations before returning config.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/usage.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nimport { defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig(async ({ env, command }) => {\n  const result = await someAsyncFunction();\n\n  return {\n    html: {\n      title: result,\n    },\n  };\n});\n```\n\n----------------------------------------\n\nTITLE: Enabling Asset Manifest in Modern.js Configuration\nDESCRIPTION: Configuration example showing how to enable the asset manifest generation feature in Modern.js by setting the output.enableAssetManifest option to true.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/output/enable-asset-manifest.mdx#2025-04-21_snippet_0\n\nLANGUAGE: js\nCODE:\n```\nexport default {\n  output: {\n    enableAssetManifest: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Generated Asset Manifest JSON Structure Example\nDESCRIPTION: Example of the asset-manifest.json file structure generated after building the project. It shows how file paths are mapped and includes entrypoint information for the build artifacts.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/output/enable-asset-manifest.mdx#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"files\": {\n    \"main.css\": \"/static/css/main.45b01211.css\",\n    \"main.js\": \"/static/js/main.52fd298f.js\",\n    \"html/main/index.html\": \"/html/main/index.html\"\n  },\n  \"entrypoints\": [\"static/css/main.45b01211.css\", \"static/js/main.52fd298f.js\"]\n}\n```\n\n----------------------------------------\n\nTITLE: Adding External Script in HTML Fragment\nDESCRIPTION: Example of a body.html fragment that adds an external script to the page when using the HTML fragment customization approach.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/html.mdx#2025-04-21_snippet_5\n\nLANGUAGE: html\nCODE:\n```\n<script src=\"//example.com/assets/a.js\"></script>\n```\n\n----------------------------------------\n\nTITLE: Hook Function Signature Definition in TypeScript\nDESCRIPTION: This code block defines the TypeScript types for the HookContext and Hook function. It specifies the structure of the context object and the function signature for hooks.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/web-server/hook.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ntype HookContext = {\n  response: {\n    set: (key: string, value: string) => void;\n    status: (code: number) => void;\n    getStatus: () => number;\n    cookies: {\n      set: (key: string, value: string, options?: any) => void;\n      clear: () => void;\n    };\n    raw: (\n      body: string,\n      { status, headers }: { status: number; headers: Record<string, any> },\n    ) => void;\n  };\n  request: {\n    url: string;\n    host: string;\n    pathname: string;\n    query: Record<string, any>;\n    cookie: string;\n    cookies: {\n      get: (key: string) => string;\n    };\n    headers: IncomingHttpHeaders;\n  };\n};\n\nfunction Hook(context: HookContext, next: NextFunction): Promsie<void> | void;\n```\n\n----------------------------------------\n\nTITLE: Plugin Options Type Definition\nDESCRIPTION: Type definition for the plugin options showing the structure of configuration parameters.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/plugins/official-list/plugin-import.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ntype Options = {\n  pluginImport?: ImportItem[];\n};\n```\n\n----------------------------------------\n\nTITLE: Basic Modern.js Module Configuration\nDESCRIPTION: Default configuration setup for Modern.js Module with basic plugin registration and build preset specification.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/basic/modify-output-product.md#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\n\nexport default defineConfig({\n  // 注册 Modern.js Module 的 CLI 工具\n  plugins: [moduleTools()],\n  // 指定构建预设配置\n  buildPreset: 'npm-library',\n});\n```\n\n----------------------------------------\n\nTITLE: Defining DistPath Type Configuration in TypeScript\nDESCRIPTION: TypeScript type definition for the distribution path configuration object. Specifies optional paths for different file types including root, HTML, JS, CSS, SVG, fonts, WebAssembly, images, media, server, worker, and asset files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/dist-path.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype DistPathConfig = {\n  root?: string;\n  html?: string;\n  js?: string;\n  css?: string;\n  svg?: string;\n  font?: string;\n  wasm?: string;\n  image?: string;\n  media?: string;\n  server?: string;\n  worker?: string;\n  assets?: string;\n};\n```\n\n----------------------------------------\n\nTITLE: Custom Global Variables Configuration\nDESCRIPTION: Example of defining custom global variables for application configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/global-vars.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  source: {\n    globalVars: {\n      ENABLE_VCONSOLE: true,\n      APP_CONTEXT: { answer: 42 },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring TSConfig Path Resolution in Modern.js Module\nDESCRIPTION: Customizes the tsconfig-paths-webpack-plugin configuration to support resolving aliases defined in tsconfig.json files. This helps with nested @ aliases and other path mapping needs.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_40\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    resolve: {\n      tsConfig: {\n        configFile: './tsconfig.json',\n      }\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Navigation Test Case in Playwright\nDESCRIPTION: E2E test case verifying navigation between Home and About pages, including URL and content verification.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/testing/playwright.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { test, expect } from '@playwright/test'\n\ntest('should navigate to the about page', async ({ page }) => {\n  // Start from the index page (the baseURL is set via the webServer in the playwright.config.ts)\n  await page.goto('http://localhost:8080/')\n  // Find an element with the text 'About' and click on it\n  await page.click('text=About')\n  // The new URL should be \"/about\" (baseURL is used there)\n  await expect(page).toHaveURL('http://localhost:8080/about')\n  // The new page should contain an h1 with \"About\"\n  await expect(page.locator('h1')).toContainText('About')\n})\n```\n\n----------------------------------------\n\nTITLE: Deploying Modern.js Application to Production\nDESCRIPTION: Command to generate optimized production build with a web server entry file for deployment.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/concept/server.mdx#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n`modern deploy`\n```\n\n----------------------------------------\n\nTITLE: Checking Plugin Existence in Modern.js\nDESCRIPTION: Demonstrates how to check if a specific plugin is registered using isPluginExists API.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/cli-plugins/api.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nif (api.isPluginExists('@modern-js/plugin-tailwind')) {\n  console.log('Tailwind CSS plugin is enabled');\n}\n```\n\n----------------------------------------\n\nTITLE: Enabling Pug Template Engine in Modern.js\nDESCRIPTION: Basic configuration to enable Pug template engine by setting tools.pug to true. This allows using index.pug as the template file in html.template config.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/pug.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    pug: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling Automatic Extension Management\nDESCRIPTION: Configures automatic file extension handling based on module format and type, which helps with compatibility between ESM and CommonJS modules.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    autoExtension: true,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using the styled Avatar component in a List item\nDESCRIPTION: This code shows how to use the custom styled Avatar component within an Ant Design List.Item.Meta component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c03-css.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n<List.Item.Meta\n  avatar={<Avatar src={avatar} />}\n  title={name}\n  description={email}\n/>\n```\n\n----------------------------------------\n\nTITLE: Specifying Type Information for Dependent Models in Derived State\nDESCRIPTION: Example demonstrating how to specify the type for a dependent model's state when creating derived state that depends on other models.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/typescript-best-practice.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ninterface State {\n  data: string;\n}\n\nexport const bar = model<State>('bar').define({\n  state: {\n    data: '',\n  },\n  computed: {\n    // specify the type for fooState\n    withFoo: [foo, (state, fooState: FooState) => state.data + fooState.data],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using @apply with Less and Media Queries\nDESCRIPTION: Example of using @apply with Less, demonstrating the correct way to use media queries.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/best-practices/use-tailwindcss.mdx#2025-04-21_snippet_9\n\nLANGUAGE: less\nCODE:\n```\n.card {\n  @apply rounded-none;\n\n  @media (min-width: theme('screens.sm')) {\n    @apply rounded-lg;\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Overriding Built-in Node Polyfills\nDESCRIPTION: Example demonstrating how to override the built-in Node polyfills with custom implementations. This code overrides the 'fs' module with a custom implementation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/official-list/plugin-node-polyfill.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\nimport { modulePluginNodePolyfill } from '@modern-js/plugin-module-node-polyfill';\n\nexport default defineConfig({\n  plugins: [\n    moduleTools(),\n    modulePluginNodePolyfill({\n      overrides: {\n        fs: path.join(__dirname, './custom-fs.js'),\n      },\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring TypeScript Composite Setting in Library Project\nDESCRIPTION: Shows how to enable the composite option in the lib project's tsconfig.json to support TypeScript Project References.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/source-build.mdx#2025-04-21_snippet_6\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"compilerOptions\": {\n    \"composite\": true\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Using Port Placeholder in Modern.js startUrl\nDESCRIPTION: Demonstrates how to use the <port> placeholder in startUrl configuration to dynamically reference the current dev server port number.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/dev/start-url.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  dev: {\n    startUrl: 'http://localhost:<port>/home',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Accessing Webpack Plugin Chain IDs in Modern.js\nDESCRIPTION: This snippet demonstrates how to access webpack plugin chain IDs in Modern.js. The PLUGIN.XXX format is used to match specific webpack plugins. For HTML plugins, the entry name needs to be appended to the chain ID.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/webpack-chain.mdx#2025-04-21_snippet_7\n\nLANGUAGE: markdown\nCODE:\n```\n#### CHAIN_ID.PLUGIN\n\n`PLUGIN.XXX` can match a certain webpack plugin.\n\n| ID                             | Description                                                                                                    |\n| ------------------------------ | -------------------------------------------------------------------------------------------------------------- |\n| `PLUGIN.HMR`                   | correspond to `HotModuleReplacementPlugin`                                                                     |\n| `PLUGIN.COPY`                  | correspond to `CopyWebpackPlugin`                                                                              |\n| `PLUGIN.HTML`                  | correspond to `HtmlWebpackPlugin`, you need to splice the entry name when using: `${PLUGIN.HTML}-${entryName}` |\n| `PLUGIN.DEFINE`                | correspond to `DefinePlugin`                                                                                   |\n| `PLUGIN.IGNORE`                | correspond to `IgnorePlugin`                                                                                   |\n| `PLUGIN.BANNER`                | correspond to `BannerPlugin`                                                                                   |\n| `PLUGIN.PROGRESS`              | correspond to `Webpackbar`                                                                                     |\n| `PLUGIN.APP_ICON`              | correspond to `AppIconPlugin`                                                                                  |\n| `PLUGIN.MANIFEST`              | correspond to `WebpackManifestPlugin`                                                                          |\n| `PLUGIN.TS_CHECKER`            | correspond to `ForkTsCheckerWebpackPlugin`                                                                     |\n| `PLUGIN.INLINE_HTML`           | correspond to `InlineChunkHtmlPlugin`                                                                          |\n| `PLUGIN.BUNDLE_ANALYZER`       | correspond to `WebpackBundleAnalyzer`                                                                          |\n| `PLUGIN.MINI_CSS_EXTRACT`      | correspond to `MiniCssExtractPlugin`                                                                           |\n| `PLUGIN.VUE_LOADER_PLUGIN`     | correspond to `VueLoaderPlugin`                                                                                |\n| `PLUGIN.REACT_FAST_REFRESH`    | correspond to `ReactFastRefreshPlugin`                                                                         |\n| `PLUGIN.NODE_POLYFILL_PROVIDE` | correspond to `ProvidePlugin` for node polyfills                                                               |\n| `PLUGIN.SUBRESOURCE_INTEGRITY` | correspond to `webpack-subresource-integrity`                                                                  |\n| `PLUGIN.ASSETS_RETRY`          | correspond to webpack static asset retry plugin                                                                |\n| `PLUGIN.AUTO_SET_ROOT_SIZE`    | correspond to automatically set root font size plugin                                                          |\n```\n\n----------------------------------------\n\nTITLE: Copying Files from Custom Directory in Modern.js Module (TypeScript)\nDESCRIPTION: This snippet demonstrates how to copy a file from a custom directory by modifying the context configuration in copy.patterns.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/copy.md#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport path from 'path';\n\nexport default defineConfig({\n  buildConfig: {\n    copy: {\n      patterns: [\n        {\n          from: './index.html',\n          context: path.join(__dirname, './temp')\n          to: '',\n        }\n      ],\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Disabling Path Redirection in Bundleless Mode with Modern.js Module\nDESCRIPTION: Disables automatic path transformations in bundleless mode that would normally adjust import paths to reference the correct output files for styles, assets, and extensions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_37\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  buildConfig: {\n    redirect: {\n      alias: false, // 关闭对别名路径的修改\n      style: false, // 关闭对样式文件路径的修改\n      asset: false, // 关闭对资源文件路径的修改\n      autoExtension: false, // 关闭对 js 文件后缀的修改\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Overriding Built-in Node Polyfills in Modern.js Module\nDESCRIPTION: This code demonstrates how to override built-in Node polyfills with custom implementations. In this example, the 'fs' module is overridden with a custom file system implementation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/plugins/official-list/plugin-node-polyfill.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\nimport { modulePluginNodePolyfill } from '@modern-js/plugin-module-node-polyfill';\n\nexport default defineConfig({\n  plugins: [\n    moduleTools(),\n    modulePluginNodePolyfill({\n      overrides: {\n        fs: path.join(__dirname, './custom-fs.js'),\n      },\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Registering Tailwind Plugin in Modern.js Config\nDESCRIPTION: Code to register the Tailwind plugin in the modern.config.ts file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/best-practices/use-tailwindcss.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { tailwindcssPlugin } from '@modern-js/plugin-tailwindcss';\n\nexport default defineConfig({\n  plugins: [..., tailwindcssPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Using Wildcard Routes to Capture Remaining URL Parts\nDESCRIPTION: Example showing how to use wildcard routes ($.tsx) to capture the remaining parts of a URL path and access them via the useParams hook.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/routes.mdx#2025-04-21_snippet_5\n\nLANGUAGE: ts\nCODE:\n```\nimport { useParams } from '@modern-js/runtime/router';\n\nfunction Blog() {\n  // 当 path 是 `/blog/aaa/bbb` 时\n  const params = useParams();\n  console.log(params) // ---> { '*': 'aaa/bbb' }\n\n  return <div>current blog URL is {params[\"*\"]}</div>;\n}\nexport default Blog;\n```\n\n----------------------------------------\n\nTITLE: Configuring Output Directory in JavaScript\nDESCRIPTION: Adds a new configuration option 'output.tempDir' to support launching projects with multiple configurations simultaneously.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/cli/core/CHANGELOG.md#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\noutput.tempDir\n```\n\n----------------------------------------\n\nTITLE: Configuring UMD Globals in Modern.js Module (JavaScript)\nDESCRIPTION: Specifies global variables for external imports in UMD artifacts. This configuration allows React and ReactDOM to be treated as external global variables in the UMD build.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_44\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  buildConfig: {\n    umdGlobals: {\n      react: 'React',\n      'react-dom': 'ReactDOM',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Modern.js Project with Plugins and Build Settings\nDESCRIPTION: This snippet defines the main configuration for a Modern.js project. It includes various plugins for LESS compilation, CSS modules, and custom webpack configuration. The configuration also sets up the development server and output options.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/components/faq-build-product.mdx#2025-04-21_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport { defineConfig } from '@modern-js/app-tools';\nimport { lessLoader } from '@modern-js/plugin-less';\n\nexport default defineConfig({\n  output: {\n    disableTsChecker: true,\n    disableMinimize: true,\n    cssModules: {\n      auto: true,\n    },\n  },\n  tools: {\n    less: {\n      lessOptions: {\n        javascriptEnabled: true,\n      },\n    },\n    webpackChain: chain => {\n      chain.module\n        .rule('less')\n        .test(/\\.less$/)\n        .use('less-loader')\n        .loader(lessLoader)\n        .options({\n          lessOptions: {\n            javascriptEnabled: true,\n          },\n        });\n    },\n  },\n  server: {\n    port: 8080,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Release Command with Tag Example\nDESCRIPTION: Example of using the modern release command with a specific tag for beta releases.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/basic/publish-your-project.mdx#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nmodern release --tag beta\n```\n\n----------------------------------------\n\nTITLE: Example Asset Manifest JSON Output in Modern.js\nDESCRIPTION: This JSON snippet shows an example of the generated asset manifest file (dist/manifest.json) after compilation. It includes file mappings and entrypoints for CSS and JS assets.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/enable-asset-manifest.mdx#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"files\": {\n    \"main.css\": \"/static/css/main.45b01211.css\",\n    \"main.js\": \"/static/js/main.52fd298f.js\",\n    \"html/main/index.html\": \"/html/main/index.html\"\n  },\n  \"entrypoints\": [\"static/css/main.45b01211.css\", \"static/js/main.52fd298f.js\"]\n}\n```\n\n----------------------------------------\n\nTITLE: WebAssembly URL Resolution in JavaScript\nDESCRIPTION: Shows how to get the resolved URL path of a WebAssembly module using the new URL constructor.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/static-assets/wasm-assets.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst wasmURL = new URL('./add.wasm', import.meta.url);\n\nconsole.log(wasmURL).pathname; // \"/static/wasm/[hash].module.wasm\"\n```\n\n----------------------------------------\n\nTITLE: Output JavaScript for Small Images (Inlined)\nDESCRIPTION: The resulting JavaScript output when the imported image is less than 10kb. In this case, the image is inlined as a base64 data URL.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/asset.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nvar bg_default = 'data:image/png;base64,';\nconsole.info(bg_default);\n```\n\n----------------------------------------\n\nTITLE: Importing Component with Alias in TypeScript\nDESCRIPTION: Demonstrates importing a component with an alias from a library.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/official/cli-plugins/plugin-swc.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport { MyButton as Btn } from 'foo';\n```\n\n----------------------------------------\n\nTITLE: Merging Webpack Configurations\nDESCRIPTION: Example showing how to merge webpack configurations using the mergeConfig utility function.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/webpack.mdx#2025-04-21_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    webpack: (config, { mergeConfig }) => {\n      return mergeConfig(config, {\n        devtool: 'eval',\n      });\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Generated change log file content\nDESCRIPTION: This snippet shows the content of the Markdown file generated by the 'modern change' command, which contains the change log information.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/publish-your-project.mdx#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n---\n\"``module-example'': patch\n---\n\npublish test\n```\n\n----------------------------------------\n\nTITLE: Advanced SWC Configuration with Function in Modern.js\nDESCRIPTION: This example demonstrates a more flexible way to configure SWC in Modern.js using a function. It shows how to modify specific default configurations, such as enabling useDefineForClassFields for MobX decorator compilation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/swc.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig({\n  tools: {\n    swc(config, { setConfig }) {\n      // 用于 mobx 中 decorator 编译\n      setConfig(config, 'jsc.transform.useDefineForClassFields', true);\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Plugin Options Type Definition\nDESCRIPTION: Type definition for the polyfill plugin configuration options, showing the available configuration parameters.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/official-list/plugin-polyfill.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\ntype options = {\n  targets?: Record<string, string> | string;\n};\n```\n\n----------------------------------------\n\nTITLE: Defining Decorator Configuration Type in TypeScript\nDESCRIPTION: This snippet defines the TypeScript type for decorator configuration. It specifies the 'version' property which can be either 'legacy' or '2022-03'.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/source/decorators.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype Decorators = {\n  version?: 'legacy' | '2022-03';\n};\n```\n\n----------------------------------------\n\nTITLE: ESM Format Configuration for Modern.js Module\nDESCRIPTION: Configuration example showing how to set the build format to ESM in Modern.js, which can lead to the 'Dynamic require' issue with CommonJS dependencies.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/faq/build.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    format: 'esm',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Multi-Entry Application Structure\nDESCRIPTION: Shows the directory structure after creating multiple entry points in Modern.js application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/concept/entries.mdx#2025-04-21_snippet_2\n\nLANGUAGE: plaintext\nCODE:\n```\n.\n├── myapp    # 原入口\n│   └── routes\n│       ├── index.css\n│       ├── layout.tsx\n│       └── page.tsx\n└── new-entry # 新入口\n    └── routes\n        ├── index.css\n        ├── layout.tsx\n        └── page.tsx\n```\n\n----------------------------------------\n\nTITLE: Disabling Runtime Chunk Inlining in Modern.js\nDESCRIPTION: Configuration to prevent the runtime chunk from being inlined into HTML files. Setting disableInlineRuntimeChunk to true will generate a separate builder-runtime.js file in the output directory instead of inlining it in HTML.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/output/disable-inline-runtime-chunk.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    disableInlineRuntimeChunk: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Array Type moduleScopes in Modern.js\nDESCRIPTION: Demonstrates how to set multiple paths directly using the array type configuration for moduleScopes in Modern.js.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/module-scopes.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  source: {\n    moduleScopes: ['./src', './shared', './utils'],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Module Resolution in Modern.js\nDESCRIPTION: Demonstrates how to customize module resolution options, including main fields and file extensions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_33\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    resolve: {\n      mainFields: ['js:source', 'module', 'main'],\n      jsExtentions: ['.mts', 'ts'],\n      tsConfig: {\n        configFile: './tsconfig.json',\n      }\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Enabling SSG in Modern.js via CLI\nDESCRIPTION: Command line input for enabling the SSG feature in Modern.js through the 'pnpm run new' command.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/render/ssg.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n? 请选择你想要的操作 启用可选功能\n? 请选择功能名称 启用「SSG」功能\n```\n\n----------------------------------------\n\nTITLE: Accessing Plugin API Objects in TypeScript\nDESCRIPTION: Demonstrates how to use the setup function to access various API methods for retrieving configuration and context information in a Modern.js Module plugin.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/guide/setup-function.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport const myPlugin = (): CliPlugin<ModuleTools> => ({\n  name: 'my-plugin',\n\n  setup(api) {\n    // Get the original configuration of the application\n    const config = api.useConfigContext();\n    // Get the application runtime context\n    const appContext = api.useAppContext();\n    // Get the final configuration after resolving\n    const resolvedConfig = api.useResolvedConfigContext();\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Exporting Modern.js Configuration Object in JavaScript\nDESCRIPTION: This snippet exports a configuration object for a Modern.js project. It includes settings for the dev server, build process, and output options. The configuration uses environment variables and conditional logic to determine certain values.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/router-legacy-tip.mdx#2025-04-21_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nmodule.exports = {\n  dev: {\n    https: process.env.HTTPS === 'true',\n    port: process.env.PORT ? Number(process.env.PORT) : 8080,\n    assetPrefix: process.env.ASSET_PREFIX,\n  },\n  runtime: {\n    router: true,\n  },\n  source: {\n    disableModuleSplit: process.env.BUNDLE === 'true',\n  },\n  output: {\n    ssg: process.env.SSG === 'true',\n    polyfill: 'ua',\n    disableInlineRuntimeChunk: true,\n    disableFilenameHash: process.env.FILENAME_HASH === 'false',\n    disableTsChecker: true,\n    cssModuleLocalIdentName:\n      process.env.NODE_ENV === 'development'\n        ? '[path][name]__[local]--[hash:base64:5]'\n        : '[name]__[local]--[hash:base64:5]',\n  },\n  tools: {\n    webpack: (config, { webpack }) => {\n      // your webpack config\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling Asset Inlining with Zero Limit\nDESCRIPTION: Configures the asset size limit to 0, preventing any assets from being inlined as base64, ensuring all assets are served as separate files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_4\n\nLANGUAGE: JavaScript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    asset: {\n      limit: 0,\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Defining Proxy Rules in External File\nDESCRIPTION: Example of proxy rules defined in a separate JavaScript file with pattern matching.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/global-proxy-config.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nmodule.exports = {\n  name: 'my-app',\n  rules: `\n    ^example.com:8080/api/***   http://localhost:3001/api/$\n  `,\n};\n```\n\n----------------------------------------\n\nTITLE: Modifying Storybook Core Server for Better Error Visibility\nDESCRIPTION: JavaScript code modification for the Storybook core server to help surface error messages. This change catches and logs preview errors that might otherwise be hidden.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/faq/storybook.mdx#2025-04-21_snippet_2\n\nLANGUAGE: js\nCODE:\n```\nvar _await$Promise$all = await Promise.all([\n    preview.catch(e => console.info(e)),\n    manager // TODO #13083 Restore this when compiling the preview is fast enough\n  // .then((result) => {\n  //   if (!options.ci && !options.smokeTest) openInBrowser(address);\n  //   return result;\n  // })\n  .catch(previewBuilder.bail)]),\n      _await$Promise$all2 = _slicedToArray(_await$Promise$all, 2),\n      previewResult = _await$Promise$all2[0],\n      managerResult = _await$Promise$all2[1]; // TODO #13083 Remove this when compiling the preview is fast enough\n```\n\n----------------------------------------\n\nTITLE: Defining Input Types for Build Configuration\nDESCRIPTION: Specifies the type definition for the input option, which can be an array of strings or an object with string key-value pairs.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_21\n\nLANGUAGE: typescript\nCODE:\n```\ntype Input =\n  | string[];\n  | {\n      [name: string]: string;\n    }\n```\n\n----------------------------------------\n\nTITLE: Default Less Configuration in Modern.js\nDESCRIPTION: Default configuration options for Less in Modern.js, including enabling JavaScript in Less and source maps in development.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/less.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultOptions = {\n  lessOptions: {\n    javascriptEnabled: true,\n  },\n  // CSS Source Map enabled by default in development environment\n  sourceMap: isDev,\n};\n```\n\n----------------------------------------\n\nTITLE: Importing defineConfig from Modern.js Runtime\nDESCRIPTION: Example of importing the defineConfig function from the Modern.js runtime package, which is used for dynamic configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/app/define-config.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@modern-js/runtime';\n```\n\n----------------------------------------\n\nTITLE: 使用 PostCSS 开发样式\nDESCRIPTION: 展示了如何使用 PostCSS 及其内置插件开发样式。这个例子使用了嵌套语法，这是由 postcss-nesting 插件提供的功能。\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/best-practices/components.mdx#2025-04-21_snippet_2\n\nLANGUAGE: less\nCODE:\n```\na,\nb {\n  color: red;\n\n  /* \"&\" comes first */\n  & c,\n  & d {\n    color: white;\n  }\n\n  /* \"&\" comes later, requiring \"@nest\" */\n  @nest e & {\n    color: yellow;\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Global Proxy Config Component in Markdown\nDESCRIPTION: This code snippet renders the imported GlobalProxyConfig component within the Markdown document, which will display the proxy configuration details to the user.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/dev/proxy.mdx#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n<GlobalProxyConfig />\n```\n\n----------------------------------------\n\nTITLE: Removing Webpack Plugins\nDESCRIPTION: Example demonstrating how to remove internal webpack plugins using the removePlugin utility function.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/webpack.mdx#2025-04-21_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    webpack: (config, { removePlugin }) => {\n      removePlugin('ForkTsCheckerWebpackPlugin');\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring BFF Service Domain for Cross-Project Calls\nDESCRIPTION: Configuration for specifying the BFF service domain when making cross-project API calls, using the configure function from the package's runtime.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/bff/cross-project.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { configure } from '${package_name}/runtime';\n\nconfigure({\n  setDomain() {\n    return 'https://your-bff-api.com';\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Defining CSS Modules Configuration Type in TypeScript\nDESCRIPTION: This snippet defines the type for CSS Modules configuration in Modern.js. It includes options for auto-enabling, export conventions, global exports, local identity naming, mode selection, and named exports.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/output/css-modules.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype CssModules = {\n  auto?:\n    | boolean\n    | RegExp\n    | ((resourcePath: string, resourceQuery: string, resourceFragment: string,) => boolean);\n  exportLocalsConvention?:\n    | 'asIs'\n    | 'camelCase'\n    | 'camelCaseOnly'\n    | 'dashes'\n    | 'dashesOnly';\n  exportGlobals?: boolean;\n  localIdentName?: string;\n  mode?:\n    | 'local'\n    | 'global'\n    | 'pure'\n    | 'icss'\n    | ((resourcePath: string) => 'local' | 'global' | 'pure' | 'icss');\n  namedExport?: boolean;\n};\n```\n\n----------------------------------------\n\nTITLE: Default Less Configuration in Modern.js\nDESCRIPTION: The default configuration for the less-loader in Modern.js, enabling JavaScript in Less and setting up source maps for development environment.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/less.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultOptions = {\n  lessOptions: {\n    javascriptEnabled: true,\n  },\n  // 默认在开发环境下启用 CSS 的 Source Map\n  sourceMap: isDev,\n};\n```\n\n----------------------------------------\n\nTITLE: Defining dev.liveReload Configuration in Modern.js\nDESCRIPTION: This snippet shows the type definition and default value for the dev.liveReload configuration option in Modern.js. It is a boolean property that defaults to true, enabling automatic page reloads when source files change.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/dev/live-reload.mdx#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n- **Type:** `boolean`\n- **Default:** `true`\n```\n\n----------------------------------------\n\nTITLE: Defining useStore Hook in TypeScript for Modern.js\nDESCRIPTION: This code snippet defines the function signature for the useStore hook in TypeScript. The hook returns a ReduckStore, which is the shared store for the current component tree. It's important to note that useStore is a React Hook and can only be used within components.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/model/use-store.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction useStore(): ReduckStore;\n```\n\n----------------------------------------\n\nTITLE: Pre-Compiler Creation Hook in Modern.js\nDESCRIPTION: Demonstrates executing logic before compiler instance creation using onBeforeCreateCompiler hook.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/cli-plugins/api.mdx#2025-04-21_snippet_21\n\nLANGUAGE: typescript\nCODE:\n```\napi.onBeforeCreateCompiler(() => {\n    // Can get compiler related configuration\n});\n```\n\n----------------------------------------\n\nTITLE: Loadable Function Type Definition in TypeScript\nDESCRIPTION: The TypeScript type definition of the loadable function, including its options parameter with resolveComponent, fallback, and ssr properties.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/utility/loadable.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ntype Options = {\n  resolveComponent?: (\n    module: Module,\n    props: Props,\n  ) => React.ComponentType<Props>,\n  fallback?: JSX.Element;\n  ssr?: boolean;\n}\n\nfunction loadable(loadFn: Function, options?: Options) => LoadableComponent\n```\n\n----------------------------------------\n\nTITLE: Installing react-dom Dependency for Storybook\nDESCRIPTION: JSON configuration showing how to add react-dom as a dev dependency to resolve the 'Cannot find module' error in Storybook.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/faq/storybook.mdx#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"devDependencies\": {\n        \"react-dom\": \"^17\"\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Nonce Type in TypeScript\nDESCRIPTION: Type definition for the security nonce configuration value, which must be a string. This is used to add nonce attributes to script resources for Content Security Policy (CSP) compliance.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/security/nonce.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype Nonce = string;\n```\n\n----------------------------------------\n\nTITLE: Enabling Metafile Generation for Build Analysis\nDESCRIPTION: Shows how to enable the generation of a metafile for build analysis in bundle mode.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_28\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    buildType: 'bundle',\n    metafile: true,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: JavaScript Configuration Example\nDESCRIPTION: Basic JavaScript configuration example showing alias configuration using the .js format.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/usage.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  source: {\n    alias: opts => {\n      opts['@common'] = './src/common';\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Analyzing Duplicate Dependencies with pnpm-deduplicate\nDESCRIPTION: Command to list all duplicate dependencies using pnpm-deduplicate for pnpm versions below 7.26.0.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/page-performance/optimize-bundle.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx pnpm-deduplicate --list\n```\n\n----------------------------------------\n\nTITLE: Route Handle Configuration\nDESCRIPTION: Example of route handle configuration for breadcrumb information.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/routes.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport const handle = {\n  breadcrumbName: 'profile',\n};\n```\n\n----------------------------------------\n\nTITLE: Package Dependencies Configuration for UMD\nDESCRIPTION: Example package.json showing a dependency on React that will be handled as an external dependency in a UMD build.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/build-umd.mdx#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"dependencies\": {\n    \"react\": \"^17\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring UMD Module Name in Modern.js Module (JavaScript)\nDESCRIPTION: Sets the module name for the UMD output. This configuration specifies 'myLib' as the global variable name for the UMD build.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_45\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  buildConfig: {\n    format: 'umd',\n    umdModuleName: 'myLib',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Displaying JS/TS Build Errors in Modern.js Module\nDESCRIPTION: Shows an example of how build errors for JavaScript or TypeScript are displayed in the terminal when using Modern.js Module. It includes information about the build format and target.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/in-depth-about-build.md#2025-04-21_snippet_8\n\nLANGUAGE: bash\nCODE:\n```\nerror  ModuleBuildError:\n\n╭───────────────────────╮\n│ bundle failed:        │\n│  - format is \"cjs\"    │\n│  - target is \"esnext\" │\n╰───────────────────────╯\n\nDetailed Information:\n```\n\n----------------------------------------\n\nTITLE: Destructuring State Pattern with useStaticModel in TypeScript React\nDESCRIPTION: Demonstrates correct and incorrect patterns for destructuring state when using useStaticModel. Shows that while actions can be destructured, state should not be destructured to ensure latest state access.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/model/use-static-model.mdx#2025-04-21_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nfunction App() {\n  // ❌ 不能解构 state，但可以解构 actions。\n  const [{ username }, { logout }] = useStaticModel(userModel);\n\n  // ✅ 这才是正确使用姿势。\n  const [state, { logout }] = useStaticModel(userModel);\n\n  useEffect(() => {\n    state.username;\n  }, []);\n}\n```\n\n----------------------------------------\n\nTITLE: Defining ChunkSplit Types in TypeScript for Modern.js\nDESCRIPTION: This code snippet defines the TypeScript types for the chunkSplit configuration in Modern.js. It includes types for different splitting strategies such as 'split-by-module', 'split-by-experience', 'all-in-one', 'single-vendor', 'split-by-size', and 'custom'. It also defines types for force splitting and override options.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/performance/chunk-split.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype ForceSplitting = RegExp[] | Record<string, RegExp>;\n\ninterface BaseChunkSplit {\n  strategy?:\n    | 'split-by-module'\n    | 'split-by-experience'\n    | 'all-in-one'\n    | 'single-vendor';\n  override?: SplitChunks;\n  forceSplitting?: ForceSplitting;\n}\n\ninterface SplitBySize {\n  strategy?: 'split-by-size';\n  minSize?: number;\n  maxSize?: number;\n  override?: SplitChunks;\n  forceSplitting?: ForceSplitting;\n}\n\ninterface SplitCustom {\n  strategy?: 'custom';\n  splitChunks?: SplitChunks;\n  forceSplitting?: ForceSplitting;\n}\n\nexport type ChunkSplit = BaseChunkSplit | SplitBySize | SplitCustom;\n```\n\n----------------------------------------\n\nTITLE: Dynamic UMD Module Name Configuration in Modern.js\nDESCRIPTION: This example shows how to use a function to dynamically set the UMD module name based on the output path. It allows different module names for different files, such as 'myLib' for the index file and 'myLib2' for others.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_42\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    format: 'umd',\n    umdModuleName: path => {\n      if (path.includes('index')) {\n        return 'myLib';\n      } else {\n        return 'myLib2';\n      }\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Lodash Extension Options\nDESCRIPTION: Type definition and default options for the Lodash extension, which converts Lodash imports to more efficient on-demand imports.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/official/cli-plugins/plugin-swc.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\ntype LodashOptions = {\n  cwd?: string;\n  ids?: string[];\n};\n\nconst defaultOptions = {\n  cwd: process.cwd(),\n  ids: ['lodash', 'lodash-es'],\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring webpack based on target environment\nDESCRIPTION: Example of modifying webpack configuration based on the target runtime environment (web, node, modern-web, or web-worker) using the target parameter.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/webpack-chain.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    webpackChain: (chain, { target }) => {\n      if (target === 'node') {\n        // ...\n      }\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining Minify Configuration Type in TypeScript\nDESCRIPTION: Type definition for the minify configuration option that allows boolean or object configuration for JavaScript and CSS minification settings. The object configuration enables fine-grained control over minification options for both JS and CSS through dedicated minimizer plugins.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/minify.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype Minify =\n  | boolean\n  | {\n      js?: boolean;\n      jsOptions?: SwcJsMinimizerRspackPluginOptions;\n      css?: boolean;\n      cssOptions?: LightningCssMinimizerRspackPluginOptions;\n    };\n```\n\n----------------------------------------\n\nTITLE: Module Federation Consumer Configuration\nDESCRIPTION: Configuration for the consumer application, specifying remote module references and shared dependencies.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/module-federation/usage.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createModuleFederationConfig } from '@module-federation/modern-js';\n\nexport default createModuleFederationConfig({\n  name: 'host',\n  remotes: {\n    remote: 'remote@http://localhost:3051/static/mf-manifest.json',\n  },\n  shared: {\n    react: { singleton: true },\n    'react-dom': { singleton: true },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Defining useLocation Hook in TypeScript\nDESCRIPTION: Declaration of the useLocation hook, which returns the current location object.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/router/router.mdx#2025-04-21_snippet_2\n\nLANGUAGE: TypeScript\nCODE:\n```\ndeclare function useLocation(): Location;\n\ninterface Location extends Path {\n  state: unknown;\n  key: Key;\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Polyfill Plugin in Modern.js Config File\nDESCRIPTION: This TypeScript code snippet shows how to register the Polyfill plugin in the Modern.js configuration file. It imports the plugin and adds it to the plugins array in the configuration object.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/ua-polyfill.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { polyfillPlugin } from '@modern-js/plugin-polyfill';\n\nexport default defineConfig({\n  plugins: [..., polyfillPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Port Placeholder Usage in StartUrl Configuration\nDESCRIPTION: Shows how to use the <port> placeholder in the startUrl configuration to dynamically reference the current development server port.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/dev/start-url.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  dev: {\n    startUrl: 'http://localhost:<port>/home',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Advanced Cache Identifier Configuration with Query and Header\nDESCRIPTION: Example showing how to configure PreRender to include specific query parameters and headers in cache identifier calculation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/ssr/pre-render.mdx#2025-04-21_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n/* calculate cache identifier using channel in query and language in header */\n<PreRender\n  interval={10}\n  level={2}\n  includes={{\n    query: ['channel'],\n    header: ['language'],\n  }}\n/>\n```\n\n----------------------------------------\n\nTITLE: Modern.js Deploy Command Usage\nDESCRIPTION: Shows the command line syntax and options for the 'modern deploy' command. The command supports specifying a config file path, skipping the build stage, and displaying help information.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/deploy-command.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nUsage: modern deploy [options]\n\nOptions:\n  -c --config <config>  Specify configuration file path, either relative or absolute\n  -s --skip-build       Skip the build stage\n  -h, --help            Display command help\n```\n\n----------------------------------------\n\nTITLE: Configuring TypeScript for SDK Type Generation\nDESCRIPTION: TypeScript configuration required to generate type definitions for the BFF SDK, enabling proper type hints when the API is consumed by other projects.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/bff/cross-project.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n\"compilerOptions\": {\n    \"declaration\": true,\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Storybook Manager App in Modern.js Module\nDESCRIPTION: Example showing how to configure the Storybook Manager app section by creating a main.js file in the config/storybook directory.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/dev.md#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n// ./config/storybook/main.js\n\nmodule.exports = {\n  // it controls the Storybook manager app\n  managerWebpack: async (config, options) => {\n    // update config here\n    return config;\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Handling Effect Return Values in a React Component with TypeScript\nDESCRIPTION: This snippet illustrates how to use the return value of an effect in a React component. It shows an example of sending data and then performing different actions based on the result.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/model/manage-effects.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\n// 代码仅做示意，不能执行\n// 组件内部 发送按钮 的响应函数\nconst handleClick = async () => {\n  // sendData 返回代表状态的字符串\n  const result = await actions.sendData('some data');\n  if (result === 'success') {\n    // 关闭弹窗\n    closeModal();\n  } else {\n    // 显示错误\n    showError(result);\n  }\n};\n```\n\n----------------------------------------\n\nTITLE: Executing Modern Inspect Command\nDESCRIPTION: Example of running the modern inspect command which generates Rsbuild and webpack configuration files in the project's dist directory.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/commands.mdx#2025-04-21_snippet_11\n\nLANGUAGE: bash\nCODE:\n```\n➜ npx modern inspect\n\nInspect config succeed, open following files to view the content:\n\n  - Rsbuild Config: /root/my-project/dist/rsbuild.config.mjs\n  - Webpack Config (web): /root/my-project/dist/webpack.config.web.mjs\n```\n\n----------------------------------------\n\nTITLE: Customizing Rsbuild Configuration for Storybook\nDESCRIPTION: Example of using builderConfig to customize Rsbuild configuration for Storybook in Modern.js, showing how to set aliases for React and React DOM.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/using-storybook.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nconst config = {\n  framework: {\n    name: '@modern-js/storybook',\n    options: {\n      builderConfig: {\n        alias: {\n          react: require.resolve('react'),\n          'react-dom': require.resolve('react-dom'),\n        },\n      },\n    },\n  },\n};\n\nexport default config;\n```\n\n----------------------------------------\n\nTITLE: Configuring Babel Plugin with Preset-env in Modern.js Module Tools\nDESCRIPTION: This snippet illustrates how to configure the Babel plugin with @babel/preset-env in Modern.js module tools. It shows the setup for using preset-env within the Babel plugin configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/official-list/plugin-babel.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\nimport { modulePluginBabel } from '@modern-js/plugin-module-babel';\n\nexport default defineConfig({\n  plugins: [\n    moduleTools(),\n    modulePluginBabel({\n      presets: [['@babel/preset-env']],\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Emotion Extension Options\nDESCRIPTION: Type definition for the Emotion extension options, which provides integration with the Emotion CSS-in-JS library.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/official/cli-plugins/plugin-swc.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nboolean | {\n  // default is true. It will be disabled when build type is production.\n  sourceMap?: boolean,\n  // default is 'dev-only'.\n  autoLabel?: 'never' | 'dev-only' | 'always',\n  // default is '[local]'.\n  // Allowed values: `[local]` `[filename]` and `[dirname]`\n  // This option only works when autoLabel is set to 'dev-only' or 'always'.\n  // It allows you to define the format of the resulting label.\n  // The format is defined via string where variable parts are enclosed in square brackets [].\n  // For example labelFormat: \"my-classname--[local]\", where [local] will be replaced with the name of the variable the result is assigned to.\n  labelFormat?: string,\n  // default is undefined.\n  // This option allows you to tell the compiler what imports it should\n  // look at to determine what it should transform so if you re-export\n  // Emotion's exports, you can still use transforms.\n  importMap?: {\n    [packageName: string]: {\n      [exportName: string]: {\n        canonicalImport?: [string, string],\n        styledBaseImport?: [string, string],\n      }\n    }\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Importing Rsbuild Config Component\nDESCRIPTION: Import statement for the Rsbuild configuration tooltip component used in the documentation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/dev/hmr.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport RsbuildConig from '@site-docs-en/components/rsbuild-config-tooltip';\n```\n\n----------------------------------------\n\nTITLE: Configuring TypeScript Project References in App Project\nDESCRIPTION: Shows how to configure TypeScript Project References in the app's tsconfig.json to properly reference the lib project for better type checking and navigation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/source-build.mdx#2025-04-21_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"references\": [\n    {\n      \"path\": \"../lib\"\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Enabling Lightning CSS Loader in Modern.js\nDESCRIPTION: Sets the tools.lightningcssLoader option to true to enable the built-in Lightning CSS loader in a Modern.js project. This simple configuration activates the loader with default settings.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/lightningcss-loader.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    lightningcssLoader: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Development Build Output with writeToDisk\nDESCRIPTION: Configuration option that controls whether files produced during development builds are written to disk. By default, it prevents hot-update files from being written while allowing other files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/dev/write-to-disk.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n(file) => !file.includes('.hot-update.')\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom Loaders in Modern.js\nDESCRIPTION: Demonstrates how to change the interpretation method of input files using the loader option, such as handling .js files as JSX.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_27\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    loader: {\n      '.js': 'jsx',\n    }\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Project Directory Structure Example\nDESCRIPTION: Example showing the directory structure for Document.tsx files and entries\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/html.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n.\n└── src\n    ├── Document.tsx\n    ├── entry-a\n    │   ├── Document.tsx\n    │   └── routes\n    ├── entry-b\n    │    └── routes\n    └── modern-app-env.d.ts\n```\n\n----------------------------------------\n\nTITLE: 在终端中启用 UA Polyfill 功能 - Modern.js\nDESCRIPTION: 通过 Modern.js 微生成器在终端交互方式启用基于 UA 的 Polyfill 功能。\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/components/ua-polyfill.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n? 请选择你想要的操作 启用可选功能\n? 请选择功能名称 启用「基于 UA 的 Polyfill」功能\n```\n\n----------------------------------------\n\nTITLE: Serving a Built Modern.js Project in Bash\nDESCRIPTION: Command to serve the built Modern.js project locally for verification. It shows how to start the production server and the URLs where the application can be accessed.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/get-started/quick-start.mdx#2025-04-21_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\n$ pnpm run serve\n\n> modern serve\n\n  Modern.js Framework\n\ninfo    Starting production server...\n\n  > Local:    http://localhost:8080/\n  > Network:  http://192.168.0.1:8080/\n```\n\n----------------------------------------\n\nTITLE: Configuring Modern.js Module in TypeScript\nDESCRIPTION: This snippet shows how to create a configuration file for Modern.js Module using TypeScript. It imports necessary functions and defines the configuration with plugins.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/intro/getting-started.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\n\nexport default defineConfig({\n  plugins: [moduleTools()],\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Less with Function Syntax in Modern.js\nDESCRIPTION: Example of using Function syntax to configure less-loader in Modern.js. The function receives the default configuration which can be modified directly.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/less.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    less(config) {\n      // 修改 lessOptions 配置\n      config.lessOptions = {\n        javascriptEnabled: false,\n      };\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Publishing: Committing Version Changes\nDESCRIPTION: Commands to commit the version changes to Git after bumping the versions. This creates a release commit that can be tagged and pushed.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/community/contributing-guide.mdx#2025-04-21_snippet_21\n\nLANGUAGE: sh\nCODE:\n```\ngit add .\ngit commit -m \"Release va.b.c\"\n```\n\n----------------------------------------\n\nTITLE: Example of Merged Configuration Result in Modern.js\nDESCRIPTION: Example showing how configuration from modern.config.js and defineConfig are merged to form the final runtime configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/app/define-config.mdx#2025-04-21_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  // 来自 `modern.config.js` 配置\n  ...runtime.router\n  // 来自 `defineConfig` 配置\n  ...config.router\n}\n```\n\n----------------------------------------\n\nTITLE: SWC Plugin Configuration Type Definition\nDESCRIPTION: TypeScript interface defining the configuration options for the SWC plugin, including presetReact, presetEnv, minification settings and extensions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/plugin/official/cli-plugins/plugin-swc.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype PluginConfig =\n  | ObjPluginConfig\n  | ((config: ObjPluginConfig,\n      utils: { mergeConfig: typeof lodash.merge; setConfig: typeof lodash.set },\n    ) => ObjPluginConfig | void);\n\ninterface ObjPluginConfig extends SwcOptions {\n  presetReact?: ReactConfig;\n  presetEnv?: EnvConfig;\n  jsMinify?: boolean | JsMinifyOptions;\n  cssMinify?: boolean | CssMinifyOptions;\n  extensions?: Extensions;\n  overrides?: Overrides;\n}\n```\n\n----------------------------------------\n\nTITLE: Preventing Resource Inlining in CSS\nDESCRIPTION: This snippet demonstrates how to prevent inlining of an image resource in a CSS file using the 'url' URL parameter.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/page-performance/inline-assets.mdx#2025-04-21_snippet_4\n\nLANGUAGE: css\nCODE:\n```\n.foo {\n  background-image: url('./icon.png?url');\n}\n```\n\n----------------------------------------\n\nTITLE: Using onBeforeDev Hook in Modern.js\nDESCRIPTION: This hook executes before the development server starts, allowing for pre-start checks or setup. It supports both synchronous and asynchronous operations.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/cli-plugins/api.mdx#2025-04-21_snippet_23\n\nLANGUAGE: typescript\nCODE:\n```\napi.onBeforeDev(async () => {\n  // Check if the port is occupied\n  await checkPortAvailability(3000);\n});\n```\n\n----------------------------------------\n\nTITLE: Proxy Server Terminal Output\nDESCRIPTION: Example of terminal output when the proxy server starts successfully showing local and network URLs.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/global-proxy-config.mdx#2025-04-21_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\n  Local:    http://localhost:8080/\n  Network:  http://192.168.0.1:8080/\n\ninfo      Starting proxy server.....\nsuccess   Proxy server start on localhost:8899\n```\n\n----------------------------------------\n\nTITLE: Defining ProgressBar Type in TypeScript\nDESCRIPTION: Type definition for the progressBar configuration option that can be either a boolean value or an object containing an optional id string. Used to control whether and how the compilation progress bar is displayed.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/dev/progress-bar.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype ProgressBar =\n  | boolean\n  | {\n      id?: string;\n    };\n```\n\n----------------------------------------\n\nTITLE: Plugin Configuration Type Definition\nDESCRIPTION: Type definition for the polyfill plugin options, showing available configuration parameters. It defines the structure for specifying browser targets.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/plugins/official-list/plugin-polyfill.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\ntype options = {\n  targets?: Record<string, string> | string;\n};\n```\n\n----------------------------------------\n\nTITLE: Defining BuildCache Type in TypeScript\nDESCRIPTION: TypeScript type definition for the buildCache configuration option. Includes options for cache directory path, cache digest settings, and build dependencies array.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/performance/build-cache.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype BuildCacheConfig =\n  | {\n      /**\n       * Base directory for the filesystem cache.\n       */\n      cacheDirectory?: string;\n      /**\n       * Set different cache names based on cacheDigest content.\n       */\n      cacheDigest?: Array<string | undefined>;\n      /**\n       * An arrays of additional code dependencies for the build.\n       * Rspack / webpack will use a hash of each of these items and all dependencies to invalidate the filesystem cache.\n       */\n      buildDependencies?: string[];\n    }\n  | boolean;\n```\n\n----------------------------------------\n\nTITLE: Defining PrintFileSizeOptions Type in TypeScript\nDESCRIPTION: This snippet defines the type for PrintFileSizeOptions, which can be either a boolean or an object with specific properties for customizing file size printing behavior.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/performance/print-file-size.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype PrintFileSizeOptions =\n  | {\n      /**\n       * whether to print total size\n       */\n      total?: boolean;\n      /**\n       * whether to print size of each file\n       */\n      detail?: boolean;\n      /**\n       * whether to print gzip-compressed size\n       */\n      compressed?: boolean;\n    }\n  | boolean;\n```\n\n----------------------------------------\n\nTITLE: Configuring DTS Generation in Modern.js Module\nDESCRIPTION: Shows how to configure DTS (Declaration TypeScript) generation in Modern.js Module. It specifies the output path for bundled type files, the tsconfig path, and the distribution path.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/in-depth-about-build.md#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nimport { defineConfig } from '@modern-js/module-tools';\n\nexport default defineConfig({\n  // The output path of the bundled type file at this point is `./dist/types`\n  buildConfig: {\n    buildType: 'bundle',\n    dts: {\n      tsconfigPath: './other-tsconfig.json',\n      distPath: './types',\n    },\n    outDir: './dist',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Function-based Autoprefixer Configuration in Modern.js\nDESCRIPTION: Example of configuring Autoprefixer using a Function type value. The function receives the default configuration as its first parameter, which can be modified directly or a new value can be returned.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/autoprefixer.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    autoprefixer(config) {\n      // 修改 flexbox 的配置\n      config.flexbox = 'no-2009';\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Default Playwright Test File in TypeScript\nDESCRIPTION: Example of a default Playwright test file that checks a website's title and navigation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/testing/playwright.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { test, expect } from '@playwright/test';\n\ntest('has title', async ({ page }) => {\n  await page.goto('https://playwright.dev/');\n\n  // Expect a title \"to contain\" a substring.\n  await expect(page).toHaveTitle(/Playwright/);\n});\n\ntest('get started link', async ({ page }) => {\n  await page.goto('https://playwright.dev/');\n\n  // Click the get started link.\n  await page.getByRole('link', { name: 'Get started' }).click();\n\n  // Expects page to have a heading with the name of Installation.\n  await expect(\n    page.getByRole('heading', { name: 'Installation' }),\n  ).toBeVisible();\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring dts.tsconfigPath in Modern.js Module\nDESCRIPTION: Sets a custom tsconfig path for generating type definition files. This option is deprecated and should be replaced with the tsconfig configuration option.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_19\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    dts: {\n      tsconfigPath: './other-tsconfig.json',\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Adding Entries with Modern New Command\nDESCRIPTION: Interactive example of using the modern new command to add a new entry to a project, showing the command-line interface prompts.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/commands.mdx#2025-04-21_snippet_7\n\nLANGUAGE: text\nCODE:\n```\n$ npx modern new\n? Please select the operation you want: Create Element\n? Please select the type of element to create: New \"entry\"\n? Please fill in the entry name: entry\n```\n\n----------------------------------------\n\nTITLE: Configuring Terser to Exclude Files in Modern.js\nDESCRIPTION: An example of how to configure Terser to exclude certain files from compression using the 'exclude' option.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/terser.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    terser: {\n      exclude: /\\/excludes/,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Changelog Entry Updates\nDESCRIPTION: Markdown formatted changelog entries showing version bumps and package dependency updates\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/generator/generator-utils/CHANGELOG.md#2025-04-21_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\n### Patch Changes\n\n- Updated dependencies [92f0ead]\n- Updated dependencies [edd1cfb1af]\n- Updated dependencies [cc971eabfc]\n- Updated dependencies [5b9049f]\n- Updated dependencies [92004d1]\n- Updated dependencies [b8bbe036c7]\n- Updated dependencies [d5a31df781]\n- Updated dependencies [dda38c9]\n- Updated dependencies [3bbea92b2a]\n- Updated dependencies [abf3421]\n- Updated dependencies [543be9558e]\n- Updated dependencies [14b712d]\n  - @modern-js/utils@2.0.0-beta.1\n  - @modern-js/plugin-i18n@2.0.0-beta.1\n  - @modern-js/generator-common@3.0.0-beta.1\n```\n\n----------------------------------------\n\nTITLE: Current Tailwind CSS Theme Configuration\nDESCRIPTION: Shows the current recommended approach for configuring Tailwind CSS themes in Modern.js applications.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/tailwindcss.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    tailwindcss: tailwindConfig,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Importing React in TypeScript Code\nDESCRIPTION: Example of importing and using a third-party dependency (React) in TypeScript source code. This shows the code before bundling by Modern.js Module.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/external-dependency.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport React from 'react';\nconsole.info(React);\n```\n\n----------------------------------------\n\nTITLE: Configuring disableHtmlFolder Option in Modern.js\nDESCRIPTION: Demonstrates how to enable the deprecated 'disableHtmlFolder' option in the Modern.js configuration file to modify the HTML output structure.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/html/disable-html-folder.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    disableHtmlFolder: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Path Aliases with tsconfig.json in TypeScript Projects\nDESCRIPTION: This snippet shows how to configure path aliases using the `paths` property in tsconfig.json. It maps imports starting with `@common/` to files in the project's `src/common` directory.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/alias.mdx#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"compilerOptions\": {\n    \"paths\": {\n      \"@common/*\": [\"./src/common/*\"]\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Build Scripts for Monorepo Deployment on Netlify\nDESCRIPTION: JSON configuration for package.json to set up build scripts for deploying a monorepo project on Netlify using pnpm.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/deploy.mdx#2025-04-21_snippet_7\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"build:packages\": \"pnpm --filter 'app^...' run build\",\n    \"deploy\": \"pnpm run build:packages && modern deploy\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Logic Before Compiler Creation in Modern.js Plugin\nDESCRIPTION: This snippet shows how to use the onBeforeCreateCompiler hook to execute custom logic before the Webpack or Rspack compiler instance is created. This corresponds to the onBeforeCreateCompiler hook in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/plugin/cli-plugins/api.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\napi.onBeforeCreateCompiler(() => {\n    // 可以获取 compiler 相关配置\n});\n```\n\n----------------------------------------\n\nTITLE: Object-based Sass Configuration\nDESCRIPTION: Example of configuring sass-loader using an object approach, demonstrating how to enable source maps.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/sass.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    sass: {\n      sourceMap: true,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Modifying SVGR Configuration in Modern.js\nDESCRIPTION: This JavaScript code shows how to modify the SVGR configuration in Modern.js using the bundlerChain tool.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/static-assets/svg-assets.mdx#2025-04-21_snippet_5\n\nLANGUAGE: js\nCODE:\n```\nexport default {\n  tools: {\n    bundlerChain: (chain, { CHAIN_ID }) => {\n      chain.module\n        .rule(CHAIN_ID.RULE.SVG)\n        .oneOf(CHAIN_ID.ONE_OF.SVG)\n        .use(CHAIN_ID.USE.SVGR)\n        .tap(options => {\n          // modify svgoConfig\n          options.svgoConfig.plugins[0].params.overrides.removeUselessDefs = false;\n          return options;\n        });\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Importing createApp from Modern.js Runtime in TypeScript\nDESCRIPTION: Shows how to import the createApp function from the Modern.js runtime package.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/core/create-app.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createApp } from '@modern-js/runtime';\n```\n\n----------------------------------------\n\nTITLE: Migration Configuration for Native Storybook Users\nDESCRIPTION: Configuration changes required when migrating from native Storybook to Modern.js Storybook integration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/debug/using-storybook.mdx#2025-04-21_snippet_4\n\nLANGUAGE: diff\nCODE:\n```\nconst config = {\n-  framework: '@storybook/react-webapck5',\n+  framework: {\n+    name: '@modern-js/storybook'\n+  },\n};\n\nexport default config;\n```\n\n----------------------------------------\n\nTITLE: SWC Plugin Configuration Type Definition\nDESCRIPTION: Type definitions for the SWC plugin configuration, showing the structure of the plugin config object and its possible formats (object or function).\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/official/cli-plugins/plugin-swc.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype PluginConfig =\n  | ObjPluginConfig\n  | ((config: ObjPluginConfig, utils: { mergeConfig: typeof lodash.merge; setConfig: typeof lodash.set }) => ObjPluginConfig | void);\n\n// SwcOptions is configurations of swc https://swc.rs/docs/configuration/compilation\ninterface ObjPluginConfig extends SwcOptions {\n  presetReact?: ReactConfig;\n  presetEnv?: EnvConfig;\n  jsMinify?: boolean | JsMinifyOptions;\n  cssMinify?: boolean | CssMinifyOptions;\n  extensions?: Extensions;\n  overrides?: Overrides;\n}\n```\n\n----------------------------------------\n\nTITLE: Generated HTML Output for Foo Entry\nDESCRIPTION: The resulting HTML output shows the injected script tag for the foo entry page.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/html/tags-by-entries.mdx#2025-04-21_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<script src=\"b.js\"></script>\n```\n\n----------------------------------------\n\nTITLE: Configuring Module Polyfill Plugin in Modern.js\nDESCRIPTION: Example configuration for integrating the module polyfill plugin with Modern.js Module Tools. This setup targets iOS 9 compatibility and will inject polyfills for features unsupported in that environment without modifying the global scope.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/module/plugin-module-polyfill/README.md#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\nimport { modulePluginPolyfill } from '@modern-js/plugin-module-polyfill';\n\nexport default defineConfig({\n  plugins: [\n    moduleTools(),\n    modulePluginPolyfill({\n      targets: {\n        ios: '9';\n      }\n    })\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Generating Code Snippets with React Import Statements\nDESCRIPTION: Function that creates code snippets with necessary React import statements. It detects whether hooks are used in the code and adds appropriate imports accordingly.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/components/faq-storybook.mdx#2025-04-21_snippet_4\n\nLANGUAGE: TypeScript\nCODE:\n```\nexport const withReactImport = (code: string) => {\n  const needReact = /React\\./.test(code) || /<[A-Z][\\s\\S]*?\\/>/.test(code);\n  const needHooks =\n    /useState|useEffect|useRef|useCallback|useMemo|useReducer|useContext/.test(\n      code,\n    );\n  let importStr = '';\n  if (needReact && needHooks) {\n    importStr = \"import React, { useState, useEffect } from 'react';\\n\";\n  } else if (needReact) {\n    importStr = \"import React from 'react';\\n\";\n  } else if (needHooks) {\n    importStr = \"import { useState, useEffect } from 'react';\\n\";\n  }\n  return importStr + code;\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Less Options in Modern.js Module\nDESCRIPTION: This snippet shows how to configure Less options in Modern.js Module, including adding additional data to the beginning of Less files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_36\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  buildConfig: {\n    style: {\n      less: {\n        additionalData: `@base-color: #c6538c;`,\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Type Definition for source.aliasStrategy\nDESCRIPTION: Defines the type and default value for the aliasStrategy configuration option. This setting controls whether tsconfig paths or bundler alias definitions take precedence when both are present.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/alias-strategy.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype AliasStrategy = 'prefer-tsconfig' | 'prefer-alias';\n```\n\n----------------------------------------\n\nTITLE: Overriding Preset Aliases with New Object\nDESCRIPTION: Shows how to completely replace the preset aliases by returning a new object from the alias function.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_2\n\nLANGUAGE: JavaScript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    alias: alias => {\n      return {\n        '@common': './src/common',\n      };\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing ESM Module Detection in TypeScript\nDESCRIPTION: Function to determine if a file is an ESM module based on extension and configuration. It checks if the file extension is in the specified ESM extensions list.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/tests/integration/module/fixtures/build/copy/src/test.txt#2025-04-21_snippet_1\n\nLANGUAGE: TypeScript\nCODE:\n```\n/**\n * Checks if a file is an ESM module.\n */\nexport function isESM(\n  id: string,\n  esmExtensions: string[] = ['.js', '.mjs'],\n): boolean {\n  return esmExtensions.some(ext => id.endsWith(ext));\n}\n```\n\n----------------------------------------\n\nTITLE: Build Configuration Schema\nDESCRIPTION: Schema defining build configuration options like hooks, tsconfig, transformImport, and other build settings\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/solutions/module-tools/CHANGELOG.md#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"buildConfig\": {\n    \"hooks\": {\n      \"load\": true,\n      \"transform\": true,\n      \"renderChunk\": true\n    },\n    \"tsconfig\": \"string\",\n    \"transformLodash\": false,\n    \"transformImport\": false,\n    \"externalHelpers\": false,\n    \"jsx\": \"preserve\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Custom Server-Side Entry Implementation in Modern.js\nDESCRIPTION: This snippet demonstrates how to customize the server-side entry in Modern.js. It extends the default behavior by adding custom content to the rendered HTML and including additional headers in the response.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/hooks/src/entry.server.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { renderString, createRequestHandler } from '@modern-js/runtime/ssr/server';\nimport type { HandleRequest } from '@modern-js/runtime/ssr/server';\n\nconst handleRequest: HandleRequest = async (request, ServerRoot, options) => {\n  // do something before rendering\n  const body = await renderString(request, <ServerRoot />, options);\n\n  const newBody = body + '<div>Byte-Dance</div>';\n\n  return new Response(newBody, {\n    headers: {\n      'content-type': 'text/html; charset=UTF-8',\n      'x-custom-header': 'abc',\n    },\n  });\n};\n\nexport default createRequestHandler(handleRequest);\n```\n\n----------------------------------------\n\nTITLE: Configuring beforeBundle hook\nDESCRIPTION: Example of using the beforeBundle callback function which runs before the bundling process starts for a dependency, allowing for custom setup or modifications.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/scripts/prebundle/README.md#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\ndependencies: [\n  {\n    name: 'foo',\n    beforeBundle(task) {\n      console.log('do something');\n    },\n  },\n];\n```\n\n----------------------------------------\n\nTITLE: Generated UMD Output with Global Variable Mapping\nDESCRIPTION: The resulting UMD output when global variable mapping is configured, showing how the code accesses React from the global scope.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/build-umd.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\n(function (global, factory) {\n  if (typeof module === 'object' && typeof module.exports === 'object')\n    factory();\n  else if (typeof define === 'function' && define.amd) define([], factory);\n  else if (\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self)\n  )\n    factory();\n})(this, function () {\n  // ...\n  // libuild:globals:react\n  var require_react = __commonJS({\n    'libuild:globals:react'(exports, module1) {\n      module1.exports = Function('return this')()['React'];\n    },\n  });\n  // src/index.ts\n  var import_react = __toESM(require_react());\n  console.info(import_react.default);\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring emitFiles for extra entries\nDESCRIPTION: Example of generating additional entry files to map imports when prebundling a dependency, which is useful for creating specific entry points or aliases.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/scripts/prebundle/README.md#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\ndependencies: [\n  {\n    name: 'foo',\n    emitFiles: [\n      {\n        path: 'foo.js',\n        content: `module.exports = require('./').foo;`,\n      },\n    ],\n  },\n];\n```\n\n----------------------------------------\n\nTITLE: Project Structure for Mock Configuration\nDESCRIPTION: Shows the required directory structure for enabling mock functionality in Modern.js applications.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/debug/mock.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n.\n├── config\n│   └── mock\n│       └── index.ts\n├── src\n│   └── App.tsx\n└── modern.config.ts\n```\n\n----------------------------------------\n\nTITLE: Configuring Pug Template Engine with Object Options in Modern.js\nDESCRIPTION: Provides Pug options as an object to configure the template engine. This example sets the doctype option to 'xml'. For detailed parameters, refer to the Pug API Reference.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/pug.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    pug: {\n      doctype: 'xml',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of Reduck Connect\nDESCRIPTION: Demonstrates basic usage of connect HOC with multiple models, showing how to access state and actions through props.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/model/connect.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst modelA = model('modelA').define({\n  state: {\n    a: 1,\n  },\n  actions: {\n    incA(state) {\n      return {\n        ...state,\n        a: state.a + 1,\n      };\n    },\n  },\n});\n\nconst modelB = model('modelB').define({\n  state: {\n    b: 10,\n  },\n  actions: {\n    incB(state) {\n      return {\n        ...state,\n        b: state.b + 1,\n      };\n    },\n  },\n});\n\nfunction Test(props) {\n  props.incA(); // 调用 modelA 的 action\n  props.incB(); // 调用 modelB 的 action\n\n  props.a; // 获取 modelA 的 state: a\n  props.b; // 获取 modelB 的 state: b\n}\n\nexport default connect([modelA, modelB])(Test);\n```\n\n----------------------------------------\n\nTITLE: ReactUtils Extension Type Definition\nDESCRIPTION: Type definition for React utility options including auto import React, effect removal and prop types removal configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/plugin/official/cli-plugins/plugin-swc.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ntype ReactUtilsOptions = {\n  autoImportReact?: boolean;\n  removeEffect?: boolean;\n  removePropTypes?: {\n    mode?: 'remove' | 'unwrap' | 'unsafe-wrap';\n    removeImport?: boolean;\n    ignoreFilenames?: string[];\n    additionalLibraries?: string[];\n    classNameMatchers?: string[];\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Resulting Import After Kebab Case Transformation in TypeScript\nDESCRIPTION: Shows the final import statement after applying the kebab case transformation to the member name in the import path.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/official/cli-plugins/plugin-swc.mdx#2025-04-21_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nimport Btn from 'foo/es/my-button';\n```\n\n----------------------------------------\n\nTITLE: Using Modern New Command Options\nDESCRIPTION: The modern new command is used for enabling features in existing projects with options for configuration, language setting, and registry specification.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/commands.mdx#2025-04-21_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\nUsage: modern new [options]\n\nOptions:\n  --config-file <configFile>  specify the configuration file, which can be a relative or absolute path\n  --lang <lang>          set the language (zh or en) for the new command.\n  -d, --debug            using debug mode to log something (default: false)\n  -c, --config <config>  set default generator config(json string)\n  --dist-tag <tag>       use specified tag version for its generator\n  --registry             set npm registry url to run npm command\n  -h, --help             show command help\n```\n\n----------------------------------------\n\nTITLE: Required package.json Types Configuration for Modern.js Projects\nDESCRIPTION: The package.json configuration required for proper TypeScript type declaration consumption. The 'types' field must match the 'declarationDir' path defined in tsconfig.json.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/tests/integration/source-code-build/common/readme.md#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"types\": \"./dist/types\"\n}\n```\n\n----------------------------------------\n\nTITLE: Defining LazyCompilationOptions Type in TypeScript\nDESCRIPTION: TypeScript type definition for the lazyCompilation configuration options, which can be a boolean or an object with specific properties to control lazy compilation behavior.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/experiments/lazy-compilation.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype LazyCompilationOptions =\n  | boolean\n  | {\n      // 是否为异步模块开启延迟编译\n      imports?: boolean;\n      // 是否为入口模块开启延迟编译\n      entries?: boolean;\n      // 指定哪些导入的模块应该被延迟编译\n      test?: RegExp | ((m: Module) => boolean);\n    };\n```\n\n----------------------------------------\n\nTITLE: Setting Default Decorator Configuration in TypeScript\nDESCRIPTION: Default configuration object for decorators, setting the version to 'legacy' as the default value.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/decorators.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst defaultDecorators = {\n  version: 'legacy';\n};\n```\n\n----------------------------------------\n\nTITLE: Defining Manifest Interface in TypeScript\nDESCRIPTION: Interface definition for manifest configuration that includes an optional getAppList method returning an array of AppInfo objects.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/micro-master-manifest-config.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface Manifest {\n  getAppList?: () => Array<AppInfo>;\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Class Fields in TypeScript\nDESCRIPTION: Demonstrates how TypeScript's useDefineForClassFields configuration affects the compilation of public class fields. Shows the difference in output when the flag is set to true or false.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/faq/build.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nclass C {\n  foo = 100;\n  bar: string;\n}\n```\n\nLANGUAGE: typescript\nCODE:\n```\nclass C {\n  constructor() {\n    this.foo = 100;\n  }\n}\n```\n\nLANGUAGE: typescript\nCODE:\n```\nclass C {\n  constructor() {\n    Object.defineProperty(this, 'foo', {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: 100,\n    });\n    Object.defineProperty(this, 'bar', {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0,\n    });\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing afterDev Hook in Modern.js Module Tools Plugin\nDESCRIPTION: Demonstrates how to implement the afterDev hook that is triggered when the development process is interrupted. This allows performing cleanup actions or logging when the development server stops.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/plugin-api/plugin-hooks.md#2025-04-21_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\nexport const myPlugin = (): CliPlugin<ModuleTools> => ({\n  name: 'my-plugin',\n\n  setup() {\n    return {\n      afterDev() {\n        console.info(`exit!`);\n      },\n    };\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring disableHtmlFolder in Modern.js\nDESCRIPTION: Demonstrates how to enable the 'html.disableHtmlFolder' configuration in a Modern.js project to change the HTML output structure.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/html/disable-html-folder.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    disableHtmlFolder: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Import Transformation in Modern.js Module (TypeScript)\nDESCRIPTION: Uses SWC to provide similar functionality as babel-plugin-import. This configuration allows for custom import transformations, such as importing styles along with components from a library.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_42\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    transformImport: [\n      // babel-plugin-import`s options config\n      {\n        libraryName: 'foo',\n        style: true,\n      },\n    ],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Sass Example with Variables\nDESCRIPTION: Demonstrates Sass usage in Modern.js Module, showing variable definition and usage for font stack and colors.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/best-practices/components.mdx#2025-04-21_snippet_5\n\nLANGUAGE: sass\nCODE:\n```\n$font-stack: Helvetica, sans-serif;\n$primary-color: #333;\n\nbody {\n  font: 100% $font-stack;\n  color: $primary-color;\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Terser with Function Type in Modern.js\nDESCRIPTION: An example of configuring Terser using a function type in Modern.js. This function modifies the default options to exclude files matching the '/excludes/' pattern from minification.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/terser.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    terser: opts => {\n      opts.exclude = /\\/excludes/;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing afterBuild Hook in TypeScript\nDESCRIPTION: Hook triggered after overall build process completion. Uses ParallelWorkflow pattern with build results.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/plugin-api/plugin-hooks.md#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport const myPlugin = (): CliPlugin<ModuleTools> => ({\n  name: 'my-plugin',\n\n  setup() {\n    return {\n      afterBuild(options: BuildResult): void {\n        // ...\n      },\n    };\n  },\n});\n```\n\nLANGUAGE: typescript\nCODE:\n```\nexport interface BuildResult {\n  status: 'success' | 'fail';\n  message?: string;\n  config: BuildConfig;\n  commandOptions: BuildCommandOptions;\n  totalDuration: number;\n}\n```\n\n----------------------------------------\n\nTITLE: Customizing TypeScript Declaration Output Path\nDESCRIPTION: Specifies a custom output directory for generated TypeScript declaration files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_15\n\nLANGUAGE: JavaScript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    dts: {\n      distPath: './types',\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using Modern Upgrade Command Options\nDESCRIPTION: The modern upgrade command updates dependencies in package.json to the latest version, with options for configuration, registry specification, and debugging.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/commands.mdx#2025-04-21_snippet_9\n\nLANGUAGE: bash\nCODE:\n```\nUsage: modern upgrade [options]\n\nOptions:\n  --config <config> specify the configuration file, which can be a relative or absolute path\n  --registry <registry>  specify npm registry (default: \"\")\n  -d,--debug             using debug mode to log something (default: false)\n  --cwd <cwd>            app directory (default: \"\")\n  -h, --help             show command help\n```\n\n----------------------------------------\n\nTITLE: TypeScript Declarations for URL Queries\nDESCRIPTION: Type declarations for URL query parameters used in asset inlining\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/page-performance/inline-assets.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare module '*?inline' {\n  const content: string;\n  export default content;\n}\n\ndeclare module '*?inline' {\n  const content: string;\n  export default content;\n}\n\ndeclare module '*?__inline' {\n  const content: string;\n  export default content;\n}\n\ndeclare module '*?inline=false' {\n  const content: string;\n  export default content;\n}\n```\n\n----------------------------------------\n\nTITLE: Using modern change command in Modern.js Module\nDESCRIPTION: The modern change command is used to generate the required Markdown file for changesets, which helps in managing version changes and release notes.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/command-preview.md#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nUsage: modern change [options]\n\nCreate a changeset\n\nOptions:\n  --empty Create an empty changeset (default: false)\n  --open Open the created changeset in the editor (default: false)\n  -h, --help display help for command\n```\n\n----------------------------------------\n\nTITLE: Forcing Resource Inlining in React Component\nDESCRIPTION: This example shows how to force inlining of an image resource in a React component using the 'inline' URL parameter, regardless of its size.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/page-performance/inline-assets.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport React from 'react';\nimport img from './foo.png?inline';\n\nexport default function Foo() {\n  return <img src={img} />;\n}\n```\n\n----------------------------------------\n\nTITLE: Importing Buffer from Node.js Buffer Module\nDESCRIPTION: Example showing how to import the Buffer class from the 'buffer' module, which will automatically inject the corresponding polyfill in the browser environment.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/official-list/plugin-node-polyfill.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Buffer } from 'buffer';\n\nconst bufferData = Buffer.from('xxxx');\n```\n\n----------------------------------------\n\nTITLE: Displaying Modified HTML Output Structure in Modern.js\nDESCRIPTION: Illustrates the modified directory structure for HTML output in the dist folder after enabling the 'disableHtmlFolder' option.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/html/disable-html-folder.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n/dist\n└── html\n    └── main.html\n```\n\n----------------------------------------\n\nTITLE: Using GlobalProxyConfig Component in JSX\nDESCRIPTION: This snippet renders the GlobalProxyConfig component, which likely contains comprehensive documentation about proxy configuration options in Modern.js.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/dev/proxy.mdx#2025-04-21_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n<GlobalProxyConfig />\n```\n\n----------------------------------------\n\nTITLE: Function Signature for render in Modern.js\nDESCRIPTION: Defines the TypeScript signature of the render function, which accepts a React element and an optional DOM element or string ID.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/core/render.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport function render(App: React.ReactElement, id?: HTMLElement | string): Promise<any>;\n```\n\n----------------------------------------\n\nTITLE: Checking Dependency Versions with npm/yarn in Modern.js\nDESCRIPTION: Demonstrates how to use the 'npm ls' command to check the installed version of a specific dependency in a Modern.js project using npm or yarn.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/troubleshooting/dependencies.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nproject\n└─┬ @modern-js/app-tools@x.y.z\n  └── @modern-js/core@x.y.z\n```\n\n----------------------------------------\n\nTITLE: Hook Runner Usage Example\nDESCRIPTION: Example showing how to use hookRunners to execute specific hooks in a plugin.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/plugins/guide/setup-function.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { CliPlugin } from '@modern-js/core';\n\nexport const myPlugin = (): CliPlugin => ({\n  name: 'my-plugin',\n\n  async setup(api) {\n    const hookRunners = api.useHookRunners();\n    // 触发 afterBuild Hook\n    await hookRunners.afterBuild();\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Basic URL Proxy Configuration in JavaScript\nDESCRIPTION: Simple proxy configuration to forward /api requests to a local server running on port 3000.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/dev-server.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    devServer: {\n      proxy: {\n        '/api': 'http://localhost:3000',\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Vue JSX Plugin Options Type Definition\nDESCRIPTION: Type definition for the Vue JSX plugin options. This shows all configurable parameters that can be passed to @vue/babel-plugin-jsx when using the Vue plugin in Modern.js Module.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/official-list/plugin-vue.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ntype VueJSXPluginOptions = {\n  /** transform `on: { click: xx }` to `onClick: xxx` */\n  transformOn?: boolean;\n  /** enable optimization or not. */\n  optimize?: boolean;\n  /** merge static and dynamic class / style attributes / onXXX handlers */\n  mergeProps?: boolean;\n  /** configuring custom elements */\n  isCustomElement?: (tag: string) => boolean;\n  /** enable object slots syntax */\n  enableObjectSlots?: boolean;\n  /** Replace the function used when compiling JSX expressions */\n  pragma?: string;\n};\n```\n\n----------------------------------------\n\nTITLE: Running E2E Tests for Modern.js Builder\nDESCRIPTION: Commands for running all test cases, including Rspack and Webpack specific tests, as well as running individual test cases.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/tests/e2e/builder/README.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n# Run all test cases, including Rspack and Webpack\npnpm run test\n\n# Run test cases for Rspack\npnpm run test:rspack\n\n# Run test cases for Webpack\npnpm run test:webpack\n\n# Run specific test case, such as \"css\"\npnpm run test:webpack css\npnpm run test:rspack css\n```\n\n----------------------------------------\n\nTITLE: Configuring Rspack Build in Storybook\nDESCRIPTION: Configuration diff showing how to enable Rspack as the build tool instead of webpack in Storybook configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/debug/using-storybook.mdx#2025-04-21_snippet_1\n\nLANGUAGE: diff\nCODE:\n```\nconst config = {\n  framework: {\n    name: '@modern-js/storybook',\n    options: {\n-      bundler: 'webpack'\n+      bundler: 'rspack'\n    },\n  },\n  typescript: {\n-    reactDocgen: 'react-docgen-typescript'\n+    reactDocgen: 'react-docgen'\n  }\n};\n\nexport default config;\n```\n\n----------------------------------------\n\nTITLE: Registering SWC Wasm Plugin in Modern.js\nDESCRIPTION: This example shows how to register an SWC Wasm plugin, specifically the @swc/plugin-styled-components, in a Modern.js project. It demonstrates the configuration structure for adding experimental plugins.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/swc.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    swc: {\n      jsc: {\n        experimental: {\n          plugins: [['@swc/plugin-styled-components', {}]],\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: File Change Handler in Modern.js Development Mode\nDESCRIPTION: Example of handling file changes during development using onFileChanged hook to detect TypeScript file modifications.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/cli-plugins/api.mdx#2025-04-21_snippet_17\n\nLANGUAGE: typescript\nCODE:\n```\napi.onFileChanged(({ filename, eventType }) => {\n  if (eventType === 'change' && filename.endsWith('.ts')) {\n    console.log('TypeScript file changed, may need to recompile...');\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Modifying Modern.js Configuration\nDESCRIPTION: Shows how to modify the initial Modern.js configuration using the config API.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/cli-plugins/api.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\napi.config(() => {\n  return {\n    output: {\n      disableTsChecker: true, // Disable TypeScript type checking\n    },\n  };\n});\n```\n\n----------------------------------------\n\nTITLE: Using Rsbuild Plugins in Modern.js Storybook Config\nDESCRIPTION: Configuration example showing how to use Rsbuild plugins with Storybook, specifically enabling the SWC compiler plugin.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/basic/using-storybook.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@modern-js/storybook';\nimport { pluginSwc } from '@rsbuild/plugin-webpack-swc';\n\nconst config = defineConfig({\n  builderPlugins: [pluginSwc()],\n});\n\nexport default config;\n```\n\n----------------------------------------\n\nTITLE: Enabling Rspack as Build Tool for Storybook\nDESCRIPTION: Configuration change in .storybook/main.js to use Rspack instead of Webpack for faster build speeds, including the necessary reactDocgen adjustment for compatibility.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/using-storybook.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nconst config = {\n  framework: {\n    name: '@modern-js/storybook',\n    options: {\n-      bundler: 'webpack'\n+      bundler: 'rspack'\n    },\n  },\n  typescript: {\n-    reactDocgen: 'react-docgen-typescript'\n+    reactDocgen: 'react-docgen'\n  }\n};\n\nexport default config;\n```\n\n----------------------------------------\n\nTITLE: Transforming Version Imports in Modern.js using TypeScript AST\nDESCRIPTION: This function processes AST nodes to refactor version import statements in Modern.js. It identifies specific import patterns like '@import/version' and transforms them to standardized format, supporting both import statements and require calls. The function handles variable declarations, import declarations, and call expressions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/components/other-plugins.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport const refactor = (file: string, source: ts.SourceFile) => {\n  return ts.transform(source, [\n    context => {\n      const visitor: ts.Visitor = node => {\n        const isVersion =\n          node.kind === ts.SyntaxKind.StringLiteral &&\n          (node as ts.StringLiteral).text === '@modern-js/utils/version';\n        if (isVersion) {\n          return ts.factory.createStringLiteral('./version');\n        }\n\n        /**\n         * import { xxx } from '@modern-js/utils/compiled/xxx'\n         * =>\n         * import { xxx } from '@modern-js/utils/xxx'\n         */\n        const isCompiledImport =\n          node.kind === ts.SyntaxKind.StringLiteral &&\n          (node as ts.StringLiteral).text.includes('@modern-js/utils/compiled/');\n        if (isCompiledImport) {\n          const text = (node as ts.StringLiteral).text;\n          return ts.factory.createStringLiteral(\n            text.replace('/compiled/', '/'),\n          );\n        }\n\n        return ts.visitEachChild(node, visitor, context);\n      };\n\n      return node => ts.visitNode(node, visitor);\n    },\n  ]).transformed[0];\n};\n```\n\n----------------------------------------\n\nTITLE: 配置 Modern.js Module 构建预设\nDESCRIPTION: 展示了如何在 Modern.js Module 中配置构建预设。这个例子使用 'npm-component-es2019' 预设来支持 ES2019 语法。\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/best-practices/components.mdx#2025-04-21_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nexport default defineConfig({\n  buildPreset: 'npm-component-es2019',\n});\n```\n\n----------------------------------------\n\nTITLE: Yarn Dependency Resolution Configuration\nDESCRIPTION: Configuration for locking nested dependency versions using Yarn package manager.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/get-started/upgrade.mdx#2025-04-21_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"resolutions\": {\n    \"package-name\": \"^1.0.0\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Entry Type Definition in TypeScript\nDESCRIPTION: Type definition for the entries configuration object that specifies the structure for defining custom page entries.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/entries.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype Entries = Record<\n  string,\n  | string\n  | {\n      entry: string;\n      disableMount?: boolean;\n      customBootstrap?: string;\n    }\n>;\n```\n\n----------------------------------------\n\nTITLE: Excluding Files from Sass Compilation\nDESCRIPTION: Example of using the addExcludes utility function to specify which files should not be compiled by sass-loader by providing one or more regular expressions to match Sass file paths.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/sass.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    sass(config, { addExcludes }) {\n      addExcludes(/node_modules/);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring AppIcon Using String Syntax in JavaScript\nDESCRIPTION: This example demonstrates how to configure the app icon using a string path to the icon file. This is a simplified syntax for basic icon configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/html/app-icon.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    appIcon: './src/assets/icon.png',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Supporting hot updates for server hooks and middleware in Modern.js\nDESCRIPTION: A fix that enables hot updates for server hooks and middleware, improving the development experience by allowing changes without server restarts.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/plugin-server/CHANGELOG.md#2025-04-21_snippet_7\n\nLANGUAGE: markdown\nCODE:\n```\n- f826930: fix(plugin-server): support update server hook & middleware\n  fix(plugin-server): 支持热更新 server hook & middleware\n```\n\n----------------------------------------\n\nTITLE: Specifying Less Version in Modern.js\nDESCRIPTION: Example of how to use a specific Less version by setting the implementation option of less-loader.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/less.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    less: {\n      implementation: require('less'),\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Multiple Entry Project Structure\nDESCRIPTION: Demonstrates the file structure after creating a new entry point in a Modern.js project.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/concept/entries.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n.\n├── myapp     # Original entry\n│   └── routes\n│       ├── index.css\n│       ├── layout.tsx\n│       └── page.tsx\n└── new-entry  # New entry\n    └── routes\n        ├── index.css\n        ├── layout.tsx\n        └── page.tsx\n```\n\n----------------------------------------\n\nTITLE: Adding Vitest Test Script to package.json\nDESCRIPTION: This snippet demonstrates how to add a test script to the package.json file to run Vitest tests. It allows for easy execution of tests using npm run test or yarn test.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/testing/vitest.mdx#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"test\": \"vitest\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Default Configuration for Arco Design in Modern.js transformImport\nDESCRIPTION: Default configuration added by Modern.js when Arco Design is installed. It includes configurations for both the main library and the icon package with server-side rendering support.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/source/transform-import.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultArcoConfig = [\n  {\n    libraryName: '@arco-design/web-react',\n    libraryDirectory: isServer ? 'lib' : 'es',\n    camelToDashComponentName: false,\n    style: true,\n  },\n  {\n    libraryName: '@arco-design/web-react/icon',\n    libraryDirectory: isServer ? 'react-icon-cjs' : 'react-icon',\n    camelToDashComponentName: false,\n  },\n];\n```\n\n----------------------------------------\n\nTITLE: Configuring Target-Specific resolveMainFields in Modern.js\nDESCRIPTION: Example of setting different resolveMainFields for 'web' and 'node' targets in a Modern.js configuration. This allows for platform-specific module resolution strategies.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/resolve-main-fields.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    source: {\n      resolveMainFields: {\n        web: ['main', 'browser', 'exports'],\n        node: ['main', 'node', 'exports'],\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Post-Build Hook in Modern.js\nDESCRIPTION: Demonstrates executing logic after build completion using onAfterBuild hook.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/cli-plugins/api.mdx#2025-04-21_snippet_19\n\nLANGUAGE: typescript\nCODE:\n```\napi.onAfterBuild(()=>{\n    // Upload sourceMap after building\n})\n```\n\n----------------------------------------\n\nTITLE: RemovePropTypes Options Definition\nDESCRIPTION: Type definition for the removePropTypes option in ReactUtils extension, which allows removing React runtime type checking.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/official/cli-plugins/plugin-swc.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\ntype RemovePropTypesOptions = {\n  mode?: 'remove' | 'unwrap' | 'unsafe-wrap';\n  removeImport?: boolean;\n  ignoreFilenames?: string[];\n  additionalLibraries?: string[];\n  classNameMatchers?: string[];\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Devtools Configuration Type in Markdown\nDESCRIPTION: Specifies the type and default value for the devtools configuration option. It enables Redux DevTools and supports all parameters from redux-devtools-extension.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/runtime/state.mdx#2025-04-21_snippet_6\n\nLANGUAGE: markdown\nCODE:\n```\n- **Type:** `boolean | EnhancerOptions`\n- **Default:** `true`\n```\n\n----------------------------------------\n\nTITLE: Setting CommonJS Format in Modern.js Module\nDESCRIPTION: Configures the JavaScript output format to CommonJS (CJS), which uses exports, require, and module syntax typically used in Node.js environments.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_23\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    format: 'cjs',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Defining WatchFiles Type in TypeScript for Modern.js Dev Configuration\nDESCRIPTION: This TypeScript code defines the structure for the 'watchFiles' configuration option. It allows specifying paths to watch, the type of action to take on changes (reload page or reload server), and optional watch options for the chokidar library.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/dev/watch-files.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype WatchFiles =\n  | {\n      paths: string | string[];\n      type?: 'reload-page';\n      // watch options for chokidar\n      options?: WatchOptions;\n    }\n  | {\n      paths: string | string[];\n      type?: 'reload-server';\n    };\n\ntype WatchFilesConfig = WatchFiles | WatchFiles[];\n```\n\n----------------------------------------\n\nTITLE: Generated HTML Favicon Tag\nDESCRIPTION: Demonstrates the HTML link tag that Modern.js automatically generates for the favicon during build.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/hooks/config/favicon.mdx#2025-04-21_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<link rel=\"icon\" href=\"/favicon.ico\" />\n```\n\n----------------------------------------\n\nTITLE: Defining LazyCompilation Type in TypeScript\nDESCRIPTION: TypeScript type definition for lazy compilation options, including boolean flags for entries and imports, and an optional test function for filtered lazy compilation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/experiments/lazy-compilation.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype LazyCompilationOptions =\n  | boolean\n  | {\n      // Whether to enable lazy compilation for entries\n      entries?: boolean;\n      // Whether to enable lazy compilation for dynamic imports\n      imports?: boolean;\n      // Specify which imported modules should be lazily compiled.\n      test?: RegExp | ((m: Module) => boolean);\n    };\n```\n\n----------------------------------------\n\nTITLE: Registering Node Polyfill Plugin in Modern.js Module\nDESCRIPTION: Example showing how to register the Node Polyfill plugin in a Modern.js Module configuration file. The plugin is added to the plugins array along with moduleTools.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/official-list/plugin-node-polyfill.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\nimport { modulePluginNodePolyfill } from '@modern-js/plugin-module-node-polyfill';\n\nexport default defineConfig({\n  plugins: [moduleTools(), modulePluginNodePolyfill()],\n});\n```\n\n----------------------------------------\n\nTITLE: Home Page Component in Modern.js\nDESCRIPTION: React component implementation for the home page with navigation link to About page.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/testing/playwright.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Link } from '@modern-js/runtime/router';\n\nconst Index = () => (\n  <div>\n    <h1>Home</h1>\n    <Link to=\"/about\">About</Link>\n  </div>\n);\n\nexport default Index;\n```\n\n----------------------------------------\n\nTITLE: Installing Faker Dependencies with pnpm\nDESCRIPTION: Installation commands for the faker package and its TypeScript types to generate mock data for the example application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c05-loader.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\npnpm add faker@5\npnpm add @types/faker@5 -D\n```\n\n----------------------------------------\n\nTITLE: Example Route Configuration JSON Output\nDESCRIPTION: This JSON snippet illustrates the structure of the route configuration output generated in the 'dist/route.json' file after running the 'dev' command. It shows two route entries for the 'page-a' entry.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/server/routes.mdx#2025-04-21_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"routes\": [\n    {\n      \"urlPath\": \"/a\",\n      \"entryName\": \"page-a\",\n      \"entryPath\": \"html/page-a/index.html\",\n      \"isSPA\": true,\n      \"isSSR\": false\n    },\n    {\n      \"urlPath\": \"/b\",\n      \"entryName\": \"page-a\",\n      \"entryPath\": \"html/page-a/index.html\",\n      \"isSPA\": true,\n      \"isSSR\": false\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Executing Modern.js Upgrade Command in Bash\nDESCRIPTION: This snippet demonstrates the output of running the 'modern upgrade' command in a terminal. It shows the project type, latest Modern.js version, and a success message indicating the dependencies have been updated.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/get-started/upgrade.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n> modern upgrade\n\n[INFO] [项目类型]: Web 应用\n[INFO] [Modern.js 最新版本]: x.y.z\n[INFO] 已更新 Modern.js 依赖至最新版本!\n```\n\n----------------------------------------\n\nTITLE: Importing JSON Files in Modern.js\nDESCRIPTION: Demonstrates how to import and use JSON files in JavaScript code. Shows basic JSON structure and accessing its properties.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/static-assets/json-files.mdx#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"name\": \"foo\",\n  \"items\": [1, 2]\n}\n```\n\nLANGUAGE: javascript\nCODE:\n```\nimport example from './example.json';\n\nconsole.log(example.name); // 'foo';\nconsole.log(example.items); // [1, 2];\n```\n\n----------------------------------------\n\nTITLE: Defining SetupMiddlewares Types in TypeScript\nDESCRIPTION: TypeScript type definitions for server middleware setup including sockWrite functionality, environment management, and middleware handler configuration. Includes types for stats retrieval, bundle loading, and HTML template transformation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/dev/setup-middlewares.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype SetupMiddlewaresServer = {\n  sockWrite: (\n    type: string,\n    data?: string | boolean | Record<string, any>,\n  ) => void;\n  environments: {\n    [name: string]: {\n      /**\n       * 获取当前环境的构建信息\n       */\n      getStats: () => Promise<Stats>;\n\n      /**\n       * 在服务端加载并执行构建产物\n       *\n       * @param entryName - 入口名称，和 Rsbuild source.entry 的某一个 key 值对应\n       * @returns 入口模块的返回值\n       */\n      loadBundle: <T = unknown>(entryName: string) => Promise<T>;\n\n      /**\n       * 获取编译后的 HTML 模版内容\n       */\n      getTransformedHtml: (entryName: string) => Promise<string>;\n    };\n  };\n};\n\ntype SetupMiddlewares = Array<\n  (\n    middlewares: {\n      unshift: (...handlers: RequestHandler[]) => void;\n      push: (...handlers: RequestHandler[]) => void;\n    },\n    server: SetupMiddlewaresServer,\n  ) => void\n>;\n```\n\n----------------------------------------\n\nTITLE: Current Approach for Tailwind CSS Configuration in Modern.js\nDESCRIPTION: Demonstrates the current recommended way to configure Tailwind CSS in Modern.js, using the complete configuration object directly in tools.tailwindcss.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/tailwindcss.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    tailwindcss: tailwindConfig,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Storybook Configuration for Less Math Option\nDESCRIPTION: Configuration for Storybook to fix Less compilation errors by modifying the webpack chain to set the Less math option.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/faq/build.mdx#2025-04-21_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\nmodule.exports = {\n  framework: {\n    options: {\n      builderConfig: {\n        tools: {\n          webpackChain(chain, { CHAIN_ID }) {\n            chain.module\n              .rule(CHAIN_ID.RULE.LESS)\n              .use(CHAIN_ID.USE.LESS)\n              .tap(options => {\n                options.lessOptions = {\n                  ...options.lessOptions,\n                  math: 'always',\n                };\n                return options;\n              });\n          },\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining HTML Mount ID Type in TypeScript\nDESCRIPTION: Type definition for the html.mountId configuration option, which specifies the ID of the root element where components will be mounted in the HTML template. The default value is 'root'.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/html/mount-id.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype MountId = string; // default: 'root'\n```\n\n----------------------------------------\n\nTITLE: Resulting Build Entries Object (JavaScript)\nDESCRIPTION: This snippet demonstrates the resulting build entries object generated by Modern.js based on the custom entry directory structure. It shows how the entries 'a' and 'b' are mapped to their respective 'App.tsx' files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/entries-dir.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst entry = {\n  a: './src/pages/a/App.tsx',\n  b: './src/pages/b/App.tsx',\n};\n```\n\n----------------------------------------\n\nTITLE: 配置关闭类型文件生成\nDESCRIPTION: 这个配置示例展示了如何在 Modern.js Module 中关闭类型文件的生成。通过将 dts 设置为 false,可以提升构建速度。\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/advance/in-depth-about-build.md#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport { defineConfig } from '@modern-js/module-tools';\n\nexport default defineConfig({\n  buildConfig: {\n    dts: false,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Additional Hook Context Types\nDESCRIPTION: Type definitions for AfterMatch and AfterRender specific context objects\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/web-server/hook.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\ntype AfterMatchContext = HookContext & {\n  router: {\n    redirect: (url: string, status: number) => void;\n    rewrite: (entry: string) => void;\n  };\n};\n\ntype AfterRenderContext = {\n  template: {\n    get: () => string;\n    set: (html: string) => void;\n    prependHead: (fragment: string) => void;\n    appendHead: (fragment: string) => void;\n    prependBody: (fragment: string) => void;\n    appendBody: (fragment: string) => void;\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring File-based Proxy Settings\nDESCRIPTION: Shows how to specify a separate proxy configuration file in the Modern.js config.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/global-proxy-config.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  dev: {\n    proxy: './proxy.js',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Optional Dynamic Route Component\nDESCRIPTION: Implementation of a component handling optional dynamic routes for create/edit scenarios.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/routes.mdx#2025-04-21_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useParams } from '@modern-js/runtime/router';\n\nfunction Blog() {\n  const { id } = useParams();\n  if (id) {\n    return <div>current blog ID is: {id}</div>;\n  }\n\n  return <div>create new blog</div>;\n}\nexport default Blog;\n```\n\n----------------------------------------\n\nTITLE: Feature Addition Entry\nDESCRIPTION: Changelog entry documenting addition of React Server Components (RSC) support for Rspack\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/cli/uni-builder/CHANGELOG.md#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n### Patch Changes\n\n- 58a1afd: feat: improve support rsc with rspack\n  feat: 完善 rspack 下对 rsc 的支持\n- 037bb48: fix: postcss.config not works\n```\n\n----------------------------------------\n\nTITLE: Storybook Proxy Middleware Template\nDESCRIPTION: Basic express middleware template for setting up proxy functionality in Storybook.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/faq/storybook.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\n/* eslint-disable filenames/match-exported */\nmodule.exports = function expressMiddleware(router) {\n    // router is express router\n    // import { Router } from 'express'\n    // router = new Router();\n};\n```\n\n----------------------------------------\n\nTITLE: Default Terser Configuration in Modern.js\nDESCRIPTION: The default configuration object for Terser in Modern.js projects. It sets the mangle option to preserve Safari 10 compatibility.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/terser.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultTerserOptions = {\n  terserOptions: {\n    mangle: {\n      safari10: true,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Adding Watch Files in Modern.js Development Mode\nDESCRIPTION: Shows how to add additional files to watch list during development using addWatchFiles API.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/cli-plugins/api.mdx#2025-04-21_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\napi.addWatchFiles(() => {\n  // Watch the .env file in the project root directory\n  return [path.resolve(api.getAppContext().appDirectory, '.env')];\n});\n```\n\n----------------------------------------\n\nTITLE: Setting Up String-based Proxy Configuration in Modern.js\nDESCRIPTION: Shows how to configure proxy using a separate proxy configuration file specified as a string path\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/components/global-proxy-config.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  dev: {\n    proxy: './proxy.js',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Running the Modern.js CLI to Enable Storybook V6\nDESCRIPTION: Command to enable the legacy Storybook V6 functionality in a Modern.js project using the Modern.js CLI tool.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/basic/using-storybook.mdx#2025-04-21_snippet_8\n\nLANGUAGE: bash\nCODE:\n```\n$ npx modern new\n? 请选择你想要的操作 启用可选功能\n? 请选择功能名称 启用「Storybook」\n```\n\n----------------------------------------\n\nTITLE: Exporting getLoaderCtx from server-core in JavaScript\nDESCRIPTION: Fix to export the getLoaderCtx function from the server-core module.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/core/CHANGELOG.md#2025-04-21_snippet_7\n\nLANGUAGE: JavaScript\nCODE:\n```\nwe should export `getLoaderCtx` from server-core\n```\n\n----------------------------------------\n\nTITLE: Installing Node.js with NVM\nDESCRIPTION: Commands to install Node.js 18 LTS version using Node Version Manager (nvm), set it as default, and switch to it for development.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/community/contributing-guide.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n# Install the LTS version of Node.js 18\nnvm install 18 --lts\n\n# Make the newly installed Node.js 18 as the default version\nnvm alias default 18\n\n# Switch to the newly installed Node.js 18\nnvm use 18\n```\n\n----------------------------------------\n\nTITLE: Displaying Project Directory Structure in Bash\nDESCRIPTION: This snippet shows the directory structure of a Modern.js project, illustrating the layout of the src folder with subdirectories that may or may not be recognized as entry points based on the disableEntryDirs configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/disable-entry-dirs.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n└── src/\n    ├── one/\n    |    └── App.tsx\n    ├── two/\n    |    └── routes/\n    └── env.d.ts\n```\n\n----------------------------------------\n\nTITLE: Excluding Specific Node Polyfills\nDESCRIPTION: Example showing how to exclude specific Node polyfills from being injected into the browser bundle. In this case, the 'console' polyfill is excluded.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/official-list/plugin-node-polyfill.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\nimport { modulePluginNodePolyfill } from '@modern-js/plugin-module-node-polyfill';\n\nexport default defineConfig({\n  plugins: [\n    moduleTools(),\n    modulePluginNodePolyfill({\n      exclude: ['console'],\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Setting HTML Page Title in Modern.js Configuration\nDESCRIPTION: This snippet demonstrates how to set the HTML page title using the 'html.title' option in the Modern.js configuration. The title is set to 'example' in this case.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/html/title.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    title: 'example',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining isFunction Type Guard in TypeScript\nDESCRIPTION: A simple TypeScript type guard that checks if a provided value is a function. This function is used throughout the codebase to validate function parameters.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/components/faq-storybook.mdx#2025-04-21_snippet_0\n\nLANGUAGE: TypeScript\nCODE:\n```\nexport const isFunction = (v: unknown): v is (...args: any[]) => any =>\n  typeof v === 'function';\n```\n\n----------------------------------------\n\nTITLE: Viewing Metric Event Output in Modern.js Development Environment\nDESCRIPTION: This shell snippet demonstrates the console output of metric events in Modern.js when running the dev command with the DEBUG=true environment variable. It shows various SSR debug logs with their respective costs and URLs.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/internal-metrics.mdx#2025-04-21_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\n> Local:    http://localhost:8080/\n> press h + enter to show shortcuts\n\ndebug   SSR Debug - server-loader, cost: 2.000094, req.url = /\ndebug   SSR Debug - ssr-prerender, cost: 6.99997, req.url = /\ndebug   SSR Debug - ssr-render-html, cost: 0.999927, req.url = /\ndebug   Debug - server-handle-request, cost: 19.999981, req.url = /\ndebug     --> GET / 200 90ms\n```\n\n----------------------------------------\n\nTITLE: Creating New Entry Point via CLI\nDESCRIPTION: Command line interaction example for creating a new entry point in Modern.js application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/concept/entries.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n? 请选择你想要的操作 创建工程元素\n? 请选择创建元素类型 新建「应用入口」\n? 请填写入口名称 new-entry\n```\n\n----------------------------------------\n\nTITLE: Forwarding Refs with Connect HOC\nDESCRIPTION: Example of using connect with forwardRef to properly handle React refs in connected components.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/model/connect.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useRef, forwardRef } from 'react';\n\nfunction Test(props, ref) {\n  const { a, b } = props;\n\n  return (\n    <div ref={ref}>\n      <span>{a}</span>\n      <span>{b}</span>\n    </div>\n  );\n}\n\nconst TestWrapper = connect([modelA, modelB], { forwardRef: true })(\n  forwardRef(Test),\n);\n\nfunction App() {\n  const testRef = useRef();\n\n  return <TestWrapper ref={testRef} />;\n}\n```\n\n----------------------------------------\n\nTITLE: Forced No-Inlining with React Component\nDESCRIPTION: Example of preventing asset inlining using the url query parameter in a React component\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/page-performance/inline-assets.mdx#2025-04-21_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport React from 'react';\nimport img from '. /foo.png?url';\n\nexport default function Foo() {\n  return <img src={img} />;\n}\n```\n\n----------------------------------------\n\nTITLE: Modifying Success Instructions in Modern.js Plugin\nDESCRIPTION: This snippet demonstrates how to use the onBeforePrintInstructions hook to modify the success messages printed by Modern.js. The hook provides access to the current instructions string and allows returning modified instructions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/plugin/cli-plugins/api.mdx#2025-04-21_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\napi.onBeforePrintInstructions(({ instructions }) => {\n  // do something\n  return { instructions }\n});\n```\n\n----------------------------------------\n\nTITLE: Correct Filename Hash Configuration for HMR in Modern.js\nDESCRIPTION: Shows the correct way to configure filename hashes to ensure HMR works properly in development mode.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/troubleshooting/hmr.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    filename: {\n      css:\n        process.env.NODE_ENV === 'production'\n          ? '[name].[contenthash:8].css'\n          : '[name].css',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Modern.js Module Import Plugin in TypeScript\nDESCRIPTION: This snippet demonstrates how to configure the @modern-js/plugin-module-import plugin in a Modern.js project. It imports the necessary functions and defines the configuration using the modulePluginImport function, specifying options for importing the 'antd' library with CSS styles.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/module/plugin-module-import/README.md#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@modern-js/module-tools';\nimport { modulePluginImport } from '@modern-js/plugin-module-import';\n\nexport default defineConfig({\n  plugins: [modulePluginImport({\n    pluginImport: [\n      {\n          libraryName: 'antd',\n          style: 'css',\n      },\n    ],\n  })],\n});\n```\n\n----------------------------------------\n\nTITLE: Adding Logic Before Build in Modern.js Plugin\nDESCRIPTION: This snippet demonstrates how to use the onBeforeBuild hook to execute custom logic before the build process starts. It corresponds to the onBeforeBuild hook in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/plugin/cli-plugins/api.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\napi.onBeforeBuild(()=>{\n    // 构建前做一些环境检查\n})\n```\n\n----------------------------------------\n\nTITLE: Version 2.42.0 Update\nDESCRIPTION: Contains changes to route manifest configuration, error handling for route module imports, and dependency updates.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/solutions/app-tools/CHANGELOG.md#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n- chore: use disableInlineRouteManifests instead of enableInlineRouteManifests\n- fix: catch the error of import route module\n```\n\n----------------------------------------\n\nTITLE: Incorrect React Component Declarations for HMR in Modern.js\nDESCRIPTION: Examples of React component declarations that can cause HMR issues due to the use of anonymous functions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/troubleshooting/hmr.mdx#2025-04-21_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n// bad\nexport default function () {\n  return <div>Hello World</div>;\n}\n\n// bad\nexport default () => <div>Hello World</div>;\n```\n\n----------------------------------------\n\nTITLE: Configuring AppIcon Using Object Syntax in JavaScript\nDESCRIPTION: This snippet shows the equivalent object-based configuration for app icons. It provides more detailed control over icon properties such as size and source.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/html/app-icon.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    appIcon: { icons: [{ src: './src/assets/icon.png', size: 180 }] }\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Extended Build Configuration with Array\nDESCRIPTION: Example showing how to extend the default build preset by adding additional build configurations using an array format.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/basic/modify-output-product.md#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\n\nexport default defineConfig({\n  plugins: [moduleTools()],\n  buildPreset: 'npm-library',\n  buildConfig: [\n    {\n      format: 'iife',\n      target: 'es2020',\n      outDir: './dist/global'\n    }\n  ]\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring html.injectByEntries in Modern.js\nDESCRIPTION: This snippet demonstrates how to use the html.injectByEntries configuration in Modern.js. It sets the global inject position to 'head' and specifies a different position ('body') for the 'foo' entry. This allows for page-specific script injection control.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/html/inject-by-entries.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    inject: 'head',\n    injectByEntries: {\n      foo: 'body',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing the Avatar component\nDESCRIPTION: This code implements the Avatar component in its own file using styled-components. It exports the styled img element as the default export.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c03-css.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport styled from '@modern-js/runtime/styled';\n\nconst Avatar = styled.img`\n  width: 50px;\n  height: 50px;\n  border: 4px solid #0ef;\n  border-radius: 50%;\n`;\n\nexport default Avatar;\n```\n\n----------------------------------------\n\nTITLE: Custom Domain Fallback Configuration in JavaScript\nDESCRIPTION: Example configuration showing how to specify multiple CDN domains for asset retry fallback behavior.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/assets-retry.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    assetsRetry: {\n      domain: ['https://cdn1.com', 'https://cdn2.com', 'https://cdn3.com'],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Extending Asset Types with Webpack/Rspack Configuration\nDESCRIPTION: Demonstrates how to extend the supported asset types in Modern.js by modifying the webpack/Rspack configuration. This example adds support for PDF files as assets.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/static-assets.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    bundlerChain(chain) {\n      chain.module\n        .rule('pdf')\n        .test(/\\.pdf$/)\n        .type('asset/resource');\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Registering Node Polyfill Plugin in Modern.js Module Configuration\nDESCRIPTION: This code snippet demonstrates how to register the Node Polyfill plugin in the Modern.js Module configuration file. It imports necessary dependencies and adds the plugin to the configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/plugins/official-list/plugin-node-polyfill.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\nimport { modulePluginNodePolyfill } from '@modern-js/plugin-module-node-polyfill';\n\nexport default defineConfig({\n  plugins: [moduleTools(), modulePluginNodePolyfill()],\n});\n```\n\n----------------------------------------\n\nTITLE: Post-Creation Commands for Modern.js Project\nDESCRIPTION: This snippet displays the success message after project creation and lists the available npm scripts for development, building, serving, linting, and adding new features.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/init-app.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n[INFO] dependencies are automatically installed\n[INFO] git repository has been automatically created\n[INFO] Success！\nYou can run the following command in the directory of the new project:\npnpm run dev          # Starting dev server\npnpm run build        # Build the app for production\npnpm run serve        # Preview the production build locally\npnpm run lint         # Run ESLint and automatically fix problems\npnpm run new          # Enable optional features or add a new entry\n```\n\n----------------------------------------\n\nTITLE: Showing HTTP Development Server URLs\nDESCRIPTION: Example of the console output showing local and network URLs when running the Modern.js development server with the default HTTP protocol.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/dev/https.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n  > Local:    http://localhost:8080/\n  > Network:  http://192.168.0.1:8080/\n```\n\n----------------------------------------\n\nTITLE: Running the setup command for custom Web Server in Modern.js\nDESCRIPTION: Command to enable the custom Web Server functionality through the Modern.js CLI. This initializes the necessary configuration and directory structure.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/web-server.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n? 请选择你想要的操作 创建工程元素\n? 请选择创建元素类型 新建「自定义 Web Server」源码目录\n```\n\n----------------------------------------\n\nTITLE: Executing Modern.js Upgrade Command\nDESCRIPTION: Example output of running the modern upgrade command to update a web application to the latest version.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/get-started/upgrade.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n> modern upgrade\n\n[INFO] [Project Type]: Web App\n[INFO] [Modern.js Latest Version]: x.y.z\n[INFO] Upgrade Modern.js package version success!\n```\n\n----------------------------------------\n\nTITLE: Inspecting SSR Configuration\nDESCRIPTION: Example of using the modern inspect command in a project with SSR enabled, which generates an additional webpack configuration file for SSR build.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/commands.mdx#2025-04-21_snippet_12\n\nLANGUAGE: bash\nCODE:\n```\n➜ npx modern inspect\n\nInspect config succeed, open following files to view the content:\n\n  - Rsbuild Config: /root/my-project/dist/rsbuild.config.mjs\n  - Webpack Config (web): /root/my-project/dist/webpack.config.web.mjs\n  - Webpack Config (node): /root/my-project/dist/webpack.config.node.mjs\n```\n\n----------------------------------------\n\nTITLE: Adding TSBuildInfo Files to .gitignore\nDESCRIPTION: Shows how to add TypeScript build info files to .gitignore to prevent them from being committed to the repository when using Project References.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/source-build.mdx#2025-04-21_snippet_7\n\nLANGUAGE: text\nCODE:\n```\n*.tsbuildinfo\n```\n\n----------------------------------------\n\nTITLE: Disabling Source Maps in Development\nDESCRIPTION: Configuration to disable source maps in development environment using bundlerChain to improve build performance.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/build-performance.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    bundlerChain(chain, { env }) {\n      if (env === 'development') {\n        chain.devtool(false);\n      }\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Webpack Build Options for Development in Modern.js\nDESCRIPTION: This snippet showcases how to configure Webpack build options for the development environment in a Modern.js project. It sets up the output path and filename for the bundled files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/components/publish-emo.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    webpack: (config, { env }) => {\n      if (env === 'development') {\n        config.output = {\n          ...config.output,\n          path: './dist',\n          filename: '[name].bundle.js',\n        };\n      }\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using handleEffect Utility for Todo Model\nDESCRIPTION: Demonstrates using the handleEffect utility to simplify the creation of Promise-related actions in the todo model.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/manage-effects.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst todoModel = model('todo').define({\n  state: {\n    items: [],\n    loading: false,\n    error: null,\n  },\n  actions: {\n    load: handleEffect({ result: 'items' }),\n  },\n  effects: {\n    // Promise effects\n    async load() {\n      return new Promise(resolve => {\n        setTimeout(() => resolve(['Learn Modern.js']), 2000);\n      });\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom Module Resolution Main Fields in Modern.js Module\nDESCRIPTION: Customizes the order of package.json fields to try when resolving package entry points. This example prioritizes the js:source field over the standard module and main fields.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_38\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    resolve: {\n      mainFields: ['js:source', 'module', 'main'],\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Registering Polyfill Plugin in Modern.js Module\nDESCRIPTION: Basic example of how to register the polyfill plugin in a Modern.js Module configuration file. This adds polyfill functionality to the module build process.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/plugins/official-list/plugin-polyfill.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\nimport { modulePluginPolyfill } from '@modern-js/plugin-module-polyfill';\n\nexport default defineConfig({\n  plugins: [moduleTools(), modulePluginPolyfill()],\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Pug Options with Object Type\nDESCRIPTION: Setting specific Pug options using an object configuration. This example shows how to set the doctype option to XML.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/pug.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    pug: {\n      doctype: 'xml',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting resolveMainFields in Modern.js Configuration\nDESCRIPTION: Example of setting the 'resolveMainFields' option in the Modern.js configuration file. It specifies the order of fields to check in package.json when resolving npm modules.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/source/resolve-main-fields.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  source: {\n    resolveMainFields: ['main', 'browser', 'exports'],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Modern.js Documentation Plugin with Different Parse Tools\nDESCRIPTION: Example configuration showing how to use different parsing tools for different files in the Modern.js documentation plugin.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/use-module-doc.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\nimport { modulePluginDoc } from '@modern-js/plugin-rspress';\n\nexport default defineConfig({\n  plugins: [\n    moduleTools(),\n    modulePluginDoc({\n      entries: {\n        documentation: {\n          Add: './src/utils/add.ts',\n        },\n        'react-docgen-typescript': {\n          Button: './src/components/button.tsx',\n        },\n      },\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Default Output Directory Structure in Modern.js\nDESCRIPTION: Shows the basic directory structure for output files in a Modern.js project. Compiled files are typically output to the 'dist' directory, with subdirectories for static assets and HTML files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/output-files.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ndist\n├── static\n│   ├── css\n│   │   ├── [name].[hash].css\n│   │   └── [name].[hash].css.map\n│   │\n│   └── js\n│       ├── [name].[hash].js\n│       ├── [name].[hash].js.LICENSE.txt\n│       └── [name].[hash].js.map\n│\n└── html\n    └── [name]\n        └── index.html\n```\n\n----------------------------------------\n\nTITLE: Creating and Using Async Hooks in Modern.js Plugins\nDESCRIPTION: This example shows how to create async hooks using createAsyncHook, register them in a plugin, and use them in other plugins. It demonstrates the asynchronous nature of these hooks and their typical use cases.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/plugin-system.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n// Define Hooks\nimport { createAsyncHook } from '@modern-js/plugin-v2';\n\nexport type AfterPrepareFn = () => Promise<void> | void;\nexport const onAfterPrepare = createAsyncHook<AfterPrepareFn>();\n\n// Register Hooks in the plugin\nconst myPlugin = () => ({\n  name: \"my-plugin\",\n  registryHooks: {\n    onAfterPrepare,\n  },\n  setup: (api) => {\n    api.onPrepare(async () => {\n      // Use the registered Hooks in the plugin\n      const hooks = api.getHooks();\n      await hooks.onAfterPrepare.call();\n    });\n  }\n});\n\n// Use Hook in other plugins\nconst myPlugin2 = () => ({\n  name: \"my-plugin-2\",\n  setup: (api) => {\n    api.onAfterPrepare(async () => {\n      // TODO\n    });\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Generated HTML Tag for Apple Touch Icon\nDESCRIPTION: Demonstrates the HTML link tag that Modern.js automatically generates in the build output when an icon file is provided. The tag includes appropriate attributes for iOS devices.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/hooks/config/icon.mdx#2025-04-21_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<link rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"/static/image/icon.png\" />\n```\n\n----------------------------------------\n\nTITLE: Complete Modern.js i18n Configuration Example\nDESCRIPTION: A comprehensive example showing all available i18n configuration options in Modern.js, including locales, namespaces, detection, and more.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/tests/integration/bff-hono/CHANGELOG.md#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  i18n: {\n    // locale configuration\n    locales: [\n      { locale: 'en-US', text: 'English' },\n      { locale: 'zh-CN', text: '简体中文' },\n    ],\n    // Setting the default locale\n    default: 'en-US',\n    // namespace configuration\n    ns: ['common', 'home'],\n    // Configuring the detection order of locales\n    detection: {\n      order: ['cookie', 'localStorage', 'navigator', 'htmlTag'],\n    },\n    // Setting fallback locale\n    fallback: true,\n    fallbackLocale: 'en-US',\n    // Cookie configuration\n    cookie: {\n      path: '/',\n      maxAge: 365,\n    },\n    // Enable debug mode\n    debug: true,\n    // Whether to load resources by default\n    loadResources: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Storybook Webpack in Modern.js\nDESCRIPTION: Example of configuring Storybook webpack settings in Modern.js Module. This configuration is deprecated and only works with Storybook V6.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/dev.md#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    storybook: {\n      webpack(config) {\n        return config;\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring UMD Module Name in Modern.js\nDESCRIPTION: This snippet demonstrates how to set a static UMD module name in the Modern.js configuration file. It specifies 'myLib' as the UMD module name, which will be used to mount the UMD build on the global object.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_41\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    format: 'umd',\n    umdModuleName: 'myLib',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Adding Logic After Build in Modern.js Plugin\nDESCRIPTION: This snippet shows how to use the onAfterBuild hook to execute custom logic after the build process completes. It corresponds to the onAfterBuild hook in Rsbuild and can be used for tasks like uploading source maps.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/plugin/cli-plugins/api.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\napi.onAfterBuild(()=>{\n    // 构建后上传sourceMap\n})\n```\n\n----------------------------------------\n\nTITLE: Locking React Types Versions in Modern.js package.json\nDESCRIPTION: Demonstrates how to lock the versions of @types/react and @types/react-dom in the package.json file to resolve ReactNode type conflicts in Modern.js projects.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/troubleshooting/dependencies.mdx#2025-04-21_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"@types/react\": \"^17\",\n  \"@types/react-dom\": \"^17\"\n}\n```\n\n----------------------------------------\n\nTITLE: On-Demand Mock Configuration\nDESCRIPTION: Shows how to configure conditional mock behavior using the config export with TypeScript types.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/debug/mock.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\ntype MockConfig = {\n  enable: ((req: IncomingMessage, res: ServerResponse) => boolean) | boolean;\n};\n\nexport const config = {\n  enable: false\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Decorator Configuration Type in TypeScript\nDESCRIPTION: TypeScript type definition for decorator configuration options, specifying possible version values.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/decorators.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype Decorators = {\n  version?: 'legacy' | '2022-03';\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Default Options for CSS Extraction in JavaScript\nDESCRIPTION: Provides default configuration options for CSS extraction, including loader options and plugin options with file naming conventions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/css-extract.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultOptions = {\n  // The loader options\n  loaderOptions: {},\n  // The plugin options\n  pluginOptions: {\n    // The default value of cssPath is `static/css`\n    // while the default value of cssFilename is `[name].[contenthash:8].css`\n    filename: `${cssPath}/${cssFilename}`,\n    chunkFilename: `${cssPath}/async/${cssFilename}`,\n    ignoreOrder: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: RequestContext Type Definition\nDESCRIPTION: Type definition for RequestContext which can be either ServerContext or ClientContext depending on the runtime environment.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/core/use-runtime-context.mdx#2025-04-21_snippet_3\n\nLANGUAGE: ts\nCODE:\n```\ntype RequestContext = ServerContext | ClientContext;\n```\n\n----------------------------------------\n\nTITLE: Configuring External React Dependencies in Modern.js\nDESCRIPTION: Example of how externalized React dependencies can cause HMR issues. When React is externalized via CDN, it often loads production builds that don't support hot reloading.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/troubleshooting/hmr.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    externals: {\n      react: 'React',\n      'react-dom': 'ReactDOM',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: TypeScript Declarations for YAML Files\nDESCRIPTION: Type declarations for YAML files in TypeScript to ensure proper type checking when importing YAML files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/static-assets/json-files.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare module '*.yaml' {\n  const content: Record<string, any>;\n  export default content;\n}\n\ndeclare module '*.yml' {\n  const content: Record<string, any>;\n  export default content;\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Builder Options in Storybook\nDESCRIPTION: Example demonstrating how to specify custom builder configuration options in Storybook setup.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/debug/using-storybook.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nconst config = {\n  framework: {\n    name: '@modern-js/storybook',\n    options: {\n      builderConfig: {\n        alias: {\n          react: require.resolve('react'),\n          'react-dom': require.resolve('react-dom'),\n        },\n      },\n    },\n  },\n};\n\nexport default config;\n```\n\n----------------------------------------\n\nTITLE: Starting a Development Server with Modern Dev\nDESCRIPTION: Example of running the modern dev command which starts a local development server, watches for source file changes, and enables hot module replacement.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/commands.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n$ modern dev\n\ninfo    Starting dev server...\n\n  > Local:    http://localhost:8080/\n  > Network:  http://192.168.0.1:8080/\n```\n\n----------------------------------------\n\nTITLE: Output JavaScript for Large Images (File Reference)\nDESCRIPTION: The resulting JavaScript output when the imported image is larger than 10kb. In this case, the image is emitted as a separate file with a hash in the filename, and the module imports this file path.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/asset.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport img from './assets/bg.13e2aba2.png';\nconsole.info(img);\n```\n\n----------------------------------------\n\nTITLE: Type Definitions for Reduck Connect API\nDESCRIPTION: Type definitions for the connect HOC API, including SelectStateToProps and SelectActionsToProps interfaces and the connect function signatures.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/model/connect.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype SelectStateToProps = (\n  ...modelStates: State[],\n  ownProps?: any,\n) => PlainObject;\ntype SelectActionsToProps = (\n  ...modelActions: Actions[],\n  ownProps?: any,\n) => PlainObject;\n\nfunction connect(models: Model, options?: ConnectOptions);\nfunction connect(\n  models: [...Model[], SelectStateToProps?, SelectActionsToProps?],\n  options?: ConnectOptions,\n);\n```\n\n----------------------------------------\n\nTITLE: Generated Meta Tag for Specific Entry\nDESCRIPTION: The resulting HTML meta tag output for the 'foo' entry page after compilation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/html/meta-by-entries.mdx#2025-04-21_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<meta name=\"description\" content=\"TikTok\" />\n```\n\n----------------------------------------\n\nTITLE: Custom Import Configuration Example\nDESCRIPTION: Example showing how to configure custom import settings for a library named 'foo' with style importing enabled.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/plugins/official-list/plugin-import.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { modulePluginImport } from '@modern-js/plugin-module-import';\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\n\nexport default defineConfig({\n  plugins: [\n    moduleTools(),\n    modulePluginImport({\n      pluginImport: [\n        // babel-plugin-import 的 options 配置\n        {\n          libraryName: 'foo',\n          style: true,\n        },\n      ],\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Importing Ant Design List Component in Modern.js\nDESCRIPTION: This snippet shows how to import the List component from the Ant Design library in a Modern.js application. This import statement should be added at the top of the src/routes/page.tsx file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c02-component.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { List } from 'antd';\n```\n\n----------------------------------------\n\nTITLE: Type Definitions for Modern.js Module Tools Development Menu Hooks\nDESCRIPTION: Defines the TypeScript types used in the development menu hooks, including QuestionCollection, Options, PromptResult, and DevToolData interfaces that structure the development menu system.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/plugin-api/plugin-hooks.md#2025-04-21_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\nexport type { QuestionCollection } from 'inquirer';\n\nexport interface Options {\n  result: PromptResult;\n  devTools: DevToolData[];\n}\n\nexport type PromptResult = { choiceDevTool: string };\nexport interface DevToolData {\n  name: string;\n  subCommands?: string[];\n  menuItem?: {\n    name: string;\n    value: string;\n  };\n  action: (\n    options: { port?: string },\n    context: { isTsProject?: boolean },\n  ) => void | Promise<void>;\n}\n```\n\n----------------------------------------\n\nTITLE: Importing RsbuildLink Component in Modern.js Documentation\nDESCRIPTION: Imports a custom React component called RsbuildLink from the site's components directory, used for linking to Rsbuild configuration documentation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/rsbuild-config-tooltip.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport RsbuildLInk from '@site/src/components/RsbuildLink';\n```\n\n----------------------------------------\n\nTITLE: Creating New TypeScript Configuration for Modern.js\nDESCRIPTION: A function that creates a new TypeScript configuration object by merging a base configuration with additional options. It allows for extending other tsconfig files and provides flexibility in configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/components/release-module-doc.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport const getTsconfig = (\n  type: 'app' | 'module' | 'monorepo' | 'storybook',\n  options: {\n    disableSWC?: boolean;\n    tsconfigPath?: string;\n    alias?: string;\n  } = {},\n) => {\n  const { disableSWC = false, alias, tsconfigPath } = options;\n\n  const compilerOptions = {\n    allowJs: true,\n    resolveJsonModule: true,\n    isolatedModules: true,\n    paths: generateTsPath(type, { alias }),\n  };\n\n  /* eslint-disable no-nested-ternary */\n  return tsconfigPath\n    ? {\n        extends: tsconfigPath,\n        compilerOptions,\n      }\n    : {\n        compilerOptions: {\n          target: 'es5',\n          module: 'esnext',\n          moduleResolution: 'node',\n          strict: true,\n          jsx: 'preserve',\n          sourceMap: true,\n          ...(disableSWC\n            ? {}\n            : {\n                experimentalDecorators: true,\n              }),\n          ...compilerOptions,\n        },\n      };\n};\n```\n\n----------------------------------------\n\nTITLE: Using Fallback Node.js Modules in Browser Code\nDESCRIPTION: Example demonstrating the behavior when importing Node.js modules without browser polyfills. These modules fallback to empty objects in the browser environment.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/official-list/plugin-node-polyfill.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport fs from 'fs';\n\nconsole.log(fs); // -> {}\n```\n\n----------------------------------------\n\nTITLE: Building Components in Watch Mode for Storybook\nDESCRIPTION: Command to build Modern.js components in watch mode, which is recommended when using Storybook to ensure component changes are reflected in stories.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/using-storybook.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nmodern build --watch\n```\n\n----------------------------------------\n\nTITLE: Updating Plugin Type Definition in TypeScript\nDESCRIPTION: Shows how to migrate from the old CliPlugin type to the new CliPluginFuture type. This change ensures proper type inference and API structure compatibility with the new plugin system.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/cli-plugins/migration.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// Old Syntax\nimport type { CliPlugin, AppTools } from '@modern-js/app-tools';\n\nconst plugin: CliPlugin<AppTools<'shared'>> = { ... };\n\n// New Syntax\nimport type { CliPluginFuture, AppTools } from '@modern-js/app-tools';\n\nconst plugin: CliPluginFuture<AppTools<'shared'>> = { ... };\n```\n\n----------------------------------------\n\nTITLE: Locking Sub-dependencies with Npm in package.json\nDESCRIPTION: This JSON snippet illustrates how to lock a sub-dependency version using Npm in the package.json file. It uses the 'overrides' field to specify the version.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/get-started/upgrade.mdx#2025-04-21_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"overrides\": {\n    \"package-name\": \"^1.0.0\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Selecting Project Options in Modern.js CLI\nDESCRIPTION: This snippet shows the interactive CLI prompts for selecting the programming language and package manager when initializing a Modern.js project.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/init-app.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n? Please select the programming language: TS\n? Please select the package manager: pnpm\n```\n\n----------------------------------------\n\nTITLE: Defining Storybook File Pattern\nDESCRIPTION: File pattern specification for Storybook files in Modern.js projects. Files can be created with extensions .js, .jsx, .ts, .tsx, or .mdx in the src/ directory.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/hooks/src/stories.mdx#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\n**/*.stories.[tj]sx\n```\n\n----------------------------------------\n\nTITLE: Fixed Version Dependencies Configuration\nDESCRIPTION: Example of recommended dependency version declaration using fixed versions instead of ranges.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/get-started/upgrade.mdx#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"dependencies\": {\n    \"@modern-js/app-tools\": \"x.y.z\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Development Dependencies in package.json\nDESCRIPTION: Example of specifying development dependencies in the package.json file. It demonstrates how to list packages required only for development under the 'devDependencies' field.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/before-getting-started.md#2025-04-21_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"name\": \"your-npm-project\",\n  \"devDependencies\": {\n    \"npm-package-name\": \"0.1.0\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Changeset File Content Example\nDESCRIPTION: Example content of a generated changeset markdown file that records version changes and descriptions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/basic/publish-your-project.mdx#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n---\n'module-example': patch\n---\n\npublish test\n```\n\n----------------------------------------\n\nTITLE: Displaying Default HTML Output Structure in Modern.js\nDESCRIPTION: Shows the default directory structure for HTML output in the dist folder of a Modern.js project.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/html/disable-html-folder.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n/dist\n└── html\n    └── main\n        └── index.html\n```\n\n----------------------------------------\n\nTITLE: Configuring Code Minification with Terser in Modern.js Module\nDESCRIPTION: Enables code minification with specific Terser options. This example configures Terser to remove console.log statements during minification.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_34\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    minify: {\n      compress: {\n        drop_console: true,\n      },\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Registering Polyfill Plugin in Modern.js Module\nDESCRIPTION: Basic setup for registering the polyfill plugin in a Modern.js module configuration file. This shows the standard way to include the plugin in the build process.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/official-list/plugin-polyfill.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\nimport { modulePluginPolyfill } from '@modern-js/plugin-module-polyfill';\n\nexport default defineConfig({\n  plugins: [moduleTools(), modulePluginPolyfill()],\n});\n```\n\n----------------------------------------\n\nTITLE: Importing Static Assets in TypeScript\nDESCRIPTION: Example of importing a PNG image file in a TypeScript file. This shows the basic syntax for importing static assets that will be processed by Modern.js Module.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/asset.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport img from './bg.png';\n//...\n```\n\n----------------------------------------\n\nTITLE: Disabling TypeScript Checker in Production Environment\nDESCRIPTION: This snippet shows how to disable the TypeScript type checker specifically in the production environment. However, it's not recommended to disable type checking in production as it may reduce code stability.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/disable-ts-checker.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    disableTsChecker: process.env.NODE_ENV === 'production',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Displaying Basic Routes Directory Structure in Modern.js\nDESCRIPTION: This snippet shows the basic directory structure for conventional routing in Modern.js applications. It highlights the layout.tsx and page.tsx files which are used as route components.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/hooks/src/routes.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n.\n└── routes\n    ├── layout.tsx\n    ├── page.tsx\n    └── user\n        ├── layout.tsx\n        └── page.tsx\n```\n\n----------------------------------------\n\nTITLE: Required tsconfig.json Configuration for Modern.js Projects\nDESCRIPTION: Essential TypeScript compiler options that must be included in tsconfig.json for Modern.js projects. These settings ensure proper source file organization, project references, and type declaration generation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/tests/integration/source-code-build/common/readme.md#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"compilerOptions\": {\n    \"rootDir\": \"./src\",\n    \"composite\": true,\n    \"declaration\": true,\n    \"declarationDir\": \"./dist/types\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Express.js BFF Plugin\nDESCRIPTION: Configuration for enabling BFF with Express.js runtime framework in Modern.js using express and bff plugins.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/enable-bff.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { expressPlugin } from '@modern-js/plugin-express';\nimport { bffPlugin } from '@modern-js/plugin-bff';\n\nexport default defineConfig({\n  plugins: [expressPlugin(), bffPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Cookie Options for Locale Storage in Modern.js\nDESCRIPTION: Example demonstrating how to configure cookie-related options for storing locale preference in Modern.js i18n.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/tests/integration/bff-hono/CHANGELOG.md#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  i18n: {\n    // Cookie configuration\n    cookie: {\n      path: '/',\n      // Cookie expiration time, in days\n      maxAge: 365,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using Build Lifecycle Hooks in Modern.js Module\nDESCRIPTION: Registers custom build hooks to inject custom logic at specific stages of the build process. This example adds a renderChunk hook to potentially modify chunk output.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_26\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    buildType: 'bundle',\n    hooks: [\n      {\n        name: 'renderChunk',\n        apply: compiler => {\n          // any logic for compiler\n          compiler.hooks.renderChunk.tapPromise(\n            { name: 'renderChunk' },\n            async chunk => {\n              return chunk;\n            },\n          );\n        },\n      },\n    ],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Correct React Component Declarations for Hot Reload\nDESCRIPTION: Examples of properly declaring React components with named functions to ensure Fast Refresh can correctly maintain component state during hot updates.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/troubleshooting/hmr.mdx#2025-04-21_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n// 正确写法 1\nexport default function MyComponent() {\n  return <div>Hello World</div>;\n}\n\n// 正确写法 2\nconst MyComponent = () => <div>Hello World</div>;\n\nexport default MyComponent;\n```\n\n----------------------------------------\n\nTITLE: Creating a Custom Web Server with Modern.js CLI\nDESCRIPTION: Shell command to create a new Custom Web Server source code directory using Modern.js CLI. This is a prerequisite for using the Middleware API.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/web-server/middleware.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\npnpm run new\n? Please select the operation you want: Create Element\n? Please select the type of element to create: New \"Custom Web Server\" source code directory\n```\n\n----------------------------------------\n\nTITLE: Adding route info to unstable_middleware context in Modern.js\nDESCRIPTION: A patch change that adds route information to the unstable_middleware context, enhancing the middleware's ability to make routing-based decisions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/plugin-server/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n- 3d2bf55: feat: add route info into unstable_middleware context\n  feat: 添加路由信息到 unstable_middleware 上下文中\n```\n\n----------------------------------------\n\nTITLE: Defining Modern.js Module Homepage with YAML Front Matter\nDESCRIPTION: YAML front matter configuration for the Modern.js Module homepage. It specifies the page type, hero section with title and call-to-action links, and features section that highlights the key capabilities of the module engineering solution.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/index.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\n---\npageType: home\n\nhero:\n  name: Modern.js Module\n  text: Module engineering solutions\n  tagline: simple, powerful, high-performance modern npm package development solution\n  actions:\n    - theme: brand\n      text: Welcome\n      link: /guide/intro/welcome\n    - theme: alt\n      text: Quick Start\n      link: /guide/intro/getting-started\n\nfeatures:\n  - title: 'esbuild: The High Performance JS Bundler'\n    details: Built on esbuild, the build is extremely fast and gives you the ultimate development experience.\n    icon: 🚀\n  - title: 'Two build modes'\n    details: Both bundle and bundleless build modes are supported.\n    icon: ✨\n  - title: 'Out of the box'\n    details: Develop your npm packages without too much configuration, with built-in presets covering a wide range of scenarios.\n    icon: 🛠️\n  - title: 'Extensible: Provides a powerful plugin mechanism'\n    details: With its plugin extension mechanism, you can easily extend the capabilities of Modern.js Module.\n    icon: 🎨\n  - title: 'Storybook: The community popular UI development tool'\n    details: Integrated with Storybook, you can use it to debug UI.\n    icon: 📦\n  - title: 'Lint: Code Formatting'\n    details: Built-in ESLint rules for rich scenarios.\n    icon: 📐\n---\n```\n\n----------------------------------------\n\nTITLE: Creating Custom Web Server Directory\nDESCRIPTION: Command line instructions for creating a new Custom Web Server source code directory\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/web-server/hook.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\npnpm run new\n? Please select the operation you want: Create Elements\n? Please select the type of element to create: New \"Custom Web Server\" source code directory\n```\n\n----------------------------------------\n\nTITLE: Using inspect command to view webpack/Rspack configuration\nDESCRIPTION: Command to view the final Modern.js configuration and webpack/Rspack configuration generated by the project.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/troubleshooting/builder.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n➜ npx modern inspect\n\nInspect config succeed, open following files to view the content:\n\n  - Builder Config: /root/my-project/dist/rsbuild.config.mjs\n  - Rspack Config (web): /root/my-project/dist/rspack.config.web.mjs\n```\n\n----------------------------------------\n\nTITLE: Disabling Asset Inlining\nDESCRIPTION: Configures the threshold for static assets to be automatically inlined as base64. Setting the limit to 0 prevents any assets from being inlined.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    asset: {\n      limit: 0,\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Supporting ModifyRoutes Hook in JavaScript\nDESCRIPTION: Adds support for the modifyRoutes hook for router v5.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/runtime/plugin-runtime/CHANGELOG.md#2025-04-21_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\nfeat: support modifyRoutes hook for router v5\n```\n\n----------------------------------------\n\nTITLE: Configuring Global Variable Names for Dependencies\nDESCRIPTION: Configuration to map NPM dependency names to global variable names for use in browser environments with UMD builds.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/build-umd.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    format: 'umd',\n    umdGlobals: {\n      react: 'React',\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Selecting Entries in Multi-Page Applications\nDESCRIPTION: Using the --entry option with modern dev command to display an interactive selector for choosing which pages to compile in multi-page applications.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/commands.mdx#2025-04-21_snippet_2\n\nLANGUAGE: text\nCODE:\n```\n$ modern dev --entry\n\n? Please select the entry that needs to be built\n❯ ◯ foo\n  ◯ bar\n  ◯ baz\n```\n\n----------------------------------------\n\nTITLE: Configuring HTML Injection by Entries in Modern.js\nDESCRIPTION: This snippet demonstrates how to use the 'injectByEntries' option to set different script tag insertion positions for different pages in a multi-page scenario. It shows how to override the global 'inject' setting for a specific entry.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/html/inject-by-entries.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    inject: 'head',\n    injectByEntries: {\n      foo: 'body',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Registering the Banner Plugin in Modern.js Module Tools\nDESCRIPTION: This code demonstrates how to register the Banner Plugin with Modern.js module tools, adding comments to the top of JS and CSS files. The example shows basic configuration for injecting a simple comment in both file types.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/official-list/plugin-banner.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\nimport { modulePluginBanner } from '@modern-js/plugin-module-banner';\n\nexport default defineConfig({\n  plugins: [\n    moduleTools(),\n    modulePluginBanner({\n      banner: {\n        js: '//comment',\n        css: '/*comment*/',\n      },\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Specifying Page Entries by Parameter\nDESCRIPTION: Examples of specifying specific page entries as parameters to the --entry option, allowing for compilation of one or multiple pages.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/commands.mdx#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n# Compile foo page\nmodern dev --entry foo\n\n# Compile foo and bar pages\nmodern dev --entry foo,bar\n```\n\n----------------------------------------\n\nTITLE: Building Production Artifacts with Modern.js Module\nDESCRIPTION: The 'modern build' command builds production artifacts with options for watch mode, specifying tsconfig, platform-specific builds, and controlling DTS generation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/basic/command-preview.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nUsage: modern build [options]\n\n构建生产环境产物\n\nOptions:\n  -w, --watch            使用监听模式构建代码\n  --tsconfig [tsconfig]  指定 tsconfig.json 文件的路径 (default:\n                         \"./tsconfig.json\")\n  --platform [platform]  构建所有或者指定平台的产物\n  --no-dts               关闭 DTS 类型文件生成和类型检查\n  --no-clear             关闭自动清除产物输出目录的行为\n  -c, --config <config>  指定配置文件（default: \"modern.config.j(t)s\"）\n  -h, --help             展示当前命令的信息\n```\n\n----------------------------------------\n\nTITLE: Registering Banner Plugin in Modern.js Module Configuration\nDESCRIPTION: This snippet demonstrates how to register the Banner plugin in a Modern.js Module configuration file. It shows how to add comments to the top of JS and CSS files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/plugins/official-list/plugin-banner.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\nimport { modulePluginBanner } from '@modern-js/plugin-module-banner';\n\nexport default defineConfig({\n  plugins: [\n    moduleTools(),\n    modulePluginBanner({\n      banner: {\n        js: '//comment',\n        css: '/*comment*/',\n      },\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Conditional SSR Configuration in Modern.js\nDESCRIPTION: This snippet shows how to conditionally enable SSR for an entry based on the environment, only enabling it for the 'landing-page' in development mode.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c08-entries.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  server: {\n    ssrByEntries: {\n      'landing-page': process.env.NODE_ENV !== 'production',\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Output Directory Structure Examples\nDESCRIPTION: Examples of the output directory structures produced by Modern.js Module when processing static assets. Shows both cases for small (inlined) and large (separate file) assets.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/asset.mdx#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n./dist\n└── asset.js\n```\n\nLANGUAGE: bash\nCODE:\n```\n./dist\n├── asset.js\n└── assets\n    └── bg.13e2aba2.png\n```\n\n----------------------------------------\n\nTITLE: Building Storybook Output with Modern.js V6\nDESCRIPTION: Command for building Storybook output files in Modern.js Module V6, which places the build artifacts in the dist/storybook-static directory.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/using-storybook.mdx#2025-04-21_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\nmodern build --platform storybook\n```\n\n----------------------------------------\n\nTITLE: Template-based Custom Import Configuration\nDESCRIPTION: Demonstrates using handlebars templates for custom import path configuration with kebabCase transformation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/plugins/official-list/plugin-import.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { modulePluginImport } from '@modern-js/plugin-module-import';\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\n\nexport default defineConfig({\n  plugins: [\n    moduleTools(),\n    modulePluginImport({\n      pluginImport: [\n        {\n          libraryName: 'foo',\n          customName: 'foo/es/{{ kebabCase member }}',\n        },\n      ],\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Importing defineConfig from Modern.js Runtime\nDESCRIPTION: Shows how to import the defineConfig function from the Modern.js runtime package. This is the first step to using runtime configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/app/define-config.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@modern-js/runtime';\n```\n\n----------------------------------------\n\nTITLE: UnstableMiddlewareContext Type Definition\nDESCRIPTION: Defines the context type for middleware, including request/response handling and utility methods.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/web-server/unstable_middleware.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\ntype Body = ReadableStream | ArrayBuffer | string | null;\n\ntype UnstableMiddlewareContext<\n  V extends Record<string, unknown> = Record<string, unknown>,\n> = {\n  request: Request;\n  response: Response;\n  get: Get<V>;\n  set: Set<V>;\n  header: (name: string, value: string, options?: { append?: boolean }) => void;\n  status: (code: number) => void;\n  redirect: (location: string, status?: number) => Response;\n  body: (data: Body, init?: ResponseInit) => Response;\n  html: (\n    data: string | Promise<string>,\n    init?: ResponseInit,\n  ) => Response | Promise<Response>;\n};\n```\n\n----------------------------------------\n\nTITLE: Default HTML Template Structure for EJS Approach\nDESCRIPTION: Shows the structure of the default HTML template that is used when customizing with HTML fragments, with placeholders for custom sections.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/html.mdx#2025-04-21_snippet_4\n\nLANGUAGE: xml\nCODE:\n```\n<!DOCTYPE html>\n<html>\n  <head>\n    <%= topTemplate %>\n    <%= headTemplate %>\n    {/* webpack inject css  */}\n  </head>\n  <body>\n    <noscript>\n      We're sorry but react app doesn't work properly without JavaScript\n      enabled. Please enable it to continue.\n    </noscript>\n    <div id=\"<%= mountId %>\"></div>\n    <%= bodyTemplate %>\n    {/* webpack inject js  */}\n    {/* <?- bottomTemplate ?> */}\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Type Declaration for SVG Components\nDESCRIPTION: Defines TypeScript type declarations for SVG files to properly support importing them as React components.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_7\n\nLANGUAGE: TypeScript\nCODE:\n```\ndeclare module '*.svg' {\n  const src: React.FunctionComponent<React.SVGProps<SVGSVGElement>>;\n  export default src;\n}\n```\n\n----------------------------------------\n\nTITLE: Bundling Test Files for Modern.js Integration Tests\nDESCRIPTION: Function to bundle test files using esbuild for Modern.js integration tests. It transforms TypeScript files to JavaScript with appropriate configurations and outputs them to the specified directory.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/components/faq-build-product.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport async function bundleTestFiles(options: {\n  entryPoints: string[];\n  outdir: string;\n}) {\n  const { entryPoints, outdir } = options;\n\n  // should keep same with jest config\n  process.env.NODE_ENV = 'test';\n  process.env.MODERNJS_TEST = 'true';\n  process.env.IS_MODERN_JS_DIST = 'true';\n\n  try {\n    await build({\n      entryPoints,\n      bundle: true,\n      format: 'cjs',\n      target: 'es2019',\n      platform: 'node',\n      outdir,\n      sourcemap: true,\n      loader: {\n        '.svg': 'dataurl',\n      },\n    });\n  } catch (e) {\n    console.error(e);\n    process.exit(1);\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Basename Type Definition\nDESCRIPTION: Defines the basename configuration type as string with a default empty value. Used for specifying the subpath where the app is deployed.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/runtime/router.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nbasename: string = \"\"\n```\n\n----------------------------------------\n\nTITLE: PNPM Dependency Override Configuration\nDESCRIPTION: Configuration for locking nested dependency versions using PNPM package manager.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/get-started/upgrade.mdx#2025-04-21_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"pnpm\": {\n    \"overrides\": {\n      \"package-name\": \"^1.0.0\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Example List Component in JSX\nDESCRIPTION: This code snippet imports and renders an ExampleList component that likely displays a list of tutorial examples. It's used to showcase case studies within the tutorial documentation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/foundations/introduction.mdx#2025-04-21_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport ExampleList from '@site-docs-en/components/turtorials-example-list';\n\n<ExampleList />\n```\n\n----------------------------------------\n\nTITLE: Configuring Package.json for Cypress\nDESCRIPTION: Adding Cypress test command to package.json scripts for running tests.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/testing/cypress.mdx#2025-04-21_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"test\": \"cypress open\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Customizing buildPreset Using the extendPreset Function\nDESCRIPTION: Example of using the extendPreset function to modify an existing preset by merging additional configuration values.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-preset.mdx#2025-04-21_snippet_10\n\nLANGUAGE: ts\nCODE:\n```\nimport { defineConfig } from '@modern-js/module-tools';\n\nexport default defineConfig({\n  buildPreset({ extendPreset }) {\n    return extendPreset('npm-library', {\n      define: {\n        VERSION: '1.0.1',\n      },\n    });\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring webpack devtool based on environment in Modern.js\nDESCRIPTION: Example of modifying the webpack devtool configuration based on the current environment (development vs production) using the webpackChain function.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/webpack-chain.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    webpackChain: (chain, { env }) => {\n      if (env === 'development') {\n        chain.devtool('cheap-module-eval-source-map');\n      }\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Bundle Mode Input Files in Modern.js Module\nDESCRIPTION: Specifies entry files for the bundle build mode. This configuration uses an array syntax to define multiple entry points that will be built separately.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_27\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    buildType: 'bundle',\n    input: ['src/index.ts', 'src/index2.ts'],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Illustrating Dynamic Route Structure in Modern.js\nDESCRIPTION: This snippet demonstrates how to create dynamic routes in Modern.js using square brackets in directory names. It shows a structure with a dynamic [id] route and a static blog route.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/hooks/src/routes.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n└── routes\n    ├── [id]\n    │   └── page.tsx\n    ├── blog\n    │   └── page.tsx\n    └── page.tsx\n```\n\n----------------------------------------\n\nTITLE: Configuring Path Aliases in Modern.js Module\nDESCRIPTION: This snippet demonstrates how to set up path aliases in Modern.js Module. It shows different ways to configure aliases including object literals and function approaches that can either modify the existing alias object or return a new one.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  buildConfig: {\n    alias: {\n      '@common': '. /src/common',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing beforeDev Hook in TypeScript\nDESCRIPTION: Hook triggered before development tasks execution. Receives array of registered dev tools.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/plugin-api/plugin-hooks.md#2025-04-21_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nexport const myPlugin = (): CliPlugin<ModuleTools> => ({\n  name: 'my-plugin',\n\n  setup() {\n    return {\n      beforeDev(metas: DevToolData[]) {\n        console.info(`have ${metas.length} dev tools`);\n      },\n    };\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: BFF Consumer Implementation - React Component\nDESCRIPTION: Example React component demonstrating how to consume BFF API functions from a producer package\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/bff/cross-project.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useState, useEffect } from 'react';\nimport { get as hello } from '${package_name}/api/hello';\n\nexport default () => {\n  const [text, setText] = useState('');\n\n  useEffect(() => {\n    hello().then(setText);\n  }, []);\n  return <div>{text}</div>;\n};\n```\n\n----------------------------------------\n\nTITLE: Using SVG as React Component\nDESCRIPTION: Example of how to import and use an SVG file as a React component after enabling the SVGR feature in the build configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_6\n\nLANGUAGE: JavaScript\nCODE:\n```\n// true\nimport Logo from './logo.svg';\n\nexport default () => <Logo />;\n```\n\n----------------------------------------\n\nTITLE: Using Template-based Custom Name Configuration (TypeScript)\nDESCRIPTION: This snippet illustrates how to use a template-based customName configuration in the import plugin. It demonstrates the use of handlebars syntax for dynamic module path generation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/official-list/plugin-import.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { modulePluginImport } from '@modern-js/plugin-module-import';\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\n\nexport default defineConfig({\n  plugins: [\n    moduleTools(),\n    modulePluginImport({\n      pluginImport: [\n        {\n          libraryName: 'foo',\n          customName: 'foo/es/{{ kebabCase member }}',\n        },\n      ],\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Debug Tool Plugin in TypeScript\nDESCRIPTION: Example of implementing a basic debug tool plugin for Modern.js Module that extends the dev command functionality. The plugin registers a do-nothing debug tool that runs build in watch mode.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/advance/in-depth-about-dev-command.md#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport const myPlugin = (): CliPlugin<ModuleTools> => ({\n  name: 'do-nothing',\n  setup() {\n    return {\n      registerDev() {\n        return {\n          // 调试工具名称\n          name: 'do-nothing',\n          // 菜单显示内容\n          menuItem: {\n            name: 'DoNothing',\n            value: 'do-nothing',\n          },\n          // 定义的 dev 子命令\n          subCommands: ['donothing', 'dn'],\n          async action() {\n            // dev logic\n            console.info('Run build --watch, and do nothing.');\n          },\n        };\n      },\n    };\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Initial Project Directory Structure\nDESCRIPTION: Shows the directory structure of a newly initialized Modern.js Module project, including configuration files and source directory.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/best-practices/components.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n.\n├── README.md\n├── node_modules/\n├── dist/\n├── modern.config.ts\n├── package.json\n├── pnpm-lock.yaml\n├── src\n│   ├── index.ts\n│   └── modern-app-env.d.ts\n└── tsconfig.json\n```\n\n----------------------------------------\n\nTITLE: Excluding Files from Less Compilation in Modern.js\nDESCRIPTION: Example of using the addExcludes utility function to prevent less-loader from compiling certain files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/less.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    less(config, { addExcludes }) {\n      addExcludes(/node_modules/);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Generated HTML Template Output\nDESCRIPTION: The resulting HTML output generated from the Document.tsx template\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/html.mdx#2025-04-21_snippet_3\n\nLANGUAGE: html\nCODE:\n```\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"utf-8\" />\n    <meta\n      name=\"viewport\"\n      content=\"width=device-width, initial-scale=1.0, shrink-to-fit=no, viewport-fit=cover, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no\"\n    />\n    <meta http-equiv=\"x-ua-compatible\" content=\"ie=edge\" />\n    <meta name=\"renderer\" content=\"webkit\" />\n    <meta name=\"layoutmode\" content=\"standard\" />\n    <meta name=\"imagemode\" content=\"force\" />\n    <meta name=\"wap-font-scale\" content=\"no\" />\n    <meta name=\"format-detection\" content=\"telephone=no\" />\n    <link rel=\"icon\" href=\"/a.icon\" />\n    <script defer src=\"/static/js/builder-runtime.js\"></script>\n    <script defer src=\"/static/js/lib-react.js\"></script>\n    <script defer src=\"/static/js/lib-polyfill.js\"></script>\n    <script defer src=\"/static/js/lib-router.js\"></script>\n    <script defer src=\"/static/js/main.js\"></script>\n    <link href=\"https://modernjs.dev\" />\n    <!-- Need a Comment -->\n  </head>\n\n  <body>\n    <div id=\"root\">\n      <!--<?- html ?>-->\n      <h1 style=\"color:red\">Some Params:</h1>\n      <h2>entryName: main</h2>\n      <h2>title：</h2>\n      <h2>rootId: root</h2>\n    </div>\n    <h1>bottom</h1>\n    <!--<?- chunksMap.js ?>-->\n    <!--<?- SSRDataScript ?>-->\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Adding Build Script to package.json\nDESCRIPTION: This JSON snippet demonstrates how to add a build script to the package.json file for use with Modern.js Module.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/intro/getting-started.mdx#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"build\": \"modern build\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring DTS-Only Generation in Modern.js Module\nDESCRIPTION: Demonstrates how to configure DTS-only generation in Modern.js Module. It shows a configuration where type files are not bundled and are output to a separate directory.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/in-depth-about-build.md#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nimport { defineConfig } from '@modern-js/module-tools';\n\nexport default defineConfig({\n  // At this moment the type file is not bundled and the output path is `./dist/types`\n  buildConfig: [\n    {\n      buildType: 'bundle',\n      dts: false,\n      outDir: './dist',\n    },\n    {\n      buildType: 'bundleless',\n      dts: {\n        only: true,\n      },\n      outDir: './dist/types',\n    },\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: CSR Bundle Output Example (JavaScript)\nDESCRIPTION: Illustrates how the CSR bundle preserves code that runs in the browser environment.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/env-vars.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n// CSR bundles\nfunction App() {\n  if (true) {\n    console.log(window.innerHeight);\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Defining AppIcon Types in TypeScript\nDESCRIPTION: TypeScript type definitions for configuring application icons, including AppIconItem which defines individual icon properties and AppIcon which can be either a string path or an object with icon configurations.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/html/app-icon.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype AppIconItem = {\n  src: string;\n  size: number;\n  target?: 'apple-touch-icon' | 'web-app-manifest';\n};\n\ntype AppIcon = string | {\n  name?: string;\n  icons: AppIconItem[];\n  filename?: string;\n};\n```\n\n----------------------------------------\n\nTITLE: Creating Model Directory Structure\nDESCRIPTION: Terminal commands to create the necessary directory structure for models\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c06-model.mdx#2025-04-21_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nmkdir -p src/models/\ntouch src/models/contacts.ts\n```\n\n----------------------------------------\n\nTITLE: Creating a custom utility class CSS file\nDESCRIPTION: This CSS file defines a custom utility class named 'custom-text-gray' using CSS custom properties.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c03-css.mdx#2025-04-21_snippet_10\n\nLANGUAGE: css\nCODE:\n```\n:root {\n  --custom-text-color: rgb(113, 128, 150);\n}\n\n.custom-text-gray {\n  color: var(--custom-text-color);\n}\n```\n\n----------------------------------------\n\nTITLE: Defining ResolveMainFields Type in TypeScript\nDESCRIPTION: TypeScript type definition for the 'resolveMainFields' configuration option. It allows for an array of strings or objects with build targets as keys.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/source/resolve-main-fields.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype Fields = (string | string[])[];\n\ntype ResolveMainFields = Fields | Record<BuilderTarget, Fields>;\n```\n\n----------------------------------------\n\nTITLE: Incorrect Manual Loader Execution in TypeScript\nDESCRIPTION: This example shows an incorrect way of using a loader function in Modern.js. The loader function should not be manually called within the component, as Modern.js handles its execution.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/data/data-fetch.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n// This won't work!\nexport const loader = async () => {\n  const res = fetch('https://api/user/profile');\n  return res.json();\n};\n\nimport { loader } from './page.data.ts';\nexport default function RouteComp() {\n  const data = loader();\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring CSS Modules in Modern.js Module\nDESCRIPTION: This snippet shows how to configure CSS Modules options in Modern.js Module, specifically setting the localsConvention for class name generation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_40\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  buildConfig: {\n    style: {\n      modules: {\n        localsConvention: 'camelCaseOnly',\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Removing ts-loader Configuration in Modern.js\nDESCRIPTION: Configuration example showing how to avoid using ts-loader to improve build performance by removing it from the tools configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/build-performance.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    // remove this config\n    tsLoader: {},\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Generating Only Type Definitions\nDESCRIPTION: Configures the build to only generate TypeScript declaration files without JavaScript output.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_17\n\nLANGUAGE: JavaScript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    dts: {\n      only: true,\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Nginx Configuration for Modern.js\nDESCRIPTION: Example Nginx configuration for serving a Modern.js application, including static file handling and basic server setup.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/deploy.mdx#2025-04-21_snippet_15\n\nLANGUAGE: nginx\nCODE:\n```\n# user [user] [group];\nworker_processes 1;\n\nevents {\n    worker_connections 1024;\n}\n\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n\n    server {\n        listen 8080;\n        server_name localhost;\n\n        location / {\n            # root [projectPath]/.output/html/main;\n            index index.html;\n            try_files $uri $uri/ =404;\n        }\n\n        location /static {\n          # alias [projectPath]/.output/static;\n        }\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Managing Pre-release Mode in Modern.js\nDESCRIPTION: The 'modern pre' command allows entering and exiting pre-release mode for testing versions before official releases.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/basic/command-preview.md#2025-04-21_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nUsage: modern pre [options] <enter|exit> [tag]\n\n进入和退出预发布模式\n\nOptions:\n  -h, --help  display help for command\n```\n\n----------------------------------------\n\nTITLE: Custom HTML Body Fragment Example\nDESCRIPTION: Example of a custom HTML fragment for the body section\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/html.mdx#2025-04-21_snippet_5\n\nLANGUAGE: html\nCODE:\n```\n<script src=\"//example.com/assets/a.js\"></script>\n```\n\n----------------------------------------\n\nTITLE: Referencing Custom Type Declarations\nDESCRIPTION: Shows how to include custom type declarations in the Modern.js environment definition file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\n/// <reference path='./your-app-env.d.ts' />\n/// <reference types='@modern-js/module-tools/types' />\n```\n\n----------------------------------------\n\nTITLE: Building a Modern.js Project in Bash\nDESCRIPTION: Command to build the production artifacts of a Modern.js project. It shows the expected output, including file sizes and compilation time.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/get-started/quick-start.mdx#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n$ pnpm run build\n\n> modern build\n\n  Modern.js Framework\n\ninfo    Starting production build...\ninfo    Type checker is enabled. It may take some time.\nready   Client compiled in 6.19 s\ninfo    Production file sizes:\n\n  File                                       Size        Gzipped\n  dist/routes-manifest.json                  0.74 kB     0.28 kB\n  dist/static/css/async/page.d7915515.css    1.4 kB      0.69 kB\n  dist/static/js/main.5ae469e7.js            3.0 kB      1.3 kB\n  dist/html/main/index.html                  6.0 kB      2.6 kB\n  dist/static/js/async/page.ddc8a4c1.js      19.2 kB     6.7 kB\n  dist/static/js/34.171fffdb.js              21.3 kB     7.1 kB\n  dist/static/js/lib-router.8995a55e.js      55.3 kB     18.1 kB\n  dist/static/js/lib-lodash.53ec3384.js      71.4 kB     24.8 kB\n  dist/static/js/lib-react.b5856db9.js       140.0 kB    45.2 kB\n  dist/static/js/lib-polyfill.86c452b3.js    213.3 kB    69.9 kB\n\n  Total size:  531.8 kB\n  Gzipped size:  176.7 kB\n```\n\n----------------------------------------\n\nTITLE: Cache Level Configuration Options for PreRender\nDESCRIPTION: This snippet shows the different cache level options available for the PreRender component. It explains what each level represents in terms of cache identification calculation rules.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/ssr/pre-render.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n0：路由路径\n1：路由路径 + 查询字符串\n2：路由路径 + 请求头\n3：路由路径 + 查询字符串 + 请求头\n```\n\n----------------------------------------\n\nTITLE: Configuring ignoreDts option\nDESCRIPTION: Example of ignoring the original .d.ts declaration files for a dependency and generating a fake .d.ts file instead, useful for reducing file size when type definitions aren't needed.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/scripts/prebundle/README.md#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\ndependencies: [\n  {\n    name: 'foo',\n    ignoreDts: true,\n  },\n];\n```\n\n----------------------------------------\n\nTITLE: Building a Specific Package\nDESCRIPTION: Commands to navigate to a package directory and build it. This is useful when working on changes to a specific package in the monorepo.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/community/contributing-guide.mdx#2025-04-21_snippet_8\n\nLANGUAGE: sh\nCODE:\n```\n# Replace some-path with the path of the package you want to work on\ncd ./packages/some-path\npnpm run build\n```\n\n----------------------------------------\n\nTITLE: Adding Webpack Plugins to End\nDESCRIPTION: Example showing how to append webpack plugins using the appendPlugins utility function.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/webpack.mdx#2025-04-21_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    webpack: (config, { appendPlugins, webpack }) => {\n      // Adding a single plugin\n      appendPlugins([\n        new webpack.BannerPlugin({\n          banner: 'hello world!',\n        }),\n      ]);\n\n      // Adding multiple plugins\n      appendPlugins([new PluginA(), new PluginB()]);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: ReactNode Type Error After Dependency Upgrade in Modern.js\nDESCRIPTION: Error message shown when there's a conflict between different versions of React type definitions after upgrading dependencies in a Modern.js project.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/troubleshooting/dependencies.mdx#2025-04-21_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nThe types returned by 'render()' are incompatible between these types.\nType 'React.ReactNode' is not assignable to type 'import(\"/node_modules/@types/react/index\").ReactNode'.\nType '{}' is not assignable to type 'ReactNode'.\n```\n\n----------------------------------------\n\nTITLE: File Structure for Apple Touch Icon in Modern.js\nDESCRIPTION: Shows the expected file structure for placing an icon.png file in the config directory of a Modern.js project.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/hooks/config/icon.mdx#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\n./config\n└── icon.png\n```\n\n----------------------------------------\n\nTITLE: Defining Models Configuration Type in Markdown\nDESCRIPTION: Specifies the type and default value for the models configuration option. It allows registering model objects that are mounted in advance after the Reduck store is created.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/runtime/state.mdx#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n- **Type:** `Array<Model>`\n- **Default:** `[]`\n```\n\n----------------------------------------\n\nTITLE: Locking Sub-dependencies with pnpm in package.json\nDESCRIPTION: This JSON snippet demonstrates how to lock a sub-dependency version using pnpm in the package.json file. It uses the 'pnpm.overrides' field to specify the version.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/get-started/upgrade.mdx#2025-04-21_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"pnpm\": {\n    \"overrides\": {\n      \"package-name\": \"^1.0.0\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: 使用自定义 Utility Class\nDESCRIPTION: 在 Item 组件中使用自定义的 utility class 来应用文本颜色。\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/tutorials/first-app/c03-css.mdx#2025-04-21_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\n<div className=\"ml-4 custom-text-gray flex-1 flex justify-between\">\n```\n\n----------------------------------------\n\nTITLE: Changelog Entry for Version 1.3.1\nDESCRIPTION: Documents .npmignore changes and dependency updates for version 1.3.1\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/plugin-express/CHANGELOG.md#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n## 1.3.1\n\n### Patch Changes\n\n- 83166714: change .npmignore\n- Updated dependencies [83166714]\n- Updated dependencies [c3de9882]\n- Updated dependencies [33ff48af]\n  - @modern-js/core@1.3.2\n  - @modern-js/adapter-helpers@1.2.1\n  - @modern-js/bff-runtime@1.2.1\n  - @modern-js/bff-utils@1.2.2\n  - @modern-js/server-plugin@1.2.1\n  - @modern-js/utils@1.2.2\n```\n\n----------------------------------------\n\nTITLE: Setting Default Data URI Limit in JavaScript\nDESCRIPTION: Sets the default value for the dataUriLimit configuration to 10000 bytes.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/data-uri-limit.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultDatUriLimit = 10000;\n```\n\n----------------------------------------\n\nTITLE: Using Route Object for Router Configuration\nDESCRIPTION: Example of using a Route object to configure a router with path, element, loader, action, and error handling.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/router/router.mdx#2025-04-21_snippet_14\n\nLANGUAGE: TypeScript\nCODE:\n```\nconst router = createBrowserRouter([\n  {\n    // it renders this element\n    element: <Team />,\n\n    // when the URL matches this segment\n    path: 'teams/:teamId',\n\n    // with this data loaded before rendering\n    loader: async ({ request, params }) => {\n      return fetch(`/fake/api/teams/${params.teamId}.json`, {\n        signal: request.signal,\n      });\n    },\n\n    // performing this mutation when data is submitted to it\n    action: async ({ request }) => {\n      return updateFakeTeam(await request.formData());\n    },\n\n    // and renders this element in case something went wrong\n    errorElement: <ErrorBoundary />,\n  },\n]);\n```\n\n----------------------------------------\n\nTITLE: 使用 renderChunk Hook 对产物进行处理\nDESCRIPTION: 这个示例展示了如何使用 Modern.js Module 的 renderChunk Hook 对 esbuild 生成的产物进行处理。这个 Hook 在 esbuild 的 onEnd 回调中触发,类似于 transform hook,但作用于最终产物。\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/advance/in-depth-about-build.md#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\ncompiler.hooks.renderChunk.tapPromise('minify', async chunk => {\n  if (chunk.type === 'chunk') {\n    const code = chunk.contents.toString();\n    const result = await minify.call(compiler, code);\n    return {\n      ...chunk,\n      contents: result.code,\n      map: result.map,\n    };\n  }\n  return chunk;\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing afterBuildPlatform Hook in TypeScript\nDESCRIPTION: Hook triggered after all platform build tasks completion. Receives build result status and messages.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/plugin-api/plugin-hooks.md#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nexport const myPlugin = (): CliPlugin<ModuleTools> => ({\n  name: 'my-plugin',\n\n  setup() {\n    return {\n      afterBuildPlatform(result: BuildPlatformResult): void {\n        if (result.status === 'success') {\n          console.info(`all platform build task success`);\n        } else {\n          console.error(result.message);\n        }\n      },\n    };\n  },\n});\n```\n\nLANGUAGE: typescript\nCODE:\n```\nexport interface BuildPlatformResult {\n  status: 'success' | 'fail';\n  message: string | Error | null;\n}\n```\n\n----------------------------------------\n\nTITLE: Declaring React Dependency in package.json\nDESCRIPTION: Example of how to declare a React dependency in package.json, either under dependencies or peerDependencies. This affects how Modern.js Module handles the dependency during bundling.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/external-dependency.mdx#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"dependencies\": {\n    \"react\": \"^17\"\n  },\n  // or\n  \"peerDependencies\": {\n    \"react\": \"^17\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Excluding Problematic Third-party Packages from Bundling\nDESCRIPTION: Demonstrates how to exclude specific third-party packages from bundling to avoid issues with dynamic requires in ES modules output.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/faq/build.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    externals: ['react-draggable'],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using modern upgrade command in Modern.js Module\nDESCRIPTION: The modern upgrade command is used to upgrade the project Modern.js related dependencies to the latest version. It can be executed with npx to update the dependencies in package.json.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/command-preview.md#2025-04-21_snippet_8\n\nLANGUAGE: bash\nCODE:\n```\nUsage: modern upgrade [options]\n\nUpgrade Modern.js to the latest version\n\nOptions:\n  --registry <registry> customize npm registry (default: \"\")\n  -d,--debug Enable Debug mode to print debug log messages (default: false)\n  --cwd <cwd> project path (default: \"\")\n  -h, --help display help for command\n```\n\n----------------------------------------\n\nTITLE: Incorrect React Component Declarations for Hot Reload\nDESCRIPTION: Examples of React component declarations that will not work properly with Fast Refresh due to the use of anonymous functions which prevent state preservation during hot updates.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/troubleshooting/hmr.mdx#2025-04-21_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n// 错误写法 1\nexport default function () {\n  return <div>Hello World</div>;\n}\n\n// 错误写法 2\nexport default () => <div>Hello World</div>;\n```\n\n----------------------------------------\n\nTITLE: Function Signature of Modern.js Bootstrap API\nDESCRIPTION: The complete TypeScript type definition for the bootstrap function, showing all parameters and return type.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/core/bootstrap.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ntype BootStrap<T = unknown> = (\n  App: React.ComponentType,\n  id: string | HTMLElement | RuntimeContext,\n  root?: any,\n  ReactDOM?: {\n    render?: Renderer;\n    hydrate?: Renderer;\n    createRoot?: typeof createRoot;\n    hydrateRoot?: typeof hydrateRoot;\n  },\n) => Promise<T>;\n```\n\n----------------------------------------\n\nTITLE: Basic React Component in TypeScript\nDESCRIPTION: A simple React component exported as the default from the main entry file. This represents the starting point for component development.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/best-practices/components.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nexport default () => {\n  return <div>hello world</div>;\n};\n```\n\n----------------------------------------\n\nTITLE: Importing SVG in CSS File\nDESCRIPTION: This CSS code demonstrates how to import an SVG file as a background image in a CSS class.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/static-assets/svg-assets.mdx#2025-04-21_snippet_3\n\nLANGUAGE: css\nCODE:\n```\n.logo {\n  background-image: url('../static/logo.svg');\n}\n```\n\n----------------------------------------\n\nTITLE: Running E2E Tests for Modern.js with Garfish\nDESCRIPTION: Commands for running end-to-end tests for Modern.js framework with Garfish integration. Includes options for running all tests, Rspack-specific tests, Webpack-specific tests, and targeting specific test cases.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/tests/e2e/garfish/README.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n# Run all test cases, including Rspack and Webpack\npnpm run test\n\n# Run test cases for Rspack\npnpm run test:rspack\n\n# Run test cases for Webpack\npnpm run test:webpack\n\n# Run specific test case, such as \"dashboard\"\npnpm run test:webpack dashboard\npnpm run test:rspack dashboard\n```\n\n----------------------------------------\n\nTITLE: Defining Basic State Object in JavaScript\nDESCRIPTION: Simple JavaScript object defining the initial state for a contacts model with an empty items array.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/tutorials/first-app/c06-model.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst state = {\n  items: [],\n};\n```\n\n----------------------------------------\n\nTITLE: Displaying DTS Generation Errors in Modern.js Module\nDESCRIPTION: Demonstrates how errors during the type file generation process are displayed in the terminal when using Modern.js Module.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/in-depth-about-build.md#2025-04-21_snippet_9\n\nLANGUAGE: bash\nCODE:\n```\nerror   ModuleBuildError:\n\nbundle DTS failed:\n```\n\n----------------------------------------\n\nTITLE: Enabling Storybook V7 Using Modern CLI\nDESCRIPTION: Command for enabling the Storybook V7 feature in a Modern.js project using the Modern CLI. This adds the necessary configuration files and dependencies to the project.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/using-storybook.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ npx modern new\n? Please select the operation you want: Enable features\n? Please select the feature name: Enable「Storybook」V7\n```\n\n----------------------------------------\n\nTITLE: Route Configuration JSON Output\nDESCRIPTION: Example of the generated route configuration in dist/route.json showing the route mappings for multiple paths.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/server/routes.mdx#2025-04-21_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"routes\": [\n    {\n      \"urlPath\": \"/a\",\n      \"entryName\": \"page-a\",\n      \"entryPath\": \"html/page-a/index.html\",\n      \"isSPA\": true,\n      \"isSSR\": false\n    },\n    {\n      \"urlPath\": \"/b\",\n      \"entryName\": \"page-a\",\n      \"entryPath\": \"html/page-a/index.html\",\n      \"isSPA\": true,\n      \"isSSR\": false\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering RsbuildConfig Component in JSX\nDESCRIPTION: This snippet renders the imported RsbuildConfig component. It's a self-closing tag, indicating that the component doesn't have any children or props passed to it.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/filename-hash.mdx#2025-04-21_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n<RsbuildConig />\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom Entry Directory in Modern.js (TypeScript)\nDESCRIPTION: This snippet shows how to set the 'source.entriesDir' option in the Modern.js configuration file to specify a custom directory for page entries. It sets the directory to './src/pages'.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/entries-dir.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  source: {\n    entriesDir: './src/pages',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Pug Template Engine with Function in Modern.js\nDESCRIPTION: Uses a function to programmatically modify the Pug configuration. The default configuration is passed as the first parameter, which can be modified directly or by returning a new value.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/pug.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    pug(config) {\n      config.doctype = 'xml';\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Homepage Layout for Modern.js Module in YAML\nDESCRIPTION: This YAML configuration defines the structure and content of the Modern.js Module homepage. It includes metadata, hero section details, and a list of features with icons and descriptions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/index.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\n---\npageType: home\n\nhero:\n  name: Modern.js Module\n  text: 模块工程解决方案\n  tagline: 简单、强大、高性能的现代化 npm 包开发方案\n  actions:\n    - theme: brand\n      text: 欢迎使用\n      link: /guide/intro/welcome\n    - theme: alt\n      text: 快速上手\n      link: /guide/intro/getting-started\n\nfeatures:\n  - title: 'esbuild: 高性能的 JS Bundler'\n    details: 基于 esbuild 构建，构建速度极快，带给你极致的开发体验。\n    icon: 🚀\n  - title: '双构建模式'\n    details: 支持 Bundle 和 Bundleless 两种构建模式。\n    icon: ✨\n  - title: '开箱即用'\n    details: 无需过多配置即可开发你的 npm 包，内置预设覆盖多种场景。\n    icon: 🛠️\n  - title: '扩展性强: 提供强大的插件机制'\n    details: 通过其插件扩展机制，你可以轻松的扩展 Modern.js Module 的各项能力。\n    icon: 🎨\n  - title: 'Storybook: 社区流行的 UI 开发工具'\n    details: 集成了 Storybook，你可以使用它调试 UI。\n    icon: 📦\n  - title: 'Lint: 代码格式化'\n    details: 丰富场景的内置 ESLint 规则。\n    icon: 📐\n---\n```\n\n----------------------------------------\n\nTITLE: Refactoring Page Components to Use Contacts Container in Modern.js\nDESCRIPTION: Refactored page components that use the new Contacts container component. This simplifies the page components by delegating the contact rendering logic to the container.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/tutorials/first-app/c07-container.mdx#2025-04-21_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport Contacts from '../containers/Contacts';\n\nfunction Index() {\n  return <Contacts title=\"All\" source=\"items\" />;\n}\n\nexport default Index;\n```\n\nLANGUAGE: tsx\nCODE:\n```\nimport Contacts from '../../containers/Contacts';\n\nfunction Index() {\n  return <Contacts title=\"Archives\" source=\"archived\" />;\n}\n\nexport default Index;\n```\n\n----------------------------------------\n\nTITLE: Configuring Input for Bundleless Mode in Modern.js\nDESCRIPTION: Demonstrates how to specify input for bundleless mode, including directory and file paths, with support for file filtering.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_23\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    buildType: 'bundleless',\n    input: ['src/a', 'src/index.ts'],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Build Scripts for Monorepo Deployment with pnpm\nDESCRIPTION: JSON configuration for package.json to set up build scripts for deploying a monorepo project using pnpm.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/deploy.mdx#2025-04-21_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"build:packages\": \"pnpm --filter 'app^...' run build\",\n    \"deploy\": \"pnpm run build:packages && modern deploy\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Basic SSG Configuration - JavaScript\nDESCRIPTION: Simple configuration to enable SSG for all entries using boolean type configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/ssg.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  output: {\n    ssg: true,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Babel in JavaScript\nDESCRIPTION: Fixes an issue where the plugin config hook couldn't get bundlerType, preventing correct babelConfig setting in the SSR plugin.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/cli/core/CHANGELOG.md#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nbabelConfig\n```\n\n----------------------------------------\n\nTITLE: Supporting NodenextModuleResolution in TypeScript\nDESCRIPTION: Adds support for the nodenext moduleResolution option in TypeScript.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/runtime/plugin-runtime/CHANGELOG.md#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nfix: add support for nodenext moduleResolution\n```\n\n----------------------------------------\n\nTITLE: Registering SSG Plugin in Modern.js Configuration\nDESCRIPTION: Configuration code that registers the SSG plugin in the Modern.js configuration file, enabling SSG functionality for the project.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/render/ssg.mdx#2025-04-21_snippet_1\n\nLANGUAGE: ts\nCODE:\n```\nimport { ssgPlugin } from '@modern-js/plugin-ssg';\n\nexport default defineConfig({\n  output: {\n    ssg: true,\n  },\n  plugins: [..., ssgPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Reduck Features with Provider\nDESCRIPTION: Example of setting Reduck configuration options through the Provider component's config parameter when using Reduck separately from Modern.js. This example shows how to disable Redux DevTools.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/use-out-of-modernjs.mdx#2025-04-21_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst Root = () => {\n  return (\n    {/* Close Redux DevTools */}\n    <Provider config={{ devTools: false }}>\n      <App />\n    </Provider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Running Local Development Server\nDESCRIPTION: Command to start the local development server which opens a browser window and supports live reloading of changes.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/README.md#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n$ pnpm run dev\n```\n\n----------------------------------------\n\nTITLE: Defining TypeScript Type for transformImport Configuration in Modern.js\nDESCRIPTION: TypeScript type definition for the transformImport configuration option, which can be set to false, an array of configuration objects, or a function.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/source/transform-import.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype TransformImport =\n  | false\n  | Array<{\n      libraryName: string;\n      libraryDirectory?: string;\n      style?: string | boolean;\n      styleLibraryDirectory?: string;\n      camelToDashComponentName?: boolean;\n      transformToDefaultImport?: boolean;\n      customName?: string;\n      customStyleName?: string;\n    }>\n  | Function;\n```\n\n----------------------------------------\n\nTITLE: Accessing Route Handle Data with useMatches in Modern.js\nDESCRIPTION: Example of using the useMatches hook to access route-specific handle data from matched routes, such as for building breadcrumb navigation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/routes.mdx#2025-04-21_snippet_8\n\nLANGUAGE: ts\nCODE:\n```\nexport default () => {\n  const matches = useMatches();\n  const breadcrumbs = matches.map(\n    matchedRoute => matchedRoute?.handle?.breadcrumbName,\n  );\n  return <Breadcrumb names={breadcrumbs}></Breadcrumb>;\n};\n```\n\n----------------------------------------\n\nTITLE: Function-based Terser Configuration in Modern.js\nDESCRIPTION: An example of using a function to configure Terser, allowing for more dynamic configuration. This example adds an 'exclude' option to the existing configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/terser.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    terser: opts => {\n      opts.exclude = /\\/excludes/;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Documenting Version History in Markdown\nDESCRIPTION: Changelog entries documenting fixes, features and dependency updates across multiple release candidates of Modern.js and related packages.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/solutions/module-tools/CHANGELOG.md#2025-04-21_snippet_13\n\nLANGUAGE: markdown\nCODE:\n```\n### Patch Changes\n\n- 224f7fe: fix server route match\n- 30ac27c: feat: add generator package description \n- feat: fix bugs\n- 204c626: feat: initial\n- 63be0a5: fix: #118 #104\n```\n\n----------------------------------------\n\nTITLE: Showing HTTPS Development Server URLs\nDESCRIPTION: Example of the console output showing local and network URLs when running the Modern.js development server with HTTPS enabled.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/dev/https.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n  > Local:    https://localhost:8080/\n  > Network:  https://192.168.0.1:8080/\n```\n\n----------------------------------------\n\nTITLE: Function Signature for defineConfig in Modern.js\nDESCRIPTION: The function signature for defineConfig, showing it accepts a React component and a configuration object as parameters.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/app/define-config.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nfunction defineConfig(Component, config): any;\n```\n\n----------------------------------------\n\nTITLE: Using modern new command in Modern.js Module\nDESCRIPTION: The modern new command is used to start the microgenerator functionality, enabling features like Storybook V7 and Tailwind CSS support that are not provided by default.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/command-preview.md#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nUsage: modern new [options]\n\nExecute the generator in a modular project scenario\n\nOptions:\n  -d, --debug Enable Debug mode, print debug log messages (default: false)\n  -c, --config <config> Generators run default configuration (JSON string)\n  --dist-tag <tag> Generator uses a special version of npm Tag\n  --registry customize npm Registry during generator runtime\n  -h, --help display help for command\n```\n\n----------------------------------------\n\nTITLE: Creating Model Directory Structure with Bash Commands\nDESCRIPTION: Bash commands to create the necessary directory structure and files for storing model definitions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/tutorials/first-app/c06-model.mdx#2025-04-21_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nmkdir -p src/models/\ntouch src/models/contacts.ts\n```\n\n----------------------------------------\n\nTITLE: Setting Target Environment for Esbuild Minification\nDESCRIPTION: Code snippet showing how to configure the target environment for Esbuild minification using the minimize option.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/official/rsbuild-plugins/plugin-esbuild.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nbuilderPluginEsbuild({\n  minimize: {\n    target: 'chrome61',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Rendering Random Member List Component in JSX\nDESCRIPTION: Imports and renders a RandomMemberList component to display core team members of Modern.js\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/community/team.mdx#2025-04-21_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { RandomMemberList } from '@site/src/components/RandomMemberList';\n\n<RandomMemberList />\n```\n\n----------------------------------------\n\nTITLE: Implementing beforeDevTask Hook in Modern.js Module Tools Plugin\nDESCRIPTION: Shows how to implement the beforeDevTask hook that gets triggered before a development task is executed. This allows performing actions before the selected development tool runs.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/plugin-api/plugin-hooks.md#2025-04-21_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\nexport const myPlugin = (): CliPlugin<ModuleTools> => ({\n  name: 'my-plugin',\n\n  setup() {\n    return {\n      beforeDevTask(currentDevData: DevToolData) {\n        console.info(`${currentDevData.name} running`);\n      },\n    };\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Visualizing Runtime Lifecycle with Mermaid in Markdown\nDESCRIPTION: A Mermaid flowchart embedded in Markdown that illustrates the lifecycle of Modern.js runtime. It shows the sequence from initialization to rendering, including configuration loading, plugin loading, and hook registration steps.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/plugin/runtime-plugins/life-cycle.mdx#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n# 生命周期\n\nimport Mermaid from '@site/src/components/Mermaid';\n\n<Mermaid>\n{`\nflowchart TD\n    init{{\"Runtime 初始化\"}}\n    load_config(加载用户配置文件)\n    runtime_plugin(加载 Runtime 插件<br><sub>配置文件中注册的插件<br>CLI 插件注册的 Runtime 插件<br>插件中使用的插件</sub>)\n    registry_hooks(注册 Hooks 函数<br><sub>执行插件 setup 函数，注册插件中定义的 Hook, 插件 setup 中逻辑也会在这里执行</sub>)\n\n    wrapRoot(wrapRoot<br><sub>wrapRoot 中返回组件中的逻辑会在组件渲染时执行</sub>)\n    onBeforeRender(onBeforeRender)\n\n    init --> load_config\n    load_config --> runtime_plugin\n    runtime_plugin --> registry_hooks\n    registry_hooks --> wrapRoot\n    wrapRoot --> onBeforeRender\n\n    style init fill:#FDE68A,font-size:10px;\n    style load_config stroke-dasharray:5 5,fill:#86EFAC,font-size:10px;\n    style runtime_plugin stroke-dasharray:5 5,fill:#86EFAC,font-size:10px;\n    style registry_hooks stroke-dasharray:5 5,fill:#9CA3AF,font-size:10px;\n    style wrapRoot font-size:10px;\n    style onBeforeRender font-size:10px;\n`}\n</Mermaid>\n```\n\n----------------------------------------\n\nTITLE: Async Setup Function Example\nDESCRIPTION: Demonstrates how to implement an asynchronous setup function in a plugin.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/plugins/guide/setup-function.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport const myPlugin = (): CliPlugin<ModuleTools> => ({\n  name: 'my-plugin',\n\n  async setup(api) {\n    await doSomething();\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using api.useAppContext in TypeScript\nDESCRIPTION: Shows the TypeScript interface for the useAppContext method, which retrieves project context information in a Modern.js Module plugin.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/guide/setup-function.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst useAppContext: () => IAppContext;\n\ninterface IAppContext {\n  appDirectory: string;\n  configFile: string | false;\n  packageName: string;\n  nodeModulesDirectory: string;\n  internalDirectory: string;\n  plugins: {\n    cli?: any;\n    server?: any;\n  }[];\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Modern.js Module with Documentation Plugin\nDESCRIPTION: This code snippet demonstrates how to configure Modern.js Module with the documentation plugin. It imports necessary dependencies and defines the configuration using moduleTools and modulePluginDoc.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/use-micro-generator.md#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\nimport { modulePluginDoc } from '@modern-js/plugin-rspress';\n\nexport default defineConfig({\n  plugins: [moduleTools(), modulePluginDoc()],\n});\n```\n\n----------------------------------------\n\nTITLE: Compiled Code with useDefineForClassFields set to true\nDESCRIPTION: The compiled JavaScript output when useDefineForClassFields is set to true, using Object.defineProperty for class field initialization.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/faq/build.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nclass C {\n  constructor() {\n    Object.defineProperty(this, 'foo', {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: 100,\n    });\n    Object.defineProperty(this, 'bar', {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0,\n    });\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Using modern gen-release-note command in Modern.js Module\nDESCRIPTION: The modern gen-release-note command automatically generates Release Notes based on the changeset information of the current repository. It should be executed before the bump command.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/command-preview.md#2025-04-21_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\nUsage: modern gen-release-note [options]\n\nGenerate Release Note based on current repository changeset information\n\nOptions:\n  --repo <repo> The name of the repository to generate the Pull Request link, e.g.: web-infra-dev/modern.js\n  --custom <cumtom> Custom Release Note generation function\n  -h, --help display help for command\n```\n\n----------------------------------------\n\nTITLE: Importing HTML Components in Modern.js\nDESCRIPTION: Example showing how to import HTML components from @modern-js/runtime/document\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/html.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Html, Body, Root, Head, Scripts } from '@modern-js/runtime/document';\n```\n\n----------------------------------------\n\nTITLE: Version 2.67.1 Changelog Entry\nDESCRIPTION: Patch update documenting dependency updates for version 2.67.1\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/runtime/plugin-state/CHANGELOG.md#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n## 2.67.1\n\n### Patch Changes\n\n- Updated dependencies [1d96265]\n  - @modern-js/runtime@2.67.1\n  - @modern-js/types@2.67.1\n  - @modern-js/utils@2.67.1\n  - @modern-js/runtime-utils@2.67.1\n```\n\n----------------------------------------\n\nTITLE: Defining Proxy Rules in External JavaScript File\nDESCRIPTION: Example of proxy rules defined in a separate JavaScript file with custom pattern matching\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/components/global-proxy-config.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nmodule.exports = {\n  name: 'my-app',\n  rules: `\n    ^example.com:8080/api/***   http://localhost:3001/api/$\n  `,\n};\n```\n\n----------------------------------------\n\nTITLE: Scripts Component Usage Example\nDESCRIPTION: Example showing how to use the Scripts component to insert script tags in the body\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/html.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport React from 'react';\nimport { Html, Root, Head, Body, Scripts } from '@modern-js/runtime/document';\n\nexport default function Document(): React.ReactElement {\n  return (\n    <Html>\n      <Head></Head>\n      <Body>\n        <Root rootId=\"root\"></Root>\n        <Scripts />\n      </Body>\n    </Html>\n  );\n```\n\n----------------------------------------\n\nTITLE: Running E2E Tests\nDESCRIPTION: Command to run end-to-end tests which check the functionality of the application as a whole. These tests are important for ensuring the integration of components works correctly.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/community/contributing-guide.mdx#2025-04-21_snippet_14\n\nLANGUAGE: sh\nCODE:\n```\npnpm run test:e2e\n```\n\n----------------------------------------\n\nTITLE: Creating Test Environment in Modern.js\nDESCRIPTION: Utility function to set up a test environment for Modern.js applications. It creates a temporary directory, initializes a test workspace, and provides methods to manipulate and test the application within the environment.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/components/faq-build-product.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport const createMonorepoEnv = (options: {\n  projects: Array<{ dir: string; dependency?: Record<string, string> }>;\n  packageManager?: string;\n  workspaceType?: 'pnpm' | 'lerna';\n}) => {\n  const {\n    projects,\n    packageManager = 'pnpm',\n    workspaceType = 'pnpm',\n  } = options;\n  // create test dir\n  const root = path.join(getTempDir(), `integration-${Date.now()}`);\n  const projectRoots: string[] = [];\n\n  // init workspace\n  const workspaceOptions = {\n    root,\n    packageManager,\n    projects,\n    type: workspaceType,\n  };\n\n  const { projectPaths } = initWorkspace(workspaceOptions);\n\n  projectPaths.forEach(projectPath => {\n    projectRoots.push(projectPath);\n  });\n\n  return {\n    rootPath: root,\n    projectRoots,\n    clean() {\n      fs.removeSync(root);\n    },\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Initializing npm Package Configuration in JSON\nDESCRIPTION: Example of a basic package.json file created by npm init command. It includes essential fields like name, version, description, main entry point, and scripts.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/before-getting-started.md#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"name\": \"npm-demo\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n  },\n  \"author\": \"\",\n  \"license\": \"ISC\"\n}\n```\n\n----------------------------------------\n\nTITLE: Installing State Plugin Package\nDESCRIPTION: Command to install the @modern-js/plugin-state package using pnpm package manager\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/reduck-notify.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\npnpm add @modern-js/plugin-state\n```\n\n----------------------------------------\n\nTITLE: Default Configuration for Ant Design in Modern.js transformImport\nDESCRIPTION: Default configuration added by Modern.js when Ant Design (version <= 4.x) is installed. It configures library path and enables automatic style imports.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/source/transform-import.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultAntdConfig = {\n  libraryName: 'antd',\n  libraryDirectory: isServer ? 'lib' : 'es',\n  style: true,\n};\n```\n\n----------------------------------------\n\nTITLE: Defining HTML Crossorigin Attribute Types\nDESCRIPTION: Type definition showing the possible values for the crossorigin configuration option. The attribute can be set to a boolean or specific string values for anonymous or authenticated requests.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/html/crossorigin.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nboolean | 'anonymous' | 'use-credentials'\n```\n\n----------------------------------------\n\nTITLE: Invalid Import Example in Modern.js\nDESCRIPTION: Demonstrates an invalid import statement that would cause a reference path error when moduleScopes is set to only include the 'src' directory.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/module-scopes.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport a from '../utils/a';\n```\n\n----------------------------------------\n\nTITLE: Configuring Input for Bundle Mode in Modern.js\nDESCRIPTION: Shows how to specify entry files for the build in bundle mode using an array of file paths.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_22\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  buildConfig: {\n    buildType: 'bundle',\n    input: ['src/index.ts', 'src/index2.ts'],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Project Directory Structure Example\nDESCRIPTION: Sample directory structure showing the layout of a Modern.js project with multiple potential entry directories.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/source/disable-entry-dirs.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n└── src/\n    ├── one/\n    |    └── App.tsx\n    ├── two/\n    |    └── routes/\n    └── env.d.ts\n```\n\n----------------------------------------\n\nTITLE: Version Control Documentation in Markdown\nDESCRIPTION: A structured changelog documenting version history from 1.0.0-rc.3 to current version, including Minor Changes, Patch Changes and other modifications\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/generator/generators/base-generator/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n### Patch Changes\n\n- 895fa0ff: chore: using \"workspace:*\" in devDependencies\n\n## 1.4.0\n\n### Minor Changes\n\n- 2b12032c: feat: upgrade csmith tools\n\n### Patch Changes\n\n- 6cffe99d: chore:\n  remove react eslint rules for `modern-js` rule set.\n  add .eslintrc for each package to speed up linting\n```\n\n----------------------------------------\n\nTITLE: Running Development Server with Proxy - Modern.js CLI\nDESCRIPTION: Example command output showing local and network development server URLs along with proxy server startup confirmation. Demonstrates the proxy server starting on port 8899.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/components/global-proxy.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n  Local:    http://localhost:8080/\n  Network:  http://192.168.0.1:8080/\n\ninfo      Starting proxy server.....\nsuccess   Proxy server start on localhost:8899\n```\n\n----------------------------------------\n\nTITLE: Building Modern.js Project for Deployment\nDESCRIPTION: Command to build a Modern.js project for deployment using the 'modern deploy' command.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/deploy.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx modern deploy\n```\n\n----------------------------------------\n\nTITLE: Using nvm to Switch Node.js Versions for Modern.js\nDESCRIPTION: Example commands for using Node Version Manager (nvm) to install, switch to, and set a specific Node.js version as the default for Modern.js development.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/troubleshooting/dependencies.mdx#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n# Install Node.js v14\nnvm install 14\n\n# Switch to Node 14\nnvm use 14\n\n# Set Node 14 as the default version\nnvm default 14\n```\n\n----------------------------------------\n\nTITLE: Configuring package.json field copying\nDESCRIPTION: Example of specifying additional fields from the original package.json to be copied to the target package.json when prebundling a dependency.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/scripts/prebundle/README.md#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\ndependencies: [\n  {\n    name: 'foo',\n    packageJsonField: ['options'],\n  },\n];\n```\n\n----------------------------------------\n\nTITLE: Legacy Runtime Configuration Example\nDESCRIPTION: Example of the legacy configuration approach using modern.config.ts and App.config (not recommended but still supported)\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/runtime/0-intro.mdx#2025-04-21_snippet_3\n\nLANGUAGE: ts\nCODE:\n```\n// modern.config.ts\nexport default {\n  runtime: { /* ... */ },\n  runtimeByEntries: { /* ... */ },\n};\n\n// App.config\nApp.config = {/* ... */}\n\n// layout file\nexport const config = () => { /* Dynamic configuration logic */ };\n```\n\n----------------------------------------\n\nTITLE: Cache Options Type Definition\nDESCRIPTION: Type definition for cache configuration options including tag, maxAge, and revalidate parameters.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/data/data-cache.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ninterface CacheOptions {\n  tag?: string | string[];\n  maxAge?: number;\n  revalidate?: number;\n}\n```\n\n----------------------------------------\n\nTITLE: Chrome-Specific Browserslist Configuration\nDESCRIPTION: Example Browserslist configuration targeting only Chrome 61 and above.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/page-performance/optimize-bundle.mdx#2025-04-21_snippet_5\n\nLANGUAGE: js\nCODE:\n```\n['Chrome >= 61']\n```\n\n----------------------------------------\n\nTITLE: Fixing TypeScript Configuration Paths in Storybook\nDESCRIPTION: Fix for the issue where path resolution was failing during Storybook execution by using the extends property to properly handle TypeScript configuration path conversions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/solutions/module-tools/CHANGELOG.md#2025-04-21_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n- ff10e87: fix: Using extends to solve the tsconfig configuration path conversion problem\n  fix: 使用 extends 解决 tsconfig 配置路径转换的问题\n```\n\n----------------------------------------\n\nTITLE: Importing RsbuildConfig Component in Markdown\nDESCRIPTION: This snippet imports a custom React component called RsbuildConig from a specific path. The component is likely used to display additional information or tooltips related to Rsbuild configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/performance/profile.mdx#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\nimport RsbuildConig from '@site-docs-en/components/rsbuild-config-tooltip';\n\n<RsbuildConig />\n```\n\n----------------------------------------\n\nTITLE: Major Changes Documentation for Version 2.0.0-beta\nDESCRIPTION: Major changes include version updates and new feature additions like style config, dts alias logic, copy logic, log logic and skipDeps config\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/solutions/module-tools/CHANGELOG.md#2025-04-21_snippet_10\n\nLANGUAGE: markdown\nCODE:\n```\n### Major Changes\n\n- dda38c9: chore: v2\n\n### Minor Changes\n\n- 92f0ead: feat:\n\n  1. add style config and add new hook\n  2. add dts alias logic\n  3. add copy logic\n  4. add log logic\n  5. add skipDeps config\n```\n\n----------------------------------------\n\nTITLE: StyledComponents Extension Options\nDESCRIPTION: Type definition for the StyledComponents extension options, which provides integration with styled-components library.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/official/cli-plugins/plugin-swc.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nboolean | {\n  // Enabled by default in development, disabled in production to reduce file size,\n  // setting this will override the default for all environments.\n  displayName?: boolean,\n  // Enabled by default.\n  ssr?: boolean,\n  // Enabled by default.\n  fileName?: boolean,\n  // Empty by default.\n  topLevelImportPaths?: string[],\n  // Defaults to [\"index\"].\n  meaninglessFileNames?: string[],\n  // Enabled by default.\n  cssProp?: boolean,\n  // Empty by default.\n  namespace?: string,\n}\n```\n\n----------------------------------------\n\nTITLE: Refactoring server in Modern.js\nDESCRIPTION: A minor change that refactors the server implementation, potentially improving performance, maintainability, or adding new capabilities.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/plugin-server/CHANGELOG.md#2025-04-21_snippet_8\n\nLANGUAGE: markdown\nCODE:\n```\n- e8c8c5d: refactor: refactor server\n  refactor: 重构 server\n```\n\n----------------------------------------\n\nTITLE: Installing Devcert Dependency\nDESCRIPTION: Commands for installing the devcert package as a development dependency using different package managers.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/dev/https.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n# npm\nnpm install devcert@1.2.2 -D\n\n# yarn\nyarn add devcert@1.2.2 -D\n\n# pnpm\npnpm add devcert@1.2.2 -D\n```\n\n----------------------------------------\n\nTITLE: Defining Monitor Types in TypeScript\nDESCRIPTION: Type definitions for the Monitors module including log levels, event types, and core monitor interfaces. Defines the structure for log, timing, and counter events.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/server-monitor/monitors.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport type LogLevel = 'error' | 'warn' | 'info' | 'debug' | 'trace';\nexport interface LogEvent {\n  type: 'log';\n  payload: {\n    level: LogLevel;\n    message: string;\n    args?: any[];\n  };\n}\n\nexport interface TimingEvent {\n  type: 'timing';\n  payload: {\n    name: string;\n    dur: number;\n    desc?: string;\n    args?: any[];\n  };\n}\n\nexport interface CounterEvent {\n  type: 'counter';\n  payload: {\n    name: string;\n    args?: any[];\n  };\n}\n\nexport type MonitorEvent = LogEvent | TimingEvent | CounterEvent;\n\nexport type CoreMonitor = (event: MonitorEvent) => void;\n\nexport interface Monitors {\n  // Register Monitor\n  push(monitor: CoreMonitor): void;\n\n  // Log Event\n  error(message: string, ...args: any[]): void;\n  warn(message: string, ...args: any[]): void;\n  debug(message: string, ...args: any[]): void;\n  info(message: string, ...args: any[]): void;\n  trace(message: string,...args: any[]): void;\n\n  // Metrics Event\n  timing(name: string, dur: number, ...args: any[]): void;\n  counter(name: string, ...args: any[]): void\n}\n```\n\n----------------------------------------\n\nTITLE: Running and Debugging Modules with Modern.js\nDESCRIPTION: The 'modern dev' command provides development tools for running and debugging Modern.js modules. By default, no debugging plugins are available, but official support includes tools like Rspress.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/basic/command-preview.md#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nUsage: modern dev [options]\n\n运行和调试模块\n\nOptions:\n  -h, --help             display help for command\n\nCommands:\n[dev-tools-subCommand]\n```\n\n----------------------------------------\n\nTITLE: Renaming an Entry Directory in Modern.js\nDESCRIPTION: Command to rename the 'myapp' directory to 'contacts', which changes how the entry is accessed in the browser.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c08-entries.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nmv src/myapp src/contacts\n```\n\n----------------------------------------\n\nTITLE: ClientContext Type Definition in Modern.js\nDESCRIPTION: Definition of ClientContext interface that provides browser-side specific properties, containing only request information without server-specific functionality.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/core/use-runtime-context.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\ninterface ClientContext {\n  isBrowser: true;\n  request: {\n    userAgent: string;\n    cookie: string;\n    cookieMap: Record<string, any>;\n    query: Record<string, any>;\n    url: string;\n    host: string;\n    headers?: IncomingHttpHeaders;\n  };\n}\n```\n\n----------------------------------------\n\nTITLE: Post-Installation Commands for Modern.js Project\nDESCRIPTION: Displays the successful creation message and available commands after initializing a Modern.js project. Commands include starting the development server, building production artifacts, and running various utilities.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/components/init-app.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n[INFO] 依赖自动安装成功\n[INFO] git 仓库初始化成功\n[INFO] 创建成功！\n可在新项目的目录下运行以下命令：\npnpm run dev          # 启动开发服务器\npnpm run build        # 构建生产环境产物\npnpm run serve        # 启动生产环境服务\npnpm run lint         # 运行 ESLint 并自动修复问题\npnpm run new          # 启用可选功能或创建项目要素\n```\n\n----------------------------------------\n\nTITLE: 使用 Tailwind CSS 创建 Item 组件\nDESCRIPTION: 使用 Tailwind CSS 的 utility classes 创建一个自定义的 Item 组件,实现复杂的布局和样式。\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/tutorials/first-app/c03-css.mdx#2025-04-21_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nimport Avatar from '../Avatar';\n\ntype InfoProps = {\n  avatar: string;\n  name: string;\n  email: string;\n  archived?: boolean;\n};\n\nconst Item = ({ info }: { info: InfoProps }) => {\n  const { avatar, name, email, archived } = info;\n  return (\n    <div className=\"flex p-4 items-center border-gray-200 border-b\">\n      <Avatar src={avatar} />\n      <div className=\"ml-4 flex-1 flex justify-between\">\n        <div className=\"flex-1\">\n          <p>{name}</p>\n          <p>{email}</p>\n        </div>\n        <button\n          type=\"button\"\n          disabled={archived}\n          className={`bg-blue-500  text-white font-bold\n            py-2 px-4 rounded-full hover:bg-blue-700`}\n        >\n          Archive\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default Item;\n```\n\n----------------------------------------\n\nTITLE: Creating a Basic Modern.js Module Plugin in TypeScript\nDESCRIPTION: This snippet demonstrates how to create a basic Modern.js Module plugin with a 'beforeBuild' hook that logs a message. The plugin is defined as an object with 'name' and 'setup' properties.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/guide/plugin-object.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { CliPlugin, ModuleTools } from '@modern-js/module-tools';\n\nconst myPlugin: CliPlugin<ModuleTools> = {\n  name: 'my-plugin',\n\n  setup() {\n    return {\n      // this is hook\n      beforeBuild: () => {\n        console.info('build start');\n      },\n    };\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Modern.js Module without defineConfig\nDESCRIPTION: Alternative way to configure Modern.js Module without using the defineConfig function. It directly exports an object with plugin and build preset configurations.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/before-getting-started.md#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools } from '@modern-js/module-tools';\n\nexport default {\n  plugins: [moduleTools()],\n  buildPreset: 'npm-library',\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Build Preset\nDESCRIPTION: Example of how to configure the build preset in Modern.js Module, specifying the npm-component preset with ES2019 syntax support.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/best-practices/components.mdx#2025-04-21_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nexport default defineConfig({\n  buildPreset: 'npm-component-es2019',\n});\n```\n\n----------------------------------------\n\nTITLE: Starting Development Server for Modern.js App\nDESCRIPTION: This command starts the development server for the Modern.js application, allowing for real-time development and testing.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/devtools/client/README.md#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\npnpm dev\n```\n\n----------------------------------------\n\nTITLE: Adding Page Title with React Helmet\nDESCRIPTION: Implementation of page title using React Helmet component for the main index page.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c04-routes.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Helmet } from '@modern-js/runtime/head';\n\nfunction Index() {\n  return (\n    <div className=\"container lg mx-auto\">\n      <Helmet>\n        <title>All</title>\n      </Helmet>\n      ...\n    </div>\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Using modern pre command in Modern.js Module\nDESCRIPTION: The modern pre command is used to enter or exit pre-publishing mode, allowing you to pre-release a version before the official release.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/command-preview.md#2025-04-21_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nUsage: modern pre [options] <enter|exit> [tag]\n\nEntering and exiting pre-publishing mode\n\nOptions:\n  -h, --help display help for command\n```\n\n----------------------------------------\n\nTITLE: Response Modification Middleware\nDESCRIPTION: Shows how to modify the response body and headers in a middleware.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/web-server/unstable_middleware.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport { UnstableMiddleware } from '@modern-js/runtime/server';\n\nconst modifier: UnstableMiddleware = async (c, next) => {\n  await next();\n\n  const { response } = c;\n\n  const text = await response.text();\n\n  const newText = text.replace('<html>', `<html lang=\"${language}\">`);\n\n  const newheaders = response.headers;\n  newheaders.set('x-custom-value', 'modern');\n\n  c.response = c.body(newText, {\n    status: response.status,\n    headers: newheaders,\n  });\n};\n\nexport const unstableMiddleware: UnstableMiddleware[] = [modifier];\n```\n\n----------------------------------------\n\nTITLE: Creating About Page in Modern.js\nDESCRIPTION: TypeScript React component for the about page with a link back to the home page.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/testing/playwright.mdx#2025-04-21_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Link } from '@modern-js/runtime/router';\n\nconst Index = () => (\n  <div>\n    <h1>About</h1>\n    <Link to=\"/\">Home</Link>\n  </div>\n);\n\nexport default Index;\n```\n\n----------------------------------------\n\nTITLE: Using Node.js Buffer Global in Browser Code\nDESCRIPTION: Example showing how to use the Node.js Buffer global directly in code, which will automatically inject the corresponding polyfill in the browser environment.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/official-list/plugin-node-polyfill.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nconst bufferData = Buffer.from('xxxx');\n```\n\n----------------------------------------\n\nTITLE: Required Package.json Configuration for TypeScript Types\nDESCRIPTION: Configuration required in package.json to correctly reference TypeScript declaration files. The 'types' field must match the 'declarationDir' setting from tsconfig.json.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/tests/integration/source-code-build/utils/readme.md#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"types\": \"./dist/types\"\n}\n```\n\n----------------------------------------\n\nTITLE: Default Modern.js Module Configuration\nDESCRIPTION: Basic configuration setup for Modern.js Module showing default buildPreset for npm library output\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/modify-output-product.md#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\n\nexport default defineConfig({\n  // Register the CLI tool of Modern.js Module\n  plugins: [moduleTools()],\n  // Specify the build preset configuration\n  buildPreset: 'npm-library',\n});\n```\n\n----------------------------------------\n\nTITLE: Running Modern.js Module Build with Custom Plugin\nDESCRIPTION: Shows the terminal output when running the 'modern build' command with the custom plugin. It displays the plugin's setup message, build success, and the afterBuild hook message.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/plugins/guide/getting-started.mdx#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nthis is example plugin\nBuild succeed: 510.684ms\nbuild over\n```\n\n----------------------------------------\n\nTITLE: Disabling Runtime Chunk Inlining in Modern.js\nDESCRIPTION: Configuration to prevent runtime chunk code from being inlined into HTML files. This will generate a separate builder-runtime.js file in the dist directory.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/disable-inline-runtime-chunk.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    disableInlineRuntimeChunk: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling Shims in Modern.js Module Config\nDESCRIPTION: This snippet shows how to enable shims in the Modern.js Module configuration. Shims inject polyfill code for CommonJS features when building ESM artifacts.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_34\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    shims: true,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Incorrect Filename Hash Configuration for HMR in Modern.js\nDESCRIPTION: Demonstrates an incorrect filename hash configuration that can break HMR in development mode.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/troubleshooting/hmr.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    filename: {\n      css: '[name].[contenthash:8].css',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Garfish Channel Communication Implementation\nDESCRIPTION: Implementation of inter-application communication using Garfish.channel, demonstrating event listening in child application and event emission in parent application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/micro-frontend/c04-communicate.mdx#2025-04-21_snippet_2\n\nLANGUAGE: ts\nCODE:\n```\n// 子应用监听登录事件\nconst App = () => {\n  const handleLogin = userInfo => {\n    console.log(`${userInfo.name} has login`);\n  };\n\n  useEffect(() => {\n    window?.Garfish.channel.on('login', handleLogin);\n    return () => {\n      window?.Garfish.channel.removeListener('login', handleLogin);\n    };\n  });\n};\n\n// 主应用触发监听事件\napi.getLoginInfo.then(res => {\n  if (res.code === 0) {\n    window.Garfish.channel.emit('login', res.data);\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Transformed Lodash Imports in TypeScript\nDESCRIPTION: The output after transformLodash optimization, showing how imports are converted to specific module paths, eliminating the full Lodash library import.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/performance/transform-lodash.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport _add from 'lodash/fp/add';\nimport _map from 'lodash/map';\n\nconst addOne = _add(1);\n_map([1, 2, 3], addOne);\n```\n\n----------------------------------------\n\nTITLE: Creating a React Component with a Reference Error in Modern.js\nDESCRIPTION: This code snippet demonstrates a React component that intentionally causes a reference error by using an undefined variable 'a' in the JSX. This example is used to showcase the error logging capabilities of Modern.js.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/components/internal-logger.mdx#2025-04-21_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport './index.css';\n\nconst Index = () => <div className=\"container-box\">{a}</div>;\n\nexport default Index;\n```\n\n----------------------------------------\n\nTITLE: Starting Modern.js Development Server with PNPM\nDESCRIPTION: Shows the command and output for starting a Modern.js project in development mode using pnpm. The server compiles client-side code and provides local and network access URLs.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/debug-app.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ pnpm run dev\n> modern dev\n\n  Modern.js Framework\n\nready   Client compiled in 0.86 s\n\n  > Local:    http://localhost:8080/\n  > Network:  http://192.168.0.1:8080/\n```\n\n----------------------------------------\n\nTITLE: Defining WebSocket HMR Client Configuration Type in TypeScript\nDESCRIPTION: This snippet defines the TypeScript type for the client configuration object. It specifies options for WebSocket connection parameters used in Hot Module Replacement during development.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/dev/client.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype Client = {\n  // The protocol name for the WebSocket request\n  protocol?: 'ws' | 'wss';\n  // The path for the WebSocket request\n  path?: string;\n  // The port number for the WebSocket request\n  port?: string | number;\n  // The host for the WebSocket request\n  host?: string;\n  // The maximum number of reconnection attempts after a WebSocket request is disconnected.\n  reconnect?: number;\n  // Whether to display an error overlay in the browser when a compilation error occurs\n  overlay?: boolean;\n};\n```\n\n----------------------------------------\n\nTITLE: Adding a Changeset\nDESCRIPTION: Command to create a changeset for version management. This should be run after making changes to packages to document the changes for versioning and changelogs.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/community/contributing-guide.mdx#2025-04-21_snippet_17\n\nLANGUAGE: sh\nCODE:\n```\npnpm run change\n```\n\n----------------------------------------\n\nTITLE: Executing pnpm Filter Command\nDESCRIPTION: Example showing how to use the pnpm --filter parameter to execute prepare command for specific packages\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/community/blog/2022-0910-updates.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\npnpm run --filter \"./packages/**\" prepare\n```\n\n----------------------------------------\n\nTITLE: Disabling Lodash Import Transformation in JavaScript Configuration\nDESCRIPTION: This snippet shows how to disable the Lodash import transformation in the Modern.js configuration file when unexpected code is generated.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/performance/transform-lodash.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  performance: {\n    transformLodash: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Running PNPM Dedupe Command\nDESCRIPTION: Command to upgrade and eliminate duplicate dependencies using pnpm dedupe for pnpm version 7.26.0 or higher.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/page-performance/optimize-bundle.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\npnpm dedupe\n```\n\n----------------------------------------\n\nTITLE: Building Production Website\nDESCRIPTION: Command to generate static content in the build directory for production deployment on any static hosting service.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/README.md#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n$ pnpm run build\n```\n\n----------------------------------------\n\nTITLE: Importing loadable from Modern.js\nDESCRIPTION: Basic import statement for the loadable function from Modern.js runtime.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/utility/loadable.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport loadable from '@modern-js/runtime/loadable';\n```\n\n----------------------------------------\n\nTITLE: Adding NoDevTools Hook and Improving Dev Logs\nDESCRIPTION: Enhancement to add a noDevTools hook and improve development logs with better formatting and bilingual (Chinese and English) content.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/solutions/module-tools/CHANGELOG.md#2025-04-21_snippet_9\n\nLANGUAGE: markdown\nCODE:\n```\n- 44e7b10: feat: add noDevTools hook. fix dev log content and add add chinese and english content\n  feat: 增加 noDevTools hook. 修复 dev 的日志内容, 增加中英内容\n```\n\n----------------------------------------\n\nTITLE: Adding Webpack ProgressPlugin in Modern.js\nDESCRIPTION: This snippet shows how to add the webpack ProgressPlugin to the configuration using the webpack utility parameter.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/webpack.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    webpack: (config, { webpack }) => {\n      config.plugins.push(new webpack.ProgressPlugin());\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Repository Header HTML\nDESCRIPTION: HTML markup for the repository header section, including logo, title and description alignment.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/cli/plugin-tailwind/README.md#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<p align=\"center\">\n  <a href=\"https://modernjs.dev\" target=\"blank\"><img src=\"https://lf3-static.bytednsdoc.com/obj/eden-cn/ylaelkeh7nuhfnuhf/modernjs-cover.png\" width=\"300\" alt=\"Modern.js Logo\" /></a>\n</p>\n\n<h1 align=\"center\">Modern.js</h1>\n\n<p align=\"center\">\n  A Progressive React Framework for modern web development.\n</p>\n```\n\n----------------------------------------\n\nTITLE: Bug Fixes and Refactoring Changes\nDESCRIPTION: Documentation of bug fixes including filename corrections and refactoring server plugin logic\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/solutions/module-tools/CHANGELOG.md#2025-04-21_snippet_12\n\nLANGUAGE: markdown\nCODE:\n```\n- cc971eabfc: refactor: move server plugin load logic in `@modern-js/core`\n  refactor：移除在 `@modern-js/core` 中的 server 插件加载逻辑\n- 540de1fd5d: fix: filename typo, color.ts --> colors.ts\n  fix: 文件名错误，color.ts 修改为 colors.ts\n```\n\n----------------------------------------\n\nTITLE: Generated HTML Favicon Link in Modern.js\nDESCRIPTION: Example of the HTML link tag that Modern.js automatically generates for the favicon after the build process. This tag is inserted into the HTML head section to reference the favicon file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/hooks/config/favicon.mdx#2025-04-21_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<link rel=\"icon\" href=\"/favicon.ico\" />\n```\n\n----------------------------------------\n\nTITLE: Language Selection Options in Modern.js\nDESCRIPTION: Configuration options for selecting the project's primary programming language between TypeScript (TS) and ES6+ JavaScript\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/language-config.mdx#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n- TS -- ts\\n\\n- ES6+ -- js\n```\n\n----------------------------------------\n\nTITLE: Installing pnpm globally using npm\nDESCRIPTION: This command installs pnpm version 9 globally on the system using npm. pnpm is recommended for managing dependencies in Modern.js projects.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/prerequisites.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install -g pnpm@9\n```\n\n----------------------------------------\n\nTITLE: Configuring Modern.js Module for ES Modules Output\nDESCRIPTION: Shows how to configure Modern.js Module to output ES modules format, which can potentially cause issues with CommonJS dependencies.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/faq/build.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    format: 'esm',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Cache Level Configuration Options\nDESCRIPTION: Explanation of the different cache level options (0-3) available in the PreRender component, showing how cache identity is calculated at each level.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/ssr/pre-render.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n0: pathname\n1: pathname + querystring\n2: pathname + headers\n3: pathname + querystring + headers\n```\n\n----------------------------------------\n\nTITLE: Generated File Structure Example\nDESCRIPTION: Shows the directory structure created by Modern.js when async entry is enabled.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/enable-async-entry.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnode_modules\n  └─ .modern-js\n     └─ main\n        ├─ bootstrap.jsx  # asynchronous entry file\n        ├─ index.js      # real entry code\n        └─ index.html\n```\n\n----------------------------------------\n\nTITLE: Implementing a List component with Tailwind CSS\nDESCRIPTION: This React component implements a List using Ant Design's List component and Tailwind CSS utility classes for styling. It renders Item components for each data item.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c03-css.mdx#2025-04-21_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nimport { List } from 'antd';\nimport 'tailwindcss/base.css';\nimport 'tailwindcss/components.css';\nimport 'tailwindcss/utilities.css';\nimport Item from '../components/Item';\n\nconst getAvatar = (users: Array<{ name: string, email: string }>) =>\n  users.map(user => ({\n    ...user,\n    avatar: `https://api.dicebear.com/7.x/pixel-art/svg?seed=${user.name}`,\n  }));\n\nconst mockData = getAvatar([\n  { name: 'Thomas', email: 'w.kccip@bllmfbgv.dm' },\n  { name: 'Chow', email: 'f.lfqljnlk@ywoefljhc.af' },\n  { name: 'Bradley', email: 'd.wfovsqyo@gpkcjwjgb.fr' },\n  { name: 'Davis', email: '\"t.kqkoj@utlkwnpwk.nu' },\n]);\n\nfunction Index() {\n  return (\n    <div className=\"container lg mx-auto\">\n      <List\n        dataSource={mockData}\n        renderItem={info => <Item key={info.name} info={info} />}\n      />\n    </div>\n  );\n}\n\nexport default Index;\n```\n\n----------------------------------------\n\nTITLE: Checking Dependency Versions with pnpm in Modern.js\nDESCRIPTION: Shows how to use the 'pnpm ls' command to check the installed version of a specific dependency in a Modern.js project using pnpm.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/troubleshooting/dependencies.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ndevDependencies:\n@modern-js/app-tools x.y.z\n└── @modern-js/core x.y.z\n```\n\n----------------------------------------\n\nTITLE: Custom Namespace State Structure Example\nDESCRIPTION: Shows how to use the 'ns' parameter to nest state properties under a specific field name instead of placing them at the root level of the model state.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/model/handle-effect.mdx#2025-04-21_snippet_2\n\nLANGUAGE: ts\nCODE:\n```\ninterface State {\n  data: {\n    pending: boolean;\n    result: any;\n    error: string;\n  };\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing beforeBuild Hook in TypeScript\nDESCRIPTION: Build hook triggered before the overall build process. Uses ParallelWorkflow pattern with build configuration options.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/plugin-api/plugin-hooks.md#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport const myPlugin = (): CliPlugin<ModuleTools> => ({\n  name: 'my-plugin',\n\n  setup() {\n    return {\n      beforeBuild(options: Options): void {},\n    };\n  },\n});\n```\n\nLANGUAGE: typescript\nCODE:\n```\ntype Options = {\n  options: { config: BaseBuildConfig[]; cliOptions: BuildCommandOptions };\n};\n\nexport interface BuildCommandOptions {\n  config: string;\n  clear?: boolean;\n  dts?: boolean;\n  platform?: boolean | string[];\n  tsconfig: string;\n  watch?: boolean;\n}\n```\n\n----------------------------------------\n\nTITLE: UMD Output with Custom Module Name\nDESCRIPTION: The resulting UMD output when a custom module name is configured, showing the global variable 'myLib' instead of the default 'index'.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/build-umd.mdx#2025-04-21_snippet_10\n\nLANGUAGE: javascript\nCODE:\n```\n(function (global, factory) {\n  if (typeof module === 'object' && typeof module.exports === 'object')\n    factory(exports);\n  else if (typeof define === 'function' && define.amd)\n    define(['exports'], factory);\n  else if (\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self)\n  )\n    factory((global.myLib = {}));\n})(this, function (exports) {\n  //...\n});\n```\n\n----------------------------------------\n\nTITLE: Legacy Modern.js Runtime Configuration (TypeScript)\nDESCRIPTION: Example of the older, deprecated method for configuring Modern.js runtime settings. This includes configurations in modern.config.ts, App.config, and layout files. While still supported, this approach is not recommended for new projects.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/runtime/0-intro.mdx#2025-04-21_snippet_3\n\nLANGUAGE: ts\nCODE:\n```\n// modern.config.ts\nexport default {\n  runtime: {\n    /* ... */\n  },\n  runtimeByEntries: {\n    /* ... */\n  },\n};\n\n// App.config\nApp.config = {\n  /* ... */\n};\n\n// layout 文件\nexport const config = () => {\n  /* 动态配置逻辑 */\n};\n```\n\n----------------------------------------\n\nTITLE: Locking Sub-dependencies with Yarn in package.json\nDESCRIPTION: This JSON snippet shows how to lock a sub-dependency version using Yarn in the package.json file. It uses the 'resolutions' field to specify the version.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/get-started/upgrade.mdx#2025-04-21_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"resolutions\": {\n    \"package-name\": \"^1.0.0\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Up Tailwind CSS Base Styles\nDESCRIPTION: CSS code to import Tailwind's base, components, and utilities styles.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/best-practices/use-tailwindcss.mdx#2025-04-21_snippet_2\n\nLANGUAGE: css\nCODE:\n```\n/* base and components are optional, please add as appropriate */\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n```\n\n----------------------------------------\n\nTITLE: Deduplicating Dependencies with yarn-deduplicate\nDESCRIPTION: Command to automatically merge duplicated dependencies using yarn-deduplicate tool.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/page-performance/optimize-bundle.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nnpx yarn-deduplicate && yarn\n```\n\n----------------------------------------\n\nTITLE: AfterMatch and AfterRender Context Definitions in TypeScript\nDESCRIPTION: This snippet defines the additional context properties for AfterMatch and AfterRender hooks. It extends the base HookContext with specific properties for each hook type.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/web-server/hook.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\ntype AfterMatchContext = HookContext & {\n  router: {\n    redirect: (url: string, status: number) => void;\n    rewrite: (entry: string) => void;\n  };\n};\n\ntype AfterRenderContext = {\n  template: {\n    get: () => string;\n    set: (html: string) => void;\n    prependHead: (fragment: string) => void;\n    appendHead: (fragment: string) => void;\n    prependBody: (fragment: string) => void;\n    appendBody: (fragment: string) => void;\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling Optional Features with Modern.js Module\nDESCRIPTION: The 'modern new' command activates optional features like Storybook V7 and Tailwind CSS support through micro-generators.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/basic/command-preview.md#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nUsage: modern new [options]\n\n启用可选功能\n\nOptions:\n  -d, --debug            开启 Debug 模式，打印调试日志信息 (default: false)\n  -c, --config <config>  生成器运行默认配置(JSON 字符串)\n  --dist-tag <tag>       生成器使用特殊的 npm Tag 版本\n  --registry             生成器运行过程中定制 npm Registry\n  -h, --help             display help for command\n```\n\n----------------------------------------\n\nTITLE: Example of Complete Commit Message Structure in Modern.js\nDESCRIPTION: A comprehensive example of a commit message that includes type, scope, subject, body, and footer. This structure follows the conventional commit format for the Modern.js repository.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/utils/tests/fixtures/ts-example/server/foo.md#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n<type>(<scope>): <subject>\n<BLANK LINE>\n<body>\n<BLANK LINE>\n<footer>\n```\n\n----------------------------------------\n\nTITLE: Publishing NPM Packages with Modern.js\nDESCRIPTION: The 'modern release' command publishes modules to npm registry with options to specify tags and ignore scripts during publishing.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/basic/command-preview.md#2025-04-21_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\nUsage: modern release [options]\n\n发布 npm 包\n\nOptions:\n  --tag <tag>       发布 npm 包使用特定的 tag (default: \"\")\n  --ignore-scripts  发布时忽略 package.json 中的 scripts 命令，仅支持在 pnpm monorepo\n                    中使用 (default: \"\")\n  -h, --help        display help for command\n```\n\n----------------------------------------\n\nTITLE: BFF API Directory Structure Example\nDESCRIPTION: Shows the basic directory structure for BFF API endpoints, demonstrating the default routing pattern that maps to /api prefix.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/bff/prefix.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\napi\n└── hello.ts\n```\n\n----------------------------------------\n\nTITLE: Viewing Server Routes with baseUrl Applied in Development Mode\nDESCRIPTION: Shows the terminal output when running the development server with a baseUrl configuration, displaying how the server routes include the specified prefix.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/server/base-url.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n  > Local:    http://localhost:8080/base/\n  > Network:  http://192.168.0.1:8080/base/\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Bootstrap in Modern.js (Deprecated)\nDESCRIPTION: Shows how to customize the bootstrap process in a Modern.js application by exporting a function that receives the default bootstrap function as a parameter. This allows for custom initialization before mounting the app.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/concept/entries.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nexport default (App: React.ComponentType, bootstrap: () => void) => {\n  // do something before bootstrap...\n  initSomething().then(() => {\n    bootstrap();\n  });\n};\n```\n\n----------------------------------------\n\nTITLE: Using modern release command in Modern.js Module\nDESCRIPTION: The modern release command releases the module to the npm Registry. It supports specifying dist tags and ignoring scripts in package.json.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/command-preview.md#2025-04-21_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\nUsage: modern release [options]\n\nRelease npm packages\n\nOptions:\n  --tag <tag> Release npm packages with a specific tag (default: \"\")\n  --ignore-scripts release ignores the scripts command in package.json, only supported in pnpm monorepo\n                    (default: \"\")\n  -h, --help display help for command\n```\n\n----------------------------------------\n\nTITLE: Using HTML Comment to Prevent Automatic H1 Heading\nDESCRIPTION: HTML comment that explains the purpose of the empty markdown heading (#) below it. This prevents automatic addition of h1 heading in the overview page.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/index.md#2025-04-21_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<!-- avoid auto adding h1 in overview page -->\n```\n\n----------------------------------------\n\nTITLE: Adding Build Preset and ExtendPreset Function\nDESCRIPTION: Feature to add new build presets and an extendPreset function, allowing more flexible and extensible build configurations for module tools.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/solutions/module-tools/CHANGELOG.md#2025-04-21_snippet_8\n\nLANGUAGE: markdown\nCODE:\n```\n- c1918f5: feat(module-tools): add new Buildpreset and `extendPreset` function\n  feat(module-tools): 新增新的 buildPreset 以及 extendPreset 函数\n```\n\n----------------------------------------\n\nTITLE: Plugin Import Configuration Example\nDESCRIPTION: Example demonstrating how to configure custom import transformations using template strings.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/plugin/official/cli-plugins/plugin-swc.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { MyButton as Btn } from 'foo';\n\nPluginSWC({\n  extensions: {\n    pluginImport: [\n      {\n        libraryName: 'foo',\n        customName: 'foo/es/{{ member }}',\n      },\n    ],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Initializing Modern.js Project with CLI\nDESCRIPTION: This bash command creates a new directory 'myapp', changes into it, and initializes a new Modern.js project using the create command.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c01-start.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nmkdir myapp && cd myapp\nnpx @modern-js/create@latest\n```\n\n----------------------------------------\n\nTITLE: Starting Modern.js Development Server with Proxy\nDESCRIPTION: Command to start the Modern.js development server which automatically enables the proxy server on port 8899. The output shows both local and network URLs for access.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/global-proxy.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n  Local:    http://localhost:8080/\n  Network:  http://192.168.0.1:8080/\n\ninfo      Starting proxy server.....\nsuccess   Proxy server start on localhost:8899\n```\n\n----------------------------------------\n\nTITLE: Configuring BFF Cross-Project Support - TypeScript\nDESCRIPTION: Configuration setup to enable cross-project invocation capabilities in a Modern.js BFF producer project\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/bff/cross-project.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  bff: {\n    crossProject: true,\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Building Storybook Static Files for V6\nDESCRIPTION: Command to build Storybook static files for production deployment in Modern.js projects using Storybook V6.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/basic/using-storybook.mdx#2025-04-21_snippet_9\n\nLANGUAGE: bash\nCODE:\n```\nmodern build --platform storybook\n```\n\n----------------------------------------\n\nTITLE: Directory Structure After Creating a New Entry in Modern.js\nDESCRIPTION: This shows the resulting project directory structure after creating a new 'landing-page' entry, with the original application refactored into 'src/myapp/'.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c08-entries.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n.\n├── README.md\n├── modern.config.ts\n├── node_modules\n├── package.json\n├── pnpm-lock.yaml\n├── src\n│   ├── modern-app-env.d.ts\n│   ├── landing-page\n│   │   └── routes\n│   │       ├── index.css\n│   │       ├── layout.tsx\n│   │       └── page.tsx\n│   └── myapp\n│       ├── components\n│       │   ├── Avatar\n│       │   │   └── index.tsx\n│       │   └── Item\n│       │       └── index.tsx\n│       ├── containers\n│       │   └── Contacts.tsx\n│       ├── models\n│       │   └── contacts.ts\n│       ├── routes\n│       │   ├── archives\n│       │   │   └── page.tsx\n│       │   ├── layout.tsx\n│       │   └── page.tsx\n│       └── styles\n│           └── utils.css\n└── tsconfig.json\n```\n\n----------------------------------------\n\nTITLE: Upgrading Modern.js Using the CLI Command\nDESCRIPTION: This command allows users to upgrade their Modern.js version in a project. It executes the Modern.js upgrade command which handles the version migration process automatically.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/community/releases.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx modern upgrade\n```\n\n----------------------------------------\n\nTITLE: HTML 中的 Polyfill 脚本引用 - JavaScript\nDESCRIPTION: 构建后 HTML 产物中自动插入的 Polyfill 脚本引用，用于加载基于访问设备的 Polyfill 代码。\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/components/ua-polyfill.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n<script src=\"/__polyfill__\" crossorigin></script>\n```\n\n----------------------------------------\n\nTITLE: BFF Plugin Default Alias\nDESCRIPTION: Additional path alias that is automatically added when the BFF plugin is enabled in Modern.js.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/alias.mdx#2025-04-21_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"@api\": \"./api\"\n}\n```\n\n----------------------------------------\n\nTITLE: Dependency Version Updates in Changelog\nDESCRIPTION: Lists version updates and patch changes for Modern.js packages and their dependencies across multiple release candidates. Documents bug fixes, feature additions, and dependency version bumps.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/server/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n### Patch Changes\n\n- 224f7fe: fix server route match\n- 30ac27c: feat: add generator package description\n- 0fd196e: feat: fix bugs\n- 204c626: feat: initial\n- 63be0a5: fix: #118 #104\n- Updated dependencies [224f7fe]\n- Updated dependencies [30ac27c]\n- Updated dependencies [0fd196e]\n- Updated dependencies [204c626]\n- Updated dependencies [63be0a5]\n  - @modern-js/core@1.0.0-rc.23\n  - @modern-js/bff-utils@1.0.0-rc.23\n  - @modern-js/hmr-client@1.0.0-rc.23\n  - @modern-js/server-plugin@1.0.0-rc.23\n  - @modern-js/plugin-polyfill@1.0.0-rc.23\n  - @modern-js/server-utils@1.0.0-rc.23\n  - @modern-js/utils@1.0.0-rc.23\n```\n\n----------------------------------------\n\nTITLE: Passing options to command in pnpm v7\nDESCRIPTION: Example of passing options to the underlying command when using pnpm v7. In v7, parameters for the script are placed after the command name.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/troubleshooting/cli.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\npnpm run command --options\n```\n\n----------------------------------------\n\nTITLE: Publishing: Building Packages\nDESCRIPTION: Command to build all packages before publishing. This ensures that the latest code changes are compiled and ready for release.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/community/contributing-guide.mdx#2025-04-21_snippet_19\n\nLANGUAGE: sh\nCODE:\n```\npnpm run prepare\n```\n\n----------------------------------------\n\nTITLE: Using Asset Prefix Templates in HTML Files\nDESCRIPTION: Example of using template syntax to add asset prefixes when referencing upload/ directory resources. This is useful when dev.assetPrefix or output.assetPrefix configurations are set.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/hooks/config/upload.mdx#2025-04-21_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<script src=\"<%=assetPrefix %>/upload/index.js\"></script>\n```\n\n----------------------------------------\n\nTITLE: Checking Node.js Version in Bash\nDESCRIPTION: This command checks the currently installed version of Node.js. It's used to ensure the installed version meets the minimum requirement of 18.20.8 for Modern.js development.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/nodeVersion.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnode -v\n```\n\n----------------------------------------\n\nTITLE: Package Script Definition\nDESCRIPTION: Example package.json script configuration showing modern command definition\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/community/blog/2022-0910-updates.md#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"command\": \"modern command\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Setting ESM Format in Modern.js Module\nDESCRIPTION: Configures the JavaScript output format to ECMAScript modules (ESM), which uses import and export syntax and requires an environment that supports these features.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_22\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    format: 'esm',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using Modern Build Command Options\nDESCRIPTION: The modern build command builds production-ready artifacts with options for config specification, watch mode, and bundle analysis.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/commands.mdx#2025-04-21_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nUsage: modern build [options]\n\nOptions:\n  -c --config <config>  specify the configuration file, which can be a relative or absolute path\n  -h, --help            show command help\n  -w --watch            turn on watch mode, watch for changes and rebuild\n  --analyze             analyze the bundle and view size of each module\n```\n\n----------------------------------------\n\nTITLE: TypeScript Declaration Configuration\nDESCRIPTION: TypeScript configuration to enable type declaration generation for SDK type hints\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/bff/cross-project.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n\"compilerOptions\": {\n    \"declaration\": true,\n}\n```\n\n----------------------------------------\n\nTITLE: Importing and Using NoSSR Component in Modern.js\nDESCRIPTION: Basic example of importing the NoSSR component from Modern.js runtime and using it to wrap content that should not be rendered on the server.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/ssr/no-ssr.mdx#2025-04-21_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { NoSSR } from '@modern-js/runtime/ssr';\n\nexport default () => <NoSSR>...</NoSSR>;\n```\n\n----------------------------------------\n\nTITLE: Specifying Modern.js Dependency Version in package.json\nDESCRIPTION: This JSON snippet shows how to specify a fixed version for a Modern.js dependency in the package.json file. It demonstrates the recommended practice of using exact version numbers rather than ranges.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/get-started/upgrade.mdx#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"dependencies\": {\n    \"@modern-js/app-tools\": \"x.y.z\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Modern.js State Plugin with pnpm\nDESCRIPTION: Command to install the @modern-js/plugin-state dependency using pnpm package manager.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/components/reduck-notify.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\npnpm add @modern-js/plugin-state\n```\n\n----------------------------------------\n\nTITLE: Importing Tailwind CSS Styles in Root Component\nDESCRIPTION: JavaScript code to import the index.css file containing Tailwind styles in the root component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/best-practices/use-tailwindcss.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nimport './index.css';\n```\n\n----------------------------------------\n\nTITLE: Configuring SSR by Entry in Modern.js\nDESCRIPTION: This configuration demonstrates how to disable server-side rendering (SSR) specifically for the 'landing-page' entry while keeping it enabled for other entries.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c08-entries.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { appTools, defineConfig } from '@modern-js/app-tools';\nimport { tailwindcssPlugin } from '@modern-js/plugin-tailwindcss';\n\nexport default defineConfig({\n  runtime: {\n    router: true,\n    state: true,\n  },\n  server: {\n    ssr: true,\n    ssrByEntries: {\n      'landing-page': false,\n    },\n  },\n  plugins: [appTools(), tailwindcssPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Production Dependencies in package.json\nDESCRIPTION: Example of specifying production dependencies in the package.json file. It shows how to list required packages under the 'dependencies' field.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/before-getting-started.md#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"name\": \"your-npm-project\",\n  \"dependencies\": {\n    \"npm-package-name\": \"0.1.0\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Installing React DOM Dependency\nDESCRIPTION: JSON configuration showing how to add react-dom as a dev dependency to resolve the missing module error.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/faq/storybook.mdx#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"devDependencies\": {\n        \"react-dom\": \"^17\"\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: TypeScript Declarations for TOML Files\nDESCRIPTION: Type declarations for TOML files in TypeScript to ensure proper type checking when importing TOML files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/static-assets/json-files.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare module '*.toml' {\n  const content: Record<string, any>;\n  export default content;\n}\n```\n\n----------------------------------------\n\nTITLE: Type Error in Modern.js Configuration File\nDESCRIPTION: Error message displayed when there's a type incompatibility in a Modern.js configuration file, often caused by inconsistent versions of Modern.js packages.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/troubleshooting/dependencies.mdx#2025-04-21_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\nType 'CliPlugin<{}, {}, {}, {}>' is not assignable to type 'CliPlugin<any, {}, {}, {}>'.\\n  Types of property 'setup' are incompatible.\n```\n\n----------------------------------------\n\nTITLE: 导入 Tailwind CSS 样式\nDESCRIPTION: 在主页面文件中导入 Tailwind CSS 的基础、组件和工具样式。\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/tutorials/first-app/c03-css.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nimport 'tailwindcss/base.css';\nimport 'tailwindcss/components.css';\nimport 'tailwindcss/utilities.css';\n```\n\n----------------------------------------\n\nTITLE: Viewing Debug Logs in Modern.js Development Environment\nDESCRIPTION: This snippet shows the console output when running the 'dev' command with the DEBUG=true environment variable in Modern.js. It displays various SSR debug logs and server request handling information.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/components/internal-metrics.mdx#2025-04-21_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\n> Local:    http://localhost:8080/\n> press h + enter to show shortcuts\n\ndebug   SSR Debug - server-loader, cost: 2.000094, req.url = /\ndebug   SSR Debug - ssr-prerender, cost: 6.99997, req.url = /\ndebug   SSR Debug - ssr-render-html, cost: 0.999927, req.url = /\ndebug   Debug - server-handle-request, cost: 19.999981, req.url = /\ndebug     --> GET / 200 90ms\n```\n\n----------------------------------------\n\nTITLE: Enabling Automatic Plugin Registration in Modern.js\nDESCRIPTION: Example of enabling automatic plugin registration in Modern.js by setting the autoLoadPlugins configuration option to true. This approach is more opaque and less recommended than manual registration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/auto-load-plugin.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig({\n  autoLoadPlugins: true,\n});\n```\n\n----------------------------------------\n\nTITLE: Importing Unknown File Type Example\nDESCRIPTION: Example showing how to import an unrecognized file type in code. When enableAssetFallback is enabled, this file will be output to the dist/static/media directory.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/enable-asset-fallback.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport './foo.xxx';\n```\n\n----------------------------------------\n\nTITLE: Defining Output Configuration Parameter in Markdown\nDESCRIPTION: Documents the injectStyles configuration option which controls whether styles should be injected into the DOM. The option is boolean type and defaults to false.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/inject-styles.mdx#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n---\ntitle: injectStyles\nconfigName: output.injectStyles\n---\n\n# output.injectStyles\n\n- **Type:** `boolean`\n- **Default:** `false`\n\nWhether to inject styles into DOM.\n\nimport RsbuildConig from '@site-docs-en/components/rsbuild-config-tooltip';\n\n<RsbuildConig />\n```\n\n----------------------------------------\n\nTITLE: Configuring Project Settings via CLI\nDESCRIPTION: Interactive CLI prompts to select TypeScript as the programming language and pnpm as the package manager for the project.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/create-bff-api-app.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n? Please select the programming language: TS\n? Please select the package manager: pnpm\n```\n\n----------------------------------------\n\nTITLE: Default Global Variables Configuration in TypeScript\nDESCRIPTION: Shows the default configuration for global variables that includes NODE_ENV environment variable.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/global-vars.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst defaultGlobalVars = {\n  // The environment variable `process.env.NODE_ENV` will be added by default,\n  // so you don't need to set it in manually.\n  'process.env.NODE_ENV': JSON.stringify(process.env.NODE_ENV),\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Route Chunk Splitting in Modern.js\nDESCRIPTION: Configuration example showing how to disable route-based code splitting in Modern.js. When set to false, the framework will not split JavaScript and CSS files based on routes for on-demand loading.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/split-route-chunks.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    splitRouteChunks: false,\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Modern.js Version 2.0.0-beta.7 Changelog Entry\nDESCRIPTION: Documents major changes, minor enhancements, and patch updates for beta.7 version, including React 18 streaming SSR support and builder compiler integration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/cli/core/CHANGELOG.md#2025-04-21_snippet_13\n\nLANGUAGE: markdown\nCODE:\n```\n## 2.0.0-beta.7\n\n### Major Changes\n\n- dda38c9c3e: chore: v2\n\n### Minor Changes\n\n- c9e800d39a: feat: support React18 streaming SSR\n  feat: 支持 React18 流式 SSR\n- edd1cfb1af: feat: modernjs Access builder compiler\n  feat: modernjs 接入 builder 构建\n\n### Patch Changes\n\n- 8b8e1bb571: feat: support nested routes\n  feat: 支持嵌套路由\n- Updated dependencies [edd1cfb1af]\n- Updated dependencies [dda38c9c3e]\n- Updated dependencies [bbe4c4ab64]\n  - @modern-js/utils@2.0.0-beta.7\n  - @modern-js/node-bundle-require@2.0.0-beta.7\n  - @modern-js/plugin@2.0.0-beta.7\n```\n\n----------------------------------------\n\nTITLE: HTTPS Server URL Example\nDESCRIPTION: Example showing HTTPS development server URLs for local and network access when HTTPS is enabled.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/dev/https.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n  > Local: https://localhost:8080/\n  > Network: https://192.168.0.1:8080/\n```\n\n----------------------------------------\n\nTITLE: Configuring Module Documentation Settings\nDESCRIPTION: Module configuration for documentation features including preview mode and iframe position\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/use-module-doc.mdx#2025-04-21_snippet_3\n\nLANGUAGE: ts\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools'.\nimport { modulePluginDoc } from '@modern-js/plugin-rspress'.\n\nexport default defineConfig({\n  plugins: [\n    moduleTools(),\n    modulePluginDoc({\n      /**\n       * Select the preview method\n       * @default internal\n       */\n      previewMode: 'iframe',\n      /**\n       * Select iframe position\n       * @default 'follow'\n       */\n      iframePosition: 'fixed',\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Source Field in Sub-project's package.json\nDESCRIPTION: Shows how to configure the source field in a sub-project's package.json to specify the source code file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/source-build.mdx#2025-04-21_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"name\": \"lib\",\n  \"main\": \"./dist/index.js\",\n  \"source\": \"./src/index.ts\"\n}\n```\n\n----------------------------------------\n\nTITLE: Creating directories and files for components (macOS)\nDESCRIPTION: These bash commands create directories and files for the Avatar component on macOS systems.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c03-css.mdx#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nmkdir -p src/components/Avatar\ntouch src/components/Avatar/index.tsx\n```\n\n----------------------------------------\n\nTITLE: Displaying Production File Sizes in Bash Output\nDESCRIPTION: This snippet shows an example of the console output when printFileSize is enabled, displaying file sizes after a production build including original and gzipped sizes.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/performance/print-file-size.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ninfo    Production file sizes:\n\n  File                                      Size         Gzipped\n  dist/static/js/lib-react.09721b5c.js      152.6 kB     49.0 kB\n  dist/html/main/index.html                 5.8 kB       2.5 kB\n  dist/static/js/main.3568a38e.js           3.5 kB       1.4 kB\n  dist/static/css/main.03221f72.css         1.4 kB       741 B\n```\n\n----------------------------------------\n\nTITLE: ReactUtils Extension Options Definition\nDESCRIPTION: Type definition for the ReactUtils extension options, which provides utilities for React code transformation including automatic React import and prop-types removal.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/official/cli-plugins/plugin-swc.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\ntype ReactUtilsOptions = {\n  autoImportReact?: boolean;\n  removeEffect?: boolean;\n  removePropTypes?: {\n    mode?: 'remove' | 'unwrap' | 'unsafe-wrap';\n    removeImport?: boolean;\n    ignoreFilenames?: string[];\n    additionalLibraries?: string[];\n    classNameMatchers?: string[];\n  };\n}\n```\n\n----------------------------------------\n\nTITLE: Running Development Mode in Modern.js Package\nDESCRIPTION: Command for running and debugging a Modern.js module in development mode.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/prod-server/README.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\npnpm run dev\n```\n\n----------------------------------------\n\nTITLE: Creating a Basic Model in Reduck\nDESCRIPTION: Demonstrates how to create a new model with a unique identifier using the model function.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/model/model_.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nmodel('foo');\n```\n\n----------------------------------------\n\nTITLE: Separating New & Upgrade Commands in Modern.js\nDESCRIPTION: This code comment from version 2.48.0 describes a feature that separates the 'new' and 'upgrade' commands from solution implementations, making the architecture more modular.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/solutions/monorepo-tools/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\nfeat: separate new & upgrade action from solutions\nfeat: 从工程方案中分离 new & upgrade 命令\n```\n\n----------------------------------------\n\nTITLE: Defining Button Component with TypeScript Props\nDESCRIPTION: Example of a Button component implementation with TypeScript props and JSDoc comments\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/use-module-doc.mdx#2025-04-21_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nexport type ButtonProps = {\n  /**\n   * Whether to disable the button\n   */\n  disabled?: boolean;\n  /* * Whether to disable the button */ disabled?\n   * Type of Button\n   * @default 'default'\n   */\n  size?: 'mini' | 'small' | 'default' | 'large';\n}.\nexport const Button = (props?: ButtonProps) => {};\n```\n\n----------------------------------------\n\nTITLE: Building Components in Watch Mode for Storybook\nDESCRIPTION: Command to build Modern.js components in watch mode, allowing for real-time updates during Storybook development.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/basic/using-storybook.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nmodern build --watch\n```\n\n----------------------------------------\n\nTITLE: Changelog Entry Format - Markdown\nDESCRIPTION: Standard format for documenting version changes and dependency updates in the changelog, showing version numbers, change types, and specific updates.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/devtools/plugin/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n## 2.67.2\n\n### Patch Changes\n\n- @modern-js/runtime@2.67.2\n- @modern-js/devtools-client@2.67.2\n- @modern-js/devtools-kit@2.67.2\n- @modern-js/utils@2.67.2\n```\n\n----------------------------------------\n\nTITLE: Defining DNS Prefetch Type in TypeScript\nDESCRIPTION: Type definition for the performance.dnsPrefetch configuration option that accepts either undefined or an array of strings representing domain names to prefetch.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/performance/dns-prefetch.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nundefined | string[]\n```\n\n----------------------------------------\n\nTITLE: Fixed Lodash Type Import Using import type in TypeScript\nDESCRIPTION: The correct way to import both functions and types from lodash in Modern.js, using the 'import type' syntax for types to avoid compilation errors with babel-plugin-lodash.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/troubleshooting/builder.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nimport { debounce } from 'lodash';\nimport type { DebouncedFunc } from 'lodash';\n```\n\n----------------------------------------\n\nTITLE: Replacing Babel Runtime with SWC Helpers in Version 2.20.0\nDESCRIPTION: This change removes @babel/runtime dependency and adds @swc/helpers with the externalHelpers configuration enabled, modernizing the build toolchain.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/toolkit/plugin/CHANGELOG.md#2025-04-21_snippet_5\n\nLANGUAGE: markdown\nCODE:\n```\n6b9d90a: chore: remove @babel/runtime. add @swc/helper and enable `externalHelper` config.\n  chore: 移除 @babel/runtime 依赖. 增加 @swc/helpers 依赖并且开启 `externalHelpers` 配置\n```\n\n----------------------------------------\n\nTITLE: Running the Modern.js CLI to Enable Storybook V7\nDESCRIPTION: Command to enable Storybook V7 functionality in a Modern.js project using the Modern.js CLI tool.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/basic/using-storybook.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ npx modern new\n? 请选择你想要的操作 启用可选功能\n? 请选择功能名称 启用「Storybook」V7\n```\n\n----------------------------------------\n\nTITLE: Configuring Server Port in Modern.js\nDESCRIPTION: Shows how to modify the default server port (8080) using the 'server.port' configuration in a Modern.js project. This example sets the port to 8081.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/serve-command.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  server: {\n    port: 8081,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Changelog Version Updates\nDESCRIPTION: Version bumps and dependency updates for Modern.js module tools components\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/solutions/module-tools/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n@modern-js/utils@2.37.0\n@modern-js/core@2.37.0\n@modern-js/plugin-changeset@2.37.0\n@modern-js/plugin-i18n@2.37.0\n@modern-js/plugin-lint@2.37.0\n@modern-js/new-action@2.37.0\n@modern-js/plugin@2.37.0\n@modern-js/upgrade@2.37.0\n@modern-js/types@2.37.0\n```\n\n----------------------------------------\n\nTITLE: Using Global Buffer Polyfill in Browser Environment\nDESCRIPTION: This snippet shows how to use the global Buffer polyfill in a browser environment. The polyfill is automatically injected when the Buffer global is used in the code.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/plugins/official-list/plugin-node-polyfill.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst bufferData = Buffer.from('xxxx');\n```\n\n----------------------------------------\n\nTITLE: Analyzing Bundle Size with Modern Build\nDESCRIPTION: Output from running the modern build command with the --analyze flag, showing file sizes and gzipped sizes of the production build artifacts.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/commands.mdx#2025-04-21_snippet_5\n\nLANGUAGE: text\nCODE:\n```\nBundle Analyzer saved report to /example/dist/report.html\n\ninfo    Production file sizes:\n\n  File                                      Size         Gzipped\n  dist/static/js/lib-react.09721b5c.js      152.6 kB     49.0 kB\n  dist/html/main/index.html                 5.8 kB       2.5 kB\n  dist/static/js/main.3568a38e.js           3.5 kB       1.4 kB\n  dist/static/css/main.03221f72.css         1.4 kB       741 B\n```\n\n----------------------------------------\n\nTITLE: Centering Header in Markdown\nDESCRIPTION: This snippet demonstrates how to center a header in Markdown using HTML tags. It's used to display the project name 'Modern.js' in a centered, large format.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/create-request/README.md#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n<h1 align=\"center\">Modern.js</h1>\n```\n\n----------------------------------------\n\nTITLE: Using Models with React components in Modern.js\nDESCRIPTION: This code shows how to use the models in a React component using the useModel hook. It demonstrates incrementing the step value and the counter value based on the current step, showcasing the practical application of Model communication.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/model/model-communicate.mdx#2025-04-21_snippet_1\n\nLANGUAGE: TSX\nCODE:\n```\nimport { useModel } from '@modern-js/runtime/model';\nimport { counterModel, stepModel } from './models/count';\n\nfunction Counter() {\n  const [state, actions] = useModel(counterModel);\n  const [step, stepActions] = useModel(stepModel);\n\n  return (\n    <div>\n      <div>step: {step}</div>\n      <button onClick={() => stepActions.setState(step + 1)}>add step</button>\n      <div>counter: {state.value}</div>\n      <button onClick={() => actions.add()}>add counter</button>\n    </div>\n  );\n}\n\nexport default function App() {\n  return <Counter />;\n}\n```\n\n----------------------------------------\n\nTITLE: Building All Packages\nDESCRIPTION: Command to build all packages in the monorepo at once using the prepare script. This can take some time but ensures all packages are built correctly.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/community/contributing-guide.mdx#2025-04-21_snippet_10\n\nLANGUAGE: sh\nCODE:\n```\npnpm run prepare\n```\n\n----------------------------------------\n\nTITLE: Disabling Esbuild Code Transpilation\nDESCRIPTION: Example of how to disable Esbuild code transpilation, reverting to Babel for code transpilation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/plugin/official/rsbuild-plugins/plugin-esbuild.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nbuilderPluginEsbuild({\n  loader: false,\n});\n```\n\n----------------------------------------\n\nTITLE: Importing Tailwind CSS in Root Component\nDESCRIPTION: JavaScript import statement for including Tailwind CSS styles\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/css/tailwindcss.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nimport './index.css';\n```\n\n----------------------------------------\n\nTITLE: Adding Class Name Prefix in Tailwind Config\nDESCRIPTION: Example of adding a class name prefix using the prefix option in tailwind.config.js.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/best-practices/use-tailwindcss.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nmodule.exports = {\n  prefix: 'foo-',\n};\n```\n\n----------------------------------------\n\nTITLE: Creating Directory Structure for Container Components\nDESCRIPTION: Shell commands to create the directory structure for container components. The commands create a containers directory and a new Contacts.tsx file for the container component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c07-container.mdx#2025-04-21_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nmkdir -p src/containers\ntouch src/containers/Contacts.tsx\n```\n\nLANGUAGE: powershell\nCODE:\n```\nmkdir -p src/containers\nni src/containers/Contacts.tsx\n```\n\n----------------------------------------\n\nTITLE: Importing OtherPlugins Component in Modern.js Documentation\nDESCRIPTION: Imports the OtherPlugins component from the English documentation components directory and renders it in the current page. This is likely used to display additional plugin information.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/introduction.mdx#2025-04-21_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\nimport OtherPlugins from '@site-docs-en/components/other-plugins.mdx';\n\n<OtherPlugins />\n```\n\n----------------------------------------\n\nTITLE: Convention-based Routing Project Structure Example\nDESCRIPTION: Example of a project directory structure using convention-based routing in Modern.js, which will automatically generate routes for SSG.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/render/ssg.mdx#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n.\n└── routes\n    ├── layout.tsx\n    ├── page.tsx\n    └── user\n        ├── layout.tsx\n        ├── page.tsx\n        └── profile\n            └── page.tsx\n```\n\n----------------------------------------\n\nTITLE: Replacing safeReplacer with flatted in JavaScript\nDESCRIPTION: Fix to use the flatted library instead of safeReplacer for object serialization.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/core/CHANGELOG.md#2025-04-21_snippet_1\n\nLANGUAGE: JavaScript\nCODE:\n```\nuse flatted instead of safeReplacer\n```\n\n----------------------------------------\n\nTITLE: 创建独立的 Avatar 组件文件\nDESCRIPTION: 将 Avatar 组件抽离到单独的文件中,便于维护和复用。\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/tutorials/first-app/c03-css.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport styled from '@modern-js/runtime/styled';\n\nconst Avatar = styled.img`\n  width: 50px;\n  height: 50px;\n  border: 4px solid #0ef;\n  border-radius: 50%;\n`;\n\nexport default Avatar;\n```\n\n----------------------------------------\n\nTITLE: Publishing: Installation Step\nDESCRIPTION: Command to install dependencies before publishing a new version. This is typically done by repository maintainers as part of the release process.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/community/contributing-guide.mdx#2025-04-21_snippet_18\n\nLANGUAGE: sh\nCODE:\n```\npnpm i\n```\n\n----------------------------------------\n\nTITLE: Implementing Dynamic Import for matchRoutes in JavaScript\nDESCRIPTION: Fix to use dynamic import for importing the matchRoutes function to improve module loading.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/core/CHANGELOG.md#2025-04-21_snippet_2\n\nLANGUAGE: JavaScript\nCODE:\n```\nshould use dynamic import to import matchRoutes\n```\n\n----------------------------------------\n\nTITLE: Package.json Dependencies for Plugin Detection\nDESCRIPTION: Example of the dependencies section in package.json that Modern.js scans to detect installed plugins for automatic registration. It looks for both dependencies and devDependencies.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/auto-load-plugin.mdx#2025-04-21_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n\"dependencies\": {\n  \"@modern-js/plugin-tailwindcss\": \"x.x.x\"\n  ...\n},\n\"devDependencies\": {\n  \"@modern-js/app-tools\": \"x.x.x\"\n  ...\n}\n```\n\n----------------------------------------\n\nTITLE: Linking to Rspack Plugin Compatibility Guide in Markdown\nDESCRIPTION: This snippet provides a markdown link to the Rspack plugin compatibility guide, which details which webpack plugins can and cannot be used with Rspack.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/rspackPrecautions.mdx#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n[Plugin Compatibility](https://rspack.dev/guide/compatibility/plugin)\n```\n\n----------------------------------------\n\nTITLE: Enabling CSS File Inlining Configuration\nDESCRIPTION: Configuration for enabling CSS file inlining into HTML files\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/page-performance/inline-assets.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    enableInlineStyles: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Output Charset Configuration Type Definition\nDESCRIPTION: Defines the type and default value for the output.charset configuration option. It can be set to either 'ascii' or 'utf8', with 'ascii' being the default value.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/charset.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype CharsetConfig = 'ascii' | 'utf8';\ndefault: 'ascii'\n```\n\n----------------------------------------\n\nTITLE: Sample Module Source Code\nDESCRIPTION: Example source code that will be exported as a default function in the UMD module.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/build-umd.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nexport default () => {\n  console.info('hello world');\n};\n```\n\n----------------------------------------\n\nTITLE: Using modern bump command in Modern.js Module\nDESCRIPTION: The modern bump command uses changesets to automatically update releases and changelogs, modifying the version number in package.json and generating the CHANGELOG.md file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/command-preview.md#2025-04-21_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nUsage: modern bump [options]\n\nUse changesets to automatically update releases and changelogs\n\nOptions:\n  --canary Create a pre-release for testing (default: false)\n  --preid <tag> Specify an identifier when versioning a pre-release (default: \"next\")\n  --snapshot Create a special version for testing (default: false)\n  -h, --help display help for command\n```\n\n----------------------------------------\n\nTITLE: Modern.js Version Updates\nDESCRIPTION: Changelog entries documenting version updates, bug fixes, and feature additions for Modern.js and its associated packages. Includes dependency version bumps for core, i18n, plugins and utilities.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/solutions/monorepo-tools/CHANGELOG.md#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n### Patch Changes\n\n- 224f7fe: fix server route match\n- 30ac27c: feat: add generator package description\n- 0fd196e: feat: fix bugs\n- 204c626: feat: initial\n- 63be0a5: fix: #118 #104\n- Updated dependencies [224f7fe]\n- Updated dependencies [30ac27c]\n- Updated dependencies [0fd196e]\n- Updated dependencies [204c626]\n- Updated dependencies [63be0a5]\n  - @modern-js/core@1.0.0-rc.21\n  - @modern-js/i18n-cli-language-detector@1.0.0-rc.21\n  - @modern-js/plugin-changeset@1.0.0-rc.21\n  - @modern-js/plugin-i18n@1.0.0-rc.21\n  - @modern-js/new-action@1.0.0-rc.21\n  - @modern-js/utils@1.0.0-rc.21\n```\n\n----------------------------------------\n\nTITLE: Initializing Storybook Middleware for Proxy Configuration\nDESCRIPTION: Basic JavaScript setup for creating a middleware file in Storybook to enable API proxying. This creates the foundation for adding custom Express middleware to Storybook.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/faq/storybook.mdx#2025-04-21_snippet_3\n\nLANGUAGE: js\nCODE:\n```\n/* eslint-disable filenames/match-exported */\nmodule.exports = function expressMiddleware(router) {\n    // router is express router\n    // import { Router } from 'express'\n    // router = new Router();\n};\n```\n\n----------------------------------------\n\nTITLE: Initializing Modern.js Project for Micro Frontend\nDESCRIPTION: Commands to create a new Modern.js project directory and initialize it for micro frontend development.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/micro-frontend/c02-development.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nmkdir masterApp && cd masterApp\nnpx @modern-js/create@latest\n```\n\n----------------------------------------\n\nTITLE: Modern.js Project Structure\nDESCRIPTION: This snippet shows the directory structure of a newly created Modern.js project, including the src folder, configuration files, and package management files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/init-app.mdx#2025-04-21_snippet_2\n\nLANGUAGE: plaintext\nCODE:\n```\n.\n├── src\n│   ├── modern-app-env.d.ts\n│   └── routes\n│       ├── index.css\n│       ├── layout.tsx\n│       └── page.tsx\n├── modern.config.ts\n├── package.json\n├── pnpm-lock.yaml\n├── README.md\n└── tsconfig.json\n```\n\n----------------------------------------\n\nTITLE: Clearing webpack cache in Modern.js\nDESCRIPTION: Command to clear the webpack cache stored in the node_modules/.cache directory to resolve caching issues.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/troubleshooting/builder.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nrm -rf ./node_modules/.cache\n```\n\n----------------------------------------\n\nTITLE: Enabling Optional Features in Modern.js Package\nDESCRIPTION: Command for adding optional features to a Modern.js module.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/prod-server/README.md#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\npnpm run new\n```\n\n----------------------------------------\n\nTITLE: Checking Installed Dependency Versions with pnpm in Modern.js\nDESCRIPTION: Example of using the pnpm ls command with the --depth Infinity flag to check the actual installed version of a dependency in a Modern.js project that uses pnpm.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/troubleshooting/dependencies.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ndevDependencies:\n@modern-js/app-tools x.y.z\n└── @modern-js/core x.y.z\n```\n\n----------------------------------------\n\nTITLE: HTML Project Header Markup\nDESCRIPTION: HTML markup for the project header section including logo, title and description with centered alignment\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/generator/generator-cases/README.md#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<p align=\"center\">\n  <a href=\"https://modernjs.dev\" target=\"blank\"><img src=\"https://lf3-static.bytednsdoc.com/obj/eden-cn/ylaelkeh7nuhfnuhf/modernjs-cover.png\" width=\"300\" alt=\"Modern.js Logo\" /></a>\n</p>\n\n<h1 align=\"center\">Modern.js</h1>\n\n<p align=\"center\">\n  A Progressive React Framework for modern web development.\n</p>\n```\n\n----------------------------------------\n\nTITLE: Installing Dependencies for Modern.js Website\nDESCRIPTION: Command to install project dependencies using pnpm package manager.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/README.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\npnpm i\n```\n\n----------------------------------------\n\nTITLE: Building Rslib Library\nDESCRIPTION: This command builds the Rslib library using pnpm.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/runtime/plugin-image/README.md#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\npnpm build\n```\n\n----------------------------------------\n\nTITLE: Displaying Modern.js Logo in Markdown\nDESCRIPTION: This snippet shows how to display the Modern.js logo in a centered alignment using Markdown and HTML. It includes an image link to the project website.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/plugin-server/README.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n<p align=\"center\">\n  <a href=\"https://modernjs.dev\" target=\"blank\"><img src=\"https://lf3-static.bytednsdoc.com/obj/eden-cn/ylaelkeh7nuhfnuhf/modernjs-cover.png\" width=\"300\" alt=\"Modern.js Logo\" /></a>\n</p>\n```\n\n----------------------------------------\n\nTITLE: Support Custom SDK in BFF Changelog Entry\nDESCRIPTION: Changelog entry documenting addition of custom SDK support in BFF functionality along with dependency updates\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/create-request/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n### Patch Changes\n\n- f59b6f9: feat: support custom sdk in BFF\n  feat: 在 BFF 中支持自定义 SDK\n- Updated dependencies [3473bee]\n- Updated dependencies [b98f8aa]\n- Updated dependencies [eb602d2]\n  - @modern-js/utils@2.36.0\n  - @modern-js/runtime-utils@2.36.0\n```\n\n----------------------------------------\n\nTITLE: Disabling styled-components babel plugin\nDESCRIPTION: Configuration to disable the built-in babel-plugin-styled-components to prevent compilation hangs with large files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/troubleshooting/builder.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    styledComponents: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Server Port in Modern.js\nDESCRIPTION: Example of how to modify the default server port (8080) using the server.port configuration option in Modern.js config file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/components/serve-command.mdx#2025-04-21_snippet_1\n\nLANGUAGE: js\nCODE:\n```\nexport default defineConfig({\n  server: {\n    port: 8081,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Updating Dependencies in package.json\nDESCRIPTION: Updates the dependencies for @modern-js/types, @modern-js/utils, and @modern-js/plugin to version 2.30.0.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/runtime/plugin-runtime/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n\"@modern-js/types\": \"2.30.0\",\n\"@modern-js/utils\": \"2.30.0\",\n\"@modern-js/plugin\": \"2.30.0\"\n```\n\n----------------------------------------\n\nTITLE: Using Function-based Alias Configuration\nDESCRIPTION: Shows how to configure path aliases using a function approach, where you can accept and modify the pre-defined alias object.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  buildConfig: {\n    alias: alias => {\n      alias['@common'] = '. /src/common';\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Checking Git Email Configuration\nDESCRIPTION: Command to check if your Git client has an email configured, which is needed for submitting pull requests to the repository.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/community/contributing-guide.mdx#2025-04-21_snippet_4\n\nLANGUAGE: sh\nCODE:\n```\ngit config --list | grep email\n```\n\n----------------------------------------\n\nTITLE: Formatting Modern.js Title and Description in Markdown\nDESCRIPTION: This snippet demonstrates how to format the title 'Modern.js' and a brief description using Markdown syntax for centered alignment.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/plugin-server/README.md#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n<h1 align=\"center\">Modern.js</h1>\n\n<p align=\"center\">\n  A Progressive React Framework for modern web development.\n</p>\n```\n\n----------------------------------------\n\nTITLE: Passing filter parameter to pnpm command in v7\nDESCRIPTION: Example of using the --filter parameter with pnpm v7 to run the prepare command on specific packages. In pnpm v7, parameters for pnpm itself must be placed before the command name.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/troubleshooting/cli.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\npnpm run --filter \"./packages/**\" prepare\n```\n\n----------------------------------------\n\nTITLE: Installing Dependencies for Modern.js App\nDESCRIPTION: This command installs the necessary dependencies for the Modern.js application using pnpm package manager.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/devtools/client/README.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\npnpm install\n```\n\n----------------------------------------\n\nTITLE: Adding Server Reporter in JavaScript\nDESCRIPTION: Adds a server reporter to report server costs, errors, and other information.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/runtime/plugin-runtime/CHANGELOG.md#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nfeat: add a server reporter that report server cost, logger about error, info etc.\n```\n\n----------------------------------------\n\nTITLE: Registering a Modern.js Module Plugin in Configuration\nDESCRIPTION: Demonstrates how to register a custom plugin in the Modern.js Module configuration file. It uses the 'plugins' API to add the example plugin to the project configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/plugins/guide/getting-started.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { examplePlugin } from './plugins/example';\nexport default defineConfig({\n  plugins: [examplePlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Basic State Structure for handleEffect in TypeScript\nDESCRIPTION: Defines the default state structure returned by handleEffect API, including result (for fulfilled state data), pending (request status), and error (failure information).\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/model/handle-effect.mdx#2025-04-21_snippet_0\n\nLANGUAGE: ts\nCODE:\n```\ninterface State {\n  result: any; // 存储 fulfilled 状态的返回结果\n  pending: boolean; // 请求是否结束\n  error: string; // 请求失败的结果\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Common Capability Test Cases in TypeScript\nDESCRIPTION: Example of how to add test cases for common capabilities that will run in both Webpack and Rspack environments using Playwright and Modern.js e2e utilities.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/tests/e2e/builder/README.md#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { expect, test } from '@modern-js/e2e/playwright';\n// will passed in webpack, and rspack\ntest('test 1 + 1', () => {\n    expect(1 + 1).toBe(2);\n})\n```\n\n----------------------------------------\n\nTITLE: Package.json Test Script Configuration\nDESCRIPTION: NPM script configuration for running Jest tests.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/testing/jest.mdx#2025-04-21_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"test\": \"jest\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: HTML Logo and Title Section\nDESCRIPTION: HTML markup for the project logo, title and description centered on the page using paragraph and heading elements with alignment attributes.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/plugin-polyfill/README.md#2025-04-21_snippet_0\n\nLANGUAGE: HTML\nCODE:\n```\n<p align=\"center\">\n  <a href=\"https://modernjs.dev\" target=\"blank\"><img src=\"https://lf3-static.bytednsdoc.com/obj/eden-cn/ylaelkeh7nuhfnuhf/modernjs-cover.png\" width=\"300\" alt=\"Modern.js Logo\" /></a>\n</p>\n\n<h1 align=\"center\">Modern.js</h1>\n\n<p align=\"center\">\n  A Progressive React Framework for modern web development.\n</p>\n```\n\n----------------------------------------\n\nTITLE: Updating Version and Changelog with Modern.js\nDESCRIPTION: The 'modern bump' command automatically updates package version and changelogs based on changesets, with options for canary and snapshot releases.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/basic/command-preview.md#2025-04-21_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nUsage: modern bump [options]\n\n使用变更集自动更新发布版本和变更日志\n\nOptions:\n  --canary       创建一个预发布版本进行测试 (default: false)\n  --preid <tag>  在对预发布版本进行版本控制时指定标识符 (default: \"next\")\n  --snapshot     创建一个特殊版本进行测试 (default: false)\n  -h, --help     display help for command\n```\n\n----------------------------------------\n\nTITLE: Creating directories and files for components (Windows)\nDESCRIPTION: These PowerShell commands create directories and files for the Avatar component on Windows systems.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c03-css.mdx#2025-04-21_snippet_4\n\nLANGUAGE: powershell\nCODE:\n```\nmkdir -p src/components/Avatar\nni src/components/Avatar/index.tsx\n```\n\n----------------------------------------\n\nTITLE: Reordering faviconPlugin and staticPlugin in JavaScript\nDESCRIPTION: Fix to ensure faviconPlugin is executed after staticPlugin in the plugin order.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/core/CHANGELOG.md#2025-04-21_snippet_8\n\nLANGUAGE: JavaScript\nCODE:\n```\nfaviconPlugin should after staticPlugin\n```\n\n----------------------------------------\n\nTITLE: 使用 styled-components 创建 Avatar 组件\nDESCRIPTION: 使用 styled-components 创建一个自定义的 Avatar 组件,设置宽高、边框和圆角等样式。\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/tutorials/first-app/c03-css.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst Avatar = styled.img`\n  width: 50px;\n  height: 50px;\n  border: 4px solid #0ef;\n  border-radius: 50%;\n`;\n```\n\n----------------------------------------\n\nTITLE: Setting JSX Format in tsconfig.json\nDESCRIPTION: Example of how to set the JSX format in tsconfig.json for React projects when using Esbuild for code transpilation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/plugin/official/rsbuild-plugins/plugin-esbuild.mdx#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"compilerOptions\": {\n    \"jsx\": \"react-jsx\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Project Directory Structure with Favicon in Modern.js\nDESCRIPTION: Example directory structure showing the location of a favicon.ico file in the config directory of a Modern.js project. This structure demonstrates the proper placement for automatic favicon detection.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/hooks/config/favicon.mdx#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\n./config\n└── favicon.ico\n```\n\n----------------------------------------\n\nTITLE: Configuring task in constant.ts\nDESCRIPTION: Example of adding a new dependency configuration to the TASKS array in the constant.ts file, specifying package directory, package name, and dependencies to be prebundled.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/scripts/prebundle/README.md#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst TASKS: TaskConfig[] = [\n  {\n    packageDir: 'toolkit/utils',\n    packageName: '@modern-js/utils',\n    dependencies: [\n      // Add the package name\n      'address',\n    ],\n  },\n];\n```\n\n----------------------------------------\n\nTITLE: Running Micro-Frontend Applications in Development Mode\nDESCRIPTION: Shell commands for starting the master application and sub-applications for local development and testing.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/micro-frontend/c02-development.mdx#2025-04-21_snippet_10\n\nLANGUAGE: bash\nCODE:\n```\n? 请选择你想要的操作 启用可选功能\n? 请选择功能名称 启用「微前端」模式\n```\n\n----------------------------------------\n\nTITLE: Enabling Rem Conversion in Modern.js Configuration\nDESCRIPTION: This snippet shows how to enable rem conversion in Modern.js by setting output.convertToRem to true. This activates the rem processing capability with default settings.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/convert-to-rem.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    convertToRem: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Minor Version Update with Plugin Support\nDESCRIPTION: Changelog entry for version 2.54.0 adding support for new server plugin functionality and removing some hooks\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/plugin-polyfill/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n### Minor Changes\n\n- a8d8f0c: feat: support new server plugin & discard server plugin some hooks\n  feat: 支持新 server plugin & 减少 server plugin 钩子\n\n### Patch Changes\n\n- Updated dependencies [15a090c]\n- Updated dependencies [a8d8f0c]\n- Updated dependencies [09798ac]\n  - @modern-js/utils@2.54.0\n```\n\n----------------------------------------\n\nTITLE: Custom Bypass Proxy Configuration in JavaScript\nDESCRIPTION: Example showing how to implement a custom bypass function to handle specific request types differently.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/dev-server.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    devServer: {\n      proxy: {\n        '/api': {\n          target: 'http://localhost:3000',\n          bypass: function (req, res, proxyOptions) {\n            if (req.headers.accept.indexOf('html') !== -1) {\n              console.log('Skipping proxy for browser request.');\n              return '/index.html';\n            }\n          },\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Declaring Global Variables in TypeScript\nDESCRIPTION: Example of declaring global variables in a TypeScript declaration file for use with the 'define' option.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare const YOUR_ADD_GLOBAL_VAR;\n```\n\n----------------------------------------\n\nTITLE: Defining MicroFrontend Interface in TypeScript\nDESCRIPTION: TypeScript interface definition for the MicroFrontend configuration object. It specifies the structure and types of the configuration options available for micro-frontend deployment.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/deploy/microFrontend.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface MicroFrontend {\n  enableHtmlEntry?: boolean;\n  externalBasicLibrary?: boolean;\n  moduleApp?: string;\n}\n```\n\n----------------------------------------\n\nTITLE: Overriding Build Configuration with Object\nDESCRIPTION: Example of overriding buildPreset settings by enabling sourceMap generation using object syntax\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/modify-output-product.md#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\nexport default defineConfig({\n  plugins: [moduleTools()],\n  buildPreset: 'npm-library',\n  buildConfig: {\n    sourceMap: true,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Basic Application Structure in Modern.js\nDESCRIPTION: Shows the default single-entry application directory structure with routes directory containing layout and page components.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/concept/entries.mdx#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\n.\n├── src\n│   └── routes\n│       ├── index.css\n│       ├── layout.tsx\n│       └── page.tsx\n├── package.json\n├── modern.config.ts\n└── tsconfig.json\n```\n\n----------------------------------------\n\nTITLE: HTML Image and Header Setup for Modern.js Logo\nDESCRIPTION: HTML markup for centering and displaying the Modern.js logo and main heading with associated styling.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/server/README.md#2025-04-21_snippet_0\n\nLANGUAGE: HTML\nCODE:\n```\n<p align=\"center\">\n  <a href=\"https://modernjs.dev\" target=\"blank\"><img src=\"https://lf3-static.bytednsdoc.com/obj/eden-cn/ylaelkeh7nuhfnuhf/modernjs-cover.png\" width=\"300\" alt=\"Modern.js Logo\" /></a>\n</p>\n\n<h1 align=\"center\">Modern.js</h1>\n\n<p align=\"center\">\n  A Progressive React Framework for modern web development.\n</p>\n```\n\n----------------------------------------\n\nTITLE: Resetting Node Modules\nDESCRIPTION: Command to clean all node_modules directories in the project. This can be helpful when you need a fresh installation of dependencies.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/community/contributing-guide.mdx#2025-04-21_snippet_11\n\nLANGUAGE: sh\nCODE:\n```\npnpm run reset\n```\n\n----------------------------------------\n\nTITLE: Pre-release Mode Commands Output\nDESCRIPTION: Example output when entering pre-release mode and running version bump commands.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/basic/publish-your-project.mdx#2025-04-21_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\n$ npx modern pre enter next\n🦋  success Entered pre mode with tag next\n🦋  info Run `changeset version` to version packages with prerelease versions\n✨  Done in 5.30s.\n\n$ npx modern bump\n🦋  warn ===============================IMPORTANT!===============================\n🦋  warn You are in prerelease mode\n🦋  warn If you meant to do a normal release you should revert these changes and run `changeset pre exit`\n🦋  warn You can then run `changeset version` again to do a normal release\n🦋  warn ----------------------------------------------------------------------\n🦋  All files have been updated. Review them and commit at your leisure\n```\n\n----------------------------------------\n\nTITLE: Runtime Plugin Communication Implementation in Version 2.57.0\nDESCRIPTION: This feature addition enables communication between Runtime plugins in the Modern.js framework, allowing plugins to interact with each other at runtime.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/toolkit/plugin/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\ndc736ef: feat: Support Runtime Plugin Communication\n\n  feat: 支持 Runtime 插件通信\n```\n\n----------------------------------------\n\nTITLE: Displaying Modern.js Logo in Markdown\nDESCRIPTION: This snippet shows how to display the Modern.js logo using Markdown syntax. It includes an image link with alignment and size specifications.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/runtime/plugin-runtime/README.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n<p align=\"center\">\n  <a href=\"https://modernjs.dev\" target=\"blank\"><img src=\"https://lf3-static.bytednsdoc.com/obj/eden-cn/ylaelkeh7nuhfnuhf/modernjs-cover.png\" width=\"300\" alt=\"Modern.js Logo\" /></a>\n</p>\n```\n\n----------------------------------------\n\nTITLE: Building Modern.js Package for Production\nDESCRIPTION: Command for building a Modern.js module for production deployment.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/prod-server/README.md#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\npnpm run build\n```\n\n----------------------------------------\n\nTITLE: Mocking Console Output in Modern.js Tests\nDESCRIPTION: Creates a mock implementation of console methods (log, info, error, warn) for testing purposes. It captures all console output and provides methods to access and clear the captured messages.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/components/faq-build-product.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport const mockConsole = () => {\n  const logs: string[] = [];\n  const errors: string[] = [];\n  const warnings: string[] = [];\n  const infos: string[] = [];\n\n  const originalLog = console.log;\n  const originalError = console.error;\n  const originalWarn = console.warn;\n  const originalInfo = console.info;\n\n  console.log = (...args: any[]) => {\n    logs.push(args.join(' '));\n  };\n\n  console.error = (...args: any[]) => {\n    errors.push(args.join(' '));\n  };\n\n  console.warn = (...args: any[]) => {\n    warnings.push(args.join(' '));\n  };\n\n  console.info = (...args: any[]) => {\n    infos.push(args.join(' '));\n  };\n\n  return {\n    logs,\n    errors,\n    warnings,\n    infos,\n    restore: () => {\n      console.log = originalLog;\n      console.error = originalError;\n      console.warn = originalWarn;\n      console.info = originalInfo;\n    },\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Defining External Dependencies Type in TypeScript\nDESCRIPTION: This code snippet defines the type for the output.externals configuration option. It can be a string, object, function, RegExp, or an array containing any of these types.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/externals.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype Externals =\n  | string\n  | object\n  | function\n  | RegExp\n  | Array<string | object | function | RegExp>;\n```\n\n----------------------------------------\n\nTITLE: Fixing Async Setup Function Execution Order in Version 2.35.1\nDESCRIPTION: This patch fixes an issue where asynchronous setup functions were not being executed in the correct order, ensuring proper plugin initialization sequence.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/toolkit/plugin/CHANGELOG.md#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n14f95cf: fix(plugin): run async setup function in the correct order\n\n  fix(plugin): 以正确的顺序执行异步的 setup 函数\n```\n\n----------------------------------------\n\nTITLE: Running Linter\nDESCRIPTION: Command to run ESLint on the codebase to check for code style issues and potential errors. This helps maintain code quality and consistency.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/community/contributing-guide.mdx#2025-04-21_snippet_16\n\nLANGUAGE: sh\nCODE:\n```\npnpm run lint\n```\n\n----------------------------------------\n\nTITLE: Rendering Internal Logger Component in MDX\nDESCRIPTION: JSX code to render the imported InternalLogger component, which likely displays information about Modern.js's built-in monitoring capabilities.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/server-monitor/logger.mdx#2025-04-21_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\n<InternalLogger />\n```\n\n----------------------------------------\n\nTITLE: Feature Addition Changelog Entry\nDESCRIPTION: Changelog entry documenting a minor feature change to use rsbuild instead of modern.js builder.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/cli/core/CHANGELOG.md#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n### Minor Changes\n\n- 40ee539: feat: use rsbuild(uni-builder) instead of modern.js builder\n\n  feat: 将应用工程的构建工具从 modern.js builder 切换为 rsbuild(uni-builder)\n```\n\n----------------------------------------\n\nTITLE: Exporting Merge Config Function in JavaScript\nDESCRIPTION: Exports the mergeConfig function from the app-tools package for external use.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/cli/core/CHANGELOG.md#2025-04-21_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nmergeConfig\n```\n\n----------------------------------------\n\nTITLE: Configuring package.json for npm-library-with-umd Preset\nDESCRIPTION: The package.json configuration for libraries using the npm-library-with-umd preset, which adds UMD bundle support through the unpkg field.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-preset.mdx#2025-04-21_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"main\": \"./dist/lib/index.js\",\n    \"module\": \"./dist/es/index.js\",\n    \"types\": \"./dist/types/index.d.ts\",\n    \"unpkg\": \"./dist/umd/index.js\"\n}\n```\n\n----------------------------------------\n\nTITLE: Building Modern.js App for Production\nDESCRIPTION: This command builds the Modern.js application for production deployment, optimizing and packaging the code.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/devtools/client/README.md#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\npnpm build\n```\n\n----------------------------------------\n\nTITLE: Custom Result Field State Interface\nDESCRIPTION: Demonstrates the state interface when customizing the result field name.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/model/handle-effect.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\ninterface State {\n  items: any; // Default result -> items\n  pending: boolean;\n  error: string;\n}\n```\n\n----------------------------------------\n\nTITLE: Default ts-loader Configuration in Modern.js\nDESCRIPTION: The default configuration object used for ts-loader in Modern.js projects. It sets the compiler options and enables transpileOnly and allowTsInNodeModules.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/ts-loader.mdx#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"compilerOptions\": {\n    \"target\": \"es5\",\n    \"module\": \"ESNext\"\n  },\n  \"transpileOnly\": true,\n  \"allowTsInNodeModules\": true\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Centered Description in Markdown\nDESCRIPTION: This snippet shows how to add a centered description of the project using HTML within a Markdown file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/toolkit/runtime-utils/README.md#2025-04-21_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n<p align=\"center\">\n  A Progressive React Framework for modern web development.\n</p>\n```\n\n----------------------------------------\n\nTITLE: Supporting unstable_getBlockNavState in JavaScript\nDESCRIPTION: Adds support for the unstable_getBlockNavState function.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/runtime/plugin-runtime/CHANGELOG.md#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nfeat: support unstable_getBlockNavState\n```\n\n----------------------------------------\n\nTITLE: Using modern dev command in Modern.js Module\nDESCRIPTION: The modern dev command provides the ability to use debugging tools. Note that no debugging-related plugins are provided by default, and officially supported debugging tool is Rspress.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/command-preview.md#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nUsage: modern dev [options]\n\nLocal development commands\n\nOptions:\n  -h, --help display help for command\n\nCommands:\n[dev-tools-subCommand]\n```\n\n----------------------------------------\n\nTITLE: Configuring npm Scripts with Pre and Post Hooks\nDESCRIPTION: Example of defining npm scripts in package.json, including pre and post hooks for a custom script. This demonstrates the execution order of npm scripts.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/before-getting-started.md#2025-04-21_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"premyscript\": \"\",\n    \"myscript\": \"\",\n    \"postmyscript\": \"\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Installing and Switching Node Versions using NVM\nDESCRIPTION: Commands to install Node.js v18, switch to it, and set it as the default version to improve build performance, especially for Apple Silicon devices.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/build-performance.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n# Install Node v18\nnvm install 18\n\n# switch to Node 18\nnvm use 18\n\n# Set Node 18 as the default version\nnvm default 18\n\n# View Node version\nnode -v\n```\n\n----------------------------------------\n\nTITLE: Importing Tailwind CSS in a React component\nDESCRIPTION: This snippet shows how to import Tailwind CSS stylesheets in a React component file to enable utility classes.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c03-css.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nimport 'tailwindcss/base.css';\nimport 'tailwindcss/components.css';\nimport 'tailwindcss/utilities.css';\n```\n\n----------------------------------------\n\nTITLE: Setting Repository-Specific Git Email\nDESCRIPTION: Command to set your email address for the local repository only, which is used for commit identification in this specific project.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/community/contributing-guide.mdx#2025-04-21_snippet_6\n\nLANGUAGE: sh\nCODE:\n```\ngit config user.email \"SOME_EMAIL@example.com\"\n```\n\n----------------------------------------\n\nTITLE: Generating Release Notes in Modern.js\nDESCRIPTION: The 'modern gen-release-note' command creates release notes based on changeset information in the repository, with options to specify repository name and customize generation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/basic/command-preview.md#2025-04-21_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\nUsage: modern gen-release-note [options]\n\n根据当前仓库 changeset 信息生成 Release Note\n\nOptions:\n  --repo <repo>      仓库名称，用于生成 Pull Request 链接， 例如： web-infra-dev/modern.js\n  --custom <cumtom>  自定义 Release Note 生成函数\n  -h, --help         display help for command\n```\n\n----------------------------------------\n\nTITLE: Configuring TypeScript Compiler Options for Modern.js\nDESCRIPTION: This snippet defines TypeScript compiler options for the Modern.js project. It specifies various settings for type checking, module resolution, and output generation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/solutions/app-tools/tests/analyze/fixtures/server-routes/has-config/config/public/wx.txt#2025-04-21_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"$schema\": \"https://json.schemastore.org/tsconfig\",\n  \"compilerOptions\": {\n    \"jsx\": \"preserve\",\n    \"strict\": true,\n    \"target\": \"ESNext\",\n    \"module\": \"ESNext\",\n    \"moduleResolution\": \"Bundler\",\n    \"skipLibCheck\": true,\n    \"isolatedModules\": true,\n    \"resolveJsonModule\": true,\n    \"noEmit\": true\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Updating distPath Source in JavaScript\nDESCRIPTION: Fix to retrieve distPath from output.distPath.root instead of the previous source.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/core/CHANGELOG.md#2025-04-21_snippet_6\n\nLANGUAGE: JavaScript\nCODE:\n```\ndistPath should from output.distPath.root\n```\n\n----------------------------------------\n\nTITLE: JSON Update Feature Addition\nDESCRIPTION: Added endWithNewLine parameter for JSON file updates in generator functionality\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/generator/generator-utils/CHANGELOG.md#2025-04-21_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n### Patch Changes\n\n- 65b2922: feat: generator update json add endWithNewLine params\n\n  feat: 生成器更新 json 文件增加 endWithNewLine 参数\n```\n\n----------------------------------------\n\nTITLE: Similar Issue with babel-plugin-import\nDESCRIPTION: Code example showing a similar 'undefined' issue that occurs when using babel-plugin-import with namespace imports.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/faq/build.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport * as Comps from 'components';\n\nexport const libs = {\n  comps: Comps,\n};\n```\n\n----------------------------------------\n\nTITLE: Problematic Type Import from Lodash in TypeScript\nDESCRIPTION: This code demonstrates the problematic way of importing both a function and a type from lodash, which will cause compilation errors in Modern.js due to babel-plugin-lodash.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/troubleshooting/builder.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport { debounce, DebouncedFunc } from 'lodash';\n```\n\n----------------------------------------\n\nTITLE: Importing RsbuildConfig Component in Markdown\nDESCRIPTION: This snippet imports a custom React component named RsbuildConfig from a specific path, likely used for rendering additional configuration information or tooltips in the documentation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/exclude.mdx#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\nimport RsbuildConig from '@site-docs-en/components/rsbuild-config-tooltip';\n\n<RsbuildConig />\n```\n\n----------------------------------------\n\nTITLE: Building Rslib Library in Watch Mode\nDESCRIPTION: This command builds the Rslib library in watch mode for development purposes, allowing for automatic rebuilds on file changes.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/runtime/plugin-image/README.md#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\npnpm dev\n```\n\n----------------------------------------\n\nTITLE: Version 2.67.2 Changelog Entry\nDESCRIPTION: Patch update documenting dependency updates for version 2.67.2\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/runtime/plugin-state/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n## 2.67.2\n\n### Patch Changes\n\n- Updated dependencies [8f97aae]\n  - @modern-js/runtime-utils@2.67.2\n  - @modern-js/runtime@2.67.2\n  - @modern-js/types@2.67.2\n  - @modern-js/utils@2.67.2\n```\n\n----------------------------------------\n\nTITLE: Basic package.json Structure for Dependencies\nDESCRIPTION: Shows the basic structure of package.json file with dependencies and devDependencies sections where third-party dependencies are listed after installation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/external-dependency.mdx#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"dependencies\": {},\n  \"devDependencies\": {}\n}\n```\n\n----------------------------------------\n\nTITLE: Modern.js Project Directory Structure\nDESCRIPTION: Shows the standard directory structure of a newly created Modern.js project. The structure includes configuration files, source code directory with routes, and package management files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/components/init-app.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n.\n├── node_modules\n├── src\n│   ├── modern-app-env.d.ts\n│   └── routes\n│       ├── index.css\n│       ├── layout.tsx\n│       └── page.tsx\n├── modern.config.ts\n├── package.json\n├── pnpm-lock.yaml\n├── README.md\n└── tsconfig.json\n```\n\n----------------------------------------\n\nTITLE: Using Environment Variables in Define Configuration\nDESCRIPTION: Demonstrates how to use environment variables in the define configuration for replacing values at build time.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_13\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport { defineConfig } from '@modern-js/module-tools';\nexport default defineConfig({\n  buildConfig: {\n    define: {\n      'process.env.VERSION': process.env.VERSION || '0.0.0',\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Customizing Modern.js Documentation Site Configuration\nDESCRIPTION: Example showing how to customize the documentation site configuration through the doc property of the Modern.js documentation plugin.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/use-module-doc.mdx#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\nimport { modulePluginDoc } from '@modern-js/plugin-rspress';\n\nexport default defineConfig({\n  plugins: [\n    moduleTools(),\n    modulePluginDoc({\n      doc: {\n        // Customize the documentation site configuration\n      }\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Setting Default Values for DisableSourceMap in TypeScript\nDESCRIPTION: Defines the default values for the 'disableSourceMap' option. JavaScript source maps are enabled by default, while CSS source maps are disabled in production mode.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/disable-source-map.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst defaultDisableSourceMap = {\n  js: false,\n  css: process.env.NODE_ENV === 'production',\n};\n```\n\n----------------------------------------\n\nTITLE: Required TypeScript Configuration Settings\nDESCRIPTION: Essential tsconfig.json compiler options for TypeScript projects including root directory specification, composite project support, and type declaration generation settings\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/tests/integration/source-code-build/components/readme.md#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"compilerOptions\": {\n    \"rootDir\": \"./src\",\n    \"composite\": true,\n    \"declaration\": true,\n    \"declarationDir\": \"./dist/types\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Fixing Bundle Require for ESM Packages with CJS Modules\nDESCRIPTION: Fix that enables bundle-require to support bundling ESM packages that contain CommonJS modules, implemented in version 2.25.0.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/toolkit/node-bundle-require/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n- dc81210: fix(bundle-require): bundle esm package with cjs modules\n\n  fix(bundle-require): 支持打包 esm package 包含 cjs 模块的情况\n```\n\n----------------------------------------\n\nTITLE: HTML Logo and Header Markup\nDESCRIPTION: HTML markup for displaying the Modern.js logo, title and description in a centered layout using paragraph and heading elements with alignment attributes.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/generator/generators/router-v5-generator/README.md#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<p align=\"center\">\n  <a href=\"https://modernjs.dev\" target=\"blank\"><img src=\"https://lf3-static.bytednsdoc.com/obj/eden-cn/ylaelkeh7nuhfnuhf/modernjs-cover.png\" width=\"300\" alt=\"Modern.js Logo\" /></a>\n</p>\n\n<h1 align=\"center\">Modern.js</h1>\n\n<p align=\"center\">\n  A Progressive React Framework for modern web development.\n</p>\n```\n\n----------------------------------------\n\nTITLE: Setting Target Platform in Modern.js\nDESCRIPTION: Demonstrates how to specify the target platform (browser or node) for code generation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_31\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    platform: 'browser',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Storybook Webpack in Modern.js Module\nDESCRIPTION: Example of how to configure Storybook's webpack in a Modern.js Module project. This allows customization of the webpack configuration for Storybook.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/dev.md#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    storybook: {\n      webpack(config) {\n        return config;\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Empty Markdown Heading Implementation\nDESCRIPTION: A standalone markdown heading symbol with no content, used to prevent automatic heading generation as described in the HTML comment above it.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/index.md#2025-04-21_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n#\n```\n\n----------------------------------------\n\nTITLE: HTML Logo and Header Setup\nDESCRIPTION: HTML markup for displaying the Modern.js logo and main project heading with centered alignment\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/solutions/app-tools/README.md#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<p align=\"center\">\n  <a href=\"https://modernjs.dev\" target=\"blank\"><img src=\"https://lf3-static.bytednsdoc.com/obj/eden-cn/ylaelkeh7nuhfnuhf/modernjs-cover.png\" width=\"300\" alt=\"Modern.js Logo\" /></a>\n</p>\n\n<h1 align=\"center\">Modern.js</h1>\n\n<p align=\"center\">\n  A Progressive React Framework for modern web development.\n</p>\n```\n\n----------------------------------------\n\nTITLE: Adding Missing Babel Preset Dependency\nDESCRIPTION: Fix for the missing babel-preset-app dependency in the testing plugin, resolving potential build issues.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/runtime/plugin-testing/CHANGELOG.md#2025-04-21_snippet_5\n\nLANGUAGE: markdown\nCODE:\n```\n- 7930b52: fix(plugin-testing): missing babel-preset-app dependency\n\n  fix(plugin-testing): 缺少 babel-preset-app 依赖\n```\n\n----------------------------------------\n\nTITLE: HTML Image and Text Formatting in Markdown\nDESCRIPTION: Markdown code for formatting the Modern.js logo, title and description with centered alignment using HTML tags.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/toolkit/utils/README.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n<p align=\"center\">\n  <a href=\"https://modernjs.dev\" target=\"blank\"><img src=\"https://lf3-static.bytednsdoc.com/obj/eden-cn/ylaelkeh7nuhfnuhf/modernjs-cover.png\" width=\"300\" alt=\"Modern.js Logo\" /></a>\n</p>\n\n<h1 align=\"center\">Modern.js</h1>\n\n<p align=\"center\">\n  A Progressive React Framework for modern web development.\n</p>\n```\n\n----------------------------------------\n\nTITLE: Adding Provenance to Publishing Configuration\nDESCRIPTION: Enhancement to add provenance configuration to the publishConfig settings, implemented in version 2.23.0.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/toolkit/node-bundle-require/CHANGELOG.md#2025-04-21_snippet_4\n\nLANGUAGE: markdown\nCODE:\n```\n- 7e6fb5f: chore: publishConfig add provenance config\n\n  chore: publishConfig 增加 provenance 配置\n```\n\n----------------------------------------\n\nTITLE: Defining Parse Tool Options Types in TypeScript\nDESCRIPTION: Type definitions for configuring options for different API parsing tools including react-docgen-typescript and documentation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/use-module-doc.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\ntype ParseToolOptions = {\n  // https://github.com/styleguidist/react-docgen-typescript#options\n  'react-docgen-typescript'?: ParserOptions;\n  // https://github.com/documentationjs/documentation/blob/master/docs/NODE_API.md#parameters-1\n  documentation?: DocumentationArgs;\n};\n```\n\n----------------------------------------\n\nTITLE: Updating to TypeScript v5 in Version 2.21.0\nDESCRIPTION: This update bumps the TypeScript version in devDependencies to v5, keeping the development environment up to date with the latest TypeScript features.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/toolkit/plugin/CHANGELOG.md#2025-04-21_snippet_4\n\nLANGUAGE: markdown\nCODE:\n```\n26dcf3a: chore: bump typescript to v5 in devDependencies\n\n  chore: 升级 devDependencies 中的 typescript 版本到 v5\n```\n\n----------------------------------------\n\nTITLE: Resulting Import After Transformation in TypeScript\nDESCRIPTION: Illustrates the result of applying the custom import configuration, where the import path is generated based on the member name.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/official/cli-plugins/plugin-swc.mdx#2025-04-21_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nimport Btn from 'foo/es/MyButton';\n```\n\n----------------------------------------\n\nTITLE: Updating ESBuild in JavaScript\nDESCRIPTION: Updates esbuild from version 15/16 to version 17.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/runtime/plugin-runtime/CHANGELOG.md#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nchore(deps): bump esbuild from v15/v16 to v17\n```\n\n----------------------------------------\n\nTITLE: Project Header Markup in HTML/Markdown\nDESCRIPTION: HTML and Markdown markup for the project header section including logo image, title and description.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/devtools/kit/README.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n<p align=\"center\">\n  <a href=\"https://modernjs.dev\" target=\"blank\"><img src=\"https://lf3-static.bytednsdoc.com/obj/eden-cn/ylaelkeh7nuhf/modernjs-cover.png\" width=\"300\" alt=\"Modern.js Logo\" /></a>\n</p>\n\n<h1 align=\"center\">Modern.js</h1>\n\n<p align=\"center\">\n  A Progressive React Framework for modern web development.\n</p>\n```\n\n----------------------------------------\n\nTITLE: Setting Environment Variables for Modern.js Tests\nDESCRIPTION: Sets the necessary environment variables for running Modern.js integration tests, including paths to node_modules and indicating test mode. This ensures that tests run in a controlled environment with the right context.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/components/faq-build-product.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nprocess.env.NODE_ENV = 'test';\nprocess.env.MODERNJS_TEST = 'true';\nprocess.env.IS_MODERN_JS_DIST = 'true';\n```\n\n----------------------------------------\n\nTITLE: Using Modern Inspect Command Options\nDESCRIPTION: The modern inspect command views Rsbuild config and webpack/Rspack config, with options for environment, output path, and verbosity.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/commands.mdx#2025-04-21_snippet_10\n\nLANGUAGE: bash\nCODE:\n```\nUsage: modern inspect [options]\n\nOptions:\n  --env <env>           view the configuration in the target environment (default: \"development\")\n  --output <output>     Specify the path to output in the dist (default: \"./\")\n  --verbose             Show the full function in the result\n  -c --config <config>  specify the configuration file, which can be a relative or absolute path\n  -h, --help            show command help\n```\n\n----------------------------------------\n\nTITLE: Importing hook API from Modern.js Runtime\nDESCRIPTION: Shows how to import the hook API from the Modern.js runtime, using a namespace placeholder for framework-specific imports.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/bff/hook.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { hook } from '@modern-js/runtime/{namespace}';\n```\n\n----------------------------------------\n\nTITLE: Defining ESM-CJS Interoperability Configuration Type in TypeScript\nDESCRIPTION: Defines TypeScript interface for ESM-CJS interoperability configuration with options for extension combinations, external module handling, and import statement resolution in CommonJS files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/tests/integration/module/fixtures/build/copy/src/test.txt#2025-04-21_snippet_0\n\nLANGUAGE: TypeScript\nCODE:\n```\nexport interface ESMCJSInteropConfig {\n  /**\n   * Specify the valid ESM extensions.\n   * Files with this extension will be resolved according to ESM resolution algorithm.\n   * Default: ['.js', '.mjs']\n   */\n  esmExtensions?: string[];\n\n  /**\n   * Allow ES Modules to require CommonJS modules.\n   * When it's true, the import statement in an ES Module will be transformed to require.\n   * Default: true\n   */\n  externalESMImportCJS?: boolean;\n\n  /**\n   * Controls how to handle import statements in CommonJS files.\n   * Valid values:\n   * - 'swc': Transform dynamic import with SWC plugins.\n   * - 'node': Rely on Node.js native support for dynamic import in CJS files.\n   * - false: Throw an error when detecting import statements in CJS files.\n   */\n  dynamicImportInCJS?: 'swc' | 'node' | false;\n\n  /**\n   * A list of external packages that should be treated as ES modules.\n   * This is useful when these packages have incorrect or missing \"type\" field in their package.json,\n   * resulting in incorrect resolution.\n   * For example, when importing `import foo from 'foo'`,\n   * if this array includes `foo`, then it will be resolved as an ESM.\n   */\n  externalEsm?: (string | RegExp)[];\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Locale Detection Order in Modern.js i18n\nDESCRIPTION: Example demonstrating how to configure the order of locale detection methods in Modern.js i18n system.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/tests/integration/bff-hono/CHANGELOG.md#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  i18n: {\n    // Configuring the detection order of locales\n    // Supported detection sources: cookie, sessionStorage, localStorage, navigator, htmlTag, path, subdomain\n    detection: {\n      order: ['cookie', 'localStorage', 'navigator', 'htmlTag', 'path', 'subdomain'],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using Extended Jest Matchers in modern.js\nDESCRIPTION: This snippet demonstrates how to use extended matchers provided by modern.js for Jest testing. It shows how to access custom matchers like toMatchSnapshot and toMatchInlineSnapshot with additional options.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/components/convention-routing-motivation.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexpect(foo).toMatchSnapshot();\n\n// with property matchers\nexpect(foo).toMatchSnapshot({\n  createdAt: expect.any(Date),\n  id: expect.any(Number),\n});\n\n// with a name\nexpect(foo).toMatchSnapshot('name');\n\n// with property matchers and a name\nexpect(foo).toMatchSnapshot(\n  {\n    createdAt: expect.any(Date),\n    id: expect.any(Number),\n  },\n  'name',\n);\n```\n\n----------------------------------------\n\nTITLE: Exporting Components Library in TypeScript\nDESCRIPTION: Demonstrates a similar issue with babel-plugin-import when exporting a components library, which may result in undefined exports.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/faq/build.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport * as Comps from 'components';\n\nexport const libs = {\n  comps: Comps,\n};\n```\n\n----------------------------------------\n\nTITLE: Rendering Showcase List Component in JSX\nDESCRIPTION: Imports and renders a ShowcaseList component to display Modern.js website examples. The component is imported from the site's components directory.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/community/showcase.mdx#2025-04-21_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { ShowcaseList } from '@site/src/components/ShowcaseList';\n\n<ShowcaseList />\n```\n\n----------------------------------------\n\nTITLE: Version 2.40.0 Update\nDESCRIPTION: Removal of ajv schema verification and fixes for subdirectory detection and layout component handling.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/solutions/app-tools/CHANGELOG.md#2025-04-21_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\n- chore: remove ajv schema verification of configuration\n- fix: startsWith cannot determine subdirectories correctly\n- fix: Even if the page component exists, we should not create the empty layout component\n```\n\n----------------------------------------\n\nTITLE: Modern.js Generator Changelog Entry\nDESCRIPTION: A markdown formatted changelog documenting version changes and updates for Modern.js generator packages, including dependency changes, bug fixes, and new features.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/generator/new-action/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n### Patch Changes\n\n- 4a5214db: fix: generator plugin error\n- Updated dependencies [4a5214db]\n  - @modern-js/generator-common@1.2.1\n  - @modern-js/generator-plugin@1.1.2\n\n## 1.2.0\n\n### Minor Changes\n\n- e12b3d0b: feat: support generator plugin\n\n### Patch Changes\n\n- e12b3d0b: feat: upgrade codesmith version\n- Updated dependencies [e12b3d0b]\n  - @modern-js/generator-common@1.2.0\n  - @modern-js/generator-plugin@1.1.0\n```\n\n----------------------------------------\n\nTITLE: Compilation Error from Lodash Type Import\nDESCRIPTION: The error message thrown by Modern.js when attempting to import a type from lodash using the standard import syntax. The error occurs because babel-plugin-lodash can't distinguish between values and types.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/troubleshooting/builder.mdx#2025-04-21_snippet_8\n\nLANGUAGE: bash\nCODE:\n```\nSyntax error: /project/src/index.ts: The lodash method `DebouncedFunc` is not a known module.\nPlease report bugs to https://github.com/lodash/babel-plugin-lodash/issues.\n```\n\n----------------------------------------\n\nTITLE: Building a Package with Filter Option\nDESCRIPTION: Command to build a specific package from the root directory of the monorepo using pnpm's filter option to target a specific package.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/community/contributing-guide.mdx#2025-04-21_snippet_9\n\nLANGUAGE: sh\nCODE:\n```\npnpm run --filter @modern-js/some-package build\n```\n\n----------------------------------------\n\nTITLE: Executing modern pre command for pre-release mode\nDESCRIPTION: This snippet shows the execution of the 'modern pre enter' command to enter pre-release mode with a specified tag.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/publish-your-project.mdx#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n$ npx modern pre enter next\n🦋 success Entered pre mode with tag next\n🦋 info Run `changeset version` to version packages with prerelease versions\n✨ Done in 5.30s.\nDone in 5.30s.\n```\n\n----------------------------------------\n\nTITLE: Markdown Changelog Entry\nDESCRIPTION: Release changelog formatted in markdown showing version updates and dependency changes\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/plugin-server/CHANGELOG.md#2025-04-21_snippet_9\n\nLANGUAGE: markdown\nCODE:\n```\n### Patch Changes\n\n- @modern-js/server-utils@2.9.0\n- @modern-js/utils@2.9.0\n```\n\n----------------------------------------\n\nTITLE: Configuring Vercel Deployment for Pure Front-end Project\nDESCRIPTION: JSON configuration for vercel.json to set up deployment settings for a pure front-end Modern.js project on Vercel.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/deploy.mdx#2025-04-21_snippet_8\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"buildCommand\": \"modern deploy\",\n  \"outputDirectory\": \".vercel/output\"\n}\n```\n\n----------------------------------------\n\nTITLE: Example of babel-plugin-lodash Issue with Namespace Import\nDESCRIPTION: Code example demonstrating the import pattern that causes the 'undefined' issue when using babel-plugin-lodash with namespace imports.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/faq/build.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport * as Lodash from 'lodash';\n\nexport const libs = {\n  _: Lodash,\n};\n```\n\n----------------------------------------\n\nTITLE: Default Browserslist Configuration\nDESCRIPTION: Default Browserslist configuration used by Modern.js for browser compatibility.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/page-performance/optimize-bundle.mdx#2025-04-21_snippet_4\n\nLANGUAGE: js\nCODE:\n```\n['> 0.01%', 'not dead', 'not op_mini all']\n```\n\n----------------------------------------\n\nTITLE: Customizing esbuild Options in Modern.js Module\nDESCRIPTION: Modifies the underlying esbuild configuration by providing a function that receives and returns the esbuild options object. This example changes the output file extension.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_20\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    esbuildOptions: options => {\n      options.outExtension = { '.js': '.mjs' };\n      return options;\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Required TypeScript Configuration Options in tsconfig.json\nDESCRIPTION: Essential configuration options that must be included in the tsconfig.json file for Modern.js projects using TypeScript. These settings ensure proper compilation, type declaration generation, and project organization.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/tests/integration/source-code-build/utils/readme.md#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"compilerOptions\": {\n    \"rootDir\": \"./src\",\n    \"composite\": true,\n    \"declaration\": true,\n    \"declarationDir\": \"./dist/types\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Displaying Contributors Image in JSX\nDESCRIPTION: Renders a linked image showing all contributors to the Modern.js project from OpenCollective\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/community/team.mdx#2025-04-21_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n<a\n  href=\"https://github.com/web-infra-dev/modern.js/graphs/contributors\"\n  style={{ display: 'block', marginTop: 24 }}\n>\n  <img\n    src=\"https://opencollective.com/modernjs/contributors.svg?width=890&button=false\"\n    alt=\"contributors\"\n  />\n</a>\n```\n\n----------------------------------------\n\nTITLE: Examples of Various Commit Message Types with Scopes in Modern.js\nDESCRIPTION: Multiple examples of properly formatted commit messages showing different types and scopes that can be used in the Modern.js repository. Each example demonstrates the correct format for different contribution scenarios.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/utils/tests/fixtures/ts-example/server/foo.md#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nfeat(compiler): add 'comments' option\nfix(compiler): fix some bug\ndocs(compiler): add some docs\n```\n\n----------------------------------------\n\nTITLE: Running Tests in Modern.js Package\nDESCRIPTION: Command for executing test cases in a Modern.js module.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/prod-server/README.md#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\npnpm run test\n```\n\n----------------------------------------\n\nTITLE: Configuring Node Polyfill Plugin in Modern.js Module\nDESCRIPTION: Example configuration for integrating the Node polyfill plugin into a Modern.js Module project. This code imports necessary dependencies and configures the plugin in the module configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/module/plugin-module-node-polyfill/README.md#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\nimport { modulePluginNodePolyfill } from '@modern-js/plugin-module-node-polyfill';\n\nexport default defineConfig({\n  plugins: [\n    moduleTools(),\n    modulePluginNodePolyfill(),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Defining PrintFileSizeOptions Type in TypeScript\nDESCRIPTION: TypeScript type definition for the printFileSize configuration option. It can be either a boolean or an object with options to control display of total size, detailed sizes, and compressed sizes.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/performance/print-file-size.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype PrintFileSizeOptions =\n  | {\n      /**\n       * 是否输出所有静态资源文件的总体积\n       */\n      total?: boolean;\n      /**\n       * 是否输出每个静态资源文件的体积\n       */\n      detail?: boolean;\n      /**\n       * 是否输出 gzip 压缩后的体积\n       */\n      compressed?: boolean;\n    }\n  | boolean;\n```\n\n----------------------------------------\n\nTITLE: Fixing Path Issue in BFF Package.json Generation\nDESCRIPTION: Bug fix addressing a path-related issue when generating package.json attributes for BFF functionality. This fix was included in version 2.65.0.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/cli/plugin-bff/CHANGELOG.md#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n- b854d7b: fix(bff): fixed path issue of generating package.json attribute\n  fix(bff): 修复生成 package.json 属性的路径问题\n```\n\n----------------------------------------\n\nTITLE: Importing from compiled directory\nDESCRIPTION: Example showing how to update import statements to use prebundled dependencies from the compiled directory instead of directly importing from the original package.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/scripts/prebundle/README.md#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\n// Old\nimport foo from 'foo';\n\n// New\nimport foo from '../compiled/foo';\n```\n\n----------------------------------------\n\nTITLE: Simplified Lazy Compilation Configuration\nDESCRIPTION: Shorthand configuration to enable lazy compilation for both entries and imports using a boolean value.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/experiments/lazy-compilation.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  experiments: {\n    lazyCompilation: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Centered Heading and Description in Markdown\nDESCRIPTION: This snippet demonstrates how to create a centered heading and description for the project using HTML within a Markdown file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/cli/plugin-i18n/README.md#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n<h1 align=\"center\">Modern.js</h1>\n\n<p align=\"center\">\n  A Progressive React Framework for modern web development.\n</p>\n```\n\n----------------------------------------\n\nTITLE: Implementing Before Exit Hook in JavaScript\nDESCRIPTION: Changes the beforeExit hook to use a synchronous workflow instead of an asynchronous one.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/cli/core/CHANGELOG.md#2025-04-21_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\nbeforeExit\n```\n\n----------------------------------------\n\nTITLE: Centering Paragraph in Markdown\nDESCRIPTION: This code shows how to center a paragraph in Markdown using HTML tags. It's used to display a brief description of Modern.js as a Progressive React Framework.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/create-request/README.md#2025-04-21_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n<p align=\"center\">\n  A Progressive React Framework for modern web development.\n</p>\n```\n\n----------------------------------------\n\nTITLE: Upgrading to TypeScript 5 in Development Dependencies\nDESCRIPTION: Dependency update that bumps TypeScript to version 5 in the devDependencies, implemented in version 2.21.0.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/toolkit/node-bundle-require/CHANGELOG.md#2025-04-21_snippet_5\n\nLANGUAGE: markdown\nCODE:\n```\n- 26dcf3a: chore: bump typescript to v5 in devDependencies\n\n  chore: 升级 devDependencies 中的 typescript 版本到 v5\n```\n\n----------------------------------------\n\nTITLE: Version Update Log Entry\nDESCRIPTION: Example changelog entry showing bug fix for Windows path handling in transformLodash\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/cli/uni-builder/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n### Patch Changes\n\n- 49bedb9: fix: should not escape windows path when use transformLodash\n- Updated dependencies [0d47cb8]\n  - @modern-js/utils@2.65.4\n  - @modern-js/babel-preset@2.65.4\n  - @modern-js/flight-server-transform-plugin@2.65.4\n```\n\n----------------------------------------\n\nTITLE: Adding new server plugin and reducing hooks in Modern.js\nDESCRIPTION: A minor change that introduces a new server plugin architecture while removing some previously available hooks, streamlining the server plugin system.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/plugin-server/CHANGELOG.md#2025-04-21_snippet_6\n\nLANGUAGE: markdown\nCODE:\n```\n- a8d8f0c: feat: support new server plugin & discard server plugin some hooks\n  feat: 支持新 server plugin & 减少 server plugin 钩子\n```\n\n----------------------------------------\n\nTITLE: Importing styled-components in Modern.js\nDESCRIPTION: This snippet shows how to import the styled-components library in a Modern.js project. Modern.js supports styled-components out of the box without additional configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c03-css.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport styled from '@modern-js/runtime/styled';\n```\n\n----------------------------------------\n\nTITLE: Runtime Utils Package Split Changelog Entry\nDESCRIPTION: Changelog entry noting the refactoring of runtime utils into a separate package\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/create-request/CHANGELOG.md#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n### Patch Changes\n\n- 6a1d46e: refactor: split runtime utils into a seperate package\n  refactor: runtime utils 单独拆分成一个包\n- Updated dependencies [ea3fe18]\n- Updated dependencies [9dd3151]\n- Updated dependencies [4980480]\n- Updated dependencies [6a1d46e]\n  - @modern-js/utils@2.35.1\n  - @modern-js/runtime-utils@2.35.1\n```\n\n----------------------------------------\n\nTITLE: HTML Repository Header with Logo\nDESCRIPTION: HTML markup for the repository header section containing the Modern.js logo and title with centered alignment.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/cli/babel-preset/README.md#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<p align=\"center\">\n  <a href=\"https://modernjs.dev\" target=\"blank\"><img src=\"https://lf3-static.bytednsdoc.com/obj/eden-cn/ylaelkeh7nuhfnuhf/modernjs-cover.png\" width=\"300\" alt=\"Modern.js Logo\" /></a>\n</p>\n\n<h1 align=\"center\">Modern.js</h1>\n\n<p align=\"center\">\n  A Progressive React Framework for modern web development.\n</p>\n```\n\n----------------------------------------\n\nTITLE: Using Production Mode Detection in Webpack Config\nDESCRIPTION: Example demonstrating how to use the isProd parameter to apply production-specific configurations.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/webpack.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    webpack: (config, { isProd }) => {\n      if (isProd) {\n        config.devtool = 'source-map';\n      }\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: GitHub Actions Workflow Configuration for Modern.js Projects\nDESCRIPTION: A complete CI/CD workflow configuration that runs on push and pull request events. It sets up Node.js environments, installs dependencies, checks code formatting, runs tests, and deploys to GitHub Pages when changes are pushed to the main branch.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/components/faq-build-other.mdx#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nname: Modern.js CI\n\non:\n  push:\n    branches: [main]\n  pull_request:\n    branches: [main]\n\njobs:\n  lint:\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        node-version: [14.x]\n\n    steps:\n      - uses: actions/checkout@v3\n      - name: Use Node.js ${{ matrix.node-version }}\n        uses: actions/setup-node@v3\n        with:\n          node-version: ${{ matrix.node-version }}\n          cache: 'pnpm'\n      - name: Install dependencies\n        run: pnpm install\n      - name: Lint\n        run: pnpm run lint\n\n  test:\n    runs-on: ${{ matrix.os }}\n    strategy:\n      matrix:\n        node-version: [14.x, 16.x]\n        os: [ubuntu-latest, windows-latest, macos-latest]\n\n    steps:\n      - uses: actions/checkout@v3\n      - name: Use Node.js ${{ matrix.node-version }}\n        uses: actions/setup-node@v3\n        with:\n          node-version: ${{ matrix.node-version }}\n          cache: 'pnpm'\n      - name: Install dependencies\n        run: pnpm install\n      - name: Build\n        run: pnpm run build\n      - name: Test\n        run: pnpm run test\n\n  deploy:\n    runs-on: ubuntu-latest\n    needs: [test, lint]\n    if: github.event_name == 'push' && github.ref == 'refs/heads/main'\n    steps:\n      - uses: actions/checkout@v3\n      - name: Use Node.js\n        uses: actions/setup-node@v3\n        with:\n          node-version: '16.x'\n          cache: 'pnpm'\n      - name: Install dependencies\n        run: pnpm install\n      - name: Build website\n        run: pnpm run build:site\n      - name: Deploy to GitHub Pages\n        uses: peaceiris/actions-gh-pages@v3\n        with:\n          github_token: ${{ secrets.GITHUB_TOKEN }}\n          publish_dir: ./dist\n```\n\n----------------------------------------\n\nTITLE: Configuring Package.json for TypeScript Type Definitions\nDESCRIPTION: Package.json configuration to handle TypeScript type definitions properly during development with pnpm, pointing to source files during development and compiled files when publishing.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/basic/using-storybook.mdx#2025-04-21_snippet_3\n\nLANGUAGE: ts\nCODE:\n```\n{\n    \"name\": \"foo\",\n    \"main\": \"./dist/index.js\",\n    \"types\": \"./src/index.ts\",\n    \"publishConfig\": {\n      \"types\": \"./dist/index.d.ts\",\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Enabling/Disabling Debug Mode in Modern.js i18n\nDESCRIPTION: Example showing how to enable debug mode for i18n in Modern.js, which outputs debug information to the console.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/tests/integration/bff-hono/CHANGELOG.md#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  i18n: {\n    // Enable debug mode, will output debug information to the console\n    debug: true, // Default is false\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing External ESM Package Detection in TypeScript\nDESCRIPTION: Function that determines if an external package should be treated as an ESM module based on package name and configuration patterns. Supports both string and RegExp patterns.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/tests/integration/module/fixtures/build/copy/src/test.txt#2025-04-21_snippet_2\n\nLANGUAGE: TypeScript\nCODE:\n```\n/**\n * Checks if an external package is an ESM module.\n */\nexport function isExternalESM(\n  id: string,\n  externalEsm: (string | RegExp)[] = [],\n): boolean {\n  return externalEsm.some(pattern => {\n    if (typeof pattern === 'string') {\n      return id === pattern || id.startsWith(`${pattern}/`);\n    }\n    return pattern.test(id);\n  });\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Deployment Platform Environment Variable in Modern.js\nDESCRIPTION: Command to specify the deployment platform using an environment variable when running the 'modern deploy' command.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/deploy.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nMODERNJS_DEPLOY=netlify npx modern deploy\n```\n\n----------------------------------------\n\nTITLE: Compiled Code with useDefineForClassFields set to false\nDESCRIPTION: The compiled JavaScript output when useDefineForClassFields is set to false in TypeScript configuration, showing direct property assignment in the constructor.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/faq/build.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nclass C {\n  constructor() {\n    this.foo = 100;\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Defining script command in package.json\nDESCRIPTION: Example package.json configuration that defines a 'command' script that runs 'modern command'. This is used to illustrate how parameters are passed differently in pnpm v6 and v7.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/troubleshooting/cli.mdx#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"command\": \"modern command\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Fixing Proxy Server Recreation\nDESCRIPTION: Fix to prevent unnecessary recreation of proxy servers when they already exist, improving performance and stability.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/runtime/plugin-testing/CHANGELOG.md#2025-04-21_snippet_4\n\nLANGUAGE: markdown\nCODE:\n```\n- 5424051: fix: the proxy should not recreated when exists\n  fix: proxy server 不应该被重新创建当存在时\n```\n\n----------------------------------------\n\nTITLE: Updating Dependencies in package.json\nDESCRIPTION: This snippet shows an update to the dependencies section in package.json, adding @swc/helpers and enabling the externalHelpers config while removing @babel/runtime.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/cli/plugin-bff/CHANGELOG.md#2025-04-21_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n\"dependencies\": {\n  \"@swc/helpers\": \"^0.5.0\"\n},\n\"swc\": {\n  \"externalHelpers\": true\n}\n```\n\n----------------------------------------\n\nTITLE: Error Message - React DOM Module Not Found\nDESCRIPTION: Example of error message when react-dom module is missing from the project dependencies.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/faq/storybook.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nERR! Error: Cannot find module 'react-dom/package.json'\n```\n\n----------------------------------------\n\nTITLE: Removing Unused CSS File in Modern.js Project\nDESCRIPTION: This bash command removes the unused index.css file from the src/routes directory in the Modern.js project.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c01-start.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nrm src/routes/index.css\n```\n\n----------------------------------------\n\nTITLE: Importing Loadable from Modern.js Runtime in TypeScript\nDESCRIPTION: Shows how to import the loadable function from Modern.js runtime.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/utility/loadable.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport loadable from '@modern-js/runtime/loadable';\n```\n\n----------------------------------------\n\nTITLE: Importing RsbuildConfig Component in JSX\nDESCRIPTION: This snippet imports a custom React component named RsbuildConfig from a specific path. The component is likely used to display a tooltip or additional information about Rsbuild configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/filename-hash.mdx#2025-04-21_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport RsbuildConig from '@site-docs-en/components/rsbuild-config-tooltip';\n```\n\n----------------------------------------\n\nTITLE: Modern.js Version Control Markdown\nDESCRIPTION: Changelog entries for Modern.js project detailing version changes, feature additions, bug fixes and dependency updates across multiple versions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/solutions/app-tools/CHANGELOG.md#2025-04-21_snippet_5\n\nLANGUAGE: markdown\nCODE:\n```\n### Patch Changes\n\n- 89ca6cc: refactor: merge build-config into scripts/build\n\n  refactor: 把 build-config 合并进 scripts/build\n\n- 7cb8bb4: fix: use a more correctly params to cal document file\n\n  fix: 使用更准确的参数去获取 docuemnt 文件\n\n- 30614fa: chore: modify package.json entry fields and build config\n  chore: 更改 package.json entry 字段以及构建配置\n- 97cc2d0: feat: pass origin bootstrap function to custom render\n  feat: 自定义渲染中传入原始 bootstrap 函数\n- 840142c: fix: the `@modern-js/app-tools` hooks should set `webpack` as default type.\n  fix: `@modern-js/app-tools` hooks 应该将 'webpack' 设置为默认类型\n- 11c053b: feat: ssr support deploy worker\n\n  feat: ssr 支持边缘部署\n```\n\n----------------------------------------\n\nTITLE: Project Header HTML Structure\nDESCRIPTION: HTML markup for the project logo and header section, including centered alignment and image display.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/bff-core/README.md#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<p align=\"center\">\n  <a href=\"https://modernjs.dev\" target=\"blank\"><img src=\"https://lf3-static.bytednsdoc.com/obj/eden-cn/ylaelkeh7nuhfnuhf/modernjs-cover.png\" width=\"300\" alt=\"Modern.js Logo\" /></a>\n</p>\n\n<h1 align=\"center\">Modern.js</h1>\n\n<p align=\"center\">\n  A Progressive React Framework for modern web development.\n</p>\n```\n\n----------------------------------------\n\nTITLE: Changelog File Content Example\nDESCRIPTION: Example content of the CHANGELOG.md file generated after version updates.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/basic/publish-your-project.mdx#2025-04-21_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n# module\n\n## 0.1.1\n\n### Patch Changes\n\n- publish test\n```\n\n----------------------------------------\n\nTITLE: Customizing Implicit JavaScript Extensions in Modern.js Module\nDESCRIPTION: Defines which file extensions can be omitted in import statements. This example configures the resolver to support .mts and .ts extensions without explicitly mentioning them in imports.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_39\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    resolve: {\n      jsExtentions: ['.mts', 'ts'],\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Supporting unstable middleware hot reload in Modern.js\nDESCRIPTION: A fix that enables hot reloading for unstable middleware, allowing developers to see changes to middleware without restarting the server.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/plugin-server/CHANGELOG.md#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n- fccc80d: fix: support unstable middleware hot reload\n  fix: 支持 unstable middleware 热更新\n```\n\n----------------------------------------\n\nTITLE: Fixing Jest Unexpected Token Error\nDESCRIPTION: Fix for Jest unexpected token error when processing @modern-js/runtime files during testing.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/runtime/plugin-testing/CHANGELOG.md#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n- dda37bf: fix: jest unexpected token error for @modern-js/runtime\n  fix: 修复 Jest 对于 @modern-js/runtime 出现 unexpected token 的错误\n```\n\n----------------------------------------\n\nTITLE: Formatting Example for Branch Names in Modern.js Repository\nDESCRIPTION: Example demonstrating the correct format for branch names in the Modern.js repository. It follows the pattern of username/type-scope-subject to clearly identify the purpose and owner of each branch.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/utils/tests/fixtures/ts-example/server/foo.md#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nusername/type-scope-subject\n```\n\n----------------------------------------\n\nTITLE: Version 2.67.2 Changelog Entry\nDESCRIPTION: Documents a change to use English as the default language for documentation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: Markdown\nCODE:\n```\n## 2.67.2\n\n### Patch Changes\n\n- 26880ca: docs: use en as the default lang of document\n  docs: 使用英文作为默认的文档语言\n  - @modern-js/sandpack-react@2.67.2\n```\n\n----------------------------------------\n\nTITLE: Installing Faker Dependencies for Data Mocking in Modern.js\nDESCRIPTION: This snippet shows the commands to install Faker and its TypeScript types for mocking data in a Modern.js project.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/tutorials/first-app/c05-loader.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\npnpm add faker@5\npnpm add @types/faker@5 -D\n```\n\n----------------------------------------\n\nTITLE: Default CSS Minification Configuration in Modern.js\nDESCRIPTION: The default configuration for CSS minification in Modern.js. It uses the 'default' preset with mergeLonghand disabled.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/minify-css.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultOptions = {\n  minimizerOptions: {\n    preset: [\n      'default',\n      {\n        mergeLonghand: false,\n      },\n    ],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Custom Load Hook Implementation in Modern.js Module\nDESCRIPTION: Example of implementing a load hook that reads module content from an in-memory filesystem during the build process.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/in-depth-about-build.md#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\ncompiler.hooks.load.tapPromise('load content from memfs', async args => {\n  const contents = memfs.readFileSync(args.path);\n  return {\n    contents: contents,\n    loader: 'js',\n  };\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring externals for dependencies\nDESCRIPTION: Example of configuring externals option for a dependency, which specifies modules to leave as requires in the build rather than bundling them.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/scripts/prebundle/README.md#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\ndependencies: [\n  {\n    name: 'foo',\n    externals: {\n      webpack: '../webpack',\n    },\n  },\n];\n```\n\n----------------------------------------\n\nTITLE: Running prebundle command for a single dependency\nDESCRIPTION: Command to prebundle a specific dependency by providing its package name as an argument, with an example for prebundling the commander package.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/scripts/prebundle/README.md#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\npnpm start <pkgName>\n\n# For example, prebundle commander\npnpm start commander\n```\n\n----------------------------------------\n\nTITLE: Centered HTML Heading for Modern.js\nDESCRIPTION: HTML markup for displaying the centered main heading of the project\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/generator/sandpack-react/README.md#2025-04-21_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<h1 align=\"center\">Modern.js</h1>\n```\n\n----------------------------------------\n\nTITLE: Displaying Modern.js Logo and Badges in Markdown\nDESCRIPTION: This snippet shows how to display the Modern.js logo, project title, and various badges (npm version, downloads, license) using Markdown and HTML. It includes centered alignment and links to relevant resources.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/README.md#2025-04-21_snippet_0\n\nLANGUAGE: Markdown\nCODE:\n```\n<p align=\"center\">\n  <a href=\"https://modernjs.dev\" target=\"blank\"><img src=\"https://lf3-static.bytednsdoc.com/obj/eden-cn/ylaelkeh7nuhfnuhf/modernjs-cover.png\" width=\"260\" alt=\"Modern.js Logo\" /></a>\n</p>\n\n<h1 align=\"center\">Modern.js</h1>\n\n<p align=\"center\">\n  Inspire creativity in modern web development.\n</p>\n\n<p align=\"center\">\n  <a href=\"https://www.npmjs.com/package/@modern-js/core\"><img src=\"https://img.shields.io/npm/v/@modern-js/core?style=flat-square&color=00a8f0\" alt=\"npm version\" /></a>\n  <a href=\"https://npm-compare.com/@modern-js/core/#timeRange=THREE_YEARS\"><img src=\"https://img.shields.io/npm/dm/@modern-js/core.svg?style=flat-square&color=00a8f0\" alt=\"downloads\" /></a>\n  <a href=\"https://github.com/web-infra-dev/modern.js/blob/main/LICENSE\"><img src=\"https://img.shields.io/badge/License-MIT-blue.svg?style=flat-square&color=00a8f0\" alt=\"License\" /></a>\n</p>\n```\n\n----------------------------------------\n\nTITLE: Modern.js Version 2.0.0 Changelog Entry\nDESCRIPTION: Lists the patch changes including nested routes support and dependency updates for Modern.js version 2.0.0.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/cli/core/CHANGELOG.md#2025-04-21_snippet_12\n\nLANGUAGE: markdown\nCODE:\n```\n### Patch Changes\n\n- 8b8e1bb571: feat: support nested routes\n  feat: 支持嵌套路由\n- Updated dependencies [edd1cfb1af]\n- Updated dependencies [dda38c9c3e]\n- Updated dependencies [ffb2ed4]\n- Updated dependencies [bbe4c4ab64]\n  - @modern-js/utils@2.0.0\n  - @modern-js/node-bundle-require@2.0.0\n  - @modern-js/plugin@2.0.0\n```\n\n----------------------------------------\n\nTITLE: Configuring ESLint Rules for Modern.js\nDESCRIPTION: This snippet defines ESLint rules for the Modern.js project. It extends from multiple configurations and specifies custom rules for code quality and consistency.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/solutions/app-tools/tests/analyze/fixtures/server-routes/has-config/config/public/wx.txt#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"$schema\": \"https://json.schemastore.org/eslintrc\",\n  \"extends\": [\n    \"@modern-js\",\n    \"@modern-js-app\",\n    \"prettier\"\n  ],\n  \"parserOptions\": {\n    \"project\": [\n      \"./tsconfig.json\"\n    ]\n  },\n  \"rules\": {\n    \"import/no-named-as-default\": \"off\",\n    \"import/no-named-as-default-member\": \"off\",\n    \"@typescript-eslint/no-non-null-assertion\": \"off\",\n    \"@typescript-eslint/consistent-type-imports\": [\n      \"error\",\n      {\n        \"disallowTypeAnnotations\": false\n      }\n    ]\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Package Configuration Update\nDESCRIPTION: Adding provenance configuration to publishConfig settings\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/plugin-polyfill/CHANGELOG.md#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n- 7e6fb5f: chore: publishConfig add provenance config\n\n  chore: publishConfig 增加 provenance 配置\n```\n\n----------------------------------------\n\nTITLE: Running Modern.js Production Server\nDESCRIPTION: Command output showing the start of the Modern.js production server for running Playwright tests.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/testing/playwright.mdx#2025-04-21_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\ninfo    Starting production server...\n\n  > Local:    http://localhost:8080/\n  > Network:  http://10.94.59.30:8080/\n```\n\n----------------------------------------\n\nTITLE: Configuring i18n in Modern.js\nDESCRIPTION: Example of how to configure i18n in Modern.js, showing the basic structure with locale settings and namespaces definition.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/tests/integration/bff-hono/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  i18n: {\n    // locale configuration\n    locales: [\n      { locale: 'en-US', text: 'English' },\n      { locale: 'zh-CN', text: '简体中文' },\n    ],\n    // namespace configuration\n    ns: ['common', 'home'],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Supporting File Add and Unlink Events in Watch Mode\nDESCRIPTION: Feature enhancement to detect and handle file addition and deletion events during watch mode, improving the development experience with dynamic file changes.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/solutions/module-tools/CHANGELOG.md#2025-04-21_snippet_5\n\nLANGUAGE: markdown\nCODE:\n```\n- 9d1905a: feat: support to handle files add and unlink in watch mode\n  feat: 支持在 watch 模式下处理文件的新增和删除\n```\n\n----------------------------------------\n\nTITLE: Less Configuration with buildConfig\nDESCRIPTION: Alternative configuration to fix Less compilation errors by setting the math option directly in the buildConfig.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/faq/build.mdx#2025-04-21_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nmodule.exports = {\n  buildConfig: {\n    style: {\n      less: {\n        lessOptions: {\n          math: 'always',\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Ignoring Specific TSConfig CompileOptions\nDESCRIPTION: Fix to ignore certain TSConfig compileOptions that might cause issues or conflicts in the module build process.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/solutions/module-tools/CHANGELOG.md#2025-04-21_snippet_4\n\nLANGUAGE: markdown\nCODE:\n```\n- adf68ec3ed: fix: ignore some tsconfig compileOptions\n  fix: 忽略一些 tsconfig 的 compileOptions 配置\n```\n\n----------------------------------------\n\nTITLE: Repository Header HTML Structure\nDESCRIPTION: HTML markup for the repository header section, including logo, title and description formatting.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/toolkit/create/README.md#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<p align=\"center\">\n  <a href=\"https://modernjs.dev\" target=\"blank\"><img src=\"https://lf3-static.bytednsdoc.com/obj/eden-cn/ylaelkeh7nuhfnuhf/modernjs-cover.png\" width=\"300\" alt=\"Modern.js Logo\" /></a>\n</p>\n\n<h1 align=\"center\">Modern.js</h1>\n\n<p align=\"center\">\n  A Progressive React Framework for modern web development.\n</p>\n```\n\n----------------------------------------\n\nTITLE: Generated HTML Link Tag for Apple Touch Icon\nDESCRIPTION: Shows the HTML link tag that Modern.js automatically generates in the build output for the Apple Touch Icon.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/hooks/config/icon.mdx#2025-04-21_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<link rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"/static/image/icon.png\" />\n```\n\n----------------------------------------\n\nTITLE: Configuring Redux Middleware in Reduck with Provider\nDESCRIPTION: Example showing how to use the redux-logger middleware with Reduck's Provider component. The middleware is passed through the config parameter of the Provider component that wraps the application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/redux-integration.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nReactDOM.render(\n  <Provider config={{ middlewares: [logger] }}>\n    // Set middleware through the config parameter of Provider\n    <App />\n  </Provider>,\n  document.getElementById('root'),\n);\n```\n\n----------------------------------------\n\nTITLE: Importing Micro Frontend Component in Markdown\nDESCRIPTION: MDX import statement for a micro frontend documentation component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/micro-frontend/c01-introduction.mdx#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\nimport MicroFrontend from '@site-docs-en/components/micro-frontend.mdx';\n\n<MicroFrontend />\n```\n\n----------------------------------------\n\nTITLE: Executing modern bump command in pre-release mode\nDESCRIPTION: This snippet demonstrates the execution of the 'modern bump' command while in pre-release mode, showing the warning message and version update process.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/publish-your-project.mdx#2025-04-21_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\n$ npx modern bump\n🦋 warn ===============================IMPORTANT!===============================\n🦋 warn You are in prerelease mode\n🦋 warn If you meant to do a normal release you should revert these changes and run `changeset pre exit`\n🦋 warn You can then run `changeset version` again to do a normal release\n🦋 warn ----------------------------------------------------------------------\n🦋 All files have been updated. review them and commit at your leisure\n```\n\n----------------------------------------\n\nTITLE: Copying Files from Source Directory in Modern.js Module (TypeScript)\nDESCRIPTION: This example shows how to copy a file from the default source directory (src) using the copy.patterns configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/copy.md#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    copy: {\n      patterns: [\n        { from: './data.json' to: ''},\n      ],\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Running prebundle command for all dependencies\nDESCRIPTION: Command to prebundle all dependencies in the project.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/scripts/prebundle/README.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\npnpm start\n```\n\n----------------------------------------\n\nTITLE: Registering Proxy Plugin in Modern.js Config\nDESCRIPTION: Shows how to register the @modern-js/plugin-proxy plugin in the Modern.js configuration file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/global-proxy-config.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { appTools, defineConfig } from '@modern-js/app-tools';\nimport { proxyPlugin } from '@modern-js/plugin-proxy';\n\nexport default defineConfig({\n  plugins: [appTools(), proxyPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Displaying Built-in Log Events Table in Markdown\nDESCRIPTION: A markdown table showing built-in log events in Modern.js, including the stage, message, and log level for various server-side rendering scenarios.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/server-monitor/logger.mdx#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n| Stage           | Message                                      | Level |\n| --------------- | -------------------------------------------- | ----- |\n| RENDER_HTML     | App Render To HTML                           | error |\n| RENDER_STREAM   | An error occurs during streaming SSR         | error |\n| RENDER_SHELL    | An error occurs during streaming render shell | error |\n```\n\n----------------------------------------\n\nTITLE: Copying Files to Specific Locations in Modern.js Module (TypeScript)\nDESCRIPTION: This snippet demonstrates various scenarios of copying files, including file to file, file to directory, directory to directory, and directory to file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/copy.md#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: [\n    {\n      outDir: 'dist',\n      copy: {\n        patterns: [\n          /**\n           * copy file to file\n           */\n          {\n            from: './temp-1/a.png',\n            context: __dirname,\n            to: './temp-1/b.png',\n          },\n          /**\n           * copy file to dir\n           */\n          {\n            from: './temp-2/a.png',\n            context: __dirname,\n            to: './temp-2',\n          },\n          /**\n           * copy dir to dir\n           */\n          {\n            from: './temp-3/',\n            to: './temp-3',\n            context: __dirname,\n          },\n          /**\n           * copy dir to file\n           */\n          {\n            from: './temp-4/',\n            context: __dirname,\n            to: './temp-4/_index.html',\n          },\n        ],\n        options: {\n          enableCopySync: true,\n        },\n      },\n    },\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Injecting renderHandler into appContext in JavaScript\nDESCRIPTION: New feature to inject renderHandler into appContext and add default serverPlugins.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/core/CHANGELOG.md#2025-04-21_snippet_4\n\nLANGUAGE: JavaScript\nCODE:\n```\ninject renderHandler to appContext & add default serverPlugins\n```\n\n----------------------------------------\n\nTITLE: Package Change - Generator JSON Update Parameter\nDESCRIPTION: Patch adding endWithNewLine parameter to generator JSON file updates\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/generator/generators/server-generator/CHANGELOG.md#2025-04-21_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n- 65b2922: feat: generator update json add endWithNewLine params\n\n  feat: 生成器更新 json 文件增加 endWithNewLine 参数\n```\n\n----------------------------------------\n\nTITLE: Enabling BFF Cross-Project Invocation with Domain Configuration\nDESCRIPTION: Feature addition that allows BFF to support cross-project invocation with domain configuration. This enhancement was added in version 2.65.0 and 2.63.7.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/cli/plugin-bff/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n- b43988e: feat: BFF 跨项目调用支持配置域名，补充文档\n  feat: BFF cross-project-invocation supports configuration of domain, add doc\n```\n\n----------------------------------------\n\nTITLE: Package Config Example\nDESCRIPTION: Example showing version and dependency updates for Modern.js core package.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/cli/core/CHANGELOG.md#2025-04-21_snippet_14\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"page_title\": \"Modern.js Core Release Notes\",\n  \"page_description\": \"Release notes and changelog documentation for Modern.js core package updates\",\n  \"page_summary\": \"This file contains release notes detailing version updates, patches, bug fixes and improvements to the Modern.js core package.\"}\n```\n\n----------------------------------------\n\nTITLE: Disabling Default TransformImport Configuration in JavaScript\nDESCRIPTION: Example of how to disable the default transformImport configuration in Modern.js by setting it to false.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/transform-import.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  source: {\n    transformImport: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Disabling Build Cache in Modern.js Configuration\nDESCRIPTION: This JavaScript snippet demonstrates how to disable the build cache in Modern.js by setting the buildCache option to false in the performance configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/performance/build-cache.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  performance: {\n    buildCache: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Package Change - Generator Download Optimization\nDESCRIPTION: Minor change optimizing generator download functionality\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/generator/generators/server-generator/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n- d6986c5: feat: optimize generator download\n\n  feat: 优化生成器下载\n```\n\n----------------------------------------\n\nTITLE: Using Server Environment Detection in Webpack Config\nDESCRIPTION: Example demonstrating how to use the isServer parameter to detect Node.js server environment.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/webpack.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    webpack: (config, { isServer }) => {\n      if (isServer) {\n        // ...\n      }\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Linking to Rspack SWC Documentation in Markdown\nDESCRIPTION: This snippet provides a markdown link to the Rspack documentation about its use of SWC for code transformation and compression.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/rspackPrecautions.mdx#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n[SWC](https://rspack.dev/guide/features/builtin-swc-loader)\n```\n\n----------------------------------------\n\nTITLE: Version History Changelog in Markdown\nDESCRIPTION: Markdown formatted changelog detailing version updates, patches and dependency changes for a Modern.js generator plugin.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/generator/generator-cases/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n## 3.1.9\n\n### Patch Changes\n\n- @modern-js/generator-common@3.1.9\n\n## 3.1.8\n\n### Patch Changes\n\n- Updated dependencies [bfb15e2]\n  - @modern-js/generator-common@3.1.8\n```\n\n----------------------------------------\n\nTITLE: Changelog Entry for Generator Download\nDESCRIPTION: Notes optimization of generator download functionality in version 2.60.4\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/cli/plugin-i18n/CHANGELOG.md#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\nd6986c5: feat: optimize generator download\n\nfeat: 优化生成器下载\n```\n\n----------------------------------------\n\nTITLE: Reading Local Config File in TypeScript\nDESCRIPTION: Adds support for reading the modern.config.local.ts file for local configuration overrides.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/cli/core/CHANGELOG.md#2025-04-21_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nmodern.config.local.ts\n```\n\n----------------------------------------\n\nTITLE: WebAssembly Output Configuration in TypeScript\nDESCRIPTION: Configuration example for customizing the output directory of WebAssembly files in Modern.js.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/static-assets/wasm-assets.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    distPath: {\n      wasm: 'resource/wasm',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: HTML Description for Modern.js\nDESCRIPTION: HTML markup for displaying the centered project description tagline\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/generator/sandpack-react/README.md#2025-04-21_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<p align=\"center\">\n  A Progressive React Framework for modern web development.\n</p>\n```\n\n----------------------------------------\n\nTITLE: HTML Logo and Header Structure\nDESCRIPTION: HTML markup for displaying the Modern.js logo, title and description in a centered layout using HTML paragraph and header tags with alignment attributes\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/runtime/plugin-router-v5/README.md#2025-04-21_snippet_0\n\nLANGUAGE: HTML\nCODE:\n```\n<p align=\"center\">\n  <a href=\"https://modernjs.dev\" target=\"blank\"><img src=\"https://lf3-static.bytednsdoc.com/obj/eden-cn/ylaelkeh7nuhfnuhf/modernjs-cover.png\" width=\"300\" alt=\"Modern.js Logo\" /></a>\n</p>\n\n<h1 align=\"center\">Modern.js</h1>\n\n<p align=\"center\">\n  A Progressive React Framework for modern web development.\n</p>\n```\n\n----------------------------------------\n\nTITLE: Configuring Source Build Options in Modern.js\nDESCRIPTION: Advanced configuration for source build functionality with custom options. Shows how to specify custom source field and resolve priority using the @rsbuild/plugin-source-build plugin options.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/experiments/source-build.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  experiments: {\n    sourceBuild: {\n      sourceField: 'my-source',\n      resolvePriority: 'output',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Modern.js Plugin V2 Dependency Updates\nDESCRIPTION: Changelog entry showing version updates and dependency changes for Modern.js Plugin V2 package. Documents changes across multiple versions including new features, patches and dependency updates.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/toolkit/plugin-v2/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n# @modern-js/plugin-v2\n\n## 2.67.2\n\n### Patch Changes\n\n- Updated dependencies [8f97aae]\n  - @modern-js/runtime-utils@2.67.2\n  - @modern-js/utils@2.67.2\n\n## 2.67.1\n\n### Patch Changes\n\n- Updated dependencies [1d96265]\n  - @modern-js/utils@2.67.1\n  - @modern-js/runtime-utils@2.67.1\n\n## 2.67.0\n\n### Patch Changes\n\n- @modern-js/runtime-utils@2.67.0\n- @modern-js/utils@2.67.0\n\n## 2.66.0\n\n### Minor Changes\n\n- e48a5ae: feat: server plugin use plugin v2\n\n  feat: server 插件使用 plugin v2 实现\n\n### Patch Changes\n\n- @modern-js/runtime-utils@2.66.0\n- @modern-js/utils@2.66.0\n\n## 2.65.5\n\n### Patch Changes\n\n- Updated dependencies [90a3c1c]\n- Updated dependencies [58a1afd]\n  - @modern-js/runtime-utils@2.65.5\n  - @modern-js/utils@2.65.5\n```\n\n----------------------------------------\n\nTITLE: Adding Watch Mode to Copy Functionality\nDESCRIPTION: Enhancement to add watch mode logic for the copy functionality, enabling the tool to monitor file changes during development.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/solutions/module-tools/CHANGELOG.md#2025-04-21_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\n- eccfe877b5: fix: add watch mode to copy\n  fix: 为 copy 功能补充 watch 逻辑\n```\n\n----------------------------------------\n\nTITLE: Feature Updates for ModuleContext and Config\nDESCRIPTION: Documentation of feature additions including ModuleContext, type definitions and schema for config\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/solutions/module-tools/CHANGELOG.md#2025-04-21_snippet_11\n\nLANGUAGE: markdown\nCODE:\n```\n- 0bb776858a: feat: add ModuleContext\n  feat: 添加 ModuleContext\n- e6bfca6d31: feat: add type define and schema for config\n  feat: 为配置增加类型定义和 schema\n```\n\n----------------------------------------\n\nTITLE: Upgrading ESBuild Dependency\nDESCRIPTION: Dependency update that bumps ESBuild from version 15/16 to version 17, implemented in version 2.25.1.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/toolkit/node-bundle-require/CHANGELOG.md#2025-04-21_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\n- 85366bc: chore(deps): bump esbuild from v15/v16 to v17\n\n  chore(deps): 将 esbuild 从 v15/v16 升级到 v17\n```\n\n----------------------------------------\n\nTITLE: Displaying Legacy Log Events Table in Markdown\nDESCRIPTION: A markdown table showing legacy log events in Modern.js for the deprecated useLoader API, including the stage, message, and log level.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/server-monitor/logger.mdx#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n| Stage         | Message                         | Level |\n| ------------- | ------------------------------- | ----- |\n| PRERENDER     | App Prerender                   | error |\n| USE_LOADER    | App run useLoader               | error |\n```\n\n----------------------------------------\n\nTITLE: Registering Babel Plugin in Modern.js Module Configuration\nDESCRIPTION: This snippet demonstrates how to register the Babel plugin in a Modern.js Module configuration file. It imports necessary functions and plugins, then adds them to the configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/plugins/official-list/plugin-babel.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\nimport { modulePluginBabel } from '@modern-js/plugin-module-babel';\n\nexport default defineConfig({\n  plugins: [moduleTools(), modulePluginBabel()],\n});\n```\n\n----------------------------------------\n\nTITLE: Version 2.67.1 Changelog Entry\nDESCRIPTION: Updates the recommended and minimum supported Node.js versions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/CHANGELOG.md#2025-04-21_snippet_1\n\nLANGUAGE: Markdown\nCODE:\n```\n## 2.67.1\n\n### Patch Changes\n\n- 4dec875: docs: Recommended Node version changed to 22, minimum supported Node version changed to 18\n\n  docs: 推荐使用 Node 版本修改为 22，最低支持 Node 版本修改为 18\n\n  - @modern-js/sandpack-react@2.67.1\n```\n\n----------------------------------------\n\nTITLE: Fixing Packaging Errors in Version 2.32.0\nDESCRIPTION: This patch addresses packaging errors detected by the publint tool, improving the package's compliance with packaging standards.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/toolkit/plugin/CHANGELOG.md#2025-04-21_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n6076166: fix: packaging errors found by publint\n\n  fix: 修复 publint 检测到的 packaging 问题\n```\n\n----------------------------------------\n\nTITLE: Formatting Conventional Commit Message in Modern.js\nDESCRIPTION: This example demonstrates the proper format for commit messages in the Modern.js repository. It shows how to structure a commit with a type, scope, and description, following the conventional commit format pattern.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/utils/tests/fixtures/ts-example/server/foo.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n<type>(<scope>): <subject>\n```\n\n----------------------------------------\n\nTITLE: Jest Setup File Configuration\nDESCRIPTION: Setup file that imports Jest DOM testing utilities for enhanced DOM element assertions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/testing/jest.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport '@testing-library/jest-dom';\n```\n\n----------------------------------------\n\nTITLE: Fixing Packaging Errors Detected by Publint\nDESCRIPTION: Fix for packaging errors detected by the publint tool, implemented in version 2.32.0.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/toolkit/node-bundle-require/CHANGELOG.md#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n- 6076166: fix: packaging errors found by publint\n\n  fix: 修复 publint 检测到的 packaging 问题\n```\n\n----------------------------------------\n\nTITLE: HTML Header with Logo\nDESCRIPTION: HTML markup for the project logo and title section using centered alignment and image embedding\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/generator/generator-utils/README.md#2025-04-21_snippet_0\n\nLANGUAGE: HTML\nCODE:\n```\n<p align=\"center\">\n  <a href=\"https://modernjs.dev\" target=\"blank\"><img src=\"https://lf3-static.bytednsdoc.com/obj/eden-cn/ylaelkeh7nuhfnuhf/modernjs-cover.png\" width=\"300\" alt=\"Modern.js Logo\" /></a>\n</p>\n\n<h1 align=\"center\">Modern.js</h1>\n\n<p align=\"center\">\n  A Progressive React Framework for modern web development.\n</p>\n```\n\n----------------------------------------\n\nTITLE: Configuring Webpack in JavaScript\nDESCRIPTION: Updates the webpack dependency from version 5.76.2 to 5.82.1 in the package.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/cli/core/CHANGELOG.md#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nwebpack\n```\n\n----------------------------------------\n\nTITLE: Configuring Koa.js BFF Plugin\nDESCRIPTION: Configuration for enabling BFF with Koa.js runtime framework in Modern.js using koa and bff plugins.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/enable-bff.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { koaPlugin } from '@modern-js/plugin-koa';\nimport { bffPlugin } from '@modern-js/plugin-bff';\n\nexport default defineConfig({\n  plugins: [koaPlugin(), bffPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Upgrading SWC and Helpers Dependencies\nDESCRIPTION: Dependency update that bumps SWC and its helper packages, implemented in version 2.41.0.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/toolkit/node-bundle-require/CHANGELOG.md#2025-04-21_snippet_6\n\nLANGUAGE: markdown\nCODE:\n```\n- c4d396a: chore(swc): bump swc and helpers\n  chore(swc): 升级 swc 以及 helpers\n```\n\n----------------------------------------\n\nTITLE: NPM Dependency Override Configuration\nDESCRIPTION: Configuration for locking nested dependency versions using NPM package manager.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/get-started/upgrade.mdx#2025-04-21_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"overrides\": {\n    \"package-name\": \"^1.0.0\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Modern.js Changelog Entry\nDESCRIPTION: A markdown changelog entry detailing version changes, dependency updates and patch changes for Modern.js packages including core, utils, i18n plugins and related tools.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/cli/plugin-changeset/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n### Patch Changes\n\n- Updated dependencies [2da09c69]\n- Updated dependencies [fc71e36f]\n- Updated dependencies [c3d46ee4]\n- Updated dependencies [cfe11628]\n  - @modern-js/utils@1.2.0\n  - @modern-js/core@1.3.0\n  - @modern-js/i18n-cli-language-detector@1.2.0\n  - @modern-js/plugin-i18n@1.2.0\n```\n\n----------------------------------------\n\nTITLE: HTML Title and Description\nDESCRIPTION: HTML markup for the main project title and description with centered alignment.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/generator/generators/dependence-generator/README.md#2025-04-21_snippet_1\n\nLANGUAGE: HTML\nCODE:\n```\n<h1 align=\"center\">Modern.js</h1>\n\n<p align=\"center\">\n  A Progressive React Framework for modern web development.\n</p>\n```\n\n----------------------------------------\n\nTITLE: Setting UMD Format in Modern.js Module\nDESCRIPTION: Configures the JavaScript output format to Universal Module Definition (UMD), which allows the module to be used in different environments like browsers and Node.js.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_25\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    format: 'umd',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Modern.js Project Settings in JavaScript\nDESCRIPTION: This code exports a function that returns an object with configuration settings for a Modern.js project. It includes options for output, dev server, and source transformations.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/babel-plugin-module-resolver/tests/testproject/src/text.txt#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig({\n  output: {\n    polyfill: 'usage',\n    disableTsChecker: true,\n    disableMinimize: true,\n    buildConfig: {\n      buildType: 'bundle',\n      esbuildOptions: {\n        external: [\n          'node:async_hooks',\n          'node:child_process',\n          'node:crypto',\n          'node:fs',\n          'node:module',\n          'node:net',\n          'node:os',\n          'node:path',\n          'node:stream',\n          'node:url',\n          'node:util',\n          'node:zlib',\n        ],\n      },\n    },\n  },\n  dev: {\n    port: 8080,\n  },\n  source: {\n    transform: {\n      esbuild: {\n        exclude: ['minimatch'],\n      },\n    },\n    moduleScopes: ['.'],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Importing SVG as URL in TypeScript React\nDESCRIPTION: This snippet demonstrates how to import an SVG file as a URL string using default import in a TypeScript React component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/static-assets/svg-assets.mdx#2025-04-21_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport logoURL from './static/logo.svg';\n\nconsole.log(logoURL); // => \"/static/logo.6c12aba3.png\"\n```\n\n----------------------------------------\n\nTITLE: Changelog Entries with Version Tracking\nDESCRIPTION: Documentation of version changes for plugin-garfish module including fixes for runtime plugin aliases, Garfish runtime integration, plugin communication and dependency updates.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/runtime/plugin-garfish/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n### Patch Changes\n\n- abad541: fix: more runtime plugin add alias not work\n\n  fix: 多个 runtime 插件添加 runtime 路径别名时不符合预期\n\n- 2c32e1b: fix(plugin-garfish): can not import garfish runtime directly which has sideffect\n  fix(plugin-garfish): 不能直接注入带有副作用的 garfish runtime\n- dc736ef: feat: Support Runtime Plugin Communication\n\n  feat: 支持 Runtime 插件通信\n```\n\n----------------------------------------\n\nTITLE: Version 2.67.0 Changelog Entry\nDESCRIPTION: Refactors the Runtime configuration documentation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/CHANGELOG.md#2025-04-21_snippet_2\n\nLANGUAGE: Markdown\nCODE:\n```\n## 2.67.0\n\n### Patch Changes\n\n- 0bd864b: docs: refactor runtime config doc\n\n  docs: 重构 Runtime 配置文档\n\n  - @modern-js/sandpack-react@2.67.0\n```\n\n----------------------------------------\n\nTITLE: Configuring Fallback Locale in Modern.js i18n\nDESCRIPTION: Example showing how to set up a fallback locale when the requested locale is not available or translation is missing.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/tests/integration/bff-hono/CHANGELOG.md#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  i18n: {\n    // Setting fallback locale\n    fallback: true, // When false, i18n will return the key as is if no translation is found\n    fallbackLocale: 'en-US', // When a translation is not found in the current locale, fallback to this locale\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Updating SSR Context Protocol Handling in JavaScript\nDESCRIPTION: Fix to prioritize getting protocol from x-forwarded-proto header and add support for rewriting requests in new server middleware.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/core/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nssrContext.get protocal from x-forwarded-proto first, then new server middleware support rewrite request\n```\n\n----------------------------------------\n\nTITLE: Generating TypeScript Path Configuration for Modern.js Projects\nDESCRIPTION: A function that generates TypeScript path configurations based on project type and specified alias. It supports different project types and creates the appropriate path mappings for each type.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/components/release-module-doc.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport const generateTsPath = (\n  type: 'app' | 'module' | 'monorepo' | 'storybook',\n  { alias = '@' }: { alias?: string } = {},\n) => {\n  if (type === 'storybook') {\n    return {\n      [alias]: ['./src'],\n      [`${alias}/*`]: ['./src/*'],\n    };\n  }\n\n  if (type === 'app') {\n    return {\n      [alias]: ['./src'],\n      [`${alias}/*`]: ['./src/*'],\n      config: ['./config'],\n      'config/*': ['./config/*'],\n    };\n  }\n\n  if (type === 'module') {\n    return {\n      [alias]: ['./src'],\n      [`${alias}/*`]: ['./src/*'],\n      '@tests': ['./tests'],\n      '@tests/*': ['./tests/*'],\n      'modern-js-test': ['./tests/index.ts'],\n    };\n  }\n\n  if (type === 'monorepo') {\n    return {\n      '@/*': ['./src/*'],\n      '@/node_modules/*': ['./node_modules/*'],\n    };\n  }\n\n  return {};\n};\n```\n\n----------------------------------------\n\nTITLE: Removing Babel Presets with removePresets Helper\nDESCRIPTION: Example of using the removePresets utility function to remove specific Babel presets from the configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/babel.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    babel(config, { removePresets }) {\n      removePresets('@babel/preset-env');\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Exposing Status in afterRenderContext in JavaScript\nDESCRIPTION: Fix to allow users to access the status in the afterRenderContext.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/core/CHANGELOG.md#2025-04-21_snippet_5\n\nLANGUAGE: JavaScript\nCODE:\n```\nuser can get status in afterRenderContext\n```\n\n----------------------------------------\n\nTITLE: Legacy Approach Using source.designSystem in Modern.js\nDESCRIPTION: Shows the deprecated approach for configuring Tailwind CSS theme in Modern.js, where the theme is extracted and set to source.designSystem.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/tailwindcss.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst { theme, ...rest } = tailwindConfig;\n\nexport default {\n  tools: {\n    tailwindcss: rest,\n  },\n  source: {\n    designSystem: theme,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Improving Error Stack Traces for Dev Compilation Failures\nDESCRIPTION: Enhancement to improve error stack trace formatting when development compilation fails, implemented in version 2.29.0.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/toolkit/node-bundle-require/CHANGELOG.md#2025-04-21_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n- 99052ea: feat(builder): improve error stacks if dev compilation failed\n\n  feat(builder): 优化 dev 编译失败时的错误堆栈格式\n```\n\n----------------------------------------\n\nTITLE: Version 2.67.0 Changelog Entry\nDESCRIPTION: Minor update introducing runtime plugin configuration centralization and state plugin separation\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/runtime/plugin-state/CHANGELOG.md#2025-04-21_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n## 2.67.0\n\n### Minor Changes\n\n- fb9fc66: feat: Centralize runtime plugin configuration into `src/modern.runtime.ts`\n\n  feat: runtime 插件配置集中到 `src/modern.runtime.ts` 中\n\n- fb9fc66: feat: split state plugin from runtime package\n\n  feat: 从 runtime 包中拆分 state 插件\n\n### Patch Changes\n\n- Updated dependencies [fe46fdc]\n- Updated dependencies [fb9fc66]\n  - @modern-js/runtime@2.67.0\n  - @modern-js/runtime-utils@2.67.0\n  - @modern-js/types@2.67.0\n  - @modern-js/utils@2.67.0\n```\n\n----------------------------------------\n\nTITLE: Setting Composite to False for Bundle DTS\nDESCRIPTION: Fix for TypeScript declaration file bundling by setting the composite option to false, which resolves potential issues in the generated declaration files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/solutions/module-tools/CHANGELOG.md#2025-04-21_snippet_6\n\nLANGUAGE: markdown\nCODE:\n```\n- f0e41e7: fix: set composite false in bundle dts\n  fix: 打包 d.ts 时设置 composite 为 false\n```\n\n----------------------------------------\n\nTITLE: Changelog Entry for ESM Support\nDESCRIPTION: Documents the addition of ESM support in version 2.58.2\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/cli/plugin-i18n/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n44c1bc4: feat(server): support esm\nfeat(server): support esm\n```\n\n----------------------------------------\n\nTITLE: Adding BFF Independent Project Support\nDESCRIPTION: Feature addition enabling BFF to support cross-project invocation, allowing for more modular and independent BFF implementations. This enhancement was added in version 2.63.7.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/cli/plugin-bff/CHANGELOG.md#2025-04-21_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\n- fdcb0ee: feat: bff support independent project\n\n  feat: bff 支持跨项目调用\n```\n\n----------------------------------------\n\nTITLE: Executing modern change command for change tracking\nDESCRIPTION: This snippet demonstrates the execution of the 'modern change' command to log changes in the project. It shows the interactive process of generating a change log file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/publish-your-project.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ npx modern change\n🦋 What kind of change is this for module-example? (current version is 0.1.0) - patch\n🦋 Please enter a summary for this change (this will be in the changelogs). Submit empty line to open external editor\n🦋 Summary - publish test\n🦋 === Releasing the following packages ===\n🦋 [Patch]\n🦋 module\n🦋 Is this your desired changeset? (Y/n) - true\n🦋 Changeset added! - you can now commit it\n🦋\n🦋 If you want to modify or expand on the changeset summary, you can find it here\n🦋 info /xxxxxx/module/.changeset/brave-dryers-agree.md\n```\n\n----------------------------------------\n\nTITLE: 执行Modern.js升级命令\nDESCRIPTION: 使用npx执行@modern-js/upgrade命令自动升级Modern.js到当前的最新版本，需要在项目根路径下执行。\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/community/blog/2022-0708-updates.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx @modern-js/upgrade\n```\n\n----------------------------------------\n\nTITLE: Removing Duplicate Hook in JavaScript\nDESCRIPTION: Removes a duplicate 'addRuntimeExports' hook from the @modern-js/core package to avoid redundancy.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/cli/core/CHANGELOG.md#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\naddRuntimeExports\n```\n\n----------------------------------------\n\nTITLE: Creating Centered Heading in Markdown\nDESCRIPTION: This snippet demonstrates how to create a centered heading for the project name using HTML within a Markdown file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/toolkit/runtime-utils/README.md#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n<h1 align=\"center\">Modern.js</h1>\n```\n\n----------------------------------------\n\nTITLE: Authentication Redirect Middleware\nDESCRIPTION: Implements an authentication middleware that redirects unauthenticated users to the login page.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/web-server/unstable_middleware.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { UnstableMiddleware } from '@modern-js/runtime/server';\n\nconst auth: UnstableMiddleware = async (c, next) => {\n  const user = getUser(c.request);\n\n  if (!user) {\n    return c.redirect('/login');\n  }\n\n  await next();\n};\n\nexport const unstableMiddleware: UnstableMiddleware[] = [auth];\n```\n\n----------------------------------------\n\nTITLE: Specifying Node.js Version for Vercel Deployment\nDESCRIPTION: JSON configuration for package.json to specify the Node.js version for deploying a full stack project on Vercel.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/deploy.mdx#2025-04-21_snippet_9\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"engines\": {\n    \"node\": \"18.x\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Refactoring BFF Testing Plugin Mock Logic\nDESCRIPTION: Fix to improve the mock logic used by the BFF testing plugin, ensuring more reliable test execution.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/runtime/plugin-testing/CHANGELOG.md#2025-04-21_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\n- 8f1141c: fix: refactor the mock logic of BFF testing plugin\n  fix: 修改 BFF 测试插件的 mock 逻辑\n```\n\n----------------------------------------\n\nTITLE: Package Change - Generator Log Information Update\nDESCRIPTION: Patch change improving generator logging information\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/generator/generators/server-generator/CHANGELOG.md#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n- 0b6d335: feat: Optimize generator log information\n\n  feat: 优化生成器日志信息\n```\n\n----------------------------------------\n\nTITLE: Adding Provenance to PublishConfig in Version 2.23.0\nDESCRIPTION: This change adds provenance configuration to the package's publishConfig, enhancing the package's publishing metadata.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/toolkit/plugin/CHANGELOG.md#2025-04-21_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\n7e6fb5f: chore: publishConfig add provenance config\n\n  chore: publishConfig 增加 provenance 配置\n```\n\n----------------------------------------\n\nTITLE: Enabling UA-based Polyfill Feature in Modern.js\nDESCRIPTION: This command initiates the process of enabling the UA-based Polyfill feature in a Modern.js project. It uses the project's CLI tool to add the necessary configurations.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/ua-polyfill.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n? Please select the operation you want: Enable features\n? Please select the feature name: Enable UA-based Polyfill Feature\n```\n\n----------------------------------------\n\nTITLE: Changelog Entry for Patch Changes\nDESCRIPTION: Documents recent patch changes including server plugin manager refactoring and dependency updates\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/plugin-express/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n### Patch Changes\n\n- 272cab15: refactor server plugin manager\n- Updated dependencies [d9cc5ea9]\n- Updated dependencies [bd819a8d]\n- Updated dependencies [ec4dbffb]\n- Updated dependencies [d099e5c5]\n- Updated dependencies [bada2879]\n- Updated dependencies [24f616ca]\n- Updated dependencies [bd819a8d]\n- Updated dependencies [272cab15]\n  - @modern-js/core@1.4.0\n  - @modern-js/utils@1.3.0\n  - @modern-js/server-core@1.2.2\n```\n\n----------------------------------------\n\nTITLE: Proxy Server Startup Output\nDESCRIPTION: Example of the console output when the proxy server starts successfully\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/components/global-proxy-config.mdx#2025-04-21_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\n  Local:    http://localhost:8080/\n  Network:  http://192.168.0.1:8080/\n\ninfo      Starting proxy server.....\nsuccess   Proxy server start on localhost:8899\n```\n\n----------------------------------------\n\nTITLE: Displaying Project Title and Description in Markdown\nDESCRIPTION: This snippet demonstrates how to create a centered title and description for the Modern.js project using Markdown syntax.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/runtime/plugin-runtime/README.md#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n<h1 align=\"center\">Modern.js</h1>\n\n<p align=\"center\">\n  A Progressive React Framework for modern web development.\n</p>\n```\n\n----------------------------------------\n\nTITLE: Configuring Path Aliases in Modern.js Module\nDESCRIPTION: Sets up path aliases to simplify imports by mapping '@common' to './src/common'. This allows using shorter import paths in the codebase.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    alias: {\n      '@common': './src/common',\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Removing Babel Plugins with removePlugins Helper\nDESCRIPTION: Example of using the removePlugins utility function to remove specific Babel plugins from the configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/babel.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    babel(config, { removePlugins }) {\n      removePlugins('babel-plugin-import');\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: 使用 Less 开发样式\nDESCRIPTION: 展示了如何使用 Less 预处理器开发样式。这个例子使用了 Less 变量和内置函数。\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/best-practices/components.mdx#2025-04-21_snippet_3\n\nLANGUAGE: less\nCODE:\n```\n@bg: black;\n@bg-light: boolean(luma(@bg) > 50%);\n\ndiv {\n  background: @bg;\n  color: if(@bg-light, black, white);\n}\n```\n\n----------------------------------------\n\nTITLE: Modern.js Changelog Entry Format\nDESCRIPTION: Standard changelog entry showing version, changes and dependency updates in Markdown format\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/plugin-express/CHANGELOG.md#2025-04-21_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n## 1.0.0-rc.12\n\n### Patch Changes\n\n- 224f7fe: fix server route match\n- 204c626: feat: initial\n- Updated dependencies [224f7fe]\n- Updated dependencies [204c626]\n  - @modern-js/core@1.0.0-rc.12\n  - @modern-js/adapter-helpers@1.0.0-rc.12\n  - @modern-js/bff-runtime@1.0.0-rc.12\n  - @modern-js/bff-utils@1.0.0-rc.12\n  - @modern-js/server-plugin@1.0.0-rc.12\n  - @modern-js/utils@1.0.0-rc.12\n```\n\n----------------------------------------\n\nTITLE: Running Command with Options\nDESCRIPTION: Example showing how to run a pnpm command with additional options\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/community/blog/2022-0910-updates.md#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\npnpm run command --options\n```\n\n----------------------------------------\n\nTITLE: Version History Documentation Format\nDESCRIPTION: Documents the version history for Modern.js packages, showing patch and minor changes with corresponding dependency updates. Each version includes its own section listing dependency version updates.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/runtime/plugin-testing/CHANGELOG.md#2025-04-21_snippet_6\n\nLANGUAGE: markdown\nCODE:\n```\n### Patch Changes\n\n- Updated dependencies [cad9676]\n- Updated dependencies [e9b1656]\n- Updated dependencies [4d413c4]\n- Updated dependencies [5deb1fb]\n- Updated dependencies [4220c0e]\n- Updated dependencies [78431f4]\n  - @modern-js/runtime@2.13.0\n  - @modern-js/babel-preset-app@2.13.0\n  - @modern-js/plugin@2.13.0\n  - @modern-js/prod-server@2.13.0\n  - @modern-js/babel-compiler@2.13.0\n  - @modern-js/utils@2.13.0\n```\n\n----------------------------------------\n\nTITLE: Implementing Server Plugin with Plugin V2\nDESCRIPTION: Minor update that changes server plugin implementation to use plugin v2 architecture. This enhancement improves the plugin system and was added in version 2.66.0.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/cli/plugin-bff/CHANGELOG.md#2025-04-21_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n### Minor Changes\n\n- e48a5ae: feat: server plugin use plugin v2\n\n  feat: server 插件使用 plugin v2 实现\n```\n\n----------------------------------------\n\nTITLE: Defining Global Variables for Build\nDESCRIPTION: Injects the package version as a global constant available in the code during build time.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_11\n\nLANGUAGE: JavaScript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    define: {\n      VERSION: require('./package.json').version || '0.0.0',\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Displaying Project Logo in Markdown\nDESCRIPTION: This snippet shows how to center-align and display the Modern.js logo using HTML within a Markdown file. It includes a link to the project website and sets the image width.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/toolkit/runtime-utils/README.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n<p align=\"center\">\n  <a href=\"https://modernjs.dev\" target=\"blank\"><img src=\"https://lf3-static.bytednsdoc.com/obj/eden-cn/ylaelkeh7nuhfnuhf/modernjs-cover.png\" width=\"300\" alt=\"Modern.js Logo\" /></a>\n</p>\n```\n\n----------------------------------------\n\nTITLE: Importing Head Component in Modern.js\nDESCRIPTION: This snippet shows how to import the Helmet component from @modern-js/runtime/head, which is used to add HTML elements to the <head> section.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/utility/head.mdx#2025-04-21_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Helmet } from '@modern-js/runtime/head';\n\nexport default () => <Helmet>...</Helmet>;\n```\n\n----------------------------------------\n\nTITLE: Forcing URL Import with Query Parameter in JavaScript\nDESCRIPTION: Demonstrates how to explicitly import an SVG as a URL using the ?url query parameter, regardless of the default export setting.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/svg-default-export.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport logo from './logo.svg?url';\n\nconsole.log(logo); // => asset url\n```\n\n----------------------------------------\n\nTITLE: Modern.js Version Updates\nDESCRIPTION: Changelog entries showing version updates, bug fixes, and feature additions for Modern.js app tools, including dependency updates and version bumps.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/solutions/app-tools/CHANGELOG.md#2025-04-21_snippet_4\n\nLANGUAGE: markdown\nCODE:\n```\n### Patch Changes\n\n- 8f5c6d6: fix: use PROCESS_ASSETS_STAGE_DEV_TOOLING instead of PROCESS_ASSETS_STAGE_OPTIMIZE_COMPATIBILITY\n  fix: 使用 PROCESS_ASSETS_STAGE_DEV_TOOLING 替代 PROCESS_ASSETS_STAGE_OPTIMIZE_COMPATIBILITY\n- 5129771: fix: Optimize source-map generation in the router-plugin\n  fix: 优化 router plugin 中的 source-map 生成\n- e5e6c26: perf: Optimize route manifest size for multiple entries\n  perf: 优化路由 manifest 在多 entry 场景下的体积\n- Updated dependencies [645e111]\n- Updated dependencies [91d14b8]\n- Updated dependencies [8322a51]\n- Updated dependencies [5376a22]\n- Updated dependencies [d9080ed]\n- Updated dependencies [67d0b0c]\n- Updated dependencies [3f79dd7]\n- Updated dependencies [6d7104d]\n```\n\n----------------------------------------\n\nTITLE: Setting CDN Prefix for Assets\nDESCRIPTION: Adds a CDN prefix to all non-inlined assets, ensuring they are loaded from the specified domain instead of relative paths.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_5\n\nLANGUAGE: JavaScript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    asset: {\n      publicPath: 'https://xxx/',\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Default webpack-bundle-analyzer Configuration in Modern.js\nDESCRIPTION: Shows the default configuration object used when enabling the webpack-bundle-analyzer plugin in Modern.js. The configuration sets the analyzer mode to static, disables automatic opening, and generates an HTML report file named based on the compilation target.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/performance/bundle-analyze.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultConfig = {\n  analyzerMode: 'static',\n  openAnalyzer: false,\n  // target 为编译目标，如 `web`、`node` 等\n  reportFilename: `report-${target}.html`,\n};\n```\n\n----------------------------------------\n\nTITLE: Custom Entry Configuration\nDESCRIPTION: Example of configuring custom entries in Modern.js configuration file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/concept/entries.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  source: {\n    entries: {\n      // 指定一个名为 'my-entry' 的入口\n      'my-entry': {\n        // 入口模块的路径\n        entry: './src/my-page/index.tsx',\n        // 关闭 Modern.js 自动生成入口代码的行为\n        disableMount: true,\n      },\n    },\n    // 禁用入口扫描行为\n    disableDefaultEntries: true,\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Version history entries in Markdown\nDESCRIPTION: Changelog content showing version history from 2.31.2 to 2.67.2, including features like storage presets management, runtime plugins support, and devtools improvements.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/devtools/client/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n# @modern-js/devtools-client\n\n## 2.67.2\n\n## 2.67.1\n\n## 2.67.0\n\n[...additional version entries...]\n```\n\n----------------------------------------\n\nTITLE: HTML Image and Link Header\nDESCRIPTION: HTML markup for displaying the Modern.js logo with centered alignment and link to the official website.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/generator/generators/dependence-generator/README.md#2025-04-21_snippet_0\n\nLANGUAGE: HTML\nCODE:\n```\n<p align=\"center\">\n  <a href=\"https://modernjs.dev\" target=\"blank\"><img src=\"https://lf3-static.bytednsdoc.com/obj/eden-cn/ylaelkeh7nuhfnuhf/modernjs-cover.png\" width=\"300\" alt=\"Modern.js Logo\" /></a>\n</p>\n```\n\n----------------------------------------\n\nTITLE: Previewing Production Build of Modern.js App Locally\nDESCRIPTION: This command allows the user to preview the production build of the Modern.js application on their local machine before deployment.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/devtools/client/README.md#2025-04-21_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\npnpm serve\n```\n\n----------------------------------------\n\nTITLE: Version 2.41.0 Update\nDESCRIPTION: Updates to SWC and helpers dependencies, along with various package dependency updates.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/solutions/app-tools/CHANGELOG.md#2025-04-21_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n- chore(swc): bump swc and helpers\n```\n\n----------------------------------------\n\nTITLE: Running Filtered Tests\nDESCRIPTION: Command to run only test cases that match a specific keyword using Jest. This is useful when you want to focus on testing specific functionality.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/community/contributing-guide.mdx#2025-04-21_snippet_15\n\nLANGUAGE: sh\nCODE:\n```\n# Only run test cases with the copy-assets keyword\nnpx jest copy-assets\n```\n\n----------------------------------------\n\nTITLE: Package.json Types Configuration\nDESCRIPTION: Package.json configuration for TypeScript type declarations that must match the declarationDir setting from tsconfig.json\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/tests/integration/source-code-build/components/readme.md#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"types\": \"./dist/types\"\n}\n```\n\n----------------------------------------\n\nTITLE: LoadableComponent Return Type Definition in TypeScript\nDESCRIPTION: The TypeScript type definition of the LoadableComponent returned by the loadable function, including methods for preloading components.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/utility/loadable.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\ntype LoadableComponent<Props> = React.ComponentType<\n  Props & { fallback?: JSX.Element }\n> & {\n  preload(props?: Props): void;\n  load(props?: Props): Promise<React.ComponentType<Props>>;\n};\n```\n\n----------------------------------------\n\nTITLE: Conditionally Disabling TypeScript Type Checking in Development\nDESCRIPTION: This example demonstrates how to disable TypeScript type checking only in development environment by checking the NODE_ENV environment variable.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/output/disable-ts-checker.mdx#2025-04-21_snippet_1\n\nLANGUAGE: js\nCODE:\n```\nexport default {\n  output: {\n    disableTsChecker: process.env.NODE_ENV === 'development',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Externals Configuration to Fix Dynamic Require Issue\nDESCRIPTION: Solution for the 'Dynamic require' error by excluding problematic packages from the build process using the externals configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/faq/build.mdx#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    externals: ['react-draggable'],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Defining HTML Template Parameters Type Definition in TypeScript\nDESCRIPTION: Type definition for the default template parameters object that includes mountId, entryName, assetPrefix, compilation details, and HTML plugin-generated data for tags and files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/html/template-parameters.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype DefaultParameters = {\n  mountId: string; // the value of `html.mountId` config\n  entryName: string; // entry name\n  assetPrefix: string; // the value of dev.assetPrefix or output.assetPrefix configs\n  compilation: Compilation; // Compilation object of Rspack\n  rspackConfig: Rspack.Configuration; // Rspack config object\n  // generated by html-rspack-plugin\n  htmlPlugin: {\n    tags: {\n      headTags: HtmlTagObject[];\n      bodyTags: HtmlTagObject[];\n    };\n    files: {\n      publicPath: string;\n      js: Array<string>;\n      css: Array<string>;\n      favicon?: string;\n    };\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring API and Lambda Directories in JavaScript\nDESCRIPTION: Adds support for customizing API directory, Lambda directory, and BFF writing style in the configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/cli/core/CHANGELOG.md#2025-04-21_snippet_10\n\nLANGUAGE: javascript\nCODE:\n```\napiDir, lambdaDir\n```\n\n----------------------------------------\n\nTITLE: Passing options to command in pnpm v6\nDESCRIPTION: Example of passing options to the underlying command when using pnpm v6. In v6, you need to use -- to separate pnpm parameters from command parameters.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/troubleshooting/cli.mdx#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\npnpm run command -- --option\n```\n\n----------------------------------------\n\nTITLE: Updating Webpack in JavaScript\nDESCRIPTION: Updates webpack to version 5.88 and adds support for top-level await.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/runtime/plugin-runtime/CHANGELOG.md#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nfeat(builder): bump webpack v5.88, support top level await\n```\n\n----------------------------------------\n\nTITLE: Fixing RemixRouter in Conventional Routes\nDESCRIPTION: Fixes an issue where remixRouter did not exist in conventional routes.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/runtime/plugin-runtime/CHANGELOG.md#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nfix: fix remixRouter not existed in conventional routes\n```\n\n----------------------------------------\n\nTITLE: Enabling Debug Mode in Modern.js Module\nDESCRIPTION: Shows how to enable debug mode in Modern.js Module by setting an environment variable. This mode provides more detailed build logs for troubleshooting purposes.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/in-depth-about-build.md#2025-04-21_snippet_10\n\nLANGUAGE: bash\nCODE:\n```\nDEBUG=module modern build\n```\n\n----------------------------------------\n\nTITLE: 配置分离 JS 构建和类型文件生成\nDESCRIPTION: 这个示例展示了如何在 Modern.js Module 中分别配置 JS 构建和类型文件生成。通过设置多个 buildConfig,可以实现 bundle 模式的 JS 构建和 bundleless 模式的类型文件生成。\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/advance/in-depth-about-build.md#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nimport { defineConfig } from '@modern-js/module-tools';\n\nexport default defineConfig({\n  buildConfig: [\n    {\n      buildType: 'bundle',\n      dts: false,\n      outDir: './dist',\n    },\n    {\n      buildType: 'bundleless',\n      dts: {\n        only: true,\n      },\n      outDir: './dist/types',\n    },\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Installing Dependencies for Rslib Project\nDESCRIPTION: This command installs the necessary dependencies for the Rslib project using pnpm package manager.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/runtime/plugin-image/README.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\npnpm install\n```\n\n----------------------------------------\n\nTITLE: Defining Outlet Component in TypeScript\nDESCRIPTION: Declaration of the Outlet component, used for nested routing to render child route elements.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/router/router.mdx#2025-04-21_snippet_11\n\nLANGUAGE: TypeScript\nCODE:\n```\ninterface OutletProps {\n  context?: unknown;\n}\ndeclare function Outlet(props: OutletProps): React.ReactElement | null;\n```\n\n----------------------------------------\n\nTITLE: Node.js Version Incompatibility Error in Modern.js\nDESCRIPTION: Error message displayed when the current Node.js version is incompatible with Modern.js requirements. The error indicates that a higher Node.js version is needed.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/troubleshooting/dependencies.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nThe engine \"node\" is incompatible with this module.\n\nExpected version \">=16.2.0\". Got \"12.20.1\"\n```\n\n----------------------------------------\n\nTITLE: Markdown Project Header\nDESCRIPTION: HTML and Markdown combination for the project header including logo, title and description\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/cli/uni-builder/README.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n<p align=\"center\">\n  <a href=\"https://modernjs.dev\" target=\"blank\"><img src=\"https://lf3-static.bytednsdoc.com/obj/eden-cn/ylaelkeh7nuhfnuhf/modernjs-cover.png\" width=\"300\" alt=\"Modern.js Logo\" /></a>\n</p>\n\n<h1 align=\"center\">Modern.js</h1>\n\n<p align=\"center\">\n  A Progressive React Framework for modern web development.\n</p>\n```\n\n----------------------------------------\n\nTITLE: Updating Webpack Version in package.json\nDESCRIPTION: This snippet demonstrates updating the webpack dependency from version 5.76.2 to 5.82.1 in the package.json file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/cli/plugin-bff/CHANGELOG.md#2025-04-21_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n\"dependencies\": {\n  \"webpack\": \"5.82.1\"\n}\n```\n\n----------------------------------------\n\nTITLE: Supporting Security Nonce in JavaScript\nDESCRIPTION: Adds support for security.nonce configuration to add nonce attribute on script tags.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/runtime/plugin-runtime/CHANGELOG.md#2025-04-21_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nfeat: support security.nonce for add nonce attribute on script tag\n```\n\n----------------------------------------\n\nTITLE: Changelog Entry in Markdown\nDESCRIPTION: Documents version changes including product server support and dependency updates for Modern.js core and utils packages\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/prod-server/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n### Patch Changes\n\n- 02fb4146: support product server\n- Updated dependencies [969f172f]\n- Updated dependencies [4c792f68]\n- Updated dependencies [4b5d4bf4]\n- Updated dependencies [62f5b8c8]\n- Updated dependencies [55e18278]\n- Updated dependencies [4499a674]\n- Updated dependencies [403f5169]\n- Updated dependencies [a7f42f48]\n  - @modern-js/core@1.4.4\n  - @modern-js/utils@1.3.3\n```\n\n----------------------------------------\n\nTITLE: ReactNode Type Error After Dependency Upgrade in Modern.js\nDESCRIPTION: Shows the type error that may occur after upgrading dependencies in a Modern.js project, particularly related to React types.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/troubleshooting/dependencies.mdx#2025-04-21_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nThe types returned by 'render()' are incompatible between these types.\nType 'React.ReactNode' is not assignable to type 'import(\"/node_modules/@types/react/index\").ReactNode'.\nType '{}' is not assignable to type 'ReactNode'.\n```\n\n----------------------------------------\n\nTITLE: Accessing Main Application Model in Microfrontend Sub-Application (TypeScript)\nDESCRIPTION: This snippet demonstrates how to use the useModel hook to access a parent model from a microfrontend sub-application. It imports the parent model and uses it within a React component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/faq.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useModel } from '@modern-js/runtime/model';\nimport parentModel from '@MasterApp/models/todoModel';\n\nfunction SubModelApp() {\n  const [state, actions] = useModel(parentModel);\n\n  return <div>...</div>;\n}\n```\n\n----------------------------------------\n\nTITLE: Controlling Third-Party Type Bundling\nDESCRIPTION: Configures whether to respect external configuration when bundling third-party types, which can help avoid build issues from third-party type errors.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_18\n\nLANGUAGE: JavaScript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    dts: {\n      respectExternal: false,\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using isServer parameter for Node.js-specific webpack configurations\nDESCRIPTION: Example showing how to apply Node.js-specific webpack configurations using the isServer parameter, which is equivalent to checking if target === 'node'.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/webpack-chain.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    webpackChain: (chain, { isServer }) => {\n      if (isServer) {\n        // ...\n      }\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Bundler Type in Storybook Main Config\nDESCRIPTION: Example configuration in .storybook/main.js to specify Rspack as the bundler for Storybook in a Modern.js project.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/basic/using-storybook.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nconst config = {\n  framework: {\n    name: '@modern-js/storybook',\n    options: {\n      bundler: 'rspack',\n    },\n  },\n};\n\nexport default config;\n```\n\n----------------------------------------\n\nTITLE: Configuring Default Locale in Modern.js i18n\nDESCRIPTION: Example showing how to set the default locale in Modern.js i18n configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/tests/integration/bff-hono/CHANGELOG.md#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  i18n: {\n    // Setting the default locale\n    default: 'en-US',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Modern.js RC3 Changelog Entry\nDESCRIPTION: Patch changes documenting initial feature implementation and dependency updates for RC3 version across multiple Modern.js packages.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/runtime/plugin-runtime/CHANGELOG.md#2025-04-21_snippet_12\n\nLANGUAGE: markdown\nCODE:\n```\n## 1.0.0-rc.3\n\n### Patch Changes\n\n- feat: initial\n- Updated dependencies [undefined]\n  - @modern-js/core@1.0.0-rc.3\n  - @modern-js/plugin-router@1.0.0-rc.3\n  - @modern-js/plugin-ssr@1.0.0-rc.3\n  - @modern-js/plugin-state@1.0.0-rc.3\n  - @modern-js/bff-runtime@1.0.0-rc.3\n  - @modern-js/utils@1.0.0-rc.3\n  - @modern-js/runtime-core@1.0.0-rc.3\n```\n\n----------------------------------------\n\nTITLE: Displaying Modern.js Logo in Markdown\nDESCRIPTION: This code snippet shows how to display the Modern.js logo using HTML within a Markdown file. It includes centering the image, setting its width, and providing alt text.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/create-request/README.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n<p align=\"center\">\n  <a href=\"https://modernjs.dev\" target=\"blank\"><img src=\"https://lf3-static.bytednsdoc.com/obj/eden-cn/ylaelkeh7nuhfnuhf/modernjs-cover.png\" width=\"300\" alt=\"Modern.js Logo\" /></a>\n</p>\n```\n\n----------------------------------------\n\nTITLE: Creating Custom Server Entry Point in Modern.js\nDESCRIPTION: Demonstrates how to create a custom server-side entry point that modifies the response before sending it to the client. This example shows adding custom HTML content and HTTP headers to the server response.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/source/enable-custom-entry.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { renderString, createRequestHandler } from '@modern-js/runtime/ssr/server';\nimport type { HandleRequest } from '@modern-js/runtime/ssr/server';\n\nconst handleRequest: HandleRequest = async (request, ServerRoot, options) => {\n  // do something before rendering\n  const body = await renderString(request, <ServerRoot />, options);\n\n  const newBody = body + '<div>Byte-Dance</div>';\n\n  return new Response(newBody, {\n    headers: {\n      'content-type': 'text/html; charset=UTF-8',\n      'x-custom-header': 'abc',\n    },\n  });\n};\n\nexport default createRequestHandler(handleRequest);\n```\n\n----------------------------------------\n\nTITLE: Creating a React Custom Hook for Form Handling\nDESCRIPTION: Demonstrates how to create a custom React hook that manages form state including values, errors, and validation logic.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/convention-routing-motivation.mdx#2025-04-21_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\nimport { useState } from 'react';\n\nfunction useForm(initialValues) {\n  const [values, setValues] = useState(initialValues);\n  const [errors, setErrors] = useState({});\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setValues({\n      ...values,\n      [name]: value,\n    });\n  };\n\n  const validate = () => {\n    // Validation logic here\n    const newErrors = {};\n    \n    if (!values.name) {\n      newErrors.name = 'Name is required';\n    }\n    \n    if (!values.email) {\n      newErrors.email = 'Email is required';\n    }\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = (onSubmit) => (e) => {\n    e.preventDefault();\n    if (validate()) {\n      onSubmit(values);\n    }\n  };\n\n  return { values, errors, handleChange, handleSubmit };\n}\n```\n\n----------------------------------------\n\nTITLE: Centralized Routing with MApp Component in Modern.js\nDESCRIPTION: Example of using centralized routing with the MApp component returned by useModuleApps. This approach uses the activeWhen property to automatically activate child applications based on route paths.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/core/use-module-apps.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useModuleApp } from '@modern-js/plugin-runtime';\n\nfunction App() {\n  const { MApp } = useModuleApps();\n\n  return (\n    <div>\n      <MApp />\n    </div>\n  );\n}\n\ndefineConfig(App, {\n  masterApp: {\n    apps: [\n      {\n        // name 区分大小写，name 提供的是什么 useModuleApps 返回的就是什么\n        name: 'Table',\n        activeWhen: '/table',\n        entry: 'http://127.0.0.1:8081/',\n      },\n      {\n        name: 'Dashboard',\n        activeWhen: '/dashboard',\n        entry: 'http://localhost:8082',\n      },\n    ],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Dependency Configuration for Modern.js\nDESCRIPTION: List of dependency updates and version changes for Modern.js core packages and plugins. Includes both direct dependencies and peer dependencies with corresponding version numbers.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/solutions/app-tools/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"@modern-js/uni-builder\": \"2.60.4\",\n  \"@modern-js/server-core\": \"2.60.4\",\n  \"@modern-js/core\": \"2.60.4\",\n  \"@modern-js/plugin-i18n\": \"2.60.4\",\n  \"@modern-js/plugin-data-loader\": \"2.60.4\",\n  \"@modern-js/server-utils\": \"2.60.4\",\n  \"@modern-js/server\": \"2.60.4\",\n  \"@modern-js/prod-server\": \"2.60.4\",\n  \"@modern-js/rsbuild-plugin-esbuild\": \"2.60.4\",\n  \"@modern-js/node-bundle-require\": \"2.60.4\",\n  \"@modern-js/plugin\": \"2.60.4\",\n  \"@modern-js/types\": \"2.60.4\",\n  \"@modern-js/utils\": \"2.60.4\"\n}\n```\n\n----------------------------------------\n\nTITLE: File Structure After Enabling Async Entry\nDESCRIPTION: Shows the directory structure after enabling async entry, displaying the automatically generated files including the asynchronous boundary file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/source/enable-async-entry.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnode_modules\n  └─ .modern-js\n     └─ main\n        ├─ bootstrap.jsx  # 异步入口文件（asynchronous boundary）\n        ├─ index.js      # 真正的入口代码\n        └─ index.html\n```\n\n----------------------------------------\n\nTITLE: Unbundled Output in Distribution File\nDESCRIPTION: Shows the resulting output in the distribution file where the React dependency is not bundled, as per Modern.js Module's default behavior for dependencies and peerDependencies.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/external-dependency.mdx#2025-04-21_snippet_3\n\nLANGUAGE: js\nCODE:\n```\nimport React from 'react';\nconsole.info(React);\n```\n\n----------------------------------------\n\nTITLE: Displaying Project Logo in Markdown\nDESCRIPTION: This snippet shows how to display the Modern.js logo using HTML within a Markdown file. It centers the image and provides a link to the project website.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/cli/plugin-i18n/README.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n<p align=\"center\">\n  <a href=\"https://modernjs.dev\" target=\"blank\"><img src=\"https://lf3-static.bytednsdoc.com/obj/eden-cn/ylaelkeh7nuhfnuhf/modernjs-cover.png\" width=\"300\" alt=\"Modern.js Logo\" /></a>\n</p>\n```\n\n----------------------------------------\n\nTITLE: Enabling Detailed Module Resolution Debugging in Modern.js Module\nDESCRIPTION: Demonstrates how to enable detailed debugging for module resolution in Modern.js Module by setting a specific environment variable.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/in-depth-about-build.md#2025-04-21_snippet_11\n\nLANGUAGE: bash\nCODE:\n```\nDEBUG=module:resolve modern build\n```\n\n----------------------------------------\n\nTITLE: Importing Component Products in Storybook Stories\nDESCRIPTION: Example of importing a Button component in a Storybook story file to demonstrate component usage and functionality.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/basic/using-storybook.mdx#2025-04-21_snippet_1\n\nLANGUAGE: ts\nCODE:\n```\nimport { Button } from '.';\n\nexport const YourStory = () => <Button />;\n\nexport default {\n  title: 'Your Stories',\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Prettier Formatting Options for Modern.js\nDESCRIPTION: This snippet defines Prettier formatting options for the Modern.js project. It specifies settings for code style consistency, including single quotes, trailing commas, and tab width.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/solutions/app-tools/tests/analyze/fixtures/server-routes/has-config/config/public/wx.txt#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"$schema\": \"https://json.schemastore.org/prettierrc\",\n  \"singleQuote\": true,\n  \"trailingComma\": \"all\",\n  \"proseWrap\": \"never\",\n  \"endOfLine\": \"lf\",\n  \"tabWidth\": 2\n}\n```\n\n----------------------------------------\n\nTITLE: Modern.js RC4 Changelog Entry\nDESCRIPTION: Patch changes documenting server route match fix, initial feature implementation, and dependency updates for RC4 version across multiple Modern.js packages.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/runtime/plugin-runtime/CHANGELOG.md#2025-04-21_snippet_11\n\nLANGUAGE: markdown\nCODE:\n```\n### Patch Changes\n\n- fix server route match\n- 204c626: feat: initial\n- Updated dependencies [undefined]\n- Updated dependencies [204c626]\n  - @modern-js/core@1.0.0-rc.4\n  - @modern-js/plugin-router@1.0.0-rc.4\n  - @modern-js/plugin-ssr@1.0.0-rc.4\n  - @modern-js/plugin-state@1.0.0-rc.4\n  - @modern-js/runtime-core@1.0.0-rc.4\n  - @modern-js/bff-runtime@1.0.0-rc.4\n  - @modern-js/utils@1.0.0-rc.4\n```\n\n----------------------------------------\n\nTITLE: BannerOptions Type Definition for Modern.js Banner Plugin\nDESCRIPTION: Type definition for the Banner Plugin configuration options. The type describes the structure for configuring both banner (top content) and footer (bottom content) injections for JavaScript and CSS files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/official-list/plugin-banner.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\ntype BannerOptions = {\n  banner: {\n    js?: string;\n    css?: string;\n  };\n  footer?: {\n    js?: string;\n    css?: string;\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Executing Modern.js Change Command Output\nDESCRIPTION: Example output of running the modern change command to track package changes and generate a changeset file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/basic/publish-your-project.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ npx modern change\n🦋  What kind of change is this for module-example? (current version is 0.1.0) · patch\n🦋  Please enter a summary for this change (this will be in the changelogs). Submit empty line to open external editor\n🦋  Summary · publish test\n🦋  === Releasing the following packages ===\n🦋  [Patch]\n🦋    module\n🦋  Is this your desired changeset? (Y/n) · true\n🦋  Changeset added! - you can now commit it\n🦋\n🦋  If you want to modify or expand on the changeset summary, you can find it here\n🦋  info /xxxxxx/module/.changeset/brave-dryers-agree.md\n```\n\n----------------------------------------\n\nTITLE: Determining Appropriate Import Statement Based on File Extension\nDESCRIPTION: Function that determines the correct import statement for a given file based on its extension. It supports TypeScript, JavaScript, and CSS file imports.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/components/faq-storybook.mdx#2025-04-21_snippet_5\n\nLANGUAGE: TypeScript\nCODE:\n```\nexport function getImportStr(fsPath: string) {\n  const ext = path.extname(fsPath);\n  if (ext === '.ts' || ext === '.tsx') {\n    return `import Demo from '${fsPath.replace(/\\.tsx?$/, '')}';`;\n  }\n  if (ext === '.js' || ext === '.jsx') {\n    return `import Demo from '${fsPath.replace(/\\.jsx?$/, '')}';`;\n  }\n  if (ext === '.css') {\n    return `import '${fsPath}';`;\n  }\n\n  return '';\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Plugin Options in Modern.js Module (JavaScript)\nDESCRIPTION: This snippet illustrates how to pass custom configuration options to a plugin in Modern.js Module. The options are provided as an object argument to the plugin function.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/plugins.md#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport { myPlugin } from 'my-plugin';\n\nexport default defineConfig({\n  plugins: [\n    myPlugin({\n      foo: 1,\n      bar: 2,\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Polyfill Plugin with Browser Targets\nDESCRIPTION: Example configuration showing how to specify browser targets for the polyfill plugin using market share criteria.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/plugins/official-list/plugin-polyfill.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\nimport { modulePluginPolyfill } from '@modern-js/plugin-module-polyfill';\n\nexport default defineConfig({\n  plugins: [\n    moduleTools(),\n    modulePluginPolyfill({\n      targets: '> 0.25%, not dead',\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Importing Buffer Module in Browser Environment\nDESCRIPTION: This example demonstrates how to import the Buffer module from the 'buffer' package in a browser environment. The corresponding polyfill is injected when the module is imported.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/plugins/official-list/plugin-node-polyfill.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Buffer } from 'buffer';\n\nconst bufferData = Buffer.from('xxxx');\n```\n\n----------------------------------------\n\nTITLE: Implementing Authentication Middleware with Express in Modern.js\nDESCRIPTION: This snippet demonstrates how to create a middleware in api/_app.ts to implement authentication for BFF functions. It checks for session ID in cookies and intercepts requests to protected endpoints.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/bff/extend-server.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { hook } from '@modern-js/runtime/server';\nimport { Request, Response, NextFunction } from 'express';\n\nexport default hook(({ addMiddleware }) => {\n  addMiddleware(async (req: Request, res: Response, next: NextFunction) => {\n    if (req.url !== '/api/login') {\n      const sid = req?.cookies?.sid;\n      if (!sid) {\n        res.status(400);\n        res.json({ code: -1, message: 'need login' });\n      } else {\n        next();\n      }\n    } else {\n      next();\n    }\n  });\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Page Component with Contacts Model in Modern.js\nDESCRIPTION: The main page component that uses the contacts model to display and manage the list of all contacts. It renders a list of contacts and handles archiving.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/tutorials/first-app/c07-container.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Helmet } from '@modern-js/runtime/head';\nimport { useModel } from '@modern-js/runtime/model';\nimport { List } from 'antd';\nimport Item from '../components/Item';\nimport contacts from '../models/contacts';\n\nfunction Index() {\n  const [{ items }, { archive }] = useModel(contacts);\n\n  return (\n    <div className=\"container lg mx-auto\">\n      <Helmet>\n        <title>All</title>\n      </Helmet>\n      <List\n        dataSource={items}\n        renderItem={info => (\n          <Item\n            key={info.name}\n            info={info}\n            onArchive={() => {\n              archive(info.email);\n            }}\n          />\n        )}\n      />\n    </div>\n  );\n}\n\nexport default Index;\n```\n\n----------------------------------------\n\nTITLE: Cache Implementation with Tags\nDESCRIPTION: Example showing how to use tags for cache invalidation across multiple cached functions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/data/data-cache.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { cache, revalidateTag } from '@modern-js/runtime/cache';\n\nconst getDashboardStats = cache(\n  async () => {\n    return await fetchDashboardStats();\n  },\n  {\n    tag: 'dashboard',\n  }\n);\n\nconst getComplexStatistics = cache(\n  async () => {\n    return await fetchComplexStatistics();\n  },\n  {\n    tag: 'dashboard',\n  }\n);\n\nrevalidateTag('dashboard-stats'); // Invalidates the cache for both getDashboardStats and getComplexStatistics functions\n```\n\n----------------------------------------\n\nTITLE: HTML Alignment and Image Setup for Modern.js Logo\nDESCRIPTION: HTML markup for centering and displaying the Modern.js logo with appropriate sizing and linking\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/generator/sandpack-react/README.md#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<p align=\"center\">\n  <a href=\"https://modernjs.dev\" target=\"blank\"><img src=\"https://lf3-static.bytednsdoc.com/obj/eden-cn/ylaelkeh7nuhfnuhf/modernjs-cover.png\" width=\"300\" alt=\"Modern.js Logo\" /></a>\n</p>\n```\n\n----------------------------------------\n\nTITLE: Adding Copyright Information to JS Files with Banner Plugin\nDESCRIPTION: This example shows how to use the Banner plugin to add copyright information to the top of JS files. It defines a multi-line copyright text and applies it using the plugin configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/plugins/official-list/plugin-banner.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { modulePluginBanner } from '@modern-js/plugin-module-banner';\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\n\nconst copyRight = `/*\n © Copyright 2020 example.com or one of its affiliates.\n * Some Sample Copyright Text Line\n * Some Sample Copyright Text Line\n * Some Sample Copyright Text Line\n * Some Sample Copyright Text Line\n * Some Sample Copyright Text Line\n * Some Sample Copyright Text Line\n*/`;\n\nexport default defineConfig({\n  plugins: [\n    moduleTools(),\n    modulePluginBanner({\n      banner: {\n        js: copyRight,\n      },\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Cloning and Building Modern.js Module Example\nDESCRIPTION: This bash script shows how to clone the Modern.js examples repository, navigate to the basic module example, and run build commands.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/intro/getting-started.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\ngit clone https://github.com/web-infra-dev/modern-js-examples\ncd modern-js-examples/examples/basic-module\n\n## Execute the build.\npnpm build\n\n## Execute the build in listening mode.\npnpm build --watch\n```\n\n----------------------------------------\n\nTITLE: Configuring Lazy Compilation for Async Modules in Modern.js\nDESCRIPTION: Configuration example to enable lazy compilation for asynchronously imported modules (via dynamic import) while keeping normal compilation for entry modules.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/experiments/lazy-compilation.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  experiments: {\n    lazyCompilation: {\n      imports: true,\n      entries: false,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing afterBuildTask Hook in TypeScript\nDESCRIPTION: Hook triggered after each build subtask completion. Uses ParallelWorkflow pattern with build task results.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/plugin-api/plugin-hooks.md#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport const myPlugin = (): CliPlugin<ModuleTools> => ({\n  name: 'my-plugin',\n\n  setup() {\n    return {\n      afterBuildTask(options: BuildTaskResult): void {\n        // ...\n      },\n    };\n  },\n});\n```\n\nLANGUAGE: typescript\nCODE:\n```\nexport interface BuildTaskResult {\n  status: 'success' | 'fail';\n  message?: string;\n  config: BaseBuildConfig;\n}\n```\n\n----------------------------------------\n\nTITLE: Modifying HTML Partials in Modern.js Plugin\nDESCRIPTION: This snippet demonstrates how to use the modifyHtmlPartials API to add a custom meta tag to the <head> section of all HTML pages. The API allows modification of HTML template parts before HTML files are generated.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/plugin/cli-plugins/api.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\napi.modifyHtmlPartials(({ entrypoint, partials }) => {\n  // 在所有页面的 <head> 标签中添加一个 meta 标签\n  if (partials.head && partials.head.append) {\n      partials.head.append(`<meta name=\"my-custom-meta\" content=\"value\">`);\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Data Loader with Contact Information\nDESCRIPTION: TypeScript implementation of a data loader that generates mock contact data with name, avatar, email, and archived status for the application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/tutorials/first-app/c06-model.mdx#2025-04-21_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nexport type LoaderData = {\n  code: number;\n  data: {\n    name: string;\n    avatar: string;\n    email: string;\n  }[];\n};\n\nexport const loader = async (): Promise<LoaderData> => {\n  const data = new Array(20).fill(0).map(() => {\n    const firstName = name.firstName();\n    return {\n      name: firstName,\n      avatar: `https://api.dicebear.com/7.x/pixel-art/svg?seed=${firstName}`,\n      email: internet.email(),\n      archived: false,\n    };\n  });\n\n  return {\n    code: 200,\n    data,\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Using useFetcher to Trigger Data Actions in a Component\nDESCRIPTION: Shows how to use the useFetcher hook in a route component to retrieve data and submit updates to the server through a Data Action.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/data/data-write.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  useFetcher,\n  useLoaderData,\n  useParams,\n  Outlet\n} from '@modern-js/runtime/router';\n\nexport default () => {\n  const userInfo = useLoaderData();\n  const { submit } = useFetcher();\n  const editUser = () => {\n    const newUser = {\n      name: 'Modern.js'\n    }\n    return submit(newUser, {\n      method: 'post',\n      encType: 'application/json',\n    })\n  }\n  return (\n    <div>\n      <button onClick={editUser}>edit user</button>\n      <div className=\"user-profile\">\n        {userInfo}\n      </div>\n      <Outlet context={userInfo}></Outlet>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Markdown Header with HTML Image\nDESCRIPTION: Project header section combining HTML and Markdown to display the Modern.js logo and project title with centered alignment.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/utils/README.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n<p align=\"center\">\n  <a href=\"https://modernjs.dev\" target=\"blank\"><img src=\"https://lf3-static.bytednsdoc.com/obj/eden-cn/ylaelkeh7nuhfnuhf/modernjs-cover.png\" width=\"300\" alt=\"Modern.js Logo\" /></a>\n</p>\n\n<h1 align=\"center\">Modern.js</h1>\n\n<p align=\"center\">\n  A Progressive React Framework for modern web development.\n</p>\n```\n\n----------------------------------------\n\nTITLE: Defining AssetsRetry Types in TypeScript\nDESCRIPTION: This snippet defines the TypeScript types for AssetsRetryHookContext and AssetsRetryOptions, which are used to configure the asset retry functionality.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/output/assets-retry.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport type AssetsRetryHookContext = {\n  times: number;\n  domain: string;\n  url: string;\n  tagName: string;\n};\n\nexport type AssetsRetryOptions = {\n  type?: string[];\n  domain?: string[];\n  max?: number;\n  test?: string | ((url: string) => boolean);\n  crossOrigin?: boolean | 'anonymous' | 'use-credentials';\n  inlineScript?: boolean;\n  onRetry?: (options: AssetsRetryHookContext) => void;\n  onSuccess?: (options: AssetsRetryHookContext) => void;\n  onFail?: (options: AssetsRetryHookContext) => void;\n};\n```\n\n----------------------------------------\n\nTITLE: Getting User Configuration in Modern.js Plugin\nDESCRIPTION: Demonstrates how to access user-defined configuration from modern.config.ts file using getConfig API.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/cli-plugins/api.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\napi.onPrepare(() => {\n    const userConfig = api.getConfig();\n    if (userConfig.output) {\n        console.log('User has customized the output configuration');\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Type Definition for DevToolData in Modern.js Module Tools\nDESCRIPTION: Defines the DevToolData interface used in the beforeDevTask hook, specifying the structure of development tool configurations including name, subcommands, menu items, and action handlers.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/plugin-api/plugin-hooks.md#2025-04-21_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\nexport interface DevToolData {\n  name: string;\n  subCommands?: string[];\n  menuItem?: {\n    name: string;\n    value: string;\n  };\n  action: (\n    options: { port?: string },\n    context: { isTsProject?: boolean },\n  ) => void | Promise<void>;\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a New Entry with CLI Commands in Modern.js\nDESCRIPTION: This snippet shows the CLI command sequence to create a new application entry named 'landing-page' using the 'pnpm run new' command.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c08-entries.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n? Please select the operation you want: Create Element\n? Please select the type of element to create: New \"entry\"\n? Please fill in the entry name: landing-page\n```\n\n----------------------------------------\n\nTITLE: Configuring Dev Server startUrl in Modern.js\nDESCRIPTION: Shows different ways to configure the startUrl option in Modern.js dev configuration to automatically open browser pages when the dev server starts. Supports boolean, single URL string, or array of URLs.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/dev/start-url.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  dev: {\n    // 打开项目的默认页面，等价于 `http://localhost:<port>`\n    startUrl: true,\n    // 打开指定的页面\n    startUrl: 'http://localhost:8080',\n    // 打开多个页面\n    startUrl: ['http://localhost:8080', 'http://localhost:8080/about'],\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Customizing ESBuild Options in Modern.js Module\nDESCRIPTION: Example of modifying ESBuild configuration options, including changing output file extensions and registering ESBuild plugins.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    esbuildOptions: options => {\n      options.outExtension = { '.js': '.mjs' };\n      return options;\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Accessing Webpack Minimizer Chain IDs in Modern.js\nDESCRIPTION: This snippet shows how to access webpack minimizer chain IDs in Modern.js. The MINIMIZER.XXX format is used to match specific minimizers used in the webpack configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/webpack-chain.mdx#2025-04-21_snippet_8\n\nLANGUAGE: markdown\nCODE:\n```\n#### CHAIN_ID.MINIMIZER\n\n`MINIMIZER.XXX` can match a certain minimizer.\n\n| ID                  | Description                               |\n| ------------------- | ----------------------------------------- |\n| `MINIMIZER.JS`      | correspond to `TerserWebpackPlugin`       |\n| `MINIMIZER.CSS`     | correspond to `CssMinimizerWebpackPlugin` |\n| `MINIMIZER.ESBUILD` | correspond to `ESBuildPlugin`             |\n| `MINIMIZER.SWC`     | correspond to `SwcWebpackPlugin`          |\n```\n\n----------------------------------------\n\nTITLE: Creating a Simple React Component for Testing\nDESCRIPTION: This code snippet shows a basic React component that will be used for testing. It includes a heading and a link, demonstrating typical elements found in a React component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/testing/vitest.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Link } from '@modern-js/runtime/router';\n\nconst Index = () => (\n  <div>\n    <h1>Home</h1>\n    <Link to=\"/about\">About</Link>\n  </div>\n);\n\nexport default Index;\n```\n\n----------------------------------------\n\nTITLE: Configuring Source Build Options in Modern.js (TypeScript)\nDESCRIPTION: This snippet shows how to pass custom options to the sourceBuild experiment in Modern.js. It uses the @rsbuild/plugin-source-build plugin under the hood, allowing for configuration of options like custom source field names and resolve priorities.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/experiments/source-build.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  experiments: {\n    sourceBuild: {\n      sourceField: 'my-source',\n      resolvePriority: 'output',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom Middleware Setup in Modern.js DevServer\nDESCRIPTION: Example of using setupMiddlewares to add custom middleware before and after the built-in middlewares. This provides flexibility in the middleware execution order for development server requests.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/dev-server.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    devServer: {\n      setupMiddlewares: [\n        (middlewares, server) => {\n          middlewares.unshift((req, res, next) => {\n            next();\n          });\n\n          middlewares.push((req, res, next) => {\n            next();\n          });\n        },\n      ],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Babel Plugin with Preset-env in Modern.js Module\nDESCRIPTION: This example demonstrates how to configure the Babel plugin with the @babel/preset-env preset in a Modern.js Module configuration. It shows the setup for using specific Babel presets within the plugin options.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/plugins/official-list/plugin-babel.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\nimport { modulePluginBabel } from '@modern-js/plugin-module-babel';\n\nexport default defineConfig({\n  plugins: [\n    moduleTools(),\n    modulePluginBabel({\n      presets: [['@babel/preset-env']],\n    }),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Importing and Using Hook API in TypeScript\nDESCRIPTION: This snippet demonstrates how to import and use the AfterMatchHook and AfterRenderHook from Modern.js runtime server. It shows the basic structure of implementing these hooks.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/web-server/hook.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { AfterMatchHook, AfterRenderHook } from '@modern-js/runtime/server';\n\nexport const afterMatch: AfterMatchHook = (context, next) => {};\nexport const afterRender: AfterRenderHook = (context, next) => {};\n```\n\n----------------------------------------\n\nTITLE: Configuring Module Federation for Application-Level Modules\nDESCRIPTION: Configures module-federation.config.ts to expose the application-level module from the producer application. Sets up the export path, manifest location, and shared dependencies.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/module-federation/application.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createModuleFederationConfig } from '@module-federation/modern-js';\n\nexport default createModuleFederationConfig({\n  name: 'remote',\n  manifest: {\n    filePath:'static',\n  },\n  filename: 'static/remoteEntry.js',\n  exposes: {\n    './app': './src/export-App.tsx',\n  },\n  shared: {\n    react: { singleton: true },\n    'react-dom': { singleton: true },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing lifecycle hooks in Modern.js Web Server\nDESCRIPTION: Example showing how to implement afterMatch and afterRender hooks for server customization. These hooks are used for authorization, URL rewriting, redirects, and HTML content injection.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/web-server.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport type {\n  AfterMatchHook,\n  AfterRenderHook,\n} from '@modern-js/runtime/server';\n\nexport const afterMatch: AfterMatchHook = (ctx, next) => {\n  next();\n};\n\nexport const afterRender: AfterRenderHook = (ctx, next) => {\n  next();\n};\n```\n\n----------------------------------------\n\nTITLE: Executing Logic After Dev Compilation in Modern.js Plugin\nDESCRIPTION: This snippet demonstrates how to use the onDevCompileDone hook to run custom logic after the development server completes compilation. This is useful for operations like opening the browser after the initial compilation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/plugin/cli-plugins/api.mdx#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\napi.onDevCompileDone(() => {\n    // 首次编译完成，打开浏览器\n});\n```\n\n----------------------------------------\n\nTITLE: Upgrading Modern.js Dependencies\nDESCRIPTION: The 'modern upgrade' command updates Modern.js-related dependencies to the latest versions, with options to specify npm registry and customize paths.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/basic/command-preview.md#2025-04-21_snippet_8\n\nLANGUAGE: bash\nCODE:\n```\nUsage: modern upgrade [options]\n\n升级 Modern.js 到最新版本\n\nOptions:\n  --registry <registry>  定制 npm registry (default: \"\")\n  -d,--debug             开启 Debug 模式，打印调试日志信息 (default: false)\n  --cwd <cwd>            项目路径 (default: \"\")\n  -h, --help             display help for command\n```\n\n----------------------------------------\n\nTITLE: Displaying routes/ Directory Structure for Conventional Routing in Modern.js\nDESCRIPTION: Shows the conventional directory structure with layout.tsx and page.tsx files used to define routes in a Modern.js application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/hooks/src/routes.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n.\n└── routes\n    ├── layout.tsx\n    ├── page.tsx\n    └── user\n        ├── layout.tsx\n        └── page.tsx\n```\n\n----------------------------------------\n\nTITLE: Implementing SSR Fallback Middleware in Modern.js\nDESCRIPTION: This snippet illustrates how to create a middleware function to conditionally force Client-Side Rendering (CSR) fallback in a Modern.js SSR application. It sets a custom header to trigger CSR rendering based on certain conditions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/server/ssr.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport const middleware = (ctx, next) => {\n  const { req, res } = ctx;\n  if (condition) {\n    req.headers['x-modern-ssr-fallback'] = '1';\n  }\n\n  next();\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling Syntax Checking in Modern.js Configuration\nDESCRIPTION: Example configuration showing how to enable syntax checking by setting security.checkSyntax to true in a Modern.js project.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/security/check-syntax.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  security: {\n    checkSyntax: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Storybook Error Debug Configuration\nDESCRIPTION: Modified Storybook core-server configuration to show detailed error messages during preview compilation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/faq/storybook.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nvar _await$Promise$all = await Promise.all([\n    preview.catch(e => console.info(e)),\n    manager // TODO #13083 Restore this when compiling the preview is fast enough\n  // .then((result) => {\n  //   if (!options.ci && !options.smokeTest) openInBrowser(address);\n  //   return result;\n  // })\n  .catch(previewBuilder.bail)]),\n      _await$Promise$all2 = _slicedToArray(_await$Promise$all, 2),\n      previewResult = _await$Promise$all2[0],\n      managerResult = _await$Promise$all2[1]; // TODO #13083 Remove this when compiling the preview is fast enough\n```\n\n----------------------------------------\n\nTITLE: Using Target Environment Detection in Webpack Config\nDESCRIPTION: Example showing how to use the target parameter to apply configurations based on the target runtime environment.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/webpack.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    webpack: (config, { target }) => {\n      if (target === 'node') {\n        // ...\n      }\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using Monitors in React Components\nDESCRIPTION: Shows how to use monitors within React components with environment checking for Node.js runtime.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/server-monitor/monitors.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { getMonitors } from '@modern-js/runtime';\nconst Page = () => {\n    const { context } = useRuntimeContext();\n    if (process.env.MODERN_TARGET === 'node') {\n        const monitors = getMonitors();\n        monitors.info();\n    }\n    return <div>Hello World</div>\n}\nexport default Page;\n```\n\n----------------------------------------\n\nTITLE: Configuring Webpack in Modern.js using defineConfig\nDESCRIPTION: Example of how to configure Webpack in Modern.js by adding tools.webpack to the modern.config.ts file. The configuration can be provided as a function that receives the default config object and can modify it or return a new object.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/low-level.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  tools: {\n    webpack: config => {},\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Registering Custom Monitors in Server Middleware\nDESCRIPTION: Example of how to register a custom monitor using the Monitors push API in a server middleware. The custom monitor can handle different types of events.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/server-monitor/monitors.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { CoreMonitors } from '@modern-js/types';\nconst injectMonitorMiddleware = (c) => {\n    const monitors = c.get('monitors');\n    const myMonitor = (event: MonitorEvent) => {\n        if (event.type === 'log') {\n          // some code\n        } else {\n          // some other code\n        }\n    }\n    monitors.push(myMonitor);\n    return next();\n}\n\nexport const middlewares = [injectMonitorMiddleware]\n```\n\n----------------------------------------\n\nTITLE: Configuring Storybook for Less Compatibility\nDESCRIPTION: Demonstrates how to configure Storybook's webpack chain to set Less options for compatibility with components using Less v3.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/faq/build.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nmodule.exports = {\n  framework: {\n    options: {\n      builderConfig: {\n        tools: {\n          webpackChain(chain, { CHAIN_ID }) {\n            chain.module\n              .rule(CHAIN_ID.RULE.LESS)\n              .use(CHAIN_ID.USE.LESS)\n              .tap(options => {\n                options.lessOptions = {\n                  ...options.lessOptions,\n                  math: 'always',\n                };\n                return options;\n              });\n          },\n        },\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using useLoaderData Hook in Modern.js Route Component\nDESCRIPTION: This code demonstrates how to use the useLoaderData hook in a Modern.js route component to access data fetched by the Data Loader.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/tutorials/first-app/c05-loader.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useLoaderData } from '@modern-js/runtime/router';\nimport type { LoaderData } from './page.data';\n\nfunction Index() {\n  const { data } = useLoaderData() as LoaderData;\n\n  return (\n    <div className=\"container lg mx-auto\">\n      <Helmet>\n        <title>All</title>\n      </Helmet>\n      <List\n        dataSource={data}\n        renderItem={info => <Item key={info.name} info={info} />}\n      />\n    </div>\n  );\n}\n\nexport default Index;\n```\n\n----------------------------------------\n\nTITLE: Using Monitors in React Components\nDESCRIPTION: Example of how to use Monitors in a React component. It checks if the current environment is Node.js before accessing Monitors, as they only work on the server side.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/server-monitor/monitors.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { getMonitors } from '@modern-js/runtime';\nconst Page = () => {\n    const { context } = useRuntimeContext();\n    if (process.env.MODERN_TARGET === 'node') {\n        const monitors = getMonitors();\n        monitors.info();\n    }\n    return <div>Hello World</div>\n}\nexport default Page;\n```\n\n----------------------------------------\n\nTITLE: Invoking BFF Function with Dynamic Routes and RequestOption\nDESCRIPTION: Shows how to call a BFF function that requires dynamic route parameters and a RequestOption object from a React component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/bff/function.mdx#2025-04-21_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nimport { post } from '@api/[sku]/[id]/item';\n\nexport default () => {\n  const addSku = () => {\n    post('0001' /* sku */, '1234' /* id */, {\n      query: {\n        /* ... */\n      },\n      data: {\n        /* ... */\n      },\n    });\n  };\n\n  return <div onClick={addSku}>Add SKU</div>;\n};\n```\n\n----------------------------------------\n\nTITLE: Defining EnableInlineScripts Type in TypeScript\nDESCRIPTION: Type definition for enableInlineScripts configuration option that can accept a boolean, RegExp, or function parameter to determine if scripts should be inlined. The function receives an object with size and name parameters.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/enable-inline-scripts.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype EnableInlineScripts =\n  | boolean\n  | RegExp\n  | ((params: { size: number; name: string }) => boolean);\n```\n\n----------------------------------------\n\nTITLE: Using useLocation Hook Example in Modern.js Router\nDESCRIPTION: Example of how to use the useLocation hook to track page views in a React application. The hook is used to access the current location's pathname for analytics tracking.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/router/router.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useLocation } from \"@modern-js/runtime/router\";\n\nfunction usePageViews() {\n  let location = useLocation();\n  React.useEffect(() => {\n    ga.send([\"pageview\", location.pathname]);\n  }, [location]);\n}\n\nfunction App() {\n  usePageViews();\n  return (\n    //...\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Default Configuration Values for Modern.js dev.client\nDESCRIPTION: Default configuration values for the dev.client settings in Modern.js. Includes default values for WebSocket path, port, host, protocol, reconnection attempts, and error overlay settings.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/dev/client.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst defaultConfig = {\n  path: '/webpack-hmr',\n  port: '<port>',\n  // 默认为 \"location.hostname\"\n  host: '',\n  // 默认为 \"location.protocol === 'https:' ? 'wss' : 'ws'\"\"\n  protocol: undefined,\n  reconnect: 100,\n  overlay: false,\n};\n```\n\n----------------------------------------\n\nTITLE: Visualizing Nested Routes in Modern.js\nDESCRIPTION: ASCII diagram showing how nested routes work in a user profile example, demonstrating the relationship between URL segments and UI components.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/routes.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n/user/johnny/profile                  /user/johnny/posts\n+------------------+                  +-----------------+\n| User             |                  | User            |\n| +--------------+ |                  | +-------------+ |\n| | Profile      | |  +------------>  | | Posts       | |\n| |              | |                  | |             | |\n| +--------------+ |                  | +-------------+ |\n+------------------+                  +-----------------+\n```\n\n----------------------------------------\n\nTITLE: Skipping Tests with Bypass Method in modern.js\nDESCRIPTION: This snippet demonstrates a pattern for conditionally skipping tests in the modern.js framework. It uses a bypass method to selectively run tests depending on the current environment or configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/components/convention-routing-motivation.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n// Skip tests\nbypass(test)('this test will be skipped', () => {});\n\n// If you don't need the result, you can directly call it\nbypass(test.only)('this test will not run with .only', () => {});\n```\n\n----------------------------------------\n\nTITLE: Default Autoprefixer Configuration in Modern.js\nDESCRIPTION: The default configuration for Autoprefixer in Modern.js projects. It sets flexbox to 'no-2009' and uses browserslist configuration from the project, with output.overrideBrowserslist taking higher priority if defined.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/autoprefixer.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n{\n  flexbox: 'no-2009',\n  // browserslist 取决于项目中的 browserslist 配置\n  // 以及 `output.overrideBrowserslist`(优先级更高) 配置\n  overrideBrowserslist: browserslist,\n}\n```\n\n----------------------------------------\n\nTITLE: Using Defined Global Variables in JavaScript\nDESCRIPTION: Example of using a defined global variable (process.env.VERSION) in JavaScript code, and how it gets compiled.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/config/build-config.mdx#2025-04-21_snippet_14\n\nLANGUAGE: javascript\nCODE:\n```\n// pre-compiler code\nconsole.log(process.env.VERSION);\n```\n\nLANGUAGE: javascript\nCODE:\n```\n// compiled code\nconsole.log('1.0.0');\n```\n\n----------------------------------------\n\nTITLE: Self-Controlled Routing with React Router\nDESCRIPTION: Example of implementing self-controlled routing using React Router in Modern.js application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/concept/entries.mdx#2025-04-21_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { BrowserRouter, Route, Routes } from '@modern-js/runtime/router';\n\nexport default () => {\n  return (\n    <BrowserRouter>\n      <Routes>\n        <Route index element={<div>index</div>} />\n        <Route path=\"about\" element={<div>about</div>} />\n      </Routes>\n    </BrowserRouter>\n  );\n};\n```\n\n----------------------------------------\n\nTITLE: TypeScript Definition for NavLink Component in Modern.js Router\nDESCRIPTION: Defines the NavLink component and its props interface. NavLink is a special kind of Link that knows whether it is 'active' based on the current URL.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/router/router.mdx#2025-04-21_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare function NavLink(props: NavLinkProps): React.ReactElement;\n\ninterface NavLinkProps\n  extends Omit<LinkProps, 'className' | 'style' | 'children'> {\n  caseSensitive?: boolean;\n  children?:\n    | React.ReactNode\n    | ((props: { isActive: boolean }) => React.ReactNode);\n  className?: string | ((props: { isActive: boolean }) => string | undefined);\n  end?: boolean;\n  style?:\n    | React.CSSProperties\n    | ((props: { isActive: boolean }) => React.CSSProperties);\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Plugin Type Definition in TypeScript\nDESCRIPTION: Demonstrates the change from using the Plugin type to RuntimePluginFuture type in Modern.js runtime plugins.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/runtime-plugins/migration.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// Old Syntax\nimport type { Plugin } from '@modern-js/runtime';\n\nconst plugin: Plugin = { ... };\n\n// New Syntax\nimport type { RuntimePluginFuture } from '@modern-js/runtime';\n\nconst plugin: RuntimePluginFuture = { ... };\n```\n\n----------------------------------------\n\nTITLE: Modifying Babel Configuration with Function API\nDESCRIPTION: Example of using the Function type of tools.babel to modify Babel configuration by adding a plugin for component library import optimization.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/babel.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    babel(config) {\n      // 添加一个插件，比如配置某个组件库的按需引入\n      config.plugins.push([\n        'babel-plugin-import',\n        {\n          libraryName: 'xxx-components',\n          libraryDirectory: 'es',\n          style: true,\n        },\n      ]);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using isWebWorker parameter for Web Worker specific configurations\nDESCRIPTION: Example showing how to apply Web Worker specific webpack configurations using the isWebWorker parameter, which is equivalent to checking if target === 'web-worker'.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/webpack-chain.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    webpackChain: (chain, { isWebWorker }) => {\n      if (isWebWorker) {\n        // ...\n      }\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Demonstrating Basic Route Structure in Modern.js\nDESCRIPTION: This code snippet illustrates a simple route structure in Modern.js, showing how page.tsx files are used to create routes for the root and user paths.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/hooks/src/routes.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n.\n└── routes\n    ├── page.tsx\n    └── user\n        └── page.tsx\n```\n\n----------------------------------------\n\nTITLE: Implementing Koa Middleware with Modern.js Hook\nDESCRIPTION: Demonstrates how to use the hook function to add a Koa middleware to a BFF function in a Modern.js application. The middleware modifies the query parameters before the route handler executes.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/bff/hook.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { hook } from '@modern-js/runtime/koa';\n\nexport default hook(({ addMiddleware }) => {\n  addMiddleware(async (ctx, next) => {\n    ctx.req.query.id = 'koa';\n    await next();\n  });\n});\n```\n\n----------------------------------------\n\nTITLE: Setting Default CSS Modules Configuration in TypeScript\nDESCRIPTION: This snippet defines the default configuration for CSS Modules in Modern.js. It sets auto to true, enables camelCase for export conventions, and disables named exports and global exports.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/output/css-modules.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst defaultCssModules = {\n  auto: true,\n  namedExport: false,\n  exportGlobals: false,\n  exportLocalsConvention: 'camelCase',\n};\n```\n\n----------------------------------------\n\nTITLE: Defining a Basic Reduck Model in JavaScript\nDESCRIPTION: This snippet demonstrates how to create a simple Reduck model named 'count' with initial state using the model API from Modern.js runtime.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/model/quick-start.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { model } from '@modern-js/runtime/model';\n\nconst countModel = model('count').define({\n  state: {\n    value: 1,\n  },\n});\n\nexport default countModel;\n```\n\n----------------------------------------\n\nTITLE: Adding Logic After Dev Server Start in Modern.js Plugin\nDESCRIPTION: This snippet demonstrates how to use the onAfterDev hook to execute custom logic after the development server has started successfully. It corresponds to the onAfterStartDevServer hook in Rsbuild.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/plugin/cli-plugins/api.mdx#2025-04-21_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\napi.onAfterDev(()=>{\n    // 上报 dev 相关信息\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring SWC Options for Rspack in Modern.js\nDESCRIPTION: This snippet demonstrates how to set SWC options for the Rspack builtin:swc-loader in a Modern.js project. It shows how to disable external helpers using the tools.swc configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/swc.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig<'rspack'>({\n  tools: {\n    swc: {\n      jsc: {\n        externalHelpers: false,\n      },\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Displaying Layout Component Structure in Modern.js\nDESCRIPTION: This code snippet shows how to structure layout components in Modern.js routes. It demonstrates the use of layout.tsx files at different levels of the route hierarchy.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/hooks/src/routes.mdx#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n.\n└── routes\n    ├── layout.tsx\n    ├── page.tsx\n    └── user\n        ├── layout.tsx\n        └── page.tsx\n```\n\n----------------------------------------\n\nTITLE: Configuring Dynamic Route Parameters for SSG\nDESCRIPTION: Configuration that specifies parameters for dynamic routes when using SSG, allowing generation of static pages with specific parameter values.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/render/ssg.mdx#2025-04-21_snippet_7\n\nLANGUAGE: js\nCODE:\n```\nexport default defineConfig({\n  output: {\n    ssg: {\n      routes: [\n        {\n          url: '/user/:id',\n          params: [{\n            id: 'modernjs',\n          }],\n        },\n      ],\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Static Asset Output in Modern.js\nDESCRIPTION: Demonstrates how to use the 'output.distPath' configuration to customize the output directory for static assets such as images, SVGs, fonts, and media files.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/output-files.mdx#2025-04-21_snippet_1\n\nLANGUAGE: ts\nCODE:\n```\nexport default {\n  output: {\n    distPath: {\n      image: 'assets',\n      svg: 'assets',\n      font: 'assets',\n      media: 'assets',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Incorrect usage of babel-plugin-import\nDESCRIPTION: Example of incorrect configuration for multiple babel-plugin-imports that may cause compilation to hang without error logs.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/troubleshooting/builder.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\n// wrong example\nexport default {\n  tools: {\n    babel(config, { addPlugins }) {\n      addPlugins([\n        [\n          'babel-plugin-import',\n          { libraryName: 'antd', libraryDirectory: 'es' },\n        ],\n        [\n          'babel-plugin-import',\n          { libraryName: 'antd-mobile', libraryDirectory: 'es' },\n        ],\n      ]);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Creating Error Boundaries for Routes in Modern.js\nDESCRIPTION: Example of implementing an error boundary component for routes using the useRouteError hook to access error details when a route component fails.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/routes.mdx#2025-04-21_snippet_11\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useRouteError } from '@modern-js/runtime/router';\n\nconst ErrorBoundary = () => {\n  const error = useRouteError();\n  return (\n    <div>\n      <h1>{error.status}</h1>\n      <h2>{error.message}</h2>\n    </div>\n  );\n};\nexport default ErrorBoundary;\n```\n\n----------------------------------------\n\nTITLE: Advanced SSG Route Configuration in Modern.js\nDESCRIPTION: Example of configuring specific routes for SSG with custom parameters and headers, including a dynamic route with parameter substitution.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/output/ssg.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  output: {\n    ssg: {\n      routes: [\n        '/',\n        '/about',\n        {\n          url: '/user/:id',\n          headers: {\n            cookies: 'name=modernjs',\n          },\n          params: [\n            {\n              id: 'modernjs',\n            },\n          ],\n        },\n      ],\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Setting IIFE Format in Modern.js Module\nDESCRIPTION: Configures the JavaScript output format to Immediately Invoked Function Expression (IIFE), which wraps code in a function expression to prevent variable conflicts with the global scope.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_24\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    format: 'iife',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring JSX Transformation in Modern.js Module\nDESCRIPTION: Sets the JSX compilation mode for React compatibility. This example uses 'transform' mode for React 16 compatibility instead of the default automatic runtime for React 17+.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_31\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    jsx: 'transform',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Supporting ESM in Modern.js server\nDESCRIPTION: A feature addition that adds support for ECMAScript modules (ESM) in the server, allowing developers to use modern JavaScript module syntax.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/plugin-server/CHANGELOG.md#2025-04-21_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\n- 44c1bc4: feat(server): support esm\n  feat(server): support esm\n```\n\n----------------------------------------\n\nTITLE: Creating Custom Web Server Directory via CLI\nDESCRIPTION: Command line instructions for creating a custom Web Server source directory in Modern.js using the project's CLI tool.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/web-server/middleware.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\npnpm run new\n? 请选择你想要的操作 创建工程元素\n? 新建「自定义 Web Server」源码目录\n```\n\n----------------------------------------\n\nTITLE: Basic UnstableMiddleware Usage in TypeScript\nDESCRIPTION: Shows the basic setup of UnstableMiddleware in a server file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/web-server/unstable_middleware.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { UnstableMiddleware } from '@modern-js/runtime/server';\n\nexport const unstableMiddleware: UnstableMiddleware[] = [];\n```\n\n----------------------------------------\n\nTITLE: Importing SVG as URL in Modern.js\nDESCRIPTION: When output.svgDefaultExport is set to 'url', SVG files are imported as URL strings. This is the default behavior.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/output/svg-default-export.mdx#2025-04-21_snippet_0\n\nLANGUAGE: js\nCODE:\n```\nimport logo from './logo.svg';\n\nconsole.log(logo); // => 资源 url\n```\n\n----------------------------------------\n\nTITLE: Adding Named Exports for CLI Plugins\nDESCRIPTION: Feature enhancement to add named exports for all CLI plugins, making import statements more explicit and improving usability.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/runtime/plugin-testing/CHANGELOG.md#2025-04-21_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n- 4c4c0ad: feat: add named exports for all CLI plugins\n\n  feat: 为各个 CLI 插件添加 named 导出\n```\n\n----------------------------------------\n\nTITLE: Merging Runtime Chunk into Page Bundle in Modern.js\nDESCRIPTION: Configuration to bundle runtime chunk code directly into the page chunks instead of generating a separate file. Uses the bundlerChain tool to modify optimization settings.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/disable-inline-runtime-chunk.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    bundlerChain(chain) {\n      chain.optimization.runtimeChunk(false);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Project Structure for Multi-Entry Modern.js Application\nDESCRIPTION: Sample directory structure showing a project with two entry points: 'entryA' using conventional routing and 'entryB' using self-controlled routing.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/output/ssg.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n.\n└── src\n    ├── entryA\n    │   └── routes\n    └── entryB\n        └── App.tsx\n```\n\n----------------------------------------\n\nTITLE: Adding Babel Plugins with addPlugins Helper\nDESCRIPTION: Example of using the addPlugins utility function to add Babel plugins to the configuration without modifying the original config array.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/babel.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    babel(config, { addPlugins }) {\n      addPlugins([\n        [\n          'babel-plugin-import',\n          {\n            libraryName: 'xxx-components',\n            libraryDirectory: 'es',\n            style: true,\n          },\n        ],\n      ]);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling SSR in Development Environment for SSG Testing\nDESCRIPTION: Configuration that enables Server-Side Rendering (SSR) during development to test SSG rendering and catch potential issues early.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/render/ssg.mdx#2025-04-21_snippet_2\n\nLANGUAGE: ts\nCODE:\n```\nexport default defineConfig({\n  server: {\n    ssr: process.env.NODE_ENV === 'development',\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring AppIcon with Object Configuration in JavaScript\nDESCRIPTION: The expanded object-based configuration for application icons, equivalent to the string shorthand. This approach allows for more detailed configuration of icon properties.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/html/app-icon.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  html: {\n    appIcon: { icons: [{ src: './src/assets/icon.png', size: 180 }] }\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Registering a Runtime Plugin in Modern.js Configuration\nDESCRIPTION: This code snippet shows how to register a custom runtime plugin in the Modern.js runtime configuration file. It uses the defineRuntimeConfig function to add the plugin to the application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/render/before-render.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineRuntimeConfig } from '@modern-js/runtime';\nimport myRuntimePlugin from './plugins/myRuntimePlugin';\n\nexport default defineRuntimeConfig({\n  plugins: [myRuntimePlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Dependency Configuration in package.json for App Referencing Lib\nDESCRIPTION: Demonstrates how to configure the app's package.json to reference the lib package using workspace protocol in a monorepo setup.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/source-build.mdx#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"name\": \"app\",\n  \"dependencies\": {\n    \"lib\": \"workspace:*\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Preventing Resource Inlining in React Component\nDESCRIPTION: This example shows how to prevent inlining of an image resource in a React component using the 'url' URL parameter, regardless of its size.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/advanced-features/page-performance/inline-assets.mdx#2025-04-21_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport React from 'react';\nimport img from './foo.png?url';\n\nexport default function Foo() {\n  return <img src={img} />;\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Build Platform to Browser in Modern.js Module\nDESCRIPTION: Changes the target platform from the default Node.js to browser environment. This affects various build behaviors including module resolution and environment-specific optimizations.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_36\n\nLANGUAGE: javascript\nCODE:\n```\nexport default defineConfig({\n  buildConfig: {\n    platform: 'browser',\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: 使用 transform Hook 进行代码转换\nDESCRIPTION: 这个示例展示了如何使用 Modern.js Module 的 transform Hook 对模块内容进行转换。这个 Hook 在 esbuild 的 onLoad 回调中触发,用于转换从 load 阶段获取的模块内容。\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/advance/in-depth-about-build.md#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\ncompiler.hooks.transform.tapPromise('6to5', async args => {\n  const result = babelTransform(args.code, { presets: ['@babel/preset-env'] });\n  return {\n    code: result.code,\n    map: result.map,\n  };\n});\n```\n\n----------------------------------------\n\nTITLE: Directory Structure for Entry-Specific HTML Templates\nDESCRIPTION: Shows the directory structure for customizing HTML templates for specific entries, demonstrating how to organize entry-specific HTML fragments.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/html.mdx#2025-04-21_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\n.\n├── config/\n│   └── html/\n│       └── entry1\n│           ├── head.html\n│           └── body.html\n└── src/\n    ├── entry1/\n    │   └── routes\n    └── entry2/\n        └── routes\n```\n\n----------------------------------------\n\nTITLE: Configuring Runtime Plugin in Modern.js\nDESCRIPTION: Example showing how to configure runtime plugins in Modern.js using the plugins field in src/modern.runtime.ts file. The example demonstrates adding the router plugin to the runtime configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/plugin/introduction.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineRuntimeConfig } from '@modern-js/runtime';\nimport { routerPlugin } from '@modern-js/runtime/router';\n\nexport default defineRuntimeConfig({\n  plugins: [routerPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Less Configuration with buildPreset\nDESCRIPTION: Configuration to fix Less compilation errors in component libraries by setting the math option to 'always' using buildPreset approach.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/faq/build.mdx#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nmodule.exports = {\n  buildPreset({ extendPreset }) {\n    return extendPreset('your-build-preset', {\n      style: {\n        less: {\n          lessOptions: {\n            math: 'always',\n          },\n        },\n      },\n    });\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Return Type of loadable Function\nDESCRIPTION: Type definition for the LoadableComponent returned by the loadable function, showing the component props and additional methods for preloading.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/utility/loadable.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\ntype LoadableComponent<Props> = React.ComponentType<\n  Props & { fallback?: JSX.Element }\n> & {\n  preload(props?: Props): void;\n  load(props?: Props): Promise<React.ComponentType<Props>>;\n};\n```\n\n----------------------------------------\n\nTITLE: Defining the CheckSyntax Type in TypeScript\nDESCRIPTION: TypeScript type definition for the checkSyntax configuration option that can be a boolean or an object with targets, exclude, and ecmaVersion properties.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/security/check-syntax.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype CheckSyntax =\n  | boolean\n  | {\n      targets?: string[];\n      exclude?: RegExp | RegExp[];\n      ecmaVersion?: EcmaVersion;\n    };\n```\n\n----------------------------------------\n\nTITLE: Configuring Storybook WebpackChain in Modern.js\nDESCRIPTION: Example of configuring Storybook webpack-chain settings in Modern.js Module. This allows for more granular control over webpack configuration using the webpack-chain API.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/dev.md#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  dev: {\n    storybook: {\n      webpackChain(chain) {\n        return chain;\n      },\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Defining a Simple BFF Function in TypeScript\nDESCRIPTION: Creates a basic BFF function that returns a greeting string. This function is defined in the api/lambda directory and can be directly invoked from the frontend.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/bff/function.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport const get = async () => 'Hello Modern.js';\n```\n\n----------------------------------------\n\nTITLE: Implementing Root Route Component for Conventional Routing Sub-App\nDESCRIPTION: React component that serves as the root route for a sub-application with conventional routing.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/micro-frontend/c02-development.mdx#2025-04-21_snippet_5\n\nLANGUAGE: js\nCODE:\n```\nconst Index = () => {\n  return (\n    <div className=\"container-box\">subApp: 约定式路由的子应用的根路由</div>\n  );\n};\n\nexport default Index;\n```\n\n----------------------------------------\n\nTITLE: Importing Unsupported Node.js Module in Browser\nDESCRIPTION: This code shows what happens when importing an unsupported Node.js module (fs) in a browser environment. The module falls back to an empty object.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/plugins/official-list/plugin-node-polyfill.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport fs from 'fs';\n\nconsole.log(fs); // -> {}\n```\n\n----------------------------------------\n\nTITLE: Configuring Documentation Page Settings in Markdown Frontmatter\nDESCRIPTION: Markdown frontmatter configuration for a documentation overview page. It sets various page properties including sidebar label, title, and position in the navigation structure.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/index.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n---\noverview: true\nsidebar_label: Overview\ntitle: Overview\nsidebar_position: 1\n---\n```\n\n----------------------------------------\n\nTITLE: Creating Changesets in Modern.js\nDESCRIPTION: The 'modern change' command generates markdown files for the changesets tool, which is used for version management and changelog generation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/basic/command-preview.md#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nUsage: modern change [options]\n\n创建变更集\n\nOptions:\n  --empty     创建空变更集 (default: false)\n  --open      使用编辑器中打开创建的变更集 (default: false)\n  -h, --help  display help for command\n```\n\n----------------------------------------\n\nTITLE: Checking Installed Dependency Versions with npm/yarn in Modern.js\nDESCRIPTION: Example of using the npm ls command to check the actual installed version of a dependency in a Modern.js project. The output shows the dependency tree with version information.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/troubleshooting/dependencies.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nproject\n└─┬ @modern-js/app-tools@x.y.z\n  └── @modern-js/core@x.y.z\n```\n\n----------------------------------------\n\nTITLE: Implementing buildPlatform Hook in TypeScript\nDESCRIPTION: Hook triggered before each platform build task execution. Receives platform identifier.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/plugin-api/plugin-hooks.md#2025-04-21_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nexport const myPlugin = (): CliPlugin<ModuleTools> => ({\n  name: 'my-plugin',\n\n  setup() {\n    return {\n      buildPlatform({ platform }: Options): void {\n        console.info(`current task is ${platform}`);\n      },\n    };\n  },\n});\n```\n\nLANGUAGE: typescript\nCODE:\n```\nexport interface Options {\n  platform: string;\n}\n```\n\n----------------------------------------\n\nTITLE: Generated HTML Output for Other Entries\nDESCRIPTION: The resulting HTML output shows the injected script tag for all other entry pages.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/html/tags-by-entries.mdx#2025-04-21_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<script src=\"a.js\"></script>\n```\n\n----------------------------------------\n\nTITLE: Configuring Disabled Entry Directories in Modern.js\nDESCRIPTION: Example showing how to configure source.disableEntryDirs to prevent the 'src/one' directory from being recognized as an entry point.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/source/disable-entry-dirs.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  source: {\n    disableEntryDirs: ['./src/one'],\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Using useLocation Hook for Page View Tracking\nDESCRIPTION: Example of using the useLocation hook to track page views in a React application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/router/router.mdx#2025-04-21_snippet_3\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport { useLocation } from \"@modern-js/runtime/router\";\n\nfunction usePageViews() {\n  let location = useLocation();\n  React.useEffect(() => {\n    ga.send([\"pageview\", location.pathname]);\n  }, [location]);\n}\n\nfunction App() {\n  usePageViews();\n  return (\n    //...\n  );\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring SSG for Self-controlled Routes\nDESCRIPTION: Configuration that explicitly specifies which routes should be statically generated when using self-controlled routing in Modern.js.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/render/ssg.mdx#2025-04-21_snippet_6\n\nLANGUAGE: ts\nCODE:\n```\nexport default defineConfig({\n  output: {\n    ssg: {\n      routes: ['/', '/about'],\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Producer Development Configuration\nDESCRIPTION: Modern.js configuration for the producer application with development port settings.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/module-federation/usage.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { appTools, defineConfig } from '@modern-js/app-tools';\nimport { moduleFederationPlugin } from '@module-federation/modern-js';\n\nexport default defineConfig({\n  dev: {\n    port: 3051,\n  },\n  runtime: {\n    router: true,\n  },\n  plugins: [\n    appTools({\n      bundler: 'rspack',\n    }),\n    moduleFederationPlugin(),\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Linking to SWC Issues Page in Markdown\nDESCRIPTION: This snippet provides a markdown link to the GitHub issues page for SWC, where users can report bugs or provide feedback.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/rspackPrecautions.mdx#2025-04-21_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n[SWC issues](https://github.com/swc-project/swc/issues)\n```\n\n----------------------------------------\n\nTITLE: Executing Command with Options using pnpm v6 in Bash\nDESCRIPTION: This bash command shows how to run a command defined in package.json with additional options using pnpm v6, using the -- separator to pass arguments to the script.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/troubleshooting/cli.mdx#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\npnpm run command -- --option\n```\n\n----------------------------------------\n\nTITLE: Forcing URL Import with Query Parameter in Modern.js\nDESCRIPTION: When using component mode, you can still import an SVG as a URL by adding the ?url query parameter to the import path.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/output/svg-default-export.mdx#2025-04-21_snippet_2\n\nLANGUAGE: js\nCODE:\n```\nimport logo from './logo.svg?url';\n\nconsole.log(logo); // => 资源 url\n```\n\n----------------------------------------\n\nTITLE: Configuring Rsbuild in Storybook Main Config\nDESCRIPTION: Example of using builderConfig in Storybook configuration to customize Rsbuild settings, including setting up React aliases.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/basic/using-storybook.mdx#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nconst config = {\n  framework: {\n    name: '@modern-js/storybook',\n    options: {\n      builderConfig: {\n        alias: {\n          react: require.resolve('react'),\n          'react-dom': require.resolve('react-dom'),\n        },\n      },\n    },\n  },\n};\n\nexport default config;\n```\n\n----------------------------------------\n\nTITLE: Upgrading Modern.js Version Using CLI Command\nDESCRIPTION: This command uses the Modern.js CLI to upgrade the project's Modern.js version. It's a simple way to ensure your project is using the latest version of Modern.js.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/community/releases.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx modern upgrade\n```\n\n----------------------------------------\n\nTITLE: Defining Route Handle Configuration in Modern.js\nDESCRIPTION: Example of creating route-specific metadata using the handle export in a config file, which can be used for things like breadcrumb information.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/routes.mdx#2025-04-21_snippet_7\n\nLANGUAGE: ts\nCODE:\n```\nexport const handle = {\n  breadcrumbName: 'profile',\n};\n```\n\n----------------------------------------\n\nTITLE: Creating Home Page in Modern.js\nDESCRIPTION: TypeScript React component for the home page with a link to the about page.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/testing/playwright.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Link } from '@modern-js/runtime/router';\n\nconst Index = () => (\n  <div>\n    <h1>Home</h1>\n    <Link to=\"/about\">About</Link>\n  </div>\n);\n\nexport default Index;\n```\n\n----------------------------------------\n\nTITLE: Object-based Autoprefixer Configuration in Modern.js\nDESCRIPTION: Example of configuring Autoprefixer using an Object type value. When providing an object, it will be merged with the default configuration using Object.assign.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/autoprefixer.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    autoprefixer: {\n      flexbox: 'no-2009',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Using defineConfig with Router Configuration in Modern.js\nDESCRIPTION: Example of using defineConfig to configure router settings for a React application in Modern.js, demonstrating how to apply runtime configuration to an App component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/app/define-config.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nfunction App () {\n  ...\n}\n\ndefineConfig(App, {\n  router: {\n    supportHtml5History: false\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Default Resource Loading in Modern.js i18n\nDESCRIPTION: Example showing how to configure whether to load resources by default in Modern.js i18n system.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/tests/integration/bff-hono/CHANGELOG.md#2025-04-21_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  i18n: {\n    // Whether to load resources by default, when false you need to use useI18n({load: true}) to load\n    loadResources: true, // Default is true\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing Server Lifecycle Hooks\nDESCRIPTION: Example of implementing afterMatch and afterRender hooks for request processing\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/web-server.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport type {\n  AfterMatchHook,\n  AfterRenderHook,\n} from '@modern-js/runtime/server';\n\nexport const afterMatch: AfterMatchHook = (ctx, next) => {\n  next();\n};\n\nexport const afterRender: AfterRenderHook = (ctx, next) => {\n  next();\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Retry Domains in Modern.js\nDESCRIPTION: This JavaScript example demonstrates how to configure multiple fallback domains for asset loading retry in the Modern.js configuration file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/output/assets-retry.mdx#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  output: {\n    assetsRetry: {\n      domain: ['https://cdn1.com', 'https://cdn2.com', 'https://cdn3.com'],\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring TypeScript for Remote Module Types\nDESCRIPTION: This TypeScript configuration adds a path mapping to allow for automatic type resolution of remote modules.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/topic-detail/module-federation/usage.mdx#2025-04-21_snippet_6\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"compilerOptions\": {\n    \"paths\": {\n      \"*\": [\"./@mf-types/*\"]\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Web Server Timing Middleware Example\nDESCRIPTION: Implements a timing middleware that measures request processing duration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/web-server/unstable_middleware.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { UnstableMiddleware } from '@modern-js/runtime/server';\n\nconst time: UnstableMiddleware = async (c, next) => {\n  const start = Date.now();\n\n  await next();\n\n  const end = Date.now();\n\n  console.log(`${end - start}`);\n};\n\nexport const unstableMiddleware: UnstableMiddleware[] = [time];\n```\n\n----------------------------------------\n\nTITLE: Customizing Node.js Output Directory in Modern.js\nDESCRIPTION: Shows how to modify the output path for Node.js files generated for SSR or SSG features using the 'output.distPath.server' configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/output-files.mdx#2025-04-21_snippet_2\n\nLANGUAGE: ts\nCODE:\n```\nexport default {\n  output: {\n    distPath: {\n      server: 'server',\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring Debug Tool Plugin in Modern.js Module\nDESCRIPTION: Configuration example showing how to add the custom debug tool plugin to Modern.js Module config file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/advance/in-depth-about-dev-command.md#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport doNothingPlugin from './plugins/do-nothing';\n\nexport default defineConfig({\n  plugins: [\n    //...\n    doNothingPlugin()\n  ],\n});\n```\n\n----------------------------------------\n\nTITLE: Importing Internal Logger Component in MDX\nDESCRIPTION: An import statement for the InternalLogger component, likely used to display built-in monitoring information in the documentation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/server-monitor/logger.mdx#2025-04-21_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\nimport InternalLogger from '@site-docs-en/components/internal-logger.mdx';\n```\n\n----------------------------------------\n\nTITLE: Creating Computed Properties for Contacts Model\nDESCRIPTION: JavaScript function that creates a computed property to filter archived contacts from the items array.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/tutorials/first-app/c06-model.mdx#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst computed = {\n  archived: ({ items }) => {\n    return items.filter(item => item.archived);\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Accessing Dynamic Route Parameters in Modern.js\nDESCRIPTION: Example showing how to use the useParams hook to access dynamic segments of the URL in a route component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/routes.mdx#2025-04-21_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useParams } from '@modern-js/runtime/router';\n\nfunction Blog() {\n  const { id } = useParams();\n  return <div>current blog ID is: {id}</div>;\n}\nexport default Blog;\n```\n\n----------------------------------------\n\nTITLE: Configuring Webpack Based on Target in Modern.js\nDESCRIPTION: This example demonstrates how to modify the webpack configuration based on the current target environment using the target utility parameter.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/webpack.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    webpack: (config, { target }) => {\n      if (target === 'node') {\n        // ...\n      }\n      return config;\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing registerDev Hook in TypeScript\nDESCRIPTION: Hook for registering development tools with menu items and execution functions.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/api/plugin-api/plugin-hooks.md#2025-04-21_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nexport const myPlugin = (): CliPlugin<ModuleTools> => ({\n  name: 'my-plugin',\n\n  setup() {\n    return {\n      registerDev() {\n        return {\n          name: 'storybook',\n          menuItem: {\n            name: 'Storybook',\n            value: 'storybook',\n          },\n          subCommands: ['storybook', 'story'],\n          async action() {\n            // dev logic\n          },\n        };\n      },\n    };\n  },\n});\n```\n\nLANGUAGE: typescript\nCODE:\n```\nexport interface DevToolData {\n  name: string;\n  subCommands?: string[];\n  menuItem?: {\n    name: string;\n    value: string;\n  };\n  action: (\n    options: { port?: string },\n    context: { isTsProject?: boolean },\n  ) => void | Promise<void>;\n}\n```\n\n----------------------------------------\n\nTITLE: Publishing: Bumping Version\nDESCRIPTION: Command to increment the version numbers of packages based on the changesets. This is part of the release process managed by repository maintainers.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/community/contributing-guide.mdx#2025-04-21_snippet_20\n\nLANGUAGE: sh\nCODE:\n```\npnpm run bump\n```\n\n----------------------------------------\n\nTITLE: Node.js Version Incompatibility Error in Modern.js\nDESCRIPTION: Displays the error message when attempting to install dependencies with an incompatible Node.js version in a Modern.js project.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/troubleshooting/dependencies.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nThe engine \"node\" is incompatible with this module.\n\nExpected version \">=16.2.0\". Got \"12.20.1\"\n```\n\n----------------------------------------\n\nTITLE: Taking Over Webpack Entry Point in Modern.js\nDESCRIPTION: This snippet shows how to completely take over the webpack entry point by not exporting a default function in src/index.jsx. It follows a pattern similar to create-react-app by directly rendering the App component.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/hooks/src/index_.mdx#2025-04-21_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\nimport React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\n\nReactDOM.createRoot(document.getElementById('root')!).render(<App />);\n```\n\n----------------------------------------\n\nTITLE: Conditionally Disabling TypeScript Type Checking in Production\nDESCRIPTION: This example shows how to disable TypeScript type checking only in production environment, although this is not recommended as it may reduce code stability.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/output/disable-ts-checker.mdx#2025-04-21_snippet_2\n\nLANGUAGE: js\nCODE:\n```\nexport default {\n  output: {\n    disableTsChecker: process.env.NODE_ENV === 'production',\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Default PresetEnv Configuration\nDESCRIPTION: Default configuration for the presetEnv option in the SWC plugin, which handles JavaScript syntax transformation similar to @babel/preset-env.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/plugin/official/cli-plugins/plugin-swc.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n{\n  targets: '', // automatic get browserslist from your project, so you don't have to set this field\n  mode: 'usage',\n}\n```\n\n----------------------------------------\n\nTITLE: Disabling Build Cache in JavaScript Configuration\nDESCRIPTION: Example showing how to disable the build cache feature in Modern.js configuration. By default, build cache is enabled when using webpack as the build tool.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/performance/build-cache.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  performance: {\n    buildCache: false,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Build Configuration with Object Override\nDESCRIPTION: Example demonstrating how to override specific build preset configurations using an object format.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/basic/modify-output-product.md#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\nexport default defineConfig({\n  plugins: [moduleTools()],\n  buildPreset: 'npm-library',\n  buildConfig: {\n    sourceMap: true,\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Creating a New Git Branch\nDESCRIPTION: Command to create and checkout a new Git branch for development work. This is recommended when working on changes for a pull request.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/community/contributing-guide.mdx#2025-04-21_snippet_7\n\nLANGUAGE: sh\nCODE:\n```\ngit checkout -b MY_BRANCH_NAME\n```\n\n----------------------------------------\n\nTITLE: Configuring minification option\nDESCRIPTION: Example of disabling code minification for a specific dependency by setting the minify option to false (default is true).\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/scripts/prebundle/README.md#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\ndependencies: [\n  {\n    name: 'foo',\n    minify: false,\n  },\n];\n```\n\n----------------------------------------\n\nTITLE: Project Directory Structure - Bash\nDESCRIPTION: Example directory structure showing conventional routing (entryA) and manual routing (entryB) setup.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/output/ssg.mdx#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n.\n└── src\n    ├── entryA\n    │   └── routes\n    └── entryB\n        └── App.tsx\n```\n\n----------------------------------------\n\nTITLE: Configuring npm Plugin in Modern.js\nDESCRIPTION: Example of using a plugin from npm in a Modern.js configuration file. The plugin is imported and added to the plugins array.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/plugins.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { myPlugin } from 'my-plugin';\n\nexport default defineConfig({\n  plugins: [myPlugin()],\n});\n```\n\n----------------------------------------\n\nTITLE: Project Structure for Custom Node.js Server\nDESCRIPTION: Shows the expected directory structure when deploying a Modern.js application with a custom Node.js server.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/deploy.mdx#2025-04-21_snippet_12\n\nLANGUAGE: bash\nCODE:\n```\n.\n├── .output\n│   ├── html\n│   └── static\n└── server.js\n```\n\n----------------------------------------\n\nTITLE: Referencing Custom Type Definitions\nDESCRIPTION: Shows how to include custom type definitions in the project's environment declaration file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/build-config.mdx#2025-04-21_snippet_8\n\nLANGUAGE: TypeScript\nCODE:\n```\n/// <reference path='./your-app-env.d.ts' />\n/// <reference types='@modern-js/module-tools/types' />\n```\n\n----------------------------------------\n\nTITLE: Importing SVG as React Component in Modern.js\nDESCRIPTION: When output.svgDefaultExport is set to 'component', SVG files are imported as React components instead of URLs.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/output/svg-default-export.mdx#2025-04-21_snippet_1\n\nLANGUAGE: js\nCODE:\n```\nimport Logo from './logo.svg';\n\nconsole.log(Logo); // => React 组件\n```\n\n----------------------------------------\n\nTITLE: Overriding TSLoader Configuration in TypeScript\nDESCRIPTION: An example of how to override the default ts-loader configuration using the tools.tsLoader option in a Modern.js project configuration file.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/tools/ts-loader.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    tsLoader: {\n      allowTsInNodeModules: false,\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: TypeScript Class Fields Example Code\nDESCRIPTION: Example of TypeScript class with public fields that demonstrates the difference in compilation based on useDefineForClassFields setting.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/faq/build.mdx#2025-04-21_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nclass C {\n  foo = 100;\n  bar: string;\n}\n```\n\n----------------------------------------\n\nTITLE: Example Output of File Size Information in Modern.js Build\nDESCRIPTION: Example bash output showing how file sizes are displayed when the printFileSize option is enabled. It shows the file paths, original sizes, and gzipped sizes for different assets.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/performance/print-file-size.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ninfo    Production file sizes:\n\n  File                                      Size         Gzipped\n  dist/static/js/lib-react.09721b5c.js      152.6 kB     49.0 kB\n  dist/html/main/index.html                 5.8 kB       2.5 kB\n  dist/static/js/main.3568a38e.js           3.5 kB       1.4 kB\n  dist/static/css/main.03221f72.css         1.4 kB       741 B\n```\n\n----------------------------------------\n\nTITLE: Running Package-Specific Tests\nDESCRIPTION: Command to run unit tests for a specific package using pnpm's filter option. This is useful when you want to test only the packages you've modified.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/community/contributing-guide.mdx#2025-04-21_snippet_13\n\nLANGUAGE: sh\nCODE:\n```\npnpm run --filter @modern-js/some-package test\n```\n\n----------------------------------------\n\nTITLE: Disabling Esbuild Code Minification\nDESCRIPTION: Example of how to disable Esbuild code minification, reverting to Terser for code minification.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/plugin/official/rsbuild-plugins/plugin-esbuild.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nbuilderPluginEsbuild({\n  minimize: false,\n});\n```\n\n----------------------------------------\n\nTITLE: Named Export Component Definition in TypeScript\nDESCRIPTION: Example file with named export components that will be dynamically loaded.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/utility/loadable.mdx#2025-04-21_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport const Apple = () => 'Apple!';\nexport const Orange = () => 'Orange!';\n```\n\n----------------------------------------\n\nTITLE: Importing useModuleApps from Garfish Runtime in Modern.js\nDESCRIPTION: Basic import statement for the useModuleApps hook from the Garfish runtime plugin in Modern.js.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/core/use-module-apps.mdx#2025-04-21_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useModuleApps } from '@modern-js/plugin-garfish/runtime';\n```\n\n----------------------------------------\n\nTITLE: Function Signature of render in TypeScript\nDESCRIPTION: This code block shows the function signature of the render function, including its parameters and return type.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/core/render.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport function render(App: React.ReactElement, id?: HTMLElement | string): Promise<any>;\n```\n\n----------------------------------------\n\nTITLE: Running Playwright Tests\nDESCRIPTION: Command output showing the execution of Playwright tests in a Modern.js project.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/basic-features/testing/playwright.mdx#2025-04-21_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\nRunning 3 tests using 3 workers\n  3 passed (2.0s)\n\nTo open last HTML report run:\n\n  npx playwright show-report\n```\n\n----------------------------------------\n\nTITLE: Creating a Simple React Component for Sub-app in Modern.js\nDESCRIPTION: Basic React component for a sub-application page in a Modern.js micro frontend project.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/topic-detail/micro-frontend/c02-development.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nconst Index = () => {\n  return <div className=\"container-box\">subApp</div>;\n};\n\nexport default Index;\n```\n\n----------------------------------------\n\nTITLE: Enabling Source Build Mode in Modern.js Configuration\nDESCRIPTION: Demonstrates how to enable source code build mode by setting the sourceBuild experiment to true.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/source-build.mdx#2025-04-21_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  experiments: {\n    sourceBuild: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Adding Webpack Progress Plugin\nDESCRIPTION: Demonstrates how to add the webpack Progress Plugin using the webpack instance.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/webpack-chain.mdx#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    webpackChain: (chain, { webpack }) => {\n      chain.plugin('my-progress').use(webpack.ProgressPlugin);\n    },\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: 使用 CSS Modules 开发样式\nDESCRIPTION: 展示了如何使用 CSS Modules 开发组件样式。这个例子创建了一个 CSS Module 文件并在 React 组件中引用。\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/best-practices/components.mdx#2025-04-21_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport style from './index.module.css';\n\nexport default () => {\n  return <div className={style.btn}>hello world</div>;\n};\n```\n\nLANGUAGE: css\nCODE:\n```\n.btn {\n  color: blue;\n}\n```\n\n----------------------------------------\n\nTITLE: Generated UMD Output with External Dependencies\nDESCRIPTION: The resulting UMD output when external dependencies are configured, showing how React is required but not bundled.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/advance/build-umd.mdx#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\n(function (global, factory) {\n  if (typeof module === 'object' && typeof module.exports === 'object')\n    factory(exports, require('react'));\n  else if (typeof define === 'function' && define.amd)\n    define(['exports', 'react'], factory);\n  else if (\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self)\n  )\n    factory((global.index = {}), global.react);\n})(this, function (exports, _react) {\n  'use strict';\n  Object.defineProperty(exports, '__esModule', {\n    value: true,\n  });\n  _react = /*#__PURE__*/ _interopRequireDefault(_react);\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule\n      ? obj\n      : {\n          default: obj,\n        };\n  }\n  console.info(_react.default);\n});\n```\n\n----------------------------------------\n\nTITLE: Checking Node.js Version\nDESCRIPTION: Displays the currently installed Node.js version in your environment. Modern.js recommends using Node.js 18.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/community/contributing-guide.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnode -v\n```\n\n----------------------------------------\n\nTITLE: Advanced renderString Usage with Content Modification\nDESCRIPTION: Extended example showing how to modify the rendered content before sending the response. Demonstrates adding additional HTML content to the rendered output.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/ssr/renderString.mdx#2025-04-21_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  renderString,\n  createRequestHandler,\n} from '@modern-js/runtime/ssr/server';\n\nconst handleRequest = async (request, ServerRoot, options) => {\n  // do something before render\n  const body = await renderString(request, <ServerRoot />, options);\n\n  const newBody = body + '<div>Byte-Dance</div>';\n\n  return new Response(newBody, {\n    headers: {\n      'content-type': 'text/html; charset=utf-8',\n    },\n  });\n};\n\nexport default createRequestHandler(handleRequest);\n```\n\n----------------------------------------\n\nTITLE: Configuring TypeScript Aliases\nDESCRIPTION: TSConfig setup for package name aliasing in documentation\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/use-module-doc.mdx#2025-04-21_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"compilerOptions\": {\n    \"paths\": {\n      \"demo\": [\".\"]\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Command in package.json for Modern.js\nDESCRIPTION: This JSON snippet shows how to define a command named 'command' in the package.json file for a Modern.js project.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/guides/troubleshooting/cli.mdx#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"command\": \"modern command\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Importing BFF Upload Component in JSX\nDESCRIPTION: Imports and renders a BFF upload component from the site documentation components directory\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/bff/upload.mdx#2025-04-21_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport BffUpload from \"@site-docs-en/components/bff-upload\";\n\n<BffUpload />\n```\n\n----------------------------------------\n\nTITLE: Basic Global Variables Usage Example\nDESCRIPTION: Demonstrates how global variables are transformed during compilation.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/global-vars.mdx#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconsole.log(process.env.NODE_ENV);\n\n// ⬇️ Turn into being...\nconsole.log('development');\n```\n\n----------------------------------------\n\nTITLE: Enabling JS File Inlining Configuration\nDESCRIPTION: Configuration for enabling JavaScript file inlining into HTML files\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/page-performance/inline-assets.mdx#2025-04-21_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  output: {\n    enableInlineScripts: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: 使用 Sass 开发样式\nDESCRIPTION: 展示了如何使用 Sass 预处理器开发样式。这个例子使用了 Sass 变量和嵌套语法。\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/guide/best-practices/components.mdx#2025-04-21_snippet_4\n\nLANGUAGE: scss\nCODE:\n```\n$font-stack: Helvetica, sans-serif;\n$primary-color: #333;\n\nbody {\n  font: 100% $font-stack;\n  color: $primary-color;\n}\n```\n\n----------------------------------------\n\nTITLE: Adding server directory for universal server utils in Modern.js\nDESCRIPTION: A change that adds a server directory to store universal server utility functions, improving organization and reusability of server-side code.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/plugin-server/CHANGELOG.md#2025-04-21_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n- 86213ae: chore: add a server directory for universal server utils\n  chore: 添加一个 server 目录用于存放通用的服务端工具函数\n```\n\n----------------------------------------\n\nTITLE: Installing and Configuring Node.js 22 LTS with nvm in Bash\nDESCRIPTION: This set of commands uses nvm to install Node.js 22 LTS, set it as the default version, and switch to it. This ensures the correct Node.js environment for Modern.js development.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/components/nodeVersion.mdx#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n# Install the long-term support version of Node.js 22\nnvm install 22 --lts\n\n# Make the newly installed Node.js 22 as the default version\nnvm alias default 22\n\n# Switch to the newly installed Node.js 22\nnvm use 22\n```\n\n----------------------------------------\n\nTITLE: Creating Modern.js Runtime Configuration File (Bash)\nDESCRIPTION: Command to create the src/modern.runtime.ts file for Modern.js runtime configuration if it doesn't exist in the project.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/configure/app/runtime/0-intro.mdx#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ntouch src/modern.runtime.ts\n```\n\n----------------------------------------\n\nTITLE: Implementing Archived Page Component with Shared Model\nDESCRIPTION: Shows how to implement the archived page component that uses the same contacts model. This component displays only archived contacts and provides the same archive functionality.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/tutorials/first-app/c07-container.mdx#2025-04-21_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Helmet } from '@modern-js/runtime/head';\nimport { useModel } from '@modern-js/runtime/model';\nimport { List } from 'antd';\nimport Item from '../../components/Item';\nimport contacts from '../../models/contacts';\n\nfunction Index() {\n  const [{ archived }, { archive }] = useModel(contacts);\n\n  return (\n    <div className=\"container lg mx-auto\">\n      <Helmet>\n        <title>Archives</title>\n      </Helmet>\n      <List\n        dataSource={archived}\n        renderItem={info => (\n          <Item\n            key={info.name}\n            info={info}\n            onArchive={() => {\n              archive(info.email);\n            }}\n          />\n        )}\n      />\n    </div>\n  );\n}\n\nexport default Index;\n```\n\n----------------------------------------\n\nTITLE: Configuring DevServer in JavaScript\nDESCRIPTION: Removes the ignore logic in mergeConfig for the tools.devServer configuration option.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/cli/core/CHANGELOG.md#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\ntools.devServer\n```\n\n----------------------------------------\n\nTITLE: Adapting runtime for async entries in Modern.js\nDESCRIPTION: A feature enhancement that adapts runtime functionality to work with asynchronous entries, improving support for dynamic loading patterns.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/plugin-server/CHANGELOG.md#2025-04-21_snippet_4\n\nLANGUAGE: markdown\nCODE:\n```\n- ec01bad: feat(runtime): adapt to some features for async entries\n  feat(runtime): 为异步入口适配某些功能\n```\n\n----------------------------------------\n\nTITLE: CSS Asset Inlining Example\nDESCRIPTION: Demonstration of forcing asset inlining in CSS files using the inline query parameter\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/advanced-features/page-performance/inline-assets.mdx#2025-04-21_snippet_2\n\nLANGUAGE: css\nCODE:\n```\n.foo {\n  background-image: url('. /icon.png?inline');\n}\n```\n\n----------------------------------------\n\nTITLE: Importing useModuleApps Hook in Modern.js\nDESCRIPTION: Shows how to import the useModuleApps hook from the Modern.js Garfish runtime plugin.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/apis/app/runtime/core/use-module-apps.mdx#2025-04-21_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useModuleApps } from '@modern-js/plugin-garfish/runtime';\n```\n\n----------------------------------------\n\nTITLE: Version Update Entry in Markdown\nDESCRIPTION: Changelog entry showing dependency updates and patch changes. Includes updated version numbers and commit references.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/cli/core/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n### Patch Changes\n\n- Updated dependencies [a5386ab]\n  - @modern-js/utils@2.47.0\n  - @modern-js/node-bundle-require@2.47.0\n  - @modern-js/plugin@2.47.0\n```\n\n----------------------------------------\n\nTITLE: Supporting SSR Mode in Rspack Provider\nDESCRIPTION: Adds support for Modern.js SSR mode in the rspack-provider.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/runtime/plugin-runtime/CHANGELOG.md#2025-04-21_snippet_10\n\nLANGUAGE: javascript\nCODE:\n```\nfeat: rspack-provider support modern.js ssr mode\n```\n\n----------------------------------------\n\nTITLE: Global Variables Function Type Definition\nDESCRIPTION: TypeScript type definition for the function-based global variables configuration.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/source/global-vars.mdx#2025-04-21_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\ntype GlobalVarsFn = (\n  obj: Record<string, JSONValue>,\n  utils: { env: NodeEnv; target: BuilderTarget },\n) => Record<string, JSONValue> | void;\n```\n\n----------------------------------------\n\nTITLE: 配置Modern.js Module的bundle构建\nDESCRIPTION: 通过Modern.js Module项目的配置文件modern.config.ts，设置output.buildConfig.buildType为'bundle'来启用bundle构建模式，替代默认的bundless构建方式。\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/community/blog/2022-0708-updates.md#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@modern-js/module-tools';\n\nexport default defineConfig({\n  output: {\n    buildConfig: {\n      buildType: 'bundle', // 采用 bundle 构建\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Exporting Loadable Bundler Plugin in JavaScript\nDESCRIPTION: Exports the loadable_bundler_plugin from the runtime package.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/runtime/plugin-runtime/CHANGELOG.md#2025-04-21_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nfeat: the runtime package export `loadable_bundler_plugin`\n```\n\n----------------------------------------\n\nTITLE: Configuring Storybook Manager App Webpack\nDESCRIPTION: Configuration for Storybook Manager App webpack settings through a dedicated configuration file. This allows customization of the Storybook manager application.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/zh/api/config/dev.md#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n// ./config/storybook/main.js\n\nmodule.exports = {\n  // it controls the Storybook manager app\n  managerWebpack: async (config, options) => {\n    // update config here\n    return config;\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Enabling Lightning CSS Loader in Modern.js\nDESCRIPTION: Basic configuration to enable the Lightning CSS loader by setting tools.lightningcssLoader to true.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/lightningcss-loader.mdx#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport default {\n  tools: {\n    lightningcssLoader: true,\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Supporting Side Effects Configuration\nDESCRIPTION: Feature to support the sideEffects configuration option in package.json and changing the log level to info for better visibility of important messages.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/solutions/module-tools/CHANGELOG.md#2025-04-21_snippet_7\n\nLANGUAGE: markdown\nCODE:\n```\n- 0bbc91a: support sideEffects config and change log level to info\n  支持 sideEffects 配置并将日志级别改为 info\n```\n\n----------------------------------------\n\nTITLE: Defining Page Type in Markdown Frontmatter\nDESCRIPTION: This code snippet sets the page type to 'home' using YAML frontmatter in a markdown file. It's used to specify metadata for the documentation page.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/index.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n---\npageType: home\n---\n```\n\n----------------------------------------\n\nTITLE: Generator Log Information Enhancement\nDESCRIPTION: Added optimization for generator logging information in version 3.6.2\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/generator/generator-utils/CHANGELOG.md#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n### Patch Changes\n\n- 0b6d335: feat: Optimize generator log information\n\n  feat: 优化生成器日志信息\n```\n\n----------------------------------------\n\nTITLE: Result Field Omission Example\nDESCRIPTION: Shows how to remove the result field completely from the state structure by setting the result parameter to false.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/zh/apis/app/runtime/model/handle-effect.mdx#2025-04-21_snippet_4\n\nLANGUAGE: ts\nCODE:\n```\ninterface State {\n  pending: boolean;\n  error: string;\n}\n```\n\n----------------------------------------\n\nTITLE: Generated CHANGELOG.md content\nDESCRIPTION: This snippet displays the content of the CHANGELOG.md file generated after executing the 'modern bump' command, which updates the version and creates a changelog.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/module-doc/docs/en/guide/basic/publish-your-project.mdx#2025-04-21_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n# module\n\n## 0.1.1\n\n### Patch Changes\n\n- publish test\n```\n\n----------------------------------------\n\nTITLE: Supporting server-side access to static assets in Modern.js\nDESCRIPTION: A feature addition that enables access to static assets on the server side, allowing server-rendered applications to reference client assets.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/server/plugin-server/CHANGELOG.md#2025-04-21_snippet_5\n\nLANGUAGE: markdown\nCODE:\n```\n- c42146e: feat: support getting assets on the server\n  feat: 支持在服务端获取静态资源\n```\n\n----------------------------------------\n\nTITLE: React Hydration Warning in Browser Console\nDESCRIPTION: This snippet shows the warning message that appears in the browser console when there's a mismatch between server-side rendered HTML and client-side hydration in React.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/guides/basic-features/render/ssr.mdx#2025-04-21_snippet_6\n\nLANGUAGE: sh\nCODE:\n```\nWarning: Expected server HTML to contain a matching <div> in <div>.\n```\n\n----------------------------------------\n\nTITLE: Overriding ts-loader Configuration in Modern.js\nDESCRIPTION: An example of how to override the default ts-loader configuration using the tools.tsLoader option. This snippet disables the allowTsInNodeModules setting.\nSOURCE: https://github.com/web-infra-dev/modern.js/blob/main/packages/document/main-doc/docs/en/configure/app/tools/ts-loader.mdx#2025-04-21_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  tools: {\n    tsLoader: {\n      allowTsInNodeModules: false,\n    },\n  },\n};\n```"
  }
]
[
  {
    "owner": "indexsupply",
    "repo": "indexsupply.com",
    "content": "TITLE: Configuring Shovel for ERC20 Transfer Indexing in JSON\nDESCRIPTION: This snippet shows a basic Shovel configuration for indexing ERC20 transfer events. It defines the database and Ethereum node connections, and specifies the structure for the 'erc20_transfers' table.\nSOURCE: https://github.com/indexsupply/indexsupply.com/blob/master/src/shovel/docs/index.md#2025-04-17_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"pg_url\": \"postgres:///shovel\",\n  \"eth_sources\": [\n    {\n      \"name\": \"mainnet\",\n      \"chain_id\": 1,\n      \"urls\": [\"https://ethereum-rpc.publicnode.com\"]\n    }\n  ],\n  \"integrations\": [{\n    \"name\": \"erc20_transfers\",\n    \"enabled\": true,\n    \"sources\": [{\"name\": \"mainnet\"}],\n    \"table\": {\n      \"name\": \"erc20_transfers\",\n      \"columns\": [\n        {\"name\": \"block_num\", \"type\": \"numeric\"},\n        {\"name\": \"tx_hash\", \"type\": \"bytea\"},\n        {\"name\": \"from\", \"type\": \"bytea\"},\n        {\"name\": \"to\", \"type\": \"bytea\"},\n        {\"name\": \"value\", \"type\": \"bytea\"}\n      ]\n    },\n    \"block\": [\n      {\"name\": \"block_num\", \"column\": \"block_num\"},\n      {\"name\": \"tx_hash\", \"column\": \"tx_hash\"}\n    ],\n    \"event\": {\n      \"name\": \"Transfer\",\n      \"type\": \"event\",\n      \"anonymous\": false,\n      \"inputs\": [\n        {\"indexed\": true, \"name\": \"from\", \"type\": \"address\", \"column\": \"from\"},\n        {\"indexed\": true, \"name\": \"to\", \"type\": \"address\", \"column\": \"to\"},\n        {\"name\": \"value\", \"type\": \"uint256\", \"column\": \"value\"}\n      ]\n    }\n  }]\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring ERC20 Token Transfers with Shovel JSON\nDESCRIPTION: A JSON configuration that sets up Shovel to index ERC20 Transfer events from Ethereum mainnet and Sepolia networks. It defines database connection, Ethereum RPC sources, and event structure mapping to Postgres tables.\nSOURCE: https://github.com/indexsupply/indexsupply.com/blob/master/src/shovel/index.md#2025-04-17_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"pg_url\": \"postgres:///shovel\",\n  \"eth_sources\": [\n    {\n        \"name\": \"mainnet\",\n        \"chain_id\": 1,\n        \"urls\": [\"https://ethereum-rpc.publicnode.com\"]\n    },\n    {\n        \"name\": \"sepolia\",\n        \"chain_id\": 11155111,\n        \"urls\": [\"https://ethereum-sepolia-rpc.publicnode.com\"]\n    }\n  ],\n  \"integrations\": [\n    {\n      \"name\": \"tokens\",\n      \"enabled\": true,\n      \"sources\": [{\"name\": \"mainnet\"}, {\"name\": \"sepolia\"}],\n      \"table\": {\n        \"name\": \"transfers\",\n          \"columns\": [\n            {\"name\": \"log_addr\", \"type\": \"bytea\"},\n            {\"name\": \"block_time\", \"type\": \"numeric\"},\n            {\"name\": \"from\", \"type\": \"bytea\"},\n            {\"name\": \"to\", \"type\": \"bytea\"},\n            {\"name\": \"value\", \"type\": \"numeric\"}\n          ]\n      },\n      \"block\": [\n        {\"name\": \"block_time\", \"column\": \"block_time\"},\n        {\n          \"name\": \"log_addr\",\n          \"column\": \"log_addr\",\n          \"filter_op\": \"contains\",\n          \"filter_arg\": [\"a0b86991c6218b36c1d19d4a2e9eb0ce3606eb48\"]\n        }\n      ],\n      \"event\": {\n        \"name\": \"Transfer\",\n        \"type\": \"event\",\n        \"anonymous\": false,\n        \"inputs\": [\n          {\"indexed\": true, \"name\": \"from\", \"type\": \"address\", \"column\": \"from\"},\n          {\"indexed\": true, \"name\": \"to\", \"type\": \"address\", \"column\": \"to\"},\n          {\"indexed\": false, \"name\": \"value\", \"type\": \"uint256\", \"column\": \"value\"}\n        ]\n      }\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Shovel for Indexing Mint Function Transactions in JSON\nDESCRIPTION: This JSON configuration sets up Shovel to index Ethereum mainnet transactions that call the `mint(uint256)` function. It specifies the Postgres database URL, Ethereum RPC endpoint, and defines an integration to filter and store relevant transaction data.\nSOURCE: https://github.com/indexsupply/indexsupply.com/blob/master/src/shovel/docs/index.md#2025-04-17_snippet_9\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"pg_url\": \"postgres:///shovel\",\n  \"eth_sources\": [\n    {\"name\": \"mainnet\", \"chain_id\": 1, \"urls\": [\"https://ethereum-rpc.publicnode.com\"]}\n  ],\n  \"integrations\": [{\n    \"name\": \"specific-tx\",\n    \"enabled\": true,\n    \"sources\": [{\"name\": \"mainnet\"}],\n    \"table\": {\n      \"name\": \"tx\",\n      \"columns\": [\n        {\"name\": \"tx_input\", \"type\": \"bytea\"}\n      ]\n    },\n    \"block\": [{\n      \"name\": \"tx_input\",\n      \"column\": \"tx_input\",\n      \"filter_op\": \"contains\",\n      \"filter_arg\": [\"a0712d68\"]\n    }],\n  }]\n}\n```\n\n----------------------------------------\n\nTITLE: Multi-chain USDC Transfer Tracking Configuration\nDESCRIPTION: Configuration for tracking USDC transfers across multiple Ethereum chains (mainnet and Goerli) with event parsing and detailed transfer information storage.\nSOURCE: https://github.com/indexsupply/indexsupply.com/blob/master/src/shovel/docs/index.md#2025-04-17_snippet_6\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"pg_url\": \"postgres:///shovel\",\n  \"eth_sources\": [\n    {\"name\": \"mainnet\", \"chain_id\": 1, \"urls\": [\"https://ethereum-rpc.publicnode.com\"]},\n    {\"name\": \"goerli\",  \"chain_id\": 11155111, \"urls\": [\"https://ethereum-sepolia-rpc.publicnode.com\"]}\n  ],\n  \"integrations\": [\n    {\n      \"name\": \"tokens\",\n      \"enabled\": true,\n      \"sources\": [{\"name\": \"mainnet\"}, {\"name\": \"goerli\"}],\n      \"table\": {\n        \"name\": \"transfers\",\n          \"columns\": [\n            {\"name\": \"chain_id\",    \"type\": \"numeric\"},\n            {\"name\": \"log_addr\",    \"type\": \"bytea\"},\n            {\"name\": \"block_time\",  \"type\": \"numeric\"},\n            {\"name\": \"f\",           \"type\": \"bytea\"},\n            {\"name\": \"t\",           \"type\": \"bytea\"},\n            {\"name\": \"v\",           \"type\": \"numeric\"}\n          ]\n      },\n      \"block\": [\n        {\"name\": \"chain_id\", \"column\": \"chain_id\"},\n        {\"name\": \"block_time\", \"column\": \"block_time\"},\n        {\n          \"name\": \"log_addr\",\n          \"column\": \"log_addr\",\n          \"filter_op\": \"contains\",\n          \"filter_arg\": [\"a0b86991c6218b36c1d19d4a2e9eb0ce3606eb48\"]\n        }\n      ],\n      \"event\": {\n        \"name\": \"Transfer\",\n        \"type\": \"event\",\n        \"anonymous\": false,\n        \"inputs\": [\n          {\"indexed\": true,  \"name\": \"from\",  \"type\": \"address\", \"column\": \"f\"},\n          {\"indexed\": true,  \"name\": \"to\",    \"type\": \"address\", \"column\": \"t\"},\n          {\"indexed\": false, \"name\": \"value\", \"type\": \"uint256\", \"column\": \"v\"}\n        ]\n      }\n    }\n  ]\n}\n```\n\nLANGUAGE: sql\nCODE:\n```\n                Table \"public.transfers\"\n   Column   |   Type   | Collation | Nullable | Default\n------------+----------+-----------+----------+---------\n chain_id   | numeric  |           |          |\n log_addr   | bytea    |           |          |\n block_time | numeric  |           |          |\n f          | bytea    |           |          |\n t          | bytea    |           |          |\n v          | numeric  |           |          |\n ig_name    | text     |           |          |\n src_name   | text     |           |          |\n block_num  | numeric  |           |          |\n tx_idx     | integer  |           |          |\n log_idx    | smallint |           |          |\n abi_idx    | smallint |           |          |\nIndexes:\n    \"u_transfers\" UNIQUE, btree (ig_name, src_name, block_num, tx_idx, log_idx, abi_idx)\n```\n\n----------------------------------------\n\nTITLE: Indexing Transaction Inputs Configuration\nDESCRIPTION: Configuration for indexing specific transaction inputs by matching function signatures. Includes PostgreSQL table schema with bytea column for storing transaction input data.\nSOURCE: https://github.com/indexsupply/indexsupply.com/blob/master/src/shovel/docs/index.md#2025-04-17_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"pg_url\": \"postgres:///shovel\",\n  \"eth_sources\": [\n    {\n      \"name\": \"mainnet\",\n      \"chain_id\": 1,\n      \"urls\": [\"https://ethereum-rpc.publicnode.com\"]\n    }\n  ],\n  \"integrations\": [\n    {\n      \"name\": \"specific-tx\",\n      \"enabled\": true,\n      \"sources\": [\n        {\n          \"name\": \"mainnet\"\n        }\n      ],\n      \"table\": {\n        \"name\": \"tx\",\n        \"columns\": [\n          {\n            \"name\": \"tx_input\",\n            \"type\": \"bytea\"\n          }\n        ]\n      },\n      \"block\": [\n        {\n          \"name\": \"tx_input\",\n          \"column\": \"tx_input\",\n          \"filter_op\": \"contains\",\n          \"filter_arg\": [\n            \"a1671295\"\n          ]\n        }\n      ]\n    }\n  ]\n}\n```\n\nLANGUAGE: sql\nCODE:\n```\n                  Table \"public.tx\"\n  Column   |  Type   | Collation | Nullable | Default\n-----------+---------+-----------+----------+---------\n tx_input  | bytea   |           |          |\n ig_name   | text    |           |          |\n src_name  | text    |           |          |\n block_num | numeric |           |          |\n tx_idx    | integer |           |          |\nIndexes:\n    \"u_tx\" UNIQUE, btree (ig_name, src_name, block_num, tx_idx)\n```\n\n----------------------------------------\n\nTITLE: Seaport NFT Sales Event Indexing Configuration\nDESCRIPTION: Configuration for indexing Seaport marketplace NFT sales events with complex ABI decoding for order fulfillment data including offer and consideration details.\nSOURCE: https://github.com/indexsupply/indexsupply.com/blob/master/src/shovel/docs/index.md#2025-04-17_snippet_7\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"pg_url\": \"postgres:///shovel\",\n  \"eth_sources\": [\n    {\n      \"name\": \"mainnet\",\n      \"chain_id\": 1,\n      \"urls\": [\"https://ethereum-rpc.publicnode.com\"]\n    }\n  ],\n  \"integrations\": [\n    {\n      \"name\": \"seaport-orders\",\n      \"enabled\": true,\n      \"sources\": [\n        {\n          \"name\": \"mainnet\"\n        }\n      ],\n      \"table\": {\n        \"name\": \"seaport_orders\",\n        \"columns\": [\n          {\n            \"name\": \"order_hash\",\n            \"type\": \"bytea\"\n          }\n        ]\n      },\n      \"block\": [],\n      \"event\": {\n        \"name\": \"OrderFulfilled\",\n        \"type\": \"event\",\n        \"anonymous\": false,\n        \"inputs\": [\n          {\n            \"indexed\": false,\n            \"internalType\": \"bytes32\",\n            \"name\": \"orderHash\",\n            \"column\": \"order_hash\",\n            \"type\": \"bytes32\"\n          },\n          {\n            \"indexed\": true,\n            \"internalType\": \"address\",\n            \"name\": \"offerer\",\n            \"type\": \"address\"\n          },\n          {\n            \"indexed\": true,\n            \"internalType\": \"address\",\n            \"name\": \"zone\",\n            \"type\": \"address\"\n          },\n          {\n            \"indexed\": false,\n            \"internalType\": \"address\",\n            \"name\": \"recipient\",\n            \"type\": \"address\"\n          },\n          {\n            \"indexed\": false,\n            \"internalType\": \"struct SpentItem[]\",\n            \"name\": \"offer\",\n            \"type\": \"tuple[]\",\n            \"components\": [\n              {\n                \"internalType\": \"enum ItemType\",\n                \"name\": \"itemType\",\n                \"type\": \"uint8\"\n              },\n              {\n                \"internalType\": \"address\",\n                \"name\": \"token\",\n                \"type\": \"address\"\n              },\n              {\n                \"internalType\": \"uint256\",\n                \"name\": \"identifier\",\n                \"type\": \"uint256\"\n              },\n              {\n                \"internalType\": \"uint256\",\n                \"name\": \"amount\",\n                \"type\": \"uint256\"\n              }\n            ]\n          },\n          {\n            \"indexed\": false,\n            \"internalType\": \"struct ReceivedItem[]\",\n            \"name\": \"consideration\",\n            \"type\": \"tuple[]\",\n            \"components\": [\n              {\n                \"internalType\": \"enum ItemType\",\n                \"name\": \"itemType\",\n                \"type\": \"uint8\"\n              },\n              {\n                \"internalType\": \"address\",\n                \"name\": \"token\",\n                \"type\": \"address\"\n              },\n              {\n                \"internalType\": \"uint256\",\n                \"name\": \"identifier\",\n                \"type\": \"uint256\"\n              },\n              {\n                \"internalType\": \"uint256\",\n                \"name\": \"amount\",\n                \"type\": \"uint256\"\n              },\n              {\n                \"internalType\": \"address payable\",\n                \"name\": \"recipient\",\n                \"type\": \"address\"\n              }\n            ]\n          }\n        ]\n      }\n    }\n  ]\n}\n```\n\nLANGUAGE: sql\nCODE:\n```\n             Table \"public.seaport_orders\"\n   Column   |   Type   | Collation | Nullable | Default\n------------+----------+-----------+----------+---------\n order_hash | bytea    |           |          |\n ig_name    | text     |           |          |\n src_name   | text     |           |          |\n block_num  | numeric  |           |          |\n tx_idx     | integer  |           |          |\n log_idx    | smallint |           |          |\n abi_idx    | smallint |           |          |\nIndexes:\n    \"u_seaport_orders\" UNIQUE, btree (ig_name, src_name, block_num, tx_idx, log_idx, abi_idx)\n```\n\n----------------------------------------\n\nTITLE: Internal ETH Transfer Tracking Configuration\nDESCRIPTION: Configuration for indexing internal ETH transfers using trace data, filtering for specific call types and positive transfer values.\nSOURCE: https://github.com/indexsupply/indexsupply.com/blob/master/src/shovel/docs/index.md#2025-04-17_snippet_8\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"pg_url\": \"postgres:///shovel\",\n    \"eth_sources\": [{\"name\": \"mainnet\", \"chain_id\": 1, \"urls\": [\"https://ethereum-rpc.publicnode.com\"]}],\n    \"integrations\": [\n        {\n            \"name\": \"internal-eth-transfers\",\n            \"enabled\": true,\n            \"sources\": [{\"name\": \"mainnet\", \"start\": 19737332, \"stop\": 19737333}],\n            \"table\": {\n                \"name\": \"internal_eth_transfers\",\n                \"columns\": [\n                    {\"name\": \"block_hash\", \"type\": \"bytea\"},\n                    {\"name\": \"block_num\", \"type\": \"numeric\"},\n                    {\"name\": \"tx_hash\", \"type\": \"bytea\"},\n                    {\"name\": \"tx_idx\", \"type\": \"int\"},\n                    {\"name\": \"call_type\", \"type\": \"text\"},\n                    {\"name\": \"from\", \"type\": \"bytea\"},\n                    {\"name\": \"to\", \"type\": \"bytea\"},\n                    {\"name\": \"value\", \"type\": \"numeric\"}\n                ]\n            },\n            \"block\": [\n                {\"name\": \"block_hash\", \"column\": \"block_hash\"},\n                {\"name\": \"block_num\", \"column\": \"block_num\"},\n                {\"name\": \"tx_hash\", \"column\": \"tx_hash\"},\n                {\n                    \"name\": \"trace_action_call_type\",\n                    \"column\": \"call_type\",\n                    \"filter_op\": \"eq\",\n                    \"filter_arg\": [\"call\"]\n                },\n                {\"name\": \"trace_action_from\", \"column\": \"from\"},\n                {\"name\": \"trace_action_to\", \"column\": \"to\"},\n                {\n                    \"name\": \"trace_action_value\",\n                    \"column\": \"value\",\n                    \"filter_op\": \"gt\",\n                    \"filter_arg\": [\"0\"]\n                }\n            ]\n        }\n    ]\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Concurrent Blockchain Backfilling\nDESCRIPTION: Configuration for high-performance blockchain data backfilling using concurrent processing with 10 workers and batch size of 100 blocks.\nSOURCE: https://github.com/indexsupply/indexsupply.com/blob/master/src/shovel/docs/index.md#2025-04-17_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"pg_url\": \"postgres:///shovel\",\n  \"eth_sources\": [\n    {\n      \"name\": \"fast\",\n      \"chain_id\": 1,\n      \"urls\": [\"https://ethereum-rpc.publicnode.com\"],\n      \"concurrency\": 10,\n      \"batch_size\": 100\n    }\n  ],\n  \"integrations\": [{\n    \"name\": \"fast\",\n    \"enabled\": true,\n    \"sources\": [{\"name\": \"fast\", \"start\": 1}],\n    \"table\": {\"name\": \"fast\", \"columns\": []},\n    \"block\": [],\n    \"event\": {}\n  }]\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring PostgreSQL Database Connection\nDESCRIPTION: Sets up the PostgreSQL database connection using a direct URL or environment variable. Required for Shovel to connect to the database.\nSOURCE: https://github.com/indexsupply/indexsupply.com/blob/master/src/shovel/docs/index.md#2025-04-17_snippet_21\n\nLANGUAGE: json\nCODE:\n```\n{\"pg_url\": \"postgres:///shovel\", ...}\n```\n\n----------------------------------------\n\nTITLE: Installing and Running Shovel on macOS\nDESCRIPTION: This bash script demonstrates how to install PostgreSQL, create a database, download Shovel, and run it with a demo configuration on macOS using Homebrew.\nSOURCE: https://github.com/indexsupply/indexsupply.com/blob/master/src/shovel/docs/index.md#2025-04-17_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nbrew install postgresql@16\nbrew services start postgresql@16\ncreatedb shovel\n\ncurl -LO --silent https://raw.githubusercontent.com/indexsupply/code/main/cmd/shovel/demo.json\ncurl -LO --silent https://indexsupply.net/bin/1.6/darwin/arm64/shovel\nchmod +x shovel\n\n./shovel -config demo.json\nl=info  v=1.6 msg=new-task ig=usdc-transfer src=mainnet\nl=info  v=1.6 msg=new-task ig=usdc-transfer src=base\nl=info  v=1.6 msg=prune-task n=0\nl=info  v=1.6 msg=start at latest ig=usdc-transfer src=mainnet num=19793295\nl=info  v=1.6 msg=start at latest ig=usdc-transfer src=base num=13997369\nl=info  v=1.6 msg=converge ig=usdc-transfer host=base-rpc.publicnode.com src=base req=15507896/1 n=15507896 h=edadbe50 nrows=11 nrpc=3 nblocks=1 elapsed=817.485916ms\nl=info  v=1.6 msg=converge ig=usdc-transfer host=ethereum-rpc.publicnode.com src=mainnet req=20043416/1 n=20043416 h=949c4c7e nrows=3 nrpc=3 nblocks=1 elapsed=984.472375ms\n```\n\n----------------------------------------\n\nTITLE: Installing and Running Shovel Quickstart\nDESCRIPTION: Bash commands for setting up Shovel with a demo configuration. Creates a PostgreSQL database, downloads the configuration and binary, and then runs Shovel to start indexing blockchain data.\nSOURCE: https://github.com/indexsupply/indexsupply.com/blob/master/src/shovel/index.md#2025-04-17_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n# assumes you have pg running\ncreatedb shovel\n\n# download demo config file\ncurl -LO https://raw.githubusercontent.com/indexsupply/code/main/cmd/shovel/demo.json\n\n# download shovel\ncurl -LO https://indexsupply.net/bin/1.6/darwin/arm64/shovel\nchmod +x shovel\n./shovel -config demo.json\n```\n\n----------------------------------------\n\nTITLE: Configuring Dashboard Authentication in Shovel\nDESCRIPTION: JSON configuration snippets for setting up authentication for the Shovel dashboard. These examples show how to set a root password, enable loopback authentication, or disable authentication entirely.\nSOURCE: https://github.com/indexsupply/indexsupply.com/blob/master/src/shovel/docs/index.md#2025-04-17_snippet_12\n\nLANGUAGE: json\nCODE:\n```\n{..., \"dashboard\": {\"root_password\": \"\"}}\n```\n\nLANGUAGE: json\nCODE:\n```\n{..., \"dashboard\": { \"enable_loopback_authn\": true }}\n```\n\nLANGUAGE: json\nCODE:\n```\n{..., \"dashboard\": {\"disable_authn\": true}}\n```\n\n----------------------------------------\n\nTITLE: Using Notifications with Shovel\nDESCRIPTION: Example showing how Shovel sends notifications when inserting new data into a table. The notification includes serialized column data in a comma-separated format.\nSOURCE: https://github.com/indexsupply/indexsupply.com/blob/master/src/shovel/docs/index.md#2025-04-17_snippet_23\n\nLANGUAGE: sql\nCODE:\n```\nNOTIFY \"mainnet-foo\", '$block_num,$a,$b'\n```\n\n----------------------------------------\n\nTITLE: Event Filter Configuration in JSON\nDESCRIPTION: Configuration example for filtering Transfer events with specific parameters including from address filtering\nSOURCE: https://github.com/indexsupply/indexsupply.com/blob/master/src/shovel/docs/index.md#2025-04-17_snippet_14\n\nLANGUAGE: json\nCODE:\n```\n\"integrations\": [\n    {\n        \"event\": {\n            \"name\": \"Transfer\",\n            \"type\": \"event\",\n            \"anonymous\": false,\n            \"inputs\": [\n                {\n                    \"indexed\": true,\n                    \"name\": \"from\",\n                    \"type\": \"address\",\n                    \"column\": \"f\",\n                    \"filter_op\": \"contains\",\n                    \"filter_arg\": [\"0x0000000000000000000000000000000000000000\"]\n                },\n                {\n                    \"indexed\": true,\n                    \"name\": \"to\",\n                    \"type\": \"address\",\n                    \"column\": \"t\"\n                },\n                {\n                    \"indexed\": false,\n                    \"name\": \"value\",\n                    \"type\": \"uint256\",\n                    \"column\": \"v\"\n                }\n            ]\n        }\n    }\n]\n```\n\n----------------------------------------\n\nTITLE: Block Filter Configuration in JSON\nDESCRIPTION: Example configuration showing how to set up a block filter with a contains operation on log_addr field\nSOURCE: https://github.com/indexsupply/indexsupply.com/blob/master/src/shovel/docs/index.md#2025-04-17_snippet_13\n\nLANGUAGE: json\nCODE:\n```\n\"integrations\": [\n    {\n        \"block\": [\n            {\n                \"name\": \"log_addr\",\n                \"column\": \"log_addr\",\n                \"filter_op\": \"contains\",\n                \"filter_arg\": [\"0xabc\"]\n            }\n        ]\n    }\n]\n```\n\n----------------------------------------\n\nTITLE: Block Filter with Reference Configuration in JSON\nDESCRIPTION: Advanced configuration showing how to set up a block filter that references another integration's data for filtering\nSOURCE: https://github.com/indexsupply/indexsupply.com/blob/master/src/shovel/docs/index.md#2025-04-17_snippet_15\n\nLANGUAGE: json\nCODE:\n```\n\"integrations\": [\n    {\n        \"name\": \"factory_contracts\",\n        \"table\": {\n            \"name\": \"factory_contracts\",\n            \"columns\": [\n                {\"name\": \"log_addr\", \"type\": \"bytea\"},\n                {\"name\": \"addr\", \"type\": \"bytea\"}\n            ]\n        }\n    },\n    {\n        \"event\": {\n            \"name\": \"Transfer\",\n            \"type\": \"event\",\n            \"anonymous\": false,\n            \"inputs\": [\n                {\n                    \"indexed\": true,\n                    \"name\": \"from\",\n                    \"type\": \"address\",\n                    \"column\": \"f\",\n                    \"filter_op\": \"contains\",\n                    \"filter_ref\": {\n                        \"integration\": \"factory_contracts\",\n                        \"column\": \"addr\"\n                    }\n                },\n                {\n                    \"indexed\": true,\n                    \"name\": \"to\",\n                    \"type\": \"address\",\n                    \"column\": \"t\"\n                },\n                {\n                    \"indexed\": false,\n                    \"name\": \"value\",\n                    \"type\": \"uint256\",\n                    \"column\": \"v\"\n                }\n            ]\n        }\n    }\n]\n```\n\n----------------------------------------\n\nTITLE: Reading Environment Variables in Shovel Configuration\nDESCRIPTION: Shovel can read configuration values from environment variables when the value is prefixed with a $ character. This allows sensitive information like database credentials to be passed securely.\nSOURCE: https://github.com/indexsupply/indexsupply.com/blob/master/src/shovel/docs/index.md#2025-04-17_snippet_20\n\nLANGUAGE: json\nCODE:\n```\n{\"pg_url\": \"$PG_URL\", ...}\n```\n\n----------------------------------------\n\nTITLE: Using Environment Variables for Database Connection\nDESCRIPTION: Example showing how to use an environment variable for database connection, which avoids embedding credentials in configuration files.\nSOURCE: https://github.com/indexsupply/indexsupply.com/blob/master/src/shovel/docs/index.md#2025-04-17_snippet_22\n\nLANGUAGE: json\nCODE:\n```\n{\"pg_url\": \"$DATABASE_URL\",...}\n```\n\n----------------------------------------\n\nTITLE: Setting Dashboard Root Password in Shovel\nDESCRIPTION: Configuration example showing how to set up an empty root password, which will cause Shovel to generate a random password on startup.\nSOURCE: https://github.com/indexsupply/indexsupply.com/blob/master/src/shovel/docs/index.md#2025-04-17_snippet_25\n\nLANGUAGE: json\nCODE:\n```\n{..., \"dashboard\": {..., \"root_password\": \"\"}}\n```\n\n----------------------------------------\n\nTITLE: Disabling Authentication in Shovel Dashboard\nDESCRIPTION: Configuration example showing how to completely disable authentication for the Shovel dashboard.\nSOURCE: https://github.com/indexsupply/indexsupply.com/blob/master/src/shovel/docs/index.md#2025-04-17_snippet_27\n\nLANGUAGE: json\nCODE:\n```\n{..., \"dashboard\": {..., \"disable_authn\": true}}\n```\n\n----------------------------------------\n\nTITLE: Enabling Loopback Authentication in Shovel Dashboard\nDESCRIPTION: Configuration example for enabling loopback authentication during development, which allows testing authentication code using localhost.\nSOURCE: https://github.com/indexsupply/indexsupply.com/blob/master/src/shovel/docs/index.md#2025-04-17_snippet_26\n\nLANGUAGE: json\nCODE:\n```\n{..., \"dashboard\": {..., \"enable_loopback_authn\": true}}\n```\n\n----------------------------------------\n\nTITLE: Configuring Shovel Dashboard Port\nDESCRIPTION: Shows how to specify a custom port for Shovel's dashboard using the command line flag.\nSOURCE: https://github.com/indexsupply/indexsupply.com/blob/master/src/shovel/docs/index.md#2025-04-17_snippet_24\n\nLANGUAGE: bash\nCODE:\n```\n./shovel -l :8080\n```\n\n----------------------------------------\n\nTITLE: Prometheus Metrics for Shovel Monitoring\nDESCRIPTION: Sample Prometheus metrics provided by Shovel's /metrics API. These metrics include information about the latest processed block, Postgres connection status, and RPC API health for each Ethereum source.\nSOURCE: https://github.com/indexsupply/indexsupply.com/blob/master/src/shovel/docs/index.md#2025-04-17_snippet_11\n\nLANGUAGE: promql\nCODE:\n```\n# HELP shovel_latest_block_local last block processed\n# TYPE shovel_latest_block_local gauge\nshovel_latest_block_local{src=\"mainnet\"} 19648035\n\n# HELP shovel_pg_ping number of ms to make basic status query\n# TYPE shovel_pg_ping gauge\nshovel_pg_ping 0\n\n# HELP shovel_pg_ping_error number of errors in making basic status query\n# TYPE shovel_pg_ping_error gauge\nshovel_pg_ping_error 0\n\n# HELP shovel_latest_block_remote latest block height from rpc api\n# TYPE shovel_latest_block_remote gauge\nshovel_latest_block_remote{src=\"mainnet\"} 19648035\n\n# HELP shovel_rpc_ping number of ms to make a basic http request to rpc api\n# TYPE shovel_rpc_ping gauge\nshovel_rpc_ping{src=\"mainnet\"} 127\n\n# HELP shovel_rpc_ping_error number of errors in making basic rpc api request\n# TYPE shovel_rpc_ping_error gauge\nshovel_rpc_ping_error{src=\"mainnet\"} 0\n\n# HELP shovel_delta number of blocks between the source and the shovel database\n# TYPE shovel_delta gauge\nshovel_delta{src=\"mainnet\"} 0\n```\n\n----------------------------------------\n\nTITLE: Querying Latest Indexed Block in SQL\nDESCRIPTION: SQL query to find the most recent block indexed by Shovel, grouped by the Integration's Source. This view helps track indexing progress across different sources and integrations.\nSOURCE: https://github.com/indexsupply/indexsupply.com/blob/master/src/shovel/docs/index.md#2025-04-17_snippet_16\n\nLANGUAGE: sql\nCODE:\n```\nselect * from shovel.latest ;\n src_name |   num\n----------+----------\n base     | 14090162\n```\n\n----------------------------------------\n\nTITLE: Describing Task Updates Table in SQL\nDESCRIPTION: SQL command to describe the structure of Shovel's internal task_updates table. This table is used to track indexing progress and ensure database consistency across crashes.\nSOURCE: https://github.com/indexsupply/indexsupply.com/blob/master/src/shovel/docs/index.md#2025-04-17_snippet_18\n\nLANGUAGE: sql\nCODE:\n```\nshovel=# \\d shovel.task_updates\n                      Table \"shovel.task_updates\"\n  Column   |           Type           | Collation | Nullable | Default\n-----------+--------------------------+-----------+----------+---------\n num       | numeric                  |           |          |\n hash      | bytea                    |           |          |\n ig_name   | text                     |           |          |\n src_name  | text                     |           |          |\n src_hash  | bytea                    |           |          |\n src_num   | numeric                  |           |          |\n nblocks   | numeric                  |           |          |\n nrows     | numeric                  |           |          |\n latency   | interval                 |           |          |\n insert_at | timestamp with time zone |           |          | now()\nIndexes:\n    \"task_src_name_num_idx\" UNIQUE, btree (ig_name, src_name, num DESC)\n```\n\n----------------------------------------\n\nTITLE: Describing Minimal Public Schema Table in SQL\nDESCRIPTION: SQL command output showing the minimum required columns for tables created by Shovel in the public schema. These columns are essential for handling data reorganization and ensuring data integrity.\nSOURCE: https://github.com/indexsupply/indexsupply.com/blob/master/src/shovel/docs/index.md#2025-04-17_snippet_19\n\nLANGUAGE: sql\nCODE:\n```\n                Table \"public.minimal\"\n  Column   |  Type   | Collation | Nullable | Default\n-----------+---------+-----------+----------+---------\n ig_name   | text    |           |          |\n src_name  | text    |           |          |\n block_num | numeric |           |          |\n tx_idx    | integer |           |          |\nIndexes:\n    \"u_minimal\" UNIQUE, btree (ig_name, src_name, block_num, tx_idx)\n```\n\n----------------------------------------\n\nTITLE: Printing Shovel Schema in SQL\nDESCRIPTION: Example output of Shovel's --print-schema command, which generates SQL statements to create tables and indexes based on the Config's Integrations. This is useful for testing and exploring Shovel's data structure.\nSOURCE: https://github.com/indexsupply/indexsupply.com/blob/master/src/shovel/docs/index.md#2025-04-17_snippet_17\n\nLANGUAGE: sql\nCODE:\n```\ncreate table if not exists usdc(\n\tlog_addr bytea,\n\tblock_time numeric,\n\t\"from\" bytea,\n\t\"to\" bytea,\n\tvalue numeric,\n\tig_name text,\n\tsrc_name text,\n\tblock_num numeric,\n\ttx_idx int,\n\tlog_idx int,\n\tabi_idx int2\n);\ncreate unique index if not exists u_usdc on usdc (\n\tig_name,\n\tsrc_name,\n\tblock_num,\n\ttx_idx,\n\tlog_idx,\n\tabi_idx\n);\n```\n\n----------------------------------------\n\nTITLE: Querying Token Transfers in PostgreSQL\nDESCRIPTION: A PostgreSQL query example that shows the schema and retrieves data from the 'transfers' table populated by Shovel. The result includes block time, transaction details, and token transfer information.\nSOURCE: https://github.com/indexsupply/indexsupply.com/blob/master/src/shovel/index.md#2025-04-17_snippet_1\n\nLANGUAGE: sql\nCODE:\n```\nshovel=# select * from transfers limit 1;\n-[ RECORD 1 ]------------------------------------------\nblock_time | 1699912391\nf          | \\x66a89e05525bc2d4de6973ed2f30015f8ac4f165\nt          | \\x7e40bfd3d80e060cdd7b8970ec967eb8adf121f9\nv          | 227300000\nig_name    | tokens\nsrc_name   | mainnet\nblock_num  | 18565786\ntx_idx     | 17\nlog_idx    | 0\nabi_idx    | 0\nlog_addr   | \\xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48\n```\n\n----------------------------------------\n\nTITLE: Downloading Shovel Binaries\nDESCRIPTION: These commands show how to download and make executable the Shovel binary for macOS and Linux systems, followed by a version check.\nSOURCE: https://github.com/indexsupply/indexsupply.com/blob/master/src/shovel/docs/index.md#2025-04-17_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n# For Mac\ncurl -LO https://indexsupply.net/bin/1.6/darwin/arm64/shovel\nchmod +x shovel\n\n# For Linux\ncurl -LO https://indexsupply.net/bin/1.6/linux/amd64/shovel\nchmod +x shovel\n\n# Test\n./shovel -version\nv1.6 582d\n```\n\n----------------------------------------\n\nTITLE: Building Shovel from Source\nDESCRIPTION: This set of bash commands demonstrates how to clone the Shovel repository, navigate to the project directory, and build the application from source using Go.\nSOURCE: https://github.com/indexsupply/indexsupply.com/blob/master/src/shovel/docs/index.md#2025-04-17_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\ngit clone https://github.com/indexsupply/code.git shovel\ncd shovel\ngo run ./cmd/shovel\n```\n\n----------------------------------------\n\nTITLE: Logging Unsynchronized Ethereum Node Error in Shovel\nDESCRIPTION: Example of an error log message when Shovel encounters an unsynchronized Ethereum node. This helps operators identify issues with the Ethereum API provider.\nSOURCE: https://github.com/indexsupply/indexsupply.com/blob/master/src/shovel/docs/index.md#2025-04-17_snippet_10\n\nLANGUAGE: plaintext\nCODE:\n```\nerror=getting logs: eth backend missing logs for block\n```\n\n----------------------------------------\n\nTITLE: HTML Customer Case Studies Page Structure\nDESCRIPTION: HTML markup for the case studies page showing customer logos and descriptions of Index Supply's services for each client.\nSOURCE: https://github.com/indexsupply/indexsupply.com/blob/master/src/customer-case-studies.md#2025-04-17_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n# <a href=\"/\">Index Supply</a> / Customer case studies\n\n<div class=\"logos\">\n<img src=\"https://indexsupply.com/images/daimo.png\" />\n</div>\n```\n\n----------------------------------------\n\nTITLE: Defining HTML Page Title for Engineer Job Posting\nDESCRIPTION: HTML title tag defining the page title as 'Index Supply / Engineer #1', which establishes the context for the job posting.\nSOURCE: https://github.com/indexsupply/indexsupply.com/blob/master/src/engineer-1.md#2025-04-17_snippet_0\n\nLANGUAGE: HTML\nCODE:\n```\n<title>Index Supply / Engineer #1</title>\n```\n\n----------------------------------------\n\nTITLE: Styling Headings and Paragraphs with CSS\nDESCRIPTION: CSS styling rules that remove bottom margin from h1 elements and set minimal top margins for paragraphs, creating a clean and compact layout for the job posting.\nSOURCE: https://github.com/indexsupply/indexsupply.com/blob/master/src/engineer-1.md#2025-04-17_snippet_1\n\nLANGUAGE: CSS\nCODE:\n```\n<style>\n    h1 {\n        margin-bottom: 0;\n    }\n    p {\n        margin: 5px 0 0 0;\n    }\n</style>\n```"
  }
]